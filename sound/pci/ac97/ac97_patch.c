multiline_comment|/*&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *  Universal interface for Audio Codec &squot;97&n; *&n; *  For more details look to AC &squot;97 component specification revision 2.2&n; *  by Intel Corporation (http://developer.intel.com) and to datasheets&n; *  for specific codecs.&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/ac97_codec.h&gt;
macro_line|#include &quot;ac97_patch.h&quot;
macro_line|#include &quot;ac97_id.h&quot;
macro_line|#include &quot;ac97_local.h&quot;
multiline_comment|/*&n; *  Chip specific initialization&n; */
DECL|function|patch_build_controls
r_static
r_int
id|patch_build_controls
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_const
id|snd_kcontrol_new_t
op_star
id|controls
comma
r_int
id|count
)paren
(brace
r_int
id|idx
comma
id|err
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|count
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|controls
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* set to the page, update bits and restore the page */
DECL|function|ac97_update_bits_page
r_static
r_int
id|ac97_update_bits_page
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|value
comma
r_int
r_int
id|page
)paren
(brace
r_int
r_int
id|page_save
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;mutex
)paren
suffix:semicolon
id|page_save
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
)paren
op_amp
id|AC97_PAGE_MASK
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|AC97_PAGE_MASK
comma
id|page
)paren
suffix:semicolon
id|ret
op_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
id|mask
comma
id|value
)paren
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|AC97_PAGE_MASK
comma
id|page_save
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;mutex
)paren
suffix:semicolon
multiline_comment|/* unlock paging */
r_return
id|ret
suffix:semicolon
)brace
multiline_comment|/* The following snd_ac97_ymf753_... items added by David Shust (dshust@shustring.com) */
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the type of speakers being used. */
DECL|function|snd_ac97_ymf753_info_speaker
r_static
r_int
id|snd_ac97_ymf753_info_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Standard&quot;
comma
l_string|&quot;Small&quot;
comma
l_string|&quot;Smaller&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_get_speaker
r_static
r_int
id|snd_ac97_ymf753_get_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_3D_MODE_SEL
)braket
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
l_int|10
)paren
op_amp
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|val
OG
l_int|0
)paren
multiline_comment|/* 0 = invalid */
id|val
op_decrement
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_put_speaker
r_static
r_int
id|snd_ac97_ymf753_put_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
op_lshift
l_int|10
suffix:semicolon
r_return
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ymf753_controls_speaker
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_speaker
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;3D Control - Speaker&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_info_speaker
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_get_speaker
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_put_speaker
comma
)brace
suffix:semicolon
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the source to direct to the S/PDIF output. */
DECL|function|snd_ac97_ymf753_spdif_source_info
r_static
r_int
id|snd_ac97_ymf753_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_get
r_static
r_int
id|snd_ac97_ymf753_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|1
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_put
r_static
r_int
id|snd_ac97_ymf753_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|1
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0002
comma
id|val
)paren
suffix:semicolon
)brace
multiline_comment|/* The AC&squot;97 spec states that the S/PDIF signal is to be output at pin 48.&n;   The YMF753 will output the S/PDIF signal to pin 43, 47 (EAPD), or 48.&n;   By default, no output pin is selected, and the S/PDIF signal is not output.&n;   There is also a bit to mute S/PDIF output in a vendor-specific register. */
DECL|function|snd_ac97_ymf753_spdif_output_pin_info
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Disabled&quot;
comma
l_string|&quot;Pin 43&quot;
comma
l_string|&quot;Pin 48&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_get
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_amp
l_int|0x0008
)paren
ques
c_cond
l_int|2
suffix:colon
(paren
id|val
op_amp
l_int|0x0020
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_put
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|2
)paren
ques
c_cond
l_int|0x0008
suffix:colon
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|1
)paren
ques
c_cond
l_int|0x0020
suffix:colon
l_int|0
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0028
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* The following can be used to direct S/PDIF output to pin 47 (EAPD).&n;&t;   snd_ac97_write_cache(ac97, 0x62, snd_ac97_read(ac97, 0x62) | 0x0008); */
)brace
DECL|variable|snd_ac97_ymf753_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_spdif
(braket
l_int|3
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_source_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_source_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_source_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Output Pin&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_output_pin_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_output_pin_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_output_pin_put
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|NONE
comma
id|NONE
)paren
l_string|&quot;Mute&quot;
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|2
comma
l_int|1
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|function|patch_yamaha_ymf753_3d
r_static
r_int
id|patch_yamaha_ymf753_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control - Wide&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
id|AC97_3D_CONTROL
comma
l_int|9
comma
l_int|7
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_ymf753_controls_speaker
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
l_int|0x0c00
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_yamaha_ymf753_post_spdif
r_static
r_int
id|patch_yamaha_ymf753_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ymf753_controls_spdif
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ymf753_controls_spdif
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_yamaha_ymf753_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_yamaha_ymf753_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_yamaha_ymf753_3d
comma
dot
id|build_post_spdif
op_assign
id|patch_yamaha_ymf753_post_spdif
)brace
suffix:semicolon
DECL|function|patch_yamaha_ymf753
r_int
id|patch_yamaha_ymf753
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* Patch for Yamaha YMF753, Copyright (c) by David Shust, dshust@shustring.com.&n;&t;   This chip has nonstandard and extended behaviour with regard to its S/PDIF output.&n;&t;   The AC&squot;97 spec states that the S/PDIF signal is to be output at pin 48.&n;&t;   The YMF753 will ouput the S/PDIF signal to pin 43, 47 (EAPD), or 48.&n;&t;   By default, no output pin is selected, and the S/PDIF signal is not output.&n;&t;   There is also a bit to mute S/PDIF output in a vendor-specific register.&n;&t;*/
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_yamaha_ymf753_ops
suffix:semicolon
id|ac97-&gt;caps
op_or_assign
id|AC97_BC_BASS_TREBLE
suffix:semicolon
id|ac97-&gt;caps
op_or_assign
l_int|0x04
op_lshift
l_int|10
suffix:semicolon
multiline_comment|/* Yamaha 3D enhancement */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * May 2, 2003 Liam Girdwood &lt;liam.girdwood@wolfsonmicro.com&gt;&n; *  removed broken wolfson00 patch.&n; *  added support for WM9705,WM9708,WM9709,WM9710,WM9711,WM9712 and WM9717.&n; */
DECL|function|patch_wolfson03
r_int
id|patch_wolfson03
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* This is known to work for the ViewSonic ViewPad 1000&n;&t;   Randolph Bentson &lt;bentson@holmsjoen.com&gt; */
singleline_comment|// WM9703/9707/9708/9717
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0x8000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson04
r_int
id|patch_wolfson04
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9704M/9704Q
singleline_comment|// set front and rear mixer volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_RMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
singleline_comment|// patch for DVD noise
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_TEST
comma
l_int|0x0200
)paren
suffix:semicolon
singleline_comment|// init vol
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_RPCM_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
singleline_comment|// set rear surround volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson05
r_int
id|patch_wolfson05
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9705, WM9710
singleline_comment|// set front mixer volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson11
r_int
id|patch_wolfson11
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9711, WM9712
singleline_comment|// set out3 volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9711_OUT3VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Tritech codec&n; */
DECL|function|patch_tritech_tr28028
r_int
id|patch_tritech_tr28028
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0300
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Sigmatel STAC97xx codecs&n; */
DECL|function|patch_sigmatel_stac9700_3d
r_static
r_int
id|patch_sigmatel_stac9700_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
id|AC97_3D_CONTROL
comma
l_int|2
comma
l_int|3
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9708_3d
r_static
r_int
id|patch_sigmatel_stac9708_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
id|AC97_3D_CONTROL
comma
l_int|0
comma
l_int|3
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;bus-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Rear Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
id|AC97_3D_CONTROL
comma
l_int|2
comma
l_int|3
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_sigmatel_4speaker
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_4speaker
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel 4-Speaker Stereo Playback Switch&quot;
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_phaseinvert
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_phaseinvert
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel Surround Phase Inversion Playback Switch&quot;
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel DAC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel ADC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac97xx_specific
r_static
r_int
id|patch_sigmatel_stac97xx_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_amp
op_complement
l_int|0x0003
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|1
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|2
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_4speaker
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|3
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_phaseinvert
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_sigmatel_stac9700_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_sigmatel_stac9700_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_sigmatel_stac9700_3d
comma
dot
id|build_specific
op_assign
id|patch_sigmatel_stac97xx_specific
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac9700
r_int
id|patch_sigmatel_stac9700
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9708_specific
r_static
r_int
id|patch_sigmatel_stac9708_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_ac97_rename_vol_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Headphone Playback&quot;
comma
l_string|&quot;Sigmatel Surround Playback&quot;
)paren
suffix:semicolon
r_return
id|patch_sigmatel_stac97xx_specific
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
DECL|variable|patch_sigmatel_stac9708_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_sigmatel_stac9708_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_sigmatel_stac9708_3d
comma
dot
id|build_specific
op_assign
id|patch_sigmatel_stac9708_specific
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac9708
r_int
id|patch_sigmatel_stac9708
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|codec72
comma
id|codec6c
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9708_ops
suffix:semicolon
id|ac97-&gt;caps
op_or_assign
l_int|0x10
suffix:semicolon
multiline_comment|/* HP (sigmatel surround) support */
id|codec72
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
)paren
op_amp
l_int|0x8000
suffix:semicolon
id|codec6c
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0007
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1001
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|0x0008
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0x0080
)paren
)paren
(brace
multiline_comment|/* nothing */
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9721
r_int
id|patch_sigmatel_stac9721
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_eq
l_int|0
)paren
(brace
singleline_comment|// patch for SigmaTel
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x4000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9744
r_int
id|patch_sigmatel_stac9744
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9756
r_int
id|patch_sigmatel_stac9756
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_output_jack_info
r_static
r_int
id|snd_ac97_stac9758_output_jack_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|5
)braket
op_assign
(brace
l_string|&quot;Input/Disabled&quot;
comma
l_string|&quot;Front Output&quot;
comma
l_string|&quot;Rear Output&quot;
comma
l_string|&quot;Center/LFE Output&quot;
comma
l_string|&quot;Mixer Output&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|4
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|4
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_output_jack_get
r_static
r_int
id|snd_ac97_stac9758_output_jack_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_SIGMATEL_OUTSEL
)braket
op_rshift
id|shift
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
l_int|4
)paren
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|1
op_plus
(paren
id|val
op_amp
l_int|3
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_output_jack_put
r_static
r_int
id|snd_ac97_stac9758_output_jack_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|4
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
id|val
op_assign
l_int|0
suffix:semicolon
r_else
id|val
op_assign
l_int|4
op_or
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
)paren
suffix:semicolon
r_return
id|ac97_update_bits_page
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_OUTSEL
comma
l_int|7
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_input_jack_info
r_static
r_int
id|snd_ac97_stac9758_input_jack_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|7
)braket
op_assign
(brace
l_string|&quot;Mic2 Jack&quot;
comma
l_string|&quot;Mic1 Jack&quot;
comma
l_string|&quot;Line In Jack&quot;
comma
l_string|&quot;Front Jack&quot;
comma
l_string|&quot;Rear Jack&quot;
comma
l_string|&quot;Center/LFE Jack&quot;
comma
l_string|&quot;Mute&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|6
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|6
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_input_jack_get
r_static
r_int
id|snd_ac97_stac9758_input_jack_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_SIGMATEL_INSEL
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
id|shift
)paren
op_amp
l_int|7
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_input_jack_put
r_static
r_int
id|snd_ac97_stac9758_input_jack_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_return
id|ac97_update_bits_page
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_INSEL
comma
l_int|7
op_lshift
id|shift
comma
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
id|shift
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_phonesel_info
r_static
r_int
id|snd_ac97_stac9758_phonesel_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;None&quot;
comma
l_string|&quot;Front Jack&quot;
comma
l_string|&quot;Rear Jack&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_phonesel_get
r_static
r_int
id|snd_ac97_stac9758_phonesel_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|ac97-&gt;regs
(braket
id|AC97_SIGMATEL_IOMISC
)braket
op_amp
l_int|3
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_stac9758_phonesel_put
r_static
r_int
id|snd_ac97_stac9758_phonesel_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|ac97_update_bits_page
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_IOMISC
comma
l_int|3
comma
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|macro|STAC9758_OUTPUT_JACK
mdefine_line|#define STAC9758_OUTPUT_JACK(xname, shift) &bslash;&n;{&t;.iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, &bslash;&n;&t;.info = snd_ac97_stac9758_output_jack_info, &bslash;&n;&t;.get = snd_ac97_stac9758_output_jack_get, &bslash;&n;&t;.put = snd_ac97_stac9758_output_jack_put, &bslash;&n;&t;.private_value = shift }
DECL|macro|STAC9758_INPUT_JACK
mdefine_line|#define STAC9758_INPUT_JACK(xname, shift) &bslash;&n;{&t;.iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, &bslash;&n;&t;.info = snd_ac97_stac9758_input_jack_info, &bslash;&n;&t;.get = snd_ac97_stac9758_input_jack_get, &bslash;&n;&t;.put = snd_ac97_stac9758_input_jack_put, &bslash;&n;&t;.private_value = shift }
DECL|variable|snd_ac97_sigmatel_stac9758_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_stac9758_controls
(braket
)braket
op_assign
(brace
id|STAC9758_OUTPUT_JACK
c_func
(paren
l_string|&quot;Mic1 Jack&quot;
comma
l_int|1
)paren
comma
id|STAC9758_OUTPUT_JACK
c_func
(paren
l_string|&quot;LineIn Jack&quot;
comma
l_int|4
)paren
comma
id|STAC9758_OUTPUT_JACK
c_func
(paren
l_string|&quot;Front Jack&quot;
comma
l_int|7
)paren
comma
id|STAC9758_OUTPUT_JACK
c_func
(paren
l_string|&quot;Rear Jack&quot;
comma
l_int|10
)paren
comma
id|STAC9758_OUTPUT_JACK
c_func
(paren
l_string|&quot;Center/LFE Jack&quot;
comma
l_int|13
)paren
comma
id|STAC9758_INPUT_JACK
c_func
(paren
l_string|&quot;Mic Input Source&quot;
comma
l_int|0
)paren
comma
id|STAC9758_INPUT_JACK
c_func
(paren
l_string|&quot;Line Input Source&quot;
comma
l_int|8
)paren
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Headphone Amp&quot;
comma
dot
id|info
op_assign
id|snd_ac97_stac9758_phonesel_info
comma
dot
id|get
op_assign
id|snd_ac97_stac9758_phonesel_get
comma
dot
id|put
op_assign
id|snd_ac97_stac9758_phonesel_put
)brace
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Exchange Center/LFE&quot;
comma
id|AC97_SIGMATEL_IOMISC
comma
l_int|4
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Headphone +3dB Boost&quot;
comma
id|AC97_SIGMATEL_IOMISC
comma
l_int|8
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac9758_specific
r_static
r_int
id|patch_sigmatel_stac9758_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|err
op_assign
id|patch_sigmatel_stac97xx_specific
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_sigmatel_stac9758_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_sigmatel_stac9758_controls
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* DAC-A direct */
id|snd_ac97_rename_vol_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Headphone Playback&quot;
comma
l_string|&quot;Front Playback&quot;
)paren
suffix:semicolon
multiline_comment|/* DAC-A to Mix = PCM */
multiline_comment|/* DAC-B direct = Surround */
multiline_comment|/* DAC-B to Mix */
id|snd_ac97_rename_vol_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Video Playback&quot;
comma
l_string|&quot;Surround Mix Playback&quot;
)paren
suffix:semicolon
multiline_comment|/* DAC-C direct = Center/LFE */
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_sigmatel_stac9758_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_sigmatel_stac9758_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_sigmatel_stac9700_3d
comma
dot
id|build_specific
op_assign
id|patch_sigmatel_stac9758_specific
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac9758
r_int
id|patch_sigmatel_stac9758
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_static
r_int
r_int
id|regs
(braket
l_int|4
)braket
op_assign
(brace
id|AC97_SIGMATEL_OUTSEL
comma
id|AC97_SIGMATEL_IOMISC
comma
id|AC97_SIGMATEL_INSEL
comma
id|AC97_SIGMATEL_VARIOUS
)brace
suffix:semicolon
r_static
r_int
r_int
id|def_regs
(braket
l_int|4
)braket
op_assign
(brace
multiline_comment|/* OUTSEL */
l_int|0xd794
comma
multiline_comment|/* CL:CL, SR:SR, LO:MX, LI:DS, MI:DS */
multiline_comment|/* IOMISC */
l_int|0x2001
comma
multiline_comment|/* INSEL */
l_int|0x0201
comma
multiline_comment|/* LI:LI, MI:M1 */
multiline_comment|/* VARIOUS */
l_int|0x0040
)brace
suffix:semicolon
r_static
r_int
r_int
id|m675_regs
(braket
l_int|4
)braket
op_assign
(brace
multiline_comment|/* OUTSEL */
l_int|0xfc70
comma
multiline_comment|/* CL:MX, SR:MX, LO:DS, LI:MX, MI:DS */
multiline_comment|/* IOMISC */
l_int|0x2102
comma
multiline_comment|/* HP amp on */
multiline_comment|/* INSEL */
l_int|0x0203
comma
multiline_comment|/* LI:LI, MI:FR */
multiline_comment|/* VARIOUS */
l_int|0x0041
multiline_comment|/* stereo mic */
)brace
suffix:semicolon
r_int
r_int
op_star
id|pregs
op_assign
id|def_regs
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Gateway M675 notebook */
r_if
c_cond
(paren
id|ac97-&gt;pci
op_logical_and
id|ac97-&gt;subsystem_vendor
op_eq
l_int|0x107b
op_logical_and
id|ac97-&gt;subsystem_device
op_eq
l_int|0x0601
)paren
id|pregs
op_assign
id|m675_regs
suffix:semicolon
singleline_comment|// patch for SigmaTel
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9758_ops
suffix:semicolon
multiline_comment|/* FIXME: assume only page 0 for writing cache */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|AC97_PAGE_MASK
comma
id|AC97_PAGE_VENDOR
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|regs
(braket
id|i
)braket
comma
id|pregs
(braket
id|i
)braket
)paren
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_STEREO_MUTES
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Cirrus Logic CS42xx codecs&n; */
DECL|variable|snd_ac97_cirrus_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CSR_SPDIF
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;AC97-SPSA&quot;
comma
id|AC97_CSR_ACMODE
comma
l_int|0
comma
l_int|3
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_cirrus_build_spdif
r_static
r_int
id|patch_cirrus_build_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
multiline_comment|/* con mask, pro mask, default */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_spdif
(braket
l_int|0
)braket
comma
l_int|3
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* switch, spsa */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_switch
c_cond
(paren
id|ac97-&gt;id
op_amp
id|AC97_ID_CS_MASK
)paren
(brace
r_case
id|AC97_ID_CS4205
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|1
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CSR_SPDIF
comma
l_int|0x0a20
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_cirrus_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cirrus_ops
op_assign
(brace
dot
id|build_spdif
op_assign
id|patch_cirrus_build_spdif
)brace
suffix:semicolon
DECL|function|patch_cirrus_spdif
r_int
id|patch_cirrus_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* Basically, the cs4201/cs4205/cs4297a has non-standard sp/dif registers.&n;&t;   WHY CAN&squot;T ANYONE FOLLOW THE BLOODY SPEC?  *sigh*&n;&t;   - sp/dif EA ID is not set, but sp/dif is always present.&n;&t;   - enable/disable is spdif register bit 15.&n;&t;   - sp/dif control register is 0x68.  differs from AC97:&n;&t;   - valid is bit 14 (vs 15)&n;&t;   - no DRS&n;&t;   - only 44.1/48k [00 = 48, 01=44,1] (AC97 is 00=44.1, 10=48)&n;&t;   - sp/dif ssource select is in 0x5e bits 0,1.&n;&t;*/
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cirrus_ops
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_CS_SPDIF
suffix:semicolon
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_and_assign
op_complement
id|SNDRV_PCM_RATE_32000
suffix:semicolon
id|ac97-&gt;ext_id
op_or_assign
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* force the detection of spdif */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CSR_ACMODE
comma
l_int|0x0080
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_cirrus_cs4299
r_int
id|patch_cirrus_cs4299
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* force the detection of PC Beep */
id|ac97-&gt;flags
op_or_assign
id|AC97_HAS_PC_BEEP
suffix:semicolon
r_return
id|patch_cirrus_spdif
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Conexant codecs&n; */
DECL|variable|snd_ac97_conexant_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_conexant_controls_spdif
(braket
l_int|1
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CXR_AUDIO_MISC
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_conexant_build_spdif
r_static
r_int
id|patch_conexant_build_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
multiline_comment|/* con mask, pro mask, default */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_spdif
(braket
l_int|0
)braket
comma
l_int|3
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* switch */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_conexant_controls_spdif
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
)paren
op_amp
op_complement
(paren
id|AC97_CXR_SPDIFEN
op_or
id|AC97_CXR_COPYRGT
op_or
id|AC97_CXR_SPDIF_MASK
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_conexant_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_conexant_ops
op_assign
(brace
dot
id|build_spdif
op_assign
id|patch_conexant_build_spdif
)brace
suffix:semicolon
DECL|function|patch_conexant
r_int
id|patch_conexant
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_conexant_ops
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_CX_SPDIF
suffix:semicolon
id|ac97-&gt;ext_id
op_or_assign
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* force the detection of spdif */
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
multiline_comment|/* 48k only */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Analog Device AD18xx, AD19xx codecs&n; */
macro_line|#ifdef CONFIG_PM
DECL|function|ad18xx_resume
r_static
r_void
id|ad18xx_resume
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_static
r_int
r_int
id|setup_regs
(braket
)braket
op_assign
(brace
id|AC97_AD_MISC
comma
id|AC97_AD_SERIAL_CFG
comma
id|AC97_AD_JACK_SPDIF
comma
)brace
suffix:semicolon
r_int
id|i
comma
id|codec
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
r_int
)paren
id|ARRAY_SIZE
c_func
(paren
id|setup_regs
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
r_int
id|reg
op_assign
id|setup_regs
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|reg
comma
id|ac97-&gt;reg_accessed
)paren
)paren
(brace
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|ac97-&gt;regs
(braket
id|reg
)braket
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ac97-&gt;flags
op_amp
id|AC97_AD_MULTI
)paren
)paren
multiline_comment|/* normal restore */
id|snd_ac97_restore_status
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_else
(brace
multiline_comment|/* restore the AD18xx codec configurations */
r_for
c_loop
(paren
id|codec
op_assign
l_int|0
suffix:semicolon
id|codec
OL
l_int|3
suffix:semicolon
id|codec
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|ac97-&gt;spec.ad18xx.id
(braket
id|codec
)braket
)paren
r_continue
suffix:semicolon
multiline_comment|/* select single codec */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|codec
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|codec
)braket
)paren
suffix:semicolon
id|ac97-&gt;bus-&gt;ops
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|codec
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* restore status */
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
l_int|0x7c
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
id|AC97_POWERDOWN
op_logical_or
id|i
op_eq
id|AC97_EXTENDED_ID
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|i
comma
id|ac97-&gt;reg_accessed
)paren
)paren
(brace
multiline_comment|/* handle multi codecs for AD18xx */
r_if
c_cond
(paren
id|i
op_eq
id|AC97_PCM
)paren
(brace
r_for
c_loop
(paren
id|codec
op_assign
l_int|0
suffix:semicolon
id|codec
OL
l_int|3
suffix:semicolon
id|codec
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|ac97-&gt;spec.ad18xx.id
(braket
id|codec
)braket
)paren
r_continue
suffix:semicolon
multiline_comment|/* select single codec */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|codec
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|codec
)braket
)paren
suffix:semicolon
multiline_comment|/* update PCM bits */
id|ac97-&gt;bus-&gt;ops
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_PCM
comma
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
l_int|0x7000
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|i
op_eq
id|AC97_AD_TEST
op_logical_or
id|i
op_eq
id|AC97_AD_CODEC_CFG
op_logical_or
id|i
op_eq
id|AC97_AD_SERIAL_CFG
)paren
r_continue
suffix:semicolon
multiline_comment|/* ignore */
)brace
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|i
comma
id|ac97-&gt;regs
(braket
id|i
)braket
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|i
)paren
suffix:semicolon
)brace
)brace
id|snd_ac97_restore_iec958
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|patch_ad1819
r_int
id|patch_ad1819
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|scfg
suffix:semicolon
singleline_comment|// patch for Analog Devices
id|scfg
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|scfg
op_or
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* select all codecs */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1881_unchained
r_static
r_int
r_int
id|patch_ad1881_unchained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|mask
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
singleline_comment|// test for unchained codec
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
id|mask
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* ID0C, ID1C, SDIE = off */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_assign
id|mask
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|idx
)braket
op_assign
l_int|0x0000
suffix:semicolon
r_return
id|mask
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained1
r_static
r_int
id|patch_ad1881_chained1
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|codec_bits
)paren
(brace
r_static
r_int
id|cfg_bits
(braket
l_int|3
)braket
op_assign
(brace
l_int|1
op_lshift
l_int|12
comma
l_int|1
op_lshift
l_int|14
comma
l_int|1
op_lshift
l_int|13
)brace
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
id|cfg_bits
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0004
)paren
suffix:semicolon
singleline_comment|// SDIE
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|codec_bits
)paren
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
id|codec_bits
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
op_assign
id|cfg_bits
(braket
id|idx
)braket
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|idx
)braket
op_assign
id|codec_bits
ques
c_cond
id|codec_bits
suffix:colon
l_int|0x0004
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained
r_static
r_void
id|patch_ad1881_chained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|unchained_idx
comma
r_int
id|cidx1
comma
r_int
id|cidx2
)paren
(brace
singleline_comment|// already detected?
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx1
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx1
)braket
)paren
id|cidx1
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx2
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx2
)braket
)paren
id|cidx2
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|cidx1
OL
l_int|0
op_logical_and
id|cidx2
OL
l_int|0
)paren
r_return
suffix:semicolon
singleline_comment|// test for chained codecs
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|unchained_idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0002
)paren
suffix:semicolon
singleline_comment|// ID1C
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|unchained_idx
)braket
op_assign
l_int|0x0002
suffix:semicolon
r_if
c_cond
(paren
id|cidx1
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cidx2
op_ge
l_int|0
)paren
(brace
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|variable|patch_ad1881_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1881_build_ops
op_assign
(brace
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
op_amp
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1881
r_int
id|patch_ad1881
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_static
r_const
r_char
id|cfg_idxs
(braket
l_int|3
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|2
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|2
)brace
comma
(brace
l_int|0
comma
l_int|1
)brace
)brace
suffix:semicolon
singleline_comment|// patch for Analog Devices
r_int
r_int
id|codecs
(braket
l_int|3
)braket
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|idx
comma
id|num
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|val
)paren
suffix:semicolon
id|codecs
(braket
l_int|0
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|0
comma
(paren
l_int|1
op_lshift
l_int|12
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|1
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|1
comma
(paren
l_int|1
op_lshift
l_int|14
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|2
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|2
comma
(paren
l_int|1
op_lshift
l_int|13
)paren
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|codecs
(braket
l_int|0
)braket
op_or
id|codecs
(braket
l_int|1
)braket
op_or
id|codecs
(braket
l_int|2
)braket
comma
r_goto
id|__end
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
)paren
id|patch_ad1881_chained
c_func
(paren
id|ac97
comma
id|idx
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|0
)braket
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|1
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_SURROUND_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|2
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_CENTER_LFE_DAC
suffix:semicolon
)brace
id|__end
suffix:colon
multiline_comment|/* select all codecs */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* check if only one codec is present */
r_for
c_loop
(paren
id|idx
op_assign
id|num
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
id|num
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|1
)paren
(brace
multiline_comment|/* ok, deselect all ID bits */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|0
)braket
op_assign
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|1
)braket
op_assign
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|2
)braket
op_assign
l_int|0x0000
suffix:semicolon
)brace
multiline_comment|/* required for AD1886/AD1885 combination */
id|ac97-&gt;ext_id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
)paren
(brace
id|ac97-&gt;id
op_and_assign
l_int|0xffff0000
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
suffix:semicolon
)brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1881_build_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_ad1885
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad1885
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Digital Mono Direct&quot;
comma
id|AC97_AD_MISC
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* AC97_SINGLE(&quot;Digital Audio Mode&quot;, AC97_AD_MISC, 12, 1, 0), */
multiline_comment|/* seems problematic */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Low Power Mixer&quot;
comma
id|AC97_AD_MISC
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Zero Fill DAC&quot;
comma
id|AC97_AD_MISC
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Headphone Jack Sense&quot;
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|9
comma
l_int|1
comma
l_int|1
)paren
comma
multiline_comment|/* inverted */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line Jack Sense&quot;
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|8
comma
l_int|1
comma
l_int|1
)paren
comma
multiline_comment|/* inverted */
)brace
suffix:semicolon
DECL|function|patch_ad1885_specific
r_static
r_int
id|patch_ad1885_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_ad1885
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_ad1885
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_ad1885_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1885_build_ops
op_assign
(brace
dot
id|build_specific
op_assign
op_amp
id|patch_ad1885_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
op_amp
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1885
r_int
id|patch_ad1885
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* This is required to deal with the Intel D815EEAL2 */
multiline_comment|/* i.e. Line out is actually headphone out from codec */
multiline_comment|/* set default */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
l_int|0x0404
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1885_build_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1886
r_int
id|patch_ad1886
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* Presario700 workaround */
multiline_comment|/* for Jack Sense/SPDIF Register misetting causing */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|0x0010
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* MISC bits */
DECL|macro|AC97_AD198X_MBC
mdefine_line|#define AC97_AD198X_MBC&t;&t;0x0003&t;/* mic boost */
DECL|macro|AC97_AD198X_MBC_20
mdefine_line|#define AC97_AD198X_MBC_20&t;0x0000&t;/* +20dB */
DECL|macro|AC97_AD198X_MBC_10
mdefine_line|#define AC97_AD198X_MBC_10&t;0x0001&t;/* +10dB */
DECL|macro|AC97_AD198X_MBC_30
mdefine_line|#define AC97_AD198X_MBC_30&t;0x0002&t;/* +30dB */
DECL|macro|AC97_AD198X_VREFD
mdefine_line|#define AC97_AD198X_VREFD&t;0x0004&t;/* VREF high-Z */
DECL|macro|AC97_AD198X_VREFH
mdefine_line|#define AC97_AD198X_VREFH&t;0x0008&t;/* 2.25V, 3.7V */
DECL|macro|AC97_AD198X_VREF_0
mdefine_line|#define AC97_AD198X_VREF_0&t;0x000c&t;/* 0V */
DECL|macro|AC97_AD198X_SRU
mdefine_line|#define AC97_AD198X_SRU&t;&t;0x0010&t;/* sample rate unlock */
DECL|macro|AC97_AD198X_LOSEL
mdefine_line|#define AC97_AD198X_LOSEL&t;0x0020&t;/* LINE_OUT amplifiers input select */
DECL|macro|AC97_AD198X_2MIC
mdefine_line|#define AC97_AD198X_2MIC&t;0x0040&t;/* 2-channel mic select */
DECL|macro|AC97_AD198X_SPRD
mdefine_line|#define AC97_AD198X_SPRD&t;0x0080&t;/* SPREAD enable */
DECL|macro|AC97_AD198X_DMIX0
mdefine_line|#define AC97_AD198X_DMIX0&t;0x0100&t;/* downmix mode: 0 = 6-to-4, 1 = 6-to-2 downmix */
DECL|macro|AC97_AD198X_DMIX1
mdefine_line|#define AC97_AD198X_DMIX1&t;0x0200&t;/* downmix mode: 1 = enabled */
DECL|macro|AC97_AD198X_HPSEL
mdefine_line|#define AC97_AD198X_HPSEL&t;0x0400&t;/* headphone amplifier input select */
DECL|macro|AC97_AD198X_CLDIS
mdefine_line|#define AC97_AD198X_CLDIS&t;0x0800&t;/* center/lfe disable */
DECL|macro|AC97_AD198X_LODIS
mdefine_line|#define AC97_AD198X_LODIS&t;0x1000&t;/* LINE_OUT disable */
DECL|macro|AC97_AD198X_MSPLT
mdefine_line|#define AC97_AD198X_MSPLT&t;0x2000&t;/* mute split */
DECL|macro|AC97_AD198X_AC97NC
mdefine_line|#define AC97_AD198X_AC97NC&t;0x4000&t;/* AC97 no compatible mode */
DECL|macro|AC97_AD198X_DACZ
mdefine_line|#define AC97_AD198X_DACZ&t;0x8000&t;/* DAC zero-fill mode */
DECL|function|snd_ac97_ad198x_spdif_source_info
r_static
r_int
id|snd_ac97_ad198x_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad198x_spdif_source_get
r_static
r_int
id|snd_ac97_ad198x_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_AD_SERIAL_CFG
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad198x_spdif_source_put
r_static
r_int
id|snd_ac97_ad198x_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|2
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x0004
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad198x_spdif_source
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad198x_spdif_source
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ad198x_spdif_source_info
comma
dot
id|get
op_assign
id|snd_ac97_ad198x_spdif_source_get
comma
dot
id|put
op_assign
id|snd_ac97_ad198x_spdif_source_put
comma
)brace
suffix:semicolon
DECL|function|patch_ad198x_post_spdif
r_static
r_int
id|patch_ad198x_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_ad198x_spdif_source
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad1981x_jack_sense
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad1981x_jack_sense
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Headphone Jack Sense&quot;
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line Jack Sense&quot;
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_ad1981a_specific
r_static
r_int
id|patch_ad1981a_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ad1981x_jack_sense
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ad1981x_jack_sense
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1981a_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1981a_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
id|patch_ad198x_post_spdif
comma
dot
id|build_specific
op_assign
id|patch_ad1981a_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1981a
r_int
id|patch_ad1981a
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1981a_build_ops
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|AC97_AD198X_MSPLT
comma
id|AC97_AD198X_MSPLT
)paren
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_STEREO_MUTES
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|1
op_lshift
l_int|11
comma
l_int|1
op_lshift
l_int|11
)paren
suffix:semicolon
multiline_comment|/* HP jack sense */
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad198x_2cmic
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad198x_2cmic
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Stereo Mic&quot;
comma
id|AC97_AD_MISC
comma
l_int|6
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|function|patch_ad1981b_specific
r_static
r_int
id|patch_ad1981b_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_ad198x_2cmic
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ad1981x_jack_sense
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ad1981x_jack_sense
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1981b_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1981b_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
id|patch_ad198x_post_spdif
comma
dot
id|build_specific
op_assign
id|patch_ad1981b_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1981b
r_int
id|patch_ad1981b
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1981b_build_ops
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|AC97_AD198X_MSPLT
comma
id|AC97_AD198X_MSPLT
)paren
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_STEREO_MUTES
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|1
op_lshift
l_int|11
comma
l_int|1
op_lshift
l_int|11
)paren
suffix:semicolon
multiline_comment|/* HP jack sense */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_lohpsel_info
r_static
r_int
id|snd_ac97_ad1888_lohpsel_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_lohpsel_get
r_static
r_int
id|snd_ac97_ad1888_lohpsel_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_AD_MISC
)braket
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
op_logical_neg
(paren
id|val
op_amp
id|AC97_AD198X_LOSEL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_lohpsel_put
r_static
r_int
id|snd_ac97_ad1888_lohpsel_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
op_logical_neg
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
id|AC97_AD198X_LOSEL
op_or
id|AC97_AD198X_HPSEL
)paren
suffix:colon
l_int|0
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|AC97_AD198X_LOSEL
op_or
id|AC97_AD198X_HPSEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_downmix_info
r_static
r_int
id|snd_ac97_ad1888_downmix_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Off&quot;
comma
l_string|&quot;6 -&gt; 4&quot;
comma
l_string|&quot;6 -&gt; 2&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_downmix_get
r_static
r_int
id|snd_ac97_ad1888_downmix_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_AD_MISC
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
id|AC97_AD198X_DMIX1
)paren
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|1
op_plus
(paren
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1888_downmix_put
r_static
r_int
id|snd_ac97_ad1888_downmix_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
id|val
op_assign
l_int|0
suffix:semicolon
r_else
id|val
op_assign
id|AC97_AD198X_DMIX1
op_or
(paren
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|AC97_AD198X_DMIX0
op_or
id|AC97_AD198X_DMIX1
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad1888_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad1888_controls
(braket
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Exchange Front/Surround&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ad1888_lohpsel_info
comma
dot
id|get
op_assign
id|snd_ac97_ad1888_lohpsel_get
comma
dot
id|put
op_assign
id|snd_ac97_ad1888_lohpsel_put
)brace
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Spread Front to Surround and Center/LFE&quot;
comma
id|AC97_AD_MISC
comma
l_int|7
comma
l_int|1
comma
l_int|0
)paren
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Downmix&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ad1888_downmix_info
comma
dot
id|get
op_assign
id|snd_ac97_ad1888_downmix_get
comma
dot
id|put
op_assign
id|snd_ac97_ad1888_downmix_put
)brace
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround Jack as Input&quot;
comma
id|AC97_AD_MISC
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE Jack as Input&quot;
comma
id|AC97_AD_MISC
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_ad1888_specific
r_static
r_int
id|patch_ad1888_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* rename 0x04 as &quot;Master&quot; and 0x02 as &quot;Master Surround&quot; */
id|snd_ac97_rename_vol_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Master Playback&quot;
comma
l_string|&quot;Master Surround Playback&quot;
)paren
suffix:semicolon
id|snd_ac97_rename_vol_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Headphone Playback&quot;
comma
l_string|&quot;Master Playback&quot;
)paren
suffix:semicolon
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ad1888_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ad1888_controls
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1888_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1888_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
id|patch_ad198x_post_spdif
comma
dot
id|build_specific
op_assign
id|patch_ad1888_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1888
r_int
id|patch_ad1888
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|misc
suffix:semicolon
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1888_build_ops
suffix:semicolon
multiline_comment|/* Switch FRONT/SURROUND LINE-OUT/HP-OUT default connection */
multiline_comment|/* it seems that most vendors connect line-out connector to headphone out of AC&squot;97 */
multiline_comment|/* AD-compatible mode */
multiline_comment|/* Stereo mutes enabled */
id|misc
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|misc
op_or
id|AC97_AD198X_LOSEL
op_or
id|AC97_AD198X_HPSEL
op_or
id|AC97_AD198X_MSPLT
op_or
id|AC97_AD198X_AC97NC
)paren
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_STEREO_MUTES
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1980_specific
r_static
r_int
id|patch_ad1980_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_ad1888_specific
c_func
(paren
id|ac97
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_ad198x_2cmic
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1980_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1980_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
id|patch_ad198x_post_spdif
comma
dot
id|build_specific
op_assign
id|patch_ad1980_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1980
r_int
id|patch_ad1980
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1888
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1980_build_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad1985_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad1985_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE Jack as Mic&quot;
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|9
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Exchange Center/LFE&quot;
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_ad1985_specific
r_static
r_int
id|patch_ad1985_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_ad1980_specific
c_func
(paren
id|ac97
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ad1985_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ad1985_controls
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1985_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1985_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
id|patch_ad198x_post_spdif
comma
dot
id|build_specific
op_assign
id|patch_ad1985_specific
comma
macro_line|#ifdef CONFIG_PM
dot
id|resume
op_assign
id|ad18xx_resume
macro_line|#endif
)brace
suffix:semicolon
DECL|function|patch_ad1985
r_int
id|patch_ad1985
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|misc
suffix:semicolon
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1985_build_ops
suffix:semicolon
id|misc
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
)paren
suffix:semicolon
multiline_comment|/* switch front/surround line-out/hp-out */
multiline_comment|/* center/LFE, mic in 3.75V mode */
multiline_comment|/* AD-compatible mode */
multiline_comment|/* Stereo mutes enabled */
multiline_comment|/* in accordance with ADI driver: misc | 0x5c28 */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|misc
op_or
id|AC97_AD198X_VREFH
op_or
id|AC97_AD198X_LOSEL
op_or
id|AC97_AD198X_HPSEL
op_or
id|AC97_AD198X_CLDIS
op_or
id|AC97_AD198X_LODIS
op_or
id|AC97_AD198X_MSPLT
op_or
id|AC97_AD198X_AC97NC
)paren
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_STEREO_MUTES
suffix:semicolon
multiline_comment|/* on AD1985 rev. 3, AC&squot;97 revision bits are zero */
id|ac97-&gt;ext_id
op_assign
(paren
id|ac97-&gt;ext_id
op_amp
op_complement
id|AC97_EI_REV_MASK
)paren
op_or
id|AC97_EI_REV_23
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * realtek ALC65x/850 codecs&n; */
DECL|function|snd_ac97_alc650_mic_get
r_static
r_int
id|snd_ac97_alc650_mic_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|AC97_ALC650_MULTICH
)braket
op_rshift
l_int|10
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_alc650_mic_put
r_static
r_int
id|snd_ac97_alc650_mic_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
comma
id|val
suffix:semicolon
id|val
op_assign
op_logical_neg
op_logical_neg
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
)paren
op_amp
(paren
l_int|1
op_lshift
l_int|10
)paren
)paren
suffix:semicolon
id|change
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_ne
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
multiline_comment|/* disable/enable vref */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
comma
l_int|1
op_lshift
l_int|12
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:colon
l_int|0
)paren
suffix:semicolon
multiline_comment|/* turn on/off center-on-mic */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
op_lshift
l_int|10
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|10
)paren
suffix:colon
l_int|0
)paren
suffix:semicolon
multiline_comment|/* GPIO0 high for mic */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_STATUS
comma
l_int|0x100
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x100
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Exchange Center/LFE&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* 4: Analog Input To Surround */
multiline_comment|/* 5: Analog Input To Center/LFE */
multiline_comment|/* 6: Independent Master Volume Right */
multiline_comment|/* 7: Independent Master Volume Left */
multiline_comment|/* 8: reserved */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|9
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* 10: mic, see below */
multiline_comment|/* 11-13: in IEC958 controls */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Swap Surround Slot&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
macro_line|#if 0 /* always set in patch_alc650 */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Clock Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Pin Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround DAC Switch&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround DAC Volume&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE DAC Switch&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Center/LFE DAC Volume&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
macro_line|#endif
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_alc650_mic_get
comma
dot
id|put
op_assign
id|snd_ac97_alc650_mic_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
)brace
suffix:semicolon
DECL|variable|snd_ac97_spdif_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_spdif_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Capture Switch&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Analog to IEC958 Output&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* disable this controls since it doesn&squot;t work as expected */
multiline_comment|/* AC97_SINGLE(&quot;IEC958 Input Monitor&quot;, AC97_ALC650_MULTICH, 13, 1, 0), */
)brace
suffix:semicolon
DECL|function|patch_alc650_specific
r_static
r_int
id|patch_alc650_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_alc650
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_alc650
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_spdif_controls_alc650
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_alc650
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_alc650_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_alc650_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_alc650_specific
)brace
suffix:semicolon
DECL|function|patch_alc650
r_int
id|patch_alc650
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_alc650_ops
suffix:semicolon
multiline_comment|/* determine the revision */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_REVISION
)paren
op_amp
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|val
OL
l_int|3
)paren
id|ac97-&gt;id
op_assign
l_int|0x414c4720
suffix:semicolon
multiline_comment|/* Old version */
r_else
r_if
c_cond
(paren
id|val
OL
l_int|0x10
)paren
id|ac97-&gt;id
op_assign
l_int|0x414c4721
suffix:semicolon
multiline_comment|/* D version */
r_else
r_if
c_cond
(paren
id|val
OL
l_int|0x20
)paren
id|ac97-&gt;id
op_assign
l_int|0x414c4722
suffix:semicolon
multiline_comment|/* E version */
r_else
r_if
c_cond
(paren
id|val
OL
l_int|0x30
)paren
id|ac97-&gt;id
op_assign
l_int|0x414c4723
suffix:semicolon
multiline_comment|/* F version */
multiline_comment|/* revision E or F */
multiline_comment|/* FIXME: what about revision D ? */
id|ac97-&gt;spec.dev_flags
op_assign
(paren
id|ac97-&gt;id
op_eq
l_int|0x414c4722
op_logical_or
id|ac97-&gt;id
op_eq
l_int|0x414c4723
)paren
suffix:semicolon
multiline_comment|/* enable AC97_ALC650_GPIO_SETUP, AC97_ALC650_CLOCK for R/W */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_STATUS
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_STATUS
)paren
op_or
l_int|0x8000
)paren
suffix:semicolon
multiline_comment|/* Enable SPDIF-IN only on Rev.E and above */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
)paren
suffix:semicolon
multiline_comment|/* SPDIF IN with pin 47 */
r_if
c_cond
(paren
id|ac97-&gt;spec.dev_flags
)paren
id|val
op_or_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* enable */
r_else
id|val
op_and_assign
op_complement
l_int|0x03
suffix:semicolon
multiline_comment|/* disable */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* set default: slot 3,4,7,8,6,9&n;&t;   spdif-in monitor off, analog-spdif off, spdif-in off&n;&t;   center on mic off, surround on line-in off&n;&t;   downmix off, duplicate front off&n;&t;*/
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* set GPIO0 for mic bias */
multiline_comment|/* GPIO0 pin output, no interrupt, high */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_SETUP
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_SETUP
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_STATUS
comma
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_GPIO_STATUS
)paren
op_or
l_int|0x100
)paren
op_amp
op_complement
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* full DAC volume */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_alc655_mic_get
r_static
r_int
id|snd_ac97_alc655_mic_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|AC97_ALC650_MULTICH
)braket
op_rshift
l_int|10
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_alc655_mic_put
r_static
r_int
id|snd_ac97_alc655_mic_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
multiline_comment|/* misc control; vrefout disable */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
comma
l_int|1
op_lshift
l_int|12
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:colon
l_int|0
)paren
suffix:semicolon
r_return
id|ac97_update_bits_page
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
op_lshift
l_int|10
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|10
)paren
suffix:colon
l_int|0
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_alc655
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_alc655
(braket
)braket
op_assign
(brace
id|AC97_PAGE_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|0
)paren
comma
id|AC97_PAGE_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|9
comma
l_int|1
comma
l_int|0
comma
l_int|0
)paren
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_alc655_mic_get
comma
dot
id|put
op_assign
id|snd_ac97_alc655_mic_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
)brace
suffix:semicolon
DECL|function|alc655_iec958_route_info
r_static
r_int
id|alc655_iec958_route_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts_655
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;PCM&quot;
comma
l_string|&quot;Analog In&quot;
comma
l_string|&quot;IEC958 In&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|texts_658
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;PCM&quot;
comma
l_string|&quot;Analog1 In&quot;
comma
l_string|&quot;Analog2 In&quot;
comma
l_string|&quot;IEC958 In&quot;
)brace
suffix:semicolon
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
id|ac97-&gt;spec.dev_flags
ques
c_cond
l_int|4
suffix:colon
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|ac97-&gt;spec.dev_flags
ques
c_cond
id|texts_658
(braket
id|uinfo-&gt;value.enumerated.item
)braket
suffix:colon
id|texts_655
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alc655_iec958_route_get
r_static
r_int
id|alc655_iec958_route_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_ALC650_MULTICH
)braket
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
l_int|12
)paren
op_amp
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.dev_flags
op_logical_and
id|val
op_eq
l_int|3
)paren
id|val
op_assign
l_int|0
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alc655_iec958_route_put
r_static
r_int
id|alc655_iec958_route_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|ac97_update_bits_page
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|3
op_lshift
l_int|12
comma
(paren
r_int
r_int
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_spdif_controls_alc655
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_spdif_controls_alc655
(braket
)braket
op_assign
(brace
id|AC97_PAGE_SINGLE
c_func
(paren
l_string|&quot;IEC958 Capture Switch&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|11
comma
l_int|1
comma
l_int|0
comma
l_int|0
)paren
comma
multiline_comment|/* disable this controls since it doesn&squot;t work as expected */
multiline_comment|/* AC97_PAGE_SINGLE(&quot;IEC958 Input Monitor&quot;, AC97_ALC650_MULTICH, 14, 1, 0, 0), */
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;IEC958 Playback Route&quot;
comma
dot
id|info
op_assign
id|alc655_iec958_route_info
comma
dot
id|get
op_assign
id|alc655_iec958_route_get
comma
dot
id|put
op_assign
id|alc655_iec958_route_put
comma
)brace
comma
)brace
suffix:semicolon
DECL|function|patch_alc655_specific
r_static
r_int
id|patch_alc655_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_alc655
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_alc655
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_spdif_controls_alc655
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_alc655
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_alc655_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_alc655_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_alc655_specific
)brace
suffix:semicolon
DECL|function|patch_alc655
r_int
id|patch_alc655
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|ac97-&gt;spec.dev_flags
op_assign
(paren
id|ac97-&gt;id
op_eq
l_int|0x414c4780
)paren
suffix:semicolon
multiline_comment|/* ALC658 */
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_alc655_ops
suffix:semicolon
multiline_comment|/* assume only page 0 for writing cache */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|AC97_PAGE_MASK
comma
id|AC97_PAGE_VENDOR
)paren
suffix:semicolon
multiline_comment|/* adjust default values */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
l_int|0x7a
)paren
suffix:semicolon
multiline_comment|/* misc control */
id|val
op_or_assign
(paren
l_int|1
op_lshift
l_int|1
)paren
suffix:semicolon
multiline_comment|/* spdif input pin */
id|val
op_and_assign
op_complement
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:semicolon
multiline_comment|/* vref enable */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x7a
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* set default: spdif-in enabled,&n;&t;   spdif-in monitor off, spdif-in PCM off&n;&t;   center on mic off, surround on line-in off&n;&t;   duplicate front off&n;&t;*/
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
op_lshift
l_int|15
)paren
suffix:semicolon
multiline_comment|/* full DAC volume */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|macro|AC97_ALC850_JACK_SELECT
mdefine_line|#define AC97_ALC850_JACK_SELECT&t;0x76
DECL|macro|AC97_ALC850_MISC1
mdefine_line|#define AC97_ALC850_MISC1&t;0x7a
DECL|function|ac97_alc850_surround_get
r_static
r_int
id|ac97_alc850_surround_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_ALC850_JACK_SELECT
)braket
op_rshift
l_int|12
)paren
op_amp
l_int|7
)paren
op_eq
l_int|2
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ac97_alc850_surround_put
r_static
r_int
id|ac97_alc850_surround_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
multiline_comment|/* SURR 1kOhm (bit4), Amp (bit5) */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC850_MISC1
comma
(paren
l_int|1
op_lshift
l_int|4
)paren
op_or
(paren
l_int|1
op_lshift
l_int|5
)paren
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|5
)paren
suffix:colon
(paren
l_int|1
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
multiline_comment|/* LINE-IN = 0, SURROUND = 2 */
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC850_JACK_SELECT
comma
l_int|7
op_lshift
l_int|12
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|2
op_lshift
l_int|12
)paren
suffix:colon
(paren
l_int|0
op_lshift
l_int|12
)paren
)paren
suffix:semicolon
)brace
DECL|function|ac97_alc850_mic_get
r_static
r_int
id|ac97_alc850_mic_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_ALC850_JACK_SELECT
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|7
)paren
op_eq
l_int|2
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ac97_alc850_mic_put
r_static
r_int
id|ac97_alc850_mic_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
multiline_comment|/* Vref disable (bit12), 1kOhm (bit13) */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC850_MISC1
comma
(paren
l_int|1
op_lshift
l_int|12
)paren
op_or
(paren
l_int|1
op_lshift
l_int|13
)paren
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:colon
(paren
l_int|1
op_lshift
l_int|13
)paren
)paren
suffix:semicolon
multiline_comment|/* MIC-IN = 1, CENTER-LFE = 2 */
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC850_JACK_SELECT
comma
l_int|7
op_lshift
l_int|4
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|2
op_lshift
l_int|4
)paren
suffix:colon
(paren
l_int|1
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_alc850
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_alc850
(braket
)braket
op_assign
(brace
id|AC97_PAGE_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|0
)paren
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line-In As Surround&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|ac97_alc850_surround_get
comma
dot
id|put
op_assign
id|ac97_alc850_surround_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|ac97_alc850_mic_get
comma
dot
id|put
op_assign
id|ac97_alc850_mic_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
)brace
suffix:semicolon
DECL|function|patch_alc850_specific
r_static
r_int
id|patch_alc850_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_alc850
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_alc850
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_spdif_controls_alc655
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_alc655
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_alc850_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_alc850_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_alc850_specific
)brace
suffix:semicolon
DECL|function|patch_alc850
r_int
id|patch_alc850
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_alc850_ops
suffix:semicolon
id|ac97-&gt;spec.dev_flags
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* for IEC958 playback route - ALC655 compatible */
multiline_comment|/* assume only page 0 for writing cache */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|AC97_PAGE_MASK
comma
id|AC97_PAGE_VENDOR
)paren
suffix:semicolon
multiline_comment|/* adjust default values */
multiline_comment|/* set default: spdif-in enabled,&n;&t;   spdif-in monitor off, spdif-in PCM off&n;&t;   center on mic off, surround on line-in off&n;&t;   duplicate front off&n;&t;*/
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
op_lshift
l_int|15
)paren
suffix:semicolon
multiline_comment|/* SURR_OUT: on, Surr 1kOhm: on, Surr Amp: off, Front 1kOhm: off&n;&t; * Front Amp: on, Vref: enable, Center 1kOhm: on, Mix: on&n;&t; */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x7a
comma
(paren
l_int|1
op_lshift
l_int|1
)paren
op_or
(paren
l_int|1
op_lshift
l_int|4
)paren
op_or
(paren
l_int|0
op_lshift
l_int|5
)paren
op_or
(paren
l_int|1
op_lshift
l_int|6
)paren
op_or
(paren
l_int|1
op_lshift
l_int|7
)paren
op_or
(paren
l_int|0
op_lshift
l_int|12
)paren
op_or
(paren
l_int|1
op_lshift
l_int|13
)paren
op_or
(paren
l_int|0
op_lshift
l_int|14
)paren
)paren
suffix:semicolon
multiline_comment|/* detection UIO2,3: all path floating, UIO3: MIC, Vref2: disable,&n;&t; * UIO1: FRONT, Vref3: disable, UIO3: LINE, Front-Mic: mute&n;&t; */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x76
comma
(paren
l_int|0
op_lshift
l_int|0
)paren
op_or
(paren
l_int|0
op_lshift
l_int|2
)paren
op_or
(paren
l_int|1
op_lshift
l_int|4
)paren
op_or
(paren
l_int|1
op_lshift
l_int|7
)paren
op_or
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
(paren
l_int|1
op_lshift
l_int|11
)paren
op_or
(paren
l_int|0
op_lshift
l_int|12
)paren
op_or
(paren
l_int|1
op_lshift
l_int|15
)paren
)paren
suffix:semicolon
multiline_comment|/* full DAC volume */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * C-Media CM97xx codecs&n; */
DECL|variable|snd_ac97_cm9738_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9738_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_CM9738_VENDOR_CTRL
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_CM9738_VENDOR_CTRL
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_cm9738_specific
r_static
r_int
id|patch_cm9738_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9738_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9738_controls
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_cm9738_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cm9738_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_cm9738_specific
)brace
suffix:semicolon
DECL|function|patch_cm9738
r_int
id|patch_cm9738
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cm9738_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_info
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;Analog&quot;
comma
l_string|&quot;Digital&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_get
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_CM9739_SPDIF_CTRL
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|1
)paren
op_amp
l_int|0x01
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_put
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|0x01
op_lshift
l_int|1
comma
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_cm9739_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9739_controls_spdif
(braket
)braket
op_assign
(brace
multiline_comment|/* BIT 0: SPDI_EN - always true */
(brace
multiline_comment|/* BIT 1: SPDIFS */
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_cmedia_spdif_playback_source_info
comma
dot
id|get
op_assign
id|snd_ac97_cmedia_spdif_playback_source_get
comma
dot
id|put
op_assign
id|snd_ac97_cmedia_spdif_playback_source_put
comma
)brace
comma
multiline_comment|/* BIT 2: IG_SPIV */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Valid Switch&quot;
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 3: SPI2F */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Monitor&quot;
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 4: SPI2SDI */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|SWITCH
)paren
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|4
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 8: SPD32 - 32bit SPDIF - not supported yet */
)brace
suffix:semicolon
DECL|function|snd_ac97_cm9739_center_mic_get
r_static
r_int
id|snd_ac97_cm9739_center_mic_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;regs
(braket
id|AC97_CM9739_MULTI_CHAN
)braket
op_amp
l_int|0x1000
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
r_else
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cm9739_center_mic_put
r_static
r_int
id|snd_ac97_cm9739_center_mic_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|0x3000
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0x1000
suffix:colon
l_int|0x2000
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_cm9739_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9739_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_cm9739_center_mic_get
comma
dot
id|put
op_assign
id|snd_ac97_cm9739_center_mic_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
)brace
suffix:semicolon
DECL|function|patch_cm9739_specific
r_static
r_int
id|patch_cm9739_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9739_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9739_controls
)paren
)paren
suffix:semicolon
)brace
DECL|function|patch_cm9739_post_spdif
r_static
r_int
id|patch_cm9739_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9739_controls_spdif
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9739_controls_spdif
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_cm9739_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cm9739_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_cm9739_specific
comma
dot
id|build_post_spdif
op_assign
id|patch_cm9739_post_spdif
)brace
suffix:semicolon
DECL|function|patch_cm9739
r_int
id|patch_cm9739
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cm9739_ops
suffix:semicolon
multiline_comment|/* check spdif */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|AC97_EA_SPCV
)paren
(brace
multiline_comment|/* enable spdif in */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
multiline_comment|/* 48k only */
)brace
r_else
(brace
id|ac97-&gt;ext_id
op_and_assign
op_complement
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* disable extended-id */
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* set-up multi channel */
multiline_comment|/* bit 14: 0 = SPDIF, 1 = EAPD */
multiline_comment|/* bit 13: enable internal vref output for mic */
multiline_comment|/* bit 12: disable center/lfe (swithable) */
multiline_comment|/* bit 10: disable surround/line (switchable) */
multiline_comment|/* bit 9: mix 2 surround off */
multiline_comment|/* bit 4: undocumented; 0 mutes the CM9739A, which defaults to 1 */
multiline_comment|/* bit 3: undocumented; surround? */
multiline_comment|/* bit 0: dB */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
)paren
op_amp
(paren
l_int|1
op_lshift
l_int|4
)paren
suffix:semicolon
id|val
op_or_assign
(paren
l_int|1
op_lshift
l_int|3
)paren
suffix:semicolon
id|val
op_or_assign
(paren
l_int|1
op_lshift
l_int|13
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
)paren
id|val
op_or_assign
(paren
l_int|1
op_lshift
l_int|14
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* FIXME: set up GPIO */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x70
comma
l_int|0x0100
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x72
comma
l_int|0x0020
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|macro|AC97_CM9761_MULTI_CHAN
mdefine_line|#define AC97_CM9761_MULTI_CHAN&t;0x64
DECL|macro|AC97_CM9761_SPDIF_CTRL
mdefine_line|#define AC97_CM9761_SPDIF_CTRL&t;0x6c
DECL|function|snd_ac97_cm9761_linein_rear_get
r_static
r_int
id|snd_ac97_cm9761_linein_rear_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;regs
(braket
id|AC97_CM9739_MULTI_CHAN
)braket
op_amp
l_int|0x0400
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
r_else
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cm9761_linein_rear_put
r_static
r_int
id|snd_ac97_cm9761_linein_rear_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|vals
(braket
l_int|2
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|0x0008
comma
l_int|0x0400
)brace
comma
multiline_comment|/* off, on */
(brace
l_int|0x0000
comma
l_int|0x0408
)brace
comma
multiline_comment|/* off, on (9761-82 rev.B) */
)brace
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|0x0408
comma
id|vals
(braket
id|ac97-&gt;spec.dev_flags
)braket
(braket
op_logical_neg
op_logical_neg
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)braket
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_cm9761_center_mic_get
r_static
r_int
id|snd_ac97_cm9761_center_mic_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;regs
(braket
id|AC97_CM9739_MULTI_CHAN
)braket
op_amp
l_int|0x1000
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
r_else
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.dev_flags
)paren
multiline_comment|/* 9761-82 rev.B */
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
op_logical_neg
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cm9761_center_mic_put
r_static
r_int
id|snd_ac97_cm9761_center_mic_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|vals
(braket
l_int|2
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|0x2000
comma
l_int|0x1880
)brace
comma
multiline_comment|/* off, on */
(brace
l_int|0x1000
comma
l_int|0x2880
)brace
comma
multiline_comment|/* off, on (9761-82 rev.B) */
)brace
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|0x3880
comma
id|vals
(braket
id|ac97-&gt;spec.dev_flags
)braket
(braket
op_logical_neg
op_logical_neg
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)braket
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_cm9761_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9761_controls
(braket
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line-In As Surround&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_cm9761_linein_rear_get
comma
dot
id|put
op_assign
id|snd_ac97_cm9761_linein_rear_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_cm9761_center_mic_get
comma
dot
id|put
op_assign
id|snd_ac97_cm9761_center_mic_put
comma
dot
id|private_value
op_assign
id|AC97_SINGLE_VALUE
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
multiline_comment|/* only mask needed */
)brace
comma
)brace
suffix:semicolon
DECL|function|patch_cm9761_specific
r_static
r_int
id|patch_cm9761_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9761_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9761_controls
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_cm9761_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cm9761_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_cm9761_specific
comma
dot
id|build_post_spdif
op_assign
id|patch_cm9739_post_spdif
multiline_comment|/* hope it&squot;s identical... */
)brace
suffix:semicolon
DECL|function|patch_cm9761
r_int
id|patch_cm9761
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|ac97-&gt;spec.dev_flags
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* 1 = model 82 revision B */
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
id|AC97_ID_CM9761_82
)paren
(brace
r_int
r_int
id|tmp
suffix:semicolon
multiline_comment|/* check page 1, reg 0x60 */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
(paren
id|val
op_amp
op_complement
l_int|0x0f
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
l_int|0x60
)paren
suffix:semicolon
id|ac97-&gt;spec.dev_flags
op_assign
id|tmp
op_amp
l_int|1
suffix:semicolon
multiline_comment|/* revision B? */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_INT_PAGING
comma
id|val
)paren
suffix:semicolon
)brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cm9761_ops
suffix:semicolon
multiline_comment|/* enable spdif */
multiline_comment|/* force the SPDIF bit in ext_id - codec doesn&squot;t set this bit! */
id|ac97-&gt;ext_id
op_or_assign
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* to be sure: we overwrite the ext status bits */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
l_int|0x05c0
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9761_SPDIF_CTRL
comma
l_int|0x0209
)paren
suffix:semicolon
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
multiline_comment|/* 48k only */
multiline_comment|/* set-up multi channel */
multiline_comment|/* bit 15: pc master beep off&n;&t; * bit 14: ??&n;&t; * bit 13: vref ctl [= cm9739]&n;&t; * bit 12: center/mic [= cm9739] (reverted on rev B)&n;&t; * bit 11: ?? (mic/center/lfe) (reverted on rev B)&n;&t; * bit 10: suddound/line [= cm9739]&n;&t; * bit  9: mix 2 surround&n;&t; * bit  8: ?&n;&t; * bit  7: ?? (mic/center/lfe)&n;&t; * bit  4: ?? (front)&n;&t; * bit  3: ?? (line-in/rear share) (revereted with rev B)&n;&t; * bit  2: ?? (surround)&n;&t; * bit  1: front mic&n;&t; * bit  0: mic boost&n;&t; */
macro_line|#if 0
r_if
c_cond
(paren
id|ac97-&gt;spec.dev_flags
)paren
id|val
op_assign
l_int|0x0214
suffix:semicolon
r_else
id|val
op_assign
l_int|0x321c
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9761_MULTI_CHAN
comma
id|val
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* FIXME: set up GPIO */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x70
comma
l_int|0x0100
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x72
comma
l_int|0x0020
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * VIA VT1616 codec&n; */
DECL|variable|snd_ac97_controls_vt1616
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_vt1616
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;DC Offset removal&quot;
comma
l_int|0x5a
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Alternate Level to Surround Out&quot;
comma
l_int|0x5a
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix LFE and Center to Front&quot;
comma
l_int|0x5a
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix Surround to Front&quot;
comma
l_int|0x5a
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_vt1616_specific
r_static
r_int
id|patch_vt1616_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
l_int|0x5a
comma
l_int|9
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_vt1616
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_vt1616
(braket
l_int|1
)braket
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_vt1616
)paren
op_minus
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_vt1616_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_vt1616_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_vt1616_specific
)brace
suffix:semicolon
DECL|function|patch_vt1616
r_int
id|patch_vt1616
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_vt1616_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_it2646
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_it2646
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
l_int|0x76
comma
l_int|9
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic As Center/LFE&quot;
comma
l_int|0x76
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_ac97_spdif_controls_it2646
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_spdif_controls_it2646
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Capture Switch&quot;
comma
l_int|0x76
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Analog to IEC958 Output&quot;
comma
l_int|0x76
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Monitor&quot;
comma
l_int|0x76
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_it2646_specific
r_static
r_int
id|patch_it2646_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_it2646
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_it2646
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_spdif_controls_it2646
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_it2646
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_it2646_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_it2646_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_it2646_specific
)brace
suffix:semicolon
DECL|function|patch_it2646
r_int
id|patch_it2646
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_it2646_ops
suffix:semicolon
multiline_comment|/* full DAC volume */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x5E
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x7A
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Si3036/8 specific registers */
DECL|macro|AC97_SI3036_CHIP_ID
mdefine_line|#define AC97_SI3036_CHIP_ID     0x5a
DECL|function|mpatch_si3036
r_int
id|mpatch_si3036
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|//printk(&quot;mpatch_si3036: chip id = %x&bslash;n&quot;, snd_ac97_read(ac97, 0x5a));
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x5c
comma
l_int|0xf210
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x68
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
