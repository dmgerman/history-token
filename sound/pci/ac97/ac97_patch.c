multiline_comment|/*&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *  Universal interface for Audio Codec &squot;97&n; *&n; *  For more details look to AC &squot;97 component specification revision 2.2&n; *  by Intel Corporation (http://developer.intel.com) and to datasheets&n; *  for specific codecs.&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/ac97_codec.h&gt;
macro_line|#include &quot;ac97_patch.h&quot;
macro_line|#include &quot;ac97_id.h&quot;
macro_line|#include &quot;ac97_local.h&quot;
DECL|macro|chip_t
mdefine_line|#define chip_t ac97_t
multiline_comment|/*&n; *  Chip specific initialization&n; */
DECL|function|patch_build_controls
r_static
r_int
id|patch_build_controls
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_const
id|snd_kcontrol_new_t
op_star
id|controls
comma
r_int
id|count
)paren
(brace
r_int
id|idx
comma
id|err
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|count
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|controls
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* The following snd_ac97_ymf753_... items added by David Shust (dshust@shustring.com) */
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the type of speakers being used. */
DECL|function|snd_ac97_ymf753_info_speaker
r_static
r_int
id|snd_ac97_ymf753_info_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Standard&quot;
comma
l_string|&quot;Small&quot;
comma
l_string|&quot;Smaller&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_get_speaker
r_static
r_int
id|snd_ac97_ymf753_get_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_3D_MODE_SEL
)braket
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
l_int|10
)paren
op_amp
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|val
OG
l_int|0
)paren
multiline_comment|/* 0 = invalid */
id|val
op_decrement
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_put_speaker
r_static
r_int
id|snd_ac97_ymf753_put_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
op_lshift
l_int|10
suffix:semicolon
r_return
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ymf753_controls_speaker
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_speaker
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;3D Control - Speaker&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_info_speaker
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_get_speaker
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_put_speaker
comma
)brace
suffix:semicolon
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the source to direct to the S/PDIF output. */
DECL|function|snd_ac97_ymf753_spdif_source_info
r_static
r_int
id|snd_ac97_ymf753_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_get
r_static
r_int
id|snd_ac97_ymf753_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|1
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_put
r_static
r_int
id|snd_ac97_ymf753_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|1
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0002
comma
id|val
)paren
suffix:semicolon
)brace
multiline_comment|/* The AC&squot;97 spec states that the S/PDIF signal is to be output at pin 48.&n;   The YMF753 will output the S/PDIF signal to pin 43, 47 (EAPD), or 48.&n;   By default, no output pin is selected, and the S/PDIF signal is not output.&n;   There is also a bit to mute S/PDIF output in a vendor-specific register. */
DECL|function|snd_ac97_ymf753_spdif_output_pin_info
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Disabled&quot;
comma
l_string|&quot;Pin 43&quot;
comma
l_string|&quot;Pin 48&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_get
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_amp
l_int|0x0008
)paren
ques
c_cond
l_int|2
suffix:colon
(paren
id|val
op_amp
l_int|0x0020
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_put
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|2
)paren
ques
c_cond
l_int|0x0008
suffix:colon
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|1
)paren
ques
c_cond
l_int|0x0020
suffix:colon
l_int|0
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0028
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* The following can be used to direct S/PDIF output to pin 47 (EAPD).&n;&t;   snd_ac97_write_cache(ac97, 0x62, snd_ac97_read(ac97, 0x62) | 0x0008); */
)brace
DECL|variable|snd_ac97_ymf753_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_spdif
(braket
l_int|3
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_source_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_source_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_source_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Output Pin&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_output_pin_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_output_pin_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_output_pin_put
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|NONE
comma
id|NONE
)paren
l_string|&quot;Mute&quot;
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|2
comma
l_int|1
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|function|patch_yamaha_ymf753_3d
r_static
r_int
id|patch_yamaha_ymf753_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control - Wide&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|9
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_ymf753_controls_speaker
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
l_int|0x0c00
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_yamaha_ymf753_post_spdif
r_static
r_int
id|patch_yamaha_ymf753_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_ymf753_controls_spdif
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_ymf753_controls_spdif
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_yamaha_ymf753_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_yamaha_ymf753_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_yamaha_ymf753_3d
comma
dot
id|build_post_spdif
op_assign
id|patch_yamaha_ymf753_post_spdif
)brace
suffix:semicolon
DECL|function|patch_yamaha_ymf753
r_int
id|patch_yamaha_ymf753
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* Patch for Yamaha YMF753, Copyright (c) by David Shust, dshust@shustring.com.&n;&t;   This chip has nonstandard and extended behaviour with regard to its S/PDIF output.&n;&t;   The AC&squot;97 spec states that the S/PDIF signal is to be output at pin 48.&n;&t;   The YMF753 will ouput the S/PDIF signal to pin 43, 47 (EAPD), or 48.&n;&t;   By default, no output pin is selected, and the S/PDIF signal is not output.&n;&t;   There is also a bit to mute S/PDIF output in a vendor-specific register.&n;&t;*/
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_yamaha_ymf753_ops
suffix:semicolon
id|ac97-&gt;caps
op_or_assign
id|AC97_BC_BASS_TREBLE
suffix:semicolon
id|ac97-&gt;caps
op_or_assign
l_int|0x04
op_lshift
l_int|10
suffix:semicolon
multiline_comment|/* Yamaha 3D enhancement */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * May 2, 2003 Liam Girdwood &lt;liam.girdwood@wolfsonmicro.com&gt;&n; *  removed broken wolfson00 patch.&n; *  added support for WM9705,WM9708,WM9709,WM9710,WM9711,WM9712 and WM9717.&n; */
DECL|function|patch_wolfson03
r_int
id|patch_wolfson03
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* This is known to work for the ViewSonic ViewPad 1000&n;&t;   Randolph Bentson &lt;bentson@holmsjoen.com&gt; */
singleline_comment|// WM9703/9707/9708/9717
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0x8000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson04
r_int
id|patch_wolfson04
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9704M/9704Q
singleline_comment|// set front and rear mixer volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_RMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
singleline_comment|// patch for DVD noise
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_TEST
comma
l_int|0x0200
)paren
suffix:semicolon
singleline_comment|// init vol
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9704_RPCM_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
singleline_comment|// set rear surround volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson05
r_int
id|patch_wolfson05
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9705, WM9710
singleline_comment|// set front mixer volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM97XX_FMIXER_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_wolfson11
r_int
id|patch_wolfson11
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// WM9711, WM9712
singleline_comment|// set out3 volume
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_WM9711_OUT3VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_tritech_tr28028
r_int
id|patch_tritech_tr28028
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0300
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9700_3d
r_static
r_int
id|patch_sigmatel_stac9700_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9708_3d
r_static
r_int
id|patch_sigmatel_stac9708_3d
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ac97-&gt;card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Rear Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_sigmatel_4speaker
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_4speaker
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel 4-Speaker Stereo Playback Switch&quot;
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_phaseinvert
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_phaseinvert
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel Surround Phase Inversion Playback Switch&quot;
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel DAC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel ADC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac97xx_specific
r_static
r_int
id|patch_sigmatel_stac97xx_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_amp
op_complement
l_int|0x0003
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|1
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|2
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_4speaker
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|3
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_sigmatel_phaseinvert
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_sigmatel_stac9700_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_sigmatel_stac9700_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_sigmatel_stac9700_3d
comma
dot
id|build_specific
op_assign
id|patch_sigmatel_stac97xx_specific
)brace
suffix:semicolon
DECL|variable|patch_sigmatel_stac9708_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_sigmatel_stac9708_ops
op_assign
(brace
dot
id|build_3d
op_assign
id|patch_sigmatel_stac9708_3d
comma
dot
id|build_specific
op_assign
id|patch_sigmatel_stac97xx_specific
)brace
suffix:semicolon
DECL|function|patch_sigmatel_stac9700
r_int
id|patch_sigmatel_stac9700
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9708
r_int
id|patch_sigmatel_stac9708
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|codec72
comma
id|codec6c
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9708_ops
suffix:semicolon
id|codec72
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
)paren
op_amp
l_int|0x8000
suffix:semicolon
id|codec6c
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0007
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1001
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|0x0008
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0x0080
)paren
)paren
(brace
multiline_comment|/* nothing */
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9721
r_int
id|patch_sigmatel_stac9721
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_eq
l_int|0
)paren
(brace
singleline_comment|// patch for SigmaTel
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x4000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9744
r_int
id|patch_sigmatel_stac9744
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9756
r_int
id|patch_sigmatel_stac9756
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_sigmatel_stac9700_ops
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_cirrus_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CSR_SPDIF
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;AC97-SPSA&quot;
comma
id|AC97_CSR_ACMODE
comma
l_int|0
comma
l_int|3
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|function|patch_cirrus_build_spdif
r_static
r_int
id|patch_cirrus_build_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_spdif
(braket
l_int|0
)braket
comma
l_int|3
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_switch
c_cond
(paren
id|ac97-&gt;id
op_amp
id|AC97_ID_CS_MASK
)paren
(brace
r_case
id|AC97_ID_CS4205
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|1
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CSR_SPDIF
comma
l_int|0x0a20
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_cirrus_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cirrus_ops
op_assign
(brace
dot
id|build_spdif
op_assign
id|patch_cirrus_build_spdif
)brace
suffix:semicolon
DECL|function|patch_cirrus_spdif
r_int
id|patch_cirrus_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* Basically, the cs4201/cs4205/cs4297a has non-standard sp/dif registers.&n;&t;   WHY CAN&squot;T ANYONE FOLLOW THE BLOODY SPEC?  *sigh*&n;&t;   - sp/dif EA ID is not set, but sp/dif is always present.&n;&t;   - enable/disable is spdif register bit 15.&n;&t;   - sp/dif control register is 0x68.  differs from AC97:&n;&t;   - valid is bit 14 (vs 15)&n;&t;   - no DRS&n;&t;   - only 44.1/48k [00 = 48, 01=44,1] (AC97 is 00=44.1, 10=48)&n;&t;   - sp/dif ssource select is in 0x5e bits 0,1.&n;&t;*/
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cirrus_ops
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_CS_SPDIF
suffix:semicolon
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_and_assign
op_complement
id|SNDRV_PCM_RATE_32000
suffix:semicolon
id|ac97-&gt;ext_id
op_or_assign
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* force the detection of spdif */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CSR_ACMODE
comma
l_int|0x0080
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_cirrus_cs4299
r_int
id|patch_cirrus_cs4299
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* force the detection of PC Beep */
id|ac97-&gt;flags
op_or_assign
id|AC97_HAS_PC_BEEP
suffix:semicolon
r_return
id|patch_cirrus_spdif
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_conexant_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_conexant_controls_spdif
(braket
l_int|1
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CXR_AUDIO_MISC
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_conexant_build_spdif
r_static
r_int
id|patch_conexant_build_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_spdif
(braket
l_int|0
)braket
comma
l_int|3
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_conexant_controls_spdif
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
)paren
op_amp
op_complement
(paren
id|AC97_CXR_SPDIFEN
op_or
id|AC97_CXR_COPYRGT
op_or
id|AC97_CXR_SPDIF_MASK
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_conexant_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_conexant_ops
op_assign
(brace
dot
id|build_spdif
op_assign
id|patch_conexant_build_spdif
)brace
suffix:semicolon
DECL|function|patch_conexant
r_int
id|patch_conexant
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_conexant_ops
suffix:semicolon
id|ac97-&gt;flags
op_or_assign
id|AC97_CX_SPDIF
suffix:semicolon
id|ac97-&gt;ext_id
op_or_assign
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* force the detection of spdif */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1819
r_int
id|patch_ad1819
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for Analog Devices
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* select all codecs */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1881_unchained
r_static
r_int
r_int
id|patch_ad1881_unchained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|mask
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
singleline_comment|// test for unchained codec
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|mask
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* ID0C, ID1C, SDIE = off */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_assign
id|mask
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|idx
)braket
op_assign
l_int|0x0000
suffix:semicolon
r_return
id|mask
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained1
r_static
r_int
id|patch_ad1881_chained1
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|codec_bits
)paren
(brace
r_static
r_int
id|cfg_bits
(braket
l_int|3
)braket
op_assign
(brace
l_int|1
op_lshift
l_int|12
comma
l_int|1
op_lshift
l_int|14
comma
l_int|1
op_lshift
l_int|13
)brace
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|cfg_bits
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0004
)paren
suffix:semicolon
singleline_comment|// SDIE
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|codec_bits
)paren
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
id|codec_bits
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
op_assign
id|cfg_bits
(braket
id|idx
)braket
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|idx
)braket
op_assign
id|codec_bits
ques
c_cond
id|codec_bits
suffix:colon
l_int|0x0004
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained
r_static
r_void
id|patch_ad1881_chained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|unchained_idx
comma
r_int
id|cidx1
comma
r_int
id|cidx2
)paren
(brace
singleline_comment|// already detected?
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx1
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx1
)braket
)paren
id|cidx1
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx2
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx2
)braket
)paren
id|cidx2
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|cidx1
OL
l_int|0
op_logical_and
id|cidx2
OL
l_int|0
)paren
r_return
suffix:semicolon
singleline_comment|// test for chained codecs
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|unchained_idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0002
)paren
suffix:semicolon
singleline_comment|// ID1C
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
id|unchained_idx
)braket
op_assign
l_int|0x0002
suffix:semicolon
r_if
c_cond
(paren
id|cidx1
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cidx2
op_ge
l_int|0
)paren
(brace
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|patch_ad1881
r_int
id|patch_ad1881
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_static
r_const
r_char
id|cfg_idxs
(braket
l_int|3
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|2
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|2
)brace
comma
(brace
l_int|0
comma
l_int|1
)brace
)brace
suffix:semicolon
singleline_comment|// patch for Analog Devices
r_int
r_int
id|codecs
(braket
l_int|3
)braket
suffix:semicolon
r_int
id|idx
comma
id|num
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|codecs
(braket
l_int|0
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|0
comma
(paren
l_int|1
op_lshift
l_int|12
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|1
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|1
comma
(paren
l_int|1
op_lshift
l_int|14
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|2
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|2
comma
(paren
l_int|1
op_lshift
l_int|13
)paren
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|codecs
(braket
l_int|0
)braket
op_or
id|codecs
(braket
l_int|1
)braket
op_or
id|codecs
(braket
l_int|2
)braket
comma
r_goto
id|__end
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
)paren
id|patch_ad1881_chained
c_func
(paren
id|ac97
comma
id|idx
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|0
)braket
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|1
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_SURROUND_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|2
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_CENTER_LFE_DAC
suffix:semicolon
)brace
id|__end
suffix:colon
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* check if only one codec is present */
r_for
c_loop
(paren
id|idx
op_assign
id|num
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
id|num
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|1
)paren
(brace
multiline_comment|/* ok, deselect all ID bits */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|0
)braket
op_assign
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|1
)braket
op_assign
id|ac97-&gt;spec.ad18xx.codec_cfg
(braket
l_int|2
)braket
op_assign
l_int|0x0000
suffix:semicolon
)brace
multiline_comment|/* required for AD1886/AD1885 combination */
id|ac97-&gt;ext_id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
)paren
(brace
id|ac97-&gt;id
op_and_assign
l_int|0xffff0000
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_ad1885
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad1885
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Digital Mono Direct&quot;
comma
id|AC97_AD_MISC
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Digital Audio Mode&quot;
comma
id|AC97_AD_MISC
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Low Power Mixer&quot;
comma
id|AC97_AD_MISC
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Zero Fill DAC&quot;
comma
id|AC97_AD_MISC
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_ad1885_specific
r_static
r_int
id|patch_ad1885_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_ad1885
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_ad1885
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_ad1885_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1885_build_ops
op_assign
(brace
dot
id|build_specific
op_assign
op_amp
id|patch_ad1885_specific
)brace
suffix:semicolon
DECL|function|patch_ad1885
r_int
id|patch_ad1885
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|jack
suffix:semicolon
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* This is required to deal with the Intel D815EEAL2 */
multiline_comment|/* i.e. Line out is actually headphone out from codec */
multiline_comment|/* turn off jack sense bits D8 &amp; D9 */
id|jack
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
comma
id|jack
op_or
l_int|0x0300
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1885_build_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1886
r_int
id|patch_ad1886
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* Presario700 workaround */
multiline_comment|/* for Jack Sense/SPDIF Register misetting causing */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_JACK_SPDIF
comma
l_int|0x0010
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1980_spdif_source_info
r_static
r_int
id|snd_ac97_ad1980_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1980_spdif_source_get
r_static
r_int
id|snd_ac97_ad1980_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_AD_SERIAL_CFG
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1980_spdif_source_put
r_static
r_int
id|snd_ac97_ad1980_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|2
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x0004
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad1980_spdif_source
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad1980_spdif_source
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ad1980_spdif_source_info
comma
dot
id|get
op_assign
id|snd_ac97_ad1980_spdif_source_get
comma
dot
id|put
op_assign
id|snd_ac97_ad1980_spdif_source_put
comma
)brace
suffix:semicolon
DECL|function|patch_ad1980_post_spdif
r_static
r_int
id|patch_ad1980_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_ad1980_spdif_source
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|variable|patch_ad1980_build_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_ad1980_build_ops
op_assign
(brace
dot
id|build_post_spdif
op_assign
op_amp
id|patch_ad1980_post_spdif
)brace
suffix:semicolon
DECL|function|patch_ad1980
r_int
id|patch_ad1980
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|misc
suffix:semicolon
id|patch_ad1881
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_ad1980_build_ops
suffix:semicolon
multiline_comment|/* Switch FRONT/SURROUND LINE-OUT/HP-OUT default connection */
multiline_comment|/* it seems that most vendors connect line-out connector to headphone out of AC&squot;97 */
id|misc
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_MISC
comma
id|misc
op_or
l_int|0x0420
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Exchange Center/LFE&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* 4: Analog Input To Surround */
multiline_comment|/* 5: Analog Input To Center/LFE */
multiline_comment|/* 6: Independent Master Volume Right */
multiline_comment|/* 7: Independent Master Volume Left */
multiline_comment|/* 8: reserved */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|9
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Swap Surround Slot&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
macro_line|#if 0 /* always set in patch_alc650 */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Clock Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Pin Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround DAC Switch&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround DAC Volume&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE DAC Switch&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Center/LFE DAC Volume&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|variable|snd_ac97_control_alc650_mic
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_control_alc650_mic
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic As Center/LFE&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|function|snd_ac97_alc650_mic_gpio_get
r_static
r_int
id|snd_ac97_alc650_mic_gpio_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|AC97_ALC650_MULTICH
)braket
op_rshift
l_int|10
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_alc650_mic_gpio_put
r_static
r_int
id|snd_ac97_alc650_mic_gpio_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
suffix:semicolon
id|change
op_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
op_lshift
l_int|10
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
(paren
l_int|1
op_lshift
l_int|10
)paren
suffix:colon
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
multiline_comment|/* GPIO0 write for mic */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
l_int|0x76
comma
l_int|0x01
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x01
)paren
suffix:semicolon
multiline_comment|/* GPIO0 high for mic */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
l_int|0x78
comma
l_int|0x100
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x100
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|snd_ac97_control_alc650_mic_gpio
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_control_alc650_mic_gpio
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic As Center/LFE&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_alc650_mic_gpio_get
comma
dot
id|put
op_assign
id|snd_ac97_alc650_mic_gpio_put
comma
dot
id|private_value
op_assign
(paren
l_int|1
op_lshift
l_int|16
)paren
comma
multiline_comment|/* for info */
)brace
suffix:semicolon
DECL|variable|snd_ac97_spdif_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_spdif_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Capture Switch&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Analog to IEC958 Output&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Monitor&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_alc650_specific
r_static
r_int
id|patch_alc650_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_controls_alc650
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_alc650
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|ac97-&gt;spec.dev_flags
ques
c_cond
op_amp
id|snd_ac97_control_alc650_mic
suffix:colon
op_amp
id|snd_ac97_control_alc650_mic_gpio
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_spdif_controls_alc650
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_alc650
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_alc650_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_alc650_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_alc650_specific
)brace
suffix:semicolon
DECL|function|patch_alc650
r_int
id|patch_alc650
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
r_int
id|spdif
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* FIXME: set the below 1 if we can detect the chip rev.E correctly.&n;&t; *        this is used for switching mic and center/lfe, which needs&n;&t; *        resetting GPIO0 level on the older revision.&n;&t; */
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_alc650_ops
suffix:semicolon
id|ac97-&gt;spec.dev_flags
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* check spdif (should be only on rev.E) */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|AC97_EA_SPCV
)paren
id|spdif
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|spdif
)paren
(brace
multiline_comment|/* enable spdif in */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_CLOCK
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
id|ac97-&gt;ext_id
op_and_assign
op_complement
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* disable extended-id */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
)paren
suffix:semicolon
id|val
op_and_assign
op_complement
l_int|0xc000
suffix:semicolon
multiline_comment|/* slot: 3,4,7,8,6,9 */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ac97-&gt;spec.dev_flags
)paren
(brace
multiline_comment|/* set GPIO */
r_int
id|mic_off
suffix:semicolon
id|mic_off
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_ALC650_MULTICH
)paren
op_amp
(paren
l_int|1
op_lshift
l_int|10
)paren
suffix:semicolon
multiline_comment|/* GPIO0 direction */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
l_int|0x76
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mic_off
)paren
id|val
op_and_assign
op_complement
l_int|0x01
suffix:semicolon
r_else
id|val
op_or_assign
l_int|0x01
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x76
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
l_int|0x78
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mic_off
)paren
id|val
op_and_assign
op_complement
l_int|0x100
suffix:semicolon
r_else
id|val
op_assign
id|val
op_or
l_int|0x100
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x78
comma
id|val
)paren
suffix:semicolon
)brace
multiline_comment|/* full DAC volume */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|0x0808
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_cm9738_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9738_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_CM9738_VENDOR_CTRL
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_CM9738_VENDOR_CTRL
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_cm9738_specific
r_static
r_int
id|patch_cm9738_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9738_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9738_controls
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_cm9738_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cm9738_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_cm9738_specific
)brace
suffix:semicolon
DECL|function|patch_cm9738
r_int
id|patch_cm9738
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cm9738_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_info
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;Analog&quot;
comma
l_string|&quot;Digital&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_get
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_CM9739_SPDIF_CTRL
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|1
)paren
op_amp
l_int|0x01
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_cmedia_spdif_playback_source_put
r_static
r_int
id|snd_ac97_cmedia_spdif_playback_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|0x01
op_lshift
l_int|1
comma
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_cm9739_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9739_controls_spdif
(braket
)braket
op_assign
(brace
multiline_comment|/* BIT 0: SPDI_EN - always true */
(brace
multiline_comment|/* BIT 1: SPDIFS */
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_cmedia_spdif_playback_source_info
comma
dot
id|get
op_assign
id|snd_ac97_cmedia_spdif_playback_source_get
comma
dot
id|put
op_assign
id|snd_ac97_cmedia_spdif_playback_source_put
comma
)brace
comma
multiline_comment|/* BIT 2: IG_SPIV */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Valid Switch&quot;
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 3: SPI2F */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Monitor&quot;
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 4: SPI2SDI */
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|SWITCH
)paren
comma
id|AC97_CM9739_SPDIF_CTRL
comma
l_int|4
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* BIT 8: SPD32 - 32bit SPDIF - not supported yet */
)brace
suffix:semicolon
DECL|variable|snd_ac97_cm9739_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cm9739_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_cm9739_specific
r_static
r_int
id|patch_cm9739_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9739_controls
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9739_controls
)paren
)paren
suffix:semicolon
)brace
DECL|function|patch_cm9739_post_spdif
r_static
r_int
id|patch_cm9739_post_spdif
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_return
id|patch_build_controls
c_func
(paren
id|ac97
comma
id|snd_ac97_cm9739_controls_spdif
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_cm9739_controls_spdif
)paren
)paren
suffix:semicolon
)brace
DECL|variable|patch_cm9739_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_cm9739_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_cm9739_specific
comma
dot
id|build_post_spdif
op_assign
id|patch_cm9739_post_spdif
)brace
suffix:semicolon
DECL|function|patch_cm9739
r_int
id|patch_cm9739
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_cm9739_ops
suffix:semicolon
multiline_comment|/* check spdif */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|AC97_EA_SPCV
)paren
(brace
multiline_comment|/* enable spdif in */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CM9739_SPDIF_CTRL
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|ac97-&gt;ext_id
op_and_assign
op_complement
id|AC97_EI_SPDIF
suffix:semicolon
multiline_comment|/* disable extended-id */
)brace
multiline_comment|/* set-up multi channel */
multiline_comment|/* bit 13: enable internal vref output for mic */
multiline_comment|/* bit 12: enable center/lfe */
multiline_comment|/* bit 14: 0 = SPDIF, 1 = EAPD */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CM9739_MULTI_CHAN
comma
l_int|0x3000
)paren
suffix:semicolon
multiline_comment|/* FIXME: set up GPIO */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x70
comma
l_int|0x0100
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x72
comma
l_int|0x0020
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_vt1616
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_vt1616
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;DC Offset removal&quot;
comma
l_int|0x5a
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Alternate Level to Surround Out&quot;
comma
l_int|0x5a
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix LFE and Center to Front&quot;
comma
l_int|0x5a
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix Surround to Front&quot;
comma
l_int|0x5a
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|patch_vt1616_specific
r_static
r_int
id|patch_vt1616_specific
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
l_int|0x5a
comma
l_int|9
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_vt1616
(braket
l_int|0
)braket
comma
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|patch_build_controls
c_func
(paren
id|ac97
comma
op_amp
id|snd_ac97_controls_vt1616
(braket
l_int|1
)braket
comma
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_vt1616
)paren
op_minus
l_int|1
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|patch_vt1616_ops
r_static
r_struct
id|snd_ac97_build_ops
id|patch_vt1616_ops
op_assign
(brace
dot
id|build_specific
op_assign
id|patch_vt1616_specific
)brace
suffix:semicolon
DECL|function|patch_vt1616
r_int
id|patch_vt1616
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;build_ops
op_assign
op_amp
id|patch_vt1616_ops
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
