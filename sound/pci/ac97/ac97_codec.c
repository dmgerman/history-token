multiline_comment|/*&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *  Universal interface for Audio Codec &squot;97&n; *&n; *  For more details look to AC &squot;97 component specification revision 2.2&n; *  by Intel Corporation (http://developer.intel.com).&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/ac97_codec.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
macro_line|#include &lt;sound/initval.h&gt;
macro_line|#include &quot;ac97_id.h&quot;
macro_line|#include &quot;ac97_patch.h&quot;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Universal interface for Audio Codec &squot;97&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|enable_loopback
r_static
r_int
id|enable_loopback
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|enable_loopback
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|enable_loopback
comma
l_string|&quot;Enable AC97 ADC/DAC Loopback Control&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|enable_loopback
comma
id|SNDRV_BOOLEAN_FALSE_DESC
)paren
suffix:semicolon
DECL|macro|chip_t
mdefine_line|#define chip_t ac97_t
multiline_comment|/*&n;&n; */
r_static
r_void
id|snd_ac97_proc_init
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
comma
r_const
r_char
op_star
id|prefix
)paren
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|id
r_int
r_int
id|id
suffix:semicolon
DECL|member|mask
r_int
r_int
id|mask
suffix:semicolon
DECL|member|name
r_const
r_char
op_star
id|name
suffix:semicolon
DECL|member|patch
r_int
(paren
op_star
id|patch
)paren
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
DECL|member|mpatch
r_int
(paren
op_star
id|mpatch
)paren
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
DECL|typedef|ac97_codec_id_t
)brace
id|ac97_codec_id_t
suffix:semicolon
DECL|variable|snd_ac97_codec_id_vendors
r_static
r_const
id|ac97_codec_id_t
id|snd_ac97_codec_id_vendors
(braket
)braket
op_assign
(brace
(brace
l_int|0x414b4d00
comma
l_int|0xffffff00
comma
l_string|&quot;Asahi Kasei&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445300
comma
l_int|0xffffff00
comma
l_string|&quot;Analog Devices&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4300
comma
l_int|0xffffff00
comma
l_string|&quot;Realtek&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4700
comma
l_int|0xffffff00
comma
l_string|&quot;Avance Logic&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x434d4900
comma
l_int|0xffffff00
comma
l_string|&quot;C-Media Electronics&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525900
comma
l_int|0xffffff00
comma
l_string|&quot;Cirrus Logic&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43585400
comma
l_int|0xffffff00
comma
l_string|&quot;Conexant&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x44543000
comma
l_int|0xffffff00
comma
l_string|&quot;Diamond Technology&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x454d4300
comma
l_int|0xffffff00
comma
l_string|&quot;eMicro&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x45838300
comma
l_int|0xffffff00
comma
l_string|&quot;ESS Technology&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x48525300
comma
l_int|0xffffff00
comma
l_string|&quot;Intersil&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434500
comma
l_int|0xffffff00
comma
l_string|&quot;ICEnsemble&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49544500
comma
l_int|0xffffff00
comma
l_string|&quot;ITE Tech.Inc&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x4e534300
comma
l_int|0xffffff00
comma
l_string|&quot;National Semiconductor&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x50534300
comma
l_int|0xffffff00
comma
l_string|&quot;Philips&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x53494c00
comma
l_int|0xffffff00
comma
l_string|&quot;Silicon Laboratory&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524100
comma
l_int|0xffffff00
comma
l_string|&quot;TriTech&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54584e00
comma
l_int|0xffffff00
comma
l_string|&quot;Texas Instruments&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x56494100
comma
l_int|0xffffff00
comma
l_string|&quot;VIA Technologies&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x57454300
comma
l_int|0xffffff00
comma
l_string|&quot;Winbond&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c00
comma
l_int|0xffffff00
comma
l_string|&quot;Wolfson&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x594d4800
comma
l_int|0xffffff00
comma
l_string|&quot;Yamaha&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847600
comma
l_int|0xffffff00
comma
l_string|&quot;SigmaTel&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|snd_ac97_codec_ids
r_static
r_const
id|ac97_codec_id_t
id|snd_ac97_codec_ids
(braket
)braket
op_assign
(brace
(brace
l_int|0x014b0502
comma
l_int|0xffffffff
comma
l_string|&quot;NM256AV&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// FIXME: which real one?
(brace
l_int|0x414b4d00
comma
l_int|0xffffffff
comma
l_string|&quot;AK4540&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d01
comma
l_int|0xffffffff
comma
l_string|&quot;AK4542&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d02
comma
l_int|0xffffffff
comma
l_string|&quot;AK4543&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d06
comma
l_int|0xffffffff
comma
l_string|&quot;AK4544A&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d07
comma
l_int|0xffffffff
comma
l_string|&quot;AK4545&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445303
comma
l_int|0xffffffff
comma
l_string|&quot;AD1819&quot;
comma
id|patch_ad1819
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445340
comma
l_int|0xffffffff
comma
l_string|&quot;AD1881&quot;
comma
id|patch_ad1881
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445348
comma
l_int|0xffffffff
comma
l_string|&quot;AD1881A&quot;
comma
id|patch_ad1881
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445360
comma
l_int|0xffffffff
comma
l_string|&quot;AD1885&quot;
comma
id|patch_ad1885
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445361
comma
l_int|0xffffffff
comma
l_string|&quot;AD1886&quot;
comma
id|patch_ad1886
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445362
comma
l_int|0xffffffff
comma
l_string|&quot;AD1887&quot;
comma
id|patch_ad1881
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445363
comma
l_int|0xffffffff
comma
l_string|&quot;AD1886A&quot;
comma
id|patch_ad1881
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445370
comma
l_int|0xffffffff
comma
l_string|&quot;AD1980&quot;
comma
id|patch_ad1980
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445372
comma
l_int|0xffffffff
comma
l_string|&quot;AD1981A&quot;
comma
id|patch_ad1881
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4300
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5306&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4310
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5382&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4320
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5383&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4710
comma
l_int|0xfffffff0
comma
l_string|&quot;ALC200/200P&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4720
comma
l_int|0xfffffff0
comma
l_string|&quot;ALC650&quot;
comma
id|patch_alc650
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4730
comma
l_int|0xffffffff
comma
l_string|&quot;ALC101&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4740
comma
l_int|0xfffffff0
comma
l_string|&quot;ALC202&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4750
comma
l_int|0xfffffff0
comma
l_string|&quot;ALC250&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x434d4941
comma
l_int|0xffffffff
comma
l_string|&quot;CMI9738&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x434d4961
comma
l_int|0xffffffff
comma
l_string|&quot;CMI9739&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525900
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4297&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525910
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4297A&quot;
comma
id|patch_cirrus_spdif
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525920
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4294/4298&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525928
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4294&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525930
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4299&quot;
comma
id|patch_cirrus_cs4299
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525948
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4201&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525958
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4205&quot;
comma
id|patch_cirrus_spdif
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525960
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4291&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43585421
comma
l_int|0xffffffff
comma
l_string|&quot;HSD11246&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// SmartMC II
(brace
l_int|0x43585428
comma
l_int|0xfffffff8
comma
l_string|&quot;Cx20468&quot;
comma
id|patch_conexant
comma
l_int|NULL
)brace
comma
singleline_comment|// SmartAMC fixme: the mask might be different
(brace
l_int|0x44543031
comma
l_int|0xfffffff0
comma
l_string|&quot;DT0398&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x454d4328
comma
l_int|0xffffffff
comma
l_string|&quot;28028&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// same as TR28028?
(brace
l_int|0x45838308
comma
l_int|0xffffffff
comma
l_string|&quot;ESS1988&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x48525300
comma
l_int|0xffffff00
comma
l_string|&quot;HMP9701&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434501
comma
l_int|0xffffffff
comma
l_string|&quot;ICE1230&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434511
comma
l_int|0xffffffff
comma
l_string|&quot;ICE1232&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// alias VIA VT1611A?
(brace
l_int|0x49434551
comma
l_int|0xffffffff
comma
l_string|&quot;VT1616&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49544520
comma
l_int|0xffffffff
comma
l_string|&quot;IT2226E&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x4e534300
comma
l_int|0xffffffff
comma
l_string|&quot;LM4540/43/45/46/48&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// only guess --jk
(brace
l_int|0x4e534331
comma
l_int|0xffffffff
comma
l_string|&quot;LM4549&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x50534304
comma
l_int|0xffffffff
comma
l_string|&quot;UCB1400&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x53494c20
comma
l_int|0xffffffe0
comma
l_string|&quot;Si3036/8&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524102
comma
l_int|0xffffffff
comma
l_string|&quot;TR28022&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524106
comma
l_int|0xffffffff
comma
l_string|&quot;TR28026&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524108
comma
l_int|0xffffffff
comma
l_string|&quot;TR28028&quot;
comma
id|patch_tritech_tr28028
comma
l_int|NULL
)brace
comma
singleline_comment|// added by xin jin [07/09/99]
(brace
l_int|0x54524123
comma
l_int|0xffffffff
comma
l_string|&quot;TR28602&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// only guess --jk [TR28023 = eMicro EM28023 (new CT1297)]
(brace
l_int|0x54584e20
comma
l_int|0xffffffff
comma
l_string|&quot;TLC320AD9xC&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x56494161
comma
l_int|0xffffffff
comma
l_string|&quot;VIA1612A&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// modified ICE1232 with S/PDIF
(brace
l_int|0x57454301
comma
l_int|0xffffffff
comma
l_string|&quot;W83971D&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c00
comma
l_int|0xffffffff
comma
l_string|&quot;WM9701A&quot;
comma
id|patch_wolfson00
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c03
comma
l_int|0xffffffff
comma
l_string|&quot;WM9703/9707&quot;
comma
id|patch_wolfson03
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c04
comma
l_int|0xffffffff
comma
l_string|&quot;WM9704/quad&quot;
comma
id|patch_wolfson04
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c05
comma
l_int|0xffffffff
comma
l_string|&quot;WM9705&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// patch?
(brace
l_int|0x594d4800
comma
l_int|0xffffffff
comma
l_string|&quot;YMF743&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x594d4802
comma
l_int|0xffffffff
comma
l_string|&quot;YMF752&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x594d4803
comma
l_int|0xffffffff
comma
l_string|&quot;YMF753&quot;
comma
id|patch_yamaha_ymf753
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847600
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9700/83/84&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847604
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9701/3/4/5&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847605
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9704&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847608
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9708/11&quot;
comma
id|patch_sigmatel_stac9708
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847609
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9721/23&quot;
comma
id|patch_sigmatel_stac9721
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847644
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9744&quot;
comma
id|patch_sigmatel_stac9744
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847650
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9750/51&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// patch?
(brace
l_int|0x83847656
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9756/57&quot;
comma
id|patch_sigmatel_stac9756
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847666
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9766/67&quot;
comma
l_int|NULL
comma
l_int|NULL
)brace
comma
singleline_comment|// patch?
(brace
l_int|0
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|snd_ac97_stereo_enhancements
r_static
r_const
r_char
op_star
id|snd_ac97_stereo_enhancements
(braket
)braket
op_assign
(brace
multiline_comment|/*   0 */
l_string|&quot;No 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   1 */
l_string|&quot;Analog Devices Phat Stereo&quot;
comma
multiline_comment|/*   2 */
l_string|&quot;Creative Stereo Enhancement&quot;
comma
multiline_comment|/*   3 */
l_string|&quot;National Semi 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   4 */
l_string|&quot;YAMAHA Ymersion&quot;
comma
multiline_comment|/*   5 */
l_string|&quot;BBE 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   6 */
l_string|&quot;Crystal Semi 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   7 */
l_string|&quot;Qsound QXpander&quot;
comma
multiline_comment|/*   8 */
l_string|&quot;Spatializer 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   9 */
l_string|&quot;SRS 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  10 */
l_string|&quot;Platform Tech 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  11 */
l_string|&quot;AKM 3D Audio&quot;
comma
multiline_comment|/*  12 */
l_string|&quot;Aureal Stereo Enhancement&quot;
comma
multiline_comment|/*  13 */
l_string|&quot;Aztech 3D Enhancement&quot;
comma
multiline_comment|/*  14 */
l_string|&quot;Binaura 3D Audio Enhancement&quot;
comma
multiline_comment|/*  15 */
l_string|&quot;ESS Technology Stereo Enhancement&quot;
comma
multiline_comment|/*  16 */
l_string|&quot;Harman International VMAx&quot;
comma
multiline_comment|/*  17 */
l_string|&quot;Nvidea 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  18 */
l_string|&quot;Philips Incredible Sound&quot;
comma
multiline_comment|/*  19 */
l_string|&quot;Texas Instruments 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  20 */
l_string|&quot;VLSI Technology 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  21 */
l_string|&quot;TriTech 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  22 */
l_string|&quot;Realtek 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  23 */
l_string|&quot;Samsung 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  24 */
l_string|&quot;Wolfson Microelectronics 3D Enhancement&quot;
comma
multiline_comment|/*  25 */
l_string|&quot;Delta Integration 3D Enhancement&quot;
comma
multiline_comment|/*  26 */
l_string|&quot;SigmaTel 3D Enhancement&quot;
comma
multiline_comment|/*  27 */
l_string|&quot;Reserved 27&quot;
comma
multiline_comment|/*  28 */
l_string|&quot;Rockwell 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  29 */
l_string|&quot;Reserved 29&quot;
comma
multiline_comment|/*  30 */
l_string|&quot;Reserved 30&quot;
comma
multiline_comment|/*  31 */
l_string|&quot;Reserved 31&quot;
)brace
suffix:semicolon
multiline_comment|/*&n; *  I/O routines&n; */
DECL|function|snd_ac97_valid_reg
r_static
r_int
id|snd_ac97_valid_reg
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
id|ac97-&gt;limited_regs
op_logical_and
op_logical_neg
id|test_bit
c_func
(paren
id|reg
comma
id|ac97-&gt;reg_accessed
)paren
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* filter some registers for buggy codecs */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_AK4540
suffix:colon
r_case
id|AC97_ID_AK4542
suffix:colon
r_if
c_cond
(paren
id|reg
op_le
l_int|0x1c
op_logical_or
id|reg
op_eq
l_int|0x20
op_logical_or
id|reg
op_eq
l_int|0x26
op_logical_or
id|reg
op_ge
l_int|0x7c
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|AC97_ID_AD1819
suffix:colon
multiline_comment|/* AD1819 */
r_case
id|AC97_ID_AD1881
suffix:colon
multiline_comment|/* AD1881 */
r_case
id|AC97_ID_AD1881A
suffix:colon
multiline_comment|/* AD1881A */
r_if
c_cond
(paren
id|reg
op_ge
l_int|0x3a
op_logical_and
id|reg
op_le
l_int|0x6e
)paren
multiline_comment|/* 0x59 */
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
r_case
id|AC97_ID_AD1885
suffix:colon
multiline_comment|/* AD1885 */
r_case
id|AC97_ID_AD1886
suffix:colon
multiline_comment|/* AD1886 */
r_case
id|AC97_ID_AD1886A
suffix:colon
multiline_comment|/* AD1886A - !!verify!! --jk */
r_case
id|AC97_ID_AD1887
suffix:colon
multiline_comment|/* AD1887 - !!verify!! --jk */
r_if
c_cond
(paren
id|reg
op_eq
l_int|0x5a
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|reg
op_ge
l_int|0x3c
op_logical_and
id|reg
op_le
l_int|0x6e
)paren
multiline_comment|/* 0x59 */
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9704
suffix:colon
r_case
id|AC97_ID_STAC9705
suffix:colon
r_case
id|AC97_ID_STAC9708
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
r_if
c_cond
(paren
id|reg
op_le
l_int|0x3a
op_logical_or
id|reg
op_ge
l_int|0x5a
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_write - write a value on the given register&n; * @ac97: the ac97 instance&n; * @reg: the register to change&n; * @value: the value to set&n; *&n; * Writes a value on the given register.  This will invoke the write&n; * callback directly after the register check.&n; * This function doesn&squot;t change the register cache unlike&n; * #snd_ca97_write_cache(), so use this only when you don&squot;t want to&n; * reflect the change to the suspend/resume state.&n; */
DECL|function|snd_ac97_write
r_void
id|snd_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_read - read a value from the given register&n; * &n; * @ac97: the ac97 instance&n; * @reg: the register to read&n; *&n; * Reads a value from the given register.  This will invoke the read&n; * callback directly after the register check.&n; *&n; * Returns the read value.&n; */
DECL|function|snd_ac97_read
r_int
r_int
id|snd_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|ac97
op_member_access_from_pointer
id|read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_write_cache - write a value on the given register and update the cache&n; * @ac97: the ac97 instance&n; * @reg: the register to change&n; * @value: the value to set&n; *&n; * Writes a value on the given register and updates the register&n; * cache.  The cached values are used for the cached-read and the&n; * suspend/resume.&n; */
DECL|function|snd_ac97_write_cache
r_void
id|snd_ac97_write_cache
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|value
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
id|set_bit
c_func
(paren
id|reg
comma
id|ac97-&gt;reg_accessed
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_write_cache_test
r_static
r_void
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
macro_line|#if 0
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
singleline_comment|//spin_lock(&amp;ac97-&gt;reg_lock);
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|ac97
op_member_access_from_pointer
id|read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|value
op_ne
id|ac97-&gt;regs
(braket
id|reg
)braket
)paren
id|snd_printk
c_func
(paren
l_string|&quot;AC97 reg=%02x val=%04x real=%04x&bslash;n&quot;
comma
id|reg
comma
id|value
comma
id|ac97-&gt;regs
(braket
id|reg
)braket
)paren
suffix:semicolon
singleline_comment|//spin_unlock(&amp;ac97-&gt;reg_lock);
macro_line|#endif
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_update - update the value on the given register&n; * @ac97: the ac97 instance&n; * @reg: the register to change&n; * @value: the value to set&n; *&n; * Compares the value with the register cache and updates the value&n; * only when the value is changed.&n; *&n; * Returns 1 if the value is changed, 0 if no change, or a negative&n; * code on failure.&n; */
DECL|function|snd_ac97_update
r_int
id|snd_ac97_update
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|change
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
op_ne
id|value
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|value
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
)brace
r_else
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_update_bits - update the bits on the given register&n; * @ac97: the ac97 instance&n; * @reg: the register to change&n; * @mask: the bit-mask to change&n; * @value: the value to set&n; *&n; * Updates the masked-bits on the given register only when the value&n; * is changed.&n; *&n; * Returns 1 if the bits are changed, 0 if no change, or a negative&n; * code on failure.&n; */
DECL|function|snd_ac97_update_bits
r_int
id|snd_ac97_update_bits
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_int
r_int
id|old
comma
r_new
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
suffix:semicolon
r_new
op_assign
(paren
id|old
op_amp
op_complement
id|mask
)paren
op_or
id|value
suffix:semicolon
id|change
op_assign
id|old
op_ne
r_new
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
r_new
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
r_new
)paren
suffix:semicolon
)brace
r_else
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_update_pcm_bits
r_static
r_int
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|codec
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_int
r_int
id|old
comma
r_new
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
suffix:semicolon
r_new
op_assign
(paren
id|old
op_amp
op_complement
id|mask
)paren
op_or
id|value
suffix:semicolon
id|change
op_assign
id|old
op_ne
r_new
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_assign
r_new
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
multiline_comment|/* select single codec */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|codec
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|codec
)braket
)paren
suffix:semicolon
multiline_comment|/* update PCM bits */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_PCM
comma
r_new
)paren
suffix:semicolon
multiline_comment|/* select all codecs */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
)brace
r_else
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_ac97_info_mux
r_static
r_int
id|snd_ac97_info_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;Mic&quot;
comma
l_string|&quot;CD&quot;
comma
l_string|&quot;Video&quot;
comma
l_string|&quot;Aux&quot;
comma
l_string|&quot;Line&quot;
comma
l_string|&quot;Mix&quot;
comma
l_string|&quot;Mix Mono&quot;
comma
l_string|&quot;Phone&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|7
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|7
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_mux
r_static
r_int
id|snd_ac97_get_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_REC_SEL
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
l_int|7
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
op_assign
(paren
id|val
op_rshift
l_int|0
)paren
op_amp
l_int|7
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_mux
r_static
r_int
id|snd_ac97_put_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|7
op_logical_or
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
OG
l_int|7
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
op_lshift
l_int|0
)paren
suffix:semicolon
r_return
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|AC97_REC_SEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|macro|AC97_ENUM_DOUBLE
mdefine_line|#define AC97_ENUM_DOUBLE(xname, reg, shift, invert) &bslash;&n;{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, .info = snd_ac97_info_enum_double, &bslash;&n;  .get = snd_ac97_get_enum_double, .put = snd_ac97_put_enum_double, &bslash;&n;  .private_value = reg | (shift &lt;&lt; 8) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_enum_double
r_static
r_int
id|snd_ac97_info_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts1
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;pre 3D&quot;
comma
l_string|&quot;post 3D&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|texts2
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;Mix&quot;
comma
l_string|&quot;Mic&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|texts3
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;Mic1&quot;
comma
l_string|&quot;Mic2&quot;
)brace
suffix:semicolon
r_char
op_star
op_star
id|texts
op_assign
l_int|NULL
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_GENERAL_PURPOSE
suffix:colon
r_switch
c_cond
(paren
id|shift
)paren
(brace
r_case
l_int|15
suffix:colon
id|texts
op_assign
id|texts1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|texts
op_assign
id|texts2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|texts
op_assign
id|texts3
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_enum_double
r_static
r_int
id|snd_ac97_get_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|val
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift
)paren
op_amp
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_xor_assign
l_int|1
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_enum_double
r_static
r_int
id|snd_ac97_put_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
op_logical_neg
op_logical_neg
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_assign
op_logical_neg
id|val
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|1
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AC97_SINGLE
mdefine_line|#define AC97_SINGLE(xname, reg, shift, mask, invert) &bslash;&n;{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, .info = snd_ac97_info_single, &bslash;&n;  .get = snd_ac97_get_single, .put = snd_ac97_put_single, &bslash;&n;  .private_value = reg | (shift &lt;&lt; 8) | (mask &lt;&lt; 16) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_single
r_static
r_int
id|snd_ac97_info_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_single
r_static
r_int
id|snd_ac97_get_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift
)paren
op_amp
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_single
r_static
r_int
id|snd_ac97_put_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_assign
id|mask
op_minus
id|val
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
id|mask
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AC97_DOUBLE
mdefine_line|#define AC97_DOUBLE(xname, reg, shift_left, shift_right, mask, invert) &bslash;&n;{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = (xname), .info = snd_ac97_info_double, &bslash;&n;  .get = snd_ac97_get_double, .put = snd_ac97_put_double, &bslash;&n;  .private_value = reg | (shift_left &lt;&lt; 8) | (shift_right &lt;&lt; 12) | (mask &lt;&lt; 16) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_double
r_static
r_int
id|snd_ac97_info_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_double
r_static
r_int
id|snd_ac97_get_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift_left
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|shift_right
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|12
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift_left
)paren
op_amp
id|mask
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift_right
)paren
op_amp
id|mask
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
(brace
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_double
r_static
r_int
id|snd_ac97_put_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift_left
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|shift_right
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|12
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val1
comma
id|val2
suffix:semicolon
id|val1
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
suffix:semicolon
id|val2
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
(brace
id|val1
op_assign
id|mask
op_minus
id|val1
suffix:semicolon
id|val2
op_assign
id|mask
op_minus
id|val2
suffix:semicolon
)brace
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
(paren
id|mask
op_lshift
id|shift_left
)paren
op_or
(paren
id|mask
op_lshift
id|shift_right
)paren
comma
(paren
id|val1
op_lshift
id|shift_left
)paren
op_or
(paren
id|val2
op_lshift
id|shift_right
)paren
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_master
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_master
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Playback Switch&quot;
comma
id|AC97_MASTER
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Master Playback Volume&quot;
comma
id|AC97_MASTER
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_headphone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_headphone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Headphone Playback Switch&quot;
comma
id|AC97_HEADPHONE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Headphone Playback Volume&quot;
comma
id|AC97_HEADPHONE
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_master_mono
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_master_mono
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Mono Playback Switch&quot;
comma
id|AC97_MASTER_MONO
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Mono Playback Volume&quot;
comma
id|AC97_MASTER_MONO
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_tone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_tone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Tone Control - Bass&quot;
comma
id|AC97_MASTER_TONE
comma
l_int|8
comma
l_int|15
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Tone Control - Treble&quot;
comma
id|AC97_MASTER_TONE
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_pc_beep
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_pc_beep
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PC Speaker Playback Switch&quot;
comma
id|AC97_PC_BEEP
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PC Speaker Playback Volume&quot;
comma
id|AC97_PC_BEEP
comma
l_int|1
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_phone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_phone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Phone Playback Switch&quot;
comma
id|AC97_PHONE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Phone Playback Volume&quot;
comma
id|AC97_PHONE
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_mic
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_mic
(braket
l_int|3
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Playback Switch&quot;
comma
id|AC97_MIC
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Playback Volume&quot;
comma
id|AC97_MIC
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Boost (+20dB)&quot;
comma
id|AC97_MIC
comma
l_int|6
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_line
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_line
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line Playback Switch&quot;
comma
id|AC97_LINE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Line Playback Volume&quot;
comma
id|AC97_LINE
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_cd
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_cd
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;CD Playback Switch&quot;
comma
id|AC97_CD
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;CD Playback Volume&quot;
comma
id|AC97_CD
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_video
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_video
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Video Playback Switch&quot;
comma
id|AC97_VIDEO
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Video Playback Volume&quot;
comma
id|AC97_VIDEO
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_aux
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_aux
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Aux Playback Switch&quot;
comma
id|AC97_AUX
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Aux Playback Volume&quot;
comma
id|AC97_AUX
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_pcm
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_pcm
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PCM Playback Switch&quot;
comma
id|AC97_PCM
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;PCM Playback Volume&quot;
comma
id|AC97_PCM
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_capture
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_capture
(braket
l_int|3
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Capture Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_mux
comma
dot
id|get
op_assign
id|snd_ac97_get_mux
comma
dot
id|put
op_assign
id|snd_ac97_put_mux
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Capture Switch&quot;
comma
id|AC97_REC_GAIN
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Capture Volume&quot;
comma
id|AC97_REC_GAIN
comma
l_int|8
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_mic_capture
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_mic_capture
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Capture Switch&quot;
comma
id|AC97_REC_GAIN_MIC
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Capture Volume&quot;
comma
id|AC97_REC_GAIN_MIC
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
r_typedef
r_enum
(brace
DECL|enumerator|AC97_GENERAL_PCM_OUT
id|AC97_GENERAL_PCM_OUT
op_assign
l_int|0
comma
DECL|enumerator|AC97_GENERAL_STEREO_ENHANCEMENT
id|AC97_GENERAL_STEREO_ENHANCEMENT
comma
DECL|enumerator|AC97_GENERAL_3D
id|AC97_GENERAL_3D
comma
DECL|enumerator|AC97_GENERAL_LOUDNESS
id|AC97_GENERAL_LOUDNESS
comma
DECL|enumerator|AC97_GENERAL_MONO
id|AC97_GENERAL_MONO
comma
DECL|enumerator|AC97_GENERAL_MIC
id|AC97_GENERAL_MIC
comma
DECL|enumerator|AC97_GENERAL_LOOPBACK
id|AC97_GENERAL_LOOPBACK
DECL|typedef|ac97_general_index_t
)brace
id|ac97_general_index_t
suffix:semicolon
DECL|variable|snd_ac97_controls_general
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_general
(braket
l_int|7
)braket
op_assign
(brace
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;PCM Out Path &amp; Mute&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|15
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Simulated Stereo Enhancement&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Switch&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Loudness (bass boost)&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;Mono Output Select&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|9
comma
l_int|0
)paren
comma
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;Mic Select&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|8
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;ADC/DAC Loopback&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|7
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_3d
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_3d
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Center&quot;
comma
id|AC97_3D_CONTROL
comma
l_int|8
comma
l_int|15
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Depth&quot;
comma
id|AC97_3D_CONTROL
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_center
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_center
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center Playback Switch&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|7
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center Playback Volume&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_lfe
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_lfe
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;LFE Playback Switch&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;LFE Playback Volume&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|8
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_surround
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_surround
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround Playback Switch&quot;
comma
id|AC97_SURROUND_MASTER
comma
l_int|15
comma
l_int|7
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround Playback Volume&quot;
comma
id|AC97_SURROUND_MASTER
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_surround
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_surround
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel Surround Playback Switch&quot;
comma
id|AC97_HEADPHONE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Sigmatel Surround Playback Volume&quot;
comma
id|AC97_HEADPHONE
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel DAC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel ADC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_control_eapd
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_control_eapd
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;External Amplifier Power Down&quot;
comma
id|AC97_POWERDOWN
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|snd_ac97_controls_vt1616
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_vt1616
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;DC Offset removal&quot;
comma
l_int|0x5a
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Alternate Level to Surround Out&quot;
comma
l_int|0x5a
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix LFE and Center to Front&quot;
comma
l_int|0x5a
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Downmix Surround to Front&quot;
comma
l_int|0x5a
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|function|snd_ac97_spdif_mask_info
r_static
r_int
id|snd_ac97_spdif_mask_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_cmask_get
r_static
r_int
id|snd_ac97_spdif_cmask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_CON_EMPHASIS_5015
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_CON_CATEGORY
op_or
id|IEC958_AES1_CON_ORIGINAL
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
id|IEC958_AES3_CON_FS
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_pmask_get
r_static
r_int
id|snd_ac97_spdif_pmask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
multiline_comment|/* FIXME: AC&squot;97 spec doesn&squot;t say which bits are used for what */
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS_5015
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_default_get
r_static
r_int
id|snd_ac97_spdif_default_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|ac97-&gt;spdif_status
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_default_put
r_static
r_int
id|snd_ac97_spdif_default_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
r_new
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|val
op_assign
l_int|0
suffix:semicolon
r_int
id|change
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_new
op_assign
id|val
op_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PROFESSIONAL
)paren
(brace
r_new
op_or_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
suffix:semicolon
r_switch
c_cond
(paren
r_new
op_amp
id|IEC958_AES0_PRO_FS
)paren
(brace
r_case
id|IEC958_AES0_PRO_FS_44100
suffix:colon
id|val
op_or_assign
l_int|0
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES0_PRO_FS_48000
suffix:colon
id|val
op_or_assign
l_int|2
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES0_PRO_FS_32000
suffix:colon
id|val
op_or_assign
l_int|3
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|val
op_or_assign
l_int|1
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
r_new
op_amp
id|IEC958_AES0_PRO_EMPHASIS
)paren
op_eq
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_new
op_or_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_CON_EMPHASIS_5015
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
)paren
suffix:semicolon
r_new
op_or_assign
(paren
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_amp
(paren
id|IEC958_AES1_CON_CATEGORY
op_or
id|IEC958_AES1_CON_ORIGINAL
)paren
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_new
op_or_assign
(paren
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_amp
id|IEC958_AES3_CON_FS
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_new
op_amp
id|IEC958_AES0_CON_EMPHASIS
)paren
op_eq
id|IEC958_AES0_CON_EMPHASIS_5015
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|3
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_amp
id|IEC958_AES0_CON_NOT_COPYRIGHT
)paren
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|2
suffix:semicolon
id|val
op_or_assign
(paren
(paren
r_new
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_lshift
l_int|4
suffix:semicolon
singleline_comment|// category + original
r_switch
c_cond
(paren
(paren
r_new
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
)paren
(brace
r_case
id|IEC958_AES3_CON_FS_44100
suffix:colon
id|val
op_or_assign
l_int|0
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES3_CON_FS_48000
suffix:colon
id|val
op_or_assign
l_int|2
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES3_CON_FS_32000
suffix:colon
id|val
op_or_assign
l_int|3
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|val
op_or_assign
l_int|1
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|change
op_assign
id|ac97-&gt;spdif_status
op_ne
r_new
suffix:semicolon
id|ac97-&gt;spdif_status
op_assign
r_new
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
(brace
r_int
id|x
op_assign
(paren
id|val
op_rshift
l_int|12
)paren
op_amp
l_int|0x03
suffix:semicolon
r_switch
c_cond
(paren
id|x
)paren
(brace
r_case
l_int|0
suffix:colon
id|x
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
singleline_comment|// 44.1
r_case
l_int|2
suffix:colon
id|x
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
singleline_comment|// 48.0
r_default
suffix:colon
id|x
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
singleline_comment|// illegal.
)brace
id|change
op_or_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CSR_SPDIF
comma
l_int|0x3fff
comma
(paren
(paren
id|val
op_amp
l_int|0xcfff
)paren
op_or
(paren
id|x
op_lshift
l_int|12
)paren
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CX_SPDIF
)paren
(brace
r_int
id|v
suffix:semicolon
id|v
op_assign
r_new
op_amp
(paren
id|IEC958_AES0_CON_EMPHASIS_5015
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
)paren
ques
c_cond
l_int|0
suffix:colon
id|AC97_CXR_COPYRGT
suffix:semicolon
id|v
op_or_assign
r_new
op_amp
id|IEC958_AES0_NONAUDIO
ques
c_cond
id|AC97_CXR_SPDIF_AC3
suffix:colon
id|AC97_CXR_SPDIF_PCM
suffix:semicolon
id|change
op_or_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
comma
id|AC97_CXR_SPDIF_MASK
op_or
id|AC97_CXR_COPYRGT
comma
id|v
)paren
suffix:semicolon
)brace
r_else
(brace
id|change
op_or_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x3fff
comma
id|val
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ac97_put_spsa
r_static
r_int
id|snd_ac97_put_spsa
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
singleline_comment|// int invert = (kcontrol-&gt;private_value &gt;&gt; 24) &amp; 0xff;
r_int
r_int
id|value
comma
id|old
comma
r_new
suffix:semicolon
id|value
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
)paren
suffix:semicolon
id|mask
op_lshift_assign
id|shift
suffix:semicolon
id|value
op_lshift_assign
id|shift
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
suffix:semicolon
r_new
op_assign
(paren
id|old
op_amp
op_complement
id|mask
)paren
op_or
id|value
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old
op_ne
r_new
)paren
(brace
r_int
id|change
suffix:semicolon
r_int
r_int
id|extst
op_assign
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* turn off */
id|change
op_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
id|mask
comma
id|value
)paren
suffix:semicolon
r_if
c_cond
(paren
id|extst
op_amp
id|AC97_EA_SPDIF
)paren
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
id|AC97_EA_SPDIF
)paren
suffix:semicolon
multiline_comment|/* turn on again */
r_return
id|change
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_spdif
(braket
l_int|5
)braket
op_assign
(brace
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
dot
id|info
op_assign
id|snd_ac97_spdif_mask_info
comma
dot
id|get
op_assign
id|snd_ac97_spdif_cmask_get
comma
)brace
comma
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
dot
id|info
op_assign
id|snd_ac97_spdif_mask_info
comma
dot
id|get
op_assign
id|snd_ac97_spdif_pmask_get
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
dot
id|info
op_assign
id|snd_ac97_spdif_mask_info
comma
dot
id|get
op_assign
id|snd_ac97_spdif_default_get
comma
dot
id|put
op_assign
id|snd_ac97_spdif_default_put
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_EXTENDED_STATUS
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
singleline_comment|// AC97_SINGLE(SNDRV_CTL_NAME_IEC958(&quot;&quot;,PLAYBACK,NONE) &quot;AC97-SPSA&quot;,AC97_EXTENDED_STATUS, 4, 3, 0)
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;AC97-SPSA&quot;
comma
dot
id|info
op_assign
id|snd_ac97_info_single
comma
dot
id|get
op_assign
id|snd_ac97_get_single
comma
dot
id|put
op_assign
id|snd_ac97_put_spsa
comma
dot
id|private_value
op_assign
id|AC97_EXTENDED_STATUS
op_or
(paren
l_int|4
op_lshift
l_int|8
)paren
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
op_or
(paren
l_int|0
op_lshift
l_int|24
)paren
comma
)brace
comma
)brace
suffix:semicolon
DECL|variable|snd_ac97_cirrus_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CSR_SPDIF
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;AC97-SPSA&quot;
comma
id|AC97_CSR_ACMODE
comma
l_int|0
comma
l_int|3
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_conexant_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_conexant_controls_spdif
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_CXR_AUDIO_MISC
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
DECL|macro|AD18XX_PCM_BITS
mdefine_line|#define AD18XX_PCM_BITS(xname, codec, shift, mask) &bslash;&n;{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, .info = snd_ac97_ad18xx_pcm_info_bits, &bslash;&n;  .get = snd_ac97_ad18xx_pcm_get_bits, .put = snd_ac97_ad18xx_pcm_put_bits, &bslash;&n;  .private_value = codec | (shift &lt;&lt; 8) | (mask &lt;&lt; 16) }
DECL|function|snd_ac97_ad18xx_pcm_info_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_info_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_get_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_get_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
id|shift
)paren
op_amp
id|mask
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_put_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_put_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|mask
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
)paren
suffix:semicolon
r_return
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97
comma
id|codec
comma
id|mask
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AD18XX_PCM_VOLUME
mdefine_line|#define AD18XX_PCM_VOLUME(xname, codec) &bslash;&n;{ .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, .info = snd_ac97_ad18xx_pcm_info_volume, &bslash;&n;  .get = snd_ac97_ad18xx_pcm_get_volume, .put = snd_ac97_ad18xx_pcm_put_volume, &bslash;&n;  .private_value = codec }
DECL|function|snd_ac97_ad18xx_pcm_info_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_info_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|31
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_get_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_get_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|31
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
l_int|0
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
l_int|31
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_put_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_put_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|val1
comma
id|val2
suffix:semicolon
id|val1
op_assign
l_int|31
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|31
)paren
suffix:semicolon
id|val2
op_assign
l_int|31
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
l_int|31
)paren
suffix:semicolon
r_return
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97
comma
id|codec
comma
l_int|0x1f1f
comma
(paren
id|val1
op_lshift
l_int|8
)paren
op_or
id|val2
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_ad18xx_pcm
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_pcm
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;PCM Playback Switch&quot;
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_VOLUME
c_func
(paren
l_string|&quot;PCM Playback Volume&quot;
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_surround
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_surround
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Surround Playback Switch&quot;
comma
l_int|1
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_VOLUME
c_func
(paren
l_string|&quot;Surround Playback Volume&quot;
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_center
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_center
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Center Playback Switch&quot;
comma
l_int|2
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Center Playback Volume&quot;
comma
l_int|2
comma
l_int|8
comma
l_int|31
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_lfe
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_lfe
(braket
l_int|1
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;LFE Playback Volume&quot;
comma
l_int|2
comma
l_int|0
comma
l_int|31
)paren
)brace
suffix:semicolon
DECL|function|snd_ac97_ad1980_spdif_source_info
r_static
r_int
id|snd_ac97_ad1980_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1980_spdif_source_get
r_static
r_int
id|snd_ac97_ad1980_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_AD_SERIAL_CFG
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad1980_spdif_source_put
r_static
r_int
id|snd_ac97_ad1980_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|2
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x0004
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ad1980_spdif_source
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ad1980_spdif_source
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
id|info
suffix:colon
id|snd_ac97_ad1980_spdif_source_info
comma
id|get
suffix:colon
id|snd_ac97_ad1980_spdif_source_get
comma
id|put
suffix:colon
id|snd_ac97_ad1980_spdif_source_put
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * ALC650&n; */
DECL|variable|snd_ac97_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Duplicate Front&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE Down Mix&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Exchange Center/LFE&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|3
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* 4: Analog Input To Surround */
multiline_comment|/* 5: Analog Input To Center/LFE */
multiline_comment|/* 6: Independent Master Volume Right */
multiline_comment|/* 7: Independent Master Volume Left */
multiline_comment|/* 8: reserved */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line-In As Surround&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|9
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic As Center/LFE&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|10
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Swap Surround Slot&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
macro_line|#if 0 /* always set in patch_alc650 */
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Clock Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Pin Enable&quot;
comma
id|AC97_ALC650_CLOCK
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Surround DAC Switch&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround DAC Volume&quot;
comma
id|AC97_ALC650_SURR_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center/LFE DAC Switch&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Center/LFE DAC Volume&quot;
comma
id|AC97_ALC650_LFE_DAC_VOL
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|variable|snd_ac97_spdif_controls_alc650
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_spdif_controls_alc650
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Capture Switch&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|11
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Analog to IEC958 Output&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;IEC958 Input Monitor&quot;
comma
id|AC97_ALC650_MULTICH
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
multiline_comment|/* The following snd_ac97_ymf753_... items added by David Shust (dshust@shustring.com) */
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the type of speakers being used. */
DECL|function|snd_ac97_ymf753_info_speaker
r_static
r_int
id|snd_ac97_ymf753_info_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Standard&quot;
comma
l_string|&quot;Small&quot;
comma
l_string|&quot;Smaller&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_get_speaker
r_static
r_int
id|snd_ac97_ymf753_get_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_3D_MODE_SEL
)braket
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
l_int|10
)paren
op_amp
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|val
OG
l_int|0
)paren
multiline_comment|/* 0 = invalid */
id|val
op_decrement
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_put_speaker
r_static
r_int
id|snd_ac97_ymf753_put_speaker
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
op_lshift
l_int|10
suffix:semicolon
r_return
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_ymf753_controls_speaker
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_speaker
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;3D Control - Speaker&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_info_speaker
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_get_speaker
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_put_speaker
comma
)brace
suffix:semicolon
multiline_comment|/* It is possible to indicate to the Yamaha YMF753 the source to direct to the S/PDIF output. */
DECL|function|snd_ac97_ymf753_spdif_source_info
r_static
r_int
id|snd_ac97_ymf753_spdif_source_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;AC-Link&quot;
comma
l_string|&quot;A/D Converter&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_get
r_static
r_int
id|snd_ac97_ymf753_spdif_source_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|1
)paren
op_amp
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_source_put
r_static
r_int
id|snd_ac97_ymf753_spdif_source_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|1
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0002
comma
id|val
)paren
suffix:semicolon
)brace
multiline_comment|/* The AC&squot;97 spec states that the S/PDIF signal is to be output at pin 48.&n;   The YMF753 will output the S/PDIF signal to pin 43, 47 (EAPD), or 48.&n;   By default, no output pin is selected, and the S/PDIF signal is not output.&n;   There is also a bit to mute S/PDIF output in a vendor-specific register. */
DECL|function|snd_ac97_ymf753_spdif_output_pin_info
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;Disabled&quot;
comma
l_string|&quot;Pin 43&quot;
comma
l_string|&quot;Pin 48&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_get
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_YMF753_DIT_CTRL2
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_amp
l_int|0x0008
)paren
ques
c_cond
l_int|2
suffix:colon
(paren
id|val
op_amp
l_int|0x0020
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ymf753_spdif_output_pin_put
r_static
r_int
id|snd_ac97_ymf753_spdif_output_pin_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|2
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|2
)paren
ques
c_cond
l_int|0x0008
suffix:colon
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|1
)paren
ques
c_cond
l_int|0x0020
suffix:colon
l_int|0
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|0x0028
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* The following can be used to direct S/PDIF output to pin 47 (EAPD).&n;&t;   snd_ac97_write_cache(ac97, 0x62, snd_ac97_read(ac97, 0x62) | 0x0008); */
)brace
DECL|variable|snd_ac97_ymf753_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_ymf753_controls_spdif
(braket
l_int|3
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_source_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_source_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_source_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;Output Pin&quot;
comma
dot
id|info
op_assign
id|snd_ac97_ymf753_spdif_output_pin_info
comma
dot
id|get
op_assign
id|snd_ac97_ymf753_spdif_output_pin_get
comma
dot
id|put
op_assign
id|snd_ac97_ymf753_spdif_output_pin_put
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|NONE
comma
id|NONE
)paren
l_string|&quot;Mute&quot;
comma
id|AC97_YMF753_DIT_CTRL2
comma
l_int|2
comma
l_int|1
comma
l_int|1
)paren
)brace
suffix:semicolon
multiline_comment|/*&n; *&n; */
DECL|function|snd_ac97_free
r_static
r_int
id|snd_ac97_free
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_if
c_cond
(paren
id|ac97
)paren
(brace
r_if
c_cond
(paren
id|ac97-&gt;private_free
)paren
id|ac97
op_member_access_from_pointer
id|private_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|snd_magic_kfree
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_dev_free
r_static
r_int
id|snd_ac97_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|device-&gt;device_data
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_return
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_try_volume_mix
r_static
r_int
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
)paren
(brace
r_int
r_int
id|val
comma
id|mask
op_assign
l_int|0x8000
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_MASTER_TONE
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x04
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_HEADPHONE
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x10
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_REC_GAIN_MIC
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x01
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_3D_CONTROL
suffix:colon
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x7c00
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
multiline_comment|/* if nonzero - fixed and we can&squot;t set it */
r_return
id|val
op_eq
l_int|0
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
r_case
id|AC97_CENTER_LFE_MASTER
suffix:colon
multiline_comment|/* center */
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x40
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_CENTER_LFE_MASTER
op_plus
l_int|1
suffix:colon
multiline_comment|/* lfe */
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x100
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
id|reg
op_assign
id|AC97_CENTER_LFE_MASTER
suffix:semicolon
id|mask
op_assign
l_int|0x0080
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_SURROUND_MASTER
suffix:colon
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x80
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;limited_regs
op_logical_and
id|test_bit
c_func
(paren
id|reg
comma
id|ac97-&gt;reg_accessed
)paren
)paren
r_return
l_int|1
suffix:semicolon
multiline_comment|/* allow without check */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
id|mask
)paren
)paren
(brace
multiline_comment|/* nothing seems to be here - mute flag is not set */
multiline_comment|/* try another test */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
op_or
id|mask
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
id|mask
)paren
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* nothing here */
)brace
r_return
l_int|1
suffix:semicolon
multiline_comment|/* success, useable */
)brace
DECL|function|snd_ac97_try_bit
r_static
r_int
id|snd_ac97_try_bit
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|bit
)paren
(brace
r_int
r_int
id|mask
comma
id|val
comma
id|orig
comma
id|res
suffix:semicolon
id|mask
op_assign
l_int|1
op_lshift
id|bit
suffix:semicolon
id|orig
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|val
op_assign
id|orig
op_xor
id|mask
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|res
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
id|orig
)paren
suffix:semicolon
r_return
id|res
op_eq
id|val
suffix:semicolon
)brace
DECL|function|snd_ac97_change_volume_params1
r_static
r_void
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_char
op_star
id|max
)paren
(brace
r_int
r_int
id|val
comma
id|val1
suffix:semicolon
op_star
id|max
op_assign
l_int|63
suffix:semicolon
id|val
op_assign
l_int|0x8000
op_or
l_int|0x0020
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|val1
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|val1
)paren
(brace
op_star
id|max
op_assign
l_int|31
suffix:semicolon
)brace
multiline_comment|/* reset volume to zero */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|0x8000
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_change_volume_params2
r_static
r_void
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|shift
comma
r_int
r_char
op_star
id|max
)paren
(brace
r_int
r_int
id|val
comma
id|val1
suffix:semicolon
op_star
id|max
op_assign
l_int|63
suffix:semicolon
id|val
op_assign
l_int|0x8080
op_or
(paren
l_int|0x20
op_lshift
id|shift
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|val1
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|val1
)paren
(brace
op_star
id|max
op_assign
l_int|31
suffix:semicolon
)brace
multiline_comment|/* reset volume to zero */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|0x8080
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_change_volume_params3
r_static
r_void
id|snd_ac97_change_volume_params3
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_char
op_star
id|max
)paren
(brace
r_int
r_int
id|val
comma
id|val1
suffix:semicolon
op_star
id|max
op_assign
l_int|31
suffix:semicolon
id|val
op_assign
l_int|0x8000
op_or
l_int|0x0010
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|val1
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|val1
)paren
(brace
op_star
id|max
op_assign
l_int|15
suffix:semicolon
)brace
multiline_comment|/* reset volume to zero */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|0x8000
)paren
suffix:semicolon
)brace
DECL|function|printable
r_static
r_inline
r_int
id|printable
c_func
(paren
r_int
r_int
id|x
)paren
(brace
id|x
op_and_assign
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|x
OL
l_char|&squot; &squot;
op_logical_or
id|x
op_ge
l_int|0x71
)paren
(brace
r_if
c_cond
(paren
id|x
op_le
l_int|0x89
)paren
r_return
id|x
op_minus
l_int|0x71
op_plus
l_char|&squot;A&squot;
suffix:semicolon
r_return
l_char|&squot;?&squot;
suffix:semicolon
)brace
r_return
id|x
suffix:semicolon
)brace
DECL|function|snd_ac97_cnew
r_static
id|snd_kcontrol_t
op_star
id|snd_ac97_cnew
c_func
(paren
r_const
id|snd_kcontrol_new_t
op_star
id|_template
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_new_t
r_template
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
r_template
comma
id|_template
comma
r_sizeof
(paren
r_template
)paren
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
r_template
dot
id|index
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_template
dot
id|index
op_assign
id|ac97-&gt;num
suffix:semicolon
r_return
id|snd_ctl_new1
c_func
(paren
op_amp
r_template
comma
id|ac97
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_mixer_build
r_static
r_int
id|snd_ac97_mixer_build
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_const
id|snd_kcontrol_new_t
op_star
id|knew
suffix:semicolon
r_int
id|err
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
r_int
r_char
id|max
suffix:semicolon
multiline_comment|/* build master controls */
multiline_comment|/* AD claims to remove this control from AD1887, although spec v2.2 does not allow this */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
l_int|0x8000
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_assign
l_int|0x8080
suffix:semicolon
multiline_comment|/* build center controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_center
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_center
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|0
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_or
id|max
)paren
suffix:semicolon
)brace
multiline_comment|/* build LFE controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
op_plus
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_lfe
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_lfe
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|8
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_or
id|max
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/* build surround controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_surround
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_surround
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x8080
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* build headphone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
)paren
op_logical_or
id|ac97-&gt;id
op_eq
id|AC97_ID_STAC9708
)paren
(brace
id|knew
op_assign
id|ac97-&gt;id
op_eq
id|AC97_ID_STAC9708
ques
c_cond
id|snd_ac97_sigmatel_surround
suffix:colon
id|snd_ac97_controls_headphone
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
id|knew
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
id|knew
op_plus
l_int|1
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
comma
l_int|0x8000
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* build master mono controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master_mono
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master_mono
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
comma
l_int|0x8000
op_or
id|max
)paren
suffix:semicolon
)brace
multiline_comment|/* build master tone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER_TONE
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_tone
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
id|AC97_ID_YMF753
)paren
(brace
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
l_int|7
op_lshift
l_int|16
suffix:semicolon
)brace
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER_TONE
comma
l_int|0x0f0f
)paren
suffix:semicolon
)brace
multiline_comment|/* build PC Speaker controls */
r_if
c_cond
(paren
(paren
id|ac97-&gt;flags
op_amp
id|AC97_HAS_PC_BEEP
)paren
op_logical_or
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_PC_BEEP
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_pc_beep
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PC_BEEP
comma
l_int|0x801e
)paren
suffix:semicolon
)brace
multiline_comment|/* build Phone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_PHONE
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_phone
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_phone
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params3
c_func
(paren
id|ac97
comma
id|AC97_PHONE
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PHONE
comma
l_int|0x8000
op_or
id|max
)paren
suffix:semicolon
)brace
multiline_comment|/* build MIC controls */
id|snd_ac97_change_volume_params3
c_func
(paren
id|ac97
comma
id|AC97_MIC
comma
op_amp
id|max
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_mic
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|idx
op_eq
l_int|1
)paren
(brace
singleline_comment|// volume
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
)brace
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MIC
comma
l_int|0x8000
op_or
id|max
)paren
suffix:semicolon
multiline_comment|/* build Line controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_line
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_LINE
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build CD controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_cd
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CD
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build Video controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_VIDEO
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_video
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_VIDEO
comma
l_int|0x9f1f
)paren
suffix:semicolon
)brace
multiline_comment|/* build Aux controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_AUX
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_aux
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AUX
comma
l_int|0x9f1f
)paren
suffix:semicolon
)brace
multiline_comment|/* build PCM controls */
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_AD_MULTI
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_pcm
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|0
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_SURROUND_DAC
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_surround
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|1
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_CENTER_LFE_DAC
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_center
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_lfe
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|2
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_pcm
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PCM
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build Capture controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_capture
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_SEL
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* build MIC Capture controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN_MIC
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_mic_capture
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN_MIC
comma
l_int|0x0000
)paren
suffix:semicolon
)brace
multiline_comment|/* build PCM out path &amp; mute control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|15
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_PCM_OUT
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Simulated Stereo Enhancement control */
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x0008
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_STEREO_ENHANCEMENT
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build 3D Stereo Enhancement control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|13
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_3D
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Loudness control */
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x0020
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_LOUDNESS
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Mono output select control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|9
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_MONO
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Mic select control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|8
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_MIC
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build ADC/DAC loopback control */
r_if
c_cond
(paren
id|enable_loopback
op_logical_and
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|7
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_LOOPBACK
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* build 3D controls */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_STAC9708
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Rear Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_ID_YMF753
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control - Wide&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|9
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_ymf753_controls_speaker
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_YMF753_3D_MODE_SEL
comma
l_int|0x0c00
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
)paren
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
l_int|0x0707
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
)paren
suffix:semicolon
id|val
op_assign
id|val
op_eq
l_int|0x0606
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|val
)paren
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|9
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|val
)paren
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* build S/PDIF controls */
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_spdif
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_switch
c_cond
(paren
id|ac97-&gt;id
op_amp
id|AC97_ID_CS_MASK
)paren
(brace
r_case
id|AC97_ID_CS4205
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_cirrus_controls_spdif
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CSR_SPDIF
comma
l_int|0x0a20
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CX_SPDIF
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_spdif
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_conexant_controls_spdif
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CXR_AUDIO_MISC
)paren
op_amp
op_complement
(paren
id|AC97_CXR_SPDIFEN
op_or
id|AC97_CXR_COPYRGT
op_or
id|AC97_CXR_SPDIF_MASK
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|5
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_spdif
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
id|AC97_ID_YMF753
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_ymf753_controls_spdif
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
id|AC97_ID_AD1980
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_ad1980_spdif_source
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* set default PCM S/PDIF params */
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original,48000Hz */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x2a20
)paren
suffix:semicolon
)brace
id|ac97-&gt;spdif_status
op_assign
id|SNDRV_PCM_DEFAULT_CON_SPDIF
suffix:semicolon
)brace
multiline_comment|/* build chip specific controls */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9708
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_amp
op_complement
l_int|0x0003
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_ID_ALC650
suffix:colon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_alc650
)paren
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_alc650
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_spdif_controls_alc650
)paren
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_spdif_controls_alc650
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|AC97_ID_VT1616
suffix:colon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
l_int|0x5a
comma
l_int|9
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_vt1616
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|1
suffix:semicolon
id|idx
OL
id|ARRAY_SIZE
c_func
(paren
id|snd_ac97_controls_vt1616
)paren
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_vt1616
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* nothing */
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|15
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_control_eapd
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_modem_build
r_static
r_int
id|snd_ac97_modem_build
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
multiline_comment|/* TODO */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_test_rate
r_static
r_int
id|snd_ac97_test_rate
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|rate
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
(paren
(paren
r_int
r_int
)paren
id|rate
op_star
id|ac97-&gt;clock
)paren
op_div
l_int|48000
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|reg
comma
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_return
id|val
op_eq
(paren
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_determine_rates
r_static
r_void
id|snd_ac97_determine_rates
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_int
op_star
id|r_result
)paren
(brace
r_int
r_int
id|result
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* test a non-standard rate */
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|11000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_CONTINUOUS
suffix:semicolon
multiline_comment|/* let&squot;s try to obtain standard rates */
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|8000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_8000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|11025
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_11025
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|16000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_16000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|22050
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_22050
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|32000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_32000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|44100
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_44100
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|48000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
op_star
id|r_result
op_assign
id|result
suffix:semicolon
)brace
DECL|function|snd_ac97_get_name
r_static
r_void
id|snd_ac97_get_name
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|id
comma
r_char
op_star
id|name
comma
r_int
id|modem
)paren
(brace
r_const
id|ac97_codec_id_t
op_star
id|pid
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;0x%x %c%c%c&quot;
comma
id|id
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|24
)paren
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|16
)paren
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|pid
op_assign
id|snd_ac97_codec_id_vendors
suffix:semicolon
id|pid-&gt;id
suffix:semicolon
id|pid
op_increment
)paren
r_if
c_cond
(paren
id|pid-&gt;id
op_eq
(paren
id|id
op_amp
id|pid-&gt;mask
)paren
)paren
(brace
id|strcpy
c_func
(paren
id|name
comma
id|pid-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|modem
op_logical_and
id|pid-&gt;patch
)paren
id|pid
op_member_access_from_pointer
id|patch
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|modem
op_logical_and
id|pid-&gt;mpatch
)paren
id|pid
op_member_access_from_pointer
id|mpatch
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
r_goto
id|__vendor_ok
suffix:semicolon
)brace
r_return
suffix:semicolon
id|__vendor_ok
suffix:colon
r_for
c_loop
(paren
id|pid
op_assign
id|snd_ac97_codec_ids
suffix:semicolon
id|pid-&gt;id
suffix:semicolon
id|pid
op_increment
)paren
r_if
c_cond
(paren
id|pid-&gt;id
op_eq
(paren
id|id
op_amp
id|pid-&gt;mask
)paren
)paren
(brace
id|strcat
c_func
(paren
id|name
comma
l_string|&quot; &quot;
)paren
suffix:semicolon
id|strcat
c_func
(paren
id|name
comma
id|pid-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pid-&gt;mask
op_ne
l_int|0xffffffff
)paren
id|sprintf
c_func
(paren
id|name
op_plus
id|strlen
c_func
(paren
id|name
)paren
comma
l_string|&quot; rev %d&quot;
comma
id|id
op_amp
op_complement
id|pid-&gt;mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|modem
op_logical_and
id|pid-&gt;patch
)paren
id|pid
op_member_access_from_pointer
id|patch
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|modem
op_logical_and
id|pid-&gt;mpatch
)paren
id|pid
op_member_access_from_pointer
id|mpatch
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|name
op_plus
id|strlen
c_func
(paren
id|name
)paren
comma
l_string|&quot; id %x&quot;
comma
id|id
op_amp
l_int|0xff
)paren
suffix:semicolon
)brace
multiline_comment|/* wait for a while until registers are accessible after RESET&n; * return 0 if ok, negative not ready&n; */
DECL|function|ac97_reset_wait
r_static
r_int
id|ac97_reset_wait
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|timeout
comma
r_int
id|with_modem
)paren
(brace
r_int
r_int
id|end_time
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
id|timeout
suffix:semicolon
r_do
(brace
r_int
r_int
id|ext_mid
suffix:semicolon
multiline_comment|/* use preliminary reads to settle the communication */
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
multiline_comment|/* modem? */
r_if
c_cond
(paren
id|with_modem
)paren
(brace
id|ext_mid
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext_mid
op_ne
l_int|0xffff
op_logical_and
(paren
id|ext_mid
op_amp
l_int|1
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* because the PCM or MASTER volume registers can be modified,&n;&t;&t; * the REC_GAIN register is used for tests&n;&t;&t; */
multiline_comment|/* test if we can write to the record gain volume register */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
comma
l_int|0x8a05
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
)paren
op_eq
l_int|0x8a05
)paren
r_return
l_int|0
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|100
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|time_after_eq
c_func
(paren
id|end_time
comma
id|jiffies
)paren
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_mixer - create an AC97 codec component&n; * @card: the card instance&n; * @_ac97: the template of ac97, including index, callbacks and&n; *         the private data.&n; * @rac97: the pointer to store the new ac97 instance.&n; *&n; * Creates an AC97 codec component.  An ac97_t instance is newly&n; * allocated and initialized from the template (_ac97).  The codec&n; * is then initialized by the standard procedure.&n; *&n; * The template must include the valid callbacks (at least read and&n; * write), the codec number (num) and address (addr), and the private&n; * data (private_data).  The other callbacks, wait and reset, are not&n; * mandatory.&n; * &n; * The clock is set to 48000.  If another clock is needed, reset&n; * ac97-&gt;clock manually afterwards.&n; *&n; * The ac97 instance is registered as a low-level device, so you don&squot;t&n; * have to release it manually.&n; *&n; * The MCs (Modem Codecs only) are only detected but valid. The PCM driver&n; * have to check for MCs using the !ac97_is_audio() function.&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_ac97_mixer
r_int
id|snd_ac97_mixer
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|_ac97
comma
id|ac97_t
op_star
op_star
id|rac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|ac97_t
op_star
id|ac97
suffix:semicolon
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_int
r_int
id|end_time
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
dot
id|dev_free
op_assign
id|snd_ac97_dev_free
comma
)brace
suffix:semicolon
id|snd_assert
c_func
(paren
id|rac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
op_star
id|rac97
op_assign
l_int|NULL
suffix:semicolon
id|snd_assert
c_func
(paren
id|card
op_ne
l_int|NULL
op_logical_and
id|_ac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
id|ac97
op_assign
id|snd_magic_kcalloc
c_func
(paren
id|ac97_t
comma
l_int|0
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
op_star
id|ac97
op_assign
op_star
id|_ac97
suffix:semicolon
id|ac97-&gt;card
op_assign
id|card
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;reset
)paren
(brace
id|ac97
op_member_access_from_pointer
id|reset
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_goto
id|__access_ok
suffix:semicolon
)brace
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* reset to defaults */
r_if
c_cond
(paren
id|ac97-&gt;wait
)paren
id|ac97
op_member_access_from_pointer
id|wait
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_else
(brace
id|udelay
c_func
(paren
l_int|50
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97_reset_wait
c_func
(paren
id|ac97
comma
id|HZ
op_div
l_int|2
comma
l_int|0
)paren
OL
l_int|0
op_logical_and
id|ac97_reset_wait
c_func
(paren
id|ac97
comma
id|HZ
op_div
l_int|2
comma
l_int|1
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d does not respond - RESET&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
)brace
id|__access_ok
suffix:colon
id|ac97-&gt;id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
op_lshift
l_int|16
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
l_int|0x00000000
op_logical_or
id|ac97-&gt;id
op_eq
l_int|0xffffffff
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d access is not valid [0x%x], removing mixer.&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;id
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* test for AC&squot;97 */
multiline_comment|/* test if we can write to the record gain volume register */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
comma
l_int|0x8a06
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
)paren
)paren
op_eq
l_int|0x8a06
)paren
(brace
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_AUDIO
suffix:semicolon
id|ac97-&gt;caps
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
id|ac97-&gt;ext_id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_eq
l_int|0xffff
)paren
multiline_comment|/* invalid combination */
id|ac97-&gt;ext_id
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* test for MC&squot;97 */
id|ac97-&gt;ext_mid
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_eq
l_int|0xffff
)paren
multiline_comment|/* invalid combination */
id|ac97-&gt;ext_mid
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_amp
l_int|1
)paren
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_MODEM
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;reset
)paren
singleline_comment|// FIXME: always skipping?
r_goto
id|__ready_ok
suffix:semicolon
multiline_comment|/* FIXME: add powerdown control */
r_if
c_cond
(paren
id|ac97_is_audio
c_func
(paren
id|ac97
)paren
)paren
(brace
multiline_comment|/* nothing should be in powerdown mode */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* reset to defaults */
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
multiline_comment|/* nothing should be in powerdown mode */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
)paren
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x0f
)paren
r_goto
id|__ready_ok
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|time_after_eq
c_func
(paren
id|end_time
comma
id|jiffies
)paren
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d analog subsections not ready&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
)brace
id|__ready_ok
suffix:colon
r_if
c_cond
(paren
id|ac97-&gt;clock
op_eq
l_int|0
)paren
id|ac97-&gt;clock
op_assign
l_int|48000
suffix:semicolon
multiline_comment|/* standard value */
r_if
c_cond
(paren
id|ac97_is_audio
c_func
(paren
id|ac97
)paren
)paren
id|ac97-&gt;addr
op_assign
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_ADDR_MASK
)paren
op_rshift
id|AC97_EI_ADDR_SHIFT
suffix:semicolon
r_else
id|ac97-&gt;addr
op_assign
(paren
id|ac97-&gt;ext_mid
op_amp
id|AC97_MEI_ADDR_MASK
)paren
op_rshift
id|AC97_MEI_ADDR_SHIFT
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0189
)paren
multiline_comment|/* L/R, MIC, SDAC, LDAC VRA support */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|ac97-&gt;ext_id
op_amp
l_int|0x0189
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_VRA
)paren
(brace
multiline_comment|/* VRA support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_FRONT_DAC_RATE
comma
op_amp
id|ac97-&gt;rates
(braket
id|AC97_RATES_FRONT_DAC
)braket
)paren
suffix:semicolon
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_LR_ADC_RATE
comma
op_amp
id|ac97-&gt;rates
(braket
id|AC97_RATES_ADC
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|ac97-&gt;rates
(braket
id|AC97_RATES_FRONT_DAC
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
id|ac97-&gt;rates
(braket
id|AC97_RATES_ADC
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
(brace
multiline_comment|/* codec specific code (patch) should override these values */
id|ac97-&gt;rates
(braket
id|AC97_RATES_SPDIF
)braket
op_assign
id|SNDRV_PCM_RATE_48000
op_or
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_32000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_VRM
)paren
(brace
multiline_comment|/* MIC VRA support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_MIC_ADC_RATE
comma
op_amp
id|ac97-&gt;rates
(braket
id|AC97_RATES_MIC_ADC
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|ac97-&gt;rates
(braket
id|AC97_RATES_MIC_ADC
)braket
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SDAC
)paren
(brace
multiline_comment|/* SDAC support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_SURR_DAC_RATE
comma
op_amp
id|ac97-&gt;rates
(braket
id|AC97_RATES_SURR_DAC
)braket
)paren
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_SURROUND_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_LDAC
)paren
(brace
multiline_comment|/* LDAC support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_LFE_DAC_RATE
comma
op_amp
id|ac97-&gt;rates
(braket
id|AC97_RATES_LFE_DAC
)braket
)paren
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_CENTER_LFE_DAC
suffix:semicolon
)brace
multiline_comment|/* additional initializations */
r_if
c_cond
(paren
id|ac97-&gt;init
)paren
id|ac97
op_member_access_from_pointer
id|init
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
id|ac97
comma
id|ac97-&gt;id
comma
id|name
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
l_int|NULL
comma
id|ac97-&gt;id
comma
id|name
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|// ac97-&gt;id might be changed in the special setup code
r_if
c_cond
(paren
id|ac97_is_audio
c_func
(paren
id|ac97
)paren
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;mixername
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
(brace
id|strcpy
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|strlen
c_func
(paren
id|card-&gt;mixername
)paren
op_plus
l_int|1
op_plus
id|strlen
c_func
(paren
id|name
)paren
op_plus
l_int|1
op_le
r_sizeof
(paren
id|card-&gt;mixername
)paren
)paren
(brace
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
l_string|&quot;,&quot;
)paren
suffix:semicolon
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_component_add
c_func
(paren
id|card
comma
l_string|&quot;AC97a&quot;
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ac97_is_audio
c_func
(paren
id|ac97
)paren
op_logical_and
id|snd_ac97_mixer_build
c_func
(paren
id|card
comma
id|ac97
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|snd_ac97_proc_init
c_func
(paren
id|card
comma
id|ac97
comma
l_string|&quot;ac97&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_LOWLEVEL
comma
id|ac97
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
op_star
id|rac97
op_assign
id|ac97
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* wait for a while until registers are accessible after RESET&n; * return 0 if ok, negative not ready&n; */
DECL|function|ac97_modem_reset_wait
r_static
r_int
id|ac97_modem_reset_wait
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|timeout
)paren
(brace
r_int
r_int
id|end_time
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
id|timeout
suffix:semicolon
r_do
(brace
r_int
r_int
id|ext_mid
suffix:semicolon
multiline_comment|/* use preliminary reads to settle the communication */
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
id|ext_mid
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext_mid
op_ne
l_int|0xffff
op_logical_and
(paren
id|ext_mid
op_amp
l_int|1
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|100
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|time_after_eq
c_func
(paren
id|end_time
comma
id|jiffies
)paren
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_modem - create an MC97 codec component&n; * @card: the card instance&n; * @_ac97: the template of ac97, including index, callbacks and&n; *         the private data.&n; * @rac97: the pointer to store the new ac97 instance.&n; *&n; * Creates an MC97 codec component.  An ac97_t instance is newly&n; * allocated and initialized from the template (_ac97).  The codec&n; * is then initialized by the standard procedure.&n; *&n; * The template must include the valid callbacks (at least read and&n; * write), the codec number (num) and address (addr), and the private&n; * data (private_data).  The other callbacks, wait and reset, are not&n; * mandatory.&n; * &n; * The clock is set to 48000.  If another clock is needed, reset&n; * ac97-&gt;clock manually afterwards.&n; *&n; * The ac97 instance is registered as a low-level device, so you don&squot;t&n; * have to release it manually.&n; *&n; * The ACs (Audio Codecs only) are only detected but valid. The PCM driver&n; * have to check for ACs using the !ac97_is_modem() function.&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_ac97_modem
r_int
id|snd_ac97_modem
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|_ac97
comma
id|ac97_t
op_star
op_star
id|rac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|ac97_t
op_star
id|ac97
suffix:semicolon
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_int
r_int
id|end_time
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
dot
id|dev_free
op_assign
id|snd_ac97_dev_free
comma
)brace
suffix:semicolon
id|snd_assert
c_func
(paren
id|rac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
op_star
id|rac97
op_assign
l_int|NULL
suffix:semicolon
id|snd_assert
c_func
(paren
id|card
op_ne
l_int|NULL
op_logical_and
id|_ac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
id|ac97
op_assign
id|snd_magic_kcalloc
c_func
(paren
id|ac97_t
comma
l_int|0
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
op_star
id|ac97
op_assign
op_star
id|_ac97
suffix:semicolon
id|ac97-&gt;card
op_assign
id|card
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;reset
)paren
(brace
id|ac97
op_member_access_from_pointer
id|reset
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_goto
id|__access_ok
suffix:semicolon
)brace
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* reset to defaults */
r_if
c_cond
(paren
id|ac97-&gt;wait
)paren
id|ac97
op_member_access_from_pointer
id|wait
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_else
(brace
id|udelay
c_func
(paren
l_int|50
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97_modem_reset_wait
c_func
(paren
id|ac97
comma
id|HZ
op_div
l_int|2
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;MC&squot;97 %d:%d does not respond - MODEM RESET&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
)brace
id|__access_ok
suffix:colon
id|ac97-&gt;id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
op_lshift
l_int|16
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
l_int|0x00000000
op_logical_or
id|ac97-&gt;id
op_eq
l_int|0xffffffff
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;MC&squot;97 %d:%d access is not valid [0x%x], removing modem controls.&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;id
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* test for MC&squot;97 */
id|ac97-&gt;ext_mid
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_eq
l_int|0xffff
)paren
multiline_comment|/* invalid combination */
id|ac97-&gt;ext_mid
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_amp
l_int|1
)paren
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_MODEM
suffix:semicolon
multiline_comment|/* non-destructive test for AC&squot;97 */
id|tmp
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_eq
l_int|0
op_logical_or
id|tmp
op_eq
l_int|0xffff
)paren
(brace
id|tmp
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_eq
l_int|0
op_logical_or
id|tmp
op_eq
l_int|0xffff
)paren
(brace
id|tmp
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_eq
l_int|0
op_logical_or
id|tmp
op_eq
l_int|0xffff
)paren
id|tmp
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|tmp
op_ne
l_int|0
op_logical_and
id|tmp
op_ne
l_int|0xffff
)paren
op_logical_or
op_logical_neg
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_MODEM
)paren
)paren
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_AUDIO
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;reset
)paren
singleline_comment|// FIXME: always skipping?
r_goto
id|__ready_ok
suffix:semicolon
multiline_comment|/* FIXME: add powerdown control */
r_if
c_cond
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_MODEM
)paren
(brace
multiline_comment|/* nothing should be in powerdown mode */
multiline_comment|/* note: it&squot;s important to set the rate at first */
id|tmp
op_assign
id|AC97_MEA_GPIO
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_amp
id|AC97_MEI_LINE1
)paren
(brace
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_LINE1_RATE
comma
l_int|12000
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AC97_MEA_ADC1
op_or
id|AC97_MEA_DAC1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_amp
id|AC97_MEI_LINE2
)paren
(brace
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_LINE2_RATE
comma
l_int|12000
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AC97_MEA_ADC2
op_or
id|AC97_MEA_DAC2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_mid
op_amp
id|AC97_MEI_HANDSET
)paren
(brace
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_HANDSET_RATE
comma
l_int|12000
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AC97_MEA_HADC
op_or
id|AC97_MEA_HDAC
suffix:semicolon
)brace
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MSTATUS
comma
l_int|0xff00
op_amp
op_complement
(paren
id|tmp
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
multiline_comment|/* nothing should be in powerdown mode */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MSTATUS
comma
l_int|0xff00
op_amp
op_complement
(paren
id|tmp
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MSTATUS
)paren
op_amp
id|tmp
)paren
op_eq
id|tmp
)paren
r_goto
id|__ready_ok
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|time_after_eq
c_func
(paren
id|end_time
comma
id|jiffies
)paren
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;MC&squot;97 %d:%d converters and GPIO not ready (0x%x)&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MSTATUS
)paren
)paren
suffix:semicolon
)brace
id|__ready_ok
suffix:colon
multiline_comment|/* additional initializations */
multiline_comment|/* FIXME: ADD MODEM INITALIZATION */
r_if
c_cond
(paren
id|ac97_is_modem
c_func
(paren
id|ac97
)paren
)paren
id|ac97-&gt;addr
op_assign
(paren
id|ac97-&gt;ext_mid
op_amp
id|AC97_MEI_ADDR_MASK
)paren
op_rshift
id|AC97_MEI_ADDR_SHIFT
suffix:semicolon
r_else
id|ac97-&gt;addr
op_assign
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_ADDR_MASK
)paren
op_rshift
id|AC97_EI_ADDR_SHIFT
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;init
)paren
id|ac97
op_member_access_from_pointer
id|init
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
id|ac97
comma
id|ac97-&gt;id
comma
id|name
comma
l_int|1
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
l_int|NULL
comma
id|ac97-&gt;id
comma
id|name
comma
l_int|1
)paren
suffix:semicolon
singleline_comment|// ac97-&gt;id might be changed in the special setup code
r_if
c_cond
(paren
id|ac97_is_modem
c_func
(paren
id|ac97
)paren
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;mixername
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
(brace
id|strcpy
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|strlen
c_func
(paren
id|card-&gt;mixername
)paren
op_plus
l_int|1
op_plus
id|strlen
c_func
(paren
id|name
)paren
op_plus
l_int|1
op_le
r_sizeof
(paren
id|card-&gt;mixername
)paren
)paren
(brace
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
l_string|&quot;,&quot;
)paren
suffix:semicolon
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_component_add
c_func
(paren
id|card
comma
l_string|&quot;AC97m&quot;
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ac97_is_modem
c_func
(paren
id|ac97
)paren
op_logical_and
id|snd_ac97_modem_build
c_func
(paren
id|card
comma
id|ac97
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|snd_ac97_proc_init
c_func
(paren
id|card
comma
id|ac97
comma
l_string|&quot;mc97&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_LOWLEVEL
comma
id|ac97
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
op_star
id|rac97
op_assign
id|ac97
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * proc interface&n; */
DECL|function|snd_ac97_proc_read_main
r_static
r_void
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
id|snd_info_buffer_t
op_star
id|buffer
comma
r_int
id|subidx
)paren
(brace
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_int
r_int
id|id
suffix:semicolon
r_int
r_int
id|val
comma
id|tmp
comma
id|ext
comma
id|mext
suffix:semicolon
r_static
r_const
r_char
op_star
id|spdif_slots
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot; SPDIF=3/4&quot;
comma
l_string|&quot; SPDIF=7/8&quot;
comma
l_string|&quot; SPDIF=6/9&quot;
comma
l_string|&quot; SPDIF=res&quot;
)brace
suffix:semicolon
r_static
r_const
r_char
op_star
id|spdif_rates
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot; Rate=44.1kHz&quot;
comma
l_string|&quot; Rate=res&quot;
comma
l_string|&quot; Rate=48kHz&quot;
comma
l_string|&quot; Rate=32kHz&quot;
)brace
suffix:semicolon
r_static
r_const
r_char
op_star
id|spdif_rates_cs4205
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot; Rate=48kHz&quot;
comma
l_string|&quot; Rate=44.1kHz&quot;
comma
l_string|&quot; Rate=res&quot;
comma
l_string|&quot; Rate=res&quot;
)brace
suffix:semicolon
id|id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
op_lshift
l_int|16
suffix:semicolon
id|id
op_or_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
l_int|NULL
comma
id|id
comma
id|name
comma
l_int|0
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%d-%d/%d: %s&bslash;n&bslash;n&quot;
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;num
comma
id|subidx
comma
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_AUDIO
)paren
op_eq
l_int|0
)paren
r_goto
id|__modem
suffix:semicolon
singleline_comment|// val = snd_ac97_read(ac97, AC97_RESET);
id|val
op_assign
id|ac97-&gt;caps
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Capabilities     :%s%s%s%s%s%s&bslash;n&quot;
comma
id|val
op_amp
id|AC97_BC_DEDICATED_MIC
ques
c_cond
l_string|&quot; -dedicated MIC PCM IN channel-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_BC_RESERVED1
ques
c_cond
l_string|&quot; -reserved1-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_BC_BASS_TREBLE
ques
c_cond
l_string|&quot; -bass &amp; treble-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_BC_SIM_STEREO
ques
c_cond
l_string|&quot; -simulated stereo-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_BC_HEADPHONE
ques
c_cond
l_string|&quot; -headphone out-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_BC_LOUDNESS
ques
c_cond
l_string|&quot; -loudness-&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|tmp
op_assign
id|ac97-&gt;caps
op_amp
id|AC97_BC_DAC_MASK
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;DAC resolution   : %s%s%s%s&bslash;n&quot;
comma
id|tmp
op_eq
id|AC97_BC_16BIT_DAC
ques
c_cond
l_string|&quot;16-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_18BIT_DAC
ques
c_cond
l_string|&quot;18-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_20BIT_DAC
ques
c_cond
l_string|&quot;20-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_DAC_MASK
ques
c_cond
l_string|&quot;???&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|tmp
op_assign
id|ac97-&gt;caps
op_amp
id|AC97_BC_ADC_MASK
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;ADC resolution   : %s%s%s%s&bslash;n&quot;
comma
id|tmp
op_eq
id|AC97_BC_16BIT_ADC
ques
c_cond
l_string|&quot;16-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_18BIT_ADC
ques
c_cond
l_string|&quot;18-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_20BIT_ADC
ques
c_cond
l_string|&quot;20-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
id|AC97_BC_ADC_MASK
ques
c_cond
l_string|&quot;???&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;3D enhancement   : %s&bslash;n&quot;
comma
id|snd_ac97_stereo_enhancements
(braket
(paren
id|val
op_rshift
l_int|10
)paren
op_amp
l_int|0x1f
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nCurrent setup&bslash;n&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_MIC
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Mic gain         : %s [%s]&bslash;n&quot;
comma
id|val
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot;+20dB&quot;
suffix:colon
l_string|&quot;+0dB&quot;
comma
id|ac97-&gt;regs
(braket
id|AC97_MIC
)braket
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot;+20dB&quot;
suffix:colon
l_string|&quot;+0dB&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;POP path         : %s 3D&bslash;n&quot;
l_string|&quot;Sim. stereo      : %s&bslash;n&quot;
l_string|&quot;3D enhancement   : %s&bslash;n&quot;
l_string|&quot;Loudness         : %s&bslash;n&quot;
l_string|&quot;Mono output      : %s&bslash;n&quot;
l_string|&quot;Mic select       : %s&bslash;n&quot;
l_string|&quot;ADC/DAC loopback : %s&bslash;n&quot;
comma
id|val
op_amp
l_int|0x8000
ques
c_cond
l_string|&quot;post&quot;
suffix:colon
l_string|&quot;pre&quot;
comma
id|val
op_amp
l_int|0x4000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x2000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x1000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x0200
ques
c_cond
l_string|&quot;Mic&quot;
suffix:colon
l_string|&quot;MIX&quot;
comma
id|val
op_amp
l_int|0x0100
ques
c_cond
l_string|&quot;Mic2&quot;
suffix:colon
l_string|&quot;Mic1&quot;
comma
id|val
op_amp
l_int|0x0080
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
)paren
suffix:semicolon
id|ext
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_eq
l_int|0
)paren
r_goto
id|__modem
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Extended ID      : codec=%i rev=%i%s%s%s%s DSA=%i%s%s%s%s&bslash;n&quot;
comma
(paren
id|ext
op_amp
id|AC97_EI_ADDR_MASK
)paren
op_rshift
id|AC97_EI_ADDR_SHIFT
comma
(paren
id|ext
op_amp
id|AC97_EI_REV_MASK
)paren
op_rshift
id|AC97_EI_REV_SHIFT
comma
id|ext
op_amp
id|AC97_EI_AMAP
ques
c_cond
l_string|&quot; AMAP&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_LDAC
ques
c_cond
l_string|&quot; LDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_SDAC
ques
c_cond
l_string|&quot; SDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_CDAC
ques
c_cond
l_string|&quot; CDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|ext
op_amp
id|AC97_EI_DACS_SLOT_MASK
)paren
op_rshift
id|AC97_EI_DACS_SLOT_SHIFT
comma
id|ext
op_amp
id|AC97_EI_VRM
ques
c_cond
l_string|&quot; VRM&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_SPDIF
ques
c_cond
l_string|&quot; SPDIF&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_DRA
ques
c_cond
l_string|&quot; DRA&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_VRA
ques
c_cond
l_string|&quot; VRA&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Extended status  :%s%s%s%s%s%s%s%s%s%s%s%s%s%s&bslash;n&quot;
comma
id|val
op_amp
id|AC97_EA_PRL
ques
c_cond
l_string|&quot; PRL&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_PRK
ques
c_cond
l_string|&quot; PRK&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_PRJ
ques
c_cond
l_string|&quot; PRJ&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_PRI
ques
c_cond
l_string|&quot; PRI&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_SPCV
ques
c_cond
l_string|&quot; SPCV&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_MDAC
ques
c_cond
l_string|&quot; MADC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_LDAC
ques
c_cond
l_string|&quot; LDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_SDAC
ques
c_cond
l_string|&quot; SDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_CDAC
ques
c_cond
l_string|&quot; CDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
id|AC97_EI_SPDIF
ques
c_cond
id|spdif_slots
(braket
(paren
id|val
op_amp
id|AC97_EA_SPSA_SLOT_MASK
)paren
op_rshift
id|AC97_EA_SPSA_SLOT_SHIFT
)braket
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_VRM
ques
c_cond
l_string|&quot; VRM&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_SPDIF
ques
c_cond
l_string|&quot; SPDIF&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_DRA
ques
c_cond
l_string|&quot; DRA&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_EA_VRA
ques
c_cond
l_string|&quot; VRA&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_amp
id|AC97_EI_VRA
)paren
(brace
multiline_comment|/* VRA */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_FRONT_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM front DAC    : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_amp
id|AC97_EI_SDAC
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_SURR_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM Surr DAC     : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ext
op_amp
id|AC97_EI_LDAC
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_LFE_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM LFE DAC      : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_LR_ADC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM ADC          : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ext
op_amp
id|AC97_EI_VRM
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_MIC_ADC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM MIC ADC      : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ext
op_amp
id|AC97_EI_SPDIF
)paren
op_logical_or
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
)paren
(brace
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_CSR_SPDIF
)paren
suffix:semicolon
r_else
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;SPDIF Control    :%s%s%s%s Category=0x%x Generation=%i%s%s%s&bslash;n&quot;
comma
id|val
op_amp
id|AC97_SC_PRO
ques
c_cond
l_string|&quot; PRO&quot;
suffix:colon
l_string|&quot; Consumer&quot;
comma
id|val
op_amp
id|AC97_SC_NAUDIO
ques
c_cond
l_string|&quot; Non-audio&quot;
suffix:colon
l_string|&quot; PCM&quot;
comma
id|val
op_amp
id|AC97_SC_COPY
ques
c_cond
l_string|&quot; Copyright&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_SC_PRE
ques
c_cond
l_string|&quot; Preemph50/15&quot;
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|val
op_amp
id|AC97_SC_CC_MASK
)paren
op_rshift
id|AC97_SC_CC_SHIFT
comma
(paren
id|val
op_amp
id|AC97_SC_L
)paren
op_rshift
l_int|11
comma
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
ques
c_cond
id|spdif_rates_cs4205
(braket
(paren
id|val
op_amp
id|AC97_SC_SPSR_MASK
)paren
op_rshift
id|AC97_SC_SPSR_SHIFT
)braket
suffix:colon
id|spdif_rates
(braket
(paren
id|val
op_amp
id|AC97_SC_SPSR_MASK
)paren
op_rshift
id|AC97_SC_SPSR_SHIFT
)braket
comma
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
ques
c_cond
(paren
id|val
op_amp
id|AC97_SC_DRS
ques
c_cond
l_string|&quot; Validity&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:colon
(paren
id|val
op_amp
id|AC97_SC_DRS
ques
c_cond
l_string|&quot; DRS&quot;
suffix:colon
l_string|&quot;&quot;
)paren
comma
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
ques
c_cond
(paren
id|val
op_amp
id|AC97_SC_V
ques
c_cond
l_string|&quot; Enabled&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:colon
(paren
id|val
op_amp
id|AC97_SC_V
ques
c_cond
l_string|&quot; Validity&quot;
suffix:colon
l_string|&quot;&quot;
)paren
)paren
suffix:semicolon
)brace
id|__modem
suffix:colon
id|mext
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mext
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Extended modem ID: codec=%i%s%s%s%s%s&bslash;n&quot;
comma
(paren
id|mext
op_amp
id|AC97_MEI_ADDR_MASK
)paren
op_rshift
id|AC97_MEI_ADDR_SHIFT
comma
id|mext
op_amp
id|AC97_MEI_CID2
ques
c_cond
l_string|&quot; CID2&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|mext
op_amp
id|AC97_MEI_CID1
ques
c_cond
l_string|&quot; CID1&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|mext
op_amp
id|AC97_MEI_HANDSET
ques
c_cond
l_string|&quot; HSET&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|mext
op_amp
id|AC97_MEI_LINE2
ques
c_cond
l_string|&quot; LIN2&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|mext
op_amp
id|AC97_MEI_LINE1
ques
c_cond
l_string|&quot; LIN1&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_MSTATUS
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Modem status     :%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s&bslash;n&quot;
comma
id|val
op_amp
id|AC97_MEA_GPIO
ques
c_cond
l_string|&quot; GPIO&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_MREF
ques
c_cond
l_string|&quot; MREF&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_ADC1
ques
c_cond
l_string|&quot; ADC1&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_DAC1
ques
c_cond
l_string|&quot; DAC1&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_ADC2
ques
c_cond
l_string|&quot; ADC2&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_DAC2
ques
c_cond
l_string|&quot; DAC2&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_HADC
ques
c_cond
l_string|&quot; HADC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_HDAC
ques
c_cond
l_string|&quot; HDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRA
ques
c_cond
l_string|&quot; PRA(GPIO)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRB
ques
c_cond
l_string|&quot; PRB(res)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRC
ques
c_cond
l_string|&quot; PRC(ADC1)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRD
ques
c_cond
l_string|&quot; PRD(DAC1)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRE
ques
c_cond
l_string|&quot; PRE(ADC2)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRF
ques
c_cond
l_string|&quot; PRF(DAC2)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRG
ques
c_cond
l_string|&quot; PRG(HADC)&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
id|AC97_MEA_PRH
ques
c_cond
l_string|&quot; PRH(HDAC)&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mext
op_amp
id|AC97_MEI_LINE1
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_LINE1_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Line1 rate       : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mext
op_amp
id|AC97_MEI_LINE2
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_LINE2_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Line2 rate       : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mext
op_amp
id|AC97_MEI_HANDSET
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_HANDSET_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Headset rate     : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_read
r_static
r_void
id|snd_ac97_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|entry-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;id
op_amp
l_int|0xffffff40
)paren
op_eq
id|AC97_ID_AD1881
)paren
(brace
singleline_comment|// Analog Devices AD1881/85/86
r_int
id|idx
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
(brace
multiline_comment|/* select single codec */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
id|idx
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nAD18XX configuration&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Unchained        : 0x%04x,0x%04x,0x%04x&bslash;n&quot;
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|0
)braket
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|1
)braket
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Chained          : 0x%04x,0x%04x,0x%04x&bslash;n&quot;
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|0
)braket
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|1
)braket
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_regs_read_main
r_static
r_void
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
id|snd_info_buffer_t
op_star
id|buffer
comma
r_int
id|subidx
)paren
(brace
r_int
id|reg
comma
id|val
suffix:semicolon
r_for
c_loop
(paren
id|reg
op_assign
l_int|0
suffix:semicolon
id|reg
OL
l_int|0x80
suffix:semicolon
id|reg
op_add_assign
l_int|2
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%i:%02x = %04x&bslash;n&quot;
comma
id|subidx
comma
id|reg
comma
id|val
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_regs_read
r_static
r_void
id|snd_ac97_proc_regs_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|entry-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;id
op_amp
l_int|0xffffff40
)paren
op_eq
id|AC97_ID_AD1881
)paren
(brace
singleline_comment|// Analog Devices AD1881/85/86
r_int
id|idx
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
(brace
multiline_comment|/* select single codec */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
id|idx
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_init
r_static
r_void
id|snd_ac97_proc_init
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
comma
r_const
r_char
op_star
id|prefix
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_char
id|name
(braket
l_int|32
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;num
)paren
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%s#%d-%d&quot;
comma
id|prefix
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;num
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%s#%d&quot;
comma
id|prefix
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_card_proc_new
c_func
(paren
id|card
comma
id|name
comma
op_amp
id|entry
)paren
)paren
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|ac97
comma
id|snd_ac97_proc_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;num
)paren
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%s#%d-%dregs&quot;
comma
id|prefix
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;num
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%s#%dregs&quot;
comma
id|prefix
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_card_proc_new
c_func
(paren
id|card
comma
id|name
comma
op_amp
id|entry
)paren
)paren
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|ac97
comma
id|snd_ac97_proc_regs_read
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM support&n; */
DECL|function|set_spdif_rate
r_static
r_int
id|set_spdif_rate
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|rate
)paren
(brace
r_int
r_int
id|old
comma
id|bits
comma
id|reg
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ac97-&gt;ext_id
op_amp
id|AC97_EI_SPDIF
)paren
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_CS_SPDIF
)paren
(brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|48000
suffix:colon
id|bits
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|bits
op_assign
l_int|1
op_lshift
id|AC97_SC_SPSR_SHIFT
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* invalid - disable output */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
l_int|0
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|reg
op_assign
id|AC97_CSR_SPDIF
suffix:semicolon
)brace
r_else
(brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|44100
suffix:colon
id|bits
op_assign
id|AC97_SC_SPSR_44K
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|bits
op_assign
id|AC97_SC_SPSR_48K
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32000
suffix:colon
id|bits
op_assign
id|AC97_SC_SPSR_32K
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* invalid - disable output */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
l_int|0
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|reg
op_assign
id|AC97_SPDIF
suffix:semicolon
)brace
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
op_amp
op_complement
id|AC97_SC_SPSR_MASK
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old
op_ne
id|bits
)paren
(brace
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
id|AC97_SC_SPSR_MASK
comma
id|bits
)paren
suffix:semicolon
)brace
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|AC97_EA_SPDIF
comma
id|AC97_EA_SPDIF
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_set_rate - change the rate of the given input/output.&n; * @ac97: the ac97 instance&n; * @reg: the register to change&n; * @rate: the sample rate to set&n; *&n; * Changes the rate of the given input/output on the codec.&n; * If the codec doesn&squot;t support VAR, the rate must be 48000 (except&n; * for SPDIF).&n; *&n; * The valid registers are AC97_PMC_MIC_ADC_RATE,&n; * AC97_PCM_FRONT_DAC_RATE, AC97_PCM_LR_ADC_RATE and AC97_SPDIF.&n; * The SPDIF register is a pseudo-register to change the rate of SPDIF&n; * (only if supported).&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_ac97_set_rate
r_int
id|snd_ac97_set_rate
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_int
id|rate
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_PCM_MIC_ADC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
id|AC97_EA_VRM
)paren
op_eq
l_int|0
)paren
multiline_comment|/* MIC VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_PCM_FRONT_DAC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0200
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
id|AC97_EA_VRA
)paren
op_eq
l_int|0
)paren
multiline_comment|/* VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_PCM_LR_ADC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0100
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
id|AC97_EA_VRA
)paren
op_eq
l_int|0
)paren
multiline_comment|/* VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_SPDIF
suffix:colon
r_return
id|set_spdif_rate
c_func
(paren
id|ac97
comma
id|rate
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|tmp
op_assign
(paren
(paren
r_int
r_int
)paren
id|rate
op_star
id|ac97-&gt;clock
)paren
op_div
l_int|48000
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OG
l_int|65535
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|reg
comma
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_PM
multiline_comment|/**&n; * snd_ac97_suspend - General suspend function for AC97 codec&n; * @ac97: the ac97 instance&n; *&n; * Suspends the codec, power down the chip.&n; */
DECL|function|snd_ac97_suspend
r_void
id|snd_ac97_suspend
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|power
op_assign
(paren
id|ac97-&gt;regs
(braket
id|AC97_POWERDOWN
)braket
op_xor
l_int|0x8000
)paren
op_amp
op_complement
l_int|0x8000
suffix:semicolon
multiline_comment|/* invert EAPD */
id|power
op_or_assign
l_int|0x4000
suffix:semicolon
multiline_comment|/* Headphone amplifier powerdown */
id|power
op_or_assign
l_int|0x0300
suffix:semicolon
multiline_comment|/* ADC &amp; DAC powerdown */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|power
op_or_assign
l_int|0x0400
suffix:semicolon
multiline_comment|/* Analog Mixer powerdown (Vref on) */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|power
op_or_assign
l_int|0x3800
suffix:semicolon
multiline_comment|/* AC-link powerdown, internal Clk disable */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_resume - General resume function for AC97 codec&n; * @ac97: the ac97 instance&n; *&n; * Do the standard resume procedure, power up and restoring the&n; * old register values.&n; */
DECL|function|snd_ac97_resume
r_void
id|snd_ac97_resume
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;reset
)paren
(brace
id|ac97
op_member_access_from_pointer
id|reset
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_goto
id|__reset_ready
suffix:semicolon
)brace
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|ac97-&gt;regs
(braket
id|AC97_POWERDOWN
)braket
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
l_int|0x8000
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_MASTER
)paren
op_eq
l_int|0x8000
)paren
r_break
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|__reset_ready
suffix:colon
r_if
c_cond
(paren
id|ac97-&gt;init
)paren
id|ac97
op_member_access_from_pointer
id|init
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* restore ac97 status */
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
l_int|0x7c
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
id|AC97_POWERDOWN
op_logical_or
id|i
op_eq
id|AC97_EXTENDED_ID
)paren
r_continue
suffix:semicolon
multiline_comment|/* restore only accessible registers&n;&t;&t; * some chip (e.g. nm256) may hang up when unsupported registers&n;&t;&t; * are accessed..!&n;&t;&t; */
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|i
comma
id|ac97-&gt;reg_accessed
)paren
)paren
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|i
comma
id|ac97-&gt;regs
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/*&n; */
DECL|function|remove_ctl
r_static
r_int
id|remove_ctl
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_const
r_char
op_star
id|name
)paren
(brace
id|snd_ctl_elem_id_t
id|id
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|id
comma
l_int|0
comma
r_sizeof
(paren
id|id
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|id.name
comma
id|name
)paren
suffix:semicolon
id|id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
r_return
id|snd_ctl_remove_id
c_func
(paren
id|ac97-&gt;card
comma
op_amp
id|id
)paren
suffix:semicolon
)brace
DECL|function|rename_ctl
r_static
r_int
id|rename_ctl
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_const
r_char
op_star
id|src
comma
r_const
r_char
op_star
id|dst
)paren
(brace
id|snd_ctl_elem_id_t
id|sid
comma
id|did
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|sid
comma
l_int|0
comma
r_sizeof
(paren
id|sid
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|sid.name
comma
id|src
)paren
suffix:semicolon
id|sid.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|did
comma
l_int|0
comma
r_sizeof
(paren
id|did
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|did.name
comma
id|dst
)paren
suffix:semicolon
id|did.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
r_return
id|snd_ctl_rename_id
c_func
(paren
id|ac97-&gt;card
comma
op_amp
id|sid
comma
op_amp
id|did
)paren
suffix:semicolon
)brace
DECL|function|swap_headphone
r_static
r_int
id|swap_headphone
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|remove_master
)paren
(brace
multiline_comment|/* FIXME: error checks.. */
r_if
c_cond
(paren
id|remove_master
)paren
(brace
id|remove_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Master Playback Switch&quot;
)paren
suffix:semicolon
id|remove_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Master Playback Volume&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|rename_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Master Playback Switch&quot;
comma
l_string|&quot;Line-Out Playback Switch&quot;
)paren
suffix:semicolon
id|rename_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Master Playback Volume&quot;
comma
l_string|&quot;Line-Out Playback Volume&quot;
)paren
suffix:semicolon
)brace
id|rename_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Headphone Playback Switch&quot;
comma
l_string|&quot;Master Playback Switch&quot;
)paren
suffix:semicolon
id|rename_ctl
c_func
(paren
id|ac97
comma
l_string|&quot;Headphone Playback Volume&quot;
comma
l_string|&quot;Master Playback Volume&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_ac97_tune_hardware - tune up the hardware&n; * @ac97: the ac97 instance&n; * @pci: pci device&n; * @quirk: quirk list&n; *&n; * Do some workaround for each pci device, such as renaming of the&n; * headphone (true line-out) control as &quot;Master&quot;.&n; * The quirk-list must be terminated with a zero-filled entry.&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_ac97_tune_hardware
r_int
id|snd_ac97_tune_hardware
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_struct
id|pci_dev
op_star
id|pci
comma
r_struct
id|ac97_quirk
op_star
id|quirk
)paren
(brace
r_int
r_int
id|vendor
comma
id|device
suffix:semicolon
id|snd_assert
c_func
(paren
id|quirk
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pci
comma
id|PCI_SUBSYSTEM_VENDOR_ID
comma
op_amp
id|vendor
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pci
comma
id|PCI_SUBSYSTEM_ID
comma
op_amp
id|device
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|quirk-&gt;vendor
suffix:semicolon
id|quirk
op_increment
)paren
(brace
r_if
c_cond
(paren
id|quirk-&gt;vendor
op_eq
id|vendor
op_logical_and
id|quirk-&gt;device
op_eq
id|device
)paren
(brace
id|snd_printdd
c_func
(paren
l_string|&quot;ac97 quirk for %s (%04x:%04x)&bslash;n&quot;
comma
id|quirk-&gt;name
comma
id|vendor
comma
id|device
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|quirk-&gt;type
)paren
(brace
r_case
id|AC97_TUNE_HP_ONLY
suffix:colon
r_return
id|swap_headphone
c_func
(paren
id|ac97
comma
l_int|1
)paren
suffix:semicolon
r_case
id|AC97_TUNE_SWAP_HP
suffix:colon
r_return
id|swap_headphone
c_func
(paren
id|ac97
comma
l_int|0
)paren
suffix:semicolon
)brace
id|snd_printk
c_func
(paren
id|KERN_ERR
l_string|&quot;invalid quirk type %d for %s&bslash;n&quot;
comma
id|quirk-&gt;type
comma
id|quirk-&gt;name
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  Exported symbols&n; */
DECL|variable|snd_ac97_write
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_write
)paren
suffix:semicolon
DECL|variable|snd_ac97_read
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_read
)paren
suffix:semicolon
DECL|variable|snd_ac97_write_cache
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_write_cache
)paren
suffix:semicolon
DECL|variable|snd_ac97_update
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_update
)paren
suffix:semicolon
DECL|variable|snd_ac97_update_bits
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_update_bits
)paren
suffix:semicolon
DECL|variable|snd_ac97_mixer
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_mixer
)paren
suffix:semicolon
DECL|variable|snd_ac97_modem
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_modem
)paren
suffix:semicolon
DECL|variable|snd_ac97_set_rate
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_set_rate
)paren
suffix:semicolon
DECL|variable|snd_ac97_tune_hardware
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_tune_hardware
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PM
DECL|variable|snd_ac97_resume
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_resume
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; *  INIT part&n; */
DECL|function|alsa_ac97_init
r_static
r_int
id|__init
id|alsa_ac97_init
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_ac97_exit
r_static
r_void
id|__exit
id|alsa_ac97_exit
c_func
(paren
r_void
)paren
(brace
)brace
id|module_init
c_func
(paren
id|alsa_ac97_init
)paren
id|module_exit
c_func
(paren
id|alsa_ac97_exit
)paren
eof
