multiline_comment|/*&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *  Universal interface for Audio Codec &squot;97&n; *&n; *  For more details look to AC &squot;97 component specification revision 2.2&n; *  by Intel Corporation (http://developer.intel.com).&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/ac97_codec.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
macro_line|#include &lt;sound/initval.h&gt;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Universal interface for Audio Codec &squot;97&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|enable_loopback
r_static
r_int
id|enable_loopback
op_assign
l_int|0
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|enable_loopback
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|enable_loopback
comma
l_string|&quot;Enable AC97 ADC/DAC Loopback Control&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|enable_loopback
comma
id|SNDRV_BOOLEAN_FALSE_DESC
)paren
suffix:semicolon
DECL|macro|chip_t
mdefine_line|#define chip_t ac97_t
multiline_comment|/*&n;&n; */
r_static
r_void
id|snd_ac97_proc_init
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_void
id|snd_ac97_proc_done
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_wolfson
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_tritech_tr28028
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_sigmatel_stac9708
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_sigmatel_stac9721
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_sigmatel_stac9744
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_sigmatel_stac9756
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_cirrus_cs4299
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_ad1819
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_static
r_int
id|patch_ad1881
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|id
r_int
r_int
id|id
suffix:semicolon
DECL|member|mask
r_int
r_int
id|mask
suffix:semicolon
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|patch
r_int
(paren
op_star
id|patch
)paren
(paren
id|ac97_t
op_star
id|ac97
)paren
suffix:semicolon
DECL|typedef|ac97_codec_id_t
)brace
id|ac97_codec_id_t
suffix:semicolon
DECL|variable|snd_ac97_codec_id_vendors
r_static
r_const
id|ac97_codec_id_t
id|snd_ac97_codec_id_vendors
(braket
)braket
op_assign
(brace
(brace
l_int|0x414b4d00
comma
l_int|0xffffff00
comma
l_string|&quot;Asahi Kasei&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445300
comma
l_int|0xffffff00
comma
l_string|&quot;Analog Devices&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4300
comma
l_int|0xffffff00
comma
l_string|&quot;Realtek&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4700
comma
l_int|0xffffff00
comma
l_string|&quot;Avance Logic&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525900
comma
l_int|0xffffff00
comma
l_string|&quot;Cirrus Logic&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x48525300
comma
l_int|0xffffff00
comma
l_string|&quot;Intersil&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434500
comma
l_int|0xffffff00
comma
l_string|&quot;ICEnsemble&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x4e534300
comma
l_int|0xffffff00
comma
l_string|&quot;National Semiconductor&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x53494c00
comma
l_int|0xffffff00
comma
l_string|&quot;Silicon Laboratory&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524100
comma
l_int|0xffffff00
comma
l_string|&quot;TriTech&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54584e00
comma
l_int|0xffffff00
comma
l_string|&quot;Texas Instruments&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x57454300
comma
l_int|0xffffff00
comma
l_string|&quot;Winbond&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c00
comma
l_int|0xffffff00
comma
l_string|&quot;Wolfson&quot;
comma
id|patch_wolfson
)brace
comma
(brace
l_int|0x594d4800
comma
l_int|0xffffff00
comma
l_string|&quot;Yamaha&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847600
comma
l_int|0xffffff00
comma
l_string|&quot;SigmaTel&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x45838300
comma
l_int|0xffffff00
comma
l_string|&quot;ESS Technology&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|snd_ac97_codec_ids
r_static
r_const
id|ac97_codec_id_t
id|snd_ac97_codec_ids
(braket
)braket
op_assign
(brace
(brace
l_int|0x414b4d00
comma
l_int|0xffffffff
comma
l_string|&quot;AK4540&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d01
comma
l_int|0xffffffff
comma
l_string|&quot;AK4542&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d02
comma
l_int|0xffffffff
comma
l_string|&quot;AK4543&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d06
comma
l_int|0xffffffff
comma
l_string|&quot;AK4544A&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414b4d07
comma
l_int|0xffffffff
comma
l_string|&quot;AK4545&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x41445303
comma
l_int|0xffffffff
comma
l_string|&quot;AD1819&quot;
comma
id|patch_ad1819
)brace
comma
(brace
l_int|0x41445340
comma
l_int|0xffffffff
comma
l_string|&quot;AD1881&quot;
comma
id|patch_ad1881
)brace
comma
(brace
l_int|0x41445348
comma
l_int|0xffffffff
comma
l_string|&quot;AD1881A&quot;
comma
id|patch_ad1881
)brace
comma
(brace
l_int|0x41445360
comma
l_int|0xffffffff
comma
l_string|&quot;AD1885&quot;
comma
id|patch_ad1881
)brace
comma
(brace
l_int|0x41445361
comma
l_int|0xffffffff
comma
l_string|&quot;AD1886&quot;
comma
id|patch_ad1881
)brace
comma
(brace
l_int|0x41445362
comma
l_int|0xffffffff
comma
l_string|&quot;AD1887&quot;
comma
id|patch_ad1881
)brace
comma
(brace
l_int|0x414c4300
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5306&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4310
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5382&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4320
comma
l_int|0xfffffff0
comma
l_string|&quot;RL5383&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x414c4710
comma
l_int|0xffffffff
comma
l_string|&quot;ALC200/200P&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525900
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4297&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525910
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4297A&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x42525920
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4294/4298&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x42525928
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4294&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525930
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4299&quot;
comma
id|patch_cirrus_cs4299
)brace
comma
(brace
l_int|0x43525948
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4201&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525958
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4205&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x43525960
comma
l_int|0xfffffff8
comma
l_string|&quot;CS4291&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x48525300
comma
l_int|0xffffff00
comma
l_string|&quot;HMP9701&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434501
comma
l_int|0xffffffff
comma
l_string|&quot;ICE1230&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x49434511
comma
l_int|0xffffffff
comma
l_string|&quot;ICE1232&quot;
comma
l_int|NULL
)brace
comma
singleline_comment|// only guess --jk
(brace
l_int|0x4e534300
comma
l_int|0xffffffff
comma
l_string|&quot;LM4540/43/45/46/48&quot;
comma
l_int|NULL
)brace
comma
singleline_comment|// only guess --jk
(brace
l_int|0x4e534331
comma
l_int|0xffffffff
comma
l_string|&quot;LM4549&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x53494c22
comma
l_int|0xffffffff
comma
l_string|&quot;Si3036&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x53494c23
comma
l_int|0xffffffff
comma
l_string|&quot;Si3038&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x54524108
comma
l_int|0xffffffff
comma
l_string|&quot;TR28028&quot;
comma
id|patch_tritech_tr28028
)brace
comma
singleline_comment|// added by xin jin [07/09/99]
(brace
l_int|0x54524123
comma
l_int|0xffffffff
comma
l_string|&quot;TR28602&quot;
comma
l_int|NULL
)brace
comma
singleline_comment|// only guess --jk [TR28023 = eMicro EM28023 (new CT1297)]
(brace
l_int|0x54584e20
comma
l_int|0xffffffff
comma
l_string|&quot;TLC320AD9xC&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x57454301
comma
l_int|0xffffffff
comma
l_string|&quot;W83971D&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c00
comma
l_int|0xffffffff
comma
l_string|&quot;WM9701A&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c03
comma
l_int|0xffffffff
comma
l_string|&quot;WM9703/9704&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x574d4c04
comma
l_int|0xffffffff
comma
l_string|&quot;WM9704 (quad)&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x594d4800
comma
l_int|0xffffffff
comma
l_string|&quot;YMF743&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847600
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9700/83/84&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847604
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9701/3/4/5&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847605
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9704&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0x83847608
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9708/11&quot;
comma
id|patch_sigmatel_stac9708
)brace
comma
(brace
l_int|0x83847609
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9721/23&quot;
comma
id|patch_sigmatel_stac9721
)brace
comma
(brace
l_int|0x83847644
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9744&quot;
comma
id|patch_sigmatel_stac9744
)brace
comma
(brace
l_int|0x83847656
comma
l_int|0xffffffff
comma
l_string|&quot;STAC9756/57&quot;
comma
id|patch_sigmatel_stac9756
)brace
comma
(brace
l_int|0x45838308
comma
l_int|0xffffffff
comma
l_string|&quot;ESS1988&quot;
comma
l_int|NULL
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|macro|AC97_ID_AK4540
mdefine_line|#define AC97_ID_AK4540&t;&t;0x414b4d00
DECL|macro|AC97_ID_AK4542
mdefine_line|#define AC97_ID_AK4542&t;&t;0x414b4d01
DECL|macro|AC97_ID_AD1819
mdefine_line|#define AC97_ID_AD1819&t;&t;0x41445303
DECL|macro|AC97_ID_AD1881
mdefine_line|#define AC97_ID_AD1881&t;&t;0x41445340
DECL|macro|AC97_ID_AD1881A
mdefine_line|#define AC97_ID_AD1881A&t;&t;0x41445348
DECL|macro|AC97_ID_AD1885
mdefine_line|#define AC97_ID_AD1885&t;&t;0x41445360
DECL|macro|AC97_ID_AD1886
mdefine_line|#define AC97_ID_AD1886&t;&t;0x41445361
DECL|macro|AC97_ID_AD1887
mdefine_line|#define AC97_ID_AD1887&t;&t;0x41445362
DECL|macro|AC97_ID_TR28028
mdefine_line|#define AC97_ID_TR28028&t;&t;0x54524108
DECL|macro|AC97_ID_STAC9700
mdefine_line|#define AC97_ID_STAC9700&t;0x83847600
DECL|macro|AC97_ID_STAC9704
mdefine_line|#define AC97_ID_STAC9704&t;0x83847604
DECL|macro|AC97_ID_STAC9705
mdefine_line|#define AC97_ID_STAC9705&t;0x83847605
DECL|macro|AC97_ID_STAC9708
mdefine_line|#define AC97_ID_STAC9708&t;0x83847608
DECL|macro|AC97_ID_STAC9721
mdefine_line|#define AC97_ID_STAC9721&t;0x83847609
DECL|macro|AC97_ID_STAC9744
mdefine_line|#define AC97_ID_STAC9744&t;0x83847644
DECL|macro|AC97_ID_STAC9756
mdefine_line|#define AC97_ID_STAC9756&t;0x83847656
DECL|variable|snd_ac97_stereo_enhancements
r_static
r_const
r_char
op_star
id|snd_ac97_stereo_enhancements
(braket
)braket
op_assign
(brace
multiline_comment|/*   0 */
l_string|&quot;No 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   1 */
l_string|&quot;Analog Devices Phat Stereo&quot;
comma
multiline_comment|/*   2 */
l_string|&quot;Creative Stereo Enhancement&quot;
comma
multiline_comment|/*   3 */
l_string|&quot;National Semi 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   4 */
l_string|&quot;YAMAHA Ymersion&quot;
comma
multiline_comment|/*   5 */
l_string|&quot;BBE 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   6 */
l_string|&quot;Crystal Semi 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   7 */
l_string|&quot;Qsound QXpander&quot;
comma
multiline_comment|/*   8 */
l_string|&quot;Spatializer 3D Stereo Enhancement&quot;
comma
multiline_comment|/*   9 */
l_string|&quot;SRS 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  10 */
l_string|&quot;Platform Tech 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  11 */
l_string|&quot;AKM 3D Audio&quot;
comma
multiline_comment|/*  12 */
l_string|&quot;Aureal Stereo Enhancement&quot;
comma
multiline_comment|/*  13 */
l_string|&quot;Aztech 3D Enhancement&quot;
comma
multiline_comment|/*  14 */
l_string|&quot;Binaura 3D Audio Enhancement&quot;
comma
multiline_comment|/*  15 */
l_string|&quot;ESS Technology Stereo Enhancement&quot;
comma
multiline_comment|/*  16 */
l_string|&quot;Harman International VMAx&quot;
comma
multiline_comment|/*  17 */
l_string|&quot;Nvidea 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  18 */
l_string|&quot;Philips Incredible Sound&quot;
comma
multiline_comment|/*  19 */
l_string|&quot;Texas Instruments 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  20 */
l_string|&quot;VLSI Technology 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  21 */
l_string|&quot;TriTech 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  22 */
l_string|&quot;Realtek 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  23 */
l_string|&quot;Samsung 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  24 */
l_string|&quot;Wolfson Microelectronics 3D Enhancement&quot;
comma
multiline_comment|/*  25 */
l_string|&quot;Delta Integration 3D Enhancement&quot;
comma
multiline_comment|/*  26 */
l_string|&quot;SigmaTel 3D Enhancement&quot;
comma
multiline_comment|/*  27 */
l_string|&quot;Reserved 27&quot;
comma
multiline_comment|/*  28 */
l_string|&quot;Rockwell 3D Stereo Enhancement&quot;
comma
multiline_comment|/*  29 */
l_string|&quot;Reserved 29&quot;
comma
multiline_comment|/*  30 */
l_string|&quot;Reserved 30&quot;
comma
multiline_comment|/*  31 */
l_string|&quot;Reserved 31&quot;
)brace
suffix:semicolon
multiline_comment|/*&n; *  I/O routines&n; */
DECL|function|snd_ac97_valid_reg
r_static
r_int
id|snd_ac97_valid_reg
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
multiline_comment|/* filter some registers for buggy codecs */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_AK4540
suffix:colon
r_case
id|AC97_ID_AK4542
suffix:colon
r_if
c_cond
(paren
id|reg
op_le
l_int|0x1c
op_logical_or
id|reg
op_eq
l_int|0x20
op_logical_or
id|reg
op_eq
l_int|0x26
op_logical_or
id|reg
op_ge
l_int|0x7c
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|AC97_ID_AD1819
suffix:colon
multiline_comment|/* AD1819 */
r_case
id|AC97_ID_AD1881
suffix:colon
multiline_comment|/* AD1881 */
r_case
id|AC97_ID_AD1881A
suffix:colon
multiline_comment|/* AD1881A */
r_if
c_cond
(paren
id|reg
op_ge
l_int|0x3a
op_logical_and
id|reg
op_le
l_int|0x6e
)paren
multiline_comment|/* 0x59 */
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
r_case
id|AC97_ID_AD1885
suffix:colon
multiline_comment|/* AD1885 */
r_case
id|AC97_ID_AD1886
suffix:colon
multiline_comment|/* AD1886 */
r_case
id|AC97_ID_AD1887
suffix:colon
multiline_comment|/* AD1887 - !!verify!! --jk */
r_if
c_cond
(paren
id|reg
op_eq
l_int|0x5a
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|reg
op_ge
l_int|0x3c
op_logical_and
id|reg
op_le
l_int|0x6e
)paren
multiline_comment|/* 0x59 */
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9704
suffix:colon
r_case
id|AC97_ID_STAC9705
suffix:colon
r_case
id|AC97_ID_STAC9708
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
r_if
c_cond
(paren
id|reg
op_le
l_int|0x3a
op_logical_or
id|reg
op_ge
l_int|0x5a
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|snd_ac97_write
r_void
id|snd_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_read
r_int
r_int
id|snd_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|ac97
op_member_access_from_pointer
id|read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_write_cache
r_void
id|snd_ac97_write_cache
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|value
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|set_bit
c_func
(paren
id|reg
comma
id|ac97-&gt;reg_accessed
)paren
suffix:semicolon
)brace
macro_line|#ifndef CONFIG_SND_DEBUG
DECL|macro|snd_ac97_write_cache_test
mdefine_line|#define snd_ac97_write_cache_test snd_ac97_write_cache
macro_line|#else
DECL|function|snd_ac97_write_cache_test
r_static
r_void
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_return
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|ac97
op_member_access_from_pointer
id|read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|value
op_ne
id|ac97-&gt;regs
(braket
id|reg
)braket
)paren
id|snd_printk
c_func
(paren
l_string|&quot;AC97 reg=%02x val=%04x real=%04x&bslash;n&quot;
comma
id|reg
comma
id|value
comma
id|ac97-&gt;regs
(braket
id|reg
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|snd_ac97_update
r_int
id|snd_ac97_update
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|change
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
op_ne
id|value
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
id|value
)paren
suffix:semicolon
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
id|value
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ac97_update_bits
r_int
id|snd_ac97_update_bits
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_int
r_int
id|old
comma
r_new
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_ac97_valid_reg
c_func
(paren
id|ac97
comma
id|reg
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;regs
(braket
id|reg
)braket
suffix:semicolon
r_new
op_assign
(paren
id|old
op_amp
op_complement
id|mask
)paren
op_or
id|value
suffix:semicolon
id|change
op_assign
id|old
op_ne
r_new
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|reg
comma
r_new
)paren
suffix:semicolon
id|ac97-&gt;regs
(braket
id|reg
)braket
op_assign
r_new
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_update_pcm_bits
r_int
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|codec
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|value
)paren
(brace
r_int
id|change
suffix:semicolon
r_int
r_int
id|old
comma
r_new
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
suffix:semicolon
r_new
op_assign
(paren
id|old
op_amp
op_complement
id|mask
)paren
op_or
id|value
suffix:semicolon
id|change
op_assign
id|old
op_ne
r_new
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
multiline_comment|/* select single codec */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|codec
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|codec
)braket
)paren
suffix:semicolon
multiline_comment|/* update PCM bits */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_PCM
comma
r_new
)paren
suffix:semicolon
multiline_comment|/* select all codecs */
id|ac97
op_member_access_from_pointer
id|write
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_assign
r_new
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_ac97_info_mux
r_static
r_int
id|snd_ac97_info_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;Mic&quot;
comma
l_string|&quot;CD&quot;
comma
l_string|&quot;Video&quot;
comma
l_string|&quot;Aux&quot;
comma
l_string|&quot;Line&quot;
comma
l_string|&quot;Mix&quot;
comma
l_string|&quot;Mix Mono&quot;
comma
l_string|&quot;Phone&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|7
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|7
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_mux
r_static
r_int
id|snd_ac97_get_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|ac97-&gt;regs
(braket
id|AC97_REC_SEL
)braket
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
l_int|7
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
op_assign
(paren
id|val
op_rshift
l_int|0
)paren
op_amp
l_int|7
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_mux
r_static
r_int
id|snd_ac97_put_mux
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|7
op_logical_or
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
OG
l_int|7
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|1
)braket
op_lshift
l_int|0
)paren
suffix:semicolon
r_return
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|AC97_REC_SEL
comma
id|val
)paren
suffix:semicolon
)brace
DECL|macro|AC97_ENUM_DOUBLE
mdefine_line|#define AC97_ENUM_DOUBLE(xname, reg, shift, invert) &bslash;&n;{ iface: SNDRV_CTL_ELEM_IFACE_MIXER, name: xname, info: snd_ac97_info_enum_double, &bslash;&n;  get: snd_ac97_get_enum_double, put: snd_ac97_put_enum_double, &bslash;&n;  private_value: reg | (shift &lt;&lt; 8) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_enum_double
r_static
r_int
id|snd_ac97_info_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts1
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;pre 3D&quot;
comma
l_string|&quot;post 3D&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|texts2
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;Mix&quot;
comma
l_string|&quot;Mic&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|texts3
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;Mic1&quot;
comma
l_string|&quot;Mic2&quot;
)brace
suffix:semicolon
r_char
op_star
op_star
id|texts
op_assign
l_int|NULL
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_GENERAL_PURPOSE
suffix:colon
r_switch
c_cond
(paren
id|shift
)paren
(brace
r_case
l_int|15
suffix:colon
id|texts
op_assign
id|texts1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|texts
op_assign
id|texts2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|texts
op_assign
id|texts3
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|1
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_enum_double
r_static
r_int
id|snd_ac97_get_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|val
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift
)paren
op_amp
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_xor_assign
l_int|1
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_enum_double
r_static
r_int
id|snd_ac97_put_enum_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
OG
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
op_logical_neg
op_logical_neg
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_assign
op_logical_neg
id|val
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|1
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AC97_SINGLE
mdefine_line|#define AC97_SINGLE(xname, reg, shift, mask, invert) &bslash;&n;{ iface: SNDRV_CTL_ELEM_IFACE_MIXER, name: xname, info: snd_ac97_info_single, &bslash;&n;  get: snd_ac97_get_single, put: snd_ac97_put_single, &bslash;&n;  private_value: reg | (shift &lt;&lt; 8) | (mask &lt;&lt; 16) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_single
r_static
r_int
id|snd_ac97_info_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_single
r_static
r_int
id|snd_ac97_get_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift
)paren
op_amp
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_single
r_static
r_int
id|snd_ac97_put_single
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|val
op_assign
id|mask
op_minus
id|val
suffix:semicolon
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
id|mask
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AC97_DOUBLE
mdefine_line|#define AC97_DOUBLE(xname, reg, shift_left, shift_right, mask, invert) &bslash;&n;{ iface: SNDRV_CTL_ELEM_IFACE_MIXER, name: (xname), info: snd_ac97_info_double, &bslash;&n;  get: snd_ac97_get_double, put: snd_ac97_put_double, &bslash;&n;  private_value: reg | (shift_left &lt;&lt; 8) | (shift_right &lt;&lt; 12) | (mask &lt;&lt; 16) | (invert &lt;&lt; 24) }
DECL|function|snd_ac97_info_double
r_static
r_int
id|snd_ac97_info_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_get_double
r_static
r_int
id|snd_ac97_get_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift_left
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|shift_right
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|12
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift_left
)paren
op_amp
id|mask
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|ac97-&gt;regs
(braket
id|reg
)braket
op_rshift
id|shift_right
)paren
op_amp
id|mask
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
(brace
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|mask
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_put_double
r_static
r_int
id|snd_ac97_put_double
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|reg
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|shift_left
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|shift_right
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|12
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val1
comma
id|val2
suffix:semicolon
id|val1
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
suffix:semicolon
id|val2
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
(brace
id|val1
op_assign
id|mask
op_minus
id|val1
suffix:semicolon
id|val2
op_assign
id|mask
op_minus
id|val2
suffix:semicolon
)brace
r_return
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|reg
comma
(paren
id|mask
op_lshift
id|shift_left
)paren
op_or
(paren
id|mask
op_lshift
id|shift_right
)paren
comma
(paren
id|val1
op_lshift
id|shift_left
)paren
op_or
(paren
id|val2
op_lshift
id|shift_right
)paren
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_master
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_master
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Playback Switch&quot;
comma
id|AC97_MASTER
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Master Playback Volume&quot;
comma
id|AC97_MASTER
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_headphone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_headphone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Headphone Playback Switch&quot;
comma
id|AC97_HEADPHONE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Headphone Playback Volume&quot;
comma
id|AC97_HEADPHONE
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_master_mono
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_master_mono
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Mono Playback Switch&quot;
comma
id|AC97_MASTER_MONO
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Master Mono Playback Volume&quot;
comma
id|AC97_MASTER_MONO
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_tone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_tone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Tone Control - Bass&quot;
comma
id|AC97_MASTER_TONE
comma
l_int|8
comma
l_int|15
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Tone Control - Treble&quot;
comma
id|AC97_MASTER_TONE
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_pc_beep
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_pc_beep
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PC Speaker Playback Switch&quot;
comma
id|AC97_PC_BEEP
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PC Speaker Playback Volume&quot;
comma
id|AC97_PC_BEEP
comma
l_int|1
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_phone
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_phone
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Phone Playback Switch&quot;
comma
id|AC97_PHONE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Phone Playback Volume&quot;
comma
id|AC97_PHONE
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_mic
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_mic
(braket
l_int|3
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Playback Switch&quot;
comma
id|AC97_MIC
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Playback Volume&quot;
comma
id|AC97_MIC
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Boost (+20dB)&quot;
comma
id|AC97_MIC
comma
l_int|6
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_line
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_line
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Line Playback Switch&quot;
comma
id|AC97_LINE
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Line Playback Volume&quot;
comma
id|AC97_LINE
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_cd
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_cd
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;CD Playback Switch&quot;
comma
id|AC97_CD
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;CD Playback Volume&quot;
comma
id|AC97_CD
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_video
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_video
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Video Playback Switch&quot;
comma
id|AC97_VIDEO
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Video Playback Volume&quot;
comma
id|AC97_VIDEO
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_aux
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_aux
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Aux Playback Switch&quot;
comma
id|AC97_AUX
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Aux Playback Volume&quot;
comma
id|AC97_AUX
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_pcm
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_pcm
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;PCM Playback Switch&quot;
comma
id|AC97_PCM
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;PCM Playback Volume&quot;
comma
id|AC97_PCM
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_capture
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_capture
(braket
l_int|3
)braket
op_assign
(brace
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Capture Source&quot;
comma
id|info
suffix:colon
id|snd_ac97_info_mux
comma
id|get
suffix:colon
id|snd_ac97_get_mux
comma
id|put
suffix:colon
id|snd_ac97_put_mux
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Capture Switch&quot;
comma
id|AC97_REC_GAIN
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Capture Volume&quot;
comma
id|AC97_REC_GAIN
comma
l_int|8
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_mic_capture
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_mic_capture
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Capture Switch&quot;
comma
id|AC97_REC_GAIN_MIC
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Mic Capture Volume&quot;
comma
id|AC97_REC_GAIN_MIC
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
r_typedef
r_enum
(brace
DECL|enumerator|AC97_GENERAL_PCM_OUT
id|AC97_GENERAL_PCM_OUT
op_assign
l_int|0
comma
DECL|enumerator|AC97_GENERAL_STEREO_ENHANCEMENT
id|AC97_GENERAL_STEREO_ENHANCEMENT
comma
DECL|enumerator|AC97_GENERAL_3D
id|AC97_GENERAL_3D
comma
DECL|enumerator|AC97_GENERAL_LOUDNESS
id|AC97_GENERAL_LOUDNESS
comma
DECL|enumerator|AC97_GENERAL_MONO
id|AC97_GENERAL_MONO
comma
DECL|enumerator|AC97_GENERAL_MIC
id|AC97_GENERAL_MIC
comma
DECL|enumerator|AC97_GENERAL_LOOPBACK
id|AC97_GENERAL_LOOPBACK
DECL|typedef|ac97_general_index_t
)brace
id|ac97_general_index_t
suffix:semicolon
DECL|variable|snd_ac97_controls_general
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_general
(braket
l_int|7
)braket
op_assign
(brace
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;PCM Out Path &amp; Mute&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|15
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Simulated Stereo Enhancement&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|14
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Switch&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|13
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Loudness (bass boost)&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|12
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;Mono Output Select&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|9
comma
l_int|0
)paren
comma
id|AC97_ENUM_DOUBLE
c_func
(paren
l_string|&quot;Mic Select&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|8
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;ADC/DAC Loopback&quot;
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|7
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_3d
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_3d
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Center&quot;
comma
id|AC97_3D_CONTROL
comma
l_int|8
comma
l_int|15
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;3D Control - Depth&quot;
comma
id|AC97_3D_CONTROL
comma
l_int|0
comma
l_int|15
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_center
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_center
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center Playback Switch&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|7
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Center Playback Volume&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_lfe
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_lfe
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;LFE Playback Switch&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|15
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;LFE Playback Volume&quot;
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|8
comma
l_int|31
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_surround
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_surround
(braket
l_int|2
)braket
op_assign
(brace
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround Playback Switch&quot;
comma
id|AC97_SURROUND_MASTER
comma
l_int|15
comma
l_int|7
comma
l_int|1
comma
l_int|1
)paren
comma
id|AC97_DOUBLE
c_func
(paren
l_string|&quot;Surround Playback Volume&quot;
comma
id|AC97_SURROUND_MASTER
comma
l_int|8
comma
l_int|0
comma
l_int|31
comma
l_int|1
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_ac97_sigmatel_controls
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_sigmatel_controls
(braket
)braket
op_assign
(brace
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel DAC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
l_string|&quot;Sigmatel ADC 6dB Attenuate&quot;
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_control_eapd
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_control_eapd
op_assign
id|AC97_SINGLE
c_func
(paren
l_string|&quot;External Amplifier Power Down&quot;
comma
id|AC97_POWERDOWN
comma
l_int|15
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|function|snd_ac97_spdif_mask_info
r_static
r_int
id|snd_ac97_spdif_mask_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_cmask_get
r_static
r_int
id|snd_ac97_spdif_cmask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_CON_EMPHASIS_5015
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_CON_CATEGORY
op_or
id|IEC958_AES1_CON_ORIGINAL
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
id|IEC958_AES3_CON_FS
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_pmask_get
r_static
r_int
id|snd_ac97_spdif_pmask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
multiline_comment|/* FIXME: AC&squot;97 spec doesn&squot;t say which bits are used for what */
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS_5015
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_default_get
r_static
r_int
id|snd_ac97_spdif_default_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|ac97-&gt;spdif_status
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
(paren
id|ac97-&gt;spdif_status
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_spdif_default_put
r_static
r_int
id|snd_ac97_spdif_default_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
r_new
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|val
op_assign
l_int|0
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_new
op_assign
id|val
op_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_NONAUDIO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PROFESSIONAL
)paren
(brace
r_new
op_or_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
suffix:semicolon
r_switch
c_cond
(paren
r_new
op_amp
id|IEC958_AES0_PRO_FS
)paren
(brace
r_case
id|IEC958_AES0_PRO_FS_44100
suffix:colon
id|val
op_or_assign
l_int|0
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES0_PRO_FS_32000
suffix:colon
id|val
op_or_assign
l_int|2
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES0_PRO_FS_48000
suffix:colon
id|val
op_or_assign
l_int|1
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|val
op_or_assign
l_int|1
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
r_new
op_amp
id|IEC958_AES0_PRO_EMPHASIS
)paren
op_eq
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_new
op_or_assign
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_amp
(paren
id|IEC958_AES0_CON_EMPHASIS_5015
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
)paren
suffix:semicolon
r_new
op_or_assign
(paren
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_amp
(paren
id|IEC958_AES1_CON_CATEGORY
op_or
id|IEC958_AES1_CON_ORIGINAL
)paren
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_new
op_or_assign
(paren
(paren
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_amp
id|IEC958_AES3_CON_FS
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_new
op_amp
id|IEC958_AES0_CON_EMPHASIS
)paren
op_eq
id|IEC958_AES0_CON_EMPHASIS_5015
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|3
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_amp
id|IEC958_AES0_CON_NOT_COPYRIGHT
)paren
)paren
id|val
op_or_assign
l_int|1
op_lshift
l_int|2
suffix:semicolon
id|val
op_or_assign
(paren
(paren
r_new
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_lshift
l_int|4
suffix:semicolon
singleline_comment|// category + original
r_switch
c_cond
(paren
(paren
r_new
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
)paren
(brace
r_case
id|IEC958_AES3_CON_FS_44100
suffix:colon
id|val
op_or_assign
l_int|0
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES3_CON_FS_48000
suffix:colon
id|val
op_or_assign
l_int|2
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEC958_AES3_CON_FS_32000
suffix:colon
id|val
op_or_assign
l_int|3
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|val
op_or_assign
l_int|1
op_lshift
l_int|12
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|change
op_assign
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x3fff
comma
id|val
)paren
suffix:semicolon
id|change
op_or_assign
id|ac97-&gt;spdif_status
op_ne
r_new
suffix:semicolon
id|ac97-&gt;spdif_status
op_assign
r_new
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_spdif
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_spdif
(braket
l_int|5
)braket
op_assign
(brace
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
id|info
suffix:colon
id|snd_ac97_spdif_mask_info
comma
id|get
suffix:colon
id|snd_ac97_spdif_cmask_get
comma
)brace
comma
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
id|info
suffix:colon
id|snd_ac97_spdif_mask_info
comma
id|get
suffix:colon
id|snd_ac97_spdif_pmask_get
comma
)brace
comma
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
id|info
suffix:colon
id|snd_ac97_spdif_mask_info
comma
id|get
suffix:colon
id|snd_ac97_spdif_default_get
comma
id|put
suffix:colon
id|snd_ac97_spdif_default_put
comma
)brace
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|SWITCH
)paren
comma
id|AC97_EXTENDED_STATUS
comma
l_int|2
comma
l_int|1
comma
l_int|0
)paren
comma
id|AC97_SINGLE
c_func
(paren
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|NONE
)paren
l_string|&quot;AC97-SPSA&quot;
comma
id|AC97_EXTENDED_STATUS
comma
l_int|4
comma
l_int|3
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|macro|AD18XX_PCM_BITS
mdefine_line|#define AD18XX_PCM_BITS(xname, codec, shift, mask) &bslash;&n;{ iface: SNDRV_CTL_ELEM_IFACE_MIXER, name: xname, info: snd_ac97_ad18xx_pcm_info_bits, &bslash;&n;  get: snd_ac97_ad18xx_pcm_get_bits, put: snd_ac97_ad18xx_pcm_put_bits, &bslash;&n;  private_value: codec | (shift &lt;&lt; 8) | (mask &lt;&lt; 16) }
DECL|function|snd_ac97_ad18xx_pcm_info_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_info_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|mask
op_eq
l_int|1
ques
c_cond
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:colon
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_get_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_get_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|mask
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
id|shift
)paren
op_amp
id|mask
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_put_bits
r_static
r_int
id|snd_ac97_ad18xx_pcm_put_bits
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
id|shift
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
id|mask
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
id|mask
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
id|mask
)paren
suffix:semicolon
r_return
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97
comma
id|codec
comma
id|mask
op_lshift
id|shift
comma
id|val
op_lshift
id|shift
)paren
suffix:semicolon
)brace
DECL|macro|AD18XX_PCM_VOLUME
mdefine_line|#define AD18XX_PCM_VOLUME(xname, codec) &bslash;&n;{ iface: SNDRV_CTL_ELEM_IFACE_MIXER, name: xname, info: snd_ac97_ad18xx_pcm_info_volume, &bslash;&n;  get: snd_ac97_ad18xx_pcm_get_volume, put: snd_ac97_ad18xx_pcm_put_volume, &bslash;&n;  private_value: codec }
DECL|function|snd_ac97_ad18xx_pcm_info_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_info_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|31
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_get_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_get_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|31
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
l_int|0
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
l_int|31
op_minus
(paren
(paren
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
id|codec
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_ad18xx_pcm_put_volume
r_static
r_int
id|snd_ac97_ad18xx_pcm_put_volume
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|codec
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|val1
comma
id|val2
suffix:semicolon
id|val1
op_assign
l_int|31
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|31
)paren
suffix:semicolon
id|val2
op_assign
l_int|31
op_minus
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
l_int|31
)paren
suffix:semicolon
r_return
id|snd_ac97_ad18xx_update_pcm_bits
c_func
(paren
id|ac97
comma
id|codec
comma
l_int|0x1f1f
comma
(paren
id|val1
op_lshift
l_int|8
)paren
op_or
id|val2
)paren
suffix:semicolon
)brace
DECL|variable|snd_ac97_controls_ad18xx_pcm
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_pcm
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;PCM Playback Switch&quot;
comma
l_int|0
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_VOLUME
c_func
(paren
l_string|&quot;PCM Playback Volume&quot;
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_surround
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_surround
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Surround Playback Switch&quot;
comma
l_int|1
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_VOLUME
c_func
(paren
l_string|&quot;Surround Playback Volume&quot;
comma
l_int|1
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_center
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_center
(braket
l_int|2
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Center Playback Switch&quot;
comma
l_int|2
comma
l_int|15
comma
l_int|1
)paren
comma
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;Center Playback Volume&quot;
comma
l_int|2
comma
l_int|8
comma
l_int|31
)paren
)brace
suffix:semicolon
DECL|variable|snd_ac97_controls_ad18xx_lfe
r_static
r_const
id|snd_kcontrol_new_t
id|snd_ac97_controls_ad18xx_lfe
(braket
l_int|1
)braket
op_assign
(brace
id|AD18XX_PCM_BITS
c_func
(paren
l_string|&quot;LFE Playback Volume&quot;
comma
l_int|2
comma
l_int|0
comma
l_int|31
)paren
)brace
suffix:semicolon
multiline_comment|/*&n; *&n; */
DECL|function|snd_ac97_free
r_static
r_int
id|snd_ac97_free
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_if
c_cond
(paren
id|ac97
)paren
(brace
id|snd_ac97_proc_done
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;private_free
)paren
id|ac97
op_member_access_from_pointer
id|private_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|snd_magic_kfree
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_dev_free
r_static
r_int
id|snd_ac97_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|device-&gt;device_data
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_return
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_try_volume_mix
r_static
r_int
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
)paren
(brace
r_int
r_int
id|val
comma
id|mask
op_assign
l_int|0x8000
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_MASTER_TONE
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x04
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_HEADPHONE
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x10
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_REC_GAIN_MIC
suffix:colon
r_return
id|ac97-&gt;caps
op_amp
l_int|0x01
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_case
id|AC97_3D_CONTROL
suffix:colon
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x7c00
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
multiline_comment|/* if nonzero - fixed and we can&squot;t set it */
r_return
id|val
op_eq
l_int|0
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
r_case
id|AC97_CENTER_LFE_MASTER
suffix:colon
multiline_comment|/* center */
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x40
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_CENTER_LFE_MASTER
op_plus
l_int|1
suffix:colon
multiline_comment|/* lfe */
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x100
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
id|reg
op_assign
id|AC97_CENTER_LFE_MASTER
suffix:semicolon
id|mask
op_assign
l_int|0x0080
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_SURROUND_MASTER
suffix:colon
r_if
c_cond
(paren
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x80
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
id|mask
)paren
)paren
(brace
multiline_comment|/* nothing seems to be here - mute flag is not set */
multiline_comment|/* try another test */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
op_or
id|mask
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|val
op_amp
id|mask
)paren
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* nothing here */
)brace
r_return
l_int|1
suffix:semicolon
multiline_comment|/* success, useable */
)brace
DECL|function|snd_ac97_try_bit
r_static
r_int
id|snd_ac97_try_bit
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|bit
)paren
(brace
r_int
r_int
id|mask
comma
id|val
comma
id|orig
comma
id|res
suffix:semicolon
id|mask
op_assign
l_int|1
op_lshift
id|bit
suffix:semicolon
id|orig
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|val
op_assign
id|orig
op_xor
id|mask
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|res
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
id|orig
)paren
suffix:semicolon
r_return
id|res
op_eq
id|val
suffix:semicolon
)brace
DECL|function|snd_ac97_change_volume_params1
r_static
r_void
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_char
op_star
id|max
)paren
(brace
r_int
r_int
id|val
comma
id|val1
suffix:semicolon
op_star
id|max
op_assign
l_int|63
suffix:semicolon
id|val
op_assign
l_int|0x8000
op_or
l_int|0x0020
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|val1
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|val1
)paren
(brace
op_star
id|max
op_assign
l_int|31
suffix:semicolon
)brace
multiline_comment|/* reset volume to zero */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|0x8000
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_change_volume_params2
r_static
r_void
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|shift
comma
r_int
r_char
op_star
id|max
)paren
(brace
r_int
r_int
id|val
comma
id|val1
suffix:semicolon
op_star
id|max
op_assign
l_int|63
suffix:semicolon
id|val
op_assign
l_int|0x8080
op_or
(paren
l_int|0x20
op_lshift
id|shift
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|val1
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|val1
)paren
(brace
op_star
id|max
op_assign
l_int|31
suffix:semicolon
)brace
multiline_comment|/* reset volume to zero */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|0x8080
)paren
suffix:semicolon
)brace
DECL|function|printable
r_static
r_inline
r_int
id|printable
c_func
(paren
r_int
r_int
id|x
)paren
(brace
id|x
op_and_assign
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|x
OL
l_char|&squot; &squot;
op_logical_or
id|x
op_ge
l_int|0x71
)paren
(brace
r_if
c_cond
(paren
id|x
op_le
l_int|0x89
)paren
r_return
id|x
op_minus
l_int|0x71
op_plus
l_char|&squot;A&squot;
suffix:semicolon
r_return
l_char|&squot;?&squot;
suffix:semicolon
)brace
r_return
id|x
suffix:semicolon
)brace
DECL|function|snd_ac97_cnew
r_static
id|snd_kcontrol_t
op_star
id|snd_ac97_cnew
c_func
(paren
r_const
id|snd_kcontrol_new_t
op_star
id|_template
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_new_t
r_template
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
r_template
comma
id|_template
comma
r_sizeof
(paren
r_template
)paren
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
r_template
dot
id|index
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_template
dot
id|index
op_assign
id|ac97-&gt;num
suffix:semicolon
r_return
id|snd_ctl_new1
c_func
(paren
op_amp
r_template
comma
id|ac97
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_mixer_build
r_static
r_int
id|snd_ac97_mixer_build
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
comma
id|idx
suffix:semicolon
r_int
r_char
id|max
suffix:semicolon
multiline_comment|/* build master controls */
multiline_comment|/* AD claims to remove this control from AD1887, although spec v2.2 don&squot;t allow this */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
l_int|0x8000
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_assign
l_int|0x8080
suffix:semicolon
multiline_comment|/* build center controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_center
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_center
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|0
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_or
id|max
)paren
suffix:semicolon
)brace
multiline_comment|/* build LFE controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
op_plus
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_lfe
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_lfe
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
l_int|8
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CENTER_LFE_MASTER
comma
id|ac97-&gt;regs
(braket
id|AC97_CENTER_LFE_MASTER
)braket
op_or
id|max
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/* build surround controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_surround
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_surround
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params2
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x8080
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* build headphone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_headphone
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_headphone
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_HEADPHONE
comma
l_int|0x8000
op_or
id|max
op_or
(paren
id|max
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* build master mono controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master_mono
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_master_mono
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_change_volume_params1
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
comma
op_amp
id|max
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_and_assign
op_complement
(paren
l_int|0xff
op_lshift
l_int|16
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_or_assign
(paren
r_int
)paren
id|max
op_lshift
l_int|16
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER_MONO
comma
l_int|0x8000
op_or
id|max
)paren
suffix:semicolon
)brace
multiline_comment|/* build master tone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_MASTER_TONE
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_tone
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MASTER_TONE
comma
l_int|0x0f0f
)paren
suffix:semicolon
)brace
multiline_comment|/* build PC Speaker controls */
r_if
c_cond
(paren
(paren
id|ac97-&gt;flags
op_amp
id|AC97_HAS_PC_BEEP
)paren
op_logical_or
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_PC_BEEP
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_pc_beep
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PC_BEEP
comma
l_int|0x801e
)paren
suffix:semicolon
)brace
multiline_comment|/* build Phone controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_PHONE
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_phone
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PHONE
comma
l_int|0x801f
)paren
suffix:semicolon
)brace
multiline_comment|/* build MIC controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_mic
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_MIC
comma
l_int|0x801f
)paren
suffix:semicolon
multiline_comment|/* build Line controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_line
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_LINE
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build CD controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_cd
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_CD
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build Video controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_VIDEO
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_video
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_VIDEO
comma
l_int|0x9f1f
)paren
suffix:semicolon
)brace
multiline_comment|/* build Aux controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_AUX
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_aux
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AUX
comma
l_int|0x9f1f
)paren
suffix:semicolon
)brace
multiline_comment|/* build PCM controls */
r_if
c_cond
(paren
id|ac97-&gt;flags
op_amp
id|AC97_AD_MULTI
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_pcm
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|0
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_SURROUND_DAC
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_surround
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|1
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;scaps
op_amp
id|AC97_SCAP_CENTER_LFE_DAC
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_center
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_ad18xx_lfe
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|ac97-&gt;spec.ad18xx.pcmreg
(braket
l_int|2
)braket
op_assign
l_int|0x9f1f
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_pcm
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_PCM
comma
l_int|0x9f1f
)paren
suffix:semicolon
multiline_comment|/* build Capture controls */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_capture
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_SEL
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* build MIC Capture controls */
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN_MIC
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_mic_capture
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN_MIC
comma
l_int|0x0000
)paren
suffix:semicolon
)brace
multiline_comment|/* build PCM out path &amp; mute control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|15
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_PCM_OUT
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Simulated Stereo Enhancement control */
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x0008
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_STEREO_ENHANCEMENT
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build 3D Stereo Enhancement control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|13
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_3D
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Loudness control */
r_if
c_cond
(paren
id|ac97-&gt;caps
op_amp
l_int|0x0020
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_LOUDNESS
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Mono output select control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|9
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_MONO
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build Mic select control */
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|8
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_MIC
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* build ADC/DAC loopback control */
r_if
c_cond
(paren
id|enable_loopback
op_logical_and
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|7
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_general
(braket
id|AC97_GENERAL_LOOPBACK
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* build 3D controls */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_STAC9708
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Rear Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|strcpy
c_func
(paren
id|kctl-&gt;id.name
comma
l_string|&quot;3D Control Sigmatel - Depth&quot;
)paren
suffix:semicolon
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|3
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|snd_ac97_try_volume_mix
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
)paren
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
id|val
op_assign
l_int|0x0707
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
)paren
suffix:semicolon
id|val
op_assign
id|val
op_eq
l_int|0x0606
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|val
)paren
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|9
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_3d
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|val
)paren
id|kctl-&gt;private_value
op_assign
id|AC97_3D_CONTROL
op_or
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
(paren
l_int|7
op_lshift
l_int|16
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_3D_CONTROL
comma
l_int|0x0000
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* build S/PDIF controls */
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0004
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|5
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_controls_spdif
(braket
id|idx
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* consumer,PCM audio,no copyright,no preemphasis,PCM coder,original */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x2a20
)paren
suffix:semicolon
id|ac97-&gt;spdif_status
op_assign
id|SNDRV_PCM_DEFAULT_CON_SPDIF
suffix:semicolon
)brace
multiline_comment|/* build Sigmatel specific controls */
r_switch
c_cond
(paren
id|ac97-&gt;id
)paren
(brace
r_case
id|AC97_ID_STAC9700
suffix:colon
r_case
id|AC97_ID_STAC9708
suffix:colon
r_case
id|AC97_ID_STAC9721
suffix:colon
r_case
id|AC97_ID_STAC9744
suffix:colon
r_case
id|AC97_ID_STAC9756
suffix:colon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_amp
op_complement
l_int|0x0003
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|1
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|0
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
comma
l_int|0
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_sigmatel_controls
(braket
l_int|1
)braket
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* nothing */
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_ac97_try_bit
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|15
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ac97_cnew
c_func
(paren
op_amp
id|snd_ac97_control_eapd
comma
id|ac97
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ac97_test_rate
r_static
r_int
id|snd_ac97_test_rate
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
id|rate
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
(paren
(paren
r_int
r_int
)paren
id|rate
op_star
id|ac97-&gt;clock
)paren
op_div
l_int|48000
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|reg
comma
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
r_return
id|val
op_eq
(paren
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_determine_rates
r_static
r_void
id|snd_ac97_determine_rates
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_int
op_star
id|r_result
)paren
(brace
r_int
r_int
id|result
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* test a non-standard rate */
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|11000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_CONTINUOUS
suffix:semicolon
multiline_comment|/* let&squot;s try to obtain standard rates */
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|8000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_8000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|11025
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_11025
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|16000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_16000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|22050
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_22050
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|32000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_32000
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|44100
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_44100
suffix:semicolon
r_if
c_cond
(paren
id|snd_ac97_test_rate
c_func
(paren
id|ac97
comma
id|reg
comma
l_int|48000
)paren
)paren
id|result
op_or_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
op_star
id|r_result
op_assign
id|result
suffix:semicolon
)brace
DECL|function|snd_ac97_get_name
r_static
r_void
id|snd_ac97_get_name
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|id
comma
r_char
op_star
id|name
)paren
(brace
r_const
id|ac97_codec_id_t
op_star
id|pid
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;0x%x %c%c%c&quot;
comma
id|id
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|24
)paren
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|16
)paren
comma
id|printable
c_func
(paren
id|id
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|pid
op_assign
id|snd_ac97_codec_id_vendors
suffix:semicolon
id|pid-&gt;id
suffix:semicolon
id|pid
op_increment
)paren
r_if
c_cond
(paren
id|pid-&gt;id
op_eq
(paren
id|id
op_amp
id|pid-&gt;mask
)paren
)paren
(brace
id|strcpy
c_func
(paren
id|name
comma
id|pid-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
op_logical_and
id|pid-&gt;patch
)paren
id|pid
op_member_access_from_pointer
id|patch
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_goto
id|__vendor_ok
suffix:semicolon
)brace
r_return
suffix:semicolon
id|__vendor_ok
suffix:colon
r_for
c_loop
(paren
id|pid
op_assign
id|snd_ac97_codec_ids
suffix:semicolon
id|pid-&gt;id
suffix:semicolon
id|pid
op_increment
)paren
r_if
c_cond
(paren
id|pid-&gt;id
op_eq
(paren
id|id
op_amp
id|pid-&gt;mask
)paren
)paren
(brace
id|strcat
c_func
(paren
id|name
comma
l_string|&quot; &quot;
)paren
suffix:semicolon
id|strcat
c_func
(paren
id|name
comma
id|pid-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pid-&gt;mask
op_ne
l_int|0xffffffff
)paren
id|sprintf
c_func
(paren
id|name
op_plus
id|strlen
c_func
(paren
id|name
)paren
comma
l_string|&quot; rev %d&quot;
comma
id|id
op_amp
op_complement
id|pid-&gt;mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
op_logical_and
id|pid-&gt;patch
)paren
id|pid
op_member_access_from_pointer
id|patch
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|name
op_plus
id|strlen
c_func
(paren
id|name
)paren
comma
l_string|&quot; (%x)&quot;
comma
id|id
op_amp
l_int|0xff
)paren
suffix:semicolon
)brace
DECL|function|snd_ac97_mixer
r_int
id|snd_ac97_mixer
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|_ac97
comma
id|ac97_t
op_star
op_star
id|rac97
)paren
(brace
r_int
id|err
suffix:semicolon
id|ac97_t
op_star
id|ac97
suffix:semicolon
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_int
r_int
id|end_time
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
id|dev_free
suffix:colon
id|snd_ac97_dev_free
comma
)brace
suffix:semicolon
id|snd_assert
c_func
(paren
id|rac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
op_star
id|rac97
op_assign
l_int|NULL
suffix:semicolon
id|snd_assert
c_func
(paren
id|card
op_ne
l_int|NULL
op_logical_and
id|_ac97
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
id|ac97
op_assign
id|snd_magic_kcalloc
c_func
(paren
id|ac97_t
comma
l_int|0
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
op_star
id|ac97
op_assign
op_star
id|_ac97
suffix:semicolon
id|ac97-&gt;card
op_assign
id|card
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|ac97-&gt;reg_lock
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* reset to defaults */
id|udelay
c_func
(paren
l_int|50
)paren
suffix:semicolon
multiline_comment|/* it&squot;s necessary to wait awhile until registers are accessible after RESET */
multiline_comment|/* because the PCM or MASTER volume registers can be modified, */
multiline_comment|/* the REC_GAIN register is used for tests */
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|2
)paren
suffix:semicolon
r_do
(brace
multiline_comment|/* use preliminary reads to settle the communication */
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
suffix:semicolon
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
multiline_comment|/* test if we can write to the PCM volume register */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
comma
l_int|0x8a05
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_REC_GAIN
)paren
)paren
op_eq
l_int|0x8a05
)paren
r_goto
id|__access_ok
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|100
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|end_time
op_minus
(paren
r_int
r_int
)paren
id|jiffies
op_ge
l_int|0
)paren
suffix:semicolon
id|snd_printd
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d does not respond - RESET [REC_GAIN = 0x%x]&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
comma
id|err
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
id|__access_ok
suffix:colon
id|ac97-&gt;caps
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
id|ac97-&gt;id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
op_lshift
l_int|16
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
id|ac97-&gt;ext_id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_eq
l_int|0xffff
)paren
multiline_comment|/* invalid combination */
id|ac97-&gt;ext_id
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;id
op_eq
l_int|0x00000000
op_logical_or
id|ac97-&gt;id
op_eq
l_int|0xffffffff
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d access is not valid [0x%x], removing mixer.&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;id
)paren
suffix:semicolon
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* FIXME: add powerdown control */
multiline_comment|/* nothing should be in powerdown mode */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* reset to defaults */
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
multiline_comment|/* nothing should be in powerdown mode */
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write_cache_test
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
)paren
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x0f
)paren
r_goto
id|__ready_ok
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|end_time
op_minus
(paren
r_int
r_int
)paren
id|jiffies
op_ge
l_int|0
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;AC&squot;97 %d:%d analog subsections not ready&bslash;n&quot;
comma
id|ac97-&gt;num
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
id|__ready_ok
suffix:colon
r_if
c_cond
(paren
id|ac97-&gt;clock
op_eq
l_int|0
)paren
id|ac97-&gt;clock
op_assign
l_int|48000
suffix:semicolon
multiline_comment|/* standard value */
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0189
)paren
multiline_comment|/* L/R, MIC, SDAC, LDAC VRA support */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
id|ac97-&gt;ext_id
op_amp
l_int|0x0189
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0001
)paren
(brace
multiline_comment|/* VRA support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_FRONT_DAC_RATE
comma
op_amp
id|ac97-&gt;rates_front_dac
)paren
suffix:semicolon
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_LR_ADC_RATE
comma
op_amp
id|ac97-&gt;rates_adc
)paren
suffix:semicolon
)brace
r_else
(brace
id|ac97-&gt;rates_front_dac
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
id|ac97-&gt;rates_adc
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0008
)paren
(brace
multiline_comment|/* MIC VRA support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_MIC_ADC_RATE
comma
op_amp
id|ac97-&gt;rates_mic_adc
)paren
suffix:semicolon
)brace
r_else
(brace
id|ac97-&gt;rates_mic_adc
op_assign
id|SNDRV_PCM_RATE_48000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0080
)paren
(brace
multiline_comment|/* SDAC support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_SURR_DAC_RATE
comma
op_amp
id|ac97-&gt;rates_surr_dac
)paren
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_SURROUND_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;ext_id
op_amp
l_int|0x0100
)paren
(brace
multiline_comment|/* LDAC support */
id|snd_ac97_determine_rates
c_func
(paren
id|ac97
comma
id|AC97_PCM_LFE_DAC_RATE
comma
op_amp
id|ac97-&gt;rates_lfe_dac
)paren
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_CENTER_LFE_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;init
)paren
id|ac97
op_member_access_from_pointer
id|init
c_func
(paren
id|ac97
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
id|ac97
comma
id|ac97-&gt;id
comma
id|name
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
l_int|NULL
comma
id|ac97-&gt;id
comma
id|name
)paren
suffix:semicolon
singleline_comment|// ac97-&gt;id might be changed in the special setup code
r_if
c_cond
(paren
id|card-&gt;mixername
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
(brace
id|strcpy
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|strlen
c_func
(paren
id|card-&gt;mixername
)paren
op_plus
l_int|1
op_plus
id|strlen
c_func
(paren
id|name
)paren
op_plus
l_int|1
op_le
r_sizeof
(paren
id|card-&gt;mixername
)paren
)paren
(brace
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
l_string|&quot;,&quot;
)paren
suffix:semicolon
id|strcat
c_func
(paren
id|card-&gt;mixername
comma
id|name
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_component_add
c_func
(paren
id|card
comma
l_string|&quot;AC97&quot;
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_ac97_mixer_build
c_func
(paren
id|card
comma
id|ac97
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|snd_ac97_proc_init
c_func
(paren
id|card
comma
id|ac97
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_LOWLEVEL
comma
id|ac97
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ac97_free
c_func
(paren
id|ac97
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
op_star
id|rac97
op_assign
id|ac97
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;&n; */
DECL|function|snd_ac97_proc_read_main
r_static
r_void
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
id|snd_info_buffer_t
op_star
id|buffer
comma
r_int
id|subidx
)paren
(brace
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_int
r_int
id|id
suffix:semicolon
r_int
r_int
id|val
comma
id|tmp
comma
id|ext
suffix:semicolon
r_static
r_const
r_char
op_star
id|spdif_slots
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot; SPDIF=3/4&quot;
comma
l_string|&quot; SPDIF=7/8&quot;
comma
l_string|&quot; SPDIF=6/9&quot;
comma
l_string|&quot; SPDIF=res&quot;
)brace
suffix:semicolon
r_static
r_const
r_char
op_star
id|spdif_rates
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot; Rate=44.1kHz&quot;
comma
l_string|&quot; Rate=res&quot;
comma
l_string|&quot; Rate=48kHz&quot;
comma
l_string|&quot; Rate=32kHz&quot;
)brace
suffix:semicolon
id|id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID1
)paren
op_lshift
l_int|16
suffix:semicolon
id|id
op_or_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
id|snd_ac97_get_name
c_func
(paren
l_int|NULL
comma
id|id
comma
id|name
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%d-%d/%d: %s&bslash;n&bslash;n&quot;
comma
id|ac97-&gt;addr
comma
id|ac97-&gt;num
comma
id|subidx
comma
id|name
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_RESET
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Capabilities     :%s%s%s%s%s%s&bslash;n&quot;
comma
id|val
op_amp
l_int|0x0001
ques
c_cond
l_string|&quot; -dedicated MIC PCM IN channel-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0002
ques
c_cond
l_string|&quot; -reserved1-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0004
ques
c_cond
l_string|&quot; -bass &amp; treble-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0008
ques
c_cond
l_string|&quot; -simulated stereo-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0010
ques
c_cond
l_string|&quot; -headphone out-&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0020
ques
c_cond
l_string|&quot; -loudness-&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|tmp
op_assign
id|ac97-&gt;caps
op_amp
l_int|0x00c0
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;DAC resolution   : %s%s%s%s&bslash;n&quot;
comma
id|tmp
op_eq
l_int|0x0000
ques
c_cond
l_string|&quot;16-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x0040
ques
c_cond
l_string|&quot;18-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x0080
ques
c_cond
l_string|&quot;20-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x00c0
ques
c_cond
l_string|&quot;???&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|tmp
op_assign
id|ac97-&gt;caps
op_amp
l_int|0x0300
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;ADC resolution   : %s%s%s%s&bslash;n&quot;
comma
id|tmp
op_eq
l_int|0x0000
ques
c_cond
l_string|&quot;16-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x0100
ques
c_cond
l_string|&quot;18-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x0200
ques
c_cond
l_string|&quot;20-bit&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|tmp
op_eq
l_int|0x0300
ques
c_cond
l_string|&quot;???&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;3D enhancement   : %s&bslash;n&quot;
comma
id|snd_ac97_stereo_enhancements
(braket
(paren
id|val
op_rshift
l_int|10
)paren
op_amp
l_int|0x1f
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nCurrent setup&bslash;n&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_MIC
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Mic gain         : %s [%s]&bslash;n&quot;
comma
id|val
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot;+20dB&quot;
suffix:colon
l_string|&quot;+0dB&quot;
comma
id|ac97-&gt;regs
(braket
id|AC97_MIC
)braket
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot;+20dB&quot;
suffix:colon
l_string|&quot;+0dB&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;POP path         : %s 3D&bslash;n&quot;
l_string|&quot;Sim. stereo      : %s&bslash;n&quot;
l_string|&quot;3D enhancement   : %s&bslash;n&quot;
l_string|&quot;Loudness         : %s&bslash;n&quot;
l_string|&quot;Mono output      : %s&bslash;n&quot;
l_string|&quot;Mic select       : %s&bslash;n&quot;
l_string|&quot;ADC/DAC loopback : %s&bslash;n&quot;
comma
id|val
op_amp
l_int|0x8000
ques
c_cond
l_string|&quot;post&quot;
suffix:colon
l_string|&quot;pre&quot;
comma
id|val
op_amp
l_int|0x4000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x2000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x1000
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
comma
id|val
op_amp
l_int|0x0200
ques
c_cond
l_string|&quot;Mic&quot;
suffix:colon
l_string|&quot;MIX&quot;
comma
id|val
op_amp
l_int|0x0100
ques
c_cond
l_string|&quot;Mic2&quot;
suffix:colon
l_string|&quot;Mic1&quot;
comma
id|val
op_amp
l_int|0x0080
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
)paren
suffix:semicolon
id|ext
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Extended ID      : codec=%i rev=%i%s%s%s%s DSA=%i%s%s%s%s&bslash;n&quot;
comma
(paren
id|ext
op_rshift
l_int|14
)paren
op_amp
l_int|3
comma
(paren
id|ext
op_rshift
l_int|10
)paren
op_amp
l_int|3
comma
id|ext
op_amp
l_int|0x0200
ques
c_cond
l_string|&quot; AMAP&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0100
ques
c_cond
l_string|&quot; LDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0080
ques
c_cond
l_string|&quot; SDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot; CDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|ext
op_rshift
l_int|4
)paren
op_amp
l_int|3
comma
id|ext
op_amp
l_int|0x0008
ques
c_cond
l_string|&quot; VRM&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0004
ques
c_cond
l_string|&quot; SPDIF&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0002
ques
c_cond
l_string|&quot; DRA&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0001
ques
c_cond
l_string|&quot; VRA&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Extended status  :%s%s%s%s%s%s%s%s%s%s%s%s%s%s&bslash;n&quot;
comma
id|val
op_amp
l_int|0x4000
ques
c_cond
l_string|&quot; PRL&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x2000
ques
c_cond
l_string|&quot; PRK&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x1000
ques
c_cond
l_string|&quot; PRJ&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0800
ques
c_cond
l_string|&quot; PRI&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0400
ques
c_cond
l_string|&quot; SPCV&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0200
ques
c_cond
l_string|&quot; MADC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0100
ques
c_cond
l_string|&quot; LDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0080
ques
c_cond
l_string|&quot; SDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0040
ques
c_cond
l_string|&quot; CDAC&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|ext
op_amp
l_int|0x0004
ques
c_cond
id|spdif_slots
(braket
(paren
id|val
op_amp
l_int|0x0030
)paren
op_rshift
l_int|4
)braket
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0008
ques
c_cond
l_string|&quot; VRM&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0004
ques
c_cond
l_string|&quot; SPDIF&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0002
ques
c_cond
l_string|&quot; DRA&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0001
ques
c_cond
l_string|&quot; VRA&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_amp
l_int|1
)paren
(brace
multiline_comment|/* VRA */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_FRONT_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM front DAC    : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ext
op_amp
l_int|0x0080
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_SURR_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM Surr DAC     : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ext
op_amp
l_int|0x0100
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_LFE_DAC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM LFE DAC      : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_LR_ADC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM ADC          : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ext
op_amp
l_int|0x0008
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_PCM_MIC_ADC_RATE
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;PCM MIC ADC      : %iHz&bslash;n&quot;
comma
id|val
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ext
op_amp
l_int|0x0004
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;SPDIF Control    :%s%s%s%s Category=0x%x Generation=%i%s%s%s&bslash;n&quot;
comma
id|val
op_amp
l_int|0x0001
ques
c_cond
l_string|&quot; PRO&quot;
suffix:colon
l_string|&quot; Consumer&quot;
comma
id|val
op_amp
l_int|0x0002
ques
c_cond
l_string|&quot; Non-audio&quot;
suffix:colon
l_string|&quot; PCM&quot;
comma
id|val
op_amp
l_int|0x0004
ques
c_cond
l_string|&quot; Copyright&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x0008
ques
c_cond
l_string|&quot; Preemph50/15&quot;
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|val
op_amp
l_int|0x07f0
)paren
op_rshift
l_int|4
comma
(paren
id|val
op_amp
l_int|0x0800
)paren
op_rshift
l_int|11
comma
id|spdif_rates
(braket
(paren
id|val
op_amp
l_int|0x3000
)paren
op_rshift
l_int|12
)braket
comma
id|val
op_amp
l_int|0x4000
ques
c_cond
l_string|&quot; DRS&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|val
op_amp
l_int|0x8000
ques
c_cond
l_string|&quot; Validity&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_read
r_static
r_void
id|snd_ac97_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|entry-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;id
op_amp
l_int|0xffffff40
)paren
op_eq
id|AC97_ID_AD1881
)paren
(brace
singleline_comment|// Analog Devices AD1881/85/86
r_int
id|idx
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
(brace
multiline_comment|/* select single codec */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
id|idx
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nAD18XX configuration&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Unchained        : 0x%04x,0x%04x,0x%04x&bslash;n&quot;
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|0
)braket
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|1
)braket
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Chained          : 0x%04x,0x%04x,0x%04x&bslash;n&quot;
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|0
)braket
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|1
)braket
comma
id|ac97-&gt;spec.ad18xx.chained
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_ac97_proc_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_regs_read_main
r_static
r_void
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
id|snd_info_buffer_t
op_star
id|buffer
comma
r_int
id|subidx
)paren
(brace
r_int
id|reg
comma
id|val
suffix:semicolon
r_for
c_loop
(paren
id|reg
op_assign
l_int|0
suffix:semicolon
id|reg
OL
l_int|0x80
suffix:semicolon
id|reg
op_add_assign
l_int|2
)paren
(brace
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|reg
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%i:%02x = %04x&bslash;n&quot;
comma
id|subidx
comma
id|reg
comma
id|val
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_regs_read
r_static
r_void
id|snd_ac97_proc_regs_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ac97_t
op_star
id|ac97
op_assign
id|snd_magic_cast
c_func
(paren
id|ac97_t
comma
id|entry-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;id
op_amp
l_int|0xffffff40
)paren
op_eq
id|AC97_ID_AD1881
)paren
(brace
singleline_comment|// Analog Devices AD1881/85/86
r_int
id|idx
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
(brace
multiline_comment|/* select single codec */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
id|idx
)paren
suffix:semicolon
)brace
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_ac97_proc_regs_read_main
c_func
(paren
id|ac97
comma
id|buffer
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ac97_proc_init
r_static
r_void
id|snd_ac97_proc_init
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_char
id|name
(braket
l_int|12
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;ac97#%d&quot;
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
id|name
comma
id|card-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|entry-&gt;content
op_assign
id|SNDRV_INFO_CONTENT_TEXT
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|ac97
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
suffix:semicolon
id|entry-&gt;c.text.read_size
op_assign
l_int|512
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_ac97_proc_read
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|ac97-&gt;proc_entry
op_assign
id|entry
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;ac97#%dregs&quot;
comma
id|ac97-&gt;addr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
id|name
comma
id|card-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|entry-&gt;content
op_assign
id|SNDRV_INFO_CONTENT_TEXT
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|ac97
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
suffix:semicolon
id|entry-&gt;c.text.read_size
op_assign
l_int|1024
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_ac97_proc_regs_read
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|ac97-&gt;proc_regs_entry
op_assign
id|entry
suffix:semicolon
)brace
DECL|function|snd_ac97_proc_done
r_static
r_void
id|snd_ac97_proc_done
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_if
c_cond
(paren
id|ac97-&gt;proc_regs_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|ac97-&gt;proc_regs_entry
)paren
suffix:semicolon
id|ac97-&gt;proc_regs_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;proc_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|ac97-&gt;proc_entry
)paren
suffix:semicolon
id|ac97-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; *  Chip specific initialization&n; */
DECL|function|patch_wolfson
r_static
r_int
id|patch_wolfson
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// for all wolfson codecs (is this correct? --jk)
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x72
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x74
comma
l_int|0x0808
)paren
suffix:semicolon
singleline_comment|// patch for DVD noise
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x5a
comma
l_int|0x0200
)paren
suffix:semicolon
singleline_comment|// init vol
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x70
comma
l_int|0x0808
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_tritech_tr28028
r_static
r_int
id|patch_tritech_tr28028
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0300
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
l_int|0x26
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SURROUND_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SPDIF
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9708
r_static
r_int
id|patch_sigmatel_stac9708
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|codec72
comma
id|codec6c
suffix:semicolon
id|codec72
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
)paren
op_amp
l_int|0x8000
suffix:semicolon
id|codec6c
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0007
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0
)paren
)paren
(brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x1001
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_DAC2INVERT
comma
l_int|0x0008
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|codec72
op_eq
l_int|0x8000
)paren
op_logical_and
(paren
id|codec6c
op_eq
l_int|0x0080
)paren
)paren
(brace
multiline_comment|/* nothing */
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9721
r_static
r_int
id|patch_sigmatel_stac9721
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_ANALOG
)paren
op_eq
l_int|0
)paren
(brace
singleline_comment|// patch for SigmaTel
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x4000
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
)brace
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9744
r_static
r_int
id|patch_sigmatel_stac9744
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_sigmatel_stac9756
r_static
r_int
id|patch_sigmatel_stac9756
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for SigmaTel
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_CIC2
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* is this correct? --jk */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS1
comma
l_int|0xabba
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_BIAS2
comma
l_int|0x0002
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_SIGMATEL_MULTICHN
comma
l_int|0x0000
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_cirrus_cs4299
r_static
r_int
id|patch_cirrus_cs4299
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_HAS_PC_BEEP
suffix:semicolon
multiline_comment|/* force the detection of PC Beep */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1819
r_static
r_int
id|patch_ad1819
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// patch for Analog Devices
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* select all codecs */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|patch_ad1881_unchained
r_static
r_int
r_int
id|patch_ad1881_unchained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|mask
)paren
(brace
r_int
r_int
id|val
suffix:semicolon
singleline_comment|// test for unchained codec
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|mask
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
multiline_comment|/* ID0C, ID1C, SDIE = off */
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
op_assign
id|mask
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
r_return
id|mask
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained1
r_static
r_int
id|patch_ad1881_chained1
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|idx
comma
r_int
r_int
id|codec_bits
)paren
(brace
r_static
r_int
id|cfg_bits
(braket
l_int|3
)braket
op_assign
(brace
l_int|1
op_lshift
l_int|12
comma
l_int|1
op_lshift
l_int|14
comma
l_int|1
op_lshift
l_int|13
)brace
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|cfg_bits
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0004
)paren
suffix:semicolon
singleline_comment|// SDIE
id|val
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_VENDOR_ID2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
l_int|0xff40
)paren
op_ne
l_int|0x5340
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|codec_bits
)paren
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
id|codec_bits
)paren
suffix:semicolon
id|ac97-&gt;spec.ad18xx.chained
(braket
id|idx
)braket
op_assign
id|cfg_bits
(braket
id|idx
)braket
suffix:semicolon
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|patch_ad1881_chained
r_static
r_void
id|patch_ad1881_chained
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|unchained_idx
comma
r_int
id|cidx1
comma
r_int
id|cidx2
)paren
(brace
singleline_comment|// already detected?
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx1
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx1
)braket
)paren
id|cidx1
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|cidx2
)braket
op_logical_or
id|ac97-&gt;spec.ad18xx.chained
(braket
id|cidx2
)braket
)paren
id|cidx2
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|cidx1
OL
l_int|0
op_logical_and
id|cidx2
OL
l_int|0
)paren
r_return
suffix:semicolon
singleline_comment|// test for chained codecs
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|unchained_idx
)braket
)paren
suffix:semicolon
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0002
)paren
suffix:semicolon
singleline_comment|// ID1C
r_if
c_cond
(paren
id|cidx1
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0x0006
)paren
)paren
singleline_comment|// SDIE | ID1C
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cidx2
op_ge
l_int|0
)paren
(brace
id|patch_ad1881_chained1
c_func
(paren
id|ac97
comma
id|cidx2
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|patch_ad1881
r_static
r_int
id|patch_ad1881
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_static
r_const
r_char
id|cfg_idxs
(braket
l_int|3
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|2
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|2
)brace
comma
(brace
l_int|0
comma
l_int|1
)brace
)brace
suffix:semicolon
singleline_comment|// patch for Analog Devices
r_int
r_int
id|codecs
(braket
l_int|3
)braket
suffix:semicolon
r_int
id|idx
comma
id|num
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|ac97-&gt;spec.ad18xx.mutex
)paren
suffix:semicolon
id|codecs
(braket
l_int|0
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|0
comma
(paren
l_int|1
op_lshift
l_int|12
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|1
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|1
comma
(paren
l_int|1
op_lshift
l_int|14
)paren
)paren
suffix:semicolon
id|codecs
(braket
l_int|2
)braket
op_assign
id|patch_ad1881_unchained
c_func
(paren
id|ac97
comma
l_int|2
comma
(paren
l_int|1
op_lshift
l_int|13
)paren
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|codecs
(braket
l_int|0
)braket
op_or
id|codecs
(braket
l_int|1
)braket
op_or
id|codecs
(braket
l_int|2
)braket
comma
r_goto
id|__end
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.unchained
(braket
id|idx
)braket
)paren
id|patch_ad1881_chained
c_func
(paren
id|ac97
comma
id|idx
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|0
)braket
comma
id|cfg_idxs
(braket
id|idx
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|1
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_SURROUND_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|2
)braket
)paren
(brace
id|ac97-&gt;flags
op_or_assign
id|AC97_AD_MULTI
suffix:semicolon
id|ac97-&gt;scaps
op_or_assign
id|AC97_SCAP_CENTER_LFE_DAC
suffix:semicolon
)brace
id|__end
suffix:colon
multiline_comment|/* select all codecs */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_SERIAL_CFG
comma
l_int|0x7000
)paren
suffix:semicolon
multiline_comment|/* check if only one codec is present */
r_for
c_loop
(paren
id|idx
op_assign
id|num
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|3
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
id|idx
)braket
)paren
id|num
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|1
)paren
(brace
multiline_comment|/* ok, deselect all ID bits */
id|snd_ac97_write_cache
c_func
(paren
id|ac97
comma
id|AC97_AD_CODEC_CFG
comma
l_int|0x0000
)paren
suffix:semicolon
)brace
multiline_comment|/* required for AD1886/AD1885 combination */
id|ac97-&gt;ext_id
op_assign
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
)paren
(brace
id|ac97-&gt;id
op_and_assign
l_int|0xffff0000
suffix:semicolon
id|ac97-&gt;id
op_or_assign
id|ac97-&gt;spec.ad18xx.id
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM support&n; */
DECL|function|snd_ac97_set_rate
r_int
id|snd_ac97_set_rate
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
id|reg
comma
r_int
r_int
id|rate
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
r_int
r_int
id|end_time
suffix:semicolon
r_switch
c_cond
(paren
id|reg
)paren
(brace
r_case
id|AC97_PCM_MIC_ADC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
l_int|0x0008
)paren
op_eq
l_int|0
)paren
multiline_comment|/* MIC VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_PCM_FRONT_DAC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0200
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
l_int|0x0001
)paren
op_eq
l_int|0
)paren
multiline_comment|/* VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AC97_PCM_LR_ADC_RATE
suffix:colon
id|mask
op_assign
l_int|0x0100
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ac97-&gt;regs
(braket
id|AC97_EXTENDED_STATUS
)braket
op_amp
l_int|0x0001
)paren
op_eq
l_int|0
)paren
multiline_comment|/* VRA */
r_if
c_cond
(paren
id|rate
op_ne
l_int|48000
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|tmp
op_assign
(paren
(paren
r_int
r_int
)paren
id|rate
op_star
id|ac97-&gt;clock
)paren
op_div
l_int|48000
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OG
l_int|65535
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|mask
comma
id|mask
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|50
)paren
suffix:semicolon
r_do
(brace
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|end_time
op_minus
(paren
r_int
r_int
)paren
id|jiffies
op_ge
l_int|0
)paren
suffix:semicolon
id|snd_ac97_update
c_func
(paren
id|ac97
comma
id|reg
comma
id|tmp
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|mask
comma
l_int|0
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|50
)paren
suffix:semicolon
r_do
(brace
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|end_time
op_minus
(paren
r_int
r_int
)paren
id|jiffies
op_ge
l_int|0
)paren
suffix:semicolon
id|end_time
op_assign
id|jiffies
op_plus
(paren
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
)paren
op_amp
l_int|0x0003
)paren
op_eq
l_int|0x0003
)paren
r_break
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|end_time
op_minus
(paren
r_int
r_int
)paren
id|jiffies
op_ge
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_PM
multiline_comment|/*&n; * general suspend procedure&n; */
DECL|function|snd_ac97_suspend
r_void
id|snd_ac97_suspend
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
r_int
id|power
op_assign
(paren
id|ac97-&gt;regs
(braket
id|AC97_POWERDOWN
)braket
op_xor
l_int|0x8000
)paren
op_amp
op_complement
l_int|0x8000
suffix:semicolon
multiline_comment|/* invert EAPD */
id|power
op_or_assign
l_int|0x4000
suffix:semicolon
multiline_comment|/* Headphone amplifier powerdown */
id|power
op_or_assign
l_int|0x0300
suffix:semicolon
multiline_comment|/* ADC &amp; DAC powerdown */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|power
op_or_assign
l_int|0x0400
suffix:semicolon
multiline_comment|/* Analog Mixer powerdown (Vref on) */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|power
op_or_assign
l_int|0x3800
suffix:semicolon
multiline_comment|/* AC-link powerdown, internal Clk disable */
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|power
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * general resume procedure&n; */
DECL|function|snd_ac97_resume
r_void
id|snd_ac97_resume
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
r_int
id|i
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_RESET
comma
l_int|0
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_GENERAL_PURPOSE
comma
l_int|0
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_POWERDOWN
comma
id|ac97-&gt;regs
(braket
id|AC97_POWERDOWN
)braket
)paren
suffix:semicolon
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|AC97_MASTER
comma
l_int|0x8000
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_ac97_read
c_func
(paren
id|ac97
comma
id|AC97_MASTER
)paren
op_eq
l_int|0x8000
)paren
r_break
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ac97-&gt;init
)paren
id|ac97
op_member_access_from_pointer
id|init
c_func
(paren
id|ac97
)paren
suffix:semicolon
multiline_comment|/* restore ac97 status */
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
l_int|0x7c
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
id|AC97_POWERDOWN
op_logical_or
id|i
op_eq
id|AC97_EXTENDED_ID
)paren
r_continue
suffix:semicolon
multiline_comment|/* restore only accessible registers&n;&t;&t; * some chip (e.g. nm256) may hang up when unsupported registers&n;&t;&t; * are accessed..!&n;&t;&t; */
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|i
comma
id|ac97-&gt;reg_accessed
)paren
)paren
id|snd_ac97_write
c_func
(paren
id|ac97
comma
id|i
comma
id|ac97-&gt;regs
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/*&n; *  Exported symbols&n; */
DECL|variable|snd_ac97_write
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_write
)paren
suffix:semicolon
DECL|variable|snd_ac97_read
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_read
)paren
suffix:semicolon
DECL|variable|snd_ac97_write_cache
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_write_cache
)paren
suffix:semicolon
DECL|variable|snd_ac97_update
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_update
)paren
suffix:semicolon
DECL|variable|snd_ac97_update_bits
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_update_bits
)paren
suffix:semicolon
DECL|variable|snd_ac97_mixer
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_mixer
)paren
suffix:semicolon
DECL|variable|snd_ac97_set_rate
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_set_rate
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PM
DECL|variable|snd_ac97_resume
id|EXPORT_SYMBOL
c_func
(paren
id|snd_ac97_resume
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; *  INIT part&n; */
DECL|function|alsa_ac97_init
r_static
r_int
id|__init
id|alsa_ac97_init
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_ac97_exit
r_static
r_void
id|__exit
id|alsa_ac97_exit
c_func
(paren
r_void
)paren
(brace
)brace
id|module_init
c_func
(paren
id|alsa_ac97_init
)paren
id|module_exit
c_func
(paren
id|alsa_ac97_exit
)paren
eof
