multiline_comment|/*&n; *   ALSA driver for ICEnsemble ICE1712 (Envy24)&n; *&n; *&t;Copyright (c) 2000 Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
multiline_comment|/*&n;  NOTES:&n;  - spdif nonaudio consumer mode does not work (at least with my&n;    Sony STR-DB830)&n;*/
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/ac97_codec.h&gt;
macro_line|#include &lt;sound/mpu401.h&gt;
macro_line|#include &lt;sound/i2c.h&gt;
macro_line|#include &lt;sound/cs8427.h&gt;
macro_line|#include &lt;sound/info.h&gt;
DECL|macro|SNDRV_GET_ID
mdefine_line|#define SNDRV_GET_ID
macro_line|#include &lt;sound/initval.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
DECL|macro|SND_CS8403
mdefine_line|#define SND_CS8403
DECL|macro|SND_CS8404
mdefine_line|#define SND_CS8404
macro_line|#include &lt;sound/cs8403.h&gt;
id|EXPORT_NO_SYMBOLS
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;ICEnsemble ICE1712 (Envy24)&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_CLASSES
c_func
(paren
l_string|&quot;{sound}&quot;
)paren
suffix:semicolon
id|MODULE_DEVICES
c_func
(paren
l_string|&quot;{{Hoontech SoundTrack DSP 24},&quot;
l_string|&quot;{MidiMan M Audio,Delta 1010},&quot;
l_string|&quot;{MidiMan M Audio,Delta DiO 2496},&quot;
l_string|&quot;{MidiMan M Audio,Delta 66},&quot;
l_string|&quot;{MidiMan M Audio,Delta 44},&quot;
l_string|&quot;{MidiMan M Audio,Audiophile 24/96},&quot;
l_string|&quot;{TerraTec,EWX 24/96},&quot;
l_string|&quot;{TerraTec,EWS 88MT},&quot;
l_string|&quot;{TerraTec,EWS 88D},&quot;
l_string|&quot;{ICEnsemble,Generic ICE1712},&quot;
l_string|&quot;{ICEnsemble,Generic Envy24}}&quot;
)paren
suffix:semicolon
DECL|variable|snd_index
r_static
r_int
id|snd_index
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_IDX
suffix:semicolon
multiline_comment|/* Index 0-MAX */
DECL|variable|snd_id
r_static
r_char
op_star
id|snd_id
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_STR
suffix:semicolon
multiline_comment|/* ID for this card */
DECL|variable|snd_enable
r_static
r_int
id|snd_enable
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_ENABLE_PNP
suffix:semicolon
multiline_comment|/* Enable this card */
DECL|variable|snd_omni
r_static
r_int
id|snd_omni
(braket
id|SNDRV_CARDS
)braket
op_assign
(brace
(braket
l_int|0
dot
dot
dot
(paren
id|SNDRV_CARDS
op_minus
l_int|1
)paren
)braket
op_assign
l_int|0
)brace
suffix:semicolon
multiline_comment|/* Delta44 &amp; 66 Omni I/O support */
id|MODULE_PARM
c_func
(paren
id|snd_index
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_index
comma
l_string|&quot;Index value for ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_index
comma
id|SNDRV_INDEX_DESC
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_id
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;s&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_id
comma
l_string|&quot;ID string for ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_id
comma
id|SNDRV_ID_DESC
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_enable
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_enable
comma
l_string|&quot;Enable ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_enable
comma
id|SNDRV_ENABLE_DESC
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_omni
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_omni
comma
l_string|&quot;Enable Midiman M-Audio Delta Omni I/O support.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_omni
comma
id|SNDRV_ENABLE_DESC
)paren
suffix:semicolon
macro_line|#ifndef PCI_VENDOR_ID_ICE
DECL|macro|PCI_VENDOR_ID_ICE
mdefine_line|#define PCI_VENDOR_ID_ICE&t;&t;0x1412
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_ICE_1712
DECL|macro|PCI_DEVICE_ID_ICE_1712
mdefine_line|#define PCI_DEVICE_ID_ICE_1712&t;&t;0x1712
macro_line|#endif
DECL|macro|ICE1712_SUBDEVICE_STDSP24
mdefine_line|#define ICE1712_SUBDEVICE_STDSP24&t;0x12141217&t;/* Hoontech SoundTrack Audio DSP 24 */
DECL|macro|ICE1712_SUBDEVICE_DELTA1010
mdefine_line|#define ICE1712_SUBDEVICE_DELTA1010&t;0x121430d6
DECL|macro|ICE1712_SUBDEVICE_DELTADIO2496
mdefine_line|#define ICE1712_SUBDEVICE_DELTADIO2496&t;0x121431d6
DECL|macro|ICE1712_SUBDEVICE_DELTA66
mdefine_line|#define ICE1712_SUBDEVICE_DELTA66&t;0x121432d6
DECL|macro|ICE1712_SUBDEVICE_DELTA44
mdefine_line|#define ICE1712_SUBDEVICE_DELTA44&t;0x121433d6
DECL|macro|ICE1712_SUBDEVICE_AUDIOPHILE
mdefine_line|#define ICE1712_SUBDEVICE_AUDIOPHILE&t;0x121434d6
DECL|macro|ICE1712_SUBDEVICE_EWX2496
mdefine_line|#define ICE1712_SUBDEVICE_EWX2496&t;0x3b153011
DECL|macro|ICE1712_SUBDEVICE_EWS88MT
mdefine_line|#define ICE1712_SUBDEVICE_EWS88MT&t;0x3b151511
DECL|macro|ICE1712_SUBDEVICE_EWS88D
mdefine_line|#define ICE1712_SUBDEVICE_EWS88D&t;0x3b152b11
DECL|macro|ICE1712_SUBDEVICE_DMX6FIRE
mdefine_line|#define ICE1712_SUBDEVICE_DMX6FIRE&t;0x3b153811
multiline_comment|/*&n; *  Direct registers&n; */
DECL|macro|ICEREG
mdefine_line|#define ICEREG(ice, x) ((ice)-&gt;port + ICE1712_REG_##x)
DECL|macro|ICE1712_REG_CONTROL
mdefine_line|#define ICE1712_REG_CONTROL&t;&t;0x00&t;/* byte */
DECL|macro|ICE1712_RESET
mdefine_line|#define   ICE1712_RESET&t;&t;&t;0x80&t;/* reset whole chip */
DECL|macro|ICE1712_SERR_LEVEL
mdefine_line|#define   ICE1712_SERR_LEVEL&t;&t;0x04&t;/* SERR# level otherwise edge */
DECL|macro|ICE1712_NATIVE
mdefine_line|#define   ICE1712_NATIVE&t;&t;0x01&t;/* native mode otherwise SB */
DECL|macro|ICE1712_REG_IRQMASK
mdefine_line|#define ICE1712_REG_IRQMASK&t;&t;0x01&t;/* byte */
DECL|macro|ICE1712_IRQ_MPU1
mdefine_line|#define   ICE1712_IRQ_MPU1&t;&t;0x80
DECL|macro|ICE1712_IRQ_TIMER
mdefine_line|#define   ICE1712_IRQ_TIMER&t;&t;0x40
DECL|macro|ICE1712_IRQ_MPU2
mdefine_line|#define   ICE1712_IRQ_MPU2&t;&t;0x20
DECL|macro|ICE1712_IRQ_PROPCM
mdefine_line|#define   ICE1712_IRQ_PROPCM&t;&t;0x10
DECL|macro|ICE1712_IRQ_FM
mdefine_line|#define   ICE1712_IRQ_FM&t;&t;0x08&t;/* FM/MIDI - legacy */
DECL|macro|ICE1712_IRQ_PBKDS
mdefine_line|#define   ICE1712_IRQ_PBKDS&t;&t;0x04&t;/* playback DS channels */
DECL|macro|ICE1712_IRQ_CONCAP
mdefine_line|#define   ICE1712_IRQ_CONCAP&t;&t;0x02&t;/* consumer capture */
DECL|macro|ICE1712_IRQ_CONPBK
mdefine_line|#define   ICE1712_IRQ_CONPBK&t;&t;0x01&t;/* consumer playback */
DECL|macro|ICE1712_REG_IRQSTAT
mdefine_line|#define ICE1712_REG_IRQSTAT&t;&t;0x02&t;/* byte */
multiline_comment|/* look to ICE1712_IRQ_* */
DECL|macro|ICE1712_REG_INDEX
mdefine_line|#define ICE1712_REG_INDEX&t;&t;0x03&t;/* byte - indirect CCIxx regs */
DECL|macro|ICE1712_REG_DATA
mdefine_line|#define ICE1712_REG_DATA&t;&t;0x04&t;/* byte - indirect CCIxx regs */
DECL|macro|ICE1712_REG_NMI_STAT1
mdefine_line|#define ICE1712_REG_NMI_STAT1&t;&t;0x05&t;/* byte */
DECL|macro|ICE1712_REG_NMI_DATA
mdefine_line|#define ICE1712_REG_NMI_DATA&t;&t;0x06&t;/* byte */
DECL|macro|ICE1712_REG_NMI_INDEX
mdefine_line|#define ICE1712_REG_NMI_INDEX&t;&t;0x07&t;/* byte */
DECL|macro|ICE1712_REG_AC97_INDEX
mdefine_line|#define ICE1712_REG_AC97_INDEX&t;&t;0x08&t;/* byte */
DECL|macro|ICE1712_REG_AC97_CMD
mdefine_line|#define ICE1712_REG_AC97_CMD&t;&t;0x09&t;/* byte */
DECL|macro|ICE1712_AC97_COLD
mdefine_line|#define   ICE1712_AC97_COLD&t;&t;0x80&t;/* cold reset */
DECL|macro|ICE1712_AC97_WARM
mdefine_line|#define   ICE1712_AC97_WARM&t;&t;0x40&t;/* warm reset */
DECL|macro|ICE1712_AC97_WRITE
mdefine_line|#define   ICE1712_AC97_WRITE&t;&t;0x20&t;/* W: write, R: write in progress */
DECL|macro|ICE1712_AC97_READ
mdefine_line|#define   ICE1712_AC97_READ&t;&t;0x10&t;/* W: read, R: read in progress */
DECL|macro|ICE1712_AC97_READY
mdefine_line|#define   ICE1712_AC97_READY&t;&t;0x08&t;/* codec ready status bit */
DECL|macro|ICE1712_AC97_PBK_VSR
mdefine_line|#define   ICE1712_AC97_PBK_VSR&t;&t;0x02&t;/* playback VSR */
DECL|macro|ICE1712_AC97_CAP_VSR
mdefine_line|#define   ICE1712_AC97_CAP_VSR&t;&t;0x01&t;/* capture VSR */
DECL|macro|ICE1712_REG_AC97_DATA
mdefine_line|#define ICE1712_REG_AC97_DATA&t;&t;0x0a&t;/* word (little endian) */
DECL|macro|ICE1712_REG_MPU1_CTRL
mdefine_line|#define ICE1712_REG_MPU1_CTRL&t;&t;0x0c&t;/* byte */
DECL|macro|ICE1712_REG_MPU1_DATA
mdefine_line|#define ICE1712_REG_MPU1_DATA&t;&t;0x0d&t;/* byte */
DECL|macro|ICE1712_REG_I2C_DEV_ADDR
mdefine_line|#define ICE1712_REG_I2C_DEV_ADDR&t;0x10&t;/* byte */
DECL|macro|ICE1712_I2C_WRITE
mdefine_line|#define   ICE1712_I2C_WRITE&t;&t;0x01&t;/* write direction */
DECL|macro|ICE1712_REG_I2C_BYTE_ADDR
mdefine_line|#define ICE1712_REG_I2C_BYTE_ADDR&t;0x11&t;/* byte */
DECL|macro|ICE1712_REG_I2C_DATA
mdefine_line|#define ICE1712_REG_I2C_DATA&t;&t;0x12&t;/* byte */
DECL|macro|ICE1712_REG_I2C_CTRL
mdefine_line|#define ICE1712_REG_I2C_CTRL&t;&t;0x13&t;/* byte */
DECL|macro|ICE1712_I2C_EEPROM
mdefine_line|#define   ICE1712_I2C_EEPROM&t;&t;0x80&t;/* EEPROM exists */
DECL|macro|ICE1712_I2C_BUSY
mdefine_line|#define   ICE1712_I2C_BUSY&t;&t;0x01&t;/* busy bit */
DECL|macro|ICE1712_REG_CONCAP_ADDR
mdefine_line|#define ICE1712_REG_CONCAP_ADDR&t;&t;0x14&t;/* dword - consumer capture */
DECL|macro|ICE1712_REG_CONCAP_COUNT
mdefine_line|#define ICE1712_REG_CONCAP_COUNT&t;0x18&t;/* word - current/base count */
DECL|macro|ICE1712_REG_SERR_SHADOW
mdefine_line|#define ICE1712_REG_SERR_SHADOW&t;&t;0x1b&t;/* byte */
DECL|macro|ICE1712_REG_MPU2_CTRL
mdefine_line|#define ICE1712_REG_MPU2_CTRL&t;&t;0x1c&t;/* byte */
DECL|macro|ICE1712_REG_MPU2_DATA
mdefine_line|#define ICE1712_REG_MPU2_DATA&t;&t;0x1d&t;/* byte */
DECL|macro|ICE1712_REG_TIMER
mdefine_line|#define ICE1712_REG_TIMER&t;&t;0x1e&t;/* word */
multiline_comment|/*&n; *  Indirect registers&n; */
DECL|macro|ICE1712_IREG_PBK_COUNT_HI
mdefine_line|#define ICE1712_IREG_PBK_COUNT_HI&t;0x00
DECL|macro|ICE1712_IREG_PBK_COUNT_LO
mdefine_line|#define ICE1712_IREG_PBK_COUNT_LO&t;0x01
DECL|macro|ICE1712_IREG_PBK_CTRL
mdefine_line|#define ICE1712_IREG_PBK_CTRL&t;&t;0x02
DECL|macro|ICE1712_IREG_PBK_LEFT
mdefine_line|#define ICE1712_IREG_PBK_LEFT&t;&t;0x03&t;/* left volume */
DECL|macro|ICE1712_IREG_PBK_RIGHT
mdefine_line|#define ICE1712_IREG_PBK_RIGHT&t;&t;0x04&t;/* right volume */
DECL|macro|ICE1712_IREG_PBK_SOFT
mdefine_line|#define ICE1712_IREG_PBK_SOFT&t;&t;0x05&t;/* soft volume */
DECL|macro|ICE1712_IREG_PBK_RATE_LO
mdefine_line|#define ICE1712_IREG_PBK_RATE_LO&t;0x06
DECL|macro|ICE1712_IREG_PBK_RATE_MID
mdefine_line|#define ICE1712_IREG_PBK_RATE_MID&t;0x07
DECL|macro|ICE1712_IREG_PBK_RATE_HI
mdefine_line|#define ICE1712_IREG_PBK_RATE_HI&t;0x08
DECL|macro|ICE1712_IREG_CAP_COUNT_HI
mdefine_line|#define ICE1712_IREG_CAP_COUNT_HI&t;0x10
DECL|macro|ICE1712_IREG_CAP_COUNT_LO
mdefine_line|#define ICE1712_IREG_CAP_COUNT_LO&t;0x11
DECL|macro|ICE1712_IREG_CAP_CTRL
mdefine_line|#define ICE1712_IREG_CAP_CTRL&t;&t;0x12
DECL|macro|ICE1712_IREG_GPIO_DATA
mdefine_line|#define ICE1712_IREG_GPIO_DATA&t;&t;0x20
DECL|macro|ICE1712_IREG_GPIO_WRITE_MASK
mdefine_line|#define ICE1712_IREG_GPIO_WRITE_MASK&t;0x21
DECL|macro|ICE1712_IREG_GPIO_DIRECTION
mdefine_line|#define ICE1712_IREG_GPIO_DIRECTION&t;0x22
DECL|macro|ICE1712_IREG_CONSUMER_POWERDOWN
mdefine_line|#define ICE1712_IREG_CONSUMER_POWERDOWN&t;0x30
DECL|macro|ICE1712_IREG_PRO_POWERDOWN
mdefine_line|#define ICE1712_IREG_PRO_POWERDOWN&t;0x31
multiline_comment|/*&n; *  Consumer section direct DMA registers&n; */
DECL|macro|ICEDS
mdefine_line|#define ICEDS(ice, x) ((ice)-&gt;dmapath_port + ICE1712_DS_##x)
DECL|macro|ICE1712_DS_INTMASK
mdefine_line|#define ICE1712_DS_INTMASK&t;&t;0x00&t;/* word - interrupt mask */
DECL|macro|ICE1712_DS_INTSTAT
mdefine_line|#define ICE1712_DS_INTSTAT&t;&t;0x02&t;/* word - interrupt status */
DECL|macro|ICE1712_DS_DATA
mdefine_line|#define ICE1712_DS_DATA&t;&t;&t;0x04&t;/* dword - channel data */
DECL|macro|ICE1712_DS_INDEX
mdefine_line|#define ICE1712_DS_INDEX&t;&t;0x08&t;/* dword - channel index */
multiline_comment|/*&n; *  Consumer section channel registers&n; */
DECL|macro|ICE1712_DSC_ADDR0
mdefine_line|#define ICE1712_DSC_ADDR0&t;&t;0x00&t;/* dword - base address 0 */
DECL|macro|ICE1712_DSC_COUNT0
mdefine_line|#define ICE1712_DSC_COUNT0&t;&t;0x01&t;/* word - count 0 */
DECL|macro|ICE1712_DSC_ADDR1
mdefine_line|#define ICE1712_DSC_ADDR1&t;&t;0x02&t;/* dword - base address 1 */
DECL|macro|ICE1712_DSC_COUNT1
mdefine_line|#define ICE1712_DSC_COUNT1&t;&t;0x03&t;/* word - count 1 */
DECL|macro|ICE1712_DSC_CONTROL
mdefine_line|#define ICE1712_DSC_CONTROL&t;&t;0x04&t;/* byte - control &amp; status */
DECL|macro|ICE1712_BUFFER1
mdefine_line|#define   ICE1712_BUFFER1&t;&t;0x80&t;/* buffer1 is active */
DECL|macro|ICE1712_BUFFER1_AUTO
mdefine_line|#define   ICE1712_BUFFER1_AUTO&t;&t;0x40&t;/* buffer1 auto init */
DECL|macro|ICE1712_BUFFER0_AUTO
mdefine_line|#define   ICE1712_BUFFER0_AUTO&t;&t;0x20&t;/* buffer0 auto init */
DECL|macro|ICE1712_FLUSH
mdefine_line|#define   ICE1712_FLUSH&t;&t;&t;0x10&t;/* flush FIFO */
DECL|macro|ICE1712_STEREO
mdefine_line|#define   ICE1712_STEREO&t;&t;0x08&t;/* stereo */
DECL|macro|ICE1712_16BIT
mdefine_line|#define   ICE1712_16BIT&t;&t;&t;0x04&t;/* 16-bit data */
DECL|macro|ICE1712_PAUSE
mdefine_line|#define   ICE1712_PAUSE&t;&t;&t;0x02&t;/* pause */
DECL|macro|ICE1712_START
mdefine_line|#define   ICE1712_START&t;&t;&t;0x01&t;/* start */
DECL|macro|ICE1712_DSC_RATE
mdefine_line|#define ICE1712_DSC_RATE&t;&t;0x05&t;/* dword - rate */
DECL|macro|ICE1712_DSC_VOLUME
mdefine_line|#define ICE1712_DSC_VOLUME&t;&t;0x06&t;/* word - volume control */
multiline_comment|/* &n; *  Professional multi-track direct control registers&n; */
DECL|macro|ICEMT
mdefine_line|#define ICEMT(ice, x) ((ice)-&gt;profi_port + ICE1712_MT_##x)
DECL|macro|ICE1712_MT_IRQ
mdefine_line|#define ICE1712_MT_IRQ&t;&t;&t;0x00&t;/* byte - interrupt mask */
DECL|macro|ICE1712_MULTI_CAPTURE
mdefine_line|#define   ICE1712_MULTI_CAPTURE&t;&t;0x80&t;/* capture IRQ */
DECL|macro|ICE1712_MULTI_PLAYBACK
mdefine_line|#define   ICE1712_MULTI_PLAYBACK&t;0x40&t;/* playback IRQ */
DECL|macro|ICE1712_MULTI_CAPSTATUS
mdefine_line|#define   ICE1712_MULTI_CAPSTATUS&t;0x02&t;/* capture IRQ status */
DECL|macro|ICE1712_MULTI_PBKSTATUS
mdefine_line|#define   ICE1712_MULTI_PBKSTATUS&t;0x01&t;/* playback IRQ status */
DECL|macro|ICE1712_MT_RATE
mdefine_line|#define ICE1712_MT_RATE&t;&t;&t;0x01&t;/* byte - sampling rate select */
DECL|macro|ICE1712_SPDIF_MASTER
mdefine_line|#define   ICE1712_SPDIF_MASTER&t;&t;0x10&t;/* S/PDIF input is master clock */
DECL|macro|ICE1712_MT_I2S_FORMAT
mdefine_line|#define ICE1712_MT_I2S_FORMAT&t;&t;0x02&t;/* byte - I2S data format */
DECL|macro|ICE1712_MT_AC97_INDEX
mdefine_line|#define ICE1712_MT_AC97_INDEX&t;&t;0x04&t;/* byte - AC&squot;97 index */
DECL|macro|ICE1712_MT_AC97_CMD
mdefine_line|#define ICE1712_MT_AC97_CMD&t;&t;0x05&t;/* byte - AC&squot;97 command &amp; status */
multiline_comment|/* look to ICE1712_AC97_* */
DECL|macro|ICE1712_MT_AC97_DATA
mdefine_line|#define ICE1712_MT_AC97_DATA&t;&t;0x06&t;/* word - AC&squot;97 data */
DECL|macro|ICE1712_MT_PLAYBACK_ADDR
mdefine_line|#define ICE1712_MT_PLAYBACK_ADDR&t;0x10&t;/* dword - playback address */
DECL|macro|ICE1712_MT_PLAYBACK_SIZE
mdefine_line|#define ICE1712_MT_PLAYBACK_SIZE&t;0x14&t;/* word - playback size */
DECL|macro|ICE1712_MT_PLAYBACK_COUNT
mdefine_line|#define ICE1712_MT_PLAYBACK_COUNT&t;0x16&t;/* word - playback count */
DECL|macro|ICE1712_MT_PLAYBACK_CONTROL
mdefine_line|#define ICE1712_MT_PLAYBACK_CONTROL&t;0x18&t;/* byte - control */
DECL|macro|ICE1712_CAPTURE_START_SHADOW
mdefine_line|#define   ICE1712_CAPTURE_START_SHADOW&t;0x04&t;/* capture start */
DECL|macro|ICE1712_PLAYBACK_PAUSE
mdefine_line|#define   ICE1712_PLAYBACK_PAUSE&t;0x02&t;/* playback pause */
DECL|macro|ICE1712_PLAYBACK_START
mdefine_line|#define   ICE1712_PLAYBACK_START&t;0x01&t;/* playback start */
DECL|macro|ICE1712_MT_CAPTURE_ADDR
mdefine_line|#define ICE1712_MT_CAPTURE_ADDR&t;&t;0x20&t;/* dword - capture address */
DECL|macro|ICE1712_MT_CAPTURE_SIZE
mdefine_line|#define ICE1712_MT_CAPTURE_SIZE&t;&t;0x24&t;/* word - capture size */
DECL|macro|ICE1712_MT_CAPTURE_COUNT
mdefine_line|#define ICE1712_MT_CAPTURE_COUNT&t;0x26&t;/* word - capture count */
DECL|macro|ICE1712_MT_CAPTURE_CONTROL
mdefine_line|#define ICE1712_MT_CAPTURE_CONTROL&t;0x28&t;/* byte - control */
DECL|macro|ICE1712_CAPTURE_START
mdefine_line|#define   ICE1712_CAPTURE_START&t;&t;0x01&t;/* capture start */
DECL|macro|ICE1712_MT_ROUTE_PSDOUT03
mdefine_line|#define ICE1712_MT_ROUTE_PSDOUT03&t;0x30&t;/* word */
DECL|macro|ICE1712_MT_ROUTE_SPDOUT
mdefine_line|#define ICE1712_MT_ROUTE_SPDOUT&t;&t;0x32&t;/* word */
DECL|macro|ICE1712_MT_ROUTE_CAPTURE
mdefine_line|#define ICE1712_MT_ROUTE_CAPTURE&t;0x34&t;/* dword */
DECL|macro|ICE1712_MT_MONITOR_VOLUME
mdefine_line|#define ICE1712_MT_MONITOR_VOLUME&t;0x38&t;/* word */
DECL|macro|ICE1712_MT_MONITOR_INDEX
mdefine_line|#define ICE1712_MT_MONITOR_INDEX&t;0x3a&t;/* byte */
DECL|macro|ICE1712_MT_MONITOR_RATE
mdefine_line|#define ICE1712_MT_MONITOR_RATE&t;&t;0x3b&t;/* byte */
DECL|macro|ICE1712_MT_MONITOR_ROUTECTRL
mdefine_line|#define ICE1712_MT_MONITOR_ROUTECTRL&t;0x3c&t;/* byte */
DECL|macro|ICE1712_ROUTE_AC97
mdefine_line|#define   ICE1712_ROUTE_AC97&t;&t;0x01&t;/* route digital mixer output to AC&squot;97 */
DECL|macro|ICE1712_MT_MONITOR_PEAKINDEX
mdefine_line|#define ICE1712_MT_MONITOR_PEAKINDEX&t;0x3e&t;/* byte */
DECL|macro|ICE1712_MT_MONITOR_PEAKDATA
mdefine_line|#define ICE1712_MT_MONITOR_PEAKDATA&t;0x3f&t;/* byte */
multiline_comment|/*&n; *  Codec configuration bits&n; */
multiline_comment|/* PCI[60] System Configuration */
DECL|macro|ICE1712_CFG_CLOCK
mdefine_line|#define ICE1712_CFG_CLOCK&t;0xc0
DECL|macro|ICE1712_CFG_CLOCK512
mdefine_line|#define   ICE1712_CFG_CLOCK512&t;0x00&t;/* 22.5692Mhz, 44.1kHz*512 */
DECL|macro|ICE1712_CFG_CLOCK384
mdefine_line|#define   ICE1712_CFG_CLOCK384  0x40&t;/* 16.9344Mhz, 44.1kHz*384 */
DECL|macro|ICE1712_CFG_EXT
mdefine_line|#define   ICE1712_CFG_EXT&t;0x80&t;/* external clock */
DECL|macro|ICE1712_CFG_2xMPU401
mdefine_line|#define ICE1712_CFG_2xMPU401&t;0x20&t;/* two MPU401 UARTs */
DECL|macro|ICE1712_CFG_NO_CON_AC97
mdefine_line|#define ICE1712_CFG_NO_CON_AC97 0x10&t;/* consumer AC&squot;97 codec is not present */
DECL|macro|ICE1712_CFG_ADC_MASK
mdefine_line|#define ICE1712_CFG_ADC_MASK&t;0x0c&t;/* one, two, three, four stereo ADCs */
DECL|macro|ICE1712_CFG_DAC_MASK
mdefine_line|#define ICE1712_CFG_DAC_MASK&t;0x03&t;/* one, two, three, four stereo DACs */
multiline_comment|/* PCI[61] AC-Link Configuration */
DECL|macro|ICE1712_CFG_PRO_I2S
mdefine_line|#define ICE1712_CFG_PRO_I2S&t;0x80&t;/* multitrack converter: I2S or AC&squot;97 */
DECL|macro|ICE1712_CFG_AC97_PACKED
mdefine_line|#define ICE1712_CFG_AC97_PACKED&t;0x01&t;/* split or packed mode - AC&squot;97 */
multiline_comment|/* PCI[62] I2S Features */
DECL|macro|ICE1712_CFG_I2S_VOLUME
mdefine_line|#define ICE1712_CFG_I2S_VOLUME&t;0x80&t;/* volume/mute capability */
DECL|macro|ICE1712_CFG_I2S_96KHZ
mdefine_line|#define ICE1712_CFG_I2S_96KHZ&t;0x40&t;/* supports 96kHz sampling */
DECL|macro|ICE1712_CFG_I2S_RESMASK
mdefine_line|#define ICE1712_CFG_I2S_RESMASK&t;0x30&t;/* resolution mask, 16,18,20,24-bit */
DECL|macro|ICE1712_CFG_I2S_OTHER
mdefine_line|#define ICE1712_CFG_I2S_OTHER&t;0x0f&t;/* other I2S IDs */
multiline_comment|/* PCI[63] S/PDIF Configuration */
DECL|macro|ICE1712_CFG_I2S_CHIPID
mdefine_line|#define ICE1712_CFG_I2S_CHIPID&t;0xfc&t;/* I2S chip ID */
DECL|macro|ICE1712_CFG_SPDIF_IN
mdefine_line|#define ICE1712_CFG_SPDIF_IN&t;0x02&t;/* S/PDIF input is present */
DECL|macro|ICE1712_CFG_SPDIF_OUT
mdefine_line|#define ICE1712_CFG_SPDIF_OUT&t;0x01&t;/* S/PDIF output is present */
multiline_comment|/*&n; *  MidiMan M-Audio Delta GPIO definitions&n; */
multiline_comment|/* MidiMan M-Audio Delta1010 */
DECL|macro|ICE1712_DELTA_DFS
mdefine_line|#define ICE1712_DELTA_DFS 0x01&t;&t;/* fast/slow sample rate mode */
multiline_comment|/* (&gt;48kHz must be 1) */
DECL|macro|ICE1712_DELTA_SPDIF_IN_STAT
mdefine_line|#define ICE1712_DELTA_SPDIF_IN_STAT 0x02
multiline_comment|/* S/PDIF input status */
multiline_comment|/* 0 = valid signal is present */
multiline_comment|/* all except Delta44 */
multiline_comment|/* look to CS8414 datasheet */
DECL|macro|ICE1712_DELTA_SPDIF_OUT_STAT_CLOCK
mdefine_line|#define ICE1712_DELTA_SPDIF_OUT_STAT_CLOCK 0x04
multiline_comment|/* S/PDIF output status clock */
multiline_comment|/* (writting on rising edge - 0-&gt;1) */
multiline_comment|/* all except Delta44 */
multiline_comment|/* look to CS8404A datasheet */
DECL|macro|ICE1712_DELTA_SPDIF_OUT_STAT_DATA
mdefine_line|#define ICE1712_DELTA_SPDIF_OUT_STAT_DATA 0x08
multiline_comment|/* S/PDIF output status data */
multiline_comment|/* all except Delta44 */
multiline_comment|/* look to CS8404A datasheet */
multiline_comment|/* MidiMan M-Audio DeltaDiO */
multiline_comment|/* 0x01 = DFS */
multiline_comment|/* 0x02 = SPDIF_IN_STAT */
multiline_comment|/* 0x04 = SPDIF_OUT_STAT_CLOCK */
multiline_comment|/* 0x08 = SPDIF_OUT_STAT_DATA */
DECL|macro|ICE1712_DELTA_SPDIF_INPUT_SELECT
mdefine_line|#define ICE1712_DELTA_SPDIF_INPUT_SELECT 0x10
multiline_comment|/* coaxial (0), optical (1) */
multiline_comment|/* S/PDIF input select*/
multiline_comment|/* MidiMan M-Audio Delta1010 */
multiline_comment|/* 0x01 = DFS */
multiline_comment|/* 0x02 = SPDIF_IN_STAT */
multiline_comment|/* 0x04 = SPDIF_OUT_STAT_CLOCK */
multiline_comment|/* 0x08 = SPDIF_OUT_STAT_DATA */
DECL|macro|ICE1712_DELTA_WORD_CLOCK_SELECT
mdefine_line|#define ICE1712_DELTA_WORD_CLOCK_SELECT 0x10
multiline_comment|/* 1 - clock are taken from S/PDIF input */
multiline_comment|/* 0 - clock are taken from Word Clock input */
multiline_comment|/* affected SPMCLKIN pin of Envy24 */
DECL|macro|ICE1712_DELTA_WORD_CLOCK_STATUS
mdefine_line|#define ICE1712_DELTA_WORD_CLOCK_STATUS&t;0x20
multiline_comment|/* 0 = valid word clock signal is present */
multiline_comment|/* MidiMan M-Audio Delta66 */
multiline_comment|/* 0x01 = DFS */
multiline_comment|/* 0x02 = SPDIF_IN_STAT */
multiline_comment|/* 0x04 = SPDIF_OUT_STAT_CLOCK */
multiline_comment|/* 0x08 = SPDIF_OUT_STAT_DATA */
DECL|macro|ICE1712_DELTA_CODEC_SERIAL_DATA
mdefine_line|#define ICE1712_DELTA_CODEC_SERIAL_DATA 0x10
multiline_comment|/* AKM4524 serial data */
DECL|macro|ICE1712_DELTA_CODEC_SERIAL_CLOCK
mdefine_line|#define ICE1712_DELTA_CODEC_SERIAL_CLOCK 0x20
multiline_comment|/* AKM4524 serial clock */
multiline_comment|/* (writting on rising edge - 0-&gt;1 */
DECL|macro|ICE1712_DELTA_CODEC_CHIP_A
mdefine_line|#define ICE1712_DELTA_CODEC_CHIP_A&t;0x40
DECL|macro|ICE1712_DELTA_CODEC_CHIP_B
mdefine_line|#define ICE1712_DELTA_CODEC_CHIP_B&t;0x80
multiline_comment|/* 1 - select chip A or B */
multiline_comment|/* MidiMan M-Audio Delta44 */
multiline_comment|/* 0x01 = DFS */
multiline_comment|/* 0x10 = CODEC_SERIAL_DATA */
multiline_comment|/* 0x20 = CODEC_SERIAL_CLOCK */
multiline_comment|/* 0x40 = CODEC_CHIP_A */
multiline_comment|/* 0x80 = CODEC_CHIP_B */
multiline_comment|/* MidiMan M-Audio Audiophile definitions */
multiline_comment|/* 0x01 = DFS */
DECL|macro|ICE1712_DELTA_AP_CCLK
mdefine_line|#define ICE1712_DELTA_AP_CCLK&t;0x02&t;/* SPI clock */
multiline_comment|/* (clocking on rising edge - 0-&gt;1) */
DECL|macro|ICE1712_DELTA_AP_DIN
mdefine_line|#define ICE1712_DELTA_AP_DIN&t;0x04&t;/* data input */
DECL|macro|ICE1712_DELTA_AP_DOUT
mdefine_line|#define ICE1712_DELTA_AP_DOUT&t;0x08&t;/* data output */
DECL|macro|ICE1712_DELTA_AP_CS_DIGITAL
mdefine_line|#define ICE1712_DELTA_AP_CS_DIGITAL 0x10 /* CS8427 chip select */
multiline_comment|/* low signal = select */
DECL|macro|ICE1712_DELTA_AP_CS_CODEC
mdefine_line|#define ICE1712_DELTA_AP_CS_CODEC 0x20&t;/* AK4528 chip select */
multiline_comment|/* low signal = select */
multiline_comment|/* Hoontech SoundTrack Audio DSP 24 GPIO definitions */
DECL|macro|ICE1712_STDSP24_0_BOX
mdefine_line|#define ICE1712_STDSP24_0_BOX(r, x)&t;r[0] = ((r[0] &amp; ~3) | ((x)&amp;3))
DECL|macro|ICE1712_STDSP24_0_DAREAR
mdefine_line|#define ICE1712_STDSP24_0_DAREAR(r, x)&t;r[0] = ((r[0] &amp; ~4) | (((x)&amp;1)&lt;&lt;2))
DECL|macro|ICE1712_STDSP24_1_CHN1
mdefine_line|#define ICE1712_STDSP24_1_CHN1(r, x)&t;r[1] = ((r[1] &amp; ~1) | ((x)&amp;1))
DECL|macro|ICE1712_STDSP24_1_CHN2
mdefine_line|#define ICE1712_STDSP24_1_CHN2(r, x)&t;r[1] = ((r[1] &amp; ~2) | (((x)&amp;1)&lt;&lt;1))
DECL|macro|ICE1712_STDSP24_1_CHN3
mdefine_line|#define ICE1712_STDSP24_1_CHN3(r, x)&t;r[1] = ((r[1] &amp; ~4) | (((x)&amp;1)&lt;&lt;2))
DECL|macro|ICE1712_STDSP24_2_CHN4
mdefine_line|#define ICE1712_STDSP24_2_CHN4(r, x)&t;r[2] = ((r[2] &amp; ~1) | ((x)&amp;1))
DECL|macro|ICE1712_STDSP24_2_MIDIIN
mdefine_line|#define ICE1712_STDSP24_2_MIDIIN(r, x)&t;r[2] = ((r[2] &amp; ~2) | (((x)&amp;1)&lt;&lt;1))
DECL|macro|ICE1712_STDSP24_2_MIDI1
mdefine_line|#define ICE1712_STDSP24_2_MIDI1(r, x)&t;r[2] = ((r[2] &amp; ~4) | (((x)&amp;1)&lt;&lt;2))
DECL|macro|ICE1712_STDSP24_3_MIDI2
mdefine_line|#define ICE1712_STDSP24_3_MIDI2(r, x)&t;r[3] = ((r[3] &amp; ~1) | ((x)&amp;1))
DECL|macro|ICE1712_STDSP24_3_MUTE
mdefine_line|#define ICE1712_STDSP24_3_MUTE(r, x)&t;r[3] = ((r[3] &amp; ~2) | (((x)&amp;1)&lt;&lt;1))
DECL|macro|ICE1712_STDSP24_3_INSEL
mdefine_line|#define ICE1712_STDSP24_3_INSEL(r, x)&t;r[3] = ((r[3] &amp; ~4) | (((x)&amp;1)&lt;&lt;2))
DECL|macro|ICE1712_STDSP24_SET_ADDR
mdefine_line|#define ICE1712_STDSP24_SET_ADDR(r, a)&t;r[a&amp;3] = ((r[a&amp;3] &amp; ~0x18) | (((a)&amp;3)&lt;&lt;3))
DECL|macro|ICE1712_STDSP24_CLOCK
mdefine_line|#define ICE1712_STDSP24_CLOCK(r, a, c)&t;r[a&amp;3] = ((r[a&amp;3] &amp; ~0x20) | (((c)&amp;1)&lt;&lt;5))
DECL|macro|ICE1712_STDSP24_CLOCK_BIT
mdefine_line|#define ICE1712_STDSP24_CLOCK_BIT&t;(1&lt;&lt;5)
multiline_comment|/* Hoontech SoundTrack Audio DSP 24 box configuration definitions */
DECL|macro|ICE1712_STDSP24_DAREAR
mdefine_line|#define ICE1712_STDSP24_DAREAR&t;&t;(1&lt;&lt;0)
DECL|macro|ICE1712_STDSP24_MUTE
mdefine_line|#define ICE1712_STDSP24_MUTE&t;&t;(1&lt;&lt;1)
DECL|macro|ICE1712_STDSP24_INSEL
mdefine_line|#define ICE1712_STDSP24_INSEL&t;&t;(1&lt;&lt;2)
DECL|macro|ICE1712_STDSP24_BOX_CHN1
mdefine_line|#define ICE1712_STDSP24_BOX_CHN1&t;(1&lt;&lt;0)&t;/* input channel 1 */
DECL|macro|ICE1712_STDSP24_BOX_CHN2
mdefine_line|#define ICE1712_STDSP24_BOX_CHN2&t;(1&lt;&lt;1)&t;/* input channel 2 */
DECL|macro|ICE1712_STDSP24_BOX_CHN3
mdefine_line|#define ICE1712_STDSP24_BOX_CHN3&t;(1&lt;&lt;2)&t;/* input channel 3 */
DECL|macro|ICE1712_STDSP24_BOX_CHN4
mdefine_line|#define ICE1712_STDSP24_BOX_CHN4&t;(1&lt;&lt;3)&t;/* input channel 4 */
DECL|macro|ICE1712_STDSP24_BOX_MIDI1
mdefine_line|#define ICE1712_STDSP24_BOX_MIDI1&t;(1&lt;&lt;8)
DECL|macro|ICE1712_STDSP24_BOX_MIDI2
mdefine_line|#define ICE1712_STDSP24_BOX_MIDI2&t;(1&lt;&lt;9)
multiline_comment|/* TerraTec EWX 24/96 configuration definitions */
DECL|macro|ICE1712_EWX2496_AK4524_CS
mdefine_line|#define ICE1712_EWX2496_AK4524_CS&t;0x01&t;/* AK4524 chip select; low = active */
DECL|macro|ICE1712_EWX2496_AIN_SEL
mdefine_line|#define ICE1712_EWX2496_AIN_SEL&t;&t;0x02&t;/* input sensitivity switch; high = louder */
DECL|macro|ICE1712_EWX2496_AOUT_SEL
mdefine_line|#define ICE1712_EWX2496_AOUT_SEL&t;0x04&t;/* output sensitivity switch; high = louder */
DECL|macro|ICE1712_EWX2496_RW
mdefine_line|#define ICE1712_EWX2496_RW&t;&t;0x08&t;/* read/write switch for i2c; high = write  */
DECL|macro|ICE1712_EWX2496_SERIAL_DATA
mdefine_line|#define ICE1712_EWX2496_SERIAL_DATA&t;0x10&t;/* i2c &amp; ak4524 data */
DECL|macro|ICE1712_EWX2496_SERIAL_CLOCK
mdefine_line|#define ICE1712_EWX2496_SERIAL_CLOCK&t;0x20&t;/* i2c &amp; ak4524 clock */
DECL|macro|ICE1712_EWX2496_TX2
mdefine_line|#define ICE1712_EWX2496_TX2&t;&t;0x40&t;/* MIDI2 (not used) */
DECL|macro|ICE1712_EWX2496_RX2
mdefine_line|#define ICE1712_EWX2496_RX2&t;&t;0x80&t;/* MIDI2 (not used) */
multiline_comment|/* TerraTec EWS 88MT/D configuration definitions */
multiline_comment|/* RW, SDA snd SCLK are identical with EWX24/96 */
DECL|macro|ICE1712_EWS88_CS8414_RATE
mdefine_line|#define ICE1712_EWS88_CS8414_RATE&t;0x07&t;/* CS8414 sample rate: gpio 0-2 */
DECL|macro|ICE1712_EWS88_RW
mdefine_line|#define ICE1712_EWS88_RW&t;&t;0x08&t;/* read/write switch for i2c; high = write  */
DECL|macro|ICE1712_EWS88_SERIAL_DATA
mdefine_line|#define ICE1712_EWS88_SERIAL_DATA&t;0x10&t;/* i2c &amp; ak4524 data */
DECL|macro|ICE1712_EWS88_SERIAL_CLOCK
mdefine_line|#define ICE1712_EWS88_SERIAL_CLOCK&t;0x20&t;/* i2c &amp; ak4524 clock */
DECL|macro|ICE1712_EWS88_TX2
mdefine_line|#define ICE1712_EWS88_TX2&t;&t;0x40&t;/* MIDI2 (only on 88D) */
DECL|macro|ICE1712_EWS88_RX2
mdefine_line|#define ICE1712_EWS88_RX2&t;&t;0x80&t;/* MIDI2 (only on 88D) */
multiline_comment|/* i2c address */
DECL|macro|ICE1712_EWS88MT_CS8404_ADDR
mdefine_line|#define ICE1712_EWS88MT_CS8404_ADDR&t;(0x40&gt;&gt;1)
DECL|macro|ICE1712_EWS88MT_INPUT_ADDR
mdefine_line|#define ICE1712_EWS88MT_INPUT_ADDR&t;(0x46&gt;&gt;1)
DECL|macro|ICE1712_EWS88MT_OUTPUT_ADDR
mdefine_line|#define ICE1712_EWS88MT_OUTPUT_ADDR&t;(0x48&gt;&gt;1)
DECL|macro|ICE1712_EWS88MT_OUTPUT_SENSE
mdefine_line|#define ICE1712_EWS88MT_OUTPUT_SENSE&t;0x40&t;/* mask */
DECL|macro|ICE1712_EWS88D_PCF_ADDR
mdefine_line|#define ICE1712_EWS88D_PCF_ADDR&t;&t;(0x40&gt;&gt;1)
multiline_comment|/* TerraTec DMX 6Fire configuration definitions */
DECL|macro|ICE1712_6FIRE_AK4524_CS_MASK
mdefine_line|#define ICE1712_6FIRE_AK4524_CS_MASK&t;0x07&t;/* AK4524 chip select #1-#3 */
DECL|macro|ICE1712_6FIRE_RW
mdefine_line|#define ICE1712_6FIRE_RW&t;&t;0x08&t;/* read/write switch for i2c; high = write  */
DECL|macro|ICE1712_6FIRE_SERIAL_DATA
mdefine_line|#define ICE1712_6FIRE_SERIAL_DATA&t;0x10&t;/* i2c &amp; ak4524 data */
DECL|macro|ICE1712_6FIRE_SERIAL_CLOCK
mdefine_line|#define ICE1712_6FIRE_SERIAL_CLOCK&t;0x20&t;/* i2c &amp; ak4524 clock */
DECL|macro|ICE1712_6FIRE_TX2
mdefine_line|#define ICE1712_6FIRE_TX2&t;&t;0x40&t;/* MIDI2 */
DECL|macro|ICE1712_6FIRE_RX2
mdefine_line|#define ICE1712_6FIRE_RX2&t;&t;0x80&t;/* MIDI2 */
DECL|macro|ICE1712_6FIRE_CS8427_ADDR
mdefine_line|#define ICE1712_6FIRE_CS8427_ADDR&t;(0x22&gt;&gt;1) /* ?? */
multiline_comment|/*&n; * DMA mode values&n; * identical with DMA_XXX on i386 architecture.&n; */
DECL|macro|ICE1712_DMA_MODE_WRITE
mdefine_line|#define ICE1712_DMA_MODE_WRITE&t;&t;0x48
DECL|macro|ICE1712_DMA_AUTOINIT
mdefine_line|#define ICE1712_DMA_AUTOINIT&t;&t;0x10
multiline_comment|/*&n; *  &n; */
DECL|typedef|ice1712_t
r_typedef
r_struct
id|_snd_ice1712
id|ice1712_t
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|subvendor
r_int
r_int
id|subvendor
suffix:semicolon
multiline_comment|/* PCI[2c-2f] */
DECL|member|size
r_int
r_char
id|size
suffix:semicolon
multiline_comment|/* size of EEPROM image in bytes */
DECL|member|version
r_int
r_char
id|version
suffix:semicolon
multiline_comment|/* must be 1 */
DECL|member|codec
r_int
r_char
id|codec
suffix:semicolon
multiline_comment|/* codec configuration PCI[60] */
DECL|member|aclink
r_int
r_char
id|aclink
suffix:semicolon
multiline_comment|/* ACLink configuration PCI[61] */
DECL|member|i2sID
r_int
r_char
id|i2sID
suffix:semicolon
multiline_comment|/* PCI[62] */
DECL|member|spdif
r_int
r_char
id|spdif
suffix:semicolon
multiline_comment|/* S/PDIF configuration PCI[63] */
DECL|member|gpiomask
r_int
r_char
id|gpiomask
suffix:semicolon
multiline_comment|/* GPIO initial mask, 0 = write, 1 = don&squot;t */
DECL|member|gpiostate
r_int
r_char
id|gpiostate
suffix:semicolon
multiline_comment|/* GPIO initial state */
DECL|member|gpiodir
r_int
r_char
id|gpiodir
suffix:semicolon
multiline_comment|/* GPIO direction state */
DECL|member|ac97main
r_int
r_int
id|ac97main
suffix:semicolon
DECL|member|ac97pcm
r_int
r_int
id|ac97pcm
suffix:semicolon
DECL|member|ac97rec
r_int
r_int
id|ac97rec
suffix:semicolon
DECL|member|ac97recsrc
r_int
r_char
id|ac97recsrc
suffix:semicolon
DECL|member|dacID
r_int
r_char
id|dacID
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* I2S IDs for DACs */
DECL|member|adcID
r_int
r_char
id|adcID
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* I2S IDs for ADCs */
DECL|member|extra
r_int
r_char
id|extra
(braket
l_int|4
)braket
suffix:semicolon
DECL|typedef|ice1712_eeprom_t
)brace
id|ice1712_eeprom_t
suffix:semicolon
DECL|struct|_snd_ice1712
r_struct
id|_snd_ice1712
(brace
DECL|member|conp_dma_size
r_int
r_int
id|conp_dma_size
suffix:semicolon
DECL|member|conc_dma_size
r_int
r_int
id|conc_dma_size
suffix:semicolon
DECL|member|prop_dma_size
r_int
r_int
id|prop_dma_size
suffix:semicolon
DECL|member|proc_dma_size
r_int
r_int
id|proc_dma_size
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
DECL|member|res_port
r_struct
id|resource
op_star
id|res_port
suffix:semicolon
DECL|member|ddma_port
r_int
r_int
id|ddma_port
suffix:semicolon
DECL|member|res_ddma_port
r_struct
id|resource
op_star
id|res_ddma_port
suffix:semicolon
DECL|member|dmapath_port
r_int
r_int
id|dmapath_port
suffix:semicolon
DECL|member|res_dmapath_port
r_struct
id|resource
op_star
id|res_dmapath_port
suffix:semicolon
DECL|member|profi_port
r_int
r_int
id|profi_port
suffix:semicolon
DECL|member|res_profi_port
r_struct
id|resource
op_star
id|res_profi_port
suffix:semicolon
DECL|member|config
r_int
r_int
id|config
suffix:semicolon
multiline_comment|/* system configuration */
DECL|member|pci
r_struct
id|pci_dev
op_star
id|pci
suffix:semicolon
DECL|member|card
id|snd_card_t
op_star
id|card
suffix:semicolon
DECL|member|pcm
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
DECL|member|pcm_ds
id|snd_pcm_t
op_star
id|pcm_ds
suffix:semicolon
DECL|member|pcm_pro
id|snd_pcm_t
op_star
id|pcm_pro
suffix:semicolon
DECL|member|playback_con_substream
id|snd_pcm_substream_t
op_star
id|playback_con_substream
suffix:semicolon
DECL|member|playback_con_substream_ds
id|snd_pcm_substream_t
op_star
id|playback_con_substream_ds
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|capture_con_substream
id|snd_pcm_substream_t
op_star
id|capture_con_substream
suffix:semicolon
DECL|member|playback_pro_substream
id|snd_pcm_substream_t
op_star
id|playback_pro_substream
suffix:semicolon
DECL|member|capture_pro_substream
id|snd_pcm_substream_t
op_star
id|capture_pro_substream
suffix:semicolon
DECL|member|playback_pro_size
r_int
r_int
id|playback_pro_size
suffix:semicolon
DECL|member|capture_pro_size
r_int
r_int
id|capture_pro_size
suffix:semicolon
DECL|member|playback_con_virt_addr
r_int
r_int
id|playback_con_virt_addr
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|playback_con_active_buf
r_int
r_int
id|playback_con_active_buf
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|capture_con_virt_addr
r_int
r_int
id|capture_con_virt_addr
suffix:semicolon
DECL|member|ac97_ext_id
r_int
r_int
id|ac97_ext_id
suffix:semicolon
DECL|member|ac97
id|ac97_t
op_star
id|ac97
suffix:semicolon
DECL|member|rmidi
id|snd_rawmidi_t
op_star
id|rmidi
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|reg_lock
id|spinlock_t
id|reg_lock
suffix:semicolon
DECL|member|gpio_mutex
r_struct
id|semaphore
id|gpio_mutex
suffix:semicolon
DECL|member|proc_entry
id|snd_info_entry_t
op_star
id|proc_entry
suffix:semicolon
DECL|member|eeprom
id|ice1712_eeprom_t
id|eeprom
suffix:semicolon
DECL|member|pro_volumes
r_int
r_int
id|pro_volumes
(braket
l_int|20
)braket
suffix:semicolon
DECL|member|ak4528
r_int
id|ak4528
suffix:colon
l_int|1
comma
multiline_comment|/* AK4524 or AK4528 */
DECL|member|omni
id|omni
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* Delta Omni I/O */
DECL|member|num_adcs
r_int
id|num_adcs
suffix:semicolon
multiline_comment|/* AK4524 or AK4528 ADCs */
DECL|member|num_dacs
r_int
id|num_dacs
suffix:semicolon
multiline_comment|/* AK4524 or AK4528 DACs */
DECL|member|num_total_dacs
r_int
id|num_total_dacs
suffix:semicolon
multiline_comment|/* total DACs */
DECL|member|ak4524_images
r_int
r_char
id|ak4524_images
(braket
l_int|4
)braket
(braket
l_int|8
)braket
suffix:semicolon
DECL|member|ak4524_ipga_gain
r_int
r_char
id|ak4524_ipga_gain
(braket
l_int|4
)braket
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|hoontech_boxbits
r_int
r_char
id|hoontech_boxbits
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|hoontech_config
r_int
r_int
id|hoontech_config
suffix:semicolon
DECL|member|hoontech_boxconfig
r_int
r_int
id|hoontech_boxconfig
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|i2c
id|snd_i2c_bus_t
op_star
id|i2c
suffix:semicolon
multiline_comment|/* I2C bus */
DECL|member|cs8404
id|snd_i2c_device_t
op_star
id|cs8404
suffix:semicolon
multiline_comment|/* CS8404A I2C device */
DECL|member|cs8427
id|snd_i2c_device_t
op_star
id|cs8427
suffix:semicolon
multiline_comment|/* CS8427 I2C device */
DECL|member|pcf8574
id|snd_i2c_device_t
op_star
id|pcf8574
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* PCF8574 Output/Input (EWS88MT) */
DECL|member|pcf8575
id|snd_i2c_device_t
op_star
id|pcf8575
suffix:semicolon
multiline_comment|/* PCF8575 (EWS88D) */
DECL|member|cs8403_spdif_bits
r_int
r_char
id|cs8403_spdif_bits
suffix:semicolon
DECL|member|cs8403_spdif_stream_bits
r_int
r_char
id|cs8403_spdif_stream_bits
suffix:semicolon
DECL|member|spdif_stream_ctl
id|snd_kcontrol_t
op_star
id|spdif_stream_ctl
suffix:semicolon
DECL|member|gpio_direction
DECL|member|gpio_write_mask
r_int
r_char
id|gpio_direction
comma
id|gpio_write_mask
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|chip_t
mdefine_line|#define chip_t ice1712_t
DECL|variable|__devinitdata
r_static
r_struct
id|pci_device_id
id|snd_ice1712_ids
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
id|PCI_VENDOR_ID_ICE
comma
id|PCI_DEVICE_ID_ICE_1712
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
multiline_comment|/* ICE1712 */
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|snd_ice1712_ids
)paren
suffix:semicolon
r_static
r_int
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
suffix:semicolon
r_static
r_int
id|snd_ice1712_build_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
suffix:semicolon
multiline_comment|/*&n; *  Basic I/O&n; */
DECL|function|snd_ice1712_write
r_static
r_inline
r_void
id|snd_ice1712_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|addr
comma
id|u8
id|data
)paren
(brace
id|outb
c_func
(paren
id|addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|data
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_read
r_static
r_inline
id|u8
id|snd_ice1712_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|addr
)paren
(brace
id|outb
c_func
(paren
id|addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
r_return
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_ds_write
r_static
r_inline
r_void
id|snd_ice1712_ds_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|channel
comma
id|u8
id|addr
comma
id|u32
id|data
)paren
(brace
id|outb
c_func
(paren
(paren
id|channel
op_lshift
l_int|4
)paren
op_or
id|addr
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
id|outl
c_func
(paren
id|data
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_ds_read
r_static
r_inline
id|u32
id|snd_ice1712_ds_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|channel
comma
id|u8
id|addr
)paren
(brace
id|outb
c_func
(paren
(paren
id|channel
op_lshift
l_int|4
)paren
op_or
id|addr
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
r_return
id|inl
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_write
r_static
r_void
id|snd_ice1712_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
id|old_cmd
op_and_assign
op_complement
(paren
id|ICE1712_AC97_PBK_VSR
op_or
id|ICE1712_AC97_CAP_VSR
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_WRITE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_WRITE
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_read
r_static
r_int
r_int
id|snd_ice1712_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_READ
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_READ
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|tm
op_ge
l_int|0x10000
)paren
multiline_comment|/* timeout */
r_return
op_complement
l_int|0
suffix:semicolon
r_return
id|inw
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * pro ac97 section&n; */
DECL|function|snd_ice1712_pro_ac97_write
r_static
r_void
id|snd_ice1712_pro_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
id|old_cmd
op_and_assign
op_complement
(paren
id|ICE1712_AC97_PBK_VSR
op_or
id|ICE1712_AC97_CAP_VSR
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_WRITE
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_WRITE
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_ac97_read
r_static
r_int
r_int
id|snd_ice1712_pro_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_READ
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_READ
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|tm
op_ge
l_int|0x10000
)paren
multiline_comment|/* timeout */
r_return
op_complement
l_int|0
suffix:semicolon
r_return
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_digmix_route_ac97_info
r_static
r_int
id|snd_ice1712_digmix_route_ac97_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_digmix_route_ac97_get
r_static
r_int
id|snd_ice1712_digmix_route_ac97_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
op_amp
id|ICE1712_ROUTE_AC97
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_digmix_route_ac97_put
r_static
r_int
id|snd_ice1712_digmix_route_ac97_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|val
comma
id|nval
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
suffix:semicolon
id|nval
op_assign
id|val
op_amp
op_complement
id|ICE1712_ROUTE_AC97
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|nval
op_or_assign
id|ICE1712_ROUTE_AC97
suffix:semicolon
id|outb
c_func
(paren
id|nval
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|val
op_ne
id|nval
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_digmix_route_ac97
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Digital Mixer To AC97&quot;
comma
id|info
suffix:colon
id|snd_ice1712_digmix_route_ac97_info
comma
id|get
suffix:colon
id|snd_ice1712_digmix_route_ac97_get
comma
id|put
suffix:colon
id|snd_ice1712_digmix_route_ac97_put
comma
)brace
suffix:semicolon
multiline_comment|/*&n; */
DECL|function|snd_ice1712_delta_cs8403_spdif_write
r_static
r_void
id|snd_ice1712_delta_cs8403_spdif_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|bits
)paren
(brace
r_int
r_char
id|tmp
comma
id|mask1
comma
id|mask2
suffix:semicolon
r_int
id|idx
suffix:semicolon
multiline_comment|/* send byte to transmitter */
id|mask1
op_assign
id|ICE1712_DELTA_SPDIF_OUT_STAT_CLOCK
suffix:semicolon
id|mask2
op_assign
id|ICE1712_DELTA_SPDIF_OUT_STAT_DATA
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|7
suffix:semicolon
id|idx
op_ge
l_int|0
suffix:semicolon
id|idx
op_decrement
)paren
(brace
id|tmp
op_and_assign
op_complement
(paren
id|mask1
op_or
id|mask2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bits
op_amp
(paren
l_int|1
op_lshift
id|idx
)paren
)paren
id|tmp
op_or_assign
id|mask2
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|tmp
op_or_assign
id|mask1
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
)brace
id|tmp
op_and_assign
op_complement
id|mask1
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * set gpio direction, write mask and data&n; */
DECL|function|snd_ice1712_gpio_write_bits
r_static
r_void
id|snd_ice1712_gpio_write_bits
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|mask
comma
r_int
id|bits
)paren
(brace
id|ice-&gt;gpio_direction
op_or_assign
id|mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;gpio_direction
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
id|mask
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|mask
op_amp
id|bits
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; */
DECL|function|save_gpio_status
r_static
r_void
id|save_gpio_status
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
op_star
id|tmp
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|tmp
(braket
l_int|0
)braket
op_assign
id|ice-&gt;gpio_direction
suffix:semicolon
id|tmp
(braket
l_int|1
)braket
op_assign
id|ice-&gt;gpio_write_mask
suffix:semicolon
)brace
DECL|function|restore_gpio_status
r_static
r_void
id|restore_gpio_status
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
op_star
id|tmp
)paren
(brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|tmp
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
id|tmp
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|ice-&gt;gpio_direction
op_assign
id|tmp
(braket
l_int|0
)braket
suffix:semicolon
id|ice-&gt;gpio_write_mask
op_assign
id|tmp
(braket
l_int|1
)braket
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * CS8427 via SPI mode (for Audiophile), emulated I2C&n; */
multiline_comment|/* send 8 bits */
DECL|function|ap_cs8427_write_byte
r_static
r_void
id|ap_cs8427_write_byte
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|data
comma
r_int
r_char
id|tmp
)paren
(brace
r_int
id|idx
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|7
suffix:semicolon
id|idx
op_ge
l_int|0
suffix:semicolon
id|idx
op_decrement
)paren
(brace
id|tmp
op_and_assign
op_complement
(paren
id|ICE1712_DELTA_AP_DOUT
op_or
id|ICE1712_DELTA_AP_CCLK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
(paren
l_int|1
op_lshift
id|idx
)paren
)paren
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_DOUT
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_CCLK
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* read 8 bits */
DECL|function|ap_cs8427_read_byte
r_static
r_int
r_char
id|ap_cs8427_read_byte
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|tmp
)paren
(brace
r_int
r_char
id|data
op_assign
l_int|0
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|7
suffix:semicolon
id|idx
op_ge
l_int|0
suffix:semicolon
id|idx
op_decrement
)paren
(brace
id|tmp
op_and_assign
op_complement
id|ICE1712_DELTA_AP_CCLK
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
op_amp
id|ICE1712_DELTA_AP_DIN
)paren
id|data
op_or_assign
l_int|1
op_lshift
id|idx
suffix:semicolon
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_CCLK
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
)brace
r_return
id|data
suffix:semicolon
)brace
multiline_comment|/* assert chip select */
DECL|function|ap_cs8427_codec_select
r_static
r_int
r_char
id|ap_cs8427_codec_select
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_char
id|tmp
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_CCLK
op_or
id|ICE1712_DELTA_AP_CS_CODEC
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|ICE1712_DELTA_AP_CS_DIGITAL
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
r_return
id|tmp
suffix:semicolon
)brace
multiline_comment|/* deassert chip select */
DECL|function|ap_cs8427_codec_deassert
r_static
r_void
id|ap_cs8427_codec_deassert
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|tmp
)paren
(brace
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_CS_DIGITAL
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
)brace
multiline_comment|/* sequential write */
DECL|function|ap_cs8427_sendbytes
r_static
r_int
id|ap_cs8427_sendbytes
c_func
(paren
id|snd_i2c_device_t
op_star
id|device
comma
r_int
r_char
op_star
id|bytes
comma
r_int
id|count
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|device-&gt;bus-&gt;private_data
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
r_int
id|res
op_assign
id|count
suffix:semicolon
r_int
r_char
id|tmp
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|tmp
op_assign
id|ap_cs8427_codec_select
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ap_cs8427_write_byte
c_func
(paren
id|ice
comma
(paren
id|device-&gt;addr
op_lshift
l_int|1
)paren
op_or
l_int|0
comma
id|tmp
)paren
suffix:semicolon
multiline_comment|/* address + write mode */
r_while
c_loop
(paren
id|count
op_decrement
OG
l_int|0
)paren
id|ap_cs8427_write_byte
c_func
(paren
id|ice
comma
op_star
id|bytes
op_increment
comma
id|tmp
)paren
suffix:semicolon
id|ap_cs8427_codec_deassert
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
multiline_comment|/* sequential read */
DECL|function|ap_cs8427_readbytes
r_static
r_int
id|ap_cs8427_readbytes
c_func
(paren
id|snd_i2c_device_t
op_star
id|device
comma
r_int
r_char
op_star
id|bytes
comma
r_int
id|count
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|device-&gt;bus-&gt;private_data
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
r_int
id|res
op_assign
id|count
suffix:semicolon
r_int
r_char
id|tmp
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|tmp
op_assign
id|ap_cs8427_codec_select
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ap_cs8427_write_byte
c_func
(paren
id|ice
comma
(paren
id|device-&gt;addr
op_lshift
l_int|1
)paren
op_or
l_int|1
comma
id|tmp
)paren
suffix:semicolon
multiline_comment|/* address + read mode */
r_while
c_loop
(paren
id|count
op_decrement
OG
l_int|0
)paren
op_star
id|bytes
op_increment
op_assign
id|ap_cs8427_read_byte
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|ap_cs8427_codec_deassert
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
DECL|function|ap_cs8427_probeaddr
r_static
r_int
id|ap_cs8427_probeaddr
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
comma
r_int
r_int
id|addr
)paren
(brace
r_if
c_cond
(paren
id|addr
op_eq
l_int|0x10
)paren
r_return
l_int|1
suffix:semicolon
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
DECL|variable|ap_cs8427_i2c_ops
r_static
id|snd_i2c_ops_t
id|ap_cs8427_i2c_ops
op_assign
(brace
id|sendbytes
suffix:colon
id|ap_cs8427_sendbytes
comma
id|readbytes
suffix:colon
id|ap_cs8427_readbytes
comma
id|probeaddr
suffix:colon
id|ap_cs8427_probeaddr
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * access via i2c mode (for EWX 24/96, EWS 88MT&amp;D)&n; */
multiline_comment|/* send SDA and SCL */
DECL|function|ewx_i2c_setlines
r_static
r_void
id|ewx_i2c_setlines
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
comma
r_int
id|clk
comma
r_int
id|data
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_int
r_char
id|tmp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|clk
)paren
id|tmp
op_or_assign
id|ICE1712_EWX2496_SERIAL_CLOCK
suffix:semicolon
r_if
c_cond
(paren
id|data
)paren
id|tmp
op_or_assign
id|ICE1712_EWX2496_SERIAL_DATA
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
)brace
DECL|function|ewx_i2c_getclock
r_static
r_int
id|ewx_i2c_getclock
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
r_return
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
op_amp
id|ICE1712_EWX2496_SERIAL_CLOCK
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|ewx_i2c_getdata
r_static
r_int
id|ewx_i2c_getdata
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
comma
r_int
id|ack
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
r_int
id|bit
suffix:semicolon
multiline_comment|/* set RW pin to low */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
id|ICE1712_EWX2496_RW
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ack
)paren
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
id|bit
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
op_amp
id|ICE1712_EWX2496_SERIAL_DATA
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
multiline_comment|/* set RW pin to high */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|ICE1712_EWX2496_RW
)paren
suffix:semicolon
multiline_comment|/* reset write mask */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
id|ICE1712_EWX2496_SERIAL_CLOCK
)paren
suffix:semicolon
r_return
id|bit
suffix:semicolon
)brace
DECL|function|ewx_i2c_start
r_static
r_void
id|ewx_i2c_start
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_int
r_char
id|mask
suffix:semicolon
id|save_gpio_status
c_func
(paren
id|ice
comma
(paren
r_int
r_char
op_star
)paren
op_amp
id|bus-&gt;private_value
)paren
suffix:semicolon
multiline_comment|/* set RW high */
id|mask
op_assign
id|ICE1712_EWX2496_RW
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|mask
op_or_assign
id|ICE1712_EWX2496_AK4524_CS
suffix:semicolon
multiline_comment|/* CS high also */
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|mask
op_or_assign
id|ICE1712_6FIRE_AK4524_CS_MASK
suffix:semicolon
multiline_comment|/* CS high also */
r_break
suffix:semicolon
)brace
id|snd_ice1712_gpio_write_bits
c_func
(paren
id|ice
comma
id|mask
comma
id|mask
)paren
suffix:semicolon
)brace
DECL|function|ewx_i2c_stop
r_static
r_void
id|ewx_i2c_stop
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
)paren
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
(paren
r_int
r_char
op_star
)paren
op_amp
id|bus-&gt;private_value
)paren
suffix:semicolon
)brace
DECL|function|ewx_i2c_direction
r_static
r_void
id|ewx_i2c_direction
c_func
(paren
id|snd_i2c_bus_t
op_star
id|bus
comma
r_int
id|clock
comma
r_int
id|data
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|bus-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|clock
)paren
id|mask
op_or_assign
id|ICE1712_EWX2496_SERIAL_CLOCK
suffix:semicolon
multiline_comment|/* write SCL */
r_if
c_cond
(paren
id|data
)paren
id|mask
op_or_assign
id|ICE1712_EWX2496_SERIAL_DATA
suffix:semicolon
multiline_comment|/* write SDA */
id|ice-&gt;gpio_direction
op_and_assign
op_complement
(paren
id|ICE1712_EWX2496_SERIAL_CLOCK
op_or
id|ICE1712_EWX2496_SERIAL_DATA
)paren
suffix:semicolon
id|ice-&gt;gpio_direction
op_or_assign
id|mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;gpio_direction
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
id|mask
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_ewx_cs8427_bit_ops
r_static
id|snd_i2c_bit_ops_t
id|snd_ice1712_ewx_cs8427_bit_ops
op_assign
(brace
id|start
suffix:colon
id|ewx_i2c_start
comma
id|stop
suffix:colon
id|ewx_i2c_stop
comma
id|direction
suffix:colon
id|ewx_i2c_direction
comma
id|setlines
suffix:colon
id|ewx_i2c_setlines
comma
id|getclock
suffix:colon
id|ewx_i2c_getclock
comma
id|getdata
suffix:colon
id|ewx_i2c_getdata
comma
)brace
suffix:semicolon
multiline_comment|/* AK4524 chip select; address 0x48 bit 0-3 */
DECL|function|snd_ice1712_ews88mt_chip_select
r_static
r_void
id|snd_ice1712_ews88mt_chip_select
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|chip_mask
)paren
(brace
r_int
r_char
id|data
comma
id|ndata
suffix:semicolon
id|snd_assert
c_func
(paren
id|chip_mask
op_ge
l_int|0
op_logical_and
id|chip_mask
op_le
l_int|0x0f
comma
r_return
)paren
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
comma
op_amp
id|data
comma
l_int|1
)paren
op_eq
l_int|1
comma
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
)paren
suffix:semicolon
id|ndata
op_assign
(paren
id|data
op_amp
l_int|0xf0
)paren
op_or
id|chip_mask
suffix:semicolon
r_if
c_cond
(paren
id|ndata
op_ne
id|data
)paren
id|snd_runtime_check
c_func
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
comma
op_amp
id|ndata
comma
l_int|1
)paren
op_eq
l_int|1
comma
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
)paren
suffix:semicolon
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * write AK4524 register&n; */
DECL|function|snd_ice1712_ak4524_write
r_static
r_void
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|chip
comma
r_int
r_char
id|addr
comma
r_int
r_char
id|data
)paren
(brace
r_int
r_char
id|tmp
comma
id|data_mask
comma
id|clk_mask
comma
id|saved
(braket
l_int|2
)braket
suffix:semicolon
r_int
r_char
id|codecs_mask
suffix:semicolon
r_int
id|idx
comma
id|cif
suffix:semicolon
r_int
r_int
id|addrdata
suffix:semicolon
id|snd_assert
c_func
(paren
id|chip
op_ge
l_int|0
op_logical_and
id|chip
OL
l_int|4
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|ICE1712_SUBDEVICE_EWS88MT
)paren
(brace
multiline_comment|/* assert AK4524 CS */
id|snd_ice1712_ews88mt_chip_select
c_func
(paren
id|ice
comma
op_complement
(paren
l_int|1
op_lshift
id|chip
)paren
op_amp
l_int|0x0f
)paren
suffix:semicolon
singleline_comment|//snd_ice1712_ews88mt_chip_select(ice, 0x0f);
)brace
id|cif
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* the default level of the CIF pin from AK4524 */
id|save_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|data_mask
op_assign
id|ICE1712_DELTA_AP_DOUT
suffix:semicolon
id|clk_mask
op_assign
id|ICE1712_DELTA_AP_CCLK
suffix:semicolon
id|codecs_mask
op_assign
id|ICE1712_DELTA_AP_CS_CODEC
suffix:semicolon
multiline_comment|/* select AK4528 codec */
id|tmp
op_or_assign
id|ICE1712_DELTA_AP_CS_DIGITAL
suffix:semicolon
multiline_comment|/* assert digital high */
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|data_mask
op_assign
id|ICE1712_EWX2496_SERIAL_DATA
suffix:semicolon
id|clk_mask
op_assign
id|ICE1712_EWX2496_SERIAL_CLOCK
suffix:semicolon
id|codecs_mask
op_assign
id|ICE1712_EWX2496_AK4524_CS
suffix:semicolon
id|tmp
op_or_assign
id|ICE1712_EWX2496_RW
suffix:semicolon
multiline_comment|/* set rw bit high */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;gpio_direction
op_or
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_EWX2496_RW
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
(paren
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_EWX2496_RW
)paren
)paren
suffix:semicolon
id|cif
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* CIF high */
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
id|data_mask
op_assign
id|ICE1712_EWS88_SERIAL_DATA
suffix:semicolon
id|clk_mask
op_assign
id|ICE1712_EWS88_SERIAL_CLOCK
suffix:semicolon
id|codecs_mask
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* no chip select on gpio */
id|tmp
op_or_assign
id|ICE1712_EWS88_RW
suffix:semicolon
multiline_comment|/* set rw bit high */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;gpio_direction
op_or
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_EWS88_RW
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
(paren
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_EWS88_RW
)paren
)paren
suffix:semicolon
id|cif
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* CIF high */
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|data_mask
op_assign
id|ICE1712_6FIRE_SERIAL_DATA
suffix:semicolon
id|clk_mask
op_assign
id|ICE1712_6FIRE_SERIAL_CLOCK
suffix:semicolon
id|codecs_mask
op_assign
(paren
l_int|1
op_lshift
id|chip
)paren
op_amp
id|ICE1712_6FIRE_AK4524_CS_MASK
suffix:semicolon
id|tmp
op_or_assign
id|ICE1712_6FIRE_RW
suffix:semicolon
multiline_comment|/* set rw bit high */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;gpio_direction
op_or
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_6FIRE_RW
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
op_complement
(paren
id|data_mask
op_or
id|clk_mask
op_or
id|codecs_mask
op_or
id|ICE1712_6FIRE_RW
)paren
)paren
suffix:semicolon
id|cif
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* CIF high */
r_break
suffix:semicolon
r_default
suffix:colon
id|data_mask
op_assign
id|ICE1712_DELTA_CODEC_SERIAL_DATA
suffix:semicolon
id|clk_mask
op_assign
id|ICE1712_DELTA_CODEC_SERIAL_CLOCK
suffix:semicolon
id|codecs_mask
op_assign
id|chip
op_eq
l_int|0
ques
c_cond
id|ICE1712_DELTA_CODEC_CHIP_A
suffix:colon
id|ICE1712_DELTA_CODEC_CHIP_B
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|cif
)paren
(brace
id|tmp
op_or_assign
id|codecs_mask
suffix:semicolon
multiline_comment|/* start without chip select */
)brace
r_else
(brace
id|tmp
op_and_assign
op_complement
id|codecs_mask
suffix:semicolon
multiline_comment|/* chip select low */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|addr
op_and_assign
l_int|0x07
suffix:semicolon
multiline_comment|/* build I2C address + data byte */
id|addrdata
op_assign
l_int|0xa000
op_or
(paren
id|addr
op_lshift
l_int|8
)paren
op_or
id|data
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|15
suffix:semicolon
id|idx
op_ge
l_int|0
suffix:semicolon
id|idx
op_decrement
)paren
(brace
id|tmp
op_and_assign
op_complement
(paren
id|data_mask
op_or
id|clk_mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|addrdata
op_amp
(paren
l_int|1
op_lshift
id|idx
)paren
)paren
id|tmp
op_or_assign
id|data_mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
singleline_comment|//udelay(200);
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|clk_mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|ICE1712_SUBDEVICE_EWS88MT
)paren
(brace
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
singleline_comment|//snd_ice1712_ews88mt_chip_select(ice, ~(1 &lt;&lt; chip) &amp; 0x0f);
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|snd_ice1712_ews88mt_chip_select
c_func
(paren
id|ice
comma
l_int|0x0f
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|cif
)paren
(brace
multiline_comment|/* assert a cs pulse to trigger */
id|tmp
op_and_assign
op_complement
id|codecs_mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|tmp
op_or_assign
id|codecs_mask
suffix:semicolon
multiline_comment|/* chip select high to trigger */
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|addr
op_ne
l_int|0x04
op_logical_and
id|addr
op_ne
l_int|0x05
)paren
op_logical_or
(paren
id|data
op_amp
l_int|0x80
)paren
op_eq
l_int|0
)paren
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
id|addr
)braket
op_assign
id|data
suffix:semicolon
r_else
id|ice-&gt;ak4524_ipga_gain
(braket
id|chip
)braket
(braket
id|addr
op_minus
l_int|4
)braket
op_assign
id|data
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_reset
r_static
r_void
id|snd_ice1712_ak4524_reset
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|state
)paren
(brace
r_int
id|chip
suffix:semicolon
r_int
r_char
id|reg
suffix:semicolon
r_for
c_loop
(paren
id|chip
op_assign
l_int|0
suffix:semicolon
id|chip
OL
id|ice-&gt;num_dacs
op_div
l_int|2
suffix:semicolon
id|chip
op_increment
)paren
(brace
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
l_int|0x01
comma
id|state
ques
c_cond
l_int|0x00
suffix:colon
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|state
)paren
r_continue
suffix:semicolon
r_for
c_loop
(paren
id|reg
op_assign
l_int|0x04
suffix:semicolon
id|reg
OL
(paren
id|ice-&gt;ak4528
ques
c_cond
l_int|0x06
suffix:colon
l_int|0x08
)paren
suffix:semicolon
id|reg
op_increment
)paren
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
id|reg
comma
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
id|reg
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;ak4528
)paren
r_continue
suffix:semicolon
r_for
c_loop
(paren
id|reg
op_assign
l_int|0x04
suffix:semicolon
id|reg
OL
l_int|0x06
suffix:semicolon
id|reg
op_increment
)paren
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
id|reg
comma
id|ice-&gt;ak4524_ipga_gain
(braket
id|chip
)braket
(braket
id|reg
op_minus
l_int|4
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ice1712_ews_cs8404_spdif_write
r_static
r_void
id|snd_ice1712_ews_cs8404_spdif_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|bits
)paren
(brace
r_int
r_char
id|bytes
(braket
l_int|2
)braket
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
id|snd_runtime_check
c_func
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;cs8404
comma
op_amp
id|bits
comma
l_int|1
)paren
op_eq
l_int|1
comma
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|snd_runtime_check
c_func
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|bytes
comma
l_int|2
)paren
op_eq
l_int|2
comma
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bits
op_ne
id|bytes
(braket
l_int|1
)braket
)paren
(brace
id|bytes
(braket
l_int|1
)braket
op_assign
id|bits
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|bytes
comma
l_int|2
)paren
op_eq
l_int|2
comma
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * change the input clock selection&n; * spdif_clock = 1 - IEC958 input, 0 - Envy24&n; */
DECL|function|snd_ice1712_cs8427_set_input_clock
r_static
r_int
id|snd_ice1712_cs8427_set_input_clock
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|spdif_clock
)paren
(brace
r_int
r_char
id|reg
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x80
op_or
l_int|4
comma
l_int|0
)brace
suffix:semicolon
multiline_comment|/* CS8427 auto increment | register number 4 + data */
r_int
r_char
id|val
comma
id|nval
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;cs8427
comma
id|reg
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;cs8427
comma
op_amp
id|val
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|nval
op_assign
id|val
op_amp
l_int|0xf0
suffix:semicolon
r_if
c_cond
(paren
id|spdif_clock
)paren
id|nval
op_or_assign
l_int|0x01
suffix:semicolon
r_else
id|nval
op_or_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|nval
)paren
(brace
r_if
c_cond
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;cs8427
comma
id|reg
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; */
DECL|function|snd_ice1712_set_pro_rate
r_static
r_void
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|rate
suffix:semicolon
r_int
r_char
id|val
comma
id|tmp
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
(paren
id|ICE1712_CAPTURE_START_SHADOW
op_or
id|ICE1712_PLAYBACK_PAUSE
op_or
id|ICE1712_PLAYBACK_START
)paren
)paren
r_goto
id|__end
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
id|ICE1712_SPDIF_MASTER
)paren
r_goto
id|__end
suffix:semicolon
id|rate
op_assign
id|substream-&gt;runtime-&gt;rate
suffix:semicolon
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|8000
suffix:colon
id|val
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9600
suffix:colon
id|val
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11025
suffix:colon
id|val
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12000
suffix:colon
id|val
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16000
suffix:colon
id|val
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22050
suffix:colon
id|val
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24000
suffix:colon
id|val
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32000
suffix:colon
id|val
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|val
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|val
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|64000
suffix:colon
id|val
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|88200
suffix:colon
id|val
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|96000
suffix:colon
id|val
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
id|val
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA44
suffix:colon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_ak4524_reset
c_func
(paren
id|ice
comma
l_int|1
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|15
op_logical_or
id|val
op_eq
l_int|11
op_logical_or
id|val
op_eq
l_int|7
)paren
(brace
id|tmp
op_or_assign
id|ICE1712_DELTA_DFS
suffix:semicolon
)brace
r_else
(brace
id|tmp
op_and_assign
op_complement
id|ICE1712_DELTA_DFS
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|tmp
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|snd_ice1712_ak4524_reset
c_func
(paren
id|ice
comma
l_int|0
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|__end
suffix:colon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  Interrupt handler&n; */
DECL|function|snd_ice1712_interrupt
r_static
r_void
id|snd_ice1712_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|dev_id
comma
r_return
)paren
suffix:semicolon
r_int
r_char
id|status
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|status
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_MPU1
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;rmidi
(braket
l_int|0
)braket
)paren
id|snd_mpu401_uart_interrupt
c_func
(paren
id|irq
comma
id|ice-&gt;rmidi
(braket
l_int|0
)braket
op_member_access_from_pointer
id|private_data
comma
id|regs
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_MPU1
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
id|status
op_and_assign
op_complement
id|ICE1712_IRQ_MPU1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_TIMER
)paren
id|outb
c_func
(paren
id|ICE1712_IRQ_TIMER
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_MPU2
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;rmidi
(braket
l_int|1
)braket
)paren
id|snd_mpu401_uart_interrupt
c_func
(paren
id|irq
comma
id|ice-&gt;rmidi
(braket
l_int|1
)braket
op_member_access_from_pointer
id|private_data
comma
id|regs
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_MPU2
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
id|status
op_and_assign
op_complement
id|ICE1712_IRQ_MPU2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_PROPCM
)paren
(brace
r_int
r_char
id|mtstat
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mtstat
op_amp
id|ICE1712_MULTI_PBKSTATUS
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;playback_pro_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;playback_pro_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_MULTI_PBKSTATUS
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mtstat
op_amp
id|ICE1712_MULTI_CAPSTATUS
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;capture_pro_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;capture_pro_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_MULTI_CAPSTATUS
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_FM
)paren
id|outb
c_func
(paren
id|ICE1712_IRQ_FM
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_PBKDS
)paren
(brace
id|u32
id|idx
suffix:semicolon
id|u16
id|pbkstatus
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
id|pbkstatus
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTSTAT
)paren
)paren
suffix:semicolon
singleline_comment|//printk(&quot;pbkstatus = 0x%x&bslash;n&quot;, pbkstatus);
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|6
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|pbkstatus
op_amp
(paren
l_int|3
op_lshift
(paren
id|idx
op_star
l_int|2
)paren
)paren
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
(paren
id|substream
op_assign
id|ice-&gt;playback_con_substream_ds
(braket
id|idx
)braket
)paren
op_ne
l_int|NULL
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|substream
)paren
suffix:semicolon
id|outw
c_func
(paren
l_int|3
op_lshift
(paren
id|idx
op_star
l_int|2
)paren
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTSTAT
)paren
)paren
suffix:semicolon
)brace
id|outb
c_func
(paren
id|ICE1712_IRQ_PBKDS
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_CONCAP
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;capture_con_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;capture_con_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_CONCAP
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_CONPBK
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;playback_con_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;playback_con_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_CONPBK
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; *  PCM part - misc&n; */
DECL|function|snd_ice1712_hw_params
r_static
r_int
id|snd_ice1712_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|hw_params
)paren
(brace
r_return
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|hw_params
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_hw_free
r_static
r_int
id|snd_ice1712_hw_free
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_return
id|snd_pcm_lib_free_pages
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM part - consumer I/O&n; */
DECL|function|snd_ice1712_playback_trigger
r_static
r_int
id|snd_ice1712_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
(brace
id|tmp
op_or_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_trigger
r_static
r_int
id|snd_ice1712_playback_ds_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
(brace
id|tmp
op_or_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_trigger
r_static
r_int
id|snd_ice1712_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u8
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_prepare
r_static
r_int
id|snd_ice1712_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
comma
id|rate
comma
id|tmp
suffix:semicolon
id|period_size
op_assign
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_or_assign
l_int|0x08
suffix:semicolon
id|rate
op_assign
(paren
id|runtime-&gt;rate
op_star
l_int|8192
)paren
op_div
l_int|375
suffix:semicolon
r_if
c_cond
(paren
id|rate
OG
l_int|0x000fffff
)paren
id|rate
op_assign
l_int|0x000fffff
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|ice-&gt;ddma_port
op_plus
l_int|15
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_DMA_MODE_WRITE
op_or
id|ICE1712_DMA_AUTOINIT
comma
id|ice-&gt;ddma_port
op_plus
l_int|0x0b
)paren
suffix:semicolon
id|outl
c_func
(paren
id|runtime-&gt;dma_addr
comma
id|ice-&gt;ddma_port
op_plus
l_int|0
)paren
suffix:semicolon
id|outw
c_func
(paren
id|buf_size
comma
id|ice-&gt;ddma_port
op_plus
l_int|4
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_LO
comma
id|rate
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_MID
comma
(paren
id|rate
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_HI
comma
(paren
id|rate
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_COUNT_LO
comma
id|period_size
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_COUNT_HI
comma
id|period_size
op_rshift
l_int|8
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_LEFT
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RIGHT
comma
l_int|0
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_prepare
r_static
r_int
id|snd_ice1712_playback_ds_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
comma
id|rate
comma
id|tmp
comma
id|chn
suffix:semicolon
id|period_size
op_assign
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x0064
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_and_assign
op_complement
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_or_assign
l_int|0x08
suffix:semicolon
id|rate
op_assign
(paren
id|runtime-&gt;rate
op_star
l_int|8192
)paren
op_div
l_int|375
suffix:semicolon
r_if
c_cond
(paren
id|rate
OG
l_int|0x000fffff
)paren
id|rate
op_assign
l_int|0x000fffff
suffix:semicolon
id|ice-&gt;playback_con_active_buf
(braket
id|substream-&gt;number
)braket
op_assign
l_int|0
suffix:semicolon
id|ice-&gt;playback_con_virt_addr
(braket
id|substream-&gt;number
)braket
op_assign
id|runtime-&gt;dma_addr
suffix:semicolon
id|chn
op_assign
id|substream-&gt;number
op_star
l_int|2
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_ADDR0
comma
id|runtime-&gt;dma_addr
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_COUNT0
comma
id|period_size
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_ADDR1
comma
id|runtime-&gt;dma_addr
op_plus
(paren
id|runtime-&gt;periods
OG
l_int|1
ques
c_cond
id|period_size
op_plus
l_int|1
suffix:colon
l_int|0
)paren
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_COUNT1
comma
id|period_size
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_RATE
comma
id|rate
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_VOLUME
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_CONTROL
comma
id|tmp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
(brace
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
op_plus
l_int|1
comma
id|ICE1712_DSC_RATE
comma
id|rate
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
op_plus
l_int|1
comma
id|ICE1712_DSC_VOLUME
comma
l_int|0
)paren
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_prepare
r_static
r_int
id|snd_ice1712_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
suffix:semicolon
id|u8
id|tmp
suffix:semicolon
id|period_size
op_assign
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x06
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_and_assign
op_complement
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_and_assign
op_complement
l_int|0x02
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|outl
c_func
(paren
id|ice-&gt;capture_con_virt_addr
op_assign
id|runtime-&gt;dma_addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|buf_size
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_COUNT
)paren
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_COUNT_HI
comma
id|period_size
op_rshift
l_int|8
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_COUNT_LO
comma
id|period_size
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ac97_set_rate
c_func
(paren
id|ice-&gt;ac97
comma
id|AC97_PCM_LR_ADC_RATE
comma
id|runtime-&gt;rate
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|runtime-&gt;buffer_size
op_minus
id|inw
c_func
(paren
id|ice-&gt;ddma_port
op_plus
l_int|4
)paren
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_ds_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|u8
id|addr
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;playback_con_active_buf
(braket
id|substream-&gt;number
)braket
)paren
id|addr
op_assign
id|ICE1712_DSC_ADDR1
suffix:semicolon
r_else
id|addr
op_assign
id|ICE1712_DSC_ADDR0
suffix:semicolon
id|ptr
op_assign
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|addr
)paren
op_minus
id|ice-&gt;playback_con_virt_addr
(braket
id|substream-&gt;number
)braket
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|inl
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_ADDR
)paren
)paren
op_minus
id|ice-&gt;capture_con_virt_addr
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
id|formats
suffix:colon
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
id|rates
suffix:colon
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
id|rate_min
suffix:colon
l_int|4000
comma
id|rate_max
suffix:colon
l_int|48000
comma
id|channels_min
suffix:colon
l_int|1
comma
id|channels_max
suffix:colon
l_int|2
comma
id|buffer_bytes_max
suffix:colon
(paren
l_int|64
op_star
l_int|1024
)paren
comma
id|period_bytes_min
suffix:colon
l_int|64
comma
id|period_bytes_max
suffix:colon
(paren
l_int|64
op_star
l_int|1024
)paren
comma
id|periods_min
suffix:colon
l_int|1
comma
id|periods_max
suffix:colon
l_int|1024
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_playback_ds
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback_ds
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
id|formats
suffix:colon
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
id|rates
suffix:colon
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
id|rate_min
suffix:colon
l_int|4000
comma
id|rate_max
suffix:colon
l_int|48000
comma
id|channels_min
suffix:colon
l_int|1
comma
id|channels_max
suffix:colon
l_int|2
comma
id|buffer_bytes_max
suffix:colon
(paren
l_int|128
op_star
l_int|1024
)paren
comma
id|period_bytes_min
suffix:colon
l_int|64
comma
id|period_bytes_max
suffix:colon
(paren
l_int|128
op_star
l_int|1024
)paren
comma
id|periods_min
suffix:colon
l_int|2
comma
id|periods_max
suffix:colon
l_int|2
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_capture
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
)paren
comma
id|formats
suffix:colon
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
id|rates
suffix:colon
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
id|rate_min
suffix:colon
l_int|4000
comma
id|rate_max
suffix:colon
l_int|48000
comma
id|channels_min
suffix:colon
l_int|1
comma
id|channels_max
suffix:colon
l_int|2
comma
id|buffer_bytes_max
suffix:colon
(paren
l_int|64
op_star
l_int|1024
)paren
comma
id|period_bytes_min
suffix:colon
l_int|64
comma
id|period_bytes_max
suffix:colon
(paren
l_int|64
op_star
l_int|1024
)paren
comma
id|periods_min
suffix:colon
l_int|1
comma
id|periods_max
suffix:colon
l_int|1024
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_playback_open
r_static
r_int
id|snd_ice1712_playback_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_open
r_static
r_int
id|snd_ice1712_playback_ds_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|ice-&gt;playback_con_substream_ds
(braket
id|substream-&gt;number
)braket
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback_ds
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|tmp
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
op_amp
op_complement
(paren
l_int|1
op_lshift
(paren
id|substream-&gt;number
op_star
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|tmp
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_open
r_static
r_int
id|snd_ice1712_capture_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_con_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_capture
suffix:semicolon
id|runtime-&gt;hw.rates
op_assign
id|ice-&gt;ac97-&gt;rates_adc
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|runtime-&gt;hw.rates
op_amp
id|SNDRV_PCM_RATE_8000
)paren
)paren
id|runtime-&gt;hw.rate_min
op_assign
l_int|48000
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_close
r_static
r_int
id|snd_ice1712_playback_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_close
r_static
r_int
id|snd_ice1712_playback_ds_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|tmp
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
op_or
(paren
l_int|3
op_lshift
(paren
id|substream-&gt;number
op_star
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|tmp
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream_ds
(braket
id|substream-&gt;number
)braket
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_close
r_static
r_int
id|snd_ice1712_capture_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
multiline_comment|/* disable ADC power */
id|snd_ac97_update_bits
c_func
(paren
id|ice-&gt;ac97
comma
id|AC97_POWERDOWN
comma
l_int|0x0100
comma
l_int|0x0100
)paren
suffix:semicolon
id|ice-&gt;capture_con_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_ops
op_assign
(brace
id|open
suffix:colon
id|snd_ice1712_playback_open
comma
id|close
suffix:colon
id|snd_ice1712_playback_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_ice1712_hw_params
comma
id|hw_free
suffix:colon
id|snd_ice1712_hw_free
comma
id|prepare
suffix:colon
id|snd_ice1712_playback_prepare
comma
id|trigger
suffix:colon
id|snd_ice1712_playback_trigger
comma
id|pointer
suffix:colon
id|snd_ice1712_playback_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_playback_ds_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_ds_ops
op_assign
(brace
id|open
suffix:colon
id|snd_ice1712_playback_ds_open
comma
id|close
suffix:colon
id|snd_ice1712_playback_ds_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_ice1712_hw_params
comma
id|hw_free
suffix:colon
id|snd_ice1712_hw_free
comma
id|prepare
suffix:colon
id|snd_ice1712_playback_ds_prepare
comma
id|trigger
suffix:colon
id|snd_ice1712_playback_ds_trigger
comma
id|pointer
suffix:colon
id|snd_ice1712_playback_ds_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_capture_ops
op_assign
(brace
id|open
suffix:colon
id|snd_ice1712_capture_open
comma
id|close
suffix:colon
id|snd_ice1712_capture_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_ice1712_hw_params
comma
id|hw_free
suffix:colon
id|snd_ice1712_hw_free
comma
id|prepare
suffix:colon
id|snd_ice1712_capture_prepare
comma
id|trigger
suffix:colon
id|snd_ice1712_capture_trigger
comma
id|pointer
suffix:colon
id|snd_ice1712_capture_pointer
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pcm_free
r_static
r_void
id|snd_ice1712_pcm_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|pcm-&gt;private_data
comma
r_return
)paren
suffix:semicolon
id|ice-&gt;pcm
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm
r_static
r_int
id|__devinit
id|snd_ice1712_pcm
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 consumer&quot;
comma
id|device
comma
l_int|1
comma
l_int|1
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_ice1712_capture_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_free
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 consumer&quot;
)paren
suffix:semicolon
id|ice-&gt;pcm
op_assign
id|pcm
suffix:semicolon
id|snd_pcm_lib_preallocate_pci_pages_for_all
c_func
(paren
id|ice-&gt;pci
comma
id|pcm
comma
l_int|64
op_star
l_int|1024
comma
l_int|64
op_star
l_int|1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Consumer PCM code does not work well at the moment --jk&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_free_ds
r_static
r_void
id|snd_ice1712_pcm_free_ds
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|pcm-&gt;private_data
comma
r_return
)paren
suffix:semicolon
id|ice-&gt;pcm_ds
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_ds
r_static
r_int
id|__devinit
id|snd_ice1712_pcm_ds
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 consumer (DS)&quot;
comma
id|device
comma
l_int|6
comma
l_int|0
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_ds_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_free_ds
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 consumer (DS)&quot;
)paren
suffix:semicolon
id|ice-&gt;pcm_ds
op_assign
id|pcm
suffix:semicolon
id|snd_pcm_lib_preallocate_pci_pages_for_all
c_func
(paren
id|ice-&gt;pci
comma
id|pcm
comma
l_int|64
op_star
l_int|1024
comma
l_int|128
op_star
l_int|1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM code - professional part (multitrack)&n; */
DECL|variable|rates
r_static
r_int
r_int
id|rates
(braket
)braket
op_assign
(brace
l_int|8000
comma
l_int|9600
comma
l_int|11025
comma
l_int|12000
comma
l_int|16000
comma
l_int|22050
comma
l_int|24000
comma
l_int|32000
comma
l_int|44100
comma
l_int|48000
comma
l_int|64000
comma
l_int|88200
comma
l_int|96000
)brace
suffix:semicolon
DECL|macro|RATES
mdefine_line|#define RATES sizeof(rates) / sizeof(rates[0])
DECL|variable|hw_constraints_rates
r_static
id|snd_pcm_hw_constraint_list_t
id|hw_constraints_rates
op_assign
(brace
id|count
suffix:colon
id|RATES
comma
id|list
suffix:colon
id|rates
comma
id|mask
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
macro_line|#if 0
r_static
r_int
id|snd_ice1712_playback_pro_ioctl
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
r_int
id|cmd
comma
r_void
op_star
id|arg
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_IOCTL1_DIG_INFO
suffix:colon
(brace
id|snd_pcm_dig_info_t
op_star
id|info
op_assign
id|arg
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_return
id|snd_ice1712_dig_cs8403_info
c_func
(paren
id|substream
comma
id|info
)paren
suffix:semicolon
)brace
)brace
r_case
id|SNDRV_PCM_IOCTL1_DIG_PARAMS
suffix:colon
(brace
id|snd_pcm_dig_params_t
op_star
id|params
op_assign
id|arg
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_return
id|snd_ice1712_dig_cs8403_params
c_func
(paren
id|substream
comma
id|params
)paren
suffix:semicolon
)brace
)brace
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_return
id|snd_pcm_lib_ioctl
c_func
(paren
id|substream
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|snd_ice1712_pro_trigger
r_static
r_int
id|snd_ice1712_pro_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
(brace
r_int
r_int
id|what
suffix:semicolon
r_int
r_int
id|old
suffix:semicolon
r_if
c_cond
(paren
id|substream-&gt;stream
op_ne
id|SNDRV_PCM_STREAM_PLAYBACK
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|what
op_assign
id|ICE1712_PLAYBACK_PAUSE
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|substream
comma
id|substream
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
id|old
op_or_assign
id|what
suffix:semicolon
r_else
id|old
op_and_assign
op_complement
id|what
suffix:semicolon
id|outl
c_func
(paren
id|old
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
(brace
r_int
r_int
id|what
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|old
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|s
op_assign
id|substream
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|s
op_eq
id|ice-&gt;playback_pro_substream
)paren
(brace
id|what
op_or_assign
id|ICE1712_PLAYBACK_START
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|s
comma
id|substream
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|s
op_eq
id|ice-&gt;capture_pro_substream
)paren
(brace
id|what
op_or_assign
id|ICE1712_CAPTURE_START_SHADOW
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|s
comma
id|substream
)paren
suffix:semicolon
)brace
id|s
op_assign
id|s-&gt;link_next
suffix:semicolon
)brace
r_while
c_loop
(paren
id|s
op_ne
id|substream
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
id|old
op_or_assign
id|what
suffix:semicolon
r_else
id|old
op_and_assign
op_complement
id|what
suffix:semicolon
id|outl
c_func
(paren
id|old
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_prepare
r_static
r_int
id|snd_ice1712_playback_pro_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
r_int
id|change
suffix:semicolon
id|ice-&gt;playback_pro_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|substream
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|outl
c_func
(paren
id|substream-&gt;runtime-&gt;dma_addr
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|ice-&gt;playback_pro_size
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_SIZE
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_COUNT
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
multiline_comment|/* setup S/PDIF */
id|tmp
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_amp
l_int|0x01
)paren
multiline_comment|/* consumer */
id|tmp
op_and_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
op_complement
l_int|0x06
suffix:colon
op_complement
l_int|0x18
suffix:semicolon
r_switch
c_cond
(paren
id|substream-&gt;runtime-&gt;rate
)paren
(brace
r_case
l_int|32000
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x04
suffix:colon
l_int|0x00
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x00
suffix:colon
l_int|0x10
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x02
suffix:colon
l_int|0x08
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x00
suffix:colon
l_int|0x18
suffix:semicolon
r_break
suffix:semicolon
)brace
id|change
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
op_ne
id|tmp
suffix:semicolon
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
id|tmp
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|snd_ctl_notify
c_func
(paren
id|ice-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
comma
op_amp
id|ice-&gt;spdif_stream_ctl-&gt;id
)paren
suffix:semicolon
id|snd_ice1712_delta_cs8403_spdif_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|snd_cs8427_iec958_pcm
c_func
(paren
id|ice-&gt;cs8427
comma
id|substream-&gt;runtime-&gt;rate
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
multiline_comment|/* setup S/PDIF */
id|tmp
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_amp
l_int|0x10
)paren
multiline_comment|/* consumer */
id|tmp
op_and_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
op_complement
l_int|0x06
suffix:colon
op_complement
l_int|0x60
suffix:semicolon
r_switch
c_cond
(paren
id|substream-&gt;runtime-&gt;rate
)paren
(brace
r_case
l_int|32000
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x02
suffix:colon
l_int|0x00
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x06
suffix:colon
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x04
suffix:colon
l_int|0x20
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|tmp
op_or_assign
(paren
id|tmp
op_amp
l_int|0x01
)paren
ques
c_cond
l_int|0x06
suffix:colon
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
)brace
id|change
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
op_ne
id|tmp
suffix:semicolon
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
id|tmp
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|snd_ctl_notify
c_func
(paren
id|ice-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
comma
op_amp
id|ice-&gt;spdif_stream_ctl-&gt;id
)paren
suffix:semicolon
id|snd_ice1712_ews_cs8404_spdif_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_prepare
r_static
r_int
id|snd_ice1712_capture_pro_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_pro_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|substream
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|outl
c_func
(paren
id|substream-&gt;runtime-&gt;dma_addr
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|ice-&gt;capture_pro_size
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_SIZE
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_COUNT
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_pro_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
id|ICE1712_PLAYBACK_START
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|ice-&gt;playback_pro_size
op_minus
(paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_SIZE
)paren
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_capture_pro_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
id|ICE1712_CAPTURE_START_SHADOW
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|ice-&gt;capture_pro_size
op_minus
(paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_SIZE
)paren
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_pro
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback_pro
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
op_or
id|SNDRV_PCM_INFO_SYNC_START
)paren
comma
id|formats
suffix:colon
id|SNDRV_PCM_FMTBIT_S32_LE
comma
id|rates
suffix:colon
id|SNDRV_PCM_RATE_KNOT
op_or
id|SNDRV_PCM_RATE_8000_96000
comma
id|rate_min
suffix:colon
l_int|4000
comma
id|rate_max
suffix:colon
l_int|96000
comma
id|channels_min
suffix:colon
l_int|10
comma
id|channels_max
suffix:colon
l_int|10
comma
id|buffer_bytes_max
suffix:colon
(paren
l_int|256
op_star
l_int|1024
)paren
comma
id|period_bytes_min
suffix:colon
l_int|10
op_star
l_int|4
op_star
l_int|2
comma
id|period_bytes_max
suffix:colon
l_int|131040
comma
id|periods_min
suffix:colon
l_int|1
comma
id|periods_max
suffix:colon
l_int|1024
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_pro
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_capture_pro
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
op_or
id|SNDRV_PCM_INFO_SYNC_START
)paren
comma
id|formats
suffix:colon
id|SNDRV_PCM_FMTBIT_S32_LE
comma
id|rates
suffix:colon
id|SNDRV_PCM_RATE_KNOT
op_or
id|SNDRV_PCM_RATE_8000_96000
comma
id|rate_min
suffix:colon
l_int|4000
comma
id|rate_max
suffix:colon
l_int|96000
comma
id|channels_min
suffix:colon
l_int|12
comma
id|channels_max
suffix:colon
l_int|12
comma
id|buffer_bytes_max
suffix:colon
(paren
l_int|256
op_star
l_int|1024
)paren
comma
id|period_bytes_min
suffix:colon
l_int|12
op_star
l_int|4
op_star
l_int|2
comma
id|period_bytes_max
suffix:colon
l_int|131040
comma
id|periods_min
suffix:colon
l_int|1
comma
id|periods_max
suffix:colon
l_int|1024
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_playback_pro_open
r_static
r_int
id|snd_ice1712_playback_pro_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_pro_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback_pro
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_msbits
c_func
(paren
id|runtime
comma
l_int|0
comma
l_int|32
comma
l_int|24
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_RATE
comma
op_amp
id|hw_constraints_rates
)paren
suffix:semicolon
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
id|ice-&gt;cs8403_spdif_bits
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
id|snd_cs8427_iec958_active
c_func
(paren
id|ice-&gt;cs8427
comma
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_open
r_static
r_int
id|snd_ice1712_capture_pro_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice-&gt;capture_pro_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_capture_pro
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_msbits
c_func
(paren
id|runtime
comma
l_int|0
comma
l_int|32
comma
l_int|24
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_RATE
comma
op_amp
id|hw_constraints_rates
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_close
r_static
r_int
id|snd_ice1712_playback_pro_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_pro_substream
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
id|snd_cs8427_iec958_active
c_func
(paren
id|ice-&gt;cs8427
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_close
r_static
r_int
id|snd_ice1712_capture_pro_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_pro_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_profi_free
r_static
r_void
id|snd_ice1712_pcm_profi_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|pcm-&gt;private_data
comma
r_return
)paren
suffix:semicolon
id|ice-&gt;pcm_pro
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_pro_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_pro_ops
op_assign
(brace
id|open
suffix:colon
id|snd_ice1712_playback_pro_open
comma
id|close
suffix:colon
id|snd_ice1712_playback_pro_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_ice1712_hw_params
comma
id|hw_free
suffix:colon
id|snd_ice1712_hw_free
comma
id|prepare
suffix:colon
id|snd_ice1712_playback_pro_prepare
comma
id|trigger
suffix:colon
id|snd_ice1712_pro_trigger
comma
id|pointer
suffix:colon
id|snd_ice1712_playback_pro_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_pro_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_capture_pro_ops
op_assign
(brace
id|open
suffix:colon
id|snd_ice1712_capture_pro_open
comma
id|close
suffix:colon
id|snd_ice1712_capture_pro_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_ice1712_hw_params
comma
id|hw_free
suffix:colon
id|snd_ice1712_hw_free
comma
id|prepare
suffix:colon
id|snd_ice1712_capture_pro_prepare
comma
id|trigger
suffix:colon
id|snd_ice1712_pro_trigger
comma
id|pointer
suffix:colon
id|snd_ice1712_capture_pro_pointer
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pcm_profi
r_static
r_int
id|__devinit
id|snd_ice1712_pcm_profi
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 multi&quot;
comma
id|device
comma
l_int|1
comma
l_int|1
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_pro_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_ice1712_capture_pro_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_profi_free
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 multi&quot;
)paren
suffix:semicolon
id|snd_pcm_lib_preallocate_pci_pages_for_all
c_func
(paren
id|ice-&gt;pci
comma
id|pcm
comma
l_int|256
op_star
l_int|1024
comma
l_int|256
op_star
l_int|1024
)paren
suffix:semicolon
id|ice-&gt;pcm_pro
op_assign
id|pcm
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
(brace
multiline_comment|/* assign channels to iec958 */
id|err
op_assign
id|snd_cs8427_iec958_build
c_func
(paren
id|ice-&gt;cs8427
comma
id|pcm-&gt;streams
(braket
l_int|0
)braket
dot
id|substream
comma
id|pcm-&gt;streams
(braket
l_int|1
)braket
dot
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  Mixer section&n; */
DECL|function|snd_ice1712_update_volume
r_static
r_void
id|snd_ice1712_update_volume
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|index
)paren
(brace
r_int
r_int
id|vol
op_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
r_int
r_int
id|val
op_assign
l_int|0
suffix:semicolon
id|val
op_or_assign
(paren
id|vol
op_amp
l_int|0x8000
)paren
op_eq
l_int|0
ques
c_cond
(paren
l_int|96
op_minus
(paren
id|vol
op_amp
l_int|0x7f
)paren
)paren
suffix:colon
l_int|0x7f
suffix:semicolon
id|val
op_or_assign
(paren
(paren
id|vol
op_amp
l_int|0x80000000
)paren
op_eq
l_int|0
ques
c_cond
(paren
l_int|96
op_minus
(paren
(paren
id|vol
op_rshift
l_int|16
)paren
op_amp
l_int|0x7f
)paren
)paren
suffix:colon
l_int|0x7f
)paren
op_lshift
l_int|8
suffix:semicolon
id|outb
c_func
(paren
id|index
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_VOLUME
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_info
r_static
r_int
id|snd_ice1712_pro_mixer_switch_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_get
r_static
r_int
id|snd_ice1712_pro_mixer_switch_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|index
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
op_logical_neg
(paren
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|15
)paren
op_amp
l_int|1
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
op_logical_neg
(paren
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|31
)paren
op_amp
l_int|1
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_put
r_static
r_int
id|snd_ice1712_pro_mixer_switch_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|nval
comma
id|change
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x00008000
)paren
op_or
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x80000000
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|nval
op_or_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_amp
op_complement
l_int|0x80008000
suffix:semicolon
id|change
op_assign
id|nval
op_ne
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_assign
id|nval
suffix:semicolon
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|index
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_info
r_static
r_int
id|snd_ice1712_pro_mixer_volume_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|96
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_get
r_static
r_int
id|snd_ice1712_pro_mixer_volume_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|index
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|0
)paren
op_amp
l_int|127
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|127
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_put
r_static
r_int
id|snd_ice1712_pro_mixer_volume_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|nval
comma
id|change
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|127
)paren
op_or
(paren
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
l_int|127
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|nval
op_or_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_amp
op_complement
l_int|0x007f007f
suffix:semicolon
id|change
op_assign
id|nval
op_ne
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_assign
id|nval
suffix:semicolon
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|index
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_volume_info
r_static
r_int
id|snd_ice1712_ak4524_volume_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|127
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_volume_get
r_static
r_int
id|snd_ice1712_ak4524_volume_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;private_value
op_div
l_int|8
suffix:semicolon
r_int
id|addr
op_assign
id|kcontrol-&gt;private_value
op_mod
l_int|8
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
id|addr
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_volume_put
r_static
r_int
id|snd_ice1712_ak4524_volume_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;private_value
op_div
l_int|8
suffix:semicolon
r_int
id|addr
op_assign
id|kcontrol-&gt;private_value
op_mod
l_int|8
suffix:semicolon
r_int
r_char
id|nval
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
r_int
id|change
op_assign
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
id|addr
)braket
op_ne
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
id|addr
comma
id|nval
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_ipga_gain_info
r_static
r_int
id|snd_ice1712_ak4524_ipga_gain_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|36
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_ipga_gain_get
r_static
r_int
id|snd_ice1712_ak4524_ipga_gain_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;private_value
op_div
l_int|8
suffix:semicolon
r_int
id|addr
op_assign
id|kcontrol-&gt;private_value
op_mod
l_int|8
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|ice-&gt;ak4524_ipga_gain
(braket
id|chip
)braket
(braket
id|addr
op_minus
l_int|4
)braket
op_amp
l_int|0x7f
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_ipga_gain_put
r_static
r_int
id|snd_ice1712_ak4524_ipga_gain_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;private_value
op_div
l_int|8
suffix:semicolon
r_int
id|addr
op_assign
id|kcontrol-&gt;private_value
op_mod
l_int|8
suffix:semicolon
r_int
r_char
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_mod
l_int|37
)paren
op_or
l_int|0x80
suffix:semicolon
r_int
id|change
op_assign
id|ice-&gt;ak4524_ipga_gain
(braket
id|chip
)braket
(braket
id|addr
)braket
op_ne
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
id|addr
comma
id|nval
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_deemphasis_info
r_static
r_int
id|snd_ice1712_ak4524_deemphasis_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;44.1kHz&quot;
comma
l_string|&quot;Off&quot;
comma
l_string|&quot;48kHz&quot;
comma
l_string|&quot;32kHz&quot;
comma
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
l_int|4
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|3
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_deemphasis_get
r_static
r_int
id|snd_ice1712_ak4524_deemphasis_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
l_int|3
)braket
op_amp
l_int|3
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_deemphasis_put
r_static
r_int
id|snd_ice1712_ak4524_deemphasis_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|chip
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_char
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
suffix:semicolon
r_int
id|change
suffix:semicolon
id|nval
op_or_assign
(paren
id|nval
op_amp
l_int|3
)paren
op_or
(paren
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
l_int|3
)braket
op_amp
op_complement
l_int|3
)paren
suffix:semicolon
id|change
op_assign
id|ice-&gt;ak4524_images
(braket
id|chip
)braket
(braket
l_int|3
)braket
op_ne
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
l_int|3
comma
id|nval
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_build_pro_mixer
r_static
r_int
id|__init
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|ice-&gt;card
suffix:semicolon
id|snd_kcontrol_t
id|ctl
suffix:semicolon
r_int
id|idx
comma
id|err
suffix:semicolon
multiline_comment|/* PCM playback */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|10
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;Multi Playback Switch&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_pro_mixer_switch_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_pro_mixer_switch_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_pro_mixer_switch_put
suffix:semicolon
id|ctl.private_value
op_assign
id|idx
suffix:semicolon
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;Multi Playback Volume&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_pro_mixer_volume_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_pro_mixer_volume_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_pro_mixer_volume_put
suffix:semicolon
id|ctl.private_value
op_assign
id|idx
suffix:semicolon
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* PCM capture */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|10
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;Multi Capture Switch&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_pro_mixer_switch_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_pro_mixer_switch_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_pro_mixer_switch_put
suffix:semicolon
id|ctl.private_value
op_assign
id|idx
op_plus
l_int|10
suffix:semicolon
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;Multi Capture Volume&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_pro_mixer_volume_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_pro_mixer_volume_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_pro_mixer_volume_put
suffix:semicolon
id|ctl.private_value
op_assign
id|idx
op_plus
l_int|10
suffix:semicolon
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* initialize volumes */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|20
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|ice-&gt;pro_volumes
(braket
id|idx
)braket
op_assign
l_int|0x80008000
suffix:semicolon
multiline_comment|/* mute */
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_init
r_static
r_void
id|snd_ice1712_ac97_init
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
singleline_comment|// ice1712_t *ice = snd_magic_cast(ice1712_t, ac97-&gt;private_data, return);
multiline_comment|/* disable center DAC/surround DAC/LFE DAC/MIC ADC */
id|snd_ac97_update_bits
c_func
(paren
id|ac97
comma
id|AC97_EXTENDED_STATUS
comma
l_int|0xe800
comma
l_int|0xe800
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_mixer_free_ac97
r_static
r_void
id|snd_ice1712_mixer_free_ac97
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|ac97-&gt;private_data
comma
r_return
)paren
suffix:semicolon
id|ice-&gt;ac97
op_assign
l_int|NULL
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_mixer
r_static
r_int
id|__devinit
id|snd_ice1712_ac97_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
)paren
(brace
id|ac97_t
id|ac97
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ac97
comma
l_int|0
comma
r_sizeof
(paren
id|ac97
)paren
)paren
suffix:semicolon
id|ac97.write
op_assign
id|snd_ice1712_ac97_write
suffix:semicolon
id|ac97.read
op_assign
id|snd_ice1712_ac97_read
suffix:semicolon
id|ac97.init
op_assign
id|snd_ice1712_ac97_init
suffix:semicolon
id|ac97.private_data
op_assign
id|ice
suffix:semicolon
id|ac97.private_free
op_assign
id|snd_ice1712_mixer_free_ac97
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_mixer
c_func
(paren
id|ice-&gt;card
comma
op_amp
id|ac97
comma
op_amp
id|ice-&gt;ac97
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;ice1712: cannot initialize ac97 for consumer, skipped&bslash;n&quot;
)paren
suffix:semicolon
singleline_comment|// return err;
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_digmix_route_ac97
comma
id|ice
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* hmm.. can we have both consumer and pro ac97 mixers? */
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.aclink
op_amp
id|ICE1712_CFG_PRO_I2S
)paren
)paren
(brace
id|ac97_t
id|ac97
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ac97
comma
l_int|0
comma
r_sizeof
(paren
id|ac97
)paren
)paren
suffix:semicolon
id|ac97.write
op_assign
id|snd_ice1712_pro_ac97_write
suffix:semicolon
id|ac97.read
op_assign
id|snd_ice1712_pro_ac97_read
suffix:semicolon
id|ac97.init
op_assign
id|snd_ice1712_ac97_init
suffix:semicolon
id|ac97.private_data
op_assign
id|ice
suffix:semicolon
id|ac97.private_free
op_assign
id|snd_ice1712_mixer_free_ac97
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_mixer
c_func
(paren
id|ice-&gt;card
comma
op_amp
id|ac97
comma
op_amp
id|ice-&gt;ac97
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;ice1712: cannot initialize pro ac97, skipped&bslash;n&quot;
)paren
suffix:semicolon
singleline_comment|// return err;
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* I2S mixer only */
id|strcat
c_func
(paren
id|ice-&gt;card-&gt;mixername
comma
l_string|&quot;ICE1712 - multitrack&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_ice1712_proc_read
r_static
r_void
id|snd_ice1712_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|entry-&gt;private_data
comma
r_return
)paren
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;ICE1712&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;EEPROM:&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Subvendor        : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.subvendor
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Size             : %i bytes&bslash;n&quot;
comma
id|ice-&gt;eeprom.size
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Version          : %i&bslash;n&quot;
comma
id|ice-&gt;eeprom.version
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Codec            : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.codec
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  ACLink           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.aclink
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  I2S ID           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.i2sID
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  S/PDIF           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.spdif
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO mask        : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiomask
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO state       : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiostate
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO direction   : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiodir
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 main       : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.ac97main
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 pcm        : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.ac97pcm
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 record     : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.ac97rec
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 record src : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.ac97recsrc
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|4
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  DAC ID #%i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.dacID
(braket
id|idx
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|4
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  ADC ID #%i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.adcID
(braket
id|idx
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0x1c
suffix:semicolon
id|idx
OL
id|ice-&gt;eeprom.size
op_logical_and
id|idx
OL
l_int|0x1c
op_plus
r_sizeof
(paren
id|ice-&gt;eeprom.extra
)paren
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Extra #%02i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.extra
(braket
id|idx
op_minus
l_int|0x1c
)braket
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_proc_init
r_static
r_void
id|__devinit
id|snd_ice1712_proc_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ice1712&quot;
comma
id|ice-&gt;card-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|entry-&gt;content
op_assign
id|SNDRV_INFO_CONTENT_TEXT
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
suffix:semicolon
id|entry-&gt;c.text.read_size
op_assign
l_int|2048
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_ice1712_proc_read
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|ice-&gt;proc_entry
op_assign
id|entry
suffix:semicolon
)brace
DECL|function|snd_ice1712_proc_done
r_static
r_void
id|snd_ice1712_proc_done
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;proc_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|ice-&gt;proc_entry
)paren
suffix:semicolon
id|ice-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_ice1712_eeprom_info
r_static
r_int
id|snd_ice1712_eeprom_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BYTES
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|32
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_eeprom_get
r_static
r_int
id|snd_ice1712_eeprom_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|ucontrol-&gt;value.bytes.data
comma
op_amp
id|ice-&gt;eeprom
comma
l_int|32
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_eeprom
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_CARD
comma
id|name
suffix:colon
l_string|&quot;ICE1712 EEPROM&quot;
comma
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|info
suffix:colon
id|snd_ice1712_eeprom_info
comma
id|get
suffix:colon
id|snd_ice1712_eeprom_get
)brace
suffix:semicolon
multiline_comment|/*&n; */
DECL|function|snd_ice1712_spdif_default_info
r_static
r_int
id|snd_ice1712_spdif_default_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_default_get
r_static
r_int
id|snd_ice1712_spdif_default_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|snd_cs8403_decode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|ice-&gt;cs8403_spdif_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|snd_cs8404_decode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|ice-&gt;cs8403_spdif_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_default_put
r_static
r_int
id|snd_ice1712_spdif_default_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|val
op_assign
id|snd_cs8403_encode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|ice-&gt;cs8403_spdif_bits
op_ne
id|val
suffix:semicolon
id|ice-&gt;cs8403_spdif_bits
op_assign
id|val
suffix:semicolon
r_if
c_cond
(paren
id|change
op_logical_and
id|ice-&gt;playback_pro_substream
op_eq
l_int|NULL
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_delta_cs8403_spdif_write
c_func
(paren
id|ice
comma
id|val
)paren
suffix:semicolon
)brace
r_else
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|val
op_assign
id|snd_cs8404_encode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|ice-&gt;cs8403_spdif_bits
op_ne
id|val
suffix:semicolon
id|ice-&gt;cs8403_spdif_bits
op_assign
id|val
suffix:semicolon
r_if
c_cond
(paren
id|change
op_logical_and
id|ice-&gt;playback_pro_substream
op_eq
l_int|NULL
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_ews_cs8404_spdif_write
c_func
(paren
id|ice
comma
id|val
)paren
suffix:semicolon
)brace
r_else
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|change
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_default
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
id|info
suffix:colon
id|snd_ice1712_spdif_default_info
comma
id|get
suffix:colon
id|snd_ice1712_spdif_default_get
comma
id|put
suffix:colon
id|snd_ice1712_spdif_default_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_spdif_mask_info
r_static
r_int
id|snd_ice1712_spdif_mask_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_maskc_get
r_static
r_int
id|snd_ice1712_spdif_maskc_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
op_or
id|IEC958_AES0_CON_EMPHASIS
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_CON_ORIGINAL
op_or
id|IEC958_AES1_CON_CATEGORY
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
id|IEC958_AES3_CON_FS
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|4
)braket
op_assign
l_int|0xff
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_maskp_get
r_static
r_int
id|snd_ice1712_spdif_maskp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_PRO_MODE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|4
)braket
op_assign
l_int|0xff
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_maskc
id|__devinitdata
op_assign
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
id|info
suffix:colon
id|snd_ice1712_spdif_mask_info
comma
id|get
suffix:colon
id|snd_ice1712_spdif_maskc_get
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_maskp
id|__devinitdata
op_assign
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
id|info
suffix:colon
id|snd_ice1712_spdif_mask_info
comma
id|get
suffix:colon
id|snd_ice1712_spdif_maskp_get
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_spdif_stream_info
r_static
r_int
id|snd_ice1712_spdif_stream_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_stream_get
r_static
r_int
id|snd_ice1712_spdif_stream_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|snd_cs8403_decode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|ice-&gt;cs8403_spdif_stream_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|snd_cs8404_decode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|ice-&gt;cs8403_spdif_stream_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_stream_put
r_static
r_int
id|snd_ice1712_spdif_stream_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|val
op_assign
id|snd_cs8403_encode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
op_ne
id|val
suffix:semicolon
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
id|val
suffix:semicolon
r_if
c_cond
(paren
id|change
op_logical_and
id|ice-&gt;playback_pro_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_delta_cs8403_spdif_write
c_func
(paren
id|ice
comma
id|val
)paren
suffix:semicolon
)brace
r_else
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|val
op_assign
id|snd_cs8404_encode_spdif_bits
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
op_ne
id|val
suffix:semicolon
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
id|val
suffix:semicolon
r_if
c_cond
(paren
id|change
op_logical_and
id|ice-&gt;playback_pro_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_ice1712_ews_cs8404_spdif_write
c_func
(paren
id|ice
comma
id|val
)paren
suffix:semicolon
)brace
r_else
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|change
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_stream
id|__devinitdata
op_assign
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
op_or
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PCM_STREAM
)paren
comma
id|info
suffix:colon
id|snd_ice1712_spdif_stream_info
comma
id|get
suffix:colon
id|snd_ice1712_spdif_stream_get
comma
id|put
suffix:colon
id|snd_ice1712_spdif_stream_put
)brace
suffix:semicolon
DECL|macro|ICE1712_GPIO
mdefine_line|#define ICE1712_GPIO(xiface, xname, xindex, mask, invert, xaccess) &bslash;&n;{ iface: xiface, name: xname, access: xaccess, info: snd_ice1712_gpio_info, &bslash;&n;  get: snd_ice1712_gpio_get, put: snd_ice1712_gpio_put, &bslash;&n;  private_value: mask | (invert &lt;&lt; 24) }
DECL|function|snd_ice1712_gpio_info
r_static
r_int
id|snd_ice1712_gpio_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_gpio_get
r_static
r_int
id|snd_ice1712_gpio_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|24
)paren
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_int
r_char
id|saved
(braket
l_int|2
)braket
suffix:semicolon
id|save_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
op_amp
id|mask
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
op_xor
id|invert
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_gpio_put
r_static
r_int
id|snd_ice1712_gpio_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|24
)paren
)paren
ques
c_cond
id|mask
suffix:colon
l_int|0
suffix:semicolon
r_int
r_char
id|saved
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|val
comma
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|31
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
id|mask
suffix:colon
l_int|0
)paren
op_xor
id|invert
suffix:semicolon
id|save_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
id|val
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
id|nval
op_or_assign
id|val
op_amp
op_complement
id|mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|nval
)paren
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
r_return
id|val
op_ne
id|nval
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_delta1010_wordclock_select
id|__devinitdata
op_assign
id|ICE1712_GPIO
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
l_string|&quot;Word Clock Sync&quot;
comma
l_int|0
comma
id|ICE1712_DELTA_WORD_CLOCK_SELECT
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_delta1010_wordclock_status
id|__devinitdata
op_assign
id|ICE1712_GPIO
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
l_string|&quot;Word Clock Status&quot;
comma
l_int|0
comma
id|ICE1712_DELTA_WORD_CLOCK_STATUS
comma
l_int|1
comma
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
)paren
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_deltadio2496_spdif_in_select
id|__devinitdata
op_assign
id|ICE1712_GPIO
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
l_string|&quot;IEC958 Input Optical&quot;
comma
l_int|0
comma
id|ICE1712_DELTA_SPDIF_INPUT_SELECT
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_delta_spdif_in_status
id|__devinitdata
op_assign
id|ICE1712_GPIO
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
l_string|&quot;Delta IEC958 Input Status&quot;
comma
l_int|0
comma
id|ICE1712_DELTA_SPDIF_IN_STAT
comma
l_int|1
comma
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
)paren
suffix:semicolon
DECL|function|snd_ice1712_pro_spdif_master_info
r_static
r_int
id|snd_ice1712_pro_spdif_master_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_spdif_master_get
r_static
r_int
id|snd_ice1712_pro_spdif_master_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
id|ICE1712_SPDIF_MASTER
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_spdif_master_put
r_static
r_int
id|snd_ice1712_pro_spdif_master_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|nval
comma
id|change
suffix:semicolon
id|nval
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
id|ICE1712_SPDIF_MASTER
suffix:colon
l_int|0
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|nval
op_or_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
op_complement
id|ICE1712_SPDIF_MASTER
suffix:semicolon
id|change
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_ne
id|nval
suffix:semicolon
id|outb
c_func
(paren
id|nval
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
(brace
multiline_comment|/* change CS8427 clock source too */
id|snd_ice1712_cs8427_set_input_clock
c_func
(paren
id|ice
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_pro_spdif_master
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Multi Track IEC958 Master&quot;
comma
id|info
suffix:colon
id|snd_ice1712_pro_spdif_master_info
comma
id|get
suffix:colon
id|snd_ice1712_pro_spdif_master_get
comma
id|put
suffix:colon
id|snd_ice1712_pro_spdif_master_put
)brace
suffix:semicolon
multiline_comment|/*&n; * routing&n; */
DECL|function|snd_ice1712_pro_route_info
r_static
r_int
id|snd_ice1712_pro_route_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;PCM Out&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;H/W In 0&quot;
comma
l_string|&quot;H/W In 1&quot;
comma
l_string|&quot;H/W In 2&quot;
comma
l_string|&quot;H/W In 3&quot;
comma
multiline_comment|/* 1-4 */
l_string|&quot;H/W In 4&quot;
comma
l_string|&quot;H/W In 5&quot;
comma
l_string|&quot;H/W In 6&quot;
comma
l_string|&quot;H/W In 7&quot;
comma
multiline_comment|/* 5-8 */
l_string|&quot;IEC958 In L&quot;
comma
l_string|&quot;IEC958 In R&quot;
comma
multiline_comment|/* 9-10 */
l_string|&quot;Digital Mixer&quot;
comma
multiline_comment|/* 11 - optional */
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
id|kcontrol-&gt;id.index
OL
l_int|2
ques
c_cond
l_int|12
suffix:colon
l_int|11
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_analog_get
r_static
r_int
id|snd_ice1712_pro_route_analog_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_int
id|val
comma
id|cval
suffix:semicolon
id|val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
id|val
op_rshift_assign
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|2
)paren
suffix:semicolon
id|val
op_and_assign
l_int|3
suffix:semicolon
id|cval
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
id|cval
op_rshift_assign
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|1
op_logical_and
id|idx
OL
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|11
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|cval
op_amp
l_int|7
)paren
op_plus
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|3
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|cval
op_rshift
l_int|3
)paren
op_amp
l_int|1
)paren
op_plus
l_int|9
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_analog_put
r_static
r_int
id|snd_ice1712_pro_route_analog_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
comma
id|shift
suffix:semicolon
r_int
id|idx
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_int
id|val
comma
id|old_val
comma
id|nval
suffix:semicolon
multiline_comment|/* update PSDOUT */
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|11
)paren
id|nval
op_assign
id|idx
OL
l_int|2
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
multiline_comment|/* dig mixer (or pcm) */
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|9
)paren
id|nval
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* spdif in */
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|1
)paren
id|nval
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* analog in */
r_else
id|nval
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* pcm */
id|shift
op_assign
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|2
)paren
suffix:semicolon
id|val
op_assign
id|old_val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x03
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|old_val
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nval
OL
l_int|2
)paren
multiline_comment|/* dig mixer of pcm */
r_return
id|change
suffix:semicolon
multiline_comment|/* update CAPTURE */
id|val
op_assign
id|old_val
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
id|shift
op_assign
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nval
op_eq
l_int|2
)paren
(brace
multiline_comment|/* analog in */
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x07
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* spdif in */
id|nval
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|9
)paren
op_lshift
l_int|3
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x08
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_ne
id|old_val
)paren
(brace
id|change
op_assign
l_int|1
suffix:semicolon
id|outl
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_spdif_get
r_static
r_int
id|snd_ice1712_pro_route_spdif_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_int
id|val
comma
id|cval
suffix:semicolon
id|val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
id|cval
op_assign
(paren
id|val
op_rshift
(paren
id|idx
op_star
l_int|4
op_plus
l_int|8
)paren
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
(paren
id|idx
op_star
l_int|2
)paren
)paren
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|1
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|11
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|cval
op_amp
l_int|7
)paren
op_plus
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|3
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|cval
op_rshift
l_int|3
)paren
op_amp
l_int|1
)paren
op_plus
l_int|9
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_spdif_put
r_static
r_int
id|snd_ice1712_pro_route_spdif_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
comma
id|shift
suffix:semicolon
r_int
id|idx
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_int
id|val
comma
id|old_val
comma
id|nval
suffix:semicolon
multiline_comment|/* update SPDOUT */
id|val
op_assign
id|old_val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|11
)paren
id|nval
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|9
)paren
id|nval
op_assign
l_int|3
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|1
)paren
id|nval
op_assign
l_int|2
suffix:semicolon
r_else
id|nval
op_assign
l_int|0
suffix:semicolon
id|shift
op_assign
id|idx
op_star
l_int|2
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x03
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
id|shift
op_assign
id|idx
op_star
l_int|4
op_plus
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|nval
op_eq
l_int|2
)paren
(brace
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x07
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|nval
op_eq
l_int|3
)paren
(brace
id|nval
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|9
)paren
op_lshift
l_int|3
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x08
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
id|change
op_assign
id|val
op_ne
id|old_val
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_analog_route
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;H/W Playback Route&quot;
comma
id|info
suffix:colon
id|snd_ice1712_pro_route_info
comma
id|get
suffix:colon
id|snd_ice1712_pro_route_analog_get
comma
id|put
suffix:colon
id|snd_ice1712_pro_route_analog_put
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_spdif_route
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;IEC958 Playback Route&quot;
comma
id|info
suffix:colon
id|snd_ice1712_pro_route_info
comma
id|get
suffix:colon
id|snd_ice1712_pro_route_spdif_get
comma
id|put
suffix:colon
id|snd_ice1712_pro_route_spdif_put
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_volume_rate_info
r_static
r_int
id|snd_ice1712_pro_volume_rate_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|255
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_volume_rate_get
r_static
r_int
id|snd_ice1712_pro_volume_rate_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_volume_rate_put
r_static
r_int
id|snd_ice1712_pro_volume_rate_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
op_ne
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|outb
c_func
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_volume_rate
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Multi Track Volume Rate&quot;
comma
id|info
suffix:colon
id|snd_ice1712_pro_volume_rate_info
comma
id|get
suffix:colon
id|snd_ice1712_pro_volume_rate_get
comma
id|put
suffix:colon
id|snd_ice1712_pro_volume_rate_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_peak_info
r_static
r_int
id|snd_ice1712_pro_peak_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|22
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|255
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_peak_get
r_static
r_int
id|snd_ice1712_pro_peak_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|idx
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|22
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|outb
c_func
(paren
id|idx
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_PEAKINDEX
)paren
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|idx
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_PEAKDATA
)paren
)paren
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_peak
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Multi Track Peak&quot;
comma
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
id|info
suffix:colon
id|snd_ice1712_pro_peak_info
comma
id|get
suffix:colon
id|snd_ice1712_pro_peak_get
)brace
suffix:semicolon
multiline_comment|/*&n; * EWX 24/96&n; */
DECL|function|snd_ice1712_ewx_io_sense_info
r_static
r_int
(def_block
id|snd_ice1712_ewx_io_sense_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;+4dBu&quot;
comma
l_string|&quot;-10dBV&quot;
comma
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
l_int|2
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)def_block
DECL|function|snd_ice1712_ewx_io_sense_get
r_static
r_int
id|snd_ice1712_ewx_io_sense_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
r_char
id|saved
(braket
l_int|2
)braket
suffix:semicolon
id|save_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
op_amp
id|mask
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ewx_io_sense_put
r_static
r_int
id|snd_ice1712_ewx_io_sense_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
r_char
id|saved
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|val
comma
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|31
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
ques
c_cond
id|mask
suffix:colon
l_int|0
suffix:semicolon
id|save_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
id|val
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
id|nval
op_or_assign
id|val
op_amp
op_complement
id|mask
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|nval
)paren
suffix:semicolon
id|restore_gpio_status
c_func
(paren
id|ice
comma
id|saved
)paren
suffix:semicolon
r_return
id|val
op_ne
id|nval
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_ewx_input_sense
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Input Sensitivity Switch&quot;
comma
id|info
suffix:colon
id|snd_ice1712_ewx_io_sense_info
comma
id|get
suffix:colon
id|snd_ice1712_ewx_io_sense_get
comma
id|put
suffix:colon
id|snd_ice1712_ewx_io_sense_put
comma
id|private_value
suffix:colon
id|ICE1712_EWX2496_AIN_SEL
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_ewx_output_sense
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Output Sensitivity Switch&quot;
comma
id|info
suffix:colon
id|snd_ice1712_ewx_io_sense_info
comma
id|get
suffix:colon
id|snd_ice1712_ewx_io_sense_get
comma
id|put
suffix:colon
id|snd_ice1712_ewx_io_sense_put
comma
id|private_value
suffix:colon
id|ICE1712_EWX2496_AOUT_SEL
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * EWS88MT&n; */
multiline_comment|/* analog output sensitivity;; address 0x48 bit 6 */
DECL|function|snd_ice1712_ews88mt_output_sense_get
r_static
r_int
id|snd_ice1712_ews88mt_output_sense_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|data
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
comma
op_amp
id|data
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|data
op_amp
id|ICE1712_EWS88MT_OUTPUT_SENSE
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
multiline_comment|/* high = -10dBV, low = +4dBu */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* analog output sensitivity;; address 0x48 bit 6 */
DECL|function|snd_ice1712_ews88mt_output_sense_put
r_static
r_int
id|snd_ice1712_ews88mt_output_sense_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|data
comma
id|ndata
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
comma
op_amp
id|data
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|ndata
op_assign
(paren
id|data
op_amp
op_complement
id|ICE1712_EWS88MT_OUTPUT_SENSE
)paren
op_or
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
ques
c_cond
id|ICE1712_EWS88MT_OUTPUT_SENSE
suffix:colon
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ndata
op_ne
id|data
op_logical_and
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
comma
op_amp
id|ndata
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
id|ndata
op_ne
id|data
suffix:semicolon
)brace
multiline_comment|/* analog input sensitivity; address 0x46 */
DECL|function|snd_ice1712_ews88mt_input_sense_get
r_static
r_int
id|snd_ice1712_ews88mt_input_sense_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|channel
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_char
id|data
suffix:semicolon
id|snd_assert
c_func
(paren
id|channel
op_ge
l_int|0
op_logical_and
id|channel
op_le
l_int|7
comma
r_return
l_int|0
)paren
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|0
)braket
comma
op_amp
id|data
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
multiline_comment|/* reversed; high = +4dBu, low = -10dBV */
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|data
op_amp
(paren
l_int|1
op_lshift
id|channel
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* analog output sensitivity; address 0x46 */
DECL|function|snd_ice1712_ews88mt_input_sense_put
r_static
r_int
id|snd_ice1712_ews88mt_input_sense_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|channel
op_assign
id|kcontrol-&gt;id.index
suffix:semicolon
r_int
r_char
id|data
comma
id|ndata
suffix:semicolon
id|snd_assert
c_func
(paren
id|channel
op_ge
l_int|0
op_logical_and
id|channel
op_le
l_int|7
comma
r_return
l_int|0
)paren
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|0
)braket
comma
op_amp
id|data
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|ndata
op_assign
(paren
id|data
op_amp
op_complement
(paren
l_int|1
op_lshift
id|channel
)paren
)paren
op_or
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
(paren
l_int|1
op_lshift
id|channel
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ndata
op_ne
id|data
op_logical_and
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8574
(braket
l_int|0
)braket
comma
op_amp
id|ndata
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
id|ndata
op_ne
id|data
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_ews88mt_input_sense
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Input Sensitivity Switch&quot;
comma
id|info
suffix:colon
id|snd_ice1712_ewx_io_sense_info
comma
id|get
suffix:colon
id|snd_ice1712_ews88mt_input_sense_get
comma
id|put
suffix:colon
id|snd_ice1712_ews88mt_input_sense_put
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_ews88mt_output_sense
id|__devinitdata
op_assign
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
l_string|&quot;Output Sensitivity Switch&quot;
comma
id|info
suffix:colon
id|snd_ice1712_ewx_io_sense_info
comma
id|get
suffix:colon
id|snd_ice1712_ews88mt_output_sense_get
comma
id|put
suffix:colon
id|snd_ice1712_ews88mt_output_sense_put
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * EWS88D controls&n; */
DECL|function|snd_ice1712_ews88d_control_info
r_static
r_int
id|snd_ice1712_ews88d_control_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ews88d_control_get
r_static
r_int
id|snd_ice1712_ews88d_control_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|1
suffix:semicolon
r_int
r_char
id|data
(braket
l_int|2
)braket
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|data
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
(paren
id|data
(braket
id|shift
op_rshift
l_int|3
)braket
op_rshift
(paren
id|shift
op_amp
l_int|7
)paren
)paren
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|data
(braket
l_int|0
)braket
op_xor_assign
l_int|0x01
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|data
(braket
l_int|0
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ews88d_control_put
r_static
r_int
id|snd_ice1712_ews88d_control_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|1
suffix:semicolon
r_int
r_char
id|data
(braket
l_int|2
)braket
comma
id|ndata
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|data
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|ndata
(braket
id|shift
op_rshift
l_int|3
)braket
op_assign
id|data
(braket
id|shift
op_rshift
l_int|3
)braket
op_amp
op_complement
(paren
l_int|1
op_lshift
(paren
id|shift
op_amp
l_int|7
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|ndata
(braket
id|shift
op_rshift
l_int|3
)braket
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|shift
op_amp
l_int|7
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|ndata
(braket
id|shift
op_rshift
l_int|3
)braket
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|shift
op_amp
l_int|7
)paren
)paren
suffix:semicolon
)brace
id|change
op_assign
(paren
id|data
(braket
id|shift
op_rshift
l_int|3
)braket
op_ne
id|ndata
(braket
id|shift
op_rshift
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
op_logical_and
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|data
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|macro|EWS88D_CONTROL
mdefine_line|#define EWS88D_CONTROL(xiface, xname, xshift, xinvert, xaccess) &bslash;&n;{ iface: xiface,&bslash;&n;  name: xname,&bslash;&n;  access: xaccess,&bslash;&n;  info: snd_ice1712_ews88d_control_info,&bslash;&n;  get: snd_ice1712_ews88d_control_get,&bslash;&n;  put: snd_ice1712_ews88d_control_put,&bslash;&n;  private_value: xshift | (xinvert &lt;&lt; 8),&bslash;&n;}
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_ews88d_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
id|EWS88D_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;IEC958 Input Optical&quot;
comma
l_int|0
comma
l_int|1
comma
l_int|0
)paren
comma
multiline_comment|/* inverted */
id|EWS88D_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;ADAT Output Optical&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)paren
comma
id|EWS88D_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;ADAT External Master Clock&quot;
comma
l_int|2
comma
l_int|0
comma
l_int|0
)paren
comma
id|EWS88D_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;Enable ADAT&quot;
comma
l_int|3
comma
l_int|0
comma
l_int|0
)paren
comma
id|EWS88D_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;ADAT Through&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
)paren
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * DMX 6Fire controls&n; */
macro_line|#if 0 
singleline_comment|// XXX not working yet
r_static
r_int
id|snd_ice1712_6fire_read_pca
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_char
id|byte
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
id|byte
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* read port */
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
op_amp
id|byte
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
op_amp
id|byte
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
id|byte
suffix:semicolon
)brace
r_static
r_int
id|snd_ice1712_6fire_write_pca
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|data
)paren
(brace
r_int
r_char
id|bytes
(braket
l_int|2
)braket
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
id|bytes
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* write port */
id|bytes
(braket
l_int|1
)braket
op_assign
id|data
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;pcf8575
comma
id|bytes
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EREMOTE
suffix:semicolon
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|snd_ice1712_6fire_control_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|snd_ice1712_6fire_control_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|1
suffix:semicolon
r_int
id|data
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data
op_assign
id|snd_ice1712_6fire_read_pca
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
r_return
id|data
suffix:semicolon
id|data
op_assign
(paren
id|data
op_rshift
id|shift
)paren
op_amp
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|data
op_xor_assign
l_int|1
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|data
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|snd_ice1712_6fire_control_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|shift
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_rshift
l_int|8
)paren
op_amp
l_int|1
suffix:semicolon
r_int
id|data
comma
id|ndata
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data
op_assign
id|snd_ice1712_6fire_read_pca
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
r_return
id|data
suffix:semicolon
id|ndata
op_assign
id|data
op_amp
op_complement
(paren
l_int|1
op_lshift
id|shift
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|ndata
op_or_assign
(paren
l_int|1
op_lshift
id|shift
)paren
suffix:semicolon
r_if
c_cond
(paren
id|invert
)paren
id|ndata
op_xor_assign
(paren
l_int|1
op_lshift
id|shift
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_ne
id|ndata
)paren
(brace
id|snd_ice1712_6fire_write_pca
c_func
(paren
id|ice
comma
(paren
r_int
r_char
)paren
id|ndata
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
mdefine_line|#define DMX6FIRE_CONTROL(xiface, xname, xshift, xinvert, xaccess) &bslash;&n;{ iface: xiface,&bslash;&n;  name: xname,&bslash;&n;  access: xaccess,&bslash;&n;  info: snd_ice1712_6fire_control_info,&bslash;&n;  get: snd_ice1712_6fire_control_get,&bslash;&n;  put: snd_ice1712_6fire_control_put,&bslash;&n;  private_value: xshift | (xinvert &lt;&lt; 8),&bslash;&n;}
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_6fire_led
id|__devinitdata
op_assign
id|DMX6FIRE_CONTROL
c_func
(paren
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
l_string|&quot;Breakbox LED&quot;
comma
l_int|6
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
macro_line|#endif 
singleline_comment|// XXX not working yet
multiline_comment|/*&n; *&n; */
DECL|function|snd_ice1712_read_i2c
r_static
r_int
r_char
id|__devinit
id|snd_ice1712_read_i2c
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|dev
comma
r_int
r_char
id|addr
)paren
(brace
r_int
id|t
op_assign
l_int|0x10000
suffix:semicolon
id|outb
c_func
(paren
id|addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_BYTE_ADDR
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|dev
op_amp
op_complement
id|ICE1712_I2C_WRITE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_DEV_ADDR
)paren
)paren
suffix:semicolon
r_while
c_loop
(paren
id|t
op_decrement
OG
l_int|0
op_logical_and
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_CTRL
)paren
)paren
op_amp
id|ICE1712_I2C_BUSY
)paren
)paren
suffix:semicolon
r_return
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_read_eeprom
r_static
r_int
id|__devinit
id|snd_ice1712_read_eeprom
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|dev
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EEPROM device address */
r_int
r_int
id|idx
suffix:semicolon
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_CTRL
)paren
)paren
op_amp
id|ICE1712_I2C_EEPROM
)paren
op_eq
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;ICE1712 has not detected EEPROM&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;eeprom.subvendor
op_assign
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x00
)paren
op_lshift
l_int|0
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x01
)paren
op_lshift
l_int|8
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x02
)paren
op_lshift
l_int|16
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x03
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
id|ice-&gt;eeprom.size
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.size
OL
l_int|28
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;invalid EEPROM (size = %i)&bslash;n&quot;
comma
id|ice-&gt;eeprom.size
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;eeprom.version
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x05
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.version
op_ne
l_int|1
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;invalid EEPROM version %i&bslash;n&quot;
comma
id|ice-&gt;eeprom.version
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;eeprom.codec
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x06
)paren
suffix:semicolon
id|ice-&gt;eeprom.aclink
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x07
)paren
suffix:semicolon
id|ice-&gt;eeprom.i2sID
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x08
)paren
suffix:semicolon
id|ice-&gt;eeprom.spdif
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x09
)paren
suffix:semicolon
id|ice-&gt;eeprom.gpiomask
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0a
)paren
suffix:semicolon
id|ice-&gt;eeprom.gpiostate
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0b
)paren
suffix:semicolon
id|ice-&gt;eeprom.gpiodir
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0c
)paren
suffix:semicolon
id|ice-&gt;eeprom.ac97main
op_assign
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0d
)paren
op_lshift
l_int|0
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0e
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|ice-&gt;eeprom.ac97pcm
op_assign
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x0f
)paren
op_lshift
l_int|0
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x10
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|ice-&gt;eeprom.ac97rec
op_assign
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x11
)paren
op_lshift
l_int|0
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x12
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|ice-&gt;eeprom.ac97recsrc
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x13
)paren
op_lshift
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|4
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|ice-&gt;eeprom.dacID
(braket
id|idx
)braket
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x14
op_plus
id|idx
)paren
suffix:semicolon
id|ice-&gt;eeprom.adcID
(braket
id|idx
)braket
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x18
op_plus
id|idx
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0x1c
suffix:semicolon
id|idx
OL
id|ice-&gt;eeprom.size
op_logical_and
id|idx
OL
l_int|0x1c
op_plus
r_sizeof
(paren
id|ice-&gt;eeprom.extra
)paren
suffix:semicolon
id|idx
op_increment
)paren
id|ice-&gt;eeprom.extra
(braket
id|idx
op_minus
l_int|0x1c
)braket
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
id|idx
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_ak4524_init
r_static
r_void
id|__devinit
id|snd_ice1712_ak4524_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_static
r_int
r_char
id|inits
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x07
comma
multiline_comment|/* 0: all power up */
l_int|0x01
comma
l_int|0x00
comma
multiline_comment|/* 1: ADC/DAC reset */
l_int|0x02
comma
l_int|0x60
comma
multiline_comment|/* 2: 24bit I2S */
l_int|0x03
comma
l_int|0x19
comma
multiline_comment|/* 3: deemphasis off */
l_int|0x01
comma
l_int|0x03
comma
multiline_comment|/* 1: ADC/DAC enable */
l_int|0x04
comma
l_int|0x00
comma
multiline_comment|/* 4: ADC left muted */
l_int|0x05
comma
l_int|0x00
comma
multiline_comment|/* 5: ADC right muted */
l_int|0x04
comma
l_int|0x80
comma
multiline_comment|/* 4: ADC IPGA gain 0dB */
l_int|0x05
comma
l_int|0x80
comma
multiline_comment|/* 5: ADC IPGA gain 0dB */
l_int|0x06
comma
l_int|0x00
comma
multiline_comment|/* 6: DAC left muted */
l_int|0x07
comma
l_int|0x00
comma
multiline_comment|/* 7: DAC right muted */
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
r_int
id|chip
comma
id|idx
suffix:semicolon
r_int
r_char
op_star
id|ptr
comma
id|reg
comma
id|data
suffix:semicolon
r_for
c_loop
(paren
id|chip
op_assign
id|idx
op_assign
l_int|0
suffix:semicolon
id|chip
OL
id|ice-&gt;num_dacs
op_div
l_int|2
suffix:semicolon
id|chip
op_increment
)paren
(brace
id|ptr
op_assign
id|inits
suffix:semicolon
r_while
c_loop
(paren
op_star
id|ptr
op_ne
l_int|0xff
)paren
(brace
id|reg
op_assign
op_star
id|ptr
op_increment
suffix:semicolon
id|data
op_assign
op_star
id|ptr
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;ak4528
)paren
(brace
r_if
c_cond
(paren
id|reg
OG
l_int|5
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|reg
op_ge
l_int|4
op_logical_and
(paren
id|data
op_amp
l_int|0x80
)paren
)paren
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|reg
op_eq
l_int|0x03
op_logical_and
id|ice-&gt;ak4528
)paren
id|data
op_assign
l_int|0x0d
suffix:semicolon
multiline_comment|/* deemphasis off, turn LR highpass filters on */
id|snd_ice1712_ak4524_write
c_func
(paren
id|ice
comma
id|chip
comma
id|reg
comma
id|data
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|snd_ice1712_stdsp24_gpio_write
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|byte
)paren
(brace
id|byte
op_or_assign
id|ICE1712_STDSP24_CLOCK_BIT
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|byte
)paren
suffix:semicolon
id|byte
op_and_assign
op_complement
id|ICE1712_STDSP24_CLOCK_BIT
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|byte
)paren
suffix:semicolon
id|byte
op_or_assign
id|ICE1712_STDSP24_CLOCK_BIT
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|byte
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_darear
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_darear
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|activate
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ICE1712_STDSP24_0_DAREAR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|activate
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_mute
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_mute
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|activate
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ICE1712_STDSP24_3_MUTE
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|activate
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_insel
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_insel
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|activate
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ICE1712_STDSP24_3_INSEL
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|activate
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_box_channel
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_box_channel
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|box
comma
r_int
id|chn
comma
r_int
id|activate
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
multiline_comment|/* select box */
id|ICE1712_STDSP24_0_BOX
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|box
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|0
)braket
)paren
suffix:semicolon
multiline_comment|/* prepare for write */
r_if
c_cond
(paren
id|chn
op_eq
l_int|3
)paren
id|ICE1712_STDSP24_2_CHN4
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDI1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|activate
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN3
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_CHN4
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
r_if
c_cond
(paren
id|chn
op_eq
l_int|3
)paren
(brace
id|ICE1712_STDSP24_2_CHN4
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
r_switch
c_cond
(paren
id|chn
)paren
(brace
r_case
l_int|0
suffix:colon
id|ICE1712_STDSP24_1_CHN1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|ICE1712_STDSP24_1_CHN2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|ICE1712_STDSP24_1_CHN3
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN3
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_CHN4
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDI1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_box_midi
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_box_midi
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|box
comma
r_int
id|master
comma
r_int
id|slave
)paren
(brace
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
multiline_comment|/* select box */
id|ICE1712_STDSP24_0_BOX
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|box
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDIIN
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDI1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|master
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDIIN
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDIIN
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
multiline_comment|/* MIDI2 is direct */
id|ICE1712_STDSP24_3_MIDI2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
id|slave
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_gpio_write
c_func
(paren
id|ice
comma
id|ice-&gt;hoontech_boxbits
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_stdsp24_init
r_static
r_void
id|__devinit
id|snd_ice1712_stdsp24_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|box
comma
id|chn
suffix:semicolon
id|ice-&gt;hoontech_boxbits
(braket
l_int|0
)braket
op_assign
id|ice-&gt;hoontech_boxbits
(braket
l_int|1
)braket
op_assign
id|ice-&gt;hoontech_boxbits
(braket
l_int|2
)braket
op_assign
id|ice-&gt;hoontech_boxbits
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* should be already */
id|ICE1712_STDSP24_SET_ADDR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_CLOCK
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_0_BOX
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_0_DAREAR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_SET_ADDR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_CLOCK
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_1_CHN3
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_SET_ADDR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|2
)paren
suffix:semicolon
id|ICE1712_STDSP24_CLOCK
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|2
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_CHN4
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDIIN
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_2_MIDI1
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_SET_ADDR
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|3
)paren
suffix:semicolon
id|ICE1712_STDSP24_CLOCK
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|3
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_3_MIDI2
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
id|ICE1712_STDSP24_3_MUTE
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|1
)paren
suffix:semicolon
id|ICE1712_STDSP24_3_INSEL
c_func
(paren
id|ice-&gt;hoontech_boxbits
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* let&squot;s go - activate only functions in first box */
id|ice-&gt;hoontech_config
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ICE1712_STDSP24_MUTE |&n;&t;&t;&t;       ICE1712_STDSP24_INSEL |&n;&t;&t;&t;       ICE1712_STDSP24_DAREAR; */
id|ice-&gt;hoontech_boxconfig
(braket
l_int|0
)braket
op_assign
id|ICE1712_STDSP24_BOX_CHN1
op_or
id|ICE1712_STDSP24_BOX_CHN2
op_or
id|ICE1712_STDSP24_BOX_CHN3
op_or
id|ICE1712_STDSP24_BOX_CHN4
op_or
id|ICE1712_STDSP24_BOX_MIDI1
op_or
id|ICE1712_STDSP24_BOX_MIDI2
suffix:semicolon
id|ice-&gt;hoontech_boxconfig
(braket
l_int|1
)braket
op_assign
id|ice-&gt;hoontech_boxconfig
(braket
l_int|2
)braket
op_assign
id|ice-&gt;hoontech_boxconfig
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|snd_ice1712_stdsp24_darear
c_func
(paren
id|ice
comma
(paren
id|ice-&gt;hoontech_config
op_amp
id|ICE1712_STDSP24_DAREAR
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_mute
c_func
(paren
id|ice
comma
(paren
id|ice-&gt;hoontech_config
op_amp
id|ICE1712_STDSP24_MUTE
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_insel
c_func
(paren
id|ice
comma
(paren
id|ice-&gt;hoontech_config
op_amp
id|ICE1712_STDSP24_INSEL
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|box
op_assign
l_int|0
suffix:semicolon
id|box
OL
l_int|4
suffix:semicolon
id|box
op_increment
)paren
(brace
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|4
suffix:semicolon
id|chn
op_increment
)paren
id|snd_ice1712_stdsp24_box_channel
c_func
(paren
id|ice
comma
id|box
comma
id|chn
comma
(paren
id|ice-&gt;hoontech_boxconfig
(braket
id|box
)braket
op_amp
(paren
l_int|1
op_lshift
id|chn
)paren
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_stdsp24_box_midi
c_func
(paren
id|ice
comma
id|box
comma
(paren
id|ice-&gt;hoontech_boxconfig
(braket
id|box
)braket
op_amp
id|ICE1712_STDSP24_BOX_MIDI1
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
comma
(paren
id|ice-&gt;hoontech_boxconfig
(braket
id|box
)braket
op_amp
id|ICE1712_STDSP24_BOX_MIDI2
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_ice1712_chip_init
r_static
r_int
id|__devinit
id|snd_ice1712_chip_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|err
comma
id|has_i2c
op_assign
l_int|0
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_RESET
op_or
id|ICE1712_NATIVE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONTROL
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_NATIVE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONTROL
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x60
comma
id|ice-&gt;eeprom.codec
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x61
comma
id|ice-&gt;eeprom.aclink
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x62
comma
id|ice-&gt;eeprom.i2sID
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x63
comma
id|ice-&gt;eeprom.spdif
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_ne
id|ICE1712_SUBDEVICE_STDSP24
)paren
(brace
id|ice-&gt;gpio_write_mask
op_assign
id|ice-&gt;eeprom.gpiomask
suffix:semicolon
id|ice-&gt;gpio_direction
op_assign
id|ice-&gt;eeprom.gpiodir
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
id|ice-&gt;eeprom.gpiomask
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;eeprom.gpiodir
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|ice-&gt;eeprom.gpiostate
)paren
suffix:semicolon
)brace
r_else
(brace
id|ice-&gt;gpio_write_mask
op_assign
l_int|0xc0
suffix:semicolon
id|ice-&gt;gpio_direction
op_assign
l_int|0xff
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
l_int|0xc0
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|ICE1712_STDSP24_CLOCK_BIT
)paren
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PRO_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
)paren
(brace
id|outb
c_func
(paren
id|ICE1712_AC97_WARM
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CONSUMER_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* determine I2C, DACs and ADCs */
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|ice-&gt;ak4528
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* follow thru */
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|has_i2c
op_assign
l_int|1
suffix:semicolon
id|ice-&gt;num_adcs
op_assign
id|ice-&gt;num_dacs
op_assign
id|ice-&gt;num_total_dacs
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTA44
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|ice-&gt;num_adcs
op_assign
id|ice-&gt;num_dacs
op_assign
id|ice-&gt;num_total_dacs
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;omni
)paren
id|ice-&gt;num_total_dacs
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
id|has_i2c
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* follow thru */
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
id|ice-&gt;num_adcs
op_assign
id|ice-&gt;num_dacs
op_assign
id|ice-&gt;num_total_dacs
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|has_i2c
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|has_i2c
op_assign
l_int|1
suffix:semicolon
id|ice-&gt;num_adcs
op_assign
id|ice-&gt;num_dacs
op_assign
id|ice-&gt;num_total_dacs
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|has_i2c
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_bus_create
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 GPIO 1&quot;
comma
l_int|NULL
comma
op_amp
id|ice-&gt;i2c
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to create I2C bus&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|ice-&gt;i2c-&gt;private_data
op_assign
id|ice
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|ice-&gt;i2c-&gt;ops
op_assign
op_amp
id|ap_cs8427_i2c_ops
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|ice-&gt;i2c-&gt;hw_ops.bit
op_assign
op_amp
id|snd_ice1712_ewx_cs8427_bit_ops
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_cs8427_create
c_func
(paren
id|ice-&gt;i2c
comma
id|CS8427_BASE_ADDR
comma
op_amp
id|ice-&gt;cs8427
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;CS8427 initialization failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
macro_line|#if 0 
singleline_comment|// XXX not working yet
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_device_create
c_func
(paren
id|ice-&gt;i2c
comma
l_string|&quot;PCF9554&quot;
comma
l_int|0x40
op_rshift
l_int|1
comma
op_amp
id|ice-&gt;pcf8575
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_cs8427_create
c_func
(paren
id|ice-&gt;i2c
comma
l_int|0x11
comma
op_amp
id|ice-&gt;cs8427
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;CS8427 initialization failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
macro_line|#endif 
singleline_comment|// XXX not working yet
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_device_create
c_func
(paren
id|ice-&gt;i2c
comma
l_string|&quot;CS8404&quot;
comma
id|ICE1712_EWS88MT_CS8404_ADDR
comma
op_amp
id|ice-&gt;cs8404
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_device_create
c_func
(paren
id|ice-&gt;i2c
comma
l_string|&quot;PCF8574 (1st)&quot;
comma
id|ICE1712_EWS88MT_INPUT_ADDR
comma
op_amp
id|ice-&gt;pcf8574
(braket
l_int|0
)braket
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_device_create
c_func
(paren
id|ice-&gt;i2c
comma
l_string|&quot;PCF8574 (2nd)&quot;
comma
id|ICE1712_EWS88MT_OUTPUT_ADDR
comma
op_amp
id|ice-&gt;pcf8574
(braket
l_int|1
)braket
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_i2c_device_create
c_func
(paren
id|ice-&gt;i2c
comma
l_string|&quot;PCF8575&quot;
comma
id|ICE1712_EWS88D_PCF_ADDR
comma
op_amp
id|ice-&gt;pcf8575
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* second stage of initialization, analog parts and others */
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA44
suffix:colon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|snd_ice1712_ak4524_init
c_func
(paren
id|ice
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_STDSP24
suffix:colon
id|snd_ice1712_stdsp24_init
c_func
(paren
id|ice
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
multiline_comment|/* Set spdif defaults */
id|snd_ice1712_delta_cs8403_spdif_write
c_func
(paren
id|ice
comma
id|ice-&gt;cs8403_spdif_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
multiline_comment|/* Set spdif defaults */
id|snd_ice1712_ews_cs8404_spdif_write
c_func
(paren
id|ice
comma
id|ice-&gt;cs8403_spdif_bits
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_build_controls
r_static
r_int
id|__init
id|snd_ice1712_build_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_int
id|idx
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_int
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_eeprom
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_pro_spdif_master
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ice-&gt;num_total_dacs
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_analog_route
comma
id|ice
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kctl
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|kctl-&gt;id.index
op_assign
id|idx
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_spdif_route
comma
id|ice
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kctl
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|kctl-&gt;id.index
op_assign
id|idx
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_volume_rate
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_peak
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_delta1010_wordclock_select
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_delta1010_wordclock_status
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_deltadio2496_spdif_in_select
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|snd_assert
c_func
(paren
id|ice-&gt;pcm_pro
op_ne
l_int|NULL
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_default
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_maskc
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_maskp
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_stream
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|ice-&gt;spdif_stream_ctl
op_assign
id|kctl
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_delta_spdif_in_status
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA44
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ice-&gt;num_dacs
suffix:semicolon
op_increment
id|idx
)paren
(brace
id|snd_kcontrol_t
id|ctl
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;DAC Volume&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_ak4524_volume_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_ak4524_volume_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_ak4524_volume_put
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;ak4528
)paren
id|ctl.private_value
op_assign
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
op_plus
(paren
id|idx
op_mod
l_int|2
)paren
op_plus
l_int|4
suffix:semicolon
multiline_comment|/* register 4 &amp; 5 */
r_else
id|ctl.private_value
op_assign
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
op_plus
(paren
id|idx
op_mod
l_int|2
)paren
op_plus
l_int|6
suffix:semicolon
multiline_comment|/* register 6 &amp; 7 */
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ice-&gt;num_adcs
op_logical_and
op_logical_neg
id|ice-&gt;ak4528
suffix:semicolon
op_increment
id|idx
)paren
(brace
id|snd_kcontrol_t
id|ctl
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;ADC Volume&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_ak4524_volume_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_ak4524_volume_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_ak4524_volume_put
suffix:semicolon
id|ctl.private_value
op_assign
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
op_plus
(paren
id|idx
op_mod
l_int|2
)paren
op_plus
l_int|4
suffix:semicolon
multiline_comment|/* register 4 &amp; 5 */
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;IPGA Analog Capture Volume&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_ak4524_ipga_gain_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_ak4524_ipga_gain_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_ak4524_ipga_gain_put
suffix:semicolon
id|ctl.private_value
op_assign
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
op_plus
(paren
id|idx
op_mod
l_int|2
)paren
op_plus
l_int|4
suffix:semicolon
multiline_comment|/* register 4 &amp; 5 */
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ice-&gt;num_dacs
op_div
l_int|2
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|snd_kcontrol_t
id|ctl
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ctl
comma
l_int|0
comma
r_sizeof
(paren
id|ctl
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|ctl.id.name
comma
l_string|&quot;Deemphasis&quot;
)paren
suffix:semicolon
id|ctl.id.index
op_assign
id|idx
suffix:semicolon
id|ctl.id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|ctl.info
op_assign
id|snd_ice1712_ak4524_deemphasis_info
suffix:semicolon
id|ctl.access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_WRITE
suffix:semicolon
id|ctl.get
op_assign
id|snd_ice1712_ak4524_deemphasis_get
suffix:semicolon
id|ctl.put
op_assign
id|snd_ice1712_ak4524_deemphasis_put
suffix:semicolon
id|ctl.private_data
op_assign
id|ice
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new
c_func
(paren
op_amp
id|ctl
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_ewx_input_sense
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_ewx_output_sense
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|8
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_ews88mt_input_sense
comma
id|ice
)paren
suffix:semicolon
id|kctl-&gt;id.index
op_assign
id|idx
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_ews88mt_output_sense
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
r_sizeof
(paren
id|snd_ice1712_ews88d_controls
)paren
op_div
r_sizeof
(paren
id|snd_ice1712_ews88d_controls
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_ews88d_controls
(braket
id|idx
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
macro_line|#if 0 
singleline_comment|// XXX not working yet
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_6fire_led
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_free
r_static
r_int
id|snd_ice1712_free
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;res_port
op_eq
l_int|NULL
)paren
r_goto
id|__hw_end
suffix:semicolon
multiline_comment|/* mask all interrupts */
id|outb
c_func
(paren
l_int|0xc0
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0xff
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQMASK
)paren
)paren
suffix:semicolon
multiline_comment|/* --- */
id|__hw_end
suffix:colon
id|snd_ice1712_proc_done
c_func
(paren
id|ice
)paren
suffix:semicolon
id|synchronize_irq
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;irq
)paren
id|free_irq
c_func
(paren
id|ice-&gt;irq
comma
(paren
r_void
op_star
)paren
id|ice
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;res_port
)paren
(brace
id|release_resource
c_func
(paren
id|ice-&gt;res_port
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|ice-&gt;res_port
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;res_ddma_port
)paren
(brace
id|release_resource
c_func
(paren
id|ice-&gt;res_ddma_port
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|ice-&gt;res_ddma_port
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;res_dmapath_port
)paren
(brace
id|release_resource
c_func
(paren
id|ice-&gt;res_dmapath_port
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|ice-&gt;res_dmapath_port
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;res_profi_port
)paren
(brace
id|release_resource
c_func
(paren
id|ice-&gt;res_profi_port
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|ice-&gt;res_profi_port
)paren
suffix:semicolon
)brace
id|snd_magic_kfree
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_dev_free
r_static
r_int
id|snd_ice1712_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_magic_cast
c_func
(paren
id|ice1712_t
comma
id|device-&gt;device_data
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_return
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_create
r_static
r_int
id|__devinit
id|snd_ice1712_create
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_struct
id|pci_dev
op_star
id|pci
comma
r_int
id|omni
comma
id|ice1712_t
op_star
op_star
id|r_ice1712
)paren
(brace
id|ice1712_t
op_star
id|ice
suffix:semicolon
r_int
id|err
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
id|dev_free
suffix:colon
id|snd_ice1712_dev_free
comma
)brace
suffix:semicolon
op_star
id|r_ice1712
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/* enable PCI device */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pci
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* check, if we can restrict PCI DMA transfers to 28 bits */
r_if
c_cond
(paren
op_logical_neg
id|pci_dma_supported
c_func
(paren
id|pci
comma
l_int|0x0fffffff
)paren
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;architecture does not support 28bit PCI busmaster DMA&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
id|pci_set_dma_mask
c_func
(paren
id|pci
comma
l_int|0x0fffffff
)paren
suffix:semicolon
id|ice
op_assign
id|snd_magic_kcalloc
c_func
(paren
id|ice1712_t
comma
l_int|0
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|ice-&gt;omni
op_assign
id|omni
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ice-&gt;cs8403_spdif_bits
op_assign
id|ice-&gt;cs8403_spdif_stream_bits
op_assign
(paren
l_int|0x01
op_or
multiline_comment|/* consumer format */
l_int|0x10
op_or
multiline_comment|/* no emphasis */
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* PCM encoder/decoder */
id|ice-&gt;card
op_assign
id|card
suffix:semicolon
id|ice-&gt;pci
op_assign
id|pci
suffix:semicolon
id|ice-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
id|ice-&gt;port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|0
)paren
suffix:semicolon
id|ice-&gt;ddma_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|1
)paren
suffix:semicolon
id|ice-&gt;dmapath_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|2
)paren
suffix:semicolon
id|ice-&gt;profi_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|3
)paren
suffix:semicolon
id|pci_set_master
c_func
(paren
id|pci
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x40
comma
l_int|0x807f
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x42
comma
l_int|0x0006
)paren
suffix:semicolon
id|snd_ice1712_proc_init
c_func
(paren
id|ice
)paren
suffix:semicolon
id|synchronize_irq
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ice-&gt;res_port
op_assign
id|request_region
c_func
(paren
id|ice-&gt;port
comma
l_int|32
comma
l_string|&quot;ICE1712 - Controller&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab ports 0x%lx-0x%lx&bslash;n&quot;
comma
id|ice-&gt;port
comma
id|ice-&gt;port
op_plus
l_int|32
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ice-&gt;res_ddma_port
op_assign
id|request_region
c_func
(paren
id|ice-&gt;ddma_port
comma
l_int|16
comma
l_string|&quot;ICE1712 - DDMA&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab ports 0x%lx-0x%lx&bslash;n&quot;
comma
id|ice-&gt;ddma_port
comma
id|ice-&gt;ddma_port
op_plus
l_int|16
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ice-&gt;res_dmapath_port
op_assign
id|request_region
c_func
(paren
id|ice-&gt;dmapath_port
comma
l_int|16
comma
l_string|&quot;ICE1712 - DMA path&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab ports 0x%lx-0x%lx&bslash;n&quot;
comma
id|ice-&gt;dmapath_port
comma
id|ice-&gt;dmapath_port
op_plus
l_int|16
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ice-&gt;res_profi_port
op_assign
id|request_region
c_func
(paren
id|ice-&gt;profi_port
comma
l_int|64
comma
l_string|&quot;ICE1712 - Professional&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab ports 0x%lx-0x%lx&bslash;n&quot;
comma
id|ice-&gt;profi_port
comma
id|ice-&gt;profi_port
op_plus
l_int|16
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|pci-&gt;irq
comma
id|snd_ice1712_interrupt
comma
id|SA_INTERRUPT
op_or
id|SA_SHIRQ
comma
l_string|&quot;ICE1712&quot;
comma
(paren
r_void
op_star
)paren
id|ice
)paren
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab IRQ %d&bslash;n&quot;
comma
id|pci-&gt;irq
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;irq
op_assign
id|pci-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
id|snd_ice1712_read_eeprom
c_func
(paren
id|ice
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_ice1712_chip_init
c_func
(paren
id|ice
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* unmask used interrupts */
id|outb
c_func
(paren
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_2xMPU401
)paren
op_eq
l_int|0
ques
c_cond
id|ICE1712_IRQ_MPU2
suffix:colon
l_int|0
op_or
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
ques
c_cond
id|ICE1712_IRQ_PBKDS
op_or
id|ICE1712_IRQ_CONCAP
op_or
id|ICE1712_IRQ_CONPBK
suffix:colon
l_int|0
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQMASK
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x00
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_LOWLEVEL
comma
id|ice
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
op_star
id|r_ice1712
op_assign
id|ice
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_probe
r_static
r_int
id|__devinit
id|snd_ice1712_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
comma
r_const
r_struct
id|pci_device_id
op_star
id|id
)paren
(brace
r_static
r_int
id|dev
op_assign
l_int|0
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
id|ice1712_t
op_star
id|ice
suffix:semicolon
r_int
id|pcm_dev
op_assign
l_int|0
comma
id|err
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_ge
id|SNDRV_CARDS
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_enable
(braket
id|dev
)braket
)paren
(brace
id|dev
op_increment
suffix:semicolon
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|card
op_assign
id|snd_card_new
c_func
(paren
id|snd_index
(braket
id|dev
)braket
comma
id|snd_id
(braket
id|dev
)braket
comma
id|THIS_MODULE
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_create
c_func
(paren
id|card
comma
id|pci
comma
id|snd_omni
(braket
id|dev
)braket
comma
op_amp
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm_profi
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_ac97_mixer
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_build_controls
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm_ds
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|card-&gt;driver
comma
l_string|&quot;ICE1712&quot;
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;ICEnsemble ICE1712&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ice-&gt;eeprom.subvendor
)paren
(brace
r_case
id|ICE1712_SUBDEVICE_STDSP24
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;Hoontech SoundTrack Audio DSP24&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTA1010
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;M Audio Delta 1010&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTADIO2496
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;M Audio Delta DiO 2496&quot;
)paren
suffix:semicolon
r_goto
id|__no_mpu401
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTA66
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;M Audio Delta 66&quot;
)paren
suffix:semicolon
r_goto
id|__no_mpu401
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DELTA44
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;M Audio Delta 44&quot;
)paren
suffix:semicolon
r_goto
id|__no_mpu401
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_AUDIOPHILE
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;M Audio Audiophile 24/96&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWX2496
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;TerraTec EWX 24/96&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88MT
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;TerraTec EWS 88MT&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_EWS88D
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;TerraTec EWS 88D&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ICE1712_SUBDEVICE_DMX6FIRE
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;TerraTec DMX 6Fire&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_mpu401_uart_new
c_func
(paren
id|card
comma
l_int|0
comma
id|MPU401_HW_ICE1712
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|MPU1_CTRL
)paren
comma
l_int|1
comma
id|ice-&gt;irq
comma
l_int|0
comma
op_amp
id|ice-&gt;rmidi
(braket
l_int|0
)braket
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;eeprom.codec
op_amp
id|ICE1712_CFG_2xMPU401
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_mpu401_uart_new
c_func
(paren
id|card
comma
l_int|1
comma
id|MPU401_HW_ICE1712
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|MPU2_CTRL
)paren
comma
l_int|1
comma
id|ice-&gt;irq
comma
l_int|0
comma
op_amp
id|ice-&gt;rmidi
(braket
l_int|1
)braket
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|__no_mpu401
suffix:colon
id|sprintf
c_func
(paren
id|card-&gt;longname
comma
l_string|&quot;%s at 0x%lx, irq %i&quot;
comma
id|card-&gt;shortname
comma
id|ice-&gt;port
comma
id|ice-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_card_register
c_func
(paren
id|card
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|pci_set_drvdata
c_func
(paren
id|pci
comma
id|card
)paren
suffix:semicolon
id|dev
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_remove
r_static
r_void
id|__devexit
id|snd_ice1712_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
)paren
(brace
id|snd_card_free
c_func
(paren
id|pci_get_drvdata
c_func
(paren
id|pci
)paren
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|driver
r_static
r_struct
id|pci_driver
id|driver
op_assign
(brace
id|name
suffix:colon
l_string|&quot;ICE1712&quot;
comma
id|id_table
suffix:colon
id|snd_ice1712_ids
comma
id|probe
suffix:colon
id|snd_ice1712_probe
comma
id|remove
suffix:colon
id|__devexit_p
c_func
(paren
id|snd_ice1712_remove
)paren
comma
)brace
suffix:semicolon
DECL|function|alsa_card_ice1712_init
r_static
r_int
id|__init
id|alsa_card_ice1712_init
c_func
(paren
r_void
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_module_init
c_func
(paren
op_amp
id|driver
)paren
)paren
OL
l_int|0
)paren
(brace
macro_line|#ifdef MODULE
id|snd_printk
c_func
(paren
l_string|&quot;ICE1712 soundcard not found or device busy&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_card_ice1712_exit
r_static
r_void
id|__exit
id|alsa_card_ice1712_exit
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|alsa_card_ice1712_init
)paren
id|module_exit
c_func
(paren
id|alsa_card_ice1712_exit
)paren
macro_line|#ifndef MODULE
multiline_comment|/* format is: snd-ice1712=snd_enable,snd_index,snd_id */
DECL|function|alsa_card_ice1712_setup
r_static
r_int
id|__init
id|alsa_card_ice1712_setup
c_func
(paren
r_char
op_star
id|str
)paren
(brace
r_static
r_int
id|__initdata
id|nr_dev
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|nr_dev
op_ge
id|SNDRV_CARDS
)paren
r_return
l_int|0
suffix:semicolon
(paren
r_void
)paren
(paren
id|get_option
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_enable
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
op_logical_and
id|get_option
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_index
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
op_logical_and
id|get_id
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_id
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
)paren
suffix:semicolon
id|nr_dev
op_increment
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|__setup
c_func
(paren
l_string|&quot;snd-ice1712=&quot;
comma
id|alsa_card_ice1712_setup
)paren
suffix:semicolon
macro_line|#endif /* ifndef MODULE */
eof
