multiline_comment|/*&n; *  The driver for the Cirrus Logic&squot;s Sound Fusion CS46XX based soundcards&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#ifndef __CS46XX_LIB_H__
DECL|macro|__CS46XX_LIB_H__
mdefine_line|#define __CS46XX_LIB_H__
multiline_comment|/*&n; *  constants&n; */
DECL|macro|CS46XX_BA0_SIZE
mdefine_line|#define CS46XX_BA0_SIZE&t;&t;  0x1000
DECL|macro|CS46XX_BA1_DATA0_SIZE
mdefine_line|#define CS46XX_BA1_DATA0_SIZE 0x3000
DECL|macro|CS46XX_BA1_DATA1_SIZE
mdefine_line|#define CS46XX_BA1_DATA1_SIZE 0x3800
DECL|macro|CS46XX_BA1_PRG_SIZE
mdefine_line|#define CS46XX_BA1_PRG_SIZE&t;  0x7000
DECL|macro|CS46XX_BA1_REG_SIZE
mdefine_line|#define CS46XX_BA1_REG_SIZE&t;  0x0100
macro_line|#ifdef CONFIG_SND_CS46XX_NEW_DSP
DECL|macro|CS46XX_MIN_PERIOD_SIZE
mdefine_line|#define CS46XX_MIN_PERIOD_SIZE 1
DECL|macro|CS46XX_MAX_PERIOD_SIZE
mdefine_line|#define CS46XX_MAX_PERIOD_SIZE 1024*1024
macro_line|#else
DECL|macro|CS46XX_MIN_PERIOD_SIZE
mdefine_line|#define CS46XX_MIN_PERIOD_SIZE 2048
DECL|macro|CS46XX_MAX_PERIOD_SIZE
mdefine_line|#define CS46XX_MAX_PERIOD_SIZE 2048
macro_line|#endif
DECL|macro|CS46XX_FRAGS
mdefine_line|#define CS46XX_FRAGS 2
multiline_comment|/* #define CS46XX_BUFFER_SIZE CS46XX_MAX_PERIOD_SIZE * CS46XX_FRAGS */
DECL|macro|SCB_NO_PARENT
mdefine_line|#define SCB_NO_PARENT             0
DECL|macro|SCB_ON_PARENT_NEXT_SCB
mdefine_line|#define SCB_ON_PARENT_NEXT_SCB    1
DECL|macro|SCB_ON_PARENT_SUBLIST_SCB
mdefine_line|#define SCB_ON_PARENT_SUBLIST_SCB 2
multiline_comment|/* 3*1024 parameter, 3.5*1024 sample, 2*3.5*1024 code */
DECL|macro|BA1_DWORD_SIZE
mdefine_line|#define BA1_DWORD_SIZE&t;&t;(13 * 1024 + 512)
DECL|macro|BA1_MEMORY_COUNT
mdefine_line|#define BA1_MEMORY_COUNT&t;3
multiline_comment|/*&n; *  common I/O routines&n; */
DECL|function|snd_cs46xx_poke
r_static
r_inline
r_void
id|snd_cs46xx_poke
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
r_int
r_int
id|bank
op_assign
id|reg
op_rshift
l_int|16
suffix:semicolon
r_int
r_int
id|offset
op_assign
id|reg
op_amp
l_int|0xffff
suffix:semicolon
multiline_comment|/*if (bank == 0) printk(&quot;snd_cs46xx_poke: %04X - %08X&bslash;n&quot;,reg &gt;&gt; 2,val); */
id|writel
c_func
(paren
id|val
comma
id|chip-&gt;region.idx
(braket
id|bank
op_plus
l_int|1
)braket
dot
id|remap_addr
op_plus
id|offset
)paren
suffix:semicolon
)brace
DECL|function|snd_cs46xx_peek
r_static
r_inline
r_int
r_int
id|snd_cs46xx_peek
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
r_int
id|reg
)paren
(brace
r_int
r_int
id|bank
op_assign
id|reg
op_rshift
l_int|16
suffix:semicolon
r_int
r_int
id|offset
op_assign
id|reg
op_amp
l_int|0xffff
suffix:semicolon
r_return
id|readl
c_func
(paren
id|chip-&gt;region.idx
(braket
id|bank
op_plus
l_int|1
)braket
dot
id|remap_addr
op_plus
id|offset
)paren
suffix:semicolon
)brace
DECL|function|snd_cs46xx_pokeBA0
r_static
r_inline
r_void
id|snd_cs46xx_pokeBA0
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
r_int
id|offset
comma
r_int
r_int
id|val
)paren
(brace
id|writel
c_func
(paren
id|val
comma
id|chip-&gt;region.name.ba0.remap_addr
op_plus
id|offset
)paren
suffix:semicolon
)brace
DECL|function|snd_cs46xx_peekBA0
r_static
r_inline
r_int
r_int
id|snd_cs46xx_peekBA0
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
r_int
id|offset
)paren
(brace
r_return
id|readl
c_func
(paren
id|chip-&gt;region.name.ba0.remap_addr
op_plus
id|offset
)paren
suffix:semicolon
)brace
id|dsp_spos_instance_t
op_star
id|cs46xx_dsp_spos_create
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_void
id|cs46xx_dsp_spos_destroy
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_load_module
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_module_desc_t
op_star
id|module
)paren
suffix:semicolon
id|symbol_entry_t
op_star
id|cs46xx_dsp_lookup_symbol
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|symbol_name
comma
r_int
id|symbol_type
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_proc_init
(paren
id|snd_card_t
op_star
id|card
comma
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_proc_done
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_scb_and_task_init
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|snd_cs46xx_download
(paren
id|cs46xx_t
op_star
id|chip
comma
id|u32
op_star
id|src
comma
r_int
r_int
id|offset
comma
r_int
r_int
id|len
)paren
suffix:semicolon
r_int
id|snd_cs46xx_clear_BA1
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
r_int
id|offset
comma
r_int
r_int
id|len
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_enable_spdif_out
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_enable_spdif_hw
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_disable_spdif_out
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_enable_spdif_in
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_disable_spdif_in
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_enable_pcm_capture
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_disable_pcm_capture
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_enable_adc_capture
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_disable_adc_capture
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_poke_via_dsp
(paren
id|cs46xx_t
op_star
id|chip
comma
id|u32
id|address
comma
id|u32
id|data
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_scb
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|name
comma
id|u32
op_star
id|scb_data
comma
id|u32
id|dest
)paren
suffix:semicolon
r_void
id|cs46xx_dsp_proc_free_scb_desc
(paren
id|dsp_scb_descriptor_t
op_star
id|scb
)paren
suffix:semicolon
r_void
id|cs46xx_dsp_proc_register_scb_desc
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_scb_descriptor_t
op_star
id|scb
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_timing_master_scb
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_codec_out_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|codec_name
comma
id|u16
id|channel_disp
comma
id|u16
id|fifo_addr
comma
id|u16
id|child_scb_addr
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_codec_in_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|codec_name
comma
id|u16
id|channel_disp
comma
id|u16
id|fifo_addr
comma
id|u16
id|sample_buffer_addr
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
r_void
id|cs46xx_dsp_remove_scb
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_scb_descriptor_t
op_star
id|scb
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_codec_in_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|codec_name
comma
id|u16
id|channel_disp
comma
id|u16
id|fifo_addr
comma
id|u16
id|sample_buffer_addr
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_src_task_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
r_int
id|sample_rate
comma
id|u16
id|src_buffer_addr
comma
id|u16
id|src_delay_buffer_addr
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
comma
r_int
id|pass_through
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_mix_only_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u16
id|mix_buffer_addr
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_vari_decimate_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u16
id|vari_buffer_addr0
comma
id|u16
id|vari_buffer_addr1
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_asynch_fg_rx_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u32
id|dest
comma
id|u16
id|hfg_scb_address
comma
id|u16
id|asynch_buffer_address
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_spio_write_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_mix_to_ostream_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u16
id|mix_buffer_addr
comma
id|u16
id|writeback_spb
comma
id|u32
id|dest
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_dsp_create_magic_snoop_scb
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
r_char
op_star
id|scb_name
comma
id|u32
id|dest
comma
id|u16
id|snoop_buffer_address
comma
id|dsp_scb_descriptor_t
op_star
id|snoop_scb
comma
id|dsp_scb_descriptor_t
op_star
id|parent_scb
comma
r_int
id|scb_child_type
)paren
suffix:semicolon
id|pcm_channel_descriptor_t
op_star
id|cs46xx_dsp_create_pcm_channel
(paren
id|cs46xx_t
op_star
id|chip
comma
id|u32
id|sample_rate
comma
r_void
op_star
id|private_data
comma
id|u32
id|hw_dma_addr
comma
r_int
id|pcm_channel_id
)paren
suffix:semicolon
r_void
id|cs46xx_dsp_destroy_pcm_channel
(paren
id|cs46xx_t
op_star
id|chip
comma
id|pcm_channel_descriptor_t
op_star
id|pcm_channel
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_pcm_unlink
(paren
id|cs46xx_t
op_star
id|chip
comma
id|pcm_channel_descriptor_t
op_star
id|pcm_channel
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_pcm_link
(paren
id|cs46xx_t
op_star
id|chip
comma
id|pcm_channel_descriptor_t
op_star
id|pcm_channel
)paren
suffix:semicolon
id|dsp_scb_descriptor_t
op_star
id|cs46xx_add_record_source
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_scb_descriptor_t
op_star
id|source
comma
id|u16
id|addr
comma
r_char
op_star
id|scb_name
)paren
suffix:semicolon
r_int
id|cs46xx_src_unlink
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_scb_descriptor_t
op_star
id|src
)paren
suffix:semicolon
r_int
id|cs46xx_src_link
c_func
(paren
id|cs46xx_t
op_star
id|chip
comma
id|dsp_scb_descriptor_t
op_star
id|src
)paren
suffix:semicolon
r_int
id|cs46xx_iec958_pre_open
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_iec958_post_close
(paren
id|cs46xx_t
op_star
id|chip
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_pcm_channel_set_period
(paren
id|cs46xx_t
op_star
id|chip
comma
id|pcm_channel_descriptor_t
op_star
id|pcm_channel
comma
r_int
id|period_size
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_pcm_ostream_set_period
(paren
id|cs46xx_t
op_star
id|chip
comma
r_int
id|period_size
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_set_dac_volume
(paren
id|cs46xx_t
op_star
id|chip
comma
id|u16
id|left
comma
id|u16
id|right
)paren
suffix:semicolon
r_int
id|cs46xx_dsp_set_iec958_volume
(paren
id|cs46xx_t
op_star
id|chip
comma
id|u16
id|left
comma
id|u16
id|right
)paren
suffix:semicolon
macro_line|#endif /* __CS46XX_LIB_H__ */
eof
