multiline_comment|/*&n; *   ALSA driver for RME Digi96, Digi96/8 and Digi96/8 PRO/PAD/PST audio&n; *   interfaces &n; *&n; *&t;Copyright (c) 2000, 2001 Anders Torger &lt;torger@ludd.luth.se&gt;&n; *    &n; *      Thanks to Henk Hesselink &lt;henk@anda.nl&gt; for the analog volume control&n; *      code.&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/moduleparam.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/info.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/pcm_params.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
macro_line|#include &lt;sound/initval.h&gt;
macro_line|#include &lt;asm/io.h&gt;
multiline_comment|/* note, two last pcis should be equal, it is not a bug */
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Anders Torger &lt;torger@ludd.luth.se&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;RME Digi96, Digi96/8, Digi96/8 PRO, Digi96/8 PST, &quot;
l_string|&quot;Digi96/8 PAD&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_SUPPORTED_DEVICE
c_func
(paren
l_string|&quot;{{RME,Digi96},&quot;
l_string|&quot;{RME,Digi96/8},&quot;
l_string|&quot;{RME,Digi96/8 PRO},&quot;
l_string|&quot;{RME,Digi96/8 PST},&quot;
l_string|&quot;{RME,Digi96/8 PAD}}&quot;
)paren
suffix:semicolon
DECL|variable|index
r_static
r_int
id|index
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_IDX
suffix:semicolon
multiline_comment|/* Index 0-MAX */
DECL|variable|id
r_static
r_char
op_star
id|id
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_STR
suffix:semicolon
multiline_comment|/* ID for this card */
DECL|variable|enable
r_static
r_int
id|enable
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_ENABLE_PNP
suffix:semicolon
multiline_comment|/* Enable this card */
DECL|variable|boot_devs
r_static
r_int
id|boot_devs
suffix:semicolon
id|module_param_array
c_func
(paren
id|index
comma
r_int
comma
op_amp
id|boot_devs
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|index
comma
l_string|&quot;Index value for RME Digi96 soundcard.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|id
comma
id|charp
comma
op_amp
id|boot_devs
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|id
comma
l_string|&quot;ID string for RME Digi96 soundcard.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|enable
comma
r_bool
comma
op_amp
id|boot_devs
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|enable
comma
l_string|&quot;Enable RME Digi96 soundcard.&quot;
)paren
suffix:semicolon
multiline_comment|/*&n; * Defines for RME Digi96 series, from internal RME reference documents&n; * dated 12.01.00&n; */
DECL|macro|RME96_SPDIF_NCHANNELS
mdefine_line|#define RME96_SPDIF_NCHANNELS 2
multiline_comment|/* Playback and capture buffer size */
DECL|macro|RME96_BUFFER_SIZE
mdefine_line|#define RME96_BUFFER_SIZE 0x10000
multiline_comment|/* IO area size */
DECL|macro|RME96_IO_SIZE
mdefine_line|#define RME96_IO_SIZE 0x60000
multiline_comment|/* IO area offsets */
DECL|macro|RME96_IO_PLAY_BUFFER
mdefine_line|#define RME96_IO_PLAY_BUFFER      0x0
DECL|macro|RME96_IO_REC_BUFFER
mdefine_line|#define RME96_IO_REC_BUFFER       0x10000
DECL|macro|RME96_IO_CONTROL_REGISTER
mdefine_line|#define RME96_IO_CONTROL_REGISTER 0x20000
DECL|macro|RME96_IO_ADDITIONAL_REG
mdefine_line|#define RME96_IO_ADDITIONAL_REG   0x20004
DECL|macro|RME96_IO_CONFIRM_PLAY_IRQ
mdefine_line|#define RME96_IO_CONFIRM_PLAY_IRQ 0x20008
DECL|macro|RME96_IO_CONFIRM_REC_IRQ
mdefine_line|#define RME96_IO_CONFIRM_REC_IRQ  0x2000C
DECL|macro|RME96_IO_SET_PLAY_POS
mdefine_line|#define RME96_IO_SET_PLAY_POS     0x40000
DECL|macro|RME96_IO_RESET_PLAY_POS
mdefine_line|#define RME96_IO_RESET_PLAY_POS   0x4FFFC
DECL|macro|RME96_IO_SET_REC_POS
mdefine_line|#define RME96_IO_SET_REC_POS      0x50000
DECL|macro|RME96_IO_RESET_REC_POS
mdefine_line|#define RME96_IO_RESET_REC_POS    0x5FFFC
DECL|macro|RME96_IO_GET_PLAY_POS
mdefine_line|#define RME96_IO_GET_PLAY_POS     0x20000
DECL|macro|RME96_IO_GET_REC_POS
mdefine_line|#define RME96_IO_GET_REC_POS      0x30000
multiline_comment|/* Write control register bits */
DECL|macro|RME96_WCR_START
mdefine_line|#define RME96_WCR_START     (1 &lt;&lt; 0)
DECL|macro|RME96_WCR_START_2
mdefine_line|#define RME96_WCR_START_2   (1 &lt;&lt; 1)
DECL|macro|RME96_WCR_GAIN_0
mdefine_line|#define RME96_WCR_GAIN_0    (1 &lt;&lt; 2)
DECL|macro|RME96_WCR_GAIN_1
mdefine_line|#define RME96_WCR_GAIN_1    (1 &lt;&lt; 3)
DECL|macro|RME96_WCR_MODE24
mdefine_line|#define RME96_WCR_MODE24    (1 &lt;&lt; 4)
DECL|macro|RME96_WCR_MODE24_2
mdefine_line|#define RME96_WCR_MODE24_2  (1 &lt;&lt; 5)
DECL|macro|RME96_WCR_BM
mdefine_line|#define RME96_WCR_BM        (1 &lt;&lt; 6)
DECL|macro|RME96_WCR_BM_2
mdefine_line|#define RME96_WCR_BM_2      (1 &lt;&lt; 7)
DECL|macro|RME96_WCR_ADAT
mdefine_line|#define RME96_WCR_ADAT      (1 &lt;&lt; 8)
DECL|macro|RME96_WCR_FREQ_0
mdefine_line|#define RME96_WCR_FREQ_0    (1 &lt;&lt; 9)
DECL|macro|RME96_WCR_FREQ_1
mdefine_line|#define RME96_WCR_FREQ_1    (1 &lt;&lt; 10)
DECL|macro|RME96_WCR_DS
mdefine_line|#define RME96_WCR_DS        (1 &lt;&lt; 11)
DECL|macro|RME96_WCR_PRO
mdefine_line|#define RME96_WCR_PRO       (1 &lt;&lt; 12)
DECL|macro|RME96_WCR_EMP
mdefine_line|#define RME96_WCR_EMP       (1 &lt;&lt; 13)
DECL|macro|RME96_WCR_SEL
mdefine_line|#define RME96_WCR_SEL       (1 &lt;&lt; 14)
DECL|macro|RME96_WCR_MASTER
mdefine_line|#define RME96_WCR_MASTER    (1 &lt;&lt; 15)
DECL|macro|RME96_WCR_PD
mdefine_line|#define RME96_WCR_PD        (1 &lt;&lt; 16)
DECL|macro|RME96_WCR_INP_0
mdefine_line|#define RME96_WCR_INP_0     (1 &lt;&lt; 17)
DECL|macro|RME96_WCR_INP_1
mdefine_line|#define RME96_WCR_INP_1     (1 &lt;&lt; 18)
DECL|macro|RME96_WCR_THRU_0
mdefine_line|#define RME96_WCR_THRU_0    (1 &lt;&lt; 19)
DECL|macro|RME96_WCR_THRU_1
mdefine_line|#define RME96_WCR_THRU_1    (1 &lt;&lt; 20)
DECL|macro|RME96_WCR_THRU_2
mdefine_line|#define RME96_WCR_THRU_2    (1 &lt;&lt; 21)
DECL|macro|RME96_WCR_THRU_3
mdefine_line|#define RME96_WCR_THRU_3    (1 &lt;&lt; 22)
DECL|macro|RME96_WCR_THRU_4
mdefine_line|#define RME96_WCR_THRU_4    (1 &lt;&lt; 23)
DECL|macro|RME96_WCR_THRU_5
mdefine_line|#define RME96_WCR_THRU_5    (1 &lt;&lt; 24)
DECL|macro|RME96_WCR_THRU_6
mdefine_line|#define RME96_WCR_THRU_6    (1 &lt;&lt; 25)
DECL|macro|RME96_WCR_THRU_7
mdefine_line|#define RME96_WCR_THRU_7    (1 &lt;&lt; 26)
DECL|macro|RME96_WCR_DOLBY
mdefine_line|#define RME96_WCR_DOLBY     (1 &lt;&lt; 27)
DECL|macro|RME96_WCR_MONITOR_0
mdefine_line|#define RME96_WCR_MONITOR_0 (1 &lt;&lt; 28)
DECL|macro|RME96_WCR_MONITOR_1
mdefine_line|#define RME96_WCR_MONITOR_1 (1 &lt;&lt; 29)
DECL|macro|RME96_WCR_ISEL
mdefine_line|#define RME96_WCR_ISEL      (1 &lt;&lt; 30)
DECL|macro|RME96_WCR_IDIS
mdefine_line|#define RME96_WCR_IDIS      (1 &lt;&lt; 31)
DECL|macro|RME96_WCR_BITPOS_GAIN_0
mdefine_line|#define RME96_WCR_BITPOS_GAIN_0 2
DECL|macro|RME96_WCR_BITPOS_GAIN_1
mdefine_line|#define RME96_WCR_BITPOS_GAIN_1 3
DECL|macro|RME96_WCR_BITPOS_FREQ_0
mdefine_line|#define RME96_WCR_BITPOS_FREQ_0 9
DECL|macro|RME96_WCR_BITPOS_FREQ_1
mdefine_line|#define RME96_WCR_BITPOS_FREQ_1 10
DECL|macro|RME96_WCR_BITPOS_INP_0
mdefine_line|#define RME96_WCR_BITPOS_INP_0 17
DECL|macro|RME96_WCR_BITPOS_INP_1
mdefine_line|#define RME96_WCR_BITPOS_INP_1 18
DECL|macro|RME96_WCR_BITPOS_MONITOR_0
mdefine_line|#define RME96_WCR_BITPOS_MONITOR_0 28
DECL|macro|RME96_WCR_BITPOS_MONITOR_1
mdefine_line|#define RME96_WCR_BITPOS_MONITOR_1 29
multiline_comment|/* Read control register bits */
DECL|macro|RME96_RCR_AUDIO_ADDR_MASK
mdefine_line|#define RME96_RCR_AUDIO_ADDR_MASK 0xFFFF
DECL|macro|RME96_RCR_IRQ_2
mdefine_line|#define RME96_RCR_IRQ_2     (1 &lt;&lt; 16)
DECL|macro|RME96_RCR_T_OUT
mdefine_line|#define RME96_RCR_T_OUT     (1 &lt;&lt; 17)
DECL|macro|RME96_RCR_DEV_ID_0
mdefine_line|#define RME96_RCR_DEV_ID_0  (1 &lt;&lt; 21)
DECL|macro|RME96_RCR_DEV_ID_1
mdefine_line|#define RME96_RCR_DEV_ID_1  (1 &lt;&lt; 22)
DECL|macro|RME96_RCR_LOCK
mdefine_line|#define RME96_RCR_LOCK      (1 &lt;&lt; 23)
DECL|macro|RME96_RCR_VERF
mdefine_line|#define RME96_RCR_VERF      (1 &lt;&lt; 26)
DECL|macro|RME96_RCR_F0
mdefine_line|#define RME96_RCR_F0        (1 &lt;&lt; 27)
DECL|macro|RME96_RCR_F1
mdefine_line|#define RME96_RCR_F1        (1 &lt;&lt; 28)
DECL|macro|RME96_RCR_F2
mdefine_line|#define RME96_RCR_F2        (1 &lt;&lt; 29)
DECL|macro|RME96_RCR_AUTOSYNC
mdefine_line|#define RME96_RCR_AUTOSYNC  (1 &lt;&lt; 30)
DECL|macro|RME96_RCR_IRQ
mdefine_line|#define RME96_RCR_IRQ       (1 &lt;&lt; 31)
DECL|macro|RME96_RCR_BITPOS_F0
mdefine_line|#define RME96_RCR_BITPOS_F0 27
DECL|macro|RME96_RCR_BITPOS_F1
mdefine_line|#define RME96_RCR_BITPOS_F1 28
DECL|macro|RME96_RCR_BITPOS_F2
mdefine_line|#define RME96_RCR_BITPOS_F2 29
multiline_comment|/* Additonal register bits */
DECL|macro|RME96_AR_WSEL
mdefine_line|#define RME96_AR_WSEL       (1 &lt;&lt; 0)
DECL|macro|RME96_AR_ANALOG
mdefine_line|#define RME96_AR_ANALOG     (1 &lt;&lt; 1)
DECL|macro|RME96_AR_FREQPAD_0
mdefine_line|#define RME96_AR_FREQPAD_0  (1 &lt;&lt; 2)
DECL|macro|RME96_AR_FREQPAD_1
mdefine_line|#define RME96_AR_FREQPAD_1  (1 &lt;&lt; 3)
DECL|macro|RME96_AR_FREQPAD_2
mdefine_line|#define RME96_AR_FREQPAD_2  (1 &lt;&lt; 4)
DECL|macro|RME96_AR_PD2
mdefine_line|#define RME96_AR_PD2        (1 &lt;&lt; 5)
DECL|macro|RME96_AR_DAC_EN
mdefine_line|#define RME96_AR_DAC_EN     (1 &lt;&lt; 6)
DECL|macro|RME96_AR_CLATCH
mdefine_line|#define RME96_AR_CLATCH     (1 &lt;&lt; 7)
DECL|macro|RME96_AR_CCLK
mdefine_line|#define RME96_AR_CCLK       (1 &lt;&lt; 8)
DECL|macro|RME96_AR_CDATA
mdefine_line|#define RME96_AR_CDATA      (1 &lt;&lt; 9)
DECL|macro|RME96_AR_BITPOS_F0
mdefine_line|#define RME96_AR_BITPOS_F0 2
DECL|macro|RME96_AR_BITPOS_F1
mdefine_line|#define RME96_AR_BITPOS_F1 3
DECL|macro|RME96_AR_BITPOS_F2
mdefine_line|#define RME96_AR_BITPOS_F2 4
multiline_comment|/* Monitor tracks */
DECL|macro|RME96_MONITOR_TRACKS_1_2
mdefine_line|#define RME96_MONITOR_TRACKS_1_2 0
DECL|macro|RME96_MONITOR_TRACKS_3_4
mdefine_line|#define RME96_MONITOR_TRACKS_3_4 1
DECL|macro|RME96_MONITOR_TRACKS_5_6
mdefine_line|#define RME96_MONITOR_TRACKS_5_6 2
DECL|macro|RME96_MONITOR_TRACKS_7_8
mdefine_line|#define RME96_MONITOR_TRACKS_7_8 3
multiline_comment|/* Attenuation */
DECL|macro|RME96_ATTENUATION_0
mdefine_line|#define RME96_ATTENUATION_0 0
DECL|macro|RME96_ATTENUATION_6
mdefine_line|#define RME96_ATTENUATION_6 1
DECL|macro|RME96_ATTENUATION_12
mdefine_line|#define RME96_ATTENUATION_12 2
DECL|macro|RME96_ATTENUATION_18
mdefine_line|#define RME96_ATTENUATION_18 3
multiline_comment|/* Input types */
DECL|macro|RME96_INPUT_OPTICAL
mdefine_line|#define RME96_INPUT_OPTICAL 0
DECL|macro|RME96_INPUT_COAXIAL
mdefine_line|#define RME96_INPUT_COAXIAL 1
DECL|macro|RME96_INPUT_INTERNAL
mdefine_line|#define RME96_INPUT_INTERNAL 2
DECL|macro|RME96_INPUT_XLR
mdefine_line|#define RME96_INPUT_XLR 3
DECL|macro|RME96_INPUT_ANALOG
mdefine_line|#define RME96_INPUT_ANALOG 4
multiline_comment|/* Clock modes */
DECL|macro|RME96_CLOCKMODE_SLAVE
mdefine_line|#define RME96_CLOCKMODE_SLAVE 0
DECL|macro|RME96_CLOCKMODE_MASTER
mdefine_line|#define RME96_CLOCKMODE_MASTER 1
DECL|macro|RME96_CLOCKMODE_WORDCLOCK
mdefine_line|#define RME96_CLOCKMODE_WORDCLOCK 2
multiline_comment|/* Block sizes in bytes */
DECL|macro|RME96_SMALL_BLOCK_SIZE
mdefine_line|#define RME96_SMALL_BLOCK_SIZE 2048
DECL|macro|RME96_LARGE_BLOCK_SIZE
mdefine_line|#define RME96_LARGE_BLOCK_SIZE 8192
multiline_comment|/* Volume control */
DECL|macro|RME96_AD1852_VOL_BITS
mdefine_line|#define RME96_AD1852_VOL_BITS 14
DECL|macro|RME96_AD1855_VOL_BITS
mdefine_line|#define RME96_AD1855_VOL_BITS 10
multiline_comment|/*&n; * PCI vendor/device ids, could in the future be defined in &lt;linux/pci.h&gt;,&n; * therefore #ifndef is used.&n; */
macro_line|#ifndef PCI_VENDOR_ID_XILINX
DECL|macro|PCI_VENDOR_ID_XILINX
mdefine_line|#define PCI_VENDOR_ID_XILINX 0x10ee
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI96
DECL|macro|PCI_DEVICE_ID_DIGI96
mdefine_line|#define PCI_DEVICE_ID_DIGI96 0x3fc0
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI96_8
DECL|macro|PCI_DEVICE_ID_DIGI96_8
mdefine_line|#define PCI_DEVICE_ID_DIGI96_8 0x3fc1
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI96_8_PRO
DECL|macro|PCI_DEVICE_ID_DIGI96_8_PRO
mdefine_line|#define PCI_DEVICE_ID_DIGI96_8_PRO 0x3fc2
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
DECL|macro|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
mdefine_line|#define PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST 0x3fc3
macro_line|#endif
DECL|struct|snd_rme96
r_typedef
r_struct
id|snd_rme96
(brace
DECL|member|lock
id|spinlock_t
id|lock
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
DECL|member|iobase
r_int
r_int
id|iobase
suffix:semicolon
DECL|member|wcreg
id|u32
id|wcreg
suffix:semicolon
multiline_comment|/* cached write control register value */
DECL|member|wcreg_spdif
id|u32
id|wcreg_spdif
suffix:semicolon
multiline_comment|/* S/PDIF setup */
DECL|member|wcreg_spdif_stream
id|u32
id|wcreg_spdif_stream
suffix:semicolon
multiline_comment|/* S/PDIF setup (temporary) */
DECL|member|rcreg
id|u32
id|rcreg
suffix:semicolon
multiline_comment|/* cached read control register value */
DECL|member|areg
id|u32
id|areg
suffix:semicolon
multiline_comment|/* cached additional register value */
DECL|member|vol
id|u16
id|vol
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* cached volume of analog output */
DECL|member|rev
id|u8
id|rev
suffix:semicolon
multiline_comment|/* card revision number */
DECL|member|playback_substream
id|snd_pcm_substream_t
op_star
id|playback_substream
suffix:semicolon
DECL|member|capture_substream
id|snd_pcm_substream_t
op_star
id|capture_substream
suffix:semicolon
DECL|member|playback_frlog
r_int
id|playback_frlog
suffix:semicolon
multiline_comment|/* log2 of framesize */
DECL|member|capture_frlog
r_int
id|capture_frlog
suffix:semicolon
DECL|member|playback_periodsize
r_int
id|playback_periodsize
suffix:semicolon
multiline_comment|/* in bytes, zero if not used */
DECL|member|capture_periodsize
r_int
id|capture_periodsize
suffix:semicolon
multiline_comment|/* in bytes, zero if not used */
DECL|member|card
id|snd_card_t
op_star
id|card
suffix:semicolon
DECL|member|spdif_pcm
id|snd_pcm_t
op_star
id|spdif_pcm
suffix:semicolon
DECL|member|adat_pcm
id|snd_pcm_t
op_star
id|adat_pcm
suffix:semicolon
DECL|member|pci
r_struct
id|pci_dev
op_star
id|pci
suffix:semicolon
DECL|member|spdif_ctl
id|snd_kcontrol_t
op_star
id|spdif_ctl
suffix:semicolon
DECL|typedef|rme96_t
)brace
id|rme96_t
suffix:semicolon
DECL|variable|snd_rme96_ids
r_static
r_struct
id|pci_device_id
id|snd_rme96_ids
(braket
)braket
op_assign
(brace
(brace
id|PCI_VENDOR_ID_XILINX
comma
id|PCI_DEVICE_ID_DIGI96
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
id|PCI_VENDOR_ID_XILINX
comma
id|PCI_DEVICE_ID_DIGI96_8
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
id|PCI_VENDOR_ID_XILINX
comma
id|PCI_DEVICE_ID_DIGI96_8_PRO
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
id|PCI_VENDOR_ID_XILINX
comma
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|snd_rme96_ids
)paren
suffix:semicolon
DECL|macro|RME96_ISPLAYING
mdefine_line|#define RME96_ISPLAYING(rme96) ((rme96)-&gt;wcreg &amp; RME96_WCR_START)
DECL|macro|RME96_ISRECORDING
mdefine_line|#define RME96_ISRECORDING(rme96) ((rme96)-&gt;wcreg &amp; RME96_WCR_START_2)
DECL|macro|RME96_HAS_ANALOG_IN
mdefine_line|#define&t;RME96_HAS_ANALOG_IN(rme96) ((rme96)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST)
DECL|macro|RME96_HAS_ANALOG_OUT
mdefine_line|#define&t;RME96_HAS_ANALOG_OUT(rme96) ((rme96)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI96_8_PRO || &bslash;&n;&t;&t;&t;&t;     (rme96)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST)
DECL|macro|RME96_DAC_IS_1852
mdefine_line|#define&t;RME96_DAC_IS_1852(rme96) (RME96_HAS_ANALOG_OUT(rme96) &amp;&amp; (rme96)-&gt;rev &gt;= 4)
DECL|macro|RME96_DAC_IS_1855
mdefine_line|#define&t;RME96_DAC_IS_1855(rme96) (((rme96)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST &amp;&amp; (rme96)-&gt;rev &lt; 4) || &bslash;&n;&t;&t;&t;          ((rme96)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI96_8_PRO &amp;&amp; (rme96)-&gt;rev == 2))
DECL|macro|RME96_185X_MAX_OUT
mdefine_line|#define&t;RME96_185X_MAX_OUT(rme96) ((1 &lt;&lt; (RME96_DAC_IS_1852(rme96) ? RME96_AD1852_VOL_BITS : RME96_AD1855_VOL_BITS)) - 1)
r_static
r_int
id|snd_rme96_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_int
id|snd_rme96_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_int
id|snd_rme96_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
suffix:semicolon
r_static
r_int
id|snd_rme96_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
suffix:semicolon
r_static
id|snd_pcm_uframes_t
id|snd_rme96_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
id|snd_pcm_uframes_t
id|snd_rme96_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_void
id|__devinit
id|snd_rme96_proc_init
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
suffix:semicolon
r_static
r_int
id|snd_rme96_create_switches
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|rme96_t
op_star
id|rme96
)paren
suffix:semicolon
r_static
r_int
id|snd_rme96_getinputtype
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
suffix:semicolon
r_static
r_inline
r_int
r_int
DECL|function|snd_rme96_playback_ptr
id|snd_rme96_playback_ptr
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_return
(paren
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_GET_PLAY_POS
)paren
op_amp
id|RME96_RCR_AUDIO_ADDR_MASK
)paren
op_rshift
id|rme96-&gt;playback_frlog
suffix:semicolon
)brace
r_static
r_inline
r_int
r_int
DECL|function|snd_rme96_capture_ptr
id|snd_rme96_capture_ptr
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_return
(paren
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_GET_REC_POS
)paren
op_amp
id|RME96_RCR_AUDIO_ADDR_MASK
)paren
op_rshift
id|rme96-&gt;capture_frlog
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_ratecode
id|snd_rme96_ratecode
c_func
(paren
r_int
id|rate
)paren
(brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|32000
suffix:colon
r_return
id|SNDRV_PCM_RATE_32000
suffix:semicolon
r_case
l_int|44100
suffix:colon
r_return
id|SNDRV_PCM_RATE_44100
suffix:semicolon
r_case
l_int|48000
suffix:colon
r_return
id|SNDRV_PCM_RATE_48000
suffix:semicolon
r_case
l_int|64000
suffix:colon
r_return
id|SNDRV_PCM_RATE_64000
suffix:semicolon
r_case
l_int|88200
suffix:colon
r_return
id|SNDRV_PCM_RATE_88200
suffix:semicolon
r_case
l_int|96000
suffix:colon
r_return
id|SNDRV_PCM_RATE_96000
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_silence
id|snd_rme96_playback_silence
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme96-&gt;playback_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme96-&gt;playback_frlog
suffix:semicolon
id|memset_io
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_PLAY_BUFFER
op_plus
id|pos
comma
l_int|0
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_copy
id|snd_rme96_playback_copy
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
r_void
id|__user
op_star
id|src
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme96-&gt;playback_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme96-&gt;playback_frlog
suffix:semicolon
id|copy_from_user_toio
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_PLAY_BUFFER
op_plus
id|pos
comma
id|src
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_copy
id|snd_rme96_capture_copy
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
r_void
id|__user
op_star
id|dst
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme96-&gt;capture_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme96-&gt;capture_frlog
suffix:semicolon
id|copy_to_user_fromio
c_func
(paren
id|dst
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_REC_BUFFER
op_plus
id|pos
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Digital output capabilites (S/PDIF)&n; */
DECL|variable|snd_rme96_playback_spdif_info
r_static
id|snd_pcm_hardware_t
id|snd_rme96_playback_spdif_info
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP_IOMEM
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
dot
id|rates
op_assign
(paren
id|SNDRV_PCM_RATE_32000
op_or
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
op_or
id|SNDRV_PCM_RATE_64000
op_or
id|SNDRV_PCM_RATE_88200
op_or
id|SNDRV_PCM_RATE_96000
)paren
comma
dot
id|rate_min
op_assign
l_int|32000
comma
dot
id|rate_max
op_assign
l_int|96000
comma
dot
id|channels_min
op_assign
l_int|2
comma
dot
id|channels_max
op_assign
l_int|2
comma
dot
id|buffer_bytes_max
op_assign
id|RME96_BUFFER_SIZE
comma
dot
id|period_bytes_min
op_assign
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|period_bytes_max
op_assign
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_min
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_max
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Digital input capabilites (S/PDIF)&n; */
DECL|variable|snd_rme96_capture_spdif_info
r_static
id|snd_pcm_hardware_t
id|snd_rme96_capture_spdif_info
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP_IOMEM
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
dot
id|rates
op_assign
(paren
id|SNDRV_PCM_RATE_32000
op_or
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
op_or
id|SNDRV_PCM_RATE_64000
op_or
id|SNDRV_PCM_RATE_88200
op_or
id|SNDRV_PCM_RATE_96000
)paren
comma
dot
id|rate_min
op_assign
l_int|32000
comma
dot
id|rate_max
op_assign
l_int|96000
comma
dot
id|channels_min
op_assign
l_int|2
comma
dot
id|channels_max
op_assign
l_int|2
comma
dot
id|buffer_bytes_max
op_assign
id|RME96_BUFFER_SIZE
comma
dot
id|period_bytes_min
op_assign
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|period_bytes_max
op_assign
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_min
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_max
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Digital output capabilites (ADAT)&n; */
DECL|variable|snd_rme96_playback_adat_info
r_static
id|snd_pcm_hardware_t
id|snd_rme96_playback_adat_info
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP_IOMEM
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
dot
id|rates
op_assign
(paren
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
)paren
comma
dot
id|rate_min
op_assign
l_int|44100
comma
dot
id|rate_max
op_assign
l_int|48000
comma
dot
id|channels_min
op_assign
l_int|8
comma
dot
id|channels_max
op_assign
l_int|8
comma
dot
id|buffer_bytes_max
op_assign
id|RME96_BUFFER_SIZE
comma
dot
id|period_bytes_min
op_assign
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|period_bytes_max
op_assign
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_min
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_max
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Digital input capabilites (ADAT)&n; */
DECL|variable|snd_rme96_capture_adat_info
r_static
id|snd_pcm_hardware_t
id|snd_rme96_capture_adat_info
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP_IOMEM
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
dot
id|rates
op_assign
(paren
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
)paren
comma
dot
id|rate_min
op_assign
l_int|44100
comma
dot
id|rate_max
op_assign
l_int|48000
comma
dot
id|channels_min
op_assign
l_int|8
comma
dot
id|channels_max
op_assign
l_int|8
comma
dot
id|buffer_bytes_max
op_assign
id|RME96_BUFFER_SIZE
comma
dot
id|period_bytes_min
op_assign
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|period_bytes_max
op_assign
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_min
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_LARGE_BLOCK_SIZE
comma
dot
id|periods_max
op_assign
id|RME96_BUFFER_SIZE
op_div
id|RME96_SMALL_BLOCK_SIZE
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * The CDATA, CCLK and CLATCH bits can be used to write to the SPI interface&n; * of the AD1852 or AD1852 D/A converter on the board.  CDATA must be set up&n; * on the falling edge of CCLK and be stable on the rising edge.  The rising&n; * edge of CLATCH after the last data bit clocks in the whole data word.&n; * A fast processor could probably drive the SPI interface faster than the&n; * DAC can handle (3MHz for the 1855, unknown for the 1852).  The udelay(1)&n; * limits the data rate to 500KHz and only causes a delay of 33 microsecs.&n; *&n; * NOTE: increased delay from 1 to 10, since there where problems setting&n; * the volume.&n; */
r_static
r_void
DECL|function|snd_rme96_write_SPI
id|snd_rme96_write_SPI
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
id|u16
id|val
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|val
op_amp
l_int|0x8000
)paren
(brace
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_CDATA
suffix:semicolon
)brace
r_else
(brace
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_CDATA
suffix:semicolon
)brace
id|rme96-&gt;areg
op_and_assign
op_complement
(paren
id|RME96_AR_CCLK
op_or
id|RME96_AR_CLATCH
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_CCLK
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|val
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|rme96-&gt;areg
op_and_assign
op_complement
(paren
id|RME96_AR_CCLK
op_or
id|RME96_AR_CDATA
)paren
suffix:semicolon
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_CLATCH
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_CLATCH
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_apply_dac_volume
id|snd_rme96_apply_dac_volume
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_if
c_cond
(paren
id|RME96_DAC_IS_1852
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_write_SPI
c_func
(paren
id|rme96
comma
(paren
id|rme96-&gt;vol
(braket
l_int|0
)braket
op_lshift
l_int|2
)paren
op_or
l_int|0x0
)paren
suffix:semicolon
id|snd_rme96_write_SPI
c_func
(paren
id|rme96
comma
(paren
id|rme96-&gt;vol
(braket
l_int|1
)braket
op_lshift
l_int|2
)paren
op_or
l_int|0x2
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|RME96_DAC_IS_1855
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_write_SPI
c_func
(paren
id|rme96
comma
(paren
id|rme96-&gt;vol
(braket
l_int|0
)braket
op_amp
l_int|0x3FF
)paren
op_or
l_int|0x000
)paren
suffix:semicolon
id|snd_rme96_write_SPI
c_func
(paren
id|rme96
comma
(paren
id|rme96-&gt;vol
(braket
l_int|1
)braket
op_amp
l_int|0x3FF
)paren
op_or
l_int|0x400
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|snd_rme96_reset_dac
id|snd_rme96_reset_dac
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_PD
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_getmontracks
id|snd_rme96_getmontracks
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_return
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_MONITOR_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_MONITOR_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_setmontracks
id|snd_rme96_setmontracks
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|montracks
)paren
(brace
r_if
c_cond
(paren
id|montracks
op_amp
l_int|1
)paren
(brace
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MONITOR_0
suffix:semicolon
)brace
r_else
(brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_MONITOR_0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|montracks
op_amp
l_int|2
)paren
(brace
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MONITOR_1
suffix:semicolon
)brace
r_else
(brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_MONITOR_1
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_getattenuation
id|snd_rme96_getattenuation
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_return
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_GAIN_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_GAIN_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_setattenuation
id|snd_rme96_setattenuation
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|attenuation
)paren
(brace
r_switch
c_cond
(paren
id|attenuation
)paren
(brace
r_case
l_int|0
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
op_complement
id|RME96_WCR_GAIN_0
)paren
op_amp
op_complement
id|RME96_WCR_GAIN_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_GAIN_0
)paren
op_amp
op_complement
id|RME96_WCR_GAIN_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
op_complement
id|RME96_WCR_GAIN_0
)paren
op_or
id|RME96_WCR_GAIN_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_GAIN_0
)paren
op_or
id|RME96_WCR_GAIN_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_getrate
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
op_star
id|is_adat
)paren
(brace
r_int
id|n
comma
id|rate
suffix:semicolon
op_star
id|is_adat
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;areg
op_amp
id|RME96_AR_ANALOG
)paren
(brace
multiline_comment|/* Analog input, overrides S/PDIF setting */
id|n
op_assign
(paren
(paren
id|rme96-&gt;areg
op_rshift
id|RME96_AR_BITPOS_F0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;areg
op_rshift
id|RME96_AR_BITPOS_F1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|n
)paren
(brace
r_case
l_int|1
suffix:colon
id|rate
op_assign
l_int|32000
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|rate
op_assign
l_int|44100
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|rate
op_assign
l_int|48000
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_return
(paren
id|rme96-&gt;areg
op_amp
id|RME96_AR_BITPOS_F2
)paren
ques
c_cond
id|rate
op_lshift
l_int|1
suffix:colon
id|rate
suffix:semicolon
)brace
id|rme96-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_LOCK
)paren
(brace
multiline_comment|/* ADAT rate */
op_star
id|is_adat
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_T_OUT
)paren
(brace
r_return
l_int|48000
suffix:semicolon
)brace
r_return
l_int|44100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_VERF
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
multiline_comment|/* S/PDIF rate */
id|n
op_assign
(paren
(paren
id|rme96-&gt;rcreg
op_rshift
id|RME96_RCR_BITPOS_F0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;rcreg
op_rshift
id|RME96_RCR_BITPOS_F1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;rcreg
op_rshift
id|RME96_RCR_BITPOS_F2
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|n
)paren
(brace
r_case
l_int|0
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_T_OUT
)paren
(brace
r_return
l_int|64000
suffix:semicolon
)brace
r_return
op_minus
l_int|1
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
l_int|96000
suffix:semicolon
r_case
l_int|4
suffix:colon
r_return
l_int|88200
suffix:semicolon
r_case
l_int|5
suffix:colon
r_return
l_int|48000
suffix:semicolon
r_case
l_int|6
suffix:colon
r_return
l_int|44100
suffix:semicolon
r_case
l_int|7
suffix:colon
r_return
l_int|32000
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_getrate
id|snd_rme96_playback_getrate
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_int
id|rate
comma
id|dummy
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
op_logical_and
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|dummy
)paren
)paren
OG
l_int|0
)paren
(brace
multiline_comment|/* slave clock */
r_return
id|rate
suffix:semicolon
)brace
id|rate
op_assign
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_FREQ_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_FREQ_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|1
suffix:colon
id|rate
op_assign
l_int|32000
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|rate
op_assign
l_int|44100
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|rate
op_assign
l_int|48000
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_return
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_DS
)paren
ques
c_cond
id|rate
op_lshift
l_int|1
suffix:colon
id|rate
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_setrate
id|snd_rme96_playback_setrate
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|rate
)paren
(brace
r_int
id|ds
suffix:semicolon
id|ds
op_assign
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_DS
suffix:semicolon
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|32000
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_0
)paren
op_amp
op_complement
id|RME96_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_1
)paren
op_amp
op_complement
id|RME96_WCR_FREQ_0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_0
)paren
op_or
id|RME96_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|64000
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_0
)paren
op_amp
op_complement
id|RME96_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|88200
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_1
)paren
op_amp
op_complement
id|RME96_WCR_FREQ_0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|96000
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_DS
suffix:semicolon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_FREQ_0
)paren
op_or
id|RME96_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|ds
op_logical_and
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_DS
)paren
op_logical_or
(paren
id|ds
op_logical_and
op_logical_neg
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_DS
)paren
)paren
)paren
(brace
multiline_comment|/* change to/from double-speed: reset the DAC (if available) */
id|snd_rme96_reset_dac
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_else
(brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_analog_setrate
id|snd_rme96_capture_analog_setrate
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|rate
)paren
(brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|32000
suffix:colon
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_or
id|RME96_AR_FREQPAD_0
)paren
op_amp
op_complement
id|RME96_AR_FREQPAD_1
)paren
op_amp
op_complement
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_amp
op_complement
id|RME96_AR_FREQPAD_0
)paren
op_or
id|RME96_AR_FREQPAD_1
)paren
op_amp
op_complement
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_or
id|RME96_AR_FREQPAD_0
)paren
op_or
id|RME96_AR_FREQPAD_1
)paren
op_amp
op_complement
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|64000
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rev
OL
l_int|4
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_or
id|RME96_AR_FREQPAD_0
)paren
op_amp
op_complement
id|RME96_AR_FREQPAD_1
)paren
op_or
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|88200
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rev
OL
l_int|4
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_amp
op_complement
id|RME96_AR_FREQPAD_0
)paren
op_or
id|RME96_AR_FREQPAD_1
)paren
op_or
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|96000
suffix:colon
id|rme96-&gt;areg
op_assign
(paren
(paren
id|rme96-&gt;areg
op_or
id|RME96_AR_FREQPAD_0
)paren
op_or
id|RME96_AR_FREQPAD_1
)paren
op_or
id|RME96_AR_FREQPAD_2
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_setclockmode
id|snd_rme96_setclockmode
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|mode
)paren
(brace
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|RME96_CLOCKMODE_SLAVE
suffix:colon
multiline_comment|/* AutoSync */
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_MASTER
suffix:semicolon
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_WSEL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_CLOCKMODE_MASTER
suffix:colon
multiline_comment|/* Internal */
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MASTER
suffix:semicolon
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_WSEL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_CLOCKMODE_WORDCLOCK
suffix:colon
multiline_comment|/* Word clock is a master mode */
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MASTER
suffix:semicolon
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_WSEL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_getclockmode
id|snd_rme96_getclockmode
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_if
c_cond
(paren
id|rme96-&gt;areg
op_amp
id|RME96_AR_WSEL
)paren
(brace
r_return
id|RME96_CLOCKMODE_WORDCLOCK
suffix:semicolon
)brace
r_return
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
ques
c_cond
id|RME96_CLOCKMODE_MASTER
suffix:colon
id|RME96_CLOCKMODE_SLAVE
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_setinputtype
id|snd_rme96_setinputtype
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|type
)paren
(brace
r_int
id|n
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|RME96_INPUT_OPTICAL
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
op_complement
id|RME96_WCR_INP_0
)paren
op_amp
op_complement
id|RME96_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_COAXIAL
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_INP_0
)paren
op_amp
op_complement
id|RME96_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_INTERNAL
suffix:colon
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
op_complement
id|RME96_WCR_INP_0
)paren
op_or
id|RME96_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_XLR
suffix:colon
r_if
c_cond
(paren
(paren
id|rme96-&gt;pci-&gt;device
op_ne
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
op_logical_and
id|rme96-&gt;pci-&gt;device
op_ne
id|PCI_DEVICE_ID_DIGI96_8_PRO
)paren
op_logical_or
(paren
id|rme96-&gt;pci-&gt;device
op_eq
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
op_logical_and
id|rme96-&gt;rev
OG
l_int|4
)paren
)paren
(brace
multiline_comment|/* Only Digi96/8 PRO and Digi96/8 PAD supports XLR */
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_assign
(paren
id|rme96-&gt;wcreg
op_or
id|RME96_WCR_INP_0
)paren
op_or
id|RME96_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_ANALOG
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME96_HAS_ANALOG_IN
c_func
(paren
id|rme96
)paren
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_ANALOG
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;rev
OL
l_int|4
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; * Revision less than 004 does not support 64 and&n;&t;&t;&t; * 88.2 kHz&n;&t;&t;&t; */
r_if
c_cond
(paren
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|n
)paren
op_eq
l_int|88200
)paren
(brace
id|snd_rme96_capture_analog_setrate
c_func
(paren
id|rme96
comma
l_int|44100
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|n
)paren
op_eq
l_int|64000
)paren
(brace
id|snd_rme96_capture_analog_setrate
c_func
(paren
id|rme96
comma
l_int|32000
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|type
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
id|RME96_HAS_ANALOG_IN
c_func
(paren
id|rme96
)paren
)paren
(brace
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_ANALOG
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_getinputtype
id|snd_rme96_getinputtype
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_if
c_cond
(paren
id|rme96-&gt;areg
op_amp
id|RME96_AR_ANALOG
)paren
(brace
r_return
id|RME96_INPUT_ANALOG
suffix:semicolon
)brace
r_return
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_INP_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme96-&gt;wcreg
op_rshift
id|RME96_WCR_BITPOS_INP_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_setframelog
id|snd_rme96_setframelog
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|n_channels
comma
r_int
id|is_playback
)paren
(brace
r_int
id|frlog
suffix:semicolon
r_if
c_cond
(paren
id|n_channels
op_eq
l_int|2
)paren
(brace
id|frlog
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* assume 8 channels */
id|frlog
op_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|is_playback
)paren
(brace
id|frlog
op_add_assign
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MODE24
)paren
ques
c_cond
l_int|2
suffix:colon
l_int|1
suffix:semicolon
id|rme96-&gt;playback_frlog
op_assign
id|frlog
suffix:semicolon
)brace
r_else
(brace
id|frlog
op_add_assign
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MODE24_2
)paren
ques
c_cond
l_int|2
suffix:colon
l_int|1
suffix:semicolon
id|rme96-&gt;capture_frlog
op_assign
id|frlog
suffix:semicolon
)brace
)brace
r_static
r_int
DECL|function|snd_rme96_playback_setformat
id|snd_rme96_playback_setformat
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|format
)paren
(brace
r_switch
c_cond
(paren
id|format
)paren
(brace
r_case
id|SNDRV_PCM_FORMAT_S16_LE
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_MODE24
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_FORMAT_S32_LE
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MODE24
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_setformat
id|snd_rme96_capture_setformat
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|format
)paren
(brace
r_switch
c_cond
(paren
id|format
)paren
(brace
r_case
id|SNDRV_PCM_FORMAT_S16_LE
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_MODE24_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_FORMAT_S32_LE
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_MODE24_2
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_set_period_properties
id|snd_rme96_set_period_properties
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|period_bytes
)paren
(brace
r_switch
c_cond
(paren
id|period_bytes
)paren
(brace
r_case
id|RME96_LARGE_BLOCK_SIZE
suffix:colon
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_ISEL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_SMALL_BLOCK_SIZE
suffix:colon
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_ISEL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_IDIS
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_hw_params
id|snd_rme96_playback_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|params
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_int
id|err
comma
id|rate
comma
id|dummy
suffix:semicolon
id|runtime-&gt;dma_area
op_assign
(paren
r_void
op_star
)paren
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_PLAY_BUFFER
)paren
suffix:semicolon
id|runtime-&gt;dma_addr
op_assign
id|rme96-&gt;port
op_plus
id|RME96_IO_PLAY_BUFFER
suffix:semicolon
id|runtime-&gt;dma_bytes
op_assign
id|RME96_BUFFER_SIZE
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
op_logical_and
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|dummy
)paren
)paren
OG
l_int|0
)paren
(brace
multiline_comment|/* slave clock */
r_if
c_cond
(paren
(paren
r_int
)paren
id|params_rate
c_func
(paren
id|params
)paren
op_ne
id|rate
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_playback_setrate
c_func
(paren
id|rme96
comma
id|params_rate
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_playback_setformat
c_func
(paren
id|rme96
comma
id|params_format
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|snd_rme96_setframelog
c_func
(paren
id|rme96
comma
id|params_channels
c_func
(paren
id|params
)paren
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;capture_periodsize
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme96-&gt;playback_frlog
op_ne
id|rme96-&gt;capture_periodsize
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
)brace
id|rme96-&gt;playback_periodsize
op_assign
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme96-&gt;playback_frlog
suffix:semicolon
id|snd_rme96_set_period_properties
c_func
(paren
id|rme96
comma
id|rme96-&gt;playback_periodsize
)paren
suffix:semicolon
multiline_comment|/* S/PDIF setup */
r_if
c_cond
(paren
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_ADAT
)paren
op_eq
l_int|0
)paren
(brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
(paren
id|RME96_WCR_PRO
op_or
id|RME96_WCR_DOLBY
op_or
id|RME96_WCR_EMP
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
op_or_assign
id|rme96-&gt;wcreg_spdif_stream
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_hw_params
id|snd_rme96_capture_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|params
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_int
id|err
comma
id|isadat
comma
id|rate
suffix:semicolon
id|runtime-&gt;dma_area
op_assign
(paren
r_void
op_star
)paren
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_REC_BUFFER
)paren
suffix:semicolon
id|runtime-&gt;dma_addr
op_assign
id|rme96-&gt;port
op_plus
id|RME96_IO_REC_BUFFER
suffix:semicolon
id|runtime-&gt;dma_bytes
op_assign
id|RME96_BUFFER_SIZE
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_capture_setformat
c_func
(paren
id|rme96
comma
id|params_format
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_eq
id|RME96_INPUT_ANALOG
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_capture_analog_setrate
c_func
(paren
id|rme96
comma
id|params_rate
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|isadat
)paren
)paren
OG
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
r_int
)paren
id|params_rate
c_func
(paren
id|params
)paren
op_ne
id|rate
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|isadat
op_logical_and
id|runtime-&gt;hw.channels_min
op_eq
l_int|2
)paren
op_logical_or
(paren
op_logical_neg
id|isadat
op_logical_and
id|runtime-&gt;hw.channels_min
op_eq
l_int|8
)paren
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
)brace
id|snd_rme96_setframelog
c_func
(paren
id|rme96
comma
id|params_channels
c_func
(paren
id|params
)paren
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;playback_periodsize
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme96-&gt;capture_frlog
op_ne
id|rme96-&gt;playback_periodsize
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
)brace
id|rme96-&gt;capture_periodsize
op_assign
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme96-&gt;capture_frlog
suffix:semicolon
id|snd_rme96_set_period_properties
c_func
(paren
id|rme96
comma
id|rme96-&gt;capture_periodsize
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_playback_start
id|snd_rme96_playback_start
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|from_pause
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|from_pause
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_PLAY_POS
)paren
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_START
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_capture_start
id|snd_rme96_capture_start
c_func
(paren
id|rme96_t
op_star
id|rme96
comma
r_int
id|from_pause
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|from_pause
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_REC_POS
)paren
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_START_2
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_playback_stop
id|snd_rme96_playback_stop
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
multiline_comment|/*&n;&t; * Check if there is an unconfirmed IRQ, if so confirm it, or else&n;&t; * the hardware will not stop generating interrupts&n;&t; */
id|rme96-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONFIRM_PLAY_IRQ
)paren
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_START
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_capture_stop
id|snd_rme96_capture_stop
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
id|rme96-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ_2
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONFIRM_REC_IRQ
)paren
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_START_2
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
id|irqreturn_t
DECL|function|snd_rme96_interrupt
id|snd_rme96_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|dev_id
suffix:semicolon
id|rme96-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
multiline_comment|/* fastpath out, to ease interrupt sharing */
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ
)paren
op_logical_or
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ_2
)paren
)paren
)paren
(brace
r_return
id|IRQ_NONE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ
)paren
(brace
multiline_comment|/* playback */
id|snd_pcm_period_elapsed
c_func
(paren
id|rme96-&gt;playback_substream
)paren
suffix:semicolon
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONFIRM_PLAY_IRQ
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;rcreg
op_amp
id|RME96_RCR_IRQ_2
)paren
(brace
multiline_comment|/* capture */
id|snd_pcm_period_elapsed
c_func
(paren
id|rme96-&gt;capture_substream
)paren
suffix:semicolon
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONFIRM_REC_IRQ
)paren
suffix:semicolon
)brace
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
DECL|variable|period_bytes
r_static
r_int
r_int
id|period_bytes
(braket
)braket
op_assign
(brace
id|RME96_SMALL_BLOCK_SIZE
comma
id|RME96_LARGE_BLOCK_SIZE
)brace
suffix:semicolon
DECL|variable|hw_constraints_period_bytes
r_static
id|snd_pcm_hw_constraint_list_t
id|hw_constraints_period_bytes
op_assign
(brace
dot
id|count
op_assign
id|ARRAY_SIZE
c_func
(paren
id|period_bytes
)paren
comma
dot
id|list
op_assign
id|period_bytes
comma
dot
id|mask
op_assign
l_int|0
)brace
suffix:semicolon
r_static
r_int
DECL|function|snd_rme96_playback_spdif_open
id|snd_rme96_playback_spdif_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
id|rate
comma
id|dummy
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;playback_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_and_assign
op_complement
id|RME96_WCR_ADAT
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|rme96-&gt;playback_substream
op_assign
id|substream
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme96_playback_spdif_info
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
op_logical_and
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|dummy
)paren
)paren
OG
l_int|0
)paren
(brace
multiline_comment|/* slave clock */
id|runtime-&gt;hw.rates
op_assign
id|snd_rme96_ratecode
c_func
(paren
id|rate
)paren
suffix:semicolon
id|runtime-&gt;hw.rate_min
op_assign
id|rate
suffix:semicolon
id|runtime-&gt;hw.rate_max
op_assign
id|rate
suffix:semicolon
)brace
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME96_BUFFER_SIZE
comma
id|RME96_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
id|rme96-&gt;wcreg_spdif_stream
op_assign
id|rme96-&gt;wcreg_spdif
suffix:semicolon
id|rme96-&gt;spdif_ctl-&gt;vd
(braket
l_int|0
)braket
dot
id|access
op_and_assign
op_complement
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
suffix:semicolon
id|snd_ctl_notify
c_func
(paren
id|rme96-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
op_or
id|SNDRV_CTL_EVENT_MASK_INFO
comma
op_amp
id|rme96-&gt;spdif_ctl-&gt;id
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_spdif_open
id|snd_rme96_capture_spdif_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
id|isadat
comma
id|rate
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme96_capture_spdif_info
suffix:semicolon
r_if
c_cond
(paren
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|isadat
)paren
)paren
OG
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|isadat
)paren
(brace
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|runtime-&gt;hw.rates
op_assign
id|snd_rme96_ratecode
c_func
(paren
id|rate
)paren
suffix:semicolon
id|runtime-&gt;hw.rate_min
op_assign
id|rate
suffix:semicolon
id|runtime-&gt;hw.rate_max
op_assign
id|rate
suffix:semicolon
)brace
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;capture_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme96-&gt;capture_substream
op_assign
id|substream
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME96_BUFFER_SIZE
comma
id|RME96_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_adat_open
id|snd_rme96_playback_adat_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
id|rate
comma
id|dummy
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;playback_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme96-&gt;wcreg
op_or_assign
id|RME96_WCR_ADAT
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|rme96-&gt;playback_substream
op_assign
id|substream
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme96_playback_adat_info
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
op_logical_and
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_ne
id|RME96_INPUT_ANALOG
op_logical_and
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|dummy
)paren
)paren
OG
l_int|0
)paren
(brace
multiline_comment|/* slave clock */
id|runtime-&gt;hw.rates
op_assign
id|snd_rme96_ratecode
c_func
(paren
id|rate
)paren
suffix:semicolon
id|runtime-&gt;hw.rate_min
op_assign
id|rate
suffix:semicolon
id|runtime-&gt;hw.rate_max
op_assign
id|rate
suffix:semicolon
)brace
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME96_BUFFER_SIZE
comma
id|RME96_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_adat_open
id|snd_rme96_capture_adat_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
id|isadat
comma
id|rate
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme96_capture_adat_info
suffix:semicolon
r_if
c_cond
(paren
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_eq
id|RME96_INPUT_ANALOG
)paren
(brace
multiline_comment|/* makes no sense to use analog input. Note that analog&n;                   expension cards AEB4/8-I are RME96_INPUT_INTERNAL */
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|rate
op_assign
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|isadat
)paren
)paren
OG
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|isadat
)paren
(brace
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|runtime-&gt;hw.rates
op_assign
id|snd_rme96_ratecode
c_func
(paren
id|rate
)paren
suffix:semicolon
id|runtime-&gt;hw.rate_min
op_assign
id|rate
suffix:semicolon
id|runtime-&gt;hw.rate_max
op_assign
id|rate
suffix:semicolon
)brace
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;capture_substream
op_ne
l_int|NULL
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme96-&gt;capture_substream
op_assign
id|substream
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME96_BUFFER_SIZE
comma
id|RME96_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_close
id|snd_rme96_playback_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|spdif
op_assign
l_int|0
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
id|rme96-&gt;playback_substream
op_assign
l_int|NULL
suffix:semicolon
id|rme96-&gt;playback_periodsize
op_assign
l_int|0
suffix:semicolon
id|spdif
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_ADAT
)paren
op_eq
l_int|0
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|spdif
)paren
(brace
id|rme96-&gt;spdif_ctl-&gt;vd
(braket
l_int|0
)braket
dot
id|access
op_or_assign
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
suffix:semicolon
id|snd_ctl_notify
c_func
(paren
id|rme96-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
op_or
id|SNDRV_CTL_EVENT_MASK_INFO
comma
op_amp
id|rme96-&gt;spdif_ctl-&gt;id
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_close
id|snd_rme96_capture_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
id|rme96-&gt;capture_substream
op_assign
l_int|NULL
suffix:semicolon
id|rme96-&gt;capture_periodsize
op_assign
l_int|0
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_prepare
id|snd_rme96_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_PLAY_POS
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_prepare
id|snd_rme96_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_REC_POS
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_playback_trigger
id|snd_rme96_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme96-&gt;playback_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme96_playback_start
c_func
(paren
id|rme96
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
r_if
c_cond
(paren
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme96-&gt;playback_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_if
c_cond
(paren
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME96_ISPLAYING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_playback_start
c_func
(paren
id|rme96
comma
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_capture_trigger
id|snd_rme96_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme96-&gt;capture_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme96_capture_start
c_func
(paren
id|rme96
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
r_if
c_cond
(paren
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme96-&gt;capture_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_if
c_cond
(paren
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME96_ISRECORDING
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_capture_start
c_func
(paren
id|rme96
comma
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|snd_pcm_uframes_t
DECL|function|snd_rme96_playback_pointer
id|snd_rme96_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
id|snd_rme96_playback_ptr
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
r_static
id|snd_pcm_uframes_t
DECL|function|snd_rme96_capture_pointer
id|snd_rme96_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
id|snd_rme96_capture_ptr
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
DECL|variable|snd_rme96_playback_spdif_ops
r_static
id|snd_pcm_ops_t
id|snd_rme96_playback_spdif_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_rme96_playback_spdif_open
comma
dot
id|close
op_assign
id|snd_rme96_playback_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_rme96_playback_hw_params
comma
dot
id|prepare
op_assign
id|snd_rme96_playback_prepare
comma
dot
id|trigger
op_assign
id|snd_rme96_playback_trigger
comma
dot
id|pointer
op_assign
id|snd_rme96_playback_pointer
comma
dot
id|copy
op_assign
id|snd_rme96_playback_copy
comma
dot
id|silence
op_assign
id|snd_rme96_playback_silence
comma
dot
id|mmap
op_assign
id|snd_pcm_lib_mmap_iomem
comma
)brace
suffix:semicolon
DECL|variable|snd_rme96_capture_spdif_ops
r_static
id|snd_pcm_ops_t
id|snd_rme96_capture_spdif_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_rme96_capture_spdif_open
comma
dot
id|close
op_assign
id|snd_rme96_capture_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_rme96_capture_hw_params
comma
dot
id|prepare
op_assign
id|snd_rme96_capture_prepare
comma
dot
id|trigger
op_assign
id|snd_rme96_capture_trigger
comma
dot
id|pointer
op_assign
id|snd_rme96_capture_pointer
comma
dot
id|copy
op_assign
id|snd_rme96_capture_copy
comma
dot
id|mmap
op_assign
id|snd_pcm_lib_mmap_iomem
comma
)brace
suffix:semicolon
DECL|variable|snd_rme96_playback_adat_ops
r_static
id|snd_pcm_ops_t
id|snd_rme96_playback_adat_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_rme96_playback_adat_open
comma
dot
id|close
op_assign
id|snd_rme96_playback_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_rme96_playback_hw_params
comma
dot
id|prepare
op_assign
id|snd_rme96_playback_prepare
comma
dot
id|trigger
op_assign
id|snd_rme96_playback_trigger
comma
dot
id|pointer
op_assign
id|snd_rme96_playback_pointer
comma
dot
id|copy
op_assign
id|snd_rme96_playback_copy
comma
dot
id|silence
op_assign
id|snd_rme96_playback_silence
comma
dot
id|mmap
op_assign
id|snd_pcm_lib_mmap_iomem
comma
)brace
suffix:semicolon
DECL|variable|snd_rme96_capture_adat_ops
r_static
id|snd_pcm_ops_t
id|snd_rme96_capture_adat_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_rme96_capture_adat_open
comma
dot
id|close
op_assign
id|snd_rme96_capture_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_rme96_capture_hw_params
comma
dot
id|prepare
op_assign
id|snd_rme96_capture_prepare
comma
dot
id|trigger
op_assign
id|snd_rme96_capture_trigger
comma
dot
id|pointer
op_assign
id|snd_rme96_capture_pointer
comma
dot
id|copy
op_assign
id|snd_rme96_capture_copy
comma
dot
id|mmap
op_assign
id|snd_pcm_lib_mmap_iomem
comma
)brace
suffix:semicolon
r_static
r_void
DECL|function|snd_rme96_free
id|snd_rme96_free
c_func
(paren
r_void
op_star
id|private_data
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|private_data
suffix:semicolon
r_if
c_cond
(paren
id|rme96
op_eq
l_int|NULL
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;irq
op_ge
l_int|0
)paren
(brace
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|rme96-&gt;areg
op_and_assign
op_complement
id|RME96_AR_DAC_EN
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|rme96-&gt;irq
comma
(paren
r_void
op_star
)paren
id|rme96
)paren
suffix:semicolon
id|rme96-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;iobase
)paren
(brace
id|iounmap
c_func
(paren
(paren
r_void
op_star
)paren
id|rme96-&gt;iobase
)paren
suffix:semicolon
id|rme96-&gt;iobase
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;port
)paren
(brace
id|pci_release_regions
c_func
(paren
id|rme96-&gt;pci
)paren
suffix:semicolon
id|rme96-&gt;port
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|snd_rme96_free_spdif_pcm
id|snd_rme96_free_spdif_pcm
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|pcm-&gt;private_data
suffix:semicolon
id|rme96-&gt;spdif_pcm
op_assign
l_int|NULL
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme96_free_adat_pcm
id|snd_rme96_free_adat_pcm
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|pcm-&gt;private_data
suffix:semicolon
id|rme96-&gt;adat_pcm
op_assign
l_int|NULL
suffix:semicolon
)brace
r_static
r_int
id|__devinit
DECL|function|snd_rme96_create
id|snd_rme96_create
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
r_struct
id|pci_dev
op_star
id|pci
op_assign
id|rme96-&gt;pci
suffix:semicolon
r_int
id|err
suffix:semicolon
id|rme96-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pci
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_request_regions
c_func
(paren
id|pci
comma
l_string|&quot;RME96&quot;
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|rme96-&gt;port
op_assign
id|pci_resource_start
c_func
(paren
id|rme96-&gt;pci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|pci-&gt;irq
comma
id|snd_rme96_interrupt
comma
id|SA_INTERRUPT
op_or
id|SA_SHIRQ
comma
l_string|&quot;RME96&quot;
comma
(paren
r_void
op_star
)paren
id|rme96
)paren
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab IRQ %d&bslash;n&quot;
comma
id|pci-&gt;irq
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme96-&gt;irq
op_assign
id|pci-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
(paren
id|rme96-&gt;iobase
op_assign
(paren
r_int
r_int
)paren
id|ioremap_nocache
c_func
(paren
id|rme96-&gt;port
comma
id|RME96_IO_SIZE
)paren
)paren
op_eq
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to remap memory region 0x%lx-0x%lx&bslash;n&quot;
comma
id|rme96-&gt;port
comma
id|rme96-&gt;port
op_plus
id|RME96_IO_SIZE
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
multiline_comment|/* read the card&squot;s revision number */
id|pci_read_config_byte
c_func
(paren
id|pci
comma
l_int|8
comma
op_amp
id|rme96-&gt;rev
)paren
suffix:semicolon
multiline_comment|/* set up ALSA pcm device for S/PDIF */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|rme96-&gt;card
comma
l_string|&quot;Digi96 IEC958&quot;
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
op_amp
id|rme96-&gt;spdif_pcm
)paren
)paren
OL
l_int|0
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|rme96-&gt;spdif_pcm-&gt;private_data
op_assign
id|rme96
suffix:semicolon
id|rme96-&gt;spdif_pcm-&gt;private_free
op_assign
id|snd_rme96_free_spdif_pcm
suffix:semicolon
id|strcpy
c_func
(paren
id|rme96-&gt;spdif_pcm-&gt;name
comma
l_string|&quot;Digi96 IEC958&quot;
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme96-&gt;spdif_pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_rme96_playback_spdif_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme96-&gt;spdif_pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_rme96_capture_spdif_ops
)paren
suffix:semicolon
id|rme96-&gt;spdif_pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* set up ALSA pcm device for ADAT */
r_if
c_cond
(paren
id|pci-&gt;device
op_eq
id|PCI_DEVICE_ID_DIGI96
)paren
(brace
multiline_comment|/* ADAT is not available on the base model */
id|rme96-&gt;adat_pcm
op_assign
l_int|NULL
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|rme96-&gt;card
comma
l_string|&quot;Digi96 ADAT&quot;
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
op_amp
id|rme96-&gt;adat_pcm
)paren
)paren
OL
l_int|0
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|rme96-&gt;adat_pcm-&gt;private_data
op_assign
id|rme96
suffix:semicolon
id|rme96-&gt;adat_pcm-&gt;private_free
op_assign
id|snd_rme96_free_adat_pcm
suffix:semicolon
id|strcpy
c_func
(paren
id|rme96-&gt;adat_pcm-&gt;name
comma
l_string|&quot;Digi96 ADAT&quot;
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme96-&gt;adat_pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_rme96_playback_adat_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme96-&gt;adat_pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_rme96_capture_adat_ops
)paren
suffix:semicolon
id|rme96-&gt;adat_pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
)brace
id|rme96-&gt;playback_periodsize
op_assign
l_int|0
suffix:semicolon
id|rme96-&gt;capture_periodsize
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* make sure playback/capture is stopped, if by some reason active */
id|snd_rme96_playback_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_capture_stop
c_func
(paren
id|rme96
)paren
suffix:semicolon
multiline_comment|/* set default values in registers */
id|rme96-&gt;wcreg
op_assign
id|RME96_WCR_FREQ_1
op_or
multiline_comment|/* set 44.1 kHz playback */
id|RME96_WCR_SEL
op_or
multiline_comment|/* normal playback */
id|RME96_WCR_MASTER
op_or
multiline_comment|/* set to master clock mode */
id|RME96_WCR_INP_0
suffix:semicolon
multiline_comment|/* set coaxial input */
id|rme96-&gt;areg
op_assign
id|RME96_AR_FREQPAD_1
suffix:semicolon
multiline_comment|/* set 44.1 kHz analog capture */
id|writel
c_func
(paren
id|rme96-&gt;wcreg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
multiline_comment|/* reset the ADC */
id|writel
c_func
(paren
id|rme96-&gt;areg
op_or
id|RME96_AR_PD2
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
multiline_comment|/* reset and enable the DAC (order is important). */
id|snd_rme96_reset_dac
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|rme96-&gt;areg
op_or_assign
id|RME96_AR_DAC_EN
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;areg
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_ADDITIONAL_REG
)paren
suffix:semicolon
multiline_comment|/* reset playback and record buffer pointers */
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_PLAY_POS
)paren
suffix:semicolon
id|writel
c_func
(paren
l_int|0
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_RESET_REC_POS
)paren
suffix:semicolon
multiline_comment|/* reset volume */
id|rme96-&gt;vol
(braket
l_int|0
)braket
op_assign
id|rme96-&gt;vol
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|RME96_HAS_ANALOG_OUT
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_rme96_apply_dac_volume
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
multiline_comment|/* init switch interface */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_create_switches
c_func
(paren
id|rme96-&gt;card
comma
id|rme96
)paren
)paren
OL
l_int|0
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* init proc interface */
id|snd_rme96_proc_init
c_func
(paren
id|rme96
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * proc interface&n; */
r_static
r_void
DECL|function|snd_rme96_proc_read
id|snd_rme96_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
r_int
id|n
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|rme96-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
id|rme96-&gt;card-&gt;longname
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (index #%d)&bslash;n&quot;
comma
id|rme96-&gt;card-&gt;number
op_plus
l_int|1
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nGeneral settings&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_IDIS
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  period size: N/A (interrupts &quot;
l_string|&quot;disabled)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_ISEL
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  period size: 2048 bytes&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  period size: 8192 bytes&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nInput settings&bslash;n&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
)paren
(brace
r_case
id|RME96_INPUT_OPTICAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: optical&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_COAXIAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: coaxial&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_INTERNAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: internal&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_XLR
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: XLR&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_INPUT_ANALOG
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: analog&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|n
)paren
OL
l_int|0
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n  sample rate: no valid signal&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|n
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (8 channels)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (2 channels)&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample rate: %d Hz&bslash;n&quot;
comma
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|n
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MODE24_2
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample format: 24 bit&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample format: 16 bit&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nOutput settings&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_SEL
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  output signal: normal playback&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  output signal: same as input&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample rate: %d Hz&bslash;n&quot;
comma
id|snd_rme96_playback_getrate
c_func
(paren
id|rme96
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MODE24
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample format: 24 bit&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample format: 16 bit&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;areg
op_amp
id|RME96_AR_WSEL
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample clock source: word clock&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_MASTER
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample clock source: internal&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
op_eq
id|RME96_INPUT_ANALOG
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample clock source: autosync (internal anyway due to analog input setting)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|snd_rme96_capture_getrate
c_func
(paren
id|rme96
comma
op_amp
id|n
)paren
OL
l_int|0
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample clock source: autosync (internal anyway due to no valid signal)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample clock source: autosync&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_PRO
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: AES/EBU (professional)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: IEC958 (consumer)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_EMP
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  emphasis: on&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  emphasis: off&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_DOLBY
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  non-audio (dolby): on&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  non-audio (dolby): off&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|RME96_HAS_ANALOG_IN
c_func
(paren
id|rme96
)paren
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nAnalog output settings&bslash;n&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|snd_rme96_getmontracks
c_func
(paren
id|rme96
)paren
)paren
(brace
r_case
id|RME96_MONITOR_TRACKS_1_2
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  monitored ADAT tracks: 1+2&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_MONITOR_TRACKS_3_4
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  monitored ADAT tracks: 3+4&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_MONITOR_TRACKS_5_6
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  monitored ADAT tracks: 5+6&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_MONITOR_TRACKS_7_8
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  monitored ADAT tracks: 7+8&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|snd_rme96_getattenuation
c_func
(paren
id|rme96
)paren
)paren
(brace
r_case
id|RME96_ATTENUATION_0
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  attenuation: 0 dB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_ATTENUATION_6
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  attenuation: -6 dB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_ATTENUATION_12
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  attenuation: -12 dB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME96_ATTENUATION_18
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  attenuation: -18 dB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  volume left: %u&bslash;n&quot;
comma
id|rme96-&gt;vol
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  volume right: %u&bslash;n&quot;
comma
id|rme96-&gt;vol
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
id|__devinit
DECL|function|snd_rme96_proc_init
id|snd_rme96_proc_init
c_func
(paren
id|rme96_t
op_star
id|rme96
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_card_proc_new
c_func
(paren
id|rme96-&gt;card
comma
l_string|&quot;rme96&quot;
comma
op_amp
id|entry
)paren
)paren
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|rme96
comma
l_int|1024
comma
id|snd_rme96_proc_read
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * control interface&n; */
r_static
r_int
DECL|function|snd_rme96_info_loopback_control
id|snd_rme96_info_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_get_loopback_control
id|snd_rme96_get_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|rme96-&gt;wcreg
op_amp
id|RME96_WCR_SEL
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_put_loopback_control
id|snd_rme96_put_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
id|RME96_WCR_SEL
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|val
op_assign
(paren
id|rme96-&gt;wcreg
op_amp
op_complement
id|RME96_WCR_SEL
)paren
op_or
id|val
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme96-&gt;wcreg
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
op_assign
id|val
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_info_inputtype_control
id|snd_rme96_info_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|_texts
(braket
l_int|5
)braket
op_assign
(brace
l_string|&quot;Optical&quot;
comma
l_string|&quot;Coaxial&quot;
comma
l_string|&quot;Internal&quot;
comma
l_string|&quot;XLR&quot;
comma
l_string|&quot;Analog&quot;
)brace
suffix:semicolon
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_char
op_star
id|texts
(braket
l_int|5
)braket
op_assign
(brace
id|_texts
(braket
l_int|0
)braket
comma
id|_texts
(braket
l_int|1
)braket
comma
id|_texts
(braket
l_int|2
)braket
comma
id|_texts
(braket
l_int|3
)braket
comma
id|_texts
(braket
l_int|4
)braket
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|rme96-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI96
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI96_8
suffix:colon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PRO
suffix:colon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rev
OG
l_int|4
)paren
(brace
multiline_comment|/* PST */
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
id|texts
(braket
l_int|3
)braket
op_assign
id|_texts
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* Analog instead of XLR */
)brace
r_else
(brace
multiline_comment|/* PAD */
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|5
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_get_inputtype_control
id|snd_rme96_get_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|items
op_assign
l_int|3
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rme96-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI96
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI96_8
suffix:colon
id|items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PRO
suffix:colon
id|items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rev
OG
l_int|4
)paren
(brace
multiline_comment|/* for handling PST case, (INPUT_ANALOG is moved to INPUT_XLR */
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
id|RME96_INPUT_ANALOG
)paren
(brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|RME96_INPUT_XLR
suffix:semicolon
)brace
id|items
op_assign
l_int|4
suffix:semicolon
)brace
r_else
(brace
id|items
op_assign
l_int|5
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
id|items
)paren
(brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|items
op_minus
l_int|1
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_put_inputtype_control
id|snd_rme96_put_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
comma
id|items
op_assign
l_int|3
suffix:semicolon
r_switch
c_cond
(paren
id|rme96-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI96
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI96_8
suffix:colon
id|items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PRO
suffix:colon
id|items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
suffix:colon
r_if
c_cond
(paren
id|rme96-&gt;rev
OG
l_int|4
)paren
(brace
id|items
op_assign
l_int|4
suffix:semicolon
)brace
r_else
(brace
id|items
op_assign
l_int|5
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
id|items
suffix:semicolon
multiline_comment|/* special case for PST */
r_if
c_cond
(paren
id|rme96-&gt;pci-&gt;device
op_eq
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
op_logical_and
id|rme96-&gt;rev
OG
l_int|4
)paren
(brace
r_if
c_cond
(paren
id|val
op_eq
id|RME96_INPUT_XLR
)paren
(brace
id|val
op_assign
id|RME96_INPUT_ANALOG
suffix:semicolon
)brace
)brace
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
(paren
r_int
)paren
id|val
op_ne
id|snd_rme96_getinputtype
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_setinputtype
c_func
(paren
id|rme96
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_info_clockmode_control
id|snd_rme96_info_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|3
)braket
op_assign
(brace
l_string|&quot;AutoSync&quot;
comma
l_string|&quot;Internal&quot;
comma
l_string|&quot;Word&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|2
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|2
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_get_clockmode_control
id|snd_rme96_get_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme96_getclockmode
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_put_clockmode_control
id|snd_rme96_put_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
l_int|3
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
(paren
r_int
)paren
id|val
op_ne
id|snd_rme96_getclockmode
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_setclockmode
c_func
(paren
id|rme96
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_info_attenuation_control
id|snd_rme96_info_attenuation_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;0 dB&quot;
comma
l_string|&quot;-6 dB&quot;
comma
l_string|&quot;-12 dB&quot;
comma
l_string|&quot;-18 dB&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|3
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|3
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_get_attenuation_control
id|snd_rme96_get_attenuation_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme96_getattenuation
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_put_attenuation_control
id|snd_rme96_put_attenuation_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
l_int|4
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
(paren
r_int
)paren
id|val
op_ne
id|snd_rme96_getattenuation
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_setattenuation
c_func
(paren
id|rme96
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_info_montracks_control
id|snd_rme96_info_montracks_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;1+2&quot;
comma
l_string|&quot;3+4&quot;
comma
l_string|&quot;5+6&quot;
comma
l_string|&quot;7+8&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|3
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|3
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_get_montracks_control
id|snd_rme96_get_montracks_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme96_getmontracks
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_put_montracks_control
id|snd_rme96_put_montracks_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
l_int|4
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
(paren
r_int
)paren
id|val
op_ne
id|snd_rme96_getmontracks
c_func
(paren
id|rme96
)paren
suffix:semicolon
id|snd_rme96_setmontracks
c_func
(paren
id|rme96
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme96_convert_from_aes
r_static
id|u32
id|snd_rme96_convert_from_aes
c_func
(paren
id|snd_aes_iec958_t
op_star
id|aes
)paren
(brace
id|u32
id|val
op_assign
l_int|0
suffix:semicolon
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PROFESSIONAL
)paren
ques
c_cond
id|RME96_WCR_PRO
suffix:colon
l_int|0
suffix:semicolon
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_NONAUDIO
)paren
ques
c_cond
id|RME96_WCR_DOLBY
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|RME96_WCR_PRO
)paren
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
ques
c_cond
id|RME96_WCR_EMP
suffix:colon
l_int|0
suffix:semicolon
r_else
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_CON_EMPHASIS_5015
)paren
ques
c_cond
id|RME96_WCR_EMP
suffix:colon
l_int|0
suffix:semicolon
r_return
id|val
suffix:semicolon
)brace
DECL|function|snd_rme96_convert_to_aes
r_static
r_void
id|snd_rme96_convert_to_aes
c_func
(paren
id|snd_aes_iec958_t
op_star
id|aes
comma
id|u32
id|val
)paren
(brace
id|aes-&gt;status
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|val
op_amp
id|RME96_WCR_PRO
)paren
ques
c_cond
id|IEC958_AES0_PROFESSIONAL
suffix:colon
l_int|0
)paren
op_or
(paren
(paren
id|val
op_amp
id|RME96_WCR_DOLBY
)paren
ques
c_cond
id|IEC958_AES0_NONAUDIO
suffix:colon
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|RME96_WCR_PRO
)paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_or_assign
(paren
id|val
op_amp
id|RME96_WCR_EMP
)paren
ques
c_cond
id|IEC958_AES0_PRO_EMPHASIS_5015
suffix:colon
l_int|0
suffix:semicolon
r_else
id|aes-&gt;status
(braket
l_int|0
)braket
op_or_assign
(paren
id|val
op_amp
id|RME96_WCR_EMP
)paren
ques
c_cond
id|IEC958_AES0_CON_EMPHASIS_5015
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_info
r_static
r_int
id|snd_rme96_control_spdif_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_get
r_static
r_int
id|snd_rme96_control_spdif_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_rme96_convert_to_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|rme96-&gt;wcreg_spdif
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_put
r_static
r_int
id|snd_rme96_control_spdif_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
suffix:semicolon
id|u32
id|val
suffix:semicolon
id|val
op_assign
id|snd_rme96_convert_from_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme96-&gt;wcreg_spdif
suffix:semicolon
id|rme96-&gt;wcreg_spdif
op_assign
id|val
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_stream_info
r_static
r_int
id|snd_rme96_control_spdif_stream_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_stream_get
r_static
r_int
id|snd_rme96_control_spdif_stream_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_rme96_convert_to_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|rme96-&gt;wcreg_spdif_stream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_stream_put
r_static
r_int
id|snd_rme96_control_spdif_stream_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
suffix:semicolon
id|u32
id|val
suffix:semicolon
id|val
op_assign
id|snd_rme96_convert_from_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme96-&gt;wcreg_spdif_stream
suffix:semicolon
id|rme96-&gt;wcreg_spdif_stream
op_assign
id|val
suffix:semicolon
id|rme96-&gt;wcreg
op_and_assign
op_complement
(paren
id|RME96_WCR_PRO
op_or
id|RME96_WCR_DOLBY
op_or
id|RME96_WCR_EMP
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme96-&gt;wcreg
op_or_assign
id|val
comma
id|rme96-&gt;iobase
op_plus
id|RME96_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_mask_info
r_static
r_int
id|snd_rme96_control_spdif_mask_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_control_spdif_mask_get
r_static
r_int
id|snd_rme96_control_spdif_mask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_dac_volume_info
id|snd_rme96_dac_volume_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|RME96_185X_MAX_OUT
c_func
(paren
id|rme96
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_dac_volume_get
id|snd_rme96_dac_volume_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|u
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
id|u-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|rme96-&gt;vol
(braket
l_int|0
)braket
suffix:semicolon
id|u-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|rme96-&gt;vol
(braket
l_int|1
)braket
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme96_dac_volume_put
id|snd_rme96_dac_volume_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|u
)paren
(brace
id|rme96_t
op_star
id|rme96
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|RME96_HAS_ANALOG_OUT
c_func
(paren
id|rme96
)paren
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|spin_lock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|u-&gt;value.integer.value
(braket
l_int|0
)braket
op_ne
id|rme96-&gt;vol
(braket
l_int|0
)braket
)paren
(brace
id|rme96-&gt;vol
(braket
l_int|0
)braket
op_assign
id|u-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|u-&gt;value.integer.value
(braket
l_int|1
)braket
op_ne
id|rme96-&gt;vol
(braket
l_int|1
)braket
)paren
(brace
id|rme96-&gt;vol
(braket
l_int|1
)braket
op_assign
id|u-&gt;value.integer.value
(braket
l_int|1
)braket
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|change
)paren
(brace
id|snd_rme96_apply_dac_volume
c_func
(paren
id|rme96
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme96-&gt;lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|snd_rme96_controls
r_static
id|snd_kcontrol_new_t
id|snd_rme96_controls
(braket
)braket
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
dot
id|info
op_assign
id|snd_rme96_control_spdif_info
comma
dot
id|get
op_assign
id|snd_rme96_control_spdif_get
comma
dot
id|put
op_assign
id|snd_rme96_control_spdif_put
)brace
comma
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
op_or
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PCM_STREAM
)paren
comma
dot
id|info
op_assign
id|snd_rme96_control_spdif_stream_info
comma
dot
id|get
op_assign
id|snd_rme96_control_spdif_stream_get
comma
dot
id|put
op_assign
id|snd_rme96_control_spdif_stream_put
)brace
comma
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
dot
id|info
op_assign
id|snd_rme96_control_spdif_mask_info
comma
dot
id|get
op_assign
id|snd_rme96_control_spdif_mask_get
comma
dot
id|private_value
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_CON_EMPHASIS
)brace
comma
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
dot
id|info
op_assign
id|snd_rme96_control_spdif_mask_info
comma
dot
id|get
op_assign
id|snd_rme96_control_spdif_mask_get
comma
dot
id|private_value
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_PRO_EMPHASIS
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
l_string|&quot;Input Connector&quot;
comma
dot
id|info
op_assign
id|snd_rme96_info_inputtype_control
comma
dot
id|get
op_assign
id|snd_rme96_get_inputtype_control
comma
dot
id|put
op_assign
id|snd_rme96_put_inputtype_control
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
l_string|&quot;Loopback Input&quot;
comma
dot
id|info
op_assign
id|snd_rme96_info_loopback_control
comma
dot
id|get
op_assign
id|snd_rme96_get_loopback_control
comma
dot
id|put
op_assign
id|snd_rme96_put_loopback_control
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
l_string|&quot;Sample Clock Source&quot;
comma
dot
id|info
op_assign
id|snd_rme96_info_clockmode_control
comma
dot
id|get
op_assign
id|snd_rme96_get_clockmode_control
comma
dot
id|put
op_assign
id|snd_rme96_put_clockmode_control
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
l_string|&quot;Monitor Tracks&quot;
comma
dot
id|info
op_assign
id|snd_rme96_info_montracks_control
comma
dot
id|get
op_assign
id|snd_rme96_get_montracks_control
comma
dot
id|put
op_assign
id|snd_rme96_put_montracks_control
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
l_string|&quot;Attenuation&quot;
comma
dot
id|info
op_assign
id|snd_rme96_info_attenuation_control
comma
dot
id|get
op_assign
id|snd_rme96_get_attenuation_control
comma
dot
id|put
op_assign
id|snd_rme96_put_attenuation_control
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;DAC Playback Volume&quot;
comma
dot
id|info
op_assign
id|snd_rme96_dac_volume_info
comma
dot
id|get
op_assign
id|snd_rme96_dac_volume_get
comma
dot
id|put
op_assign
id|snd_rme96_dac_volume_put
)brace
)brace
suffix:semicolon
r_static
r_int
DECL|function|snd_rme96_create_switches
id|snd_rme96_create_switches
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|rme96_t
op_star
id|rme96
)paren
(brace
r_int
id|idx
comma
id|err
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|7
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_rme96_controls
(braket
id|idx
)braket
comma
id|rme96
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|idx
op_eq
l_int|1
)paren
multiline_comment|/* IEC958 (S/PDIF) Stream */
id|rme96-&gt;spdif_ctl
op_assign
id|kctl
suffix:semicolon
)brace
r_if
c_cond
(paren
id|RME96_HAS_ANALOG_OUT
c_func
(paren
id|rme96
)paren
)paren
(brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|7
suffix:semicolon
id|idx
OL
l_int|10
suffix:semicolon
id|idx
op_increment
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_rme96_controls
(braket
id|idx
)braket
comma
id|rme96
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Card initialisation&n; */
DECL|function|snd_rme96_card_free
r_static
r_void
id|snd_rme96_card_free
c_func
(paren
id|snd_card_t
op_star
id|card
)paren
(brace
id|snd_rme96_free
c_func
(paren
id|card-&gt;private_data
)paren
suffix:semicolon
)brace
r_static
r_int
id|__devinit
DECL|function|snd_rme96_probe
id|snd_rme96_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
comma
r_const
r_struct
id|pci_device_id
op_star
id|pci_id
)paren
(brace
r_static
r_int
id|dev
suffix:semicolon
id|rme96_t
op_star
id|rme96
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
r_int
id|err
suffix:semicolon
id|u8
id|val
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_ge
id|SNDRV_CARDS
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|enable
(braket
id|dev
)braket
)paren
(brace
id|dev
op_increment
suffix:semicolon
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|card
op_assign
id|snd_card_new
c_func
(paren
id|index
(braket
id|dev
)braket
comma
id|id
(braket
id|dev
)braket
comma
id|THIS_MODULE
comma
r_sizeof
(paren
id|rme96_t
)paren
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|card-&gt;private_free
op_assign
id|snd_rme96_card_free
suffix:semicolon
id|rme96
op_assign
(paren
id|rme96_t
op_star
)paren
id|card-&gt;private_data
suffix:semicolon
id|rme96-&gt;card
op_assign
id|card
suffix:semicolon
id|rme96-&gt;pci
op_assign
id|pci
suffix:semicolon
id|snd_card_set_dev
c_func
(paren
id|card
comma
op_amp
id|pci-&gt;dev
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme96_create
c_func
(paren
id|rme96
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|card-&gt;driver
comma
l_string|&quot;Digi96&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rme96-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI96
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi96&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi96/8&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PRO
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi96/8 PRO&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI96_8_PAD_OR_PST
suffix:colon
id|pci_read_config_byte
c_func
(paren
id|rme96-&gt;pci
comma
l_int|8
comma
op_amp
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
OL
l_int|5
)paren
(brace
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi96/8 PAD&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi96/8 PST&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|card-&gt;longname
comma
l_string|&quot;%s at 0x%lx, irq %d&quot;
comma
id|card-&gt;shortname
comma
id|rme96-&gt;port
comma
id|rme96-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_card_register
c_func
(paren
id|card
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|pci_set_drvdata
c_func
(paren
id|pci
comma
id|card
)paren
suffix:semicolon
id|dev
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme96_remove
r_static
r_void
id|__devexit
id|snd_rme96_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
)paren
(brace
id|snd_card_free
c_func
(paren
id|pci_get_drvdata
c_func
(paren
id|pci
)paren
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|driver
r_static
r_struct
id|pci_driver
id|driver
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;RME Digi96&quot;
comma
dot
id|id_table
op_assign
id|snd_rme96_ids
comma
dot
id|probe
op_assign
id|snd_rme96_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|snd_rme96_remove
)paren
comma
)brace
suffix:semicolon
DECL|function|alsa_card_rme96_init
r_static
r_int
id|__init
id|alsa_card_rme96_init
c_func
(paren
r_void
)paren
(brace
r_return
id|pci_module_init
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
DECL|function|alsa_card_rme96_exit
r_static
r_void
id|__exit
id|alsa_card_rme96_exit
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|alsa_card_rme96_init
)paren
id|module_exit
c_func
(paren
id|alsa_card_rme96_exit
)paren
eof
