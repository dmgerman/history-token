multiline_comment|/*&n; *   ALSA driver for RME Digi32, Digi32/8 and Digi32 PRO audio interfaces&n; *&n; *&t;Copyright (c) 2002 Martin Langer &lt;martin-langer@gmx.de&gt;&n; *&n; *      Thanks to :        Anders Torger &lt;torger@ludd.luth.se&gt;,&n; *                         Henk Hesselink &lt;henk@anda.nl&gt;&n; *                         for writing the digi96-driver &n; *                         and RME for all informations.&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; * &n; * &n; *   ToDo: - Switching to Mono (32, 32/8, 32Pro)&n; *         - ADAT (32/8)&n; *         - Doublespeed-Bit, 96kHz (32Pro)&n; *         - DAC (32Pro)&n; *         - full duplex should be possible&n; *         - testing, testing, testing ....&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/info.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
DECL|macro|SNDRV_GET_ID
mdefine_line|#define SNDRV_GET_ID
macro_line|#include &lt;sound/initval.h&gt;
DECL|variable|snd_index
r_static
r_int
id|snd_index
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_IDX
suffix:semicolon
multiline_comment|/* Index 0-MAX */
DECL|variable|snd_id
r_static
r_char
op_star
id|snd_id
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_STR
suffix:semicolon
multiline_comment|/* ID for this card */
DECL|variable|snd_enable
r_static
r_int
id|snd_enable
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_ENABLE_PNP
suffix:semicolon
multiline_comment|/* Enable this card */
id|EXPORT_NO_SYMBOLS
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_index
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_index
comma
l_string|&quot;Index value for RME Digi32 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_index
comma
id|SNDRV_INDEX_DESC
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_id
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;s&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_id
comma
l_string|&quot;ID string for RME Digi32 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_id
comma
id|SNDRV_ID_DESC
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|snd_enable
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SNDRV_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|snd_enable
comma
l_string|&quot;Enable RME Digi32 soundcard.&quot;
)paren
suffix:semicolon
id|MODULE_PARM_SYNTAX
c_func
(paren
id|snd_enable
comma
id|SNDRV_ENABLE_DESC
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Martin Langer &lt;martin-langer@gmx.de&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;RME Digi32, Digi32/8, Digi32 PRO&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_CLASSES
c_func
(paren
l_string|&quot;{sound}&quot;
)paren
suffix:semicolon
id|MODULE_DEVICES
c_func
(paren
l_string|&quot;{{RME,Digi32},&quot;
l_string|&quot;{RME,Digi32/8},&quot;
l_string|&quot;{RME,Digi32 PRO}}&quot;
)paren
suffix:semicolon
multiline_comment|/* Defines for RME Digi32 series */
DECL|macro|RME32_DRIVER_VERSION
mdefine_line|#define RME32_DRIVER_VERSION &quot;0.3.2&quot;
DECL|macro|RME32_SPDIF_NCHANNELS
mdefine_line|#define RME32_SPDIF_NCHANNELS 2
multiline_comment|/* Playback and capture buffer size */
DECL|macro|RME32_BUFFER_SIZE
mdefine_line|#define RME32_BUFFER_SIZE 0x20000
multiline_comment|/* IO area size */
DECL|macro|RME32_IO_SIZE
mdefine_line|#define RME32_IO_SIZE 0x30000
multiline_comment|/* IO area offsets */
DECL|macro|RME32_IO_DATA_BUFFER
mdefine_line|#define RME32_IO_DATA_BUFFER        0x0
DECL|macro|RME32_IO_CONTROL_REGISTER
mdefine_line|#define RME32_IO_CONTROL_REGISTER   0x20000
DECL|macro|RME32_IO_GET_POS
mdefine_line|#define RME32_IO_GET_POS            0x20000
DECL|macro|RME32_IO_CONFIRM_ACTION_IRQ
mdefine_line|#define RME32_IO_CONFIRM_ACTION_IRQ 0x20004
DECL|macro|RME32_IO_RESET_POS
mdefine_line|#define RME32_IO_RESET_POS          0x20100
multiline_comment|/* Write control register bits */
DECL|macro|RME32_WCR_START
mdefine_line|#define RME32_WCR_START     (1 &lt;&lt; 0)
DECL|macro|RME32_WCR_MONO
mdefine_line|#define RME32_WCR_MONO      (1 &lt;&lt; 1)
DECL|macro|RME32_WCR_MODE24
mdefine_line|#define RME32_WCR_MODE24    (1 &lt;&lt; 2)
DECL|macro|RME32_WCR_SEL
mdefine_line|#define RME32_WCR_SEL       (1 &lt;&lt; 3)
DECL|macro|RME32_WCR_FREQ_0
mdefine_line|#define RME32_WCR_FREQ_0    (1 &lt;&lt; 4)
DECL|macro|RME32_WCR_FREQ_1
mdefine_line|#define RME32_WCR_FREQ_1    (1 &lt;&lt; 5)
DECL|macro|RME32_WCR_INP_0
mdefine_line|#define RME32_WCR_INP_0     (1 &lt;&lt; 6)
DECL|macro|RME32_WCR_INP_1
mdefine_line|#define RME32_WCR_INP_1     (1 &lt;&lt; 7)
DECL|macro|RME32_WCR_RESET
mdefine_line|#define RME32_WCR_RESET     (1 &lt;&lt; 8)
DECL|macro|RME32_WCR_MUTE
mdefine_line|#define RME32_WCR_MUTE      (1 &lt;&lt; 9)
DECL|macro|RME32_WCR_PRO
mdefine_line|#define RME32_WCR_PRO       (1 &lt;&lt; 10)
DECL|macro|RME32_WCR_DS_BM
mdefine_line|#define RME32_WCR_DS_BM     (1 &lt;&lt; 11)&t;/* only PRO-Version */
DECL|macro|RME32_WCR_ADAT
mdefine_line|#define RME32_WCR_ADAT      (1 &lt;&lt; 12)&t;/* only Adat-Version */
DECL|macro|RME32_WCR_AUTOSYNC
mdefine_line|#define RME32_WCR_AUTOSYNC  (1 &lt;&lt; 13)
DECL|macro|RME32_WCR_PD
mdefine_line|#define RME32_WCR_PD        (1 &lt;&lt; 14)&t;/* only PRO-Version */
DECL|macro|RME32_WCR_EMP
mdefine_line|#define RME32_WCR_EMP       (1 &lt;&lt; 15)&t;/* only PRO-Version */
DECL|macro|RME32_WCR_BITPOS_FREQ_0
mdefine_line|#define RME32_WCR_BITPOS_FREQ_0 4
DECL|macro|RME32_WCR_BITPOS_FREQ_1
mdefine_line|#define RME32_WCR_BITPOS_FREQ_1 5
DECL|macro|RME32_WCR_BITPOS_INP_0
mdefine_line|#define RME32_WCR_BITPOS_INP_0 6
DECL|macro|RME32_WCR_BITPOS_INP_1
mdefine_line|#define RME32_WCR_BITPOS_INP_1 7
multiline_comment|/* Read control register bits */
DECL|macro|RME32_RCR_AUDIO_ADDR_MASK
mdefine_line|#define RME32_RCR_AUDIO_ADDR_MASK 0x10001
DECL|macro|RME32_RCR_LOCK
mdefine_line|#define RME32_RCR_LOCK      (1 &lt;&lt; 23)
DECL|macro|RME32_RCR_ERF
mdefine_line|#define RME32_RCR_ERF       (1 &lt;&lt; 26)
DECL|macro|RME32_RCR_FREQ_0
mdefine_line|#define RME32_RCR_FREQ_0    (1 &lt;&lt; 27)
DECL|macro|RME32_RCR_FREQ_1
mdefine_line|#define RME32_RCR_FREQ_1    (1 &lt;&lt; 28)
DECL|macro|RME32_RCR_FREQ_2
mdefine_line|#define RME32_RCR_FREQ_2    (1 &lt;&lt; 29)
DECL|macro|RME32_RCR_KMODE
mdefine_line|#define RME32_RCR_KMODE     (1 &lt;&lt; 30)
DECL|macro|RME32_RCR_IRQ
mdefine_line|#define RME32_RCR_IRQ       (1 &lt;&lt; 31)
DECL|macro|RME32_RCR_BITPOS_F0
mdefine_line|#define RME32_RCR_BITPOS_F0 27
DECL|macro|RME32_RCR_BITPOS_F1
mdefine_line|#define RME32_RCR_BITPOS_F1 28
DECL|macro|RME32_RCR_BITPOS_F2
mdefine_line|#define RME32_RCR_BITPOS_F2 29
multiline_comment|/* Input types */
DECL|macro|RME32_INPUT_OPTICAL
mdefine_line|#define RME32_INPUT_OPTICAL 0
DECL|macro|RME32_INPUT_COAXIAL
mdefine_line|#define RME32_INPUT_COAXIAL 1
DECL|macro|RME32_INPUT_INTERNAL
mdefine_line|#define RME32_INPUT_INTERNAL 2
DECL|macro|RME32_INPUT_XLR
mdefine_line|#define RME32_INPUT_XLR 3
multiline_comment|/* Clock modes */
DECL|macro|RME32_CLOCKMODE_SLAVE
mdefine_line|#define RME32_CLOCKMODE_SLAVE 0
DECL|macro|RME32_CLOCKMODE_MASTER_32
mdefine_line|#define RME32_CLOCKMODE_MASTER_32 1
DECL|macro|RME32_CLOCKMODE_MASTER_44
mdefine_line|#define RME32_CLOCKMODE_MASTER_44 2
DECL|macro|RME32_CLOCKMODE_MASTER_48
mdefine_line|#define RME32_CLOCKMODE_MASTER_48 3
multiline_comment|/* Block sizes in bytes */
DECL|macro|RME32_BLOCK_SIZE
mdefine_line|#define RME32_BLOCK_SIZE 8192
multiline_comment|/* Hardware revisions */
DECL|macro|RME32_32_REVISION
mdefine_line|#define RME32_32_REVISION 192
DECL|macro|RME32_328_REVISION_OLD
mdefine_line|#define RME32_328_REVISION_OLD 100
DECL|macro|RME32_328_REVISION_NEW
mdefine_line|#define RME32_328_REVISION_NEW 101
DECL|macro|RME32_PRO_REVISION_WITH_8412
mdefine_line|#define RME32_PRO_REVISION_WITH_8412 192
DECL|macro|RME32_PRO_REVISION_WITH_8414
mdefine_line|#define RME32_PRO_REVISION_WITH_8414 150
multiline_comment|/* PCI vendor/device ID&squot;s */
macro_line|#ifndef PCI_VENDOR_ID_XILINX_RME
DECL|macro|PCI_VENDOR_ID_XILINX_RME
macro_line|# define PCI_VENDOR_ID_XILINX_RME 0xea60
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI32
DECL|macro|PCI_DEVICE_ID_DIGI32
macro_line|# define PCI_DEVICE_ID_DIGI32 0x9896
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI32_8
DECL|macro|PCI_DEVICE_ID_DIGI32_8
macro_line|# define PCI_DEVICE_ID_DIGI32_8 0x9898
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_DIGI32_PRO
DECL|macro|PCI_DEVICE_ID_DIGI32_PRO
macro_line|# define PCI_DEVICE_ID_DIGI32_PRO 0x9897
macro_line|#endif
DECL|struct|snd_rme32
r_typedef
r_struct
id|snd_rme32
(brace
DECL|member|lock
id|spinlock_t
id|lock
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
DECL|member|res_port
r_struct
id|resource
op_star
id|res_port
suffix:semicolon
DECL|member|iobase
r_int
r_int
id|iobase
suffix:semicolon
DECL|member|wcreg
id|u32
id|wcreg
suffix:semicolon
multiline_comment|/* cached write control register value */
DECL|member|wcreg_spdif
id|u32
id|wcreg_spdif
suffix:semicolon
multiline_comment|/* S/PDIF setup */
DECL|member|wcreg_spdif_stream
id|u32
id|wcreg_spdif_stream
suffix:semicolon
multiline_comment|/* S/PDIF setup (temporary) */
DECL|member|rcreg
id|u32
id|rcreg
suffix:semicolon
multiline_comment|/* cached read control register value */
DECL|member|rev
id|u8
id|rev
suffix:semicolon
multiline_comment|/* card revision number */
DECL|member|capture_pid
id|pid_t
id|capture_pid
suffix:semicolon
DECL|member|playback_pid
id|pid_t
id|playback_pid
suffix:semicolon
DECL|member|playback_substream
id|snd_pcm_substream_t
op_star
id|playback_substream
suffix:semicolon
DECL|member|capture_substream
id|snd_pcm_substream_t
op_star
id|capture_substream
suffix:semicolon
DECL|member|playback_frlog
r_int
id|playback_frlog
suffix:semicolon
multiline_comment|/* log2 of framesize */
DECL|member|capture_frlog
r_int
id|capture_frlog
suffix:semicolon
DECL|member|playback_periodsize
r_int
id|playback_periodsize
suffix:semicolon
multiline_comment|/* in bytes, zero if not used */
DECL|member|capture_periodsize
r_int
id|capture_periodsize
suffix:semicolon
multiline_comment|/* in bytes, zero if not used */
DECL|member|playback_last_appl_ptr
id|snd_pcm_uframes_t
id|playback_last_appl_ptr
suffix:semicolon
DECL|member|playback_ptr
r_int
id|playback_ptr
suffix:semicolon
DECL|member|capture_ptr
r_int
id|capture_ptr
suffix:semicolon
DECL|member|card
id|snd_card_t
op_star
id|card
suffix:semicolon
DECL|member|spdif_pcm
id|snd_pcm_t
op_star
id|spdif_pcm
suffix:semicolon
DECL|member|adat_pcm
id|snd_pcm_t
op_star
id|adat_pcm
suffix:semicolon
DECL|member|pci
r_struct
id|pci_dev
op_star
id|pci
suffix:semicolon
DECL|member|proc_entry
id|snd_info_entry_t
op_star
id|proc_entry
suffix:semicolon
DECL|member|spdif_ctl
id|snd_kcontrol_t
op_star
id|spdif_ctl
suffix:semicolon
DECL|typedef|rme32_t
)brace
id|rme32_t
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_struct
id|pci_device_id
id|snd_rme32_ids
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
id|PCI_VENDOR_ID_XILINX_RME
comma
id|PCI_DEVICE_ID_DIGI32
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
id|PCI_VENDOR_ID_XILINX_RME
comma
id|PCI_DEVICE_ID_DIGI32_8
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
id|PCI_VENDOR_ID_XILINX_RME
comma
id|PCI_DEVICE_ID_DIGI32_PRO
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
)brace
comma
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|snd_rme32_ids
)paren
suffix:semicolon
DECL|macro|RME32_ISWORKING
mdefine_line|#define RME32_ISWORKING(rme32) ((rme32)-&gt;wcreg &amp; RME32_WCR_START)
DECL|macro|RME32_PRO_WITH_8414
mdefine_line|#define RME32_PRO_WITH_8414(rme32) ((rme32)-&gt;pci-&gt;device == PCI_DEVICE_ID_DIGI32_PRO &amp;&amp; (rme32)-&gt;rev == RME32_PRO_REVISION_WITH_8414)
r_static
r_int
id|snd_rme32_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_int
id|snd_rme32_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_int
id|snd_rme32_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
suffix:semicolon
r_static
r_int
id|snd_rme32_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
suffix:semicolon
r_static
id|snd_pcm_uframes_t
id|snd_rme32_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
id|snd_pcm_uframes_t
id|snd_rme32_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
suffix:semicolon
r_static
r_void
id|__init
id|snd_rme32_proc_init
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
suffix:semicolon
r_static
r_void
id|snd_rme32_proc_done
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
suffix:semicolon
r_static
r_int
id|snd_rme32_create_switches
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|rme32_t
op_star
id|rme32
)paren
suffix:semicolon
DECL|function|snd_rme32_playback_ptr
r_static
r_inline
r_int
r_int
id|snd_rme32_playback_ptr
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_return
(paren
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_GET_POS
)paren
op_amp
id|RME32_RCR_AUDIO_ADDR_MASK
)paren
op_rshift
id|rme32-&gt;playback_frlog
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_ptr
r_static
r_inline
r_int
r_int
id|snd_rme32_capture_ptr
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_return
(paren
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_GET_POS
)paren
op_amp
id|RME32_RCR_AUDIO_ADDR_MASK
)paren
op_rshift
id|rme32-&gt;capture_frlog
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_silence
r_static
r_int
id|snd_rme32_playback_silence
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme32-&gt;playback_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme32-&gt;playback_frlog
suffix:semicolon
id|memset_io
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
op_plus
id|pos
comma
l_int|0
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_copy
r_static
r_int
id|snd_rme32_playback_copy
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
r_void
op_star
id|src
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme32-&gt;playback_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme32-&gt;playback_frlog
suffix:semicolon
id|copy_from_user_toio
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
op_plus
id|pos
comma
id|src
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_copy
r_static
r_int
id|snd_rme32_capture_copy
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|channel
comma
multiline_comment|/* not used (interleaved data) */
id|snd_pcm_uframes_t
id|pos
comma
r_void
op_star
id|dst
comma
id|snd_pcm_uframes_t
id|count
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|count
op_lshift_assign
id|rme32-&gt;capture_frlog
suffix:semicolon
id|pos
op_lshift_assign
id|rme32-&gt;capture_frlog
suffix:semicolon
id|copy_to_user_fromio
c_func
(paren
id|dst
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
op_plus
id|pos
comma
id|count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Digital output capabilites (S/PDIF)&n; */
DECL|variable|snd_rme32_playback_spdif_info
r_static
id|snd_pcm_hardware_t
id|snd_rme32_playback_spdif_info
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
id|formats
suffix:colon
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
id|rates
suffix:colon
(paren
id|SNDRV_PCM_RATE_32000
op_or
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
)paren
comma
id|rate_min
suffix:colon
l_int|32000
comma
id|rate_max
suffix:colon
l_int|48000
comma
id|channels_min
suffix:colon
l_int|2
comma
id|channels_max
suffix:colon
l_int|2
comma
id|buffer_bytes_max
suffix:colon
id|RME32_BUFFER_SIZE
comma
id|period_bytes_min
suffix:colon
id|RME32_BLOCK_SIZE
comma
id|period_bytes_max
suffix:colon
id|RME32_BLOCK_SIZE
comma
id|periods_min
suffix:colon
id|RME32_BUFFER_SIZE
op_div
id|RME32_BLOCK_SIZE
comma
id|periods_max
suffix:colon
id|RME32_BUFFER_SIZE
op_div
id|RME32_BLOCK_SIZE
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Digital input capabilites (S/PDIF)&n; */
DECL|variable|snd_rme32_capture_spdif_info
r_static
id|snd_pcm_hardware_t
id|snd_rme32_capture_spdif_info
op_assign
(brace
id|info
suffix:colon
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
id|formats
suffix:colon
(paren
id|SNDRV_PCM_FMTBIT_S16_LE
op_or
id|SNDRV_PCM_FMTBIT_S32_LE
)paren
comma
id|rates
suffix:colon
(paren
id|SNDRV_PCM_RATE_32000
op_or
id|SNDRV_PCM_RATE_44100
op_or
id|SNDRV_PCM_RATE_48000
)paren
comma
id|rate_min
suffix:colon
l_int|32000
comma
id|rate_max
suffix:colon
l_int|48000
comma
id|channels_min
suffix:colon
l_int|2
comma
id|channels_max
suffix:colon
l_int|2
comma
id|buffer_bytes_max
suffix:colon
id|RME32_BUFFER_SIZE
comma
id|period_bytes_min
suffix:colon
id|RME32_BLOCK_SIZE
comma
id|period_bytes_max
suffix:colon
id|RME32_BLOCK_SIZE
comma
id|periods_min
suffix:colon
id|RME32_BUFFER_SIZE
op_div
id|RME32_BLOCK_SIZE
comma
id|periods_max
suffix:colon
id|RME32_BUFFER_SIZE
op_div
id|RME32_BLOCK_SIZE
comma
id|fifo_size
suffix:colon
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_rme32_playback_getrate
r_static
r_int
id|snd_rme32_playback_getrate
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_int
id|rate
suffix:semicolon
id|rate
op_assign
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_FREQ_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_FREQ_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|1
suffix:colon
id|rate
op_assign
l_int|32000
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|rate
op_assign
l_int|44100
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|rate
op_assign
l_int|48000
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_return
id|rate
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_getrate
r_static
r_int
id|snd_rme32_capture_getrate
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
op_star
id|is_adat
)paren
(brace
r_int
id|n
suffix:semicolon
op_star
id|is_adat
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;rcreg
op_amp
id|RME32_RCR_ERF
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|n
op_assign
(paren
(paren
id|rme32-&gt;rcreg
op_rshift
id|RME32_RCR_BITPOS_F0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme32-&gt;rcreg
op_rshift
id|RME32_RCR_BITPOS_F1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme32-&gt;rcreg
op_rshift
id|RME32_RCR_BITPOS_F2
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME32_PRO_WITH_8414
c_func
(paren
id|rme32
)paren
)paren
r_switch
c_cond
(paren
id|n
)paren
(brace
multiline_comment|/* supporting the CS8414 */
r_case
l_int|0
suffix:colon
r_case
l_int|1
suffix:colon
r_case
l_int|2
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
l_int|96000
suffix:semicolon
r_case
l_int|4
suffix:colon
r_return
l_int|88200
suffix:semicolon
r_case
l_int|5
suffix:colon
r_return
l_int|48000
suffix:semicolon
r_case
l_int|6
suffix:colon
r_return
l_int|44100
suffix:semicolon
r_case
l_int|7
suffix:colon
r_return
l_int|32000
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
r_switch
c_cond
(paren
id|n
)paren
(brace
multiline_comment|/* supporting the CS8412 */
r_case
l_int|0
suffix:colon
r_return
op_minus
l_int|1
suffix:semicolon
r_case
l_int|1
suffix:colon
r_return
l_int|48000
suffix:semicolon
r_case
l_int|2
suffix:colon
r_return
l_int|44100
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
l_int|32000
suffix:semicolon
r_case
l_int|4
suffix:colon
r_return
l_int|48000
suffix:semicolon
r_case
l_int|5
suffix:colon
r_return
l_int|44100
suffix:semicolon
r_case
l_int|6
suffix:colon
r_return
l_int|44056
suffix:semicolon
r_case
l_int|7
suffix:colon
r_return
l_int|32000
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_setrate
r_static
r_int
id|snd_rme32_playback_setrate
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|rate
)paren
(brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|32000
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_FREQ_0
)paren
op_amp
op_complement
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_FREQ_1
)paren
op_amp
op_complement
id|RME32_WCR_FREQ_0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_FREQ_0
)paren
op_or
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_setclockmode
r_static
r_int
id|snd_rme32_setclockmode
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|mode
)paren
(brace
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|RME32_CLOCKMODE_SLAVE
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
op_complement
id|RME32_WCR_FREQ_0
)paren
op_amp
op_complement
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_CLOCKMODE_MASTER_32
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_FREQ_0
)paren
op_amp
op_complement
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_CLOCKMODE_MASTER_44
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
op_complement
id|RME32_WCR_FREQ_0
)paren
op_or
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_CLOCKMODE_MASTER_48
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_FREQ_0
)paren
op_or
id|RME32_WCR_FREQ_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_getclockmode
r_static
r_int
id|snd_rme32_getclockmode
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_return
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_FREQ_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_FREQ_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|snd_rme32_setinputtype
r_static
r_int
id|snd_rme32_setinputtype
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|type
)paren
(brace
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|RME32_INPUT_OPTICAL
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
op_complement
id|RME32_WCR_INP_0
)paren
op_amp
op_complement
id|RME32_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_COAXIAL
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_INP_0
)paren
op_amp
op_complement
id|RME32_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_INTERNAL
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
op_complement
id|RME32_WCR_INP_0
)paren
op_or
id|RME32_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_XLR
suffix:colon
id|rme32-&gt;wcreg
op_assign
(paren
id|rme32-&gt;wcreg
op_or
id|RME32_WCR_INP_0
)paren
op_or
id|RME32_WCR_INP_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_getinputtype
r_static
r_int
id|snd_rme32_getinputtype
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_return
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_INP_0
)paren
op_amp
l_int|1
)paren
op_plus
(paren
(paren
(paren
id|rme32-&gt;wcreg
op_rshift
id|RME32_WCR_BITPOS_INP_1
)paren
op_amp
l_int|1
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme32_setframelog
id|snd_rme32_setframelog
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|n_channels
comma
r_int
id|is_playback
)paren
(brace
r_int
id|frlog
suffix:semicolon
r_if
c_cond
(paren
id|n_channels
op_eq
l_int|2
)paren
(brace
id|frlog
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* assume 8 channels */
id|frlog
op_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|is_playback
)paren
(brace
id|frlog
op_add_assign
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_MODE24
)paren
ques
c_cond
l_int|2
suffix:colon
l_int|1
suffix:semicolon
id|rme32-&gt;playback_frlog
op_assign
id|frlog
suffix:semicolon
)brace
r_else
(brace
id|frlog
op_add_assign
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_MODE24
)paren
ques
c_cond
l_int|2
suffix:colon
l_int|1
suffix:semicolon
id|rme32-&gt;capture_frlog
op_assign
id|frlog
suffix:semicolon
)brace
)brace
DECL|function|snd_rme32_setformat
r_static
r_int
id|snd_rme32_setformat
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|format
)paren
(brace
r_switch
c_cond
(paren
id|format
)paren
(brace
r_case
id|SNDRV_PCM_FORMAT_S16_LE
suffix:colon
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_MODE24
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_FORMAT_S32_LE
suffix:colon
id|rme32-&gt;wcreg
op_or_assign
id|RME32_WCR_MODE24
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_playback_hw_params
id|snd_rme32_playback_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|params
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_playback_setrate
c_func
(paren
id|rme32
comma
id|params_rate
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_setformat
c_func
(paren
id|rme32
comma
id|params_format
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|snd_rme32_setframelog
c_func
(paren
id|rme32
comma
id|params_channels
c_func
(paren
id|params
)paren
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;capture_periodsize
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme32-&gt;playback_frlog
op_ne
id|rme32-&gt;capture_periodsize
)paren
(brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
)brace
id|rme32-&gt;playback_periodsize
op_assign
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme32-&gt;playback_frlog
suffix:semicolon
multiline_comment|/* S/PDIF setup */
r_if
c_cond
(paren
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_ADAT
)paren
op_eq
l_int|0
)paren
(brace
id|rme32-&gt;wcreg
op_and_assign
op_complement
(paren
id|RME32_WCR_PRO
op_or
id|RME32_WCR_EMP
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
op_or_assign
id|rme32-&gt;wcreg_spdif_stream
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_hw_free
r_static
r_int
id|snd_rme32_playback_hw_free
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_lib_free_pages
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_capture_hw_params
id|snd_rme32_capture_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|params
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|err
comma
id|isadat
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
multiline_comment|/* enable AutoSync for record-preparing */
id|rme32-&gt;wcreg
op_or_assign
id|RME32_WCR_AUTOSYNC
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_setformat
c_func
(paren
id|rme32
comma
id|params_format
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_playback_setrate
c_func
(paren
id|rme32
comma
id|params_rate
c_func
(paren
id|params
)paren
)paren
)paren
OL
l_int|0
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|params_rate
c_func
(paren
id|params
)paren
op_ne
id|snd_rme32_capture_getrate
c_func
(paren
id|rme32
comma
op_amp
id|isadat
)paren
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
multiline_comment|/* AutoSync off for recording */
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_AUTOSYNC
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|snd_rme32_setframelog
c_func
(paren
id|rme32
comma
id|params_channels
c_func
(paren
id|params
)paren
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;playback_periodsize
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme32-&gt;capture_frlog
op_ne
id|rme32-&gt;playback_periodsize
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
)brace
id|rme32-&gt;capture_periodsize
op_assign
id|params_period_size
c_func
(paren
id|params
)paren
op_lshift
id|rme32-&gt;capture_frlog
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_hw_free
r_static
r_int
id|snd_rme32_capture_hw_free
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_lib_free_pages
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_start
r_static
r_void
id|snd_rme32_playback_start
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|from_pause
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|from_pause
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_RESET_POS
)paren
suffix:semicolon
id|rme32-&gt;playback_last_appl_ptr
op_assign
l_int|0
suffix:semicolon
id|rme32-&gt;playback_ptr
op_assign
l_int|0
suffix:semicolon
)brace
id|rme32-&gt;wcreg
op_or_assign
id|RME32_WCR_START
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_start
r_static
r_void
id|snd_rme32_capture_start
c_func
(paren
id|rme32_t
op_star
id|rme32
comma
r_int
id|from_pause
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|from_pause
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_RESET_POS
)paren
suffix:semicolon
)brace
id|rme32-&gt;wcreg
op_or_assign
id|RME32_WCR_START
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_stop
r_static
r_void
id|snd_rme32_playback_stop
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
multiline_comment|/*&n;&t; * Check if there is an unconfirmed IRQ, if so confirm it, or else&n;&t; * the hardware will not stop generating interrupts&n;&t; */
id|rme32-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;rcreg
op_amp
id|RME32_RCR_IRQ
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONFIRM_ACTION_IRQ
)paren
suffix:semicolon
)brace
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_START
suffix:semicolon
id|rme32-&gt;wcreg
op_or_assign
id|RME32_WCR_MUTE
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_stop
r_static
r_void
id|snd_rme32_capture_stop
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
id|rme32-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;rcreg
op_amp
id|RME32_RCR_IRQ
)paren
(brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONFIRM_ACTION_IRQ
)paren
suffix:semicolon
)brace
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_START
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|snd_rme32_interrupt
id|snd_rme32_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
(paren
id|rme32_t
op_star
)paren
id|dev_id
suffix:semicolon
id|rme32-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rme32-&gt;rcreg
op_amp
id|RME32_RCR_IRQ
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|rme32-&gt;capture_substream
)paren
(brace
id|snd_pcm_period_elapsed
c_func
(paren
id|rme32-&gt;capture_substream
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;playback_substream
)paren
(brace
id|snd_pcm_period_elapsed
c_func
(paren
id|rme32-&gt;playback_substream
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONFIRM_ACTION_IRQ
)paren
suffix:semicolon
)brace
)brace
DECL|variable|period_bytes
r_static
r_int
r_int
id|period_bytes
(braket
)braket
op_assign
(brace
id|RME32_BLOCK_SIZE
)brace
suffix:semicolon
DECL|macro|PERIOD_BYTES
mdefine_line|#define PERIOD_BYTES sizeof(period_bytes) / sizeof(period_bytes[0])
DECL|variable|hw_constraints_period_bytes
r_static
id|snd_pcm_hw_constraint_list_t
id|hw_constraints_period_bytes
op_assign
(brace
id|count
suffix:colon
id|PERIOD_BYTES
comma
id|list
suffix:colon
id|period_bytes
comma
id|mask
suffix:colon
l_int|0
)brace
suffix:semicolon
DECL|function|snd_rme32_playback_spdif_open
r_static
r_int
id|snd_rme32_playback_spdif_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_ADAT
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|rme32-&gt;playback_substream
op_assign
id|substream
suffix:semicolon
id|rme32-&gt;playback_last_appl_ptr
op_assign
l_int|0
suffix:semicolon
id|rme32-&gt;playback_ptr
op_assign
l_int|0
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme32_playback_spdif_info
suffix:semicolon
id|rme32-&gt;playback_pid
op_assign
id|current-&gt;pid
suffix:semicolon
id|rme32-&gt;playback_substream
op_assign
id|substream
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME32_BUFFER_SIZE
comma
id|RME32_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
id|rme32-&gt;wcreg_spdif_stream
op_assign
id|rme32-&gt;wcreg_spdif
suffix:semicolon
id|rme32-&gt;spdif_ctl-&gt;access
op_and_assign
op_complement
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
suffix:semicolon
id|snd_ctl_notify
c_func
(paren
id|rme32-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
op_or
id|SNDRV_CTL_EVENT_MASK_INFO
comma
op_amp
id|rme32-&gt;spdif_ctl-&gt;id
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_spdif_open
r_static
r_int
id|snd_rme32_capture_spdif_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
id|isadat
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|rme32-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_rme32_capture_getrate
c_func
(paren
id|rme32
comma
op_amp
id|isadat
)paren
OL
l_int|0
)paren
(brace
multiline_comment|/* no input */
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|isadat
)paren
(brace
multiline_comment|/* ADAT input */
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|rme32-&gt;capture_pid
op_assign
id|current-&gt;pid
suffix:semicolon
id|rme32-&gt;capture_substream
op_assign
id|substream
suffix:semicolon
id|rme32-&gt;capture_ptr
op_assign
l_int|0
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_rme32_capture_spdif_info
suffix:semicolon
id|snd_pcm_hw_constraint_minmax
c_func
(paren
id|runtime
comma
id|SNDRV_PCM_HW_PARAM_BUFFER_BYTES
comma
id|RME32_BUFFER_SIZE
comma
id|RME32_BUFFER_SIZE
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_PERIOD_BYTES
comma
op_amp
id|hw_constraints_period_bytes
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_close
r_static
r_int
id|snd_rme32_playback_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|spdif
op_assign
l_int|0
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|rme32-&gt;playback_pid
op_assign
op_minus
l_int|1
suffix:semicolon
id|rme32-&gt;playback_substream
op_assign
l_int|NULL
suffix:semicolon
id|rme32-&gt;playback_periodsize
op_assign
l_int|0
suffix:semicolon
id|spdif
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_ADAT
)paren
op_eq
l_int|0
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|spdif
)paren
(brace
id|rme32-&gt;spdif_ctl-&gt;access
op_or_assign
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
suffix:semicolon
id|snd_ctl_notify
c_func
(paren
id|rme32-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
op_or
id|SNDRV_CTL_EVENT_MASK_INFO
comma
op_amp
id|rme32-&gt;spdif_ctl-&gt;id
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_close
r_static
r_int
id|snd_rme32_capture_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|rme32-&gt;capture_pid
op_assign
op_minus
l_int|1
suffix:semicolon
id|rme32-&gt;capture_substream
op_assign
l_int|NULL
suffix:semicolon
id|rme32-&gt;capture_periodsize
op_assign
l_int|0
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_playback_prepare
r_static
r_int
id|snd_rme32_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_playback_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_RESET_POS
)paren
suffix:semicolon
id|rme32-&gt;wcreg
op_and_assign
op_complement
id|RME32_WCR_MUTE
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_capture_prepare
r_static
r_int
id|snd_rme32_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_capture_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_RESET_POS
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_playback_trigger
id|snd_rme32_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme32-&gt;playback_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme32_playback_start
c_func
(paren
id|rme32
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme32-&gt;playback_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme32_playback_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_playback_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_playback_start
c_func
(paren
id|rme32
comma
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_capture_trigger
id|snd_rme32_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme32-&gt;capture_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme32_capture_start
c_func
(paren
id|rme32
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
r_if
c_cond
(paren
id|substream
op_ne
id|rme32-&gt;capture_substream
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_rme32_capture_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_if
c_cond
(paren
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_capture_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|RME32_ISWORKING
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_rme32_capture_start
c_func
(paren
id|rme32
comma
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|snd_pcm_uframes_t
DECL|function|snd_rme32_playback_pointer
id|snd_rme32_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_sframes_t
id|diff
suffix:semicolon
r_int
id|bytes
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;access
op_eq
id|SNDRV_PCM_ACCESS_MMAP_INTERLEAVED
)paren
(brace
id|diff
op_assign
id|runtime-&gt;control-&gt;appl_ptr
op_minus
id|rme32-&gt;playback_last_appl_ptr
suffix:semicolon
id|rme32-&gt;playback_last_appl_ptr
op_assign
id|runtime-&gt;control-&gt;appl_ptr
suffix:semicolon
r_if
c_cond
(paren
id|diff
op_ne
l_int|0
op_logical_and
id|diff
OL
op_minus
(paren
id|snd_pcm_sframes_t
)paren
(paren
id|runtime-&gt;boundary
op_rshift
l_int|1
)paren
)paren
(brace
id|diff
op_add_assign
id|runtime-&gt;boundary
suffix:semicolon
)brace
id|bytes
op_assign
id|diff
op_lshift
id|rme32-&gt;playback_frlog
suffix:semicolon
r_if
c_cond
(paren
id|bytes
OG
id|RME32_BUFFER_SIZE
op_minus
id|rme32-&gt;playback_ptr
)paren
(brace
id|memcpy_toio
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
op_plus
id|rme32-&gt;playback_ptr
comma
id|runtime-&gt;dma_area
op_plus
id|rme32-&gt;playback_ptr
comma
id|RME32_BUFFER_SIZE
op_minus
id|rme32-&gt;playback_ptr
)paren
suffix:semicolon
id|bytes
op_sub_assign
id|RME32_BUFFER_SIZE
op_minus
id|rme32-&gt;playback_ptr
suffix:semicolon
r_if
c_cond
(paren
id|bytes
OG
id|RME32_BUFFER_SIZE
)paren
(brace
id|bytes
op_assign
id|RME32_BUFFER_SIZE
suffix:semicolon
)brace
id|memcpy_toio
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
comma
id|runtime-&gt;dma_area
comma
id|bytes
)paren
suffix:semicolon
id|rme32-&gt;playback_ptr
op_assign
id|bytes
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|bytes
op_ne
l_int|0
)paren
(brace
id|memcpy_toio
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_DATA_BUFFER
op_plus
id|rme32-&gt;playback_ptr
comma
id|runtime-&gt;dma_area
op_plus
id|rme32-&gt;playback_ptr
comma
id|bytes
)paren
suffix:semicolon
id|rme32-&gt;playback_ptr
op_add_assign
id|bytes
suffix:semicolon
)brace
)brace
r_return
id|snd_rme32_playback_ptr
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
r_static
id|snd_pcm_uframes_t
DECL|function|snd_rme32_capture_pointer
id|snd_rme32_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
id|snd_rme32_capture_ptr
c_func
(paren
id|rme32
)paren
suffix:semicolon
)brace
DECL|variable|snd_rme32_playback_spdif_ops
r_static
id|snd_pcm_ops_t
id|snd_rme32_playback_spdif_ops
op_assign
(brace
id|open
suffix:colon
id|snd_rme32_playback_spdif_open
comma
id|close
suffix:colon
id|snd_rme32_playback_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_rme32_playback_hw_params
comma
id|hw_free
suffix:colon
id|snd_rme32_playback_hw_free
comma
id|prepare
suffix:colon
id|snd_rme32_playback_prepare
comma
id|trigger
suffix:colon
id|snd_rme32_playback_trigger
comma
id|pointer
suffix:colon
id|snd_rme32_playback_pointer
comma
id|copy
suffix:colon
id|snd_rme32_playback_copy
comma
id|silence
suffix:colon
id|snd_rme32_playback_silence
comma
)brace
suffix:semicolon
DECL|variable|snd_rme32_capture_spdif_ops
r_static
id|snd_pcm_ops_t
id|snd_rme32_capture_spdif_ops
op_assign
(brace
id|open
suffix:colon
id|snd_rme32_capture_spdif_open
comma
id|close
suffix:colon
id|snd_rme32_capture_close
comma
id|ioctl
suffix:colon
id|snd_pcm_lib_ioctl
comma
id|hw_params
suffix:colon
id|snd_rme32_capture_hw_params
comma
id|hw_free
suffix:colon
id|snd_rme32_capture_hw_free
comma
id|prepare
suffix:colon
id|snd_rme32_capture_prepare
comma
id|trigger
suffix:colon
id|snd_rme32_capture_trigger
comma
id|pointer
suffix:colon
id|snd_rme32_capture_pointer
comma
id|copy
suffix:colon
id|snd_rme32_capture_copy
comma
)brace
suffix:semicolon
DECL|function|snd_rme32_free
r_static
r_void
id|snd_rme32_free
c_func
(paren
r_void
op_star
id|private_data
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
(paren
id|rme32_t
op_star
)paren
id|private_data
suffix:semicolon
r_if
c_cond
(paren
id|rme32
op_eq
l_int|NULL
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;irq
op_ge
l_int|0
)paren
(brace
id|snd_rme32_playback_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|snd_rme32_capture_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|snd_rme32_proc_done
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|rme32-&gt;irq
comma
(paren
r_void
op_star
)paren
id|rme32
)paren
suffix:semicolon
id|rme32-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;iobase
)paren
(brace
id|iounmap
c_func
(paren
(paren
r_void
op_star
)paren
id|rme32-&gt;iobase
)paren
suffix:semicolon
id|rme32-&gt;iobase
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;res_port
op_ne
l_int|NULL
)paren
(brace
id|release_resource
c_func
(paren
id|rme32-&gt;res_port
)paren
suffix:semicolon
id|rme32-&gt;res_port
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|snd_rme32_free_spdif_pcm
r_static
r_void
id|snd_rme32_free_spdif_pcm
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
(paren
id|rme32_t
op_star
)paren
id|pcm-&gt;private_data
suffix:semicolon
id|rme32-&gt;spdif_pcm
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_rme32_create
r_static
r_int
id|__init
id|snd_rme32_create
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_struct
id|pci_dev
op_star
id|pci
op_assign
id|rme32-&gt;pci
suffix:semicolon
r_int
id|err
suffix:semicolon
id|rme32-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pci
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|rme32-&gt;port
op_assign
id|pci_resource_start
c_func
(paren
id|rme32-&gt;pci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|rme32-&gt;res_port
op_assign
id|request_mem_region
c_func
(paren
id|rme32-&gt;port
comma
id|RME32_IO_SIZE
comma
l_string|&quot;RME32&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab memory region 0x%lx-0x%lx&bslash;n&quot;
comma
id|rme32-&gt;port
comma
id|rme32-&gt;port
op_plus
id|RME32_IO_SIZE
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|pci-&gt;irq
comma
id|snd_rme32_interrupt
comma
id|SA_INTERRUPT
op_or
id|SA_SHIRQ
comma
l_string|&quot;RME32&quot;
comma
(paren
r_void
op_star
)paren
id|rme32
)paren
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab IRQ %d&bslash;n&quot;
comma
id|pci-&gt;irq
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|rme32-&gt;irq
op_assign
id|pci-&gt;irq
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|rme32-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|rme32-&gt;iobase
op_assign
(paren
r_int
r_int
)paren
id|ioremap_nocache
c_func
(paren
id|rme32-&gt;port
comma
id|RME32_IO_SIZE
)paren
)paren
op_eq
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to remap memory region 0x%lx-0x%lx&bslash;n&quot;
comma
id|rme32-&gt;port
comma
id|rme32-&gt;port
op_plus
id|RME32_IO_SIZE
op_minus
l_int|1
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
multiline_comment|/* read the card&squot;s revision number */
id|pci_read_config_byte
c_func
(paren
id|pci
comma
l_int|8
comma
op_amp
id|rme32-&gt;rev
)paren
suffix:semicolon
multiline_comment|/* set up ALSA pcm device for S/PDIF */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|rme32-&gt;card
comma
l_string|&quot;Digi32 IEC958&quot;
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
op_amp
id|rme32-&gt;spdif_pcm
)paren
)paren
OL
l_int|0
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|rme32-&gt;spdif_pcm-&gt;private_data
op_assign
id|rme32
suffix:semicolon
id|rme32-&gt;spdif_pcm-&gt;private_free
op_assign
id|snd_rme32_free_spdif_pcm
suffix:semicolon
id|strcpy
c_func
(paren
id|rme32-&gt;spdif_pcm-&gt;name
comma
l_string|&quot;Digi32 IEC958&quot;
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme32-&gt;spdif_pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_rme32_playback_spdif_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|rme32-&gt;spdif_pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_rme32_capture_spdif_ops
)paren
suffix:semicolon
id|rme32-&gt;spdif_pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|snd_pcm_lib_preallocate_pages_for_all
c_func
(paren
id|rme32-&gt;spdif_pcm
comma
id|RME32_BUFFER_SIZE
comma
id|RME32_BUFFER_SIZE
comma
id|GFP_KERNEL
)paren
suffix:semicolon
multiline_comment|/* set up ALSA pcm device for ADAT */
r_if
c_cond
(paren
id|pci-&gt;device
op_eq
id|PCI_DEVICE_ID_DIGI32
)paren
(brace
multiline_comment|/* ADAT is not available on the base model */
id|rme32-&gt;adat_pcm
op_assign
l_int|NULL
suffix:semicolon
)brace
id|rme32-&gt;playback_periodsize
op_assign
l_int|0
suffix:semicolon
id|rme32-&gt;capture_periodsize
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* make sure playback/capture is stopped, if by some reason active */
id|snd_rme32_playback_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|snd_rme32_capture_stop
c_func
(paren
id|rme32
)paren
suffix:semicolon
multiline_comment|/* reset buffer pointer */
id|writel
c_func
(paren
l_int|0
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_RESET_POS
)paren
suffix:semicolon
multiline_comment|/* set default values in registers */
id|rme32-&gt;wcreg
op_assign
id|RME32_WCR_SEL
op_or
multiline_comment|/* normal playback */
id|RME32_WCR_INP_0
op_or
multiline_comment|/* input select */
id|RME32_WCR_MUTE
suffix:semicolon
multiline_comment|/* setting muting on */
id|writel
c_func
(paren
id|rme32-&gt;wcreg
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
multiline_comment|/* init switch interface */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_create_switches
c_func
(paren
id|rme32-&gt;card
comma
id|rme32
)paren
)paren
OL
l_int|0
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* init proc interface */
id|snd_rme32_proc_init
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|rme32-&gt;playback_pid
op_assign
op_minus
l_int|1
suffix:semicolon
id|rme32-&gt;capture_pid
op_assign
op_minus
l_int|1
suffix:semicolon
id|rme32-&gt;capture_substream
op_assign
l_int|NULL
suffix:semicolon
id|rme32-&gt;playback_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * proc interface&n; */
r_static
r_void
DECL|function|snd_rme32_proc_read
id|snd_rme32_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
r_int
id|n
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
(paren
id|rme32_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|rme32-&gt;rcreg
op_assign
id|readl
c_func
(paren
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
id|rme32-&gt;card-&gt;longname
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (index #%d)&bslash;n&quot;
comma
id|rme32-&gt;card-&gt;number
op_plus
l_int|1
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nGeneral settings&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  driver version: %s&bslash;n&quot;
comma
id|RME32_DRIVER_VERSION
)paren
suffix:semicolon
r_if
c_cond
(paren
id|RME32_PRO_WITH_8414
c_func
(paren
id|rme32
)paren
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  receiver: CS8414&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  receiver: CS8412&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_MODE24
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: 24 bit&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: 16 bit&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_MONO
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;, Mono&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;, Stereo&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nInput settings&bslash;n&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|snd_rme32_getinputtype
c_func
(paren
id|rme32
)paren
)paren
(brace
r_case
id|RME32_INPUT_OPTICAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: optical&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_COAXIAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: coaxial&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_INTERNAL
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: internal&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RME32_INPUT_XLR
suffix:colon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  input: XLR&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_rme32_capture_getrate
c_func
(paren
id|rme32
comma
op_amp
id|n
)paren
OL
l_int|0
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n  sample rate: no valid signal&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|n
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (8 channels)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (2 channels)&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample rate: %d Hz&bslash;n&quot;
comma
id|snd_rme32_capture_getrate
c_func
(paren
id|rme32
comma
op_amp
id|n
)paren
)paren
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nOutput settings&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_SEL
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  output signal: normal playback&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  output signal: same as input&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_MUTE
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; (muted)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* master output frequency */
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
op_logical_neg
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_FREQ_0
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_FREQ_1
)paren
)paren
)paren
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  sample rate: %d Hz&bslash;n&quot;
comma
id|snd_rme32_playback_getrate
c_func
(paren
id|rme32
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_RCR_KMODE
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  clock mode: slave&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  clock mode: master&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_PRO
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: AES/EBU (professional)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  format: IEC958 (consumer)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_EMP
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  emphasis: on&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  emphasis: off&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_rme32_proc_init
r_static
r_void
id|__init
id|snd_rme32_proc_init
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|rme32-&gt;card
comma
l_string|&quot;rme32&quot;
comma
id|rme32-&gt;card-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|entry-&gt;content
op_assign
id|SNDRV_INFO_CONTENT_TEXT
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|rme32
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
suffix:semicolon
id|entry-&gt;c.text.read_size
op_assign
l_int|256
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_rme32_proc_read
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|rme32-&gt;proc_entry
op_assign
id|entry
suffix:semicolon
)brace
DECL|function|snd_rme32_proc_done
r_static
r_void
id|snd_rme32_proc_done
c_func
(paren
id|rme32_t
op_star
id|rme32
)paren
(brace
r_if
c_cond
(paren
id|rme32-&gt;proc_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|rme32-&gt;proc_entry
)paren
suffix:semicolon
id|rme32-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * control interface&n; */
r_static
r_int
DECL|function|snd_rme32_info_loopback_control
id|snd_rme32_info_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_get_loopback_control
id|snd_rme32_get_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|rme32-&gt;wcreg
op_amp
id|RME32_WCR_SEL
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_put_loopback_control
id|snd_rme32_put_loopback_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
id|RME32_WCR_SEL
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|val
op_assign
(paren
id|rme32-&gt;wcreg
op_amp
op_complement
id|RME32_WCR_SEL
)paren
op_or
id|val
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme32-&gt;wcreg
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
op_assign
id|val
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_info_inputtype_control
id|snd_rme32_info_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|_texts
(braket
l_int|5
)braket
op_assign
(brace
l_string|&quot;Optical&quot;
comma
l_string|&quot;Coaxial&quot;
comma
l_string|&quot;Internal&quot;
comma
l_string|&quot;XLR&quot;
)brace
suffix:semicolon
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
id|_texts
(braket
l_int|0
)braket
comma
id|_texts
(braket
l_int|1
)braket
comma
id|_texts
(braket
l_int|2
)braket
comma
id|_texts
(braket
l_int|3
)braket
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|rme32-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI32
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI32_8
suffix:colon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI32_PRO
suffix:colon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_get_inputtype_control
id|snd_rme32_get_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|items
op_assign
l_int|3
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme32_getinputtype
c_func
(paren
id|rme32
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rme32-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI32
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI32_8
suffix:colon
id|items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI32_PRO
suffix:colon
id|items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
id|items
)paren
(brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|items
op_minus
l_int|1
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_put_inputtype_control
id|snd_rme32_put_inputtype_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
comma
id|items
op_assign
l_int|3
suffix:semicolon
r_switch
c_cond
(paren
id|rme32-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI32
suffix:colon
r_case
id|PCI_DEVICE_ID_DIGI32_8
suffix:colon
id|items
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI32_PRO
suffix:colon
id|items
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
id|items
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|snd_rme32_getinputtype
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|snd_rme32_setinputtype
c_func
(paren
id|rme32
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_info_clockmode_control
id|snd_rme32_info_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|4
)braket
op_assign
(brace
l_string|&quot;Slave&quot;
comma
l_string|&quot;Master (32.0 kHz)&quot;
comma
l_string|&quot;Master (44.1 kHz)&quot;
comma
l_string|&quot;Master (48.0 kHz)&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
OG
l_int|4
)paren
(brace
id|uinfo-&gt;value.enumerated.item
op_assign
l_int|4
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_get_clockmode_control
id|snd_rme32_get_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|snd_rme32_getclockmode
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_rme32_put_clockmode_control
id|snd_rme32_put_clockmode_control
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|change
suffix:semicolon
id|val
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_mod
l_int|3
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|snd_rme32_getclockmode
c_func
(paren
id|rme32
)paren
suffix:semicolon
id|snd_rme32_setclockmode
c_func
(paren
id|rme32
comma
id|val
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme32_convert_from_aes
r_static
id|u32
id|snd_rme32_convert_from_aes
c_func
(paren
id|snd_aes_iec958_t
op_star
id|aes
)paren
(brace
id|u32
id|val
op_assign
l_int|0
suffix:semicolon
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PROFESSIONAL
)paren
ques
c_cond
id|RME32_WCR_PRO
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|RME32_WCR_PRO
)paren
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_PRO_EMPHASIS_5015
)paren
ques
c_cond
id|RME32_WCR_EMP
suffix:colon
l_int|0
suffix:semicolon
r_else
id|val
op_or_assign
(paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_amp
id|IEC958_AES0_CON_EMPHASIS_5015
)paren
ques
c_cond
id|RME32_WCR_EMP
suffix:colon
l_int|0
suffix:semicolon
r_return
id|val
suffix:semicolon
)brace
DECL|function|snd_rme32_convert_to_aes
r_static
r_void
id|snd_rme32_convert_to_aes
c_func
(paren
id|snd_aes_iec958_t
op_star
id|aes
comma
id|u32
id|val
)paren
(brace
id|aes-&gt;status
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|val
op_amp
id|RME32_WCR_PRO
)paren
ques
c_cond
id|IEC958_AES0_PROFESSIONAL
suffix:colon
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|RME32_WCR_PRO
)paren
id|aes-&gt;status
(braket
l_int|0
)braket
op_or_assign
(paren
id|val
op_amp
id|RME32_WCR_EMP
)paren
ques
c_cond
id|IEC958_AES0_PRO_EMPHASIS_5015
suffix:colon
l_int|0
suffix:semicolon
r_else
id|aes-&gt;status
(braket
l_int|0
)braket
op_or_assign
(paren
id|val
op_amp
id|RME32_WCR_EMP
)paren
ques
c_cond
id|IEC958_AES0_CON_EMPHASIS_5015
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_info
r_static
r_int
id|snd_rme32_control_spdif_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_get
r_static
r_int
id|snd_rme32_control_spdif_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_rme32_convert_to_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|rme32-&gt;wcreg_spdif
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_put
r_static
r_int
id|snd_rme32_control_spdif_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|change
suffix:semicolon
id|u32
id|val
suffix:semicolon
id|val
op_assign
id|snd_rme32_convert_from_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme32-&gt;wcreg_spdif
suffix:semicolon
id|rme32-&gt;wcreg_spdif
op_assign
id|val
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_stream_info
r_static
r_int
id|snd_rme32_control_spdif_stream_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_stream_get
r_static
r_int
id|snd_rme32_control_spdif_stream_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_rme32_convert_to_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
comma
id|rme32-&gt;wcreg_spdif_stream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_stream_put
r_static
r_int
id|snd_rme32_control_spdif_stream_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|rme32_t
op_star
id|rme32
op_assign
id|_snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|change
suffix:semicolon
id|u32
id|val
suffix:semicolon
id|val
op_assign
id|snd_rme32_convert_from_aes
c_func
(paren
op_amp
id|ucontrol-&gt;value.iec958
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|rme32-&gt;wcreg_spdif_stream
suffix:semicolon
id|rme32-&gt;wcreg_spdif_stream
op_assign
id|val
suffix:semicolon
id|rme32-&gt;wcreg
op_and_assign
op_complement
(paren
id|RME32_WCR_PRO
op_or
id|RME32_WCR_EMP
)paren
suffix:semicolon
id|writel
c_func
(paren
id|rme32-&gt;wcreg
op_or_assign
id|val
comma
id|rme32-&gt;iobase
op_plus
id|RME32_IO_CONTROL_REGISTER
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|rme32-&gt;lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_mask_info
r_static
r_int
id|snd_rme32_control_spdif_mask_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_control_spdif_mask_get
r_static
r_int
id|snd_rme32_control_spdif_mask_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_rme32_controls
r_static
id|snd_kcontrol_new_t
id|snd_rme32_controls
(braket
)braket
op_assign
(brace
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
id|info
suffix:colon
id|snd_rme32_control_spdif_info
comma
id|get
suffix:colon
id|snd_rme32_control_spdif_get
comma
id|put
suffix:colon
id|snd_rme32_control_spdif_put
)brace
comma
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
op_or
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PCM_STREAM
)paren
comma
id|info
suffix:colon
id|snd_rme32_control_spdif_stream_info
comma
id|get
suffix:colon
id|snd_rme32_control_spdif_stream_get
comma
id|put
suffix:colon
id|snd_rme32_control_spdif_stream_put
)brace
comma
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
id|info
suffix:colon
id|snd_rme32_control_spdif_mask_info
comma
id|get
suffix:colon
id|snd_rme32_control_spdif_mask_get
comma
id|private_value
suffix:colon
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_CON_EMPHASIS
)brace
comma
(brace
id|access
suffix:colon
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
id|name
suffix:colon
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
id|info
suffix:colon
id|snd_rme32_control_spdif_mask_info
comma
id|get
suffix:colon
id|snd_rme32_control_spdif_mask_get
comma
id|private_value
suffix:colon
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_PRO_EMPHASIS
)brace
comma
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
l_string|&quot;Input Connector&quot;
comma
id|info
suffix:colon
id|snd_rme32_info_inputtype_control
comma
id|get
suffix:colon
id|snd_rme32_get_inputtype_control
comma
id|put
suffix:colon
id|snd_rme32_put_inputtype_control
)brace
comma
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
l_string|&quot;Loopback Input&quot;
comma
id|info
suffix:colon
id|snd_rme32_info_loopback_control
comma
id|get
suffix:colon
id|snd_rme32_get_loopback_control
comma
id|put
suffix:colon
id|snd_rme32_put_loopback_control
)brace
comma
(brace
id|iface
suffix:colon
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
id|name
suffix:colon
l_string|&quot;Clock Mode&quot;
comma
id|info
suffix:colon
id|snd_rme32_info_clockmode_control
comma
id|get
suffix:colon
id|snd_rme32_get_clockmode_control
comma
id|put
suffix:colon
id|snd_rme32_put_clockmode_control
)brace
)brace
suffix:semicolon
DECL|function|snd_rme32_create_switches
r_static
r_int
id|snd_rme32_create_switches
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|rme32_t
op_star
id|rme32
)paren
(brace
r_int
id|idx
comma
id|err
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|7
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_rme32_controls
(braket
id|idx
)braket
comma
id|rme32
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|idx
op_eq
l_int|1
)paren
multiline_comment|/* IEC958 (S/PDIF) Stream */
id|rme32-&gt;spdif_ctl
op_assign
id|kctl
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Card initialisation&n; */
DECL|function|snd_rme32_card_free
r_static
r_void
id|snd_rme32_card_free
c_func
(paren
id|snd_card_t
op_star
id|card
)paren
(brace
id|snd_rme32_free
c_func
(paren
id|card-&gt;private_data
)paren
suffix:semicolon
)brace
r_static
r_int
id|__init
DECL|function|snd_rme32_probe
id|snd_rme32_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
comma
r_const
r_struct
id|pci_device_id
op_star
id|id
)paren
(brace
r_static
r_int
id|dev
op_assign
l_int|0
suffix:semicolon
id|rme32_t
op_star
id|rme32
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
r_int
id|err
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|dev
OL
id|SNDRV_CARDS
suffix:semicolon
id|dev
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|snd_enable
(braket
id|dev
)braket
)paren
(brace
id|dev
op_increment
suffix:semicolon
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|dev
op_ge
id|SNDRV_CARDS
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|card
op_assign
id|snd_card_new
c_func
(paren
id|snd_index
(braket
id|dev
)braket
comma
id|snd_id
(braket
id|dev
)braket
comma
id|THIS_MODULE
comma
r_sizeof
(paren
id|rme32_t
)paren
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|card-&gt;private_free
op_assign
id|snd_rme32_card_free
suffix:semicolon
id|rme32
op_assign
(paren
id|rme32_t
op_star
)paren
id|card-&gt;private_data
suffix:semicolon
id|rme32-&gt;card
op_assign
id|card
suffix:semicolon
id|rme32-&gt;pci
op_assign
id|pci
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_rme32_create
c_func
(paren
id|rme32
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|card-&gt;driver
comma
l_string|&quot;Digi32&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|rme32-&gt;pci-&gt;device
)paren
(brace
r_case
id|PCI_DEVICE_ID_DIGI32
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi32&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI32_8
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi32/8&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PCI_DEVICE_ID_DIGI32_PRO
suffix:colon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;RME Digi32 PRO&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|card-&gt;longname
comma
l_string|&quot;%s (Rev. %d) at 0x%lx, irq %d&quot;
comma
id|card-&gt;shortname
comma
id|rme32-&gt;rev
comma
id|rme32-&gt;port
comma
id|rme32-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_card_register
c_func
(paren
id|card
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|pci_set_drvdata
c_func
(paren
id|pci
comma
id|card
)paren
suffix:semicolon
id|dev
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_rme32_remove
r_static
r_void
id|__exit
id|snd_rme32_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
)paren
(brace
id|snd_card_free
c_func
(paren
id|pci_get_drvdata
c_func
(paren
id|pci
)paren
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|driver
r_static
r_struct
id|pci_driver
id|driver
op_assign
(brace
id|name
suffix:colon
l_string|&quot;RME Digi32&quot;
comma
id|id_table
suffix:colon
id|snd_rme32_ids
comma
id|probe
suffix:colon
id|snd_rme32_probe
comma
id|remove
suffix:colon
id|snd_rme32_remove
comma
)brace
suffix:semicolon
DECL|function|alsa_card_rme32_init
r_static
r_int
id|__init
id|alsa_card_rme32_init
c_func
(paren
r_void
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_module_init
c_func
(paren
op_amp
id|driver
)paren
)paren
OL
l_int|0
)paren
(brace
macro_line|#ifdef MODULE
id|snd_printk
c_func
(paren
l_string|&quot;No RME Digi32 cards found&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_card_rme32_exit
r_static
r_void
id|__exit
id|alsa_card_rme32_exit
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|alsa_card_rme32_init
)paren
id|module_exit
c_func
(paren
id|alsa_card_rme32_exit
)paren
macro_line|#ifndef MODULE
DECL|function|alsa_card_rme32_setup
r_static
r_int
id|__init
id|alsa_card_rme32_setup
c_func
(paren
r_char
op_star
id|str
)paren
(brace
r_static
r_int
id|__initdata
id|nr_dev
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|nr_dev
op_ge
id|SNDRV_CARDS
)paren
r_return
l_int|0
suffix:semicolon
(paren
r_void
)paren
(paren
id|get_option
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_enable
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
op_logical_and
id|get_option
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_index
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
op_logical_and
id|get_id
c_func
(paren
op_amp
id|str
comma
op_amp
id|snd_id
(braket
id|nr_dev
)braket
)paren
op_eq
l_int|2
)paren
suffix:semicolon
id|nr_dev
op_increment
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|__setup
c_func
(paren
l_string|&quot;snd-rme32=&quot;
comma
id|alsa_card_rme32_setup
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* ifndef MODULE */
eof
