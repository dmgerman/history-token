multiline_comment|/*&n; *   ALSA driver for ICEnsemble ICE1712 (Envy24)&n; *&n; *&t;Copyright (c) 2000 Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
multiline_comment|/*&n;  NOTES:&n;  - spdif nonaudio consumer mode does not work (at least with my&n;    Sony STR-DB830)&n;*/
multiline_comment|/*&n; * Changes:&n; *&n; *  2002.09.09&t;Takashi Iwai &lt;tiwai@suse.de&gt;&n; *&t;split the code to several files.  each low-level routine&n; *&t;is stored in the local file and called from registration&n; *&t;function from card_info struct.&n; *&n; *  2002.11.26&t;James Stafford &lt;jstafford@ampltd.com&gt;&n; *&t;Added support for VT1724 (Envy24HT)&n; *&t;I have left out support for 176.4 and 192 KHz for the moment. &n; *  I also haven&squot;t done anything with the internal S/PDIF transmitter or the MPU-401&n; *&n; *  2003.02.20  Taksahi Iwai &lt;tiwai@suse.de&gt;&n; *&t;Split vt1724 part to an independent driver.&n; *&t;The GPIO is accessed through the callback functions now.&n; *&n; * 2004.03.31 Doug McLain &lt;nostar@comcast.net&gt;&n; *    Added support for Event Electronics EZ8 card to hoontech.c.&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/moduleparam.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/cs8427.h&gt;
macro_line|#include &lt;sound/info.h&gt;
macro_line|#include &lt;sound/mpu401.h&gt;
macro_line|#include &lt;sound/initval.h&gt;
macro_line|#include &lt;sound/asoundef.h&gt;
macro_line|#include &quot;ice1712.h&quot;
multiline_comment|/* lowlevel routines */
macro_line|#include &quot;delta.h&quot;
macro_line|#include &quot;ews.h&quot;
macro_line|#include &quot;hoontech.h&quot;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;ICEnsemble ICE1712 (Envy24)&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_SUPPORTED_DEVICE
c_func
(paren
l_string|&quot;{&quot;
id|HOONTECH_DEVICE_DESC
id|DELTA_DEVICE_DESC
id|EWS_DEVICE_DESC
l_string|&quot;{ICEnsemble,Generic ICE1712},&quot;
l_string|&quot;{ICEnsemble,Generic Envy24}}&quot;
)paren
suffix:semicolon
DECL|variable|index
r_static
r_int
id|index
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_IDX
suffix:semicolon
multiline_comment|/* Index 0-MAX */
DECL|variable|id
r_static
r_char
op_star
id|id
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_STR
suffix:semicolon
multiline_comment|/* ID for this card */
DECL|variable|enable
r_static
r_int
id|enable
(braket
id|SNDRV_CARDS
)braket
op_assign
id|SNDRV_DEFAULT_ENABLE_PNP
suffix:semicolon
multiline_comment|/* Enable this card */
DECL|variable|model
r_static
r_char
op_star
id|model
(braket
id|SNDRV_CARDS
)braket
suffix:semicolon
DECL|variable|omni
r_static
r_int
id|omni
(braket
id|SNDRV_CARDS
)braket
suffix:semicolon
multiline_comment|/* Delta44 &amp; 66 Omni I/O support */
DECL|variable|cs8427_timeout
r_static
r_int
id|cs8427_timeout
(braket
id|SNDRV_CARDS
)braket
op_assign
(brace
(braket
l_int|0
dot
dot
dot
(paren
id|SNDRV_CARDS
op_minus
l_int|1
)paren
)braket
op_assign
l_int|500
)brace
suffix:semicolon
multiline_comment|/* CS8427 S/PDIF transciever reset timeout value in msec */
id|module_param_array
c_func
(paren
id|index
comma
r_int
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|index
comma
l_string|&quot;Index value for ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|id
comma
id|charp
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|id
comma
l_string|&quot;ID string for ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|enable
comma
r_bool
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|enable
comma
l_string|&quot;Enable ICE1712 soundcard.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|omni
comma
r_bool
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|omni
comma
l_string|&quot;Enable Midiman M-Audio Delta Omni I/O support.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|cs8427_timeout
comma
r_int
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|cs8427_timeout
comma
l_string|&quot;Define reset timeout for cs8427 chip in msec resolution.&quot;
)paren
suffix:semicolon
id|module_param_array
c_func
(paren
id|model
comma
id|charp
comma
l_int|NULL
comma
l_int|0444
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|model
comma
l_string|&quot;Use the given board model.&quot;
)paren
suffix:semicolon
macro_line|#ifndef PCI_VENDOR_ID_ICE
DECL|macro|PCI_VENDOR_ID_ICE
mdefine_line|#define PCI_VENDOR_ID_ICE&t;&t;0x1412
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_ICE_1712
DECL|macro|PCI_DEVICE_ID_ICE_1712
mdefine_line|#define PCI_DEVICE_ID_ICE_1712&t;&t;0x1712
macro_line|#endif
DECL|variable|snd_ice1712_ids
r_static
r_struct
id|pci_device_id
id|snd_ice1712_ids
(braket
)braket
op_assign
(brace
(brace
id|PCI_VENDOR_ID_ICE
comma
id|PCI_DEVICE_ID_ICE_1712
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
multiline_comment|/* ICE1712 */
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|snd_ice1712_ids
)paren
suffix:semicolon
r_static
r_int
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
suffix:semicolon
r_static
r_int
id|snd_ice1712_build_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
suffix:semicolon
DECL|variable|PRO_RATE_LOCKED
r_static
r_int
id|PRO_RATE_LOCKED
suffix:semicolon
DECL|variable|PRO_RATE_RESET
r_static
r_int
id|PRO_RATE_RESET
op_assign
l_int|1
suffix:semicolon
DECL|variable|PRO_RATE_DEFAULT
r_static
r_int
r_int
id|PRO_RATE_DEFAULT
op_assign
l_int|44100
suffix:semicolon
multiline_comment|/*&n; *  Basic I/O&n; */
multiline_comment|/* check whether the clock mode is spdif-in */
DECL|function|is_spdif_master
r_static
r_inline
r_int
id|is_spdif_master
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_return
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
id|ICE1712_SPDIF_MASTER
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|is_pro_rate_locked
r_static
r_inline
r_int
id|is_pro_rate_locked
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_return
id|is_spdif_master
c_func
(paren
id|ice
)paren
op_logical_or
id|PRO_RATE_LOCKED
suffix:semicolon
)brace
DECL|function|snd_ice1712_ds_write
r_static
r_inline
r_void
id|snd_ice1712_ds_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|channel
comma
id|u8
id|addr
comma
id|u32
id|data
)paren
(brace
id|outb
c_func
(paren
(paren
id|channel
op_lshift
l_int|4
)paren
op_or
id|addr
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
id|outl
c_func
(paren
id|data
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_ds_read
r_static
r_inline
id|u32
id|snd_ice1712_ds_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|u8
id|channel
comma
id|u8
id|addr
)paren
(brace
id|outb
c_func
(paren
(paren
id|channel
op_lshift
l_int|4
)paren
op_or
id|addr
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INDEX
)paren
)paren
suffix:semicolon
r_return
id|inl
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_write
r_static
r_void
id|snd_ice1712_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
id|old_cmd
op_and_assign
op_complement
(paren
id|ICE1712_AC97_PBK_VSR
op_or
id|ICE1712_AC97_CAP_VSR
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_WRITE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_WRITE
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_read
r_static
r_int
r_int
id|snd_ice1712_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_READ
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_READ
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|tm
op_ge
l_int|0x10000
)paren
multiline_comment|/* timeout */
r_return
op_complement
l_int|0
suffix:semicolon
r_return
id|inw
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * pro ac97 section&n; */
DECL|function|snd_ice1712_pro_ac97_write
r_static
r_void
id|snd_ice1712_pro_ac97_write
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
id|old_cmd
op_and_assign
op_complement
(paren
id|ICE1712_AC97_PBK_VSR
op_or
id|ICE1712_AC97_CAP_VSR
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_WRITE
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_WRITE
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_ac97_read
r_static
r_int
r_int
id|snd_ice1712_pro_ac97_read
c_func
(paren
id|ac97_t
op_star
id|ac97
comma
r_int
r_int
id|reg
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
(paren
id|ice1712_t
op_star
)paren
id|ac97-&gt;private_data
suffix:semicolon
r_int
id|tm
suffix:semicolon
r_int
r_char
id|old_cmd
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
(brace
id|old_cmd
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|old_cmd
op_amp
(paren
id|ICE1712_AC97_WRITE
op_or
id|ICE1712_AC97_READ
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|old_cmd
op_amp
id|ICE1712_AC97_READY
)paren
)paren
r_continue
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|reg
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_INDEX
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|old_cmd
op_or
id|ICE1712_AC97_READ
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tm
op_assign
l_int|0
suffix:semicolon
id|tm
OL
l_int|0x10000
suffix:semicolon
id|tm
op_increment
)paren
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
op_amp
id|ICE1712_AC97_READ
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|tm
op_ge
l_int|0x10000
)paren
multiline_comment|/* timeout */
r_return
op_complement
l_int|0
suffix:semicolon
r_return
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|AC97_DATA
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * consumer ac97 digital mix&n; */
DECL|function|snd_ice1712_digmix_route_ac97_info
r_static
r_int
id|snd_ice1712_digmix_route_ac97_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_digmix_route_ac97_get
r_static
r_int
id|snd_ice1712_digmix_route_ac97_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
op_amp
id|ICE1712_ROUTE_AC97
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_digmix_route_ac97_put
r_static
r_int
id|snd_ice1712_digmix_route_ac97_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|val
comma
id|nval
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
suffix:semicolon
id|nval
op_assign
id|val
op_amp
op_complement
id|ICE1712_ROUTE_AC97
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|nval
op_or_assign
id|ICE1712_ROUTE_AC97
suffix:semicolon
id|outb
c_func
(paren
id|nval
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_ROUTECTRL
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|val
op_ne
id|nval
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_digmix_route_ac97
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Digital Mixer To AC97&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_digmix_route_ac97_info
comma
dot
id|get
op_assign
id|snd_ice1712_digmix_route_ac97_get
comma
dot
id|put
op_assign
id|snd_ice1712_digmix_route_ac97_put
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * gpio operations&n; */
DECL|function|snd_ice1712_set_gpio_dir
r_static
r_void
id|snd_ice1712_set_gpio_dir
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|data
)paren
(brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|data
)paren
suffix:semicolon
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
multiline_comment|/* dummy read for pci-posting */
)brace
DECL|function|snd_ice1712_set_gpio_mask
r_static
r_void
id|snd_ice1712_set_gpio_mask
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|data
)paren
(brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
id|data
)paren
suffix:semicolon
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
multiline_comment|/* dummy read for pci-posting */
)brace
DECL|function|snd_ice1712_get_gpio_data
r_static
r_int
r_int
id|snd_ice1712_get_gpio_data
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_return
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_set_gpio_data
r_static
r_void
id|snd_ice1712_set_gpio_data
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|val
)paren
(brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|val
)paren
suffix:semicolon
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|DATA
)paren
)paren
suffix:semicolon
multiline_comment|/* dummy read for pci-posting */
)brace
multiline_comment|/*&n; *&n; * CS8427 interface&n; *&n; */
multiline_comment|/*&n; * change the input clock selection&n; * spdif_clock = 1 - IEC958 input, 0 - Envy24&n; */
DECL|function|snd_ice1712_cs8427_set_input_clock
r_static
r_int
id|snd_ice1712_cs8427_set_input_clock
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|spdif_clock
)paren
(brace
r_int
r_char
id|reg
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x80
op_or
l_int|4
comma
l_int|0
)brace
suffix:semicolon
multiline_comment|/* CS8427 auto increment | register number 4 + data */
r_int
r_char
id|val
comma
id|nval
suffix:semicolon
r_int
id|res
op_assign
l_int|0
suffix:semicolon
id|snd_i2c_lock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;cs8427
comma
id|reg
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_i2c_readbytes
c_func
(paren
id|ice-&gt;cs8427
comma
op_amp
id|val
comma
l_int|1
)paren
op_ne
l_int|1
)paren
(brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|nval
op_assign
id|val
op_amp
l_int|0xf0
suffix:semicolon
r_if
c_cond
(paren
id|spdif_clock
)paren
id|nval
op_or_assign
l_int|0x01
suffix:semicolon
r_else
id|nval
op_or_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|nval
)paren
(brace
id|reg
(braket
l_int|1
)braket
op_assign
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|snd_i2c_sendbytes
c_func
(paren
id|ice-&gt;cs8427
comma
id|reg
comma
l_int|2
)paren
op_ne
l_int|2
)paren
(brace
id|res
op_assign
op_minus
id|EIO
suffix:semicolon
)brace
r_else
(brace
id|res
op_increment
suffix:semicolon
)brace
)brace
id|snd_i2c_unlock
c_func
(paren
id|ice-&gt;i2c
)paren
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
multiline_comment|/*&n; * spdif callbacks&n; */
DECL|function|open_cs8427
r_static
r_void
id|open_cs8427
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_cs8427_iec958_active
c_func
(paren
id|ice-&gt;cs8427
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|close_cs8427
r_static
r_void
id|close_cs8427
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_cs8427_iec958_active
c_func
(paren
id|ice-&gt;cs8427
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|setup_cs8427
r_static
r_void
id|setup_cs8427
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|rate
)paren
(brace
id|snd_cs8427_iec958_pcm
c_func
(paren
id|ice-&gt;cs8427
comma
id|rate
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * create and initialize callbacks for cs8427 interface&n; */
DECL|function|snd_ice1712_init_cs8427
r_int
id|__devinit
id|snd_ice1712_init_cs8427
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|addr
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_cs8427_create
c_func
(paren
id|ice-&gt;i2c
comma
id|addr
comma
(paren
id|ice-&gt;cs8427_timeout
op_star
id|HZ
)paren
op_div
l_int|1000
comma
op_amp
id|ice-&gt;cs8427
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;CS8427 initialization failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|ice-&gt;spdif.ops.open
op_assign
id|open_cs8427
suffix:semicolon
id|ice-&gt;spdif.ops.close
op_assign
id|close_cs8427
suffix:semicolon
id|ice-&gt;spdif.ops.setup_rate
op_assign
id|setup_cs8427
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  Interrupt handler&n; */
DECL|function|snd_ice1712_interrupt
r_static
id|irqreturn_t
id|snd_ice1712_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|dev_id
suffix:semicolon
r_int
r_char
id|status
suffix:semicolon
r_int
id|handled
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|status
op_assign
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
l_int|0
)paren
r_break
suffix:semicolon
id|handled
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_MPU1
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;rmidi
(braket
l_int|0
)braket
)paren
id|snd_mpu401_uart_interrupt
c_func
(paren
id|irq
comma
id|ice-&gt;rmidi
(braket
l_int|0
)braket
op_member_access_from_pointer
id|private_data
comma
id|regs
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_MPU1
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
id|status
op_and_assign
op_complement
id|ICE1712_IRQ_MPU1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_TIMER
)paren
id|outb
c_func
(paren
id|ICE1712_IRQ_TIMER
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_MPU2
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;rmidi
(braket
l_int|1
)braket
)paren
id|snd_mpu401_uart_interrupt
c_func
(paren
id|irq
comma
id|ice-&gt;rmidi
(braket
l_int|1
)braket
op_member_access_from_pointer
id|private_data
comma
id|regs
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_MPU2
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
id|status
op_and_assign
op_complement
id|ICE1712_IRQ_MPU2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_PROPCM
)paren
(brace
r_int
r_char
id|mtstat
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mtstat
op_amp
id|ICE1712_MULTI_PBKSTATUS
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;playback_pro_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;playback_pro_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_MULTI_PBKSTATUS
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mtstat
op_amp
id|ICE1712_MULTI_CAPSTATUS
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;capture_pro_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;capture_pro_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_MULTI_CAPSTATUS
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_FM
)paren
id|outb
c_func
(paren
id|ICE1712_IRQ_FM
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_PBKDS
)paren
(brace
id|u32
id|idx
suffix:semicolon
id|u16
id|pbkstatus
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
id|pbkstatus
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTSTAT
)paren
)paren
suffix:semicolon
singleline_comment|//printk(&quot;pbkstatus = 0x%x&bslash;n&quot;, pbkstatus);
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|6
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|pbkstatus
op_amp
(paren
l_int|3
op_lshift
(paren
id|idx
op_star
l_int|2
)paren
)paren
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
(paren
id|substream
op_assign
id|ice-&gt;playback_con_substream_ds
(braket
id|idx
)braket
)paren
op_ne
l_int|NULL
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|substream
)paren
suffix:semicolon
id|outw
c_func
(paren
l_int|3
op_lshift
(paren
id|idx
op_star
l_int|2
)paren
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTSTAT
)paren
)paren
suffix:semicolon
)brace
id|outb
c_func
(paren
id|ICE1712_IRQ_PBKDS
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_CONCAP
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;capture_con_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;capture_con_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_CONCAP
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|ICE1712_IRQ_CONPBK
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;playback_con_substream
)paren
id|snd_pcm_period_elapsed
c_func
(paren
id|ice-&gt;playback_con_substream
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_IRQ_CONPBK
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQSTAT
)paren
)paren
suffix:semicolon
)brace
)brace
r_return
id|IRQ_RETVAL
c_func
(paren
id|handled
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM part - misc&n; */
DECL|function|snd_ice1712_hw_params
r_static
r_int
id|snd_ice1712_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|hw_params
)paren
(brace
r_return
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|hw_params
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_hw_free
r_static
r_int
id|snd_ice1712_hw_free
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_return
id|snd_pcm_lib_free_pages
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM part - consumer I/O&n; */
DECL|function|snd_ice1712_playback_trigger
r_static
r_int
id|snd_ice1712_playback_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
(brace
id|tmp
op_or_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_trigger
r_static
r_int
id|snd_ice1712_playback_ds_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
(brace
id|tmp
op_or_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_trigger
r_static
r_int
id|snd_ice1712_capture_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u8
id|tmp
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
(brace
id|tmp
op_or_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_STOP
)paren
(brace
id|tmp
op_and_assign
op_complement
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_prepare
r_static
r_int
id|snd_ice1712_playback_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
comma
id|rate
comma
id|tmp
suffix:semicolon
id|period_size
op_assign
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_or_assign
l_int|0x08
suffix:semicolon
id|rate
op_assign
(paren
id|runtime-&gt;rate
op_star
l_int|8192
)paren
op_div
l_int|375
suffix:semicolon
r_if
c_cond
(paren
id|rate
OG
l_int|0x000fffff
)paren
id|rate
op_assign
l_int|0x000fffff
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|ice-&gt;ddma_port
op_plus
l_int|15
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_DMA_MODE_WRITE
op_or
id|ICE1712_DMA_AUTOINIT
comma
id|ice-&gt;ddma_port
op_plus
l_int|0x0b
)paren
suffix:semicolon
id|outl
c_func
(paren
id|runtime-&gt;dma_addr
comma
id|ice-&gt;ddma_port
op_plus
l_int|0
)paren
suffix:semicolon
id|outw
c_func
(paren
id|buf_size
comma
id|ice-&gt;ddma_port
op_plus
l_int|4
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_LO
comma
id|rate
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_MID
comma
(paren
id|rate
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RATE_HI
comma
(paren
id|rate
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_COUNT_LO
comma
id|period_size
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_COUNT_HI
comma
id|period_size
op_rshift
l_int|8
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_LEFT
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_RIGHT
comma
l_int|0
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_prepare
r_static
r_int
id|snd_ice1712_playback_ds_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
comma
id|rate
comma
id|tmp
comma
id|chn
suffix:semicolon
id|period_size
op_assign
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x0064
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_and_assign
op_complement
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_or_assign
l_int|0x08
suffix:semicolon
id|rate
op_assign
(paren
id|runtime-&gt;rate
op_star
l_int|8192
)paren
op_div
l_int|375
suffix:semicolon
r_if
c_cond
(paren
id|rate
OG
l_int|0x000fffff
)paren
id|rate
op_assign
l_int|0x000fffff
suffix:semicolon
id|ice-&gt;playback_con_active_buf
(braket
id|substream-&gt;number
)braket
op_assign
l_int|0
suffix:semicolon
id|ice-&gt;playback_con_virt_addr
(braket
id|substream-&gt;number
)braket
op_assign
id|runtime-&gt;dma_addr
suffix:semicolon
id|chn
op_assign
id|substream-&gt;number
op_star
l_int|2
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_ADDR0
comma
id|runtime-&gt;dma_addr
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_COUNT0
comma
id|period_size
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_ADDR1
comma
id|runtime-&gt;dma_addr
op_plus
(paren
id|runtime-&gt;periods
OG
l_int|1
ques
c_cond
id|period_size
op_plus
l_int|1
suffix:colon
l_int|0
)paren
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_COUNT1
comma
id|period_size
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_RATE
comma
id|rate
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_VOLUME
comma
l_int|0
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
comma
id|ICE1712_DSC_CONTROL
comma
id|tmp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
(brace
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
op_plus
l_int|1
comma
id|ICE1712_DSC_RATE
comma
id|rate
)paren
suffix:semicolon
id|snd_ice1712_ds_write
c_func
(paren
id|ice
comma
id|chn
op_plus
l_int|1
comma
id|ICE1712_DSC_VOLUME
comma
l_int|0
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_prepare
r_static
r_int
id|snd_ice1712_capture_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|u32
id|period_size
comma
id|buf_size
suffix:semicolon
id|u8
id|tmp
suffix:semicolon
id|period_size
op_assign
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
suffix:semicolon
id|buf_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
op_minus
l_int|1
suffix:semicolon
id|tmp
op_assign
l_int|0x06
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_format_width
c_func
(paren
id|runtime-&gt;format
)paren
op_eq
l_int|16
)paren
id|tmp
op_and_assign
op_complement
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;channels
op_eq
l_int|2
)paren
id|tmp
op_and_assign
op_complement
l_int|0x02
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|outl
c_func
(paren
id|ice-&gt;capture_con_virt_addr
op_assign
id|runtime-&gt;dma_addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|buf_size
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_COUNT
)paren
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_COUNT_HI
comma
id|period_size
op_rshift
l_int|8
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_COUNT_LO
comma
id|period_size
op_amp
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
comma
id|tmp
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|snd_ac97_set_rate
c_func
(paren
id|ice-&gt;ac97
comma
id|AC97_PCM_LR_ADC_RATE
comma
id|runtime-&gt;rate
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PBK_CTRL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|runtime-&gt;buffer_size
op_minus
id|inw
c_func
(paren
id|ice-&gt;ddma_port
op_plus
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_eq
id|runtime-&gt;buffer_size
)paren
id|ptr
op_assign
l_int|0
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_ds_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|u8
id|addr
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|ICE1712_DSC_CONTROL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;playback_con_active_buf
(braket
id|substream-&gt;number
)braket
)paren
id|addr
op_assign
id|ICE1712_DSC_ADDR1
suffix:semicolon
r_else
id|addr
op_assign
id|ICE1712_DSC_ADDR0
suffix:semicolon
id|ptr
op_assign
id|snd_ice1712_ds_read
c_func
(paren
id|ice
comma
id|substream-&gt;number
op_star
l_int|2
comma
id|addr
)paren
op_minus
id|ice-&gt;playback_con_virt_addr
(braket
id|substream-&gt;number
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_eq
id|substream-&gt;runtime-&gt;buffer_size
)paren
id|ptr
op_assign
l_int|0
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_capture_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snd_ice1712_read
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CAP_CTRL
)paren
op_amp
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|inl
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|CONCAP_ADDR
)paren
)paren
op_minus
id|ice-&gt;capture_con_virt_addr
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_eq
id|substream-&gt;runtime-&gt;buffer_size
)paren
id|ptr
op_assign
l_int|0
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
dot
id|rates
op_assign
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
dot
id|rate_min
op_assign
l_int|4000
comma
dot
id|rate_max
op_assign
l_int|48000
comma
dot
id|channels_min
op_assign
l_int|1
comma
dot
id|channels_max
op_assign
l_int|2
comma
dot
id|buffer_bytes_max
op_assign
(paren
l_int|64
op_star
l_int|1024
)paren
comma
dot
id|period_bytes_min
op_assign
l_int|64
comma
dot
id|period_bytes_max
op_assign
(paren
l_int|64
op_star
l_int|1024
)paren
comma
dot
id|periods_min
op_assign
l_int|1
comma
dot
id|periods_max
op_assign
l_int|1024
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_playback_ds
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback_ds
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
)paren
comma
dot
id|formats
op_assign
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
dot
id|rates
op_assign
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
dot
id|rate_min
op_assign
l_int|4000
comma
dot
id|rate_max
op_assign
l_int|48000
comma
dot
id|channels_min
op_assign
l_int|1
comma
dot
id|channels_max
op_assign
l_int|2
comma
dot
id|buffer_bytes_max
op_assign
(paren
l_int|128
op_star
l_int|1024
)paren
comma
dot
id|period_bytes_min
op_assign
l_int|64
comma
dot
id|period_bytes_max
op_assign
(paren
l_int|128
op_star
l_int|1024
)paren
comma
dot
id|periods_min
op_assign
l_int|2
comma
dot
id|periods_max
op_assign
l_int|2
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_capture
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
)paren
comma
dot
id|formats
op_assign
id|SNDRV_PCM_FMTBIT_U8
op_or
id|SNDRV_PCM_FMTBIT_S16_LE
comma
dot
id|rates
op_assign
id|SNDRV_PCM_RATE_CONTINUOUS
op_or
id|SNDRV_PCM_RATE_8000_48000
comma
dot
id|rate_min
op_assign
l_int|4000
comma
dot
id|rate_max
op_assign
l_int|48000
comma
dot
id|channels_min
op_assign
l_int|1
comma
dot
id|channels_max
op_assign
l_int|2
comma
dot
id|buffer_bytes_max
op_assign
(paren
l_int|64
op_star
l_int|1024
)paren
comma
dot
id|period_bytes_min
op_assign
l_int|64
comma
dot
id|period_bytes_max
op_assign
(paren
l_int|64
op_star
l_int|1024
)paren
comma
dot
id|periods_min
op_assign
l_int|1
comma
dot
id|periods_max
op_assign
l_int|1024
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_playback_open
r_static
r_int
id|snd_ice1712_playback_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_open
r_static
r_int
id|snd_ice1712_playback_ds_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|ice-&gt;playback_con_substream_ds
(braket
id|substream-&gt;number
)braket
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback_ds
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
op_amp
op_complement
(paren
l_int|1
op_lshift
(paren
id|substream-&gt;number
op_star
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|tmp
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_open
r_static
r_int
id|snd_ice1712_capture_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_con_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_capture
suffix:semicolon
id|runtime-&gt;hw.rates
op_assign
id|ice-&gt;ac97-&gt;rates
(braket
id|AC97_RATES_ADC
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|runtime-&gt;hw.rates
op_amp
id|SNDRV_PCM_RATE_8000
)paren
)paren
id|runtime-&gt;hw.rate_min
op_assign
l_int|48000
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_close
r_static
r_int
id|snd_ice1712_playback_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_ds_close
r_static
r_int
id|snd_ice1712_playback_ds_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|tmp
op_assign
id|inw
c_func
(paren
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
op_or
(paren
l_int|3
op_lshift
(paren
id|substream-&gt;number
op_star
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|tmp
comma
id|ICEDS
c_func
(paren
id|ice
comma
id|INTMASK
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|ice-&gt;playback_con_substream_ds
(braket
id|substream-&gt;number
)braket
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_close
r_static
r_int
id|snd_ice1712_capture_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_con_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_ice1712_playback_open
comma
dot
id|close
op_assign
id|snd_ice1712_playback_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_ice1712_hw_params
comma
dot
id|hw_free
op_assign
id|snd_ice1712_hw_free
comma
dot
id|prepare
op_assign
id|snd_ice1712_playback_prepare
comma
dot
id|trigger
op_assign
id|snd_ice1712_playback_trigger
comma
dot
id|pointer
op_assign
id|snd_ice1712_playback_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_playback_ds_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_ds_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_ice1712_playback_ds_open
comma
dot
id|close
op_assign
id|snd_ice1712_playback_ds_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_ice1712_hw_params
comma
dot
id|hw_free
op_assign
id|snd_ice1712_hw_free
comma
dot
id|prepare
op_assign
id|snd_ice1712_playback_ds_prepare
comma
dot
id|trigger
op_assign
id|snd_ice1712_playback_ds_trigger
comma
dot
id|pointer
op_assign
id|snd_ice1712_playback_ds_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_capture_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_ice1712_capture_open
comma
dot
id|close
op_assign
id|snd_ice1712_capture_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_ice1712_hw_params
comma
dot
id|hw_free
op_assign
id|snd_ice1712_hw_free
comma
dot
id|prepare
op_assign
id|snd_ice1712_capture_prepare
comma
dot
id|trigger
op_assign
id|snd_ice1712_capture_trigger
comma
dot
id|pointer
op_assign
id|snd_ice1712_capture_pointer
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pcm_free
r_static
r_void
id|snd_ice1712_pcm_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|pcm-&gt;private_data
suffix:semicolon
id|ice-&gt;pcm
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm
r_static
r_int
id|__devinit
id|snd_ice1712_pcm
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 consumer&quot;
comma
id|device
comma
l_int|1
comma
l_int|1
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_ice1712_capture_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_free
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 consumer&quot;
)paren
suffix:semicolon
id|ice-&gt;pcm
op_assign
id|pcm
suffix:semicolon
id|snd_pcm_lib_preallocate_pages_for_all
c_func
(paren
id|pcm
comma
id|SNDRV_DMA_TYPE_DEV
comma
id|snd_dma_pci_data
c_func
(paren
id|ice-&gt;pci
)paren
comma
l_int|64
op_star
l_int|1024
comma
l_int|64
op_star
l_int|1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;Consumer PCM code does not work well at the moment --jk&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_free_ds
r_static
r_void
id|snd_ice1712_pcm_free_ds
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|pcm-&gt;private_data
suffix:semicolon
id|ice-&gt;pcm_ds
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_ds
r_static
r_int
id|__devinit
id|snd_ice1712_pcm_ds
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 consumer (DS)&quot;
comma
id|device
comma
l_int|6
comma
l_int|0
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_ds_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_free_ds
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 consumer (DS)&quot;
)paren
suffix:semicolon
id|ice-&gt;pcm_ds
op_assign
id|pcm
suffix:semicolon
id|snd_pcm_lib_preallocate_pages_for_all
c_func
(paren
id|pcm
comma
id|SNDRV_DMA_TYPE_DEV
comma
id|snd_dma_pci_data
c_func
(paren
id|ice-&gt;pci
)paren
comma
l_int|64
op_star
l_int|1024
comma
l_int|128
op_star
l_int|1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  PCM code - professional part (multitrack)&n; */
DECL|variable|rates
r_static
r_int
r_int
id|rates
(braket
)braket
op_assign
(brace
l_int|8000
comma
l_int|9600
comma
l_int|11025
comma
l_int|12000
comma
l_int|16000
comma
l_int|22050
comma
l_int|24000
comma
l_int|32000
comma
l_int|44100
comma
l_int|48000
comma
l_int|64000
comma
l_int|88200
comma
l_int|96000
)brace
suffix:semicolon
DECL|variable|hw_constraints_rates
r_static
id|snd_pcm_hw_constraint_list_t
id|hw_constraints_rates
op_assign
(brace
dot
id|count
op_assign
id|ARRAY_SIZE
c_func
(paren
id|rates
)paren
comma
dot
id|list
op_assign
id|rates
comma
dot
id|mask
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_trigger
r_static
r_int
id|snd_ice1712_pro_trigger
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
r_int
id|cmd
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
suffix:colon
r_case
id|SNDRV_PCM_TRIGGER_PAUSE_RELEASE
suffix:colon
(brace
r_int
r_int
id|what
suffix:semicolon
r_int
r_int
id|old
suffix:semicolon
r_if
c_cond
(paren
id|substream-&gt;stream
op_ne
id|SNDRV_PCM_STREAM_PLAYBACK
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|what
op_assign
id|ICE1712_PLAYBACK_PAUSE
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|substream
comma
id|substream
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_PAUSE_PUSH
)paren
id|old
op_or_assign
id|what
suffix:semicolon
r_else
id|old
op_and_assign
op_complement
id|what
suffix:semicolon
id|outl
c_func
(paren
id|old
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|SNDRV_PCM_TRIGGER_START
suffix:colon
r_case
id|SNDRV_PCM_TRIGGER_STOP
suffix:colon
(brace
r_int
r_int
id|what
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|old
suffix:semicolon
r_struct
id|list_head
op_star
id|pos
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|s
suffix:semicolon
id|snd_pcm_group_for_each
c_func
(paren
id|pos
comma
id|substream
)paren
(brace
id|s
op_assign
id|snd_pcm_group_substream_entry
c_func
(paren
id|pos
)paren
suffix:semicolon
r_if
c_cond
(paren
id|s
op_eq
id|ice-&gt;playback_pro_substream
)paren
(brace
id|what
op_or_assign
id|ICE1712_PLAYBACK_START
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|s
comma
id|substream
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|s
op_eq
id|ice-&gt;capture_pro_substream
)paren
(brace
id|what
op_or_assign
id|ICE1712_CAPTURE_START_SHADOW
suffix:semicolon
id|snd_pcm_trigger_done
c_func
(paren
id|s
comma
id|substream
)paren
suffix:semicolon
)brace
)brace
id|spin_lock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|old
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SNDRV_PCM_TRIGGER_START
)paren
id|old
op_or_assign
id|what
suffix:semicolon
r_else
id|old
op_and_assign
op_complement
id|what
suffix:semicolon
id|outl
c_func
(paren
id|old
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; */
DECL|function|snd_ice1712_set_pro_rate
r_static
r_void
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|rate
comma
r_int
id|force
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
(paren
id|ICE1712_CAPTURE_START_SHADOW
op_or
id|ICE1712_PLAYBACK_PAUSE
op_or
id|ICE1712_PLAYBACK_START
)paren
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|force
op_logical_and
id|is_pro_rate_locked
c_func
(paren
id|ice
)paren
)paren
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|rate
)paren
(brace
r_case
l_int|8000
suffix:colon
id|val
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9600
suffix:colon
id|val
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11025
suffix:colon
id|val
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12000
suffix:colon
id|val
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16000
suffix:colon
id|val
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22050
suffix:colon
id|val
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24000
suffix:colon
id|val
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32000
suffix:colon
id|val
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|44100
suffix:colon
id|val
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|val
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|64000
suffix:colon
id|val
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|88200
suffix:colon
id|val
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|96000
suffix:colon
id|val
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
id|val
op_assign
l_int|0
suffix:semicolon
id|rate
op_assign
l_int|48000
suffix:semicolon
r_break
suffix:semicolon
)brace
id|outb
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|ice-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;gpio.set_pro_rate
)paren
id|ice-&gt;gpio
dot
id|set_pro_rate
c_func
(paren
id|ice
comma
id|rate
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ice-&gt;akm_codecs
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;akm
(braket
id|i
)braket
dot
id|ops.set_rate_val
)paren
id|ice-&gt;akm
(braket
id|i
)braket
dot
id|ops
dot
id|set_rate_val
c_func
(paren
op_amp
id|ice-&gt;akm
(braket
id|i
)braket
comma
id|rate
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.setup_rate
)paren
id|ice-&gt;spdif.ops
dot
id|setup_rate
c_func
(paren
id|ice
comma
id|rate
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_prepare
r_static
r_int
id|snd_ice1712_playback_pro_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_pro_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|outl
c_func
(paren
id|substream-&gt;runtime-&gt;dma_addr
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|ice-&gt;playback_pro_size
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_SIZE
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_COUNT
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_hw_params
r_static
r_int
id|snd_ice1712_playback_pro_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|hw_params
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|params_rate
c_func
(paren
id|hw_params
)paren
comma
l_int|0
)paren
suffix:semicolon
r_return
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|hw_params
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_prepare
r_static
r_int
id|snd_ice1712_capture_pro_prepare
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;capture_pro_size
op_assign
id|snd_pcm_lib_buffer_bytes
c_func
(paren
id|substream
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|outl
c_func
(paren
id|substream-&gt;runtime-&gt;dma_addr
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_ADDR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|ice-&gt;capture_pro_size
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_SIZE
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|snd_pcm_lib_period_bytes
c_func
(paren
id|substream
)paren
op_rshift
l_int|2
)paren
op_minus
l_int|1
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_COUNT
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_hw_params
r_static
r_int
id|snd_ice1712_capture_pro_hw_params
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_pcm_hw_params_t
op_star
id|hw_params
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|params_rate
c_func
(paren
id|hw_params
)paren
comma
l_int|0
)paren
suffix:semicolon
r_return
id|snd_pcm_lib_malloc_pages
c_func
(paren
id|substream
comma
id|params_buffer_bytes
c_func
(paren
id|hw_params
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_playback_pro_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
id|ICE1712_PLAYBACK_START
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|ice-&gt;playback_pro_size
op_minus
(paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_SIZE
)paren
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_eq
id|substream-&gt;runtime-&gt;buffer_size
)paren
id|ptr
op_assign
l_int|0
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_pointer
r_static
id|snd_pcm_uframes_t
id|snd_ice1712_capture_pro_pointer
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_int
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|PLAYBACK_CONTROL
)paren
)paren
op_amp
id|ICE1712_CAPTURE_START_SHADOW
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|ptr
op_assign
id|ice-&gt;capture_pro_size
op_minus
(paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|CAPTURE_SIZE
)paren
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_eq
id|substream-&gt;runtime-&gt;buffer_size
)paren
id|ptr
op_assign
l_int|0
suffix:semicolon
r_return
id|bytes_to_frames
c_func
(paren
id|substream-&gt;runtime
comma
id|ptr
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_pro
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_playback_pro
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
op_or
id|SNDRV_PCM_INFO_SYNC_START
)paren
comma
dot
id|formats
op_assign
id|SNDRV_PCM_FMTBIT_S32_LE
comma
dot
id|rates
op_assign
id|SNDRV_PCM_RATE_KNOT
op_or
id|SNDRV_PCM_RATE_8000_96000
comma
dot
id|rate_min
op_assign
l_int|4000
comma
dot
id|rate_max
op_assign
l_int|96000
comma
dot
id|channels_min
op_assign
l_int|10
comma
dot
id|channels_max
op_assign
l_int|10
comma
dot
id|buffer_bytes_max
op_assign
(paren
l_int|256
op_star
l_int|1024
)paren
comma
dot
id|period_bytes_min
op_assign
l_int|10
op_star
l_int|4
op_star
l_int|2
comma
dot
id|period_bytes_max
op_assign
l_int|131040
comma
dot
id|periods_min
op_assign
l_int|1
comma
dot
id|periods_max
op_assign
l_int|1024
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_pro
r_static
id|snd_pcm_hardware_t
id|snd_ice1712_capture_pro
op_assign
(brace
dot
id|info
op_assign
(paren
id|SNDRV_PCM_INFO_MMAP
op_or
id|SNDRV_PCM_INFO_INTERLEAVED
op_or
id|SNDRV_PCM_INFO_BLOCK_TRANSFER
op_or
id|SNDRV_PCM_INFO_MMAP_VALID
op_or
id|SNDRV_PCM_INFO_PAUSE
op_or
id|SNDRV_PCM_INFO_SYNC_START
)paren
comma
dot
id|formats
op_assign
id|SNDRV_PCM_FMTBIT_S32_LE
comma
dot
id|rates
op_assign
id|SNDRV_PCM_RATE_KNOT
op_or
id|SNDRV_PCM_RATE_8000_96000
comma
dot
id|rate_min
op_assign
l_int|4000
comma
dot
id|rate_max
op_assign
l_int|96000
comma
dot
id|channels_min
op_assign
l_int|12
comma
dot
id|channels_max
op_assign
l_int|12
comma
dot
id|buffer_bytes_max
op_assign
(paren
l_int|256
op_star
l_int|1024
)paren
comma
dot
id|period_bytes_min
op_assign
l_int|12
op_star
l_int|4
op_star
l_int|2
comma
dot
id|period_bytes_max
op_assign
l_int|131040
comma
dot
id|periods_min
op_assign
l_int|1
comma
dot
id|periods_max
op_assign
l_int|1024
comma
dot
id|fifo_size
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_playback_pro_open
r_static
r_int
id|snd_ice1712_playback_pro_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|ice-&gt;playback_pro_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_playback_pro
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_msbits
c_func
(paren
id|runtime
comma
l_int|0
comma
l_int|32
comma
l_int|24
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_RATE
comma
op_amp
id|hw_constraints_rates
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.open
)paren
id|ice-&gt;spdif.ops
dot
id|open
c_func
(paren
id|ice
comma
id|substream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_open
r_static
r_int
id|snd_ice1712_capture_pro_open
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|ice-&gt;capture_pro_substream
op_assign
id|substream
suffix:semicolon
id|runtime-&gt;hw
op_assign
id|snd_ice1712_capture_pro
suffix:semicolon
id|snd_pcm_set_sync
c_func
(paren
id|substream
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_msbits
c_func
(paren
id|runtime
comma
l_int|0
comma
l_int|32
comma
l_int|24
)paren
suffix:semicolon
id|snd_pcm_hw_constraint_list
c_func
(paren
id|runtime
comma
l_int|0
comma
id|SNDRV_PCM_HW_PARAM_RATE
comma
op_amp
id|hw_constraints_rates
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_playback_pro_close
r_static
r_int
id|snd_ice1712_playback_pro_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|PRO_RATE_RESET
)paren
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|PRO_RATE_DEFAULT
comma
l_int|0
)paren
suffix:semicolon
id|ice-&gt;playback_pro_substream
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.close
)paren
id|ice-&gt;spdif.ops
dot
id|close
c_func
(paren
id|ice
comma
id|substream
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_capture_pro_close
r_static
r_int
id|snd_ice1712_capture_pro_close
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_pcm_substream_chip
c_func
(paren
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|PRO_RATE_RESET
)paren
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|PRO_RATE_DEFAULT
comma
l_int|0
)paren
suffix:semicolon
id|ice-&gt;capture_pro_substream
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pcm_profi_free
r_static
r_void
id|snd_ice1712_pcm_profi_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|pcm-&gt;private_data
suffix:semicolon
id|ice-&gt;pcm_pro
op_assign
l_int|NULL
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|variable|snd_ice1712_playback_pro_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_playback_pro_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_ice1712_playback_pro_open
comma
dot
id|close
op_assign
id|snd_ice1712_playback_pro_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_ice1712_playback_pro_hw_params
comma
dot
id|hw_free
op_assign
id|snd_ice1712_hw_free
comma
dot
id|prepare
op_assign
id|snd_ice1712_playback_pro_prepare
comma
dot
id|trigger
op_assign
id|snd_ice1712_pro_trigger
comma
dot
id|pointer
op_assign
id|snd_ice1712_playback_pro_pointer
comma
)brace
suffix:semicolon
DECL|variable|snd_ice1712_capture_pro_ops
r_static
id|snd_pcm_ops_t
id|snd_ice1712_capture_pro_ops
op_assign
(brace
dot
id|open
op_assign
id|snd_ice1712_capture_pro_open
comma
dot
id|close
op_assign
id|snd_ice1712_capture_pro_close
comma
dot
id|ioctl
op_assign
id|snd_pcm_lib_ioctl
comma
dot
id|hw_params
op_assign
id|snd_ice1712_capture_pro_hw_params
comma
dot
id|hw_free
op_assign
id|snd_ice1712_hw_free
comma
dot
id|prepare
op_assign
id|snd_ice1712_capture_pro_prepare
comma
dot
id|trigger
op_assign
id|snd_ice1712_pro_trigger
comma
dot
id|pointer
op_assign
id|snd_ice1712_capture_pro_pointer
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pcm_profi
r_static
r_int
id|__devinit
id|snd_ice1712_pcm_profi
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|device
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|err
op_assign
id|snd_pcm_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ICE1712 multi&quot;
comma
id|device
comma
l_int|1
comma
l_int|1
comma
op_amp
id|pcm
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
op_amp
id|snd_ice1712_playback_pro_ops
)paren
suffix:semicolon
id|snd_pcm_set_ops
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
op_amp
id|snd_ice1712_capture_pro_ops
)paren
suffix:semicolon
id|pcm-&gt;private_data
op_assign
id|ice
suffix:semicolon
id|pcm-&gt;private_free
op_assign
id|snd_ice1712_pcm_profi_free
suffix:semicolon
id|pcm-&gt;info_flags
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|pcm-&gt;name
comma
l_string|&quot;ICE1712 multi&quot;
)paren
suffix:semicolon
id|snd_pcm_lib_preallocate_pages_for_all
c_func
(paren
id|pcm
comma
id|SNDRV_DMA_TYPE_DEV
comma
id|snd_dma_pci_data
c_func
(paren
id|ice-&gt;pci
)paren
comma
l_int|256
op_star
l_int|1024
comma
l_int|256
op_star
l_int|1024
)paren
suffix:semicolon
id|ice-&gt;pcm_pro
op_assign
id|pcm
suffix:semicolon
r_if
c_cond
(paren
id|rpcm
)paren
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
(brace
multiline_comment|/* assign channels to iec958 */
id|err
op_assign
id|snd_cs8427_iec958_build
c_func
(paren
id|ice-&gt;cs8427
comma
id|pcm-&gt;streams
(braket
l_int|0
)braket
dot
id|substream
comma
id|pcm-&gt;streams
(braket
l_int|1
)braket
dot
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  Mixer section&n; */
DECL|function|snd_ice1712_update_volume
r_static
r_void
id|snd_ice1712_update_volume
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|index
)paren
(brace
r_int
r_int
id|vol
op_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
r_int
r_int
id|val
op_assign
l_int|0
suffix:semicolon
id|val
op_or_assign
(paren
id|vol
op_amp
l_int|0x8000
)paren
op_eq
l_int|0
ques
c_cond
(paren
l_int|96
op_minus
(paren
id|vol
op_amp
l_int|0x7f
)paren
)paren
suffix:colon
l_int|0x7f
suffix:semicolon
id|val
op_or_assign
(paren
(paren
id|vol
op_amp
l_int|0x80000000
)paren
op_eq
l_int|0
ques
c_cond
(paren
l_int|96
op_minus
(paren
(paren
id|vol
op_rshift
l_int|16
)paren
op_amp
l_int|0x7f
)paren
)paren
suffix:colon
l_int|0x7f
)paren
op_lshift
l_int|8
suffix:semicolon
id|outb
c_func
(paren
id|index
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_INDEX
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_VOLUME
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_info
r_static
r_int
id|snd_ice1712_pro_mixer_switch_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_get
r_static
r_int
id|snd_ice1712_pro_mixer_switch_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|kcontrol-&gt;private_value
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
op_logical_neg
(paren
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|15
)paren
op_amp
l_int|1
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
op_logical_neg
(paren
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|31
)paren
op_amp
l_int|1
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_switch_put
r_static
r_int
id|snd_ice1712_pro_mixer_switch_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|nval
comma
id|change
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x00008000
)paren
op_or
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x80000000
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|nval
op_or_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_amp
op_complement
l_int|0x80008000
suffix:semicolon
id|change
op_assign
id|nval
op_ne
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_assign
id|nval
suffix:semicolon
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|index
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_info
r_static
r_int
id|snd_ice1712_pro_mixer_volume_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|96
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_get
r_static
r_int
id|snd_ice1712_pro_mixer_volume_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|kcontrol-&gt;private_value
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|0
)paren
op_amp
l_int|127
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|127
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_mixer_volume_put
r_static
r_int
id|snd_ice1712_pro_mixer_volume_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|index
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|kcontrol-&gt;private_value
suffix:semicolon
r_int
r_int
id|nval
comma
id|change
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|127
)paren
op_or
(paren
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
l_int|127
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|nval
op_or_assign
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_amp
op_complement
l_int|0x007f007f
suffix:semicolon
id|change
op_assign
id|nval
op_ne
id|ice-&gt;pro_volumes
(braket
id|index
)braket
suffix:semicolon
id|ice-&gt;pro_volumes
(braket
id|index
)braket
op_assign
id|nval
suffix:semicolon
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|index
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_multi_playback_ctrls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Playback Switch&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_switch_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_switch_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_switch_put
comma
dot
id|private_value
op_assign
l_int|0
comma
dot
id|count
op_assign
l_int|10
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Playback Volume&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_volume_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_volume_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_volume_put
comma
dot
id|private_value
op_assign
l_int|0
comma
dot
id|count
op_assign
l_int|10
comma
)brace
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_multi_capture_analog_switch
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;H/W Multi Capture Switch&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_switch_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_switch_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_switch_put
comma
dot
id|private_value
op_assign
l_int|10
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_multi_capture_spdif_switch
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;IEC958 Multi Capture Switch&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_switch_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_switch_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_switch_put
comma
dot
id|private_value
op_assign
l_int|18
comma
dot
id|count
op_assign
l_int|2
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_multi_capture_analog_volume
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;H/W Multi Capture Volume&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_volume_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_volume_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_volume_put
comma
dot
id|private_value
op_assign
l_int|10
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_multi_capture_spdif_volume
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;IEC958 Multi Capture Volume&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_mixer_volume_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_mixer_volume_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_mixer_volume_put
comma
dot
id|private_value
op_assign
l_int|18
comma
dot
id|count
op_assign
l_int|2
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_build_pro_mixer
r_static
r_int
id|__devinit
id|snd_ice1712_build_pro_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|ice-&gt;card
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
r_int
id|err
suffix:semicolon
multiline_comment|/* multi-channel mixer */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ARRAY_SIZE
c_func
(paren
id|snd_ice1712_multi_playback_ctrls
)paren
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_multi_playback_ctrls
(braket
id|idx
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;num_total_adcs
OG
l_int|0
)paren
(brace
id|snd_kcontrol_new_t
id|tmp
op_assign
id|snd_ice1712_multi_capture_analog_switch
suffix:semicolon
id|tmp.count
op_assign
id|ice-&gt;num_total_adcs
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|tmp
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_multi_capture_spdif_switch
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;num_total_adcs
OG
l_int|0
)paren
(brace
id|snd_kcontrol_new_t
id|tmp
op_assign
id|snd_ice1712_multi_capture_analog_volume
suffix:semicolon
id|tmp.count
op_assign
id|ice-&gt;num_total_adcs
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|tmp
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_multi_capture_spdif_volume
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* initialize volumes */
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|10
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|ice-&gt;pro_volumes
(braket
id|idx
)braket
op_assign
l_int|0x80008000
suffix:semicolon
multiline_comment|/* mute */
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|10
suffix:semicolon
id|idx
OL
l_int|10
op_plus
id|ice-&gt;num_total_adcs
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|ice-&gt;pro_volumes
(braket
id|idx
)braket
op_assign
l_int|0x80008000
suffix:semicolon
multiline_comment|/* mute */
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|idx
op_assign
l_int|18
suffix:semicolon
id|idx
OL
l_int|20
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|ice-&gt;pro_volumes
(braket
id|idx
)braket
op_assign
l_int|0x80008000
suffix:semicolon
multiline_comment|/* mute */
id|snd_ice1712_update_volume
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_mixer_free_ac97
r_static
r_void
id|snd_ice1712_mixer_free_ac97
c_func
(paren
id|ac97_t
op_star
id|ac97
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|ac97-&gt;private_data
suffix:semicolon
id|ice-&gt;ac97
op_assign
l_int|NULL
suffix:semicolon
)brace
DECL|function|snd_ice1712_ac97_mixer
r_static
r_int
id|__devinit
id|snd_ice1712_ac97_mixer
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|err
comma
id|bus_num
op_assign
l_int|0
suffix:semicolon
id|ac97_template_t
id|ac97
suffix:semicolon
id|ac97_bus_t
op_star
id|pbus
suffix:semicolon
r_static
id|ac97_bus_ops_t
id|con_ops
op_assign
(brace
dot
id|write
op_assign
id|snd_ice1712_ac97_write
comma
dot
id|read
op_assign
id|snd_ice1712_ac97_read
comma
)brace
suffix:semicolon
r_static
id|ac97_bus_ops_t
id|pro_ops
op_assign
(brace
dot
id|write
op_assign
id|snd_ice1712_pro_ac97_write
comma
dot
id|read
op_assign
id|snd_ice1712_pro_ac97_read
comma
)brace
suffix:semicolon
r_if
c_cond
(paren
id|ice_has_con_ac97
c_func
(paren
id|ice
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_bus
c_func
(paren
id|ice-&gt;card
comma
id|bus_num
op_increment
comma
op_amp
id|con_ops
comma
l_int|NULL
comma
op_amp
id|pbus
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ac97
comma
l_int|0
comma
r_sizeof
(paren
id|ac97
)paren
)paren
suffix:semicolon
id|ac97.private_data
op_assign
id|ice
suffix:semicolon
id|ac97.private_free
op_assign
id|snd_ice1712_mixer_free_ac97
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_mixer
c_func
(paren
id|pbus
comma
op_amp
id|ac97
comma
op_amp
id|ice-&gt;ac97
)paren
)paren
OL
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;ice1712: cannot initialize ac97 for consumer, skipped&bslash;n&quot;
)paren
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_digmix_route_ac97
comma
id|ice
)paren
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_ACLINK
)braket
op_amp
id|ICE1712_CFG_PRO_I2S
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_bus
c_func
(paren
id|ice-&gt;card
comma
id|bus_num
comma
op_amp
id|pro_ops
comma
l_int|NULL
comma
op_amp
id|pbus
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ac97
comma
l_int|0
comma
r_sizeof
(paren
id|ac97
)paren
)paren
suffix:semicolon
id|ac97.private_data
op_assign
id|ice
suffix:semicolon
id|ac97.private_free
op_assign
id|snd_ice1712_mixer_free_ac97
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ac97_mixer
c_func
(paren
id|pbus
comma
op_amp
id|ac97
comma
op_amp
id|ice-&gt;ac97
)paren
)paren
OL
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;ice1712: cannot initialize pro ac97, skipped&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* I2S mixer only */
id|strcat
c_func
(paren
id|ice-&gt;card-&gt;mixername
comma
l_string|&quot;ICE1712 - multitrack&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; */
DECL|function|eeprom_double
r_static
r_inline
r_int
r_int
id|eeprom_double
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|idx
)paren
(brace
r_return
(paren
r_int
r_int
)paren
id|ice-&gt;eeprom.data
(braket
id|idx
)braket
op_or
(paren
(paren
r_int
r_int
)paren
id|ice-&gt;eeprom.data
(braket
id|idx
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_proc_read
r_static
r_void
id|snd_ice1712_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|entry-&gt;private_data
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%s&bslash;n&bslash;n&quot;
comma
id|ice-&gt;card-&gt;longname
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;EEPROM:&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Subvendor        : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.subvendor
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Size             : %i bytes&bslash;n&quot;
comma
id|ice-&gt;eeprom.size
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Version          : %i&bslash;n&quot;
comma
id|ice-&gt;eeprom.version
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Codec            : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  ACLink           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_ACLINK
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  I2S ID           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_I2SID
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  S/PDIF           : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_SPDIF
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO mask        : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiomask
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO state       : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiostate
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  GPIO direction   : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.gpiodir
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 main       : 0x%x&bslash;n&quot;
comma
id|eeprom_double
c_func
(paren
id|ice
comma
id|ICE_EEP1_AC97_MAIN_LO
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 pcm        : 0x%x&bslash;n&quot;
comma
id|eeprom_double
c_func
(paren
id|ice
comma
id|ICE_EEP1_AC97_PCM_LO
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 record     : 0x%x&bslash;n&quot;
comma
id|eeprom_double
c_func
(paren
id|ice
comma
id|ICE_EEP1_AC97_REC_LO
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  AC&squot;97 record src : 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_AC97_RECSRC
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|4
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  DAC ID #%i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_DAC_ID
op_plus
id|idx
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|4
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  ADC ID #%i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_ADC_ID
op_plus
id|idx
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0x1c
suffix:semicolon
id|idx
OL
id|ice-&gt;eeprom.size
suffix:semicolon
id|idx
op_increment
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  Extra #%02i        : 0x%x&bslash;n&quot;
comma
id|idx
comma
id|ice-&gt;eeprom.data
(braket
id|idx
)braket
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;nRegisters:&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  PSDOUT03         : 0x%04x&bslash;n&quot;
comma
(paren
r_int
)paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  CAPTURE          : 0x%08x&bslash;n&quot;
comma
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  SPDOUT           : 0x%04x&bslash;n&quot;
comma
(paren
r_int
)paren
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;  RATE             : 0x%02x&bslash;n&quot;
comma
(paren
r_int
)paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_proc_init
r_static
r_void
id|__devinit
id|snd_ice1712_proc_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_card_proc_new
c_func
(paren
id|ice-&gt;card
comma
l_string|&quot;ice1712&quot;
comma
op_amp
id|entry
)paren
)paren
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|ice
comma
l_int|1024
comma
id|snd_ice1712_proc_read
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_ice1712_eeprom_info
r_static
r_int
id|snd_ice1712_eeprom_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BYTES
suffix:semicolon
id|uinfo-&gt;count
op_assign
r_sizeof
(paren
id|ice1712_eeprom_t
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_eeprom_get
r_static
r_int
id|snd_ice1712_eeprom_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|ucontrol-&gt;value.bytes.data
comma
op_amp
id|ice-&gt;eeprom
comma
r_sizeof
(paren
id|ice-&gt;eeprom
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_eeprom
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_CARD
comma
dot
id|name
op_assign
l_string|&quot;ICE1712 EEPROM&quot;
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|info
op_assign
id|snd_ice1712_eeprom_info
comma
dot
id|get
op_assign
id|snd_ice1712_eeprom_get
)brace
suffix:semicolon
multiline_comment|/*&n; */
DECL|function|snd_ice1712_spdif_info
r_static
r_int
id|snd_ice1712_spdif_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_default_get
r_static
r_int
id|snd_ice1712_spdif_default_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.default_get
)paren
id|ice-&gt;spdif.ops
dot
id|default_get
c_func
(paren
id|ice
comma
id|ucontrol
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_default_put
r_static
r_int
id|snd_ice1712_spdif_default_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.default_put
)paren
r_return
id|ice-&gt;spdif.ops
dot
id|default_put
c_func
(paren
id|ice
comma
id|ucontrol
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_default
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|DEFAULT
)paren
comma
dot
id|info
op_assign
id|snd_ice1712_spdif_info
comma
dot
id|get
op_assign
id|snd_ice1712_spdif_default_get
comma
dot
id|put
op_assign
id|snd_ice1712_spdif_default_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_spdif_maskc_get
r_static
r_int
id|snd_ice1712_spdif_maskc_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.default_get
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_CON_NOT_COPYRIGHT
op_or
id|IEC958_AES0_CON_EMPHASIS
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_CON_ORIGINAL
op_or
id|IEC958_AES1_CON_CATEGORY
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
id|IEC958_AES3_CON_FS
suffix:semicolon
)brace
r_else
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|4
)braket
op_assign
l_int|0xff
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_maskp_get
r_static
r_int
id|snd_ice1712_spdif_maskp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.default_get
)paren
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
id|IEC958_AES0_NONAUDIO
op_or
id|IEC958_AES0_PROFESSIONAL
op_or
id|IEC958_AES0_PRO_FS
op_or
id|IEC958_AES0_PRO_EMPHASIS
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
id|IEC958_AES1_PRO_MODE
suffix:semicolon
)brace
r_else
(brace
id|ucontrol-&gt;value.iec958.status
(braket
l_int|0
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|1
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|3
)braket
op_assign
l_int|0xff
suffix:semicolon
id|ucontrol-&gt;value.iec958.status
(braket
l_int|4
)braket
op_assign
l_int|0xff
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_maskc
id|__devinitdata
op_assign
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|CON_MASK
)paren
comma
dot
id|info
op_assign
id|snd_ice1712_spdif_info
comma
dot
id|get
op_assign
id|snd_ice1712_spdif_maskc_get
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_maskp
id|__devinitdata
op_assign
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PRO_MASK
)paren
comma
dot
id|info
op_assign
id|snd_ice1712_spdif_info
comma
dot
id|get
op_assign
id|snd_ice1712_spdif_maskp_get
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_spdif_stream_get
r_static
r_int
id|snd_ice1712_spdif_stream_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.stream_get
)paren
id|ice-&gt;spdif.ops
dot
id|stream_get
c_func
(paren
id|ice
comma
id|ucontrol
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_stream_put
r_static
r_int
id|snd_ice1712_spdif_stream_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;spdif.ops.stream_put
)paren
r_return
id|ice-&gt;spdif.ops
dot
id|stream_put
c_func
(paren
id|ice
comma
id|ucontrol
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_spdif_stream
id|__devinitdata
op_assign
(brace
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
op_or
id|SNDRV_CTL_ELEM_ACCESS_INACTIVE
comma
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|PLAYBACK
comma
id|PCM_STREAM
)paren
comma
dot
id|info
op_assign
id|snd_ice1712_spdif_info
comma
dot
id|get
op_assign
id|snd_ice1712_spdif_stream_get
comma
dot
id|put
op_assign
id|snd_ice1712_spdif_stream_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_gpio_info
r_int
id|snd_ice1712_gpio_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_gpio_get
r_int
id|snd_ice1712_gpio_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|24
)paren
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
op_amp
id|mask
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
op_xor
id|invert
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_gpio_put
r_int
id|snd_ice1712_gpio_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_int
id|invert
op_assign
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|24
)paren
)paren
ques
c_cond
id|mask
suffix:colon
l_int|0
suffix:semicolon
r_int
r_int
id|val
comma
id|nval
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
op_amp
(paren
l_int|1
op_lshift
l_int|31
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
id|nval
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
id|mask
suffix:colon
l_int|0
)paren
op_xor
id|invert
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|val
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
id|nval
op_or_assign
id|val
op_amp
op_complement
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|val
op_ne
id|nval
)paren
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|nval
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|val
op_ne
id|nval
suffix:semicolon
)brace
multiline_comment|/*&n; *  rate&n; */
DECL|function|snd_ice1712_pro_internal_clock_info
r_static
r_int
id|snd_ice1712_pro_internal_clock_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;8000&quot;
comma
multiline_comment|/* 0: 6 */
l_string|&quot;9600&quot;
comma
multiline_comment|/* 1: 3 */
l_string|&quot;11025&quot;
comma
multiline_comment|/* 2: 10 */
l_string|&quot;12000&quot;
comma
multiline_comment|/* 3: 2 */
l_string|&quot;16000&quot;
comma
multiline_comment|/* 4: 5 */
l_string|&quot;22050&quot;
comma
multiline_comment|/* 5: 9 */
l_string|&quot;24000&quot;
comma
multiline_comment|/* 6: 1 */
l_string|&quot;32000&quot;
comma
multiline_comment|/* 7: 4 */
l_string|&quot;44100&quot;
comma
multiline_comment|/* 8: 8 */
l_string|&quot;48000&quot;
comma
multiline_comment|/* 9: 0 */
l_string|&quot;64000&quot;
comma
multiline_comment|/* 10: 15 */
l_string|&quot;88200&quot;
comma
multiline_comment|/* 11: 11 */
l_string|&quot;96000&quot;
comma
multiline_comment|/* 12: 7 */
l_string|&quot;IEC958 Input&quot;
comma
multiline_comment|/* 13: -- */
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|14
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_internal_clock_get
r_static
r_int
id|snd_ice1712_pro_internal_clock_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_static
r_int
r_char
id|xlate
(braket
l_int|16
)braket
op_assign
(brace
l_int|9
comma
l_int|6
comma
l_int|3
comma
l_int|1
comma
l_int|7
comma
l_int|4
comma
l_int|0
comma
l_int|12
comma
l_int|8
comma
l_int|5
comma
l_int|2
comma
l_int|11
comma
l_int|255
comma
l_int|255
comma
l_int|255
comma
l_int|10
)brace
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|is_spdif_master
c_func
(paren
id|ice
)paren
)paren
(brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|13
suffix:semicolon
)brace
r_else
(brace
id|val
op_assign
id|xlate
(braket
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
l_int|15
)braket
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|255
)paren
(brace
id|snd_BUG
c_func
(paren
)paren
suffix:semicolon
id|val
op_assign
l_int|0
suffix:semicolon
)brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_internal_clock_put
r_static
r_int
id|snd_ice1712_pro_internal_clock_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_static
r_int
r_int
id|xrate
(braket
l_int|13
)braket
op_assign
(brace
l_int|8000
comma
l_int|9600
comma
l_int|11025
comma
l_int|12000
comma
l_int|1600
comma
l_int|22050
comma
l_int|24000
comma
l_int|32000
comma
l_int|44100
comma
l_int|48000
comma
l_int|64000
comma
l_int|88200
comma
l_int|96000
)brace
suffix:semicolon
r_int
r_char
id|oval
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|oval
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_eq
l_int|13
)paren
(brace
id|outb
c_func
(paren
id|oval
op_or
id|ICE1712_SPDIF_MASTER
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|PRO_RATE_DEFAULT
op_assign
id|xrate
(braket
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_mod
l_int|13
)braket
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|snd_ice1712_set_pro_rate
c_func
(paren
id|ice
comma
id|PRO_RATE_DEFAULT
comma
l_int|1
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
)brace
id|change
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_ne
id|oval
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|oval
op_amp
id|ICE1712_SPDIF_MASTER
)paren
op_ne
(paren
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|RATE
)paren
)paren
op_amp
id|ICE1712_SPDIF_MASTER
)paren
)paren
(brace
multiline_comment|/* change CS8427 clock source too */
r_if
c_cond
(paren
id|ice-&gt;cs8427
)paren
(brace
id|snd_ice1712_cs8427_set_input_clock
c_func
(paren
id|ice
comma
id|is_spdif_master
c_func
(paren
id|ice
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* notify ak4524 chip as well */
r_if
c_cond
(paren
id|is_spdif_master
c_func
(paren
id|ice
)paren
)paren
(brace
r_int
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ice-&gt;akm_codecs
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ice-&gt;akm
(braket
id|i
)braket
dot
id|ops.set_rate_val
)paren
id|ice-&gt;akm
(braket
id|i
)braket
dot
id|ops
dot
id|set_rate_val
c_func
(paren
op_amp
id|ice-&gt;akm
(braket
id|i
)braket
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_pro_internal_clock
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Internal Clock&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_internal_clock_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_internal_clock_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_internal_clock_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_internal_clock_default_info
r_static
r_int
id|snd_ice1712_pro_internal_clock_default_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;8000&quot;
comma
multiline_comment|/* 0: 6 */
l_string|&quot;9600&quot;
comma
multiline_comment|/* 1: 3 */
l_string|&quot;11025&quot;
comma
multiline_comment|/* 2: 10 */
l_string|&quot;12000&quot;
comma
multiline_comment|/* 3: 2 */
l_string|&quot;16000&quot;
comma
multiline_comment|/* 4: 5 */
l_string|&quot;22050&quot;
comma
multiline_comment|/* 5: 9 */
l_string|&quot;24000&quot;
comma
multiline_comment|/* 6: 1 */
l_string|&quot;32000&quot;
comma
multiline_comment|/* 7: 4 */
l_string|&quot;44100&quot;
comma
multiline_comment|/* 8: 8 */
l_string|&quot;48000&quot;
comma
multiline_comment|/* 9: 0 */
l_string|&quot;64000&quot;
comma
multiline_comment|/* 10: 15 */
l_string|&quot;88200&quot;
comma
multiline_comment|/* 11: 11 */
l_string|&quot;96000&quot;
comma
multiline_comment|/* 12: 7 */
singleline_comment|// &quot;IEC958 Input&quot;,&t;/* 13: -- */
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|13
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_internal_clock_default_get
r_static
r_int
id|snd_ice1712_pro_internal_clock_default_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
id|val
suffix:semicolon
r_static
r_int
r_int
id|xrate
(braket
l_int|13
)braket
op_assign
(brace
l_int|8000
comma
l_int|9600
comma
l_int|11025
comma
l_int|12000
comma
l_int|1600
comma
l_int|22050
comma
l_int|24000
comma
l_int|32000
comma
l_int|44100
comma
l_int|48000
comma
l_int|64000
comma
l_int|88200
comma
l_int|96000
)brace
suffix:semicolon
r_for
c_loop
(paren
id|val
op_assign
l_int|0
suffix:semicolon
id|val
OL
l_int|13
suffix:semicolon
id|val
op_increment
)paren
(brace
r_if
c_cond
(paren
id|xrate
(braket
id|val
)braket
op_eq
id|PRO_RATE_DEFAULT
)paren
r_break
suffix:semicolon
)brace
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_internal_clock_default_put
r_static
r_int
id|snd_ice1712_pro_internal_clock_default_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_static
r_int
r_int
id|xrate
(braket
l_int|13
)braket
op_assign
(brace
l_int|8000
comma
l_int|9600
comma
l_int|11025
comma
l_int|12000
comma
l_int|1600
comma
l_int|22050
comma
l_int|24000
comma
l_int|32000
comma
l_int|44100
comma
l_int|48000
comma
l_int|64000
comma
l_int|88200
comma
l_int|96000
)brace
suffix:semicolon
r_int
r_char
id|oval
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|oval
op_assign
id|PRO_RATE_DEFAULT
suffix:semicolon
id|PRO_RATE_DEFAULT
op_assign
id|xrate
(braket
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_mod
l_int|13
)braket
suffix:semicolon
id|change
op_assign
id|PRO_RATE_DEFAULT
op_ne
id|oval
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_pro_internal_clock_default
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Internal Clock Default&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_internal_clock_default_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_internal_clock_default_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_internal_clock_default_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_rate_locking_info
r_static
r_int
id|snd_ice1712_pro_rate_locking_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_rate_locking_get
r_static
r_int
id|snd_ice1712_pro_rate_locking_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|PRO_RATE_LOCKED
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_rate_locking_put
r_static
r_int
id|snd_ice1712_pro_rate_locking_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
op_assign
l_int|0
comma
id|nval
suffix:semicolon
id|nval
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|change
op_assign
id|PRO_RATE_LOCKED
op_ne
id|nval
suffix:semicolon
id|PRO_RATE_LOCKED
op_assign
id|nval
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_pro_rate_locking
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Rate Locking&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_rate_locking_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_rate_locking_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_rate_locking_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_rate_reset_info
r_static
r_int
id|snd_ice1712_pro_rate_reset_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_rate_reset_get
r_static
r_int
id|snd_ice1712_pro_rate_reset_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|PRO_RATE_RESET
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_rate_reset_put
r_static
r_int
id|snd_ice1712_pro_rate_reset_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
op_assign
l_int|0
comma
id|nval
suffix:semicolon
id|nval
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|change
op_assign
id|PRO_RATE_RESET
op_ne
id|nval
suffix:semicolon
id|PRO_RATE_RESET
op_assign
id|nval
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_pro_rate_reset
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Rate Reset&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_rate_reset_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_rate_reset_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_rate_reset_put
)brace
suffix:semicolon
multiline_comment|/*&n; * routing&n; */
DECL|function|snd_ice1712_pro_route_info
r_static
r_int
id|snd_ice1712_pro_route_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;PCM Out&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;H/W In 0&quot;
comma
l_string|&quot;H/W In 1&quot;
comma
l_string|&quot;H/W In 2&quot;
comma
l_string|&quot;H/W In 3&quot;
comma
multiline_comment|/* 1-4 */
l_string|&quot;H/W In 4&quot;
comma
l_string|&quot;H/W In 5&quot;
comma
l_string|&quot;H/W In 6&quot;
comma
l_string|&quot;H/W In 7&quot;
comma
multiline_comment|/* 5-8 */
l_string|&quot;IEC958 In L&quot;
comma
l_string|&quot;IEC958 In R&quot;
comma
multiline_comment|/* 9-10 */
l_string|&quot;Digital Mixer&quot;
comma
multiline_comment|/* 11 - optional */
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|uinfo-&gt;id
)paren
OL
l_int|2
ques
c_cond
l_int|12
suffix:colon
l_int|11
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_analog_get
r_static
r_int
id|snd_ice1712_pro_route_analog_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
suffix:semicolon
r_int
r_int
id|val
comma
id|cval
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
id|cval
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_rshift_assign
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|2
)paren
suffix:semicolon
id|val
op_and_assign
l_int|3
suffix:semicolon
id|cval
op_rshift_assign
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|1
op_logical_and
id|idx
OL
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|11
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|cval
op_amp
l_int|7
)paren
op_plus
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|3
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|cval
op_rshift
l_int|3
)paren
op_amp
l_int|1
)paren
op_plus
l_int|9
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_analog_put
r_static
r_int
id|snd_ice1712_pro_route_analog_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
comma
id|shift
suffix:semicolon
r_int
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
suffix:semicolon
r_int
r_int
id|val
comma
id|old_val
comma
id|nval
suffix:semicolon
multiline_comment|/* update PSDOUT */
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|11
)paren
id|nval
op_assign
id|idx
OL
l_int|2
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
multiline_comment|/* dig mixer (or pcm) */
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|9
)paren
id|nval
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* spdif in */
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|1
)paren
id|nval
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* analog in */
r_else
id|nval
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* pcm */
id|shift
op_assign
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|2
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_assign
id|old_val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x03
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
id|change
op_assign
id|val
op_ne
id|old_val
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_PSDOUT03
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nval
OL
l_int|2
)paren
multiline_comment|/* dig mixer of pcm */
r_return
id|change
suffix:semicolon
multiline_comment|/* update CAPTURE */
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_assign
id|old_val
op_assign
id|inl
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
id|shift
op_assign
(paren
(paren
id|idx
op_div
l_int|2
)paren
op_star
l_int|8
)paren
op_plus
(paren
(paren
id|idx
op_mod
l_int|2
)paren
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nval
op_eq
l_int|2
)paren
(brace
multiline_comment|/* analog in */
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x07
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* spdif in */
id|nval
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|9
)paren
op_lshift
l_int|3
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x08
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_ne
id|old_val
)paren
(brace
id|change
op_assign
l_int|1
suffix:semicolon
id|outl
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_CAPTURE
)paren
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_spdif_get
r_static
r_int
id|snd_ice1712_pro_route_spdif_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
suffix:semicolon
r_int
r_int
id|val
comma
id|cval
suffix:semicolon
id|val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
id|cval
op_assign
(paren
id|val
op_rshift
(paren
id|idx
op_star
l_int|4
op_plus
l_int|8
)paren
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|val
op_assign
(paren
id|val
op_rshift
(paren
id|idx
op_star
l_int|2
)paren
)paren
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|1
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|11
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|2
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|cval
op_amp
l_int|7
)paren
op_plus
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|val
op_eq
l_int|3
)paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|cval
op_rshift
l_int|3
)paren
op_amp
l_int|1
)paren
op_plus
l_int|9
suffix:semicolon
r_else
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_route_spdif_put
r_static
r_int
id|snd_ice1712_pro_route_spdif_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
comma
id|shift
suffix:semicolon
r_int
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
suffix:semicolon
r_int
r_int
id|val
comma
id|old_val
comma
id|nval
suffix:semicolon
multiline_comment|/* update SPDOUT */
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|val
op_assign
id|old_val
op_assign
id|inw
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|11
)paren
id|nval
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|9
)paren
id|nval
op_assign
l_int|3
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_ge
l_int|1
)paren
id|nval
op_assign
l_int|2
suffix:semicolon
r_else
id|nval
op_assign
l_int|0
suffix:semicolon
id|shift
op_assign
id|idx
op_star
l_int|2
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x03
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
id|shift
op_assign
id|idx
op_star
l_int|4
op_plus
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|nval
op_eq
l_int|2
)paren
(brace
id|nval
op_assign
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|1
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x07
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|nval
op_eq
l_int|3
)paren
(brace
id|nval
op_assign
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_minus
l_int|9
)paren
op_lshift
l_int|3
suffix:semicolon
id|val
op_and_assign
op_complement
(paren
l_int|0x08
op_lshift
id|shift
)paren
suffix:semicolon
id|val
op_or_assign
id|nval
op_lshift
id|shift
suffix:semicolon
)brace
id|change
op_assign
id|val
op_ne
id|old_val
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|outw
c_func
(paren
id|val
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|ROUTE_SPDOUT
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_analog_route
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;H/W Playback Route&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_route_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_route_analog_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_route_analog_put
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_spdif_route
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;IEC958 Playback Route&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_route_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_route_spdif_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_route_spdif_put
comma
dot
id|count
op_assign
l_int|2
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_volume_rate_info
r_static
r_int
id|snd_ice1712_pro_volume_rate_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|255
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_volume_rate_get
r_static
r_int
id|snd_ice1712_pro_volume_rate_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_volume_rate_put
r_static
r_int
id|snd_ice1712_pro_volume_rate_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|change
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
op_ne
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|outb
c_func
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_RATE
)paren
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_volume_rate
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Volume Rate&quot;
comma
dot
id|info
op_assign
id|snd_ice1712_pro_volume_rate_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_volume_rate_get
comma
dot
id|put
op_assign
id|snd_ice1712_pro_volume_rate_put
)brace
suffix:semicolon
DECL|function|snd_ice1712_pro_peak_info
r_static
r_int
id|snd_ice1712_pro_peak_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|22
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|255
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_pro_peak_get
r_static
r_int
id|snd_ice1712_pro_peak_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|22
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|outb
c_func
(paren
id|idx
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_PEAKINDEX
)paren
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|idx
)braket
op_assign
id|inb
c_func
(paren
id|ICEMT
c_func
(paren
id|ice
comma
id|MONITOR_PEAKDATA
)paren
)paren
suffix:semicolon
)brace
id|spin_unlock_irq
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|snd_ice1712_mixer_pro_peak
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Multi Track Peak&quot;
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
dot
id|info
op_assign
id|snd_ice1712_pro_peak_info
comma
dot
id|get
op_assign
id|snd_ice1712_pro_peak_get
)brace
suffix:semicolon
multiline_comment|/*&n; *&n; */
multiline_comment|/*&n; * list of available boards&n; */
DECL|variable|__devinitdata
r_static
r_struct
id|snd_ice1712_card_info
op_star
id|card_tables
(braket
)braket
id|__devinitdata
op_assign
(brace
id|snd_ice1712_hoontech_cards
comma
id|snd_ice1712_delta_cards
comma
id|snd_ice1712_ews_cards
comma
l_int|NULL
comma
)brace
suffix:semicolon
DECL|function|snd_ice1712_read_i2c
r_static
r_int
r_char
id|__devinit
id|snd_ice1712_read_i2c
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_char
id|dev
comma
r_int
r_char
id|addr
)paren
(brace
r_int
id|t
op_assign
l_int|0x10000
suffix:semicolon
id|outb
c_func
(paren
id|addr
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_BYTE_ADDR
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|dev
op_amp
op_complement
id|ICE1712_I2C_WRITE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_DEV_ADDR
)paren
)paren
suffix:semicolon
r_while
c_loop
(paren
id|t
op_decrement
OG
l_int|0
op_logical_and
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_CTRL
)paren
)paren
op_amp
id|ICE1712_I2C_BUSY
)paren
)paren
suffix:semicolon
r_return
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_DATA
)paren
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_read_eeprom
r_static
r_int
id|__devinit
id|snd_ice1712_read_eeprom
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_const
r_char
op_star
id|modelname
)paren
(brace
r_int
id|dev
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EEPROM device address */
r_int
r_int
id|i
comma
id|size
suffix:semicolon
r_struct
id|snd_ice1712_card_info
op_star
op_star
id|tbl
comma
op_star
id|c
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|modelname
op_logical_or
op_logical_neg
op_star
id|modelname
)paren
(brace
id|ice-&gt;eeprom.subvendor
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|inb
c_func
(paren
id|ICEREG
c_func
(paren
id|ice
comma
id|I2C_CTRL
)paren
)paren
op_amp
id|ICE1712_I2C_EEPROM
)paren
op_ne
l_int|0
)paren
id|ice-&gt;eeprom.subvendor
op_assign
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x00
)paren
op_lshift
l_int|0
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x01
)paren
op_lshift
l_int|8
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x02
)paren
op_lshift
l_int|16
)paren
op_or
(paren
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x03
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
l_int|0
op_logical_or
id|ice-&gt;eeprom.subvendor
op_eq
(paren
r_int
r_int
)paren
op_minus
l_int|1
)paren
(brace
multiline_comment|/* invalid subvendor from EEPROM, try the PCI subststem ID instead */
id|u16
id|vendor
comma
id|device
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|ice-&gt;pci
comma
id|PCI_SUBSYSTEM_VENDOR_ID
comma
op_amp
id|vendor
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|ice-&gt;pci
comma
id|PCI_SUBSYSTEM_ID
comma
op_amp
id|device
)paren
suffix:semicolon
id|ice-&gt;eeprom.subvendor
op_assign
(paren
(paren
r_int
r_int
)paren
id|swab16
c_func
(paren
id|vendor
)paren
op_lshift
l_int|16
)paren
op_or
id|swab16
c_func
(paren
id|device
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
l_int|0
op_logical_or
id|ice-&gt;eeprom.subvendor
op_eq
(paren
r_int
r_int
)paren
op_minus
l_int|1
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;ice1712: No valid ID is found&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
)brace
)brace
r_for
c_loop
(paren
id|tbl
op_assign
id|card_tables
suffix:semicolon
op_star
id|tbl
suffix:semicolon
id|tbl
op_increment
)paren
(brace
r_for
c_loop
(paren
id|c
op_assign
op_star
id|tbl
suffix:semicolon
id|c-&gt;subvendor
suffix:semicolon
id|c
op_increment
)paren
(brace
r_if
c_cond
(paren
id|modelname
op_logical_and
id|c-&gt;model
op_logical_and
op_logical_neg
id|strcmp
c_func
(paren
id|modelname
comma
id|c-&gt;model
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;ice1712: Using board model %s&bslash;n&quot;
comma
id|c-&gt;name
)paren
suffix:semicolon
id|ice-&gt;eeprom.subvendor
op_assign
id|c-&gt;subvendor
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|c-&gt;subvendor
op_ne
id|ice-&gt;eeprom.subvendor
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|c-&gt;eeprom_size
op_logical_or
op_logical_neg
id|c-&gt;eeprom_data
)paren
r_goto
id|found
suffix:semicolon
multiline_comment|/* if the EEPROM is given by the driver, use it */
id|snd_printdd
c_func
(paren
l_string|&quot;using the defined eeprom..&bslash;n&quot;
)paren
suffix:semicolon
id|ice-&gt;eeprom.version
op_assign
l_int|1
suffix:semicolon
id|ice-&gt;eeprom.size
op_assign
id|c-&gt;eeprom_size
op_plus
l_int|6
suffix:semicolon
id|memcpy
c_func
(paren
id|ice-&gt;eeprom.data
comma
id|c-&gt;eeprom_data
comma
id|c-&gt;eeprom_size
)paren
suffix:semicolon
r_goto
id|read_skipped
suffix:semicolon
)brace
)brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;ice1712: No matching model found for ID 0x%x&bslash;n&quot;
comma
id|ice-&gt;eeprom.subvendor
)paren
suffix:semicolon
id|found
suffix:colon
id|ice-&gt;eeprom.size
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.size
OL
l_int|6
)paren
id|ice-&gt;eeprom.size
op_assign
l_int|32
suffix:semicolon
multiline_comment|/* FIXME: any cards without the correct size? */
r_else
r_if
c_cond
(paren
id|ice-&gt;eeprom.size
OG
l_int|32
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;invalid EEPROM (size = %i)&bslash;n&quot;
comma
id|ice-&gt;eeprom.size
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;eeprom.version
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
l_int|0x05
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.version
op_ne
l_int|1
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;invalid EEPROM version %i&bslash;n&quot;
comma
id|ice-&gt;eeprom.version
)paren
suffix:semicolon
multiline_comment|/* return -EIO; */
)brace
id|size
op_assign
id|ice-&gt;eeprom.size
op_minus
l_int|6
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|size
suffix:semicolon
id|i
op_increment
)paren
id|ice-&gt;eeprom.data
(braket
id|i
)braket
op_assign
id|snd_ice1712_read_i2c
c_func
(paren
id|ice
comma
id|dev
comma
id|i
op_plus
l_int|6
)paren
suffix:semicolon
id|read_skipped
suffix:colon
id|ice-&gt;eeprom.gpiomask
op_assign
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_GPIO_MASK
)braket
suffix:semicolon
id|ice-&gt;eeprom.gpiostate
op_assign
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_GPIO_STATE
)braket
suffix:semicolon
id|ice-&gt;eeprom.gpiodir
op_assign
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_GPIO_DIR
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_chip_init
r_static
r_int
id|__devinit
id|snd_ice1712_chip_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
id|outb
c_func
(paren
id|ICE1712_RESET
op_or
id|ICE1712_NATIVE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONTROL
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|outb
c_func
(paren
id|ICE1712_NATIVE
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|CONTROL
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x60
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x61
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_ACLINK
)braket
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x62
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_I2SID
)braket
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x63
comma
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_SPDIF
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_ne
id|ICE1712_SUBDEVICE_STDSP24
)paren
(brace
id|ice-&gt;gpio.write_mask
op_assign
id|ice-&gt;eeprom.gpiomask
suffix:semicolon
id|ice-&gt;gpio.direction
op_assign
id|ice-&gt;eeprom.gpiodir
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
id|ice-&gt;eeprom.gpiomask
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
id|ice-&gt;eeprom.gpiodir
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|ice-&gt;eeprom.gpiostate
)paren
suffix:semicolon
)brace
r_else
(brace
id|ice-&gt;gpio.write_mask
op_assign
l_int|0xc0
suffix:semicolon
id|ice-&gt;gpio.direction
op_assign
l_int|0xff
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_WRITE_MASK
comma
l_int|0xc0
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DIRECTION
comma
l_int|0xff
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_GPIO_DATA
comma
id|ICE1712_STDSP24_CLOCK_BIT
)paren
suffix:semicolon
)brace
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_PRO_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
)paren
(brace
id|outb
c_func
(paren
id|ICE1712_AC97_WARM
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|100
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|AC97_CMD
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|snd_ice1712_write
c_func
(paren
id|ice
comma
id|ICE1712_IREG_CONSUMER_POWERDOWN
comma
l_int|0
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_spdif_build_controls
r_int
id|__devinit
id|snd_ice1712_spdif_build_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|err
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_assert
c_func
(paren
id|ice-&gt;pcm_pro
op_ne
l_int|NULL
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_default
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_maskc
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_maskp
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_spdif_stream
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm_pro-&gt;device
suffix:semicolon
id|ice-&gt;spdif.stream_ctl
op_assign
id|kctl
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_build_controls
r_static
r_int
id|__devinit
id|snd_ice1712_build_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_eeprom
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_pro_internal_clock
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_pro_internal_clock_default
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_pro_rate_locking
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_pro_rate_reset
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;num_total_dacs
OG
l_int|0
)paren
(brace
id|snd_kcontrol_new_t
id|tmp
op_assign
id|snd_ice1712_mixer_pro_analog_route
suffix:semicolon
id|tmp.count
op_assign
id|ice-&gt;num_total_dacs
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|tmp
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_spdif_route
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_volume_rate
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|snd_ice1712_mixer_pro_peak
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_free
r_static
r_int
id|snd_ice1712_free
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|ice-&gt;port
)paren
r_goto
id|__hw_end
suffix:semicolon
multiline_comment|/* mask all interrupts */
id|outb
c_func
(paren
l_int|0xc0
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0xff
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQMASK
)paren
)paren
suffix:semicolon
multiline_comment|/* --- */
id|__hw_end
suffix:colon
r_if
c_cond
(paren
id|ice-&gt;irq
op_ge
l_int|0
)paren
(brace
id|synchronize_irq
c_func
(paren
id|ice-&gt;irq
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|ice-&gt;irq
comma
(paren
r_void
op_star
)paren
id|ice
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;port
)paren
id|pci_release_regions
c_func
(paren
id|ice-&gt;pci
)paren
suffix:semicolon
id|snd_ice1712_akm4xxx_free
c_func
(paren
id|ice
)paren
suffix:semicolon
id|pci_disable_device
c_func
(paren
id|ice-&gt;pci
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_dev_free
r_static
r_int
id|snd_ice1712_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|device-&gt;device_data
suffix:semicolon
r_return
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
)brace
DECL|function|snd_ice1712_create
r_static
r_int
id|__devinit
id|snd_ice1712_create
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_struct
id|pci_dev
op_star
id|pci
comma
r_const
r_char
op_star
id|modelname
comma
r_int
id|omni
comma
r_int
id|cs8427_timeout
comma
id|ice1712_t
op_star
op_star
id|r_ice1712
)paren
(brace
id|ice1712_t
op_star
id|ice
suffix:semicolon
r_int
id|err
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
dot
id|dev_free
op_assign
id|snd_ice1712_dev_free
comma
)brace
suffix:semicolon
op_star
id|r_ice1712
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/* enable PCI device */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pci
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* check, if we can restrict PCI DMA transfers to 28 bits */
r_if
c_cond
(paren
id|pci_set_dma_mask
c_func
(paren
id|pci
comma
l_int|0x0fffffff
)paren
OL
l_int|0
op_logical_or
id|pci_set_consistent_dma_mask
c_func
(paren
id|pci
comma
l_int|0x0fffffff
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;architecture does not support 28bit PCI busmaster DMA&bslash;n&quot;
)paren
suffix:semicolon
id|pci_disable_device
c_func
(paren
id|pci
)paren
suffix:semicolon
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
id|ice
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|ice
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice
op_eq
l_int|NULL
)paren
(brace
id|pci_disable_device
c_func
(paren
id|pci
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|ice-&gt;omni
op_assign
id|omni
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|cs8427_timeout
OL
l_int|1
)paren
id|cs8427_timeout
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|cs8427_timeout
OG
l_int|1000
)paren
id|cs8427_timeout
op_assign
l_int|1000
suffix:semicolon
id|ice-&gt;cs8427_timeout
op_assign
id|cs8427_timeout
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|ice-&gt;reg_lock
)paren
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|ice-&gt;open_mutex
)paren
suffix:semicolon
id|ice-&gt;gpio.set_mask
op_assign
id|snd_ice1712_set_gpio_mask
suffix:semicolon
id|ice-&gt;gpio.set_dir
op_assign
id|snd_ice1712_set_gpio_dir
suffix:semicolon
id|ice-&gt;gpio.set_data
op_assign
id|snd_ice1712_set_gpio_data
suffix:semicolon
id|ice-&gt;gpio.get_data
op_assign
id|snd_ice1712_get_gpio_data
suffix:semicolon
id|ice-&gt;spdif.cs8403_bits
op_assign
id|ice-&gt;spdif.cs8403_stream_bits
op_assign
(paren
l_int|0x01
op_or
multiline_comment|/* consumer format */
l_int|0x10
op_or
multiline_comment|/* no emphasis */
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* PCM encoder/decoder */
id|ice-&gt;card
op_assign
id|card
suffix:semicolon
id|ice-&gt;pci
op_assign
id|pci
suffix:semicolon
id|ice-&gt;irq
op_assign
op_minus
l_int|1
suffix:semicolon
id|pci_set_master
c_func
(paren
id|pci
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x40
comma
l_int|0x807f
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|ice-&gt;pci
comma
l_int|0x42
comma
l_int|0x0006
)paren
suffix:semicolon
id|snd_ice1712_proc_init
c_func
(paren
id|ice
)paren
suffix:semicolon
id|synchronize_irq
c_func
(paren
id|pci-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_request_regions
c_func
(paren
id|pci
comma
l_string|&quot;ICE1712&quot;
)paren
)paren
OL
l_int|0
)paren
(brace
id|kfree
c_func
(paren
id|ice
)paren
suffix:semicolon
id|pci_disable_device
c_func
(paren
id|pci
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|ice-&gt;port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|0
)paren
suffix:semicolon
id|ice-&gt;ddma_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|1
)paren
suffix:semicolon
id|ice-&gt;dmapath_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|2
)paren
suffix:semicolon
id|ice-&gt;profi_port
op_assign
id|pci_resource_start
c_func
(paren
id|pci
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|pci-&gt;irq
comma
id|snd_ice1712_interrupt
comma
id|SA_INTERRUPT
op_or
id|SA_SHIRQ
comma
l_string|&quot;ICE1712&quot;
comma
(paren
r_void
op_star
)paren
id|ice
)paren
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to grab IRQ %d&bslash;n&quot;
comma
id|pci-&gt;irq
)paren
suffix:semicolon
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|ice-&gt;irq
op_assign
id|pci-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
id|snd_ice1712_read_eeprom
c_func
(paren
id|ice
comma
id|modelname
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snd_ice1712_chip_init
c_func
(paren
id|ice
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* unmask used interrupts */
id|outb
c_func
(paren
(paren
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
op_amp
id|ICE1712_CFG_2xMPU401
)paren
op_eq
l_int|0
ques
c_cond
id|ICE1712_IRQ_MPU2
suffix:colon
l_int|0
op_or
(paren
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
op_amp
id|ICE1712_CFG_NO_CON_AC97
)paren
ques
c_cond
id|ICE1712_IRQ_PBKDS
op_or
id|ICE1712_IRQ_CONCAP
op_or
id|ICE1712_IRQ_CONPBK
suffix:colon
l_int|0
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|IRQMASK
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x00
comma
id|ICEMT
c_func
(paren
id|ice
comma
id|IRQ
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_LOWLEVEL
comma
id|ice
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_ice1712_free
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|snd_card_set_dev
c_func
(paren
id|card
comma
op_amp
id|pci-&gt;dev
)paren
suffix:semicolon
op_star
id|r_ice1712
op_assign
id|ice
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *&n; * Registration&n; *&n; */
DECL|variable|__devinitdata
r_static
r_struct
id|snd_ice1712_card_info
id|no_matched
id|__devinitdata
suffix:semicolon
DECL|function|snd_ice1712_probe
r_static
r_int
id|__devinit
id|snd_ice1712_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
comma
r_const
r_struct
id|pci_device_id
op_star
id|pci_id
)paren
(brace
r_static
r_int
id|dev
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
id|ice1712_t
op_star
id|ice
suffix:semicolon
r_int
id|pcm_dev
op_assign
l_int|0
comma
id|err
suffix:semicolon
r_struct
id|snd_ice1712_card_info
op_star
op_star
id|tbl
comma
op_star
id|c
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_ge
id|SNDRV_CARDS
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|enable
(braket
id|dev
)braket
)paren
(brace
id|dev
op_increment
suffix:semicolon
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|card
op_assign
id|snd_card_new
c_func
(paren
id|index
(braket
id|dev
)braket
comma
id|id
(braket
id|dev
)braket
comma
id|THIS_MODULE
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|strcpy
c_func
(paren
id|card-&gt;driver
comma
l_string|&quot;ICE1712&quot;
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
l_string|&quot;ICEnsemble ICE1712&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_create
c_func
(paren
id|card
comma
id|pci
comma
id|model
(braket
id|dev
)braket
comma
id|omni
(braket
id|dev
)braket
comma
id|cs8427_timeout
(braket
id|dev
)braket
comma
op_amp
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|tbl
op_assign
id|card_tables
suffix:semicolon
op_star
id|tbl
suffix:semicolon
id|tbl
op_increment
)paren
(brace
r_for
c_loop
(paren
id|c
op_assign
op_star
id|tbl
suffix:semicolon
id|c-&gt;subvendor
suffix:semicolon
id|c
op_increment
)paren
(brace
r_if
c_cond
(paren
id|c-&gt;subvendor
op_eq
id|ice-&gt;eeprom.subvendor
)paren
(brace
id|strcpy
c_func
(paren
id|card-&gt;shortname
comma
id|c-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c-&gt;driver
)paren
multiline_comment|/* specific driver? */
id|strcpy
c_func
(paren
id|card-&gt;driver
comma
id|c-&gt;driver
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c-&gt;chip_init
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|c
op_member_access_from_pointer
id|chip_init
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
r_goto
id|__found
suffix:semicolon
)brace
)brace
)brace
id|c
op_assign
op_amp
id|no_matched
suffix:semicolon
id|__found
suffix:colon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm_profi
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice_has_con_ac97
c_func
(paren
id|ice
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_ac97_mixer
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_build_controls
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c-&gt;build_controls
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|c
op_member_access_from_pointer
id|build_controls
c_func
(paren
id|ice
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ice_has_con_ac97
c_func
(paren
id|ice
)paren
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ice1712_pcm_ds
c_func
(paren
id|ice
comma
id|pcm_dev
op_increment
comma
l_int|NULL
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|c-&gt;no_mpu401
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_mpu401_uart_new
c_func
(paren
id|card
comma
l_int|0
comma
id|MPU401_HW_ICE1712
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|MPU1_CTRL
)paren
comma
l_int|1
comma
id|ice-&gt;irq
comma
l_int|0
comma
op_amp
id|ice-&gt;rmidi
(braket
l_int|0
)braket
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;eeprom.data
(braket
id|ICE_EEP1_CODEC
)braket
op_amp
id|ICE1712_CFG_2xMPU401
)paren
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_mpu401_uart_new
c_func
(paren
id|card
comma
l_int|1
comma
id|MPU401_HW_ICE1712
comma
id|ICEREG
c_func
(paren
id|ice
comma
id|MPU2_CTRL
)paren
comma
l_int|1
comma
id|ice-&gt;irq
comma
l_int|0
comma
op_amp
id|ice-&gt;rmidi
(braket
l_int|1
)braket
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
)brace
id|sprintf
c_func
(paren
id|card-&gt;longname
comma
l_string|&quot;%s at 0x%lx, irq %i&quot;
comma
id|card-&gt;shortname
comma
id|ice-&gt;port
comma
id|ice-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_card_register
c_func
(paren
id|card
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_card_free
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|pci_set_drvdata
c_func
(paren
id|pci
comma
id|card
)paren
suffix:semicolon
id|dev
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_ice1712_remove
r_static
r_void
id|__devexit
id|snd_ice1712_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci
)paren
(brace
id|snd_card_free
c_func
(paren
id|pci_get_drvdata
c_func
(paren
id|pci
)paren
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|driver
r_static
r_struct
id|pci_driver
id|driver
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;ICE1712&quot;
comma
dot
id|id_table
op_assign
id|snd_ice1712_ids
comma
dot
id|probe
op_assign
id|snd_ice1712_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|snd_ice1712_remove
)paren
comma
)brace
suffix:semicolon
DECL|function|alsa_card_ice1712_init
r_static
r_int
id|__init
id|alsa_card_ice1712_init
c_func
(paren
r_void
)paren
(brace
r_return
id|pci_module_init
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
DECL|function|alsa_card_ice1712_exit
r_static
r_void
id|__exit
id|alsa_card_ice1712_exit
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|alsa_card_ice1712_init
)paren
id|module_exit
c_func
(paren
id|alsa_card_ice1712_exit
)paren
eof
