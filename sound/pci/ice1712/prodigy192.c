multiline_comment|/*&n; *   ALSA driver for ICEnsemble VT1724 (Envy24HT)&n; *&n; *   Lowlevel functions for AudioTrak Prodigy 192 cards&n; *&n; *&t;Copyright (c) 2003 Takashi Iwai &lt;tiwai@suse.de&gt;&n; *      Copyright (c) 2003 Dimitromanolakis Apostolos &lt;apostol@cs.utoronto.ca&gt;&n; *      Copyright (c) 2004 Kouichi ONO &lt;co2b@ceres.dti.ne.jp&gt;&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &quot;ice1712.h&quot;
macro_line|#include &quot;envy24ht.h&quot;
macro_line|#include &quot;prodigy192.h&quot;
macro_line|#include &quot;stac946x.h&quot;
DECL|function|stac9460_put
r_static
r_inline
r_void
id|stac9460_put
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
comma
r_int
r_char
id|val
)paren
(brace
id|snd_vt1724_write_i2c
c_func
(paren
id|ice
comma
id|PRODIGY192_STAC9460_ADDR
comma
id|reg
comma
id|val
)paren
suffix:semicolon
)brace
DECL|function|stac9460_get
r_static
r_inline
r_int
r_char
id|stac9460_get
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
)paren
(brace
r_return
id|snd_vt1724_read_i2c
c_func
(paren
id|ice
comma
id|PRODIGY192_STAC9460_ADDR
comma
id|reg
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * DAC mute control&n; */
DECL|function|stac9460_dac_mute_info
r_static
r_int
id|stac9460_dac_mute_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_dac_mute_get
r_static
r_int
id|stac9460_dac_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
)paren
id|idx
op_assign
id|STAC946X_MASTER_VOLUME
suffix:semicolon
r_else
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|STAC946X_LF_VOLUME
suffix:semicolon
id|val
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
op_complement
id|val
op_rshift
l_int|7
)paren
op_amp
l_int|0x1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_dac_mute_put
r_static
r_int
id|stac9460_dac_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
r_new
comma
id|old
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_int
id|change
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
)paren
id|idx
op_assign
id|STAC946X_MASTER_VOLUME
suffix:semicolon
r_else
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|STAC946X_LF_VOLUME
suffix:semicolon
id|old
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
r_new
op_assign
(paren
op_complement
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_lshift
l_int|7
op_amp
l_int|0x80
)paren
op_or
(paren
id|old
op_amp
op_complement
l_int|0x80
)paren
suffix:semicolon
id|change
op_assign
(paren
r_new
op_ne
id|old
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|stac9460_put
c_func
(paren
id|ice
comma
id|idx
comma
r_new
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * DAC volume attenuation mixer control&n; */
DECL|function|stac9460_dac_vol_info
r_static
r_int
id|stac9460_dac_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* mute */
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x7f
suffix:semicolon
multiline_comment|/* 0dB */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_dac_vol_get
r_static
r_int
id|stac9460_dac_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_int
r_char
id|vol
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
)paren
id|idx
op_assign
id|STAC946X_MASTER_VOLUME
suffix:semicolon
r_else
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|STAC946X_LF_VOLUME
suffix:semicolon
id|vol
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|idx
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|0x7f
op_minus
id|vol
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_dac_vol_put
r_static
r_int
id|stac9460_dac_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_int
r_char
id|tmp
comma
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
)paren
id|idx
op_assign
id|STAC946X_MASTER_VOLUME
suffix:semicolon
r_else
id|idx
op_assign
id|snd_ctl_get_ioffidx
c_func
(paren
id|kcontrol
comma
op_amp
id|ucontrol-&gt;id
)paren
op_plus
id|STAC946X_LF_VOLUME
suffix:semicolon
id|nvol
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|tmp
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
id|ovol
op_assign
l_int|0x7f
op_minus
(paren
id|tmp
op_amp
l_int|0x7f
)paren
suffix:semicolon
id|change
op_assign
(paren
id|ovol
op_ne
id|nvol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
(brace
id|stac9460_put
c_func
(paren
id|ice
comma
id|idx
comma
(paren
l_int|0x7f
op_minus
id|nvol
)paren
op_or
(paren
id|tmp
op_amp
l_int|0x80
)paren
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC mute control&n; */
DECL|function|stac9460_adc_mute_info
r_static
r_int
id|stac9460_adc_mute_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_adc_mute_get
r_static
r_int
id|stac9460_adc_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
op_increment
id|i
)paren
(brace
id|val
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|STAC946X_MIC_L_VOLUME
op_plus
id|i
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
op_complement
id|val
op_rshift
l_int|7
op_amp
l_int|0x1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_adc_mute_put
r_static
r_int
id|stac9460_adc_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
r_new
comma
id|old
suffix:semicolon
r_int
id|i
comma
id|reg
suffix:semicolon
r_int
id|change
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
op_increment
id|i
)paren
(brace
id|reg
op_assign
id|STAC946X_MIC_L_VOLUME
op_plus
id|i
suffix:semicolon
id|old
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|reg
)paren
suffix:semicolon
r_new
op_assign
(paren
op_complement
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_lshift
l_int|7
op_amp
l_int|0x80
)paren
op_or
(paren
id|old
op_amp
op_complement
l_int|0x80
)paren
suffix:semicolon
id|change
op_assign
(paren
r_new
op_ne
id|old
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|stac9460_put
c_func
(paren
id|ice
comma
id|reg
comma
r_new
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC gain mixer control&n; */
DECL|function|stac9460_adc_vol_info
r_static
r_int
id|stac9460_adc_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* 0dB */
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x0f
suffix:semicolon
multiline_comment|/* 22.5dB */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_adc_vol_get
r_static
r_int
id|stac9460_adc_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|reg
suffix:semicolon
r_int
r_char
id|vol
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
op_increment
id|i
)paren
(brace
id|reg
op_assign
id|STAC946X_MIC_L_VOLUME
op_plus
id|i
suffix:semicolon
id|vol
op_assign
id|stac9460_get
c_func
(paren
id|ice
comma
id|reg
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
l_int|0x0f
op_minus
id|vol
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|stac9460_adc_vol_put
r_static
r_int
id|stac9460_adc_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|reg
suffix:semicolon
r_int
r_char
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
op_increment
id|i
)paren
(brace
id|reg
op_assign
id|STAC946X_MIC_L_VOLUME
op_plus
id|i
suffix:semicolon
id|nvol
op_assign
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
suffix:semicolon
id|ovol
op_assign
l_int|0x0f
op_minus
id|stac9460_get
c_func
(paren
id|ice
comma
id|reg
)paren
suffix:semicolon
id|change
op_assign
(paren
(paren
id|ovol
op_amp
l_int|0x0f
)paren
op_ne
id|nvol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|stac9460_put
c_func
(paren
id|ice
comma
id|reg
comma
(paren
l_int|0x0f
op_minus
id|nvol
)paren
op_or
(paren
id|ovol
op_amp
op_complement
l_int|0x0f
)paren
)paren
suffix:semicolon
)brace
r_return
id|change
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/*&n; * Headphone Amplifier&n; */
r_static
r_int
id|aureon_set_headphone_amp
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|enable
)paren
(brace
r_int
r_int
id|tmp
comma
id|tmp2
suffix:semicolon
id|tmp2
op_assign
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
r_if
c_cond
(paren
id|enable
)paren
id|tmp
op_or_assign
id|AUREON_HP_SEL
suffix:semicolon
r_else
id|tmp
op_and_assign
op_complement
id|AUREON_HP_SEL
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_ne
id|tmp2
)paren
(brace
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_get_headphone_amp
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_int
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
(paren
id|tmp
op_amp
id|AUREON_HP_SEL
)paren
op_ne
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_bool_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|k
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_hpamp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|aureon_get_headphone_amp
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_hpamp_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|aureon_set_headphone_amp
c_func
(paren
id|ice
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Deemphasis&n; */
r_static
r_int
id|aureon_deemp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
)paren
op_amp
l_int|0xf
)paren
op_eq
l_int|0xf
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_deemp_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|temp
comma
id|temp2
suffix:semicolon
id|temp2
op_assign
id|temp
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|temp
op_or_assign
l_int|0xf
suffix:semicolon
r_else
id|temp
op_and_assign
op_complement
l_int|0xf
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
id|temp2
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC Oversampling&n; */
r_static
r_int
id|aureon_oversampling_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|k
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;128x&quot;
comma
l_string|&quot;64x&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_oversampling_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MASTER
)paren
op_amp
l_int|0x8
)paren
op_eq
l_int|0x8
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
id|aureon_oversampling_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
id|temp
comma
id|temp2
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|temp2
op_assign
id|temp
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MASTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
)paren
id|temp
op_or_assign
l_int|0x8
suffix:semicolon
r_else
id|temp
op_and_assign
op_complement
l_int|0x8
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
id|temp2
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_MASTER
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*&n; * mixers&n; */
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|stac_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Master Playback Switch&quot;
comma
dot
id|info
op_assign
id|stac9460_dac_mute_info
comma
dot
id|get
op_assign
id|stac9460_dac_mute_get
comma
dot
id|put
op_assign
id|stac9460_dac_mute_put
comma
dot
id|private_value
op_assign
l_int|1
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Master Playback Volume&quot;
comma
dot
id|info
op_assign
id|stac9460_dac_vol_info
comma
dot
id|get
op_assign
id|stac9460_dac_vol_get
comma
dot
id|put
op_assign
id|stac9460_dac_vol_put
comma
dot
id|private_value
op_assign
l_int|1
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;DAC Switch&quot;
comma
dot
id|count
op_assign
l_int|6
comma
dot
id|info
op_assign
id|stac9460_dac_mute_info
comma
dot
id|get
op_assign
id|stac9460_dac_mute_get
comma
dot
id|put
op_assign
id|stac9460_dac_mute_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;DAC Volume&quot;
comma
dot
id|count
op_assign
l_int|6
comma
dot
id|info
op_assign
id|stac9460_dac_vol_info
comma
dot
id|get
op_assign
id|stac9460_dac_vol_get
comma
dot
id|put
op_assign
id|stac9460_dac_vol_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;ADC Switch&quot;
comma
dot
id|count
op_assign
l_int|1
comma
dot
id|info
op_assign
id|stac9460_adc_mute_info
comma
dot
id|get
op_assign
id|stac9460_adc_mute_get
comma
dot
id|put
op_assign
id|stac9460_adc_mute_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;ADC Volume&quot;
comma
dot
id|count
op_assign
l_int|1
comma
dot
id|info
op_assign
id|stac9460_adc_vol_info
comma
dot
id|get
op_assign
id|stac9460_adc_vol_get
comma
dot
id|put
op_assign
id|stac9460_adc_vol_put
comma
)brace
comma
macro_line|#if 0
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Capture Route&quot;
comma
dot
id|info
op_assign
id|wm_adc_mux_info
comma
dot
id|get
op_assign
id|wm_adc_mux_get
comma
dot
id|put
op_assign
id|wm_adc_mux_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Headphone Amplifier Switch&quot;
comma
dot
id|info
op_assign
id|aureon_bool_info
comma
dot
id|get
op_assign
id|aureon_hpamp_get
comma
dot
id|put
op_assign
id|aureon_hpamp_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;DAC Deemphasis Switch&quot;
comma
dot
id|info
op_assign
id|aureon_bool_info
comma
dot
id|get
op_assign
id|aureon_deemp_get
comma
dot
id|put
op_assign
id|aureon_deemp_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;ADC Oversampling&quot;
comma
dot
id|info
op_assign
id|aureon_oversampling_info
comma
dot
id|get
op_assign
id|aureon_oversampling_get
comma
dot
id|put
op_assign
id|aureon_oversampling_put
)brace
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|function|prodigy192_add_controls
r_static
r_int
id|__devinit
id|prodigy192_add_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_int
id|i
suffix:semicolon
r_int
id|err
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|stac_controls
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|stac_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * initialize the chip&n; */
DECL|function|prodigy192_init
r_static
r_int
id|__devinit
id|prodigy192_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_static
r_int
r_int
id|stac_inits_prodigy
(braket
)braket
op_assign
(brace
id|STAC946X_RESET
comma
l_int|0
comma
multiline_comment|/*&t;&t;STAC946X_MASTER_VOLUME, 0,&n;&t;&t;STAC946X_LF_VOLUME, 0,&n;&t;&t;STAC946X_RF_VOLUME, 0,&n;&t;&t;STAC946X_LR_VOLUME, 0,&n;&t;&t;STAC946X_RR_VOLUME, 0,&n;&t;&t;STAC946X_CENTER_VOLUME, 0,&n;&t;&t;STAC946X_LFE_VOLUME, 0,*/
(paren
r_int
r_int
)paren
op_minus
l_int|1
)brace
suffix:semicolon
r_int
r_int
op_star
id|p
suffix:semicolon
multiline_comment|/* prodigy 192 */
id|ice-&gt;num_total_dacs
op_assign
l_int|6
suffix:semicolon
id|ice-&gt;num_total_adcs
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* initialize codec */
id|p
op_assign
id|stac_inits_prodigy
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
op_star
id|p
op_ne
(paren
r_int
r_int
)paren
op_minus
l_int|1
suffix:semicolon
id|p
op_add_assign
l_int|2
)paren
id|stac9460_put
c_func
(paren
id|ice
comma
id|p
(braket
l_int|0
)braket
comma
id|p
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Aureon boards don&squot;t provide the EEPROM data except for the vendor IDs.&n; * hence the driver needs to sets up it properly.&n; */
DECL|variable|__devinitdata
r_static
r_int
r_char
id|prodigy71_eeprom
(braket
)braket
id|__devinitdata
op_assign
(brace
l_int|0x2b
comma
multiline_comment|/* SYSCONF: clock 512, mpu401, spdif-in/ADC, 4DACs */
l_int|0x80
comma
multiline_comment|/* ACLINK: I2S */
l_int|0xf8
comma
multiline_comment|/* I2S: vol, 96k, 24bit, 192k */
l_int|0xc3
comma
multiline_comment|/* SPDIF: out-en, out-int, spdif-in */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR1 */
l_int|0xbf
comma
multiline_comment|/* GPIO_DIR2 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK1 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK2 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE1 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE2 */
)brace
suffix:semicolon
multiline_comment|/* entry point */
DECL|variable|__devinitdata
r_struct
id|snd_ice1712_card_info
id|snd_vt1724_prodigy192_cards
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|subvendor
op_assign
id|VT1724_SUBDEVICE_PRODIGY192VE
comma
dot
id|name
op_assign
l_string|&quot;Audiotrak Prodigy 192&quot;
comma
dot
id|model
op_assign
l_string|&quot;prodigy192&quot;
comma
dot
id|chip_init
op_assign
id|prodigy192_init
comma
dot
id|build_controls
op_assign
id|prodigy192_add_controls
comma
dot
id|eeprom_size
op_assign
r_sizeof
(paren
id|prodigy71_eeprom
)paren
comma
dot
id|eeprom_data
op_assign
id|prodigy71_eeprom
comma
)brace
comma
(brace
)brace
multiline_comment|/* terminator */
)brace
suffix:semicolon
eof
