multiline_comment|/*&n; *   ALSA driver for ICEnsemble VT1724 (Envy24HT)&n; *&n; *   Lowlevel functions for Terratec Aureon cards&n; *&n; *&t;Copyright (c) 2003 Takashi Iwai &lt;tiwai@suse.de&gt;&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; *&n; * NOTES:&n; *&n; * - we reuse the akm4xxx_t record for storing the wm8770 codec data.&n; *   both wm and akm codecs are pretty similar, so we can integrate&n; *   both controls in the future, once if wm codecs are reused in&n; *   many boards.&n; *&n; * - DAC digital volumes are not implemented in the mixer.&n; *   if they show better response than DAC analog volumes, we can use them&n; *   instead.&n; *&n; *   Lowlevel functions for AudioTrak Prodigy 7.1 (and possibly 192) cards&n; *      Copyright (c) 2003 Dimitromanolakis Apostolos &lt;apostol@cs.utoronto.ca&gt;&n; *&n; *   version 0.82: Stable / not all features work yet (no communication with AC97 secondary)&n; *       added 64x/128x oversampling switch (should be 64x only for 96khz)&n; *       fixed some recording labels (still need to check the rest)&n; *       recording is working probably thanks to correct wm8770 initialization&n; *&n; *   version 0.5: Initial release:&n; *           working: analog output, mixer, headphone amplifier switch&n; *       not working: prety much everything else, at least i could verify that&n; *                    we have no digital output, no capture, pretty bad clicks and poops&n; *                    on mixer switch and other coll stuff.&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &quot;ice1712.h&quot;
macro_line|#include &quot;envy24ht.h&quot;
macro_line|#include &quot;aureon.h&quot;
multiline_comment|/* WM8770 registers */
DECL|macro|WM_DAC_ATTEN
mdefine_line|#define WM_DAC_ATTEN&t;&t;0x00&t;/* DAC1-8 analog attenuation */
DECL|macro|WM_DAC_MASTER_ATTEN
mdefine_line|#define WM_DAC_MASTER_ATTEN&t;0x08&t;/* DAC master analog attenuation */
DECL|macro|WM_DAC_DIG_ATTEN
mdefine_line|#define WM_DAC_DIG_ATTEN&t;0x09&t;/* DAC1-8 digital attenuation */
DECL|macro|WM_DAC_DIG_MASTER_ATTEN
mdefine_line|#define WM_DAC_DIG_MASTER_ATTEN&t;0x11&t;/* DAC master digital attenuation */
DECL|macro|WM_PHASE_SWAP
mdefine_line|#define WM_PHASE_SWAP&t;&t;0x12&t;/* DAC phase */
DECL|macro|WM_DAC_CTRL1
mdefine_line|#define WM_DAC_CTRL1&t;&t;0x13&t;/* DAC control bits */
DECL|macro|WM_MUTE
mdefine_line|#define WM_MUTE&t;&t;&t;0x14&t;/* mute controls */
DECL|macro|WM_DAC_CTRL2
mdefine_line|#define WM_DAC_CTRL2&t;&t;0x15&t;/* de-emphasis and zefo-flag */
DECL|macro|WM_INT_CTRL
mdefine_line|#define WM_INT_CTRL&t;&t;0x16&t;/* interface control */
DECL|macro|WM_MASTER
mdefine_line|#define WM_MASTER&t;&t;0x17&t;/* master clock and mode */
DECL|macro|WM_POWERDOWN
mdefine_line|#define WM_POWERDOWN&t;&t;0x18&t;/* power-down controls */
DECL|macro|WM_ADC_GAIN
mdefine_line|#define WM_ADC_GAIN&t;&t;0x19&t;/* ADC gain L(19)/R(1a) */
DECL|macro|WM_ADC_MUX
mdefine_line|#define WM_ADC_MUX&t;&t;0x1b&t;/* input MUX */
DECL|macro|WM_OUT_MUX1
mdefine_line|#define WM_OUT_MUX1&t;&t;0x1c&t;/* output MUX */
DECL|macro|WM_OUT_MUX2
mdefine_line|#define WM_OUT_MUX2&t;&t;0x1e&t;/* output MUX */
DECL|macro|WM_RESET
mdefine_line|#define WM_RESET&t;&t;0x1f&t;/* software reset */
multiline_comment|/* CS8415A registers */
DECL|macro|CS8415_CTRL1
mdefine_line|#define CS8415_CTRL1&t;0x01
DECL|macro|CS8415_CTRL2
mdefine_line|#define CS8415_CTRL2&t;0x02
DECL|macro|CS8415_QSUB
mdefine_line|#define CS8415_QSUB&t;&t;0x14
DECL|macro|CS8415_RATIO
mdefine_line|#define CS8415_RATIO&t;0x1E
DECL|macro|CS8415_C_BUFFER
mdefine_line|#define CS8415_C_BUFFER&t;0x20
DECL|macro|CS8415_ID
mdefine_line|#define CS8415_ID&t;&t;0x7F
DECL|function|aureon_ac97_write
r_static
r_void
id|aureon_ac97_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
r_int
r_int
id|tmp
suffix:semicolon
multiline_comment|/* Send address to XILINX chip */
id|tmp
op_assign
(paren
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
op_amp
op_complement
l_int|0xFF
)paren
op_or
(paren
id|reg
op_amp
l_int|0x7F
)paren
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_AC97_ADDR
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_ADDR
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Send low-order byte to XILINX chip */
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_DATA_MASK
suffix:semicolon
id|tmp
op_or_assign
id|val
op_amp
id|AUREON_AC97_DATA_MASK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_AC97_DATA_LOW
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_DATA_LOW
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Send high-order byte to XILINX chip */
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_DATA_MASK
suffix:semicolon
id|tmp
op_or_assign
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
id|AUREON_AC97_DATA_MASK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_AC97_DATA_HIGH
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_DATA_HIGH
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Instruct XILINX chip to parse the data to the STAC9744 chip */
id|tmp
op_or_assign
id|AUREON_AC97_COMMIT
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_COMMIT
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Store the data in out private buffer */
id|ice-&gt;spec.aureon.stac9744
(braket
(paren
id|reg
op_amp
l_int|0x7F
)paren
op_rshift
l_int|1
)braket
op_assign
id|val
suffix:semicolon
)brace
DECL|function|aureon_ac97_read
r_static
r_int
r_int
id|aureon_ac97_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|reg
)paren
(brace
r_return
id|ice-&gt;spec.aureon.stac9744
(braket
(paren
id|reg
op_amp
l_int|0x7F
)paren
op_rshift
l_int|1
)braket
suffix:semicolon
)brace
multiline_comment|/*&n; * Initialize STAC9744 chip&n; */
DECL|function|aureon_ac97_init
r_static
r_int
id|aureon_ac97_init
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
id|i
suffix:semicolon
r_static
r_int
r_int
id|ac97_defaults
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x9640
comma
l_int|0x02
comma
l_int|0x8000
comma
l_int|0x04
comma
l_int|0x8000
comma
l_int|0x06
comma
l_int|0x8000
comma
l_int|0x0C
comma
l_int|0x8008
comma
l_int|0x0E
comma
l_int|0x8008
comma
l_int|0x10
comma
l_int|0x8808
comma
l_int|0x12
comma
l_int|0x8808
comma
l_int|0x14
comma
l_int|0x8808
comma
l_int|0x16
comma
l_int|0x8808
comma
l_int|0x18
comma
l_int|0x8808
comma
l_int|0x1C
comma
l_int|0x8000
comma
l_int|0x26
comma
l_int|0x000F
comma
l_int|0x28
comma
l_int|0x0201
comma
l_int|0x2C
comma
l_int|0xBB80
comma
l_int|0x32
comma
l_int|0xBB80
comma
l_int|0x7C
comma
l_int|0x8384
comma
l_int|0x7E
comma
l_int|0x7644
comma
(paren
r_int
r_int
)paren
op_minus
l_int|1
)brace
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
multiline_comment|/* Cold reset */
id|tmp
op_assign
(paren
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
op_or
id|AUREON_AC97_RESET
)paren
op_amp
op_complement
id|AUREON_AC97_DATA_MASK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_AC97_RESET
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_AC97_RESET
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ice-&gt;spec.aureon.stac9744
comma
l_int|0
comma
r_sizeof
(paren
id|ice-&gt;spec.aureon.stac9744
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|ac97_defaults
(braket
id|i
)braket
op_ne
(paren
r_int
r_int
)paren
op_minus
l_int|1
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
id|ice-&gt;spec.aureon.stac9744
(braket
(paren
id|ac97_defaults
(braket
id|i
)braket
)paren
op_rshift
l_int|1
)braket
op_assign
id|ac97_defaults
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
id|aureon_ac97_write
c_func
(paren
id|ice
comma
id|AC97_MASTER
comma
l_int|0x0000
)paren
suffix:semicolon
singleline_comment|// Unmute AC&squot;97 master volume permanently - muting is done by WM8770
r_return
l_int|0
suffix:semicolon
)brace
DECL|macro|AUREON_AC97_STEREO
mdefine_line|#define AUREON_AC97_STEREO&t;0x80
multiline_comment|/*&n; * AC&squot;97 volume controls&n; */
DECL|function|aureon_ac97_vol_info
r_static
r_int
id|aureon_ac97_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
id|kcontrol-&gt;private_value
op_amp
id|AUREON_AC97_STEREO
ques
c_cond
l_int|2
suffix:colon
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|31
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_ac97_vol_get
r_static
r_int
id|aureon_ac97_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|vol
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|vol
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
l_int|0x1F
op_minus
(paren
id|vol
op_amp
l_int|0x1F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
op_amp
id|AUREON_AC97_STEREO
)paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
l_int|0x1F
op_minus
(paren
(paren
id|vol
op_rshift
l_int|8
)paren
op_amp
l_int|0x1F
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_ac97_vol_put
r_static
r_int
id|aureon_ac97_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ovol
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
)paren
suffix:semicolon
id|nvol
op_assign
(paren
l_int|0x1F
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
op_amp
l_int|0x001F
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol-&gt;private_value
op_amp
id|AUREON_AC97_STEREO
)paren
id|nvol
op_or_assign
(paren
(paren
l_int|0x1F
op_minus
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
op_amp
l_int|0x1F00
suffix:semicolon
id|nvol
op_or_assign
id|ovol
op_amp
op_complement
l_int|0x1F1F
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|ovol
op_ne
id|nvol
)paren
)paren
)paren
id|aureon_ac97_write
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
comma
id|nvol
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * AC&squot;97 mute controls&n; */
DECL|macro|aureon_ac97_mute_info
mdefine_line|#define aureon_ac97_mute_info&t;aureon_mono_bool_info
DECL|function|aureon_ac97_mute_get
r_static
r_int
id|aureon_ac97_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
)paren
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_ac97_mute_put
r_static
r_int
id|aureon_ac97_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ovol
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
)paren
suffix:semicolon
id|nvol
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0x0000
suffix:colon
l_int|0x8000
)paren
op_or
(paren
id|ovol
op_amp
op_complement
l_int|0x8000
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|ovol
op_ne
id|nvol
)paren
)paren
)paren
id|aureon_ac97_write
c_func
(paren
id|ice
comma
id|kcontrol-&gt;private_value
op_amp
l_int|0x7F
comma
id|nvol
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * AC&squot;97 mute controls&n; */
DECL|macro|aureon_ac97_micboost_info
mdefine_line|#define aureon_ac97_micboost_info&t;aureon_mono_bool_info
DECL|function|aureon_ac97_micboost_get
r_static
r_int
id|aureon_ac97_micboost_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|AC97_MIC
)paren
op_amp
l_int|0x0020
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_ac97_micboost_put
r_static
r_int
id|aureon_ac97_micboost_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ovol
op_assign
id|aureon_ac97_read
c_func
(paren
id|ice
comma
id|AC97_MIC
)paren
suffix:semicolon
id|nvol
op_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0x0000
suffix:colon
l_int|0x0020
)paren
op_or
(paren
id|ovol
op_amp
op_complement
l_int|0x0020
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|ovol
op_ne
id|nvol
)paren
)paren
)paren
id|aureon_ac97_write
c_func
(paren
id|ice
comma
id|AC97_MIC
comma
id|nvol
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * write data in the SPI mode&n; */
DECL|function|aureon_spi_write
r_static
r_void
id|aureon_spi_write
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|cs
comma
r_int
r_int
id|data
comma
r_int
id|bits
)paren
(brace
r_int
r_int
id|tmp
suffix:semicolon
r_int
id|i
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_ice1712_gpio_set_mask
c_func
(paren
id|ice
comma
op_complement
(paren
id|AUREON_WM_RW
op_or
id|AUREON_SPI_MOSI
op_or
id|AUREON_SPI_CLK
op_or
id|AUREON_WM_CS
op_or
id|AUREON_CS8415_CS
)paren
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_WM_RW
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|cs
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|bits
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
id|tmp
op_or_assign
id|AUREON_SPI_MOSI
suffix:semicolon
r_else
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_MOSI
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_CLK
suffix:semicolon
id|tmp
op_or_assign
id|cs
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Read data in SPI mode&n; */
DECL|function|aureon_spi_read
r_static
r_void
id|aureon_spi_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|cs
comma
r_int
r_int
id|data
comma
r_int
id|bits
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|size
)paren
(brace
r_int
id|i
comma
id|j
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
(paren
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
op_amp
op_complement
id|AUREON_SPI_CLK
)paren
op_or
id|AUREON_CS8415_CS
op_or
id|AUREON_WM_CS
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|cs
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|bits
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|data
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
id|tmp
op_or_assign
id|AUREON_SPI_MOSI
suffix:semicolon
r_else
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_MOSI
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|size
suffix:semicolon
id|j
op_increment
)paren
(brace
r_int
r_char
id|outdata
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|7
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
id|outdata
op_lshift_assign
l_int|1
suffix:semicolon
id|outdata
op_or_assign
(paren
id|tmp
op_amp
id|AUREON_SPI_MISO
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_SPI_CLK
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|buffer
(braket
id|j
)braket
op_assign
id|outdata
suffix:semicolon
)brace
id|tmp
op_or_assign
id|cs
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
)brace
DECL|function|aureon_cs8415_get
r_static
r_int
r_char
id|aureon_cs8415_get
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|aureon_spi_write
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
l_int|0x2000
op_or
id|reg
comma
l_int|16
)paren
suffix:semicolon
id|aureon_spi_read
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
l_int|0x21
comma
l_int|8
comma
op_amp
id|val
comma
l_int|1
)paren
suffix:semicolon
r_return
id|val
suffix:semicolon
)brace
DECL|function|aureon_cs8415_read
r_static
r_void
id|aureon_cs8415_read
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|size
)paren
(brace
id|aureon_spi_write
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
l_int|0x2000
op_or
id|reg
comma
l_int|16
)paren
suffix:semicolon
id|aureon_spi_read
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
l_int|0x21
comma
l_int|8
comma
id|buffer
comma
id|size
)paren
suffix:semicolon
)brace
DECL|function|aureon_cs8415_put
r_static
r_void
id|aureon_cs8415_put
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
comma
r_int
r_char
id|val
)paren
(brace
id|aureon_spi_write
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
l_int|0x200000
op_or
(paren
id|reg
op_lshift
l_int|8
)paren
op_or
id|val
comma
l_int|24
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * get the current register value of WM codec&n; */
DECL|function|wm_get
r_static
r_int
r_int
id|wm_get
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
)paren
(brace
id|reg
op_lshift_assign
l_int|1
suffix:semicolon
r_return
(paren
(paren
r_int
r_int
)paren
id|ice-&gt;akm
(braket
l_int|0
)braket
dot
id|images
(braket
id|reg
)braket
op_lshift
l_int|8
)paren
op_or
id|ice-&gt;akm
(braket
l_int|0
)braket
dot
id|images
(braket
id|reg
op_plus
l_int|1
)braket
suffix:semicolon
)brace
multiline_comment|/*&n; * set the register value of WM codec&n; */
DECL|function|wm_put_nocache
r_static
r_void
id|wm_put_nocache
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|aureon_spi_write
c_func
(paren
id|ice
comma
id|AUREON_WM_CS
comma
(paren
id|reg
op_lshift
l_int|9
)paren
op_or
(paren
id|val
op_amp
l_int|0x1ff
)paren
comma
l_int|16
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * set the register value of WM codec and remember it&n; */
DECL|function|wm_put
r_static
r_void
id|wm_put
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|reg
comma
r_int
r_int
id|val
)paren
(brace
id|wm_put_nocache
c_func
(paren
id|ice
comma
id|reg
comma
id|val
)paren
suffix:semicolon
id|reg
op_lshift_assign
l_int|1
suffix:semicolon
id|ice-&gt;akm
(braket
l_int|0
)braket
dot
id|images
(braket
id|reg
)braket
op_assign
id|val
op_rshift
l_int|8
suffix:semicolon
id|ice-&gt;akm
(braket
l_int|0
)braket
dot
id|images
(braket
id|reg
op_plus
l_int|1
)braket
op_assign
id|val
suffix:semicolon
)brace
multiline_comment|/*&n; */
DECL|function|aureon_mono_bool_info
r_static
r_int
id|aureon_mono_bool_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|k
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * AC&squot;97 master playback mute controls (Mute on WM8770 chip)&n; */
DECL|macro|aureon_ac97_mmute_info
mdefine_line|#define aureon_ac97_mmute_info&t;aureon_mono_bool_info
DECL|function|aureon_ac97_mmute_get
r_static
r_int
id|aureon_ac97_mmute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_OUT_MUX1
)paren
op_rshift
l_int|1
)paren
op_amp
l_int|0x01
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_ac97_mmute_put
r_static
r_int
id|aureon_ac97_mmute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ovol
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_OUT_MUX1
)paren
suffix:semicolon
id|nvol
op_assign
(paren
id|ovol
op_amp
op_complement
l_int|0x02
)paren
op_or
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0x02
suffix:colon
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|ovol
op_ne
id|nvol
)paren
)paren
)paren
id|wm_put
c_func
(paren
id|ice
comma
id|WM_OUT_MUX1
comma
id|nvol
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * Logarithmic volume values for WM8770&n; * Computed as 20 * Log10(255 / x)&n; */
DECL|variable|wm_vol
r_static
r_int
r_char
id|wm_vol
(braket
l_int|256
)braket
op_assign
(brace
l_int|127
comma
l_int|48
comma
l_int|42
comma
l_int|39
comma
l_int|36
comma
l_int|34
comma
l_int|33
comma
l_int|31
comma
l_int|30
comma
l_int|29
comma
l_int|28
comma
l_int|27
comma
l_int|27
comma
l_int|26
comma
l_int|25
comma
l_int|25
comma
l_int|24
comma
l_int|24
comma
l_int|23
comma
l_int|23
comma
l_int|22
comma
l_int|22
comma
l_int|21
comma
l_int|21
comma
l_int|21
comma
l_int|20
comma
l_int|20
comma
l_int|20
comma
l_int|19
comma
l_int|19
comma
l_int|19
comma
l_int|18
comma
l_int|18
comma
l_int|18
comma
l_int|18
comma
l_int|17
comma
l_int|17
comma
l_int|17
comma
l_int|17
comma
l_int|16
comma
l_int|16
comma
l_int|16
comma
l_int|16
comma
l_int|15
comma
l_int|15
comma
l_int|15
comma
l_int|15
comma
l_int|15
comma
l_int|15
comma
l_int|14
comma
l_int|14
comma
l_int|14
comma
l_int|14
comma
l_int|14
comma
l_int|13
comma
l_int|13
comma
l_int|13
comma
l_int|13
comma
l_int|13
comma
l_int|13
comma
l_int|13
comma
l_int|12
comma
l_int|12
comma
l_int|12
comma
l_int|12
comma
l_int|12
comma
l_int|12
comma
l_int|12
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|11
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|10
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|9
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|8
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|7
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|6
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|macro|WM_VOL_MAX
mdefine_line|#define WM_VOL_MAX&t;(sizeof(wm_vol) - 1)
DECL|macro|WM_VOL_MUTE
mdefine_line|#define WM_VOL_MUTE&t;0x8000
DECL|function|wm_set_vol
r_static
r_void
id|wm_set_vol
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
r_int
id|index
comma
r_int
r_int
id|vol
comma
r_int
r_int
id|master
)paren
(brace
r_int
r_char
id|nvol
suffix:semicolon
r_if
c_cond
(paren
(paren
id|master
op_amp
id|WM_VOL_MUTE
)paren
op_logical_or
(paren
id|vol
op_amp
id|WM_VOL_MUTE
)paren
)paren
id|nvol
op_assign
l_int|0
suffix:semicolon
r_else
id|nvol
op_assign
l_int|127
op_minus
id|wm_vol
(braket
(paren
(paren
(paren
id|vol
op_amp
op_complement
id|WM_VOL_MUTE
)paren
op_star
(paren
id|master
op_amp
op_complement
id|WM_VOL_MUTE
)paren
)paren
op_div
l_int|127
)paren
op_amp
id|WM_VOL_MAX
)braket
suffix:semicolon
id|wm_put
c_func
(paren
id|ice
comma
id|index
comma
id|nvol
)paren
suffix:semicolon
id|wm_put_nocache
c_func
(paren
id|ice
comma
id|index
comma
l_int|0x180
op_or
id|nvol
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * DAC mute control&n; */
DECL|macro|wm_pcm_mute_info
mdefine_line|#define wm_pcm_mute_info&t;aureon_mono_bool_info
DECL|function|wm_pcm_mute_get
r_static
r_int
id|wm_pcm_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MUTE
)paren
op_amp
l_int|0x10
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_pcm_mute_put
r_static
r_int
id|wm_pcm_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|nval
comma
id|oval
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|oval
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MUTE
)paren
suffix:semicolon
id|nval
op_assign
(paren
id|oval
op_amp
op_complement
l_int|0x10
)paren
op_or
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|0x10
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|nval
op_ne
id|oval
)paren
)paren
)paren
id|wm_put
c_func
(paren
id|ice
comma
id|WM_MUTE
comma
id|nval
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * Master volume attenuation mixer control&n; */
DECL|function|wm_master_vol_info
r_static
r_int
id|wm_master_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
id|WM_VOL_MAX
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_master_vol_get
r_static
r_int
id|wm_master_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
op_amp
op_complement
id|WM_VOL_MUTE
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_master_vol_put
r_static
r_int
id|wm_master_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|ch
comma
id|change
op_assign
l_int|0
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|ch
op_assign
l_int|0
suffix:semicolon
id|ch
OL
l_int|2
suffix:semicolon
id|ch
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
id|ch
)braket
op_ne
id|ice-&gt;spec.aureon.master
(braket
id|ch
)braket
)paren
(brace
r_int
id|dac
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
id|ch
)braket
op_and_assign
id|WM_VOL_MUTE
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
id|ch
)braket
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
id|ch
)braket
suffix:semicolon
r_for
c_loop
(paren
id|dac
op_assign
l_int|0
suffix:semicolon
id|dac
OL
id|ice-&gt;num_total_dacs
suffix:semicolon
id|dac
op_add_assign
l_int|2
)paren
id|wm_set_vol
c_func
(paren
id|ice
comma
id|WM_DAC_ATTEN
op_plus
id|dac
op_plus
id|ch
comma
id|ice-&gt;spec.aureon.vol
(braket
id|dac
op_plus
id|ch
)braket
comma
id|ice-&gt;spec.aureon.master
(braket
id|ch
)braket
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * DAC volume attenuation mixer control&n; */
DECL|function|wm_vol_info
r_static
r_int
id|wm_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_int
id|voices
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
id|voices
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* mute (-101dB) */
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x7F
suffix:semicolon
multiline_comment|/* 0dB */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_vol_get
r_static
r_int
id|wm_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|ofs
comma
id|voices
suffix:semicolon
id|voices
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|ofs
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|voices
suffix:semicolon
id|i
op_increment
)paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_amp
op_complement
id|WM_VOL_MUTE
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_vol_put
r_static
r_int
id|wm_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|idx
comma
id|ofs
comma
id|voices
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|voices
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|ofs
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xff
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|voices
suffix:semicolon
id|i
op_increment
)paren
(brace
id|idx
op_assign
id|WM_DAC_ATTEN
op_plus
id|ofs
op_plus
id|i
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_ne
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
)paren
(brace
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_and_assign
id|WM_VOL_MUTE
suffix:semicolon
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
suffix:semicolon
id|wm_set_vol
c_func
(paren
id|ice
comma
id|idx
comma
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
comma
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * WM8770 mute control&n; */
DECL|function|wm_mute_info
r_static
r_int
id|wm_mute_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_mute_get
r_static
r_int
id|wm_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|voices
comma
id|ofs
comma
id|i
suffix:semicolon
id|voices
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|ofs
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xFF
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|voices
suffix:semicolon
id|i
op_increment
)paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
(paren
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_amp
id|WM_VOL_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_mute_put
r_static
r_int
id|wm_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
op_assign
l_int|0
comma
id|voices
comma
id|ofs
comma
id|i
suffix:semicolon
id|voices
op_assign
id|kcontrol-&gt;private_value
op_rshift
l_int|8
suffix:semicolon
id|ofs
op_assign
id|kcontrol-&gt;private_value
op_amp
l_int|0xFF
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|voices
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|val
op_assign
(paren
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_amp
id|WM_VOL_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_ne
id|val
)paren
(brace
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_and_assign
op_complement
id|WM_VOL_MUTE
suffix:semicolon
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
ques
c_cond
l_int|0
suffix:colon
id|WM_VOL_MUTE
suffix:semicolon
id|wm_set_vol
c_func
(paren
id|ice
comma
id|ofs
op_plus
id|i
comma
id|ice-&gt;spec.aureon.vol
(braket
id|ofs
op_plus
id|i
)braket
comma
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * WM8770 master mute control&n; */
DECL|function|wm_master_mute_info
r_static
r_int
id|wm_master_mute_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_master_mute_get
r_static
r_int
id|wm_master_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|ice-&gt;spec.aureon.master
(braket
l_int|0
)braket
op_amp
id|WM_VOL_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|ice-&gt;spec.aureon.master
(braket
l_int|1
)braket
op_amp
id|WM_VOL_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_master_mute_put
r_static
r_int
id|wm_master_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|change
op_assign
l_int|0
comma
id|i
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|val
op_assign
(paren
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
op_amp
id|WM_VOL_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_ne
id|val
)paren
(brace
r_int
id|dac
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
op_and_assign
op_complement
id|WM_VOL_MUTE
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
ques
c_cond
l_int|0
suffix:colon
id|WM_VOL_MUTE
suffix:semicolon
r_for
c_loop
(paren
id|dac
op_assign
l_int|0
suffix:semicolon
id|dac
OL
id|ice-&gt;num_total_dacs
suffix:semicolon
id|dac
op_add_assign
l_int|2
)paren
id|wm_set_vol
c_func
(paren
id|ice
comma
id|WM_DAC_ATTEN
op_plus
id|dac
op_plus
id|i
comma
id|ice-&gt;spec.aureon.vol
(braket
id|dac
op_plus
id|i
)braket
comma
id|ice-&gt;spec.aureon.master
(braket
id|i
)braket
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/* digital master volume */
DECL|macro|PCM_0dB
mdefine_line|#define PCM_0dB 0xff
DECL|macro|PCM_RES
mdefine_line|#define PCM_RES 128&t;/* -64dB */
DECL|macro|PCM_MIN
mdefine_line|#define PCM_MIN (PCM_0dB - PCM_RES)
DECL|function|wm_pcm_vol_info
r_static
r_int
id|wm_pcm_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* mute (-64dB) */
id|uinfo-&gt;value.integer.max
op_assign
id|PCM_RES
suffix:semicolon
multiline_comment|/* 0dB */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_pcm_vol_get
r_static
r_int
id|wm_pcm_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|val
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_DIG_MASTER_ATTEN
)paren
op_amp
l_int|0xff
suffix:semicolon
id|val
op_assign
id|val
OG
id|PCM_MIN
ques
c_cond
(paren
id|val
op_minus
id|PCM_MIN
)paren
suffix:colon
l_int|0
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|val
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_pcm_vol_put
r_static
r_int
id|wm_pcm_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|nvol
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
id|nvol
op_assign
(paren
id|nvol
ques
c_cond
(paren
id|nvol
op_plus
id|PCM_MIN
)paren
suffix:colon
l_int|0
)paren
op_amp
l_int|0xff
suffix:semicolon
id|ovol
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_DIG_MASTER_ATTEN
)paren
op_amp
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|ovol
op_ne
id|nvol
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_DAC_DIG_MASTER_ATTEN
comma
id|nvol
)paren
suffix:semicolon
multiline_comment|/* prelatch */
id|wm_put_nocache
c_func
(paren
id|ice
comma
id|WM_DAC_DIG_MASTER_ATTEN
comma
id|nvol
op_or
l_int|0x100
)paren
suffix:semicolon
multiline_comment|/* update */
id|change
op_assign
l_int|1
suffix:semicolon
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC mute control&n; */
DECL|function|wm_adc_mute_info
r_static
r_int
id|wm_adc_mute_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_mute_get
r_static
r_int
id|wm_adc_mute_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
r_int
id|i
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|val
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_ADC_GAIN
op_plus
id|i
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
op_complement
id|val
op_rshift
l_int|5
op_amp
l_int|0x1
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_mute_put
r_static
r_int
id|wm_adc_mute_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
r_new
comma
id|old
suffix:semicolon
r_int
id|i
comma
id|change
op_assign
l_int|0
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|old
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_ADC_GAIN
op_plus
id|i
)paren
suffix:semicolon
r_new
op_assign
(paren
op_complement
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_lshift
l_int|5
op_amp
l_int|0x20
)paren
op_or
(paren
id|old
op_amp
op_complement
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
r_new
op_ne
id|old
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_ADC_GAIN
op_plus
id|i
comma
r_new
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC gain mixer control&n; */
DECL|function|wm_adc_vol_info
r_static
r_int
id|wm_adc_vol_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* -12dB */
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x1f
suffix:semicolon
multiline_comment|/* 19dB */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_vol_get
r_static
r_int
id|wm_adc_vol_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|idx
suffix:semicolon
r_int
r_int
id|vol
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|idx
op_assign
id|WM_ADC_GAIN
op_plus
id|i
suffix:semicolon
id|vol
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|idx
)paren
op_amp
l_int|0x1f
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
id|vol
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_vol_put
r_static
r_int
id|wm_adc_vol_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|idx
suffix:semicolon
r_int
r_int
id|ovol
comma
id|nvol
suffix:semicolon
r_int
id|change
op_assign
l_int|0
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|idx
op_assign
id|WM_ADC_GAIN
op_plus
id|i
suffix:semicolon
id|nvol
op_assign
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
suffix:semicolon
id|ovol
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|idx
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ovol
op_amp
l_int|0x1f
)paren
op_ne
id|nvol
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|idx
comma
id|nvol
op_or
(paren
id|ovol
op_amp
op_complement
l_int|0x1f
)paren
)paren
suffix:semicolon
id|change
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC input mux mixer control&n; */
DECL|function|wm_adc_mux_info
r_static
r_int
id|wm_adc_mux_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
)braket
op_assign
(brace
l_string|&quot;CD&quot;
comma
singleline_comment|//AIN1
l_string|&quot;Aux&quot;
comma
singleline_comment|//AIN2
l_string|&quot;Line&quot;
comma
singleline_comment|//AIN3
l_string|&quot;Mic&quot;
comma
singleline_comment|//AIN4
l_string|&quot;AC97&quot;
singleline_comment|//AIN5
)brace
suffix:semicolon
r_static
r_char
op_star
id|universe_texts
(braket
)braket
op_assign
(brace
l_string|&quot;Aux1&quot;
comma
singleline_comment|//AIN1
l_string|&quot;CD&quot;
comma
singleline_comment|//AIN2
l_string|&quot;Phono&quot;
comma
singleline_comment|//AIN3
l_string|&quot;Line&quot;
comma
singleline_comment|//AIN4
l_string|&quot;Aux2&quot;
comma
singleline_comment|//AIN5
l_string|&quot;Mic&quot;
comma
singleline_comment|//AIN6
l_string|&quot;Aux3&quot;
comma
singleline_comment|//AIN7
l_string|&quot;AC97&quot;
singleline_comment|//AIN8
)brace
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_AUREON71_UNIVERSE
)paren
(brace
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|universe_texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_mux_get
r_static
r_int
id|wm_adc_mux_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|val
suffix:semicolon
id|down
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
id|val
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_ADC_MUX
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|val
op_amp
l_int|7
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
(paren
id|val
op_rshift
l_int|4
)paren
op_amp
l_int|7
suffix:semicolon
id|up
c_func
(paren
op_amp
id|ice-&gt;gpio_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|wm_adc_mux_put
r_static
r_int
id|wm_adc_mux_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|oval
comma
id|nval
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|oval
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_ADC_MUX
)paren
suffix:semicolon
id|nval
op_assign
id|oval
op_amp
op_complement
l_int|0x77
suffix:semicolon
id|nval
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|7
suffix:semicolon
id|nval
op_or_assign
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_amp
l_int|7
)paren
op_lshift
l_int|4
suffix:semicolon
id|change
op_assign
(paren
id|oval
op_ne
id|nval
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|wm_put
c_func
(paren
id|ice
comma
id|WM_ADC_MUX
comma
id|nval
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * CS8415 Input mux&n; */
DECL|function|aureon_cs8415_mux_info
r_static
r_int
id|aureon_cs8415_mux_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_static
r_char
op_star
id|aureon_texts
(braket
)braket
op_assign
(brace
l_string|&quot;CD&quot;
comma
singleline_comment|//RXP0
l_string|&quot;Optical&quot;
singleline_comment|//RXP1
)brace
suffix:semicolon
r_static
r_char
op_star
id|prodigy_texts
(braket
)braket
op_assign
(brace
l_string|&quot;CD&quot;
comma
l_string|&quot;Coax&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_PRODIGY71
)paren
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|prodigy_texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_else
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|aureon_texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_mux_get
r_static
r_int
id|aureon_cs8415_mux_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
singleline_comment|//snd_ice1712_save_gpio_status(ice);
singleline_comment|//val = aureon_cs8415_get(ice, CS8415_CTRL2);
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|ice-&gt;spec.aureon.cs8415_mux
suffix:semicolon
singleline_comment|//snd_ice1712_restore_gpio_status(ice);
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_mux_put
r_static
r_int
id|aureon_cs8415_mux_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_int
id|oval
comma
id|nval
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|oval
op_assign
id|aureon_cs8415_get
c_func
(paren
id|ice
comma
id|CS8415_CTRL2
)paren
suffix:semicolon
id|nval
op_assign
id|oval
op_amp
op_complement
l_int|0x07
suffix:semicolon
id|nval
op_or_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_amp
l_int|7
suffix:semicolon
id|change
op_assign
(paren
id|oval
op_ne
id|nval
)paren
suffix:semicolon
r_if
c_cond
(paren
id|change
)paren
id|aureon_cs8415_put
c_func
(paren
id|ice
comma
id|CS8415_CTRL2
comma
id|nval
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ice-&gt;spec.aureon.cs8415_mux
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
DECL|function|aureon_cs8415_rate_info
r_static
r_int
id|aureon_cs8415_rate_info
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|192000
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_rate_get
r_static
r_int
id|aureon_cs8415_rate_get
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|ratio
suffix:semicolon
id|ratio
op_assign
id|aureon_cs8415_get
c_func
(paren
id|ice
comma
id|CS8415_RATIO
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
r_int
)paren
(paren
(paren
r_int
r_int
)paren
id|ratio
op_star
l_int|750
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * CS8415A Mute&n; */
DECL|function|aureon_cs8415_mute_info
r_static
r_int
id|aureon_cs8415_mute_info
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_mute_get
r_static
r_int
id|aureon_cs8415_mute_get
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|aureon_cs8415_get
c_func
(paren
id|ice
comma
id|CS8415_CTRL1
)paren
op_amp
l_int|0x20
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_mute_put
r_static
r_int
id|aureon_cs8415_mute_put
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
r_char
id|oval
comma
id|nval
suffix:semicolon
r_int
id|change
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|oval
op_assign
id|aureon_cs8415_get
c_func
(paren
id|ice
comma
id|CS8415_CTRL1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|nval
op_assign
id|oval
op_amp
op_complement
l_int|0x20
suffix:semicolon
r_else
id|nval
op_assign
id|oval
op_or
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
(paren
id|change
op_assign
(paren
id|oval
op_ne
id|nval
)paren
)paren
)paren
id|aureon_cs8415_put
c_func
(paren
id|ice
comma
id|CS8415_CTRL1
comma
id|nval
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
id|change
suffix:semicolon
)brace
multiline_comment|/*&n; * CS8415A Q-Sub info&n; */
DECL|function|aureon_cs8415_qsub_info
r_static
r_int
id|aureon_cs8415_qsub_info
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BYTES
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|10
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_qsub_get
r_static
r_int
id|aureon_cs8415_qsub_get
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|aureon_cs8415_read
c_func
(paren
id|ice
comma
id|CS8415_QSUB
comma
id|ucontrol-&gt;value.bytes.data
comma
l_int|10
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_spdif_info
r_static
r_int
id|aureon_cs8415_spdif_info
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_IEC958
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_mask_get
r_static
r_int
id|aureon_cs8415_mask_get
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|memset
c_func
(paren
id|ucontrol-&gt;value.iec958.status
comma
l_int|0xFF
comma
l_int|24
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_cs8415_spdif_get
r_static
r_int
id|aureon_cs8415_spdif_get
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|aureon_cs8415_read
c_func
(paren
id|ice
comma
id|CS8415_C_BUFFER
comma
id|ucontrol-&gt;value.iec958.status
comma
l_int|24
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Headphone Amplifier&n; */
DECL|function|aureon_set_headphone_amp
r_static
r_int
id|aureon_set_headphone_amp
c_func
(paren
id|ice1712_t
op_star
id|ice
comma
r_int
id|enable
)paren
(brace
r_int
r_int
id|tmp
comma
id|tmp2
suffix:semicolon
id|tmp2
op_assign
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
r_if
c_cond
(paren
id|enable
)paren
id|tmp
op_or_assign
id|AUREON_HP_SEL
suffix:semicolon
r_else
id|tmp
op_and_assign
op_complement
id|AUREON_HP_SEL
suffix:semicolon
r_if
c_cond
(paren
id|tmp
op_ne
id|tmp2
)paren
(brace
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_get_headphone_amp
r_static
r_int
id|aureon_get_headphone_amp
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_int
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
(paren
id|tmp
op_amp
id|AUREON_HP_SEL
)paren
op_ne
l_int|0
suffix:semicolon
)brace
DECL|macro|aureon_hpamp_info
mdefine_line|#define aureon_hpamp_info&t;aureon_mono_bool_info
DECL|function|aureon_hpamp_get
r_static
r_int
id|aureon_hpamp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|aureon_get_headphone_amp
c_func
(paren
id|ice
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_hpamp_put
r_static
r_int
id|aureon_hpamp_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_return
id|aureon_set_headphone_amp
c_func
(paren
id|ice
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Deemphasis&n; */
DECL|macro|aureon_deemp_info
mdefine_line|#define aureon_deemp_info&t;aureon_mono_bool_info
DECL|function|aureon_deemp_get
r_static
r_int
id|aureon_deemp_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
)paren
op_amp
l_int|0xf
)paren
op_eq
l_int|0xf
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_deemp_put
r_static
r_int
id|aureon_deemp_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|temp
comma
id|temp2
suffix:semicolon
id|temp2
op_assign
id|temp
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
id|temp
op_or_assign
l_int|0xf
suffix:semicolon
r_else
id|temp
op_and_assign
op_complement
l_int|0xf
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
id|temp2
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_DAC_CTRL2
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * ADC Oversampling&n; */
DECL|function|aureon_oversampling_info
r_static
r_int
id|aureon_oversampling_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|k
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
r_static
r_char
op_star
id|texts
(braket
l_int|2
)braket
op_assign
(brace
l_string|&quot;128x&quot;
comma
l_string|&quot;64x&quot;
)brace
suffix:semicolon
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_ENUMERATED
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.enumerated.items
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;value.enumerated.item
op_ge
id|uinfo-&gt;value.enumerated.items
)paren
id|uinfo-&gt;value.enumerated.item
op_assign
id|uinfo-&gt;value.enumerated.items
op_minus
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|uinfo-&gt;value.enumerated.name
comma
id|texts
(braket
id|uinfo-&gt;value.enumerated.item
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_oversampling_get
r_static
r_int
id|aureon_oversampling_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
op_assign
(paren
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MASTER
)paren
op_amp
l_int|0x8
)paren
op_eq
l_int|0x8
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|aureon_oversampling_put
r_static
r_int
id|aureon_oversampling_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
r_int
id|temp
comma
id|temp2
suffix:semicolon
id|ice1712_t
op_star
id|ice
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|temp2
op_assign
id|temp
op_assign
id|wm_get
c_func
(paren
id|ice
comma
id|WM_MASTER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ucontrol-&gt;value.enumerated.item
(braket
l_int|0
)braket
)paren
id|temp
op_or_assign
l_int|0x8
suffix:semicolon
r_else
id|temp
op_and_assign
op_complement
l_int|0x8
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
id|temp2
)paren
(brace
id|wm_put
c_func
(paren
id|ice
comma
id|WM_MASTER
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * mixers&n; */
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|aureon_dac_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Master Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_master_mute_info
comma
dot
id|get
op_assign
id|wm_master_mute_get
comma
dot
id|put
op_assign
id|wm_master_mute_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Master Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_master_vol_info
comma
dot
id|get
op_assign
id|wm_master_vol_get
comma
dot
id|put
op_assign
id|wm_master_vol_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Front Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_mute_info
comma
dot
id|get
op_assign
id|wm_mute_get
comma
dot
id|put
op_assign
id|wm_mute_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|0
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Front Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_vol_info
comma
dot
id|get
op_assign
id|wm_vol_get
comma
dot
id|put
op_assign
id|wm_vol_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|0
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Rear Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_mute_info
comma
dot
id|get
op_assign
id|wm_mute_get
comma
dot
id|put
op_assign
id|wm_mute_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|2
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Rear Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_vol_info
comma
dot
id|get
op_assign
id|wm_vol_get
comma
dot
id|put
op_assign
id|wm_vol_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|2
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Center Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_mute_info
comma
dot
id|get
op_assign
id|wm_mute_get
comma
dot
id|put
op_assign
id|wm_mute_put
comma
dot
id|private_value
op_assign
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
l_int|4
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Center Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_vol_info
comma
dot
id|get
op_assign
id|wm_vol_get
comma
dot
id|put
op_assign
id|wm_vol_put
comma
dot
id|private_value
op_assign
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
l_int|4
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;LFE Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_mute_info
comma
dot
id|get
op_assign
id|wm_mute_get
comma
dot
id|put
op_assign
id|wm_mute_put
comma
dot
id|private_value
op_assign
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
l_int|5
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;LFE Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_vol_info
comma
dot
id|get
op_assign
id|wm_vol_get
comma
dot
id|put
op_assign
id|wm_vol_put
comma
dot
id|private_value
op_assign
(paren
l_int|1
op_lshift
l_int|8
)paren
op_or
l_int|5
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Side Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_mute_info
comma
dot
id|get
op_assign
id|wm_mute_get
comma
dot
id|put
op_assign
id|wm_mute_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|6
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Side Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_vol_info
comma
dot
id|get
op_assign
id|wm_vol_get
comma
dot
id|put
op_assign
id|wm_vol_put
comma
dot
id|private_value
op_assign
(paren
l_int|2
op_lshift
l_int|8
)paren
op_or
l_int|6
)brace
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|wm_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;PCM Playback Switch&quot;
comma
dot
id|info
op_assign
id|wm_pcm_mute_info
comma
dot
id|get
op_assign
id|wm_pcm_mute_get
comma
dot
id|put
op_assign
id|wm_pcm_mute_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;PCM Playback Volume&quot;
comma
dot
id|info
op_assign
id|wm_pcm_vol_info
comma
dot
id|get
op_assign
id|wm_pcm_vol_get
comma
dot
id|put
op_assign
id|wm_pcm_vol_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Capture Switch&quot;
comma
dot
id|info
op_assign
id|wm_adc_mute_info
comma
dot
id|get
op_assign
id|wm_adc_mute_get
comma
dot
id|put
op_assign
id|wm_adc_mute_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Capture Volume&quot;
comma
dot
id|info
op_assign
id|wm_adc_vol_info
comma
dot
id|get
op_assign
id|wm_adc_vol_get
comma
dot
id|put
op_assign
id|wm_adc_vol_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Capture Source&quot;
comma
dot
id|info
op_assign
id|wm_adc_mux_info
comma
dot
id|get
op_assign
id|wm_adc_mux_get
comma
dot
id|put
op_assign
id|wm_adc_mux_put
comma
dot
id|private_value
op_assign
l_int|5
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;External Amplifier&quot;
comma
dot
id|info
op_assign
id|aureon_hpamp_info
comma
dot
id|get
op_assign
id|aureon_hpamp_get
comma
dot
id|put
op_assign
id|aureon_hpamp_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;DAC Deemphasis Switch&quot;
comma
dot
id|info
op_assign
id|aureon_deemp_info
comma
dot
id|get
op_assign
id|aureon_deemp_get
comma
dot
id|put
op_assign
id|aureon_deemp_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;ADC Oversampling&quot;
comma
dot
id|info
op_assign
id|aureon_oversampling_info
comma
dot
id|get
op_assign
id|aureon_oversampling_get
comma
dot
id|put
op_assign
id|aureon_oversampling_put
)brace
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|ac97_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;AC97 Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mmute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mmute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mmute_put
comma
dot
id|private_value
op_assign
id|AC97_MASTER
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;AC97 Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_MASTER
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;CD Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_CD
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;CD Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_CD
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Aux Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_AUX
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Aux Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_AUX
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_LINE
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_LINE
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_MIC
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_MIC
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Boost (+20dB)&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_micboost_info
comma
dot
id|get
op_assign
id|aureon_ac97_micboost_get
comma
dot
id|put
op_assign
id|aureon_ac97_micboost_put
)brace
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|universe_ac97_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;AC97 Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mmute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mmute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mmute_put
comma
dot
id|private_value
op_assign
id|AC97_MASTER
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;AC97 Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_MASTER
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;CD Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_AUX
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;CD Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_AUX
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Phono Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_CD
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Phono Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_CD
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_LINE
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Line Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_LINE
op_or
id|AUREON_AC97_STEREO
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_MIC
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_MIC
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Mic Boost (+20dB)&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_micboost_info
comma
dot
id|get
op_assign
id|aureon_ac97_micboost_get
comma
dot
id|put
op_assign
id|aureon_ac97_micboost_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Aux Playback Switch&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_mute_info
comma
dot
id|get
op_assign
id|aureon_ac97_mute_get
comma
dot
id|put
op_assign
id|aureon_ac97_mute_put
comma
dot
id|private_value
op_assign
id|AC97_VIDEO
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;Aux Playback Volume&quot;
comma
dot
id|info
op_assign
id|aureon_ac97_vol_info
comma
dot
id|get
op_assign
id|aureon_ac97_vol_get
comma
dot
id|put
op_assign
id|aureon_ac97_vol_put
comma
dot
id|private_value
op_assign
id|AC97_VIDEO
op_or
id|AUREON_AC97_STEREO
)brace
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|cs8415_controls
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|SWITCH
)paren
comma
dot
id|info
op_assign
id|aureon_cs8415_mute_info
comma
dot
id|get
op_assign
id|aureon_cs8415_mute_get
comma
dot
id|put
op_assign
id|aureon_cs8415_mute_put
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Source&quot;
comma
dot
id|info
op_assign
id|aureon_cs8415_mux_info
comma
dot
id|get
op_assign
id|aureon_cs8415_mux_get
comma
dot
id|put
op_assign
id|aureon_cs8415_mux_put
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;Q-subcode &quot;
comma
id|CAPTURE
comma
id|DEFAULT
)paren
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
dot
id|info
op_assign
id|aureon_cs8415_qsub_info
comma
dot
id|get
op_assign
id|aureon_cs8415_qsub_get
comma
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|MASK
)paren
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
comma
dot
id|info
op_assign
id|aureon_cs8415_spdif_info
comma
dot
id|get
op_assign
id|aureon_cs8415_mask_get
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|DEFAULT
)paren
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
dot
id|info
op_assign
id|aureon_cs8415_spdif_info
comma
dot
id|get
op_assign
id|aureon_cs8415_spdif_get
)brace
comma
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_PCM
comma
dot
id|name
op_assign
id|SNDRV_CTL_NAME_IEC958
c_func
(paren
l_string|&quot;&quot;
comma
id|CAPTURE
comma
id|NONE
)paren
l_string|&quot;Rate&quot;
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
dot
id|info
op_assign
id|aureon_cs8415_rate_info
comma
dot
id|get
op_assign
id|aureon_cs8415_rate_get
)brace
)brace
suffix:semicolon
DECL|function|aureon_add_controls
r_static
r_int
id|__devinit
id|aureon_add_controls
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_int
r_int
id|i
comma
id|counts
suffix:semicolon
r_int
id|err
suffix:semicolon
id|counts
op_assign
id|ARRAY_SIZE
c_func
(paren
id|aureon_dac_controls
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_AUREON51_SKY
)paren
id|counts
op_sub_assign
l_int|2
suffix:semicolon
multiline_comment|/* no side */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|counts
suffix:semicolon
id|i
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|aureon_dac_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|wm_controls
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|wm_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_AUREON71_UNIVERSE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|universe_ac97_controls
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|universe_ac97_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|ac97_controls
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
id|snd_ctl_new1
c_func
(paren
op_amp
id|ac97_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
)brace
(brace
r_int
r_char
id|id
suffix:semicolon
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|id
op_assign
id|aureon_cs8415_get
c_func
(paren
id|ice
comma
id|CS8415_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
id|id
op_ne
l_int|0x41
)paren
id|snd_printk
c_func
(paren
l_string|&quot;No CS8415 chip. Skipping CS8415 controls.&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|id
op_amp
l_int|0x0F
)paren
op_ne
l_int|0x01
)paren
id|snd_printk
c_func
(paren
l_string|&quot;Detected unsupported CS8415 rev. (%c)&bslash;n&quot;
comma
(paren
r_char
)paren
(paren
(paren
id|id
op_amp
l_int|0x0F
)paren
op_plus
l_char|&squot;A&squot;
op_minus
l_int|1
)paren
)paren
suffix:semicolon
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|cs8415_controls
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|ice-&gt;card
comma
(paren
id|kctl
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|cs8415_controls
(braket
id|i
)braket
comma
id|ice
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
id|i
OG
l_int|1
)paren
id|kctl-&gt;id.device
op_assign
id|ice-&gt;pcm-&gt;device
suffix:semicolon
)brace
)brace
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * initialize the chip&n; */
DECL|function|aureon_init
r_static
r_int
id|__devinit
id|aureon_init
c_func
(paren
id|ice1712_t
op_star
id|ice
)paren
(brace
r_static
r_int
r_int
id|wm_inits_aureon
(braket
)braket
op_assign
(brace
multiline_comment|/* These come first to reduce init pop noise */
l_int|0x1b
comma
l_int|0x044
comma
multiline_comment|/* ADC Mux (AC&squot;97 source) */
l_int|0x1c
comma
l_int|0x00B
comma
multiline_comment|/* Out Mux1 (VOUT1 = DAC+AUX, VOUT2 = DAC) */
l_int|0x1d
comma
l_int|0x009
comma
multiline_comment|/* Out Mux2 (VOUT2 = DAC, VOUT3 = DAC) */
l_int|0x18
comma
l_int|0x000
comma
multiline_comment|/* All power-up */
l_int|0x16
comma
l_int|0x122
comma
multiline_comment|/* I2S, normal polarity, 24bit */
l_int|0x17
comma
l_int|0x022
comma
multiline_comment|/* 256fs, slave mode */
l_int|0x00
comma
l_int|0
comma
multiline_comment|/* DAC1 analog mute */
l_int|0x01
comma
l_int|0
comma
multiline_comment|/* DAC2 analog mute */
l_int|0x02
comma
l_int|0
comma
multiline_comment|/* DAC3 analog mute */
l_int|0x03
comma
l_int|0
comma
multiline_comment|/* DAC4 analog mute */
l_int|0x04
comma
l_int|0
comma
multiline_comment|/* DAC5 analog mute */
l_int|0x05
comma
l_int|0
comma
multiline_comment|/* DAC6 analog mute */
l_int|0x06
comma
l_int|0
comma
multiline_comment|/* DAC7 analog mute */
l_int|0x07
comma
l_int|0
comma
multiline_comment|/* DAC8 analog mute */
l_int|0x08
comma
l_int|0x100
comma
multiline_comment|/* master analog mute */
l_int|0x09
comma
l_int|0xff
comma
multiline_comment|/* DAC1 digital full */
l_int|0x0a
comma
l_int|0xff
comma
multiline_comment|/* DAC2 digital full */
l_int|0x0b
comma
l_int|0xff
comma
multiline_comment|/* DAC3 digital full */
l_int|0x0c
comma
l_int|0xff
comma
multiline_comment|/* DAC4 digital full */
l_int|0x0d
comma
l_int|0xff
comma
multiline_comment|/* DAC5 digital full */
l_int|0x0e
comma
l_int|0xff
comma
multiline_comment|/* DAC6 digital full */
l_int|0x0f
comma
l_int|0xff
comma
multiline_comment|/* DAC7 digital full */
l_int|0x10
comma
l_int|0xff
comma
multiline_comment|/* DAC8 digital full */
l_int|0x11
comma
l_int|0x1ff
comma
multiline_comment|/* master digital full */
l_int|0x12
comma
l_int|0x000
comma
multiline_comment|/* phase normal */
l_int|0x13
comma
l_int|0x090
comma
multiline_comment|/* unmute DAC L/R */
l_int|0x14
comma
l_int|0x000
comma
multiline_comment|/* all unmute */
l_int|0x15
comma
l_int|0x000
comma
multiline_comment|/* no deemphasis, no ZFLG */
l_int|0x19
comma
l_int|0x000
comma
multiline_comment|/* -12dB ADC/L */
l_int|0x1a
comma
l_int|0x000
comma
multiline_comment|/* -12dB ADC/R */
(paren
r_int
r_int
)paren
op_minus
l_int|1
)brace
suffix:semicolon
r_static
r_int
r_int
id|wm_inits_prodigy
(braket
)braket
op_assign
(brace
multiline_comment|/* These come first to reduce init pop noise */
l_int|0x1b
comma
l_int|0x000
comma
multiline_comment|/* ADC Mux */
l_int|0x1c
comma
l_int|0x009
comma
multiline_comment|/* Out Mux1 */
l_int|0x1d
comma
l_int|0x009
comma
multiline_comment|/* Out Mux2 */
l_int|0x18
comma
l_int|0x000
comma
multiline_comment|/* All power-up */
l_int|0x16
comma
l_int|0x022
comma
multiline_comment|/* I2S, normal polarity, 24bit, high-pass on */
l_int|0x17
comma
l_int|0x006
comma
multiline_comment|/* 128fs, slave mode */
l_int|0x00
comma
l_int|0
comma
multiline_comment|/* DAC1 analog mute */
l_int|0x01
comma
l_int|0
comma
multiline_comment|/* DAC2 analog mute */
l_int|0x02
comma
l_int|0
comma
multiline_comment|/* DAC3 analog mute */
l_int|0x03
comma
l_int|0
comma
multiline_comment|/* DAC4 analog mute */
l_int|0x04
comma
l_int|0
comma
multiline_comment|/* DAC5 analog mute */
l_int|0x05
comma
l_int|0
comma
multiline_comment|/* DAC6 analog mute */
l_int|0x06
comma
l_int|0
comma
multiline_comment|/* DAC7 analog mute */
l_int|0x07
comma
l_int|0
comma
multiline_comment|/* DAC8 analog mute */
l_int|0x08
comma
l_int|0x100
comma
multiline_comment|/* master analog mute */
l_int|0x09
comma
l_int|0x7f
comma
multiline_comment|/* DAC1 digital full */
l_int|0x0a
comma
l_int|0x7f
comma
multiline_comment|/* DAC2 digital full */
l_int|0x0b
comma
l_int|0x7f
comma
multiline_comment|/* DAC3 digital full */
l_int|0x0c
comma
l_int|0x7f
comma
multiline_comment|/* DAC4 digital full */
l_int|0x0d
comma
l_int|0x7f
comma
multiline_comment|/* DAC5 digital full */
l_int|0x0e
comma
l_int|0x7f
comma
multiline_comment|/* DAC6 digital full */
l_int|0x0f
comma
l_int|0x7f
comma
multiline_comment|/* DAC7 digital full */
l_int|0x10
comma
l_int|0x7f
comma
multiline_comment|/* DAC8 digital full */
l_int|0x11
comma
l_int|0x1FF
comma
multiline_comment|/* master digital full */
l_int|0x12
comma
l_int|0x000
comma
multiline_comment|/* phase normal */
l_int|0x13
comma
l_int|0x090
comma
multiline_comment|/* unmute DAC L/R */
l_int|0x14
comma
l_int|0x000
comma
multiline_comment|/* all unmute */
l_int|0x15
comma
l_int|0x000
comma
multiline_comment|/* no deemphasis, no ZFLG */
l_int|0x19
comma
l_int|0x000
comma
multiline_comment|/* -12dB ADC/L */
l_int|0x1a
comma
l_int|0x000
comma
multiline_comment|/* -12dB ADC/R */
(paren
r_int
r_int
)paren
op_minus
l_int|1
)brace
suffix:semicolon
r_static
r_int
r_int
id|cs_inits
(braket
)braket
op_assign
(brace
l_int|0x0441
comma
multiline_comment|/* RUN */
l_int|0x0180
comma
multiline_comment|/* no mute, OMCK output on RMCK pin */
l_int|0x0201
comma
multiline_comment|/* S/PDIF source on RXP1 */
l_int|0x0605
comma
multiline_comment|/* slave, 24bit, MSB on second OSCLK, SDOUT for right channel when OLRCK is high */
(paren
r_int
r_int
)paren
op_minus
l_int|1
)brace
suffix:semicolon
r_int
r_int
id|tmp
suffix:semicolon
r_int
r_int
op_star
id|p
suffix:semicolon
r_int
id|err
comma
id|i
suffix:semicolon
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_AUREON51_SKY
)paren
(brace
id|ice-&gt;num_total_dacs
op_assign
l_int|6
suffix:semicolon
id|ice-&gt;num_total_adcs
op_assign
l_int|2
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* aureon 7.1 and prodigy 7.1 */
id|ice-&gt;num_total_dacs
op_assign
l_int|8
suffix:semicolon
id|ice-&gt;num_total_adcs
op_assign
l_int|2
suffix:semicolon
)brace
multiline_comment|/* to remeber the register values of CS8415 */
id|ice-&gt;akm
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
id|akm4xxx_t
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ice-&gt;akm
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|ice-&gt;akm_codecs
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|aureon_ac97_init
c_func
(paren
id|ice
)paren
)paren
op_ne
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|snd_ice1712_gpio_set_dir
c_func
(paren
id|ice
comma
l_int|0x5fffff
)paren
suffix:semicolon
multiline_comment|/* fix this for the time being */
multiline_comment|/* reset the wm codec as the SPI mode */
id|snd_ice1712_save_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|snd_ice1712_gpio_set_mask
c_func
(paren
id|ice
comma
op_complement
(paren
id|AUREON_WM_RESET
op_or
id|AUREON_WM_CS
op_or
id|AUREON_CS8415_CS
op_or
id|AUREON_HP_SEL
)paren
)paren
suffix:semicolon
id|tmp
op_assign
id|snd_ice1712_gpio_read
c_func
(paren
id|ice
)paren
suffix:semicolon
id|tmp
op_and_assign
op_complement
id|AUREON_WM_RESET
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_WM_CS
op_or
id|AUREON_CS8415_CS
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|tmp
op_or_assign
id|AUREON_WM_RESET
suffix:semicolon
id|snd_ice1712_gpio_write
c_func
(paren
id|ice
comma
id|tmp
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
multiline_comment|/* initialize WM8770 codec */
r_if
c_cond
(paren
id|ice-&gt;eeprom.subvendor
op_eq
id|VT1724_SUBDEVICE_PRODIGY71
)paren
id|p
op_assign
id|wm_inits_prodigy
suffix:semicolon
r_else
id|p
op_assign
id|wm_inits_aureon
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
op_star
id|p
op_ne
(paren
r_int
r_int
)paren
op_minus
l_int|1
suffix:semicolon
id|p
op_add_assign
l_int|2
)paren
id|wm_put
c_func
(paren
id|ice
comma
id|p
(braket
l_int|0
)braket
comma
id|p
(braket
l_int|1
)braket
)paren
suffix:semicolon
multiline_comment|/* initialize CS8415A codec */
r_for
c_loop
(paren
id|p
op_assign
id|cs_inits
suffix:semicolon
op_star
id|p
op_ne
(paren
r_int
r_int
)paren
op_minus
l_int|1
suffix:semicolon
id|p
op_increment
)paren
id|aureon_spi_write
c_func
(paren
id|ice
comma
id|AUREON_CS8415_CS
comma
op_star
id|p
op_or
l_int|0x200000
comma
l_int|24
)paren
suffix:semicolon
id|ice-&gt;spec.aureon.cs8415_mux
op_assign
l_int|1
suffix:semicolon
id|aureon_set_headphone_amp
c_func
(paren
id|ice
comma
l_int|1
)paren
suffix:semicolon
id|snd_ice1712_restore_gpio_status
c_func
(paren
id|ice
)paren
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
l_int|0
)braket
op_assign
id|WM_VOL_MUTE
suffix:semicolon
id|ice-&gt;spec.aureon.master
(braket
l_int|1
)braket
op_assign
id|WM_VOL_MUTE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ice-&gt;num_total_dacs
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ice-&gt;spec.aureon.vol
(braket
id|i
)braket
op_assign
id|WM_VOL_MUTE
suffix:semicolon
id|wm_set_vol
c_func
(paren
id|ice
comma
id|i
comma
id|ice-&gt;spec.aureon.vol
(braket
id|i
)braket
comma
id|ice-&gt;spec.aureon.master
(braket
id|i
op_mod
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Aureon boards don&squot;t provide the EEPROM data except for the vendor IDs.&n; * hence the driver needs to sets up it properly.&n; */
DECL|variable|__devinitdata
r_static
r_int
r_char
id|aureon51_eeprom
(braket
)braket
id|__devinitdata
op_assign
(brace
l_int|0x0a
comma
multiline_comment|/* SYSCONF: clock 512, spdif-in/ADC, 3DACs */
l_int|0x80
comma
multiline_comment|/* ACLINK: I2S */
l_int|0xfc
comma
multiline_comment|/* I2S: vol, 96k, 24bit, 192k */
l_int|0xc3
comma
multiline_comment|/* SPDIF: out-en, out-int, spdif-in */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR1 */
l_int|0x5f
comma
multiline_comment|/* GPIO_DIR2 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK1 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK2 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE1 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE2 */
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
r_char
id|aureon71_eeprom
(braket
)braket
id|__devinitdata
op_assign
(brace
l_int|0x0b
comma
multiline_comment|/* SYSCONF: clock 512, spdif-in/ADC, 4DACs */
l_int|0x80
comma
multiline_comment|/* ACLINK: I2S */
l_int|0xfc
comma
multiline_comment|/* I2S: vol, 96k, 24bit, 192k */
l_int|0xc3
comma
multiline_comment|/* SPDIF: out-en, out-int, spdif-in */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR1 */
l_int|0x5f
comma
multiline_comment|/* GPIO_DIR2 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK1 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK2 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE1 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE2 */
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
r_char
id|prodigy71_eeprom
(braket
)braket
id|__devinitdata
op_assign
(brace
l_int|0x0b
comma
multiline_comment|/* SYSCONF: clock 512, spdif-in/ADC, 4DACs */
l_int|0x80
comma
multiline_comment|/* ACLINK: I2S */
l_int|0xfc
comma
multiline_comment|/* I2S: vol, 96k, 24bit, 192k */
l_int|0xc3
comma
multiline_comment|/* SPDIF: out-en, out-int, spdif-in */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR */
l_int|0xff
comma
multiline_comment|/* GPIO_DIR1 */
l_int|0x5f
comma
multiline_comment|/* GPIO_DIR2 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK1 */
l_int|0x00
comma
multiline_comment|/* GPIO_MASK2 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE1 */
l_int|0x00
comma
multiline_comment|/* GPIO_STATE2 */
)brace
suffix:semicolon
multiline_comment|/* entry point */
DECL|variable|__devinitdata
r_struct
id|snd_ice1712_card_info
id|snd_vt1724_aureon_cards
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
dot
id|subvendor
op_assign
id|VT1724_SUBDEVICE_AUREON51_SKY
comma
dot
id|name
op_assign
l_string|&quot;Terratec Aureon 5.1-Sky&quot;
comma
dot
id|model
op_assign
l_string|&quot;aureon51&quot;
comma
dot
id|chip_init
op_assign
id|aureon_init
comma
dot
id|build_controls
op_assign
id|aureon_add_controls
comma
dot
id|eeprom_size
op_assign
r_sizeof
(paren
id|aureon51_eeprom
)paren
comma
dot
id|eeprom_data
op_assign
id|aureon51_eeprom
comma
dot
id|driver
op_assign
l_string|&quot;Aureon51&quot;
comma
)brace
comma
(brace
dot
id|subvendor
op_assign
id|VT1724_SUBDEVICE_AUREON71_SPACE
comma
dot
id|name
op_assign
l_string|&quot;Terratec Aureon 7.1-Space&quot;
comma
dot
id|model
op_assign
l_string|&quot;aureon71&quot;
comma
dot
id|chip_init
op_assign
id|aureon_init
comma
dot
id|build_controls
op_assign
id|aureon_add_controls
comma
dot
id|eeprom_size
op_assign
r_sizeof
(paren
id|aureon71_eeprom
)paren
comma
dot
id|eeprom_data
op_assign
id|aureon71_eeprom
comma
dot
id|driver
op_assign
l_string|&quot;Aureon71&quot;
comma
)brace
comma
(brace
dot
id|subvendor
op_assign
id|VT1724_SUBDEVICE_AUREON71_UNIVERSE
comma
dot
id|name
op_assign
l_string|&quot;Terratec Aureon 7.1-Universe&quot;
comma
dot
id|model
op_assign
l_string|&quot;universe&quot;
comma
dot
id|chip_init
op_assign
id|aureon_init
comma
dot
id|build_controls
op_assign
id|aureon_add_controls
comma
dot
id|eeprom_size
op_assign
r_sizeof
(paren
id|aureon71_eeprom
)paren
comma
dot
id|eeprom_data
op_assign
id|aureon71_eeprom
comma
dot
id|driver
op_assign
l_string|&quot;Aureon71Universe&quot;
comma
)brace
comma
(brace
dot
id|subvendor
op_assign
id|VT1724_SUBDEVICE_PRODIGY71
comma
dot
id|name
op_assign
l_string|&quot;Audiotrak Prodigy 7.1&quot;
comma
dot
id|model
op_assign
l_string|&quot;prodigy71&quot;
comma
dot
id|chip_init
op_assign
id|aureon_init
comma
dot
id|build_controls
op_assign
id|aureon_add_controls
comma
dot
id|eeprom_size
op_assign
r_sizeof
(paren
id|prodigy71_eeprom
)paren
comma
dot
id|eeprom_data
op_assign
id|prodigy71_eeprom
comma
dot
id|driver
op_assign
l_string|&quot;Prodigy71&quot;
comma
multiline_comment|/* should be identical with Aureon71 */
)brace
comma
(brace
)brace
multiline_comment|/* terminator */
)brace
suffix:semicolon
eof
