multiline_comment|/*&n; *  Routines for Trident 4DWave NX/DX soundcards - Synthesizer&n; *  Copyright (c) by Scott McNab &lt;jedi@tartarus.uwa.edu.au&gt;&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/trident.h&gt;
macro_line|#include &lt;sound/seq_device.h&gt;
id|EXPORT_NO_SYMBOLS
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Scott McNab &lt;jedi@tartarus.uwa.edu.au&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Routines for Trident 4DWave NX/DX soundcards - Synthesizer&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
multiline_comment|/* linear to log pan conversion table (4.2 channel attenuation format) */
DECL|variable|pan_table
r_static
r_int
r_int
id|pan_table
(braket
l_int|63
)braket
op_assign
(brace
l_int|7959
comma
l_int|7733
comma
l_int|7514
comma
l_int|7301
comma
l_int|7093
comma
l_int|6892
comma
l_int|6697
comma
l_int|6507
comma
l_int|6322
comma
l_int|6143
comma
l_int|5968
comma
l_int|5799
comma
l_int|5634
comma
l_int|5475
comma
l_int|5319
comma
l_int|5168
comma
l_int|5022
comma
l_int|4879
comma
l_int|4741
comma
l_int|4606
comma
l_int|4475
comma
l_int|4349
comma
l_int|4225
comma
l_int|4105
comma
l_int|3989
comma
l_int|3876
comma
l_int|3766
comma
l_int|3659
comma
l_int|3555
comma
l_int|3454
comma
l_int|3356
comma
l_int|3261
comma
l_int|3168
comma
l_int|3078
comma
l_int|2991
comma
l_int|2906
comma
l_int|2824
comma
l_int|2744
comma
l_int|2666
comma
l_int|2590
comma
l_int|2517
comma
l_int|2445
comma
l_int|2376
comma
l_int|2308
comma
l_int|2243
comma
l_int|2179
comma
l_int|2117
comma
l_int|2057
comma
l_int|1999
comma
l_int|1942
comma
l_int|1887
comma
l_int|1833
comma
l_int|1781
comma
l_int|1731
comma
l_int|1682
comma
l_int|1634
comma
l_int|1588
comma
l_int|1543
comma
l_int|1499
comma
l_int|1456
comma
l_int|1415
comma
l_int|1375
comma
l_int|1336
)brace
suffix:semicolon
DECL|macro|LOG_TABLE_SIZE
mdefine_line|#define LOG_TABLE_SIZE 386
multiline_comment|/* Linear half-attenuation to log conversion table in the format:&n; *   {linear volume, logarithmic attenuation equivalent}, ...&n; *&n; * Provides conversion from a linear half-volume value in the range&n; * [0,8192] to a logarithmic attenuation value in the range 0 to 6.02dB.&n; * Halving the linear volume is equivalent to an additional 6dB of &n; * logarithmic attenuation. The algorithm used in log_from_linear()&n; * therefore uses this table as follows:&n; * &n; * - loop and for every time the volume is less than half the maximum &n; *   volume (16384), add another 6dB and halve the maximum value used&n; *   for this comparison.&n; * - when the volume is greater than half the maximum volume, take&n; *   the difference of the volume to half volume (in the range [0,8192])&n; *   and look up the log_table[] to find the nearest entry.&n; * - take the logarithic component of this entry and add it to the &n; *   resulting attenuation.&n; *&n; * Thus this routine provides a linear-&gt;log conversion for a range of&n; * [0,16384] using only 386 table entries&n; *&n; * Note: although this table stores log attenuation in 8.8 format, values&n; * were only calculated for 6 bits fractional precision, since that is&n; * the most precision offered by the trident hardware.&n; */
DECL|variable|log_table
r_static
r_int
r_int
id|log_table
(braket
id|LOG_TABLE_SIZE
op_star
l_int|2
)braket
op_assign
(brace
l_int|4
comma
l_int|0x0604
comma
l_int|19
comma
l_int|0x0600
comma
l_int|34
comma
l_int|0x05fc
comma
l_int|49
comma
l_int|0x05f8
comma
l_int|63
comma
l_int|0x05f4
comma
l_int|78
comma
l_int|0x05f0
comma
l_int|93
comma
l_int|0x05ec
comma
l_int|108
comma
l_int|0x05e8
comma
l_int|123
comma
l_int|0x05e4
comma
l_int|138
comma
l_int|0x05e0
comma
l_int|153
comma
l_int|0x05dc
comma
l_int|168
comma
l_int|0x05d8
comma
l_int|183
comma
l_int|0x05d4
comma
l_int|198
comma
l_int|0x05d0
comma
l_int|213
comma
l_int|0x05cc
comma
l_int|228
comma
l_int|0x05c8
comma
l_int|244
comma
l_int|0x05c4
comma
l_int|259
comma
l_int|0x05c0
comma
l_int|274
comma
l_int|0x05bc
comma
l_int|289
comma
l_int|0x05b8
comma
l_int|304
comma
l_int|0x05b4
comma
l_int|320
comma
l_int|0x05b0
comma
l_int|335
comma
l_int|0x05ac
comma
l_int|350
comma
l_int|0x05a8
comma
l_int|366
comma
l_int|0x05a4
comma
l_int|381
comma
l_int|0x05a0
comma
l_int|397
comma
l_int|0x059c
comma
l_int|412
comma
l_int|0x0598
comma
l_int|428
comma
l_int|0x0594
comma
l_int|443
comma
l_int|0x0590
comma
l_int|459
comma
l_int|0x058c
comma
l_int|474
comma
l_int|0x0588
comma
l_int|490
comma
l_int|0x0584
comma
l_int|506
comma
l_int|0x0580
comma
l_int|521
comma
l_int|0x057c
comma
l_int|537
comma
l_int|0x0578
comma
l_int|553
comma
l_int|0x0574
comma
l_int|568
comma
l_int|0x0570
comma
l_int|584
comma
l_int|0x056c
comma
l_int|600
comma
l_int|0x0568
comma
l_int|616
comma
l_int|0x0564
comma
l_int|632
comma
l_int|0x0560
comma
l_int|647
comma
l_int|0x055c
comma
l_int|663
comma
l_int|0x0558
comma
l_int|679
comma
l_int|0x0554
comma
l_int|695
comma
l_int|0x0550
comma
l_int|711
comma
l_int|0x054c
comma
l_int|727
comma
l_int|0x0548
comma
l_int|743
comma
l_int|0x0544
comma
l_int|759
comma
l_int|0x0540
comma
l_int|776
comma
l_int|0x053c
comma
l_int|792
comma
l_int|0x0538
comma
l_int|808
comma
l_int|0x0534
comma
l_int|824
comma
l_int|0x0530
comma
l_int|840
comma
l_int|0x052c
comma
l_int|857
comma
l_int|0x0528
comma
l_int|873
comma
l_int|0x0524
comma
l_int|889
comma
l_int|0x0520
comma
l_int|906
comma
l_int|0x051c
comma
l_int|922
comma
l_int|0x0518
comma
l_int|938
comma
l_int|0x0514
comma
l_int|955
comma
l_int|0x0510
comma
l_int|971
comma
l_int|0x050c
comma
l_int|988
comma
l_int|0x0508
comma
l_int|1004
comma
l_int|0x0504
comma
l_int|1021
comma
l_int|0x0500
comma
l_int|1037
comma
l_int|0x04fc
comma
l_int|1054
comma
l_int|0x04f8
comma
l_int|1071
comma
l_int|0x04f4
comma
l_int|1087
comma
l_int|0x04f0
comma
l_int|1104
comma
l_int|0x04ec
comma
l_int|1121
comma
l_int|0x04e8
comma
l_int|1138
comma
l_int|0x04e4
comma
l_int|1154
comma
l_int|0x04e0
comma
l_int|1171
comma
l_int|0x04dc
comma
l_int|1188
comma
l_int|0x04d8
comma
l_int|1205
comma
l_int|0x04d4
comma
l_int|1222
comma
l_int|0x04d0
comma
l_int|1239
comma
l_int|0x04cc
comma
l_int|1256
comma
l_int|0x04c8
comma
l_int|1273
comma
l_int|0x04c4
comma
l_int|1290
comma
l_int|0x04c0
comma
l_int|1307
comma
l_int|0x04bc
comma
l_int|1324
comma
l_int|0x04b8
comma
l_int|1341
comma
l_int|0x04b4
comma
l_int|1358
comma
l_int|0x04b0
comma
l_int|1376
comma
l_int|0x04ac
comma
l_int|1393
comma
l_int|0x04a8
comma
l_int|1410
comma
l_int|0x04a4
comma
l_int|1427
comma
l_int|0x04a0
comma
l_int|1445
comma
l_int|0x049c
comma
l_int|1462
comma
l_int|0x0498
comma
l_int|1479
comma
l_int|0x0494
comma
l_int|1497
comma
l_int|0x0490
comma
l_int|1514
comma
l_int|0x048c
comma
l_int|1532
comma
l_int|0x0488
comma
l_int|1549
comma
l_int|0x0484
comma
l_int|1567
comma
l_int|0x0480
comma
l_int|1584
comma
l_int|0x047c
comma
l_int|1602
comma
l_int|0x0478
comma
l_int|1620
comma
l_int|0x0474
comma
l_int|1637
comma
l_int|0x0470
comma
l_int|1655
comma
l_int|0x046c
comma
l_int|1673
comma
l_int|0x0468
comma
l_int|1690
comma
l_int|0x0464
comma
l_int|1708
comma
l_int|0x0460
comma
l_int|1726
comma
l_int|0x045c
comma
l_int|1744
comma
l_int|0x0458
comma
l_int|1762
comma
l_int|0x0454
comma
l_int|1780
comma
l_int|0x0450
comma
l_int|1798
comma
l_int|0x044c
comma
l_int|1816
comma
l_int|0x0448
comma
l_int|1834
comma
l_int|0x0444
comma
l_int|1852
comma
l_int|0x0440
comma
l_int|1870
comma
l_int|0x043c
comma
l_int|1888
comma
l_int|0x0438
comma
l_int|1906
comma
l_int|0x0434
comma
l_int|1924
comma
l_int|0x0430
comma
l_int|1943
comma
l_int|0x042c
comma
l_int|1961
comma
l_int|0x0428
comma
l_int|1979
comma
l_int|0x0424
comma
l_int|1997
comma
l_int|0x0420
comma
l_int|2016
comma
l_int|0x041c
comma
l_int|2034
comma
l_int|0x0418
comma
l_int|2053
comma
l_int|0x0414
comma
l_int|2071
comma
l_int|0x0410
comma
l_int|2089
comma
l_int|0x040c
comma
l_int|2108
comma
l_int|0x0408
comma
l_int|2127
comma
l_int|0x0404
comma
l_int|2145
comma
l_int|0x0400
comma
l_int|2164
comma
l_int|0x03fc
comma
l_int|2182
comma
l_int|0x03f8
comma
l_int|2201
comma
l_int|0x03f4
comma
l_int|2220
comma
l_int|0x03f0
comma
l_int|2239
comma
l_int|0x03ec
comma
l_int|2257
comma
l_int|0x03e8
comma
l_int|2276
comma
l_int|0x03e4
comma
l_int|2295
comma
l_int|0x03e0
comma
l_int|2314
comma
l_int|0x03dc
comma
l_int|2333
comma
l_int|0x03d8
comma
l_int|2352
comma
l_int|0x03d4
comma
l_int|2371
comma
l_int|0x03d0
comma
l_int|2390
comma
l_int|0x03cc
comma
l_int|2409
comma
l_int|0x03c8
comma
l_int|2428
comma
l_int|0x03c4
comma
l_int|2447
comma
l_int|0x03c0
comma
l_int|2466
comma
l_int|0x03bc
comma
l_int|2485
comma
l_int|0x03b8
comma
l_int|2505
comma
l_int|0x03b4
comma
l_int|2524
comma
l_int|0x03b0
comma
l_int|2543
comma
l_int|0x03ac
comma
l_int|2562
comma
l_int|0x03a8
comma
l_int|2582
comma
l_int|0x03a4
comma
l_int|2601
comma
l_int|0x03a0
comma
l_int|2621
comma
l_int|0x039c
comma
l_int|2640
comma
l_int|0x0398
comma
l_int|2660
comma
l_int|0x0394
comma
l_int|2679
comma
l_int|0x0390
comma
l_int|2699
comma
l_int|0x038c
comma
l_int|2718
comma
l_int|0x0388
comma
l_int|2738
comma
l_int|0x0384
comma
l_int|2758
comma
l_int|0x0380
comma
l_int|2777
comma
l_int|0x037c
comma
l_int|2797
comma
l_int|0x0378
comma
l_int|2817
comma
l_int|0x0374
comma
l_int|2837
comma
l_int|0x0370
comma
l_int|2857
comma
l_int|0x036c
comma
l_int|2876
comma
l_int|0x0368
comma
l_int|2896
comma
l_int|0x0364
comma
l_int|2916
comma
l_int|0x0360
comma
l_int|2936
comma
l_int|0x035c
comma
l_int|2956
comma
l_int|0x0358
comma
l_int|2976
comma
l_int|0x0354
comma
l_int|2997
comma
l_int|0x0350
comma
l_int|3017
comma
l_int|0x034c
comma
l_int|3037
comma
l_int|0x0348
comma
l_int|3057
comma
l_int|0x0344
comma
l_int|3077
comma
l_int|0x0340
comma
l_int|3098
comma
l_int|0x033c
comma
l_int|3118
comma
l_int|0x0338
comma
l_int|3138
comma
l_int|0x0334
comma
l_int|3159
comma
l_int|0x0330
comma
l_int|3179
comma
l_int|0x032c
comma
l_int|3200
comma
l_int|0x0328
comma
l_int|3220
comma
l_int|0x0324
comma
l_int|3241
comma
l_int|0x0320
comma
l_int|3261
comma
l_int|0x031c
comma
l_int|3282
comma
l_int|0x0318
comma
l_int|3303
comma
l_int|0x0314
comma
l_int|3323
comma
l_int|0x0310
comma
l_int|3344
comma
l_int|0x030c
comma
l_int|3365
comma
l_int|0x0308
comma
l_int|3386
comma
l_int|0x0304
comma
l_int|3406
comma
l_int|0x0300
comma
l_int|3427
comma
l_int|0x02fc
comma
l_int|3448
comma
l_int|0x02f8
comma
l_int|3469
comma
l_int|0x02f4
comma
l_int|3490
comma
l_int|0x02f0
comma
l_int|3511
comma
l_int|0x02ec
comma
l_int|3532
comma
l_int|0x02e8
comma
l_int|3553
comma
l_int|0x02e4
comma
l_int|3575
comma
l_int|0x02e0
comma
l_int|3596
comma
l_int|0x02dc
comma
l_int|3617
comma
l_int|0x02d8
comma
l_int|3638
comma
l_int|0x02d4
comma
l_int|3660
comma
l_int|0x02d0
comma
l_int|3681
comma
l_int|0x02cc
comma
l_int|3702
comma
l_int|0x02c8
comma
l_int|3724
comma
l_int|0x02c4
comma
l_int|3745
comma
l_int|0x02c0
comma
l_int|3767
comma
l_int|0x02bc
comma
l_int|3788
comma
l_int|0x02b8
comma
l_int|3810
comma
l_int|0x02b4
comma
l_int|3831
comma
l_int|0x02b0
comma
l_int|3853
comma
l_int|0x02ac
comma
l_int|3875
comma
l_int|0x02a8
comma
l_int|3896
comma
l_int|0x02a4
comma
l_int|3918
comma
l_int|0x02a0
comma
l_int|3940
comma
l_int|0x029c
comma
l_int|3962
comma
l_int|0x0298
comma
l_int|3984
comma
l_int|0x0294
comma
l_int|4006
comma
l_int|0x0290
comma
l_int|4028
comma
l_int|0x028c
comma
l_int|4050
comma
l_int|0x0288
comma
l_int|4072
comma
l_int|0x0284
comma
l_int|4094
comma
l_int|0x0280
comma
l_int|4116
comma
l_int|0x027c
comma
l_int|4138
comma
l_int|0x0278
comma
l_int|4160
comma
l_int|0x0274
comma
l_int|4182
comma
l_int|0x0270
comma
l_int|4205
comma
l_int|0x026c
comma
l_int|4227
comma
l_int|0x0268
comma
l_int|4249
comma
l_int|0x0264
comma
l_int|4272
comma
l_int|0x0260
comma
l_int|4294
comma
l_int|0x025c
comma
l_int|4317
comma
l_int|0x0258
comma
l_int|4339
comma
l_int|0x0254
comma
l_int|4362
comma
l_int|0x0250
comma
l_int|4384
comma
l_int|0x024c
comma
l_int|4407
comma
l_int|0x0248
comma
l_int|4430
comma
l_int|0x0244
comma
l_int|4453
comma
l_int|0x0240
comma
l_int|4475
comma
l_int|0x023c
comma
l_int|4498
comma
l_int|0x0238
comma
l_int|4521
comma
l_int|0x0234
comma
l_int|4544
comma
l_int|0x0230
comma
l_int|4567
comma
l_int|0x022c
comma
l_int|4590
comma
l_int|0x0228
comma
l_int|4613
comma
l_int|0x0224
comma
l_int|4636
comma
l_int|0x0220
comma
l_int|4659
comma
l_int|0x021c
comma
l_int|4682
comma
l_int|0x0218
comma
l_int|4705
comma
l_int|0x0214
comma
l_int|4728
comma
l_int|0x0210
comma
l_int|4752
comma
l_int|0x020c
comma
l_int|4775
comma
l_int|0x0208
comma
l_int|4798
comma
l_int|0x0204
comma
l_int|4822
comma
l_int|0x0200
comma
l_int|4845
comma
l_int|0x01fc
comma
l_int|4869
comma
l_int|0x01f8
comma
l_int|4892
comma
l_int|0x01f4
comma
l_int|4916
comma
l_int|0x01f0
comma
l_int|4939
comma
l_int|0x01ec
comma
l_int|4963
comma
l_int|0x01e8
comma
l_int|4987
comma
l_int|0x01e4
comma
l_int|5010
comma
l_int|0x01e0
comma
l_int|5034
comma
l_int|0x01dc
comma
l_int|5058
comma
l_int|0x01d8
comma
l_int|5082
comma
l_int|0x01d4
comma
l_int|5106
comma
l_int|0x01d0
comma
l_int|5130
comma
l_int|0x01cc
comma
l_int|5154
comma
l_int|0x01c8
comma
l_int|5178
comma
l_int|0x01c4
comma
l_int|5202
comma
l_int|0x01c0
comma
l_int|5226
comma
l_int|0x01bc
comma
l_int|5250
comma
l_int|0x01b8
comma
l_int|5274
comma
l_int|0x01b4
comma
l_int|5299
comma
l_int|0x01b0
comma
l_int|5323
comma
l_int|0x01ac
comma
l_int|5347
comma
l_int|0x01a8
comma
l_int|5372
comma
l_int|0x01a4
comma
l_int|5396
comma
l_int|0x01a0
comma
l_int|5420
comma
l_int|0x019c
comma
l_int|5445
comma
l_int|0x0198
comma
l_int|5469
comma
l_int|0x0194
comma
l_int|5494
comma
l_int|0x0190
comma
l_int|5519
comma
l_int|0x018c
comma
l_int|5543
comma
l_int|0x0188
comma
l_int|5568
comma
l_int|0x0184
comma
l_int|5593
comma
l_int|0x0180
comma
l_int|5618
comma
l_int|0x017c
comma
l_int|5643
comma
l_int|0x0178
comma
l_int|5668
comma
l_int|0x0174
comma
l_int|5692
comma
l_int|0x0170
comma
l_int|5717
comma
l_int|0x016c
comma
l_int|5743
comma
l_int|0x0168
comma
l_int|5768
comma
l_int|0x0164
comma
l_int|5793
comma
l_int|0x0160
comma
l_int|5818
comma
l_int|0x015c
comma
l_int|5843
comma
l_int|0x0158
comma
l_int|5868
comma
l_int|0x0154
comma
l_int|5894
comma
l_int|0x0150
comma
l_int|5919
comma
l_int|0x014c
comma
l_int|5945
comma
l_int|0x0148
comma
l_int|5970
comma
l_int|0x0144
comma
l_int|5995
comma
l_int|0x0140
comma
l_int|6021
comma
l_int|0x013c
comma
l_int|6047
comma
l_int|0x0138
comma
l_int|6072
comma
l_int|0x0134
comma
l_int|6098
comma
l_int|0x0130
comma
l_int|6124
comma
l_int|0x012c
comma
l_int|6149
comma
l_int|0x0128
comma
l_int|6175
comma
l_int|0x0124
comma
l_int|6201
comma
l_int|0x0120
comma
l_int|6227
comma
l_int|0x011c
comma
l_int|6253
comma
l_int|0x0118
comma
l_int|6279
comma
l_int|0x0114
comma
l_int|6305
comma
l_int|0x0110
comma
l_int|6331
comma
l_int|0x010c
comma
l_int|6357
comma
l_int|0x0108
comma
l_int|6384
comma
l_int|0x0104
comma
l_int|6410
comma
l_int|0x0100
comma
l_int|6436
comma
l_int|0x00fc
comma
l_int|6462
comma
l_int|0x00f8
comma
l_int|6489
comma
l_int|0x00f4
comma
l_int|6515
comma
l_int|0x00f0
comma
l_int|6542
comma
l_int|0x00ec
comma
l_int|6568
comma
l_int|0x00e8
comma
l_int|6595
comma
l_int|0x00e4
comma
l_int|6621
comma
l_int|0x00e0
comma
l_int|6648
comma
l_int|0x00dc
comma
l_int|6675
comma
l_int|0x00d8
comma
l_int|6702
comma
l_int|0x00d4
comma
l_int|6728
comma
l_int|0x00d0
comma
l_int|6755
comma
l_int|0x00cc
comma
l_int|6782
comma
l_int|0x00c8
comma
l_int|6809
comma
l_int|0x00c4
comma
l_int|6836
comma
l_int|0x00c0
comma
l_int|6863
comma
l_int|0x00bc
comma
l_int|6890
comma
l_int|0x00b8
comma
l_int|6917
comma
l_int|0x00b4
comma
l_int|6945
comma
l_int|0x00b0
comma
l_int|6972
comma
l_int|0x00ac
comma
l_int|6999
comma
l_int|0x00a8
comma
l_int|7027
comma
l_int|0x00a4
comma
l_int|7054
comma
l_int|0x00a0
comma
l_int|7081
comma
l_int|0x009c
comma
l_int|7109
comma
l_int|0x0098
comma
l_int|7136
comma
l_int|0x0094
comma
l_int|7164
comma
l_int|0x0090
comma
l_int|7192
comma
l_int|0x008c
comma
l_int|7219
comma
l_int|0x0088
comma
l_int|7247
comma
l_int|0x0084
comma
l_int|7275
comma
l_int|0x0080
comma
l_int|7303
comma
l_int|0x007c
comma
l_int|7331
comma
l_int|0x0078
comma
l_int|7359
comma
l_int|0x0074
comma
l_int|7387
comma
l_int|0x0070
comma
l_int|7415
comma
l_int|0x006c
comma
l_int|7443
comma
l_int|0x0068
comma
l_int|7471
comma
l_int|0x0064
comma
l_int|7499
comma
l_int|0x0060
comma
l_int|7527
comma
l_int|0x005c
comma
l_int|7556
comma
l_int|0x0058
comma
l_int|7584
comma
l_int|0x0054
comma
l_int|7613
comma
l_int|0x0050
comma
l_int|7641
comma
l_int|0x004c
comma
l_int|7669
comma
l_int|0x0048
comma
l_int|7698
comma
l_int|0x0044
comma
l_int|7727
comma
l_int|0x0040
comma
l_int|7755
comma
l_int|0x003c
comma
l_int|7784
comma
l_int|0x0038
comma
l_int|7813
comma
l_int|0x0034
comma
l_int|7842
comma
l_int|0x0030
comma
l_int|7870
comma
l_int|0x002c
comma
l_int|7899
comma
l_int|0x0028
comma
l_int|7928
comma
l_int|0x0024
comma
l_int|7957
comma
l_int|0x0020
comma
l_int|7986
comma
l_int|0x001c
comma
l_int|8016
comma
l_int|0x0018
comma
l_int|8045
comma
l_int|0x0014
comma
l_int|8074
comma
l_int|0x0010
comma
l_int|8103
comma
l_int|0x000c
comma
l_int|8133
comma
l_int|0x0008
comma
l_int|8162
comma
l_int|0x0004
comma
l_int|8192
comma
l_int|0x0000
)brace
suffix:semicolon
DECL|function|lookup_volume_table
r_static
r_int
r_int
id|lookup_volume_table
c_func
(paren
r_int
r_int
id|value
)paren
(brace
multiline_comment|/* This code is an optimised version of:&n;&t; *   int i = 0;&n;&t; *   while( volume_table[i*2] &lt; value )&n;&t; *       i++;&n;&t; *   return volume_table[i*2+1];&n;&t; */
r_int
r_int
op_star
id|ptr
op_assign
id|log_table
suffix:semicolon
r_while
c_loop
(paren
op_star
id|ptr
OL
id|value
)paren
(brace
id|ptr
op_add_assign
l_int|2
suffix:semicolon
)brace
r_return
op_star
(paren
id|ptr
op_plus
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/* this function calculates a 8.8 fixed point logarithmic attenuation&n; * value from a linear volume value in the range 0 to 16384 */
DECL|function|log_from_linear
r_static
r_int
r_int
id|log_from_linear
c_func
(paren
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
id|value
op_ge
l_int|16384
)paren
r_return
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|value
)paren
(brace
r_int
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_int
id|v
comma
id|c
suffix:semicolon
r_for
c_loop
(paren
id|c
op_assign
l_int|0
comma
id|v
op_assign
l_int|8192
suffix:semicolon
id|c
OL
l_int|14
suffix:semicolon
id|c
op_increment
comma
id|v
op_rshift_assign
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|value
op_ge
id|v
)paren
(brace
id|result
op_add_assign
id|lookup_volume_table
c_func
(paren
(paren
id|value
op_minus
id|v
)paren
op_lshift
id|c
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|result
op_add_assign
l_int|0x0605
suffix:semicolon
multiline_comment|/* 6.0205 (result of -20*log10(0.5)) */
)brace
)brace
r_return
l_int|0xffff
suffix:semicolon
)brace
multiline_comment|/*&n; * Sample handling operations&n; */
r_static
r_void
id|sample_start
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_position_t
id|position
)paren
suffix:semicolon
r_static
r_void
id|sample_stop
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_stop_mode_t
id|mode
)paren
suffix:semicolon
r_static
r_void
id|sample_freq
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_frequency_t
id|freq
)paren
suffix:semicolon
r_static
r_void
id|sample_volume
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_ev_volume_t
op_star
id|volume
)paren
suffix:semicolon
r_static
r_void
id|sample_loop
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_ev_loop_t
op_star
id|loop
)paren
suffix:semicolon
r_static
r_void
id|sample_pos
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_position_t
id|position
)paren
suffix:semicolon
r_static
r_void
id|sample_private1
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
r_int
r_char
op_star
id|data
)paren
suffix:semicolon
DECL|variable|sample_ops
r_static
id|snd_trident_sample_ops_t
id|sample_ops
op_assign
(brace
id|sample_start
comma
id|sample_stop
comma
id|sample_freq
comma
id|sample_volume
comma
id|sample_loop
comma
id|sample_pos
comma
id|sample_private1
)brace
suffix:semicolon
DECL|function|snd_trident_simple_init
r_static
r_void
id|snd_trident_simple_init
c_func
(paren
id|snd_trident_voice_t
op_star
id|voice
)paren
(brace
singleline_comment|//voice-&gt;handler_wave = interrupt_wave;
singleline_comment|//voice-&gt;handler_volume = interrupt_volume;
singleline_comment|//voice-&gt;handler_effect = interrupt_effect;
singleline_comment|//voice-&gt;volume_change = NULL;
id|voice-&gt;sample_ops
op_assign
op_amp
id|sample_ops
suffix:semicolon
)brace
DECL|function|sample_start
r_static
r_void
id|sample_start
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_position_t
id|position
)paren
(brace
id|simple_instrument_t
op_star
id|simple
suffix:semicolon
id|snd_seq_kinstr_t
op_star
id|instr
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|loop_start
comma
id|loop_end
comma
id|sample_start
comma
id|sample_end
comma
id|start_offset
suffix:semicolon
r_int
r_int
id|value
suffix:semicolon
r_int
r_int
id|shift
op_assign
l_int|0
suffix:semicolon
id|instr
op_assign
id|snd_seq_instr_find
c_func
(paren
id|trident-&gt;synth.ilist
comma
op_amp
id|voice-&gt;instr
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|instr
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|voice-&gt;instr
op_assign
id|instr-&gt;instr
suffix:semicolon
multiline_comment|/* copy ID to speedup aliases */
id|simple
op_assign
id|KINSTR_DATA
c_func
(paren
id|instr
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;device
op_eq
id|TRIDENT_DEVICE_ID_SI7018
)paren
id|voice-&gt;GVSel
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* route to Wave volume */
id|voice-&gt;CTRL
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;Alpha
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;FMS
op_assign
l_int|0
suffix:semicolon
id|loop_start
op_assign
id|simple-&gt;loop_start
op_rshift
l_int|4
suffix:semicolon
id|loop_end
op_assign
id|simple-&gt;loop_end
op_rshift
l_int|4
suffix:semicolon
id|sample_start
op_assign
(paren
id|simple-&gt;start
op_plus
id|position
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|sample_start
op_ge
id|simple-&gt;size
)paren
(brace
id|sample_start
op_assign
id|simple-&gt;start
op_rshift
l_int|4
suffix:semicolon
)brace
id|sample_end
op_assign
id|simple-&gt;size
suffix:semicolon
id|start_offset
op_assign
id|position
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|simple-&gt;format
op_amp
id|SIMPLE_WAVE_16BIT
)paren
(brace
id|voice-&gt;CTRL
op_or_assign
l_int|8
suffix:semicolon
id|shift
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|simple-&gt;format
op_amp
id|SIMPLE_WAVE_STEREO
)paren
(brace
id|voice-&gt;CTRL
op_or_assign
l_int|4
suffix:semicolon
id|shift
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|simple-&gt;format
op_amp
id|SIMPLE_WAVE_UNSIGNED
)paren
)paren
id|voice-&gt;CTRL
op_or_assign
l_int|2
suffix:semicolon
id|voice-&gt;LBA
op_assign
id|simple-&gt;address.memory
suffix:semicolon
r_if
c_cond
(paren
id|simple-&gt;format
op_amp
id|SIMPLE_WAVE_LOOP
)paren
(brace
id|voice-&gt;CTRL
op_or_assign
l_int|1
suffix:semicolon
id|voice-&gt;LBA
op_add_assign
id|loop_start
op_lshift
id|shift
suffix:semicolon
r_if
c_cond
(paren
id|start_offset
op_ge
id|loop_start
)paren
(brace
id|voice-&gt;CSO
op_assign
id|start_offset
op_minus
id|loop_start
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|voice-&gt;CSO
op_assign
id|loop_start
op_minus
id|start_offset
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|1
suffix:semicolon
)brace
id|voice-&gt;ESO
op_assign
id|loop_end
op_minus
id|loop_start
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|voice-&gt;LBA
op_add_assign
id|start_offset
op_lshift
id|shift
suffix:semicolon
id|voice-&gt;CSO
op_assign
id|sample_start
suffix:semicolon
id|voice-&gt;ESO
op_assign
id|sample_end
op_minus
l_int|1
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|voice-&gt;flags
op_amp
id|SNDRV_TRIDENT_VFLG_RUNNING
)paren
(brace
id|snd_trident_stop_voice
c_func
(paren
id|trident
comma
id|voice-&gt;number
)paren
suffix:semicolon
id|voice-&gt;flags
op_and_assign
op_complement
id|SNDRV_TRIDENT_VFLG_RUNNING
suffix:semicolon
)brace
multiline_comment|/* set CSO sign */
id|value
op_assign
id|inl
c_func
(paren
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_SIGN_CSO_A
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|voice-&gt;negCSO
)paren
(brace
id|value
op_or_assign
l_int|1
op_lshift
(paren
id|voice-&gt;number
op_amp
l_int|31
)paren
suffix:semicolon
)brace
r_else
(brace
id|value
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
id|voice-&gt;number
op_amp
l_int|31
)paren
)paren
suffix:semicolon
)brace
id|outl
c_func
(paren
id|value
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_SIGN_CSO_A
)paren
)paren
suffix:semicolon
id|voice-&gt;Attribute
op_assign
l_int|0
suffix:semicolon
id|snd_trident_write_voice_regs
c_func
(paren
id|trident
comma
id|voice
)paren
suffix:semicolon
id|snd_trident_start_voice
c_func
(paren
id|trident
comma
id|voice-&gt;number
)paren
suffix:semicolon
id|voice-&gt;flags
op_or_assign
id|SNDRV_TRIDENT_VFLG_RUNNING
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_seq_instr_free_use
c_func
(paren
id|trident-&gt;synth.ilist
comma
id|instr
)paren
suffix:semicolon
)brace
DECL|function|sample_stop
r_static
r_void
id|sample_stop
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_stop_mode_t
id|mode
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|voice-&gt;flags
op_amp
id|SNDRV_TRIDENT_VFLG_RUNNING
)paren
)paren
r_return
suffix:semicolon
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_default
suffix:colon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_trident_stop_voice
c_func
(paren
id|trident
comma
id|voice-&gt;number
)paren
suffix:semicolon
id|voice-&gt;flags
op_and_assign
op_complement
id|SNDRV_TRIDENT_VFLG_RUNNING
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SAMPLE_STOP_LOOP
suffix:colon
multiline_comment|/* disable loop only */
id|voice-&gt;CTRL
op_and_assign
op_complement
l_int|1
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;number
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_LFO_GC_CIR
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
(paren
(paren
id|voice-&gt;CTRL
op_lshift
l_int|12
)paren
op_or
(paren
id|voice-&gt;EC
op_amp
l_int|0x0fff
)paren
)paren
op_amp
l_int|0xffff
)paren
comma
id|CH_GVSEL_PAN_VOL_CTRL_EC
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|sample_freq
r_static
r_void
id|sample_freq
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_frequency_t
id|freq
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|freq
op_rshift_assign
l_int|4
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|freq
op_eq
l_int|44100
)paren
id|voice-&gt;Delta
op_assign
l_int|0xeb3
suffix:semicolon
r_else
r_if
c_cond
(paren
id|freq
op_eq
l_int|8000
)paren
id|voice-&gt;Delta
op_assign
l_int|0x2ab
suffix:semicolon
r_else
r_if
c_cond
(paren
id|freq
op_eq
l_int|48000
)paren
id|voice-&gt;Delta
op_assign
l_int|0x1000
suffix:semicolon
r_else
id|voice-&gt;Delta
op_assign
(paren
(paren
(paren
id|freq
op_lshift
l_int|12
)paren
op_plus
id|freq
)paren
op_div
l_int|48000
)paren
op_amp
l_int|0x0000ffff
suffix:semicolon
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;number
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_LFO_GC_CIR
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;device
op_eq
id|TRIDENT_DEVICE_ID_NX
)paren
(brace
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;Delta
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_CSO
op_plus
l_int|3
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
(paren
id|voice-&gt;Delta
op_rshift
l_int|8
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_ESO
op_plus
l_int|3
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|outw
c_func
(paren
(paren
r_int
r_int
)paren
id|voice-&gt;Delta
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_DX_ESO_DELTA
)paren
)paren
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
DECL|function|sample_volume
r_static
r_void
id|sample_volume
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_ev_volume_t
op_star
id|volume
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|value
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|voice-&gt;GVSel
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* use global music volume */
id|voice-&gt;FMC
op_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* fixme: can we do something useful with FMC? */
r_if
c_cond
(paren
id|volume-&gt;volume
op_ge
l_int|0
)paren
(brace
id|volume-&gt;volume
op_and_assign
l_int|0x3fff
suffix:semicolon
multiline_comment|/* linear volume -&gt; logarithmic attenuation conversion&n;&t;&t; * uses EC register for greater resolution (6.6 bits) than Vol register (5.3 bits)&n;&t;&t; * Vol register used when additional attenuation is required */
id|voice-&gt;RVol
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;CVol
op_assign
l_int|0
suffix:semicolon
id|value
op_assign
id|log_from_linear
c_func
(paren
id|volume-&gt;volume
)paren
suffix:semicolon
id|voice-&gt;Vol
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;EC
op_assign
(paren
id|value
op_amp
l_int|0x3fff
)paren
op_rshift
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|value
OG
l_int|0x3fff
)paren
(brace
id|voice-&gt;EC
op_or_assign
l_int|0xfc0
suffix:semicolon
r_if
c_cond
(paren
id|value
OL
l_int|0x5f00
)paren
id|voice-&gt;Vol
op_assign
(paren
(paren
id|value
op_rshift
l_int|8
)paren
op_minus
l_int|0x3f
)paren
op_lshift
l_int|5
suffix:semicolon
r_else
(brace
id|voice-&gt;Vol
op_assign
l_int|0x3ff
suffix:semicolon
id|voice-&gt;EC
op_assign
l_int|0xfff
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|volume-&gt;lr
op_ge
l_int|0
)paren
(brace
id|volume-&gt;lr
op_and_assign
l_int|0x3fff
suffix:semicolon
multiline_comment|/* approximate linear pan by attenuating channels */
r_if
c_cond
(paren
id|volume-&gt;lr
op_ge
l_int|0x2000
)paren
(brace
multiline_comment|/* attenuate left (pan right) */
id|value
op_assign
l_int|0x3fff
op_minus
id|volume-&gt;lr
suffix:semicolon
r_for
c_loop
(paren
id|voice-&gt;Pan
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;Pan
OL
l_int|63
suffix:semicolon
id|voice-&gt;Pan
op_increment
)paren
r_if
c_cond
(paren
id|value
op_ge
id|pan_table
(braket
id|voice-&gt;Pan
)braket
)paren
r_break
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* attenuate right (pan left) */
r_for
c_loop
(paren
id|voice-&gt;Pan
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;Pan
OL
l_int|63
suffix:semicolon
id|voice-&gt;Pan
op_increment
)paren
r_if
c_cond
(paren
id|volume-&gt;lr
op_ge
id|pan_table
(braket
id|voice-&gt;Pan
)braket
)paren
r_break
suffix:semicolon
id|voice-&gt;Pan
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;number
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_LFO_GC_CIR
)paren
)paren
suffix:semicolon
id|outl
c_func
(paren
(paren
id|voice-&gt;GVSel
op_lshift
l_int|31
)paren
op_or
(paren
(paren
id|voice-&gt;Pan
op_amp
l_int|0x0000007f
)paren
op_lshift
l_int|24
)paren
op_or
(paren
(paren
id|voice-&gt;Vol
op_amp
l_int|0x000000ff
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
id|voice-&gt;CTRL
op_amp
l_int|0x0000000f
)paren
op_lshift
l_int|12
)paren
op_or
(paren
id|voice-&gt;EC
op_amp
l_int|0x00000fff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_GVSEL_PAN_VOL_CTRL_EC
)paren
)paren
suffix:semicolon
id|value
op_assign
(paren
(paren
id|voice-&gt;FMC
op_amp
l_int|0x03
)paren
op_lshift
l_int|14
)paren
op_or
(paren
(paren
id|voice-&gt;RVol
op_amp
l_int|0x7f
)paren
op_lshift
l_int|7
)paren
op_or
(paren
id|voice-&gt;CVol
op_amp
l_int|0x7f
)paren
suffix:semicolon
id|outw
c_func
(paren
id|value
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_DX_FMC_RVOL_CVOL
)paren
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
)brace
DECL|function|sample_loop
r_static
r_void
id|sample_loop
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_ev_loop_t
op_star
id|loop
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|simple_instrument_t
op_star
id|simple
suffix:semicolon
id|snd_seq_kinstr_t
op_star
id|instr
suffix:semicolon
r_int
r_int
id|loop_start
comma
id|loop_end
suffix:semicolon
id|instr
op_assign
id|snd_seq_instr_find
c_func
(paren
id|trident-&gt;synth.ilist
comma
op_amp
id|voice-&gt;instr
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|instr
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|voice-&gt;instr
op_assign
id|instr-&gt;instr
suffix:semicolon
multiline_comment|/* copy ID to speedup aliases */
id|simple
op_assign
id|KINSTR_DATA
c_func
(paren
id|instr
)paren
suffix:semicolon
id|loop_start
op_assign
id|loop-&gt;start
op_rshift
l_int|4
suffix:semicolon
id|loop_end
op_assign
id|loop-&gt;end
op_rshift
l_int|4
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|voice-&gt;LBA
op_assign
id|simple-&gt;address.memory
op_plus
id|loop_start
suffix:semicolon
id|voice-&gt;CSO
op_assign
l_int|0
suffix:semicolon
id|voice-&gt;ESO
op_assign
id|loop_end
op_minus
id|loop_start
op_minus
l_int|1
suffix:semicolon
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;number
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_LFO_GC_CIR
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
id|voice-&gt;LBA
op_rshift
l_int|16
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_LBA
op_plus
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|voice-&gt;LBA
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_LBA
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;device
op_eq
id|TRIDENT_DEVICE_ID_NX
)paren
(brace
id|outb
c_func
(paren
(paren
id|voice-&gt;ESO
op_rshift
l_int|16
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_ESO
op_plus
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|voice-&gt;ESO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_ESO
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
id|voice-&gt;CSO
op_rshift
l_int|16
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_CSO
op_plus
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|voice-&gt;CSO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_CSO
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|outw
c_func
(paren
(paren
id|voice-&gt;ESO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_DX_ESO_DELTA
op_plus
l_int|2
)paren
)paren
suffix:semicolon
id|outw
c_func
(paren
(paren
id|voice-&gt;CSO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_DX_CSO_ALPHA_FMS
op_plus
l_int|2
)paren
)paren
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_seq_instr_free_use
c_func
(paren
id|trident-&gt;synth.ilist
comma
id|instr
)paren
suffix:semicolon
)brace
DECL|function|sample_pos
r_static
r_void
id|sample_pos
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
id|snd_seq_position_t
id|position
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|simple_instrument_t
op_star
id|simple
suffix:semicolon
id|snd_seq_kinstr_t
op_star
id|instr
suffix:semicolon
r_int
r_int
id|value
suffix:semicolon
id|instr
op_assign
id|snd_seq_instr_find
c_func
(paren
id|trident-&gt;synth.ilist
comma
op_amp
id|voice-&gt;instr
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|instr
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|voice-&gt;instr
op_assign
id|instr-&gt;instr
suffix:semicolon
multiline_comment|/* copy ID to speedup aliases */
id|simple
op_assign
id|KINSTR_DATA
c_func
(paren
id|instr
)paren
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|simple-&gt;format
op_amp
id|SIMPLE_WAVE_LOOP
)paren
(brace
r_if
c_cond
(paren
id|position
op_ge
id|simple-&gt;loop_start
)paren
(brace
id|voice-&gt;CSO
op_assign
(paren
id|position
op_minus
id|simple-&gt;loop_start
)paren
op_rshift
l_int|4
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|voice-&gt;CSO
op_assign
(paren
id|simple-&gt;loop_start
op_minus
id|position
)paren
op_rshift
l_int|4
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
id|voice-&gt;CSO
op_assign
id|position
op_rshift
l_int|4
suffix:semicolon
id|voice-&gt;negCSO
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* set CSO sign */
id|value
op_assign
id|inl
c_func
(paren
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_SIGN_CSO_A
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|voice-&gt;negCSO
)paren
(brace
id|value
op_or_assign
l_int|1
op_lshift
(paren
id|voice-&gt;number
op_amp
l_int|31
)paren
suffix:semicolon
)brace
r_else
(brace
id|value
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
id|voice-&gt;number
op_amp
l_int|31
)paren
)paren
suffix:semicolon
)brace
id|outl
c_func
(paren
id|value
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_SIGN_CSO_A
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
r_int
r_char
)paren
id|voice-&gt;number
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|T4D_LFO_GC_CIR
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;device
op_eq
id|TRIDENT_DEVICE_ID_NX
)paren
(brace
id|outw
c_func
(paren
(paren
id|voice-&gt;CSO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_CSO
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
(paren
id|voice-&gt;CSO
op_rshift
l_int|16
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_NX_DELTA_CSO
op_plus
l_int|2
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|outw
c_func
(paren
(paren
id|voice-&gt;CSO
op_amp
l_int|0xffff
)paren
comma
id|TRID_REG
c_func
(paren
id|trident
comma
id|CH_DX_CSO_ALPHA_FMS
)paren
op_plus
l_int|2
)paren
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_seq_instr_free_use
c_func
(paren
id|trident-&gt;synth.ilist
comma
id|instr
)paren
suffix:semicolon
)brace
DECL|function|sample_private1
r_static
r_void
id|sample_private1
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|voice
comma
r_int
r_char
op_star
id|data
)paren
(brace
)brace
multiline_comment|/*&n; * Memory management / sample loading&n; */
DECL|function|snd_trident_simple_put_sample
r_static
r_int
id|snd_trident_simple_put_sample
c_func
(paren
r_void
op_star
id|private_data
comma
id|simple_instrument_t
op_star
id|instr
comma
r_char
op_star
id|data
comma
r_int
id|len
comma
r_int
id|atomic
)paren
(brace
id|trident_t
op_star
id|trident
op_assign
id|snd_magic_cast
c_func
(paren
id|trident_t
comma
id|private_data
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_int
r_char
op_star
id|block
op_assign
l_int|NULL
suffix:semicolon
r_int
id|size
op_assign
id|instr-&gt;size
suffix:semicolon
r_int
id|shift
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_BACKWARD
op_logical_or
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_BIDIR
op_logical_or
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_ULAW
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* not supported */
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_16BIT
)paren
id|shift
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_STEREO
)paren
id|shift
op_increment
suffix:semicolon
id|size
op_lshift_assign
id|shift
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;synth.current_size
op_plus
id|size
OG
id|trident-&gt;synth.max_size
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
id|data
comma
id|size
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;tlb.entries
)paren
(brace
id|snd_util_memblk_t
op_star
id|memblk
suffix:semicolon
id|memblk
op_assign
id|snd_trident_synth_alloc
c_func
(paren
id|trident
comma
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|memblk
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
id|snd_trident_synth_copy_from_user
c_func
(paren
id|trident
comma
id|memblk
comma
l_int|0
comma
id|data
comma
id|size
)paren
)paren
(brace
id|snd_trident_synth_free
c_func
(paren
id|trident
comma
id|memblk
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|instr-&gt;address.ptr
op_assign
(paren
r_int
r_char
op_star
)paren
id|memblk
suffix:semicolon
id|instr-&gt;address.memory
op_assign
id|memblk-&gt;offset
suffix:semicolon
)brace
r_else
(brace
id|dma_addr_t
id|addr
suffix:semicolon
id|block
op_assign
(paren
r_int
r_char
op_star
)paren
id|snd_malloc_pci_pages
c_func
(paren
id|trident-&gt;pci
comma
id|size
comma
op_amp
id|addr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|block
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|block
comma
id|data
comma
id|size
)paren
)paren
(brace
id|snd_free_pci_pages
c_func
(paren
id|trident-&gt;pci
comma
id|size
comma
id|block
comma
id|addr
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|instr-&gt;address.ptr
op_assign
id|block
suffix:semicolon
id|instr-&gt;address.memory
op_assign
id|addr
suffix:semicolon
)brace
id|trident-&gt;synth.current_size
op_add_assign
id|size
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_trident_simple_get_sample
r_static
r_int
id|snd_trident_simple_get_sample
c_func
(paren
r_void
op_star
id|private_data
comma
id|simple_instrument_t
op_star
id|instr
comma
r_char
op_star
id|data
comma
r_int
id|len
comma
r_int
id|atomic
)paren
(brace
singleline_comment|//trident_t *trident = snd_magic_cast(trident_t, private_data, return -ENXIO);
r_int
id|size
op_assign
id|instr-&gt;size
suffix:semicolon
r_int
id|shift
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_16BIT
)paren
id|shift
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_STEREO
)paren
id|shift
op_increment
suffix:semicolon
id|size
op_lshift_assign
id|shift
suffix:semicolon
r_if
c_cond
(paren
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|data
comma
id|size
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
multiline_comment|/* FIXME: not implemented yet */
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
DECL|function|snd_trident_simple_remove_sample
r_static
r_int
id|snd_trident_simple_remove_sample
c_func
(paren
r_void
op_star
id|private_data
comma
id|simple_instrument_t
op_star
id|instr
comma
r_int
id|atomic
)paren
(brace
id|trident_t
op_star
id|trident
op_assign
id|snd_magic_cast
c_func
(paren
id|trident_t
comma
id|private_data
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_int
id|size
op_assign
id|instr-&gt;size
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;tlb.entries
)paren
(brace
id|snd_util_memblk_t
op_star
id|memblk
op_assign
(paren
id|snd_util_memblk_t
op_star
)paren
id|instr-&gt;address.ptr
suffix:semicolon
r_if
c_cond
(paren
id|memblk
)paren
id|snd_trident_synth_free
c_func
(paren
id|trident
comma
id|memblk
)paren
suffix:semicolon
r_else
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_else
(brace
id|kfree
c_func
(paren
id|instr-&gt;address.ptr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_16BIT
)paren
id|size
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|instr-&gt;format
op_amp
id|SIMPLE_WAVE_STEREO
)paren
id|size
op_lshift_assign
l_int|1
suffix:semicolon
id|trident-&gt;synth.current_size
op_sub_assign
id|size
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;synth.current_size
OL
l_int|0
)paren
multiline_comment|/* shouldnt need this check... */
id|trident-&gt;synth.current_size
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|select_instrument
r_static
r_void
id|select_instrument
c_func
(paren
id|trident_t
op_star
id|trident
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
id|snd_seq_kinstr_t
op_star
id|instr
suffix:semicolon
id|instr
op_assign
id|snd_seq_instr_find
c_func
(paren
id|trident-&gt;synth.ilist
comma
op_amp
id|v-&gt;instr
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|instr
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|instr-&gt;ops
)paren
(brace
r_if
c_cond
(paren
id|instr-&gt;ops-&gt;instr_type
op_eq
id|snd_seq_simple_id
)paren
id|snd_trident_simple_init
c_func
(paren
id|v
)paren
suffix:semicolon
)brace
id|snd_seq_instr_free_use
c_func
(paren
id|trident-&gt;synth.ilist
comma
id|instr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;&n; */
DECL|function|event_sample
r_static
r_void
id|event_sample
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_stop
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_stop
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|SAMPLE_STOP_IMMEDIATELY
)paren
suffix:semicolon
id|v-&gt;instr.std
op_assign
id|ev-&gt;data.sample.param.sample.std
suffix:semicolon
r_if
c_cond
(paren
id|v-&gt;instr.std
op_amp
l_int|0xff000000
)paren
(brace
multiline_comment|/* private instrument */
id|v-&gt;instr.std
op_and_assign
l_int|0x00ffffff
suffix:semicolon
id|v-&gt;instr.std
op_or_assign
(paren
r_int
r_int
)paren
id|ev-&gt;source.client
op_lshift
l_int|24
suffix:semicolon
)brace
id|v-&gt;instr.bank
op_assign
id|ev-&gt;data.sample.param.sample.bank
suffix:semicolon
id|v-&gt;instr.prg
op_assign
id|ev-&gt;data.sample.param.sample.prg
suffix:semicolon
id|select_instrument
c_func
(paren
id|p-&gt;trident
comma
id|v
)paren
suffix:semicolon
)brace
DECL|function|event_cluster
r_static
r_void
id|event_cluster
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_stop
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_stop
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|SAMPLE_STOP_IMMEDIATELY
)paren
suffix:semicolon
id|v-&gt;instr.cluster
op_assign
id|ev-&gt;data.sample.param.cluster.cluster
suffix:semicolon
id|select_instrument
c_func
(paren
id|p-&gt;trident
comma
id|v
)paren
suffix:semicolon
)brace
DECL|function|event_start
r_static
r_void
id|event_start
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_start
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_start
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|ev-&gt;data.sample.param.position
)paren
suffix:semicolon
)brace
DECL|function|event_stop
r_static
r_void
id|event_stop
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_stop
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_stop
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|ev-&gt;data.sample.param.stop_mode
)paren
suffix:semicolon
)brace
DECL|function|event_freq
r_static
r_void
id|event_freq
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_freq
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_freq
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|ev-&gt;data.sample.param.frequency
)paren
suffix:semicolon
)brace
DECL|function|event_volume
r_static
r_void
id|event_volume
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_volume
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_volume
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
op_amp
id|ev-&gt;data.sample.param.volume
)paren
suffix:semicolon
)brace
DECL|function|event_loop
r_static
r_void
id|event_loop
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_loop
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_loop
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
op_amp
id|ev-&gt;data.sample.param.loop
)paren
suffix:semicolon
)brace
DECL|function|event_position
r_static
r_void
id|event_position
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_pos
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_pos
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
id|ev-&gt;data.sample.param.position
)paren
suffix:semicolon
)brace
DECL|function|event_private1
r_static
r_void
id|event_private1
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
(brace
r_if
c_cond
(paren
id|v-&gt;sample_ops
op_logical_and
id|v-&gt;sample_ops-&gt;sample_private1
)paren
id|v-&gt;sample_ops
op_member_access_from_pointer
id|sample_private1
c_func
(paren
id|p-&gt;trident
comma
id|v
comma
(paren
r_int
r_char
op_star
)paren
op_amp
id|ev-&gt;data.sample.param.raw8
)paren
suffix:semicolon
)brace
DECL|typedef|trident_sample_event_handler_t
r_typedef
r_void
(paren
id|trident_sample_event_handler_t
)paren
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
comma
id|snd_trident_voice_t
op_star
id|v
)paren
suffix:semicolon
DECL|variable|trident_sample_event_handlers
r_static
id|trident_sample_event_handler_t
op_star
id|trident_sample_event_handlers
(braket
l_int|9
)braket
op_assign
(brace
id|event_sample
comma
id|event_cluster
comma
id|event_start
comma
id|event_stop
comma
id|event_freq
comma
id|event_volume
comma
id|event_loop
comma
id|event_position
comma
id|event_private1
)brace
suffix:semicolon
DECL|function|snd_trident_sample_event
r_static
r_void
id|snd_trident_sample_event
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
id|snd_trident_port_t
op_star
id|p
)paren
(brace
r_int
id|idx
comma
id|voice
suffix:semicolon
id|trident_t
op_star
id|trident
op_assign
id|p-&gt;trident
suffix:semicolon
id|snd_trident_voice_t
op_star
id|v
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|idx
op_assign
id|ev-&gt;type
op_minus
id|SNDRV_SEQ_EVENT_SAMPLE
suffix:semicolon
r_if
c_cond
(paren
id|idx
template_param
l_int|8
)paren
r_return
suffix:semicolon
r_for
c_loop
(paren
id|voice
op_assign
l_int|0
suffix:semicolon
id|voice
OL
l_int|64
suffix:semicolon
id|voice
op_increment
)paren
(brace
id|v
op_assign
op_amp
id|trident-&gt;synth.voices
(braket
id|voice
)braket
suffix:semicolon
r_if
c_cond
(paren
id|v-&gt;use
op_logical_and
id|v-&gt;client
op_eq
id|ev-&gt;source.client
op_logical_and
id|v-&gt;port
op_eq
id|ev-&gt;source.port
op_logical_and
id|v-&gt;index
op_eq
id|ev-&gt;data.sample.channel
)paren
(brace
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;event_lock
comma
id|flags
)paren
suffix:semicolon
id|trident_sample_event_handlers
(braket
id|idx
)braket
(paren
id|ev
comma
id|p
comma
id|v
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;event_lock
comma
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n;&n; */
DECL|function|snd_trident_synth_free_voices
r_static
r_void
id|snd_trident_synth_free_voices
c_func
(paren
id|trident_t
op_star
id|trident
comma
r_int
id|client
comma
r_int
id|port
)paren
(brace
r_int
id|idx
suffix:semicolon
id|snd_trident_voice_t
op_star
id|voice
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|32
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|voice
op_assign
op_amp
id|trident-&gt;synth.voices
(braket
id|idx
)braket
suffix:semicolon
r_if
c_cond
(paren
id|voice-&gt;use
op_logical_and
id|voice-&gt;client
op_eq
id|client
op_logical_and
id|voice-&gt;port
op_eq
id|port
)paren
id|snd_trident_free_voice
c_func
(paren
id|trident
comma
id|voice
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_trident_synth_use
r_static
r_int
id|snd_trident_synth_use
c_func
(paren
r_void
op_star
id|private_data
comma
id|snd_seq_port_subscribe_t
op_star
id|info
)paren
(brace
id|snd_trident_port_t
op_star
id|port
op_assign
(paren
id|snd_trident_port_t
op_star
)paren
id|private_data
suffix:semicolon
id|trident_t
op_star
id|trident
op_assign
id|port-&gt;trident
suffix:semicolon
id|snd_trident_voice_t
op_star
id|voice
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_if
c_cond
(paren
id|info-&gt;voices
OG
l_int|32
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|info-&gt;voices
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|voice
op_assign
id|snd_trident_alloc_voice
c_func
(paren
id|trident
comma
id|SNDRV_TRIDENT_VOICE_TYPE_SYNTH
comma
id|info-&gt;sender.client
comma
id|info-&gt;sender.port
)paren
suffix:semicolon
r_if
c_cond
(paren
id|voice
op_eq
l_int|NULL
)paren
(brace
id|snd_trident_synth_free_voices
c_func
(paren
id|trident
comma
id|info-&gt;sender.client
comma
id|info-&gt;sender.port
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|voice-&gt;index
op_assign
id|idx
suffix:semicolon
id|voice-&gt;Vol
op_assign
l_int|0x3ff
suffix:semicolon
id|voice-&gt;EC
op_assign
l_int|0x0fff
suffix:semicolon
)brace
macro_line|#if 0
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|info-&gt;midi_voices
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|port-&gt;midi_has_voices
op_assign
l_int|1
suffix:semicolon
id|voice
op_assign
id|snd_trident_alloc_voice
c_func
(paren
id|trident
comma
id|SNDRV_TRIDENT_VOICE_TYPE_MIDI
comma
id|info-&gt;sender.client
comma
id|info-&gt;sender.port
)paren
suffix:semicolon
r_if
c_cond
(paren
id|voice
op_eq
l_int|NULL
)paren
(brace
id|snd_trident_synth_free_voices
c_func
(paren
id|trident
comma
id|info-&gt;sender.client
comma
id|info-&gt;sender.port
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|voice-&gt;Vol
op_assign
l_int|0x3ff
suffix:semicolon
id|voice-&gt;EC
op_assign
l_int|0x0fff
suffix:semicolon
)brace
macro_line|#endif
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_trident_synth_unuse
r_static
r_int
id|snd_trident_synth_unuse
c_func
(paren
r_void
op_star
id|private_data
comma
id|snd_seq_port_subscribe_t
op_star
id|info
)paren
(brace
id|snd_trident_port_t
op_star
id|port
op_assign
(paren
id|snd_trident_port_t
op_star
)paren
id|private_data
suffix:semicolon
id|trident_t
op_star
id|trident
op_assign
id|port-&gt;trident
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
id|snd_trident_synth_free_voices
c_func
(paren
id|trident
comma
id|info-&gt;sender.client
comma
id|info-&gt;sender.port
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;reg_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;&n; */
DECL|function|snd_trident_synth_free_private_instruments
r_static
r_void
id|snd_trident_synth_free_private_instruments
c_func
(paren
id|snd_trident_port_t
op_star
id|p
comma
r_int
id|client
)paren
(brace
id|snd_seq_instr_header_t
id|ifree
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|ifree
comma
l_int|0
comma
r_sizeof
(paren
id|ifree
)paren
)paren
suffix:semicolon
id|ifree.cmd
op_assign
id|SNDRV_SEQ_INSTR_FREE_CMD_PRIVATE
suffix:semicolon
id|snd_seq_instr_list_free_cond
c_func
(paren
id|p-&gt;trident-&gt;synth.ilist
comma
op_amp
id|ifree
comma
id|client
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|snd_trident_synth_event_input
r_int
id|snd_trident_synth_event_input
c_func
(paren
id|snd_seq_event_t
op_star
id|ev
comma
r_int
id|direct
comma
r_void
op_star
id|private_data
comma
r_int
id|atomic
comma
r_int
id|hop
)paren
(brace
id|snd_trident_port_t
op_star
id|p
op_assign
(paren
id|snd_trident_port_t
op_star
)paren
id|private_data
suffix:semicolon
r_if
c_cond
(paren
id|p
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|ev-&gt;type
op_ge
id|SNDRV_SEQ_EVENT_SAMPLE
op_logical_and
id|ev-&gt;type
op_le
id|SNDRV_SEQ_EVENT_SAMPLE_PRIVATE1
)paren
(brace
id|snd_trident_sample_event
c_func
(paren
id|ev
comma
id|p
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ev-&gt;source.client
op_eq
id|SNDRV_SEQ_CLIENT_SYSTEM
op_logical_and
id|ev-&gt;source.port
op_eq
id|SNDRV_SEQ_PORT_SYSTEM_ANNOUNCE
)paren
(brace
r_if
c_cond
(paren
id|ev-&gt;type
op_eq
id|SNDRV_SEQ_EVENT_CLIENT_EXIT
)paren
(brace
id|snd_trident_synth_free_private_instruments
c_func
(paren
id|p
comma
id|ev-&gt;data.addr.client
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|direct
)paren
(brace
r_if
c_cond
(paren
id|ev-&gt;type
op_ge
id|SNDRV_SEQ_EVENT_INSTR_BEGIN
)paren
(brace
id|snd_seq_instr_event
c_func
(paren
op_amp
id|p-&gt;trident-&gt;synth.simple_ops.kops
comma
id|p-&gt;trident-&gt;synth.ilist
comma
id|ev
comma
id|p-&gt;trident-&gt;synth.seq_client
comma
id|atomic
comma
id|hop
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_trident_synth_instr_notify
r_static
r_void
id|snd_trident_synth_instr_notify
c_func
(paren
r_void
op_star
id|private_data
comma
id|snd_seq_kinstr_t
op_star
id|instr
comma
r_int
id|what
)paren
(brace
r_int
id|idx
suffix:semicolon
id|trident_t
op_star
id|trident
op_assign
id|snd_magic_cast
c_func
(paren
id|trident_t
comma
id|private_data
comma
r_return
)paren
suffix:semicolon
id|snd_trident_voice_t
op_star
id|pvoice
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|trident-&gt;event_lock
comma
id|flags
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|64
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|pvoice
op_assign
op_amp
id|trident-&gt;synth.voices
(braket
id|idx
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pvoice-&gt;use
op_logical_and
op_logical_neg
id|memcmp
c_func
(paren
op_amp
id|pvoice-&gt;instr
comma
op_amp
id|instr-&gt;instr
comma
r_sizeof
(paren
id|pvoice-&gt;instr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|pvoice-&gt;sample_ops
op_logical_and
id|pvoice-&gt;sample_ops-&gt;sample_stop
)paren
(brace
id|pvoice-&gt;sample_ops
op_member_access_from_pointer
id|sample_stop
c_func
(paren
id|trident
comma
id|pvoice
comma
id|SAMPLE_STOP_IMMEDIATELY
)paren
suffix:semicolon
)brace
r_else
(brace
id|snd_trident_stop_voice
c_func
(paren
id|trident
comma
id|pvoice-&gt;number
)paren
suffix:semicolon
id|pvoice-&gt;flags
op_and_assign
op_complement
id|SNDRV_TRIDENT_VFLG_RUNNING
suffix:semicolon
)brace
)brace
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|trident-&gt;event_lock
comma
id|flags
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&n; */
DECL|function|snd_trident_synth_free_port
r_static
r_void
id|snd_trident_synth_free_port
c_func
(paren
r_void
op_star
id|private_data
)paren
(brace
id|snd_trident_port_t
op_star
id|p
op_assign
(paren
id|snd_trident_port_t
op_star
)paren
id|private_data
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
id|snd_midi_channel_free_set
c_func
(paren
id|p-&gt;chset
)paren
suffix:semicolon
)brace
DECL|function|snd_trident_synth_create_port
r_static
r_int
id|snd_trident_synth_create_port
c_func
(paren
id|trident_t
op_star
id|trident
comma
r_int
id|idx
)paren
(brace
id|snd_trident_port_t
op_star
id|p
suffix:semicolon
id|snd_seq_port_callback_t
id|callbacks
suffix:semicolon
r_char
id|name
(braket
l_int|32
)braket
suffix:semicolon
r_char
op_star
id|str
suffix:semicolon
r_int
id|result
suffix:semicolon
id|p
op_assign
op_amp
id|trident-&gt;synth.seq_ports
(braket
id|idx
)braket
suffix:semicolon
id|p-&gt;chset
op_assign
id|snd_midi_channel_alloc_set
c_func
(paren
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;chset
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|p-&gt;chset-&gt;private_data
op_assign
id|p
suffix:semicolon
id|p-&gt;trident
op_assign
id|trident
suffix:semicolon
id|p-&gt;client
op_assign
id|trident-&gt;synth.seq_client
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|callbacks
comma
l_int|0
comma
r_sizeof
(paren
id|callbacks
)paren
)paren
suffix:semicolon
id|callbacks.owner
op_assign
id|THIS_MODULE
suffix:semicolon
id|callbacks.use
op_assign
id|snd_trident_synth_use
suffix:semicolon
id|callbacks.unuse
op_assign
id|snd_trident_synth_unuse
suffix:semicolon
id|callbacks.event_input
op_assign
id|snd_trident_synth_event_input
suffix:semicolon
id|callbacks.private_free
op_assign
id|snd_trident_synth_free_port
suffix:semicolon
id|callbacks.private_data
op_assign
id|p
suffix:semicolon
id|str
op_assign
l_string|&quot;???&quot;
suffix:semicolon
r_switch
c_cond
(paren
id|trident-&gt;device
)paren
(brace
r_case
id|TRIDENT_DEVICE_ID_DX
suffix:colon
id|str
op_assign
l_string|&quot;Trident 4DWave-DX&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TRIDENT_DEVICE_ID_NX
suffix:colon
id|str
op_assign
l_string|&quot;Trident 4DWave-NX&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TRIDENT_DEVICE_ID_SI7018
suffix:colon
id|str
op_assign
l_string|&quot;SiS 7018&quot;
suffix:semicolon
r_break
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%s port %i&quot;
comma
id|str
comma
id|idx
)paren
suffix:semicolon
id|p-&gt;chset-&gt;port
op_assign
id|snd_seq_event_port_attach
c_func
(paren
id|trident-&gt;synth.seq_client
comma
op_amp
id|callbacks
comma
id|SNDRV_SEQ_PORT_CAP_WRITE
op_or
id|SNDRV_SEQ_PORT_CAP_SUBS_WRITE
comma
id|SNDRV_SEQ_PORT_TYPE_MIDI_GENERIC
op_or
id|SNDRV_SEQ_PORT_TYPE_MIDI_GM
op_or
id|SNDRV_SEQ_PORT_TYPE_MIDI_GS
op_or
id|SNDRV_SEQ_PORT_TYPE_DIRECT_SAMPLE
op_or
id|SNDRV_SEQ_PORT_TYPE_SYNTH
comma
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;chset-&gt;port
OL
l_int|0
)paren
(brace
id|result
op_assign
id|p-&gt;chset-&gt;port
suffix:semicolon
id|snd_trident_synth_free_port
c_func
(paren
id|p
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|p-&gt;port
op_assign
id|p-&gt;chset-&gt;port
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;&n; */
DECL|function|snd_trident_synth_new_device
r_static
r_int
id|snd_trident_synth_new_device
c_func
(paren
id|snd_seq_device_t
op_star
id|dev
)paren
(brace
id|trident_t
op_star
id|trident
suffix:semicolon
r_int
id|client
comma
id|i
suffix:semicolon
id|snd_seq_client_callback_t
id|callbacks
suffix:semicolon
id|snd_seq_client_info_t
id|cinfo
suffix:semicolon
id|snd_seq_port_subscribe_t
id|sub
suffix:semicolon
id|snd_simple_ops_t
op_star
id|simpleops
suffix:semicolon
r_char
op_star
id|str
suffix:semicolon
id|trident
op_assign
op_star
(paren
id|trident_t
op_star
op_star
)paren
id|SNDRV_SEQ_DEVICE_ARGPTR
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|trident-&gt;synth.seq_client
op_assign
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* allocate new client */
id|memset
c_func
(paren
op_amp
id|callbacks
comma
l_int|0
comma
r_sizeof
(paren
id|callbacks
)paren
)paren
suffix:semicolon
id|callbacks.private_data
op_assign
id|trident
suffix:semicolon
id|callbacks.allow_output
op_assign
id|callbacks.allow_input
op_assign
l_int|1
suffix:semicolon
id|client
op_assign
id|trident-&gt;synth.seq_client
op_assign
id|snd_seq_create_kernel_client
c_func
(paren
id|trident-&gt;card
comma
l_int|1
comma
op_amp
id|callbacks
)paren
suffix:semicolon
r_if
c_cond
(paren
id|client
OL
l_int|0
)paren
r_return
id|client
suffix:semicolon
multiline_comment|/* change name of client */
id|memset
c_func
(paren
op_amp
id|cinfo
comma
l_int|0
comma
r_sizeof
(paren
id|cinfo
)paren
)paren
suffix:semicolon
id|cinfo.client
op_assign
id|client
suffix:semicolon
id|cinfo.type
op_assign
id|KERNEL_CLIENT
suffix:semicolon
id|str
op_assign
l_string|&quot;???&quot;
suffix:semicolon
r_switch
c_cond
(paren
id|trident-&gt;device
)paren
(brace
r_case
id|TRIDENT_DEVICE_ID_DX
suffix:colon
id|str
op_assign
l_string|&quot;Trident 4DWave-DX&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TRIDENT_DEVICE_ID_NX
suffix:colon
id|str
op_assign
l_string|&quot;Trident 4DWave-NX&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TRIDENT_DEVICE_ID_SI7018
suffix:colon
id|str
op_assign
l_string|&quot;SiS 7018&quot;
suffix:semicolon
r_break
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|cinfo.name
comma
id|str
)paren
suffix:semicolon
id|snd_seq_kernel_client_ctl
c_func
(paren
id|client
comma
id|SNDRV_SEQ_IOCTL_SET_CLIENT_INFO
comma
op_amp
id|cinfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
id|snd_trident_synth_create_port
c_func
(paren
id|trident
comma
id|i
)paren
suffix:semicolon
id|trident-&gt;synth.ilist
op_assign
id|snd_seq_instr_list_new
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;synth.ilist
op_eq
l_int|NULL
)paren
(brace
id|snd_seq_delete_kernel_client
c_func
(paren
id|client
)paren
suffix:semicolon
id|trident-&gt;synth.seq_client
op_assign
op_minus
l_int|1
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|trident-&gt;synth.ilist-&gt;flags
op_assign
id|SNDRV_SEQ_INSTR_FLG_DIRECT
suffix:semicolon
id|simpleops
op_assign
op_amp
id|trident-&gt;synth.simple_ops
suffix:semicolon
id|snd_seq_simple_init
c_func
(paren
id|simpleops
comma
id|trident
comma
l_int|NULL
)paren
suffix:semicolon
id|simpleops-&gt;put_sample
op_assign
id|snd_trident_simple_put_sample
suffix:semicolon
id|simpleops-&gt;get_sample
op_assign
id|snd_trident_simple_get_sample
suffix:semicolon
id|simpleops-&gt;remove_sample
op_assign
id|snd_trident_simple_remove_sample
suffix:semicolon
id|simpleops-&gt;notify
op_assign
id|snd_trident_synth_instr_notify
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|sub
comma
l_int|0
comma
r_sizeof
(paren
id|sub
)paren
)paren
suffix:semicolon
id|sub.sender.client
op_assign
id|SNDRV_SEQ_CLIENT_SYSTEM
suffix:semicolon
id|sub.sender.port
op_assign
id|SNDRV_SEQ_PORT_SYSTEM_ANNOUNCE
suffix:semicolon
id|sub.dest.client
op_assign
id|client
suffix:semicolon
id|sub.dest.port
op_assign
l_int|0
suffix:semicolon
id|snd_seq_kernel_client_ctl
c_func
(paren
id|client
comma
id|SNDRV_SEQ_IOCTL_SUBSCRIBE_PORT
comma
op_amp
id|sub
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_trident_synth_delete_device
r_static
r_int
id|snd_trident_synth_delete_device
c_func
(paren
id|snd_seq_device_t
op_star
id|dev
)paren
(brace
id|trident_t
op_star
id|trident
suffix:semicolon
id|trident
op_assign
op_star
(paren
id|trident_t
op_star
op_star
)paren
id|SNDRV_SEQ_DEVICE_ARGPTR
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trident
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|trident-&gt;synth.seq_client
op_ge
l_int|0
)paren
(brace
id|snd_seq_delete_kernel_client
c_func
(paren
id|trident-&gt;synth.seq_client
)paren
suffix:semicolon
id|trident-&gt;synth.seq_client
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|trident-&gt;synth.ilist
)paren
id|snd_seq_instr_list_free
c_func
(paren
op_amp
id|trident-&gt;synth.ilist
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_trident_synth_init
r_static
r_int
id|__init
id|alsa_trident_synth_init
c_func
(paren
r_void
)paren
(brace
r_static
id|snd_seq_dev_ops_t
id|ops
op_assign
(brace
id|snd_trident_synth_new_device
comma
id|snd_trident_synth_delete_device
)brace
suffix:semicolon
r_return
id|snd_seq_device_register_driver
c_func
(paren
id|SNDRV_SEQ_DEV_ID_TRIDENT
comma
op_amp
id|ops
comma
r_sizeof
(paren
id|trident_t
op_star
)paren
)paren
suffix:semicolon
)brace
DECL|function|alsa_trident_synth_exit
r_static
r_void
id|__exit
id|alsa_trident_synth_exit
c_func
(paren
r_void
)paren
(brace
id|snd_seq_device_unregister_driver
c_func
(paren
id|SNDRV_SEQ_DEV_ID_TRIDENT
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|alsa_trident_synth_init
)paren
id|module_exit
c_func
(paren
id|alsa_trident_synth_exit
)paren
eof
