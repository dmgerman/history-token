multiline_comment|/***************************************************************************&n; *            au88x0_eq.c&n; *  Aureal Vortex Hardware EQ control/access.&n; *&n; *  Sun Jun  8 18:19:19 2003&n; *  2003  Manuel Jander (mjander@users.sourceforge.net)&n; *  &n; *  02 July 2003: First time something works :)&n; *  November 2003: A3D Bypass code completed but untested.&n; *&n; *  TODO:&n; *     - Debug (testing)&n; *     - Test peak visualization support.&n; *&n; ****************************************************************************/
multiline_comment|/*&n; *  This program is free software; you can redistribute it and/or modify&n; *  it under the terms of the GNU General Public License as published by&n; *  the Free Software Foundation; either version 2 of the License, or&n; *  (at your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful,&n; *  but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *  GNU Library General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License&n; *  along with this program; if not, write to the Free Software&n; *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.&n; */
multiline_comment|/*&n; The Aureal Hardware EQ is found on AU8810 and AU8830 chips only.&n; it has 4 inputs (2 for general mix, 2 for A3D) and 2 outputs (supposed &n; to be routed to the codec).&n;*/
macro_line|#include &quot;au88x0.h&quot;
macro_line|#include &quot;au88x0_eq.h&quot;
macro_line|#include &quot;au88x0_eqdata.c&quot;
DECL|macro|VORTEX_EQ_BASE
mdefine_line|#define VORTEX_EQ_BASE&t; 0x2b000
DECL|macro|VORTEX_EQ_DEST
mdefine_line|#define VORTEX_EQ_DEST   (VORTEX_EQ_BASE + 0x410)
DECL|macro|VORTEX_EQ_SOURCE
mdefine_line|#define VORTEX_EQ_SOURCE (VORTEX_EQ_BASE + 0x430)
DECL|macro|VORTEX_EQ_CTRL
mdefine_line|#define VORTEX_EQ_CTRL   (VORTEX_EQ_BASE + 0x440)
DECL|macro|VORTEX_BAND_COEFF_SIZE
mdefine_line|#define VORTEX_BAND_COEFF_SIZE 0x30
multiline_comment|/* CEqHw.s */
DECL|function|vortex_EqHw_SetTimeConsts
r_static
r_void
id|vortex_EqHw_SetTimeConsts
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|gain
comma
id|u16
id|level
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3c4
comma
id|gain
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3c8
comma
id|level
)paren
suffix:semicolon
)brace
DECL|function|sign_invert
r_static
r_inline
id|u16
id|sign_invert
c_func
(paren
id|u16
id|a
)paren
(brace
multiline_comment|/* -(-32768) -&gt; -32768 so we do -(-32768) -&gt; 32767 to make the result positive */
r_if
c_cond
(paren
id|a
op_eq
op_minus
l_int|32768
)paren
r_return
l_int|32767
suffix:semicolon
r_else
r_return
op_minus
id|a
suffix:semicolon
)brace
DECL|function|vortex_EqHw_SetLeftCoefs
r_static
r_void
id|vortex_EqHw_SetLeftCoefs
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|coefs
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
op_assign
l_int|0
comma
id|n
multiline_comment|/*esp2c */
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|eqhw-&gt;this04
suffix:semicolon
id|n
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b000
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
id|i
op_plus
l_int|0
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b004
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
id|i
op_plus
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this08
op_eq
l_int|0
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b008
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
id|i
op_plus
l_int|2
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b00c
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
id|i
op_plus
l_int|3
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b010
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
id|i
op_plus
l_int|4
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b008
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|2
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b00c
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|3
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b010
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|4
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
)brace
id|i
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetRightCoefs
r_static
r_void
id|vortex_EqHw_SetRightCoefs
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|coefs
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
op_assign
l_int|0
comma
id|n
multiline_comment|/*esp2c */
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|eqhw-&gt;this04
suffix:semicolon
id|n
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1e0
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
l_int|0
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1e4
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
l_int|1
op_plus
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this08
op_eq
l_int|0
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1e8
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1ec
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
l_int|3
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1f0
op_plus
id|n
op_star
l_int|0x30
comma
id|coefs
(braket
l_int|4
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1e8
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|2
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1ec
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|3
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1f0
op_plus
id|n
op_star
l_int|0x30
comma
id|sign_invert
c_func
(paren
id|coefs
(braket
l_int|4
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
)brace
id|i
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetLeftStates
r_static
r_void
id|vortex_EqHw_SetLeftStates
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
comma
id|u16
id|b
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
op_assign
l_int|0
comma
id|ebx
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3fc
comma
id|a
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b400
comma
id|a
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b014
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b018
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|1
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b01c
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b020
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|3
op_plus
id|i
)braket
)paren
suffix:semicolon
id|i
op_add_assign
l_int|4
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetRightStates
r_static
r_void
id|vortex_EqHw_SetRightStates
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
comma
id|u16
id|b
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
op_assign
l_int|0
comma
id|ebx
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b404
comma
id|a
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b408
comma
id|a
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1f4
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1f8
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|1
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b1fc
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b200
op_plus
(paren
id|i
op_star
l_int|0xc
)paren
comma
id|b
(braket
l_int|3
op_plus
id|i
)braket
)paren
suffix:semicolon
id|i
op_add_assign
l_int|4
suffix:semicolon
)brace
)brace
macro_line|#if 0
r_static
r_void
id|vortex_EqHw_GetTimeConsts
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
op_star
id|a
comma
id|u16
op_star
id|b
)paren
(brace
op_star
id|a
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3c4
)paren
suffix:semicolon
op_star
id|b
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3c8
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_GetLeftCoefs
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
)brace
r_static
r_void
id|vortex_EqHw_GetRightCoefs
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
)brace
r_static
r_void
id|vortex_EqHw_GetLeftStates
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
op_star
id|a
comma
id|u16
id|b
(braket
)braket
)paren
(brace
)brace
r_static
r_void
id|vortex_EqHw_GetRightStates
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
op_star
id|a
comma
id|u16
id|b
(braket
)braket
)paren
(brace
)brace
macro_line|#endif
multiline_comment|/* Mix Gains */
DECL|function|vortex_EqHw_SetBypassGain
r_static
r_void
id|vortex_EqHw_SetBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
comma
id|u16
id|b
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this08
op_eq
l_int|0
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3d4
comma
id|a
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3ec
comma
id|b
)paren
suffix:semicolon
)brace
r_else
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3d4
comma
id|sign_invert
c_func
(paren
id|a
)paren
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3ec
comma
id|sign_invert
c_func
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetA3DBypassGain
r_static
r_void
id|vortex_EqHw_SetA3DBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
comma
id|u16
id|b
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3e0
comma
id|a
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3f8
comma
id|b
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
r_void
id|vortex_EqHw_SetCurrBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
comma
id|u16
id|b
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3d0
comma
id|a
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3e8
comma
id|b
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_SetCurrA3DBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
comma
id|u16
id|b
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3dc
comma
id|a
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3f4
comma
id|b
)paren
suffix:semicolon
)brace
macro_line|#endif
r_static
r_void
DECL|function|vortex_EqHw_SetLeftGainsSingleTarget
id|vortex_EqHw_SetLeftGainsSingleTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
id|b
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b02c
op_plus
(paren
id|index
op_star
l_int|0x30
)paren
comma
id|b
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|vortex_EqHw_SetRightGainsSingleTarget
id|vortex_EqHw_SetRightGainsSingleTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
id|b
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b20c
op_plus
(paren
id|index
op_star
l_int|0x30
)paren
comma
id|b
)paren
suffix:semicolon
)brace
DECL|function|vortex_EqHw_SetLeftGainsTarget
r_static
r_void
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b02c
op_plus
id|ebx
op_star
l_int|0x30
comma
id|a
(braket
id|ebx
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetRightGainsTarget
r_static
r_void
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b20c
op_plus
id|ebx
op_star
l_int|0x30
comma
id|a
(braket
id|ebx
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetLeftGainsCurrent
r_static
r_void
id|vortex_EqHw_SetLeftGainsCurrent
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b028
op_plus
id|ebx
op_star
l_int|0x30
comma
id|a
(braket
id|ebx
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|vortex_EqHw_SetRightGainsCurrent
r_static
r_void
id|vortex_EqHw_SetRightGainsCurrent
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
suffix:semicolon
r_for
c_loop
(paren
id|ebx
op_assign
l_int|0
suffix:semicolon
id|ebx
OL
id|eqhw-&gt;this04
suffix:semicolon
id|ebx
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b208
op_plus
id|ebx
op_star
l_int|0x30
comma
id|a
(braket
id|ebx
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#if 0
r_static
r_void
id|vortex_EqHw_GetLeftGainsTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
OL
l_int|0
)paren
r_return
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b02c
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_GetRightGainsTarget
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
OL
l_int|0
)paren
r_return
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b20c
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_GetLeftGainsCurrent
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
OL
l_int|0
)paren
r_return
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b028
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_GetRightGainsCurrent
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
OL
l_int|0
)paren
r_return
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b208
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* EQ band levels settings */
DECL|function|vortex_EqHw_SetLevels
r_static
r_void
id|vortex_EqHw_SetLevels
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|peaks
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* set left peaks */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|eqhw-&gt;this04
suffix:semicolon
id|i
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b024
op_plus
id|i
op_star
id|VORTEX_BAND_COEFF_SIZE
comma
id|peaks
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3cc
comma
id|peaks
(braket
id|eqhw-&gt;this04
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3d8
comma
id|peaks
(braket
id|eqhw-&gt;this04
op_plus
l_int|1
)braket
)paren
suffix:semicolon
multiline_comment|/* set right peaks */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|eqhw-&gt;this04
suffix:semicolon
id|i
op_increment
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b204
op_plus
id|i
op_star
id|VORTEX_BAND_COEFF_SIZE
comma
id|peaks
(braket
id|i
op_plus
(paren
id|eqhw-&gt;this04
op_plus
l_int|2
)paren
)braket
)paren
suffix:semicolon
)brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3e4
comma
id|peaks
(braket
l_int|2
op_plus
(paren
id|eqhw-&gt;this04
op_star
l_int|2
)paren
)braket
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3f0
comma
id|peaks
(braket
l_int|3
op_plus
(paren
id|eqhw-&gt;this04
op_star
l_int|2
)paren
)braket
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
r_void
id|vortex_EqHw_GetLevels
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|a
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|ebx
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
OL
l_int|0
)paren
r_return
suffix:semicolon
id|ebx
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b024
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
id|a
(braket
id|eqhw-&gt;this04
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3cc
)paren
suffix:semicolon
id|a
(braket
id|eqhw-&gt;this04
op_plus
l_int|1
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3d8
)paren
suffix:semicolon
id|ebx
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|a
(braket
id|ebx
op_plus
(paren
id|eqhw-&gt;this04
op_plus
l_int|2
)paren
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b204
op_plus
id|ebx
op_star
l_int|0x30
)paren
suffix:semicolon
id|ebx
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ebx
OL
id|eqhw-&gt;this04
)paren
suffix:semicolon
id|a
(braket
l_int|2
op_plus
(paren
id|eqhw-&gt;this04
op_star
l_int|2
)paren
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3e4
)paren
suffix:semicolon
id|a
(braket
l_int|3
op_plus
(paren
id|eqhw-&gt;this04
op_star
l_int|2
)paren
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3f0
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* Global Control */
DECL|function|vortex_EqHw_SetControlReg
r_static
r_void
id|vortex_EqHw_SetControlReg
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
r_int
id|reg
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b440
comma
id|reg
)paren
suffix:semicolon
)brace
DECL|function|vortex_EqHw_SetSampleRate
r_static
r_void
id|vortex_EqHw_SetSampleRate
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
id|sr
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b440
comma
(paren
(paren
id|sr
op_amp
l_int|0x1f
)paren
op_lshift
l_int|3
)paren
op_or
l_int|0xb800
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
r_void
id|vortex_EqHw_GetControlReg
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
r_int
op_star
id|reg
)paren
(brace
op_star
id|reg
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b440
)paren
suffix:semicolon
)brace
r_static
r_void
id|vortex_EqHw_GetSampleRate
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
op_star
id|sr
)paren
(brace
op_star
id|sr
op_assign
(paren
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b440
)paren
op_rshift
l_int|3
)paren
op_amp
l_int|0x1f
suffix:semicolon
)brace
macro_line|#endif
DECL|function|vortex_EqHw_Enable
r_static
r_void
id|vortex_EqHw_Enable
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
id|VORTEX_EQ_CTRL
comma
l_int|0xf001
)paren
suffix:semicolon
)brace
DECL|function|vortex_EqHw_Disable
r_static
r_void
id|vortex_EqHw_Disable
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
id|VORTEX_EQ_CTRL
comma
l_int|0xf000
)paren
suffix:semicolon
)brace
multiline_comment|/* Reset (zero) buffers */
DECL|function|vortex_EqHw_ZeroIO
r_static
r_void
id|vortex_EqHw_ZeroIO
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x8
suffix:semicolon
id|i
op_increment
)paren
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
id|VORTEX_EQ_DEST
op_plus
(paren
id|i
op_lshift
l_int|2
)paren
comma
l_int|0x0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4
suffix:semicolon
id|i
op_increment
)paren
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
id|VORTEX_EQ_SOURCE
op_plus
(paren
id|i
op_lshift
l_int|2
)paren
comma
l_int|0x0
)paren
suffix:semicolon
)brace
DECL|function|vortex_EqHw_ZeroA3DIO
r_static
r_void
id|vortex_EqHw_ZeroA3DIO
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4
suffix:semicolon
id|i
op_increment
)paren
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
id|VORTEX_EQ_DEST
op_plus
(paren
id|i
op_lshift
l_int|2
)paren
comma
l_int|0x0
)paren
suffix:semicolon
)brace
DECL|function|vortex_EqHw_ZeroState
r_static
r_void
id|vortex_EqHw_ZeroState
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|vortex_EqHw_SetControlReg
c_func
(paren
id|vortex
comma
l_int|0
)paren
suffix:semicolon
id|vortex_EqHw_ZeroIO
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|hwwrite
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2b3c0
comma
l_int|0
)paren
suffix:semicolon
id|vortex_EqHw_SetTimeConsts
c_func
(paren
id|vortex
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftCoefs
c_func
(paren
id|vortex
comma
id|asEqCoefsZeros
)paren
suffix:semicolon
id|vortex_EqHw_SetRightCoefs
c_func
(paren
id|vortex
comma
id|asEqCoefsZeros
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsCurrent
c_func
(paren
id|vortex
comma
id|eq_gains_zero
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsCurrent
c_func
(paren
id|vortex
comma
id|eq_gains_zero
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex
comma
id|eq_gains_zero
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex
comma
id|eq_gains_zero
)paren
suffix:semicolon
id|vortex_EqHw_SetBypassGain
c_func
(paren
id|vortex
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//vortex_EqHw_SetCurrBypassGain(vortex, 0, 0);
id|vortex_EqHw_SetA3DBypassGain
c_func
(paren
id|vortex
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//vortex_EqHw_SetCurrA3DBypassGain(vortex, 0, 0);
id|vortex_EqHw_SetLeftStates
c_func
(paren
id|vortex
comma
id|eq_states_zero
comma
id|asEqOutStateZeros
)paren
suffix:semicolon
id|vortex_EqHw_SetRightStates
c_func
(paren
id|vortex
comma
id|eq_states_zero
comma
id|asEqOutStateZeros
)paren
suffix:semicolon
id|vortex_EqHw_SetLevels
c_func
(paren
id|vortex
comma
(paren
id|u16
op_star
)paren
id|eq_levels
)paren
suffix:semicolon
)brace
multiline_comment|/* Program coeficients as pass through */
DECL|function|vortex_EqHw_ProgramPipe
r_static
r_void
id|vortex_EqHw_ProgramPipe
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|vortex_EqHw_SetTimeConsts
c_func
(paren
id|vortex
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftCoefs
c_func
(paren
id|vortex
comma
id|asEqCoefsPipes
)paren
suffix:semicolon
id|vortex_EqHw_SetRightCoefs
c_func
(paren
id|vortex
comma
id|asEqCoefsPipes
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsCurrent
c_func
(paren
id|vortex
comma
id|eq_gains_current
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsCurrent
c_func
(paren
id|vortex
comma
id|eq_gains_current
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex
comma
id|eq_gains_current
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex
comma
id|eq_gains_current
)paren
suffix:semicolon
)brace
multiline_comment|/* Program EQ block as 10 band Equalizer */
r_static
r_void
DECL|function|vortex_EqHw_Program10Band
id|vortex_EqHw_Program10Band
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|auxxEqCoeffSet_t
op_star
id|coefset
)paren
(brace
id|vortex_EqHw_SetTimeConsts
c_func
(paren
id|vortex
comma
l_int|0xc
comma
l_int|0x7fe0
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftCoefs
c_func
(paren
id|vortex
comma
id|coefset-&gt;LeftCoefs
)paren
suffix:semicolon
id|vortex_EqHw_SetRightCoefs
c_func
(paren
id|vortex
comma
id|coefset-&gt;RightCoefs
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsCurrent
c_func
(paren
id|vortex
comma
id|coefset-&gt;LeftGains
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex
comma
id|coefset-&gt;RightGains
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex
comma
id|coefset-&gt;LeftGains
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsCurrent
c_func
(paren
id|vortex
comma
id|coefset-&gt;RightGains
)paren
suffix:semicolon
)brace
multiline_comment|/* Read all EQ peaks. (think VU meter) */
DECL|function|vortex_EqHw_GetTenBandLevels
r_static
r_void
id|vortex_EqHw_GetTenBandLevels
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|peaks
(braket
)braket
)paren
(brace
id|eqhw_t
op_star
id|eqhw
op_assign
op_amp
(paren
id|vortex-&gt;eq.this04
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|eqhw-&gt;this04
op_le
l_int|0
)paren
r_return
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|eqhw-&gt;this04
suffix:semicolon
id|i
op_increment
)paren
id|peaks
(braket
id|i
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2B024
op_plus
id|i
op_star
l_int|0x30
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|eqhw-&gt;this04
suffix:semicolon
id|i
op_increment
)paren
id|peaks
(braket
id|i
op_plus
id|eqhw-&gt;this04
)braket
op_assign
id|hwread
c_func
(paren
id|vortex-&gt;mmio
comma
l_int|0x2B204
op_plus
id|i
op_star
l_int|0x30
)paren
suffix:semicolon
)brace
multiline_comment|/* CEqlzr.s */
DECL|function|vortex_Eqlzr_GetLeftGain
r_static
r_int
id|vortex_Eqlzr_GetLeftGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
op_star
id|gain
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this28
)paren
(brace
op_star
id|gain
op_assign
id|eq-&gt;this130
(braket
id|index
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_SetLeftGain
r_static
r_void
id|vortex_Eqlzr_SetLeftGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
id|gain
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this28
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|eq-&gt;this130
(braket
id|index
)braket
op_assign
id|gain
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this54
)paren
r_return
suffix:semicolon
id|vortex_EqHw_SetLeftGainsSingleTarget
c_func
(paren
id|vortex
comma
id|index
comma
id|gain
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_GetRightGain
r_static
r_int
id|vortex_Eqlzr_GetRightGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
op_star
id|gain
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this28
)paren
(brace
op_star
id|gain
op_assign
id|eq-&gt;this130
(braket
id|index
op_plus
id|eq-&gt;this10
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_SetRightGain
r_static
r_void
id|vortex_Eqlzr_SetRightGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|index
comma
id|u16
id|gain
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this28
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|eq-&gt;this130
(braket
id|index
op_plus
id|eq-&gt;this10
)braket
op_assign
id|gain
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this54
)paren
r_return
suffix:semicolon
id|vortex_EqHw_SetRightGainsSingleTarget
c_func
(paren
id|vortex
comma
id|index
comma
id|gain
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
r_int
id|vortex_Eqlzr_GetAllBands
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
op_star
id|gains
comma
r_int
r_int
op_star
id|cnt
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_int
id|si
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this10
op_eq
l_int|0
)paren
r_return
l_int|1
suffix:semicolon
(brace
r_if
c_cond
(paren
id|vortex_Eqlzr_GetLeftGain
c_func
(paren
id|vortex
comma
id|si
comma
op_amp
id|gains
(braket
id|si
)braket
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|vortex_Eqlzr_GetRightGain
(paren
id|vortex
comma
id|si
comma
op_amp
id|gains
(braket
id|si
op_plus
id|eq-&gt;this10
)braket
)paren
)paren
r_return
l_int|1
suffix:semicolon
id|si
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|eq-&gt;this10
OG
id|si
)paren
suffix:semicolon
op_star
id|cnt
op_assign
id|si
op_star
l_int|2
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|function|vortex_Eqlzr_SetAllBandsFromActiveCoeffSet
r_static
r_int
id|vortex_Eqlzr_SetAllBandsFromActiveCoeffSet
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex
comma
id|eq-&gt;this130
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex
comma
op_amp
(paren
id|eq-&gt;this130
(braket
id|eq-&gt;this10
)braket
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|vortex_Eqlzr_SetAllBands
id|vortex_Eqlzr_SetAllBands
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
id|gains
(braket
)braket
comma
r_int
r_int
id|count
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|eq-&gt;this10
)paren
op_star
l_int|2
op_ne
id|count
)paren
op_logical_or
(paren
id|eq-&gt;this28
op_eq
l_int|0
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|eq-&gt;this130
(braket
id|i
)braket
op_assign
id|gains
(braket
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|eq-&gt;this54
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|vortex_Eqlzr_SetAllBandsFromActiveCoeffSet
c_func
(paren
id|vortex
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|vortex_Eqlzr_SetA3dBypassGain
id|vortex_Eqlzr_SetA3dBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
r_int
id|a
comma
r_int
r_int
id|b
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_int
id|eax
comma
id|ebx
suffix:semicolon
id|eq-&gt;this58
op_assign
id|a
suffix:semicolon
id|eq-&gt;this5c
op_assign
id|b
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this54
)paren
id|eax
op_assign
id|eq-&gt;this0e
suffix:semicolon
r_else
id|eax
op_assign
id|eq-&gt;this0a
suffix:semicolon
id|ebx
op_assign
(paren
id|eax
op_star
id|eq-&gt;this58
)paren
op_rshift
l_int|0x10
suffix:semicolon
id|eax
op_assign
(paren
id|eax
op_star
id|eq-&gt;this5c
)paren
op_rshift
l_int|0x10
suffix:semicolon
id|vortex_EqHw_SetA3DBypassGain
c_func
(paren
id|vortex
comma
id|ebx
comma
id|eax
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_ProgramA3dBypassGain
r_static
r_void
id|vortex_Eqlzr_ProgramA3dBypassGain
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_int
id|eax
comma
id|ebx
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this54
)paren
id|eax
op_assign
id|eq-&gt;this0e
suffix:semicolon
r_else
id|eax
op_assign
id|eq-&gt;this0a
suffix:semicolon
id|ebx
op_assign
(paren
id|eax
op_star
id|eq-&gt;this58
)paren
op_rshift
l_int|0x10
suffix:semicolon
id|eax
op_assign
(paren
id|eax
op_star
id|eq-&gt;this5c
)paren
op_rshift
l_int|0x10
suffix:semicolon
id|vortex_EqHw_SetA3DBypassGain
c_func
(paren
id|vortex
comma
id|ebx
comma
id|eax
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_ShutDownA3d
r_static
r_void
id|vortex_Eqlzr_ShutDownA3d
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
r_if
c_cond
(paren
id|vortex
op_ne
l_int|NULL
)paren
id|vortex_EqHw_ZeroA3DIO
c_func
(paren
id|vortex
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_SetBypass
r_static
r_void
id|vortex_Eqlzr_SetBypass
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
r_int
id|bp
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|eq-&gt;this28
)paren
op_logical_and
(paren
id|bp
op_eq
l_int|0
)paren
)paren
(brace
multiline_comment|/* EQ enabled */
id|vortex_Eqlzr_SetAllBandsFromActiveCoeffSet
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|vortex_EqHw_SetBypassGain
c_func
(paren
id|vortex
comma
id|eq-&gt;this08
comma
id|eq-&gt;this08
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* EQ disabled. */
id|vortex_EqHw_SetLeftGainsTarget
c_func
(paren
id|vortex
comma
(paren
id|u16
op_star
)paren
(paren
id|eq-&gt;this14
)paren
)paren
suffix:semicolon
id|vortex_EqHw_SetRightGainsTarget
c_func
(paren
id|vortex
comma
(paren
id|u16
op_star
)paren
(paren
id|eq-&gt;this14
)paren
)paren
suffix:semicolon
id|vortex_EqHw_SetBypassGain
c_func
(paren
id|vortex
comma
id|eq-&gt;this0c
comma
id|eq-&gt;this0c
)paren
suffix:semicolon
)brace
id|vortex_Eqlzr_ProgramA3dBypassGain
c_func
(paren
id|vortex
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_ReadAndSetActiveCoefSet
r_static
r_void
id|vortex_Eqlzr_ReadAndSetActiveCoefSet
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
multiline_comment|/* Set EQ BiQuad filter coeficients */
id|memcpy
c_func
(paren
op_amp
(paren
id|eq-&gt;coefset
)paren
comma
op_amp
id|asEqCoefsNormal
comma
r_sizeof
(paren
id|auxxEqCoeffSet_t
)paren
)paren
suffix:semicolon
multiline_comment|/* Set EQ Band gain levels and dump into hardware registers. */
id|vortex_Eqlzr_SetAllBands
c_func
(paren
id|vortex
comma
id|eq_gains_normal
comma
id|eq-&gt;this10
op_star
l_int|2
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_GetAllPeaks
r_static
r_int
id|vortex_Eqlzr_GetAllPeaks
c_func
(paren
id|vortex_t
op_star
id|vortex
comma
id|u16
op_star
id|peaks
comma
r_int
op_star
id|count
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eq-&gt;this10
op_eq
l_int|0
)paren
r_return
l_int|1
suffix:semicolon
op_star
id|count
op_assign
id|eq-&gt;this10
op_star
l_int|2
suffix:semicolon
id|vortex_EqHw_GetTenBandLevels
c_func
(paren
id|vortex
comma
id|peaks
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#if 0
r_static
id|auxxEqCoeffSet_t
op_star
id|vortex_Eqlzr_GetActiveCoefSet
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
r_return
(paren
op_amp
(paren
id|eq-&gt;coefset
)paren
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|vortex_Eqlzr_init
r_static
r_void
id|vortex_Eqlzr_init
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
multiline_comment|/* Object constructor */
singleline_comment|//eq-&gt;this04 = 0;
id|eq-&gt;this08
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Bypass gain with EQ in use. */
id|eq-&gt;this0a
op_assign
l_int|0x5999
suffix:semicolon
id|eq-&gt;this0c
op_assign
l_int|0x5999
suffix:semicolon
multiline_comment|/* Bypass gain with EQ disabled. */
id|eq-&gt;this0e
op_assign
l_int|0x5999
suffix:semicolon
id|eq-&gt;this10
op_assign
l_int|0xa
suffix:semicolon
multiline_comment|/* 10 eq frequency bands. */
id|eq-&gt;this04.this04
op_assign
id|eq-&gt;this10
suffix:semicolon
id|eq-&gt;this28
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* if 1 =&gt; Allow read access to this130 (gains) */
id|eq-&gt;this54
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* if 1 =&gt; Dont Allow access to hardware (gains) */
id|eq-&gt;this58
op_assign
l_int|0xffff
suffix:semicolon
id|eq-&gt;this5c
op_assign
l_int|0xffff
suffix:semicolon
multiline_comment|/* Set gains. */
id|memset
c_func
(paren
id|eq-&gt;this14
comma
l_int|0
comma
l_int|2
op_star
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Actual init. */
id|vortex_EqHw_ZeroState
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|vortex_EqHw_SetSampleRate
c_func
(paren
id|vortex
comma
l_int|0x11
)paren
suffix:semicolon
id|vortex_Eqlzr_ReadAndSetActiveCoefSet
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|vortex_EqHw_Program10Band
c_func
(paren
id|vortex
comma
op_amp
(paren
id|eq-&gt;coefset
)paren
)paren
suffix:semicolon
id|vortex_Eqlzr_SetBypass
c_func
(paren
id|vortex
comma
id|eq-&gt;this54
)paren
suffix:semicolon
id|vortex_Eqlzr_SetA3dBypassGain
c_func
(paren
id|vortex
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
id|vortex_EqHw_Enable
c_func
(paren
id|vortex
)paren
suffix:semicolon
)brace
DECL|function|vortex_Eqlzr_shutdown
r_static
r_void
id|vortex_Eqlzr_shutdown
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|vortex_Eqlzr_ShutDownA3d
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|vortex_EqHw_ProgramPipe
c_func
(paren
id|vortex
)paren
suffix:semicolon
id|vortex_EqHw_Disable
c_func
(paren
id|vortex
)paren
suffix:semicolon
)brace
multiline_comment|/* ALSA interface */
multiline_comment|/* Control interface */
r_static
r_int
DECL|function|snd_vortex_eqtoggle_info
id|snd_vortex_eqtoggle_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|1
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_vortex_eqtoggle_get
id|snd_vortex_eqtoggle_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|vortex_t
op_star
id|vortex
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
singleline_comment|//int i = kcontrol-&gt;private_value;
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|eq-&gt;this54
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_vortex_eqtoggle_put
id|snd_vortex_eqtoggle_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|vortex_t
op_star
id|vortex
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
id|eqlzr_t
op_star
id|eq
op_assign
op_amp
(paren
id|vortex-&gt;eq
)paren
suffix:semicolon
singleline_comment|//int i = kcontrol-&gt;private_value;
id|eq-&gt;this54
op_assign
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|vortex_Eqlzr_SetBypass
c_func
(paren
id|vortex
comma
id|eq-&gt;this54
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
multiline_comment|/* Allways changes */
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|vortex_eqtoggle_kcontrol
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;EQ Enable&quot;
comma
dot
id|index
op_assign
l_int|0
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
comma
dot
id|private_value
op_assign
l_int|0
comma
dot
id|info
op_assign
id|snd_vortex_eqtoggle_info
comma
dot
id|get
op_assign
id|snd_vortex_eqtoggle_get
comma
dot
id|put
op_assign
id|snd_vortex_eqtoggle_put
)brace
suffix:semicolon
r_static
r_int
DECL|function|snd_vortex_eq_info
id|snd_vortex_eq_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|2
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0x0000
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x7fff
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_vortex_eq_get
id|snd_vortex_eq_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|vortex_t
op_star
id|vortex
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
id|u16
id|gainL
comma
id|gainR
suffix:semicolon
id|vortex_Eqlzr_GetLeftGain
c_func
(paren
id|vortex
comma
id|i
comma
op_amp
id|gainL
)paren
suffix:semicolon
id|vortex_Eqlzr_GetRightGain
c_func
(paren
id|vortex
comma
id|i
comma
op_amp
id|gainR
)paren
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|gainL
suffix:semicolon
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|gainR
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_vortex_eq_put
id|snd_vortex_eq_put
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|vortex_t
op_star
id|vortex
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|changed
op_assign
l_int|0
comma
id|i
op_assign
id|kcontrol-&gt;private_value
suffix:semicolon
id|u16
id|gainL
comma
id|gainR
suffix:semicolon
id|vortex_Eqlzr_GetLeftGain
c_func
(paren
id|vortex
comma
id|i
comma
op_amp
id|gainL
)paren
suffix:semicolon
id|vortex_Eqlzr_GetRightGain
c_func
(paren
id|vortex
comma
id|i
comma
op_amp
id|gainR
)paren
suffix:semicolon
r_if
c_cond
(paren
id|gainL
op_ne
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
(brace
id|vortex_Eqlzr_SetLeftGain
c_func
(paren
id|vortex
comma
id|i
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|changed
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|gainR
op_ne
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
)paren
(brace
id|vortex_Eqlzr_SetRightGain
c_func
(paren
id|vortex
comma
id|i
comma
id|ucontrol-&gt;value.integer.value
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|changed
op_assign
l_int|1
suffix:semicolon
)brace
r_return
id|changed
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|vortex_eq_kcontrol
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;                        .&quot;
comma
dot
id|index
op_assign
l_int|0
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READWRITE
comma
dot
id|private_value
op_assign
l_int|0
comma
dot
id|info
op_assign
id|snd_vortex_eq_info
comma
dot
id|get
op_assign
id|snd_vortex_eq_get
comma
dot
id|put
op_assign
id|snd_vortex_eq_put
)brace
suffix:semicolon
r_static
r_int
DECL|function|snd_vortex_peaks_info
id|snd_vortex_peaks_info
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_info_t
op_star
id|uinfo
)paren
(brace
id|uinfo-&gt;type
op_assign
id|SNDRV_CTL_ELEM_TYPE_INTEGER
suffix:semicolon
id|uinfo-&gt;count
op_assign
l_int|20
suffix:semicolon
id|uinfo-&gt;value.integer.min
op_assign
l_int|0x0000
suffix:semicolon
id|uinfo-&gt;value.integer.max
op_assign
l_int|0x7fff
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|snd_vortex_peaks_get
id|snd_vortex_peaks_get
c_func
(paren
id|snd_kcontrol_t
op_star
id|kcontrol
comma
id|snd_ctl_elem_value_t
op_star
id|ucontrol
)paren
(brace
id|vortex_t
op_star
id|vortex
op_assign
id|snd_kcontrol_chip
c_func
(paren
id|kcontrol
)paren
suffix:semicolon
r_int
id|i
comma
id|count
suffix:semicolon
id|u16
id|peaks
(braket
l_int|20
)braket
suffix:semicolon
id|vortex_Eqlzr_GetAllPeaks
c_func
(paren
id|vortex
comma
id|peaks
comma
op_amp
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_ne
l_int|20
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;vortex: peak count error 20 != %d &bslash;n&quot;
comma
id|count
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
id|ucontrol-&gt;value.integer.value
(braket
id|i
)braket
op_assign
id|peaks
(braket
id|i
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|__devinitdata
r_static
id|snd_kcontrol_new_t
id|vortex_levels_kcontrol
id|__devinitdata
op_assign
(brace
dot
id|iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
comma
dot
id|name
op_assign
l_string|&quot;EQ Peaks&quot;
comma
dot
id|access
op_assign
id|SNDRV_CTL_ELEM_ACCESS_READ
op_or
id|SNDRV_CTL_ELEM_ACCESS_VOLATILE
comma
dot
id|info
op_assign
id|snd_vortex_peaks_info
comma
dot
id|get
op_assign
id|snd_vortex_peaks_get
comma
)brace
suffix:semicolon
multiline_comment|/* EQ band gain labels. */
DECL|variable|__devinitdata
r_static
r_char
op_star
id|EqBandLabels
(braket
l_int|10
)braket
id|__devinitdata
op_assign
(brace
l_string|&quot;EQ0 31Hz&bslash;0&quot;
comma
l_string|&quot;EQ1 63Hz&bslash;0&quot;
comma
l_string|&quot;EQ2 125Hz&bslash;0&quot;
comma
l_string|&quot;EQ3 250Hz&bslash;0&quot;
comma
l_string|&quot;EQ4 500Hz&bslash;0&quot;
comma
l_string|&quot;EQ5 1KHz&bslash;0&quot;
comma
l_string|&quot;EQ6 2KHz&bslash;0&quot;
comma
l_string|&quot;EQ7 4KHz&bslash;0&quot;
comma
l_string|&quot;EQ8 8KHz&bslash;0&quot;
comma
l_string|&quot;EQ9 16KHz&bslash;0&quot;
comma
)brace
suffix:semicolon
multiline_comment|/* ALSA driver entry points. Init and exit. */
DECL|function|vortex_eq_init
r_static
r_int
id|vortex_eq_init
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
id|snd_kcontrol_t
op_star
id|kcontrol
suffix:semicolon
r_int
id|err
comma
id|i
suffix:semicolon
id|vortex_Eqlzr_init
c_func
(paren
id|vortex
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kcontrol
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|vortex_eqtoggle_kcontrol
comma
id|vortex
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|kcontrol-&gt;private_value
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|vortex-&gt;card
comma
id|kcontrol
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/* EQ gain controls */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|kcontrol
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|vortex_eq_kcontrol
comma
id|vortex
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|strcpy
c_func
(paren
id|kcontrol-&gt;id.name
comma
id|EqBandLabels
(braket
id|i
)braket
)paren
suffix:semicolon
id|kcontrol-&gt;private_value
op_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|vortex-&gt;card
comma
id|kcontrol
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
singleline_comment|//vortex-&gt;eqctrl[i] = kcontrol;
)brace
multiline_comment|/* EQ band levels */
r_if
c_cond
(paren
(paren
id|kcontrol
op_assign
id|snd_ctl_new1
c_func
(paren
op_amp
id|vortex_levels_kcontrol
comma
id|vortex
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_ctl_add
c_func
(paren
id|vortex-&gt;card
comma
id|kcontrol
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|vortex_eq_free
r_static
r_int
id|vortex_eq_free
c_func
(paren
id|vortex_t
op_star
id|vortex
)paren
(brace
multiline_comment|/*&n;&t;   //FIXME: segfault because vortex-&gt;eqctrl[i] == 4&n;&t;   int i;&n;&t;   for (i=0; i&lt;10; i++) {&n;&t;   if (vortex-&gt;eqctrl[i])&n;&t;   snd_ctl_remove(vortex-&gt;card, vortex-&gt;eqctrl[i]);&n;&t;   }&n;&t; */
id|vortex_Eqlzr_shutdown
c_func
(paren
id|vortex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* End */
eof
