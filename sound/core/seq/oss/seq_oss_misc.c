multiline_comment|/*----------------------------------------------------------------&n; * miscellaneous functions&n; *----------------------------------------------------------------*/
DECL|variable|snd_seq_oss_semitone_tuning
r_int
r_int
id|snd_seq_oss_semitone_tuning
(braket
l_int|24
)braket
op_assign
(brace
multiline_comment|/*   0 */
l_int|10000
comma
l_int|10595
comma
l_int|11225
comma
l_int|11892
comma
l_int|12599
comma
l_int|13348
comma
l_int|14142
comma
l_int|14983
comma
multiline_comment|/*   8 */
l_int|15874
comma
l_int|16818
comma
l_int|17818
comma
l_int|18877
comma
l_int|20000
comma
l_int|21189
comma
l_int|22449
comma
l_int|23784
comma
multiline_comment|/*  16 */
l_int|25198
comma
l_int|26697
comma
l_int|28284
comma
l_int|29966
comma
l_int|31748
comma
l_int|33636
comma
l_int|35636
comma
l_int|37755
)brace
suffix:semicolon
DECL|variable|snd_seq_oss_cent_tuning
r_int
r_int
id|snd_seq_oss_cent_tuning
(braket
l_int|100
)braket
op_assign
(brace
multiline_comment|/*   0 */
l_int|10000
comma
l_int|10006
comma
l_int|10012
comma
l_int|10017
comma
l_int|10023
comma
l_int|10029
comma
l_int|10035
comma
l_int|10041
comma
multiline_comment|/*   8 */
l_int|10046
comma
l_int|10052
comma
l_int|10058
comma
l_int|10064
comma
l_int|10070
comma
l_int|10075
comma
l_int|10081
comma
l_int|10087
comma
multiline_comment|/*  16 */
l_int|10093
comma
l_int|10099
comma
l_int|10105
comma
l_int|10110
comma
l_int|10116
comma
l_int|10122
comma
l_int|10128
comma
l_int|10134
comma
multiline_comment|/*  24 */
l_int|10140
comma
l_int|10145
comma
l_int|10151
comma
l_int|10157
comma
l_int|10163
comma
l_int|10169
comma
l_int|10175
comma
l_int|10181
comma
multiline_comment|/*  32 */
l_int|10187
comma
l_int|10192
comma
l_int|10198
comma
l_int|10204
comma
l_int|10210
comma
l_int|10216
comma
l_int|10222
comma
l_int|10228
comma
multiline_comment|/*  40 */
l_int|10234
comma
l_int|10240
comma
l_int|10246
comma
l_int|10251
comma
l_int|10257
comma
l_int|10263
comma
l_int|10269
comma
l_int|10275
comma
multiline_comment|/*  48 */
l_int|10281
comma
l_int|10287
comma
l_int|10293
comma
l_int|10299
comma
l_int|10305
comma
l_int|10311
comma
l_int|10317
comma
l_int|10323
comma
multiline_comment|/*  56 */
l_int|10329
comma
l_int|10335
comma
l_int|10341
comma
l_int|10347
comma
l_int|10353
comma
l_int|10359
comma
l_int|10365
comma
l_int|10371
comma
multiline_comment|/*  64 */
l_int|10377
comma
l_int|10383
comma
l_int|10389
comma
l_int|10395
comma
l_int|10401
comma
l_int|10407
comma
l_int|10413
comma
l_int|10419
comma
multiline_comment|/*  72 */
l_int|10425
comma
l_int|10431
comma
l_int|10437
comma
l_int|10443
comma
l_int|10449
comma
l_int|10455
comma
l_int|10461
comma
l_int|10467
comma
multiline_comment|/*  80 */
l_int|10473
comma
l_int|10479
comma
l_int|10485
comma
l_int|10491
comma
l_int|10497
comma
l_int|10503
comma
l_int|10509
comma
l_int|10515
comma
multiline_comment|/*  88 */
l_int|10521
comma
l_int|10528
comma
l_int|10534
comma
l_int|10540
comma
l_int|10546
comma
l_int|10552
comma
l_int|10558
comma
l_int|10564
comma
multiline_comment|/*  96 */
l_int|10570
comma
l_int|10576
comma
l_int|10582
comma
l_int|10589
)brace
suffix:semicolon
multiline_comment|/* convert from MIDI note to frequency */
r_int
DECL|function|snd_seq_oss_note_to_freq
id|snd_seq_oss_note_to_freq
c_func
(paren
r_int
id|note_num
)paren
(brace
multiline_comment|/*&n;&t; * This routine converts a midi note to a frequency (multiplied by 1000)&n;&t; */
r_int
id|note
comma
id|octave
comma
id|note_freq
suffix:semicolon
r_static
r_int
id|notes
(braket
)braket
op_assign
(brace
l_int|261632
comma
l_int|277189
comma
l_int|293671
comma
l_int|311132
comma
l_int|329632
comma
l_int|349232
comma
l_int|369998
comma
l_int|391998
comma
l_int|415306
comma
l_int|440000
comma
l_int|466162
comma
l_int|493880
)brace
suffix:semicolon
DECL|macro|BASE_OCTAVE
mdefine_line|#define BASE_OCTAVE&t;5
id|octave
op_assign
id|note_num
op_div
l_int|12
suffix:semicolon
id|note
op_assign
id|note_num
op_mod
l_int|12
suffix:semicolon
id|note_freq
op_assign
id|notes
(braket
id|note
)braket
suffix:semicolon
r_if
c_cond
(paren
id|octave
OL
id|BASE_OCTAVE
)paren
id|note_freq
op_rshift_assign
(paren
id|BASE_OCTAVE
op_minus
id|octave
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|octave
OG
id|BASE_OCTAVE
)paren
id|note_freq
op_lshift_assign
(paren
id|octave
op_minus
id|BASE_OCTAVE
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * note_freq &gt;&gt;= 1;&n;&t; */
r_return
id|note_freq
suffix:semicolon
)brace
r_int
r_int
DECL|function|snd_seq_oss_compute_finetune
id|snd_seq_oss_compute_finetune
c_func
(paren
r_int
r_int
id|base_freq
comma
r_int
id|bend
comma
r_int
id|range
comma
r_int
id|vibrato_cents
)paren
(brace
r_int
r_int
id|amount
suffix:semicolon
r_int
id|negative
comma
id|semitones
comma
id|cents
comma
id|multiplier
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bend
op_logical_or
op_logical_neg
id|range
op_logical_or
op_logical_neg
id|base_freq
)paren
r_return
id|base_freq
suffix:semicolon
r_if
c_cond
(paren
id|range
op_ge
l_int|8192
)paren
id|range
op_assign
l_int|8192
suffix:semicolon
id|bend
op_assign
id|bend
op_star
id|range
op_div
l_int|8192
suffix:semicolon
multiline_comment|/* Convert to cents */
id|bend
op_add_assign
id|vibrato_cents
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bend
)paren
r_return
id|base_freq
suffix:semicolon
id|negative
op_assign
id|bend
OL
l_int|0
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|bend
OL
l_int|0
)paren
id|bend
op_mul_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|bend
OG
id|range
)paren
id|bend
op_assign
id|range
suffix:semicolon
multiline_comment|/*&n;&t;   if (bend &gt; 2399)&n;&t;   bend = 2399;&n;&t; */
r_while
c_loop
(paren
id|bend
OG
l_int|2399
)paren
(brace
id|multiplier
op_mul_assign
l_int|4
suffix:semicolon
id|bend
op_sub_assign
l_int|2400
suffix:semicolon
)brace
id|semitones
op_assign
id|bend
op_div
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|semitones
OG
l_int|99
)paren
id|semitones
op_assign
l_int|99
suffix:semicolon
id|cents
op_assign
id|bend
op_mod
l_int|100
suffix:semicolon
id|amount
op_assign
(paren
r_int
)paren
(paren
id|snd_seq_oss_semitone_tuning
(braket
id|semitones
)braket
op_star
id|multiplier
op_star
id|snd_seq_oss_cent_tuning
(braket
id|cents
)braket
)paren
op_div
l_int|10000
suffix:semicolon
r_if
c_cond
(paren
id|negative
)paren
r_return
(paren
id|base_freq
op_star
l_int|10000
)paren
op_div
id|amount
suffix:semicolon
multiline_comment|/* Bend down */
r_else
r_return
(paren
id|base_freq
op_star
id|amount
)paren
op_div
l_int|10000
suffix:semicolon
multiline_comment|/* Bend up */
)brace
eof
