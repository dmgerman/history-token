multiline_comment|/*&n; *  Digital Audio (PCM) abstract layer&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/time.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/minors.h&gt;
macro_line|#include &lt;sound/pcm.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/info.h&gt;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;, Abramo Bagnara &lt;abramo@alsa-project.org&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Midlevel PCM code for ALSA.&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|snd_pcm_devices
id|snd_pcm_t
op_star
id|snd_pcm_devices
(braket
id|SNDRV_CARDS
op_star
id|SNDRV_PCM_DEVICES
)braket
suffix:semicolon
r_static
id|LIST_HEAD
c_func
(paren
id|snd_pcm_notify_list
)paren
suffix:semicolon
r_static
id|DECLARE_MUTEX
c_func
(paren
id|register_mutex
)paren
suffix:semicolon
r_static
r_int
id|snd_pcm_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
suffix:semicolon
r_static
r_int
id|snd_pcm_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
suffix:semicolon
r_static
r_int
id|snd_pcm_dev_register
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
suffix:semicolon
r_static
r_int
id|snd_pcm_dev_disconnect
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
suffix:semicolon
r_static
r_int
id|snd_pcm_dev_unregister
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
suffix:semicolon
DECL|function|snd_pcm_control_ioctl
r_static
r_int
id|snd_pcm_control_ioctl
c_func
(paren
id|snd_card_t
op_star
id|card
comma
id|snd_ctl_file_t
op_star
id|control
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
id|card-&gt;number
op_star
id|SNDRV_PCM_DEVICES
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SNDRV_CTL_IOCTL_PCM_NEXT_DEVICE
suffix:colon
(brace
r_int
id|device
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|device
comma
(paren
r_int
id|__user
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|device
op_assign
id|device
OL
l_int|0
ques
c_cond
l_int|0
suffix:colon
id|device
op_plus
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|device
OL
id|SNDRV_PCM_DEVICES
)paren
(brace
r_if
c_cond
(paren
id|snd_pcm_devices
(braket
id|tmp
op_plus
id|device
)braket
)paren
r_break
suffix:semicolon
id|device
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|device
op_eq
id|SNDRV_PCM_DEVICES
)paren
id|device
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|put_user
c_func
(paren
id|device
comma
(paren
r_int
id|__user
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|SNDRV_CTL_IOCTL_PCM_INFO
suffix:colon
(brace
id|snd_pcm_info_t
id|__user
op_star
id|info
suffix:semicolon
r_int
r_int
id|device
comma
id|subdevice
suffix:semicolon
id|snd_pcm_stream_t
id|stream
suffix:semicolon
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
id|snd_pcm_str_t
op_star
id|pstr
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
id|info
op_assign
(paren
id|snd_pcm_info_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|device
comma
op_amp
id|info-&gt;device
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|device
op_ge
id|SNDRV_PCM_DEVICES
)paren
r_return
op_minus
id|ENXIO
suffix:semicolon
id|pcm
op_assign
id|snd_pcm_devices
(braket
id|tmp
op_plus
id|device
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pcm
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENXIO
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|stream
comma
op_amp
id|info-&gt;stream
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|stream
template_param
l_int|1
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|pstr
op_assign
op_amp
id|pcm-&gt;streams
(braket
id|stream
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pstr-&gt;substream_count
op_eq
l_int|0
)paren
r_return
op_minus
id|ENOENT
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|subdevice
comma
op_amp
id|info-&gt;subdevice
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|subdevice
op_ge
id|pstr-&gt;substream_count
)paren
r_return
op_minus
id|ENXIO
suffix:semicolon
r_for
c_loop
(paren
id|substream
op_assign
id|pstr-&gt;substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
r_if
c_cond
(paren
id|substream-&gt;number
op_eq
(paren
r_int
)paren
id|subdevice
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|substream
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENXIO
suffix:semicolon
r_return
id|snd_pcm_info_user
c_func
(paren
id|substream
comma
id|info
)paren
suffix:semicolon
)brace
r_case
id|SNDRV_CTL_IOCTL_PCM_PREFER_SUBDEVICE
suffix:colon
(brace
r_int
id|val
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|val
comma
(paren
r_int
id|__user
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|control-&gt;prefer_pcm_subdevice
op_assign
id|val
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
op_minus
id|ENOIOCTLCMD
suffix:semicolon
)brace
DECL|macro|STATE
mdefine_line|#define STATE(v) [SNDRV_PCM_STATE_##v] = #v
DECL|macro|STREAM
mdefine_line|#define STREAM(v) [SNDRV_PCM_STREAM_##v] = #v
DECL|macro|READY
mdefine_line|#define READY(v) [SNDRV_PCM_READY_##v] = #v
DECL|macro|XRUN
mdefine_line|#define XRUN(v) [SNDRV_PCM_XRUN_##v] = #v
DECL|macro|SILENCE
mdefine_line|#define SILENCE(v) [SNDRV_PCM_SILENCE_##v] = #v
DECL|macro|TSTAMP
mdefine_line|#define TSTAMP(v) [SNDRV_PCM_TSTAMP_##v] = #v
DECL|macro|ACCESS
mdefine_line|#define ACCESS(v) [SNDRV_PCM_ACCESS_##v] = #v
DECL|macro|START
mdefine_line|#define START(v) [SNDRV_PCM_START_##v] = #v
DECL|macro|FORMAT
mdefine_line|#define FORMAT(v) [SNDRV_PCM_FORMAT_##v] = #v
DECL|macro|SUBFORMAT
mdefine_line|#define SUBFORMAT(v) [SNDRV_PCM_SUBFORMAT_##v] = #v 
DECL|variable|snd_pcm_stream_names
r_char
op_star
id|snd_pcm_stream_names
(braket
)braket
op_assign
(brace
id|STREAM
c_func
(paren
id|PLAYBACK
)paren
comma
id|STREAM
c_func
(paren
id|CAPTURE
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_pcm_state_names
r_char
op_star
id|snd_pcm_state_names
(braket
)braket
op_assign
(brace
id|STATE
c_func
(paren
id|OPEN
)paren
comma
id|STATE
c_func
(paren
id|SETUP
)paren
comma
id|STATE
c_func
(paren
id|PREPARED
)paren
comma
id|STATE
c_func
(paren
id|RUNNING
)paren
comma
id|STATE
c_func
(paren
id|XRUN
)paren
comma
id|STATE
c_func
(paren
id|DRAINING
)paren
comma
id|STATE
c_func
(paren
id|PAUSED
)paren
comma
id|STATE
c_func
(paren
id|SUSPENDED
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_pcm_access_names
r_char
op_star
id|snd_pcm_access_names
(braket
)braket
op_assign
(brace
id|ACCESS
c_func
(paren
id|MMAP_INTERLEAVED
)paren
comma
id|ACCESS
c_func
(paren
id|MMAP_NONINTERLEAVED
)paren
comma
id|ACCESS
c_func
(paren
id|MMAP_COMPLEX
)paren
comma
id|ACCESS
c_func
(paren
id|RW_INTERLEAVED
)paren
comma
id|ACCESS
c_func
(paren
id|RW_NONINTERLEAVED
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_pcm_format_names
r_char
op_star
id|snd_pcm_format_names
(braket
)braket
op_assign
(brace
id|FORMAT
c_func
(paren
id|S8
)paren
comma
id|FORMAT
c_func
(paren
id|U8
)paren
comma
id|FORMAT
c_func
(paren
id|S16_LE
)paren
comma
id|FORMAT
c_func
(paren
id|S16_BE
)paren
comma
id|FORMAT
c_func
(paren
id|U16_LE
)paren
comma
id|FORMAT
c_func
(paren
id|U16_BE
)paren
comma
id|FORMAT
c_func
(paren
id|S24_LE
)paren
comma
id|FORMAT
c_func
(paren
id|S24_BE
)paren
comma
id|FORMAT
c_func
(paren
id|U24_LE
)paren
comma
id|FORMAT
c_func
(paren
id|U24_BE
)paren
comma
id|FORMAT
c_func
(paren
id|S32_LE
)paren
comma
id|FORMAT
c_func
(paren
id|S32_BE
)paren
comma
id|FORMAT
c_func
(paren
id|U32_LE
)paren
comma
id|FORMAT
c_func
(paren
id|U32_BE
)paren
comma
id|FORMAT
c_func
(paren
id|FLOAT_LE
)paren
comma
id|FORMAT
c_func
(paren
id|FLOAT_BE
)paren
comma
id|FORMAT
c_func
(paren
id|FLOAT64_LE
)paren
comma
id|FORMAT
c_func
(paren
id|FLOAT64_BE
)paren
comma
id|FORMAT
c_func
(paren
id|IEC958_SUBFRAME_LE
)paren
comma
id|FORMAT
c_func
(paren
id|IEC958_SUBFRAME_BE
)paren
comma
id|FORMAT
c_func
(paren
id|MU_LAW
)paren
comma
id|FORMAT
c_func
(paren
id|A_LAW
)paren
comma
id|FORMAT
c_func
(paren
id|IMA_ADPCM
)paren
comma
id|FORMAT
c_func
(paren
id|MPEG
)paren
comma
id|FORMAT
c_func
(paren
id|GSM
)paren
comma
id|FORMAT
c_func
(paren
id|SPECIAL
)paren
comma
id|FORMAT
c_func
(paren
id|S24_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|S24_3BE
)paren
comma
id|FORMAT
c_func
(paren
id|U24_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|U24_3BE
)paren
comma
id|FORMAT
c_func
(paren
id|S20_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|S20_3BE
)paren
comma
id|FORMAT
c_func
(paren
id|U20_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|U20_3BE
)paren
comma
id|FORMAT
c_func
(paren
id|S18_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|S18_3BE
)paren
comma
id|FORMAT
c_func
(paren
id|U18_3LE
)paren
comma
id|FORMAT
c_func
(paren
id|U18_3BE
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_pcm_subformat_names
r_char
op_star
id|snd_pcm_subformat_names
(braket
)braket
op_assign
(brace
id|SUBFORMAT
c_func
(paren
id|STD
)paren
comma
)brace
suffix:semicolon
DECL|variable|snd_pcm_tstamp_mode_names
r_char
op_star
id|snd_pcm_tstamp_mode_names
(braket
)braket
op_assign
(brace
id|TSTAMP
c_func
(paren
id|NONE
)paren
comma
id|TSTAMP
c_func
(paren
id|MMAP
)paren
comma
)brace
suffix:semicolon
DECL|function|snd_pcm_stream_name
r_const
r_char
op_star
id|snd_pcm_stream_name
c_func
(paren
id|snd_pcm_stream_t
id|stream
)paren
(brace
id|snd_assert
c_func
(paren
id|stream
op_le
id|SNDRV_PCM_STREAM_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_stream_names
(braket
id|stream
)braket
suffix:semicolon
)brace
DECL|function|snd_pcm_access_name
r_const
r_char
op_star
id|snd_pcm_access_name
c_func
(paren
id|snd_pcm_access_t
id|access
)paren
(brace
id|snd_assert
c_func
(paren
id|access
op_le
id|SNDRV_PCM_ACCESS_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_access_names
(braket
id|access
)braket
suffix:semicolon
)brace
DECL|function|snd_pcm_format_name
r_const
r_char
op_star
id|snd_pcm_format_name
c_func
(paren
id|snd_pcm_format_t
id|format
)paren
(brace
id|snd_assert
c_func
(paren
id|format
op_le
id|SNDRV_PCM_FORMAT_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_format_names
(braket
id|format
)braket
suffix:semicolon
)brace
DECL|function|snd_pcm_subformat_name
r_const
r_char
op_star
id|snd_pcm_subformat_name
c_func
(paren
id|snd_pcm_subformat_t
id|subformat
)paren
(brace
id|snd_assert
c_func
(paren
id|subformat
op_le
id|SNDRV_PCM_SUBFORMAT_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_subformat_names
(braket
id|subformat
)braket
suffix:semicolon
)brace
DECL|function|snd_pcm_tstamp_mode_name
r_const
r_char
op_star
id|snd_pcm_tstamp_mode_name
c_func
(paren
id|snd_pcm_tstamp_t
id|mode
)paren
(brace
id|snd_assert
c_func
(paren
id|mode
op_le
id|SNDRV_PCM_TSTAMP_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_tstamp_mode_names
(braket
id|mode
)braket
suffix:semicolon
)brace
DECL|function|snd_pcm_state_name
r_const
r_char
op_star
id|snd_pcm_state_name
c_func
(paren
id|snd_pcm_state_t
id|state
)paren
(brace
id|snd_assert
c_func
(paren
id|state
op_le
id|SNDRV_PCM_STATE_LAST
comma
r_return
l_int|NULL
)paren
suffix:semicolon
r_return
id|snd_pcm_state_names
(braket
id|state
)braket
suffix:semicolon
)brace
macro_line|#if defined(CONFIG_SND_PCM_OSS) || defined(CONFIG_SND_PCM_OSS_MODULE)
macro_line|#include &lt;linux/soundcard.h&gt;
DECL|function|snd_pcm_oss_format_name
r_const
r_char
op_star
id|snd_pcm_oss_format_name
c_func
(paren
r_int
id|format
)paren
(brace
r_switch
c_cond
(paren
id|format
)paren
(brace
r_case
id|AFMT_MU_LAW
suffix:colon
r_return
l_string|&quot;MU_LAW&quot;
suffix:semicolon
r_case
id|AFMT_A_LAW
suffix:colon
r_return
l_string|&quot;A_LAW&quot;
suffix:semicolon
r_case
id|AFMT_IMA_ADPCM
suffix:colon
r_return
l_string|&quot;IMA_ADPCM&quot;
suffix:semicolon
r_case
id|AFMT_U8
suffix:colon
r_return
l_string|&quot;U8&quot;
suffix:semicolon
r_case
id|AFMT_S16_LE
suffix:colon
r_return
l_string|&quot;S16_LE&quot;
suffix:semicolon
r_case
id|AFMT_S16_BE
suffix:colon
r_return
l_string|&quot;S16_BE&quot;
suffix:semicolon
r_case
id|AFMT_S8
suffix:colon
r_return
l_string|&quot;S8&quot;
suffix:semicolon
r_case
id|AFMT_U16_LE
suffix:colon
r_return
l_string|&quot;U16_LE&quot;
suffix:semicolon
r_case
id|AFMT_U16_BE
suffix:colon
r_return
l_string|&quot;U16_BE&quot;
suffix:semicolon
r_case
id|AFMT_MPEG
suffix:colon
r_return
l_string|&quot;MPEG&quot;
suffix:semicolon
r_default
suffix:colon
r_return
l_string|&quot;unknown&quot;
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_PROC_FS
DECL|function|snd_pcm_proc_info_read
r_static
r_void
id|snd_pcm_proc_info_read
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_info_t
id|info
suffix:semicolon
r_int
id|err
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|substream
comma
r_return
)paren
suffix:semicolon
id|err
op_assign
id|snd_pcm_info
c_func
(paren
id|substream
comma
op_amp
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;error %d&bslash;n&quot;
comma
id|err
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;card: %d&bslash;n&quot;
comma
id|info.card
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;device: %d&bslash;n&quot;
comma
id|info.device
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subdevice: %d&bslash;n&quot;
comma
id|info.subdevice
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;stream: %s&bslash;n&quot;
comma
id|snd_pcm_stream_name
c_func
(paren
id|info.stream
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;id: %s&bslash;n&quot;
comma
id|info.id
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;name: %s&bslash;n&quot;
comma
id|info.name
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subname: %s&bslash;n&quot;
comma
id|info.subname
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;class: %d&bslash;n&quot;
comma
id|info.dev_class
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subclass: %d&bslash;n&quot;
comma
id|info.dev_subclass
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subdevices_count: %d&bslash;n&quot;
comma
id|info.subdevices_count
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subdevices_avail: %d&bslash;n&quot;
comma
id|info.subdevices_avail
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_stream_proc_info_read
r_static
r_void
id|snd_pcm_stream_proc_info_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_proc_info_read
c_func
(paren
(paren
(paren
id|snd_pcm_str_t
op_star
)paren
id|entry-&gt;private_data
)paren
op_member_access_from_pointer
id|substream
comma
id|buffer
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_info_read
r_static
r_void
id|snd_pcm_substream_proc_info_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_proc_info_read
c_func
(paren
(paren
id|snd_pcm_substream_t
op_star
)paren
id|entry-&gt;private_data
comma
id|buffer
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_hw_params_read
r_static
r_void
id|snd_pcm_substream_proc_hw_params_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_substream_t
op_star
id|substream
op_assign
(paren
id|snd_pcm_substream_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|runtime
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;closed&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_pcm_stream_lock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;status-&gt;state
op_eq
id|SNDRV_PCM_STATE_OPEN
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;no setup&bslash;n&quot;
)paren
suffix:semicolon
id|snd_pcm_stream_unlock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;access: %s&bslash;n&quot;
comma
id|snd_pcm_access_name
c_func
(paren
id|runtime-&gt;access
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;format: %s&bslash;n&quot;
comma
id|snd_pcm_format_name
c_func
(paren
id|runtime-&gt;format
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;subformat: %s&bslash;n&quot;
comma
id|snd_pcm_subformat_name
c_func
(paren
id|runtime-&gt;subformat
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;channels: %u&bslash;n&quot;
comma
id|runtime-&gt;channels
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;rate: %u (%u/%u)&bslash;n&quot;
comma
id|runtime-&gt;rate
comma
id|runtime-&gt;rate_num
comma
id|runtime-&gt;rate_den
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;period_size: %lu&bslash;n&quot;
comma
id|runtime-&gt;period_size
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;buffer_size: %lu&bslash;n&quot;
comma
id|runtime-&gt;buffer_size
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;tick_time: %u&bslash;n&quot;
comma
id|runtime-&gt;tick_time
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_SND_PCM_OSS) || defined(CONFIG_SND_PCM_OSS_MODULE)
r_if
c_cond
(paren
id|substream-&gt;oss.oss
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS format: %s&bslash;n&quot;
comma
id|snd_pcm_oss_format_name
c_func
(paren
id|runtime-&gt;oss.format
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS channels: %u&bslash;n&quot;
comma
id|runtime-&gt;oss.channels
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS rate: %u&bslash;n&quot;
comma
id|runtime-&gt;oss.rate
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS period bytes: %lu&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|runtime-&gt;oss.period_bytes
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS periods: %u&bslash;n&quot;
comma
id|runtime-&gt;oss.periods
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;OSS period frames: %lu&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|runtime-&gt;oss.period_frames
)paren
suffix:semicolon
)brace
macro_line|#endif
id|snd_pcm_stream_unlock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_sw_params_read
r_static
r_void
id|snd_pcm_substream_proc_sw_params_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_substream_t
op_star
id|substream
op_assign
(paren
id|snd_pcm_substream_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|runtime
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;closed&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_pcm_stream_lock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;status-&gt;state
op_eq
id|SNDRV_PCM_STATE_OPEN
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;no setup&bslash;n&quot;
)paren
suffix:semicolon
id|snd_pcm_stream_unlock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;tstamp_mode: %s&bslash;n&quot;
comma
id|snd_pcm_tstamp_mode_name
c_func
(paren
id|runtime-&gt;tstamp_mode
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;period_step: %u&bslash;n&quot;
comma
id|runtime-&gt;period_step
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;sleep_min: %u&bslash;n&quot;
comma
id|runtime-&gt;sleep_min
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;avail_min: %lu&bslash;n&quot;
comma
id|runtime-&gt;control-&gt;avail_min
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;xfer_align: %lu&bslash;n&quot;
comma
id|runtime-&gt;xfer_align
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;start_threshold: %lu&bslash;n&quot;
comma
id|runtime-&gt;start_threshold
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;stop_threshold: %lu&bslash;n&quot;
comma
id|runtime-&gt;stop_threshold
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;silence_threshold: %lu&bslash;n&quot;
comma
id|runtime-&gt;silence_threshold
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;silence_size: %lu&bslash;n&quot;
comma
id|runtime-&gt;silence_size
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;boundary: %lu&bslash;n&quot;
comma
id|runtime-&gt;boundary
)paren
suffix:semicolon
id|snd_pcm_stream_unlock_irq
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_status_read
r_static
r_void
id|snd_pcm_substream_proc_status_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_substream_t
op_star
id|substream
op_assign
(paren
id|snd_pcm_substream_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_pcm_status_t
id|status
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|runtime
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;closed&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|memset
c_func
(paren
op_amp
id|status
comma
l_int|0
comma
r_sizeof
(paren
id|status
)paren
)paren
suffix:semicolon
id|err
op_assign
id|snd_pcm_status
c_func
(paren
id|substream
comma
op_amp
id|status
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;error %d&bslash;n&quot;
comma
id|err
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;state: %s&bslash;n&quot;
comma
id|snd_pcm_state_name
c_func
(paren
id|status.state
)paren
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;trigger_time: %ld.%09ld&bslash;n&quot;
comma
id|status.trigger_tstamp.tv_sec
comma
id|status.trigger_tstamp.tv_nsec
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;tstamp      : %ld.%09ld&bslash;n&quot;
comma
id|status.tstamp.tv_sec
comma
id|status.tstamp.tv_nsec
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;delay       : %ld&bslash;n&quot;
comma
id|status.delay
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;avail       : %ld&bslash;n&quot;
comma
id|status.avail
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;avail_max   : %ld&bslash;n&quot;
comma
id|status.avail_max
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;-----&bslash;n&quot;
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;hw_ptr      : %ld&bslash;n&quot;
comma
id|runtime-&gt;status-&gt;hw_ptr
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;appl_ptr    : %ld&bslash;n&quot;
comma
id|runtime-&gt;control-&gt;appl_ptr
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_SND_DEBUG
DECL|function|snd_pcm_xrun_debug_read
r_static
r_void
id|snd_pcm_xrun_debug_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_str_t
op_star
id|pstr
op_assign
(paren
id|snd_pcm_str_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%d&bslash;n&quot;
comma
id|pstr-&gt;xrun_debug
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_xrun_debug_write
r_static
r_void
id|snd_pcm_xrun_debug_write
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_pcm_str_t
op_star
id|pstr
op_assign
(paren
id|snd_pcm_str_t
op_star
)paren
id|entry-&gt;private_data
suffix:semicolon
r_char
id|line
(braket
l_int|64
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|snd_info_get_line
c_func
(paren
id|buffer
comma
id|line
comma
r_sizeof
(paren
id|line
)paren
)paren
)paren
id|pstr-&gt;xrun_debug
op_assign
id|simple_strtoul
c_func
(paren
id|line
comma
l_int|NULL
comma
l_int|10
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|snd_pcm_stream_proc_init
r_static
r_int
id|snd_pcm_stream_proc_init
c_func
(paren
id|snd_pcm_str_t
op_star
id|pstr
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
op_assign
id|pstr-&gt;pcm
suffix:semicolon
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
r_char
id|name
(braket
l_int|16
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;pcm%i%c&quot;
comma
id|pcm-&gt;device
comma
id|pstr-&gt;stream
op_eq
id|SNDRV_PCM_STREAM_PLAYBACK
ques
c_cond
l_char|&squot;p&squot;
suffix:colon
l_char|&squot;c&squot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|pcm-&gt;card
comma
id|name
comma
id|pcm-&gt;card-&gt;proc_root
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFDIR
op_or
id|S_IRUGO
op_or
id|S_IXUGO
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|pstr-&gt;proc_root
op_assign
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|pcm-&gt;card
comma
l_string|&quot;info&quot;
comma
id|pstr-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|pstr
comma
l_int|256
comma
id|snd_pcm_stream_proc_info_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|pstr-&gt;proc_info_entry
op_assign
id|entry
suffix:semicolon
macro_line|#ifdef CONFIG_SND_DEBUG
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|pcm-&gt;card
comma
l_string|&quot;xrun_debug&quot;
comma
id|pstr-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|entry-&gt;c.text.read_size
op_assign
l_int|64
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_pcm_xrun_debug_read
suffix:semicolon
id|entry-&gt;c.text.write_size
op_assign
l_int|64
suffix:semicolon
id|entry-&gt;c.text.write
op_assign
id|snd_pcm_xrun_debug_write
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|pstr
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|pstr-&gt;proc_xrun_debug_entry
op_assign
id|entry
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_stream_proc_done
r_static
r_int
id|snd_pcm_stream_proc_done
c_func
(paren
id|snd_pcm_str_t
op_star
id|pstr
)paren
(brace
macro_line|#ifdef CONFIG_SND_DEBUG
r_if
c_cond
(paren
id|pstr-&gt;proc_xrun_debug_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|pstr-&gt;proc_xrun_debug_entry
)paren
suffix:semicolon
id|pstr-&gt;proc_xrun_debug_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|pstr-&gt;proc_info_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|pstr-&gt;proc_info_entry
)paren
suffix:semicolon
id|pstr-&gt;proc_info_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pstr-&gt;proc_root
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|pstr-&gt;proc_root
)paren
suffix:semicolon
id|pstr-&gt;proc_root
op_assign
l_int|NULL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_init
r_static
r_int
id|snd_pcm_substream_proc_init
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
r_char
id|name
(braket
l_int|16
)braket
suffix:semicolon
id|card
op_assign
id|substream-&gt;pcm-&gt;card
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;sub%i&quot;
comma
id|substream-&gt;number
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
id|name
comma
id|substream-&gt;pstr-&gt;proc_root
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFDIR
op_or
id|S_IRUGO
op_or
id|S_IXUGO
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|substream-&gt;proc_root
op_assign
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
l_string|&quot;info&quot;
comma
id|substream-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|substream
comma
l_int|256
comma
id|snd_pcm_substream_proc_info_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|substream-&gt;proc_info_entry
op_assign
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
l_string|&quot;hw_params&quot;
comma
id|substream-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|substream
comma
l_int|256
comma
id|snd_pcm_substream_proc_hw_params_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|substream-&gt;proc_hw_params_entry
op_assign
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
l_string|&quot;sw_params&quot;
comma
id|substream-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|substream
comma
l_int|256
comma
id|snd_pcm_substream_proc_sw_params_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|substream-&gt;proc_sw_params_entry
op_assign
id|entry
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|card
comma
l_string|&quot;status&quot;
comma
id|substream-&gt;proc_root
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
id|substream
comma
l_int|256
comma
id|snd_pcm_substream_proc_status_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|substream-&gt;proc_status_entry
op_assign
id|entry
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_substream_proc_done
r_static
r_int
id|snd_pcm_substream_proc_done
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
r_if
c_cond
(paren
id|substream-&gt;proc_info_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|substream-&gt;proc_info_entry
)paren
suffix:semicolon
id|substream-&gt;proc_info_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|substream-&gt;proc_hw_params_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|substream-&gt;proc_hw_params_entry
)paren
suffix:semicolon
id|substream-&gt;proc_hw_params_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|substream-&gt;proc_sw_params_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|substream-&gt;proc_sw_params_entry
)paren
suffix:semicolon
id|substream-&gt;proc_sw_params_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|substream-&gt;proc_status_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|substream-&gt;proc_status_entry
)paren
suffix:semicolon
id|substream-&gt;proc_status_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|substream-&gt;proc_root
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|substream-&gt;proc_root
)paren
suffix:semicolon
id|substream-&gt;proc_root
op_assign
l_int|NULL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_pcm_new_stream - create a new PCM stream&n; * @pcm: the pcm instance&n; * @stream: the stream direction, SNDRV_PCM_STREAM_XXX&n; * @substream_count: the number of substreams&n; *&n; * Creates a new stream for the pcm.&n; * The corresponding stream on the pcm must have been empty before&n; * calling this, i.e. zero must be given to the argument of&n; * snd_pcm_new().&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_pcm_new_stream
r_int
id|snd_pcm_new_stream
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
comma
r_int
id|stream
comma
r_int
id|substream_count
)paren
(brace
r_int
id|idx
comma
id|err
suffix:semicolon
id|snd_pcm_str_t
op_star
id|pstr
op_assign
op_amp
id|pcm-&gt;streams
(braket
id|stream
)braket
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
comma
op_star
id|prev
suffix:semicolon
macro_line|#if defined(CONFIG_SND_PCM_OSS) || defined(CONFIG_SND_PCM_OSS_MODULE)
id|init_MUTEX
c_func
(paren
op_amp
id|pstr-&gt;oss.setup_mutex
)paren
suffix:semicolon
macro_line|#endif
id|pstr-&gt;stream
op_assign
id|stream
suffix:semicolon
id|pstr-&gt;pcm
op_assign
id|pcm
suffix:semicolon
id|pstr-&gt;substream_count
op_assign
id|substream_count
suffix:semicolon
id|pstr-&gt;reg
op_assign
op_amp
id|snd_pcm_reg
(braket
id|stream
)braket
suffix:semicolon
r_if
c_cond
(paren
id|substream_count
OG
l_int|0
)paren
(brace
id|err
op_assign
id|snd_pcm_stream_proc_init
c_func
(paren
id|pstr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|prev
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
comma
id|prev
op_assign
l_int|NULL
suffix:semicolon
id|idx
OL
id|substream_count
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|substream
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|substream
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|substream
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|substream-&gt;pcm
op_assign
id|pcm
suffix:semicolon
id|substream-&gt;pstr
op_assign
id|pstr
suffix:semicolon
id|substream-&gt;number
op_assign
id|idx
suffix:semicolon
id|substream-&gt;stream
op_assign
id|stream
suffix:semicolon
id|sprintf
c_func
(paren
id|substream-&gt;name
comma
l_string|&quot;subdevice #%i&quot;
comma
id|idx
)paren
suffix:semicolon
id|substream-&gt;buffer_bytes_max
op_assign
id|UINT_MAX
suffix:semicolon
r_if
c_cond
(paren
id|prev
op_eq
l_int|NULL
)paren
id|pstr-&gt;substream
op_assign
id|substream
suffix:semicolon
r_else
id|prev-&gt;next
op_assign
id|substream
suffix:semicolon
id|err
op_assign
id|snd_pcm_substream_proc_init
c_func
(paren
id|substream
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
id|kfree
c_func
(paren
id|substream
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|substream-&gt;group
op_assign
op_amp
id|substream-&gt;self_group
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|substream-&gt;self_group.lock
)paren
suffix:semicolon
id|INIT_LIST_HEAD
c_func
(paren
op_amp
id|substream-&gt;self_group.substreams
)paren
suffix:semicolon
id|list_add_tail
c_func
(paren
op_amp
id|substream-&gt;link_list
comma
op_amp
id|substream-&gt;self_group.substreams
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|substream-&gt;timer_lock
)paren
suffix:semicolon
id|prev
op_assign
id|substream
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * snd_pcm_new - create a new PCM instance&n; * @card: the card instance&n; * @id: the id string&n; * @device: the device index (zero based)&n; * @playback_count: the number of substreams for playback&n; * @capture_count: the number of substreams for capture&n; * @rpcm: the pointer to store the new pcm instance&n; *&n; * Creates a new PCM instance.&n; *&n; * The pcm operators have to be set afterwards to the new instance&n; * via snd_pcm_set_ops().&n; *&n; * Returns zero if successful, or a negative error code on failure.&n; */
DECL|function|snd_pcm_new
r_int
id|snd_pcm_new
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_char
op_star
id|id
comma
r_int
id|device
comma
r_int
id|playback_count
comma
r_int
id|capture_count
comma
id|snd_pcm_t
op_star
op_star
id|rpcm
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
r_int
id|err
suffix:semicolon
r_static
id|snd_device_ops_t
id|ops
op_assign
(brace
dot
id|dev_free
op_assign
id|snd_pcm_dev_free
comma
dot
id|dev_register
op_assign
id|snd_pcm_dev_register
comma
dot
id|dev_disconnect
op_assign
id|snd_pcm_dev_disconnect
comma
dot
id|dev_unregister
op_assign
id|snd_pcm_dev_unregister
)brace
suffix:semicolon
id|snd_assert
c_func
(paren
id|rpcm
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
op_star
id|rpcm
op_assign
l_int|NULL
suffix:semicolon
id|snd_assert
c_func
(paren
id|card
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|pcm
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|pcm
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pcm
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|pcm-&gt;card
op_assign
id|card
suffix:semicolon
id|pcm-&gt;device
op_assign
id|device
suffix:semicolon
r_if
c_cond
(paren
id|id
)paren
(brace
id|strlcpy
c_func
(paren
id|pcm-&gt;id
comma
id|id
comma
r_sizeof
(paren
id|pcm-&gt;id
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_new_stream
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_PLAYBACK
comma
id|playback_count
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_pcm_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_pcm_new_stream
c_func
(paren
id|pcm
comma
id|SNDRV_PCM_STREAM_CAPTURE
comma
id|capture_count
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_pcm_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|init_MUTEX
c_func
(paren
op_amp
id|pcm-&gt;open_mutex
)paren
suffix:semicolon
id|init_waitqueue_head
c_func
(paren
op_amp
id|pcm-&gt;open_wait
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_device_new
c_func
(paren
id|card
comma
id|SNDRV_DEV_PCM
comma
id|pcm
comma
op_amp
id|ops
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_pcm_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
op_star
id|rpcm
op_assign
id|pcm
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_free_stream
r_static
r_void
id|snd_pcm_free_stream
c_func
(paren
id|snd_pcm_str_t
op_star
id|pstr
)paren
(brace
id|snd_pcm_substream_t
op_star
id|substream
comma
op_star
id|substream_next
suffix:semicolon
macro_line|#if defined(CONFIG_SND_PCM_OSS) || defined(CONFIG_SND_PCM_OSS_MODULE)
id|snd_pcm_oss_setup_t
op_star
id|setup
comma
op_star
id|setupn
suffix:semicolon
macro_line|#endif
id|substream
op_assign
id|pstr-&gt;substream
suffix:semicolon
r_while
c_loop
(paren
id|substream
)paren
(brace
id|substream_next
op_assign
id|substream-&gt;next
suffix:semicolon
id|snd_pcm_substream_proc_done
c_func
(paren
id|substream
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|substream
)paren
suffix:semicolon
id|substream
op_assign
id|substream_next
suffix:semicolon
)brace
id|snd_pcm_stream_proc_done
c_func
(paren
id|pstr
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_SND_PCM_OSS) || defined(CONFIG_SND_PCM_OSS_MODULE)
r_for
c_loop
(paren
id|setup
op_assign
id|pstr-&gt;oss.setup_list
suffix:semicolon
id|setup
suffix:semicolon
id|setup
op_assign
id|setupn
)paren
(brace
id|setupn
op_assign
id|setup-&gt;next
suffix:semicolon
id|kfree
c_func
(paren
id|setup-&gt;task_name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|setup
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
DECL|function|snd_pcm_free
r_static
r_int
id|snd_pcm_free
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
)paren
(brace
id|snd_assert
c_func
(paren
id|pcm
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pcm-&gt;private_free
)paren
id|pcm
op_member_access_from_pointer
id|private_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
id|snd_pcm_lib_preallocate_free_for_all
c_func
(paren
id|pcm
)paren
suffix:semicolon
id|snd_pcm_free_stream
c_func
(paren
op_amp
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_PLAYBACK
)braket
)paren
suffix:semicolon
id|snd_pcm_free_stream
c_func
(paren
op_amp
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_CAPTURE
)braket
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|pcm
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_dev_free
r_static
r_int
id|snd_pcm_dev_free
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
op_assign
id|device-&gt;device_data
suffix:semicolon
r_return
id|snd_pcm_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_tick_timer_func
r_static
r_void
id|snd_pcm_tick_timer_func
c_func
(paren
r_int
r_int
id|data
)paren
(brace
id|snd_pcm_substream_t
op_star
id|substream
op_assign
(paren
id|snd_pcm_substream_t
op_star
)paren
id|data
suffix:semicolon
id|snd_pcm_tick_elapsed
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_open_substream
r_int
id|snd_pcm_open_substream
c_func
(paren
id|snd_pcm_t
op_star
id|pcm
comma
r_int
id|stream
comma
id|snd_pcm_substream_t
op_star
op_star
id|rsubstream
)paren
(brace
id|snd_pcm_str_t
op_star
id|pstr
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
id|snd_pcm_runtime_t
op_star
id|runtime
suffix:semicolon
id|snd_ctl_file_t
op_star
id|kctl
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
r_struct
id|list_head
op_star
id|list
suffix:semicolon
r_int
id|prefer_subdevice
op_assign
op_minus
l_int|1
suffix:semicolon
r_int
id|size
suffix:semicolon
id|snd_assert
c_func
(paren
id|rsubstream
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
op_star
id|rsubstream
op_assign
l_int|NULL
suffix:semicolon
id|snd_assert
c_func
(paren
id|pcm
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|pstr
op_assign
op_amp
id|pcm-&gt;streams
(braket
id|stream
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pstr-&gt;substream
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|card
op_assign
id|pcm-&gt;card
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|list_for_each
c_func
(paren
id|list
comma
op_amp
id|card-&gt;ctl_files
)paren
(brace
id|kctl
op_assign
id|snd_ctl_file
c_func
(paren
id|list
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kctl-&gt;pid
op_eq
id|current-&gt;pid
)paren
(brace
id|prefer_subdevice
op_assign
id|kctl-&gt;prefer_pcm_subdevice
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pstr-&gt;substream_count
op_eq
l_int|0
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_switch
c_cond
(paren
id|stream
)paren
(brace
r_case
id|SNDRV_PCM_STREAM_PLAYBACK
suffix:colon
r_if
c_cond
(paren
id|pcm-&gt;info_flags
op_amp
id|SNDRV_PCM_INFO_HALF_DUPLEX
)paren
(brace
r_for
c_loop
(paren
id|substream
op_assign
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_CAPTURE
)braket
dot
id|substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|SUBSTREAM_BUSY
c_func
(paren
id|substream
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_STREAM_CAPTURE
suffix:colon
r_if
c_cond
(paren
id|pcm-&gt;info_flags
op_amp
id|SNDRV_PCM_INFO_HALF_DUPLEX
)paren
(brace
r_for
c_loop
(paren
id|substream
op_assign
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_PLAYBACK
)braket
dot
id|substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|SUBSTREAM_BUSY
c_func
(paren
id|substream
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|prefer_subdevice
op_ge
l_int|0
)paren
(brace
r_for
c_loop
(paren
id|substream
op_assign
id|pstr-&gt;substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
r_if
c_cond
(paren
op_logical_neg
id|SUBSTREAM_BUSY
c_func
(paren
id|substream
)paren
op_logical_and
id|substream-&gt;number
op_eq
id|prefer_subdevice
)paren
r_goto
id|__ok
suffix:semicolon
)brace
r_for
c_loop
(paren
id|substream
op_assign
id|pstr-&gt;substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
r_if
c_cond
(paren
op_logical_neg
id|SUBSTREAM_BUSY
c_func
(paren
id|substream
)paren
)paren
r_break
suffix:semicolon
id|__ok
suffix:colon
r_if
c_cond
(paren
id|substream
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
id|runtime
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|runtime
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|size
op_assign
id|PAGE_ALIGN
c_func
(paren
r_sizeof
(paren
id|snd_pcm_mmap_status_t
)paren
)paren
suffix:semicolon
id|runtime-&gt;status
op_assign
id|snd_malloc_pages
c_func
(paren
id|size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;status
op_eq
l_int|NULL
)paren
(brace
id|kfree
c_func
(paren
id|runtime
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
(paren
r_void
op_star
)paren
id|runtime-&gt;status
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
id|size
op_assign
id|PAGE_ALIGN
c_func
(paren
r_sizeof
(paren
id|snd_pcm_mmap_control_t
)paren
)paren
suffix:semicolon
id|runtime-&gt;control
op_assign
id|snd_malloc_pages
c_func
(paren
id|size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;control
op_eq
l_int|NULL
)paren
(brace
id|snd_free_pages
c_func
(paren
(paren
r_void
op_star
)paren
id|runtime-&gt;status
comma
id|PAGE_ALIGN
c_func
(paren
r_sizeof
(paren
id|snd_pcm_mmap_status_t
)paren
)paren
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|runtime
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
(paren
r_void
op_star
)paren
id|runtime-&gt;control
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
id|init_waitqueue_head
c_func
(paren
op_amp
id|runtime-&gt;sleep
)paren
suffix:semicolon
id|atomic_set
c_func
(paren
op_amp
id|runtime-&gt;mmap_count
comma
l_int|0
)paren
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|runtime-&gt;tick_timer
)paren
suffix:semicolon
id|runtime-&gt;tick_timer.function
op_assign
id|snd_pcm_tick_timer_func
suffix:semicolon
id|runtime-&gt;tick_timer.data
op_assign
(paren
r_int
r_int
)paren
id|substream
suffix:semicolon
id|runtime-&gt;status-&gt;state
op_assign
id|SNDRV_PCM_STATE_OPEN
suffix:semicolon
id|substream-&gt;runtime
op_assign
id|runtime
suffix:semicolon
id|substream-&gt;private_data
op_assign
id|pcm-&gt;private_data
suffix:semicolon
id|pstr-&gt;substream_opened
op_increment
suffix:semicolon
op_star
id|rsubstream
op_assign
id|substream
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_release_substream
r_void
id|snd_pcm_release_substream
c_func
(paren
id|snd_pcm_substream_t
op_star
id|substream
)paren
(brace
id|snd_pcm_runtime_t
op_star
id|runtime
suffix:semicolon
id|substream-&gt;file
op_assign
l_int|NULL
suffix:semicolon
id|runtime
op_assign
id|substream-&gt;runtime
suffix:semicolon
id|snd_assert
c_func
(paren
id|runtime
op_ne
l_int|NULL
comma
r_return
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;private_free
op_ne
l_int|NULL
)paren
id|runtime
op_member_access_from_pointer
id|private_free
c_func
(paren
id|runtime
)paren
suffix:semicolon
id|snd_free_pages
c_func
(paren
(paren
r_void
op_star
)paren
id|runtime-&gt;status
comma
id|PAGE_ALIGN
c_func
(paren
r_sizeof
(paren
id|snd_pcm_mmap_status_t
)paren
)paren
)paren
suffix:semicolon
id|snd_free_pages
c_func
(paren
(paren
r_void
op_star
)paren
id|runtime-&gt;control
comma
id|PAGE_ALIGN
c_func
(paren
r_sizeof
(paren
id|snd_pcm_mmap_control_t
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|runtime-&gt;hw_constraints.rules
)paren
id|kfree
c_func
(paren
id|runtime-&gt;hw_constraints.rules
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|runtime
)paren
suffix:semicolon
id|substream-&gt;runtime
op_assign
l_int|NULL
suffix:semicolon
id|substream-&gt;pstr-&gt;substream_opened
op_decrement
suffix:semicolon
)brace
DECL|function|snd_pcm_dev_register
r_static
r_int
id|snd_pcm_dev_register
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
r_int
id|idx
comma
id|cidx
comma
id|err
suffix:semicolon
r_int
r_int
id|minor
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
r_struct
id|list_head
op_star
id|list
suffix:semicolon
r_char
id|str
(braket
l_int|16
)braket
suffix:semicolon
id|snd_pcm_t
op_star
id|pcm
op_assign
id|device-&gt;device_data
suffix:semicolon
id|snd_assert
c_func
(paren
id|pcm
op_ne
l_int|NULL
op_logical_and
id|device
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
id|idx
op_assign
(paren
id|pcm-&gt;card-&gt;number
op_star
id|SNDRV_PCM_DEVICES
)paren
op_plus
id|pcm-&gt;device
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_devices
(braket
id|idx
)braket
)paren
(brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|snd_pcm_devices
(braket
id|idx
)braket
op_assign
id|pcm
suffix:semicolon
r_for
c_loop
(paren
id|cidx
op_assign
l_int|0
suffix:semicolon
id|cidx
OL
l_int|2
suffix:semicolon
id|cidx
op_increment
)paren
(brace
r_int
id|devtype
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|pcm-&gt;streams
(braket
id|cidx
)braket
dot
id|substream
op_eq
l_int|NULL
)paren
r_continue
suffix:semicolon
r_switch
c_cond
(paren
id|cidx
)paren
(brace
r_case
id|SNDRV_PCM_STREAM_PLAYBACK
suffix:colon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;pcmC%iD%ip&quot;
comma
id|pcm-&gt;card-&gt;number
comma
id|pcm-&gt;device
)paren
suffix:semicolon
id|minor
op_assign
id|SNDRV_MINOR_PCM_PLAYBACK
op_plus
id|idx
suffix:semicolon
id|devtype
op_assign
id|SNDRV_DEVICE_TYPE_PCM_PLAYBACK
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_STREAM_CAPTURE
suffix:colon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;pcmC%iD%ic&quot;
comma
id|pcm-&gt;card-&gt;number
comma
id|pcm-&gt;device
)paren
suffix:semicolon
id|minor
op_assign
id|SNDRV_MINOR_PCM_CAPTURE
op_plus
id|idx
suffix:semicolon
id|devtype
op_assign
id|SNDRV_DEVICE_TYPE_PCM_CAPTURE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_register_device
c_func
(paren
id|devtype
comma
id|pcm-&gt;card
comma
id|pcm-&gt;device
comma
id|pcm-&gt;streams
(braket
id|cidx
)braket
dot
id|reg
comma
id|str
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_pcm_devices
(braket
id|idx
)braket
op_assign
l_int|NULL
suffix:semicolon
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|substream
op_assign
id|pcm-&gt;streams
(braket
id|cidx
)braket
dot
id|substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
id|snd_pcm_timer_init
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
id|list_for_each
c_func
(paren
id|list
comma
op_amp
id|snd_pcm_notify_list
)paren
(brace
id|snd_pcm_notify_t
op_star
id|notify
suffix:semicolon
id|notify
op_assign
id|list_entry
c_func
(paren
id|list
comma
id|snd_pcm_notify_t
comma
id|list
)paren
suffix:semicolon
id|notify
op_member_access_from_pointer
id|n_register
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_dev_disconnect
r_static
r_int
id|snd_pcm_dev_disconnect
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
id|snd_pcm_t
op_star
id|pcm
op_assign
id|device-&gt;device_data
suffix:semicolon
r_struct
id|list_head
op_star
id|list
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
r_int
id|idx
comma
id|cidx
suffix:semicolon
id|down
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
id|idx
op_assign
(paren
id|pcm-&gt;card-&gt;number
op_star
id|SNDRV_PCM_DEVICES
)paren
op_plus
id|pcm-&gt;device
suffix:semicolon
id|snd_pcm_devices
(braket
id|idx
)braket
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|cidx
op_assign
l_int|0
suffix:semicolon
id|cidx
OL
l_int|2
suffix:semicolon
id|cidx
op_increment
)paren
r_for
c_loop
(paren
id|substream
op_assign
id|pcm-&gt;streams
(braket
id|cidx
)braket
dot
id|substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
r_if
c_cond
(paren
id|substream-&gt;runtime
)paren
id|substream-&gt;runtime-&gt;status-&gt;state
op_assign
id|SNDRV_PCM_STATE_DISCONNECTED
suffix:semicolon
id|list_for_each
c_func
(paren
id|list
comma
op_amp
id|snd_pcm_notify_list
)paren
(brace
id|snd_pcm_notify_t
op_star
id|notify
suffix:semicolon
id|notify
op_assign
id|list_entry
c_func
(paren
id|list
comma
id|snd_pcm_notify_t
comma
id|list
)paren
suffix:semicolon
id|notify
op_member_access_from_pointer
id|n_disconnect
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_pcm_dev_unregister
r_static
r_int
id|snd_pcm_dev_unregister
c_func
(paren
id|snd_device_t
op_star
id|device
)paren
(brace
r_int
id|idx
comma
id|cidx
comma
id|devtype
suffix:semicolon
id|snd_pcm_substream_t
op_star
id|substream
suffix:semicolon
r_struct
id|list_head
op_star
id|list
suffix:semicolon
id|snd_pcm_t
op_star
id|pcm
op_assign
id|device-&gt;device_data
suffix:semicolon
id|snd_assert
c_func
(paren
id|pcm
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
id|idx
op_assign
(paren
id|pcm-&gt;card-&gt;number
op_star
id|SNDRV_PCM_DEVICES
)paren
op_plus
id|pcm-&gt;device
suffix:semicolon
id|snd_pcm_devices
(braket
id|idx
)braket
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|cidx
op_assign
l_int|0
suffix:semicolon
id|cidx
OL
l_int|2
suffix:semicolon
id|cidx
op_increment
)paren
(brace
id|devtype
op_assign
op_minus
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|cidx
)paren
(brace
r_case
id|SNDRV_PCM_STREAM_PLAYBACK
suffix:colon
id|devtype
op_assign
id|SNDRV_DEVICE_TYPE_PCM_PLAYBACK
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SNDRV_PCM_STREAM_CAPTURE
suffix:colon
id|devtype
op_assign
id|SNDRV_DEVICE_TYPE_PCM_CAPTURE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|snd_unregister_device
c_func
(paren
id|devtype
comma
id|pcm-&gt;card
comma
id|pcm-&gt;device
)paren
suffix:semicolon
r_for
c_loop
(paren
id|substream
op_assign
id|pcm-&gt;streams
(braket
id|cidx
)braket
dot
id|substream
suffix:semicolon
id|substream
suffix:semicolon
id|substream
op_assign
id|substream-&gt;next
)paren
id|snd_pcm_timer_done
c_func
(paren
id|substream
)paren
suffix:semicolon
)brace
id|list_for_each
c_func
(paren
id|list
comma
op_amp
id|snd_pcm_notify_list
)paren
(brace
id|snd_pcm_notify_t
op_star
id|notify
suffix:semicolon
id|notify
op_assign
id|list_entry
c_func
(paren
id|list
comma
id|snd_pcm_notify_t
comma
id|list
)paren
suffix:semicolon
id|notify
op_member_access_from_pointer
id|n_unregister
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
id|snd_pcm_free
c_func
(paren
id|pcm
)paren
suffix:semicolon
)brace
DECL|function|snd_pcm_notify
r_int
id|snd_pcm_notify
c_func
(paren
id|snd_pcm_notify_t
op_star
id|notify
comma
r_int
id|nfree
)paren
(brace
r_int
id|idx
suffix:semicolon
id|snd_assert
c_func
(paren
id|notify
op_ne
l_int|NULL
op_logical_and
id|notify-&gt;n_register
op_ne
l_int|NULL
op_logical_and
id|notify-&gt;n_unregister
op_ne
l_int|NULL
comma
r_return
op_minus
id|EINVAL
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nfree
)paren
(brace
id|list_del
c_func
(paren
op_amp
id|notify-&gt;list
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_CARDS
op_star
id|SNDRV_PCM_DEVICES
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_pcm_devices
(braket
id|idx
)braket
op_eq
l_int|NULL
)paren
r_continue
suffix:semicolon
id|notify
op_member_access_from_pointer
id|n_unregister
c_func
(paren
id|snd_pcm_devices
(braket
id|idx
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|list_add_tail
c_func
(paren
op_amp
id|notify-&gt;list
comma
op_amp
id|snd_pcm_notify_list
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_CARDS
op_star
id|SNDRV_PCM_DEVICES
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_pcm_devices
(braket
id|idx
)braket
op_eq
l_int|NULL
)paren
r_continue
suffix:semicolon
id|notify
op_member_access_from_pointer
id|n_register
c_func
(paren
id|snd_pcm_devices
(braket
id|idx
)braket
)paren
suffix:semicolon
)brace
)brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; *  Info interface&n; */
DECL|function|snd_pcm_proc_read
r_static
r_void
id|snd_pcm_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
r_int
id|idx
suffix:semicolon
id|snd_pcm_t
op_star
id|pcm
suffix:semicolon
id|down
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_CARDS
op_star
id|SNDRV_PCM_DEVICES
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|pcm
op_assign
id|snd_pcm_devices
(braket
id|idx
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pcm
op_eq
l_int|NULL
)paren
r_continue
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%02i-%02i: %s : %s&quot;
comma
id|idx
op_div
id|SNDRV_PCM_DEVICES
comma
id|idx
op_mod
id|SNDRV_PCM_DEVICES
comma
id|pcm-&gt;id
comma
id|pcm-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_PLAYBACK
)braket
dot
id|substream
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; : playback %i&quot;
comma
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_PLAYBACK
)braket
dot
id|substream_count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_CAPTURE
)braket
dot
id|substream
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot; : capture %i&quot;
comma
id|pcm-&gt;streams
(braket
id|SNDRV_PCM_STREAM_CAPTURE
)braket
dot
id|substream_count
)paren
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|register_mutex
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  ENTRY functions&n; */
DECL|variable|snd_pcm_proc_entry
r_static
id|snd_info_entry_t
op_star
id|snd_pcm_proc_entry
op_assign
l_int|NULL
suffix:semicolon
DECL|function|alsa_pcm_init
r_static
r_int
id|__init
id|alsa_pcm_init
c_func
(paren
r_void
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
id|snd_ctl_register_ioctl
c_func
(paren
id|snd_pcm_control_ioctl
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|entry
op_assign
id|snd_info_create_module_entry
c_func
(paren
id|THIS_MODULE
comma
l_string|&quot;pcm&quot;
comma
l_int|NULL
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_info_set_text_ops
c_func
(paren
id|entry
comma
l_int|NULL
comma
id|SNDRV_CARDS
op_star
id|SNDRV_PCM_DEVICES
op_star
l_int|128
comma
id|snd_pcm_proc_read
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|snd_pcm_proc_entry
op_assign
id|entry
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_pcm_exit
r_static
r_void
id|__exit
id|alsa_pcm_exit
c_func
(paren
r_void
)paren
(brace
id|snd_ctl_unregister_ioctl
c_func
(paren
id|snd_pcm_control_ioctl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_pcm_proc_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|snd_pcm_proc_entry
)paren
suffix:semicolon
id|snd_pcm_proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|module_init
c_func
(paren
id|alsa_pcm_init
)paren
id|module_exit
c_func
(paren
id|alsa_pcm_exit
)paren
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_devices
)paren
suffix:semicolon
DECL|variable|EXPORT_SYMBOL
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_new
)paren
suffix:semicolon
DECL|variable|snd_pcm_new_stream
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_new_stream
)paren
suffix:semicolon
DECL|variable|snd_pcm_notify
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_notify
)paren
suffix:semicolon
DECL|variable|snd_pcm_open_substream
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_open_substream
)paren
suffix:semicolon
DECL|variable|snd_pcm_release_substream
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_release_substream
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_name
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_name
)paren
suffix:semicolon
DECL|variable|snd_pcm_subformat_name
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_subformat_name
)paren
suffix:semicolon
multiline_comment|/* pcm_native.c */
DECL|variable|snd_pcm_link_rwlock
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_link_rwlock
)paren
suffix:semicolon
DECL|variable|snd_pcm_start
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_start
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PM
DECL|variable|snd_pcm_suspend
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_suspend
)paren
suffix:semicolon
DECL|variable|snd_pcm_suspend_all
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_suspend_all
)paren
suffix:semicolon
macro_line|#endif
DECL|variable|snd_pcm_kernel_playback_ioctl
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_kernel_playback_ioctl
)paren
suffix:semicolon
DECL|variable|snd_pcm_kernel_capture_ioctl
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_kernel_capture_ioctl
)paren
suffix:semicolon
DECL|variable|snd_pcm_kernel_ioctl
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_kernel_ioctl
)paren
suffix:semicolon
DECL|variable|snd_pcm_open
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_open
)paren
suffix:semicolon
DECL|variable|snd_pcm_release
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_release
)paren
suffix:semicolon
DECL|variable|snd_pcm_playback_poll
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_playback_poll
)paren
suffix:semicolon
DECL|variable|snd_pcm_capture_poll
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_capture_poll
)paren
suffix:semicolon
DECL|variable|snd_pcm_mmap_data
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_mmap_data
)paren
suffix:semicolon
macro_line|#if SNDRV_PCM_INFO_MMAP_IOMEM
DECL|variable|snd_pcm_lib_mmap_iomem
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_lib_mmap_iomem
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* pcm_misc.c */
DECL|variable|snd_pcm_format_signed
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_signed
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_unsigned
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_unsigned
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_linear
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_linear
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_little_endian
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_little_endian
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_big_endian
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_big_endian
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_width
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_width
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_physical_width
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_physical_width
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_size
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_size
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_silence_64
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_silence_64
)paren
suffix:semicolon
DECL|variable|snd_pcm_format_set_silence
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_format_set_silence
)paren
suffix:semicolon
DECL|variable|snd_pcm_build_linear_format
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_build_linear_format
)paren
suffix:semicolon
DECL|variable|snd_pcm_limit_hw_rates
id|EXPORT_SYMBOL
c_func
(paren
id|snd_pcm_limit_hw_rates
)paren
suffix:semicolon
eof
