multiline_comment|/*&n; *  OSS emulation layer for the mixer interface&n; *  Copyright (c) by Jaroslav Kysela &lt;perex@suse.cz&gt;&n; *&n; *&n; *   This program is free software; you can redistribute it and/or modify&n; *   it under the terms of the GNU General Public License as published by&n; *   the Free Software Foundation; either version 2 of the License, or&n; *   (at your option) any later version.&n; *&n; *   This program is distributed in the hope that it will be useful,&n; *   but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *   GNU General Public License for more details.&n; *&n; *   You should have received a copy of the GNU General Public License&n; *   along with this program; if not, write to the Free Software&n; *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA&n; *&n; */
macro_line|#include &lt;sound/driver.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/time.h&gt;
macro_line|#include &lt;sound/core.h&gt;
macro_line|#include &lt;sound/minors.h&gt;
macro_line|#include &lt;sound/control.h&gt;
macro_line|#include &lt;sound/info.h&gt;
macro_line|#include &lt;sound/mixer_oss.h&gt;
macro_line|#include &lt;linux/soundcard.h&gt;
DECL|macro|OSS_ALSAEMULVER
mdefine_line|#define OSS_ALSAEMULVER         _SIOR (&squot;M&squot;, 249, int)
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Jaroslav Kysela &lt;perex@suse.cz&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Mixer OSS emulation for ALSA.&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|SNDRV_MINOR_OSS_MIXER
id|MODULE_ALIAS_SNDRV_MINOR
c_func
(paren
id|SNDRV_MINOR_OSS_MIXER
)paren
suffix:semicolon
DECL|function|snd_mixer_oss_open
r_static
r_int
id|snd_mixer_oss_open
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_int
id|cardnum
op_assign
id|SNDRV_MINOR_OSS_CARD
c_func
(paren
id|iminor
c_func
(paren
id|inode
)paren
)paren
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
id|snd_mixer_oss_file_t
op_star
id|fmixer
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|card
op_assign
id|snd_cards
(braket
id|cardnum
)braket
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;mixer_oss
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|err
op_assign
id|snd_card_file_add
c_func
(paren
id|card
comma
id|file
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|fmixer
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|fmixer
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fmixer
op_eq
l_int|NULL
)paren
(brace
id|snd_card_file_remove
c_func
(paren
id|card
comma
id|file
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|fmixer-&gt;card
op_assign
id|card
suffix:semicolon
id|fmixer-&gt;mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
id|file-&gt;private_data
op_assign
id|fmixer
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|try_module_get
c_func
(paren
id|card-&gt;module
)paren
)paren
(brace
id|kfree
c_func
(paren
id|fmixer
)paren
suffix:semicolon
id|snd_card_file_remove
c_func
(paren
id|card
comma
id|file
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_release
r_static
r_int
id|snd_mixer_oss_release
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
id|snd_mixer_oss_file_t
op_star
id|fmixer
suffix:semicolon
r_if
c_cond
(paren
id|file-&gt;private_data
)paren
(brace
id|fmixer
op_assign
(paren
id|snd_mixer_oss_file_t
op_star
)paren
id|file-&gt;private_data
suffix:semicolon
id|module_put
c_func
(paren
id|fmixer-&gt;card-&gt;module
)paren
suffix:semicolon
id|snd_card_file_remove
c_func
(paren
id|fmixer-&gt;card
comma
id|file
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|fmixer
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_info
r_static
r_int
id|snd_mixer_oss_info
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|mixer_info
id|__user
op_star
id|_info
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
r_struct
id|mixer_info
id|info
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|info
comma
l_int|0
comma
r_sizeof
(paren
id|info
)paren
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|info.id
comma
id|mixer
op_logical_and
id|mixer-&gt;id
(braket
l_int|0
)braket
ques
c_cond
id|mixer-&gt;id
suffix:colon
id|card-&gt;driver
comma
r_sizeof
(paren
id|info.id
)paren
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|info.name
comma
id|mixer
op_logical_and
id|mixer-&gt;name
(braket
l_int|0
)braket
ques
c_cond
id|mixer-&gt;name
suffix:colon
id|card-&gt;mixername
comma
r_sizeof
(paren
id|info.name
)paren
)paren
suffix:semicolon
id|info.modify_counter
op_assign
id|card-&gt;mixer_oss_change_count
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|_info
comma
op_amp
id|info
comma
r_sizeof
(paren
id|info
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_info_obsolete
r_static
r_int
id|snd_mixer_oss_info_obsolete
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|_old_mixer_info
id|__user
op_star
id|_info
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|_old_mixer_info
id|info
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|info
comma
l_int|0
comma
r_sizeof
(paren
id|info
)paren
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|info.id
comma
id|mixer
op_logical_and
id|mixer-&gt;id
(braket
l_int|0
)braket
ques
c_cond
id|mixer-&gt;id
suffix:colon
id|card-&gt;driver
comma
r_sizeof
(paren
id|info.id
)paren
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|info.name
comma
id|mixer
op_logical_and
id|mixer-&gt;name
(braket
l_int|0
)braket
ques
c_cond
id|mixer-&gt;name
suffix:colon
id|card-&gt;mixername
comma
r_sizeof
(paren
id|info.name
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|_info
comma
op_amp
id|info
comma
r_sizeof
(paren
id|info
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_caps
r_static
r_int
id|snd_mixer_oss_caps
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|mixer-&gt;get_recsrc
op_logical_and
id|mixer-&gt;put_recsrc
)paren
id|result
op_or_assign
id|SOUND_CAP_EXCL_INPUT
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_devmask
r_static
r_int
id|snd_mixer_oss_devmask
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|result
op_assign
l_int|0
comma
id|chn
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;put_volume
op_logical_or
id|pslot-&gt;put_recsrc
)paren
id|result
op_or_assign
l_int|1
op_lshift
id|chn
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_stereodevs
r_static
r_int
id|snd_mixer_oss_stereodevs
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|result
op_assign
l_int|0
comma
id|chn
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;put_volume
op_logical_and
id|pslot-&gt;stereo
)paren
id|result
op_or_assign
l_int|1
op_lshift
id|chn
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_recmask
r_static
r_int
id|snd_mixer_oss_recmask
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|mixer-&gt;put_recsrc
op_logical_and
id|mixer-&gt;get_recsrc
)paren
(brace
multiline_comment|/* exclusive */
id|result
op_assign
id|mixer-&gt;mask_recsrc
suffix:semicolon
)brace
r_else
(brace
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|chn
suffix:semicolon
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;put_recsrc
)paren
id|result
op_or_assign
l_int|1
op_lshift
id|chn
suffix:semicolon
)brace
)brace
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_recsrc
r_static
r_int
id|snd_mixer_oss_get_recsrc
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|mixer-&gt;put_recsrc
op_logical_and
id|mixer-&gt;get_recsrc
)paren
(brace
multiline_comment|/* exclusive */
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|mixer
op_member_access_from_pointer
id|get_recsrc
c_func
(paren
id|fmixer
comma
op_amp
id|result
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
id|result
op_assign
l_int|1
op_lshift
id|result
suffix:semicolon
)brace
r_else
(brace
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|chn
suffix:semicolon
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;get_recsrc
)paren
(brace
r_int
id|active
op_assign
l_int|0
suffix:semicolon
id|pslot
op_member_access_from_pointer
id|get_recsrc
c_func
(paren
id|fmixer
comma
id|pslot
comma
op_amp
id|active
)paren
suffix:semicolon
r_if
c_cond
(paren
id|active
)paren
id|result
op_or_assign
l_int|1
op_lshift
id|chn
suffix:semicolon
)brace
)brace
)brace
r_return
id|mixer-&gt;oss_recsrc
op_assign
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_set_recsrc
r_static
r_int
id|snd_mixer_oss_set_recsrc
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
id|recsrc
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|chn
comma
id|active
suffix:semicolon
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|mixer-&gt;get_recsrc
op_logical_and
id|mixer-&gt;put_recsrc
)paren
(brace
multiline_comment|/* exclusive input */
r_if
c_cond
(paren
id|recsrc
op_amp
op_complement
id|mixer-&gt;oss_recsrc
)paren
id|recsrc
op_and_assign
op_complement
id|mixer-&gt;oss_recsrc
suffix:semicolon
id|mixer
op_member_access_from_pointer
id|put_recsrc
c_func
(paren
id|fmixer
comma
id|ffz
c_func
(paren
op_complement
id|recsrc
)paren
)paren
suffix:semicolon
id|mixer
op_member_access_from_pointer
id|get_recsrc
c_func
(paren
id|fmixer
comma
op_amp
id|result
)paren
suffix:semicolon
id|result
op_assign
l_int|1
op_lshift
id|result
suffix:semicolon
)brace
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;put_recsrc
)paren
(brace
id|active
op_assign
(paren
id|recsrc
op_amp
(paren
l_int|1
op_lshift
id|chn
)paren
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|pslot
op_member_access_from_pointer
id|put_recsrc
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|active
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
(brace
r_for
c_loop
(paren
id|chn
op_assign
l_int|0
suffix:semicolon
id|chn
OL
l_int|31
suffix:semicolon
id|chn
op_increment
)paren
(brace
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|chn
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;get_recsrc
)paren
(brace
id|active
op_assign
l_int|0
suffix:semicolon
id|pslot
op_member_access_from_pointer
id|get_recsrc
c_func
(paren
id|fmixer
comma
id|pslot
comma
op_amp
id|active
)paren
suffix:semicolon
r_if
c_cond
(paren
id|active
)paren
id|result
op_or_assign
l_int|1
op_lshift
id|chn
suffix:semicolon
)brace
)brace
)brace
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_volume
r_static
r_int
id|snd_mixer_oss_get_volume
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
id|slot
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|result
op_assign
l_int|0
comma
id|left
comma
id|right
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
op_logical_or
id|slot
OG
l_int|30
)paren
r_return
op_minus
id|EIO
suffix:semicolon
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|slot
)braket
suffix:semicolon
id|left
op_assign
id|pslot-&gt;volume
(braket
l_int|0
)braket
suffix:semicolon
id|right
op_assign
id|pslot-&gt;volume
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;get_volume
)paren
id|result
op_assign
id|pslot
op_member_access_from_pointer
id|get_volume
c_func
(paren
id|fmixer
comma
id|pslot
comma
op_amp
id|left
comma
op_amp
id|right
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pslot-&gt;stereo
)paren
id|right
op_assign
id|left
suffix:semicolon
id|snd_assert
c_func
(paren
id|left
op_ge
l_int|0
op_logical_and
id|left
op_le
l_int|100
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
id|snd_assert
c_func
(paren
id|right
op_ge
l_int|0
op_logical_and
id|right
op_le
l_int|100
comma
r_return
op_minus
id|EIO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
op_ge
l_int|0
)paren
(brace
id|pslot-&gt;volume
(braket
l_int|0
)braket
op_assign
id|left
suffix:semicolon
id|pslot-&gt;volume
(braket
l_int|1
)braket
op_assign
id|right
suffix:semicolon
id|result
op_assign
(paren
id|left
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
id|right
op_amp
l_int|0xff
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_set_volume
r_static
r_int
id|snd_mixer_oss_set_volume
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
id|slot
comma
r_int
id|volume
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_int
id|result
op_assign
l_int|0
comma
id|left
op_assign
id|volume
op_amp
l_int|0xff
comma
id|right
op_assign
(paren
id|volume
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
op_logical_or
id|slot
OG
l_int|30
)paren
r_return
op_minus
id|EIO
suffix:semicolon
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|slot
)braket
suffix:semicolon
r_if
c_cond
(paren
id|left
OG
l_int|100
)paren
id|left
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|right
OG
l_int|100
)paren
id|right
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pslot-&gt;stereo
)paren
id|right
op_assign
id|left
suffix:semicolon
r_if
c_cond
(paren
id|pslot-&gt;put_volume
)paren
id|result
op_assign
id|pslot
op_member_access_from_pointer
id|put_volume
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|left
comma
id|right
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
OL
l_int|0
)paren
r_return
id|result
suffix:semicolon
id|pslot-&gt;volume
(braket
l_int|0
)braket
op_assign
id|left
suffix:semicolon
id|pslot-&gt;volume
(braket
l_int|1
)braket
op_assign
id|right
suffix:semicolon
r_return
(paren
id|left
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
id|right
op_amp
l_int|0xff
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_ioctl1
r_static
r_int
id|snd_mixer_oss_ioctl1
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_void
id|__user
op_star
id|argp
op_assign
(paren
r_void
id|__user
op_star
)paren
id|arg
suffix:semicolon
r_int
id|__user
op_star
id|p
op_assign
id|argp
suffix:semicolon
r_int
id|tmp
suffix:semicolon
id|snd_assert
c_func
(paren
id|fmixer
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|cmd
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_eq
l_char|&squot;M&squot;
)paren
(brace
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SOUND_MIXER_INFO
suffix:colon
r_return
id|snd_mixer_oss_info
c_func
(paren
id|fmixer
comma
id|argp
)paren
suffix:semicolon
r_case
id|SOUND_OLD_MIXER_INFO
suffix:colon
r_return
id|snd_mixer_oss_info_obsolete
c_func
(paren
id|fmixer
comma
id|argp
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_WRITE_RECSRC
suffix:colon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|tmp
comma
id|p
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|tmp
op_assign
id|snd_mixer_oss_set_recsrc
c_func
(paren
id|fmixer
comma
id|tmp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
r_case
id|OSS_GETVERSION
suffix:colon
r_return
id|put_user
c_func
(paren
id|SNDRV_OSS_VERSION
comma
id|p
)paren
suffix:semicolon
r_case
id|OSS_ALSAEMULVER
suffix:colon
r_return
id|put_user
c_func
(paren
l_int|1
comma
id|p
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_READ_DEVMASK
suffix:colon
id|tmp
op_assign
id|snd_mixer_oss_devmask
c_func
(paren
id|fmixer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_READ_STEREODEVS
suffix:colon
id|tmp
op_assign
id|snd_mixer_oss_stereodevs
c_func
(paren
id|fmixer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_READ_RECMASK
suffix:colon
id|tmp
op_assign
id|snd_mixer_oss_recmask
c_func
(paren
id|fmixer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_READ_CAPS
suffix:colon
id|tmp
op_assign
id|snd_mixer_oss_caps
c_func
(paren
id|fmixer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_READ_RECSRC
suffix:colon
id|tmp
op_assign
id|snd_mixer_oss_get_recsrc
c_func
(paren
id|fmixer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|cmd
op_amp
id|SIOC_IN
)paren
(brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|tmp
comma
id|p
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|tmp
op_assign
id|snd_mixer_oss_set_volume
c_func
(paren
id|fmixer
comma
id|cmd
op_amp
l_int|0xff
comma
id|tmp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_amp
id|SIOC_OUT
)paren
(brace
id|tmp
op_assign
id|snd_mixer_oss_get_volume
c_func
(paren
id|fmixer
comma
id|cmd
op_amp
l_int|0xff
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
r_return
id|tmp
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|tmp
comma
id|p
)paren
suffix:semicolon
)brace
r_return
op_minus
id|ENXIO
suffix:semicolon
)brace
multiline_comment|/* FIXME: need to unlock BKL to allow preemption */
DECL|function|snd_mixer_oss_ioctl
r_static
r_int
id|snd_mixer_oss_ioctl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_int
id|err
suffix:semicolon
multiline_comment|/* FIXME: need to unlock BKL to allow preemption */
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
id|err
op_assign
id|snd_mixer_oss_ioctl1
c_func
(paren
(paren
id|snd_mixer_oss_file_t
op_star
)paren
id|file-&gt;private_data
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_ioctl_card
r_int
id|snd_mixer_oss_ioctl_card
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|snd_mixer_oss_file_t
id|fmixer
suffix:semicolon
id|snd_assert
c_func
(paren
id|card
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;mixer_oss
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENXIO
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|fmixer
comma
l_int|0
comma
r_sizeof
(paren
id|fmixer
)paren
)paren
suffix:semicolon
id|fmixer.card
op_assign
id|card
suffix:semicolon
id|fmixer.mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
r_return
id|snd_mixer_oss_ioctl1
c_func
(paren
op_amp
id|fmixer
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *  REGISTRATION PART&n; */
DECL|variable|snd_mixer_oss_f_ops
r_static
r_struct
id|file_operations
id|snd_mixer_oss_f_ops
op_assign
(brace
dot
id|owner
op_assign
id|THIS_MODULE
comma
dot
id|open
op_assign
id|snd_mixer_oss_open
comma
dot
id|release
op_assign
id|snd_mixer_oss_release
comma
dot
id|ioctl
op_assign
id|snd_mixer_oss_ioctl
comma
)brace
suffix:semicolon
DECL|variable|snd_mixer_oss_reg
r_static
id|snd_minor_t
id|snd_mixer_oss_reg
op_assign
(brace
dot
id|comment
op_assign
l_string|&quot;mixer&quot;
comma
dot
id|f_ops
op_assign
op_amp
id|snd_mixer_oss_f_ops
comma
)brace
suffix:semicolon
multiline_comment|/*&n; *  utilities&n; */
DECL|function|snd_mixer_oss_conv
r_static
r_int
id|snd_mixer_oss_conv
c_func
(paren
r_int
id|val
comma
r_int
id|omin
comma
r_int
id|omax
comma
r_int
id|nmin
comma
r_int
id|nmax
)paren
(brace
r_int
id|orange
op_assign
id|omax
op_minus
id|omin
comma
id|nrange
op_assign
id|nmax
op_minus
id|nmin
suffix:semicolon
r_if
c_cond
(paren
id|orange
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_return
(paren
(paren
id|nrange
op_star
(paren
id|val
op_minus
id|omin
)paren
)paren
op_plus
(paren
id|orange
op_div
l_int|2
)paren
)paren
op_div
id|orange
op_plus
id|nmin
suffix:semicolon
)brace
multiline_comment|/* convert from alsa native to oss values (0-100) */
DECL|function|snd_mixer_oss_conv1
r_static
r_int
id|snd_mixer_oss_conv1
c_func
(paren
r_int
id|val
comma
r_int
id|min
comma
r_int
id|max
comma
r_int
op_star
id|old
)paren
(brace
r_if
c_cond
(paren
id|val
op_eq
id|snd_mixer_oss_conv
c_func
(paren
op_star
id|old
comma
l_int|0
comma
l_int|100
comma
id|min
comma
id|max
)paren
)paren
r_return
op_star
id|old
suffix:semicolon
r_return
id|snd_mixer_oss_conv
c_func
(paren
id|val
comma
id|min
comma
id|max
comma
l_int|0
comma
l_int|100
)paren
suffix:semicolon
)brace
multiline_comment|/* convert from oss to alsa native values */
DECL|function|snd_mixer_oss_conv2
r_static
r_int
id|snd_mixer_oss_conv2
c_func
(paren
r_int
id|val
comma
r_int
id|min
comma
r_int
id|max
)paren
(brace
r_return
id|snd_mixer_oss_conv
c_func
(paren
id|val
comma
l_int|0
comma
l_int|100
comma
id|min
comma
id|max
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
r_void
id|snd_mixer_oss_recsrce_set
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_int
id|slot
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
r_if
c_cond
(paren
id|mixer
)paren
id|mixer-&gt;mask_recsrc
op_or_assign
l_int|1
op_lshift
id|slot
suffix:semicolon
)brace
r_static
r_int
id|snd_mixer_oss_recsrce_get
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_int
id|slot
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_logical_and
(paren
id|mixer-&gt;mask_recsrc
op_amp
(paren
l_int|1
op_lshift
id|slot
)paren
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|macro|SNDRV_MIXER_OSS_SIGNATURE
mdefine_line|#define SNDRV_MIXER_OSS_SIGNATURE&t;&t;0x65999250
DECL|macro|SNDRV_MIXER_OSS_ITEM_GLOBAL
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_GLOBAL&t;0
DECL|macro|SNDRV_MIXER_OSS_ITEM_GSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_GSWITCH&t;1
DECL|macro|SNDRV_MIXER_OSS_ITEM_GROUTE
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_GROUTE&t;2
DECL|macro|SNDRV_MIXER_OSS_ITEM_GVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_GVOLUME&t;3
DECL|macro|SNDRV_MIXER_OSS_ITEM_PSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_PSWITCH&t;4
DECL|macro|SNDRV_MIXER_OSS_ITEM_PROUTE
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_PROUTE&t;5
DECL|macro|SNDRV_MIXER_OSS_ITEM_PVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_PVOLUME&t;6
DECL|macro|SNDRV_MIXER_OSS_ITEM_CSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_CSWITCH&t;7
DECL|macro|SNDRV_MIXER_OSS_ITEM_CROUTE
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_CROUTE&t;8
DECL|macro|SNDRV_MIXER_OSS_ITEM_CVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_CVOLUME&t;9
DECL|macro|SNDRV_MIXER_OSS_ITEM_CAPTURE
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_CAPTURE&t;10
DECL|macro|SNDRV_MIXER_OSS_ITEM_COUNT
mdefine_line|#define SNDRV_MIXER_OSS_ITEM_COUNT&t;11
DECL|macro|SNDRV_MIXER_OSS_PRESENT_GLOBAL
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_GLOBAL&t;(1&lt;&lt;0)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_GSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_GSWITCH&t;(1&lt;&lt;1)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_GROUTE
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_GROUTE&t;(1&lt;&lt;2)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_GVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_GVOLUME&t;(1&lt;&lt;3)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_PSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_PSWITCH&t;(1&lt;&lt;4)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_PROUTE
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_PROUTE&t;(1&lt;&lt;5)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_PVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_PVOLUME&t;(1&lt;&lt;6)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_CSWITCH
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_CSWITCH&t;(1&lt;&lt;7)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_CROUTE
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_CROUTE&t;(1&lt;&lt;8)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_CVOLUME
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_CVOLUME&t;(1&lt;&lt;9)
DECL|macro|SNDRV_MIXER_OSS_PRESENT_CAPTURE
mdefine_line|#define SNDRV_MIXER_OSS_PRESENT_CAPTURE&t;(1&lt;&lt;10)
DECL|struct|slot
r_struct
id|slot
(brace
DECL|member|signature
r_int
r_int
id|signature
suffix:semicolon
DECL|member|present
r_int
r_int
id|present
suffix:semicolon
DECL|member|channels
r_int
r_int
id|channels
suffix:semicolon
DECL|member|numid
r_int
r_int
id|numid
(braket
id|SNDRV_MIXER_OSS_ITEM_COUNT
)braket
suffix:semicolon
DECL|member|capture_item
r_int
r_int
id|capture_item
suffix:semicolon
DECL|member|assigned
r_struct
id|snd_mixer_oss_assign_table
op_star
id|assigned
suffix:semicolon
DECL|member|allocated
r_int
r_int
id|allocated
suffix:colon
l_int|1
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|ID_UNKNOWN
mdefine_line|#define ID_UNKNOWN&t;((unsigned int)-1)
DECL|function|snd_mixer_oss_test_id
r_static
id|snd_kcontrol_t
op_star
id|snd_mixer_oss_test_id
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
comma
r_const
r_char
op_star
id|name
comma
r_int
id|index
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|mixer-&gt;card
suffix:semicolon
id|snd_ctl_elem_id_t
id|id
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|id
comma
l_int|0
comma
r_sizeof
(paren
id|id
)paren
)paren
suffix:semicolon
id|id.iface
op_assign
id|SNDRV_CTL_ELEM_IFACE_MIXER
suffix:semicolon
id|strcpy
c_func
(paren
id|id.name
comma
id|name
)paren
suffix:semicolon
id|id.index
op_assign
id|index
suffix:semicolon
r_return
id|snd_ctl_find_id
c_func
(paren
id|card
comma
op_amp
id|id
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_volume1_vol
r_static
r_void
id|snd_mixer_oss_get_volume1_vol
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
r_int
id|numid
comma
r_int
op_star
id|left
comma
r_int
op_star
id|right
)paren
(brace
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
r_if
c_cond
(paren
id|numid
op_eq
id|ID_UNKNOWN
)paren
r_return
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kctl
op_assign
id|snd_ctl_find_numid
c_func
(paren
id|card
comma
id|numid
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
r_goto
id|__unalloc
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|get
c_func
(paren
id|kctl
comma
id|uctl
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|uinfo-&gt;type
op_ne
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
op_logical_or
id|uinfo-&gt;value.integer.min
op_ne
l_int|0
op_logical_or
id|uinfo-&gt;value.integer.max
op_ne
l_int|1
comma
r_return
)paren
suffix:semicolon
op_star
id|left
op_assign
id|snd_mixer_oss_conv1
c_func
(paren
id|uctl-&gt;value.integer.value
(braket
l_int|0
)braket
comma
id|uinfo-&gt;value.integer.min
comma
id|uinfo-&gt;value.integer.max
comma
op_amp
id|pslot-&gt;volume
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;count
OG
l_int|1
)paren
op_star
id|right
op_assign
id|snd_mixer_oss_conv1
c_func
(paren
id|uctl-&gt;value.integer.value
(braket
l_int|1
)braket
comma
id|uinfo-&gt;value.integer.min
comma
id|uinfo-&gt;value.integer.max
comma
op_amp
id|pslot-&gt;volume
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|__unalloc
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_volume1_sw
r_static
r_void
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
r_int
id|numid
comma
r_int
op_star
id|left
comma
r_int
op_star
id|right
comma
r_int
id|route
)paren
(brace
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
r_if
c_cond
(paren
id|numid
op_eq
id|ID_UNKNOWN
)paren
r_return
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kctl
op_assign
id|snd_ctl_find_numid
c_func
(paren
id|card
comma
id|numid
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
r_goto
id|__unalloc
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|get
c_func
(paren
id|kctl
comma
id|uctl
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|uctl-&gt;value.integer.value
(braket
l_int|0
)braket
)paren
(brace
op_star
id|left
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;count
op_eq
l_int|1
)paren
op_star
id|right
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|uinfo-&gt;count
OG
l_int|1
op_logical_and
op_logical_neg
id|uctl-&gt;value.integer.value
(braket
id|route
ques
c_cond
l_int|3
suffix:colon
l_int|1
)braket
)paren
op_star
id|right
op_assign
l_int|0
suffix:semicolon
id|__unalloc
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_volume1
r_static
r_int
id|snd_mixer_oss_get_volume1
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
op_star
id|left
comma
r_int
op_star
id|right
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
op_star
id|left
op_assign
op_star
id|right
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PVOLUME
)paren
(brace
id|snd_mixer_oss_get_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PVOLUME
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GVOLUME
)paren
(brace
id|snd_mixer_oss_get_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GVOLUME
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GLOBAL
)paren
(brace
id|snd_mixer_oss_get_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GLOBAL
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PSWITCH
)paren
(brace
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GSWITCH
)paren
(brace
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PROUTE
)paren
(brace
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GROUTE
)paren
(brace
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_volume1_vol
r_static
r_void
id|snd_mixer_oss_put_volume1_vol
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
r_int
id|numid
comma
r_int
id|left
comma
r_int
id|right
)paren
(brace
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
r_int
id|res
suffix:semicolon
r_if
c_cond
(paren
id|numid
op_eq
id|ID_UNKNOWN
)paren
r_return
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kctl
op_assign
id|snd_ctl_find_numid
c_func
(paren
id|card
comma
id|numid
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
r_goto
id|__unalloc
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|uinfo-&gt;type
op_ne
id|SNDRV_CTL_ELEM_TYPE_BOOLEAN
op_logical_or
id|uinfo-&gt;value.integer.min
op_ne
l_int|0
op_logical_or
id|uinfo-&gt;value.integer.max
op_ne
l_int|1
comma
r_return
)paren
suffix:semicolon
id|uctl-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|snd_mixer_oss_conv2
c_func
(paren
id|left
comma
id|uinfo-&gt;value.integer.min
comma
id|uinfo-&gt;value.integer.max
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;count
OG
l_int|1
)paren
id|uctl-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|snd_mixer_oss_conv2
c_func
(paren
id|right
comma
id|uinfo-&gt;value.integer.min
comma
id|uinfo-&gt;value.integer.max
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
(paren
id|res
op_assign
id|kctl
op_member_access_from_pointer
id|put
c_func
(paren
id|kctl
comma
id|uctl
)paren
)paren
op_ge
l_int|0
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|res
OG
l_int|0
)paren
id|snd_ctl_notify
c_func
(paren
id|card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
comma
op_amp
id|kctl-&gt;id
)paren
suffix:semicolon
id|__unalloc
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_volume1_sw
r_static
r_void
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
r_int
id|numid
comma
r_int
id|left
comma
r_int
id|right
comma
r_int
id|route
)paren
(brace
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
r_int
id|res
suffix:semicolon
r_if
c_cond
(paren
id|numid
op_eq
id|ID_UNKNOWN
)paren
r_return
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kctl
op_assign
id|snd_ctl_find_numid
c_func
(paren
id|card
comma
id|numid
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|fmixer-&gt;card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
r_goto
id|__unalloc
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo-&gt;count
OG
l_int|1
)paren
(brace
id|uctl-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
id|left
OG
l_int|0
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|uctl-&gt;value.integer.value
(braket
id|route
ques
c_cond
l_int|3
suffix:colon
l_int|1
)braket
op_assign
id|right
OG
l_int|0
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|route
)paren
(brace
id|uctl-&gt;value.integer.value
(braket
l_int|1
)braket
op_assign
id|uctl-&gt;value.integer.value
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
id|uctl-&gt;value.integer.value
(braket
l_int|0
)braket
op_assign
(paren
id|left
OG
l_int|0
op_logical_or
id|right
OG
l_int|0
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
id|snd_runtime_check
c_func
(paren
(paren
id|res
op_assign
id|kctl
op_member_access_from_pointer
id|put
c_func
(paren
id|kctl
comma
id|uctl
)paren
)paren
op_ge
l_int|0
comma
r_goto
id|__unalloc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|res
OG
l_int|0
)paren
id|snd_ctl_notify
c_func
(paren
id|card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
comma
op_amp
id|kctl-&gt;id
)paren
suffix:semicolon
id|__unalloc
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_volume1
r_static
r_int
id|snd_mixer_oss_put_volume1
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
id|left
comma
r_int
id|right
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PVOLUME
)paren
(brace
id|snd_mixer_oss_put_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PVOLUME
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CVOLUME
)paren
id|snd_mixer_oss_put_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_CVOLUME
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GVOLUME
)paren
(brace
id|snd_mixer_oss_put_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GVOLUME
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GLOBAL
)paren
(brace
id|snd_mixer_oss_put_volume1_vol
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GLOBAL
)braket
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|left
op_logical_or
id|right
)paren
(brace
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PSWITCH
)paren
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GSWITCH
)paren
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PROUTE
)paren
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GROUTE
)paren
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PSWITCH
)paren
(brace
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GSWITCH
)paren
(brace
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GSWITCH
)braket
comma
id|left
comma
id|right
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_PROUTE
)paren
(brace
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_PROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_GROUTE
)paren
(brace
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_GROUTE
)braket
comma
id|left
comma
id|right
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_recsrc1_sw
r_static
r_int
id|snd_mixer_oss_get_recsrc1_sw
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
op_star
id|active
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
r_int
id|left
comma
id|right
suffix:semicolon
id|left
op_assign
id|right
op_assign
l_int|1
suffix:semicolon
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_CSWITCH
)braket
comma
op_amp
id|left
comma
op_amp
id|right
comma
l_int|0
)paren
suffix:semicolon
op_star
id|active
op_assign
(paren
id|left
op_logical_or
id|right
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_recsrc1_route
r_static
r_int
id|snd_mixer_oss_get_recsrc1_route
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
op_star
id|active
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
r_int
id|left
comma
id|right
suffix:semicolon
id|left
op_assign
id|right
op_assign
l_int|1
suffix:semicolon
id|snd_mixer_oss_get_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_CROUTE
)braket
comma
op_amp
id|left
comma
op_amp
id|right
comma
l_int|1
)paren
suffix:semicolon
op_star
id|active
op_assign
(paren
id|left
op_logical_or
id|right
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_recsrc1_sw
r_static
r_int
id|snd_mixer_oss_put_recsrc1_sw
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
id|active
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_CSWITCH
)braket
comma
id|active
comma
id|active
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_recsrc1_route
r_static
r_int
id|snd_mixer_oss_put_recsrc1_route
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
id|snd_mixer_oss_slot_t
op_star
id|pslot
comma
r_int
id|active
)paren
(brace
r_struct
id|slot
op_star
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
id|snd_mixer_oss_put_volume1_sw
c_func
(paren
id|fmixer
comma
id|pslot
comma
id|slot-&gt;numid
(braket
id|SNDRV_MIXER_OSS_ITEM_CROUTE
)braket
comma
id|active
comma
id|active
comma
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_get_recsrc2
r_static
r_int
id|snd_mixer_oss_get_recsrc2
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
r_int
op_star
id|active_index
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_struct
id|slot
op_star
id|slot
suffix:semicolon
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
r_int
id|err
comma
id|idx
suffix:semicolon
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
(brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|__unlock
suffix:semicolon
)brace
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kctl
op_assign
id|snd_mixer_oss_test_id
c_func
(paren
id|mixer
comma
l_string|&quot;Capture Source&quot;
comma
l_int|0
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|kctl
op_ne
l_int|NULL
comma
id|err
op_assign
op_minus
id|ENOENT
suffix:semicolon
r_goto
id|__unlock
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
(paren
id|err
op_assign
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
)paren
comma
r_goto
id|__unlock
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
(paren
id|err
op_assign
id|kctl
op_member_access_from_pointer
id|get
c_func
(paren
id|kctl
comma
id|uctl
)paren
)paren
comma
r_goto
id|__unlock
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|32
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|mixer-&gt;mask_recsrc
op_amp
(paren
l_int|1
op_lshift
id|idx
)paren
)paren
)paren
r_continue
suffix:semicolon
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|idx
)braket
suffix:semicolon
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;signature
op_ne
id|SNDRV_MIXER_OSS_SIGNATURE
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CAPTURE
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;capture_item
op_eq
id|uctl-&gt;value.enumerated.item
(braket
l_int|0
)braket
)paren
(brace
op_star
id|active_index
op_assign
id|idx
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|err
op_assign
l_int|0
suffix:semicolon
id|__unlock
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_put_recsrc2
r_static
r_int
id|snd_mixer_oss_put_recsrc2
c_func
(paren
id|snd_mixer_oss_file_t
op_star
id|fmixer
comma
r_int
r_int
id|active_index
)paren
(brace
id|snd_card_t
op_star
id|card
op_assign
id|fmixer-&gt;card
suffix:semicolon
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|fmixer-&gt;mixer
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|pslot
suffix:semicolon
r_struct
id|slot
op_star
id|slot
op_assign
l_int|NULL
suffix:semicolon
id|snd_ctl_elem_info_t
op_star
id|uinfo
suffix:semicolon
id|snd_ctl_elem_value_t
op_star
id|uctl
suffix:semicolon
r_int
id|err
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
id|uinfo
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uinfo
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|uctl
op_assign
id|kcalloc
c_func
(paren
l_int|1
comma
r_sizeof
(paren
op_star
id|uctl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uinfo
op_eq
l_int|NULL
op_logical_or
id|uctl
op_eq
l_int|NULL
)paren
(brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|__unlock
suffix:semicolon
)brace
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kctl
op_assign
id|snd_mixer_oss_test_id
c_func
(paren
id|mixer
comma
l_string|&quot;Capture Source&quot;
comma
l_int|0
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|kctl
op_ne
l_int|NULL
comma
id|err
op_assign
op_minus
id|ENOENT
suffix:semicolon
r_goto
id|__unlock
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
op_logical_neg
(paren
id|err
op_assign
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
id|uinfo
)paren
)paren
comma
r_goto
id|__unlock
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
l_int|32
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|mixer-&gt;mask_recsrc
op_amp
(paren
l_int|1
op_lshift
id|idx
)paren
)paren
)paren
r_continue
suffix:semicolon
id|pslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|idx
)braket
suffix:semicolon
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|pslot-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
id|slot-&gt;signature
op_ne
id|SNDRV_MIXER_OSS_SIGNATURE
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|slot-&gt;present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CAPTURE
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|idx
op_eq
id|active_index
)paren
r_break
suffix:semicolon
id|slot
op_assign
l_int|NULL
suffix:semicolon
)brace
id|snd_runtime_check
c_func
(paren
id|slot
op_ne
l_int|NULL
comma
r_goto
id|__unlock
)paren
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|uinfo-&gt;count
suffix:semicolon
id|idx
op_increment
)paren
id|uctl-&gt;value.enumerated.item
(braket
id|idx
)braket
op_assign
id|slot-&gt;capture_item
suffix:semicolon
id|snd_runtime_check
c_func
(paren
(paren
id|err
op_assign
id|kctl
op_member_access_from_pointer
id|put
c_func
(paren
id|kctl
comma
id|uctl
)paren
)paren
op_ge
l_int|0
comma
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OG
l_int|0
)paren
id|snd_ctl_notify
c_func
(paren
id|fmixer-&gt;card
comma
id|SNDRV_CTL_EVENT_MASK_VALUE
comma
op_amp
id|kctl-&gt;id
)paren
suffix:semicolon
id|err
op_assign
l_int|0
suffix:semicolon
id|__unlock
suffix:colon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uctl
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|uinfo
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|struct|snd_mixer_oss_assign_table
r_struct
id|snd_mixer_oss_assign_table
(brace
DECL|member|oss_id
r_int
id|oss_id
suffix:semicolon
DECL|member|name
r_const
r_char
op_star
id|name
suffix:semicolon
DECL|member|index
r_int
id|index
suffix:semicolon
)brace
suffix:semicolon
DECL|function|snd_mixer_oss_build_test
r_static
r_int
id|snd_mixer_oss_build_test
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
comma
r_struct
id|slot
op_star
id|slot
comma
r_const
r_char
op_star
id|name
comma
r_int
id|index
comma
r_int
id|item
)paren
(brace
id|snd_ctl_elem_info_t
id|info
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kcontrol
suffix:semicolon
id|snd_card_t
op_star
id|card
op_assign
id|mixer-&gt;card
suffix:semicolon
r_int
id|err
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
id|kcontrol
op_assign
id|snd_mixer_oss_test_id
c_func
(paren
id|mixer
comma
id|name
comma
id|index
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kcontrol
op_eq
l_int|NULL
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|kcontrol
op_member_access_from_pointer
id|info
c_func
(paren
id|kcontrol
comma
op_amp
id|info
)paren
)paren
OL
l_int|0
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|slot-&gt;numid
(braket
id|item
)braket
op_assign
id|kcontrol-&gt;id.numid
suffix:semicolon
id|up_read
c_func
(paren
op_amp
id|card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|info.count
OG
id|slot-&gt;channels
)paren
id|slot-&gt;channels
op_assign
id|info.count
suffix:semicolon
id|slot-&gt;present
op_or_assign
l_int|1
op_lshift
id|item
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_slot_free
r_static
r_void
id|snd_mixer_oss_slot_free
c_func
(paren
id|snd_mixer_oss_slot_t
op_star
id|chn
)paren
(brace
r_struct
id|slot
op_star
id|p
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|chn-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;allocated
op_logical_and
id|p-&gt;assigned
)paren
(brace
id|kfree
c_func
(paren
id|p-&gt;assigned-&gt;name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|p-&gt;assigned
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
)brace
DECL|function|mixer_slot_clear
r_static
r_void
id|mixer_slot_clear
c_func
(paren
id|snd_mixer_oss_slot_t
op_star
id|rslot
)paren
(brace
r_int
id|idx
op_assign
id|rslot-&gt;number
suffix:semicolon
multiline_comment|/* remember this */
r_if
c_cond
(paren
id|rslot-&gt;private_free
)paren
id|rslot
op_member_access_from_pointer
id|private_free
c_func
(paren
id|rslot
)paren
suffix:semicolon
id|memset
c_func
(paren
id|rslot
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|rslot
)paren
)paren
suffix:semicolon
id|rslot-&gt;number
op_assign
id|idx
suffix:semicolon
)brace
multiline_comment|/*&n; * build an OSS mixer element.&n; * ptr_allocated means the entry is dynamically allocated (change via proc file).&n; * when replace_old = 1, the old entry is replaced with the new one.&n; */
DECL|function|snd_mixer_oss_build_input
r_static
r_int
id|snd_mixer_oss_build_input
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
comma
r_struct
id|snd_mixer_oss_assign_table
op_star
id|ptr
comma
r_int
id|ptr_allocated
comma
r_int
id|replace_old
)paren
(brace
r_struct
id|slot
id|slot
suffix:semicolon
r_struct
id|slot
op_star
id|pslot
suffix:semicolon
id|snd_kcontrol_t
op_star
id|kctl
suffix:semicolon
id|snd_mixer_oss_slot_t
op_star
id|rslot
suffix:semicolon
r_char
id|str
(braket
l_int|64
)braket
suffix:semicolon
multiline_comment|/* check if already assigned */
r_if
c_cond
(paren
id|mixer-&gt;slots
(braket
id|ptr-&gt;oss_id
)braket
dot
id|get_volume
op_logical_and
op_logical_neg
id|replace_old
)paren
r_return
l_int|0
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|slot
comma
l_int|0
comma
r_sizeof
(paren
id|slot
)paren
)paren
suffix:semicolon
id|memset
c_func
(paren
id|slot.numid
comma
l_int|0xff
comma
r_sizeof
(paren
id|slot.numid
)paren
)paren
suffix:semicolon
multiline_comment|/* ID_UNKNOWN */
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|ptr-&gt;name
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_GLOBAL
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Switch&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_GSWITCH
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Route&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_GROUTE
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Volume&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_GVOLUME
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Playback Switch&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_PSWITCH
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Playback Route&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_PROUTE
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Playback Volume&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_PVOLUME
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Capture Switch&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_CSWITCH
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Capture Route&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_CROUTE
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
l_string|&quot;%s Capture Volume&quot;
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_test
c_func
(paren
id|mixer
comma
op_amp
id|slot
comma
id|str
comma
id|ptr-&gt;index
comma
id|SNDRV_MIXER_OSS_ITEM_CVOLUME
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|mixer-&gt;card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr-&gt;index
op_eq
l_int|0
op_logical_and
(paren
id|kctl
op_assign
id|snd_mixer_oss_test_id
c_func
(paren
id|mixer
comma
l_string|&quot;Capture Source&quot;
comma
l_int|0
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|snd_ctl_elem_info_t
id|uinfo
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|uinfo
comma
l_int|0
comma
r_sizeof
(paren
id|uinfo
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
op_amp
id|uinfo
)paren
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|mixer-&gt;card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|str
comma
id|ptr-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|str
comma
l_string|&quot;Master&quot;
)paren
)paren
id|strcpy
c_func
(paren
id|str
comma
l_string|&quot;Mix&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|str
comma
l_string|&quot;Master Mono&quot;
)paren
)paren
id|strcpy
c_func
(paren
id|str
comma
l_string|&quot;Mix Mono&quot;
)paren
suffix:semicolon
id|slot.capture_item
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|uinfo.value.enumerated.name
comma
id|str
)paren
)paren
(brace
id|slot.present
op_or_assign
id|SNDRV_MIXER_OSS_PRESENT_CAPTURE
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|slot.capture_item
op_assign
l_int|1
suffix:semicolon
id|slot.capture_item
OL
id|uinfo.value.enumerated.items
suffix:semicolon
id|slot.capture_item
op_increment
)paren
(brace
id|uinfo.value.enumerated.item
op_assign
id|slot.capture_item
suffix:semicolon
r_if
c_cond
(paren
id|kctl
op_member_access_from_pointer
id|info
c_func
(paren
id|kctl
comma
op_amp
id|uinfo
)paren
)paren
(brace
id|up_read
c_func
(paren
op_amp
id|mixer-&gt;card-&gt;controls_rwsem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|uinfo.value.enumerated.name
comma
id|str
)paren
)paren
(brace
id|slot.present
op_or_assign
id|SNDRV_MIXER_OSS_PRESENT_CAPTURE
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
id|up_read
c_func
(paren
op_amp
id|mixer-&gt;card-&gt;controls_rwsem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slot.present
op_ne
l_int|0
)paren
(brace
id|pslot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
id|slot
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|snd_runtime_check
c_func
(paren
id|pslot
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENOMEM
)paren
suffix:semicolon
op_star
id|pslot
op_assign
id|slot
suffix:semicolon
id|pslot-&gt;signature
op_assign
id|SNDRV_MIXER_OSS_SIGNATURE
suffix:semicolon
id|pslot-&gt;assigned
op_assign
id|ptr
suffix:semicolon
id|pslot-&gt;allocated
op_assign
id|ptr_allocated
suffix:semicolon
id|rslot
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|ptr-&gt;oss_id
)braket
suffix:semicolon
id|mixer_slot_clear
c_func
(paren
id|rslot
)paren
suffix:semicolon
id|rslot-&gt;stereo
op_assign
id|slot.channels
OG
l_int|1
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|rslot-&gt;get_volume
op_assign
id|snd_mixer_oss_get_volume1
suffix:semicolon
id|rslot-&gt;put_volume
op_assign
id|snd_mixer_oss_put_volume1
suffix:semicolon
multiline_comment|/* note: ES18xx have both Capture Source and XX Capture Volume !!! */
r_if
c_cond
(paren
id|slot.present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CSWITCH
)paren
(brace
id|rslot-&gt;get_recsrc
op_assign
id|snd_mixer_oss_get_recsrc1_sw
suffix:semicolon
id|rslot-&gt;put_recsrc
op_assign
id|snd_mixer_oss_put_recsrc1_sw
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot.present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CROUTE
)paren
(brace
id|rslot-&gt;get_recsrc
op_assign
id|snd_mixer_oss_get_recsrc1_route
suffix:semicolon
id|rslot-&gt;put_recsrc
op_assign
id|snd_mixer_oss_put_recsrc1_route
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|slot.present
op_amp
id|SNDRV_MIXER_OSS_PRESENT_CAPTURE
)paren
(brace
id|mixer-&gt;mask_recsrc
op_or_assign
l_int|1
op_lshift
id|ptr-&gt;oss_id
suffix:semicolon
)brace
id|rslot-&gt;private_data
op_assign
id|pslot
suffix:semicolon
id|rslot-&gt;private_free
op_assign
id|snd_mixer_oss_slot_free
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; */
DECL|macro|MIXER_VOL
mdefine_line|#define MIXER_VOL(name) [SOUND_MIXER_##name] = #name
DECL|variable|oss_mixer_names
r_static
r_char
op_star
id|oss_mixer_names
(braket
id|SNDRV_OSS_MAX_MIXERS
)braket
op_assign
(brace
id|MIXER_VOL
c_func
(paren
id|VOLUME
)paren
comma
id|MIXER_VOL
c_func
(paren
id|BASS
)paren
comma
id|MIXER_VOL
c_func
(paren
id|TREBLE
)paren
comma
id|MIXER_VOL
c_func
(paren
id|SYNTH
)paren
comma
id|MIXER_VOL
c_func
(paren
id|PCM
)paren
comma
id|MIXER_VOL
c_func
(paren
id|SPEAKER
)paren
comma
id|MIXER_VOL
c_func
(paren
id|LINE
)paren
comma
id|MIXER_VOL
c_func
(paren
id|MIC
)paren
comma
id|MIXER_VOL
c_func
(paren
id|CD
)paren
comma
id|MIXER_VOL
c_func
(paren
id|IMIX
)paren
comma
id|MIXER_VOL
c_func
(paren
id|ALTPCM
)paren
comma
id|MIXER_VOL
c_func
(paren
id|RECLEV
)paren
comma
id|MIXER_VOL
c_func
(paren
id|IGAIN
)paren
comma
id|MIXER_VOL
c_func
(paren
id|OGAIN
)paren
comma
id|MIXER_VOL
c_func
(paren
id|LINE1
)paren
comma
id|MIXER_VOL
c_func
(paren
id|LINE2
)paren
comma
id|MIXER_VOL
c_func
(paren
id|LINE3
)paren
comma
id|MIXER_VOL
c_func
(paren
id|DIGITAL1
)paren
comma
id|MIXER_VOL
c_func
(paren
id|DIGITAL2
)paren
comma
id|MIXER_VOL
c_func
(paren
id|DIGITAL3
)paren
comma
id|MIXER_VOL
c_func
(paren
id|PHONEIN
)paren
comma
id|MIXER_VOL
c_func
(paren
id|PHONEOUT
)paren
comma
id|MIXER_VOL
c_func
(paren
id|VIDEO
)paren
comma
id|MIXER_VOL
c_func
(paren
id|RADIO
)paren
comma
id|MIXER_VOL
c_func
(paren
id|MONITOR
)paren
comma
)brace
suffix:semicolon
multiline_comment|/*&n; *  /proc interface&n; */
DECL|function|snd_mixer_oss_proc_read
r_static
r_void
id|snd_mixer_oss_proc_read
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|entry-&gt;private_data
suffix:semicolon
r_int
id|i
suffix:semicolon
id|down
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|SNDRV_OSS_MAX_MIXERS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|slot
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|oss_mixer_names
(braket
id|i
)braket
)paren
r_continue
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|mixer-&gt;slots
(braket
id|i
)braket
dot
id|private_data
suffix:semicolon
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;%s &quot;
comma
id|oss_mixer_names
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_logical_and
id|p-&gt;assigned
)paren
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;&quot;%s&bslash;&quot; %d&bslash;n&quot;
comma
id|p-&gt;assigned-&gt;name
comma
id|p-&gt;assigned-&gt;index
)paren
suffix:semicolon
r_else
id|snd_iprintf
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;&quot;&bslash;&quot; 0&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_proc_write
r_static
r_void
id|snd_mixer_oss_proc_write
c_func
(paren
id|snd_info_entry_t
op_star
id|entry
comma
id|snd_info_buffer_t
op_star
id|buffer
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
id|entry-&gt;private_data
suffix:semicolon
r_char
id|line
(braket
l_int|128
)braket
comma
id|str
(braket
l_int|32
)braket
comma
id|idxstr
(braket
l_int|16
)braket
comma
op_star
id|cptr
suffix:semicolon
r_int
id|ch
comma
id|idx
suffix:semicolon
r_struct
id|snd_mixer_oss_assign_table
op_star
id|tbl
suffix:semicolon
r_struct
id|slot
op_star
id|slot
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
id|snd_info_get_line
c_func
(paren
id|buffer
comma
id|line
comma
r_sizeof
(paren
id|line
)paren
)paren
)paren
(brace
id|cptr
op_assign
id|snd_info_get_str
c_func
(paren
id|str
comma
id|line
comma
r_sizeof
(paren
id|str
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|ch
op_assign
l_int|0
suffix:semicolon
id|ch
OL
id|SNDRV_OSS_MAX_MIXERS
suffix:semicolon
id|ch
op_increment
)paren
r_if
c_cond
(paren
id|oss_mixer_names
(braket
id|ch
)braket
op_logical_and
id|strcmp
c_func
(paren
id|oss_mixer_names
(braket
id|ch
)braket
comma
id|str
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|ch
op_ge
id|SNDRV_OSS_MAX_MIXERS
)paren
(brace
id|snd_printk
c_func
(paren
id|KERN_ERR
l_string|&quot;mixer_oss: invalid OSS volume &squot;%s&squot;&bslash;n&quot;
comma
id|str
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|cptr
op_assign
id|snd_info_get_str
c_func
(paren
id|str
comma
id|cptr
comma
r_sizeof
(paren
id|str
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|str
)paren
(brace
multiline_comment|/* remove the entry */
id|down
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
id|mixer_slot_clear
c_func
(paren
op_amp
id|mixer-&gt;slots
(braket
id|ch
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|snd_info_get_str
c_func
(paren
id|idxstr
comma
id|cptr
comma
r_sizeof
(paren
id|idxstr
)paren
)paren
suffix:semicolon
id|idx
op_assign
id|simple_strtoul
c_func
(paren
id|idxstr
comma
l_int|NULL
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|idx
op_ge
l_int|0x4000
)paren
(brace
multiline_comment|/* too big */
id|snd_printk
c_func
(paren
id|KERN_ERR
l_string|&quot;mixer_oss: invalid index %d&bslash;n&quot;
comma
id|idx
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|down
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
id|slot
op_assign
(paren
r_struct
id|slot
op_star
)paren
id|mixer-&gt;slots
(braket
id|ch
)braket
dot
id|private_data
suffix:semicolon
r_if
c_cond
(paren
id|slot
op_logical_and
id|slot-&gt;assigned
op_logical_and
id|slot-&gt;assigned-&gt;index
op_eq
id|idx
op_logical_and
op_logical_neg
id|strcmp
c_func
(paren
id|slot-&gt;assigned-&gt;name
comma
id|str
)paren
)paren
multiline_comment|/* not changed */
r_goto
id|__unlock
suffix:semicolon
id|tbl
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|tbl
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tbl
)paren
(brace
id|snd_printk
c_func
(paren
id|KERN_ERR
l_string|&quot;mixer_oss: no memory&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|__unlock
suffix:semicolon
)brace
id|tbl-&gt;oss_id
op_assign
id|ch
suffix:semicolon
id|tbl-&gt;name
op_assign
id|snd_kmalloc_strdup
c_func
(paren
id|str
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tbl-&gt;name
)paren
(brace
id|kfree
c_func
(paren
id|tbl
)paren
suffix:semicolon
r_goto
id|__unlock
suffix:semicolon
)brace
id|tbl-&gt;index
op_assign
id|idx
suffix:semicolon
r_if
c_cond
(paren
id|snd_mixer_oss_build_input
c_func
(paren
id|mixer
comma
id|tbl
comma
l_int|1
comma
l_int|1
)paren
op_le
l_int|0
)paren
(brace
id|kfree
c_func
(paren
id|tbl-&gt;name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|tbl
)paren
suffix:semicolon
)brace
id|__unlock
suffix:colon
id|up
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
)brace
)brace
DECL|function|snd_mixer_oss_proc_init
r_static
r_void
id|snd_mixer_oss_proc_init
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
)paren
(brace
id|snd_info_entry_t
op_star
id|entry
suffix:semicolon
id|entry
op_assign
id|snd_info_create_card_entry
c_func
(paren
id|mixer-&gt;card
comma
l_string|&quot;oss_mixer&quot;
comma
id|mixer-&gt;card-&gt;proc_root
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|entry
)paren
r_return
suffix:semicolon
id|entry-&gt;content
op_assign
id|SNDRV_INFO_CONTENT_TEXT
suffix:semicolon
id|entry-&gt;mode
op_assign
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
suffix:semicolon
id|entry-&gt;c.text.read_size
op_assign
l_int|8192
suffix:semicolon
id|entry-&gt;c.text.read
op_assign
id|snd_mixer_oss_proc_read
suffix:semicolon
id|entry-&gt;c.text.write_size
op_assign
l_int|8192
suffix:semicolon
id|entry-&gt;c.text.write
op_assign
id|snd_mixer_oss_proc_write
suffix:semicolon
id|entry-&gt;private_data
op_assign
id|mixer
suffix:semicolon
r_if
c_cond
(paren
id|snd_info_register
c_func
(paren
id|entry
)paren
OL
l_int|0
)paren
(brace
id|snd_info_free_entry
c_func
(paren
id|entry
)paren
suffix:semicolon
id|entry
op_assign
l_int|NULL
suffix:semicolon
)brace
id|mixer-&gt;proc_entry
op_assign
id|entry
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_proc_done
r_static
r_void
id|snd_mixer_oss_proc_done
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
)paren
(brace
r_if
c_cond
(paren
id|mixer-&gt;proc_entry
)paren
(brace
id|snd_info_unregister
c_func
(paren
id|mixer-&gt;proc_entry
)paren
suffix:semicolon
id|mixer-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|snd_mixer_oss_build
r_static
r_void
id|snd_mixer_oss_build
c_func
(paren
id|snd_mixer_oss_t
op_star
id|mixer
)paren
(brace
r_static
r_struct
id|snd_mixer_oss_assign_table
id|table
(braket
)braket
op_assign
(brace
(brace
id|SOUND_MIXER_VOLUME
comma
l_string|&quot;Master&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_VOLUME
comma
l_string|&quot;Front&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_BASS
comma
l_string|&quot;Tone Control - Bass&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_TREBLE
comma
l_string|&quot;Tone Control - Treble&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_SYNTH
comma
l_string|&quot;Synth&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_SYNTH
comma
l_string|&quot;FM&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_SYNTH
comma
l_string|&quot;Music&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_PCM
comma
l_string|&quot;PCM&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_SPEAKER
comma
l_string|&quot;PC Speaker&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_LINE
comma
l_string|&quot;Line&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_MIC
comma
l_string|&quot;Mic&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_CD
comma
l_string|&quot;CD&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_IMIX
comma
l_string|&quot;Monitor Mix&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_ALTPCM
comma
l_string|&quot;PCM&quot;
comma
l_int|1
)brace
comma
(brace
id|SOUND_MIXER_ALTPCM
comma
l_string|&quot;Headphone&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_ALTPCM
comma
l_string|&quot;Wave&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_RECLEV
comma
l_string|&quot;-- nothing --&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_IGAIN
comma
l_string|&quot;Capture&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_OGAIN
comma
l_string|&quot;Playback&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_LINE1
comma
l_string|&quot;Aux&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_LINE2
comma
l_string|&quot;Aux&quot;
comma
l_int|1
)brace
comma
(brace
id|SOUND_MIXER_LINE3
comma
l_string|&quot;Aux&quot;
comma
l_int|2
)brace
comma
(brace
id|SOUND_MIXER_DIGITAL1
comma
l_string|&quot;Digital&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_DIGITAL1
comma
l_string|&quot;IEC958&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_DIGITAL1
comma
l_string|&quot;IEC958 Optical&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_DIGITAL1
comma
l_string|&quot;IEC958 Coaxial&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_DIGITAL2
comma
l_string|&quot;Digital&quot;
comma
l_int|1
)brace
comma
(brace
id|SOUND_MIXER_DIGITAL3
comma
l_string|&quot;Digital&quot;
comma
l_int|2
)brace
comma
(brace
id|SOUND_MIXER_PHONEIN
comma
l_string|&quot;Phone&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_PHONEOUT
comma
l_string|&quot;Master Mono&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_PHONEOUT
comma
l_string|&quot;Phone&quot;
comma
l_int|0
)brace
comma
multiline_comment|/* fallback */
(brace
id|SOUND_MIXER_VIDEO
comma
l_string|&quot;Video&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_RADIO
comma
l_string|&quot;Radio&quot;
comma
l_int|0
)brace
comma
(brace
id|SOUND_MIXER_MONITOR
comma
l_string|&quot;Monitor&quot;
comma
l_int|0
)brace
)brace
suffix:semicolon
r_int
r_int
id|idx
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|ARRAY_SIZE
c_func
(paren
id|table
)paren
suffix:semicolon
id|idx
op_increment
)paren
id|snd_mixer_oss_build_input
c_func
(paren
id|mixer
comma
op_amp
id|table
(braket
id|idx
)braket
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mixer-&gt;mask_recsrc
)paren
(brace
id|mixer-&gt;get_recsrc
op_assign
id|snd_mixer_oss_get_recsrc2
suffix:semicolon
id|mixer-&gt;put_recsrc
op_assign
id|snd_mixer_oss_put_recsrc2
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; *&n; */
DECL|function|snd_mixer_oss_free1
r_static
r_int
id|snd_mixer_oss_free1
c_func
(paren
r_void
op_star
r_private
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
op_assign
r_private
suffix:semicolon
id|snd_card_t
op_star
id|card
suffix:semicolon
r_int
id|idx
suffix:semicolon
id|snd_assert
c_func
(paren
id|mixer
op_ne
l_int|NULL
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|card
op_assign
id|mixer-&gt;card
suffix:semicolon
id|snd_assert
c_func
(paren
id|mixer
op_eq
id|card-&gt;mixer_oss
comma
r_return
op_minus
id|ENXIO
)paren
suffix:semicolon
id|card-&gt;mixer_oss
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_OSS_MAX_MIXERS
suffix:semicolon
id|idx
op_increment
)paren
(brace
id|snd_mixer_oss_slot_t
op_star
id|chn
op_assign
op_amp
id|mixer-&gt;slots
(braket
id|idx
)braket
suffix:semicolon
r_if
c_cond
(paren
id|chn-&gt;private_free
)paren
id|chn
op_member_access_from_pointer
id|private_free
c_func
(paren
id|chn
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|mixer
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|snd_mixer_oss_notify_handler
r_static
r_int
id|snd_mixer_oss_notify_handler
c_func
(paren
id|snd_card_t
op_star
id|card
comma
r_int
id|cmd
)paren
(brace
id|snd_mixer_oss_t
op_star
id|mixer
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|SND_MIXER_OSS_NOTIFY_REGISTER
)paren
(brace
r_char
id|name
(braket
l_int|128
)braket
suffix:semicolon
r_int
id|idx
comma
id|err
suffix:semicolon
id|mixer
op_assign
id|kcalloc
c_func
(paren
l_int|2
comma
r_sizeof
(paren
op_star
id|mixer
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|mixer-&gt;reg_mutex
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;mixer%i%i&quot;
comma
id|card-&gt;number
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_register_oss_device
c_func
(paren
id|SNDRV_OSS_DEVICE_TYPE_MIXER
comma
id|card
comma
l_int|0
comma
op_amp
id|snd_mixer_oss_reg
comma
id|name
)paren
)paren
OL
l_int|0
)paren
(brace
id|snd_printk
c_func
(paren
l_string|&quot;unable to register OSS mixer device %i:%i&bslash;n&quot;
comma
id|card-&gt;number
comma
l_int|0
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|mixer
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|mixer-&gt;oss_dev_alloc
op_assign
l_int|1
suffix:semicolon
id|mixer-&gt;card
op_assign
id|card
suffix:semicolon
r_if
c_cond
(paren
op_star
id|card-&gt;mixername
)paren
id|strlcpy
c_func
(paren
id|mixer-&gt;name
comma
id|card-&gt;mixername
comma
r_sizeof
(paren
id|mixer-&gt;name
)paren
)paren
suffix:semicolon
r_else
id|strlcpy
c_func
(paren
id|mixer-&gt;name
comma
id|name
comma
r_sizeof
(paren
id|mixer-&gt;name
)paren
)paren
suffix:semicolon
macro_line|#ifdef SNDRV_OSS_INFO_DEV_MIXERS
id|snd_oss_info_register
c_func
(paren
id|SNDRV_OSS_INFO_DEV_MIXERS
comma
id|card-&gt;number
comma
id|mixer-&gt;name
)paren
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_OSS_MAX_MIXERS
suffix:semicolon
id|idx
op_increment
)paren
id|mixer-&gt;slots
(braket
id|idx
)braket
dot
id|number
op_assign
id|idx
suffix:semicolon
id|card-&gt;mixer_oss
op_assign
id|mixer
suffix:semicolon
id|snd_mixer_oss_build
c_func
(paren
id|mixer
)paren
suffix:semicolon
id|snd_mixer_oss_proc_init
c_func
(paren
id|mixer
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cmd
op_eq
id|SND_MIXER_OSS_NOTIFY_DISCONNECT
)paren
(brace
id|mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
op_logical_or
op_logical_neg
id|mixer-&gt;oss_dev_alloc
)paren
r_return
l_int|0
suffix:semicolon
id|snd_unregister_oss_device
c_func
(paren
id|SNDRV_OSS_DEVICE_TYPE_MIXER
comma
id|mixer-&gt;card
comma
l_int|0
)paren
suffix:semicolon
id|mixer-&gt;oss_dev_alloc
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* free */
id|mixer
op_assign
id|card-&gt;mixer_oss
suffix:semicolon
r_if
c_cond
(paren
id|mixer
op_eq
l_int|NULL
)paren
r_return
l_int|0
suffix:semicolon
macro_line|#ifdef SNDRV_OSS_INFO_DEV_MIXERS
id|snd_oss_info_unregister
c_func
(paren
id|SNDRV_OSS_INFO_DEV_MIXERS
comma
id|mixer-&gt;card-&gt;number
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|mixer-&gt;oss_dev_alloc
)paren
id|snd_unregister_oss_device
c_func
(paren
id|SNDRV_OSS_DEVICE_TYPE_MIXER
comma
id|mixer-&gt;card
comma
l_int|0
)paren
suffix:semicolon
id|snd_mixer_oss_proc_done
c_func
(paren
id|mixer
)paren
suffix:semicolon
r_return
id|snd_mixer_oss_free1
c_func
(paren
id|mixer
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_mixer_oss_init
r_static
r_int
id|__init
id|alsa_mixer_oss_init
c_func
(paren
r_void
)paren
(brace
r_int
id|idx
suffix:semicolon
id|snd_mixer_oss_notify_callback
op_assign
id|snd_mixer_oss_notify_handler
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_CARDS
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_cards
(braket
id|idx
)braket
)paren
id|snd_mixer_oss_notify_handler
c_func
(paren
id|snd_cards
(braket
id|idx
)braket
comma
id|SND_MIXER_OSS_NOTIFY_REGISTER
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|alsa_mixer_oss_exit
r_static
r_void
id|__exit
id|alsa_mixer_oss_exit
c_func
(paren
r_void
)paren
(brace
r_int
id|idx
suffix:semicolon
id|snd_mixer_oss_notify_callback
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|SNDRV_CARDS
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_if
c_cond
(paren
id|snd_cards
(braket
id|idx
)braket
)paren
id|snd_mixer_oss_notify_handler
c_func
(paren
id|snd_cards
(braket
id|idx
)braket
comma
id|SND_MIXER_OSS_NOTIFY_FREE
)paren
suffix:semicolon
)brace
)brace
id|module_init
c_func
(paren
id|alsa_mixer_oss_init
)paren
id|module_exit
c_func
(paren
id|alsa_mixer_oss_exit
)paren
id|EXPORT_SYMBOL
c_func
(paren
id|snd_mixer_oss_ioctl_card
)paren
suffix:semicolon
eof
