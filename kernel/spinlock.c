multiline_comment|/*&n; * Copyright (2004) Linus Torvalds&n; *&n; * Author: Zwane Mwaikambo &lt;zwane@fsmlabs.com&gt;&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/linkage.h&gt;
macro_line|#include &lt;linux/preempt.h&gt;
macro_line|#include &lt;linux/spinlock.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/module.h&gt;
DECL|function|_spin_trylock
r_int
id|__lockfunc
id|_spin_trylock
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|_raw_spin_trylock
c_func
(paren
id|lock
)paren
)paren
r_return
l_int|1
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|_spin_trylock
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_trylock
)paren
suffix:semicolon
DECL|function|_write_trylock
r_int
id|__lockfunc
id|_write_trylock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|_raw_write_trylock
c_func
(paren
id|lock
)paren
)paren
r_return
l_int|1
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|_write_trylock
id|EXPORT_SYMBOL
c_func
(paren
id|_write_trylock
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_SMP) &amp;&amp; defined(CONFIG_PREEMPT)
DECL|function|_spin_lock
r_void
id|__lockfunc
id|_spin_lock
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|_raw_spin_trylock
c_func
(paren
id|lock
)paren
)paren
)paren
id|__preempt_spin_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|function|_write_lock
r_void
id|__lockfunc
id|_write_lock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|_raw_write_trylock
c_func
(paren
id|lock
)paren
)paren
)paren
id|__preempt_write_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
macro_line|#else
DECL|function|_spin_lock
r_void
id|__lockfunc
id|_spin_lock
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_spin_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|function|_write_lock
r_void
id|__lockfunc
id|_write_lock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_write_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|variable|_spin_lock
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_lock
)paren
suffix:semicolon
DECL|variable|_write_lock
id|EXPORT_SYMBOL
c_func
(paren
id|_write_lock
)paren
suffix:semicolon
DECL|function|_read_lock
r_void
id|__lockfunc
id|_read_lock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_read_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_read_lock
id|EXPORT_SYMBOL
c_func
(paren
id|_read_lock
)paren
suffix:semicolon
DECL|function|_spin_unlock
r_void
id|__lockfunc
id|_spin_unlock
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|_raw_spin_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_spin_unlock
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_unlock
)paren
suffix:semicolon
DECL|function|_write_unlock
r_void
id|__lockfunc
id|_write_unlock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_write_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_write_unlock
id|EXPORT_SYMBOL
c_func
(paren
id|_write_unlock
)paren
suffix:semicolon
DECL|function|_read_unlock
r_void
id|__lockfunc
id|_read_unlock
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_read_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_read_unlock
id|EXPORT_SYMBOL
c_func
(paren
id|_read_unlock
)paren
suffix:semicolon
DECL|function|_spin_lock_irqsave
r_int
r_int
id|__lockfunc
id|_spin_lock_irqsave
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|local_irq_save
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_spin_lock_flags
c_func
(paren
id|lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|variable|_spin_lock_irqsave
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_lock_irqsave
)paren
suffix:semicolon
DECL|function|_spin_lock_irq
r_void
id|__lockfunc
id|_spin_lock_irq
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_spin_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_spin_lock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_lock_irq
)paren
suffix:semicolon
DECL|function|_spin_lock_bh
r_void
id|__lockfunc
id|_spin_lock_bh
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|local_bh_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_spin_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_spin_lock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_lock_bh
)paren
suffix:semicolon
DECL|function|_read_lock_irqsave
r_int
r_int
id|__lockfunc
id|_read_lock_irqsave
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|local_irq_save
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_read_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|variable|_read_lock_irqsave
id|EXPORT_SYMBOL
c_func
(paren
id|_read_lock_irqsave
)paren
suffix:semicolon
DECL|function|_read_lock_irq
r_void
id|__lockfunc
id|_read_lock_irq
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_read_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_read_lock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_read_lock_irq
)paren
suffix:semicolon
DECL|function|_read_lock_bh
r_void
id|__lockfunc
id|_read_lock_bh
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|local_bh_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_read_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_read_lock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_read_lock_bh
)paren
suffix:semicolon
DECL|function|_write_lock_irqsave
r_int
r_int
id|__lockfunc
id|_write_lock_irqsave
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|local_irq_save
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_write_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|variable|_write_lock_irqsave
id|EXPORT_SYMBOL
c_func
(paren
id|_write_lock_irqsave
)paren
suffix:semicolon
DECL|function|_write_lock_irq
r_void
id|__lockfunc
id|_write_lock_irq
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_write_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_write_lock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_write_lock_irq
)paren
suffix:semicolon
DECL|function|_write_lock_bh
r_void
id|__lockfunc
id|_write_lock_bh
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|local_bh_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
id|_raw_write_lock
c_func
(paren
id|lock
)paren
suffix:semicolon
)brace
DECL|variable|_write_lock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_write_lock_bh
)paren
suffix:semicolon
DECL|function|_spin_unlock_irqrestore
r_void
id|__lockfunc
id|_spin_unlock_irqrestore
c_func
(paren
id|spinlock_t
op_star
id|lock
comma
r_int
r_int
id|flags
)paren
(brace
id|_raw_spin_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_restore
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_spin_unlock_irqrestore
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_unlock_irqrestore
)paren
suffix:semicolon
DECL|function|_spin_unlock_irq
r_void
id|__lockfunc
id|_spin_unlock_irq
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|_raw_spin_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_enable
c_func
(paren
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_spin_unlock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_unlock_irq
)paren
suffix:semicolon
DECL|function|_spin_unlock_bh
r_void
id|__lockfunc
id|_spin_unlock_bh
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|_raw_spin_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
id|local_bh_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_spin_unlock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_unlock_bh
)paren
suffix:semicolon
DECL|function|_read_unlock_irqrestore
r_void
id|__lockfunc
id|_read_unlock_irqrestore
c_func
(paren
id|rwlock_t
op_star
id|lock
comma
r_int
r_int
id|flags
)paren
(brace
id|_raw_read_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_restore
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_read_unlock_irqrestore
id|EXPORT_SYMBOL
c_func
(paren
id|_read_unlock_irqrestore
)paren
suffix:semicolon
DECL|function|_read_unlock_irq
r_void
id|__lockfunc
id|_read_unlock_irq
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_read_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_enable
c_func
(paren
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_read_unlock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_read_unlock_irq
)paren
suffix:semicolon
DECL|function|_read_unlock_bh
r_void
id|__lockfunc
id|_read_unlock_bh
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_read_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
id|local_bh_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_read_unlock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_read_unlock_bh
)paren
suffix:semicolon
DECL|function|_write_unlock_irqrestore
r_void
id|__lockfunc
id|_write_unlock_irqrestore
c_func
(paren
id|rwlock_t
op_star
id|lock
comma
r_int
r_int
id|flags
)paren
(brace
id|_raw_write_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_restore
c_func
(paren
id|flags
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_write_unlock_irqrestore
id|EXPORT_SYMBOL
c_func
(paren
id|_write_unlock_irqrestore
)paren
suffix:semicolon
DECL|function|_write_unlock_irq
r_void
id|__lockfunc
id|_write_unlock_irq
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_write_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|local_irq_enable
c_func
(paren
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_write_unlock_irq
id|EXPORT_SYMBOL
c_func
(paren
id|_write_unlock_irq
)paren
suffix:semicolon
DECL|function|_write_unlock_bh
r_void
id|__lockfunc
id|_write_unlock_bh
c_func
(paren
id|rwlock_t
op_star
id|lock
)paren
(brace
id|_raw_write_unlock
c_func
(paren
id|lock
)paren
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
id|local_bh_enable
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|_write_unlock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_write_unlock_bh
)paren
suffix:semicolon
DECL|function|_spin_trylock_bh
r_int
id|__lockfunc
id|_spin_trylock_bh
c_func
(paren
id|spinlock_t
op_star
id|lock
)paren
(brace
id|local_bh_disable
c_func
(paren
)paren
suffix:semicolon
id|preempt_disable
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|_raw_spin_trylock
c_func
(paren
id|lock
)paren
)paren
r_return
l_int|1
suffix:semicolon
id|preempt_enable
c_func
(paren
)paren
suffix:semicolon
id|local_bh_enable
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|_spin_trylock_bh
id|EXPORT_SYMBOL
c_func
(paren
id|_spin_trylock_bh
)paren
suffix:semicolon
eof
