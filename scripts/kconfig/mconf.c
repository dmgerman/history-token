multiline_comment|/*&n; * Copyright (C) 2002 Roman Zippel &lt;zippel@linux-m68k.org&gt;&n; * Released under the terms of the GNU GPL v2.0.&n; *&n; * Introduced single menu mode (show all sub-menus in one large tree).&n; * 2002-11-06 Petr Baudis &lt;pasky@ucw.cz&gt;&n; */
macro_line|#include &lt;sys/ioctl.h&gt;
macro_line|#include &lt;sys/wait.h&gt;
macro_line|#include &lt;ctype.h&gt;
macro_line|#include &lt;errno.h&gt;
macro_line|#include &lt;fcntl.h&gt;
macro_line|#include &lt;limits.h&gt;
macro_line|#include &lt;signal.h&gt;
macro_line|#include &lt;stdarg.h&gt;
macro_line|#include &lt;stdlib.h&gt;
macro_line|#include &lt;string.h&gt;
macro_line|#include &lt;termios.h&gt;
macro_line|#include &lt;unistd.h&gt;
macro_line|#include &lt;regex.h&gt;
DECL|macro|LKC_DIRECT_LINK
mdefine_line|#define LKC_DIRECT_LINK
macro_line|#include &quot;lkc.h&quot;
DECL|variable|menu_backtitle
r_static
r_char
id|menu_backtitle
(braket
l_int|128
)braket
suffix:semicolon
DECL|variable|menu_instructions
r_static
r_const
r_char
id|menu_instructions
(braket
)braket
op_assign
l_string|&quot;Arrow keys navigate the menu.  &quot;
l_string|&quot;&lt;Enter&gt; selects submenus ---&gt;.  &quot;
l_string|&quot;Highlighted letters are hotkeys.  &quot;
l_string|&quot;Pressing &lt;Y&gt; includes, &lt;N&gt; excludes, &lt;M&gt; modularizes features.  &quot;
l_string|&quot;Press &lt;Esc&gt;&lt;Esc&gt; to exit, &lt;?&gt; for Help, &lt;/&gt; for Search.  &quot;
l_string|&quot;Legend: [*] built-in  [ ] excluded  &lt;M&gt; module  &lt; &gt; module capable&quot;
comma
DECL|variable|radiolist_instructions
id|radiolist_instructions
(braket
)braket
op_assign
l_string|&quot;Use the arrow keys to navigate this window or &quot;
l_string|&quot;press the hotkey of the item you wish to select &quot;
l_string|&quot;followed by the &lt;SPACE BAR&gt;. &quot;
l_string|&quot;Press &lt;?&gt; for additional information about this option.&quot;
comma
DECL|variable|inputbox_instructions_int
id|inputbox_instructions_int
(braket
)braket
op_assign
l_string|&quot;Please enter a decimal value. &quot;
l_string|&quot;Fractions will not be accepted.  &quot;
l_string|&quot;Use the &lt;TAB&gt; key to move from the input field to the buttons below it.&quot;
comma
DECL|variable|inputbox_instructions_hex
id|inputbox_instructions_hex
(braket
)braket
op_assign
l_string|&quot;Please enter a hexadecimal value. &quot;
l_string|&quot;Use the &lt;TAB&gt; key to move from the input field to the buttons below it.&quot;
comma
DECL|variable|inputbox_instructions_string
id|inputbox_instructions_string
(braket
)braket
op_assign
l_string|&quot;Please enter a string value. &quot;
l_string|&quot;Use the &lt;TAB&gt; key to move from the input field to the buttons below it.&quot;
comma
DECL|variable|setmod_text
id|setmod_text
(braket
)braket
op_assign
l_string|&quot;This feature depends on another which has been configured as a module.&bslash;n&quot;
l_string|&quot;As a result, this feature will be built as a module.&quot;
comma
DECL|variable|nohelp_text
id|nohelp_text
(braket
)braket
op_assign
l_string|&quot;There is no help available for this kernel option.&bslash;n&quot;
comma
DECL|variable|load_config_text
id|load_config_text
(braket
)braket
op_assign
l_string|&quot;Enter the name of the configuration file you wish to load.  &quot;
l_string|&quot;Accept the name shown to restore the configuration you &quot;
l_string|&quot;last retrieved.  Leave blank to abort.&quot;
comma
DECL|variable|load_config_help
id|load_config_help
(braket
)braket
op_assign
l_string|&quot;&bslash;n&quot;
l_string|&quot;For various reasons, one may wish to keep several different kernel&bslash;n&quot;
l_string|&quot;configurations available on a single machine.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;If you have saved a previous configuration in a file other than the&bslash;n&quot;
l_string|&quot;kernel&squot;s default, entering the name of the file here will allow you&bslash;n&quot;
l_string|&quot;to modify that configuration.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;If you are uncertain, then you have probably never used alternate&bslash;n&quot;
l_string|&quot;configuration files.  You should therefor leave this blank to abort.&bslash;n&quot;
comma
DECL|variable|save_config_text
id|save_config_text
(braket
)braket
op_assign
l_string|&quot;Enter a filename to which this configuration should be saved &quot;
l_string|&quot;as an alternate.  Leave blank to abort.&quot;
comma
DECL|variable|save_config_help
id|save_config_help
(braket
)braket
op_assign
l_string|&quot;&bslash;n&quot;
l_string|&quot;For various reasons, one may wish to keep different kernel&bslash;n&quot;
l_string|&quot;configurations available on a single machine.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;Entering a file name here will allow you to later retrieve, modify&bslash;n&quot;
l_string|&quot;and use the current configuration as an alternate to whatever&bslash;n&quot;
l_string|&quot;configuration options you have selected at that time.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;If you are uncertain what all this means then you should probably&bslash;n&quot;
l_string|&quot;leave this blank.&bslash;n&quot;
suffix:semicolon
DECL|variable|buf
DECL|variable|bufptr
r_static
r_int
r_char
id|buf
(braket
l_int|4096
)braket
comma
op_star
id|bufptr
op_assign
id|buf
suffix:semicolon
DECL|variable|input_buf
r_static
r_int
r_char
id|input_buf
(braket
l_int|4096
)braket
suffix:semicolon
DECL|variable|filename
r_static
r_char
id|filename
(braket
id|PATH_MAX
op_plus
l_int|1
)braket
op_assign
l_string|&quot;.config&quot;
suffix:semicolon
DECL|variable|args
DECL|variable|argptr
r_static
r_char
op_star
id|args
(braket
l_int|1024
)braket
comma
op_star
op_star
id|argptr
op_assign
id|args
suffix:semicolon
DECL|variable|indent
r_static
r_int
id|indent
suffix:semicolon
DECL|variable|ios_org
r_static
r_struct
id|termios
id|ios_org
suffix:semicolon
DECL|variable|rows
DECL|variable|cols
r_static
r_int
id|rows
op_assign
l_int|0
comma
id|cols
op_assign
l_int|0
suffix:semicolon
DECL|variable|current_menu
r_static
r_struct
id|menu
op_star
id|current_menu
suffix:semicolon
DECL|variable|child_count
r_static
r_int
id|child_count
suffix:semicolon
DECL|variable|do_resize
r_static
r_int
id|do_resize
suffix:semicolon
DECL|variable|single_menu_mode
r_static
r_int
id|single_menu_mode
suffix:semicolon
r_static
r_void
id|conf
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
suffix:semicolon
r_static
r_void
id|conf_choice
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
suffix:semicolon
r_static
r_void
id|conf_string
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
suffix:semicolon
r_static
r_void
id|conf_load
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|conf_save
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|show_textbox
c_func
(paren
r_const
r_char
op_star
id|title
comma
r_const
r_char
op_star
id|text
comma
r_int
id|r
comma
r_int
id|c
)paren
suffix:semicolon
r_static
r_void
id|show_helptext
c_func
(paren
r_const
r_char
op_star
id|title
comma
r_const
r_char
op_star
id|text
)paren
suffix:semicolon
r_static
r_void
id|show_help
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
suffix:semicolon
r_static
r_void
id|show_readme
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|show_file
c_func
(paren
r_const
r_char
op_star
id|filename
comma
r_const
r_char
op_star
id|title
comma
r_int
id|r
comma
r_int
id|c
)paren
suffix:semicolon
r_static
r_void
id|show_expr
c_func
(paren
r_struct
id|menu
op_star
id|menu
comma
id|FILE
op_star
id|fp
)paren
suffix:semicolon
r_static
r_void
id|search_conf
c_func
(paren
r_char
op_star
id|pattern
)paren
suffix:semicolon
r_static
r_int
id|regex_match
c_func
(paren
r_const
r_char
op_star
id|string
comma
id|regex_t
op_star
id|re
)paren
suffix:semicolon
r_static
r_void
id|cprint_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|cprint1
c_func
(paren
r_const
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
suffix:semicolon
r_static
r_void
id|cprint_done
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|cprint
c_func
(paren
r_const
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
suffix:semicolon
DECL|function|init_wsize
r_static
r_void
id|init_wsize
c_func
(paren
r_void
)paren
(brace
r_struct
id|winsize
id|ws
suffix:semicolon
r_char
op_star
id|env
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ioctl
c_func
(paren
id|STDIN_FILENO
comma
id|TIOCGWINSZ
comma
op_amp
id|ws
)paren
)paren
(brace
id|rows
op_assign
id|ws.ws_row
suffix:semicolon
id|cols
op_assign
id|ws.ws_col
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|rows
)paren
(brace
id|env
op_assign
id|getenv
c_func
(paren
l_string|&quot;LINES&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|env
)paren
id|rows
op_assign
id|atoi
c_func
(paren
id|env
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rows
)paren
id|rows
op_assign
l_int|24
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|cols
)paren
(brace
id|env
op_assign
id|getenv
c_func
(paren
l_string|&quot;COLUMNS&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|env
)paren
id|cols
op_assign
id|atoi
c_func
(paren
id|env
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cols
)paren
id|cols
op_assign
l_int|80
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rows
OL
l_int|19
op_logical_or
id|cols
OL
l_int|80
)paren
(brace
id|fprintf
c_func
(paren
id|stderr
comma
l_string|&quot;Your display is too small to run Menuconfig!&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
c_func
(paren
id|stderr
comma
l_string|&quot;It must be at least 19 lines by 80 columns.&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|rows
op_sub_assign
l_int|4
suffix:semicolon
id|cols
op_sub_assign
l_int|5
suffix:semicolon
)brace
DECL|function|cprint_init
r_static
r_void
id|cprint_init
c_func
(paren
r_void
)paren
(brace
id|bufptr
op_assign
id|buf
suffix:semicolon
id|argptr
op_assign
id|args
suffix:semicolon
id|memset
c_func
(paren
id|args
comma
l_int|0
comma
r_sizeof
(paren
id|args
)paren
)paren
suffix:semicolon
id|indent
op_assign
l_int|0
suffix:semicolon
id|child_count
op_assign
l_int|0
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;./scripts/lxdialog/lxdialog&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--backtitle&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
id|menu_backtitle
)paren
suffix:semicolon
)brace
DECL|function|cprint1
r_static
r_int
id|cprint1
c_func
(paren
r_const
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
(brace
id|va_list
id|ap
suffix:semicolon
r_int
id|res
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|argptr
)paren
op_star
id|argptr
op_assign
id|bufptr
suffix:semicolon
id|va_start
c_func
(paren
id|ap
comma
id|fmt
)paren
suffix:semicolon
id|res
op_assign
id|vsprintf
c_func
(paren
id|bufptr
comma
id|fmt
comma
id|ap
)paren
suffix:semicolon
id|va_end
c_func
(paren
id|ap
)paren
suffix:semicolon
id|bufptr
op_add_assign
id|res
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
DECL|function|cprint_done
r_static
r_void
id|cprint_done
c_func
(paren
r_void
)paren
(brace
op_star
id|bufptr
op_increment
op_assign
l_int|0
suffix:semicolon
id|argptr
op_increment
suffix:semicolon
)brace
DECL|function|cprint
r_static
r_int
id|cprint
c_func
(paren
r_const
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
(brace
id|va_list
id|ap
suffix:semicolon
r_int
id|res
suffix:semicolon
op_star
id|argptr
op_increment
op_assign
id|bufptr
suffix:semicolon
id|va_start
c_func
(paren
id|ap
comma
id|fmt
)paren
suffix:semicolon
id|res
op_assign
id|vsprintf
c_func
(paren
id|bufptr
comma
id|fmt
comma
id|ap
)paren
suffix:semicolon
id|va_end
c_func
(paren
id|ap
)paren
suffix:semicolon
id|bufptr
op_add_assign
id|res
suffix:semicolon
op_star
id|bufptr
op_increment
op_assign
l_int|0
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
DECL|variable|pid
id|pid_t
id|pid
suffix:semicolon
DECL|function|winch_handler
r_static
r_void
id|winch_handler
c_func
(paren
r_int
id|sig
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|do_resize
)paren
(brace
id|kill
c_func
(paren
id|pid
comma
id|SIGINT
)paren
suffix:semicolon
id|do_resize
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|exec_conf
r_static
r_int
id|exec_conf
c_func
(paren
r_void
)paren
(brace
r_int
id|pipefd
(braket
l_int|2
)braket
comma
id|stat
comma
id|size
suffix:semicolon
r_struct
id|sigaction
id|sa
suffix:semicolon
id|sigset_t
id|sset
comma
id|osset
suffix:semicolon
id|sigemptyset
c_func
(paren
op_amp
id|sset
)paren
suffix:semicolon
id|sigaddset
c_func
(paren
op_amp
id|sset
comma
id|SIGINT
)paren
suffix:semicolon
id|sigprocmask
c_func
(paren
id|SIG_BLOCK
comma
op_amp
id|sset
comma
op_amp
id|osset
)paren
suffix:semicolon
id|signal
c_func
(paren
id|SIGINT
comma
id|SIG_DFL
)paren
suffix:semicolon
id|sa.sa_handler
op_assign
id|winch_handler
suffix:semicolon
id|sigemptyset
c_func
(paren
op_amp
id|sa.sa_mask
)paren
suffix:semicolon
id|sa.sa_flags
op_assign
id|SA_RESTART
suffix:semicolon
id|sigaction
c_func
(paren
id|SIGWINCH
comma
op_amp
id|sa
comma
l_int|NULL
)paren
suffix:semicolon
op_star
id|argptr
op_increment
op_assign
l_int|NULL
suffix:semicolon
id|pipe
c_func
(paren
id|pipefd
)paren
suffix:semicolon
id|pid
op_assign
id|fork
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pid
op_eq
l_int|0
)paren
(brace
id|sigprocmask
c_func
(paren
id|SIG_SETMASK
comma
op_amp
id|osset
comma
l_int|NULL
)paren
suffix:semicolon
id|dup2
c_func
(paren
id|pipefd
(braket
l_int|1
)braket
comma
l_int|2
)paren
suffix:semicolon
id|close
c_func
(paren
id|pipefd
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|close
c_func
(paren
id|pipefd
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|execv
c_func
(paren
id|args
(braket
l_int|0
)braket
comma
id|args
)paren
suffix:semicolon
id|_exit
c_func
(paren
id|EXIT_FAILURE
)paren
suffix:semicolon
)brace
id|close
c_func
(paren
id|pipefd
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|bufptr
op_assign
id|input_buf
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|size
op_assign
id|input_buf
op_plus
r_sizeof
(paren
id|input_buf
)paren
op_minus
id|bufptr
suffix:semicolon
id|size
op_assign
id|read
c_func
(paren
id|pipefd
(braket
l_int|0
)braket
comma
id|bufptr
comma
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|size
op_le
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|size
OL
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|errno
op_eq
id|EINTR
op_logical_or
id|errno
op_eq
id|EAGAIN
)paren
r_continue
suffix:semicolon
id|perror
c_func
(paren
l_string|&quot;read&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|bufptr
op_add_assign
id|size
suffix:semicolon
)brace
op_star
id|bufptr
op_increment
op_assign
l_int|0
suffix:semicolon
id|close
c_func
(paren
id|pipefd
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|waitpid
c_func
(paren
id|pid
comma
op_amp
id|stat
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|do_resize
)paren
(brace
id|init_wsize
c_func
(paren
)paren
suffix:semicolon
id|do_resize
op_assign
l_int|0
suffix:semicolon
id|sigprocmask
c_func
(paren
id|SIG_SETMASK
comma
op_amp
id|osset
comma
l_int|NULL
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|WIFSIGNALED
c_func
(paren
id|stat
)paren
)paren
(brace
id|printf
c_func
(paren
l_string|&quot;&bslash;finterrupted(%d)&bslash;n&quot;
comma
id|WTERMSIG
c_func
(paren
id|stat
)paren
)paren
suffix:semicolon
m_exit
(paren
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#if 0
id|printf
c_func
(paren
l_string|&quot;&bslash;fexit state: %d&bslash;nexit data: &squot;%s&squot;&bslash;n&quot;
comma
id|WEXITSTATUS
c_func
(paren
id|stat
)paren
comma
id|input_buf
)paren
suffix:semicolon
id|sleep
c_func
(paren
l_int|1
)paren
suffix:semicolon
macro_line|#endif
id|sigpending
c_func
(paren
op_amp
id|sset
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sigismember
c_func
(paren
op_amp
id|sset
comma
id|SIGINT
)paren
)paren
(brace
id|printf
c_func
(paren
l_string|&quot;&bslash;finterrupted&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|sigprocmask
c_func
(paren
id|SIG_SETMASK
comma
op_amp
id|osset
comma
l_int|NULL
)paren
suffix:semicolon
r_return
id|WEXITSTATUS
c_func
(paren
id|stat
)paren
suffix:semicolon
)brace
DECL|function|regex_match
r_static
r_int
id|regex_match
c_func
(paren
r_const
r_char
op_star
id|string
comma
id|regex_t
op_star
id|re
)paren
(brace
r_int
id|rc
suffix:semicolon
id|rc
op_assign
id|regexec
c_func
(paren
id|re
comma
id|string
comma
(paren
r_int
)paren
l_int|0
comma
l_int|NULL
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|show_expr
r_static
r_void
id|show_expr
c_func
(paren
r_struct
id|menu
op_star
id|menu
comma
id|FILE
op_star
id|fp
)paren
(brace
r_bool
id|hit
op_assign
l_bool|false
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;Depends:&bslash;n &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|menu-&gt;prompt-&gt;visible.expr
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|hit
op_assign
l_bool|true
suffix:semicolon
id|expr_fprint
c_func
(paren
id|menu-&gt;prompt-&gt;visible.expr
comma
id|fp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;None&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|menu-&gt;sym
)paren
(brace
r_struct
id|property
op_star
id|prop
suffix:semicolon
id|hit
op_assign
l_bool|false
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;&bslash;nSelects:&bslash;n &quot;
)paren
suffix:semicolon
id|for_all_properties
c_func
(paren
id|menu-&gt;sym
comma
id|prop
comma
id|P_SELECT
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|hit
op_assign
l_bool|true
suffix:semicolon
id|expr_fprint
c_func
(paren
id|prop-&gt;expr
comma
id|fp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;None&quot;
)paren
suffix:semicolon
id|hit
op_assign
l_bool|false
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;&bslash;nSelected by:&bslash;n &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|menu-&gt;sym-&gt;rev_dep.expr
)paren
(brace
id|hit
op_assign
l_bool|true
suffix:semicolon
id|expr_fprint
c_func
(paren
id|menu-&gt;sym-&gt;rev_dep.expr
comma
id|fp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;None&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|search_conf
r_static
r_void
id|search_conf
c_func
(paren
r_char
op_star
id|pattern
)paren
(brace
r_struct
id|symbol
op_star
id|sym
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|menu
op_star
id|menu
(braket
l_int|32
)braket
op_assign
(brace
l_int|0
)brace
suffix:semicolon
r_struct
id|property
op_star
id|prop
op_assign
l_int|NULL
suffix:semicolon
id|FILE
op_star
id|fp
op_assign
l_int|NULL
suffix:semicolon
r_bool
id|hit
op_assign
l_bool|false
suffix:semicolon
r_int
id|i
comma
id|j
comma
id|k
comma
id|l
suffix:semicolon
id|regex_t
id|re
suffix:semicolon
r_if
c_cond
(paren
id|regcomp
c_func
(paren
op_amp
id|re
comma
id|pattern
comma
id|REG_EXTENDED
op_or
id|REG_NOSUB
)paren
)paren
r_return
suffix:semicolon
id|fp
op_assign
id|fopen
c_func
(paren
l_string|&quot;.search.tmp&quot;
comma
l_string|&quot;w&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fp
op_eq
l_int|NULL
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;fopen&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|for_all_symbols
c_func
(paren
id|i
comma
id|sym
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|sym-&gt;name
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|regex_match
c_func
(paren
id|sym-&gt;name
comma
op_amp
id|re
)paren
)paren
r_continue
suffix:semicolon
id|for_all_prompts
c_func
(paren
id|sym
comma
id|prop
)paren
(brace
r_struct
id|menu
op_star
id|submenu
op_assign
id|prop-&gt;menu
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|submenu
)paren
r_continue
suffix:semicolon
id|j
op_assign
l_int|0
suffix:semicolon
id|hit
op_assign
l_bool|false
suffix:semicolon
r_while
c_loop
(paren
id|submenu
)paren
(brace
id|menu
(braket
id|j
op_increment
)braket
op_assign
id|submenu
suffix:semicolon
id|submenu
op_assign
id|submenu-&gt;parent
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
OG
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|hit
op_assign
l_bool|true
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;%s (%s)&bslash;n&quot;
comma
id|prop-&gt;text
comma
id|sym-&gt;name
)paren
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;Location:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|k
op_assign
id|j
op_minus
l_int|2
comma
id|l
op_assign
l_int|1
suffix:semicolon
id|k
OG
l_int|0
suffix:semicolon
id|k
op_decrement
comma
id|l
op_increment
)paren
(brace
r_const
r_char
op_star
id|prompt
op_assign
id|menu_get_prompt
c_func
(paren
id|menu
(braket
id|k
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|menu
(braket
id|k
)braket
op_member_access_from_pointer
id|sym
)paren
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;%*c-&gt; %s (%s)&bslash;n&quot;
comma
id|l
comma
l_char|&squot; &squot;
comma
id|prompt
comma
id|menu
(braket
id|k
)braket
op_member_access_from_pointer
id|sym-&gt;name
)paren
suffix:semicolon
r_else
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;%*c-&gt; %s&bslash;n&quot;
comma
id|l
comma
l_char|&squot; &squot;
comma
id|prompt
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hit
)paren
(brace
id|show_expr
c_func
(paren
id|menu
(braket
l_int|0
)braket
comma
id|fp
)paren
suffix:semicolon
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;&bslash;n&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|hit
)paren
id|fprintf
c_func
(paren
id|fp
comma
l_string|&quot;No matches found.&quot;
)paren
suffix:semicolon
id|regfree
c_func
(paren
op_amp
id|re
)paren
suffix:semicolon
id|fclose
c_func
(paren
id|fp
)paren
suffix:semicolon
id|show_file
c_func
(paren
l_string|&quot;.search.tmp&quot;
comma
l_string|&quot;Search Results&quot;
comma
id|rows
comma
id|cols
)paren
suffix:semicolon
id|unlink
c_func
(paren
l_string|&quot;.search.tmp&quot;
)paren
suffix:semicolon
)brace
DECL|function|build_conf
r_static
r_void
id|build_conf
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
(brace
r_struct
id|symbol
op_star
id|sym
suffix:semicolon
r_struct
id|property
op_star
id|prop
suffix:semicolon
r_struct
id|menu
op_star
id|child
suffix:semicolon
r_int
id|type
comma
id|tmp
comma
id|doint
op_assign
l_int|2
suffix:semicolon
id|tristate
id|val
suffix:semicolon
r_char
id|ch
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|menu_is_visible
c_func
(paren
id|menu
)paren
)paren
r_return
suffix:semicolon
id|sym
op_assign
id|menu-&gt;sym
suffix:semicolon
id|prop
op_assign
id|menu-&gt;prompt
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|sym
)paren
(brace
r_if
c_cond
(paren
id|prop
op_logical_and
id|menu
op_ne
id|current_menu
)paren
(brace
r_const
r_char
op_star
id|prompt
op_assign
id|menu_get_prompt
c_func
(paren
id|menu
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|prop-&gt;type
)paren
(brace
r_case
id|P_MENU
suffix:colon
id|child_count
op_increment
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;m%p&quot;
comma
id|menu
)paren
suffix:semicolon
r_if
c_cond
(paren
id|single_menu_mode
)paren
(brace
id|cprint1
c_func
(paren
l_string|&quot;%s%*c%s&quot;
comma
id|menu-&gt;data
ques
c_cond
l_string|&quot;--&gt;&quot;
suffix:colon
l_string|&quot;++&gt;&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|prompt
)paren
suffix:semicolon
)brace
r_else
id|cprint1
c_func
(paren
l_string|&quot;   %*c%s  ---&gt;&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|prompt
)paren
suffix:semicolon
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|single_menu_mode
op_logical_and
id|menu-&gt;data
)paren
r_goto
id|conf_childs
suffix:semicolon
r_return
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|prompt
)paren
(brace
id|child_count
op_increment
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;:%p&quot;
comma
id|menu
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;---%*c%s&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|prompt
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
id|doint
op_assign
l_int|0
suffix:semicolon
r_goto
id|conf_childs
suffix:semicolon
)brace
id|type
op_assign
id|sym_get_type
c_func
(paren
id|sym
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sym_is_choice
c_func
(paren
id|sym
)paren
)paren
(brace
r_struct
id|symbol
op_star
id|def_sym
op_assign
id|sym_get_choice_value
c_func
(paren
id|sym
)paren
suffix:semicolon
r_struct
id|menu
op_star
id|def_menu
op_assign
l_int|NULL
suffix:semicolon
id|child_count
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|child
op_assign
id|menu-&gt;list
suffix:semicolon
id|child
suffix:semicolon
id|child
op_assign
id|child-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|menu_is_visible
c_func
(paren
id|child
)paren
op_logical_and
id|child-&gt;sym
op_eq
id|def_sym
)paren
id|def_menu
op_assign
id|child
suffix:semicolon
)brace
id|val
op_assign
id|sym_get_tristate_value
c_func
(paren
id|sym
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sym_is_changable
c_func
(paren
id|sym
)paren
)paren
(brace
id|cprint
c_func
(paren
l_string|&quot;t%p&quot;
comma
id|menu
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|S_BOOLEAN
suffix:colon
id|cprint1
c_func
(paren
l_string|&quot;[%c]&quot;
comma
id|val
op_eq
id|no
ques
c_cond
l_char|&squot; &squot;
suffix:colon
l_char|&squot;*&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_TRISTATE
suffix:colon
r_switch
c_cond
(paren
id|val
)paren
(brace
r_case
id|yes
suffix:colon
id|ch
op_assign
l_char|&squot;*&squot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|mod
suffix:colon
id|ch
op_assign
l_char|&squot;M&squot;
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|ch
op_assign
l_char|&squot; &squot;
suffix:semicolon
r_break
suffix:semicolon
)brace
id|cprint1
c_func
(paren
l_string|&quot;&lt;%c&gt;&quot;
comma
id|ch
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|cprint
c_func
(paren
l_string|&quot;%c%p&quot;
comma
id|def_menu
ques
c_cond
l_char|&squot;t&squot;
suffix:colon
l_char|&squot;:&squot;
comma
id|menu
)paren
suffix:semicolon
id|cprint1
c_func
(paren
l_string|&quot;   &quot;
)paren
suffix:semicolon
)brace
id|cprint1
c_func
(paren
l_string|&quot;%*c%s&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|menu_get_prompt
c_func
(paren
id|menu
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
id|yes
)paren
(brace
r_if
c_cond
(paren
id|def_menu
)paren
(brace
id|cprint1
c_func
(paren
l_string|&quot; (%s)&quot;
comma
id|menu_get_prompt
c_func
(paren
id|def_menu
)paren
)paren
suffix:semicolon
id|cprint1
c_func
(paren
l_string|&quot;  ---&gt;&quot;
)paren
suffix:semicolon
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|def_menu-&gt;list
)paren
(brace
id|indent
op_add_assign
l_int|2
suffix:semicolon
id|build_conf
c_func
(paren
id|def_menu
)paren
suffix:semicolon
id|indent
op_sub_assign
l_int|2
suffix:semicolon
)brace
)brace
r_else
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|menu
op_eq
id|current_menu
)paren
(brace
id|cprint
c_func
(paren
l_string|&quot;:%p&quot;
comma
id|menu
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;---%*c%s&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|menu_get_prompt
c_func
(paren
id|menu
)paren
)paren
suffix:semicolon
r_goto
id|conf_childs
suffix:semicolon
)brace
id|child_count
op_increment
suffix:semicolon
id|val
op_assign
id|sym_get_tristate_value
c_func
(paren
id|sym
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sym_is_choice_value
c_func
(paren
id|sym
)paren
op_logical_and
id|val
op_eq
id|yes
)paren
(brace
id|cprint
c_func
(paren
l_string|&quot;:%p&quot;
comma
id|menu
)paren
suffix:semicolon
id|cprint1
c_func
(paren
l_string|&quot;   &quot;
)paren
suffix:semicolon
)brace
r_else
(brace
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|S_BOOLEAN
suffix:colon
id|cprint
c_func
(paren
l_string|&quot;t%p&quot;
comma
id|menu
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sym_is_changable
c_func
(paren
id|sym
)paren
)paren
id|cprint1
c_func
(paren
l_string|&quot;[%c]&quot;
comma
id|val
op_eq
id|no
ques
c_cond
l_char|&squot; &squot;
suffix:colon
l_char|&squot;*&squot;
)paren
suffix:semicolon
r_else
id|cprint1
c_func
(paren
l_string|&quot;---&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_TRISTATE
suffix:colon
id|cprint
c_func
(paren
l_string|&quot;t%p&quot;
comma
id|menu
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|val
)paren
(brace
r_case
id|yes
suffix:colon
id|ch
op_assign
l_char|&squot;*&squot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|mod
suffix:colon
id|ch
op_assign
l_char|&squot;M&squot;
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|ch
op_assign
l_char|&squot; &squot;
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|sym_is_changable
c_func
(paren
id|sym
)paren
)paren
id|cprint1
c_func
(paren
l_string|&quot;&lt;%c&gt;&quot;
comma
id|ch
)paren
suffix:semicolon
r_else
id|cprint1
c_func
(paren
l_string|&quot;---&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|cprint
c_func
(paren
l_string|&quot;s%p&quot;
comma
id|menu
)paren
suffix:semicolon
id|tmp
op_assign
id|cprint1
c_func
(paren
l_string|&quot;(%s)&quot;
comma
id|sym_get_string_value
c_func
(paren
id|sym
)paren
)paren
suffix:semicolon
id|tmp
op_assign
id|indent
op_minus
id|tmp
op_plus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|tmp
OL
l_int|0
)paren
id|tmp
op_assign
l_int|0
suffix:semicolon
id|cprint1
c_func
(paren
l_string|&quot;%*c%s%s&quot;
comma
id|tmp
comma
l_char|&squot; &squot;
comma
id|menu_get_prompt
c_func
(paren
id|menu
)paren
comma
(paren
id|sym_has_value
c_func
(paren
id|sym
)paren
op_logical_or
op_logical_neg
id|sym_is_changable
c_func
(paren
id|sym
)paren
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot; (NEW)&quot;
)paren
suffix:semicolon
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
r_goto
id|conf_childs
suffix:semicolon
)brace
)brace
id|cprint1
c_func
(paren
l_string|&quot;%*c%s%s&quot;
comma
id|indent
op_plus
l_int|1
comma
l_char|&squot; &squot;
comma
id|menu_get_prompt
c_func
(paren
id|menu
)paren
comma
(paren
id|sym_has_value
c_func
(paren
id|sym
)paren
op_logical_or
op_logical_neg
id|sym_is_changable
c_func
(paren
id|sym
)paren
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot; (NEW)&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|menu-&gt;prompt-&gt;type
op_eq
id|P_MENU
)paren
(brace
id|cprint1
c_func
(paren
l_string|&quot;  ---&gt;&quot;
)paren
suffix:semicolon
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|cprint_done
c_func
(paren
)paren
suffix:semicolon
)brace
id|conf_childs
suffix:colon
id|indent
op_add_assign
id|doint
suffix:semicolon
r_for
c_loop
(paren
id|child
op_assign
id|menu-&gt;list
suffix:semicolon
id|child
suffix:semicolon
id|child
op_assign
id|child-&gt;next
)paren
id|build_conf
c_func
(paren
id|child
)paren
suffix:semicolon
id|indent
op_sub_assign
id|doint
suffix:semicolon
)brace
DECL|function|conf
r_static
r_void
id|conf
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
(brace
r_struct
id|menu
op_star
id|submenu
suffix:semicolon
r_const
r_char
op_star
id|prompt
op_assign
id|menu_get_prompt
c_func
(paren
id|menu
)paren
suffix:semicolon
r_struct
id|symbol
op_star
id|sym
suffix:semicolon
r_char
id|active_entry
(braket
l_int|40
)braket
suffix:semicolon
r_int
id|stat
comma
id|type
comma
id|i
suffix:semicolon
id|unlink
c_func
(paren
l_string|&quot;lxdialog.scrltmp&quot;
)paren
suffix:semicolon
id|active_entry
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--title&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|prompt
ques
c_cond
id|prompt
suffix:colon
l_string|&quot;Main Menu&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--menu&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
id|menu_instructions
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%d&quot;
comma
id|rows
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%d&quot;
comma
id|cols
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%d&quot;
comma
id|rows
op_minus
l_int|10
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|active_entry
)paren
suffix:semicolon
id|current_menu
op_assign
id|menu
suffix:semicolon
id|build_conf
c_func
(paren
id|menu
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|child_count
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|menu
op_eq
op_amp
id|rootmenu
)paren
(brace
id|cprint
c_func
(paren
l_string|&quot;:&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--- &quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;L&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;    Load an Alternate Configuration File&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;S&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;    Save Configuration to an Alternate File&quot;
)paren
suffix:semicolon
)brace
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_eq
l_int|26
)paren
(brace
r_char
op_star
id|pattern
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strlen
c_func
(paren
id|input_buf
)paren
)paren
r_continue
suffix:semicolon
id|pattern
op_assign
id|malloc
c_func
(paren
r_sizeof
(paren
r_char
)paren
op_star
r_sizeof
(paren
id|input_buf
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pattern
op_eq
l_int|NULL
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;malloc&quot;
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|input_buf
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
id|pattern
(braket
id|i
)braket
op_assign
id|toupper
c_func
(paren
id|input_buf
(braket
id|i
)braket
)paren
suffix:semicolon
id|pattern
(braket
id|i
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|search_conf
c_func
(paren
id|pattern
)paren
suffix:semicolon
id|free
c_func
(paren
id|pattern
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
OL
l_int|0
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_eq
l_int|1
op_logical_or
id|stat
op_eq
l_int|255
)paren
r_break
suffix:semicolon
id|type
op_assign
id|input_buf
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|type
)paren
r_continue
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|input_buf
(braket
id|i
)braket
op_logical_and
op_logical_neg
id|isspace
c_func
(paren
id|input_buf
(braket
id|i
)braket
)paren
suffix:semicolon
id|i
op_increment
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
r_sizeof
(paren
id|active_entry
)paren
)paren
id|i
op_assign
r_sizeof
(paren
id|active_entry
)paren
op_minus
l_int|1
suffix:semicolon
id|input_buf
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|active_entry
comma
id|input_buf
)paren
suffix:semicolon
id|sym
op_assign
l_int|NULL
suffix:semicolon
id|submenu
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|sscanf
c_func
(paren
id|input_buf
op_plus
l_int|1
comma
l_string|&quot;%p&quot;
comma
op_amp
id|submenu
)paren
op_eq
l_int|1
)paren
id|sym
op_assign
id|submenu-&gt;sym
suffix:semicolon
r_switch
c_cond
(paren
id|stat
)paren
(brace
r_case
l_int|0
suffix:colon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
l_char|&squot;m&squot;
suffix:colon
r_if
c_cond
(paren
id|single_menu_mode
)paren
id|submenu-&gt;data
op_assign
(paren
r_void
op_star
)paren
(paren
r_int
)paren
op_logical_neg
id|submenu-&gt;data
suffix:semicolon
r_else
id|conf
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;t&squot;
suffix:colon
r_if
c_cond
(paren
id|sym_is_choice
c_func
(paren
id|sym
)paren
op_logical_and
id|sym_get_tristate_value
c_func
(paren
id|sym
)paren
op_eq
id|yes
)paren
id|conf_choice
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|submenu-&gt;prompt-&gt;type
op_eq
id|P_MENU
)paren
id|conf
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;s&squot;
suffix:colon
id|conf_string
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;L&squot;
suffix:colon
id|conf_load
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;S&squot;
suffix:colon
id|conf_save
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|sym
)paren
id|show_help
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_else
id|show_readme
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
r_if
c_cond
(paren
id|type
op_eq
l_char|&squot;t&squot;
)paren
(brace
r_if
c_cond
(paren
id|sym_set_tristate_value
c_func
(paren
id|sym
comma
id|yes
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|sym_set_tristate_value
c_func
(paren
id|sym
comma
id|mod
)paren
)paren
id|show_textbox
c_func
(paren
l_int|NULL
comma
id|setmod_text
comma
l_int|6
comma
l_int|74
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
id|type
op_eq
l_char|&squot;t&squot;
)paren
id|sym_set_tristate_value
c_func
(paren
id|sym
comma
id|no
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
r_if
c_cond
(paren
id|type
op_eq
l_char|&squot;t&squot;
)paren
id|sym_set_tristate_value
c_func
(paren
id|sym
comma
id|mod
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
r_if
c_cond
(paren
id|type
op_eq
l_char|&squot;t&squot;
)paren
id|sym_toggle_tristate_value
c_func
(paren
id|sym
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|type
op_eq
l_char|&squot;m&squot;
)paren
id|conf
c_func
(paren
id|submenu
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
DECL|function|show_textbox
r_static
r_void
id|show_textbox
c_func
(paren
r_const
r_char
op_star
id|title
comma
r_const
r_char
op_star
id|text
comma
r_int
id|r
comma
r_int
id|c
)paren
(brace
r_int
id|fd
suffix:semicolon
id|fd
op_assign
id|creat
c_func
(paren
l_string|&quot;.help.tmp&quot;
comma
l_int|0777
)paren
suffix:semicolon
id|write
c_func
(paren
id|fd
comma
id|text
comma
id|strlen
c_func
(paren
id|text
)paren
)paren
suffix:semicolon
id|close
c_func
(paren
id|fd
)paren
suffix:semicolon
id|show_file
c_func
(paren
l_string|&quot;.help.tmp&quot;
comma
id|title
comma
id|r
comma
id|c
)paren
suffix:semicolon
id|unlink
c_func
(paren
l_string|&quot;.help.tmp&quot;
)paren
suffix:semicolon
)brace
DECL|function|show_helptext
r_static
r_void
id|show_helptext
c_func
(paren
r_const
r_char
op_star
id|title
comma
r_const
r_char
op_star
id|text
)paren
(brace
id|show_textbox
c_func
(paren
id|title
comma
id|text
comma
id|rows
comma
id|cols
)paren
suffix:semicolon
)brace
DECL|function|show_help
r_static
r_void
id|show_help
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
(brace
r_const
r_char
op_star
id|help
suffix:semicolon
r_char
op_star
id|helptext
suffix:semicolon
r_struct
id|symbol
op_star
id|sym
op_assign
id|menu-&gt;sym
suffix:semicolon
id|help
op_assign
id|sym-&gt;help
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|help
)paren
id|help
op_assign
id|nohelp_text
suffix:semicolon
r_if
c_cond
(paren
id|sym-&gt;name
)paren
(brace
id|helptext
op_assign
id|malloc
c_func
(paren
id|strlen
c_func
(paren
id|sym-&gt;name
)paren
op_plus
id|strlen
c_func
(paren
id|help
)paren
op_plus
l_int|16
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|helptext
comma
l_string|&quot;CONFIG_%s:&bslash;n&bslash;n%s&quot;
comma
id|sym-&gt;name
comma
id|help
)paren
suffix:semicolon
id|show_helptext
c_func
(paren
id|menu_get_prompt
c_func
(paren
id|menu
)paren
comma
id|helptext
)paren
suffix:semicolon
id|free
c_func
(paren
id|helptext
)paren
suffix:semicolon
)brace
r_else
id|show_helptext
c_func
(paren
id|menu_get_prompt
c_func
(paren
id|menu
)paren
comma
id|help
)paren
suffix:semicolon
)brace
DECL|function|show_readme
r_static
r_void
id|show_readme
c_func
(paren
r_void
)paren
(brace
id|show_file
c_func
(paren
l_string|&quot;scripts/README.Menuconfig&quot;
comma
l_int|NULL
comma
id|rows
comma
id|cols
)paren
suffix:semicolon
)brace
DECL|function|show_file
r_static
r_void
id|show_file
c_func
(paren
r_const
r_char
op_star
id|filename
comma
r_const
r_char
op_star
id|title
comma
r_int
id|r
comma
r_int
id|c
)paren
(brace
r_do
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|title
)paren
(brace
id|cprint
c_func
(paren
l_string|&quot;--title&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|title
)paren
suffix:semicolon
)brace
id|cprint
c_func
(paren
l_string|&quot;--textbox&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|filename
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%d&quot;
comma
id|r
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%d&quot;
comma
id|c
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|exec_conf
c_func
(paren
)paren
OL
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|conf_choice
r_static
r_void
id|conf_choice
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
(brace
r_const
r_char
op_star
id|prompt
op_assign
id|menu_get_prompt
c_func
(paren
id|menu
)paren
suffix:semicolon
r_struct
id|menu
op_star
id|child
suffix:semicolon
r_struct
id|symbol
op_star
id|active
suffix:semicolon
r_int
id|stat
suffix:semicolon
id|active
op_assign
id|sym_get_choice_value
c_func
(paren
id|menu-&gt;sym
)paren
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--title&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|prompt
ques
c_cond
id|prompt
suffix:colon
l_string|&quot;Main Menu&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--radiolist&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
id|radiolist_instructions
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;15&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;70&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;6&quot;
)paren
suffix:semicolon
id|current_menu
op_assign
id|menu
suffix:semicolon
r_for
c_loop
(paren
id|child
op_assign
id|menu-&gt;list
suffix:semicolon
id|child
suffix:semicolon
id|child
op_assign
id|child-&gt;next
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|menu_is_visible
c_func
(paren
id|child
)paren
)paren
r_continue
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%p&quot;
comma
id|child
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|menu_get_prompt
c_func
(paren
id|child
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|child-&gt;sym
op_eq
id|sym_get_choice_value
c_func
(paren
id|menu-&gt;sym
)paren
)paren
id|cprint
c_func
(paren
l_string|&quot;ON&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|child-&gt;sym
op_eq
id|active
)paren
id|cprint
c_func
(paren
l_string|&quot;SELECTED&quot;
)paren
suffix:semicolon
r_else
id|cprint
c_func
(paren
l_string|&quot;OFF&quot;
)paren
suffix:semicolon
)brace
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|stat
)paren
(brace
r_case
l_int|0
suffix:colon
r_if
c_cond
(paren
id|sscanf
c_func
(paren
id|input_buf
comma
l_string|&quot;%p&quot;
comma
op_amp
id|child
)paren
op_ne
l_int|1
)paren
r_break
suffix:semicolon
id|sym_set_tristate_value
c_func
(paren
id|child-&gt;sym
comma
id|yes
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|sscanf
c_func
(paren
id|input_buf
comma
l_string|&quot;%p&quot;
comma
op_amp
id|child
)paren
op_eq
l_int|1
)paren
(brace
id|show_help
c_func
(paren
id|child
)paren
suffix:semicolon
id|active
op_assign
id|child-&gt;sym
suffix:semicolon
)brace
r_else
id|show_help
c_func
(paren
id|menu
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|255
suffix:colon
r_return
suffix:semicolon
)brace
)brace
)brace
DECL|function|conf_string
r_static
r_void
id|conf_string
c_func
(paren
r_struct
id|menu
op_star
id|menu
)paren
(brace
r_const
r_char
op_star
id|prompt
op_assign
id|menu_get_prompt
c_func
(paren
id|menu
)paren
suffix:semicolon
r_int
id|stat
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--title&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|prompt
ques
c_cond
id|prompt
suffix:colon
l_string|&quot;Main Menu&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--inputbox&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sym_get_type
c_func
(paren
id|menu-&gt;sym
)paren
)paren
(brace
r_case
id|S_INT
suffix:colon
id|cprint
c_func
(paren
id|inputbox_instructions_int
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_HEX
suffix:colon
id|cprint
c_func
(paren
id|inputbox_instructions_hex
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_STRING
suffix:colon
id|cprint
c_func
(paren
id|inputbox_instructions_string
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* panic? */
suffix:semicolon
)brace
id|cprint
c_func
(paren
l_string|&quot;10&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;75&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|sym_get_string_value
c_func
(paren
id|menu-&gt;sym
)paren
)paren
suffix:semicolon
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|stat
)paren
(brace
r_case
l_int|0
suffix:colon
r_if
c_cond
(paren
id|sym_set_string_value
c_func
(paren
id|menu-&gt;sym
comma
id|input_buf
)paren
)paren
r_return
suffix:semicolon
id|show_textbox
c_func
(paren
l_int|NULL
comma
l_string|&quot;You have made an invalid entry.&quot;
comma
l_int|5
comma
l_int|43
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|show_help
c_func
(paren
id|menu
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|255
suffix:colon
r_return
suffix:semicolon
)brace
)brace
)brace
DECL|function|conf_load
r_static
r_void
id|conf_load
c_func
(paren
r_void
)paren
(brace
r_int
id|stat
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--inputbox&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
id|load_config_text
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;11&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;55&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|filename
)paren
suffix:semicolon
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|stat
)paren
(brace
r_case
l_int|0
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|input_buf
(braket
l_int|0
)braket
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|conf_read
c_func
(paren
id|input_buf
)paren
)paren
r_return
suffix:semicolon
id|show_textbox
c_func
(paren
l_int|NULL
comma
l_string|&quot;File does not exist!&quot;
comma
l_int|5
comma
l_int|38
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|show_helptext
c_func
(paren
l_string|&quot;Load Alternate Configuration&quot;
comma
id|load_config_help
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|255
suffix:colon
r_return
suffix:semicolon
)brace
)brace
)brace
DECL|function|conf_save
r_static
r_void
id|conf_save
c_func
(paren
r_void
)paren
(brace
r_int
id|stat
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--inputbox&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
id|save_config_text
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;11&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;55&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;%s&quot;
comma
id|filename
)paren
suffix:semicolon
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|stat
)paren
(brace
r_case
l_int|0
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|input_buf
(braket
l_int|0
)braket
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|conf_write
c_func
(paren
id|input_buf
)paren
)paren
r_return
suffix:semicolon
id|show_textbox
c_func
(paren
l_int|NULL
comma
l_string|&quot;Can&squot;t create file!  Probably a nonexistent directory.&quot;
comma
l_int|5
comma
l_int|60
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|show_helptext
c_func
(paren
l_string|&quot;Save Alternate Configuration&quot;
comma
id|save_config_help
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|255
suffix:colon
r_return
suffix:semicolon
)brace
)brace
)brace
DECL|function|conf_cleanup
r_static
r_void
id|conf_cleanup
c_func
(paren
r_void
)paren
(brace
id|tcsetattr
c_func
(paren
l_int|1
comma
id|TCSAFLUSH
comma
op_amp
id|ios_org
)paren
suffix:semicolon
id|unlink
c_func
(paren
l_string|&quot;.help.tmp&quot;
)paren
suffix:semicolon
id|unlink
c_func
(paren
l_string|&quot;lxdialog.scrltmp&quot;
)paren
suffix:semicolon
)brace
DECL|function|main
r_int
id|main
c_func
(paren
r_int
id|ac
comma
r_char
op_star
op_star
id|av
)paren
(brace
r_struct
id|symbol
op_star
id|sym
suffix:semicolon
r_char
op_star
id|mode
suffix:semicolon
r_int
id|stat
suffix:semicolon
id|conf_parse
c_func
(paren
id|av
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|conf_read
c_func
(paren
l_int|NULL
)paren
suffix:semicolon
id|sym
op_assign
id|sym_lookup
c_func
(paren
l_string|&quot;KERNELRELEASE&quot;
comma
l_int|0
)paren
suffix:semicolon
id|sym_calc_value
c_func
(paren
id|sym
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|menu_backtitle
comma
l_string|&quot;Linux Kernel v%s Configuration&quot;
comma
id|sym_get_string_value
c_func
(paren
id|sym
)paren
)paren
suffix:semicolon
id|mode
op_assign
id|getenv
c_func
(paren
l_string|&quot;MENUCONFIG_MODE&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|strcasecmp
c_func
(paren
id|mode
comma
l_string|&quot;single_menu&quot;
)paren
)paren
id|single_menu_mode
op_assign
l_int|1
suffix:semicolon
)brace
id|tcgetattr
c_func
(paren
l_int|1
comma
op_amp
id|ios_org
)paren
suffix:semicolon
id|atexit
c_func
(paren
id|conf_cleanup
)paren
suffix:semicolon
id|init_wsize
c_func
(paren
)paren
suffix:semicolon
id|conf
c_func
(paren
op_amp
id|rootmenu
)paren
suffix:semicolon
r_do
(brace
id|cprint_init
c_func
(paren
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;--yesno&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;Do you wish to save your new kernel configuration?&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;5&quot;
)paren
suffix:semicolon
id|cprint
c_func
(paren
l_string|&quot;60&quot;
)paren
suffix:semicolon
id|stat
op_assign
id|exec_conf
c_func
(paren
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|stat
OL
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|conf_write
c_func
(paren
l_int|NULL
)paren
)paren
(brace
id|fprintf
c_func
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;n&quot;
l_string|&quot;Error during writing of the kernel configuration.&bslash;n&quot;
l_string|&quot;Your kernel configuration changes were NOT saved.&quot;
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|printf
c_func
(paren
l_string|&quot;&bslash;n&bslash;n&quot;
l_string|&quot;*** End of Linux kernel configuration.&bslash;n&quot;
l_string|&quot;*** Execute &squot;make&squot; to build the kernel or try &squot;make help&squot;.&quot;
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|fprintf
c_func
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;n&quot;
l_string|&quot;Your kernel configuration changes were NOT saved.&quot;
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
eof
