multiline_comment|/*&n;  Red Black Trees&n;  (C) 1999  Andrea Arcangeli &lt;andrea@suse.de&gt;&n;  &n;  This program is free software; you can redistribute it and/or modify&n;  it under the terms of the GNU General Public License as published by&n;  the Free Software Foundation; either version 2 of the License, or&n;  (at your option) any later version.&n;&n;  This program is distributed in the hope that it will be useful,&n;  but WITHOUT ANY WARRANTY; without even the implied warranty of&n;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n;  GNU General Public License for more details.&n;&n;  You should have received a copy of the GNU General Public License&n;  along with this program; if not, write to the Free Software&n;  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n;&n;  linux/lib/rbtree.c&n;*/
macro_line|#include &lt;linux/rbtree.h&gt;
DECL|function|__rb_rotate_left
r_static
r_void
id|__rb_rotate_left
c_func
(paren
id|rb_node_t
op_star
id|node
comma
id|rb_root_t
op_star
id|root
)paren
(brace
id|rb_node_t
op_star
id|right
op_assign
id|node-&gt;rb_right
suffix:semicolon
r_if
c_cond
(paren
(paren
id|node-&gt;rb_right
op_assign
id|right-&gt;rb_left
)paren
)paren
id|right-&gt;rb_left-&gt;rb_parent
op_assign
id|node
suffix:semicolon
id|right-&gt;rb_left
op_assign
id|node
suffix:semicolon
r_if
c_cond
(paren
(paren
id|right-&gt;rb_parent
op_assign
id|node-&gt;rb_parent
)paren
)paren
(brace
r_if
c_cond
(paren
id|node
op_eq
id|node-&gt;rb_parent-&gt;rb_left
)paren
id|node-&gt;rb_parent-&gt;rb_left
op_assign
id|right
suffix:semicolon
r_else
id|node-&gt;rb_parent-&gt;rb_right
op_assign
id|right
suffix:semicolon
)brace
r_else
id|root-&gt;rb_node
op_assign
id|right
suffix:semicolon
id|node-&gt;rb_parent
op_assign
id|right
suffix:semicolon
)brace
DECL|function|__rb_rotate_right
r_static
r_void
id|__rb_rotate_right
c_func
(paren
id|rb_node_t
op_star
id|node
comma
id|rb_root_t
op_star
id|root
)paren
(brace
id|rb_node_t
op_star
id|left
op_assign
id|node-&gt;rb_left
suffix:semicolon
r_if
c_cond
(paren
(paren
id|node-&gt;rb_left
op_assign
id|left-&gt;rb_right
)paren
)paren
id|left-&gt;rb_right-&gt;rb_parent
op_assign
id|node
suffix:semicolon
id|left-&gt;rb_right
op_assign
id|node
suffix:semicolon
r_if
c_cond
(paren
(paren
id|left-&gt;rb_parent
op_assign
id|node-&gt;rb_parent
)paren
)paren
(brace
r_if
c_cond
(paren
id|node
op_eq
id|node-&gt;rb_parent-&gt;rb_right
)paren
id|node-&gt;rb_parent-&gt;rb_right
op_assign
id|left
suffix:semicolon
r_else
id|node-&gt;rb_parent-&gt;rb_left
op_assign
id|left
suffix:semicolon
)brace
r_else
id|root-&gt;rb_node
op_assign
id|left
suffix:semicolon
id|node-&gt;rb_parent
op_assign
id|left
suffix:semicolon
)brace
DECL|function|rb_insert_color
r_void
id|rb_insert_color
c_func
(paren
id|rb_node_t
op_star
id|node
comma
id|rb_root_t
op_star
id|root
)paren
(brace
id|rb_node_t
op_star
id|parent
comma
op_star
id|gparent
suffix:semicolon
r_while
c_loop
(paren
(paren
id|parent
op_assign
id|node-&gt;rb_parent
)paren
op_logical_and
id|parent-&gt;rb_color
op_eq
id|RB_RED
)paren
(brace
id|gparent
op_assign
id|parent-&gt;rb_parent
suffix:semicolon
r_if
c_cond
(paren
id|parent
op_eq
id|gparent-&gt;rb_left
)paren
(brace
(brace
r_register
id|rb_node_t
op_star
id|uncle
op_assign
id|gparent-&gt;rb_right
suffix:semicolon
r_if
c_cond
(paren
id|uncle
op_logical_and
id|uncle-&gt;rb_color
op_eq
id|RB_RED
)paren
(brace
id|uncle-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|gparent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|node
op_assign
id|gparent
suffix:semicolon
r_continue
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|parent-&gt;rb_right
op_eq
id|node
)paren
(brace
r_register
id|rb_node_t
op_star
id|tmp
suffix:semicolon
id|__rb_rotate_left
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|tmp
op_assign
id|parent
suffix:semicolon
id|parent
op_assign
id|node
suffix:semicolon
id|node
op_assign
id|tmp
suffix:semicolon
)brace
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|gparent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_right
c_func
(paren
id|gparent
comma
id|root
)paren
suffix:semicolon
)brace
r_else
(brace
(brace
r_register
id|rb_node_t
op_star
id|uncle
op_assign
id|gparent-&gt;rb_left
suffix:semicolon
r_if
c_cond
(paren
id|uncle
op_logical_and
id|uncle-&gt;rb_color
op_eq
id|RB_RED
)paren
(brace
id|uncle-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|gparent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|node
op_assign
id|gparent
suffix:semicolon
r_continue
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|parent-&gt;rb_left
op_eq
id|node
)paren
(brace
r_register
id|rb_node_t
op_star
id|tmp
suffix:semicolon
id|__rb_rotate_right
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|tmp
op_assign
id|parent
suffix:semicolon
id|parent
op_assign
id|node
suffix:semicolon
id|node
op_assign
id|tmp
suffix:semicolon
)brace
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|gparent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_left
c_func
(paren
id|gparent
comma
id|root
)paren
suffix:semicolon
)brace
)brace
id|root-&gt;rb_node-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
)brace
DECL|function|__rb_erase_color
r_static
r_void
id|__rb_erase_color
c_func
(paren
id|rb_node_t
op_star
id|node
comma
id|rb_node_t
op_star
id|parent
comma
id|rb_root_t
op_star
id|root
)paren
(brace
id|rb_node_t
op_star
id|other
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
id|node
op_logical_or
id|node-&gt;rb_color
op_eq
id|RB_BLACK
)paren
op_logical_and
id|node
op_ne
id|root-&gt;rb_node
)paren
(brace
r_if
c_cond
(paren
id|parent-&gt;rb_left
op_eq
id|node
)paren
(brace
id|other
op_assign
id|parent-&gt;rb_right
suffix:semicolon
r_if
c_cond
(paren
id|other-&gt;rb_color
op_eq
id|RB_RED
)paren
(brace
id|other-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_left
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|other
op_assign
id|parent-&gt;rb_right
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|other-&gt;rb_left
op_logical_or
id|other-&gt;rb_left-&gt;rb_color
op_eq
id|RB_BLACK
)paren
op_logical_and
(paren
op_logical_neg
id|other-&gt;rb_right
op_logical_or
id|other-&gt;rb_right-&gt;rb_color
op_eq
id|RB_BLACK
)paren
)paren
(brace
id|other-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|node
op_assign
id|parent
suffix:semicolon
id|parent
op_assign
id|node-&gt;rb_parent
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|other-&gt;rb_right
op_logical_or
id|other-&gt;rb_right-&gt;rb_color
op_eq
id|RB_BLACK
)paren
(brace
r_register
id|rb_node_t
op_star
id|o_left
suffix:semicolon
r_if
c_cond
(paren
(paren
id|o_left
op_assign
id|other-&gt;rb_left
)paren
)paren
id|o_left-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|other-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_right
c_func
(paren
id|other
comma
id|root
)paren
suffix:semicolon
id|other
op_assign
id|parent-&gt;rb_right
suffix:semicolon
)brace
id|other-&gt;rb_color
op_assign
id|parent-&gt;rb_color
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
r_if
c_cond
(paren
id|other-&gt;rb_right
)paren
id|other-&gt;rb_right-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|__rb_rotate_left
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|node
op_assign
id|root-&gt;rb_node
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|other
op_assign
id|parent-&gt;rb_left
suffix:semicolon
r_if
c_cond
(paren
id|other-&gt;rb_color
op_eq
id|RB_RED
)paren
(brace
id|other-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_right
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|other
op_assign
id|parent-&gt;rb_left
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|other-&gt;rb_left
op_logical_or
id|other-&gt;rb_left-&gt;rb_color
op_eq
id|RB_BLACK
)paren
op_logical_and
(paren
op_logical_neg
id|other-&gt;rb_right
op_logical_or
id|other-&gt;rb_right-&gt;rb_color
op_eq
id|RB_BLACK
)paren
)paren
(brace
id|other-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|node
op_assign
id|parent
suffix:semicolon
id|parent
op_assign
id|node-&gt;rb_parent
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|other-&gt;rb_left
op_logical_or
id|other-&gt;rb_left-&gt;rb_color
op_eq
id|RB_BLACK
)paren
(brace
r_register
id|rb_node_t
op_star
id|o_right
suffix:semicolon
r_if
c_cond
(paren
(paren
id|o_right
op_assign
id|other-&gt;rb_right
)paren
)paren
id|o_right-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|other-&gt;rb_color
op_assign
id|RB_RED
suffix:semicolon
id|__rb_rotate_left
c_func
(paren
id|other
comma
id|root
)paren
suffix:semicolon
id|other
op_assign
id|parent-&gt;rb_left
suffix:semicolon
)brace
id|other-&gt;rb_color
op_assign
id|parent-&gt;rb_color
suffix:semicolon
id|parent-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
r_if
c_cond
(paren
id|other-&gt;rb_left
)paren
id|other-&gt;rb_left-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
id|__rb_rotate_right
c_func
(paren
id|parent
comma
id|root
)paren
suffix:semicolon
id|node
op_assign
id|root-&gt;rb_node
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|node
)paren
id|node-&gt;rb_color
op_assign
id|RB_BLACK
suffix:semicolon
)brace
DECL|function|rb_erase
r_void
id|rb_erase
c_func
(paren
id|rb_node_t
op_star
id|node
comma
id|rb_root_t
op_star
id|root
)paren
(brace
id|rb_node_t
op_star
id|child
comma
op_star
id|parent
suffix:semicolon
r_int
id|color
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|node-&gt;rb_left
)paren
id|child
op_assign
id|node-&gt;rb_right
suffix:semicolon
r_else
r_if
c_cond
(paren
op_logical_neg
id|node-&gt;rb_right
)paren
id|child
op_assign
id|node-&gt;rb_left
suffix:semicolon
r_else
(brace
id|rb_node_t
op_star
id|old
op_assign
id|node
comma
op_star
id|left
suffix:semicolon
id|node
op_assign
id|node-&gt;rb_right
suffix:semicolon
r_while
c_loop
(paren
(paren
id|left
op_assign
id|node-&gt;rb_left
)paren
)paren
id|node
op_assign
id|left
suffix:semicolon
id|child
op_assign
id|node-&gt;rb_right
suffix:semicolon
id|parent
op_assign
id|node-&gt;rb_parent
suffix:semicolon
id|color
op_assign
id|node-&gt;rb_color
suffix:semicolon
r_if
c_cond
(paren
id|child
)paren
id|child-&gt;rb_parent
op_assign
id|parent
suffix:semicolon
r_if
c_cond
(paren
id|parent
)paren
(brace
r_if
c_cond
(paren
id|parent-&gt;rb_left
op_eq
id|node
)paren
id|parent-&gt;rb_left
op_assign
id|child
suffix:semicolon
r_else
id|parent-&gt;rb_right
op_assign
id|child
suffix:semicolon
)brace
r_else
id|root-&gt;rb_node
op_assign
id|child
suffix:semicolon
r_if
c_cond
(paren
id|node-&gt;rb_parent
op_eq
id|old
)paren
id|parent
op_assign
id|node
suffix:semicolon
id|node-&gt;rb_parent
op_assign
id|old-&gt;rb_parent
suffix:semicolon
id|node-&gt;rb_color
op_assign
id|old-&gt;rb_color
suffix:semicolon
id|node-&gt;rb_right
op_assign
id|old-&gt;rb_right
suffix:semicolon
id|node-&gt;rb_left
op_assign
id|old-&gt;rb_left
suffix:semicolon
r_if
c_cond
(paren
id|old-&gt;rb_parent
)paren
(brace
r_if
c_cond
(paren
id|old-&gt;rb_parent-&gt;rb_left
op_eq
id|old
)paren
id|old-&gt;rb_parent-&gt;rb_left
op_assign
id|node
suffix:semicolon
r_else
id|old-&gt;rb_parent-&gt;rb_right
op_assign
id|node
suffix:semicolon
)brace
r_else
id|root-&gt;rb_node
op_assign
id|node
suffix:semicolon
id|old-&gt;rb_left-&gt;rb_parent
op_assign
id|node
suffix:semicolon
r_if
c_cond
(paren
id|old-&gt;rb_right
)paren
id|old-&gt;rb_right-&gt;rb_parent
op_assign
id|node
suffix:semicolon
r_goto
id|color
suffix:semicolon
)brace
id|parent
op_assign
id|node-&gt;rb_parent
suffix:semicolon
id|color
op_assign
id|node-&gt;rb_color
suffix:semicolon
r_if
c_cond
(paren
id|child
)paren
id|child-&gt;rb_parent
op_assign
id|parent
suffix:semicolon
r_if
c_cond
(paren
id|parent
)paren
(brace
r_if
c_cond
(paren
id|parent-&gt;rb_left
op_eq
id|node
)paren
id|parent-&gt;rb_left
op_assign
id|child
suffix:semicolon
r_else
id|parent-&gt;rb_right
op_assign
id|child
suffix:semicolon
)brace
r_else
id|root-&gt;rb_node
op_assign
id|child
suffix:semicolon
id|color
suffix:colon
r_if
c_cond
(paren
id|color
op_eq
id|RB_BLACK
)paren
id|__rb_erase_color
c_func
(paren
id|child
comma
id|parent
comma
id|root
)paren
suffix:semicolon
)brace
eof
