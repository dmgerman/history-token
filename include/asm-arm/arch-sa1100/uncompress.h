multiline_comment|/*&n; * linux/include/asm-arm/arch-brutus/uncompress.h&n; *&n; * (C) 1999 Nicolas Pitre &lt;nico@cam.org&gt;&n; *&n; * Reorganised to use machine_is_*() macros.&n; */
macro_line|#include &quot;hardware.h&quot;
macro_line|#include &lt;asm/mach-types.h&gt;
multiline_comment|/* Assabet&squot;s Status Control &quot;Register&quot; */
DECL|variable|SCR_value
r_int
r_int
id|SCR_value
suffix:semicolon
multiline_comment|/* sa1100_setup() will perform any special initialization for UART, etc. */
r_extern
r_void
id|sa1100_setup
c_func
(paren
r_int
id|arch_id
)paren
suffix:semicolon
DECL|macro|arch_decomp_setup
mdefine_line|#define arch_decomp_setup()&t;sa1100_setup(arch_id)
multiline_comment|/*&n; * The following code assumes the serial port has already been&n; * initialized by the bootloader or such...&n; */
DECL|macro|UART
mdefine_line|#define UART(x)&t;&t;(*(volatile unsigned long *)(serial_port + (x)))
DECL|function|puts
r_static
r_void
id|puts
c_func
(paren
r_const
r_char
op_star
id|s
)paren
(brace
r_int
r_int
id|serial_port
suffix:semicolon
r_if
c_cond
(paren
id|machine_is_assabet
c_func
(paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|machine_has_neponset
c_func
(paren
)paren
)paren
(brace
id|serial_port
op_assign
id|_Ser3UTCR0
suffix:semicolon
)brace
r_else
id|serial_port
op_assign
id|_Ser1UTCR0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|machine_is_brutus
c_func
(paren
)paren
op_logical_or
id|machine_is_nanoengine
c_func
(paren
)paren
op_logical_or
id|machine_is_pangolin
c_func
(paren
)paren
op_logical_or
id|machine_is_freebird
c_func
(paren
)paren
op_logical_or
id|machine_is_pfs168
c_func
(paren
)paren
op_logical_or
id|machine_is_flexanet
c_func
(paren
)paren
)paren
id|serial_port
op_assign
id|_Ser1UTCR0
suffix:semicolon
r_else
r_if
c_cond
(paren
id|machine_is_empeg
c_func
(paren
)paren
op_logical_or
id|machine_is_bitsy
c_func
(paren
)paren
op_logical_or
id|machine_is_victor
c_func
(paren
)paren
op_logical_or
id|machine_is_lart
c_func
(paren
)paren
op_logical_or
id|machine_is_sherman
c_func
(paren
)paren
op_logical_or
id|machine_is_yopy
c_func
(paren
)paren
op_logical_or
id|machine_is_huw_webpanel
c_func
(paren
)paren
op_logical_or
id|machine_is_itsy
c_func
(paren
)paren
)paren
id|serial_port
op_assign
id|_Ser3UTCR0
suffix:semicolon
r_else
r_return
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
op_star
id|s
suffix:semicolon
id|s
op_increment
)paren
(brace
multiline_comment|/* wait for space in the UART&squot;s transmiter */
r_while
c_loop
(paren
op_logical_neg
(paren
id|UART
c_func
(paren
id|UTSR1
)paren
op_amp
id|UTSR1_TNF
)paren
)paren
suffix:semicolon
multiline_comment|/* send the character out. */
id|UART
c_func
(paren
id|UTDR
)paren
op_assign
op_star
id|s
suffix:semicolon
multiline_comment|/* if a LF, also do CR... */
r_if
c_cond
(paren
op_star
id|s
op_eq
l_int|10
)paren
(brace
r_while
c_loop
(paren
op_logical_neg
(paren
id|UART
c_func
(paren
id|UTSR1
)paren
op_amp
id|UTSR1_TNF
)paren
)paren
suffix:semicolon
id|UART
c_func
(paren
id|UTDR
)paren
op_assign
l_int|13
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Nothing to do for these&n; */
DECL|macro|arch_decomp_wdog
mdefine_line|#define arch_decomp_wdog()
eof
