macro_line|#ifndef __LINUX_NET_AFUNIX_H
DECL|macro|__LINUX_NET_AFUNIX_H
mdefine_line|#define __LINUX_NET_AFUNIX_H
r_extern
r_void
id|unix_proto_init
c_func
(paren
r_struct
id|net_proto
op_star
id|pro
)paren
suffix:semicolon
r_extern
r_void
id|unix_inflight
c_func
(paren
r_struct
id|file
op_star
id|fp
)paren
suffix:semicolon
r_extern
r_void
id|unix_notinflight
c_func
(paren
r_struct
id|file
op_star
id|fp
)paren
suffix:semicolon
DECL|typedef|unix_socket
r_typedef
r_struct
id|sock
id|unix_socket
suffix:semicolon
r_extern
r_void
id|unix_gc
c_func
(paren
r_void
)paren
suffix:semicolon
DECL|macro|UNIX_HASH_SIZE
mdefine_line|#define UNIX_HASH_SIZE&t;256
r_extern
id|unix_socket
op_star
id|unix_socket_table
(braket
id|UNIX_HASH_SIZE
op_plus
l_int|1
)braket
suffix:semicolon
r_extern
id|rwlock_t
id|unix_table_lock
suffix:semicolon
r_extern
id|atomic_t
id|unix_tot_inflight
suffix:semicolon
DECL|macro|forall_unix_sockets
mdefine_line|#define forall_unix_sockets(i, s) for (i=0; i&lt;=UNIX_HASH_SIZE; i++) &bslash;&n;                                    for (s=unix_socket_table[i]; s; s=s-&gt;next)
DECL|struct|unix_address
r_struct
id|unix_address
(brace
DECL|member|refcnt
id|atomic_t
id|refcnt
suffix:semicolon
DECL|member|len
r_int
id|len
suffix:semicolon
DECL|member|hash
r_int
id|hash
suffix:semicolon
DECL|member|name
r_struct
id|sockaddr_un
id|name
(braket
l_int|0
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|unix_skb_parms
r_struct
id|unix_skb_parms
(brace
DECL|member|creds
r_struct
id|ucred
id|creds
suffix:semicolon
multiline_comment|/* Skb credentials&t;*/
DECL|member|fp
r_struct
id|scm_fp_list
op_star
id|fp
suffix:semicolon
multiline_comment|/* Passed files&t;&t;*/
)brace
suffix:semicolon
DECL|macro|UNIXCB
mdefine_line|#define UNIXCB(skb) &t;(*(struct unix_skb_parms*)&amp;((skb)-&gt;cb))
DECL|macro|UNIXCREDS
mdefine_line|#define UNIXCREDS(skb)&t;(&amp;UNIXCB((skb)).creds)
DECL|macro|unix_state_rlock
mdefine_line|#define unix_state_rlock(s)&t;read_lock(&amp;unix_sk(s)-&gt;lock)
DECL|macro|unix_state_runlock
mdefine_line|#define unix_state_runlock(s)&t;read_unlock(&amp;unix_sk(s)-&gt;lock)
DECL|macro|unix_state_wlock
mdefine_line|#define unix_state_wlock(s)&t;write_lock(&amp;unix_sk(s)-&gt;lock)
DECL|macro|unix_state_wunlock
mdefine_line|#define unix_state_wunlock(s)&t;write_unlock(&amp;unix_sk(s)-&gt;lock)
macro_line|#ifdef __KERNEL__
multiline_comment|/* The AF_UNIX socket */
DECL|struct|unix_sock
r_struct
id|unix_sock
(brace
multiline_comment|/* WARNING: sk has to be the first member */
DECL|member|sk
r_struct
id|sock
id|sk
suffix:semicolon
DECL|member|addr
r_struct
id|unix_address
op_star
id|addr
suffix:semicolon
DECL|member|dentry
r_struct
id|dentry
op_star
id|dentry
suffix:semicolon
DECL|member|mnt
r_struct
id|vfsmount
op_star
id|mnt
suffix:semicolon
DECL|member|readsem
r_struct
id|semaphore
id|readsem
suffix:semicolon
DECL|member|other
r_struct
id|sock
op_star
id|other
suffix:semicolon
DECL|member|list
r_struct
id|sock
op_star
op_star
id|list
suffix:semicolon
DECL|member|gc_tree
r_struct
id|sock
op_star
id|gc_tree
suffix:semicolon
DECL|member|inflight
id|atomic_t
id|inflight
suffix:semicolon
DECL|member|lock
id|rwlock_t
id|lock
suffix:semicolon
DECL|member|peer_wait
id|wait_queue_head_t
id|peer_wait
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|unix_sk
mdefine_line|#define unix_sk(__sk) ((struct unix_sock *)__sk)
macro_line|#endif
macro_line|#endif
eof
