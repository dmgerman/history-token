macro_line|#ifndef NET_COMPAT_SOCKET_H
DECL|macro|NET_COMPAT_SOCKET_H
mdefine_line|#define NET_COMPAT_SOCKET_H 1
macro_line|#include &lt;linux/compat.h&gt;
macro_line|#if defined(CONFIG_COMPAT)
multiline_comment|/* XXX This really belongs in some header file... -DaveM */
DECL|macro|MAX_SOCK_ADDR
mdefine_line|#define MAX_SOCK_ADDR&t;128&t;&t;/* 108 for Unix domain - &n;&t;&t;&t;&t;&t;   16 for IP, 16 for IPX,&n;&t;&t;&t;&t;&t;   24 for IPv6,&n;&t;&t;&t;&t;&t;   about 80 for AX.25 */
DECL|struct|compat_msghdr
r_struct
id|compat_msghdr
(brace
DECL|member|msg_name
id|u32
id|msg_name
suffix:semicolon
DECL|member|msg_namelen
r_int
id|msg_namelen
suffix:semicolon
DECL|member|msg_iov
id|u32
id|msg_iov
suffix:semicolon
DECL|member|msg_iovlen
id|compat_size_t
id|msg_iovlen
suffix:semicolon
DECL|member|msg_control
id|u32
id|msg_control
suffix:semicolon
DECL|member|msg_controllen
id|compat_size_t
id|msg_controllen
suffix:semicolon
DECL|member|msg_flags
r_int
id|msg_flags
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|compat_cmsghdr
r_struct
id|compat_cmsghdr
(brace
DECL|member|cmsg_len
id|compat_size_t
id|cmsg_len
suffix:semicolon
DECL|member|cmsg_level
r_int
id|cmsg_level
suffix:semicolon
DECL|member|cmsg_type
r_int
id|cmsg_type
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* Bleech... */
DECL|macro|__CMSG_COMPAT_NXTHDR
mdefine_line|#define __CMSG_COMPAT_NXTHDR(ctl, len, cmsg, cmsglen) __cmsg_compat_nxthdr((ctl),(len),(cmsg),(cmsglen))
DECL|macro|CMSG_COMPAT_NXTHDR
mdefine_line|#define CMSG_COMPAT_NXTHDR(mhdr, cmsg, cmsglen) cmsg_compat_nxthdr((mhdr), (cmsg), (cmsglen))
DECL|macro|CMSG_COMPAT_ALIGN
mdefine_line|#define CMSG_COMPAT_ALIGN(len) ( ((len)+sizeof(int)-1) &amp; ~(sizeof(int)-1) )
DECL|macro|CMSG_COMPAT_DATA
mdefine_line|#define CMSG_COMPAT_DATA(cmsg)&t;((void *)((char *)(cmsg) + CMSG_COMPAT_ALIGN(sizeof(struct compat_cmsghdr))))
DECL|macro|CMSG_COMPAT_SPACE
mdefine_line|#define CMSG_COMPAT_SPACE(len) (CMSG_COMPAT_ALIGN(sizeof(struct compat_cmsghdr)) + CMSG_COMPAT_ALIGN(len))
DECL|macro|CMSG_COMPAT_LEN
mdefine_line|#define CMSG_COMPAT_LEN(len) (CMSG_COMPAT_ALIGN(sizeof(struct compat_cmsghdr)) + (len))
DECL|macro|__CMSG_COMPAT_FIRSTHDR
mdefine_line|#define __CMSG_COMPAT_FIRSTHDR(ctl,len) ((len) &gt;= sizeof(struct compat_cmsghdr) ? &bslash;&n;&t;&t;&t;&t;    (struct compat_cmsghdr *)(ctl) : &bslash;&n;&t;&t;&t;&t;    (struct compat_cmsghdr *)NULL)
DECL|macro|CMSG_COMPAT_FIRSTHDR
mdefine_line|#define CMSG_COMPAT_FIRSTHDR(msg)&t;__CMSG_COMPAT_FIRSTHDR((msg)-&gt;msg_control, (msg)-&gt;msg_controllen)
DECL|function|__cmsg_compat_nxthdr
r_static
id|__inline__
r_struct
id|compat_cmsghdr
op_star
id|__cmsg_compat_nxthdr
c_func
(paren
r_void
op_star
id|__ctl
comma
id|__kernel_size_t
id|__size
comma
r_struct
id|compat_cmsghdr
op_star
id|__cmsg
comma
r_int
id|__cmsg_len
)paren
(brace
r_struct
id|compat_cmsghdr
op_star
id|__ptr
suffix:semicolon
id|__ptr
op_assign
(paren
r_struct
id|compat_cmsghdr
op_star
)paren
(paren
(paren
(paren
r_int
r_char
op_star
)paren
id|__cmsg
)paren
op_plus
id|CMSG_COMPAT_ALIGN
c_func
(paren
id|__cmsg_len
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_int
r_int
)paren
(paren
(paren
r_char
op_star
)paren
(paren
id|__ptr
op_plus
l_int|1
)paren
op_minus
(paren
r_char
op_star
)paren
id|__ctl
)paren
OG
id|__size
)paren
r_return
l_int|NULL
suffix:semicolon
r_return
id|__ptr
suffix:semicolon
)brace
DECL|function|cmsg_compat_nxthdr
r_static
id|__inline__
r_struct
id|compat_cmsghdr
op_star
id|cmsg_compat_nxthdr
(paren
r_struct
id|msghdr
op_star
id|__msg
comma
r_struct
id|compat_cmsghdr
op_star
id|__cmsg
comma
r_int
id|__cmsg_len
)paren
(brace
r_return
id|__cmsg_compat_nxthdr
c_func
(paren
id|__msg-&gt;msg_control
comma
id|__msg-&gt;msg_controllen
comma
id|__cmsg
comma
id|__cmsg_len
)paren
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_COMPAT */
macro_line|#endif
eof
