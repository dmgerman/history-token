macro_line|#ifndef __KERNEL__
macro_line|#include &lt;string.h&gt;
macro_line|#include &lt;stdlib.h&gt;
macro_line|#include &lt;stdio.h&gt;
macro_line|#include &lt;errno.h&gt;
macro_line|#include &lt;ctype.h&gt;
macro_line|#include &lt;time.h&gt;
macro_line|#include &lt;fcntl.h&gt;
macro_line|#include &lt;unistd.h&gt;
macro_line|#include &lt;sys/stat.h&gt;
macro_line|#include &lt;sys/ioctl.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/hdreg.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;asm/dasd.h&gt;
macro_line|#endif
DECL|macro|DASD_API_VERSION
mdefine_line|#define DASD_API_VERSION 0
DECL|macro|LINE_LENGTH
mdefine_line|#define LINE_LENGTH 80
DECL|macro|VTOC_START_CC
mdefine_line|#define VTOC_START_CC 0x0
DECL|macro|VTOC_START_HH
mdefine_line|#define VTOC_START_HH 0x1
DECL|macro|FIRST_USABLE_CYL
mdefine_line|#define FIRST_USABLE_CYL 1
DECL|macro|FIRST_USABLE_TRK
mdefine_line|#define FIRST_USABLE_TRK 2
DECL|macro|DASD_3380_TYPE
mdefine_line|#define DASD_3380_TYPE 13148
DECL|macro|DASD_3390_TYPE
mdefine_line|#define DASD_3390_TYPE 13200
DECL|macro|DASD_9345_TYPE
mdefine_line|#define DASD_9345_TYPE 37701
DECL|macro|DASD_3380_VALUE
mdefine_line|#define DASD_3380_VALUE 0xbb60
DECL|macro|DASD_3390_VALUE
mdefine_line|#define DASD_3390_VALUE 0xe5a2
DECL|macro|DASD_9345_VALUE
mdefine_line|#define DASD_9345_VALUE 0xbc98
DECL|macro|VOLSER_LENGTH
mdefine_line|#define VOLSER_LENGTH 6
DECL|macro|BIG_DISK_SIZE
mdefine_line|#define BIG_DISK_SIZE 0x10000
DECL|macro|VTOC_ERROR
mdefine_line|#define VTOC_ERROR &quot;VTOC error:&quot;
DECL|enum|failure
DECL|enumerator|unable_to_open
r_enum
id|failure
(brace
id|unable_to_open
comma
DECL|enumerator|unable_to_seek
id|unable_to_seek
comma
DECL|enumerator|unable_to_write
id|unable_to_write
comma
DECL|enumerator|unable_to_read
id|unable_to_read
)brace
suffix:semicolon
DECL|variable|ASCtoEBC
r_int
r_char
id|ASCtoEBC
(braket
l_int|256
)braket
op_assign
(brace
multiline_comment|/*00  NL    SH    SX    EX    ET    NQ    AK    BL */
l_int|0x00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x03
comma
l_int|0x37
comma
l_int|0x2D
comma
l_int|0x2E
comma
l_int|0x2F
comma
multiline_comment|/*08  BS    HT    LF    VT    FF    CR    SO    SI */
l_int|0x16
comma
l_int|0x05
comma
l_int|0x15
comma
l_int|0x0B
comma
l_int|0x0C
comma
l_int|0x0D
comma
l_int|0x0E
comma
l_int|0x0F
comma
multiline_comment|/*10  DL    D1    D2    D3    D4    NK    SN    EB */
l_int|0x10
comma
l_int|0x11
comma
l_int|0x12
comma
l_int|0x13
comma
l_int|0x3C
comma
l_int|0x15
comma
l_int|0x32
comma
l_int|0x26
comma
multiline_comment|/*18  CN    EM    SB    EC    FS    GS    RS    US */
l_int|0x18
comma
l_int|0x19
comma
l_int|0x3F
comma
l_int|0x27
comma
l_int|0x1C
comma
l_int|0x1D
comma
l_int|0x1E
comma
l_int|0x1F
comma
multiline_comment|/*20  SP     !     &quot;     #     $     %     &amp;     &squot; */
l_int|0x40
comma
l_int|0x5A
comma
l_int|0x7F
comma
l_int|0x7B
comma
l_int|0x5B
comma
l_int|0x6C
comma
l_int|0x50
comma
l_int|0x7D
comma
multiline_comment|/*28   (     )     *     +     ,     -    .      / */
l_int|0x4D
comma
l_int|0x5D
comma
l_int|0x5C
comma
l_int|0x4E
comma
l_int|0x6B
comma
l_int|0x60
comma
l_int|0x4B
comma
l_int|0x61
comma
multiline_comment|/*30   0     1     2     3     4     5     6     7 */
l_int|0xF0
comma
l_int|0xF1
comma
l_int|0xF2
comma
l_int|0xF3
comma
l_int|0xF4
comma
l_int|0xF5
comma
l_int|0xF6
comma
l_int|0xF7
comma
multiline_comment|/*38   8     9     :     ;     &lt;     =     &gt;     ? */
l_int|0xF8
comma
l_int|0xF9
comma
l_int|0x7A
comma
l_int|0x5E
comma
l_int|0x4C
comma
l_int|0x7E
comma
l_int|0x6E
comma
l_int|0x6F
comma
multiline_comment|/*40   @     A     B     C     D     E     F     G */
l_int|0x7C
comma
l_int|0xC1
comma
l_int|0xC2
comma
l_int|0xC3
comma
l_int|0xC4
comma
l_int|0xC5
comma
l_int|0xC6
comma
l_int|0xC7
comma
multiline_comment|/*48   H     I     J     K     L     M     N     O */
l_int|0xC8
comma
l_int|0xC9
comma
l_int|0xD1
comma
l_int|0xD2
comma
l_int|0xD3
comma
l_int|0xD4
comma
l_int|0xD5
comma
l_int|0xD6
comma
multiline_comment|/*50   P     Q     R     S     T     U     V     W */
l_int|0xD7
comma
l_int|0xD8
comma
l_int|0xD9
comma
l_int|0xE2
comma
l_int|0xE3
comma
l_int|0xE4
comma
l_int|0xE5
comma
l_int|0xE6
comma
multiline_comment|/*58   X     Y     Z     [     &bslash;     ]     ^     _ */
l_int|0xE7
comma
l_int|0xE8
comma
l_int|0xE9
comma
l_int|0xAD
comma
l_int|0xE0
comma
l_int|0xBD
comma
l_int|0x5F
comma
l_int|0x6D
comma
multiline_comment|/*60   `     a     b     c     d     e     f     g */
l_int|0x79
comma
l_int|0x81
comma
l_int|0x82
comma
l_int|0x83
comma
l_int|0x84
comma
l_int|0x85
comma
l_int|0x86
comma
l_int|0x87
comma
multiline_comment|/*68   h     i     j     k     l     m     n     o */
l_int|0x88
comma
l_int|0x89
comma
l_int|0x91
comma
l_int|0x92
comma
l_int|0x93
comma
l_int|0x94
comma
l_int|0x95
comma
l_int|0x96
comma
multiline_comment|/*70   p     q     r     s     t     u     v     w */
l_int|0x97
comma
l_int|0x98
comma
l_int|0x99
comma
l_int|0xA2
comma
l_int|0xA3
comma
l_int|0xA4
comma
l_int|0xA5
comma
l_int|0xA6
comma
multiline_comment|/*78   x     y     z     {     |     }     ~    DL */
l_int|0xA7
comma
l_int|0xA8
comma
l_int|0xA9
comma
l_int|0xC0
comma
l_int|0x4F
comma
l_int|0xD0
comma
l_int|0xA1
comma
l_int|0x07
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0x3F
comma
l_int|0xFF
)brace
suffix:semicolon
DECL|variable|EBCtoASC
r_int
r_char
id|EBCtoASC
(braket
l_int|256
)braket
op_assign
(brace
multiline_comment|/* 0x00   NUL   SOH   STX   ETX  *SEL    HT  *RNL   DEL */
l_int|0x00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x03
comma
l_int|0x07
comma
l_int|0x09
comma
l_int|0x07
comma
l_int|0x7F
comma
multiline_comment|/* 0x08   -GE  -SPS  -RPT    VT    FF    CR    SO    SI */
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x0B
comma
l_int|0x0C
comma
l_int|0x0D
comma
l_int|0x0E
comma
l_int|0x0F
comma
multiline_comment|/* 0x10   DLE   DC1   DC2   DC3  -RES   -NL    BS  -POC&n;                                  -ENP  -&gt;LF             */
l_int|0x10
comma
l_int|0x11
comma
l_int|0x12
comma
l_int|0x13
comma
l_int|0x07
comma
l_int|0x0A
comma
l_int|0x08
comma
l_int|0x07
comma
multiline_comment|/* 0x18   CAN    EM  -UBS  -CU1  -IFS  -IGS  -IRS  -ITB&n;                                                    -IUS */
l_int|0x18
comma
l_int|0x19
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
multiline_comment|/* 0x20   -DS  -SOS    FS  -WUS  -BYP    LF   ETB   ESC&n;                                  -INP                   */
l_int|0x07
comma
l_int|0x07
comma
l_int|0x1C
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x0A
comma
l_int|0x17
comma
l_int|0x1B
comma
multiline_comment|/* 0x28   -SA  -SFE   -SM  -CSP  -MFA   ENQ   ACK   BEL&n;                       -SW                               */
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x05
comma
l_int|0x06
comma
l_int|0x07
comma
multiline_comment|/* 0x30  ----  ----   SYN   -IR   -PP  -TRN  -NBS   EOT */
l_int|0x07
comma
l_int|0x07
comma
l_int|0x16
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x04
comma
multiline_comment|/* 0x38  -SBS   -IT  -RFF  -CU3   DC4   NAK  ----   SUB */
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x14
comma
l_int|0x15
comma
l_int|0x07
comma
l_int|0x1A
comma
multiline_comment|/* 0x40    SP   RSP           &#xfffd;              ----       */
l_int|0x20
comma
l_int|0xFF
comma
l_int|0x83
comma
l_int|0x84
comma
l_int|0x85
comma
l_int|0xA0
comma
l_int|0x07
comma
l_int|0x86
comma
multiline_comment|/* 0x48                       .     &lt;     (     +     | */
l_int|0x87
comma
l_int|0xA4
comma
l_int|0x9B
comma
l_int|0x2E
comma
l_int|0x3C
comma
l_int|0x28
comma
l_int|0x2B
comma
l_int|0x7C
comma
multiline_comment|/* 0x50     &amp;                                      ---- */
l_int|0x26
comma
l_int|0x82
comma
l_int|0x88
comma
l_int|0x89
comma
l_int|0x8A
comma
l_int|0xA1
comma
l_int|0x8C
comma
l_int|0x07
comma
multiline_comment|/* 0x58           &#xfffd;     !     $     *     )     ;       */
l_int|0x8D
comma
l_int|0xE1
comma
l_int|0x21
comma
l_int|0x24
comma
l_int|0x2A
comma
l_int|0x29
comma
l_int|0x3B
comma
l_int|0xAA
comma
multiline_comment|/* 0x60     -     /  ----     &#xfffd;  ----  ----  ----       */
l_int|0x2D
comma
l_int|0x2F
comma
l_int|0x07
comma
l_int|0x8E
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x8F
comma
multiline_comment|/* 0x68              ----     ,     %     _     &gt;     ? */
l_int|0x80
comma
l_int|0xA5
comma
l_int|0x07
comma
l_int|0x2C
comma
l_int|0x25
comma
l_int|0x5F
comma
l_int|0x3E
comma
l_int|0x3F
comma
multiline_comment|/* 0x70  ----        ----  ----  ----  ----  ----  ---- */
l_int|0x07
comma
l_int|0x90
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
multiline_comment|/* 0x78     *     `     :     #     @     &squot;     =     &quot; */
l_int|0x70
comma
l_int|0x60
comma
l_int|0x3A
comma
l_int|0x23
comma
l_int|0x40
comma
l_int|0x27
comma
l_int|0x3D
comma
l_int|0x22
comma
multiline_comment|/* 0x80     *     a     b     c     d     e     f     g */
l_int|0x07
comma
l_int|0x61
comma
l_int|0x62
comma
l_int|0x63
comma
l_int|0x64
comma
l_int|0x65
comma
l_int|0x66
comma
l_int|0x67
comma
multiline_comment|/* 0x88     h     i              ----  ----  ----       */
l_int|0x68
comma
l_int|0x69
comma
l_int|0xAE
comma
l_int|0xAF
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0xF1
comma
multiline_comment|/* 0x90     &#xfffd;     j     k     l     m     n     o     p */
l_int|0xF8
comma
l_int|0x6A
comma
l_int|0x6B
comma
l_int|0x6C
comma
l_int|0x6D
comma
l_int|0x6E
comma
l_int|0x6F
comma
l_int|0x70
comma
multiline_comment|/* 0x98     q     r                    ----        ---- */
l_int|0x71
comma
l_int|0x72
comma
l_int|0xA6
comma
l_int|0xA7
comma
l_int|0x91
comma
l_int|0x07
comma
l_int|0x92
comma
l_int|0x07
comma
multiline_comment|/* 0xA0           ~     s     t     u     v     w     x */
l_int|0xE6
comma
l_int|0x7E
comma
l_int|0x73
comma
l_int|0x74
comma
l_int|0x75
comma
l_int|0x76
comma
l_int|0x77
comma
l_int|0x78
comma
multiline_comment|/* 0xA8     y     z              ----  ----  ----  ---- */
l_int|0x79
comma
l_int|0x7A
comma
l_int|0xAD
comma
l_int|0xAB
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
multiline_comment|/* 0xB0     ^                    ----     &#xfffd;  ----       */
l_int|0x5E
comma
l_int|0x9C
comma
l_int|0x9D
comma
l_int|0xFA
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0xAC
comma
multiline_comment|/* 0xB8        ----     [     ]  ----  ----  ----  ---- */
l_int|0xAB
comma
l_int|0x07
comma
l_int|0x5B
comma
l_int|0x5D
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
multiline_comment|/* 0xC0     {     A     B     C     D     E     F     G */
l_int|0x7B
comma
l_int|0x41
comma
l_int|0x42
comma
l_int|0x43
comma
l_int|0x44
comma
l_int|0x45
comma
l_int|0x46
comma
l_int|0x47
comma
multiline_comment|/* 0xC8     H     I  ----           &#xfffd;              ---- */
l_int|0x48
comma
l_int|0x49
comma
l_int|0x07
comma
l_int|0x93
comma
l_int|0x94
comma
l_int|0x95
comma
l_int|0xA2
comma
l_int|0x07
comma
multiline_comment|/* 0xD0     }     J     K     L     M     N     O     P */
l_int|0x7D
comma
l_int|0x4A
comma
l_int|0x4B
comma
l_int|0x4C
comma
l_int|0x4D
comma
l_int|0x4E
comma
l_int|0x4F
comma
l_int|0x50
comma
multiline_comment|/* 0xD8     Q     R  ----           &#xfffd;                   */
l_int|0x51
comma
l_int|0x52
comma
l_int|0x07
comma
l_int|0x96
comma
l_int|0x81
comma
l_int|0x97
comma
l_int|0xA3
comma
l_int|0x98
comma
multiline_comment|/* 0xE0     &bslash;           S     T     U     V     W     X */
l_int|0x5C
comma
l_int|0xF6
comma
l_int|0x53
comma
l_int|0x54
comma
l_int|0x55
comma
l_int|0x56
comma
l_int|0x57
comma
l_int|0x58
comma
multiline_comment|/* 0xE8     Y     Z        ----     &#xfffd;  ----  ----  ---- */
l_int|0x59
comma
l_int|0x5A
comma
l_int|0xFD
comma
l_int|0x07
comma
l_int|0x99
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
multiline_comment|/* 0xF0     0     1     2     3     4     5     6     7 */
l_int|0x30
comma
l_int|0x31
comma
l_int|0x32
comma
l_int|0x33
comma
l_int|0x34
comma
l_int|0x35
comma
l_int|0x36
comma
l_int|0x37
comma
multiline_comment|/* 0xF8     8     9  ----  ----     &#xfffd;  ----  ----  ---- */
l_int|0x38
comma
l_int|0x39
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x9A
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
)brace
suffix:semicolon
DECL|struct|ttr
r_typedef
r_struct
id|ttr
(brace
DECL|member|tt
id|__u16
id|tt
suffix:semicolon
DECL|member|r
id|__u8
id|r
suffix:semicolon
DECL|typedef|ttr_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|ttr_t
suffix:semicolon
DECL|struct|cchhb
r_typedef
r_struct
id|cchhb
(brace
DECL|member|cc
id|__u16
id|cc
suffix:semicolon
DECL|member|hh
id|__u16
id|hh
suffix:semicolon
DECL|member|b
id|__u8
id|b
suffix:semicolon
DECL|typedef|cchhb_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|cchhb_t
suffix:semicolon
DECL|struct|cchh
r_typedef
r_struct
id|cchh
(brace
DECL|member|cc
id|__u16
id|cc
suffix:semicolon
DECL|member|hh
id|__u16
id|hh
suffix:semicolon
DECL|typedef|cchh_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|cchh_t
suffix:semicolon
DECL|struct|labeldate
r_typedef
r_struct
id|labeldate
(brace
DECL|member|year
id|__u8
id|year
suffix:semicolon
DECL|member|day
id|__u16
id|day
suffix:semicolon
DECL|typedef|labeldate_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|labeldate_t
suffix:semicolon
DECL|struct|volume_label
r_typedef
r_struct
id|volume_label
(brace
DECL|member|volkey
r_char
id|volkey
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* volume key = volume label                 */
DECL|member|vollbl
r_char
id|vollbl
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* volume label                              */
DECL|member|volid
r_char
id|volid
(braket
l_int|6
)braket
suffix:semicolon
multiline_comment|/* volume identifier                         */
DECL|member|security
id|__u8
id|security
suffix:semicolon
multiline_comment|/* security byte                             */
DECL|member|vtoc
id|cchhb_t
id|vtoc
suffix:semicolon
multiline_comment|/* VTOC address                              */
DECL|member|res1
r_char
id|res1
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* reserved                                  */
DECL|member|cisize
r_char
id|cisize
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* CI-size for FBA,...                       */
multiline_comment|/* ...blanks for CKD                         */
DECL|member|blkperci
r_char
id|blkperci
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* no of blocks per CI (FBA), blanks for CKD */
DECL|member|labperci
r_char
id|labperci
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* no of labels per CI (FBA), blanks for CKD */
DECL|member|res2
r_char
id|res2
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* reserved                                  */
DECL|member|lvtoc
r_char
id|lvtoc
(braket
l_int|14
)braket
suffix:semicolon
multiline_comment|/* owner code for LVTOC                      */
DECL|member|res3
r_char
id|res3
(braket
l_int|29
)braket
suffix:semicolon
multiline_comment|/* reserved                                  */
DECL|typedef|volume_label_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|volume_label_t
suffix:semicolon
DECL|struct|extent
r_typedef
r_struct
id|extent
(brace
DECL|member|typeind
id|__u8
id|typeind
suffix:semicolon
multiline_comment|/* extent type indicator                     */
DECL|member|seqno
id|__u8
id|seqno
suffix:semicolon
multiline_comment|/* extent sequence number                    */
DECL|member|llimit
id|cchh_t
id|llimit
suffix:semicolon
multiline_comment|/* starting point of this extent             */
DECL|member|ulimit
id|cchh_t
id|ulimit
suffix:semicolon
multiline_comment|/* ending point of this extent               */
DECL|typedef|extent_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|extent_t
suffix:semicolon
DECL|struct|dev_const
r_typedef
r_struct
id|dev_const
(brace
DECL|member|DS4DSCYL
id|__u16
id|DS4DSCYL
suffix:semicolon
multiline_comment|/* number of logical cyls                  */
DECL|member|DS4DSTRK
id|__u16
id|DS4DSTRK
suffix:semicolon
multiline_comment|/* number of tracks in a logical cylinder  */
DECL|member|DS4DEVTK
id|__u16
id|DS4DEVTK
suffix:semicolon
multiline_comment|/* device track length                     */
DECL|member|DS4DEVI
id|__u8
id|DS4DEVI
suffix:semicolon
multiline_comment|/* non-last keyed record overhead          */
DECL|member|DS4DEVL
id|__u8
id|DS4DEVL
suffix:semicolon
multiline_comment|/* last keyed record overhead              */
DECL|member|DS4DEVK
id|__u8
id|DS4DEVK
suffix:semicolon
multiline_comment|/* non-keyed record overhead differential  */
DECL|member|DS4DEVFG
id|__u8
id|DS4DEVFG
suffix:semicolon
multiline_comment|/* flag byte                               */
DECL|member|DS4DEVTL
id|__u16
id|DS4DEVTL
suffix:semicolon
multiline_comment|/* device tolerance                        */
DECL|member|DS4DEVDT
id|__u8
id|DS4DEVDT
suffix:semicolon
multiline_comment|/* number of DSCB&squot;s per track              */
DECL|member|DS4DEVDB
id|__u8
id|DS4DEVDB
suffix:semicolon
multiline_comment|/* number of directory blocks per track    */
DECL|typedef|dev_const_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|dev_const_t
suffix:semicolon
DECL|struct|format1_label
r_typedef
r_struct
id|format1_label
(brace
DECL|member|DS1DSNAM
r_char
id|DS1DSNAM
(braket
l_int|44
)braket
suffix:semicolon
multiline_comment|/* data set name                           */
DECL|member|DS1FMTID
id|__u8
id|DS1FMTID
suffix:semicolon
multiline_comment|/* format identifier                       */
DECL|member|DS1DSSN
r_char
id|DS1DSSN
(braket
l_int|6
)braket
suffix:semicolon
multiline_comment|/* data set serial number                  */
DECL|member|DS1VOLSQ
id|__u16
id|DS1VOLSQ
suffix:semicolon
multiline_comment|/* volume sequence number                  */
DECL|member|DS1CREDT
id|labeldate_t
id|DS1CREDT
suffix:semicolon
multiline_comment|/* creation date: ydd                      */
DECL|member|DS1EXPDT
id|labeldate_t
id|DS1EXPDT
suffix:semicolon
multiline_comment|/* expiration date                         */
DECL|member|DS1NOEPV
id|__u8
id|DS1NOEPV
suffix:semicolon
multiline_comment|/* number of extents on volume             */
DECL|member|DS1NOBDB
id|__u8
id|DS1NOBDB
suffix:semicolon
multiline_comment|/* no. of bytes used in last direction blk */
DECL|member|DS1FLAG1
id|__u8
id|DS1FLAG1
suffix:semicolon
multiline_comment|/* flag 1                                  */
DECL|member|DS1SYSCD
r_char
id|DS1SYSCD
(braket
l_int|13
)braket
suffix:semicolon
multiline_comment|/* system code                             */
DECL|member|DS1REFD
id|labeldate_t
id|DS1REFD
suffix:semicolon
multiline_comment|/* date last referenced                    */
DECL|member|DS1SMSFG
id|__u8
id|DS1SMSFG
suffix:semicolon
multiline_comment|/* system managed storage indicators       */
DECL|member|DS1SCXTF
id|__u8
id|DS1SCXTF
suffix:semicolon
multiline_comment|/* sec. space extension flag byte          */
DECL|member|DS1SCXTV
id|__u16
id|DS1SCXTV
suffix:semicolon
multiline_comment|/* secondary space extension value         */
DECL|member|DS1DSRG1
id|__u8
id|DS1DSRG1
suffix:semicolon
multiline_comment|/* data set organisation byte 1            */
DECL|member|DS1DSRG2
id|__u8
id|DS1DSRG2
suffix:semicolon
multiline_comment|/* data set organisation byte 2            */
DECL|member|DS1RECFM
id|__u8
id|DS1RECFM
suffix:semicolon
multiline_comment|/* record format                           */
DECL|member|DS1OPTCD
id|__u8
id|DS1OPTCD
suffix:semicolon
multiline_comment|/* option code                             */
DECL|member|DS1BLKL
id|__u16
id|DS1BLKL
suffix:semicolon
multiline_comment|/* block length                            */
DECL|member|DS1LRECL
id|__u16
id|DS1LRECL
suffix:semicolon
multiline_comment|/* record length                           */
DECL|member|DS1KEYL
id|__u8
id|DS1KEYL
suffix:semicolon
multiline_comment|/* key length                              */
DECL|member|DS1RKP
id|__u16
id|DS1RKP
suffix:semicolon
multiline_comment|/* relative key position                   */
DECL|member|DS1DSIND
id|__u8
id|DS1DSIND
suffix:semicolon
multiline_comment|/* data set indicators                     */
DECL|member|DS1SCAL1
id|__u8
id|DS1SCAL1
suffix:semicolon
multiline_comment|/* secondary allocation flag byte          */
DECL|member|DS1SCAL3
r_char
id|DS1SCAL3
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* secondary allocation quantity           */
DECL|member|DS1LSTAR
id|ttr_t
id|DS1LSTAR
suffix:semicolon
multiline_comment|/* last used track and block on track      */
DECL|member|DS1TRBAL
id|__u16
id|DS1TRBAL
suffix:semicolon
multiline_comment|/* space remaining on last used track      */
DECL|member|res1
id|__u16
id|res1
suffix:semicolon
multiline_comment|/* reserved                                */
DECL|member|DS1EXT1
id|extent_t
id|DS1EXT1
suffix:semicolon
multiline_comment|/* first extent description                */
DECL|member|DS1EXT2
id|extent_t
id|DS1EXT2
suffix:semicolon
multiline_comment|/* second extent description               */
DECL|member|DS1EXT3
id|extent_t
id|DS1EXT3
suffix:semicolon
multiline_comment|/* third extent description                */
DECL|member|DS1PTRDS
id|cchhb_t
id|DS1PTRDS
suffix:semicolon
multiline_comment|/* possible pointer to f2 or f3 DSCB       */
DECL|typedef|format1_label_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|format1_label_t
suffix:semicolon
DECL|struct|format4_label
r_typedef
r_struct
id|format4_label
(brace
DECL|member|DS4KEYCD
r_char
id|DS4KEYCD
(braket
l_int|44
)braket
suffix:semicolon
multiline_comment|/* key code for VTOC labels: 44 times 0x04 */
DECL|member|DS4IDFMT
id|__u8
id|DS4IDFMT
suffix:semicolon
multiline_comment|/* format identifier                       */
DECL|member|DS4HPCHR
id|cchhb_t
id|DS4HPCHR
suffix:semicolon
multiline_comment|/* highest address of a format 1 DSCB      */
DECL|member|DS4DSREC
id|__u16
id|DS4DSREC
suffix:semicolon
multiline_comment|/* number of available DSCB&squot;s              */
DECL|member|DS4HCCHH
id|cchh_t
id|DS4HCCHH
suffix:semicolon
multiline_comment|/* CCHH of next available alternate track  */
DECL|member|DS4NOATK
id|__u16
id|DS4NOATK
suffix:semicolon
multiline_comment|/* number of remaining alternate tracks    */
DECL|member|DS4VTOCI
id|__u8
id|DS4VTOCI
suffix:semicolon
multiline_comment|/* VTOC indicators                         */
DECL|member|DS4NOEXT
id|__u8
id|DS4NOEXT
suffix:semicolon
multiline_comment|/* number of extents in VTOC               */
DECL|member|DS4SMSFG
id|__u8
id|DS4SMSFG
suffix:semicolon
multiline_comment|/* system managed storage indicators       */
DECL|member|DS4DEVAC
id|__u8
id|DS4DEVAC
suffix:semicolon
multiline_comment|/* number of alternate cylinders. &n;                                     Subtract from first two bytes of &n;                                     DS4DEVSZ to get number of usable&n;&t;&t;&t;&t;     cylinders. can be zero. valid&n;&t;&t;&t;&t;     only if DS4DEVAV on.                    */
DECL|member|DS4DEVCT
id|dev_const_t
id|DS4DEVCT
suffix:semicolon
multiline_comment|/* device constants                        */
DECL|member|DS4AMTIM
r_char
id|DS4AMTIM
(braket
l_int|8
)braket
suffix:semicolon
multiline_comment|/* VSAM time stamp                         */
DECL|member|DS4AMCAT
r_char
id|DS4AMCAT
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* VSAM catalog indicator                  */
DECL|member|DS4R2TIM
r_char
id|DS4R2TIM
(braket
l_int|8
)braket
suffix:semicolon
multiline_comment|/* VSAM volume/catalog match time stamp    */
DECL|member|res1
r_char
id|res1
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* reserved                                */
DECL|member|DS4F6PTR
r_char
id|DS4F6PTR
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* pointer to first format 6 DSCB          */
DECL|member|DS4VTOCE
id|extent_t
id|DS4VTOCE
suffix:semicolon
multiline_comment|/* VTOC extent description                 */
DECL|member|res2
r_char
id|res2
(braket
l_int|10
)braket
suffix:semicolon
multiline_comment|/* reserved                                */
DECL|member|DS4EFLVL
id|__u8
id|DS4EFLVL
suffix:semicolon
multiline_comment|/* extended free-space management level    */
DECL|member|DS4EFPTR
id|cchhb_t
id|DS4EFPTR
suffix:semicolon
multiline_comment|/* pointer to extended free-space info     */
DECL|member|res3
r_char
id|res3
(braket
l_int|9
)braket
suffix:semicolon
multiline_comment|/* reserved                                */
DECL|typedef|format4_label_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|format4_label_t
suffix:semicolon
DECL|struct|ds5ext
r_typedef
r_struct
id|ds5ext
(brace
DECL|member|t
id|__u16
id|t
suffix:semicolon
multiline_comment|/* RTA of the first track of free extent   */
DECL|member|fc
id|__u16
id|fc
suffix:semicolon
multiline_comment|/* number of whole cylinders in free ext.  */
DECL|member|ft
id|__u8
id|ft
suffix:semicolon
multiline_comment|/* number of remaining free tracks         */
DECL|typedef|ds5ext_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|ds5ext_t
suffix:semicolon
DECL|struct|format5_label
r_typedef
r_struct
id|format5_label
(brace
DECL|member|DS5KEYID
r_char
id|DS5KEYID
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* key identifier                          */
DECL|member|DS5AVEXT
id|ds5ext_t
id|DS5AVEXT
suffix:semicolon
multiline_comment|/* first available (free-space) extent.    */
DECL|member|DS5EXTAV
id|ds5ext_t
id|DS5EXTAV
(braket
l_int|7
)braket
suffix:semicolon
multiline_comment|/* seven available extents                 */
DECL|member|DS5FMTID
id|__u8
id|DS5FMTID
suffix:semicolon
multiline_comment|/* format identifier                       */
DECL|member|DS5MAVET
id|ds5ext_t
id|DS5MAVET
(braket
l_int|18
)braket
suffix:semicolon
multiline_comment|/* eighteen available extents              */
DECL|member|DS5PTRDS
id|cchhb_t
id|DS5PTRDS
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* pointer to next format5 DSCB            */
DECL|typedef|format5_label_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|format5_label_t
suffix:semicolon
DECL|struct|ds7ext
r_typedef
r_struct
id|ds7ext
(brace
DECL|member|a
id|__u32
id|a
suffix:semicolon
multiline_comment|/* starting RTA value                      */
DECL|member|b
id|__u32
id|b
suffix:semicolon
multiline_comment|/* ending RTA value + 1                    */
DECL|typedef|ds7ext_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|ds7ext_t
suffix:semicolon
DECL|struct|format7_label
r_typedef
r_struct
id|format7_label
(brace
DECL|member|DS7KEYID
r_char
id|DS7KEYID
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* key identifier                          */
DECL|member|DS7EXTNT
id|ds7ext_t
id|DS7EXTNT
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* space for 5 extent descriptions         */
DECL|member|DS7FMTID
id|__u8
id|DS7FMTID
suffix:semicolon
multiline_comment|/* format identifier                       */
DECL|member|DS7ADEXT
id|ds7ext_t
id|DS7ADEXT
(braket
l_int|11
)braket
suffix:semicolon
multiline_comment|/* space for 11 extent descriptions        */
DECL|member|res1
r_char
id|res1
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* reserved                                */
DECL|member|DS7PTRDS
id|cchhb_t
id|DS7PTRDS
suffix:semicolon
multiline_comment|/* pointer to next FMT7 DSCB               */
DECL|typedef|format7_label_t
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
id|format7_label_t
suffix:semicolon
r_char
op_star
id|vtoc_ebcdic_enc
(paren
r_int
r_char
id|source
(braket
id|LINE_LENGTH
)braket
comma
r_int
r_char
id|target
(braket
id|LINE_LENGTH
)braket
comma
r_int
id|l
)paren
suffix:semicolon
r_char
op_star
id|vtoc_ebcdic_dec
(paren
r_int
r_char
id|source
(braket
id|LINE_LENGTH
)braket
comma
r_int
r_char
id|target
(braket
id|LINE_LENGTH
)braket
comma
r_int
id|l
)paren
suffix:semicolon
r_void
id|vtoc_set_extent
(paren
id|extent_t
op_star
id|ext
comma
id|__u8
id|typeind
comma
id|__u8
id|seqno
comma
id|cchh_t
op_star
id|lower
comma
id|cchh_t
op_star
id|upper
)paren
suffix:semicolon
r_void
id|vtoc_set_cchh
(paren
id|cchh_t
op_star
id|addr
comma
id|__u16
id|cc
comma
id|__u16
id|hh
)paren
suffix:semicolon
r_void
id|vtoc_set_cchhb
(paren
id|cchhb_t
op_star
id|addr
comma
id|__u16
id|cc
comma
id|__u16
id|hh
comma
id|__u8
id|b
)paren
suffix:semicolon
r_void
id|vtoc_set_date
(paren
id|labeldate_t
op_star
id|d
comma
id|__u8
id|year
comma
id|__u16
id|day
)paren
suffix:semicolon
r_void
id|vtoc_volume_label_init
(paren
id|volume_label_t
op_star
id|vlabel
)paren
suffix:semicolon
r_int
id|vtoc_read_volume_label
(paren
r_char
op_star
id|device
comma
r_int
r_int
id|vlabel_start
comma
id|volume_label_t
op_star
id|vlabel
)paren
suffix:semicolon
r_int
id|vtoc_write_volume_label
(paren
r_char
op_star
id|device
comma
r_int
r_int
id|vlabel_start
comma
id|volume_label_t
op_star
id|vlabel
)paren
suffix:semicolon
r_void
id|vtoc_volume_label_set_volser
(paren
id|volume_label_t
op_star
id|vlabel
comma
r_char
op_star
id|volser
)paren
suffix:semicolon
r_char
op_star
id|vtoc_volume_label_get_volser
(paren
id|volume_label_t
op_star
id|vlabel
comma
r_char
op_star
id|volser
)paren
suffix:semicolon
r_void
id|vtoc_volume_label_set_key
(paren
id|volume_label_t
op_star
id|vlabel
comma
r_char
op_star
id|key
)paren
suffix:semicolon
r_void
id|vtoc_volume_label_set_label
(paren
id|volume_label_t
op_star
id|vlabel
comma
r_char
op_star
id|lbl
)paren
suffix:semicolon
r_char
op_star
id|vtoc_volume_label_get_label
(paren
id|volume_label_t
op_star
id|vlabel
comma
r_char
op_star
id|lbl
)paren
suffix:semicolon
r_void
id|vtoc_read_label
(paren
r_char
op_star
id|device
comma
r_int
r_int
id|position
comma
id|format1_label_t
op_star
id|f1
comma
id|format4_label_t
op_star
id|f4
comma
id|format5_label_t
op_star
id|f5
comma
id|format7_label_t
op_star
id|f7
)paren
suffix:semicolon
r_void
id|vtoc_write_label
(paren
r_char
op_star
id|device
comma
r_int
r_int
id|position
comma
id|format1_label_t
op_star
id|f1
comma
id|format4_label_t
op_star
id|f4
comma
id|format5_label_t
op_star
id|f5
comma
id|format7_label_t
op_star
id|f7
)paren
suffix:semicolon
r_void
id|vtoc_init_format1_label
(paren
r_char
op_star
id|volid
comma
r_int
r_int
id|blksize
comma
id|extent_t
op_star
id|part_extent
comma
id|format1_label_t
op_star
id|f1
)paren
suffix:semicolon
r_void
id|vtoc_init_format4_label
(paren
id|format4_label_t
op_star
id|f4lbl
comma
r_int
r_int
id|usable_partitions
comma
r_int
r_int
id|cylinders
comma
r_int
r_int
id|tracks
comma
r_int
r_int
id|blocks
comma
r_int
r_int
id|blksize
comma
id|__u16
id|dev_type
)paren
suffix:semicolon
r_void
id|vtoc_update_format4_label
(paren
id|format4_label_t
op_star
id|f4
comma
id|cchhb_t
op_star
id|highest_f1
comma
id|__u16
id|unused_update
)paren
suffix:semicolon
r_void
id|vtoc_init_format5_label
(paren
id|format5_label_t
op_star
id|f5
)paren
suffix:semicolon
r_void
id|vtoc_update_format5_label_add
(paren
id|format5_label_t
op_star
id|f5
comma
r_int
id|verbose
comma
r_int
id|cyl
comma
r_int
id|trk
comma
id|__u16
id|a
comma
id|__u16
id|b
comma
id|__u8
id|c
)paren
suffix:semicolon
r_void
id|vtoc_update_format5_label_del
(paren
id|format5_label_t
op_star
id|f5
comma
r_int
id|verbose
comma
r_int
id|cyl
comma
r_int
id|trk
comma
id|__u16
id|a
comma
id|__u16
id|b
comma
id|__u8
id|c
)paren
suffix:semicolon
r_void
id|vtoc_init_format7_label
(paren
id|format7_label_t
op_star
id|f7
)paren
suffix:semicolon
r_void
id|vtoc_update_format7_label_add
(paren
id|format7_label_t
op_star
id|f7
comma
r_int
id|verbose
comma
id|__u32
id|a
comma
id|__u32
id|b
)paren
suffix:semicolon
r_void
id|vtoc_update_format7_label_del
(paren
id|format7_label_t
op_star
id|f7
comma
r_int
id|verbose
comma
id|__u32
id|a
comma
id|__u32
id|b
)paren
suffix:semicolon
r_void
id|vtoc_set_freespace
c_func
(paren
id|format4_label_t
op_star
id|f4
comma
id|format5_label_t
op_star
id|f5
comma
id|format7_label_t
op_star
id|f7
comma
r_char
id|ch
comma
r_int
id|verbose
comma
id|__u32
id|start
comma
id|__u32
id|stop
comma
r_int
id|cyl
comma
r_int
id|trk
)paren
suffix:semicolon
eof
