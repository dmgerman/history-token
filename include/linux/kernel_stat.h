macro_line|#ifndef _LINUX_KERNEL_STAT_H
DECL|macro|_LINUX_KERNEL_STAT_H
mdefine_line|#define _LINUX_KERNEL_STAT_H
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;linux/smp.h&gt;
macro_line|#include &lt;linux/threads.h&gt;
multiline_comment|/*&n; * &squot;kernel_stat.h&squot; contains the definitions needed for doing&n; * some kernel statistics (CPU usage, context switches ...),&n; * used by rstatd/perfmeter&n; */
DECL|macro|DK_MAX_MAJOR
mdefine_line|#define DK_MAX_MAJOR 16
DECL|macro|DK_MAX_DISK
mdefine_line|#define DK_MAX_DISK 16
DECL|struct|kernel_stat
r_struct
id|kernel_stat
(brace
DECL|member|per_cpu_user
r_int
r_int
id|per_cpu_user
(braket
id|NR_CPUS
)braket
comma
DECL|member|per_cpu_nice
id|per_cpu_nice
(braket
id|NR_CPUS
)braket
comma
DECL|member|per_cpu_system
id|per_cpu_system
(braket
id|NR_CPUS
)braket
suffix:semicolon
DECL|member|dk_drive
r_int
r_int
id|dk_drive
(braket
id|DK_MAX_MAJOR
)braket
(braket
id|DK_MAX_DISK
)braket
suffix:semicolon
DECL|member|dk_drive_rio
r_int
r_int
id|dk_drive_rio
(braket
id|DK_MAX_MAJOR
)braket
(braket
id|DK_MAX_DISK
)braket
suffix:semicolon
DECL|member|dk_drive_wio
r_int
r_int
id|dk_drive_wio
(braket
id|DK_MAX_MAJOR
)braket
(braket
id|DK_MAX_DISK
)braket
suffix:semicolon
DECL|member|dk_drive_rblk
r_int
r_int
id|dk_drive_rblk
(braket
id|DK_MAX_MAJOR
)braket
(braket
id|DK_MAX_DISK
)braket
suffix:semicolon
DECL|member|dk_drive_wblk
r_int
r_int
id|dk_drive_wblk
(braket
id|DK_MAX_MAJOR
)braket
(braket
id|DK_MAX_DISK
)braket
suffix:semicolon
macro_line|#if !defined(CONFIG_ARCH_S390)
DECL|member|irqs
r_int
r_int
id|irqs
(braket
id|NR_CPUS
)braket
(braket
id|NR_IRQS
)braket
suffix:semicolon
macro_line|#endif
)brace
suffix:semicolon
r_extern
r_struct
id|kernel_stat
id|kstat
suffix:semicolon
r_extern
r_int
r_int
id|nr_context_switches
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/*&n; * Maybe we need to smp-ify kernel_stat some day. It would be nice to do&n; * that without having to modify all the code that increments the stats.&n; */
DECL|macro|KERNEL_STAT_INC
mdefine_line|#define KERNEL_STAT_INC(x) kstat.x++
DECL|macro|KERNEL_STAT_ADD
mdefine_line|#define KERNEL_STAT_ADD(x, y) kstat.x += y
macro_line|#if !defined(CONFIG_ARCH_S390)
multiline_comment|/*&n; * Number of interrupts per specific IRQ source, since bootup&n; */
DECL|function|kstat_irqs
r_static
r_inline
r_int
id|kstat_irqs
(paren
r_int
id|irq
)paren
(brace
r_int
id|i
comma
id|sum
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|NR_CPUS
suffix:semicolon
id|i
op_increment
)paren
id|sum
op_add_assign
id|kstat.irqs
(braket
id|i
)braket
(braket
id|irq
)braket
suffix:semicolon
r_return
id|sum
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif /* _LINUX_KERNEL_STAT_H */
eof
