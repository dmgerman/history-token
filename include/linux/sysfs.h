multiline_comment|/*&n; * sysfs.h - definitions for the device driver filesystem&n; *&n; * Copyright (c) 2001,2002 Patrick Mochel&n; * Copyright (c) 2004 Silicon Graphics, Inc.&n; *&n; * Please see Documentation/filesystems/sysfs.txt for more information.&n; */
macro_line|#ifndef _SYSFS_H_
DECL|macro|_SYSFS_H_
mdefine_line|#define _SYSFS_H_
macro_line|#include &lt;asm/atomic.h&gt;
r_struct
id|kobject
suffix:semicolon
r_struct
id|module
suffix:semicolon
DECL|struct|attribute
r_struct
id|attribute
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|owner
r_struct
id|module
op_star
id|owner
suffix:semicolon
DECL|member|mode
id|mode_t
id|mode
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|attribute_group
r_struct
id|attribute_group
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|attrs
r_struct
id|attribute
op_star
op_star
id|attrs
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/**&n; * Use these macros to make defining attributes easier. See include/linux/device.h&n; * for examples..&n; */
DECL|macro|__ATTR
mdefine_line|#define __ATTR(_name,_mode,_show,_store) { &bslash;&n;&t;.attr = {.name = __stringify(_name), .mode = _mode, .owner = THIS_MODULE },&t;&bslash;&n;&t;.show&t;= _show,&t;&t;&t;&t;&t;&bslash;&n;&t;.store&t;= _store,&t;&t;&t;&t;&t;&bslash;&n;}
DECL|macro|__ATTR_RO
mdefine_line|#define __ATTR_RO(_name) { &bslash;&n;&t;.attr&t;= { .name = __stringify(_name), .mode = 0444, .owner = THIS_MODULE },&t;&bslash;&n;&t;.show&t;= _name##_show,&t;&bslash;&n;}
DECL|macro|__ATTR_NULL
mdefine_line|#define __ATTR_NULL { .attr = { .name = NULL } }
DECL|macro|attr_name
mdefine_line|#define attr_name(_attr) (_attr).attr.name
r_struct
id|vm_area_struct
suffix:semicolon
DECL|struct|bin_attribute
r_struct
id|bin_attribute
(brace
DECL|member|attr
r_struct
id|attribute
id|attr
suffix:semicolon
DECL|member|size
r_int
id|size
suffix:semicolon
DECL|member|private
r_void
op_star
r_private
suffix:semicolon
DECL|member|read
id|ssize_t
(paren
op_star
id|read
)paren
(paren
r_struct
id|kobject
op_star
comma
r_char
op_star
comma
id|loff_t
comma
r_int
)paren
suffix:semicolon
DECL|member|write
id|ssize_t
(paren
op_star
id|write
)paren
(paren
r_struct
id|kobject
op_star
comma
r_char
op_star
comma
id|loff_t
comma
r_int
)paren
suffix:semicolon
DECL|member|mmap
r_int
(paren
op_star
id|mmap
)paren
(paren
r_struct
id|kobject
op_star
comma
r_struct
id|bin_attribute
op_star
id|attr
comma
r_struct
id|vm_area_struct
op_star
id|vma
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|sysfs_ops
r_struct
id|sysfs_ops
(brace
DECL|member|show
id|ssize_t
(paren
op_star
id|show
)paren
(paren
r_struct
id|kobject
op_star
comma
r_struct
id|attribute
op_star
comma
r_char
op_star
)paren
suffix:semicolon
DECL|member|store
id|ssize_t
(paren
op_star
id|store
)paren
(paren
r_struct
id|kobject
op_star
comma
r_struct
id|attribute
op_star
comma
r_const
r_char
op_star
comma
r_int
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|sysfs_dirent
r_struct
id|sysfs_dirent
(brace
DECL|member|s_count
id|atomic_t
id|s_count
suffix:semicolon
DECL|member|s_sibling
r_struct
id|list_head
id|s_sibling
suffix:semicolon
DECL|member|s_children
r_struct
id|list_head
id|s_children
suffix:semicolon
DECL|member|s_element
r_void
op_star
id|s_element
suffix:semicolon
DECL|member|s_type
r_int
id|s_type
suffix:semicolon
DECL|member|s_mode
id|umode_t
id|s_mode
suffix:semicolon
DECL|member|s_dentry
r_struct
id|dentry
op_star
id|s_dentry
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|SYSFS_ROOT
mdefine_line|#define SYSFS_ROOT&t;&t;0x0001
DECL|macro|SYSFS_DIR
mdefine_line|#define SYSFS_DIR&t;&t;0x0002
DECL|macro|SYSFS_KOBJ_ATTR
mdefine_line|#define SYSFS_KOBJ_ATTR &t;0x0004
DECL|macro|SYSFS_KOBJ_BIN_ATTR
mdefine_line|#define SYSFS_KOBJ_BIN_ATTR&t;0x0008
DECL|macro|SYSFS_KOBJ_LINK
mdefine_line|#define SYSFS_KOBJ_LINK &t;0x0020
DECL|macro|SYSFS_NOT_PINNED
mdefine_line|#define SYSFS_NOT_PINNED&t;(SYSFS_KOBJ_ATTR | SYSFS_KOBJ_BIN_ATTR | SYSFS_KOBJ_LINK)
macro_line|#ifdef CONFIG_SYSFS
r_extern
r_int
id|sysfs_create_dir
c_func
(paren
r_struct
id|kobject
op_star
)paren
suffix:semicolon
r_extern
r_void
id|sysfs_remove_dir
c_func
(paren
r_struct
id|kobject
op_star
)paren
suffix:semicolon
r_extern
r_int
id|sysfs_rename_dir
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_char
op_star
id|new_name
)paren
suffix:semicolon
r_extern
r_int
id|sysfs_create_file
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_struct
id|attribute
op_star
)paren
suffix:semicolon
r_extern
r_int
id|sysfs_update_file
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_struct
id|attribute
op_star
)paren
suffix:semicolon
r_extern
r_void
id|sysfs_remove_file
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_struct
id|attribute
op_star
)paren
suffix:semicolon
r_extern
r_int
id|sysfs_create_link
c_func
(paren
r_struct
id|kobject
op_star
id|kobj
comma
r_struct
id|kobject
op_star
id|target
comma
r_char
op_star
id|name
)paren
suffix:semicolon
r_extern
r_void
id|sysfs_remove_link
c_func
(paren
r_struct
id|kobject
op_star
comma
r_char
op_star
id|name
)paren
suffix:semicolon
r_int
id|sysfs_create_bin_file
c_func
(paren
r_struct
id|kobject
op_star
id|kobj
comma
r_struct
id|bin_attribute
op_star
id|attr
)paren
suffix:semicolon
r_int
id|sysfs_remove_bin_file
c_func
(paren
r_struct
id|kobject
op_star
id|kobj
comma
r_struct
id|bin_attribute
op_star
id|attr
)paren
suffix:semicolon
r_int
id|sysfs_create_group
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_struct
id|attribute_group
op_star
)paren
suffix:semicolon
r_void
id|sysfs_remove_group
c_func
(paren
r_struct
id|kobject
op_star
comma
r_const
r_struct
id|attribute_group
op_star
)paren
suffix:semicolon
macro_line|#else /* CONFIG_SYSFS */
DECL|function|sysfs_create_dir
r_static
r_inline
r_int
id|sysfs_create_dir
c_func
(paren
r_struct
id|kobject
op_star
id|k
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_remove_dir
r_static
r_inline
r_void
id|sysfs_remove_dir
c_func
(paren
r_struct
id|kobject
op_star
id|k
)paren
(brace
suffix:semicolon
)brace
DECL|function|sysfs_rename_dir
r_static
r_inline
r_int
id|sysfs_rename_dir
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_char
op_star
id|new_name
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_create_file
r_static
r_inline
r_int
id|sysfs_create_file
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_struct
id|attribute
op_star
id|a
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_update_file
r_static
r_inline
r_int
id|sysfs_update_file
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_struct
id|attribute
op_star
id|a
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_remove_file
r_static
r_inline
r_void
id|sysfs_remove_file
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_struct
id|attribute
op_star
id|a
)paren
(brace
suffix:semicolon
)brace
DECL|function|sysfs_create_link
r_static
r_inline
r_int
id|sysfs_create_link
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_struct
id|kobject
op_star
id|t
comma
r_char
op_star
id|n
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_remove_link
r_static
r_inline
r_void
id|sysfs_remove_link
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_char
op_star
id|name
)paren
(brace
suffix:semicolon
)brace
DECL|function|sysfs_create_bin_file
r_static
r_inline
r_int
id|sysfs_create_bin_file
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_struct
id|bin_attribute
op_star
id|a
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_remove_bin_file
r_static
r_inline
r_int
id|sysfs_remove_bin_file
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_struct
id|bin_attribute
op_star
id|a
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_create_group
r_static
r_inline
r_int
id|sysfs_create_group
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_struct
id|attribute_group
op_star
id|g
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sysfs_remove_group
r_static
r_inline
r_void
id|sysfs_remove_group
c_func
(paren
r_struct
id|kobject
op_star
id|k
comma
r_const
r_struct
id|attribute_group
op_star
id|g
)paren
(brace
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_SYSFS */
macro_line|#endif /* _SYSFS_H_ */
eof
