multiline_comment|/* $Id: capilli.h,v 1.4.8.1 2001/09/23 22:24:33 kai Exp $&n; * &n; * Kernel CAPI 2.0 Driver Interface for Linux&n; * &n; * Copyright 1999 by Carsten Paeth &lt;calle@calle.de&gt;&n; * &n; * This software may be used and distributed according to the terms&n; * of the GNU General Public License, incorporated herein by reference.&n; *&n; */
macro_line|#ifndef __CAPILLI_H__
DECL|macro|__CAPILLI_H__
mdefine_line|#define __CAPILLI_H__
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/list.h&gt;
macro_line|#include &lt;linux/capi.h&gt;
macro_line|#include &lt;linux/kernelcapi.h&gt;
DECL|struct|capiloaddatapart
r_typedef
r_struct
id|capiloaddatapart
(brace
DECL|member|user
r_int
id|user
suffix:semicolon
multiline_comment|/* data in userspace ? */
DECL|member|len
r_int
id|len
suffix:semicolon
DECL|member|data
r_int
r_char
op_star
id|data
suffix:semicolon
DECL|typedef|capiloaddatapart
)brace
id|capiloaddatapart
suffix:semicolon
DECL|struct|capiloaddata
r_typedef
r_struct
id|capiloaddata
(brace
DECL|member|firmware
id|capiloaddatapart
id|firmware
suffix:semicolon
DECL|member|configuration
id|capiloaddatapart
id|configuration
suffix:semicolon
DECL|typedef|capiloaddata
)brace
id|capiloaddata
suffix:semicolon
DECL|struct|capicardparams
r_typedef
r_struct
id|capicardparams
(brace
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|cardtype
r_int
id|cardtype
suffix:semicolon
DECL|member|cardnr
r_int
id|cardnr
suffix:semicolon
DECL|member|membase
r_int
r_int
id|membase
suffix:semicolon
DECL|typedef|capicardparams
)brace
id|capicardparams
suffix:semicolon
r_struct
id|capi_driver
suffix:semicolon
DECL|struct|capi_ctr
r_struct
id|capi_ctr
(brace
DECL|member|driver_list
r_struct
id|list_head
id|driver_list
suffix:semicolon
multiline_comment|/* contrs by driver */
DECL|member|driver
r_struct
id|capi_driver
op_star
id|driver
suffix:semicolon
DECL|member|cnr
r_int
id|cnr
suffix:semicolon
multiline_comment|/* controller number */
DECL|member|name
r_char
id|name
(braket
l_int|32
)braket
suffix:semicolon
multiline_comment|/* name of controller */
DECL|member|cardstate
r_volatile
r_int
r_int
id|cardstate
suffix:semicolon
multiline_comment|/* controller state */
DECL|member|blocked
r_volatile
r_int
id|blocked
suffix:semicolon
multiline_comment|/* output blocked */
DECL|member|traceflag
r_int
id|traceflag
suffix:semicolon
multiline_comment|/* capi trace */
DECL|member|driverdata
r_void
op_star
id|driverdata
suffix:semicolon
multiline_comment|/* driver specific */
multiline_comment|/* filled before calling ready callback */
DECL|member|manu
id|__u8
id|manu
(braket
id|CAPI_MANUFACTURER_LEN
)braket
suffix:semicolon
multiline_comment|/* CAPI_GET_MANUFACTURER */
DECL|member|version
id|capi_version
id|version
suffix:semicolon
multiline_comment|/* CAPI_GET_VERSION */
DECL|member|profile
id|capi_profile
id|profile
suffix:semicolon
multiline_comment|/* CAPI_GET_PROFILE */
DECL|member|serial
id|__u8
id|serial
(braket
id|CAPI_SERIAL_LEN
)braket
suffix:semicolon
multiline_comment|/* CAPI_GET_SERIAL */
multiline_comment|/* functions */
DECL|member|ready
r_void
(paren
op_star
id|ready
)paren
(paren
r_struct
id|capi_ctr
op_star
id|card
)paren
suffix:semicolon
DECL|member|reseted
r_void
(paren
op_star
id|reseted
)paren
(paren
r_struct
id|capi_ctr
op_star
id|card
)paren
suffix:semicolon
DECL|member|suspend_output
r_void
(paren
op_star
id|suspend_output
)paren
(paren
r_struct
id|capi_ctr
op_star
id|card
)paren
suffix:semicolon
DECL|member|resume_output
r_void
(paren
op_star
id|resume_output
)paren
(paren
r_struct
id|capi_ctr
op_star
id|card
)paren
suffix:semicolon
DECL|member|handle_capimsg
r_void
(paren
op_star
id|handle_capimsg
)paren
(paren
r_struct
id|capi_ctr
op_star
id|card
comma
id|__u16
id|appl
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
multiline_comment|/* management information for kcapi */
DECL|member|nrecvctlpkt
r_int
r_int
id|nrecvctlpkt
suffix:semicolon
DECL|member|nrecvdatapkt
r_int
r_int
id|nrecvdatapkt
suffix:semicolon
DECL|member|nsentctlpkt
r_int
r_int
id|nsentctlpkt
suffix:semicolon
DECL|member|nsentdatapkt
r_int
r_int
id|nsentdatapkt
suffix:semicolon
DECL|member|procent
r_struct
id|proc_dir_entry
op_star
id|procent
suffix:semicolon
DECL|member|procfn
r_char
id|procfn
(braket
l_int|128
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|capi_driver
r_struct
id|capi_driver
(brace
DECL|member|owner
r_struct
id|module
op_star
id|owner
suffix:semicolon
DECL|member|name
r_char
id|name
(braket
l_int|32
)braket
suffix:semicolon
multiline_comment|/* driver name */
DECL|member|revision
r_char
id|revision
(braket
l_int|32
)braket
suffix:semicolon
DECL|member|load_firmware
r_int
(paren
op_star
id|load_firmware
)paren
(paren
r_struct
id|capi_ctr
op_star
comma
id|capiloaddata
op_star
)paren
suffix:semicolon
DECL|member|reset_ctr
r_void
(paren
op_star
id|reset_ctr
)paren
(paren
r_struct
id|capi_ctr
op_star
)paren
suffix:semicolon
DECL|member|register_appl
r_void
(paren
op_star
id|register_appl
)paren
(paren
r_struct
id|capi_ctr
op_star
comma
id|__u16
id|appl
comma
id|capi_register_params
op_star
)paren
suffix:semicolon
DECL|member|release_appl
r_void
(paren
op_star
id|release_appl
)paren
(paren
r_struct
id|capi_ctr
op_star
comma
id|__u16
id|appl
)paren
suffix:semicolon
DECL|member|send_message
id|u16
(paren
op_star
id|send_message
)paren
(paren
r_struct
id|capi_ctr
op_star
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
DECL|member|procinfo
r_char
op_star
(paren
op_star
id|procinfo
)paren
(paren
r_struct
id|capi_ctr
op_star
)paren
suffix:semicolon
DECL|member|ctr_read_proc
r_int
(paren
op_star
id|ctr_read_proc
)paren
(paren
r_char
op_star
id|page
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|off
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_struct
id|capi_ctr
op_star
id|card
)paren
suffix:semicolon
DECL|member|driver_read_proc
r_int
(paren
op_star
id|driver_read_proc
)paren
(paren
r_char
op_star
id|page
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|off
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_struct
id|capi_driver
op_star
id|driver
)paren
suffix:semicolon
multiline_comment|/* intitialized by kcapi */
DECL|member|contr_head
r_struct
id|list_head
id|contr_head
suffix:semicolon
multiline_comment|/* list of controllers */
DECL|member|driver_list
r_struct
id|list_head
id|driver_list
suffix:semicolon
DECL|member|ncontroller
r_int
id|ncontroller
suffix:semicolon
DECL|member|procent
r_struct
id|proc_dir_entry
op_star
id|procent
suffix:semicolon
DECL|member|procfn
r_char
id|procfn
(braket
l_int|128
)braket
suffix:semicolon
)brace
suffix:semicolon
r_void
id|attach_capi_driver
c_func
(paren
r_struct
id|capi_driver
op_star
id|driver
)paren
suffix:semicolon
r_void
id|detach_capi_driver
c_func
(paren
r_struct
id|capi_driver
op_star
id|driver
)paren
suffix:semicolon
r_struct
id|capi_ctr
op_star
id|attach_capi_ctr
c_func
(paren
r_struct
id|capi_driver
op_star
id|driver
comma
r_char
op_star
id|name
comma
r_void
op_star
id|data
)paren
suffix:semicolon
r_int
id|detach_capi_ctr
c_func
(paren
r_struct
id|capi_ctr
op_star
)paren
suffix:semicolon
singleline_comment|// ---------------------------------------------------------------------------
singleline_comment|// library functions for use by hardware controller drivers
r_void
id|capilib_new_ncci
c_func
(paren
r_struct
id|list_head
op_star
id|head
comma
id|u16
id|applid
comma
id|u32
id|ncci
comma
id|u32
id|winsize
)paren
suffix:semicolon
r_void
id|capilib_free_ncci
c_func
(paren
r_struct
id|list_head
op_star
id|head
comma
id|u16
id|applid
comma
id|u32
id|ncci
)paren
suffix:semicolon
r_void
id|capilib_release_appl
c_func
(paren
r_struct
id|list_head
op_star
id|head
comma
id|u16
id|applid
)paren
suffix:semicolon
r_void
id|capilib_release
c_func
(paren
r_struct
id|list_head
op_star
id|head
)paren
suffix:semicolon
r_void
id|capilib_data_b3_conf
c_func
(paren
r_struct
id|list_head
op_star
id|head
comma
id|u16
id|applid
comma
id|u32
id|ncci
comma
id|u16
id|msgid
)paren
suffix:semicolon
id|u16
id|capilib_data_b3_req
c_func
(paren
r_struct
id|list_head
op_star
id|head
comma
id|u16
id|applid
comma
id|u32
id|ncci
comma
id|u16
id|msgid
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* __CAPILLI_H__ */
eof
