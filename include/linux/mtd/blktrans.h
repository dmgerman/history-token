multiline_comment|/*&n; * $Id: blktrans.h,v 1.4 2003/05/21 01:01:32 dwmw2 Exp $&n; *&n; * (C) 2003 David Woodhouse &lt;dwmw2@infradead.org&gt;&n; *&n; * Interface to Linux block layer for MTD &squot;translation layers&squot;.&n; *&n; */
macro_line|#ifndef __MTD_TRANS_H__
DECL|macro|__MTD_TRANS_H__
mdefine_line|#define __MTD_TRANS_H__
macro_line|#include &lt;asm/semaphore.h&gt;
r_struct
id|mtd_info
suffix:semicolon
r_struct
id|mtd_blktrans_ops
suffix:semicolon
r_struct
id|file
suffix:semicolon
r_struct
id|inode
suffix:semicolon
DECL|struct|mtd_blktrans_dev
r_struct
id|mtd_blktrans_dev
(brace
DECL|member|tr
r_struct
id|mtd_blktrans_ops
op_star
id|tr
suffix:semicolon
DECL|member|list
r_struct
id|list_head
id|list
suffix:semicolon
DECL|member|mtd
r_struct
id|mtd_info
op_star
id|mtd
suffix:semicolon
DECL|member|sem
r_struct
id|semaphore
id|sem
suffix:semicolon
DECL|member|devnum
r_int
id|devnum
suffix:semicolon
DECL|member|blksize
r_int
id|blksize
suffix:semicolon
DECL|member|size
r_int
r_int
id|size
suffix:semicolon
DECL|member|readonly
r_int
id|readonly
suffix:semicolon
DECL|member|blkcore_priv
r_void
op_star
id|blkcore_priv
suffix:semicolon
multiline_comment|/* gendisk in 2.5, devfs_handle in 2.4 */
)brace
suffix:semicolon
r_struct
id|blkcore_priv
suffix:semicolon
multiline_comment|/* Differs for 2.4 and 2.5 kernels; private */
DECL|struct|mtd_blktrans_ops
r_struct
id|mtd_blktrans_ops
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|major
r_int
id|major
suffix:semicolon
DECL|member|part_bits
r_int
id|part_bits
suffix:semicolon
multiline_comment|/* Access functions */
DECL|member|readsect
r_int
(paren
op_star
id|readsect
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
comma
r_int
r_int
id|block
comma
r_char
op_star
id|buffer
)paren
suffix:semicolon
DECL|member|writesect
r_int
(paren
op_star
id|writesect
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
comma
r_int
r_int
id|block
comma
r_char
op_star
id|buffer
)paren
suffix:semicolon
multiline_comment|/* HDIO_GETGEO and HDIO_GETGEO_BIG are the only non-private&n;&t;   ioctls which are expected to be passed through */
DECL|member|ioctl
r_int
(paren
op_star
id|ioctl
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
comma
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
suffix:semicolon
multiline_comment|/* Called with mtd_table_mutex held; no race with add/remove */
DECL|member|open
r_int
(paren
op_star
id|open
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
comma
r_struct
id|inode
op_star
id|i
comma
r_struct
id|file
op_star
id|f
)paren
suffix:semicolon
DECL|member|release
r_int
(paren
op_star
id|release
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
comma
r_struct
id|inode
op_star
id|i
comma
r_struct
id|file
op_star
id|f
)paren
suffix:semicolon
multiline_comment|/* Called on {de,}registration and on subsequent addition/removal&n;&t;   of devices, with mtd_table_mutex held. */
DECL|member|add_mtd
r_void
(paren
op_star
id|add_mtd
)paren
(paren
r_struct
id|mtd_blktrans_ops
op_star
id|tr
comma
r_struct
id|mtd_info
op_star
id|mtd
)paren
suffix:semicolon
DECL|member|remove_dev
r_void
(paren
op_star
id|remove_dev
)paren
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
)paren
suffix:semicolon
DECL|member|devs
r_struct
id|list_head
id|devs
suffix:semicolon
DECL|member|list
r_struct
id|list_head
id|list
suffix:semicolon
DECL|member|owner
r_struct
id|module
op_star
id|owner
suffix:semicolon
DECL|member|blkcore_priv
r_struct
id|mtd_blkcore_priv
op_star
id|blkcore_priv
suffix:semicolon
)brace
suffix:semicolon
r_extern
r_int
id|register_mtd_blktrans
c_func
(paren
r_struct
id|mtd_blktrans_ops
op_star
id|tr
)paren
suffix:semicolon
r_extern
r_int
id|deregister_mtd_blktrans
c_func
(paren
r_struct
id|mtd_blktrans_ops
op_star
id|tr
)paren
suffix:semicolon
r_extern
r_int
id|add_mtd_blktrans_dev
c_func
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
)paren
suffix:semicolon
r_extern
r_int
id|del_mtd_blktrans_dev
c_func
(paren
r_struct
id|mtd_blktrans_dev
op_star
id|dev
)paren
suffix:semicolon
macro_line|#endif /* __MTD_TRANS_H__ */
eof
