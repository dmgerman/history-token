multiline_comment|/*&n; *&t;inftl.h -- defines to support the Inverse NAND Flash Translation Layer&n; *&n; *&t;(C) Copyright 2002, Greg Ungerer (gerg@snapgear.com)&n; *&n; *&t;$Id: inftl.h,v 1.3 2003/05/23 11:35:34 dwmw2 Exp $&n; */
macro_line|#ifndef __MTD_INFTL_H__
DECL|macro|__MTD_INFTL_H__
mdefine_line|#define __MTD_INFTL_H__
macro_line|#include &lt;linux/mtd/blktrans.h&gt;
macro_line|#include &lt;linux/mtd/mtd.h&gt;
macro_line|#include &lt;linux/mtd/nftl.h&gt;
DECL|macro|OSAK_VERSION
mdefine_line|#define&t;OSAK_VERSION&t;0x5120
DECL|macro|PERCENTUSED
mdefine_line|#define&t;PERCENTUSED&t;98
DECL|macro|SECTORSIZE
mdefine_line|#define&t;SECTORSIZE&t;512
macro_line|#ifndef INFTL_MAJOR
DECL|macro|INFTL_MAJOR
mdefine_line|#define INFTL_MAJOR 93 /* FIXME */
macro_line|#endif
DECL|macro|INFTL_PARTN_BITS
mdefine_line|#define INFTL_PARTN_BITS 4
multiline_comment|/* Block Control Information */
DECL|struct|inftl_bci
r_struct
id|inftl_bci
(brace
DECL|member|ECCsig
id|__u8
id|ECCsig
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|Status
id|__u8
id|Status
suffix:semicolon
DECL|member|Status1
id|__u8
id|Status1
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|inftl_unithead1
r_struct
id|inftl_unithead1
(brace
DECL|member|virtualUnitNo
id|__u16
id|virtualUnitNo
suffix:semicolon
DECL|member|prevUnitNo
id|__u16
id|prevUnitNo
suffix:semicolon
DECL|member|ANAC
id|__u8
id|ANAC
suffix:semicolon
DECL|member|NACs
id|__u8
id|NACs
suffix:semicolon
DECL|member|parityPerField
id|__u8
id|parityPerField
suffix:semicolon
DECL|member|discarded
id|__u8
id|discarded
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|inftl_unithead2
r_struct
id|inftl_unithead2
(brace
DECL|member|parityPerField
id|__u8
id|parityPerField
suffix:semicolon
DECL|member|ANAC
id|__u8
id|ANAC
suffix:semicolon
DECL|member|prevUnitNo
id|__u16
id|prevUnitNo
suffix:semicolon
DECL|member|virtualUnitNo
id|__u16
id|virtualUnitNo
suffix:semicolon
DECL|member|NACs
id|__u8
id|NACs
suffix:semicolon
DECL|member|discarded
id|__u8
id|discarded
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|inftl_unittail
r_struct
id|inftl_unittail
(brace
DECL|member|Reserved
id|__u8
id|Reserved
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|EraseMark
id|__u16
id|EraseMark
suffix:semicolon
DECL|member|EraseMark1
id|__u16
id|EraseMark1
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|union|inftl_uci
r_union
id|inftl_uci
(brace
DECL|member|a
r_struct
id|inftl_unithead1
id|a
suffix:semicolon
DECL|member|b
r_struct
id|inftl_unithead2
id|b
suffix:semicolon
DECL|member|c
r_struct
id|inftl_unittail
id|c
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|inftl_oob
r_struct
id|inftl_oob
(brace
DECL|member|b
r_struct
id|inftl_bci
id|b
suffix:semicolon
DECL|member|u
r_union
id|inftl_uci
id|u
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* INFTL Media Header */
DECL|struct|INFTLPartition
r_struct
id|INFTLPartition
(brace
DECL|member|virtualUnits
id|__u32
id|virtualUnits
suffix:semicolon
DECL|member|firstUnit
id|__u32
id|firstUnit
suffix:semicolon
DECL|member|lastUnit
id|__u32
id|lastUnit
suffix:semicolon
DECL|member|flags
id|__u32
id|flags
suffix:semicolon
DECL|member|spareUnits
id|__u32
id|spareUnits
suffix:semicolon
DECL|member|Reserved0
id|__u32
id|Reserved0
suffix:semicolon
DECL|member|Reserved1
id|__u32
id|Reserved1
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|INFTLMediaHeader
r_struct
id|INFTLMediaHeader
(brace
DECL|member|bootRecordID
r_char
id|bootRecordID
(braket
l_int|8
)braket
suffix:semicolon
DECL|member|NoOfBootImageBlocks
id|__u32
id|NoOfBootImageBlocks
suffix:semicolon
DECL|member|NoOfBinaryPartitions
id|__u32
id|NoOfBinaryPartitions
suffix:semicolon
DECL|member|NoOfBDTLPartitions
id|__u32
id|NoOfBDTLPartitions
suffix:semicolon
DECL|member|BlockMultiplierBits
id|__u32
id|BlockMultiplierBits
suffix:semicolon
DECL|member|FormatFlags
id|__u32
id|FormatFlags
suffix:semicolon
DECL|member|OsakVersion
id|__u32
id|OsakVersion
suffix:semicolon
DECL|member|PercentUsed
id|__u32
id|PercentUsed
suffix:semicolon
DECL|member|Partitions
r_struct
id|INFTLPartition
id|Partitions
(braket
l_int|4
)braket
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
multiline_comment|/* Partition flag types */
DECL|macro|INFTL_BINARY
mdefine_line|#define&t;INFTL_BINARY&t;0x20000000
DECL|macro|INFTL_BDTL
mdefine_line|#define&t;INFTL_BDTL&t;0x40000000
DECL|macro|INFTL_LAST
mdefine_line|#define&t;INFTL_LAST&t;0x80000000
macro_line|#ifdef __KERNEL__
DECL|struct|INFTLrecord
r_struct
id|INFTLrecord
(brace
DECL|member|mbd
r_struct
id|mtd_blktrans_dev
id|mbd
suffix:semicolon
DECL|member|MediaUnit
DECL|member|SpareMediaUnit
id|__u16
id|MediaUnit
comma
id|SpareMediaUnit
suffix:semicolon
DECL|member|EraseSize
id|__u32
id|EraseSize
suffix:semicolon
DECL|member|MediaHdr
r_struct
id|INFTLMediaHeader
id|MediaHdr
suffix:semicolon
DECL|member|usecount
r_int
id|usecount
suffix:semicolon
DECL|member|heads
r_int
r_char
id|heads
suffix:semicolon
DECL|member|sectors
r_int
r_char
id|sectors
suffix:semicolon
DECL|member|cylinders
r_int
r_int
id|cylinders
suffix:semicolon
DECL|member|numvunits
id|__u16
id|numvunits
suffix:semicolon
DECL|member|firstEUN
id|__u16
id|firstEUN
suffix:semicolon
DECL|member|lastEUN
id|__u16
id|lastEUN
suffix:semicolon
DECL|member|numfreeEUNs
id|__u16
id|numfreeEUNs
suffix:semicolon
DECL|member|LastFreeEUN
id|__u16
id|LastFreeEUN
suffix:semicolon
multiline_comment|/* To speed up finding a free EUN */
DECL|member|head
DECL|member|sect
DECL|member|cyl
r_int
id|head
comma
id|sect
comma
id|cyl
suffix:semicolon
DECL|member|PUtable
id|__u16
op_star
id|PUtable
suffix:semicolon
multiline_comment|/* Physical Unit Table  */
DECL|member|VUtable
id|__u16
op_star
id|VUtable
suffix:semicolon
multiline_comment|/* Virtual Unit Table */
DECL|member|nb_blocks
r_int
r_int
id|nb_blocks
suffix:semicolon
multiline_comment|/* number of physical blocks */
DECL|member|nb_boot_blocks
r_int
r_int
id|nb_boot_blocks
suffix:semicolon
multiline_comment|/* number of blocks used by the bios */
DECL|member|instr
r_struct
id|erase_info
id|instr
suffix:semicolon
)brace
suffix:semicolon
r_int
id|INFTL_mount
c_func
(paren
r_struct
id|INFTLrecord
op_star
id|s
)paren
suffix:semicolon
r_int
id|INFTL_formatblock
c_func
(paren
r_struct
id|INFTLrecord
op_star
id|s
comma
r_int
id|block
)paren
suffix:semicolon
macro_line|#endif /* __KERNEL__ */
macro_line|#endif /* __MTD_INFTL_H__ */
eof
