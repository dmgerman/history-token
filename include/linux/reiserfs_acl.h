macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/posix_acl.h&gt;
macro_line|#include &lt;linux/xattr_acl.h&gt;
DECL|macro|REISERFS_ACL_VERSION
mdefine_line|#define REISERFS_ACL_VERSION&t;0x0001
r_typedef
r_struct
(brace
DECL|member|e_tag
id|__u16
id|e_tag
suffix:semicolon
DECL|member|e_perm
id|__u16
id|e_perm
suffix:semicolon
DECL|member|e_id
id|__u32
id|e_id
suffix:semicolon
DECL|typedef|reiserfs_acl_entry
)brace
id|reiserfs_acl_entry
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|e_tag
id|__u16
id|e_tag
suffix:semicolon
DECL|member|e_perm
id|__u16
id|e_perm
suffix:semicolon
DECL|typedef|reiserfs_acl_entry_short
)brace
id|reiserfs_acl_entry_short
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|a_version
id|__u32
id|a_version
suffix:semicolon
DECL|typedef|reiserfs_acl_header
)brace
id|reiserfs_acl_header
suffix:semicolon
DECL|function|reiserfs_acl_size
r_static
r_inline
r_int
id|reiserfs_acl_size
c_func
(paren
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
op_le
l_int|4
)paren
(brace
r_return
r_sizeof
(paren
id|reiserfs_acl_header
)paren
op_plus
id|count
op_star
r_sizeof
(paren
id|reiserfs_acl_entry_short
)paren
suffix:semicolon
)brace
r_else
(brace
r_return
r_sizeof
(paren
id|reiserfs_acl_header
)paren
op_plus
l_int|4
op_star
r_sizeof
(paren
id|reiserfs_acl_entry_short
)paren
op_plus
(paren
id|count
op_minus
l_int|4
)paren
op_star
r_sizeof
(paren
id|reiserfs_acl_entry
)paren
suffix:semicolon
)brace
)brace
DECL|function|reiserfs_acl_count
r_static
r_inline
r_int
id|reiserfs_acl_count
c_func
(paren
r_int
id|size
)paren
(brace
id|ssize_t
id|s
suffix:semicolon
id|size
op_sub_assign
r_sizeof
(paren
id|reiserfs_acl_header
)paren
suffix:semicolon
id|s
op_assign
id|size
op_minus
l_int|4
op_star
r_sizeof
(paren
id|reiserfs_acl_entry_short
)paren
suffix:semicolon
r_if
c_cond
(paren
id|s
OL
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|size
op_mod
r_sizeof
(paren
id|reiserfs_acl_entry_short
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
id|size
op_div
r_sizeof
(paren
id|reiserfs_acl_entry_short
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|s
op_mod
r_sizeof
(paren
id|reiserfs_acl_entry
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
id|s
op_div
r_sizeof
(paren
id|reiserfs_acl_entry
)paren
op_plus
l_int|4
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_REISERFS_FS_POSIX_ACL
r_struct
id|posix_acl
op_star
id|reiserfs_get_acl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_int
id|type
)paren
suffix:semicolon
r_int
id|reiserfs_acl_chmod
(paren
r_struct
id|inode
op_star
id|inode
)paren
suffix:semicolon
r_int
id|reiserfs_inherit_default_acl
(paren
r_struct
id|inode
op_star
id|dir
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_struct
id|inode
op_star
id|inode
)paren
suffix:semicolon
r_int
id|reiserfs_cache_default_acl
(paren
r_struct
id|inode
op_star
id|dir
)paren
suffix:semicolon
r_extern
r_int
id|reiserfs_xattr_posix_acl_init
(paren
r_void
)paren
id|__init
suffix:semicolon
r_extern
r_int
id|reiserfs_xattr_posix_acl_exit
(paren
r_void
)paren
suffix:semicolon
r_extern
r_struct
id|reiserfs_xattr_handler
id|posix_acl_default_handler
suffix:semicolon
r_extern
r_struct
id|reiserfs_xattr_handler
id|posix_acl_access_handler
suffix:semicolon
macro_line|#else
DECL|macro|reiserfs_get_acl
mdefine_line|#define reiserfs_get_acl NULL
DECL|macro|reiserfs_cache_default_acl
mdefine_line|#define reiserfs_cache_default_acl(inode) 0
r_static
r_inline
r_int
DECL|function|reiserfs_xattr_posix_acl_init
id|reiserfs_xattr_posix_acl_init
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|reiserfs_xattr_posix_acl_exit
id|reiserfs_xattr_posix_acl_exit
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|reiserfs_acl_chmod
id|reiserfs_acl_chmod
(paren
r_struct
id|inode
op_star
id|inode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|reiserfs_inherit_default_acl
id|reiserfs_inherit_default_acl
(paren
r_const
r_struct
id|inode
op_star
id|dir
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_struct
id|inode
op_star
id|inode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
eof
