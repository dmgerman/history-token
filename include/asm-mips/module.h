macro_line|#ifndef _ASM_MIPS_MODULE_H
DECL|macro|_ASM_MIPS_MODULE_H
mdefine_line|#define _ASM_MIPS_MODULE_H
multiline_comment|/*&n; * This file contains the mips architecture specific module code.&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
DECL|macro|module_map
mdefine_line|#define module_map(x)&t;&t;vmalloc(x)
DECL|macro|module_unmap
mdefine_line|#define module_unmap(x)&t;&t;vfree(x)
DECL|macro|module_arch_init
mdefine_line|#define module_arch_init(x)&t;mips_module_init(x)
DECL|macro|arch_init_modules
mdefine_line|#define arch_init_modules(x)&t;mips_init_modules(x)
multiline_comment|/*&n; * This must match in size and layout the data created by&n; * modutils/obj/obj-mips.c&n; */
DECL|struct|archdata
r_struct
id|archdata
(brace
DECL|member|dbe_table_start
r_const
r_struct
id|exception_table_entry
op_star
id|dbe_table_start
suffix:semicolon
DECL|member|dbe_table_end
r_const
r_struct
id|exception_table_entry
op_star
id|dbe_table_end
suffix:semicolon
)brace
suffix:semicolon
r_static
r_inline
r_int
DECL|function|mips_module_init
id|mips_module_init
c_func
(paren
r_struct
id|module
op_star
id|mod
)paren
(brace
r_struct
id|archdata
op_star
id|archdata
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mod_member_present
c_func
(paren
id|mod
comma
id|archdata_end
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|archdata
op_assign
(paren
r_struct
id|archdata
op_star
)paren
(paren
id|mod-&gt;archdata_start
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mod_archdata_member_present
c_func
(paren
id|mod
comma
r_struct
id|archdata
comma
id|dbe_table_end
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|archdata-&gt;dbe_table_start
OG
id|archdata-&gt;dbe_table_end
op_logical_or
(paren
id|archdata-&gt;dbe_table_start
op_logical_and
op_logical_neg
(paren
(paren
r_int
r_int
)paren
id|archdata-&gt;dbe_table_start
op_ge
(paren
(paren
r_int
r_int
)paren
id|mod
op_plus
id|mod-&gt;size_of_struct
)paren
op_logical_and
(paren
(paren
r_int
r_int
)paren
id|archdata-&gt;dbe_table_end
OL
(paren
r_int
r_int
)paren
id|mod
op_plus
id|mod-&gt;size
)paren
)paren
)paren
op_logical_or
(paren
(paren
(paren
r_int
r_int
)paren
id|archdata-&gt;dbe_table_start
op_minus
(paren
r_int
r_int
)paren
id|archdata-&gt;dbe_table_end
)paren
op_mod
r_sizeof
(paren
r_struct
id|exception_table_entry
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;module_arch_init: archdata-&gt;dbe_table_* invalid.&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|mips_init_modules
id|mips_init_modules
c_func
(paren
r_struct
id|module
op_star
id|mod
)paren
(brace
r_extern
r_const
r_struct
id|exception_table_entry
id|__start___dbe_table
(braket
)braket
suffix:semicolon
r_extern
r_const
r_struct
id|exception_table_entry
id|__stop___dbe_table
(braket
)braket
suffix:semicolon
r_static
r_struct
id|archdata
id|archdata
op_assign
(brace
id|dbe_table_start
suffix:colon
id|__start___dbe_table
comma
id|dbe_table_end
suffix:colon
id|__stop___dbe_table
comma
)brace
suffix:semicolon
id|mod-&gt;archdata_start
op_assign
(paren
r_char
op_star
)paren
op_amp
id|archdata
suffix:semicolon
id|mod-&gt;archdata_end
op_assign
id|mod-&gt;archdata_start
op_plus
r_sizeof
(paren
id|archdata
)paren
suffix:semicolon
)brace
macro_line|#endif /* _ASM_MIPS_MODULE_H */
eof
