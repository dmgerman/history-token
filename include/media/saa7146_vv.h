macro_line|#ifndef __SAA7146_VV__
DECL|macro|__SAA7146_VV__
mdefine_line|#define __SAA7146_VV__
macro_line|#include &lt;linux/videodev2.h&gt;
macro_line|#include &lt;media/saa7146.h&gt;
macro_line|#include &lt;media/video-buf.h&gt;
DECL|macro|MAX_SAA7146_CAPTURE_BUFFERS
mdefine_line|#define MAX_SAA7146_CAPTURE_BUFFERS&t;32&t;/* arbitrary */
DECL|macro|BUFFER_TIMEOUT
mdefine_line|#define BUFFER_TIMEOUT     (HZ/2)  /* 0.5 seconds */
DECL|macro|WRITE_RPS0
mdefine_line|#define WRITE_RPS0(x) do { &bslash;&n;&t;dev-&gt;d_rps0.cpu_addr[ count++ ] = cpu_to_le32(x); &bslash;&n;&t;} while (0);
DECL|macro|WRITE_RPS1
mdefine_line|#define WRITE_RPS1(x) do { &bslash;&n;&t;dev-&gt;d_rps1.cpu_addr[ count++ ] = cpu_to_le32(x); &bslash;&n;&t;} while (0);
DECL|struct|saa7146_video_dma
r_struct
id|saa7146_video_dma
(brace
DECL|member|base_odd
id|u32
id|base_odd
suffix:semicolon
DECL|member|base_even
id|u32
id|base_even
suffix:semicolon
DECL|member|prot_addr
id|u32
id|prot_addr
suffix:semicolon
DECL|member|pitch
id|u32
id|pitch
suffix:semicolon
DECL|member|base_page
id|u32
id|base_page
suffix:semicolon
DECL|member|num_line_byte
id|u32
id|num_line_byte
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|FORMAT_BYTE_SWAP
mdefine_line|#define FORMAT_BYTE_SWAP&t;0x1
DECL|macro|FORMAT_IS_PLANAR
mdefine_line|#define FORMAT_IS_PLANAR&t;0x2
DECL|struct|saa7146_format
r_struct
id|saa7146_format
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|pixelformat
id|u32
id|pixelformat
suffix:semicolon
DECL|member|trans
id|u32
id|trans
suffix:semicolon
DECL|member|depth
id|u8
id|depth
suffix:semicolon
DECL|member|flags
id|u8
id|flags
suffix:semicolon
DECL|member|swap
id|u8
id|swap
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|saa7146_standard
r_struct
id|saa7146_standard
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|id
id|v4l2_std_id
id|id
suffix:semicolon
DECL|member|v_offset
r_int
id|v_offset
suffix:semicolon
multiline_comment|/* number of lines of vertical offset before processing */
DECL|member|v_field
r_int
id|v_field
suffix:semicolon
multiline_comment|/* number of lines in a field for HPS to process */
DECL|member|h_offset
r_int
id|h_offset
suffix:semicolon
multiline_comment|/* horizontal offset of processing window */
DECL|member|h_pixels
r_int
id|h_pixels
suffix:semicolon
multiline_comment|/* number of horizontal pixels to process */
DECL|member|v_max_out
r_int
id|v_max_out
suffix:semicolon
DECL|member|h_max_out
r_int
id|h_max_out
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* buffer for one video/vbi frame */
DECL|struct|saa7146_buf
r_struct
id|saa7146_buf
(brace
multiline_comment|/* common v4l buffer stuff -- must be first */
DECL|member|vb
r_struct
id|videobuf_buffer
id|vb
suffix:semicolon
multiline_comment|/* saa7146 specific */
DECL|member|fmt
r_struct
id|v4l2_pix_format
op_star
id|fmt
suffix:semicolon
DECL|member|activate
r_int
(paren
op_star
id|activate
)paren
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_buf
op_star
id|buf
comma
r_struct
id|saa7146_buf
op_star
id|next
)paren
suffix:semicolon
multiline_comment|/* page tables */
DECL|member|pt
r_struct
id|saa7146_pgtable
id|pt
(braket
l_int|3
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|saa7146_dmaqueue
r_struct
id|saa7146_dmaqueue
(brace
DECL|member|dev
r_struct
id|saa7146_dev
op_star
id|dev
suffix:semicolon
DECL|member|curr
r_struct
id|saa7146_buf
op_star
id|curr
suffix:semicolon
DECL|member|queue
r_struct
id|list_head
id|queue
suffix:semicolon
DECL|member|timeout
r_struct
id|timer_list
id|timeout
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|saa7146_overlay
r_struct
id|saa7146_overlay
(brace
DECL|member|fh
r_struct
id|saa7146_fh
op_star
id|fh
suffix:semicolon
DECL|member|win
r_struct
id|v4l2_window
id|win
suffix:semicolon
DECL|member|clips
r_struct
id|v4l2_clip
id|clips
(braket
l_int|16
)braket
suffix:semicolon
DECL|member|nclips
r_int
id|nclips
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* per open data */
DECL|struct|saa7146_fh
r_struct
id|saa7146_fh
(brace
DECL|member|dev
r_struct
id|saa7146_dev
op_star
id|dev
suffix:semicolon
multiline_comment|/* if this is a vbi or capture open */
DECL|member|type
r_enum
id|v4l2_buf_type
id|type
suffix:semicolon
multiline_comment|/* video overlay */
DECL|member|ov
r_struct
id|saa7146_overlay
id|ov
suffix:semicolon
multiline_comment|/* video capture */
DECL|member|video_q
r_struct
id|videobuf_queue
id|video_q
suffix:semicolon
DECL|member|video_fmt
r_struct
id|v4l2_pix_format
id|video_fmt
suffix:semicolon
multiline_comment|/* vbi capture */
DECL|member|vbi_q
r_struct
id|videobuf_queue
id|vbi_q
suffix:semicolon
DECL|member|vbi_fmt
r_struct
id|v4l2_vbi_format
id|vbi_fmt
suffix:semicolon
DECL|member|vbi_read_timeout
r_struct
id|timer_list
id|vbi_read_timeout
suffix:semicolon
DECL|member|resources
r_int
r_int
id|resources
suffix:semicolon
multiline_comment|/* resource management for device open */
)brace
suffix:semicolon
DECL|macro|STATUS_OVERLAY
mdefine_line|#define STATUS_OVERLAY&t;0x01
DECL|macro|STATUS_CAPTURE
mdefine_line|#define STATUS_CAPTURE&t;0x02
DECL|struct|saa7146_vv
r_struct
id|saa7146_vv
(brace
DECL|member|vbi_minor
r_int
id|vbi_minor
suffix:semicolon
multiline_comment|/* vbi capture */
DECL|member|vbi_q
r_struct
id|saa7146_dmaqueue
id|vbi_q
suffix:semicolon
multiline_comment|/* vbi workaround interrupt queue */
DECL|member|vbi_wq
id|wait_queue_head_t
id|vbi_wq
suffix:semicolon
DECL|member|vbi_fieldcount
r_int
id|vbi_fieldcount
suffix:semicolon
DECL|member|vbi_streaming
r_struct
id|saa7146_fh
op_star
id|vbi_streaming
suffix:semicolon
DECL|member|video_minor
r_int
id|video_minor
suffix:semicolon
DECL|member|video_status
r_int
id|video_status
suffix:semicolon
DECL|member|video_fh
r_struct
id|saa7146_fh
op_star
id|video_fh
suffix:semicolon
multiline_comment|/* video overlay */
DECL|member|ov_fb
r_struct
id|v4l2_framebuffer
id|ov_fb
suffix:semicolon
DECL|member|ov_fmt
r_struct
id|saa7146_format
op_star
id|ov_fmt
suffix:semicolon
DECL|member|ov_data
r_struct
id|saa7146_overlay
op_star
id|ov_data
suffix:semicolon
DECL|member|ov_suspend
r_struct
id|saa7146_fh
op_star
id|ov_suspend
suffix:semicolon
multiline_comment|/* video capture */
DECL|member|video_q
r_struct
id|saa7146_dmaqueue
id|video_q
suffix:semicolon
DECL|member|last_field
r_enum
id|v4l2_field
id|last_field
suffix:semicolon
multiline_comment|/* common: fixme? shouldn&squot;t this be in saa7146_fh?&n;&t;   (this leads to a more complicated question: shall the driver&n;&t;   store the different settings (for example S_INPUT) for every open&n;&t;   and restore it appropriately, or should all settings be common for&n;&t;   all opens? currently, we do the latter, like all other&n;&t;   drivers do... */
DECL|member|standard
r_struct
id|saa7146_standard
op_star
id|standard
suffix:semicolon
DECL|member|vflip
r_int
id|vflip
suffix:semicolon
DECL|member|hflip
r_int
id|hflip
suffix:semicolon
DECL|member|current_hps_source
r_int
id|current_hps_source
suffix:semicolon
DECL|member|current_hps_sync
r_int
id|current_hps_sync
suffix:semicolon
DECL|member|d_clipping
r_struct
id|saa7146_dma
id|d_clipping
suffix:semicolon
multiline_comment|/* pointer to clipping memory */
DECL|member|resources
r_int
r_int
id|resources
suffix:semicolon
multiline_comment|/* resource management for device */
)brace
suffix:semicolon
DECL|macro|SAA7146_EXCLUSIVE
mdefine_line|#define SAA7146_EXCLUSIVE&t;0x1
DECL|macro|SAA7146_BEFORE
mdefine_line|#define SAA7146_BEFORE&t;&t;0x2
DECL|macro|SAA7146_AFTER
mdefine_line|#define SAA7146_AFTER&t;&t;0x4
DECL|struct|saa7146_extension_ioctls
r_struct
id|saa7146_extension_ioctls
(brace
DECL|member|cmd
r_int
r_int
id|cmd
suffix:semicolon
DECL|member|flags
r_int
id|flags
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* flags */
DECL|macro|SAA7146_USE_PORT_B_FOR_VBI
mdefine_line|#define SAA7146_USE_PORT_B_FOR_VBI&t;0x2     /* use input port b for vbi hardware bug workaround */
DECL|struct|saa7146_ext_vv
r_struct
id|saa7146_ext_vv
(brace
multiline_comment|/* informations about the video capabilities of the device */
DECL|member|inputs
r_int
id|inputs
suffix:semicolon
DECL|member|audios
r_int
id|audios
suffix:semicolon
DECL|member|capabilities
id|u32
id|capabilities
suffix:semicolon
DECL|member|flags
r_int
id|flags
suffix:semicolon
multiline_comment|/* additionally supported transmission standards */
DECL|member|stds
r_struct
id|saa7146_standard
op_star
id|stds
suffix:semicolon
DECL|member|num_stds
r_int
id|num_stds
suffix:semicolon
DECL|member|std_callback
r_int
(paren
op_star
id|std_callback
)paren
(paren
r_struct
id|saa7146_dev
op_star
comma
r_struct
id|saa7146_standard
op_star
)paren
suffix:semicolon
DECL|member|ioctls
r_struct
id|saa7146_extension_ioctls
op_star
id|ioctls
suffix:semicolon
DECL|member|ioctl
r_int
(paren
op_star
id|ioctl
)paren
(paren
r_struct
id|saa7146_fh
op_star
comma
r_int
r_int
id|cmd
comma
r_void
op_star
id|arg
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|saa7146_use_ops
r_struct
id|saa7146_use_ops
(brace
DECL|member|init
r_void
(paren
op_star
id|init
)paren
(paren
r_struct
id|saa7146_dev
op_star
comma
r_struct
id|saa7146_vv
op_star
)paren
suffix:semicolon
DECL|member|open
r_int
(paren
op_star
id|open
)paren
(paren
r_struct
id|saa7146_dev
op_star
comma
r_struct
id|file
op_star
)paren
suffix:semicolon
DECL|member|release
r_void
(paren
op_star
id|release
)paren
(paren
r_struct
id|saa7146_dev
op_star
comma
r_struct
id|file
op_star
)paren
suffix:semicolon
DECL|member|irq_done
r_void
(paren
op_star
id|irq_done
)paren
(paren
r_struct
id|saa7146_dev
op_star
comma
r_int
r_int
id|status
)paren
suffix:semicolon
DECL|member|read
id|ssize_t
(paren
op_star
id|read
)paren
(paren
r_struct
id|file
op_star
comma
r_char
id|__user
op_star
comma
r_int
comma
id|loff_t
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* from saa7146_fops.c */
r_int
id|saa7146_register_device
c_func
(paren
r_struct
id|video_device
op_star
op_star
id|vid
comma
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_char
op_star
id|name
comma
r_int
id|type
)paren
suffix:semicolon
r_int
id|saa7146_unregister_device
c_func
(paren
r_struct
id|video_device
op_star
op_star
id|vid
comma
r_struct
id|saa7146_dev
op_star
id|dev
)paren
suffix:semicolon
r_void
id|saa7146_buffer_finish
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_dmaqueue
op_star
id|q
comma
r_int
id|state
)paren
suffix:semicolon
r_void
id|saa7146_buffer_next
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_dmaqueue
op_star
id|q
comma
r_int
id|vbi
)paren
suffix:semicolon
r_int
id|saa7146_buffer_queue
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_dmaqueue
op_star
id|q
comma
r_struct
id|saa7146_buf
op_star
id|buf
)paren
suffix:semicolon
r_void
id|saa7146_buffer_timeout
c_func
(paren
r_int
r_int
id|data
)paren
suffix:semicolon
r_void
id|saa7146_dma_free
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_buf
op_star
id|buf
)paren
suffix:semicolon
r_int
id|saa7146_vv_init
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_ext_vv
op_star
id|ext_vv
)paren
suffix:semicolon
r_int
id|saa7146_vv_release
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
)paren
suffix:semicolon
multiline_comment|/* from saa7146_hlp.c */
r_int
id|saa7146_enable_overlay
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
)paren
suffix:semicolon
r_void
id|saa7146_disable_overlay
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
)paren
suffix:semicolon
r_void
id|saa7146_set_capture
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_struct
id|saa7146_buf
op_star
id|buf
comma
r_struct
id|saa7146_buf
op_star
id|next
)paren
suffix:semicolon
r_void
id|saa7146_write_out_dma
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|dev
comma
r_int
id|which
comma
r_struct
id|saa7146_video_dma
op_star
id|vdma
)paren
suffix:semicolon
r_void
id|saa7146_set_hps_source_and_sync
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|saa
comma
r_int
id|source
comma
r_int
id|sync
)paren
suffix:semicolon
r_void
id|saa7146_set_gpio
c_func
(paren
r_struct
id|saa7146_dev
op_star
id|saa
comma
id|u8
id|pin
comma
id|u8
id|data
)paren
suffix:semicolon
multiline_comment|/* from saa7146_video.c */
r_extern
r_struct
id|saa7146_use_ops
id|saa7146_video_uops
suffix:semicolon
r_int
id|saa7146_start_preview
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
)paren
suffix:semicolon
r_int
id|saa7146_stop_preview
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
)paren
suffix:semicolon
multiline_comment|/* from saa7146_vbi.c */
r_extern
r_struct
id|saa7146_use_ops
id|saa7146_vbi_uops
suffix:semicolon
multiline_comment|/* resource management functions */
r_int
id|saa7146_res_get
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
comma
r_int
r_int
id|bit
)paren
suffix:semicolon
r_void
id|saa7146_res_free
c_func
(paren
r_struct
id|saa7146_fh
op_star
id|fh
comma
r_int
r_int
id|bits
)paren
suffix:semicolon
DECL|macro|RESOURCE_DMA1_HPS
mdefine_line|#define RESOURCE_DMA1_HPS&t;0x1
DECL|macro|RESOURCE_DMA2_CLP
mdefine_line|#define RESOURCE_DMA2_CLP&t;0x2
DECL|macro|RESOURCE_DMA3_BRS
mdefine_line|#define RESOURCE_DMA3_BRS&t;0x4
multiline_comment|/* saa7146 source inputs */
DECL|macro|SAA7146_HPS_SOURCE_PORT_A
mdefine_line|#define SAA7146_HPS_SOURCE_PORT_A&t;0x00
DECL|macro|SAA7146_HPS_SOURCE_PORT_B
mdefine_line|#define SAA7146_HPS_SOURCE_PORT_B&t;0x01
DECL|macro|SAA7146_HPS_SOURCE_YPB_CPA
mdefine_line|#define SAA7146_HPS_SOURCE_YPB_CPA&t;0x02
DECL|macro|SAA7146_HPS_SOURCE_YPA_CPB
mdefine_line|#define SAA7146_HPS_SOURCE_YPA_CPB&t;0x03
multiline_comment|/* sync inputs */
DECL|macro|SAA7146_HPS_SYNC_PORT_A
mdefine_line|#define SAA7146_HPS_SYNC_PORT_A&t;&t;0x00
DECL|macro|SAA7146_HPS_SYNC_PORT_B
mdefine_line|#define SAA7146_HPS_SYNC_PORT_B&t;&t;0x01
multiline_comment|/* some memory sizes */
DECL|macro|SAA7146_CLIPPING_MEM
mdefine_line|#define SAA7146_CLIPPING_MEM&t;(14*PAGE_SIZE)
multiline_comment|/* some defines for the various clipping-modes */
DECL|macro|SAA7146_CLIPPING_RECT
mdefine_line|#define SAA7146_CLIPPING_RECT&t;&t;0x4
DECL|macro|SAA7146_CLIPPING_RECT_INVERTED
mdefine_line|#define SAA7146_CLIPPING_RECT_INVERTED&t;0x5
DECL|macro|SAA7146_CLIPPING_MASK
mdefine_line|#define SAA7146_CLIPPING_MASK&t;&t;0x6
DECL|macro|SAA7146_CLIPPING_MASK_INVERTED
mdefine_line|#define SAA7146_CLIPPING_MASK_INVERTED&t;0x7
multiline_comment|/* output formats: each entry holds four informations */
DECL|macro|RGB08_COMPOSED
mdefine_line|#define RGB08_COMPOSED&t;0x0217 /* composed is used in the sense of &quot;not-planar&quot; */
multiline_comment|/* this means: planar?=0, yuv2rgb-conversation-mode=2, dither=yes(=1), format-mode = 7 */
DECL|macro|RGB15_COMPOSED
mdefine_line|#define RGB15_COMPOSED&t;0x0213
DECL|macro|RGB16_COMPOSED
mdefine_line|#define RGB16_COMPOSED&t;0x0210
DECL|macro|RGB24_COMPOSED
mdefine_line|#define RGB24_COMPOSED&t;0x0201
DECL|macro|RGB32_COMPOSED
mdefine_line|#define RGB32_COMPOSED&t;0x0202
DECL|macro|Y8
mdefine_line|#define Y8&t;&t;&t;0x0006
DECL|macro|YUV411_COMPOSED
mdefine_line|#define YUV411_COMPOSED&t;&t;0x0003
DECL|macro|YUV422_COMPOSED
mdefine_line|#define YUV422_COMPOSED&t;&t;0x0000
multiline_comment|/* this means: planar?=1, yuv2rgb-conversion-mode=0, dither=no(=0), format-mode = b */
DECL|macro|YUV411_DECOMPOSED
mdefine_line|#define YUV411_DECOMPOSED&t;0x100b
DECL|macro|YUV422_DECOMPOSED
mdefine_line|#define YUV422_DECOMPOSED&t;0x1009
DECL|macro|YUV420_DECOMPOSED
mdefine_line|#define YUV420_DECOMPOSED&t;0x100a
DECL|macro|IS_PLANAR
mdefine_line|#define IS_PLANAR(x) (x &amp; 0xf000)
multiline_comment|/* misc defines */
DECL|macro|SAA7146_NO_SWAP
mdefine_line|#define SAA7146_NO_SWAP&t;&t;(0x0)
DECL|macro|SAA7146_TWO_BYTE_SWAP
mdefine_line|#define SAA7146_TWO_BYTE_SWAP &t;(0x1)
DECL|macro|SAA7146_FOUR_BYTE_SWAP
mdefine_line|#define SAA7146_FOUR_BYTE_SWAP&t;(0x2)
macro_line|#endif
eof
