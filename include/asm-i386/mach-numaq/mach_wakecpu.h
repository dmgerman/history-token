macro_line|#ifndef __ASM_MACH_WAKECPU_H
DECL|macro|__ASM_MACH_WAKECPU_H
mdefine_line|#define __ASM_MACH_WAKECPU_H
multiline_comment|/* This file copes with machines that wakeup secondary CPUs by NMIs */
DECL|macro|WAKE_SECONDARY_VIA_NMI
mdefine_line|#define WAKE_SECONDARY_VIA_NMI
DECL|macro|TRAMPOLINE_LOW
mdefine_line|#define TRAMPOLINE_LOW phys_to_virt(0x8)
DECL|macro|TRAMPOLINE_HIGH
mdefine_line|#define TRAMPOLINE_HIGH phys_to_virt(0xa)
DECL|macro|boot_cpu_apicid
mdefine_line|#define boot_cpu_apicid boot_cpu_logical_apicid
multiline_comment|/* We don&squot;t do anything here because we use NMI&squot;s to boot instead */
DECL|function|wait_for_init_deassert
r_static
r_inline
r_void
id|wait_for_init_deassert
c_func
(paren
id|atomic_t
op_star
id|deassert
)paren
(brace
)brace
multiline_comment|/*&n; * Because we use NMIs rather than the INIT-STARTUP sequence to&n; * bootstrap the CPUs, the APIC may be in a weird state. Kick it.&n; */
DECL|function|smp_callin_clear_local_apic
r_static
r_inline
r_void
id|smp_callin_clear_local_apic
c_func
(paren
r_void
)paren
(brace
id|clear_local_APIC
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|store_NMI_vector
r_static
r_inline
r_void
id|store_NMI_vector
c_func
(paren
r_int
r_int
op_star
id|high
comma
r_int
r_int
op_star
id|low
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;Storing NMI vector&bslash;n&quot;
)paren
suffix:semicolon
op_star
id|high
op_assign
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
id|TRAMPOLINE_HIGH
)paren
suffix:semicolon
op_star
id|low
op_assign
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
id|TRAMPOLINE_LOW
)paren
suffix:semicolon
)brace
DECL|function|restore_NMI_vector
r_static
r_inline
r_void
id|restore_NMI_vector
c_func
(paren
r_int
r_int
op_star
id|high
comma
r_int
r_int
op_star
id|low
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;Restoring NMI vector&bslash;n&quot;
)paren
suffix:semicolon
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
id|TRAMPOLINE_HIGH
)paren
op_assign
op_star
id|high
suffix:semicolon
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
id|TRAMPOLINE_LOW
)paren
op_assign
op_star
id|low
suffix:semicolon
)brace
DECL|macro|inquire_remote_apic
mdefine_line|#define inquire_remote_apic(apicid) {}
macro_line|#endif /* __ASM_MACH_WAKECPU_H */
eof
