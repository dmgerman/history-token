macro_line|#ifndef _PPC64_PPC32_H
DECL|macro|_PPC64_PPC32_H
mdefine_line|#define _PPC64_PPC32_H
macro_line|#include &lt;asm/siginfo.h&gt;
macro_line|#include &lt;asm/signal.h&gt;
multiline_comment|/*&n; * Data types and macros for providing 32b PowerPC support.&n; * &n; * This program is free software; you can redistribute it and/or&n; * modify it under the terms of the GNU General Public License&n; * as published by the Free Software Foundation; either version&n; * 2 of the License, or (at your option) any later version.&n; */
macro_line|#ifndef __KERNEL_STRICT_NAMES
macro_line|#include &lt;linux/types.h&gt;
DECL|typedef|__kernel_fsid_t32
r_typedef
id|__kernel_fsid_t
id|__kernel_fsid_t32
suffix:semicolon
macro_line|#endif
multiline_comment|/* Use this to get at 32-bit user passed pointers. */
multiline_comment|/* Things to consider: the low-level assembly stub does&n;   srl x, 0, x for first four arguments, so if you have&n;   pointer to something in the first four arguments, just&n;   declare it as a pointer, not u32. On the other side, &n;   arguments from 5th onwards should be declared as u32&n;   for pointers, and need AA() around each usage.&n;   A() macro should be used for places where you e.g.&n;   have some internal variable u32 and just want to get&n;   rid of a compiler warning. AA() has to be used in&n;   places where you want to convert a function argument&n;   to 32bit pointer or when you e.g. access pt_regs&n;   structure and want to consider 32bit registers only.&n;   -&n; */
DECL|macro|A
mdefine_line|#define A(__x) ((unsigned long)(__x))
DECL|macro|AA
mdefine_line|#define AA(__x)&t;&t;&t;&t;&bslash;&n;({&t;unsigned long __ret;&t;&t;&bslash;&n;&t;__asm__ (&quot;clrldi&t;%0, %0, 32&quot;&t;&bslash;&n;&t;&t; : &quot;=r&quot; (__ret)&t;&t;&bslash;&n;&t;&t; : &quot;0&quot; (__x));&t;&t;&bslash;&n;&t;__ret;&t;&t;&t;&t;&bslash;&n;})
multiline_comment|/* These are here to support 32-bit syscalls on a 64-bit kernel. */
DECL|typedef|__kernel_size_t32
r_typedef
r_int
r_int
id|__kernel_size_t32
suffix:semicolon
DECL|typedef|__kernel_ssize_t32
r_typedef
r_int
id|__kernel_ssize_t32
suffix:semicolon
DECL|typedef|__kernel_ptrdiff_t32
r_typedef
r_int
id|__kernel_ptrdiff_t32
suffix:semicolon
DECL|typedef|__kernel_time_t32
r_typedef
r_int
id|__kernel_time_t32
suffix:semicolon
DECL|typedef|__kernel_clock_t32
r_typedef
r_int
id|__kernel_clock_t32
suffix:semicolon
DECL|typedef|__kernel_pid_t32
r_typedef
r_int
id|__kernel_pid_t32
suffix:semicolon
DECL|typedef|__kernel_ipc_pid_t32
r_typedef
r_int
r_int
id|__kernel_ipc_pid_t32
suffix:semicolon
DECL|typedef|__kernel_uid_t32
r_typedef
r_int
r_int
id|__kernel_uid_t32
suffix:semicolon
DECL|typedef|__kernel_gid_t32
r_typedef
r_int
r_int
id|__kernel_gid_t32
suffix:semicolon
DECL|typedef|__kernel_dev_t32
r_typedef
r_int
r_int
id|__kernel_dev_t32
suffix:semicolon
DECL|typedef|__kernel_ino_t32
r_typedef
r_int
r_int
id|__kernel_ino_t32
suffix:semicolon
DECL|typedef|__kernel_mode_t32
r_typedef
r_int
r_int
id|__kernel_mode_t32
suffix:semicolon
DECL|typedef|__kernel_umode_t32
r_typedef
r_int
r_int
id|__kernel_umode_t32
suffix:semicolon
DECL|typedef|__kernel_nlink_t32
r_typedef
r_int
id|__kernel_nlink_t32
suffix:semicolon
DECL|typedef|__kernel_daddr_t32
r_typedef
r_int
id|__kernel_daddr_t32
suffix:semicolon
DECL|typedef|__kernel_off_t32
r_typedef
r_int
id|__kernel_off_t32
suffix:semicolon
DECL|typedef|__kernel_caddr_t32
r_typedef
r_int
r_int
id|__kernel_caddr_t32
suffix:semicolon
DECL|typedef|__kernel_loff_t32
r_typedef
r_int
id|__kernel_loff_t32
suffix:semicolon
DECL|struct|statfs32
r_struct
id|statfs32
(brace
DECL|member|f_type
r_int
id|f_type
suffix:semicolon
DECL|member|f_bsize
r_int
id|f_bsize
suffix:semicolon
DECL|member|f_blocks
r_int
id|f_blocks
suffix:semicolon
DECL|member|f_bfree
r_int
id|f_bfree
suffix:semicolon
DECL|member|f_bavail
r_int
id|f_bavail
suffix:semicolon
DECL|member|f_files
r_int
id|f_files
suffix:semicolon
DECL|member|f_ffree
r_int
id|f_ffree
suffix:semicolon
DECL|member|f_fsid
id|__kernel_fsid_t32
id|f_fsid
suffix:semicolon
DECL|member|f_namelen
r_int
id|f_namelen
suffix:semicolon
multiline_comment|/* SunOS ignores this field. */
DECL|member|f_spare
r_int
id|f_spare
(braket
l_int|6
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|union|sigval32
r_typedef
r_union
id|sigval32
(brace
DECL|member|sival_int
r_int
id|sival_int
suffix:semicolon
DECL|member|sival_ptr
r_int
r_int
id|sival_ptr
suffix:semicolon
DECL|typedef|sigval_t32
)brace
id|sigval_t32
suffix:semicolon
DECL|struct|siginfo32
r_typedef
r_struct
id|siginfo32
(brace
DECL|member|si_signo
r_int
id|si_signo
suffix:semicolon
DECL|member|si_errno
r_int
id|si_errno
suffix:semicolon
DECL|member|si_code
r_int
id|si_code
suffix:semicolon
r_union
(brace
DECL|member|_pad
r_int
id|_pad
(braket
id|SI_PAD_SIZE32
)braket
suffix:semicolon
multiline_comment|/* kill() */
r_struct
(brace
DECL|member|_pid
id|__kernel_pid_t32
id|_pid
suffix:semicolon
multiline_comment|/* sender&squot;s pid */
DECL|member|_uid
id|__kernel_uid_t32
id|_uid
suffix:semicolon
multiline_comment|/* sender&squot;s uid */
DECL|member|_kill
)brace
id|_kill
suffix:semicolon
multiline_comment|/* POSIX.1b timers */
r_struct
(brace
DECL|member|_timer1
r_int
r_int
id|_timer1
suffix:semicolon
DECL|member|_timer2
r_int
r_int
id|_timer2
suffix:semicolon
DECL|member|_timer
)brace
id|_timer
suffix:semicolon
multiline_comment|/* POSIX.1b signals */
r_struct
(brace
DECL|member|_pid
id|__kernel_pid_t32
id|_pid
suffix:semicolon
multiline_comment|/* sender&squot;s pid */
DECL|member|_uid
id|__kernel_uid_t32
id|_uid
suffix:semicolon
multiline_comment|/* sender&squot;s uid */
DECL|member|_sigval
id|sigval_t32
id|_sigval
suffix:semicolon
DECL|member|_rt
)brace
id|_rt
suffix:semicolon
multiline_comment|/* SIGCHLD */
r_struct
(brace
DECL|member|_pid
id|__kernel_pid_t32
id|_pid
suffix:semicolon
multiline_comment|/* which child */
DECL|member|_uid
id|__kernel_uid_t32
id|_uid
suffix:semicolon
multiline_comment|/* sender&squot;s uid */
DECL|member|_status
r_int
id|_status
suffix:semicolon
multiline_comment|/* exit code */
DECL|member|_utime
id|__kernel_clock_t32
id|_utime
suffix:semicolon
DECL|member|_stime
id|__kernel_clock_t32
id|_stime
suffix:semicolon
DECL|member|_sigchld
)brace
id|_sigchld
suffix:semicolon
multiline_comment|/* SIGILL, SIGFPE, SIGSEGV, SIGBUS, SIGEMT */
r_struct
(brace
DECL|member|_addr
r_int
r_int
id|_addr
suffix:semicolon
multiline_comment|/* faulting insn/memory ref. */
DECL|member|_trapno
r_int
id|_trapno
suffix:semicolon
DECL|member|_sigfault
)brace
id|_sigfault
suffix:semicolon
multiline_comment|/* SIGPOLL */
r_struct
(brace
DECL|member|_band
r_int
id|_band
suffix:semicolon
multiline_comment|/* POLL_IN, POLL_OUT, POLL_MSG */
DECL|member|_fd
r_int
id|_fd
suffix:semicolon
DECL|member|_sigpoll
)brace
id|_sigpoll
suffix:semicolon
DECL|member|_sifields
)brace
id|_sifields
suffix:semicolon
DECL|typedef|siginfo_t32
)brace
id|siginfo_t32
suffix:semicolon
DECL|macro|__old_sigset_t32
mdefine_line|#define __old_sigset_t32&t;old_sigset_t32
DECL|macro|__old_sigaction32
mdefine_line|#define __old_sigaction32&t;old_sigaction32
DECL|typedef|__old_sigset_t32
r_typedef
r_int
r_int
id|__old_sigset_t32
suffix:semicolon
DECL|struct|__old_sigaction32
r_struct
id|__old_sigaction32
(brace
DECL|member|sa_handler
r_int
id|sa_handler
suffix:semicolon
DECL|member|sa_mask
id|__old_sigset_t32
id|sa_mask
suffix:semicolon
DECL|member|sa_flags
r_int
r_int
id|sa_flags
suffix:semicolon
DECL|member|sa_restorer
r_int
id|sa_restorer
suffix:semicolon
multiline_comment|/* not used by Linux/SPARC yet */
)brace
suffix:semicolon
DECL|macro|_PPC32_NSIG
mdefine_line|#define _PPC32_NSIG&t;       64
DECL|macro|_PPC32_NSIG_BPW
mdefine_line|#define _PPC32_NSIG_BPW&t;       32
DECL|macro|_PPC32_NSIG_WORDS
mdefine_line|#define _PPC32_NSIG_WORDS&t;       (_PPC32_NSIG / _PPC32_NSIG_BPW)
r_typedef
r_struct
(brace
DECL|member|sig
r_int
r_int
id|sig
(braket
id|_PPC32_NSIG_WORDS
)braket
suffix:semicolon
DECL|typedef|sigset32_t
)brace
id|sigset32_t
suffix:semicolon
DECL|struct|sigaction32
r_struct
id|sigaction32
(brace
DECL|member|sa_handler
r_int
r_int
id|sa_handler
suffix:semicolon
multiline_comment|/* Really a pointer, but need to deal with 32 bits */
DECL|member|sa_flags
r_int
r_int
id|sa_flags
suffix:semicolon
DECL|member|sa_restorer
r_int
r_int
id|sa_restorer
suffix:semicolon
multiline_comment|/* Another 32 bit pointer */
DECL|member|sa_mask
id|sigset32_t
id|sa_mask
suffix:semicolon
multiline_comment|/* A 32 bit mask */
)brace
suffix:semicolon
DECL|struct|sigaltstack_32
r_typedef
r_struct
id|sigaltstack_32
(brace
DECL|member|ss_sp
r_int
r_int
id|ss_sp
suffix:semicolon
DECL|member|ss_flags
r_int
id|ss_flags
suffix:semicolon
DECL|member|ss_size
id|__kernel_size_t32
id|ss_size
suffix:semicolon
DECL|typedef|stack_32_t
)brace
id|stack_32_t
suffix:semicolon
DECL|struct|flock32
r_struct
id|flock32
(brace
DECL|member|l_type
r_int
id|l_type
suffix:semicolon
DECL|member|l_whence
r_int
id|l_whence
suffix:semicolon
DECL|member|l_start
id|__kernel_off_t32
id|l_start
suffix:semicolon
DECL|member|l_len
id|__kernel_off_t32
id|l_len
suffix:semicolon
DECL|member|l_pid
id|__kernel_pid_t32
id|l_pid
suffix:semicolon
DECL|member|__unused
r_int
id|__unused
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|stat32
r_struct
id|stat32
(brace
DECL|member|st_dev
id|__kernel_dev_t32
id|st_dev
suffix:semicolon
multiline_comment|/* 2 */
multiline_comment|/* __kernel_dev_t32 __pad1; */
multiline_comment|/* 2 */
DECL|member|st_ino
id|__kernel_ino_t32
id|st_ino
suffix:semicolon
multiline_comment|/* 4  */
DECL|member|st_mode
id|__kernel_mode_t32
id|st_mode
suffix:semicolon
multiline_comment|/* 2  */
DECL|member|st_nlink
r_int
id|st_nlink
suffix:semicolon
multiline_comment|/* 2 */
DECL|member|st_uid
id|__kernel_uid_t32
id|st_uid
suffix:semicolon
multiline_comment|/* 2 */
DECL|member|st_gid
id|__kernel_gid_t32
id|st_gid
suffix:semicolon
multiline_comment|/* 2 */
DECL|member|st_rdev
id|__kernel_dev_t32
id|st_rdev
suffix:semicolon
multiline_comment|/* 2 */
multiline_comment|/* __kernel_dev_t32 __pad2; */
multiline_comment|/* 2 */
DECL|member|st_size
id|__kernel_off_t32
id|st_size
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|st_blksize
id|__kernel_off_t32
id|st_blksize
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|st_blocks
id|__kernel_off_t32
id|st_blocks
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|st_atime
id|__kernel_time_t32
id|st_atime
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|__unused1
r_int
r_int
id|__unused1
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|st_mtime
id|__kernel_time_t32
id|st_mtime
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|__unused2
r_int
r_int
id|__unused2
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|st_ctime
id|__kernel_time_t32
id|st_ctime
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|__unused3
r_int
r_int
id|__unused3
suffix:semicolon
multiline_comment|/* 4 */
DECL|member|__unused4
r_int
r_int
id|__unused4
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* 2*4 */
)brace
suffix:semicolon
DECL|struct|__old_kernel_stat32
r_struct
id|__old_kernel_stat32
(brace
DECL|member|st_dev
r_int
r_int
id|st_dev
suffix:semicolon
DECL|member|st_ino
r_int
r_int
id|st_ino
suffix:semicolon
DECL|member|st_mode
r_int
r_int
id|st_mode
suffix:semicolon
DECL|member|st_nlink
r_int
r_int
id|st_nlink
suffix:semicolon
DECL|member|st_uid
r_int
r_int
id|st_uid
suffix:semicolon
DECL|member|st_gid
r_int
r_int
id|st_gid
suffix:semicolon
DECL|member|st_rdev
r_int
r_int
id|st_rdev
suffix:semicolon
DECL|member|st_size
r_int
r_int
id|st_size
suffix:semicolon
DECL|member|st_atime
r_int
r_int
id|st_atime
suffix:semicolon
DECL|member|st_mtime
r_int
r_int
id|st_mtime
suffix:semicolon
DECL|member|st_ctime
r_int
r_int
id|st_ctime
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|sigcontext32
r_struct
id|sigcontext32
(brace
DECL|member|_unused
r_int
r_int
id|_unused
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|signal
r_int
id|signal
suffix:semicolon
DECL|member|handler
r_int
r_int
id|handler
suffix:semicolon
DECL|member|oldmask
r_int
r_int
id|oldmask
suffix:semicolon
DECL|member|regs
id|u32
id|regs
suffix:semicolon
multiline_comment|/* 4 byte pointer to the pt_regs32 structure. */
)brace
suffix:semicolon
DECL|struct|ucontext32
r_struct
id|ucontext32
(brace
DECL|member|uc_flags
r_int
r_int
id|uc_flags
suffix:semicolon
DECL|member|uc_link
r_int
r_int
id|uc_link
suffix:semicolon
DECL|member|uc_stack
id|stack_32_t
id|uc_stack
suffix:semicolon
DECL|member|uc_mcontext
r_struct
id|sigcontext32
id|uc_mcontext
suffix:semicolon
DECL|member|uc_sigmask
id|sigset_t
id|uc_sigmask
suffix:semicolon
multiline_comment|/* mask last for extensibility */
)brace
suffix:semicolon
DECL|struct|ipc_kludge_32
r_struct
id|ipc_kludge_32
(brace
DECL|member|msgp
r_int
r_int
id|msgp
suffix:semicolon
DECL|member|msgtyp
r_int
id|msgtyp
suffix:semicolon
)brace
suffix:semicolon
macro_line|#endif  /* _PPC64_PPC32_H */
eof
