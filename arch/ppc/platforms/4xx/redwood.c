multiline_comment|/*&n; * arch/ppc/platforms/4xx/redwood.c&n; *&n; * Author: Frank Rowand &lt;frank_rowand@mvista.com&gt;, or source@mvista.com&n; *&n; * 2000-2001 (c) MontaVista, Software, Inc.  This file is licensed under&n; * the terms of the GNU General Public License version 2.  This program&n; * is licensed &quot;as is&quot; without any warranty of any kind, whether express&n; * or implied.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/ibm4xx.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/machdep.h&gt;
r_void
id|__init
DECL|function|redwood_setup_arch
id|redwood_setup_arch
c_func
(paren
r_void
)paren
(brace
id|ppc4xx_setup_arch
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_IDE
r_void
op_star
id|xilinx
comma
op_star
id|xilinx_1
comma
op_star
id|xilinx_2
suffix:semicolon
r_int
r_int
id|reg5
suffix:semicolon
id|xilinx
op_assign
id|ioremap
c_func
(paren
id|IDE_XLINUX_MUX_BASE
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* init xilinx control registers - enable ide mux, clear reset bit */
r_if
c_cond
(paren
op_logical_neg
id|xilinx
)paren
(brace
id|printk
c_func
(paren
id|KERN_CRIT
l_string|&quot;redwood4_setup_arch() xilinx ioremap failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|xilinx_1
op_assign
id|xilinx
suffix:semicolon
id|xilinx_2
op_assign
id|xilinx
op_plus
l_int|0xe
suffix:semicolon
id|reg5
op_assign
id|readw
c_func
(paren
id|xilinx_1
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|reg5
op_or_assign
op_complement
(paren
l_int|0x8001
)paren
comma
id|xilinx_1
)paren
suffix:semicolon
id|writeb
c_func
(paren
l_int|0
comma
id|xilinx_2
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
op_star
l_int|1000
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|reg5
op_amp
l_int|0x8001
comma
id|xilinx_1
)paren
suffix:semicolon
id|writeb
c_func
(paren
l_int|0
comma
id|xilinx_2
)paren
suffix:semicolon
multiline_comment|/* add RE &amp; OEN to value set by boot rom */
id|mtdcr
c_func
(paren
id|DCRN_BRCR3
comma
l_int|0x407cfffe
)paren
suffix:semicolon
macro_line|#endif
)brace
r_void
id|__init
DECL|function|redwood_map_io
id|redwood_map_io
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
id|ppc4xx_map_io
c_func
(paren
)paren
suffix:semicolon
id|io_block_mapping
c_func
(paren
id|OAKNET_IO_VADDR
comma
id|OAKNET_IO_PADDR
comma
id|OAKNET_IO_SIZE
comma
id|_PAGE_IO
)paren
suffix:semicolon
)brace
r_void
id|__init
DECL|function|platform_init
id|platform_init
c_func
(paren
r_int
r_int
id|r3
comma
r_int
r_int
id|r4
comma
r_int
r_int
id|r5
comma
r_int
r_int
id|r6
comma
r_int
r_int
id|r7
)paren
(brace
id|ppc4xx_init
c_func
(paren
id|r3
comma
id|r4
comma
id|r5
comma
id|r6
comma
id|r7
)paren
suffix:semicolon
id|ppc_md.setup_arch
op_assign
id|redwood_setup_arch
suffix:semicolon
id|ppc_md.setup_io_mappings
op_assign
id|redwood_map_io
suffix:semicolon
)brace
eof
