multiline_comment|/*&n; * arch/ppc/boot/simple/openbios.c&n; *&n; * 2005 (c) SYSGO AG - g.jaeger@sysgo.com&n; * This file is licensed under the terms of the GNU General Public&n; * License version 2.  This program is licensed &quot;as is&quot; without&n; * any warranty of any kind, whether express or implied.&n; *&n; * Derived from arch/ppc/boot/simple/pibs.c (from MontaVista)&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;asm/ppcboot.h&gt;
macro_line|#include &lt;platforms/4xx/ebony.h&gt;
r_extern
r_int
r_int
id|decompress_kernel
c_func
(paren
r_int
r_int
id|load_addr
comma
r_int
id|num_words
comma
r_int
r_int
id|cksum
)paren
suffix:semicolon
multiline_comment|/* We need to make sure that this is before the images to ensure&n; * that it&squot;s in a mapped location. */
DECL|variable|hold_resid_buf
id|bd_t
id|hold_resid_buf
id|__attribute__
(paren
(paren
id|__section__
(paren
l_string|&quot;.data.boot&quot;
)paren
)paren
)paren
suffix:semicolon
DECL|variable|hold_residual
id|bd_t
op_star
id|hold_residual
op_assign
op_amp
id|hold_resid_buf
suffix:semicolon
r_void
op_star
DECL|function|load_kernel
id|load_kernel
c_func
(paren
r_int
r_int
id|load_addr
comma
r_int
id|num_words
comma
r_int
r_int
id|cksum
comma
r_void
op_star
id|ign1
comma
r_void
op_star
id|ign2
)paren
(brace
id|decompress_kernel
c_func
(paren
id|load_addr
comma
id|num_words
comma
id|cksum
)paren
suffix:semicolon
multiline_comment|/* simply copy the MAC addresses */
id|memcpy
c_func
(paren
id|hold_residual-&gt;bi_enetaddr
comma
(paren
r_char
op_star
)paren
id|EBONY_OPENBIOS_MAC_BASE
comma
l_int|6
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|hold_residual-&gt;bi_enet1addr
comma
(paren
r_char
op_star
)paren
(paren
id|EBONY_OPENBIOS_MAC_BASE
op_plus
id|EBONY_OPENBIOS_MAC_OFFSET
)paren
comma
l_int|6
)paren
suffix:semicolon
r_return
(paren
r_void
op_star
)paren
id|hold_residual
suffix:semicolon
)brace
eof
