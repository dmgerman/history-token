multiline_comment|/*&n; * arch/ppc/platforms/83xx/mpc83xx_devices.c&n; *&n; * MPC83xx Device descriptions&n; *&n; * Maintainer: Kumar Gala &lt;kumar.gala@freescale.com&gt;&n; *&n; * Copyright 2005 Freescale Semiconductor Inc.&n; *&n; * This program is free software; you can redistribute  it and/or modify it&n; * under  the terms of  the GNU General  Public License as published by the&n; * Free Software Foundation;  either version 2 of the  License, or (at your&n; * option) any later version.&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/serial_8250.h&gt;
macro_line|#include &lt;linux/fsl_devices.h&gt;
macro_line|#include &lt;asm/mpc83xx.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/ppc_sys.h&gt;
multiline_comment|/* We use offsets for IORESOURCE_MEM since we do not know at compile time&n; * what IMMRBAR is, will get fixed up by mach_mpc83xx_fixup&n; */
DECL|variable|mpc83xx_tsec1_pdata
r_static
r_struct
id|gianfar_platform_data
id|mpc83xx_tsec1_pdata
op_assign
(brace
dot
id|device_flags
op_assign
id|FSL_GIANFAR_DEV_HAS_GIGABIT
op_or
id|FSL_GIANFAR_DEV_HAS_COALESCE
op_or
id|FSL_GIANFAR_DEV_HAS_RMON
op_or
id|FSL_GIANFAR_DEV_HAS_MULTI_INTR
comma
dot
id|phy_reg_addr
op_assign
l_int|0x24000
comma
)brace
suffix:semicolon
DECL|variable|mpc83xx_tsec2_pdata
r_static
r_struct
id|gianfar_platform_data
id|mpc83xx_tsec2_pdata
op_assign
(brace
dot
id|device_flags
op_assign
id|FSL_GIANFAR_DEV_HAS_GIGABIT
op_or
id|FSL_GIANFAR_DEV_HAS_COALESCE
op_or
id|FSL_GIANFAR_DEV_HAS_RMON
op_or
id|FSL_GIANFAR_DEV_HAS_MULTI_INTR
comma
dot
id|phy_reg_addr
op_assign
l_int|0x24000
comma
)brace
suffix:semicolon
DECL|variable|mpc83xx_fsl_i2c1_pdata
r_static
r_struct
id|fsl_i2c_platform_data
id|mpc83xx_fsl_i2c1_pdata
op_assign
(brace
dot
id|device_flags
op_assign
id|FSL_I2C_DEV_SEPARATE_DFSRR
comma
)brace
suffix:semicolon
DECL|variable|mpc83xx_fsl_i2c2_pdata
r_static
r_struct
id|fsl_i2c_platform_data
id|mpc83xx_fsl_i2c2_pdata
op_assign
(brace
dot
id|device_flags
op_assign
id|FSL_I2C_DEV_SEPARATE_DFSRR
comma
)brace
suffix:semicolon
DECL|variable|serial_platform_data
r_static
r_struct
id|plat_serial8250_port
id|serial_platform_data
(braket
)braket
op_assign
(brace
(braket
l_int|0
)braket
op_assign
(brace
dot
id|mapbase
op_assign
l_int|0x4500
comma
dot
id|irq
op_assign
id|MPC83xx_IRQ_UART1
comma
dot
id|iotype
op_assign
id|UPIO_MEM
comma
dot
id|flags
op_assign
id|UPF_BOOT_AUTOCONF
op_or
id|UPF_SKIP_TEST
comma
)brace
comma
(braket
l_int|1
)braket
op_assign
(brace
dot
id|mapbase
op_assign
l_int|0x4600
comma
dot
id|irq
op_assign
id|MPC83xx_IRQ_UART2
comma
dot
id|iotype
op_assign
id|UPIO_MEM
comma
dot
id|flags
op_assign
id|UPF_BOOT_AUTOCONF
op_or
id|UPF_SKIP_TEST
comma
)brace
comma
)brace
suffix:semicolon
DECL|variable|ppc_sys_platform_devices
r_struct
id|platform_device
id|ppc_sys_platform_devices
(braket
)braket
op_assign
(brace
(braket
id|MPC83xx_TSEC1
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-gianfar&quot;
comma
dot
id|id
op_assign
l_int|1
comma
dot
id|dev.platform_data
op_assign
op_amp
id|mpc83xx_tsec1_pdata
comma
dot
id|num_resources
op_assign
l_int|4
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x24000
comma
dot
id|end
op_assign
l_int|0x24fff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;tx&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC1_TX
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC1_TX
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;rx&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC1_RX
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC1_RX
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;error&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC1_ERROR
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC1_ERROR
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_TSEC2
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-gianfar&quot;
comma
dot
id|id
op_assign
l_int|2
comma
dot
id|dev.platform_data
op_assign
op_amp
id|mpc83xx_tsec2_pdata
comma
dot
id|num_resources
op_assign
l_int|4
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x25000
comma
dot
id|end
op_assign
l_int|0x25fff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;tx&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC2_TX
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC2_TX
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;rx&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC2_RX
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC2_RX
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
(brace
dot
id|name
op_assign
l_string|&quot;error&quot;
comma
dot
id|start
op_assign
id|MPC83xx_IRQ_TSEC2_ERROR
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_TSEC2_ERROR
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_IIC1
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-i2c&quot;
comma
dot
id|id
op_assign
l_int|1
comma
dot
id|dev.platform_data
op_assign
op_amp
id|mpc83xx_fsl_i2c1_pdata
comma
dot
id|num_resources
op_assign
l_int|2
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x3000
comma
dot
id|end
op_assign
l_int|0x30ff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|start
op_assign
id|MPC83xx_IRQ_IIC1
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_IIC1
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_IIC2
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-i2c&quot;
comma
dot
id|id
op_assign
l_int|2
comma
dot
id|dev.platform_data
op_assign
op_amp
id|mpc83xx_fsl_i2c2_pdata
comma
dot
id|num_resources
op_assign
l_int|2
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x3100
comma
dot
id|end
op_assign
l_int|0x31ff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|start
op_assign
id|MPC83xx_IRQ_IIC2
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_IIC2
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_DUART
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;serial8250&quot;
comma
dot
id|id
op_assign
l_int|0
comma
dot
id|dev.platform_data
op_assign
id|serial_platform_data
comma
)brace
comma
(braket
id|MPC83xx_SEC2
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-sec2&quot;
comma
dot
id|id
op_assign
l_int|1
comma
dot
id|num_resources
op_assign
l_int|2
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x30000
comma
dot
id|end
op_assign
l_int|0x3ffff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|start
op_assign
id|MPC83xx_IRQ_SEC2
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_SEC2
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_USB2_DR
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-usb2-dr&quot;
comma
dot
id|id
op_assign
l_int|1
comma
dot
id|num_resources
op_assign
l_int|2
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x22000
comma
dot
id|end
op_assign
l_int|0x22fff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|start
op_assign
id|MPC83xx_IRQ_USB2_DR
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_USB2_DR
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
(braket
id|MPC83xx_USB2_MPH
)braket
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;fsl-usb2-mph&quot;
comma
dot
id|id
op_assign
l_int|1
comma
dot
id|num_resources
op_assign
l_int|2
comma
dot
id|resource
op_assign
(paren
r_struct
id|resource
(braket
)braket
)paren
(brace
(brace
dot
id|start
op_assign
l_int|0x23000
comma
dot
id|end
op_assign
l_int|0x23fff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
comma
(brace
dot
id|start
op_assign
id|MPC83xx_IRQ_USB2_MPH
comma
dot
id|end
op_assign
id|MPC83xx_IRQ_USB2_MPH
comma
dot
id|flags
op_assign
id|IORESOURCE_IRQ
comma
)brace
comma
)brace
comma
)brace
comma
)brace
suffix:semicolon
DECL|function|mach_mpc83xx_fixup
r_static
r_int
id|__init
id|mach_mpc83xx_fixup
c_func
(paren
r_struct
id|platform_device
op_star
id|pdev
)paren
(brace
id|ppc_sys_fixup_mem_resource
c_func
(paren
id|pdev
comma
id|immrbar
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|mach_mpc83xx_init
r_static
r_int
id|__init
id|mach_mpc83xx_init
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|ppc_md.progress
)paren
id|ppc_md
dot
id|progress
c_func
(paren
l_string|&quot;mach_mpc83xx_init:enter&quot;
comma
l_int|0
)paren
suffix:semicolon
id|ppc_sys_device_fixup
op_assign
id|mach_mpc83xx_fixup
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|mach_mpc83xx_init
id|postcore_initcall
c_func
(paren
id|mach_mpc83xx_init
)paren
suffix:semicolon
eof
