multiline_comment|/*&n; * arch/ppc/syslib/ppc85xx_setup.c&n; *&n; * MPC85XX common board code&n; *&n; * Maintainer: Kumar Gala &lt;kumar.gala@freescale.com&gt;&n; *&n; * Copyright 2004 Freescale Semiconductor Inc.&n; *&n; * This program is free software; you can redistribute  it and/or modify it&n; * under  the terms of  the GNU General  Public License as published by the&n; * Free Software Foundation;  either version 2 of the  License, or (at your&n; * option) any later version.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/serial.h&gt;
macro_line|#include &lt;linux/tty.h&gt;&t;/* for linux/serial_core.h */
macro_line|#include &lt;linux/serial_core.h&gt;
macro_line|#include &lt;asm/prom.h&gt;
macro_line|#include &lt;asm/time.h&gt;
macro_line|#include &lt;asm/mpc85xx.h&gt;
macro_line|#include &lt;asm/immap_85xx.h&gt;
macro_line|#include &lt;asm/mmu.h&gt;
macro_line|#include &lt;asm/ocp.h&gt;
macro_line|#include &lt;asm/kgdb.h&gt;
macro_line|#include &lt;syslib/ppc85xx_setup.h&gt;
multiline_comment|/* Return the amount of memory */
r_int
r_int
id|__init
DECL|function|mpc85xx_find_end_of_memory
id|mpc85xx_find_end_of_memory
c_func
(paren
r_void
)paren
(brace
id|bd_t
op_star
id|binfo
suffix:semicolon
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
r_return
id|binfo-&gt;bi_memsize
suffix:semicolon
)brace
multiline_comment|/* The decrementer counts at the system (internal) clock freq divided by 8 */
r_void
id|__init
DECL|function|mpc85xx_calibrate_decr
id|mpc85xx_calibrate_decr
c_func
(paren
r_void
)paren
(brace
id|bd_t
op_star
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
r_int
r_int
id|freq
comma
id|divisor
suffix:semicolon
multiline_comment|/* get the core frequency */
id|freq
op_assign
id|binfo-&gt;bi_busfreq
suffix:semicolon
multiline_comment|/* The timebase is updated every 8 bus clocks, HID0[SEL_TBCLK] = 0 */
id|divisor
op_assign
l_int|8
suffix:semicolon
id|tb_ticks_per_jiffy
op_assign
id|freq
op_div
id|divisor
op_div
id|HZ
suffix:semicolon
id|tb_to_us
op_assign
id|mulhwu_scale_factor
c_func
(paren
id|freq
op_div
id|divisor
comma
l_int|1000000
)paren
suffix:semicolon
multiline_comment|/* Set the time base to zero */
id|mtspr
c_func
(paren
id|SPRN_TBWL
comma
l_int|0
)paren
suffix:semicolon
id|mtspr
c_func
(paren
id|SPRN_TBWU
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Clear any pending timer interrupts */
id|mtspr
c_func
(paren
id|SPRN_TSR
comma
id|TSR_ENW
op_or
id|TSR_WIS
op_or
id|TSR_DIS
op_or
id|TSR_FIS
)paren
suffix:semicolon
multiline_comment|/* Enable decrementer interrupt */
id|mtspr
c_func
(paren
id|SPRN_TCR
comma
id|TCR_DIE
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_SERIAL_8250
r_void
id|__init
DECL|function|mpc85xx_early_serial_map
id|mpc85xx_early_serial_map
c_func
(paren
r_void
)paren
(brace
r_struct
id|uart_port
id|serial_req
suffix:semicolon
id|bd_t
op_star
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
id|phys_addr_t
id|duart_paddr
op_assign
id|binfo-&gt;bi_immr_base
op_plus
id|MPC85xx_UART0_OFFSET
suffix:semicolon
multiline_comment|/* Setup serial port access */
id|memset
c_func
(paren
op_amp
id|serial_req
comma
l_int|0
comma
r_sizeof
(paren
id|serial_req
)paren
)paren
suffix:semicolon
id|serial_req.uartclk
op_assign
id|binfo-&gt;bi_busfreq
suffix:semicolon
id|serial_req.line
op_assign
l_int|0
suffix:semicolon
id|serial_req.irq
op_assign
id|MPC85xx_IRQ_DUART
suffix:semicolon
id|serial_req.flags
op_assign
id|ASYNC_BOOT_AUTOCONF
op_or
id|ASYNC_SKIP_TEST
suffix:semicolon
id|serial_req.iotype
op_assign
id|SERIAL_IO_MEM
suffix:semicolon
id|serial_req.membase
op_assign
id|ioremap
c_func
(paren
id|duart_paddr
comma
id|MPC85xx_UART0_SIZE
)paren
suffix:semicolon
id|serial_req.mapbase
op_assign
id|duart_paddr
suffix:semicolon
id|serial_req.regshift
op_assign
l_int|0
suffix:semicolon
macro_line|#if defined(CONFIG_SERIAL_TEXT_DEBUG) || defined(CONFIG_KGDB)
id|gen550_init
c_func
(paren
l_int|0
comma
op_amp
id|serial_req
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|early_serial_setup
c_func
(paren
op_amp
id|serial_req
)paren
op_ne
l_int|0
)paren
id|printk
c_func
(paren
l_string|&quot;Early serial init of port 0 failed&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* Assume early_serial_setup() doesn&squot;t modify serial_req */
id|duart_paddr
op_assign
id|binfo-&gt;bi_immr_base
op_plus
id|MPC85xx_UART1_OFFSET
suffix:semicolon
id|serial_req.line
op_assign
l_int|1
suffix:semicolon
id|serial_req.mapbase
op_assign
id|duart_paddr
suffix:semicolon
id|serial_req.membase
op_assign
id|ioremap
c_func
(paren
id|duart_paddr
comma
id|MPC85xx_UART1_SIZE
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_SERIAL_TEXT_DEBUG) || defined(CONFIG_KGDB)
id|gen550_init
c_func
(paren
l_int|1
comma
op_amp
id|serial_req
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|early_serial_setup
c_func
(paren
op_amp
id|serial_req
)paren
op_ne
l_int|0
)paren
id|printk
c_func
(paren
l_string|&quot;Early serial init of port 1 failed&bslash;n&quot;
)paren
suffix:semicolon
)brace
macro_line|#endif
r_void
DECL|function|mpc85xx_restart
id|mpc85xx_restart
c_func
(paren
r_char
op_star
id|cmd
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
m_abort
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|mpc85xx_power_off
id|mpc85xx_power_off
c_func
(paren
r_void
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
suffix:semicolon
)brace
)brace
r_void
DECL|function|mpc85xx_halt
id|mpc85xx_halt
c_func
(paren
r_void
)paren
(brace
id|local_irq_disable
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_PCI
r_static
r_void
id|__init
DECL|function|mpc85xx_setup_pci1
id|mpc85xx_setup_pci1
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
)paren
(brace
r_volatile
r_struct
id|ccsr_pci
op_star
id|pci
suffix:semicolon
r_volatile
r_struct
id|ccsr_guts
op_star
id|guts
suffix:semicolon
r_int
r_int
id|temps
suffix:semicolon
id|bd_t
op_star
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
id|pci
op_assign
id|ioremap
c_func
(paren
id|binfo-&gt;bi_immr_base
op_plus
id|MPC85xx_PCI1_OFFSET
comma
id|MPC85xx_PCI1_SIZE
)paren
suffix:semicolon
id|guts
op_assign
id|ioremap
c_func
(paren
id|binfo-&gt;bi_immr_base
op_plus
id|MPC85xx_GUTS_OFFSET
comma
id|MPC85xx_GUTS_SIZE
)paren
suffix:semicolon
id|early_read_config_word
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_COMMAND
comma
op_amp
id|temps
)paren
suffix:semicolon
id|temps
op_or_assign
id|PCI_COMMAND_SERR
op_or
id|PCI_COMMAND_MASTER
op_or
id|PCI_COMMAND_MEMORY
suffix:semicolon
id|early_write_config_word
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_COMMAND
comma
id|temps
)paren
suffix:semicolon
DECL|macro|PORDEVSR_PCI
mdefine_line|#define PORDEVSR_PCI&t;(0x00800000)&t;/* PCI Mode */
r_if
c_cond
(paren
id|guts-&gt;pordevsr
op_amp
id|PORDEVSR_PCI
)paren
(brace
id|early_write_config_byte
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_LATENCY_TIMER
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* PCI-X init */
id|temps
op_assign
id|PCI_X_CMD_MAX_SPLIT
op_or
id|PCI_X_CMD_MAX_READ
op_or
id|PCI_X_CMD_ERO
op_or
id|PCI_X_CMD_DPERR_E
suffix:semicolon
id|early_write_config_word
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCIX_COMMAND
comma
id|temps
)paren
suffix:semicolon
)brace
multiline_comment|/* Disable all windows (except powar0 since its ignored) */
id|pci-&gt;powar1
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar2
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar3
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar4
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar1
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar2
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar3
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Setup 512M Phys:PCI 1:1 outbound mem window @ 0x80000000 */
id|pci-&gt;potar1
op_assign
(paren
id|MPC85XX_PCI1_LOWER_MEM
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;potear1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;powbar1
op_assign
(paren
id|MPC85XX_PCI1_LOWER_MEM
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;powar1
op_assign
l_int|0x8004401c
suffix:semicolon
multiline_comment|/* Enable, Mem R/W, 512M */
multiline_comment|/* Setup 16M outboud IO windows @ 0xe2000000 */
id|pci-&gt;potar2
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;potear2
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;powbar2
op_assign
(paren
id|MPC85XX_PCI1_IO_BASE
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;powar2
op_assign
l_int|0x80088017
suffix:semicolon
multiline_comment|/* Enable, IO R/W, 16M */
multiline_comment|/* Setup 2G inbound Memory Window @ 0 */
id|pci-&gt;pitar1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;piwbar1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;piwar1
op_assign
l_int|0xa0f5501e
suffix:semicolon
multiline_comment|/* Enable, Prefetch, Local&n;&t;&t;&t;&t;&t;   Mem, Snoop R/W, 2G */
)brace
r_extern
r_int
id|mpc85xx_map_irq
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_int
r_char
id|idsel
comma
r_int
r_char
id|pin
)paren
suffix:semicolon
r_extern
r_int
id|mpc85xx_exclude_device
c_func
(paren
id|u_char
id|bus
comma
id|u_char
id|devfn
)paren
suffix:semicolon
macro_line|#if CONFIG_85xx_PCI2
r_static
r_void
id|__init
DECL|function|mpc85xx_setup_pci2
id|mpc85xx_setup_pci2
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
)paren
(brace
r_volatile
r_struct
id|ccsr_pci
op_star
id|pci
suffix:semicolon
r_int
r_int
id|temps
suffix:semicolon
id|bd_t
op_star
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
id|pci
op_assign
id|ioremap
c_func
(paren
id|binfo-&gt;bi_immr_base
op_plus
id|MPC85xx_PCI2_OFFSET
comma
id|MPC85xx_PCI2_SIZE
)paren
suffix:semicolon
id|early_read_config_word
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_COMMAND
comma
op_amp
id|temps
)paren
suffix:semicolon
id|temps
op_or_assign
id|PCI_COMMAND_SERR
op_or
id|PCI_COMMAND_MASTER
op_or
id|PCI_COMMAND_MEMORY
suffix:semicolon
id|early_write_config_word
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_COMMAND
comma
id|temps
)paren
suffix:semicolon
id|early_write_config_byte
c_func
(paren
id|hose
comma
l_int|0
comma
l_int|0
comma
id|PCI_LATENCY_TIMER
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* Disable all windows (except powar0 since its ignored) */
id|pci-&gt;powar1
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar2
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar3
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;powar4
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar1
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar2
op_assign
l_int|0
suffix:semicolon
id|pci-&gt;piwar3
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Setup 512M Phys:PCI 1:1 outbound mem window @ 0xa0000000 */
id|pci-&gt;potar1
op_assign
(paren
id|MPC85XX_PCI2_LOWER_MEM
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;potear1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;powbar1
op_assign
(paren
id|MPC85XX_PCI2_LOWER_MEM
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;powar1
op_assign
l_int|0x8004401c
suffix:semicolon
multiline_comment|/* Enable, Mem R/W, 512M */
multiline_comment|/* Setup 16M outboud IO windows @ 0xe3000000 */
id|pci-&gt;potar2
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;potear2
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;powbar2
op_assign
(paren
id|MPC85XX_PCI2_IO_BASE
op_rshift
l_int|12
)paren
op_amp
l_int|0x000fffff
suffix:semicolon
id|pci-&gt;powar2
op_assign
l_int|0x80088017
suffix:semicolon
multiline_comment|/* Enable, IO R/W, 16M */
multiline_comment|/* Setup 2G inbound Memory Window @ 0 */
id|pci-&gt;pitar1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;piwbar1
op_assign
l_int|0x00000000
suffix:semicolon
id|pci-&gt;piwar1
op_assign
l_int|0xa0f5501e
suffix:semicolon
multiline_comment|/* Enable, Prefetch, Local&n;&t;&t;&t;&t;&t;   Mem, Snoop R/W, 2G */
)brace
macro_line|#endif /* CONFIG_85xx_PCI2 */
r_void
id|__init
DECL|function|mpc85xx_setup_hose
id|mpc85xx_setup_hose
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_controller
op_star
id|hose_a
suffix:semicolon
macro_line|#ifdef CONFIG_85xx_PCI2
r_struct
id|pci_controller
op_star
id|hose_b
suffix:semicolon
macro_line|#endif
id|bd_t
op_star
id|binfo
op_assign
(paren
id|bd_t
op_star
)paren
id|__res
suffix:semicolon
id|hose_a
op_assign
id|pcibios_alloc_controller
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hose_a
)paren
r_return
suffix:semicolon
id|ppc_md.pci_swizzle
op_assign
id|common_swizzle
suffix:semicolon
id|ppc_md.pci_map_irq
op_assign
id|mpc85xx_map_irq
suffix:semicolon
id|hose_a-&gt;first_busno
op_assign
l_int|0
suffix:semicolon
id|hose_a-&gt;bus_offset
op_assign
l_int|0
suffix:semicolon
id|hose_a-&gt;last_busno
op_assign
l_int|0xff
suffix:semicolon
id|setup_indirect_pci
c_func
(paren
id|hose_a
comma
id|binfo-&gt;bi_immr_base
op_plus
id|PCI1_CFG_ADDR_OFFSET
comma
id|binfo-&gt;bi_immr_base
op_plus
id|PCI1_CFG_DATA_OFFSET
)paren
suffix:semicolon
id|hose_a-&gt;set_cfg_type
op_assign
l_int|1
suffix:semicolon
id|mpc85xx_setup_pci1
c_func
(paren
id|hose_a
)paren
suffix:semicolon
id|hose_a-&gt;pci_mem_offset
op_assign
id|MPC85XX_PCI1_MEM_OFFSET
suffix:semicolon
id|hose_a-&gt;mem_space.start
op_assign
id|MPC85XX_PCI1_LOWER_MEM
suffix:semicolon
id|hose_a-&gt;mem_space.end
op_assign
id|MPC85XX_PCI1_UPPER_MEM
suffix:semicolon
id|hose_a-&gt;io_space.start
op_assign
id|MPC85XX_PCI1_LOWER_IO
suffix:semicolon
id|hose_a-&gt;io_space.end
op_assign
id|MPC85XX_PCI1_UPPER_IO
suffix:semicolon
id|hose_a-&gt;io_base_phys
op_assign
id|MPC85XX_PCI1_IO_BASE
suffix:semicolon
macro_line|#if CONFIG_85xx_PCI2
id|isa_io_base
op_assign
(paren
r_int
r_int
)paren
id|ioremap
c_func
(paren
id|MPC85XX_PCI1_IO_BASE
comma
id|MPC85XX_PCI1_IO_SIZE
op_plus
id|MPC85XX_PCI2_IO_SIZE
)paren
suffix:semicolon
macro_line|#else
id|isa_io_base
op_assign
(paren
r_int
r_int
)paren
id|ioremap
c_func
(paren
id|MPC85XX_PCI1_IO_BASE
comma
id|MPC85XX_PCI1_IO_SIZE
)paren
suffix:semicolon
macro_line|#endif
id|hose_a-&gt;io_base_virt
op_assign
(paren
r_void
op_star
)paren
id|isa_io_base
suffix:semicolon
multiline_comment|/* setup resources */
id|pci_init_resource
c_func
(paren
op_amp
id|hose_a-&gt;mem_resources
(braket
l_int|0
)braket
comma
id|MPC85XX_PCI1_LOWER_MEM
comma
id|MPC85XX_PCI1_UPPER_MEM
comma
id|IORESOURCE_MEM
comma
l_string|&quot;PCI1 host bridge&quot;
)paren
suffix:semicolon
id|pci_init_resource
c_func
(paren
op_amp
id|hose_a-&gt;io_resource
comma
id|MPC85XX_PCI1_LOWER_IO
comma
id|MPC85XX_PCI1_UPPER_IO
comma
id|IORESOURCE_IO
comma
l_string|&quot;PCI1 host bridge&quot;
)paren
suffix:semicolon
id|ppc_md.pci_exclude_device
op_assign
id|mpc85xx_exclude_device
suffix:semicolon
id|hose_a-&gt;last_busno
op_assign
id|pciauto_bus_scan
c_func
(paren
id|hose_a
comma
id|hose_a-&gt;first_busno
)paren
suffix:semicolon
macro_line|#if CONFIG_85xx_PCI2
id|hose_b
op_assign
id|pcibios_alloc_controller
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hose_b
)paren
r_return
suffix:semicolon
id|hose_b-&gt;bus_offset
op_assign
id|hose_a-&gt;last_busno
op_plus
l_int|1
suffix:semicolon
id|hose_b-&gt;first_busno
op_assign
id|hose_a-&gt;last_busno
op_plus
l_int|1
suffix:semicolon
id|hose_b-&gt;last_busno
op_assign
l_int|0xff
suffix:semicolon
id|setup_indirect_pci
c_func
(paren
id|hose_b
comma
id|binfo-&gt;bi_immr_base
op_plus
id|PCI2_CFG_ADDR_OFFSET
comma
id|binfo-&gt;bi_immr_base
op_plus
id|PCI2_CFG_DATA_OFFSET
)paren
suffix:semicolon
id|hose_b-&gt;set_cfg_type
op_assign
l_int|1
suffix:semicolon
id|mpc85xx_setup_pci2
c_func
(paren
id|hose_b
)paren
suffix:semicolon
id|hose_b-&gt;pci_mem_offset
op_assign
id|MPC85XX_PCI2_MEM_OFFSET
suffix:semicolon
id|hose_b-&gt;mem_space.start
op_assign
id|MPC85XX_PCI2_LOWER_MEM
suffix:semicolon
id|hose_b-&gt;mem_space.end
op_assign
id|MPC85XX_PCI2_UPPER_MEM
suffix:semicolon
id|hose_b-&gt;io_space.start
op_assign
id|MPC85XX_PCI2_LOWER_IO
suffix:semicolon
id|hose_b-&gt;io_space.end
op_assign
id|MPC85XX_PCI2_UPPER_IO
suffix:semicolon
id|hose_b-&gt;io_base_phys
op_assign
id|MPC85XX_PCI2_IO_BASE
suffix:semicolon
id|hose_b-&gt;io_base_virt
op_assign
(paren
r_void
op_star
)paren
id|isa_io_base
op_plus
id|MPC85XX_PCI1_IO_SIZE
suffix:semicolon
multiline_comment|/* setup resources */
id|pci_init_resource
c_func
(paren
op_amp
id|hose_b-&gt;mem_resources
(braket
l_int|0
)braket
comma
id|MPC85XX_PCI2_LOWER_MEM
comma
id|MPC85XX_PCI2_UPPER_MEM
comma
id|IORESOURCE_MEM
comma
l_string|&quot;PCI2 host bridge&quot;
)paren
suffix:semicolon
id|pci_init_resource
c_func
(paren
op_amp
id|hose_b-&gt;io_resource
comma
id|MPC85XX_PCI2_LOWER_IO
comma
id|MPC85XX_PCI2_UPPER_IO
comma
id|IORESOURCE_IO
comma
l_string|&quot;PCI2 host bridge&quot;
)paren
suffix:semicolon
id|hose_b-&gt;last_busno
op_assign
id|pciauto_bus_scan
c_func
(paren
id|hose_b
comma
id|hose_b-&gt;first_busno
)paren
suffix:semicolon
macro_line|#endif
r_return
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_PCI */
eof
