multiline_comment|/*&n; * BK Id: SCCS/s.galaxy_pci.c 1.7 05/17/01 18:14:21 cort&n; */
multiline_comment|/*&n; *&n; *    Copyright (c) 2000 Grant Erickson &lt;grant@borg.umn.edu&gt;&n; *    All rights reserved.&n; *&n; *    Module name: galaxy_pci.c&n; *&n; *    Description:&n; *      PCI interface code for the IBM PowerPC 405GP on-chip PCI bus&n; *      interface.&n; *&n; *      Why is this file called &quot;galaxy_pci&quot;? Because on the original&n; *      IBM &quot;Walnut&quot; evaluation board schematic I have, the 405GP is&n; *      is labeled &quot;GALAXY&quot;.&n; *&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/processor.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/machdep.h&gt;
macro_line|#include &quot;pci.h&quot;
multiline_comment|/* Preprocessor Defines */
DECL|macro|PCICFGADDR
mdefine_line|#define&t;PCICFGADDR&t;(volatile unsigned int *)(0xEEC00000)
DECL|macro|PCICFGDATA
mdefine_line|#define&t;PCICFGDATA&t;(volatile unsigned int *)(0xEEC00004)
multiline_comment|/* Function Prototypes */
r_void
id|__init
DECL|function|galaxy_pcibios_fixup
id|galaxy_pcibios_fixup
c_func
(paren
r_void
)paren
(brace
)brace
r_static
r_int
DECL|function|galaxy_pcibios_read_config_byte
id|galaxy_pcibios_read_config_byte
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u8
op_star
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|galaxy_pcibios_read_config_word
id|galaxy_pcibios_read_config_word
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u16
op_star
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|galaxy_pcibios_read_config_dword
id|galaxy_pcibios_read_config_dword
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u32
op_star
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|galaxy_pcibios_write_config_byte
id|galaxy_pcibios_write_config_byte
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u8
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|galaxy_pcibios_write_config_word
id|galaxy_pcibios_write_config_word
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u16
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|galaxy_pcibios_write_config_dword
id|galaxy_pcibios_write_config_dword
c_func
(paren
r_struct
id|pci_controller
op_star
id|hose
comma
id|u8
id|bus
comma
id|u8
id|dev
comma
id|u8
id|offset
comma
id|u32
id|val
)paren
(brace
r_return
(paren
id|PCIBIOS_SUCCESSFUL
)paren
suffix:semicolon
)brace
DECL|variable|galaxy_pci_ops
r_static
r_struct
id|pci_controller_ops
id|galaxy_pci_ops
op_assign
(brace
id|galaxy_pcibios_read_config_byte
comma
id|galaxy_pcibios_read_config_word
comma
id|galaxy_pcibios_read_config_dword
comma
id|galaxy_pcibios_write_config_byte
comma
id|galaxy_pcibios_write_config_word
comma
id|galaxy_pcibios_write_config_dword
)brace
suffix:semicolon
r_void
id|__init
DECL|function|galaxy_find_bridges
id|galaxy_find_bridges
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_controller
op_star
id|hose
suffix:semicolon
id|set_config_access_method
c_func
(paren
id|galaxy
)paren
suffix:semicolon
id|ppc_md.pcibios_fixup
op_assign
id|galaxy_pcibios_fixup
suffix:semicolon
id|hose
op_assign
id|pcibios_alloc_controller
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hose
)paren
r_return
suffix:semicolon
id|hose-&gt;ops
op_assign
op_amp
id|galaxy_pci_ops
suffix:semicolon
multiline_comment|/* Todo ...&n;&t;hose-&gt;cfg_data = ioremap(PCICFGDATA, ...);&n;&t;hose-&gt;cfg_addr = ioremap(PCICFGADDR, ...);&n;&t;*/
)brace
eof
