multiline_comment|/*&n; * init.c: PROM library initialisation code.&n; *&n; * Copyright (C) 1998 Gleb Raiko &amp; Vladimir Roganov&n; */
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;asm/bootinfo.h&gt;
macro_line|#include &lt;asm/addrspace.h&gt;
macro_line|#include &lt;asm/hp-lj/asic.h&gt;
macro_line|#include &lt;linux/bootmem.h&gt;
macro_line|#include &quot;utils.h&quot;
DECL|macro|Delimiter
mdefine_line|#define Delimiter &quot;CMDLINE=&quot;
DECL|variable|CommandLine
r_const
r_char
id|CommandLine
(braket
)braket
op_assign
id|Delimiter
l_string|&quot;root=/dev/hda3                                                                                                                                                                                                                                            &quot;
suffix:semicolon
DECL|variable|arcs_cmdline
r_char
id|arcs_cmdline
(braket
id|CL_SIZE
)braket
suffix:semicolon
DECL|function|prom_init
r_int
id|__init
id|prom_init
c_func
(paren
r_int
id|argc
comma
r_char
op_star
op_star
id|argv
comma
r_char
op_star
op_star
id|envp
)paren
(brace
id|ulong
id|mem_size
op_assign
id|get_mem_avail
c_func
(paren
)paren
suffix:semicolon
r_int
id|reserve_size
op_assign
l_int|0
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Total Memory: %ld bytes&bslash;n&quot;
comma
id|mem_size
)paren
suffix:semicolon
id|reserve_buffer
c_func
(paren
id|CommandLine
comma
id|mem_size
)paren
suffix:semicolon
id|reserve_size
op_assign
id|get_reserved_buffer_size
c_func
(paren
)paren
suffix:semicolon
id|mem_size
op_sub_assign
id|reserve_size
suffix:semicolon
id|add_memory_region
c_func
(paren
l_int|0x0
comma
id|mem_size
comma
id|BOOT_MEM_RAM
)paren
suffix:semicolon
id|add_memory_region
c_func
(paren
id|mem_size
comma
id|reserve_size
comma
id|BOOT_MEM_RESERVED
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Main Memory: %ld bytes&bslash;n&quot;
comma
id|mem_size
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Reserved Memory: %ld bytes at 0x%08x&bslash;n&quot;
comma
id|get_reserved_buffer_size
c_func
(paren
)paren
comma
(paren
id|ulong
)paren
id|get_reserved_buffer
c_func
(paren
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Detected %s ASIC&bslash;n&quot;
comma
id|GetAsicName
c_func
(paren
)paren
)paren
suffix:semicolon
id|mips_machgroup
op_assign
id|MACH_GROUP_HP_LJ
suffix:semicolon
id|mips_machtype
op_assign
id|MACH_UNKNOWN
suffix:semicolon
id|strcpy
c_func
(paren
id|arcs_cmdline
comma
id|CommandLine
op_plus
id|strlen
c_func
(paren
id|Delimiter
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|prom_free_prom_memory
r_void
id|prom_free_prom_memory
(paren
r_void
)paren
(brace
)brace
eof
