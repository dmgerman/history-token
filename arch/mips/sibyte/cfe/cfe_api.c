multiline_comment|/*&n; * Copyright (C) 2000, 2001, 2002 Broadcom Corporation&n; *&n; * This program is free software; you can redistribute it and/or&n; * modify it under the terms of the GNU General Public License&n; * as published by the Free Software Foundation; either version 2&n; * of the License, or (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.&n; */
multiline_comment|/*  *********************************************************************&n;    *&n;    *  Broadcom Common Firmware Environment (CFE)&n;    *&n;    *  Device Function stubs&t;&t;&t;File: cfe_api.c&n;    *&n;    *  This module contains device function stubs (small routines to&n;    *  call the standard &quot;iocb&quot; interface entry point to CFE).&n;    *  There should be one routine here per iocb function call.&n;    *&n;    *  Authors:  Mitch Lichtenberg, Chris Demetriou&n;    *&n;    ********************************************************************* */
macro_line|#include &quot;cfe_api.h&quot;
macro_line|#include &quot;cfe_api_int.h&quot;
multiline_comment|/* Cast from a native pointer to a cfe_xptr_t and back.&t; */
DECL|macro|XPTR_FROM_NATIVE
mdefine_line|#define XPTR_FROM_NATIVE(n)&t;((cfe_xptr_t) (intptr_t) (n))
DECL|macro|NATIVE_FROM_XPTR
mdefine_line|#define NATIVE_FROM_XPTR(x)&t;((void *) (intptr_t) (x))
macro_line|#ifdef CFE_API_IMPL_NAMESPACE
DECL|macro|cfe_iocb_dispatch
mdefine_line|#define cfe_iocb_dispatch(a)&t;&t;__cfe_iocb_dispatch(a)
macro_line|#endif
r_int
id|cfe_iocb_dispatch
c_func
(paren
id|cfe_xiocb_t
op_star
id|xiocb
)paren
suffix:semicolon
macro_line|#if defined(CFE_API_common) || defined(CFE_API_ALL)
multiline_comment|/*&n; * Declare the dispatch function with args of &quot;intptr_t&quot;.&n; * This makes sure whatever model we&squot;re compiling in&n; * puts the pointers in a single register.  For example,&n; * combining -mlong64 and -mips1 or -mips2 would lead to&n; * trouble, since the handle and IOCB pointer will be&n; * passed in two registers each, and CFE expects one.&n; */
DECL|variable|cfe_dispfunc
r_static
r_int
(paren
op_star
id|cfe_dispfunc
)paren
(paren
r_intptr
id|handle
comma
r_intptr
id|xiocb
)paren
op_assign
l_int|0
suffix:semicolon
DECL|variable|cfe_handle
r_static
id|cfe_xuint_t
id|cfe_handle
op_assign
l_int|0
suffix:semicolon
DECL|function|cfe_init
r_int
id|cfe_init
c_func
(paren
id|cfe_xuint_t
id|handle
comma
id|cfe_xuint_t
id|ept
)paren
(brace
id|cfe_dispfunc
op_assign
id|NATIVE_FROM_XPTR
c_func
(paren
id|ept
)paren
suffix:semicolon
id|cfe_handle
op_assign
id|handle
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|cfe_iocb_dispatch
r_int
id|cfe_iocb_dispatch
c_func
(paren
id|cfe_xiocb_t
op_star
id|xiocb
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|cfe_dispfunc
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
(paren
op_star
id|cfe_dispfunc
)paren
(paren
(paren
r_intptr
)paren
id|cfe_handle
comma
(paren
r_intptr
)paren
id|xiocb
)paren
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_common || CFE_API_ALL */
macro_line|#if defined(CFE_API_close) || defined(CFE_API_ALL)
DECL|function|cfe_close
r_int
id|cfe_close
c_func
(paren
r_int
id|handle
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_CLOSE
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
id|handle
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
l_int|0
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_close || CFE_API_ALL */
macro_line|#if defined(CFE_API_cpu_start) || defined(CFE_API_ALL)
DECL|function|cfe_cpu_start
r_int
id|cfe_cpu_start
c_func
(paren
r_int
id|cpu
comma
r_void
(paren
op_star
id|fn
)paren
(paren
r_void
)paren
comma
r_int
id|sp
comma
r_int
id|gp
comma
r_int
id|a1
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_CPUCTL
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_cpuctl_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.cpu_number
op_assign
id|cpu
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.cpu_command
op_assign
id|CFE_CPU_CMD_START
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.gp_val
op_assign
id|gp
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.sp_val
op_assign
id|sp
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.a1_val
op_assign
id|a1
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.start_addr
op_assign
(paren
r_int
)paren
id|fn
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_cpu_start || CFE_API_ALL */
macro_line|#if defined(CFE_API_cpu_stop) || defined(CFE_API_ALL)
DECL|function|cfe_cpu_stop
r_int
id|cfe_cpu_stop
c_func
(paren
r_int
id|cpu
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_CPUCTL
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_cpuctl_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.cpu_number
op_assign
id|cpu
suffix:semicolon
id|xiocb.plist.xiocb_cpuctl.cpu_command
op_assign
id|CFE_CPU_CMD_STOP
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_cpu_stop || CFE_API_ALL */
macro_line|#if defined(CFE_API_enumenv) || defined(CFE_API_ALL)
DECL|function|cfe_enumenv
r_int
id|cfe_enumenv
c_func
(paren
r_int
id|idx
comma
r_char
op_star
id|name
comma
r_int
id|namelen
comma
r_char
op_star
id|val
comma
r_int
id|vallen
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_ENV_SET
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_envbuf_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.enum_idx
op_assign
id|idx
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_length
op_assign
id|namelen
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|val
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_length
op_assign
id|vallen
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_enumenv || CFE_API_ALL */
macro_line|#if defined(CFE_API_enummem) || defined(CFE_API_ALL)
r_int
DECL|function|cfe_enummem
id|cfe_enummem
c_func
(paren
r_int
id|idx
comma
r_int
id|flags
comma
id|cfe_xuint_t
op_star
id|start
comma
id|cfe_xuint_t
op_star
id|length
comma
id|cfe_xuint_t
op_star
id|type
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_MEMENUM
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
id|flags
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_meminfo_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_meminfo.mi_idx
op_assign
id|idx
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
op_star
id|start
op_assign
id|xiocb.plist.xiocb_meminfo.mi_addr
suffix:semicolon
op_star
id|length
op_assign
id|xiocb.plist.xiocb_meminfo.mi_size
suffix:semicolon
op_star
id|type
op_assign
id|xiocb.plist.xiocb_meminfo.mi_type
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_enummem || CFE_API_ALL */
macro_line|#if defined(CFE_API_exit) || defined(CFE_API_ALL)
DECL|function|cfe_exit
r_int
id|cfe_exit
c_func
(paren
r_int
id|warm
comma
r_int
id|status
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_RESTART
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
id|warm
ques
c_cond
id|CFE_FLG_WARMSTART
suffix:colon
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_exitstat_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_exitstat.status
op_assign
id|status
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_exit || CFE_API_ALL */
macro_line|#if defined(CFE_API_flushcache) || defined(CFE_API_ALL)
DECL|function|cfe_flushcache
r_int
id|cfe_flushcache
c_func
(paren
r_int
id|flg
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_FLUSHCACHE
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
id|flg
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
l_int|0
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_flushcache || CFE_API_ALL */
macro_line|#if defined(CFE_API_getdevinfo) || defined(CFE_API_ALL)
DECL|function|cfe_getdevinfo
r_int
id|cfe_getdevinfo
c_func
(paren
r_char
op_star
id|name
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_GETINFO
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_buffer_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_offset
op_assign
l_int|0
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_length
op_assign
id|cfe_strlen
c_func
(paren
id|name
)paren
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.plist.xiocb_buffer.buf_devflags
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_getdevinfo || CFE_API_ALL */
macro_line|#if defined(CFE_API_getenv) || defined(CFE_API_ALL)
DECL|function|cfe_getenv
r_int
id|cfe_getenv
c_func
(paren
r_char
op_star
id|name
comma
r_char
op_star
id|dest
comma
r_int
id|destlen
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
op_star
id|dest
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_ENV_GET
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_envbuf_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.enum_idx
op_assign
l_int|0
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_length
op_assign
id|cfe_strlen
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|dest
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_length
op_assign
id|destlen
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_getenv || CFE_API_ALL */
macro_line|#if defined(CFE_API_getfwinfo) || defined(CFE_API_ALL)
DECL|function|cfe_getfwinfo
r_int
id|cfe_getfwinfo
c_func
(paren
id|cfe_fwinfo_t
op_star
id|info
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_GETINFO
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_fwinfo_t
)paren
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
id|info-&gt;fwi_version
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_version
suffix:semicolon
id|info-&gt;fwi_totalmem
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_totalmem
suffix:semicolon
id|info-&gt;fwi_flags
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_flags
suffix:semicolon
id|info-&gt;fwi_boardid
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_boardid
suffix:semicolon
id|info-&gt;fwi_bootarea_va
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_bootarea_va
suffix:semicolon
id|info-&gt;fwi_bootarea_pa
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_bootarea_pa
suffix:semicolon
id|info-&gt;fwi_bootarea_size
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_bootarea_size
suffix:semicolon
macro_line|#if 0
id|info-&gt;fwi_reserved1
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_reserved1
suffix:semicolon
id|info-&gt;fwi_reserved2
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_reserved2
suffix:semicolon
id|info-&gt;fwi_reserved3
op_assign
id|xiocb.plist.xiocb_fwinfo.fwi_reserved3
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_getfwinfo || CFE_API_ALL */
macro_line|#if defined(CFE_API_getstdhandle) || defined(CFE_API_ALL)
DECL|function|cfe_getstdhandle
r_int
id|cfe_getstdhandle
c_func
(paren
r_int
id|flg
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_GETHANDLE
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
id|flg
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
l_int|0
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.xiocb_handle
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_getstdhandle || CFE_API_ALL */
macro_line|#if defined(CFE_API_getticks) || defined(CFE_API_ALL)
r_int64
macro_line|#ifdef CFE_API_IMPL_NAMESPACE
DECL|function|__cfe_getticks
id|__cfe_getticks
c_func
(paren
r_void
)paren
macro_line|#else
id|cfe_getticks
c_func
(paren
r_void
)paren
macro_line|#endif
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_FW_GETTIME
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_time_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_time.ticks
op_assign
l_int|0
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.plist.xiocb_time.ticks
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_getticks || CFE_API_ALL */
macro_line|#if defined(CFE_API_inpstat) || defined(CFE_API_ALL)
DECL|function|cfe_inpstat
r_int
id|cfe_inpstat
c_func
(paren
r_int
id|handle
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_INPSTAT
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
id|handle
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_inpstat_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_inpstat.inp_status
op_assign
l_int|0
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.plist.xiocb_inpstat.inp_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_inpstat || CFE_API_ALL */
macro_line|#if defined(CFE_API_ioctl) || defined(CFE_API_ALL)
r_int
DECL|function|cfe_ioctl
id|cfe_ioctl
c_func
(paren
r_int
id|handle
comma
r_int
r_int
id|ioctlnum
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|length
comma
r_int
op_star
id|retlen
comma
id|cfe_xuint_t
id|offset
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_IOCTL
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
id|handle
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_buffer_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_offset
op_assign
id|offset
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ioctlcmd
op_assign
id|ioctlnum
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|buffer
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_length
op_assign
id|length
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retlen
)paren
op_star
id|retlen
op_assign
id|xiocb.plist.xiocb_buffer.buf_retlen
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_ioctl || CFE_API_ALL */
macro_line|#if defined(CFE_API_open) || defined(CFE_API_ALL)
DECL|function|cfe_open
r_int
id|cfe_open
c_func
(paren
r_char
op_star
id|name
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_OPEN
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_buffer_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_offset
op_assign
l_int|0
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_length
op_assign
id|cfe_strlen
c_func
(paren
id|name
)paren
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.xiocb_handle
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_open || CFE_API_ALL */
macro_line|#if defined(CFE_API_read) || defined(CFE_API_ALL)
DECL|function|cfe_read
r_int
id|cfe_read
c_func
(paren
r_int
id|handle
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|length
)paren
(brace
r_return
id|cfe_readblk
c_func
(paren
id|handle
comma
l_int|0
comma
id|buffer
comma
id|length
)paren
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_read || CFE_API_ALL */
macro_line|#if defined(CFE_API_readblk) || defined(CFE_API_ALL)
r_int
DECL|function|cfe_readblk
id|cfe_readblk
c_func
(paren
r_int
id|handle
comma
id|cfe_xint_t
id|offset
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|length
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_READ
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
id|handle
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_buffer_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_offset
op_assign
id|offset
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|buffer
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_length
op_assign
id|length
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.plist.xiocb_buffer.buf_retlen
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_readblk || CFE_API_ALL */
macro_line|#if defined(CFE_API_setenv) || defined(CFE_API_ALL)
DECL|function|cfe_setenv
r_int
id|cfe_setenv
c_func
(paren
r_char
op_star
id|name
comma
r_char
op_star
id|val
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_ENV_SET
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_envbuf_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.enum_idx
op_assign
l_int|0
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.name_length
op_assign
id|cfe_strlen
c_func
(paren
id|name
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|val
)paren
suffix:semicolon
id|xiocb.plist.xiocb_envbuf.val_length
op_assign
id|cfe_strlen
c_func
(paren
id|val
)paren
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_return
id|xiocb.xiocb_status
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_setenv || CFE_API_ALL */
macro_line|#if (defined(CFE_API_strlen) || defined(CFE_API_ALL)) &bslash;&n;    &amp;&amp; !defined(CFE_API_STRLEN_CUSTOM)
DECL|function|cfe_strlen
r_int
id|cfe_strlen
c_func
(paren
r_char
op_star
id|name
)paren
(brace
r_int
id|count
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
op_star
id|name
op_increment
)paren
id|count
op_increment
suffix:semicolon
r_return
id|count
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_strlen || CFE_API_ALL */
macro_line|#if defined(CFE_API_write) || defined(CFE_API_ALL)
DECL|function|cfe_write
r_int
id|cfe_write
c_func
(paren
r_int
id|handle
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|length
)paren
(brace
r_return
id|cfe_writeblk
c_func
(paren
id|handle
comma
l_int|0
comma
id|buffer
comma
id|length
)paren
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_write || CFE_API_ALL */
macro_line|#if defined(CFE_API_writeblk) || defined(CFE_API_ALL)
r_int
DECL|function|cfe_writeblk
id|cfe_writeblk
c_func
(paren
r_int
id|handle
comma
id|cfe_xint_t
id|offset
comma
r_int
r_char
op_star
id|buffer
comma
r_int
id|length
)paren
(brace
id|cfe_xiocb_t
id|xiocb
suffix:semicolon
id|xiocb.xiocb_fcode
op_assign
id|CFE_CMD_DEV_WRITE
suffix:semicolon
id|xiocb.xiocb_status
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_handle
op_assign
id|handle
suffix:semicolon
id|xiocb.xiocb_flags
op_assign
l_int|0
suffix:semicolon
id|xiocb.xiocb_psize
op_assign
r_sizeof
(paren
id|xiocb_buffer_t
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_offset
op_assign
id|offset
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_ptr
op_assign
id|XPTR_FROM_NATIVE
c_func
(paren
id|buffer
)paren
suffix:semicolon
id|xiocb.plist.xiocb_buffer.buf_length
op_assign
id|length
suffix:semicolon
id|cfe_iocb_dispatch
c_func
(paren
op_amp
id|xiocb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|xiocb.xiocb_status
OL
l_int|0
)paren
r_return
id|xiocb.xiocb_status
suffix:semicolon
r_return
id|xiocb.plist.xiocb_buffer.buf_retlen
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t;&t;/* CFE_API_writeblk || CFE_API_ALL */
eof
