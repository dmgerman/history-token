multiline_comment|/*&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 2001, 2003 Keith M Wesolowski&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;asm/bootinfo.h&gt;
macro_line|#include &lt;asm/mipsregs.h&gt;
macro_line|#include &lt;asm/ptrace.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/ip32/crime.h&gt;
macro_line|#include &lt;asm/ip32/mace.h&gt;
DECL|variable|sgi_crime
r_void
op_star
id|sgi_crime
suffix:semicolon
DECL|variable|mace
r_struct
id|sgi_mace
op_star
id|mace
suffix:semicolon
DECL|function|crime_init
r_void
id|__init
id|crime_init
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|id
comma
id|rev
suffix:semicolon
r_const
r_int
id|field
op_assign
l_int|2
op_star
r_sizeof
(paren
r_int
r_int
)paren
suffix:semicolon
id|sgi_crime
op_assign
id|ioremap
c_func
(paren
id|CRIME_BASE
comma
l_int|1
)paren
suffix:semicolon
id|mace
op_assign
id|ioremap
c_func
(paren
id|MACE_BASE
comma
r_sizeof
(paren
r_struct
id|sgi_mace
)paren
)paren
suffix:semicolon
id|id
op_assign
id|crime_read
c_func
(paren
id|CRIME_ID
)paren
suffix:semicolon
id|rev
op_assign
id|id
op_amp
id|CRIME_ID_REV
suffix:semicolon
id|id
op_assign
(paren
id|id
op_amp
id|CRIME_ID_IDBITS
)paren
op_rshift
l_int|4
suffix:semicolon
id|printk
(paren
id|KERN_INFO
l_string|&quot;CRIME id %1x rev %d at 0x%0*lx&bslash;n&quot;
comma
id|id
comma
id|rev
comma
id|field
comma
(paren
r_int
r_int
)paren
id|CRIME_BASE
)paren
suffix:semicolon
)brace
id|irqreturn_t
DECL|function|crime_memerr_intr
id|crime_memerr_intr
(paren
r_int
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|stat
comma
id|addr
suffix:semicolon
r_int
id|fatal
op_assign
l_int|0
suffix:semicolon
id|stat
op_assign
id|crime_read
c_func
(paren
id|CRIME_MEM_ERROR_STAT
)paren
op_amp
id|CRIME_MEM_ERROR_STAT_MASK
suffix:semicolon
id|addr
op_assign
id|crime_read
c_func
(paren
id|CRIME_MEM_ERROR_ADDR
)paren
op_amp
id|CRIME_MEM_ERROR_ADDR_MASK
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CRIME memory error at 0x%08lx ST 0x%08lx&lt;&quot;
comma
id|addr
comma
id|stat
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_INV
)paren
id|printk
c_func
(paren
l_string|&quot;INV,&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_ECC
)paren
(brace
r_int
r_int
id|ecc_syn
op_assign
id|crime_read
c_func
(paren
id|CRIME_MEM_ERROR_ECC_SYN
)paren
op_amp
id|CRIME_MEM_ERROR_ECC_SYN_MASK
suffix:semicolon
r_int
r_int
id|ecc_gen
op_assign
id|crime_read
c_func
(paren
id|CRIME_MEM_ERROR_ECC_CHK
)paren
op_amp
id|CRIME_MEM_ERROR_ECC_CHK_MASK
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ECC,SYN=0x%08lx,GEN=0x%08lx,&quot;
comma
id|ecc_syn
comma
id|ecc_gen
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_MULTIPLE
)paren
(brace
id|fatal
op_assign
l_int|1
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;MULTIPLE,&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_HARD_ERR
)paren
(brace
id|fatal
op_assign
l_int|1
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;HARD,&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_SOFT_ERR
)paren
id|printk
c_func
(paren
l_string|&quot;SOFT,&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_CPU_ACCESS
)paren
id|printk
c_func
(paren
l_string|&quot;CPU,&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_VICE_ACCESS
)paren
id|printk
c_func
(paren
l_string|&quot;VICE,&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_GBE_ACCESS
)paren
id|printk
c_func
(paren
l_string|&quot;GBE,&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_RE_ACCESS
)paren
id|printk
c_func
(paren
l_string|&quot;RE,REID=0x%02lx,&quot;
comma
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_RE_ID
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|CRIME_MEM_ERROR_MACE_ACCESS
)paren
id|printk
c_func
(paren
l_string|&quot;MACE,MACEID=0x%02lx,&quot;
comma
id|stat
op_amp
id|CRIME_MEM_ERROR_MACE_ID
)paren
suffix:semicolon
id|crime_write
c_func
(paren
l_int|0
comma
id|CRIME_MEM_ERROR_STAT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fatal
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;FATAL&gt;&bslash;n&quot;
)paren
suffix:semicolon
id|panic
c_func
(paren
l_string|&quot;Fatal memory error.&quot;
)paren
suffix:semicolon
)brace
r_else
id|printk
c_func
(paren
l_string|&quot;NONFATAL&gt;&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
id|irqreturn_t
DECL|function|crime_cpuerr_intr
id|crime_cpuerr_intr
(paren
r_int
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|stat
op_assign
id|crime_read
c_func
(paren
id|CRIME_CPU_ERROR_STAT
)paren
op_amp
id|CRIME_CPU_ERROR_MASK
suffix:semicolon
r_uint64
id|addr
op_assign
id|crime_read
c_func
(paren
id|CRIME_CPU_ERROR_ADDR
)paren
op_amp
id|CRIME_CPU_ERROR_ADDR_MASK
suffix:semicolon
id|addr
op_lshift_assign
l_int|2
suffix:semicolon
id|printk
(paren
l_string|&quot;CRIME CPU error at 0x%09lx status 0x%08lx&bslash;n&quot;
comma
id|addr
comma
id|stat
)paren
suffix:semicolon
id|crime_write
c_func
(paren
l_int|0
comma
id|CRIME_CPU_ERROR_STAT
)paren
suffix:semicolon
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
eof
