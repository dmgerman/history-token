multiline_comment|/***********************************************************************&n; *&n; * Copyright 2001 MontaVista Software Inc.&n; * Author: jsun@mvista.com or jsun@junsun.net&n; *&n; * arch/mips/ddb5xxx/ddb5477/debug.c&n; *     vrc5477 specific debug routines.&n; *&n; * This program is free software; you can redistribute  it and/or modify it&n; * under  the terms of  the GNU General  Public License as published by the&n; * Free Software Foundation;  either version 2 of the  License, or (at your&n; * option) any later version.&n; *&n; ***********************************************************************&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/signal.h&gt;&t;&t;/* SA_INTERRUPT */
macro_line|#include &lt;asm/mipsregs.h&gt;
macro_line|#include &lt;asm/ddb5xxx/ddb5xxx.h&gt;
r_typedef
r_struct
(brace
DECL|member|regname
r_const
r_char
op_star
id|regname
suffix:semicolon
DECL|member|regaddr
r_int
id|regaddr
suffix:semicolon
DECL|typedef|Register
)brace
id|Register
suffix:semicolon
DECL|function|jsun_show_regs
r_void
id|jsun_show_regs
c_func
(paren
r_char
op_star
id|name
comma
id|Register
op_star
id|regs
)paren
(brace
r_int
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;nshow regs: %s&bslash;n&quot;
comma
id|name
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|regs
(braket
id|i
)braket
dot
id|regname
op_ne
l_int|NULL
suffix:semicolon
id|i
op_increment
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%-16s= %08x&bslash;t&bslash;t(@%08x)&bslash;n&quot;
comma
id|regs
(braket
id|i
)braket
dot
id|regname
comma
op_star
(paren
r_int
op_star
)paren
(paren
id|regs
(braket
id|i
)braket
dot
id|regaddr
)paren
comma
id|regs
(braket
id|i
)braket
dot
id|regaddr
)paren
suffix:semicolon
)brace
)brace
DECL|variable|int_regs
r_static
id|Register
id|int_regs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;DDB_INTCTRL0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTCTRL0
)brace
comma
(brace
l_string|&quot;DDB_INTCTRL1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTCTRL1
)brace
comma
(brace
l_string|&quot;DDB_INTCTRL2&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTCTRL2
)brace
comma
(brace
l_string|&quot;DDB_INTCTRL3&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTCTRL3
)brace
comma
(brace
l_string|&quot;DDB_INT0STAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INT0STAT
)brace
comma
(brace
l_string|&quot;DDB_INT1STAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INT1STAT
)brace
comma
(brace
l_string|&quot;DDB_INT2STAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INT2STAT
)brace
comma
(brace
l_string|&quot;DDB_INT3STAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INT3STAT
)brace
comma
(brace
l_string|&quot;DDB_INT4STAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INT4STAT
)brace
comma
(brace
l_string|&quot;DDB_NMISTAT&quot;
comma
id|DDB_BASE
op_plus
id|DDB_NMISTAT
)brace
comma
(brace
l_string|&quot;DDB_INTPPES0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTPPES0
)brace
comma
(brace
l_string|&quot;DDB_INTPPES1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTPPES1
)brace
comma
(brace
l_int|NULL
comma
l_int|0x0
)brace
)brace
suffix:semicolon
DECL|function|vrc5477_show_int_regs
r_void
id|vrc5477_show_int_regs
c_func
(paren
)paren
(brace
id|jsun_show_regs
c_func
(paren
l_string|&quot;interrupt registers&quot;
comma
id|int_regs
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CPU CAUSE = %08x&bslash;n&quot;
comma
id|read_32bit_cp0_register
c_func
(paren
id|CP0_CAUSE
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CPU STATUS = %08x&bslash;n&quot;
comma
id|read_32bit_cp0_register
c_func
(paren
id|CP0_STATUS
)paren
)paren
suffix:semicolon
)brace
DECL|variable|pdar_regs
r_static
id|Register
id|pdar_regs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;DDB_SDRAM0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_SDRAM0
)brace
comma
(brace
l_string|&quot;DDB_SDRAM1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_SDRAM1
)brace
comma
(brace
l_string|&quot;DDB_LDCS0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LDCS0
)brace
comma
(brace
l_string|&quot;DDB_LDCS1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LDCS1
)brace
comma
(brace
l_string|&quot;DDB_LDCS2&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LDCS2
)brace
comma
(brace
l_string|&quot;DDB_INTCS&quot;
comma
id|DDB_BASE
op_plus
id|DDB_INTCS
)brace
comma
(brace
l_string|&quot;DDB_BOOTCS&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BOOTCS
)brace
comma
(brace
l_string|&quot;DDB_PCIW0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIW0
)brace
comma
(brace
l_string|&quot;DDB_PCIW1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIW1
)brace
comma
(brace
l_string|&quot;DDB_IOPCIW0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_IOPCIW0
)brace
comma
(brace
l_string|&quot;DDB_IOPCIW1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_IOPCIW1
)brace
comma
(brace
l_int|NULL
comma
l_int|0x0
)brace
)brace
suffix:semicolon
DECL|function|vrc5477_show_pdar_regs
r_void
id|vrc5477_show_pdar_regs
c_func
(paren
r_void
)paren
(brace
id|jsun_show_regs
c_func
(paren
l_string|&quot;PDAR regs&quot;
comma
id|pdar_regs
)paren
suffix:semicolon
)brace
DECL|variable|bar_regs
r_static
id|Register
id|bar_regs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;DDB_BARC0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARC0
)brace
comma
(brace
l_string|&quot;DDB_BARM010&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARM010
)brace
comma
(brace
l_string|&quot;DDB_BARM230&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARM230
)brace
comma
(brace
l_string|&quot;DDB_BAR00&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR00
)brace
comma
(brace
l_string|&quot;DDB_BAR10&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR10
)brace
comma
(brace
l_string|&quot;DDB_BAR20&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR20
)brace
comma
(brace
l_string|&quot;DDB_BAR30&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR30
)brace
comma
(brace
l_string|&quot;DDB_BAR40&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR40
)brace
comma
(brace
l_string|&quot;DDB_BAR50&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR50
)brace
comma
(brace
l_string|&quot;DDB_BARB0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARB0
)brace
comma
(brace
l_string|&quot;DDB_BARC1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARC1
)brace
comma
(brace
l_string|&quot;DDB_BARM011&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARM011
)brace
comma
(brace
l_string|&quot;DDB_BARM231&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARM231
)brace
comma
(brace
l_string|&quot;DDB_BAR01&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR01
)brace
comma
(brace
l_string|&quot;DDB_BAR11&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR11
)brace
comma
(brace
l_string|&quot;DDB_BAR21&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR21
)brace
comma
(brace
l_string|&quot;DDB_BAR31&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR31
)brace
comma
(brace
l_string|&quot;DDB_BAR41&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR41
)brace
comma
(brace
l_string|&quot;DDB_BAR51&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BAR51
)brace
comma
(brace
l_string|&quot;DDB_BARB1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BARB1
)brace
comma
(brace
l_int|NULL
comma
l_int|0x0
)brace
)brace
suffix:semicolon
DECL|function|vrc5477_show_bar_regs
r_void
id|vrc5477_show_bar_regs
c_func
(paren
r_void
)paren
(brace
id|jsun_show_regs
c_func
(paren
l_string|&quot;BAR regs&quot;
comma
id|bar_regs
)paren
suffix:semicolon
)brace
DECL|variable|pci_regs
r_static
id|Register
id|pci_regs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;DDB_PCIW0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIW0
)brace
comma
(brace
l_string|&quot;DDB_PCIW1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIW1
)brace
comma
(brace
l_string|&quot;DDB_PCIINIT00&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIINIT00
)brace
comma
(brace
l_string|&quot;DDB_PCIINIT10&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIINIT10
)brace
comma
(brace
l_string|&quot;DDB_PCICTL0_L&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCICTL0_L
)brace
comma
(brace
l_string|&quot;DDB_PCICTL0_H&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCICTL0_H
)brace
comma
(brace
l_string|&quot;DDB_PCIARB0_L&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIARB0_L
)brace
comma
(brace
l_string|&quot;DDB_PCIARB0_H&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIARB0_H
)brace
comma
(brace
l_string|&quot;DDB_PCISWP0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCISWP0
)brace
comma
(brace
l_string|&quot;DDB_PCIERR0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIERR0
)brace
comma
(brace
l_string|&quot;DDB_IOPCIW0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_IOPCIW0
)brace
comma
(brace
l_string|&quot;DDB_IOPCIW1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_IOPCIW1
)brace
comma
(brace
l_string|&quot;DDB_PCIINIT01&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIINIT01
)brace
comma
(brace
l_string|&quot;DDB_PCIINIT11&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIINIT11
)brace
comma
(brace
l_string|&quot;DDB_PCICTL1_L&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCICTL1_L
)brace
comma
(brace
l_string|&quot;DDB_PCICTL1_H&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCICTL1_H
)brace
comma
(brace
l_string|&quot;DDB_PCIARB1_L&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIARB1_L
)brace
comma
(brace
l_string|&quot;DDB_PCIARB1_H&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIARB1_H
)brace
comma
(brace
l_string|&quot;DDB_PCISWP1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCISWP1
)brace
comma
(brace
l_string|&quot;DDB_PCIERR1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_PCIERR1
)brace
comma
(brace
l_int|NULL
comma
l_int|0x0
)brace
)brace
suffix:semicolon
DECL|function|vrc5477_show_pci_regs
r_void
id|vrc5477_show_pci_regs
c_func
(paren
r_void
)paren
(brace
id|jsun_show_regs
c_func
(paren
l_string|&quot;PCI regs&quot;
comma
id|pci_regs
)paren
suffix:semicolon
)brace
DECL|variable|lb_regs
r_static
id|Register
id|lb_regs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;DDB_LCNFG&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LCNFG
)brace
comma
(brace
l_string|&quot;DDB_LCST0&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LCST0
)brace
comma
(brace
l_string|&quot;DDB_LCST1&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LCST1
)brace
comma
(brace
l_string|&quot;DDB_LCST2&quot;
comma
id|DDB_BASE
op_plus
id|DDB_LCST2
)brace
comma
(brace
l_string|&quot;DDB_ERRADR&quot;
comma
id|DDB_BASE
op_plus
id|DDB_ERRADR
)brace
comma
(brace
l_string|&quot;DDB_ERRCS&quot;
comma
id|DDB_BASE
op_plus
id|DDB_ERRCS
)brace
comma
(brace
l_string|&quot;DDB_BTM&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BTM
)brace
comma
(brace
l_string|&quot;DDB_BCST&quot;
comma
id|DDB_BASE
op_plus
id|DDB_BCST
)brace
comma
(brace
l_int|NULL
comma
l_int|0x0
)brace
)brace
suffix:semicolon
DECL|function|vrc5477_show_lb_regs
r_void
id|vrc5477_show_lb_regs
c_func
(paren
r_void
)paren
(brace
id|jsun_show_regs
c_func
(paren
l_string|&quot;Local Bus regs&quot;
comma
id|lb_regs
)paren
suffix:semicolon
)brace
DECL|function|vrc5477_show_all_regs
r_void
id|vrc5477_show_all_regs
c_func
(paren
r_void
)paren
(brace
id|vrc5477_show_pdar_regs
c_func
(paren
)paren
suffix:semicolon
id|vrc5477_show_pci_regs
c_func
(paren
)paren
suffix:semicolon
id|vrc5477_show_bar_regs
c_func
(paren
)paren
suffix:semicolon
id|vrc5477_show_int_regs
c_func
(paren
)paren
suffix:semicolon
id|vrc5477_show_lb_regs
c_func
(paren
)paren
suffix:semicolon
)brace
eof
