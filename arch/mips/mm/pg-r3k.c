multiline_comment|/*&n; * Copyright (C) 2001 Ralf Baechle (ralf@gnu.org)&n; */
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
multiline_comment|/* page functions */
DECL|function|r3k_clear_page
r_void
id|r3k_clear_page
c_func
(paren
r_void
op_star
id|page
)paren
(brace
id|__asm__
id|__volatile__
c_func
(paren
l_string|&quot;.set&bslash;tnoreorder&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;tnoat&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t$1,%0,%2&bslash;n&quot;
l_string|&quot;1:&bslash;tsw&bslash;t$0,(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,4(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,8(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,12(%0)&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t%0,32&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,-16(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,-12(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,-8(%0)&bslash;n&bslash;t&quot;
l_string|&quot;bne&bslash;t$1,%0,1b&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t$0,-4(%0)&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;tat&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;treorder&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|page
)paren
suffix:colon
l_string|&quot;0&quot;
(paren
id|page
)paren
comma
l_string|&quot;I&quot;
(paren
id|PAGE_SIZE
)paren
suffix:colon
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
DECL|function|r3k_copy_page
r_void
id|r3k_copy_page
c_func
(paren
r_void
op_star
id|to
comma
r_void
op_star
id|from
)paren
(brace
r_int
r_int
id|dummy1
comma
id|dummy2
suffix:semicolon
r_int
r_int
id|reg1
comma
id|reg2
comma
id|reg3
comma
id|reg4
suffix:semicolon
id|__asm__
id|__volatile__
c_func
(paren
l_string|&quot;.set&bslash;tnoreorder&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;tnoat&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t$1,%0,%8&bslash;n&quot;
l_string|&quot;1:&bslash;tlw&bslash;t%2,(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%3,4(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%4,8(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%5,12(%1)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2,(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%3,4(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%4,8(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%5,12(%0)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%2,16(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%3,20(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%4,24(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%5,28(%1)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2,16(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%3,20(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%4,24(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%5,28(%0)&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t%0,64&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t%1,64&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%2,-32(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%3,-28(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%4,-24(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%5,-20(%1)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2,-32(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%3,-28(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%4,-24(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%5,-20(%0)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%2,-16(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%3,-12(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%4,-8(%1)&bslash;n&bslash;t&quot;
l_string|&quot;lw&bslash;t%5,-4(%1)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2,-16(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%3,-12(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%4,-8(%0)&bslash;n&bslash;t&quot;
l_string|&quot;bne&bslash;t$1,%0,1b&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%5,-4(%0)&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;tat&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;treorder&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|dummy1
)paren
comma
l_string|&quot;=r&quot;
(paren
id|dummy2
)paren
comma
l_string|&quot;=&amp;r&quot;
(paren
id|reg1
)paren
comma
l_string|&quot;=&amp;r&quot;
(paren
id|reg2
)paren
comma
l_string|&quot;=&amp;r&quot;
(paren
id|reg3
)paren
comma
l_string|&quot;=&amp;r&quot;
(paren
id|reg4
)paren
suffix:colon
l_string|&quot;0&quot;
(paren
id|to
)paren
comma
l_string|&quot;1&quot;
(paren
id|from
)paren
comma
l_string|&quot;I&quot;
(paren
id|PAGE_SIZE
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Initialize new page directory with pointers to invalid ptes&n; */
DECL|function|pgd_init
r_void
id|pgd_init
c_func
(paren
r_int
r_int
id|page
)paren
(brace
r_int
r_int
id|dummy1
comma
id|dummy2
suffix:semicolon
multiline_comment|/*&n;&t; * The plain and boring version for the R3000.  No cache flushing&n;&t; * stuff is implemented since the R3000 has physical caches.&n;&t; */
id|__asm__
id|__volatile__
c_func
(paren
l_string|&quot;.set&bslash;tnoreorder&bslash;n&quot;
l_string|&quot;1:&bslash;tsw&bslash;t%2, (%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 4(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 8(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 12(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 16(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 20(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 24(%0)&bslash;n&bslash;t&quot;
l_string|&quot;sw&bslash;t%2, 28(%0)&bslash;n&bslash;t&quot;
l_string|&quot;subu&bslash;t%1, 1&bslash;n&bslash;t&quot;
l_string|&quot;bnez&bslash;t%1, 1b&bslash;n&bslash;t&quot;
l_string|&quot;addiu&bslash;t%0, 32&bslash;n&bslash;t&quot;
l_string|&quot;.set&bslash;treorder&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|dummy1
)paren
comma
l_string|&quot;=r&quot;
(paren
id|dummy2
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
(paren
r_int
r_int
)paren
id|invalid_pte_table
)paren
comma
l_string|&quot;0&quot;
(paren
id|page
)paren
comma
l_string|&quot;1&quot;
(paren
id|USER_PTRS_PER_PGD
op_div
l_int|8
)paren
)paren
suffix:semicolon
)brace
eof
