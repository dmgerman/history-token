multiline_comment|/*&n; * Thomas Horsten &lt;thh@lasat.com&gt;&n; * Copyright (C) 2000 LASAT Networks A/S.&n; *&n; *  This program is free software; you can distribute it and/or modify it&n; *  under the terms of the GNU General Public License (Version 2) as&n; *  published by the Free Software Foundation.&n; *&n; *  This program is distributed in the hope it will be useful, but WITHOUT&n; *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or&n; *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License&n; *  for more details.&n; *&n; *  You should have received a copy of the GNU General Public License along&n; *  with this program; if not, write to the Free Software Foundation, Inc.,&n; *  59 Temple Place - Suite 330, Boston MA 02111-1307, USA.&n; *&n; * Routines specific to the LASAT boards&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;asm/lasat/lasat.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/sysctl.h&gt;
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/ctype.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/net.h&gt;
macro_line|#include &lt;linux/inet.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &quot;sysctl.h&quot;
macro_line|#include &quot;ds1603.h&quot;
r_static
id|DECLARE_MUTEX
c_func
(paren
id|lasat_info_sem
)paren
suffix:semicolon
multiline_comment|/* Strategy function to write EEPROM after changing string entry */
DECL|function|sysctl_lasatstring
r_int
id|sysctl_lasatstring
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
op_star
id|name
comma
r_int
id|nlen
comma
r_void
op_star
id|oldval
comma
r_int
op_star
id|oldlenp
comma
r_void
op_star
id|newval
comma
r_int
id|newlen
comma
r_void
op_star
op_star
id|context
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|sysctl_string
c_func
(paren
id|table
comma
id|name
comma
id|nlen
comma
id|oldval
comma
id|oldlenp
comma
id|newval
comma
id|newlen
comma
id|context
)paren
suffix:semicolon
r_if
c_cond
(paren
id|r
OL
l_int|0
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
r_if
c_cond
(paren
id|newval
op_logical_and
id|newlen
)paren
(brace
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* And the same for proc */
DECL|function|proc_dolasatstring
r_int
id|proc_dolasatstring
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
id|write
comma
r_struct
id|file
op_star
id|filp
comma
r_void
op_star
id|buffer
comma
r_int
op_star
id|lenp
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|proc_dostring
c_func
(paren
id|table
comma
id|write
comma
id|filp
comma
id|buffer
comma
id|lenp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|write
)paren
op_logical_or
id|r
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* proc function to write EEPROM after changing int entry */
DECL|function|proc_dolasatint
r_int
id|proc_dolasatint
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
id|write
comma
r_struct
id|file
op_star
id|filp
comma
r_void
op_star
id|buffer
comma
r_int
op_star
id|lenp
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|proc_dointvec
c_func
(paren
id|table
comma
id|write
comma
id|filp
comma
id|buffer
comma
id|lenp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|write
)paren
op_logical_or
id|r
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|rtctmp
r_static
r_int
id|rtctmp
suffix:semicolon
macro_line|#ifdef CONFIG_DS1603
multiline_comment|/* proc function to read/write RealTime Clock */
DECL|function|proc_dolasatrtc
r_int
id|proc_dolasatrtc
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
id|write
comma
r_struct
id|file
op_star
id|filp
comma
r_void
op_star
id|buffer
comma
r_int
op_star
id|lenp
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|write
)paren
(brace
id|rtctmp
op_assign
id|ds1603_read
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* check for time &lt; 0 and set to 0 */
r_if
c_cond
(paren
id|rtctmp
OL
l_int|0
)paren
id|rtctmp
op_assign
l_int|0
suffix:semicolon
)brace
id|r
op_assign
id|proc_dointvec
c_func
(paren
id|table
comma
id|write
comma
id|filp
comma
id|buffer
comma
id|lenp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|write
)paren
op_logical_or
id|r
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
id|ds1603_set
c_func
(paren
id|rtctmp
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* Sysctl for setting the IP addresses */
DECL|function|sysctl_lasat_intvec
r_int
id|sysctl_lasat_intvec
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
op_star
id|name
comma
r_int
id|nlen
comma
r_void
op_star
id|oldval
comma
r_int
op_star
id|oldlenp
comma
r_void
op_star
id|newval
comma
r_int
id|newlen
comma
r_void
op_star
op_star
id|context
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|sysctl_intvec
c_func
(paren
id|table
comma
id|name
comma
id|nlen
comma
id|oldval
comma
id|oldlenp
comma
id|newval
comma
id|newlen
comma
id|context
)paren
suffix:semicolon
r_if
c_cond
(paren
id|r
OL
l_int|0
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
r_if
c_cond
(paren
id|newval
op_logical_and
id|newlen
)paren
(brace
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_DS1603
multiline_comment|/* Same for RTC */
DECL|function|sysctl_lasat_rtc
r_int
id|sysctl_lasat_rtc
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
op_star
id|name
comma
r_int
id|nlen
comma
r_void
op_star
id|oldval
comma
r_int
op_star
id|oldlenp
comma
r_void
op_star
id|newval
comma
r_int
id|newlen
comma
r_void
op_star
op_star
id|context
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|rtctmp
op_assign
id|ds1603_read
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rtctmp
OL
l_int|0
)paren
id|rtctmp
op_assign
l_int|0
suffix:semicolon
id|r
op_assign
id|sysctl_intvec
c_func
(paren
id|table
comma
id|name
comma
id|nlen
comma
id|oldval
comma
id|oldlenp
comma
id|newval
comma
id|newlen
comma
id|context
)paren
suffix:semicolon
r_if
c_cond
(paren
id|r
OL
l_int|0
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
r_if
c_cond
(paren
id|newval
op_logical_and
id|newlen
)paren
(brace
id|ds1603_set
c_func
(paren
id|rtctmp
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_INET
DECL|variable|lasat_bcastaddr
r_static
r_char
id|lasat_bcastaddr
(braket
l_int|16
)braket
suffix:semicolon
DECL|function|update_bcastaddr
r_void
id|update_bcastaddr
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|ip
suffix:semicolon
id|ip
op_assign
(paren
id|lasat_board_info.li_eeprom_info.ipaddr
op_amp
id|lasat_board_info.li_eeprom_info.netmask
)paren
op_or
op_complement
id|lasat_board_info.li_eeprom_info.netmask
suffix:semicolon
id|sprintf
c_func
(paren
id|lasat_bcastaddr
comma
l_string|&quot;%d.%d.%d.%d&quot;
comma
(paren
id|ip
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
)brace
DECL|variable|proc_lasat_ipbuf
r_static
r_char
id|proc_lasat_ipbuf
(braket
l_int|32
)braket
suffix:semicolon
multiline_comment|/* Parsing of IP address */
DECL|function|proc_lasat_ip
r_int
id|proc_lasat_ip
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
id|write
comma
r_struct
id|file
op_star
id|filp
comma
r_void
op_star
id|buffer
comma
r_int
op_star
id|lenp
)paren
(brace
r_int
id|len
suffix:semicolon
r_int
r_int
id|ip
suffix:semicolon
r_char
op_star
id|p
comma
id|c
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|table-&gt;data
op_logical_or
op_logical_neg
id|table-&gt;maxlen
op_logical_or
op_logical_neg
op_star
id|lenp
op_logical_or
(paren
id|filp-&gt;f_pos
op_logical_and
op_logical_neg
id|write
)paren
)paren
(brace
op_star
id|lenp
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|write
)paren
(brace
id|len
op_assign
l_int|0
suffix:semicolon
id|p
op_assign
id|buffer
suffix:semicolon
r_while
c_loop
(paren
id|len
OL
op_star
id|lenp
)paren
(brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|c
comma
id|p
op_increment
)paren
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
l_int|0
op_logical_or
id|c
op_eq
l_char|&squot;&bslash;n&squot;
)paren
r_break
suffix:semicolon
id|len
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
op_ge
r_sizeof
(paren
id|proc_lasat_ipbuf
)paren
op_minus
l_int|1
)paren
id|len
op_assign
r_sizeof
(paren
id|proc_lasat_ipbuf
)paren
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|proc_lasat_ipbuf
comma
id|buffer
comma
id|len
)paren
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|proc_lasat_ipbuf
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|filp-&gt;f_pos
op_add_assign
op_star
id|lenp
suffix:semicolon
multiline_comment|/* Now see if we can convert it to a valid IP */
id|ip
op_assign
id|in_aton
c_func
(paren
id|proc_lasat_ipbuf
)paren
suffix:semicolon
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|table-&gt;data
)paren
op_assign
id|ip
suffix:semicolon
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|ip
op_assign
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|table-&gt;data
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|proc_lasat_ipbuf
comma
l_string|&quot;%d.%d.%d.%d&quot;
comma
(paren
id|ip
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
comma
(paren
id|ip
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|proc_lasat_ipbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
op_star
id|lenp
)paren
id|len
op_assign
op_star
id|lenp
suffix:semicolon
r_if
c_cond
(paren
id|len
)paren
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|buffer
comma
id|proc_lasat_ipbuf
comma
id|len
)paren
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OL
op_star
id|lenp
)paren
(brace
r_if
c_cond
(paren
id|put_user
c_func
(paren
l_char|&squot;&bslash;n&squot;
comma
(paren
(paren
r_char
op_star
)paren
id|buffer
)paren
op_plus
id|len
)paren
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|len
op_increment
suffix:semicolon
)brace
op_star
id|lenp
op_assign
id|len
suffix:semicolon
id|filp-&gt;f_pos
op_add_assign
id|len
suffix:semicolon
)brace
id|update_bcastaddr
c_func
(paren
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif /* defined(CONFIG_INET) */
DECL|function|sysctl_lasat_eeprom_value
r_static
r_int
id|sysctl_lasat_eeprom_value
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
op_star
id|name
comma
r_int
id|nlen
comma
r_void
op_star
id|oldval
comma
r_int
op_star
id|oldlenp
comma
r_void
op_star
id|newval
comma
r_int
id|newlen
comma
r_void
op_star
op_star
id|context
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|sysctl_intvec
c_func
(paren
id|table
comma
id|name
comma
id|nlen
comma
id|oldval
comma
id|oldlenp
comma
id|newval
comma
id|newlen
comma
id|context
)paren
suffix:semicolon
r_if
c_cond
(paren
id|r
OL
l_int|0
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
r_if
c_cond
(paren
id|newval
op_logical_and
id|newlen
)paren
(brace
r_if
c_cond
(paren
id|name
op_logical_and
op_star
id|name
op_eq
id|LASAT_PRID
)paren
id|lasat_board_info.li_eeprom_info.prid
op_assign
op_star
(paren
r_int
op_star
)paren
id|newval
suffix:semicolon
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
id|lasat_init_board_info
c_func
(paren
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|proc_lasat_eeprom_value
r_int
id|proc_lasat_eeprom_value
c_func
(paren
id|ctl_table
op_star
id|table
comma
r_int
id|write
comma
r_struct
id|file
op_star
id|filp
comma
r_void
op_star
id|buffer
comma
r_int
op_star
id|lenp
)paren
(brace
r_int
id|r
suffix:semicolon
id|down
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
id|r
op_assign
id|proc_dointvec
c_func
(paren
id|table
comma
id|write
comma
id|filp
comma
id|buffer
comma
id|lenp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|write
)paren
op_logical_or
id|r
)paren
(brace
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
id|r
suffix:semicolon
)brace
r_if
c_cond
(paren
id|filp
op_logical_and
id|filp-&gt;f_dentry
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|filp-&gt;f_dentry-&gt;d_name.name
comma
l_string|&quot;prid&quot;
)paren
)paren
id|lasat_board_info.li_eeprom_info.prid
op_assign
id|lasat_board_info.li_prid
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|filp-&gt;f_dentry-&gt;d_name.name
comma
l_string|&quot;debugaccess&quot;
)paren
)paren
id|lasat_board_info.li_eeprom_info.debugaccess
op_assign
id|lasat_board_info.li_debugaccess
suffix:semicolon
)brace
id|lasat_write_eeprom_info
c_func
(paren
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|lasat_info_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_extern
r_int
id|lasat_boot_to_service
suffix:semicolon
macro_line|#ifdef CONFIG_SYSCTL
DECL|variable|lasat_table
r_static
id|ctl_table
id|lasat_table
(braket
)braket
op_assign
(brace
(brace
id|LASAT_CPU_HZ
comma
l_string|&quot;cpu-hz&quot;
comma
op_amp
id|lasat_board_info.li_cpu_hz
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0444
comma
l_int|NULL
comma
op_amp
id|proc_dointvec
comma
op_amp
id|sysctl_intvec
)brace
comma
(brace
id|LASAT_BUS_HZ
comma
l_string|&quot;bus-hz&quot;
comma
op_amp
id|lasat_board_info.li_bus_hz
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0444
comma
l_int|NULL
comma
op_amp
id|proc_dointvec
comma
op_amp
id|sysctl_intvec
)brace
comma
(brace
id|LASAT_MODEL
comma
l_string|&quot;bmid&quot;
comma
op_amp
id|lasat_board_info.li_bmid
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0444
comma
l_int|NULL
comma
op_amp
id|proc_dointvec
comma
op_amp
id|sysctl_intvec
)brace
comma
(brace
id|LASAT_PRID
comma
l_string|&quot;prid&quot;
comma
op_amp
id|lasat_board_info.li_prid
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0644
comma
l_int|NULL
comma
op_amp
id|proc_lasat_eeprom_value
comma
op_amp
id|sysctl_lasat_eeprom_value
)brace
comma
macro_line|#ifdef CONFIG_INET
(brace
id|LASAT_IPADDR
comma
l_string|&quot;ipaddr&quot;
comma
op_amp
id|lasat_board_info.li_eeprom_info.ipaddr
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0644
comma
l_int|NULL
comma
op_amp
id|proc_lasat_ip
comma
op_amp
id|sysctl_lasat_intvec
)brace
comma
(brace
id|LASAT_NETMASK
comma
l_string|&quot;netmask&quot;
comma
op_amp
id|lasat_board_info.li_eeprom_info.netmask
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0644
comma
l_int|NULL
comma
op_amp
id|proc_lasat_ip
comma
op_amp
id|sysctl_lasat_intvec
)brace
comma
(brace
id|LASAT_BCAST
comma
l_string|&quot;bcastaddr&quot;
comma
op_amp
id|lasat_bcastaddr
comma
r_sizeof
(paren
id|lasat_bcastaddr
)paren
comma
l_int|0600
comma
l_int|NULL
comma
op_amp
id|proc_dostring
comma
op_amp
id|sysctl_string
)brace
comma
macro_line|#endif
(brace
id|LASAT_PASSWORD
comma
l_string|&quot;passwd_hash&quot;
comma
op_amp
id|lasat_board_info.li_eeprom_info.passwd_hash
comma
r_sizeof
(paren
id|lasat_board_info.li_eeprom_info.passwd_hash
)paren
comma
l_int|0600
comma
l_int|NULL
comma
op_amp
id|proc_dolasatstring
comma
op_amp
id|sysctl_lasatstring
)brace
comma
(brace
id|LASAT_SBOOT
comma
l_string|&quot;boot-service&quot;
comma
op_amp
id|lasat_boot_to_service
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0644
comma
l_int|NULL
comma
op_amp
id|proc_dointvec
comma
op_amp
id|sysctl_intvec
)brace
comma
macro_line|#ifdef CONFIG_DS1603
(brace
id|LASAT_RTC
comma
l_string|&quot;rtc&quot;
comma
op_amp
id|rtctmp
comma
r_sizeof
(paren
r_int
)paren
comma
l_int|0644
comma
l_int|NULL
comma
op_amp
id|proc_dolasatrtc
comma
op_amp
id|sysctl_lasat_rtc
)brace
comma
macro_line|#endif
(brace
id|LASAT_NAMESTR
comma
l_string|&quot;namestr&quot;
comma
op_amp
id|lasat_board_info.li_namestr
comma
r_sizeof
(paren
id|lasat_board_info.li_namestr
)paren
comma
l_int|0444
comma
l_int|NULL
comma
op_amp
id|proc_dostring
comma
op_amp
id|sysctl_string
)brace
comma
(brace
id|LASAT_TYPESTR
comma
l_string|&quot;typestr&quot;
comma
op_amp
id|lasat_board_info.li_typestr
comma
r_sizeof
(paren
id|lasat_board_info.li_typestr
)paren
comma
l_int|0444
comma
l_int|NULL
comma
op_amp
id|proc_dostring
comma
op_amp
id|sysctl_string
)brace
comma
(brace
l_int|0
)brace
)brace
suffix:semicolon
DECL|macro|CTL_LASAT
mdefine_line|#define CTL_LASAT 1&t;
singleline_comment|// CTL_ANY ???
DECL|variable|lasat_root_table
r_static
id|ctl_table
id|lasat_root_table
(braket
)braket
op_assign
(brace
(brace
id|CTL_LASAT
comma
l_string|&quot;lasat&quot;
comma
l_int|NULL
comma
l_int|0
comma
l_int|0555
comma
id|lasat_table
)brace
comma
(brace
l_int|0
)brace
)brace
suffix:semicolon
DECL|function|lasat_register_sysctl
r_static
r_int
id|__init
id|lasat_register_sysctl
c_func
(paren
r_void
)paren
(brace
r_struct
id|ctl_table_header
op_star
id|lasat_table_header
suffix:semicolon
id|lasat_table_header
op_assign
id|register_sysctl_table
c_func
(paren
id|lasat_root_table
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|lasat_register_sysctl
id|__initcall
c_func
(paren
id|lasat_register_sysctl
)paren
suffix:semicolon
macro_line|#endif /* CONFIG_SYSCTL */
eof
