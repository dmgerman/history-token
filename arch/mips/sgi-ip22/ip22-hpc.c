multiline_comment|/*&n; * ip22-hpc.c: Routines for generic manipulation of the HPC controllers.&n; *&n; * Copyright (C) 1996 David S. Miller (dm@engr.sgi.com)&n; * Copyright (C) 1998 Ralf Baechle&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;asm/addrspace.h&gt;
macro_line|#include &lt;asm/sgi/hpc3.h&gt;
macro_line|#include &lt;asm/sgi/ioc.h&gt;
macro_line|#include &lt;asm/sgi/ip22.h&gt;
DECL|variable|hpc3c0
DECL|variable|hpc3c1
r_struct
id|hpc3_regs
op_star
id|hpc3c0
comma
op_star
id|hpc3c1
suffix:semicolon
DECL|variable|sgioc
r_struct
id|sgioc_regs
op_star
id|sgioc
suffix:semicolon
multiline_comment|/* We need software copies of these because they are write only. */
DECL|variable|sgi_ioc_reset
DECL|variable|sgi_ioc_write
id|u8
id|sgi_ioc_reset
comma
id|sgi_ioc_write
suffix:semicolon
r_extern
r_char
op_star
id|system_type
suffix:semicolon
DECL|function|sgihpc_init
r_void
id|__init
id|sgihpc_init
c_func
(paren
r_void
)paren
(brace
id|hpc3c0
op_assign
(paren
r_struct
id|hpc3_regs
op_star
)paren
(paren
id|KSEG1
op_plus
id|HPC3_CHIP0_BASE
)paren
suffix:semicolon
id|hpc3c1
op_assign
(paren
r_struct
id|hpc3_regs
op_star
)paren
(paren
id|KSEG1
op_plus
id|HPC3_CHIP1_BASE
)paren
suffix:semicolon
multiline_comment|/* IOC lives in PBUS PIO channel 6 */
id|sgioc
op_assign
(paren
r_struct
id|sgioc_regs
op_star
)paren
id|hpc3c0-&gt;pbus_extregs
(braket
l_int|6
)braket
suffix:semicolon
id|hpc3c0-&gt;pbus_piocfg
(braket
l_int|6
)braket
(braket
l_int|0
)braket
op_or_assign
id|HPC3_PIOCFG_DS16
suffix:semicolon
r_if
c_cond
(paren
id|ip22_is_fullhouse
c_func
(paren
)paren
)paren
(brace
multiline_comment|/* Full House comes with INT2 which lives in PBUS PIO&n;&t;&t; * channel 4 */
id|sgint
op_assign
(paren
r_struct
id|sgint_regs
op_star
)paren
id|hpc3c0-&gt;pbus_extregs
(braket
l_int|4
)braket
suffix:semicolon
id|system_type
op_assign
l_string|&quot;SGI Indigo2&quot;
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Guiness comes with INT3 which is part of IOC */
id|sgint
op_assign
op_amp
id|sgioc-&gt;int3
suffix:semicolon
id|system_type
op_assign
l_string|&quot;SGI Indy&quot;
suffix:semicolon
)brace
id|sgi_ioc_reset
op_assign
(paren
id|SGIOC_RESET_PPORT
op_or
id|SGIOC_RESET_KBDMOUSE
op_or
id|SGIOC_RESET_EISA
op_or
id|SGIOC_RESET_ISDN
op_or
id|SGIOC_RESET_LC0OFF
)paren
suffix:semicolon
id|sgi_ioc_write
op_assign
(paren
id|SGIOC_WRITE_EASEL
op_or
id|SGIOC_WRITE_NTHRESH
op_or
id|SGIOC_WRITE_TPSPEED
op_or
id|SGIOC_WRITE_EPSEL
op_or
id|SGIOC_WRITE_U0AMODE
op_or
id|SGIOC_WRITE_U1AMODE
)paren
suffix:semicolon
id|sgioc-&gt;reset
op_assign
id|sgi_ioc_reset
suffix:semicolon
id|sgioc-&gt;write
op_assign
id|sgi_ioc_write
suffix:semicolon
)brace
eof
