multiline_comment|/*&n; *  init.c, Common initialization routines for NEC VR4100 series.&n; *&n; *  Copyright (C) 2003-2005  Yoichi Yuasa &lt;yuasa@hh.iij4u.or.jp&gt;&n; *&n; *  This program is free software; you can redistribute it and/or modify&n; *  it under the terms of the GNU General Public License as published by&n; *  the Free Software Foundation; either version 2 of the License, or&n; *  (at your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful,&n; *  but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *  GNU General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License&n; *  along with this program; if not, write to the Free Software&n; *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/irq.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;asm/bootinfo.h&gt;
macro_line|#include &lt;asm/time.h&gt;
macro_line|#include &lt;asm/vr41xx/vr41xx.h&gt;
DECL|macro|IO_MEM_RESOURCE_START
mdefine_line|#define IO_MEM_RESOURCE_START&t;0UL
DECL|macro|IO_MEM_RESOURCE_END
mdefine_line|#define IO_MEM_RESOURCE_END&t;0x1fffffffUL
DECL|function|iomem_resource_init
r_static
r_void
id|__init
id|iomem_resource_init
c_func
(paren
r_void
)paren
(brace
id|iomem_resource.start
op_assign
id|IO_MEM_RESOURCE_START
suffix:semicolon
id|iomem_resource.end
op_assign
id|IO_MEM_RESOURCE_END
suffix:semicolon
)brace
DECL|function|setup_timer_frequency
r_static
r_void
id|__init
id|setup_timer_frequency
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|tclock
suffix:semicolon
id|tclock
op_assign
id|vr41xx_get_tclock_frequency
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|current_cpu_data.processor_id
op_eq
id|PRID_VR4131_REV2_0
op_logical_or
id|current_cpu_data.processor_id
op_eq
id|PRID_VR4131_REV2_1
)paren
id|mips_hpt_frequency
op_assign
id|tclock
op_div
l_int|2
suffix:semicolon
r_else
id|mips_hpt_frequency
op_assign
id|tclock
op_div
l_int|4
suffix:semicolon
)brace
DECL|function|setup_timer_irq
r_static
r_void
id|__init
id|setup_timer_irq
c_func
(paren
r_struct
id|irqaction
op_star
id|irq
)paren
(brace
id|setup_irq
c_func
(paren
id|TIMER_IRQ
comma
id|irq
)paren
suffix:semicolon
)brace
DECL|function|timer_init
r_static
r_void
id|__init
id|timer_init
c_func
(paren
r_void
)paren
(brace
id|board_time_init
op_assign
id|setup_timer_frequency
suffix:semicolon
id|board_timer_setup
op_assign
id|setup_timer_irq
suffix:semicolon
)brace
DECL|function|prom_init
r_void
id|__init
id|prom_init
c_func
(paren
r_void
)paren
(brace
r_int
id|argc
comma
id|i
suffix:semicolon
r_char
op_star
op_star
id|argv
suffix:semicolon
id|argc
op_assign
id|fw_arg0
suffix:semicolon
id|argv
op_assign
(paren
r_char
op_star
op_star
)paren
id|fw_arg1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|argc
suffix:semicolon
id|i
op_increment
)paren
(brace
id|strcat
c_func
(paren
id|arcs_cmdline
comma
id|argv
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
OL
(paren
id|argc
op_minus
l_int|1
)paren
)paren
id|strcat
c_func
(paren
id|arcs_cmdline
comma
l_string|&quot; &quot;
)paren
suffix:semicolon
)brace
id|vr41xx_calculate_clock_frequency
c_func
(paren
)paren
suffix:semicolon
id|timer_init
c_func
(paren
)paren
suffix:semicolon
id|iomem_resource_init
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|prom_free_prom_memory
r_int
r_int
id|__init
id|prom_free_prom_memory
(paren
r_void
)paren
(brace
r_return
l_int|0UL
suffix:semicolon
)brace
eof
