multiline_comment|/*&n; * Generate definitions needed by assembly language modules.&n; * This code generates raw asm output which is post-processed&n; * to extract and format the required data.&n; */
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/personality.h&gt;
macro_line|#include &lt;asm/ucontext.h&gt;
macro_line|#include &quot;sigframe.h&quot;
macro_line|#include &lt;asm/fixmap.h&gt;
macro_line|#include &lt;asm/processor.h&gt;
macro_line|#include &lt;asm/thread_info.h&gt;
DECL|macro|DEFINE
mdefine_line|#define DEFINE(sym, val) &bslash;&n;        asm volatile(&quot;&bslash;n-&gt;&quot; #sym &quot; %0 &quot; #val : : &quot;i&quot; (val))
DECL|macro|BLANK
mdefine_line|#define BLANK() asm volatile(&quot;&bslash;n-&gt;&quot; : : )
DECL|macro|OFFSET
mdefine_line|#define OFFSET(sym, str, mem) &bslash;&n;&t;DEFINE(sym, offsetof(struct str, mem));
DECL|function|foo
r_void
id|foo
c_func
(paren
r_void
)paren
(brace
id|OFFSET
c_func
(paren
id|SIGCONTEXT_eax
comma
id|sigcontext
comma
id|eax
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_ebx
comma
id|sigcontext
comma
id|ebx
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_ecx
comma
id|sigcontext
comma
id|ecx
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_edx
comma
id|sigcontext
comma
id|edx
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_esi
comma
id|sigcontext
comma
id|esi
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_edi
comma
id|sigcontext
comma
id|edi
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_ebp
comma
id|sigcontext
comma
id|ebp
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_esp
comma
id|sigcontext
comma
id|esp
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|SIGCONTEXT_eip
comma
id|sigcontext
comma
id|eip
)paren
suffix:semicolon
id|BLANK
c_func
(paren
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86
comma
id|cpuinfo_x86
comma
id|x86
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86_vendor
comma
id|cpuinfo_x86
comma
id|x86_vendor
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86_model
comma
id|cpuinfo_x86
comma
id|x86_model
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86_mask
comma
id|cpuinfo_x86
comma
id|x86_mask
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_hard_math
comma
id|cpuinfo_x86
comma
id|hard_math
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_cpuid_level
comma
id|cpuinfo_x86
comma
id|cpuid_level
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86_capability
comma
id|cpuinfo_x86
comma
id|x86_capability
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|CPUINFO_x86_vendor_id
comma
id|cpuinfo_x86
comma
id|x86_vendor_id
)paren
suffix:semicolon
id|BLANK
c_func
(paren
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_task
comma
id|thread_info
comma
id|task
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_exec_domain
comma
id|thread_info
comma
id|exec_domain
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_flags
comma
id|thread_info
comma
id|flags
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_status
comma
id|thread_info
comma
id|status
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_cpu
comma
id|thread_info
comma
id|cpu
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_preempt_count
comma
id|thread_info
comma
id|preempt_count
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_addr_limit
comma
id|thread_info
comma
id|addr_limit
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|TI_restart_block
comma
id|thread_info
comma
id|restart_block
)paren
suffix:semicolon
id|BLANK
c_func
(paren
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|EXEC_DOMAIN_handler
comma
id|exec_domain
comma
id|handler
)paren
suffix:semicolon
id|OFFSET
c_func
(paren
id|RT_SIGFRAME_sigcontext
comma
id|rt_sigframe
comma
id|uc.uc_mcontext
)paren
suffix:semicolon
multiline_comment|/* Offset from the sysenter stack to tss.esp0 */
id|DEFINE
c_func
(paren
id|TSS_sysenter_esp0
comma
m_offsetof
(paren
r_struct
id|tss_struct
comma
id|esp0
)paren
op_minus
r_sizeof
(paren
r_struct
id|tss_struct
)paren
)paren
suffix:semicolon
id|DEFINE
c_func
(paren
id|PAGE_SIZE_asm
comma
id|PAGE_SIZE
)paren
suffix:semicolon
)brace
eof
