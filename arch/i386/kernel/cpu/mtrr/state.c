macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/mtrr.h&gt;
macro_line|#include &lt;asm/msr.h&gt;
macro_line|#include &quot;mtrr.h&quot;
DECL|struct|mtrr_state
r_struct
id|mtrr_state
(brace
DECL|member|var_ranges
r_struct
id|mtrr_var_range
op_star
id|var_ranges
suffix:semicolon
DECL|member|fixed_ranges
id|mtrr_type
id|fixed_ranges
(braket
id|NUM_FIXED_RANGES
)braket
suffix:semicolon
DECL|member|enabled
r_int
r_char
id|enabled
suffix:semicolon
DECL|member|def_type
id|mtrr_type
id|def_type
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_int
r_int
id|smp_changes_mask
id|__initdata
op_assign
l_int|0
suffix:semicolon
DECL|variable|mtrr_state
r_struct
id|mtrr_state
id|mtrr_state
op_assign
(brace
)brace
suffix:semicolon
DECL|function|set_fixed_ranges
r_static
r_int
id|__init
id|set_fixed_ranges
c_func
(paren
id|mtrr_type
op_star
id|frs
)paren
(brace
r_int
r_int
op_star
id|p
op_assign
(paren
r_int
r_int
op_star
)paren
id|frs
suffix:semicolon
r_int
id|changed
op_assign
id|FALSE
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
r_int
id|lo
comma
id|hi
suffix:semicolon
id|rdmsr
c_func
(paren
id|MTRRfix64K_00000_MSR
comma
id|lo
comma
id|hi
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|0
)braket
op_ne
id|lo
op_logical_or
id|p
(braket
l_int|1
)braket
op_ne
id|hi
)paren
(brace
id|wrmsr
c_func
(paren
id|MTRRfix64K_00000_MSR
comma
id|p
(braket
l_int|0
)braket
comma
id|p
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|changed
op_assign
id|TRUE
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|rdmsr
c_func
(paren
id|MTRRfix16K_80000_MSR
op_plus
id|i
comma
id|lo
comma
id|hi
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|2
op_plus
id|i
op_star
l_int|2
)braket
op_ne
id|lo
op_logical_or
id|p
(braket
l_int|3
op_plus
id|i
op_star
l_int|2
)braket
op_ne
id|hi
)paren
(brace
id|wrmsr
c_func
(paren
id|MTRRfix16K_80000_MSR
op_plus
id|i
comma
id|p
(braket
l_int|2
op_plus
id|i
op_star
l_int|2
)braket
comma
id|p
(braket
l_int|3
op_plus
id|i
op_star
l_int|2
)braket
)paren
suffix:semicolon
id|changed
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|rdmsr
c_func
(paren
id|MTRRfix4K_C0000_MSR
op_plus
id|i
comma
id|lo
comma
id|hi
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|6
op_plus
id|i
op_star
l_int|2
)braket
op_ne
id|lo
op_logical_or
id|p
(braket
l_int|7
op_plus
id|i
op_star
l_int|2
)braket
op_ne
id|hi
)paren
(brace
id|wrmsr
c_func
(paren
id|MTRRfix4K_C0000_MSR
op_plus
id|i
comma
id|p
(braket
l_int|6
op_plus
id|i
op_star
l_int|2
)braket
comma
id|p
(braket
l_int|7
op_plus
id|i
op_star
l_int|2
)braket
)paren
suffix:semicolon
id|changed
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|changed
suffix:semicolon
)brace
multiline_comment|/*  Set the MSR pair relating to a var range. Returns TRUE if&n;    changes are made  */
DECL|function|set_mtrr_var_ranges
r_static
r_int
id|__init
id|set_mtrr_var_ranges
c_func
(paren
r_int
r_int
id|index
comma
r_struct
id|mtrr_var_range
op_star
id|vr
)paren
(brace
r_int
r_int
id|lo
comma
id|hi
suffix:semicolon
r_int
id|changed
op_assign
id|FALSE
suffix:semicolon
id|rdmsr
c_func
(paren
id|MTRRphysBase_MSR
c_func
(paren
id|index
)paren
comma
id|lo
comma
id|hi
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|vr-&gt;base_lo
op_amp
l_int|0xfffff0ffUL
)paren
op_ne
(paren
id|lo
op_amp
l_int|0xfffff0ffUL
)paren
op_logical_or
(paren
id|vr-&gt;base_hi
op_amp
l_int|0xfUL
)paren
op_ne
(paren
id|hi
op_amp
l_int|0xfUL
)paren
)paren
(brace
id|wrmsr
c_func
(paren
id|MTRRphysBase_MSR
c_func
(paren
id|index
)paren
comma
id|vr-&gt;base_lo
comma
id|vr-&gt;base_hi
)paren
suffix:semicolon
id|changed
op_assign
id|TRUE
suffix:semicolon
)brace
id|rdmsr
c_func
(paren
id|MTRRphysMask_MSR
c_func
(paren
id|index
)paren
comma
id|lo
comma
id|hi
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|vr-&gt;mask_lo
op_amp
l_int|0xfffff800UL
)paren
op_ne
(paren
id|lo
op_amp
l_int|0xfffff800UL
)paren
op_logical_or
(paren
id|vr-&gt;mask_hi
op_amp
l_int|0xfUL
)paren
op_ne
(paren
id|hi
op_amp
l_int|0xfUL
)paren
)paren
(brace
id|wrmsr
c_func
(paren
id|MTRRphysMask_MSR
c_func
(paren
id|index
)paren
comma
id|vr-&gt;mask_lo
comma
id|vr-&gt;mask_hi
)paren
suffix:semicolon
id|changed
op_assign
id|TRUE
suffix:semicolon
)brace
r_return
id|changed
suffix:semicolon
)brace
DECL|function|set_mtrr_state
r_static
r_int
r_int
id|set_mtrr_state
c_func
(paren
id|u32
id|deftype_lo
comma
id|u32
id|deftype_hi
)paren
multiline_comment|/*  [SUMMARY] Set the MTRR state for this CPU.&n;    &lt;state&gt; The MTRR state information to read.&n;    &lt;ctxt&gt; Some relevant CPU context.&n;    [NOTE] The CPU must already be in a safe state for MTRR changes.&n;    [RETURNS] 0 if no changes made, else a mask indication what was changed.&n;*/
(brace
r_int
r_int
id|i
suffix:semicolon
r_int
r_int
id|change_mask
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num_var_ranges
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|set_mtrr_var_ranges
c_func
(paren
id|i
comma
op_amp
id|mtrr_state.var_ranges
(braket
id|i
)braket
)paren
)paren
id|change_mask
op_or_assign
id|MTRR_CHANGE_MASK_VARIABLE
suffix:semicolon
r_if
c_cond
(paren
id|set_fixed_ranges
c_func
(paren
id|mtrr_state.fixed_ranges
)paren
)paren
id|change_mask
op_or_assign
id|MTRR_CHANGE_MASK_FIXED
suffix:semicolon
multiline_comment|/*  Set_mtrr_restore restores the old value of MTRRdefType,&n;&t;   so to set it we fiddle with the saved value  */
r_if
c_cond
(paren
(paren
id|deftype_lo
op_amp
l_int|0xff
)paren
op_ne
id|mtrr_state.def_type
op_logical_or
(paren
(paren
id|deftype_lo
op_amp
l_int|0xc00
)paren
op_rshift
l_int|10
)paren
op_ne
id|mtrr_state.enabled
)paren
(brace
id|deftype_lo
op_or_assign
(paren
id|mtrr_state.def_type
op_or
id|mtrr_state.enabled
op_lshift
l_int|10
)paren
suffix:semicolon
id|change_mask
op_or_assign
id|MTRR_CHANGE_MASK_DEFTYPE
suffix:semicolon
)brace
r_return
id|change_mask
suffix:semicolon
)brace
multiline_comment|/*  Some BIOS&squot;s are fucked and don&squot;t set all MTRRs the same!  */
DECL|function|mtrr_state_warn
r_static
r_void
id|__init
id|mtrr_state_warn
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|mask
op_assign
id|smp_changes_mask
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mask
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|mask
op_amp
id|MTRR_CHANGE_MASK_FIXED
)paren
id|printk
(paren
l_string|&quot;mtrr: your CPUs had inconsistent fixed MTRR settings&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mask
op_amp
id|MTRR_CHANGE_MASK_VARIABLE
)paren
id|printk
(paren
l_string|&quot;mtrr: your CPUs had inconsistent variable MTRR settings&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mask
op_amp
id|MTRR_CHANGE_MASK_DEFTYPE
)paren
id|printk
(paren
l_string|&quot;mtrr: your CPUs had inconsistent MTRRdefType settings&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;mtrr: probably your BIOS does not setup all CPUs&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*  Free resources associated with a struct mtrr_state  */
DECL|function|finalize_mtrr_state
r_static
r_void
id|__init
id|finalize_mtrr_state
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|mtrr_state.var_ranges
)paren
id|kfree
c_func
(paren
id|mtrr_state.var_ranges
)paren
suffix:semicolon
id|mtrr_state.var_ranges
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/*  Get the MSR pair relating to a var range  */
r_static
r_void
id|__init
DECL|function|get_mtrr_var_range
id|get_mtrr_var_range
c_func
(paren
r_int
r_int
id|index
comma
r_struct
id|mtrr_var_range
op_star
id|vr
)paren
(brace
id|rdmsr
c_func
(paren
id|MTRRphysBase_MSR
c_func
(paren
id|index
)paren
comma
id|vr-&gt;base_lo
comma
id|vr-&gt;base_hi
)paren
suffix:semicolon
id|rdmsr
c_func
(paren
id|MTRRphysMask_MSR
c_func
(paren
id|index
)paren
comma
id|vr-&gt;mask_lo
comma
id|vr-&gt;mask_hi
)paren
suffix:semicolon
)brace
r_static
r_void
id|__init
DECL|function|get_fixed_ranges
id|get_fixed_ranges
c_func
(paren
id|mtrr_type
op_star
id|frs
)paren
(brace
r_int
r_int
op_star
id|p
op_assign
(paren
r_int
r_int
op_star
)paren
id|frs
suffix:semicolon
r_int
id|i
suffix:semicolon
id|rdmsr
c_func
(paren
id|MTRRfix64K_00000_MSR
comma
id|p
(braket
l_int|0
)braket
comma
id|p
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
id|rdmsr
c_func
(paren
id|MTRRfix16K_80000_MSR
op_plus
id|i
comma
id|p
(braket
l_int|2
op_plus
id|i
op_star
l_int|2
)braket
comma
id|p
(braket
l_int|3
op_plus
id|i
op_star
l_int|2
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
id|rdmsr
c_func
(paren
id|MTRRfix4K_C0000_MSR
op_plus
id|i
comma
id|p
(braket
l_int|6
op_plus
id|i
op_star
l_int|2
)braket
comma
id|p
(braket
l_int|7
op_plus
id|i
op_star
l_int|2
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*  Grab all of the MTRR state for this CPU into *state  */
DECL|function|get_mtrr_state
r_void
id|get_mtrr_state
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|i
suffix:semicolon
r_struct
id|mtrr_var_range
op_star
id|vrs
suffix:semicolon
r_int
r_int
id|lo
comma
id|dummy
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mtrr_state.var_ranges
)paren
(brace
id|mtrr_state.var_ranges
op_assign
id|kmalloc
c_func
(paren
id|num_var_ranges
op_star
r_sizeof
(paren
r_struct
id|mtrr_var_range
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mtrr_state.var_ranges
)paren
r_return
suffix:semicolon
)brace
id|vrs
op_assign
id|mtrr_state.var_ranges
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num_var_ranges
suffix:semicolon
id|i
op_increment
)paren
id|get_mtrr_var_range
c_func
(paren
id|i
comma
op_amp
id|vrs
(braket
id|i
)braket
)paren
suffix:semicolon
id|get_fixed_ranges
c_func
(paren
id|mtrr_state.fixed_ranges
)paren
suffix:semicolon
id|rdmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|lo
comma
id|dummy
)paren
suffix:semicolon
id|mtrr_state.def_type
op_assign
(paren
id|lo
op_amp
l_int|0xff
)paren
suffix:semicolon
id|mtrr_state.enabled
op_assign
(paren
id|lo
op_amp
l_int|0xc00
)paren
op_rshift
l_int|10
suffix:semicolon
)brace
multiline_comment|/*  Put the processor into a state where MTRRs can be safely set  */
DECL|function|set_mtrr_prepare_save
r_void
id|set_mtrr_prepare_save
c_func
(paren
r_struct
id|set_mtrr_context
op_star
id|ctxt
)paren
(brace
r_int
r_int
id|cr0
suffix:semicolon
multiline_comment|/*  Disable interrupts locally  */
id|local_irq_save
c_func
(paren
id|ctxt-&gt;flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
op_logical_or
id|is_cpu
c_func
(paren
id|CYRIX
)paren
)paren
(brace
multiline_comment|/*  Save value of CR4 and clear Page Global Enable (bit 7)  */
r_if
c_cond
(paren
id|cpu_has_pge
)paren
(brace
id|ctxt-&gt;cr4val
op_assign
id|read_cr4
c_func
(paren
)paren
suffix:semicolon
id|write_cr4
c_func
(paren
id|ctxt-&gt;cr4val
op_amp
(paren
r_int
r_char
)paren
op_complement
(paren
l_int|1
op_lshift
l_int|7
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*  Disable and flush caches. Note that wbinvd flushes the TLBs as&n;&t;&t;    a side-effect  */
id|cr0
op_assign
id|read_cr0
c_func
(paren
)paren
op_or
l_int|0x40000000
suffix:semicolon
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
id|write_cr0
c_func
(paren
id|cr0
)paren
suffix:semicolon
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
)paren
multiline_comment|/*  Save MTRR state */
id|rdmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|ctxt-&gt;deftype_lo
comma
id|ctxt-&gt;deftype_hi
)paren
suffix:semicolon
r_else
multiline_comment|/* Cyrix ARRs - everything else were excluded at the top */
id|ctxt-&gt;ccr3
op_assign
id|getCx86
c_func
(paren
id|CX86_CCR3
)paren
suffix:semicolon
)brace
)brace
DECL|function|set_mtrr_cache_disable
r_void
id|set_mtrr_cache_disable
c_func
(paren
r_struct
id|set_mtrr_context
op_star
id|ctxt
)paren
(brace
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
)paren
multiline_comment|/*  Disable MTRRs, and set the default type to uncached  */
id|wrmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|ctxt-&gt;deftype_lo
op_amp
l_int|0xf300UL
comma
id|ctxt-&gt;deftype_hi
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|is_cpu
c_func
(paren
id|CYRIX
)paren
)paren
multiline_comment|/* Cyrix ARRs - everything else were excluded at the top */
id|setCx86
c_func
(paren
id|CX86_CCR3
comma
(paren
id|ctxt-&gt;ccr3
op_amp
l_int|0x0f
)paren
op_or
l_int|0x10
)paren
suffix:semicolon
)brace
multiline_comment|/*  Restore the processor after a set_mtrr_prepare  */
DECL|function|set_mtrr_done
r_void
id|set_mtrr_done
c_func
(paren
r_struct
id|set_mtrr_context
op_star
id|ctxt
)paren
(brace
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
op_logical_or
id|is_cpu
c_func
(paren
id|CYRIX
)paren
)paren
(brace
multiline_comment|/*  Flush caches and TLBs  */
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/*  Restore MTRRdefType  */
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
)paren
multiline_comment|/* Intel (P6) standard MTRRs */
id|wrmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|ctxt-&gt;deftype_lo
comma
id|ctxt-&gt;deftype_hi
)paren
suffix:semicolon
r_else
multiline_comment|/* Cyrix ARRs - everything else was excluded at the top */
id|setCx86
c_func
(paren
id|CX86_CCR3
comma
id|ctxt-&gt;ccr3
)paren
suffix:semicolon
multiline_comment|/*  Enable caches  */
id|write_cr0
c_func
(paren
id|read_cr0
c_func
(paren
)paren
op_amp
l_int|0xbfffffff
)paren
suffix:semicolon
multiline_comment|/*  Restore value of CR4  */
r_if
c_cond
(paren
id|cpu_has_pge
)paren
id|write_cr4
c_func
(paren
id|ctxt-&gt;cr4val
)paren
suffix:semicolon
)brace
multiline_comment|/*  Re-enable interrupts locally (if enabled previously)  */
id|local_irq_restore
c_func
(paren
id|ctxt-&gt;flags
)paren
suffix:semicolon
)brace
DECL|function|generic_init_secondary
r_void
id|__init
id|generic_init_secondary
c_func
(paren
r_void
)paren
(brace
id|u32
id|cr0
comma
id|cr4
op_assign
l_int|0
suffix:semicolon
id|u32
id|deftype_lo
comma
id|deftype_hi
suffix:semicolon
r_int
r_int
id|mask
comma
id|count
suffix:semicolon
multiline_comment|/*  Note that this is not ideal, since the cache is only flushed/disabled&n;&t;   for this CPU while the MTRRs are changed, but changing this requires&n;&t;   more invasive changes to the way the kernel boots  */
multiline_comment|/*  Save value of CR4 and clear Page Global Enable (bit 7)  */
r_if
c_cond
(paren
id|cpu_has_pge
)paren
(brace
id|cr4
op_assign
id|read_cr4
c_func
(paren
)paren
suffix:semicolon
id|write_cr4
c_func
(paren
id|cr4
op_amp
(paren
r_int
r_char
)paren
op_complement
(paren
l_int|1
op_lshift
l_int|7
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*  Disable and flush caches. Note that wbinvd flushes the TLBs as&n;&t;    a side-effect  */
id|cr0
op_assign
id|read_cr0
c_func
(paren
)paren
op_or
l_int|0x40000000
suffix:semicolon
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
id|write_cr0
c_func
(paren
id|cr0
)paren
suffix:semicolon
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/*  Save MTRR state */
id|rdmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|deftype_lo
comma
id|deftype_hi
)paren
suffix:semicolon
multiline_comment|/*  Disable MTRRs, and set the default type to uncached  */
id|wrmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|deftype_lo
op_amp
l_int|0xf300UL
comma
id|deftype_hi
)paren
suffix:semicolon
multiline_comment|/* Actually set the state */
id|mask
op_assign
id|set_mtrr_state
c_func
(paren
id|deftype_lo
comma
id|deftype_hi
)paren
suffix:semicolon
multiline_comment|/*  Flush caches and TLBs  */
id|wbinvd
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* Intel (P6) standard MTRRs */
id|wrmsr
c_func
(paren
id|MTRRdefType_MSR
comma
id|deftype_lo
comma
id|deftype_hi
)paren
suffix:semicolon
multiline_comment|/*  Enable caches  */
id|write_cr0
c_func
(paren
id|read_cr0
c_func
(paren
)paren
op_amp
l_int|0xbfffffff
)paren
suffix:semicolon
multiline_comment|/*  Restore value of CR4  */
r_if
c_cond
(paren
id|cpu_has_pge
)paren
id|write_cr4
c_func
(paren
id|cr4
)paren
suffix:semicolon
multiline_comment|/*  Use the atomic bitops to update the global mask  */
r_for
c_loop
(paren
id|count
op_assign
l_int|0
suffix:semicolon
id|count
OL
r_sizeof
id|mask
op_star
l_int|8
suffix:semicolon
op_increment
id|count
)paren
(brace
r_if
c_cond
(paren
id|mask
op_amp
l_int|0x01
)paren
id|set_bit
c_func
(paren
id|count
comma
op_amp
id|smp_changes_mask
)paren
suffix:semicolon
id|mask
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * mtrr_init_secondary - setup AP MTRR state&n; * &n; * Yes, this code is exactly the same as the set_mtrr code, except for the &n; * piece in the middle - you set all the ranges at once, instead of one&n; * register at a time.&n; * Shoot me.&n; */
DECL|function|mtrr_init_secondary_cpu
r_void
id|__init
id|mtrr_init_secondary_cpu
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mtrr_if
op_logical_or
op_logical_neg
id|mtrr_if-&gt;init_secondary
)paren
(brace
multiline_comment|/* I see no MTRRs I can support in SMP mode... */
id|printk
c_func
(paren
l_string|&quot;mtrr: SMP support incomplete for this vendor&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|local_irq_save
c_func
(paren
id|flags
)paren
suffix:semicolon
id|mtrr_if
op_member_access_from_pointer
id|init_secondary
c_func
(paren
)paren
suffix:semicolon
id|local_irq_restore
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * mtrr_final_init  - finalize initialization sequence.&n; */
DECL|function|mtrr_finalize_state
r_static
r_int
id|__init
id|mtrr_finalize_state
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|use_intel
c_func
(paren
)paren
)paren
(brace
id|finalize_mtrr_state
c_func
(paren
)paren
suffix:semicolon
id|mtrr_state_warn
c_func
(paren
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|mtrr_finalize_state
id|arch_initcall
c_func
(paren
id|mtrr_finalize_state
)paren
suffix:semicolon
eof
