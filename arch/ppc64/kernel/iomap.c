multiline_comment|/*&n; * arch/ppc64/kernel/iomap.c&n; *&n; * ppc64 &quot;iomap&quot; interface implementation.&n; *&n; * (C) Copyright 2004 Linus Torvalds&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;asm/io.h&gt;
multiline_comment|/*&n; * Here comes the ppc64 implementation of the IOMAP &n; * interfaces.&n; */
DECL|function|ioread8
r_int
r_int
id|fastcall
id|ioread8
c_func
(paren
r_void
id|__iomem
op_star
id|addr
)paren
(brace
r_return
id|readb
c_func
(paren
id|addr
)paren
suffix:semicolon
)brace
DECL|function|ioread16
r_int
r_int
id|fastcall
id|ioread16
c_func
(paren
r_void
id|__iomem
op_star
id|addr
)paren
(brace
r_return
id|readw
c_func
(paren
id|addr
)paren
suffix:semicolon
)brace
DECL|function|ioread32
r_int
r_int
id|fastcall
id|ioread32
c_func
(paren
r_void
id|__iomem
op_star
id|addr
)paren
(brace
r_return
id|readl
c_func
(paren
id|addr
)paren
suffix:semicolon
)brace
DECL|variable|ioread8
id|EXPORT_SYMBOL
c_func
(paren
id|ioread8
)paren
suffix:semicolon
DECL|variable|ioread16
id|EXPORT_SYMBOL
c_func
(paren
id|ioread16
)paren
suffix:semicolon
DECL|variable|ioread32
id|EXPORT_SYMBOL
c_func
(paren
id|ioread32
)paren
suffix:semicolon
DECL|function|iowrite8
r_void
id|fastcall
id|iowrite8
c_func
(paren
id|u8
id|val
comma
r_void
id|__iomem
op_star
id|addr
)paren
(brace
id|writeb
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
)brace
DECL|function|iowrite16
r_void
id|fastcall
id|iowrite16
c_func
(paren
id|u16
id|val
comma
r_void
id|__iomem
op_star
id|addr
)paren
(brace
id|writew
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
)brace
DECL|function|iowrite32
r_void
id|fastcall
id|iowrite32
c_func
(paren
id|u32
id|val
comma
r_void
id|__iomem
op_star
id|addr
)paren
(brace
id|writel
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
)brace
DECL|variable|iowrite8
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite8
)paren
suffix:semicolon
DECL|variable|iowrite16
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite16
)paren
suffix:semicolon
DECL|variable|iowrite32
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite32
)paren
suffix:semicolon
multiline_comment|/*&n; * These are the &quot;repeat read/write&quot; functions. Note the&n; * non-CPU byte order. We do things in &quot;IO byteorder&quot;&n; * here.&n; *&n; * FIXME! We could make these do EEH handling if we really&n; * wanted. Not clear if we do.&n; */
DECL|function|ioread8_rep
r_void
id|ioread8_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
id|_insb
c_func
(paren
(paren
id|u8
id|__force
op_star
)paren
id|addr
comma
id|dst
comma
id|count
)paren
suffix:semicolon
)brace
DECL|function|ioread16_rep
r_void
id|ioread16_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
id|_insw_ns
c_func
(paren
(paren
id|u16
id|__force
op_star
)paren
id|addr
comma
id|dst
comma
id|count
)paren
suffix:semicolon
)brace
DECL|function|ioread32_rep
r_void
id|ioread32_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
id|_insl_ns
c_func
(paren
(paren
id|u32
id|__force
op_star
)paren
id|addr
comma
id|dst
comma
id|count
)paren
suffix:semicolon
)brace
DECL|variable|ioread8_rep
id|EXPORT_SYMBOL
c_func
(paren
id|ioread8_rep
)paren
suffix:semicolon
DECL|variable|ioread16_rep
id|EXPORT_SYMBOL
c_func
(paren
id|ioread16_rep
)paren
suffix:semicolon
DECL|variable|ioread32_rep
id|EXPORT_SYMBOL
c_func
(paren
id|ioread32_rep
)paren
suffix:semicolon
DECL|function|iowrite8_rep
r_void
id|iowrite8_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
id|_outsb
c_func
(paren
(paren
id|u8
id|__force
op_star
)paren
id|addr
comma
id|src
comma
id|count
)paren
suffix:semicolon
)brace
DECL|function|iowrite16_rep
r_void
id|iowrite16_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
id|_outsw_ns
c_func
(paren
(paren
id|u16
id|__force
op_star
)paren
id|addr
comma
id|src
comma
id|count
)paren
suffix:semicolon
)brace
DECL|function|iowrite32_rep
r_void
id|iowrite32_rep
c_func
(paren
r_void
id|__iomem
op_star
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
id|_outsl_ns
c_func
(paren
(paren
id|u32
id|__force
op_star
)paren
id|addr
comma
id|src
comma
id|count
)paren
suffix:semicolon
)brace
DECL|variable|iowrite8_rep
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite8_rep
)paren
suffix:semicolon
DECL|variable|iowrite16_rep
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite16_rep
)paren
suffix:semicolon
DECL|variable|iowrite32_rep
id|EXPORT_SYMBOL
c_func
(paren
id|iowrite32_rep
)paren
suffix:semicolon
DECL|function|ioport_map
r_void
id|__iomem
op_star
id|ioport_map
c_func
(paren
r_int
r_int
id|port
comma
r_int
r_int
id|len
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|_IO_IS_VALID
c_func
(paren
id|port
)paren
)paren
r_return
l_int|NULL
suffix:semicolon
r_return
(paren
r_void
id|__iomem
op_star
)paren
(paren
id|port
op_plus
id|pci_io_base
)paren
suffix:semicolon
)brace
DECL|function|ioport_unmap
r_void
id|ioport_unmap
c_func
(paren
r_void
id|__iomem
op_star
id|addr
)paren
(brace
multiline_comment|/* Nothing to do */
)brace
DECL|variable|ioport_map
id|EXPORT_SYMBOL
c_func
(paren
id|ioport_map
)paren
suffix:semicolon
DECL|variable|ioport_unmap
id|EXPORT_SYMBOL
c_func
(paren
id|ioport_unmap
)paren
suffix:semicolon
DECL|function|pci_iomap
r_void
id|__iomem
op_star
id|pci_iomap
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_int
id|bar
comma
r_int
r_int
id|max
)paren
(brace
r_int
r_int
id|start
op_assign
id|pci_resource_start
c_func
(paren
id|dev
comma
id|bar
)paren
suffix:semicolon
r_int
r_int
id|len
op_assign
id|pci_resource_len
c_func
(paren
id|dev
comma
id|bar
)paren
suffix:semicolon
r_int
r_int
id|flags
op_assign
id|pci_resource_flags
c_func
(paren
id|dev
comma
id|bar
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|len
)paren
r_return
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|max
op_logical_and
id|len
OG
id|max
)paren
id|len
op_assign
id|max
suffix:semicolon
r_if
c_cond
(paren
id|flags
op_amp
id|IORESOURCE_IO
)paren
r_return
id|ioport_map
c_func
(paren
id|start
comma
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flags
op_amp
id|IORESOURCE_MEM
)paren
r_return
id|ioremap
c_func
(paren
id|start
comma
id|len
)paren
suffix:semicolon
multiline_comment|/* What? */
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|pci_iounmap
r_void
id|pci_iounmap
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_void
id|__iomem
op_star
id|addr
)paren
(brace
multiline_comment|/* Nothing to do */
)brace
DECL|variable|pci_iomap
id|EXPORT_SYMBOL
c_func
(paren
id|pci_iomap
)paren
suffix:semicolon
DECL|variable|pci_iounmap
id|EXPORT_SYMBOL
c_func
(paren
id|pci_iounmap
)paren
suffix:semicolon
eof
