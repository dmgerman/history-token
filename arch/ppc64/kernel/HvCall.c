multiline_comment|/*&n; * HvCall.c&n; * Copyright (C) 2001  Mike Corrigan IBM Corporation&n; * &n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; */
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/abs_addr.h&gt;
macro_line|#include &lt;asm/iSeries/HvCall.h&gt;
macro_line|#include &lt;asm/iSeries/HvCallSc.h&gt;
macro_line|#include &lt;asm/iSeries/HvTypes.h&gt;
DECL|function|HvCall_writeLogBuffer
r_void
id|HvCall_writeLogBuffer
c_func
(paren
r_const
r_void
op_star
id|buffer
comma
id|u64
id|len
)paren
(brace
r_struct
id|HvLpBufferList
id|hv_buf
suffix:semicolon
id|u64
id|left_this_page
suffix:semicolon
id|u64
id|cur
op_assign
id|virt_to_absolute
c_func
(paren
(paren
r_int
r_int
)paren
id|buffer
)paren
suffix:semicolon
r_while
c_loop
(paren
id|len
)paren
(brace
id|hv_buf.addr
op_assign
id|cur
suffix:semicolon
id|left_this_page
op_assign
(paren
(paren
id|cur
op_amp
id|PAGE_MASK
)paren
op_plus
id|PAGE_SIZE
)paren
op_minus
id|cur
suffix:semicolon
r_if
c_cond
(paren
id|left_this_page
OG
id|len
)paren
id|left_this_page
op_assign
id|len
suffix:semicolon
id|hv_buf.len
op_assign
id|left_this_page
suffix:semicolon
id|len
op_sub_assign
id|left_this_page
suffix:semicolon
id|HvCall2
c_func
(paren
id|HvCallBaseWriteLogBuffer
comma
id|virt_to_absolute
c_func
(paren
(paren
r_int
r_int
)paren
op_amp
id|hv_buf
)paren
comma
id|left_this_page
)paren
suffix:semicolon
id|cur
op_assign
(paren
id|cur
op_amp
id|PAGE_MASK
)paren
op_plus
id|PAGE_SIZE
suffix:semicolon
)brace
)brace
eof
