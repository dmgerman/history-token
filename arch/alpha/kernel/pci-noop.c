multiline_comment|/*&n; *&t;linux/arch/alpha/kernel/pci-noop.c&n; *&n; * Stub PCI interfaces for Jensen-specific kernels.&n; */
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/bootmem.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/dma-mapping.h&gt;
macro_line|#include &quot;proto.h&quot;
multiline_comment|/*&n; * The PCI controller list.&n; */
DECL|variable|hose_head
DECL|variable|hose_tail
r_struct
id|pci_controller
op_star
id|hose_head
comma
op_star
op_star
id|hose_tail
op_assign
op_amp
id|hose_head
suffix:semicolon
DECL|variable|pci_isa_hose
r_struct
id|pci_controller
op_star
id|pci_isa_hose
suffix:semicolon
r_struct
id|pci_controller
op_star
id|__init
DECL|function|alloc_pci_controller
id|alloc_pci_controller
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_controller
op_star
id|hose
suffix:semicolon
id|hose
op_assign
id|alloc_bootmem
c_func
(paren
r_sizeof
(paren
op_star
id|hose
)paren
)paren
suffix:semicolon
op_star
id|hose_tail
op_assign
id|hose
suffix:semicolon
id|hose_tail
op_assign
op_amp
id|hose-&gt;next
suffix:semicolon
r_return
id|hose
suffix:semicolon
)brace
r_struct
id|resource
op_star
id|__init
DECL|function|alloc_resource
id|alloc_resource
c_func
(paren
r_void
)paren
(brace
r_struct
id|resource
op_star
id|res
suffix:semicolon
id|res
op_assign
id|alloc_bootmem
c_func
(paren
r_sizeof
(paren
op_star
id|res
)paren
)paren
suffix:semicolon
r_return
id|res
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_pciconfig_iobase
id|sys_pciconfig_iobase
c_func
(paren
r_int
id|which
comma
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
)paren
(brace
r_struct
id|pci_controller
op_star
id|hose
suffix:semicolon
multiline_comment|/* from hose or from bus.devfn */
r_if
c_cond
(paren
id|which
op_amp
id|IOBASE_FROM_HOSE
)paren
(brace
r_for
c_loop
(paren
id|hose
op_assign
id|hose_head
suffix:semicolon
id|hose
suffix:semicolon
id|hose
op_assign
id|hose-&gt;next
)paren
r_if
c_cond
(paren
id|hose-&gt;index
op_eq
id|bus
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hose
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Special hook for ISA access.  */
r_if
c_cond
(paren
id|bus
op_eq
l_int|0
op_logical_and
id|dfn
op_eq
l_int|0
)paren
id|hose
op_assign
id|pci_isa_hose
suffix:semicolon
r_else
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|which
op_amp
op_complement
id|IOBASE_FROM_HOSE
)paren
(brace
r_case
id|IOBASE_HOSE
suffix:colon
r_return
id|hose-&gt;index
suffix:semicolon
r_case
id|IOBASE_SPARSE_MEM
suffix:colon
r_return
id|hose-&gt;sparse_mem_base
suffix:semicolon
r_case
id|IOBASE_DENSE_MEM
suffix:colon
r_return
id|hose-&gt;dense_mem_base
suffix:semicolon
r_case
id|IOBASE_SPARSE_IO
suffix:colon
r_return
id|hose-&gt;sparse_io_base
suffix:semicolon
r_case
id|IOBASE_DENSE_IO
suffix:colon
r_return
id|hose-&gt;dense_io_base
suffix:semicolon
r_case
id|IOBASE_ROOT_BUS
suffix:colon
r_return
id|hose-&gt;bus-&gt;number
suffix:semicolon
)brace
r_return
op_minus
id|EOPNOTSUPP
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_pciconfig_read
id|sys_pciconfig_read
c_func
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
r_else
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_pciconfig_write
id|sys_pciconfig_write
c_func
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
r_else
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
multiline_comment|/* Stubs for the routines in pci_iommu.c: */
r_void
op_star
DECL|function|pci_alloc_consistent
id|pci_alloc_consistent
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_int
id|size
comma
id|dma_addr_t
op_star
id|dma_addrp
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
r_void
DECL|function|pci_free_consistent
id|pci_free_consistent
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_int
id|size
comma
r_void
op_star
id|cpu_addr
comma
id|dma_addr_t
id|dma_addr
)paren
(brace
)brace
id|dma_addr_t
DECL|function|pci_map_single
id|pci_map_single
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_void
op_star
id|cpu_addr
comma
r_int
id|size
comma
r_int
id|direction
)paren
(brace
r_return
(paren
id|dma_addr_t
)paren
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|pci_unmap_single
id|pci_unmap_single
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
id|dma_addr_t
id|dma_addr
comma
r_int
id|size
comma
r_int
id|direction
)paren
(brace
)brace
r_int
DECL|function|pci_map_sg
id|pci_map_sg
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_struct
id|scatterlist
op_star
id|sg
comma
r_int
id|nents
comma
r_int
id|direction
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|pci_unmap_sg
id|pci_unmap_sg
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_struct
id|scatterlist
op_star
id|sg
comma
r_int
id|nents
comma
r_int
id|direction
)paren
(brace
)brace
r_int
DECL|function|pci_dma_supported
id|pci_dma_supported
c_func
(paren
r_struct
id|pci_dev
op_star
id|hwdev
comma
id|dma_addr_t
id|mask
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic DMA mapping functions: */
r_void
op_star
DECL|function|dma_alloc_coherent
id|dma_alloc_coherent
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
r_int
id|size
comma
id|dma_addr_t
op_star
id|dma_handle
comma
r_int
id|gfp
)paren
(brace
r_void
op_star
id|ret
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev
op_logical_or
op_star
id|dev-&gt;dma_mask
op_ge
l_int|0xffffffffUL
)paren
id|gfp
op_and_assign
op_complement
id|GFP_DMA
suffix:semicolon
id|ret
op_assign
(paren
r_void
op_star
)paren
id|__get_free_pages
c_func
(paren
id|gfp
comma
id|get_order
c_func
(paren
id|size
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
(brace
id|memset
c_func
(paren
id|ret
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
op_star
id|dma_handle
op_assign
id|virt_to_bus
c_func
(paren
id|ret
)paren
suffix:semicolon
)brace
r_return
id|ret
suffix:semicolon
)brace
DECL|variable|dma_alloc_coherent
id|EXPORT_SYMBOL
c_func
(paren
id|dma_alloc_coherent
)paren
suffix:semicolon
r_int
DECL|function|dma_map_sg
id|dma_map_sg
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
r_struct
id|scatterlist
op_star
id|sg
comma
r_int
id|nents
comma
r_enum
id|dma_data_direction
id|direction
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|nents
suffix:semicolon
id|i
op_increment
)paren
(brace
r_void
op_star
id|va
suffix:semicolon
id|BUG_ON
c_func
(paren
op_logical_neg
id|sg
(braket
id|i
)braket
dot
id|page
)paren
suffix:semicolon
id|va
op_assign
id|page_address
c_func
(paren
id|sg
(braket
id|i
)braket
dot
id|page
)paren
op_plus
id|sg
(braket
id|i
)braket
dot
id|offset
suffix:semicolon
id|sg_dma_address
c_func
(paren
id|sg
op_plus
id|i
)paren
op_assign
(paren
id|dma_addr_t
)paren
id|virt_to_bus
c_func
(paren
id|va
)paren
suffix:semicolon
id|sg_dma_len
c_func
(paren
id|sg
op_plus
id|i
)paren
op_assign
id|sg
(braket
id|i
)braket
dot
id|length
suffix:semicolon
)brace
r_return
id|nents
suffix:semicolon
)brace
DECL|variable|dma_map_sg
id|EXPORT_SYMBOL
c_func
(paren
id|dma_map_sg
)paren
suffix:semicolon
r_int
DECL|function|dma_set_mask
id|dma_set_mask
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
id|u64
id|mask
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|dev-&gt;dma_mask
op_logical_or
op_logical_neg
id|dma_supported
c_func
(paren
id|dev
comma
id|mask
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
op_star
id|dev-&gt;dma_mask
op_assign
id|mask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|pci_iomap
r_void
id|__iomem
op_star
id|pci_iomap
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_int
id|bar
comma
r_int
r_int
id|maxlen
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|pci_iounmap
r_void
id|pci_iounmap
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_void
id|__iomem
op_star
id|addr
)paren
(brace
)brace
DECL|variable|pci_iomap
id|EXPORT_SYMBOL
c_func
(paren
id|pci_iomap
)paren
suffix:semicolon
DECL|variable|pci_iounmap
id|EXPORT_SYMBOL
c_func
(paren
id|pci_iounmap
)paren
suffix:semicolon
eof
