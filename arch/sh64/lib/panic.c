multiline_comment|/*&n; * Copyright (C) 2003  Richard Curnow, SuperH UK Limited&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/registers.h&gt;
multiline_comment|/* THIS IS A PHYSICAL ADDRESS */
DECL|macro|HDSP2534_ADDR
mdefine_line|#define HDSP2534_ADDR (0x04002100)
macro_line|#ifdef CONFIG_SH_CAYMAN
DECL|function|poor_mans_delay
r_static
r_void
id|poor_mans_delay
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2500000
suffix:semicolon
id|i
op_increment
)paren
(brace
)brace
multiline_comment|/* poor man&squot;s delay */
)brace
DECL|function|show_value
r_static
r_void
id|show_value
c_func
(paren
r_int
r_int
id|x
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|nibble
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|nibble
op_assign
(paren
(paren
id|x
op_rshift
(paren
id|i
op_star
l_int|4
)paren
)paren
op_amp
l_int|0xf
)paren
suffix:semicolon
id|ctrl_outb
c_func
(paren
id|nibble
op_plus
(paren
(paren
id|nibble
OG
l_int|9
)paren
ques
c_cond
l_int|55
suffix:colon
l_int|48
)paren
comma
id|HDSP2534_ADDR
op_plus
l_int|0xe0
op_plus
(paren
(paren
l_int|7
op_minus
id|i
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_void
DECL|function|panic_handler
id|panic_handler
c_func
(paren
r_int
r_int
id|panicPC
comma
r_int
r_int
id|panicSSR
comma
r_int
r_int
id|panicEXPEVT
)paren
(brace
macro_line|#ifdef CONFIG_SH_CAYMAN
r_while
c_loop
(paren
l_int|1
)paren
(brace
multiline_comment|/* This piece of code displays the PC on the LED display */
id|show_value
c_func
(paren
id|panicPC
)paren
suffix:semicolon
id|poor_mans_delay
c_func
(paren
)paren
suffix:semicolon
id|show_value
c_func
(paren
id|panicSSR
)paren
suffix:semicolon
id|poor_mans_delay
c_func
(paren
)paren
suffix:semicolon
id|show_value
c_func
(paren
id|panicEXPEVT
)paren
suffix:semicolon
id|poor_mans_delay
c_func
(paren
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* Never return from the panic handler */
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
suffix:semicolon
)brace
eof
