multiline_comment|/*&n; * arch/sh64/kernel/led_cayman.c&n; *&n; * Copyright (C) 2002 Stuart Menefy &lt;stuart.menefy@st.com&gt;&n; *&n; * May be copied or modified under the terms of the GNU General Public&n; * License.  See linux/COPYING for more information.&n; *&n; * Flash the LEDs&n; */
macro_line|#include &lt;asm/io.h&gt;
multiline_comment|/*&n;** It is supposed these functions to be used for a low level&n;** debugging (via Cayman LEDs), hence to be available as soon&n;** as possible.&n;** Unfortunately Cayman LEDs relies on Cayman EPLD to be mapped&n;** (this happen when IRQ are initialized... quite late).&n;** These triky dependencies should be removed. Temporary, it&n;** may be enough to NOP until EPLD is mapped.&n;*/
r_extern
r_int
r_int
id|epld_virt
suffix:semicolon
DECL|macro|LED_ADDR
mdefine_line|#define LED_ADDR      (epld_virt + 0x008)
DECL|macro|HDSP2534_ADDR
mdefine_line|#define HDSP2534_ADDR (epld_virt + 0x100)
DECL|function|mach_led
r_void
id|mach_led
c_func
(paren
r_int
id|position
comma
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|epld_virt
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|value
)paren
id|ctrl_outl
c_func
(paren
l_int|0
comma
id|LED_ADDR
)paren
suffix:semicolon
r_else
id|ctrl_outl
c_func
(paren
l_int|1
comma
id|LED_ADDR
)paren
suffix:semicolon
)brace
DECL|function|mach_alphanum
r_void
id|mach_alphanum
c_func
(paren
r_int
id|position
comma
r_int
r_char
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|epld_virt
)paren
r_return
suffix:semicolon
id|ctrl_outb
c_func
(paren
id|value
comma
id|HDSP2534_ADDR
op_plus
l_int|0xe0
op_plus
(paren
id|position
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
)brace
DECL|function|mach_alphanum_brightness
r_void
id|mach_alphanum_brightness
c_func
(paren
r_int
id|setting
)paren
(brace
id|ctrl_outb
c_func
(paren
id|setting
op_amp
l_int|7
comma
id|HDSP2534_ADDR
op_plus
l_int|0xc0
)paren
suffix:semicolon
)brace
eof
