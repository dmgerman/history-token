multiline_comment|/* $Id: ioctl32.c,v 1.136 2002/01/14 09:49:52 davem Exp $&n; * ioctl32.c: Conversion between 32bit and 64bit native ioctls.&n; *&n; * Copyright (C) 1997-2000  Jakub Jelinek  (jakub@redhat.com)&n; * Copyright (C) 1998  Eddie C. Dost  (ecd@skynet.be)&n; * Copyright (C) 2003  Pavel Machek (pavel@suse.cz)&n; *&n; * These routines maintain argument size conversion between 32bit and 64bit&n; * ioctls.&n; */
DECL|macro|INCLUDES
mdefine_line|#define INCLUDES
macro_line|#include &quot;compat_ioctl.c&quot;
macro_line|#include &lt;linux/ncp_fs.h&gt;
macro_line|#include &lt;linux/syscalls.h&gt;
macro_line|#include &lt;asm/fbio.h&gt;
macro_line|#include &lt;asm/kbio.h&gt;
macro_line|#include &lt;asm/vuid_event.h&gt;
macro_line|#include &lt;asm/envctrl.h&gt;
macro_line|#include &lt;asm/display7seg.h&gt;
macro_line|#include &lt;asm/openpromio.h&gt;
macro_line|#include &lt;asm/audioio.h&gt;
macro_line|#include &lt;asm/watchdog.h&gt;
multiline_comment|/* Use this to get at 32-bit user passed pointers. &n; * See sys_sparc32.c for description about it.&n; */
DECL|macro|A
mdefine_line|#define A(__x) compat_ptr(__x)
DECL|function|alloc_user_space
r_static
id|__inline__
r_void
op_star
id|alloc_user_space
c_func
(paren
r_int
id|len
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
id|current_thread_info
c_func
(paren
)paren
op_member_access_from_pointer
id|kregs
suffix:semicolon
r_int
r_int
id|usp
op_assign
id|regs-&gt;u_regs
(braket
id|UREG_I6
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|test_thread_flag
c_func
(paren
id|TIF_32BIT
)paren
)paren
)paren
id|usp
op_add_assign
id|STACK_BIAS
suffix:semicolon
r_return
(paren
r_void
op_star
)paren
(paren
id|usp
op_minus
id|len
)paren
suffix:semicolon
)brace
DECL|macro|CODE
mdefine_line|#define CODE
macro_line|#include &quot;compat_ioctl.c&quot;
DECL|struct|fbcmap32
r_struct
id|fbcmap32
(brace
DECL|member|index
r_int
id|index
suffix:semicolon
multiline_comment|/* first element (0 origin) */
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|red
id|u32
id|red
suffix:semicolon
DECL|member|green
id|u32
id|green
suffix:semicolon
DECL|member|blue
id|u32
id|blue
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|FBIOPUTCMAP32
mdefine_line|#define FBIOPUTCMAP32&t;_IOW(&squot;F&squot;, 3, struct fbcmap32)
DECL|macro|FBIOGETCMAP32
mdefine_line|#define FBIOGETCMAP32&t;_IOW(&squot;F&squot;, 4, struct fbcmap32)
DECL|function|fbiogetputcmap
r_static
r_int
id|fbiogetputcmap
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_struct
id|fbcmap32
id|__user
op_star
id|argp
op_assign
(paren
r_void
id|__user
op_star
)paren
id|arg
suffix:semicolon
r_struct
id|fbcmap
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|u32
id|addr
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|ret
op_assign
id|copy_in_user
c_func
(paren
id|p
comma
id|argp
comma
l_int|2
op_star
r_sizeof
(paren
r_int
)paren
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;red
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;red
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;green
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;green
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;blue
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;blue
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
id|sys_ioctl
c_func
(paren
id|fd
comma
(paren
id|cmd
op_eq
id|FBIOPUTCMAP32
)paren
ques
c_cond
id|FBIOPUTCMAP_SPARC
suffix:colon
id|FBIOGETCMAP_SPARC
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
)brace
DECL|struct|fbcursor32
r_struct
id|fbcursor32
(brace
DECL|member|set
r_int
id|set
suffix:semicolon
multiline_comment|/* what to set, choose from the list above */
DECL|member|enable
r_int
id|enable
suffix:semicolon
multiline_comment|/* cursor on/off */
DECL|member|pos
r_struct
id|fbcurpos
id|pos
suffix:semicolon
multiline_comment|/* cursor position */
DECL|member|hot
r_struct
id|fbcurpos
id|hot
suffix:semicolon
multiline_comment|/* cursor hot spot */
DECL|member|cmap
r_struct
id|fbcmap32
id|cmap
suffix:semicolon
multiline_comment|/* color map info */
DECL|member|size
r_struct
id|fbcurpos
id|size
suffix:semicolon
multiline_comment|/* cursor bit map size */
DECL|member|image
id|u32
id|image
suffix:semicolon
multiline_comment|/* cursor image bits */
DECL|member|mask
id|u32
id|mask
suffix:semicolon
multiline_comment|/* cursor mask bits */
)brace
suffix:semicolon
DECL|macro|FBIOSCURSOR32
mdefine_line|#define FBIOSCURSOR32&t;_IOW(&squot;F&squot;, 24, struct fbcursor32)
DECL|macro|FBIOGCURSOR32
mdefine_line|#define FBIOGCURSOR32&t;_IOW(&squot;F&squot;, 25, struct fbcursor32)
DECL|function|fbiogscursor
r_static
r_int
id|fbiogscursor
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_struct
id|fbcursor
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
r_struct
id|fbcursor32
id|__user
op_star
id|argp
op_assign
(paren
r_void
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|ret
op_assign
id|copy_in_user
c_func
(paren
id|p
comma
id|argp
comma
l_int|2
op_star
r_sizeof
(paren
r_int
)paren
op_plus
l_int|2
op_star
r_sizeof
(paren
r_struct
id|fbcurpos
)paren
)paren
suffix:semicolon
id|ret
op_or_assign
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;size
comma
op_amp
id|argp-&gt;size
comma
r_sizeof
(paren
r_struct
id|fbcurpos
)paren
)paren
suffix:semicolon
id|ret
op_or_assign
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;cmap
comma
op_amp
id|argp-&gt;cmap
comma
l_int|2
op_star
r_sizeof
(paren
r_int
)paren
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;cmap.red
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;cmap.red
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;cmap.green
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;cmap.green
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;cmap.blue
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;cmap.blue
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;mask
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;mask
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|argp-&gt;image
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;image
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
id|sys_ioctl
(paren
id|fd
comma
id|FBIOSCURSOR
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
)brace
macro_line|#if defined(CONFIG_DRM) || defined(CONFIG_DRM_MODULE)
multiline_comment|/* This really belongs in include/linux/drm.h -DaveM */
macro_line|#include &quot;../../../drivers/char/drm/drm.h&quot;
DECL|struct|drm32_version
r_typedef
r_struct
id|drm32_version
(brace
DECL|member|version_major
r_int
id|version_major
suffix:semicolon
multiline_comment|/* Major version&t;&t;&t;    */
DECL|member|version_minor
r_int
id|version_minor
suffix:semicolon
multiline_comment|/* Minor version&t;&t;&t;    */
DECL|member|version_patchlevel
r_int
id|version_patchlevel
suffix:semicolon
multiline_comment|/* Patch level&t;&t;&t;    */
DECL|member|name_len
r_int
id|name_len
suffix:semicolon
multiline_comment|/* Length of name buffer&t;&t;    */
DECL|member|name
id|u32
id|name
suffix:semicolon
multiline_comment|/* Name of driver&t;&t;&t;    */
DECL|member|date_len
r_int
id|date_len
suffix:semicolon
multiline_comment|/* Length of date buffer&t;&t;    */
DECL|member|date
id|u32
id|date
suffix:semicolon
multiline_comment|/* User-space buffer to hold date&t;    */
DECL|member|desc_len
r_int
id|desc_len
suffix:semicolon
multiline_comment|/* Length of desc buffer&t;&t;    */
DECL|member|desc
id|u32
id|desc
suffix:semicolon
multiline_comment|/* User-space buffer to hold desc&t;    */
DECL|typedef|drm32_version_t
)brace
id|drm32_version_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_VERSION
mdefine_line|#define DRM32_IOCTL_VERSION    DRM_IOWR(0x00, drm32_version_t)
DECL|function|drm32_version
r_static
r_int
id|drm32_version
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_version_t
id|__user
op_star
id|uversion
op_assign
(paren
id|drm32_version_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_version_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|n
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|clear_user
c_func
(paren
id|p
comma
l_int|3
op_star
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;name_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;name_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uversion-&gt;name
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;name
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;date_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;date_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uversion-&gt;date
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;date
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;desc_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;desc_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uversion-&gt;desc
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;desc
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_VERSION
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|copy_in_user
c_func
(paren
id|uversion
comma
id|p
comma
l_int|3
op_star
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;name_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;name_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;date_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;date_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;desc_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uversion-&gt;desc_len
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|struct|drm32_unique
r_typedef
r_struct
id|drm32_unique
(brace
DECL|member|unique_len
r_int
id|unique_len
suffix:semicolon
multiline_comment|/* Length of unique&t;&t;&t;    */
DECL|member|unique
id|u32
id|unique
suffix:semicolon
multiline_comment|/* Unique name for driver instantiation   */
DECL|typedef|drm32_unique_t
)brace
id|drm32_unique_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_GET_UNIQUE
mdefine_line|#define DRM32_IOCTL_GET_UNIQUE DRM_IOWR(0x01, drm32_unique_t)
DECL|macro|DRM32_IOCTL_SET_UNIQUE
mdefine_line|#define DRM32_IOCTL_SET_UNIQUE DRM_IOW( 0x10, drm32_unique_t)
DECL|function|drm32_getsetunique
r_static
r_int
id|drm32_getsetunique
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_unique_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_unique_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_unique_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|n
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;unique_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;unique_len
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;unique
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;unique
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|cmd
op_eq
id|DRM32_IOCTL_GET_UNIQUE
)paren
id|ret
op_assign
id|sys_ioctl
(paren
id|fd
comma
id|DRM_IOCTL_GET_UNIQUE
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_else
id|ret
op_assign
id|sys_ioctl
(paren
id|fd
comma
id|DRM_IOCTL_SET_UNIQUE
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;unique_len
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;unique_len
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|struct|drm32_map
r_typedef
r_struct
id|drm32_map
(brace
DECL|member|offset
id|u32
id|offset
suffix:semicolon
multiline_comment|/* Requested physical address (0 for SAREA)*/
DECL|member|size
id|u32
id|size
suffix:semicolon
multiline_comment|/* Requested physical size (bytes)&t;    */
DECL|member|type
id|drm_map_type_t
id|type
suffix:semicolon
multiline_comment|/* Type of memory to map&t;&t;    */
DECL|member|flags
id|drm_map_flags_t
id|flags
suffix:semicolon
multiline_comment|/* Flags&t;&t;&t;&t;    */
DECL|member|handle
id|u32
id|handle
suffix:semicolon
multiline_comment|/* User-space: &quot;Handle&quot; to pass to mmap    */
multiline_comment|/* Kernel-space: kernel-virtual address    */
DECL|member|mtrr
r_int
id|mtrr
suffix:semicolon
multiline_comment|/* MTRR slot used&t;&t;&t;    */
multiline_comment|/* Private data&t;&t;&t;    */
DECL|typedef|drm32_map_t
)brace
id|drm32_map_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_ADD_MAP
mdefine_line|#define DRM32_IOCTL_ADD_MAP    DRM_IOWR(0x15, drm32_map_t)
DECL|function|drm32_addmap
r_static
r_int
id|drm32_addmap
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_map_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_map_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_map_t
id|karg
suffix:semicolon
id|mm_segment_t
id|old_fs
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|ret
op_assign
id|get_user
c_func
(paren
id|karg.offset
comma
op_amp
id|uarg-&gt;offset
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|karg.size
comma
op_amp
id|uarg-&gt;size
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|karg.type
comma
op_amp
id|uarg-&gt;type
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|karg.flags
comma
op_amp
id|uarg-&gt;flags
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|tmp
comma
op_amp
id|uarg-&gt;handle
)paren
suffix:semicolon
id|ret
op_or_assign
id|get_user
c_func
(paren
id|karg.mtrr
comma
op_amp
id|uarg-&gt;mtrr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|karg.handle
op_assign
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|tmp
suffix:semicolon
id|old_fs
op_assign
id|get_fs
c_func
(paren
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|KERNEL_DS
)paren
suffix:semicolon
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_ADD_MAP
comma
(paren
r_int
r_int
)paren
op_amp
id|karg
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|old_fs
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ret
)paren
(brace
id|ret
op_assign
id|put_user
c_func
(paren
id|karg.offset
comma
op_amp
id|uarg-&gt;offset
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|karg.size
comma
op_amp
id|uarg-&gt;size
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|karg.type
comma
op_amp
id|uarg-&gt;type
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|karg.flags
comma
op_amp
id|uarg-&gt;flags
)paren
suffix:semicolon
id|tmp
op_assign
(paren
id|u32
)paren
(paren
r_int
)paren
id|karg.handle
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|tmp
comma
op_amp
id|uarg-&gt;handle
)paren
suffix:semicolon
id|ret
op_or_assign
id|put_user
c_func
(paren
id|karg.mtrr
comma
op_amp
id|uarg-&gt;mtrr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
id|ret
op_assign
op_minus
id|EFAULT
suffix:semicolon
)brace
r_return
id|ret
suffix:semicolon
)brace
DECL|struct|drm32_buf_info
r_typedef
r_struct
id|drm32_buf_info
(brace
DECL|member|count
r_int
id|count
suffix:semicolon
multiline_comment|/* Entries in list&t;&t;&t;     */
DECL|member|list
id|u32
id|list
suffix:semicolon
multiline_comment|/* (drm_buf_desc_t *) */
DECL|typedef|drm32_buf_info_t
)brace
id|drm32_buf_info_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_INFO_BUFS
mdefine_line|#define DRM32_IOCTL_INFO_BUFS  DRM_IOWR(0x18, drm32_buf_info_t)
DECL|function|drm32_info_bufs
r_static
r_int
id|drm32_info_bufs
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_buf_info_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_buf_info_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_buf_info_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|n
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;count
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;count
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;list
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;list
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_INFO_BUFS
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;count
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;count
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|struct|drm32_buf_free
r_typedef
r_struct
id|drm32_buf_free
(brace
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|list
id|u32
id|list
suffix:semicolon
multiline_comment|/* (int *) */
DECL|typedef|drm32_buf_free_t
)brace
id|drm32_buf_free_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_FREE_BUFS
mdefine_line|#define DRM32_IOCTL_FREE_BUFS  DRM_IOW( 0x1a, drm32_buf_free_t)
DECL|function|drm32_free_bufs
r_static
r_int
id|drm32_free_bufs
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_buf_free_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_buf_free_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_buf_free_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|n
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;count
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|p-&gt;count
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;list
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;list
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_FREE_BUFS
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
)brace
DECL|struct|drm32_buf_pub
r_typedef
r_struct
id|drm32_buf_pub
(brace
DECL|member|idx
r_int
id|idx
suffix:semicolon
multiline_comment|/* Index into master buflist&t;     */
DECL|member|total
r_int
id|total
suffix:semicolon
multiline_comment|/* Buffer size&t;&t;&t;     */
DECL|member|used
r_int
id|used
suffix:semicolon
multiline_comment|/* Amount of buffer in use (for DMA)  */
DECL|member|address
id|u32
id|address
suffix:semicolon
multiline_comment|/* Address of buffer (void *)&t;     */
DECL|typedef|drm32_buf_pub_t
)brace
id|drm32_buf_pub_t
suffix:semicolon
DECL|struct|drm32_buf_map
r_typedef
r_struct
id|drm32_buf_map
(brace
DECL|member|count
r_int
id|count
suffix:semicolon
multiline_comment|/* Length of buflist&t;&t;&t;    */
DECL|member|virtual
id|u32
r_virtual
suffix:semicolon
multiline_comment|/* Mmaped area in user-virtual (void *)&t;    */
DECL|member|list
id|u32
id|list
suffix:semicolon
multiline_comment|/* Buffer information (drm_buf_pub_t *)&t;    */
DECL|typedef|drm32_buf_map_t
)brace
id|drm32_buf_map_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_MAP_BUFS
mdefine_line|#define DRM32_IOCTL_MAP_BUFS   DRM_IOWR(0x19, drm32_buf_map_t)
DECL|function|drm32_map_bufs
r_static
r_int
id|drm32_map_bufs
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_buf_map_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_buf_map_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm32_buf_pub_t
id|__user
op_star
id|ulist
suffix:semicolon
id|drm_buf_map_t
id|__user
op_star
id|arg64
suffix:semicolon
id|drm_buf_pub_t
id|__user
op_star
id|list
suffix:semicolon
r_int
id|orig_count
comma
id|ret
comma
id|i
suffix:semicolon
r_int
id|n
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|orig_count
comma
op_amp
id|uarg-&gt;count
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|arg64
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
id|drm_buf_map_t
)paren
op_plus
(paren
r_int
)paren
id|orig_count
op_star
r_sizeof
(paren
id|drm_buf_pub_t
)paren
)paren
suffix:semicolon
id|list
op_assign
(paren
r_void
id|__user
op_star
)paren
(paren
id|arg64
op_plus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|put_user
c_func
(paren
id|orig_count
comma
op_amp
id|arg64-&gt;count
)paren
op_logical_or
id|put_user
c_func
(paren
id|list
comma
op_amp
id|arg64-&gt;list
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg
op_member_access_from_pointer
r_virtual
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|arg64
op_member_access_from_pointer
r_virtual
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;list
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|ulist
op_assign
id|compat_ptr
c_func
(paren
id|addr
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|orig_count
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|idx
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|idx
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|total
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|total
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|used
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|used
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|address
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|address
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_MAP_BUFS
comma
(paren
r_int
r_int
)paren
id|arg64
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|orig_count
suffix:semicolon
id|i
op_increment
)paren
(brace
r_void
id|__user
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|idx
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|idx
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|total
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|total
)paren
op_logical_or
id|get_user
c_func
(paren
id|n
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|used
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|used
)paren
op_logical_or
id|get_user
c_func
(paren
id|p
comma
op_amp
id|list
(braket
id|i
)braket
dot
id|address
)paren
op_logical_or
id|put_user
c_func
(paren
(paren
r_int
r_int
)paren
id|p
comma
op_amp
id|ulist
(braket
id|i
)braket
dot
id|address
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|n
comma
op_amp
id|arg64-&gt;count
)paren
op_logical_or
id|put_user
c_func
(paren
id|n
comma
op_amp
id|uarg-&gt;count
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|struct|drm32_dma
r_typedef
r_struct
id|drm32_dma
(brace
multiline_comment|/* Indices here refer to the offset into&n;&t;&t;&t;&t;   buflist in drm_buf_get_t.  */
DECL|member|context
r_int
id|context
suffix:semicolon
multiline_comment|/* Context handle&t;&t;    */
DECL|member|send_count
r_int
id|send_count
suffix:semicolon
multiline_comment|/* Number of buffers to send&t;    */
DECL|member|send_indices
id|u32
id|send_indices
suffix:semicolon
multiline_comment|/* List of handles to buffers (int *) */
DECL|member|send_sizes
id|u32
id|send_sizes
suffix:semicolon
multiline_comment|/* Lengths of data to send (int *) */
DECL|member|flags
id|drm_dma_flags_t
id|flags
suffix:semicolon
multiline_comment|/* Flags&t;&t;&t;    */
DECL|member|request_count
r_int
id|request_count
suffix:semicolon
multiline_comment|/* Number of buffers requested    */
DECL|member|request_size
r_int
id|request_size
suffix:semicolon
multiline_comment|/* Desired size for buffers&t;    */
DECL|member|request_indices
id|u32
id|request_indices
suffix:semicolon
multiline_comment|/* Buffer information (int *)&t;    */
DECL|member|request_sizes
id|u32
id|request_sizes
suffix:semicolon
multiline_comment|/* (int *) */
DECL|member|granted_count
r_int
id|granted_count
suffix:semicolon
multiline_comment|/* Number of buffers granted&t;    */
DECL|typedef|drm32_dma_t
)brace
id|drm32_dma_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_DMA
mdefine_line|#define DRM32_IOCTL_DMA&t;     DRM_IOWR(0x29, drm32_dma_t)
multiline_comment|/* RED PEN&t;The DRM layer blindly dereferences the send/request&n; * &t;&t;index/size arrays even though they are userland&n; * &t;&t;pointers.  -DaveM&n; */
DECL|function|drm32_dma
r_static
r_int
id|drm32_dma
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_dma_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_dma_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_dma_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|copy_in_user
c_func
(paren
id|p
comma
id|uarg
comma
l_int|2
op_star
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;send_indices
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;send_indices
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;send_sizes
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;send_sizes
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;flags
comma
op_amp
id|uarg-&gt;flags
comma
r_sizeof
(paren
id|drm_dma_flags_t
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;request_count
comma
op_amp
id|uarg-&gt;request_count
comma
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;request_size
comma
op_amp
id|uarg-&gt;request_size
comma
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;request_indices
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;request_indices
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;request_sizes
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;request_sizes
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|p-&gt;granted_count
comma
op_amp
id|uarg-&gt;granted_count
comma
r_sizeof
(paren
r_int
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_DMA
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|copy_in_user
c_func
(paren
id|uarg
comma
id|p
comma
l_int|2
op_star
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|uarg-&gt;flags
comma
op_amp
id|p-&gt;flags
comma
r_sizeof
(paren
id|drm_dma_flags_t
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|uarg-&gt;request_count
comma
op_amp
id|p-&gt;request_count
comma
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|uarg-&gt;request_size
comma
op_amp
id|p-&gt;request_size
comma
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|copy_in_user
c_func
(paren
op_amp
id|uarg-&gt;granted_count
comma
op_amp
id|p-&gt;granted_count
comma
r_sizeof
(paren
r_int
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|struct|drm32_ctx_res
r_typedef
r_struct
id|drm32_ctx_res
(brace
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|contexts
id|u32
id|contexts
suffix:semicolon
multiline_comment|/* (drm_ctx_t *) */
DECL|typedef|drm32_ctx_res_t
)brace
id|drm32_ctx_res_t
suffix:semicolon
DECL|macro|DRM32_IOCTL_RES_CTX
mdefine_line|#define DRM32_IOCTL_RES_CTX    DRM_IOWR(0x26, drm32_ctx_res_t)
DECL|function|drm32_res_ctx
r_static
r_int
id|drm32_res_ctx
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
id|drm32_ctx_res_t
id|__user
op_star
id|uarg
op_assign
(paren
id|drm32_ctx_res_t
id|__user
op_star
)paren
id|arg
suffix:semicolon
id|drm_ctx_res_t
id|__user
op_star
id|p
op_assign
id|compat_alloc_user_space
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
)paren
suffix:semicolon
id|compat_uptr_t
id|addr
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|copy_in_user
c_func
(paren
id|p
comma
id|uarg
comma
r_sizeof
(paren
r_int
)paren
)paren
op_logical_or
id|get_user
c_func
(paren
id|addr
comma
op_amp
id|uarg-&gt;contexts
)paren
op_logical_or
id|put_user
c_func
(paren
id|compat_ptr
c_func
(paren
id|addr
)paren
comma
op_amp
id|p-&gt;contexts
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|ret
op_assign
id|sys_ioctl
c_func
(paren
id|fd
comma
id|DRM_IOCTL_RES_CTX
comma
(paren
r_int
r_int
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|copy_in_user
c_func
(paren
id|uarg
comma
id|p
comma
r_sizeof
(paren
r_int
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|typedef|ioctl32_handler_t
r_typedef
r_int
(paren
op_star
id|ioctl32_handler_t
)paren
(paren
r_int
r_int
comma
r_int
r_int
comma
r_int
r_int
comma
r_struct
id|file
op_star
)paren
suffix:semicolon
DECL|macro|COMPATIBLE_IOCTL
mdefine_line|#define COMPATIBLE_IOCTL(cmd)&t;&t;HANDLE_IOCTL((cmd),sys_ioctl)
DECL|macro|HANDLE_IOCTL
mdefine_line|#define HANDLE_IOCTL(cmd,handler)&t;{ (cmd), (ioctl32_handler_t)(handler), NULL },
DECL|macro|IOCTL_TABLE_START
mdefine_line|#define IOCTL_TABLE_START &bslash;&n;&t;struct ioctl_trans ioctl_start[] = {
DECL|macro|IOCTL_TABLE_END
mdefine_line|#define IOCTL_TABLE_END &bslash;&n;&t;};
id|IOCTL_TABLE_START
macro_line|#include &lt;linux/compat_ioctl.h&gt;
DECL|macro|DECLARES
mdefine_line|#define DECLARES
macro_line|#include &quot;compat_ioctl.c&quot;
id|COMPATIBLE_IOCTL
c_func
(paren
id|TIOCSTART
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|TIOCSTOP
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|TIOCSLTC
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGTYPE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOSATTR
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGATTR
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOSVIDEO
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGVIDEO
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGCURSOR32
)paren
multiline_comment|/* This is not implemented yet. Later it should be converted... */
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOSCURPOS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGCURPOS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|FBIOGCURMAX
)paren
multiline_comment|/* Little k */
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCTYPE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCLAYOUT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCGTRANS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCTRANS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCCMD
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCSDIRECT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCSLED
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCGLED
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCSRATE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|KIOCGRATE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|VUIDSFORMAT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|VUIDGFORMAT
)paren
multiline_comment|/* Little v, the video4linux ioctls */
id|COMPATIBLE_IOCTL
c_func
(paren
id|_IOR
c_func
(paren
l_char|&squot;p&squot;
comma
l_int|20
comma
r_int
(braket
l_int|7
)braket
)paren
)paren
multiline_comment|/* RTCGET */
id|COMPATIBLE_IOCTL
c_func
(paren
id|_IOW
c_func
(paren
l_char|&squot;p&squot;
comma
l_int|21
comma
r_int
(braket
l_int|7
)braket
)paren
)paren
multiline_comment|/* RTCSET */
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_WARNING_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_SHUTDOWN_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_CPU_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_FAN_STATUS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_VOLTAGE_STATUS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_SCSI_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_ETHERNET_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_MTHRBD_TEMPERATURE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_CPU_VOLTAGE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|ENVCTRL_RD_GLOBALADDRESS
)paren
multiline_comment|/* COMPATIBLE_IOCTL(D7SIOCRD) same value as ENVCTRL_RD_VOLTAGE_STATUS */
id|COMPATIBLE_IOCTL
c_func
(paren
id|D7SIOCWR
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|D7SIOCTM
)paren
multiline_comment|/* OPENPROMIO, SunOS/Solaris only, the NetBSD one&squot;s have&n; * embedded pointers in the arg which we&squot;d need to clean up...&n; */
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMGETOPT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMSETOPT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMNXTOPT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMSETOPT2
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMNEXT
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMCHILD
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMGETPROP
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMNXTPROP
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMU2P
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMGETCONS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMGETFBNAME
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMGETBOOTARGS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMSETCUR
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMPCI2NODE
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|OPROMPATH2NODE
)paren
multiline_comment|/* Big L */
id|COMPATIBLE_IOCTL
c_func
(paren
id|LOOP_SET_STATUS64
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|LOOP_GET_STATUS64
)paren
multiline_comment|/* Big A */
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_GETINFO
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_SETINFO
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_DRAIN
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_GETDEV
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_GETDEV_SUNOS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUDIO_FLUSH
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|AUTOFS_IOC_EXPIRE_MULTI
)paren
macro_line|#if defined(CONFIG_DRM) || defined(CONFIG_DRM_MODULE)
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_GET_MAGIC
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_IRQ_BUSID
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_AUTH_MAGIC
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_BLOCK
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_UNBLOCK
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_CONTROL
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_ADD_BUFS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_MARK_BUFS
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_ADD_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_RM_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_MOD_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_GET_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_SWITCH_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_NEW_CTX
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_ADD_DRAW
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_RM_DRAW
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_LOCK
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_UNLOCK
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|DRM_IOCTL_FINISH
)paren
macro_line|#endif /* DRM */
id|COMPATIBLE_IOCTL
c_func
(paren
id|WIOCSTART
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|WIOCSTOP
)paren
id|COMPATIBLE_IOCTL
c_func
(paren
id|WIOCGSTAT
)paren
multiline_comment|/* And these ioctls need translation */
multiline_comment|/* Note SIOCRTMSG is no longer, so this is safe and * the user would have seen just an -EINVAL anyways. */
id|HANDLE_IOCTL
c_func
(paren
id|FBIOPUTCMAP32
comma
id|fbiogetputcmap
)paren
id|HANDLE_IOCTL
c_func
(paren
id|FBIOGETCMAP32
comma
id|fbiogetputcmap
)paren
id|HANDLE_IOCTL
c_func
(paren
id|FBIOSCURSOR32
comma
id|fbiogscursor
)paren
macro_line|#if defined(CONFIG_DRM) || defined(CONFIG_DRM_MODULE)
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_VERSION
comma
id|drm32_version
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_GET_UNIQUE
comma
id|drm32_getsetunique
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_SET_UNIQUE
comma
id|drm32_getsetunique
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_ADD_MAP
comma
id|drm32_addmap
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_INFO_BUFS
comma
id|drm32_info_bufs
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_FREE_BUFS
comma
id|drm32_free_bufs
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_MAP_BUFS
comma
id|drm32_map_bufs
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_DMA
comma
id|drm32_dma
)paren
id|HANDLE_IOCTL
c_func
(paren
id|DRM32_IOCTL_RES_CTX
comma
id|drm32_res_ctx
)paren
macro_line|#endif /* DRM */
macro_line|#if 0
id|HANDLE_IOCTL
c_func
(paren
id|RTC32_IRQP_READ
comma
id|do_rtc_ioctl
)paren
id|HANDLE_IOCTL
c_func
(paren
id|RTC32_IRQP_SET
comma
id|do_rtc_ioctl
)paren
id|HANDLE_IOCTL
c_func
(paren
id|RTC32_EPOCH_READ
comma
id|do_rtc_ioctl
)paren
id|HANDLE_IOCTL
c_func
(paren
id|RTC32_EPOCH_SET
comma
id|do_rtc_ioctl
)paren
macro_line|#endif
multiline_comment|/* take care of sizeof(sizeof()) breakage */
id|IOCTL_TABLE_END
r_int
id|ioctl_table_size
op_assign
id|ARRAY_SIZE
c_func
(paren
id|ioctl_start
)paren
suffix:semicolon
eof
