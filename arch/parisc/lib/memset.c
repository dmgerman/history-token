multiline_comment|/* Copyright (C) 1991, 1997 Free Software Foundation, Inc.&n;   This file is part of the GNU C Library.&n;&n;   The GNU C Library is free software; you can redistribute it and/or&n;   modify it under the terms of the GNU Lesser General Public&n;   License as published by the Free Software Foundation; either&n;   version 2.1 of the License, or (at your option) any later version.&n;&n;   The GNU C Library is distributed in the hope that it will be useful,&n;   but WITHOUT ANY WARRANTY; without even the implied warranty of&n;   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU&n;   Lesser General Public License for more details.&n;&n;   You should have received a copy of the GNU Lesser General Public&n;   License along with the GNU C Library; if not, write to the Free&n;   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA&n;   02111-1307 USA.  */
multiline_comment|/* Slight modifications for pa-risc linux - Paul Bame &lt;bame@debian.org&gt; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;asm/string.h&gt;
DECL|macro|OPSIZ
mdefine_line|#define OPSIZ (BITS_PER_LONG/8)
DECL|typedef|op_t
r_typedef
r_int
r_int
id|op_t
suffix:semicolon
r_void
op_star
DECL|function|memset
id|memset
(paren
r_void
op_star
id|dstpp
comma
r_int
id|sc
comma
r_int
id|len
)paren
(brace
r_int
r_int
id|c
op_assign
id|sc
suffix:semicolon
r_int
r_int
id|dstp
op_assign
(paren
r_int
r_int
)paren
id|dstpp
suffix:semicolon
r_if
c_cond
(paren
id|len
op_ge
l_int|8
)paren
(brace
r_int
id|xlen
suffix:semicolon
id|op_t
id|cccc
suffix:semicolon
id|cccc
op_assign
(paren
r_int
r_char
)paren
id|c
suffix:semicolon
id|cccc
op_or_assign
id|cccc
op_lshift
l_int|8
suffix:semicolon
id|cccc
op_or_assign
id|cccc
op_lshift
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|OPSIZ
OG
l_int|4
)paren
multiline_comment|/* Do the shift in two steps to avoid warning if long has 32 bits.  */
id|cccc
op_or_assign
(paren
id|cccc
op_lshift
l_int|16
)paren
op_lshift
l_int|16
suffix:semicolon
multiline_comment|/* There are at least some bytes to set.&n;&t; No need to test for LEN == 0 in this alignment loop.  */
r_while
c_loop
(paren
id|dstp
op_mod
id|OPSIZ
op_ne
l_int|0
)paren
(brace
(paren
(paren
r_int
r_char
op_star
)paren
id|dstp
)paren
(braket
l_int|0
)braket
op_assign
id|c
suffix:semicolon
id|dstp
op_add_assign
l_int|1
suffix:semicolon
id|len
op_sub_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Write 8 `op_t&squot; per iteration until less than 8 `op_t&squot; remain.  */
id|xlen
op_assign
id|len
op_div
(paren
id|OPSIZ
op_star
l_int|8
)paren
suffix:semicolon
r_while
c_loop
(paren
id|xlen
OG
l_int|0
)paren
(brace
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|0
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|1
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|2
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|3
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|4
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|5
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|6
)braket
op_assign
id|cccc
suffix:semicolon
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|7
)braket
op_assign
id|cccc
suffix:semicolon
id|dstp
op_add_assign
l_int|8
op_star
id|OPSIZ
suffix:semicolon
id|xlen
op_sub_assign
l_int|1
suffix:semicolon
)brace
id|len
op_mod_assign
id|OPSIZ
op_star
l_int|8
suffix:semicolon
multiline_comment|/* Write 1 `op_t&squot; per iteration until less than OPSIZ bytes remain.  */
id|xlen
op_assign
id|len
op_div
id|OPSIZ
suffix:semicolon
r_while
c_loop
(paren
id|xlen
OG
l_int|0
)paren
(brace
(paren
(paren
id|op_t
op_star
)paren
id|dstp
)paren
(braket
l_int|0
)braket
op_assign
id|cccc
suffix:semicolon
id|dstp
op_add_assign
id|OPSIZ
suffix:semicolon
id|xlen
op_sub_assign
l_int|1
suffix:semicolon
)brace
id|len
op_mod_assign
id|OPSIZ
suffix:semicolon
)brace
multiline_comment|/* Write the last few bytes.  */
r_while
c_loop
(paren
id|len
OG
l_int|0
)paren
(brace
(paren
(paren
r_int
r_char
op_star
)paren
id|dstp
)paren
(braket
l_int|0
)braket
op_assign
id|c
suffix:semicolon
id|dstp
op_add_assign
l_int|1
suffix:semicolon
id|len
op_sub_assign
l_int|1
suffix:semicolon
)brace
r_return
id|dstpp
suffix:semicolon
)brace
eof
