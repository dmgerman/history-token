multiline_comment|/*&n; *    Implements HPUX syscalls.&n; *&n; *    Copyright (C) 1999 Matthew Wilcox &lt;willy with parisc-linux.org&gt;&n; *    Copyright (C) 2000 Philipp Rumpf&n; *    Copyright (C) 2000 John Marvin &lt;jsm with parisc-linux.org&gt;&n; *    Copyright (C) 2000 Michael Ang &lt;mang with subcarrier.org&gt;&n; *    Copyright (C) 2001 Nathan Neulinger &lt;nneul at umr.edu&gt;&n; *&n; *    This program is free software; you can redistribute it and/or modify&n; *    it under the terms of the GNU General Public License as published by&n; *    the Free Software Foundation; either version 2 of the License, or&n; *    (at your option) any later version.&n; *&n; *    This program is distributed in the hope that it will be useful,&n; *    but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *    GNU General Public License for more details.&n; *&n; *    You should have received a copy of the GNU General Public License&n; *    along with this program; if not, write to the Free Software&n; *    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n; */
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/syscalls.h&gt;
macro_line|#include &lt;linux/utsname.h&gt;
macro_line|#include &lt;linux/vmalloc.h&gt;
macro_line|#include &lt;linux/vfs.h&gt;
macro_line|#include &lt;asm/errno.h&gt;
macro_line|#include &lt;asm/pgalloc.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
DECL|function|hpux_brk
r_int
r_int
id|hpux_brk
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
multiline_comment|/* Sigh.  Looks like HP/UX libc relies on kernel bugs. */
r_return
id|sys_brk
c_func
(paren
id|addr
op_plus
id|PAGE_SIZE
)paren
suffix:semicolon
)brace
DECL|function|hpux_sbrk
r_int
id|hpux_sbrk
c_func
(paren
r_void
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
multiline_comment|/* Random other syscalls */
DECL|function|hpux_nice
r_int
id|hpux_nice
c_func
(paren
r_int
id|priority_change
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
DECL|function|hpux_ptrace
r_int
id|hpux_ptrace
c_func
(paren
r_void
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
DECL|function|hpux_wait
r_int
id|hpux_wait
c_func
(paren
r_int
op_star
id|stat_loc
)paren
(brace
r_return
id|sys_waitpid
c_func
(paren
op_minus
l_int|1
comma
id|stat_loc
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|hpux_setpgrp
r_int
id|hpux_setpgrp
c_func
(paren
r_void
)paren
(brace
r_extern
r_int
id|sys_setpgid
c_func
(paren
r_int
comma
r_int
)paren
suffix:semicolon
r_return
id|sys_setpgid
c_func
(paren
l_int|0
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|hpux_setpgrp3
r_int
id|hpux_setpgrp3
c_func
(paren
r_void
)paren
(brace
r_return
id|hpux_setpgrp
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|macro|_SC_CPU_VERSION
mdefine_line|#define _SC_CPU_VERSION&t;10001
DECL|macro|_SC_OPEN_MAX
mdefine_line|#define _SC_OPEN_MAX&t;4
DECL|macro|CPU_PA_RISC1_1
mdefine_line|#define CPU_PA_RISC1_1&t;0x210
DECL|function|hpux_sysconf
r_int
id|hpux_sysconf
c_func
(paren
r_int
id|which
)paren
(brace
r_switch
c_cond
(paren
id|which
)paren
(brace
r_case
id|_SC_CPU_VERSION
suffix:colon
r_return
id|CPU_PA_RISC1_1
suffix:semicolon
r_case
id|_SC_OPEN_MAX
suffix:colon
r_return
id|INT_MAX
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
multiline_comment|/*****************************************************************************/
DECL|macro|HPUX_UTSLEN
mdefine_line|#define HPUX_UTSLEN 9
DECL|macro|HPUX_SNLEN
mdefine_line|#define HPUX_SNLEN 15
DECL|struct|hpux_utsname
r_struct
id|hpux_utsname
(brace
DECL|member|sysname
r_char
id|sysname
(braket
id|HPUX_UTSLEN
)braket
suffix:semicolon
DECL|member|nodename
r_char
id|nodename
(braket
id|HPUX_UTSLEN
)braket
suffix:semicolon
DECL|member|release
r_char
id|release
(braket
id|HPUX_UTSLEN
)braket
suffix:semicolon
DECL|member|version
r_char
id|version
(braket
id|HPUX_UTSLEN
)braket
suffix:semicolon
DECL|member|machine
r_char
id|machine
(braket
id|HPUX_UTSLEN
)braket
suffix:semicolon
DECL|member|idnumber
r_char
id|idnumber
(braket
id|HPUX_SNLEN
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|hpux_ustat
r_struct
id|hpux_ustat
(brace
DECL|member|f_tfree
r_int32
id|f_tfree
suffix:semicolon
multiline_comment|/* total free (daddr_t)  */
DECL|member|f_tinode
id|u_int32_t
id|f_tinode
suffix:semicolon
multiline_comment|/* total inodes free (ino_t)  */
DECL|member|f_fname
r_char
id|f_fname
(braket
l_int|6
)braket
suffix:semicolon
multiline_comment|/* filsys name */
DECL|member|f_fpack
r_char
id|f_fpack
(braket
l_int|6
)braket
suffix:semicolon
multiline_comment|/* filsys pack name */
DECL|member|f_blksize
id|u_int32_t
id|f_blksize
suffix:semicolon
multiline_comment|/* filsys block size (int) */
)brace
suffix:semicolon
multiline_comment|/*&n; * HPUX&squot;s utssys() call.  It&squot;s a collection of miscellaneous functions,&n; * alas, so there&squot;s no nice way of splitting them up.&n; */
multiline_comment|/*  This function is called from hpux_utssys(); HP-UX implements&n; *  ustat() as an option to utssys().&n; *&n; *  Now, struct ustat on HP-UX is exactly the same as on Linux, except&n; *  that it contains one addition field on the end, int32_t f_blksize.&n; *  So, we could have written this function to just call the Linux&n; *  sys_ustat(), (defined in linux/fs/super.c), and then just&n; *  added this additional field to the user&squot;s structure.  But I figure&n; *  if we&squot;re gonna be digging through filesystem structures to get&n; *  this, we might as well just do the whole enchilada all in one go.&n; *&n; *  So, most of this function is almost identical to sys_ustat().&n; *  I have placed comments at the few lines changed or added, to&n; *  aid in porting forward if and when sys_ustat() is changed from&n; *  its form in kernel 2.2.5.&n; */
DECL|function|hpux_ustat
r_static
r_int
id|hpux_ustat
c_func
(paren
id|dev_t
id|dev
comma
r_struct
id|hpux_ustat
op_star
id|ubuf
)paren
(brace
r_struct
id|super_block
op_star
id|s
suffix:semicolon
r_struct
id|hpux_ustat
id|tmp
suffix:semicolon
multiline_comment|/* Changed to hpux_ustat */
r_struct
id|kstatfs
id|sbuf
suffix:semicolon
r_int
id|err
op_assign
op_minus
id|EINVAL
suffix:semicolon
id|s
op_assign
id|user_get_super
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|s
op_eq
l_int|NULL
)paren
r_goto
id|out
suffix:semicolon
id|err
op_assign
id|vfs_statfs
c_func
(paren
id|s
comma
op_amp
id|sbuf
)paren
suffix:semicolon
id|drop_super
c_func
(paren
id|s
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
r_goto
id|out
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|tmp
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|hpux_ustat
)paren
)paren
suffix:semicolon
multiline_comment|/* Changed to hpux_ustat */
id|tmp.f_tfree
op_assign
(paren
r_int32
)paren
id|sbuf.f_bfree
suffix:semicolon
id|tmp.f_tinode
op_assign
(paren
id|u_int32_t
)paren
id|sbuf.f_ffree
suffix:semicolon
id|tmp.f_blksize
op_assign
(paren
id|u_int32_t
)paren
id|sbuf.f_bsize
suffix:semicolon
multiline_comment|/*  Added this line  */
multiline_comment|/* Changed to hpux_ustat:  */
id|err
op_assign
id|copy_to_user
c_func
(paren
id|ubuf
comma
op_amp
id|tmp
comma
r_sizeof
(paren
r_struct
id|hpux_ustat
)paren
)paren
ques
c_cond
op_minus
id|EFAULT
suffix:colon
l_int|0
suffix:semicolon
id|out
suffix:colon
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/*&n; * Wrapper for hpux statfs call. At the moment, just calls the linux native one&n; * and ignores the extra fields at the end of the hpux statfs struct.&n; *&n; */
DECL|typedef|hpux_fsid_t
r_typedef
r_int32
id|hpux_fsid_t
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* file system ID type */
DECL|typedef|hpux_site_t
r_typedef
r_uint16
id|hpux_site_t
suffix:semicolon
DECL|struct|hpux_statfs
r_struct
id|hpux_statfs
(brace
DECL|member|f_type
r_int32
id|f_type
suffix:semicolon
multiline_comment|/* type of info, zero for now */
DECL|member|f_bsize
r_int32
id|f_bsize
suffix:semicolon
multiline_comment|/* fundamental file system block size */
DECL|member|f_blocks
r_int32
id|f_blocks
suffix:semicolon
multiline_comment|/* total blocks in file system */
DECL|member|f_bfree
r_int32
id|f_bfree
suffix:semicolon
multiline_comment|/* free block in fs */
DECL|member|f_bavail
r_int32
id|f_bavail
suffix:semicolon
multiline_comment|/* free blocks avail to non-superuser */
DECL|member|f_files
r_int32
id|f_files
suffix:semicolon
multiline_comment|/* total file nodes in file system */
DECL|member|f_ffree
r_int32
id|f_ffree
suffix:semicolon
multiline_comment|/* free file nodes in fs */
DECL|member|f_fsid
id|hpux_fsid_t
id|f_fsid
suffix:semicolon
multiline_comment|/* file system ID */
DECL|member|f_magic
r_int32
id|f_magic
suffix:semicolon
multiline_comment|/* file system magic number */
DECL|member|f_featurebits
r_int32
id|f_featurebits
suffix:semicolon
multiline_comment|/* file system features */
DECL|member|f_spare
r_int32
id|f_spare
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* spare for later */
DECL|member|f_cnode
id|hpux_site_t
id|f_cnode
suffix:semicolon
multiline_comment|/* cluster node where mounted */
DECL|member|f_pad
r_int16
id|f_pad
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* hpux statfs */
DECL|function|hpux_statfs
r_int
id|hpux_statfs
c_func
(paren
r_const
r_char
op_star
id|path
comma
r_struct
id|hpux_statfs
op_star
id|buf
)paren
(brace
r_int
id|error
suffix:semicolon
r_int
id|len
suffix:semicolon
r_char
op_star
id|kpath
suffix:semicolon
id|len
op_assign
id|strlen_user
c_func
(paren
(paren
r_char
op_star
)paren
id|path
)paren
suffix:semicolon
id|kpath
op_assign
(paren
r_char
op_star
)paren
id|kmalloc
c_func
(paren
id|len
op_plus
l_int|1
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|kpath
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;failed to kmalloc kpath&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|kpath
comma
(paren
r_char
op_star
)paren
id|path
comma
id|len
op_plus
l_int|1
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;failed to copy_from_user kpath&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|kpath
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;hpux_statfs(&bslash;&quot;%s&bslash;&quot;,-)&bslash;n&quot;
comma
id|kpath
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|kpath
)paren
suffix:semicolon
multiline_comment|/* just fake it, beginning of structures match */
id|error
op_assign
id|sys_statfs
c_func
(paren
id|path
comma
(paren
r_struct
id|statfs
op_star
)paren
id|buf
)paren
suffix:semicolon
multiline_comment|/* ignoring rest of statfs struct, but it should be zeros. Need to do &n;&t;&t;something with f_fsid[1], which is the fstype for sysfs */
r_return
id|error
suffix:semicolon
)brace
multiline_comment|/*  This function is called from hpux_utssys(); HP-UX implements&n; *  uname() as an option to utssys().&n; *&n; *  The form of this function is pretty much copied from sys_olduname(),&n; *  defined in linux/arch/i386/kernel/sys_i386.c.&n; */
multiline_comment|/*  TODO: Are these put_user calls OK?  Should they pass an int?&n; *        (I copied it from sys_i386.c like this.)&n; */
DECL|function|hpux_uname
r_static
r_int
id|hpux_uname
c_func
(paren
r_struct
id|hpux_utsname
op_star
id|name
)paren
(brace
r_int
id|error
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|name
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|access_ok
c_func
(paren
id|VERIFY_WRITE
comma
id|name
comma
r_sizeof
(paren
r_struct
id|hpux_utsname
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
id|error
op_assign
id|__copy_to_user
c_func
(paren
op_amp
id|name-&gt;sysname
comma
op_amp
id|system_utsname.sysname
comma
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;sysname
op_plus
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__copy_to_user
c_func
(paren
op_amp
id|name-&gt;nodename
comma
op_amp
id|system_utsname.nodename
comma
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;nodename
op_plus
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__copy_to_user
c_func
(paren
op_amp
id|name-&gt;release
comma
op_amp
id|system_utsname.release
comma
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;release
op_plus
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__copy_to_user
c_func
(paren
op_amp
id|name-&gt;version
comma
op_amp
id|system_utsname.version
comma
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;version
op_plus
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__copy_to_user
c_func
(paren
op_amp
id|name-&gt;machine
comma
op_amp
id|system_utsname.machine
comma
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;machine
op_plus
id|HPUX_UTSLEN
op_minus
l_int|1
)paren
suffix:semicolon
id|up_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
multiline_comment|/*  HP-UX  utsname has no domainname field.  */
multiline_comment|/*  TODO:  Implement idnumber!!!  */
macro_line|#if 0
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;idnumber
)paren
suffix:semicolon
id|error
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
id|name-&gt;idnumber
op_plus
id|HPUX_SNLEN
op_minus
l_int|1
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
id|error
ques
c_cond
op_minus
id|EFAULT
suffix:colon
l_int|0
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
multiline_comment|/*  Note: HP-UX just uses the old suser() function to check perms&n; *  in this system call.  We&squot;ll use capable(CAP_SYS_ADMIN).&n; */
DECL|function|hpux_utssys
r_int
id|hpux_utssys
c_func
(paren
r_char
op_star
id|ubuf
comma
r_int
id|n
comma
r_int
id|type
)paren
(brace
r_int
id|len
suffix:semicolon
r_int
id|error
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/*  uname():  */
r_return
id|hpux_uname
c_func
(paren
(paren
r_struct
id|hpux_utsname
op_star
)paren
id|ubuf
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
multiline_comment|/*  Obsolete (used to be umask().)  */
r_return
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/*  ustat():  */
r_return
id|hpux_ustat
c_func
(paren
id|new_decode_dev
c_func
(paren
id|n
)paren
comma
(paren
r_struct
id|hpux_ustat
op_star
)paren
id|ubuf
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/*  setuname():&n;&t;&t; *&n;&t;&t; *  On linux (unlike HP-UX), utsname.nodename&n;&t;&t; *  is the same as the hostname.&n;&t;&t; *&n;&t;&t; *  sys_sethostname() is defined in linux/kernel/sys.c.&n;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX returns an error if n==0:  */
r_if
c_cond
(paren
id|n
op_le
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX truncates it if n is too big:  */
id|len
op_assign
(paren
id|n
op_le
id|__NEW_UTS_LEN
)paren
ques
c_cond
id|n
suffix:colon
id|__NEW_UTS_LEN
suffix:semicolon
r_return
id|sys_sethostname
c_func
(paren
id|ubuf
comma
id|len
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
multiline_comment|/*  sethostname():&n;&t;&t; *&n;&t;&t; *  sys_sethostname() is defined in linux/kernel/sys.c.&n;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX returns an error if n==0:  */
r_if
c_cond
(paren
id|n
op_le
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX truncates it if n is too big:  */
id|len
op_assign
(paren
id|n
op_le
id|__NEW_UTS_LEN
)paren
ques
c_cond
id|n
suffix:colon
id|__NEW_UTS_LEN
suffix:semicolon
r_return
id|sys_sethostname
c_func
(paren
id|ubuf
comma
id|len
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
multiline_comment|/*  gethostname():&n;&t;&t; *&n;&t;&t; *  sys_gethostname() is defined in linux/kernel/sys.c.&n;&t;&t; */
multiline_comment|/*  Unlike Linux, HP-UX returns an error if n==0:  */
r_if
c_cond
(paren
id|n
op_le
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_return
id|sys_gethostname
c_func
(paren
id|ubuf
comma
id|n
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
multiline_comment|/*  Supposedly called from setuname() in libc.&n;&t;&t; *  TODO: When and why is this called?&n;&t;&t; *        Is it ever even called?&n;&t;&t; *&n;&t;&t; *  This code should look a lot like sys_sethostname(),&n;&t;&t; *  defined in linux/kernel/sys.c.  If that gets updated,&n;&t;&t; *  update this code similarly.&n;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX returns an error if n==0:  */
r_if
c_cond
(paren
id|n
op_le
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX truncates it if n is too big:  */
id|len
op_assign
(paren
id|n
op_le
id|__NEW_UTS_LEN
)paren
ques
c_cond
id|n
suffix:colon
id|__NEW_UTS_LEN
suffix:semicolon
multiline_comment|/**/
multiline_comment|/*  TODO:  print a warning about using this?  */
id|down_write
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|copy_from_user
c_func
(paren
id|system_utsname.sysname
comma
id|ubuf
comma
id|len
)paren
)paren
(brace
id|system_utsname.sysname
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
)brace
id|up_write
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
multiline_comment|/*  Sets utsname.release, if you&squot;re allowed.&n;&t;&t; *  Undocumented.  Used by swinstall to change the&n;&t;&t; *  OS version, during OS updates.  Yuck!!!&n;&t;&t; *&n;&t;&t; *  This code should look a lot like sys_sethostname()&n;&t;&t; *  in linux/kernel/sys.c.  If that gets updated, update&n;&t;&t; *  this code similarly.&n;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX returns an error if n==0:  */
r_if
c_cond
(paren
id|n
op_le
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/*  Unlike Linux, HP-UX truncates it if n is too big:  */
id|len
op_assign
(paren
id|n
op_le
id|__NEW_UTS_LEN
)paren
ques
c_cond
id|n
suffix:colon
id|__NEW_UTS_LEN
suffix:semicolon
multiline_comment|/**/
multiline_comment|/*  TODO:  print a warning about this?  */
id|down_write
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|copy_from_user
c_func
(paren
id|system_utsname.release
comma
id|ubuf
comma
id|len
)paren
)paren
(brace
id|system_utsname.release
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
)brace
id|up_write
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/*  This system call returns -EFAULT if given an unknown type.&n;&t; &t; *  Why not -EINVAL?  I don&squot;t know, it&squot;s just not what they did.&n;&t; &t; */
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
)brace
DECL|function|hpux_getdomainname
r_int
id|hpux_getdomainname
c_func
(paren
r_char
op_star
id|name
comma
r_int
id|len
)paren
(brace
r_int
id|nlen
suffix:semicolon
r_int
id|err
op_assign
op_minus
id|EFAULT
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
id|nlen
op_assign
id|strlen
c_func
(paren
id|system_utsname.domainname
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|nlen
OL
id|len
)paren
id|len
op_assign
id|nlen
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
id|__NEW_UTS_LEN
)paren
(brace
r_goto
id|done
suffix:semicolon
)brace
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|name
comma
id|system_utsname.domainname
comma
id|len
)paren
)paren
(brace
r_goto
id|done
suffix:semicolon
)brace
id|err
op_assign
l_int|0
suffix:semicolon
id|done
suffix:colon
id|up_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hpux_pipe
r_int
id|hpux_pipe
c_func
(paren
r_int
op_star
id|kstack_fildes
)paren
(brace
r_int
id|error
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|error
op_assign
id|do_pipe
c_func
(paren
id|kstack_fildes
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
multiline_comment|/* lies - says it works, but it really didn&squot;t lock anything */
DECL|function|hpux_lockf
r_int
id|hpux_lockf
c_func
(paren
r_int
id|fildes
comma
r_int
id|function
comma
id|off_t
id|size
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|hpux_sysfs
r_int
id|hpux_sysfs
c_func
(paren
r_int
id|opcode
comma
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
)paren
(brace
r_char
op_star
id|fsname
op_assign
l_int|NULL
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_int
id|fstype
suffix:semicolon
multiline_comment|/*Unimplemented HP-UX syscall emulation. Syscall #334 (sysfs)&n;  Args: 1 80057bf4 0 400179f0 0 0 0 */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;in hpux_sysfs&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;hpux_sysfs called with opcode = %d&bslash;n&quot;
comma
id|opcode
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;hpux_sysfs called with arg1=&squot;%lx&squot;&bslash;n&quot;
comma
id|arg1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|opcode
op_eq
l_int|1
)paren
(brace
multiline_comment|/* GETFSIND */
id|len
op_assign
id|strlen_user
c_func
(paren
(paren
r_char
op_star
)paren
id|arg1
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;len of arg1 = %d&bslash;n&quot;
comma
id|len
)paren
suffix:semicolon
id|fsname
op_assign
(paren
r_char
op_star
)paren
id|kmalloc
c_func
(paren
id|len
op_plus
l_int|1
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|fsname
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;failed to kmalloc fsname&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|fsname
comma
(paren
r_char
op_star
)paren
id|arg1
comma
id|len
op_plus
l_int|1
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;failed to copy_from_user fsname&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|fsname
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;that is &squot;%s&squot; as (char *)&bslash;n&quot;
comma
id|fsname
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|fsname
comma
l_string|&quot;hfs&quot;
)paren
)paren
(brace
id|fstype
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|fstype
op_assign
l_int|0
suffix:semicolon
)brace
suffix:semicolon
id|kfree
c_func
(paren
id|fsname
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;returning fstype=%d&bslash;n&quot;
comma
id|fstype
)paren
suffix:semicolon
r_return
id|fstype
suffix:semicolon
multiline_comment|/* something other than default */
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Table of syscall names and handle for unimplemented routines */
DECL|variable|syscall_names
r_static
r_const
r_char
op_star
id|syscall_names
(braket
)braket
op_assign
(brace
l_string|&quot;nosys&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;exit&quot;
comma
l_string|&quot;fork&quot;
comma
l_string|&quot;read&quot;
comma
l_string|&quot;write&quot;
comma
l_string|&quot;open&quot;
comma
multiline_comment|/* 5 */
l_string|&quot;close&quot;
comma
l_string|&quot;wait&quot;
comma
l_string|&quot;creat&quot;
comma
l_string|&quot;link&quot;
comma
l_string|&quot;unlink&quot;
comma
multiline_comment|/* 10 */
l_string|&quot;execv&quot;
comma
l_string|&quot;chdir&quot;
comma
l_string|&quot;time&quot;
comma
l_string|&quot;mknod&quot;
comma
l_string|&quot;chmod&quot;
comma
multiline_comment|/* 15 */
l_string|&quot;chown&quot;
comma
l_string|&quot;brk&quot;
comma
l_string|&quot;lchmod&quot;
comma
l_string|&quot;lseek&quot;
comma
l_string|&quot;getpid&quot;
comma
multiline_comment|/* 20 */
l_string|&quot;mount&quot;
comma
l_string|&quot;umount&quot;
comma
l_string|&quot;setuid&quot;
comma
l_string|&quot;getuid&quot;
comma
l_string|&quot;stime&quot;
comma
multiline_comment|/* 25 */
l_string|&quot;ptrace&quot;
comma
l_string|&quot;alarm&quot;
comma
l_int|NULL
comma
l_string|&quot;pause&quot;
comma
l_string|&quot;utime&quot;
comma
multiline_comment|/* 30 */
l_string|&quot;stty&quot;
comma
l_string|&quot;gtty&quot;
comma
l_string|&quot;access&quot;
comma
l_string|&quot;nice&quot;
comma
l_string|&quot;ftime&quot;
comma
multiline_comment|/* 35 */
l_string|&quot;sync&quot;
comma
l_string|&quot;kill&quot;
comma
l_string|&quot;stat&quot;
comma
l_string|&quot;setpgrp3&quot;
comma
l_string|&quot;lstat&quot;
comma
multiline_comment|/* 40 */
l_string|&quot;dup&quot;
comma
l_string|&quot;pipe&quot;
comma
l_string|&quot;times&quot;
comma
l_string|&quot;profil&quot;
comma
l_string|&quot;ki_call&quot;
comma
multiline_comment|/* 45 */
l_string|&quot;setgid&quot;
comma
l_string|&quot;getgid&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 50 */
l_string|&quot;acct&quot;
comma
l_string|&quot;set_userthreadid&quot;
comma
l_int|NULL
comma
l_string|&quot;ioctl&quot;
comma
l_string|&quot;reboot&quot;
comma
multiline_comment|/* 55 */
l_string|&quot;symlink&quot;
comma
l_string|&quot;utssys&quot;
comma
l_string|&quot;readlink&quot;
comma
l_string|&quot;execve&quot;
comma
l_string|&quot;umask&quot;
comma
multiline_comment|/* 60 */
l_string|&quot;chroot&quot;
comma
l_string|&quot;fcntl&quot;
comma
l_string|&quot;ulimit&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 65 */
l_string|&quot;vfork&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 70 */
l_string|&quot;mmap&quot;
comma
l_int|NULL
comma
l_string|&quot;munmap&quot;
comma
l_string|&quot;mprotect&quot;
comma
l_string|&quot;madvise&quot;
comma
multiline_comment|/* 75 */
l_string|&quot;vhangup&quot;
comma
l_string|&quot;swapoff&quot;
comma
l_int|NULL
comma
l_string|&quot;getgroups&quot;
comma
l_string|&quot;setgroups&quot;
comma
multiline_comment|/* 80 */
l_string|&quot;getpgrp2&quot;
comma
l_string|&quot;setpgid/setpgrp2&quot;
comma
l_string|&quot;setitimer&quot;
comma
l_string|&quot;wait3&quot;
comma
l_string|&quot;swapon&quot;
comma
multiline_comment|/* 85 */
l_string|&quot;getitimer&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;dup2&quot;
comma
multiline_comment|/* 90 */
l_int|NULL
comma
l_string|&quot;fstat&quot;
comma
l_string|&quot;select&quot;
comma
l_int|NULL
comma
l_string|&quot;fsync&quot;
comma
multiline_comment|/* 95 */
l_string|&quot;setpriority&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;getpriority&quot;
comma
multiline_comment|/* 100 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 105 */
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;sigvector&quot;
comma
l_string|&quot;sigblock&quot;
comma
l_string|&quot;sigsetmask&quot;
comma
multiline_comment|/* 110 */
l_string|&quot;sigpause&quot;
comma
l_string|&quot;sigstack&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 115 */
l_string|&quot;gettimeofday&quot;
comma
l_string|&quot;getrusage&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;readv&quot;
comma
multiline_comment|/* 120 */
l_string|&quot;writev&quot;
comma
l_string|&quot;settimeofday&quot;
comma
l_string|&quot;fchown&quot;
comma
l_string|&quot;fchmod&quot;
comma
l_int|NULL
comma
multiline_comment|/* 125 */
l_string|&quot;setresuid&quot;
comma
l_string|&quot;setresgid&quot;
comma
l_string|&quot;rename&quot;
comma
l_string|&quot;truncate&quot;
comma
l_string|&quot;ftruncate&quot;
comma
multiline_comment|/* 130 */
l_int|NULL
comma
l_string|&quot;sysconf&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 135 */
l_string|&quot;mkdir&quot;
comma
l_string|&quot;rmdir&quot;
comma
l_int|NULL
comma
l_string|&quot;sigcleanup&quot;
comma
l_string|&quot;setcore&quot;
comma
multiline_comment|/* 140 */
l_int|NULL
comma
l_string|&quot;gethostid&quot;
comma
l_string|&quot;sethostid&quot;
comma
l_string|&quot;getrlimit&quot;
comma
l_string|&quot;setrlimit&quot;
comma
multiline_comment|/* 145 */
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;quotactl&quot;
comma
l_string|&quot;get_sysinfo&quot;
comma
l_int|NULL
comma
multiline_comment|/* 150 */
l_string|&quot;privgrp&quot;
comma
l_string|&quot;rtprio&quot;
comma
l_string|&quot;plock&quot;
comma
l_int|NULL
comma
l_string|&quot;lockf&quot;
comma
multiline_comment|/* 155 */
l_string|&quot;semget&quot;
comma
l_int|NULL
comma
l_string|&quot;semop&quot;
comma
l_string|&quot;msgget&quot;
comma
l_int|NULL
comma
multiline_comment|/* 160 */
l_string|&quot;msgsnd&quot;
comma
l_string|&quot;msgrcv&quot;
comma
l_string|&quot;shmget&quot;
comma
l_int|NULL
comma
l_string|&quot;shmat&quot;
comma
multiline_comment|/* 165 */
l_string|&quot;shmdt&quot;
comma
l_int|NULL
comma
l_string|&quot;csp/nsp_init&quot;
comma
l_string|&quot;cluster&quot;
comma
l_string|&quot;mkrnod&quot;
comma
multiline_comment|/* 170 */
l_string|&quot;test&quot;
comma
l_string|&quot;unsp_open&quot;
comma
l_int|NULL
comma
l_string|&quot;getcontext&quot;
comma
l_string|&quot;osetcontext&quot;
comma
multiline_comment|/* 175 */
l_string|&quot;bigio&quot;
comma
l_string|&quot;pipenode&quot;
comma
l_string|&quot;lsync&quot;
comma
l_string|&quot;getmachineid&quot;
comma
l_string|&quot;cnodeid/mysite&quot;
comma
multiline_comment|/* 180 */
l_string|&quot;cnodes/sitels&quot;
comma
l_string|&quot;swapclients&quot;
comma
l_string|&quot;rmtprocess&quot;
comma
l_string|&quot;dskless_stats&quot;
comma
l_string|&quot;sigprocmask&quot;
comma
multiline_comment|/* 185 */
l_string|&quot;sigpending&quot;
comma
l_string|&quot;sigsuspend&quot;
comma
l_string|&quot;sigaction&quot;
comma
l_int|NULL
comma
l_string|&quot;nfssvc&quot;
comma
multiline_comment|/* 190 */
l_string|&quot;getfh&quot;
comma
l_string|&quot;getdomainname&quot;
comma
l_string|&quot;setdomainname&quot;
comma
l_string|&quot;async_daemon&quot;
comma
l_string|&quot;getdirentries&quot;
comma
multiline_comment|/* 195 */
l_string|&quot;statfs&quot;
comma
l_string|&quot;fstatfs&quot;
comma
l_string|&quot;vfsmount&quot;
comma
l_int|NULL
comma
l_string|&quot;waitpid&quot;
comma
multiline_comment|/* 200 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 205 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 210 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 215 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 220 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;sigsetreturn&quot;
comma
l_string|&quot;sigsetstatemask&quot;
comma
multiline_comment|/* 225 */
l_string|&quot;bfactl&quot;
comma
l_string|&quot;cs&quot;
comma
l_string|&quot;cds&quot;
comma
l_int|NULL
comma
l_string|&quot;pathconf&quot;
comma
multiline_comment|/* 230 */
l_string|&quot;fpathconf&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;nfs_fcntl&quot;
comma
l_string|&quot;ogetacl&quot;
comma
multiline_comment|/* 235 */
l_string|&quot;ofgetacl&quot;
comma
l_string|&quot;osetacl&quot;
comma
l_string|&quot;ofsetacl&quot;
comma
l_string|&quot;pstat&quot;
comma
l_string|&quot;getaudid&quot;
comma
multiline_comment|/* 240 */
l_string|&quot;setaudid&quot;
comma
l_string|&quot;getaudproc&quot;
comma
l_string|&quot;setaudproc&quot;
comma
l_string|&quot;getevent&quot;
comma
l_string|&quot;setevent&quot;
comma
multiline_comment|/* 245 */
l_string|&quot;audwrite&quot;
comma
l_string|&quot;audswitch&quot;
comma
l_string|&quot;audctl&quot;
comma
l_string|&quot;ogetaccess&quot;
comma
l_string|&quot;fsctl&quot;
comma
multiline_comment|/* 250 */
l_string|&quot;ulconnect&quot;
comma
l_string|&quot;ulcontrol&quot;
comma
l_string|&quot;ulcreate&quot;
comma
l_string|&quot;uldest&quot;
comma
l_string|&quot;ulrecv&quot;
comma
multiline_comment|/* 255 */
l_string|&quot;ulrecvcn&quot;
comma
l_string|&quot;ulsend&quot;
comma
l_string|&quot;ulshutdown&quot;
comma
l_string|&quot;swapfs&quot;
comma
l_string|&quot;fss&quot;
comma
multiline_comment|/* 260 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 265 */
l_int|NULL
comma
l_string|&quot;tsync&quot;
comma
l_string|&quot;getnumfds&quot;
comma
l_string|&quot;poll&quot;
comma
l_string|&quot;getmsg&quot;
comma
multiline_comment|/* 270 */
l_string|&quot;putmsg&quot;
comma
l_string|&quot;fchdir&quot;
comma
l_string|&quot;getmount_cnt&quot;
comma
l_string|&quot;getmount_entry&quot;
comma
l_string|&quot;accept&quot;
comma
multiline_comment|/* 275 */
l_string|&quot;bind&quot;
comma
l_string|&quot;connect&quot;
comma
l_string|&quot;getpeername&quot;
comma
l_string|&quot;getsockname&quot;
comma
l_string|&quot;getsockopt&quot;
comma
multiline_comment|/* 280 */
l_string|&quot;listen&quot;
comma
l_string|&quot;recv&quot;
comma
l_string|&quot;recvfrom&quot;
comma
l_string|&quot;recvmsg&quot;
comma
l_string|&quot;send&quot;
comma
multiline_comment|/* 285 */
l_string|&quot;sendmsg&quot;
comma
l_string|&quot;sendto&quot;
comma
l_string|&quot;setsockopt&quot;
comma
l_string|&quot;shutdown&quot;
comma
l_string|&quot;socket&quot;
comma
multiline_comment|/* 290 */
l_string|&quot;socketpair&quot;
comma
l_string|&quot;proc_open&quot;
comma
l_string|&quot;proc_close&quot;
comma
l_string|&quot;proc_send&quot;
comma
l_string|&quot;proc_recv&quot;
comma
multiline_comment|/* 295 */
l_string|&quot;proc_sendrecv&quot;
comma
l_string|&quot;proc_syscall&quot;
comma
l_string|&quot;ipccreate&quot;
comma
l_string|&quot;ipcname&quot;
comma
l_string|&quot;ipcnamerase&quot;
comma
multiline_comment|/* 300 */
l_string|&quot;ipclookup&quot;
comma
l_string|&quot;ipcselect&quot;
comma
l_string|&quot;ipcconnect&quot;
comma
l_string|&quot;ipcrecvcn&quot;
comma
l_string|&quot;ipcsend&quot;
comma
multiline_comment|/* 305 */
l_string|&quot;ipcrecv&quot;
comma
l_string|&quot;ipcgetnodename&quot;
comma
l_string|&quot;ipcsetnodename&quot;
comma
l_string|&quot;ipccontrol&quot;
comma
l_string|&quot;ipcshutdown&quot;
comma
multiline_comment|/* 310 */
l_string|&quot;ipcdest&quot;
comma
l_string|&quot;semctl&quot;
comma
l_string|&quot;msgctl&quot;
comma
l_string|&quot;shmctl&quot;
comma
l_string|&quot;mpctl&quot;
comma
multiline_comment|/* 315 */
l_string|&quot;exportfs&quot;
comma
l_string|&quot;getpmsg&quot;
comma
l_string|&quot;putpmsg&quot;
comma
l_string|&quot;strioctl&quot;
comma
l_string|&quot;msync&quot;
comma
multiline_comment|/* 320 */
l_string|&quot;msleep&quot;
comma
l_string|&quot;mwakeup&quot;
comma
l_string|&quot;msem_init&quot;
comma
l_string|&quot;msem_remove&quot;
comma
l_string|&quot;adjtime&quot;
comma
multiline_comment|/* 325 */
l_string|&quot;kload&quot;
comma
l_string|&quot;fattach&quot;
comma
l_string|&quot;fdetach&quot;
comma
l_string|&quot;serialize&quot;
comma
l_string|&quot;statvfs&quot;
comma
multiline_comment|/* 330 */
l_string|&quot;fstatvfs&quot;
comma
l_string|&quot;lchown&quot;
comma
l_string|&quot;getsid&quot;
comma
l_string|&quot;sysfs&quot;
comma
l_int|NULL
comma
multiline_comment|/* 335 */
l_int|NULL
comma
l_string|&quot;sched_setparam&quot;
comma
l_string|&quot;sched_getparam&quot;
comma
l_string|&quot;sched_setscheduler&quot;
comma
l_string|&quot;sched_getscheduler&quot;
comma
multiline_comment|/* 340 */
l_string|&quot;sched_yield&quot;
comma
l_string|&quot;sched_get_priority_max&quot;
comma
l_string|&quot;sched_get_priority_min&quot;
comma
l_string|&quot;sched_rr_get_interval&quot;
comma
l_string|&quot;clock_settime&quot;
comma
multiline_comment|/* 345 */
l_string|&quot;clock_gettime&quot;
comma
l_string|&quot;clock_getres&quot;
comma
l_string|&quot;timer_create&quot;
comma
l_string|&quot;timer_delete&quot;
comma
l_string|&quot;timer_settime&quot;
comma
multiline_comment|/* 350 */
l_string|&quot;timer_gettime&quot;
comma
l_string|&quot;timer_getoverrun&quot;
comma
l_string|&quot;nanosleep&quot;
comma
l_string|&quot;toolbox&quot;
comma
l_int|NULL
comma
multiline_comment|/* 355 */
l_string|&quot;getdents&quot;
comma
l_string|&quot;getcontext&quot;
comma
l_string|&quot;sysinfo&quot;
comma
l_string|&quot;fcntl64&quot;
comma
l_string|&quot;ftruncate64&quot;
comma
multiline_comment|/* 360 */
l_string|&quot;fstat64&quot;
comma
l_string|&quot;getdirentries64&quot;
comma
l_string|&quot;getrlimit64&quot;
comma
l_string|&quot;lockf64&quot;
comma
l_string|&quot;lseek64&quot;
comma
multiline_comment|/* 365 */
l_string|&quot;lstat64&quot;
comma
l_string|&quot;mmap64&quot;
comma
l_string|&quot;setrlimit64&quot;
comma
l_string|&quot;stat64&quot;
comma
l_string|&quot;truncate64&quot;
comma
multiline_comment|/* 370 */
l_string|&quot;ulimit64&quot;
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* 375 */
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_string|&quot;setcontext&quot;
comma
multiline_comment|/* 380 */
l_string|&quot;sigaltstack&quot;
comma
l_string|&quot;waitid&quot;
comma
l_string|&quot;setpgrp&quot;
comma
l_string|&quot;recvmsg2&quot;
comma
l_string|&quot;sendmsg2&quot;
comma
multiline_comment|/* 385 */
l_string|&quot;socket2&quot;
comma
l_string|&quot;socketpair2&quot;
comma
l_string|&quot;setregid&quot;
comma
l_string|&quot;lwp_create&quot;
comma
l_string|&quot;lwp_terminate&quot;
comma
multiline_comment|/* 390 */
l_string|&quot;lwp_wait&quot;
comma
l_string|&quot;lwp_suspend&quot;
comma
l_string|&quot;lwp_resume&quot;
comma
l_string|&quot;lwp_self&quot;
comma
l_string|&quot;lwp_abort_syscall&quot;
comma
multiline_comment|/* 395 */
l_string|&quot;lwp_info&quot;
comma
l_string|&quot;lwp_kill&quot;
comma
l_string|&quot;ksleep&quot;
comma
l_string|&quot;kwakeup&quot;
comma
l_string|&quot;ksleep_abort&quot;
comma
multiline_comment|/* 400 */
l_string|&quot;lwp_proc_info&quot;
comma
l_string|&quot;lwp_exit&quot;
comma
l_string|&quot;lwp_continue&quot;
comma
l_string|&quot;getacl&quot;
comma
l_string|&quot;fgetacl&quot;
comma
multiline_comment|/* 405 */
l_string|&quot;setacl&quot;
comma
l_string|&quot;fsetacl&quot;
comma
l_string|&quot;getaccess&quot;
comma
l_string|&quot;lwp_mutex_init&quot;
comma
l_string|&quot;lwp_mutex_lock_sys&quot;
comma
multiline_comment|/* 410 */
l_string|&quot;lwp_mutex_unlock&quot;
comma
l_string|&quot;lwp_cond_init&quot;
comma
l_string|&quot;lwp_cond_signal&quot;
comma
l_string|&quot;lwp_cond_broadcast&quot;
comma
l_string|&quot;lwp_cond_wait_sys&quot;
comma
multiline_comment|/* 415 */
l_string|&quot;lwp_getscheduler&quot;
comma
l_string|&quot;lwp_setscheduler&quot;
comma
l_string|&quot;lwp_getprivate&quot;
comma
l_string|&quot;lwp_setprivate&quot;
comma
l_string|&quot;lwp_detach&quot;
comma
multiline_comment|/* 420 */
l_string|&quot;mlock&quot;
comma
l_string|&quot;munlock&quot;
comma
l_string|&quot;mlockall&quot;
comma
l_string|&quot;munlockall&quot;
comma
l_string|&quot;shm_open&quot;
comma
multiline_comment|/* 425 */
l_string|&quot;shm_unlink&quot;
comma
l_string|&quot;sigqueue&quot;
comma
l_string|&quot;sigwaitinfo&quot;
comma
l_string|&quot;sigtimedwait&quot;
comma
l_string|&quot;sigwait&quot;
comma
multiline_comment|/* 430 */
l_string|&quot;aio_read&quot;
comma
l_string|&quot;aio_write&quot;
comma
l_string|&quot;lio_listio&quot;
comma
l_string|&quot;aio_error&quot;
comma
l_string|&quot;aio_return&quot;
comma
multiline_comment|/* 435 */
l_string|&quot;aio_cancel&quot;
comma
l_string|&quot;aio_suspend&quot;
comma
l_string|&quot;aio_fsync&quot;
comma
l_string|&quot;mq_open&quot;
comma
l_string|&quot;mq_unlink&quot;
comma
multiline_comment|/* 440 */
l_string|&quot;mq_send&quot;
comma
l_string|&quot;mq_receive&quot;
comma
l_string|&quot;mq_notify&quot;
comma
l_string|&quot;mq_setattr&quot;
comma
l_string|&quot;mq_getattr&quot;
comma
multiline_comment|/* 445 */
l_string|&quot;ksem_open&quot;
comma
l_string|&quot;ksem_unlink&quot;
comma
l_string|&quot;ksem_close&quot;
comma
l_string|&quot;ksem_destroy&quot;
comma
l_string|&quot;lw_sem_incr&quot;
comma
multiline_comment|/* 450 */
l_string|&quot;lw_sem_decr&quot;
comma
l_string|&quot;lw_sem_read&quot;
comma
l_string|&quot;mq_close&quot;
comma
)brace
suffix:semicolon
DECL|variable|syscall_names_max
r_static
r_const
r_int
id|syscall_names_max
op_assign
l_int|453
suffix:semicolon
r_int
DECL|function|hpux_unimplemented
id|hpux_unimplemented
c_func
(paren
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
comma
r_int
r_int
id|arg3
comma
r_int
r_int
id|arg4
comma
r_int
r_int
id|arg5
comma
r_int
r_int
id|arg6
comma
r_int
r_int
id|arg7
comma
r_int
r_int
id|sc_num
)paren
(brace
multiline_comment|/* NOTE: sc_num trashes arg8 for the few syscalls that actually&n;&t; * have a valid 8th argument.&n;&t; */
r_const
r_char
op_star
id|name
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|sc_num
op_le
id|syscall_names_max
op_logical_and
id|sc_num
op_ge
l_int|0
)paren
(brace
id|name
op_assign
id|syscall_names
(braket
id|sc_num
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|name
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Unimplemented HP-UX syscall emulation. Syscall #%lu (%s)&bslash;n&quot;
comma
id|sc_num
comma
id|name
)paren
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Unimplemented unknown HP-UX syscall emulation. Syscall #%lu&bslash;n&quot;
comma
id|sc_num
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;  Args: %lx %lx %lx %lx %lx %lx %lx&bslash;n&quot;
comma
id|arg1
comma
id|arg2
comma
id|arg3
comma
id|arg4
comma
id|arg5
comma
id|arg6
comma
id|arg7
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
eof
