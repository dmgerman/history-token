multiline_comment|/* $Id$&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 1992 - 1997, 2000 Silicon Graphics, Inc.&n; * Copyright (C) 2000 by Colin Ngam&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/ctype.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;asm/sn/sgi.h&gt;
macro_line|#include &lt;asm/sn/invent.h&gt;
macro_line|#include &lt;asm/sn/hcl.h&gt;
macro_line|#include &lt;asm/sn/labelcl.h&gt;
macro_line|#include &lt;asm/sn/pci/bridge.h&gt;
macro_line|#include &lt;asm/sn/ioerror_handling.h&gt;
macro_line|#include &lt;asm/sn/pci/pciio.h&gt;
macro_line|#include &lt;asm/sn/slotnum.h&gt;
DECL|macro|spinlock_init
mdefine_line|#define spinlock_init(x,name) mutex_init(x, MUTEX_DEFAULT, name);
r_void
op_star
DECL|function|kmem_zalloc
id|kmem_zalloc
c_func
(paren
r_int
id|size
comma
r_int
id|flag
)paren
(brace
r_void
op_star
id|ptr
op_assign
id|kmalloc
c_func
(paren
id|size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|BZERO
c_func
(paren
id|ptr
comma
id|size
)paren
suffix:semicolon
r_return
id|ptr
suffix:semicolon
)brace
DECL|macro|xtod
mdefine_line|#define xtod(c)         ((c) &lt;= &squot;9&squot; ? &squot;0&squot; - (c) : &squot;a&squot; - (c) - 10)
r_int
DECL|function|atoi
id|atoi
c_func
(paren
r_register
r_char
op_star
id|p
)paren
(brace
r_register
r_int
id|n
suffix:semicolon
r_register
r_int
id|c
comma
id|neg
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|p
op_eq
l_int|NULL
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|isdigit
c_func
(paren
id|c
op_assign
op_star
id|p
)paren
)paren
(brace
r_while
c_loop
(paren
id|isspace
c_func
(paren
id|c
)paren
)paren
id|c
op_assign
op_star
op_increment
id|p
suffix:semicolon
r_switch
c_cond
(paren
id|c
)paren
(brace
r_case
l_char|&squot;-&squot;
suffix:colon
id|neg
op_increment
suffix:semicolon
r_case
l_char|&squot;+&squot;
suffix:colon
multiline_comment|/* fall-through */
id|c
op_assign
op_star
op_increment
id|p
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|isdigit
c_func
(paren
id|c
)paren
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
l_char|&squot;0&squot;
op_logical_and
op_star
(paren
id|p
op_plus
l_int|1
)paren
op_eq
l_char|&squot;x&squot;
)paren
(brace
id|p
op_add_assign
l_int|2
suffix:semicolon
id|c
op_assign
op_star
id|p
suffix:semicolon
id|n
op_assign
id|xtod
c_func
(paren
id|c
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|c
op_assign
op_star
op_increment
id|p
)paren
op_logical_and
id|isxdigit
c_func
(paren
id|c
)paren
)paren
(brace
id|n
op_mul_assign
l_int|16
suffix:semicolon
multiline_comment|/* two steps to avoid unnecessary overflow */
id|n
op_add_assign
id|xtod
c_func
(paren
id|c
)paren
suffix:semicolon
multiline_comment|/* accum neg to avoid surprises at MAX */
)brace
)brace
r_else
(brace
id|n
op_assign
l_char|&squot;0&squot;
op_minus
id|c
suffix:semicolon
r_while
c_loop
(paren
(paren
id|c
op_assign
op_star
op_increment
id|p
)paren
op_logical_and
id|isdigit
c_func
(paren
id|c
)paren
)paren
(brace
id|n
op_mul_assign
l_int|10
suffix:semicolon
multiline_comment|/* two steps to avoid unnecessary overflow */
id|n
op_add_assign
l_char|&squot;0&squot;
op_minus
id|c
suffix:semicolon
multiline_comment|/* accum neg to avoid surprises at MAX */
)brace
)brace
r_return
(paren
id|neg
ques
c_cond
id|n
suffix:colon
op_minus
id|n
)paren
suffix:semicolon
)brace
eof
