multiline_comment|/* $Id$&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 1992-1997,2000-2003 Silicon Graphics, Inc. All rights reserved.&n; */
multiline_comment|/*&n; * Hardware Inventory&n; *&n; * See sys/sn/invent.h for an explanation of the hardware inventory contents.&n; *&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;asm/sn/sgi.h&gt;
macro_line|#include &lt;asm/sn/invent.h&gt;
macro_line|#include &lt;asm/sn/hcl.h&gt;
macro_line|#include &lt;asm/sn/labelcl.h&gt;
r_void
DECL|function|inventinit
id|inventinit
c_func
(paren
r_void
)paren
(brace
)brace
multiline_comment|/*&n; * For initializing/updating an inventory entry.&n; */
r_void
DECL|function|replace_in_inventory
id|replace_in_inventory
c_func
(paren
id|inventory_t
op_star
id|pinv
comma
r_int
r_class
comma
r_int
id|type
comma
r_int
id|controller
comma
r_int
id|unit
comma
r_int
id|state
)paren
(brace
)brace
multiline_comment|/*&n; * Inventory addition &n; *&n; * XXX NOTE: Currently must be called after dynamic memory allocator is&n; * initialized.&n; *&n; */
r_void
DECL|function|add_to_inventory
id|add_to_inventory
c_func
(paren
r_int
r_class
comma
r_int
id|type
comma
r_int
id|controller
comma
r_int
id|unit
comma
r_int
id|state
)paren
(brace
)brace
multiline_comment|/*&n; * Inventory retrieval &n; *&n; * These two routines are intended to prevent the caller from having to know&n; * the internal structure of the inventory table.&n; *&n; * The caller of get_next_inventory is supposed to call start_scan_invent&n; * before the irst call to get_next_inventory, and the caller is required&n; * to call end_scan_invent after the last call to get_next_inventory.&n; */
id|inventory_t
op_star
DECL|function|get_next_inventory
id|get_next_inventory
c_func
(paren
id|invplace_t
op_star
id|place
)paren
(brace
r_return
(paren
id|inventory_t
op_star
)paren
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/* ARGSUSED */
r_int
DECL|function|get_sizeof_inventory
id|get_sizeof_inventory
c_func
(paren
r_int
id|abi
)paren
(brace
r_return
r_sizeof
(paren
id|inventory_t
)paren
suffix:semicolon
)brace
multiline_comment|/* Must be called prior to first call to get_next_inventory */
r_void
DECL|function|start_scan_inventory
id|start_scan_inventory
c_func
(paren
id|invplace_t
op_star
id|iplace
)paren
(brace
)brace
multiline_comment|/* Must be called after last call to get_next_inventory */
r_void
DECL|function|end_scan_inventory
id|end_scan_inventory
c_func
(paren
id|invplace_t
op_star
id|iplace
)paren
(brace
)brace
multiline_comment|/*&n; * Hardware inventory scanner.&n; *&n; * Calls fun() for every entry in inventory list unless fun() returns something&n; * other than 0.&n; */
r_int
DECL|function|scaninvent
id|scaninvent
c_func
(paren
r_int
(paren
op_star
id|fun
)paren
(paren
id|inventory_t
op_star
comma
r_void
op_star
)paren
comma
r_void
op_star
id|arg
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Find a particular inventory object&n; *&n; * pinv can be a pointer to an inventory entry and the search will begin from&n; * there, or it can be 0 in which case the search starts at the beginning.&n; * A -1 for any of the other arguments is a wildcard (i.e. it always matches).&n; */
id|inventory_t
op_star
DECL|function|find_inventory
id|find_inventory
c_func
(paren
id|inventory_t
op_star
id|pinv
comma
r_int
r_class
comma
r_int
id|type
comma
r_int
id|controller
comma
r_int
id|unit
comma
r_int
id|state
)paren
(brace
r_return
(paren
id|inventory_t
op_star
)paren
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/*&n;** Retrieve inventory data associated with a device.&n;*/
id|inventory_t
op_star
DECL|function|device_inventory_get_next
id|device_inventory_get_next
c_func
(paren
id|vertex_hdl_t
id|device
comma
id|invplace_t
op_star
id|invplace
)paren
(brace
r_return
(paren
id|inventory_t
op_star
)paren
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/*&n;** Associate canonical inventory information with a device (and&n;** add it to the general inventory).&n;*/
r_void
DECL|function|device_inventory_add
id|device_inventory_add
c_func
(paren
id|vertex_hdl_t
id|device
comma
r_int
r_class
comma
r_int
id|type
comma
id|major_t
id|controller
comma
id|minor_t
id|unit
comma
r_int
id|state
)paren
(brace
)brace
r_int
DECL|function|device_controller_num_get
id|device_controller_num_get
c_func
(paren
id|vertex_hdl_t
id|device
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_void
DECL|function|device_controller_num_set
id|device_controller_num_set
c_func
(paren
id|vertex_hdl_t
id|device
comma
r_int
id|contr_num
)paren
(brace
)brace
eof
