multiline_comment|/*&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 2001-2002 Silicon Graphics, Inc. All rights reserved.&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;asm/sn/sgi.h&gt;
macro_line|#include &lt;asm/sn/sn_cpuid.h&gt;
macro_line|#include &lt;asm/sn/addrs.h&gt;
macro_line|#include &lt;asm/sn/arch.h&gt;
macro_line|#include &lt;asm/sn/iograph.h&gt;
macro_line|#include &lt;asm/sn/invent.h&gt;
macro_line|#include &lt;asm/sn/hcl.h&gt;
macro_line|#include &lt;asm/sn/labelcl.h&gt;
macro_line|#include &lt;asm/sn/xtalk/xwidget.h&gt;
macro_line|#include &lt;asm/sn/pci/bridge.h&gt;
macro_line|#include &lt;asm/sn/pci/pciio.h&gt;
macro_line|#include &lt;asm/sn/pci/pcibr.h&gt;
macro_line|#include &lt;asm/sn/pci/pcibr_private.h&gt;
macro_line|#include &lt;asm/sn/pci/pci_defs.h&gt;
macro_line|#include &lt;asm/sn/prio.h&gt;
macro_line|#include &lt;asm/sn/xtalk/xbow.h&gt;
macro_line|#include &lt;asm/sn/ioc3.h&gt;
macro_line|#include &lt;asm/sn/eeprom.h&gt;
macro_line|#include &lt;asm/sn/io.h&gt;
macro_line|#include &lt;asm/sn/sn_private.h&gt;
macro_line|#ifdef LATER
DECL|variable|pci_space
r_char
op_star
id|pci_space
(braket
)braket
op_assign
(brace
l_string|&quot;NONE&quot;
comma
l_string|&quot;ROM&quot;
comma
l_string|&quot;IO&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;MEM&quot;
comma
l_string|&quot;MEM32&quot;
comma
l_string|&quot;MEM64&quot;
comma
l_string|&quot;CFG&quot;
comma
l_string|&quot;WIN0&quot;
comma
l_string|&quot;WIN1&quot;
comma
l_string|&quot;WIN2&quot;
comma
l_string|&quot;WIN3&quot;
comma
l_string|&quot;WIN4&quot;
comma
l_string|&quot;WIN5&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;BAD&quot;
)brace
suffix:semicolon
r_void
DECL|function|idbg_pss_func
id|idbg_pss_func
c_func
(paren
id|pcibr_info_h
id|pcibr_infoh
comma
r_int
id|func
)paren
(brace
id|pcibr_info_t
id|pcibr_info
op_assign
id|pcibr_infoh
(braket
id|func
)braket
suffix:semicolon
r_char
id|name
(braket
id|MAXDEVNAME
)braket
suffix:semicolon
r_int
id|win
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pcibr_info
)paren
r_return
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;Per-slot Function Info&bslash;n&quot;
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%v&quot;
comma
id|pcibr_info-&gt;f_vertex
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tSlot Name : %s&bslash;n&quot;
comma
id|name
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tPCI Bus : %d &quot;
comma
id|pcibr_info-&gt;f_bus
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;Slot : %d &quot;
comma
id|pcibr_info-&gt;f_slot
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;Function : %d &quot;
comma
id|pcibr_info-&gt;f_func
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;VendorId : 0x%x &quot;
comma
id|pcibr_info-&gt;f_vendor
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;DeviceId : 0x%x&bslash;n&quot;
comma
id|pcibr_info-&gt;f_device
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;%v&quot;
comma
id|pcibr_info-&gt;f_master
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tBus provider : %s&bslash;n&quot;
comma
id|name
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tProvider Fns : 0x%x &quot;
comma
id|pcibr_info-&gt;f_pops
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;Error Handler : 0x%x Arg 0x%x&bslash;n&quot;
comma
id|pcibr_info-&gt;f_efunc
comma
id|pcibr_info-&gt;f_einfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|win
op_assign
l_int|0
suffix:semicolon
id|win
OL
l_int|6
suffix:semicolon
id|win
op_increment
)paren
(brace
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tBase Reg #%d space %s base 0x%x size 0x%x&bslash;n&quot;
comma
id|win
comma
id|pci_space
(braket
id|pcibr_info-&gt;f_window
(braket
id|win
)braket
dot
id|w_space
)braket
comma
id|pcibr_info-&gt;f_window
(braket
id|win
)braket
dot
id|w_base
comma
id|pcibr_info-&gt;f_window
(braket
id|win
)braket
dot
id|w_size
)paren
suffix:semicolon
)brace
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tRom base 0x%x size 0x%x&bslash;n&quot;
comma
id|pcibr_info-&gt;f_rbase
comma
id|pcibr_info-&gt;f_rsize
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tInterrupt Bit Map&bslash;n&quot;
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;t&bslash;tPCI Int#&bslash;tBridge Pin#&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|win
op_assign
l_int|0
suffix:semicolon
id|win
OL
l_int|4
suffix:semicolon
id|win
op_increment
)paren
id|qprintf
c_func
(paren
l_string|&quot;&bslash;t&bslash;tINT%c&bslash;t&bslash;t%d&bslash;n&quot;
comma
id|win
op_plus
l_char|&squot;A&squot;
comma
id|pcibr_info-&gt;f_ibit
(braket
id|win
)braket
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_void
DECL|function|idbg_pss_info
id|idbg_pss_info
c_func
(paren
id|pcibr_soft_t
id|pcibr_soft
comma
id|pciio_slot_t
id|slot
)paren
(brace
id|pcibr_soft_slot_t
id|pss
suffix:semicolon
r_char
id|slot_conn_name
(braket
id|MAXDEVNAME
)braket
suffix:semicolon
r_int
id|func
suffix:semicolon
id|pss
op_assign
op_amp
id|pcibr_soft-&gt;bs_slot
(braket
id|slot
)braket
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;PCI INFRASTRUCTURAL INFO FOR SLOT %d&bslash;n&quot;
comma
id|slot
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tHost Present ? %s &quot;
comma
id|pss-&gt;has_host
ques
c_cond
l_string|&quot;yes&quot;
suffix:colon
l_string|&quot;no&quot;
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tHost Slot : %d&bslash;n&quot;
comma
id|pss-&gt;host_slot
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|slot_conn_name
comma
l_string|&quot;%v&quot;
comma
id|pss-&gt;slot_conn
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tSlot Conn : %s&bslash;n&quot;
comma
id|slot_conn_name
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;t#Functions : %d&bslash;n&quot;
comma
id|pss-&gt;bss_ninfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|func
op_assign
l_int|0
suffix:semicolon
id|func
OL
id|pss-&gt;bss_ninfo
suffix:semicolon
id|func
op_increment
)paren
id|idbg_pss_func
c_func
(paren
id|pss-&gt;bss_infos
comma
id|func
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tSpace : %s &quot;
comma
id|pci_space
(braket
id|pss-&gt;bss_devio.bssd_space
)braket
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tBase : 0x%x &quot;
comma
id|pss-&gt;bss_devio.bssd_base
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tShadow Devreg : 0x%x&bslash;n&quot;
comma
id|pss-&gt;bss_device
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tUsage counts : pmu %d d32 %d d64 %d&bslash;n&quot;
comma
id|pss-&gt;bss_pmu_uctr
comma
id|pss-&gt;bss_d32_uctr
comma
id|pss-&gt;bss_d64_uctr
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tDirect Trans Info : d64_base 0x%x d64_flags 0x%x&quot;
l_string|&quot;d32_base 0x%x d32_flags 0x%x&bslash;n&quot;
comma
id|pss-&gt;bss_d64_base
comma
id|pss-&gt;bss_d64_flags
comma
id|pss-&gt;bss_d32_base
comma
id|pss-&gt;bss_d32_flags
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tExt ATEs active ? %s&quot;
comma
id|pss-&gt;bss_ext_ates_active
ques
c_cond
l_string|&quot;yes&quot;
suffix:colon
l_string|&quot;no&quot;
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot; Command register : 0x%x &quot;
comma
id|pss-&gt;bss_cmd_pointer
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot; Shadow command val : 0x%x&bslash;n&quot;
comma
id|pss-&gt;bss_cmd_shadow
)paren
suffix:semicolon
id|qprintf
c_func
(paren
l_string|&quot;&bslash;tRRB Info : Valid %d+%d Reserved %d&bslash;n&quot;
comma
id|pcibr_soft-&gt;bs_rrb_valid
(braket
id|slot
)braket
comma
id|pcibr_soft-&gt;bs_rrb_valid
(braket
id|slot
op_plus
id|PCIBR_RRB_SLOT_VIRTUAL
)braket
comma
id|pcibr_soft-&gt;bs_rrb_res
(braket
id|slot
)braket
)paren
suffix:semicolon
)brace
DECL|variable|ips
r_int
id|ips
op_assign
l_int|0
suffix:semicolon
r_void
DECL|function|idbg_pss
id|idbg_pss
c_func
(paren
id|pcibr_soft_t
id|pcibr_soft
)paren
(brace
id|pciio_slot_t
id|slot
suffix:semicolon
r_if
c_cond
(paren
id|ips
op_ge
l_int|0
op_logical_and
id|ips
OL
l_int|8
)paren
id|idbg_pss_info
c_func
(paren
id|pcibr_soft
comma
id|ips
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ips
OL
l_int|0
)paren
r_for
c_loop
(paren
id|slot
op_assign
l_int|0
suffix:semicolon
id|slot
OL
l_int|8
suffix:semicolon
id|slot
op_increment
)paren
id|idbg_pss_info
c_func
(paren
id|pcibr_soft
comma
id|slot
)paren
suffix:semicolon
r_else
id|qprintf
c_func
(paren
l_string|&quot;Invalid ips %d&bslash;n&quot;
comma
id|ips
)paren
suffix:semicolon
)brace
macro_line|#endif&t;/* LATER */
eof
