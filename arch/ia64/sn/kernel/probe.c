multiline_comment|/*&n; * Platform dependent support for IO probing.&n; *&n; * Copyright (c) 2000-2003 Silicon Graphics, Inc.  All rights reserved.&n; * &n; * This program is free software; you can redistribute it and/or modify it &n; * under the terms of version 2 of the GNU General Public License &n; * as published by the Free Software Foundation.&n; * &n; * This program is distributed in the hope that it would be useful, but &n; * WITHOUT ANY WARRANTY; without even the implied warranty of &n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. &n; * &n; * Further, this software is distributed without any warranty that it is &n; * free of the rightful claim of any third person regarding infringement &n; * or the like.  Any license provided herein, whether implied or &n; * otherwise, applies only to this software file.  Patent licenses, if &n; * any, provided herein do not apply to combinations of this program with &n; * other software, or any other product whatsoever.&n; * &n; * You should have received a copy of the GNU General Public &n; * License along with this program; if not, write the Free Software &n; * Foundation, Inc., 59 Temple Place - Suite 330, Boston MA 02111-1307, USA.&n; * &n; * Contact information:  Silicon Graphics, Inc., 1600 Amphitheatre Pkwy, &n; * Mountain View, CA  94043, or:&n; * &n; * http://www.sgi.com &n; * &n; * For further information regarding this notice, see: &n; * &n; * http://oss.sgi.com/projects/GenInfo/NoticeExplan&n; */
macro_line|#include &lt;asm/sn/sn_sal.h&gt;
multiline_comment|/**&n; * ia64_sn_probe_io_slot - test a memory location for readability&n; * @paddr: physical address to probe&n; * @size: number bytes to read (1,2,4,8)&n; * @data_ptr: address to store value read by probe (-1 returned if probe fails)&n; *&n; * This function will probe a physical address to determine if&n; * the address can be read. If reading the address causes a BUS&n; * error, an error is returned. If the probe succeeds, the contents &n; * of the memory location is returned.&n; *&n; * Return values:&n; *  0 - probe successful&n; *  1 - probe failed (generated MCA)&n; *  2 - Bad arg&n; * &lt;0 - PAL error&n; */
id|u64
DECL|function|ia64_sn_probe_io_slot
id|ia64_sn_probe_io_slot
c_func
(paren
r_int
id|paddr
comma
r_int
id|size
comma
r_void
op_star
id|data_ptr
)paren
(brace
r_struct
id|ia64_sal_retval
id|isrv
suffix:semicolon
id|SAL_CALL
c_func
(paren
id|isrv
comma
id|SN_SAL_PROBE
comma
id|paddr
comma
id|size
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data_ptr
)paren
(brace
r_switch
c_cond
(paren
id|size
)paren
(brace
r_case
l_int|1
suffix:colon
op_star
(paren
(paren
id|u8
op_star
)paren
id|data_ptr
)paren
op_assign
(paren
id|u8
)paren
id|isrv.v0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
op_star
(paren
(paren
id|u16
op_star
)paren
id|data_ptr
)paren
op_assign
(paren
id|u16
)paren
id|isrv.v0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
op_star
(paren
(paren
id|u32
op_star
)paren
id|data_ptr
)paren
op_assign
(paren
id|u32
)paren
id|isrv.v0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
op_star
(paren
(paren
id|u64
op_star
)paren
id|data_ptr
)paren
op_assign
(paren
id|u64
)paren
id|isrv.v0
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|isrv.status
op_assign
l_int|2
suffix:semicolon
)brace
)brace
r_return
id|isrv.status
suffix:semicolon
)brace
eof
