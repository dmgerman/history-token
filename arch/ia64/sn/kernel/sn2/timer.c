multiline_comment|/*&n; * linux/arch/ia64/sn/kernel/sn2/timer.c&n; *&n; * Copyright (C) 2003 Silicon Graphics, Inc.&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/time.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;asm/hw_irq.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/sn/leds.h&gt;
macro_line|#include &lt;asm/sn/clksupport.h&gt;
r_extern
r_int
r_int
id|sn_rtc_cycles_per_second
suffix:semicolon
DECL|variable|last_wall_rtc
r_static
r_volatile
r_int
r_int
id|last_wall_rtc
suffix:semicolon
DECL|variable|rtc_nsecs_per_cycle
r_static
r_int
id|rtc_nsecs_per_cycle
suffix:semicolon
DECL|variable|rtc_per_timer_tick
r_static
r_int
id|rtc_per_timer_tick
suffix:semicolon
r_static
r_int
r_int
DECL|function|getoffset
id|getoffset
c_func
(paren
r_void
)paren
(brace
r_return
(paren
r_int
)paren
(paren
id|GET_RTC_COUNTER
c_func
(paren
)paren
op_minus
id|last_wall_rtc
)paren
op_star
id|rtc_nsecs_per_cycle
suffix:semicolon
)brace
r_static
r_void
DECL|function|update
id|update
c_func
(paren
r_int
id|delta_nsec
)paren
(brace
id|last_wall_rtc
op_assign
id|GET_RTC_COUNTER
c_func
(paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|reset
id|reset
c_func
(paren
r_void
)paren
(brace
id|last_wall_rtc
op_assign
id|GET_RTC_COUNTER
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|sn2_interpolator
r_static
r_struct
id|time_interpolator
id|sn2_interpolator
op_assign
(brace
dot
id|get_offset
op_assign
id|getoffset
comma
dot
id|update
op_assign
id|update
comma
dot
id|reset
op_assign
id|reset
)brace
suffix:semicolon
r_void
id|__init
DECL|function|sn_timer_init
id|sn_timer_init
c_func
(paren
r_void
)paren
(brace
id|sn2_interpolator.frequency
op_assign
id|sn_rtc_cycles_per_second
suffix:semicolon
id|sn2_interpolator.drift
op_assign
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* unknown */
id|register_time_interpolator
c_func
(paren
op_amp
id|sn2_interpolator
)paren
suffix:semicolon
id|rtc_per_timer_tick
op_assign
id|sn_rtc_cycles_per_second
op_div
id|HZ
suffix:semicolon
id|rtc_nsecs_per_cycle
op_assign
l_int|1000000000
op_div
id|sn_rtc_cycles_per_second
suffix:semicolon
id|last_wall_rtc
op_assign
id|GET_RTC_COUNTER
c_func
(paren
)paren
suffix:semicolon
)brace
eof
