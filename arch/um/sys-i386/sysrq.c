multiline_comment|/*&n; * Copyright (C) 2001 - 2003 Jeff Dike (jdike@addtoit.com)&n; * Licensed under the GPL&n; */
macro_line|#include &quot;linux/kernel.h&quot;
macro_line|#include &quot;linux/smp.h&quot;
macro_line|#include &quot;linux/sched.h&quot;
macro_line|#include &quot;asm/ptrace.h&quot;
macro_line|#include &quot;sysrq.h&quot;
DECL|function|show_regs
r_void
id|show_regs
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;EIP: %04lx:[&lt;%08lx&gt;] CPU: %d %s&quot;
comma
l_int|0xffff
op_amp
id|PT_REGS_CS
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_IP
c_func
(paren
id|regs
)paren
comma
id|smp_processor_id
c_func
(paren
)paren
comma
id|print_tainted
c_func
(paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|PT_REGS_CS
c_func
(paren
id|regs
)paren
op_amp
l_int|3
)paren
id|printk
c_func
(paren
l_string|&quot; ESP: %04lx:%08lx&quot;
comma
l_int|0xffff
op_amp
id|PT_REGS_SS
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_SP
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot; EFLAGS: %08lx&bslash;n    %s&bslash;n&quot;
comma
id|PT_REGS_EFLAGS
c_func
(paren
id|regs
)paren
comma
id|print_tainted
c_func
(paren
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;EAX: %08lx EBX: %08lx ECX: %08lx EDX: %08lx&bslash;n&quot;
comma
id|PT_REGS_EAX
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_EBX
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_ECX
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_EDX
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ESI: %08lx EDI: %08lx EBP: %08lx&quot;
comma
id|PT_REGS_ESI
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_EDI
c_func
(paren
id|regs
)paren
comma
id|PT_REGS_EBP
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot; DS: %04lx ES: %04lx&bslash;n&quot;
comma
l_int|0xffff
op_amp
id|PT_REGS_DS
c_func
(paren
id|regs
)paren
comma
l_int|0xffff
op_amp
id|PT_REGS_ES
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
id|show_trace
c_func
(paren
(paren
r_int
r_int
op_star
)paren
op_amp
id|regs
)paren
suffix:semicolon
)brace
eof
