multiline_comment|/* &n; * Copyright (C) 2002 Jeff Dike (jdike@karaya.com)&n; * Licensed under the GPL&n; */
macro_line|#ifndef __OS_H__
DECL|macro|__OS_H__
mdefine_line|#define __OS_H__
macro_line|#include &quot;asm/types.h&quot;
macro_line|#include &quot;../os/include/file.h&quot;
DECL|macro|OS_TYPE_FILE
mdefine_line|#define OS_TYPE_FILE 1 
DECL|macro|OS_TYPE_DIR
mdefine_line|#define OS_TYPE_DIR 2 
DECL|macro|OS_TYPE_SYMLINK
mdefine_line|#define OS_TYPE_SYMLINK 3 
DECL|macro|OS_TYPE_CHARDEV
mdefine_line|#define OS_TYPE_CHARDEV 4
DECL|macro|OS_TYPE_BLOCKDEV
mdefine_line|#define OS_TYPE_BLOCKDEV 5
DECL|macro|OS_TYPE_FIFO
mdefine_line|#define OS_TYPE_FIFO 6
DECL|macro|OS_TYPE_SOCK
mdefine_line|#define OS_TYPE_SOCK 7
multiline_comment|/* os_access() flags */
DECL|macro|OS_ACC_F_OK
mdefine_line|#define OS_ACC_F_OK    0       /* Test for existence.  */
DECL|macro|OS_ACC_X_OK
mdefine_line|#define OS_ACC_X_OK    1       /* Test for execute permission.  */
DECL|macro|OS_ACC_W_OK
mdefine_line|#define OS_ACC_W_OK    2       /* Test for write permission.  */
DECL|macro|OS_ACC_R_OK
mdefine_line|#define OS_ACC_R_OK    4       /* Test for read permission.  */
DECL|macro|OS_ACC_RW_OK
mdefine_line|#define OS_ACC_RW_OK   (OS_ACC_W_OK | OS_ACC_R_OK) /* Test for RW permission */
multiline_comment|/*&n; * types taken from stat_file() in hostfs_user.c&n; * (if they are wrong here, they are wrong there...).&n; */
DECL|struct|uml_stat
r_struct
id|uml_stat
(brace
DECL|member|ust_dev
r_int
id|ust_dev
suffix:semicolon
multiline_comment|/* device */
DECL|member|ust_ino
r_int
r_int
r_int
id|ust_ino
suffix:semicolon
multiline_comment|/* inode */
DECL|member|ust_mode
r_int
id|ust_mode
suffix:semicolon
multiline_comment|/* protection */
DECL|member|ust_nlink
r_int
id|ust_nlink
suffix:semicolon
multiline_comment|/* number of hard links */
DECL|member|ust_uid
r_int
id|ust_uid
suffix:semicolon
multiline_comment|/* user ID of owner */
DECL|member|ust_gid
r_int
id|ust_gid
suffix:semicolon
multiline_comment|/* group ID of owner */
DECL|member|ust_size
r_int
r_int
r_int
id|ust_size
suffix:semicolon
multiline_comment|/* total size, in bytes */
DECL|member|ust_blksize
r_int
id|ust_blksize
suffix:semicolon
multiline_comment|/* blocksize for filesystem I/O */
DECL|member|ust_blocks
r_int
r_int
r_int
id|ust_blocks
suffix:semicolon
multiline_comment|/* number of blocks allocated */
DECL|member|ust_atime
r_int
r_int
id|ust_atime
suffix:semicolon
multiline_comment|/* time of last access */
DECL|member|ust_mtime
r_int
r_int
id|ust_mtime
suffix:semicolon
multiline_comment|/* time of last modification */
DECL|member|ust_ctime
r_int
r_int
id|ust_ctime
suffix:semicolon
multiline_comment|/* time of last change */
)brace
suffix:semicolon
DECL|struct|openflags
r_struct
id|openflags
(brace
DECL|member|r
r_int
r_int
id|r
suffix:colon
l_int|1
suffix:semicolon
DECL|member|w
r_int
r_int
id|w
suffix:colon
l_int|1
suffix:semicolon
DECL|member|s
r_int
r_int
id|s
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* O_SYNC */
DECL|member|c
r_int
r_int
id|c
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* O_CREAT */
DECL|member|t
r_int
r_int
id|t
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* O_TRUNC */
DECL|member|a
r_int
r_int
id|a
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* O_APPEND */
DECL|member|e
r_int
r_int
id|e
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* O_EXCL */
DECL|member|cl
r_int
r_int
id|cl
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* FD_CLOEXEC */
)brace
suffix:semicolon
DECL|macro|OPENFLAGS
mdefine_line|#define OPENFLAGS() ((struct openflags) { .r = 0, .w = 0, .s = 0, .c = 0, &bslash;&n; &t;&t;&t;&t;&t;  .t = 0, .a = 0, .e = 0, .cl = 0 })
DECL|function|of_read
r_static
r_inline
r_struct
id|openflags
id|of_read
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.r
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_write
r_static
r_inline
r_struct
id|openflags
id|of_write
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.w
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_rdwr
r_static
r_inline
r_struct
id|openflags
id|of_rdwr
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
r_return
id|of_read
c_func
(paren
id|of_write
c_func
(paren
id|flags
)paren
)paren
suffix:semicolon
)brace
DECL|function|of_set_rw
r_static
r_inline
r_struct
id|openflags
id|of_set_rw
c_func
(paren
r_struct
id|openflags
id|flags
comma
r_int
id|r
comma
r_int
id|w
)paren
(brace
id|flags.r
op_assign
id|r
suffix:semicolon
id|flags.w
op_assign
id|w
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_sync
r_static
r_inline
r_struct
id|openflags
id|of_sync
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.s
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_create
r_static
r_inline
r_struct
id|openflags
id|of_create
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.c
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_trunc
r_static
r_inline
r_struct
id|openflags
id|of_trunc
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.t
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_append
r_static
r_inline
r_struct
id|openflags
id|of_append
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.a
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_excl
r_static
r_inline
r_struct
id|openflags
id|of_excl
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.e
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
DECL|function|of_cloexec
r_static
r_inline
r_struct
id|openflags
id|of_cloexec
c_func
(paren
r_struct
id|openflags
id|flags
)paren
(brace
id|flags.cl
op_assign
l_int|1
suffix:semicolon
r_return
id|flags
suffix:semicolon
)brace
r_extern
r_int
id|os_stat_file
c_func
(paren
r_const
r_char
op_star
id|file_name
comma
r_struct
id|uml_stat
op_star
id|buf
)paren
suffix:semicolon
r_extern
r_int
id|os_stat_fd
c_func
(paren
r_const
r_int
id|fd
comma
r_struct
id|uml_stat
op_star
id|buf
)paren
suffix:semicolon
r_extern
r_int
id|os_access
c_func
(paren
r_const
r_char
op_star
id|file
comma
r_int
id|mode
)paren
suffix:semicolon
r_extern
r_void
id|os_print_error
c_func
(paren
r_int
id|error
comma
r_const
r_char
op_star
id|str
)paren
suffix:semicolon
r_extern
r_int
id|os_get_exec_close
c_func
(paren
r_int
id|fd
comma
r_int
op_star
id|close_on_exec
)paren
suffix:semicolon
r_extern
r_int
id|os_set_exec_close
c_func
(paren
r_int
id|fd
comma
r_int
id|close_on_exec
)paren
suffix:semicolon
r_extern
r_int
id|os_ioctl_generic
c_func
(paren
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
suffix:semicolon
r_extern
r_int
id|os_window_size
c_func
(paren
r_int
id|fd
comma
r_int
op_star
id|rows
comma
r_int
op_star
id|cols
)paren
suffix:semicolon
r_extern
r_int
id|os_new_tty_pgrp
c_func
(paren
r_int
id|fd
comma
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_int
id|os_get_ifname
c_func
(paren
r_int
id|fd
comma
r_char
op_star
id|namebuf
)paren
suffix:semicolon
r_extern
r_int
id|os_set_slip
c_func
(paren
r_int
id|fd
)paren
suffix:semicolon
r_extern
r_int
id|os_set_owner
c_func
(paren
r_int
id|fd
comma
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_int
id|os_sigio_async
c_func
(paren
r_int
id|master
comma
r_int
id|slave
)paren
suffix:semicolon
r_extern
r_int
id|os_mode_fd
c_func
(paren
r_int
id|fd
comma
r_int
id|mode
)paren
suffix:semicolon
r_extern
r_int
id|os_seek_file
c_func
(paren
r_int
id|fd
comma
id|__u64
id|offset
)paren
suffix:semicolon
r_extern
r_int
id|os_open_file
c_func
(paren
r_char
op_star
id|file
comma
r_struct
id|openflags
id|flags
comma
r_int
id|mode
)paren
suffix:semicolon
r_extern
r_int
id|os_read_file
c_func
(paren
r_int
id|fd
comma
r_void
op_star
id|buf
comma
r_int
id|len
)paren
suffix:semicolon
r_extern
r_int
id|os_write_file
c_func
(paren
r_int
id|fd
comma
r_const
r_void
op_star
id|buf
comma
r_int
id|count
)paren
suffix:semicolon
r_extern
r_int
id|os_file_size
c_func
(paren
r_char
op_star
id|file
comma
r_int
r_int
op_star
id|size_out
)paren
suffix:semicolon
r_extern
r_int
id|os_file_modtime
c_func
(paren
r_char
op_star
id|file
comma
r_int
r_int
op_star
id|modtime
)paren
suffix:semicolon
r_extern
r_int
id|os_pipe
c_func
(paren
r_int
op_star
id|fd
comma
r_int
id|stream
comma
r_int
id|close_on_exec
)paren
suffix:semicolon
r_extern
r_int
id|os_set_fd_async
c_func
(paren
r_int
id|fd
comma
r_int
id|owner
)paren
suffix:semicolon
r_extern
r_int
id|os_clear_fd_async
c_func
(paren
r_int
id|fd
)paren
suffix:semicolon
r_extern
r_int
id|os_set_fd_block
c_func
(paren
r_int
id|fd
comma
r_int
id|blocking
)paren
suffix:semicolon
r_extern
r_int
id|os_accept_connection
c_func
(paren
r_int
id|fd
)paren
suffix:semicolon
r_extern
r_int
id|os_create_unix_socket
c_func
(paren
r_char
op_star
id|file
comma
r_int
id|len
comma
r_int
id|close_on_exec
)paren
suffix:semicolon
r_extern
r_int
id|os_shutdown_socket
c_func
(paren
r_int
id|fd
comma
r_int
id|r
comma
r_int
id|w
)paren
suffix:semicolon
r_extern
r_void
id|os_close_file
c_func
(paren
r_int
id|fd
)paren
suffix:semicolon
r_extern
r_int
id|os_rcv_fd
c_func
(paren
r_int
id|fd
comma
r_int
op_star
id|helper_pid_out
)paren
suffix:semicolon
r_extern
r_int
id|create_unix_socket
c_func
(paren
r_char
op_star
id|file
comma
r_int
id|len
comma
r_int
id|close_on_exec
)paren
suffix:semicolon
r_extern
r_int
id|os_connect_socket
c_func
(paren
r_char
op_star
id|name
)paren
suffix:semicolon
r_extern
r_int
id|os_file_type
c_func
(paren
r_char
op_star
id|file
)paren
suffix:semicolon
r_extern
r_int
id|os_file_mode
c_func
(paren
r_char
op_star
id|file
comma
r_struct
id|openflags
op_star
id|mode_out
)paren
suffix:semicolon
r_extern
r_int
id|os_lock_file
c_func
(paren
r_int
id|fd
comma
r_int
id|excl
)paren
suffix:semicolon
r_extern
r_int
r_int
id|os_process_pc
c_func
(paren
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_int
id|os_process_parent
c_func
(paren
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_void
id|os_stop_process
c_func
(paren
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_void
id|os_kill_process
c_func
(paren
r_int
id|pid
comma
r_int
id|reap_child
)paren
suffix:semicolon
r_extern
r_void
id|os_kill_ptraced_process
c_func
(paren
r_int
id|pid
comma
r_int
id|reap_child
)paren
suffix:semicolon
r_extern
r_void
id|os_usr1_process
c_func
(paren
r_int
id|pid
)paren
suffix:semicolon
r_extern
r_int
id|os_getpid
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|os_map_memory
c_func
(paren
r_void
op_star
id|virt
comma
r_int
id|fd
comma
r_int
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_int
id|r
comma
r_int
id|w
comma
r_int
id|x
)paren
suffix:semicolon
r_extern
r_int
id|os_protect_memory
c_func
(paren
r_void
op_star
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|r
comma
r_int
id|w
comma
r_int
id|x
)paren
suffix:semicolon
r_extern
r_int
id|os_unmap_memory
c_func
(paren
r_void
op_star
id|addr
comma
r_int
id|len
)paren
suffix:semicolon
r_extern
r_void
id|os_flush_stdout
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
r_int
r_int
id|os_usecs
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * Overrides for Emacs so that we follow Linus&squot;s tabbing style.&n; * Emacs will notice this stuff at the end of the file and automatically&n; * adjust the settings for this buffer only.  This must remain at the end&n; * of the file.&n; * ---------------------------------------------------------------------------&n; * Local variables:&n; * c-file-style: &quot;linux&quot;&n; * End:&n; */
eof
