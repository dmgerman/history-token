macro_line|#include &quot;linux/threads.h&quot;
macro_line|#include &quot;linux/stddef.h&quot;  
singleline_comment|// for NULL
macro_line|#include &quot;linux/elf.h&quot;  
singleline_comment|// for AT_NULL
multiline_comment|/* unsigned int local_bh_count[NR_CPUS]; */
DECL|variable|isa_io_base
r_int
r_int
id|isa_io_base
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* The following function nicked from arch/ppc/kernel/process.c and&n; * adapted slightly */
multiline_comment|/*&n; * XXX ld.so expects the auxiliary table to start on&n; * a 16-byte boundary, so we have to find it and&n; * move it up. :-(&n; */
DECL|function|shove_aux_table
r_void
id|shove_aux_table
c_func
(paren
r_int
r_int
id|sp
)paren
(brace
r_int
id|argc
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_int
r_int
id|e
suffix:semicolon
r_int
r_int
id|aux_start
comma
id|offset
suffix:semicolon
id|argc
op_assign
op_star
(paren
r_int
op_star
)paren
id|sp
suffix:semicolon
id|sp
op_add_assign
r_sizeof
(paren
r_int
)paren
op_plus
(paren
id|argc
op_plus
l_int|1
)paren
op_star
r_sizeof
(paren
r_char
op_star
)paren
suffix:semicolon
multiline_comment|/* skip over the environment pointers */
r_do
(brace
id|p
op_assign
op_star
(paren
r_char
op_star
op_star
)paren
id|sp
suffix:semicolon
id|sp
op_add_assign
r_sizeof
(paren
r_char
op_star
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|p
op_ne
l_int|NULL
)paren
suffix:semicolon
id|aux_start
op_assign
id|sp
suffix:semicolon
multiline_comment|/* skip to the end of the auxiliary table */
r_do
(brace
id|e
op_assign
op_star
(paren
r_int
r_int
op_star
)paren
id|sp
suffix:semicolon
id|sp
op_add_assign
l_int|2
op_star
r_sizeof
(paren
r_int
r_int
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|e
op_ne
id|AT_NULL
)paren
suffix:semicolon
id|offset
op_assign
(paren
(paren
id|aux_start
op_plus
l_int|15
)paren
op_amp
op_complement
l_int|15
)paren
op_minus
id|aux_start
suffix:semicolon
r_if
c_cond
(paren
id|offset
op_ne
l_int|0
)paren
(brace
r_do
(brace
id|sp
op_sub_assign
r_sizeof
(paren
r_int
r_int
)paren
suffix:semicolon
id|e
op_assign
op_star
(paren
r_int
r_int
op_star
)paren
id|sp
suffix:semicolon
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|sp
op_plus
id|offset
)paren
op_assign
id|e
suffix:semicolon
)brace
r_while
c_loop
(paren
id|sp
OG
id|aux_start
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* END stuff taken from arch/ppc/kernel/process.c */
multiline_comment|/*&n; * Overrides for Emacs so that we follow Linus&squot;s tabbing style.&n; * Emacs will notice this stuff at the end of the file and automatically&n; * adjust the settings for this buffer only.  This must remain at the end&n; * of the file.&n; * ---------------------------------------------------------------------------&n; * Local variables:&n; * c-file-style: &quot;linux&quot;&n; * End:&n; */
eof
