multiline_comment|/*&n; * arch/arm/mach-ixp2000/ixdp2x01.c&n; *&n; * Code common to Intel IXDP2401 and IXDP2801 platforms&n; *&n; * Original Author: Andrzej Mialwoski &lt;andrzej.mialwoski@intel.com&gt;&n; * Maintainer: Deepak Saxena &lt;dsaxena@plexity.net&gt;&n; *&n; * Copyright (C) 2002-2003 Intel Corp.&n; * Copyright (C) 2003-2004 MontaVista Software, Inc.&n; *&n; *  This program is free software; you can redistribute  it and/or modify it&n; *  under  the terms of  the GNU General  Public License as published by the&n; *  Free Software Foundation;  either version 2 of the  License, or (at your&n; *  option) any later version.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/bitops.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/serial.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/serial_core.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/mach-types.h&gt;
macro_line|#include &lt;asm/mach/pci.h&gt;
macro_line|#include &lt;asm/mach/map.h&gt;
macro_line|#include &lt;asm/mach/irq.h&gt;
macro_line|#include &lt;asm/mach/time.h&gt;
macro_line|#include &lt;asm/mach/arch.h&gt;
macro_line|#include &lt;asm/mach/flash.h&gt;
multiline_comment|/*************************************************************************&n; * IXDP2x01 IRQ Handling&n; *************************************************************************/
DECL|function|ixdp2x01_irq_mask
r_static
r_void
id|ixdp2x01_irq_mask
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_INT_MASK_SET_REG
comma
id|IXP2000_BOARD_IRQ_MASK
c_func
(paren
id|irq
)paren
)paren
suffix:semicolon
)brace
DECL|function|ixdp2x01_irq_unmask
r_static
r_void
id|ixdp2x01_irq_unmask
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_INT_MASK_CLR_REG
comma
id|IXP2000_BOARD_IRQ_MASK
c_func
(paren
id|irq
)paren
)paren
suffix:semicolon
)brace
DECL|variable|valid_irq_mask
r_static
id|u32
id|valid_irq_mask
suffix:semicolon
DECL|function|ixdp2x01_irq_handler
r_static
r_void
id|ixdp2x01_irq_handler
c_func
(paren
r_int
r_int
id|irq
comma
r_struct
id|irqdesc
op_star
id|desc
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|u32
id|ex_interrupt
suffix:semicolon
r_int
id|i
suffix:semicolon
id|desc-&gt;chip
op_member_access_from_pointer
id|mask
c_func
(paren
id|irq
)paren
suffix:semicolon
id|ex_interrupt
op_assign
op_star
id|IXDP2X01_INT_STAT_REG
op_amp
id|valid_irq_mask
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ex_interrupt
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;Spurious IXDP2X01 CPLD interrupt!&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|IXP2000_BOARD_IRQS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ex_interrupt
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
(brace
r_struct
id|irqdesc
op_star
id|cpld_desc
suffix:semicolon
r_int
id|cpld_irq
op_assign
id|IXP2000_BOARD_IRQ
c_func
(paren
l_int|0
)paren
op_plus
id|i
suffix:semicolon
id|cpld_desc
op_assign
id|irq_desc
op_plus
id|cpld_irq
suffix:semicolon
id|cpld_desc
op_member_access_from_pointer
id|handle
c_func
(paren
id|cpld_irq
comma
id|cpld_desc
comma
id|regs
)paren
suffix:semicolon
)brace
)brace
id|desc-&gt;chip
op_member_access_from_pointer
id|unmask
c_func
(paren
id|irq
)paren
suffix:semicolon
)brace
DECL|variable|ixdp2x01_irq_chip
r_static
r_struct
id|irqchip
id|ixdp2x01_irq_chip
op_assign
(brace
dot
id|mask
op_assign
id|ixdp2x01_irq_mask
comma
dot
id|ack
op_assign
id|ixdp2x01_irq_mask
comma
dot
id|unmask
op_assign
id|ixdp2x01_irq_unmask
)brace
suffix:semicolon
multiline_comment|/*&n; * We only do anything if we are the master NPU on the board.&n; * The slave NPU only has the ethernet chip going directly to&n; * the PCIB interrupt input.&n; */
DECL|function|ixdp2x01_init_irq
r_void
id|__init
id|ixdp2x01_init_irq
c_func
(paren
r_void
)paren
(brace
r_int
id|irq
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* initialize chip specific interrupts */
id|ixp2000_init_irq
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|machine_is_ixdp2401
c_func
(paren
)paren
)paren
id|valid_irq_mask
op_assign
id|IXDP2401_VALID_IRQ_MASK
suffix:semicolon
r_else
id|valid_irq_mask
op_assign
id|IXDP2801_VALID_IRQ_MASK
suffix:semicolon
multiline_comment|/* Mask all interrupts from CPLD, disable simulation */
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_INT_MASK_SET_REG
comma
l_int|0xffffffff
)paren
suffix:semicolon
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_INT_SIM_REG
comma
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|irq
op_assign
id|NR_IXP2000_IRQS
suffix:semicolon
id|irq
OL
id|NR_IXDP2X01_IRQS
suffix:semicolon
id|irq
op_increment
)paren
(brace
r_if
c_cond
(paren
id|irq
op_amp
id|valid_irq_mask
)paren
(brace
id|set_irq_chip
c_func
(paren
id|irq
comma
op_amp
id|ixdp2x01_irq_chip
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irq
comma
id|do_level_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irq
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
r_else
(brace
id|set_irq_flags
c_func
(paren
id|irq
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Hook into PCI interrupts */
id|set_irq_chained_handler
c_func
(paren
id|IRQ_IXP2000_PCIB
comma
op_amp
id|ixdp2x01_irq_handler
)paren
suffix:semicolon
)brace
multiline_comment|/*************************************************************************&n; * IXDP2x01 memory map and serial ports&n; *************************************************************************/
DECL|variable|__initdata
r_static
r_struct
id|map_desc
id|ixdp2x01_io_desc
id|__initdata
op_assign
(brace
dot
r_virtual
op_assign
id|IXDP2X01_VIRT_CPLD_BASE
comma
dot
id|physical
op_assign
id|IXDP2X01_PHYS_CPLD_BASE
comma
dot
id|length
op_assign
id|IXDP2X01_CPLD_REGION_SIZE
comma
dot
id|type
op_assign
id|MT_DEVICE
)brace
suffix:semicolon
DECL|variable|ixdp2x01_serial_ports
r_static
r_struct
id|uart_port
id|ixdp2x01_serial_ports
(braket
l_int|2
)braket
op_assign
(brace
(brace
dot
id|membase
op_assign
(paren
r_char
op_star
)paren
(paren
id|IXDP2X01_UART1_VIRT_BASE
)paren
comma
dot
id|mapbase
op_assign
(paren
r_int
r_int
)paren
id|IXDP2X01_UART1_PHYS_BASE
comma
dot
id|irq
op_assign
id|IRQ_IXDP2X01_UART1
comma
dot
id|flags
op_assign
id|UPF_SKIP_TEST
comma
dot
id|iotype
op_assign
id|UPIO_MEM32
comma
dot
id|regshift
op_assign
l_int|2
comma
dot
id|uartclk
op_assign
id|IXDP2X01_UART_CLK
comma
dot
id|line
op_assign
l_int|1
comma
dot
id|type
op_assign
id|PORT_16550A
comma
dot
id|fifosize
op_assign
l_int|16
)brace
comma
(brace
dot
id|membase
op_assign
(paren
r_char
op_star
)paren
(paren
id|IXDP2X01_UART2_VIRT_BASE
)paren
comma
dot
id|mapbase
op_assign
(paren
r_int
r_int
)paren
id|IXDP2X01_UART2_PHYS_BASE
comma
dot
id|irq
op_assign
id|IRQ_IXDP2X01_UART2
comma
dot
id|flags
op_assign
id|UPF_SKIP_TEST
comma
dot
id|iotype
op_assign
id|UPIO_MEM32
comma
dot
id|regshift
op_assign
l_int|2
comma
dot
id|uartclk
op_assign
id|IXDP2X01_UART_CLK
comma
dot
id|line
op_assign
l_int|2
comma
dot
id|type
op_assign
id|PORT_16550A
comma
dot
id|fifosize
op_assign
l_int|16
)brace
comma
)brace
suffix:semicolon
DECL|function|ixdp2x01_map_io
r_static
r_void
id|__init
id|ixdp2x01_map_io
c_func
(paren
r_void
)paren
(brace
id|ixp2000_map_io
c_func
(paren
)paren
suffix:semicolon
id|iotable_init
c_func
(paren
op_amp
id|ixdp2x01_io_desc
comma
l_int|1
)paren
suffix:semicolon
id|early_serial_setup
c_func
(paren
op_amp
id|ixdp2x01_serial_ports
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|early_serial_setup
c_func
(paren
op_amp
id|ixdp2x01_serial_ports
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*************************************************************************&n; * IXDP2x01 timer tick configuration&n; *************************************************************************/
DECL|variable|ixdp2x01_clock
r_static
r_int
r_int
id|ixdp2x01_clock
suffix:semicolon
DECL|function|ixdp2x01_clock_setup
r_static
r_int
id|__init
id|ixdp2x01_clock_setup
c_func
(paren
r_char
op_star
id|str
)paren
(brace
id|ixdp2x01_clock
op_assign
id|simple_strtoul
c_func
(paren
id|str
comma
l_int|NULL
comma
l_int|10
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|__setup
c_func
(paren
l_string|&quot;ixdp2x01_clock=&quot;
comma
id|ixdp2x01_clock_setup
)paren
suffix:semicolon
DECL|function|ixdp2x01_timer_init
r_static
r_void
id|__init
id|ixdp2x01_timer_init
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|ixdp2x01_clock
)paren
id|ixdp2x01_clock
op_assign
l_int|50000000
suffix:semicolon
id|ixp2000_init_time
c_func
(paren
id|ixdp2x01_clock
)paren
suffix:semicolon
)brace
DECL|variable|ixdp2x01_timer
r_static
r_struct
id|sys_timer
id|ixdp2x01_timer
op_assign
(brace
dot
id|init
op_assign
id|ixdp2x01_timer_init
comma
dot
id|offset
op_assign
id|ixp2000_gettimeoffset
comma
)brace
suffix:semicolon
multiline_comment|/*************************************************************************&n; * IXDP2x01 PCI&n; *************************************************************************/
DECL|function|ixdp2x01_pci_preinit
r_void
id|__init
id|ixdp2x01_pci_preinit
c_func
(paren
r_void
)paren
(brace
id|ixp2000_reg_write
c_func
(paren
id|IXP2000_PCI_ADDR_EXT
comma
l_int|0x00000000
)paren
suffix:semicolon
id|ixp2000_pci_preinit
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|macro|DEVPIN
mdefine_line|#define DEVPIN(dev, pin) ((pin) | ((dev) &lt;&lt; 3))
DECL|function|ixdp2x01_pci_map_irq
r_static
r_int
id|__init
id|ixdp2x01_pci_map_irq
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
id|u8
id|slot
comma
id|u8
id|pin
)paren
(brace
id|u8
id|bus
op_assign
id|dev-&gt;bus-&gt;number
suffix:semicolon
id|u32
id|devpin
op_assign
id|DEVPIN
c_func
(paren
id|PCI_SLOT
c_func
(paren
id|dev-&gt;devfn
)paren
comma
id|pin
)paren
suffix:semicolon
r_struct
id|pci_bus
op_star
id|tmp_bus
op_assign
id|dev-&gt;bus
suffix:semicolon
multiline_comment|/* Primary bus, no interrupts here */
r_if
c_cond
(paren
id|bus
op_eq
l_int|0
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Lookup first leaf in bus tree */
r_while
c_loop
(paren
(paren
id|tmp_bus-&gt;parent
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|tmp_bus-&gt;parent-&gt;parent
op_ne
l_int|NULL
)paren
)paren
(brace
id|tmp_bus
op_assign
id|tmp_bus-&gt;parent
suffix:semicolon
)brace
multiline_comment|/* Select between known bridges */
r_switch
c_cond
(paren
id|tmp_bus-&gt;self-&gt;devfn
op_or
(paren
id|tmp_bus-&gt;self-&gt;bus-&gt;number
op_lshift
l_int|8
)paren
)paren
(brace
multiline_comment|/* Device is located after first MB bridge */
r_case
l_int|0x0008
suffix:colon
r_if
c_cond
(paren
id|tmp_bus
op_eq
id|dev-&gt;bus
)paren
(brace
multiline_comment|/* Device is located directy after first MB bridge */
r_switch
c_cond
(paren
id|devpin
)paren
(brace
r_case
id|DEVPIN
c_func
(paren
l_int|1
comma
l_int|1
)paren
suffix:colon
multiline_comment|/* Onboard 82546 ch 0 */
r_if
c_cond
(paren
id|machine_is_ixdp2401
c_func
(paren
)paren
)paren
r_return
id|IRQ_IXDP2401_INTA_82546
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|1
comma
l_int|2
)paren
suffix:colon
multiline_comment|/* Onboard 82546 ch 1 */
r_if
c_cond
(paren
id|machine_is_ixdp2401
c_func
(paren
)paren
)paren
r_return
id|IRQ_IXDP2401_INTB_82546
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|0
comma
l_int|1
)paren
suffix:colon
multiline_comment|/* PMC INTA# */
r_return
id|IRQ_IXDP2X01_SPCI_PMC_INTA
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|0
comma
l_int|2
)paren
suffix:colon
multiline_comment|/* PMC INTB# */
r_return
id|IRQ_IXDP2X01_SPCI_PMC_INTB
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|0
comma
l_int|3
)paren
suffix:colon
multiline_comment|/* PMC INTC# */
r_return
id|IRQ_IXDP2X01_SPCI_PMC_INTC
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|0
comma
l_int|4
)paren
suffix:colon
multiline_comment|/* PMC INTD# */
r_return
id|IRQ_IXDP2X01_SPCI_PMC_INTD
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|0x0010
suffix:colon
r_if
c_cond
(paren
id|tmp_bus
op_eq
id|dev-&gt;bus
)paren
(brace
multiline_comment|/* Device is located directy after second MB bridge */
multiline_comment|/* Secondary bus of second bridge */
r_switch
c_cond
(paren
id|devpin
)paren
(brace
r_case
id|DEVPIN
c_func
(paren
l_int|0
comma
l_int|1
)paren
suffix:colon
multiline_comment|/* DB#0 */
r_return
id|IRQ_IXDP2X01_SPCI_DB_0
suffix:semicolon
r_case
id|DEVPIN
c_func
(paren
l_int|1
comma
l_int|1
)paren
suffix:colon
multiline_comment|/* DB#1 */
r_return
id|IRQ_IXDP2X01_SPCI_DB_1
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* Device is located indirectly after second MB bridge */
multiline_comment|/* Not supported now */
)brace
r_break
suffix:semicolon
)brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
DECL|function|ixdp2x01_pci_setup
r_static
r_int
id|ixdp2x01_pci_setup
c_func
(paren
r_int
id|nr
comma
r_struct
id|pci_sys_data
op_star
id|sys
)paren
(brace
id|sys-&gt;mem_offset
op_assign
l_int|0xe0000000
suffix:semicolon
r_if
c_cond
(paren
id|machine_is_ixdp2801
c_func
(paren
)paren
)paren
id|sys-&gt;mem_offset
op_sub_assign
(paren
(paren
op_star
id|IXP2000_PCI_ADDR_EXT
op_amp
l_int|0xE000
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
r_return
id|ixp2000_pci_setup
c_func
(paren
id|nr
comma
id|sys
)paren
suffix:semicolon
)brace
DECL|variable|__initdata
r_struct
id|hw_pci
id|ixdp2x01_pci
id|__initdata
op_assign
(brace
dot
id|nr_controllers
op_assign
l_int|1
comma
dot
id|setup
op_assign
id|ixdp2x01_pci_setup
comma
dot
id|preinit
op_assign
id|ixdp2x01_pci_preinit
comma
dot
id|scan
op_assign
id|ixp2000_pci_scan_bus
comma
dot
id|map_irq
op_assign
id|ixdp2x01_pci_map_irq
comma
)brace
suffix:semicolon
DECL|function|ixdp2x01_pci_init
r_int
id|__init
id|ixdp2x01_pci_init
c_func
(paren
r_void
)paren
(brace
id|pci_common_init
c_func
(paren
op_amp
id|ixdp2x01_pci
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|ixdp2x01_pci_init
id|subsys_initcall
c_func
(paren
id|ixdp2x01_pci_init
)paren
suffix:semicolon
multiline_comment|/*************************************************************************&n; * IXDP2x01 Machine Intialization&n; *************************************************************************/
DECL|variable|ixdp2x01_flash_platform_data
r_static
r_struct
id|flash_platform_data
id|ixdp2x01_flash_platform_data
op_assign
(brace
dot
id|map_name
op_assign
l_string|&quot;cfi_probe&quot;
comma
dot
id|width
op_assign
l_int|1
comma
)brace
suffix:semicolon
DECL|function|ixdp2x01_flash_bank_setup
r_static
r_int
r_int
id|ixdp2x01_flash_bank_setup
c_func
(paren
r_int
r_int
id|ofs
)paren
(brace
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_CPLD_FLASH_REG
comma
(paren
(paren
id|ofs
op_rshift
id|IXDP2X01_FLASH_WINDOW_BITS
)paren
op_or
id|IXDP2X01_CPLD_FLASH_INTERN
)paren
)paren
suffix:semicolon
r_return
(paren
id|ofs
op_amp
id|IXDP2X01_FLASH_WINDOW_MASK
)paren
suffix:semicolon
)brace
DECL|variable|ixdp2x01_flash_data
r_static
r_struct
id|ixp2000_flash_data
id|ixdp2x01_flash_data
op_assign
(brace
dot
id|platform_data
op_assign
op_amp
id|ixdp2x01_flash_platform_data
comma
dot
id|bank_setup
op_assign
id|ixdp2x01_flash_bank_setup
)brace
suffix:semicolon
DECL|variable|ixdp2x01_flash_resource
r_static
r_struct
id|resource
id|ixdp2x01_flash_resource
op_assign
(brace
dot
id|start
op_assign
l_int|0xc4000000
comma
dot
id|end
op_assign
l_int|0xc4000000
op_plus
l_int|0x01ffffff
comma
dot
id|flags
op_assign
id|IORESOURCE_MEM
comma
)brace
suffix:semicolon
DECL|variable|ixdp2x01_flash
r_static
r_struct
id|platform_device
id|ixdp2x01_flash
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;IXP2000-Flash&quot;
comma
dot
id|id
op_assign
l_int|0
comma
dot
id|dev
op_assign
(brace
dot
id|platform_data
op_assign
op_amp
id|ixdp2x01_flash_data
comma
)brace
comma
dot
id|num_resources
op_assign
l_int|1
comma
dot
id|resource
op_assign
op_amp
id|ixdp2x01_flash_resource
comma
)brace
suffix:semicolon
DECL|variable|ixdp2x01_i2c_gpio_pins
r_static
r_struct
id|ixp2000_i2c_pins
id|ixdp2x01_i2c_gpio_pins
op_assign
(brace
dot
id|sda_pin
op_assign
id|IXDP2X01_GPIO_SDA
comma
dot
id|scl_pin
op_assign
id|IXDP2X01_GPIO_SCL
comma
)brace
suffix:semicolon
DECL|variable|ixdp2x01_i2c_controller
r_static
r_struct
id|platform_device
id|ixdp2x01_i2c_controller
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;IXP2000-I2C&quot;
comma
dot
id|id
op_assign
l_int|0
comma
dot
id|dev
op_assign
(brace
dot
id|platform_data
op_assign
op_amp
id|ixdp2x01_i2c_gpio_pins
comma
)brace
comma
dot
id|num_resources
op_assign
l_int|0
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|platform_device
op_star
id|ixdp2x01_devices
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|ixdp2x01_flash
comma
op_amp
id|ixdp2x01_i2c_controller
)brace
suffix:semicolon
DECL|function|ixdp2x01_init_machine
r_static
r_void
id|__init
id|ixdp2x01_init_machine
c_func
(paren
r_void
)paren
(brace
id|ixp2000_reg_write
c_func
(paren
id|IXDP2X01_CPLD_FLASH_REG
comma
(paren
id|IXDP2X01_CPLD_FLASH_BANK_MASK
op_or
id|IXDP2X01_CPLD_FLASH_INTERN
)paren
)paren
suffix:semicolon
id|ixdp2x01_flash_data.nr_banks
op_assign
(paren
(paren
op_star
id|IXDP2X01_CPLD_FLASH_REG
op_amp
id|IXDP2X01_CPLD_FLASH_BANK_MASK
)paren
op_plus
l_int|1
)paren
suffix:semicolon
id|platform_add_devices
c_func
(paren
id|ixdp2x01_devices
comma
id|ARRAY_SIZE
c_func
(paren
id|ixdp2x01_devices
)paren
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_ARCH_IXDP2401
id|MACHINE_START
c_func
(paren
id|IXDP2401
comma
l_string|&quot;Intel IXDP2401 Development Platform&quot;
)paren
id|MAINTAINER
c_func
(paren
l_string|&quot;MontaVista Software, Inc.&quot;
)paren
id|BOOT_MEM
c_func
(paren
l_int|0x00000000
comma
id|IXP2000_UART_PHYS_BASE
comma
id|IXP2000_UART_VIRT_BASE
)paren
id|BOOT_PARAMS
c_func
(paren
l_int|0x00000100
)paren
id|MAPIO
c_func
(paren
id|ixdp2x01_map_io
)paren
id|INITIRQ
c_func
(paren
id|ixdp2x01_init_irq
)paren
dot
id|timer
op_assign
op_amp
id|ixdp2x01_timer
comma
id|INIT_MACHINE
c_func
(paren
id|ixdp2x01_init_machine
)paren
id|MACHINE_END
macro_line|#endif
macro_line|#ifdef CONFIG_ARCH_IXDP2801
id|MACHINE_START
c_func
(paren
id|IXDP2801
comma
l_string|&quot;Intel IXDP2801 Development Platform&quot;
)paren
id|MAINTAINER
c_func
(paren
l_string|&quot;MontaVista Software, Inc.&quot;
)paren
id|BOOT_MEM
c_func
(paren
l_int|0x00000000
comma
id|IXP2000_UART_PHYS_BASE
comma
id|IXP2000_UART_VIRT_BASE
)paren
id|BOOT_PARAMS
c_func
(paren
l_int|0x00000100
)paren
id|MAPIO
c_func
(paren
id|ixdp2x01_map_io
)paren
id|INITIRQ
c_func
(paren
id|ixdp2x01_init_irq
)paren
dot
id|timer
op_assign
op_amp
id|ixdp2x01_timer
comma
id|INIT_MACHINE
c_func
(paren
id|ixdp2x01_init_machine
)paren
id|MACHINE_END
macro_line|#endif
eof
