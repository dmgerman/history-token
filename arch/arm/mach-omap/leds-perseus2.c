multiline_comment|/*&n; * linux/arch/arm/mach-omap/leds-perseus2.c&n; *&n; * Copyright 2003 by Texas Instruments Incorporated&n; *&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/kernel_stat.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/leds.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/arch/omap-perseus2.h&gt;
macro_line|#include &quot;leds.h&quot;
DECL|function|perseus2_leds_event
r_void
id|perseus2_leds_event
c_func
(paren
id|led_event_t
id|evt
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_static
r_int
r_int
id|hw_led_state
op_assign
l_int|0
suffix:semicolon
id|local_irq_save
c_func
(paren
id|flags
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|evt
)paren
(brace
r_case
id|led_start
suffix:colon
id|hw_led_state
op_or_assign
id|OMAP730_FPGA_LED_STARTSTOP
suffix:semicolon
r_break
suffix:semicolon
r_case
id|led_stop
suffix:colon
id|hw_led_state
op_and_assign
op_complement
id|OMAP730_FPGA_LED_STARTSTOP
suffix:semicolon
r_break
suffix:semicolon
r_case
id|led_claim
suffix:colon
id|hw_led_state
op_or_assign
id|OMAP730_FPGA_LED_CLAIMRELEASE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|led_release
suffix:colon
id|hw_led_state
op_and_assign
op_complement
id|OMAP730_FPGA_LED_CLAIMRELEASE
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef CONFIG_LEDS_TIMER
r_case
id|led_timer
suffix:colon
multiline_comment|/*&n;&t;&t; * Toggle Timer LED&n;&t;&t; */
r_if
c_cond
(paren
id|hw_led_state
op_amp
id|OMAP730_FPGA_LED_TIMER
)paren
id|hw_led_state
op_and_assign
op_complement
id|OMAP730_FPGA_LED_TIMER
suffix:semicolon
r_else
id|hw_led_state
op_or_assign
id|OMAP730_FPGA_LED_TIMER
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_LEDS_CPU
r_case
id|led_idle_start
suffix:colon
id|hw_led_state
op_or_assign
id|OMAP730_FPGA_LED_IDLE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|led_idle_end
suffix:colon
id|hw_led_state
op_and_assign
op_complement
id|OMAP730_FPGA_LED_IDLE
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_case
id|led_halted
suffix:colon
r_if
c_cond
(paren
id|hw_led_state
op_amp
id|OMAP730_FPGA_LED_HALTED
)paren
id|hw_led_state
op_and_assign
op_complement
id|OMAP730_FPGA_LED_HALTED
suffix:semicolon
r_else
id|hw_led_state
op_or_assign
id|OMAP730_FPGA_LED_HALTED
suffix:semicolon
r_break
suffix:semicolon
r_case
id|led_green_on
suffix:colon
r_break
suffix:semicolon
r_case
id|led_green_off
suffix:colon
r_break
suffix:semicolon
r_case
id|led_amber_on
suffix:colon
r_break
suffix:semicolon
r_case
id|led_amber_off
suffix:colon
r_break
suffix:semicolon
r_case
id|led_red_on
suffix:colon
r_break
suffix:semicolon
r_case
id|led_red_off
suffix:colon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
multiline_comment|/*&n;&t; *  Actually burn the LEDs&n;&t; */
id|__raw_writew
c_func
(paren
op_complement
id|hw_led_state
op_amp
l_int|0xffff
comma
id|OMAP730_FPGA_LEDS
)paren
suffix:semicolon
id|local_irq_restore
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
eof
