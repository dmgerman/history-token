multiline_comment|/* linux/arch/arm/mach-s3c2410/irq.c&n; *&n; * Copyright (c) 2003,2004 Simtec Electronics&n; *&t;Ben Dooks &lt;ben@simtec.co.uk&gt;&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n; *&n; * Changelog:&n; *&n; *   22-Jul-2004  Ben Dooks &lt;ben@simtec.co.uk&gt;&n; *                Fixed compile warnings&n; *&n; *   22-Jul-2004  Roc Wu &lt;cooloney@yahoo.com.cn&gt;&n; *                Fixed s3c_extirq_type&n; *&n; *   21-Jul-2004  Arnaud Patard (Rtp) &lt;arnaud.patard@rtp-net.org&gt;&n; *                Addition of ADC/TC demux&n; *&n; *   04-Oct-2004  Klaus Fetscher &lt;k.fetscher@fetron.de&gt;&n; *&t;&t;  Fix for set_irq_type() on low EINT numbers&n; *&n; *   05-Oct-2004  Ben Dooks &lt;ben@simtec.co.uk&gt;&n; *&t;&t;  Tidy up KF&squot;s patch and sort out new release&n; *&n; *   05-Oct-2004  Ben Dooks &lt;ben@simtec.co.uk&gt;&n; *&t;&t;  Add support for power management controls&n; *&n; *   04-Nov-2004  Ben Dooks&n; *&t;&t;  Fix standard IRQ wake for EINT0..4 and RTC&n;*/
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;linux/sysdev.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/mach/irq.h&gt;
macro_line|#include &lt;asm/arch/regs-irq.h&gt;
macro_line|#include &lt;asm/arch/regs-gpio.h&gt;
macro_line|#include &quot;pm.h&quot;
DECL|macro|irqdbf
mdefine_line|#define irqdbf(x...)
DECL|macro|irqdbf2
mdefine_line|#define irqdbf2(x...)
DECL|macro|EXTINT_OFF
mdefine_line|#define EXTINT_OFF (IRQ_EINT4 - 4)
multiline_comment|/* wakeup irq control */
macro_line|#ifdef CONFIG_PM
multiline_comment|/* state for IRQs over sleep */
multiline_comment|/* default is to allow for EINT0..EINT15, and IRQ_RTC as wakeup sources&n; *&n; * set bit to 1 in allow bitfield to enable the wakeup settings on it&n;*/
DECL|variable|s3c_irqwake_intallow
r_int
r_int
id|s3c_irqwake_intallow
op_assign
l_int|1L
op_lshift
(paren
id|IRQ_RTC
op_minus
id|IRQ_EINT0
)paren
op_or
l_int|0xfL
suffix:semicolon
DECL|variable|s3c_irqwake_intmask
r_int
r_int
id|s3c_irqwake_intmask
op_assign
l_int|0xffffffffL
suffix:semicolon
DECL|variable|s3c_irqwake_eintallow
r_int
r_int
id|s3c_irqwake_eintallow
op_assign
l_int|0x0000fff0L
suffix:semicolon
DECL|variable|s3c_irqwake_eintmask
r_int
r_int
id|s3c_irqwake_eintmask
op_assign
l_int|0xffffffffL
suffix:semicolon
r_static
r_int
DECL|function|s3c_irq_wake
id|s3c_irq_wake
c_func
(paren
r_int
r_int
id|irqno
comma
r_int
r_int
id|state
)paren
(brace
r_int
r_int
id|irqbit
op_assign
l_int|1
op_lshift
(paren
id|irqno
op_minus
id|IRQ_EINT0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|s3c_irqwake_intallow
op_amp
id|irqbit
)paren
)paren
r_return
op_minus
id|ENOENT
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;wake %s for irq %d&bslash;n&quot;
comma
id|state
ques
c_cond
l_string|&quot;enabled&quot;
suffix:colon
l_string|&quot;disabled&quot;
comma
id|irqno
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|state
)paren
id|s3c_irqwake_intmask
op_or_assign
id|irqbit
suffix:semicolon
r_else
id|s3c_irqwake_intmask
op_and_assign
op_complement
id|irqbit
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|s3c_irqext_wake
id|s3c_irqext_wake
c_func
(paren
r_int
r_int
id|irqno
comma
r_int
r_int
id|state
)paren
(brace
r_int
r_int
id|bit
op_assign
l_int|1L
op_lshift
(paren
id|irqno
op_minus
id|EXTINT_OFF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|s3c_irqwake_eintallow
op_amp
id|bit
)paren
)paren
r_return
op_minus
id|ENOENT
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;wake %s for irq %d&bslash;n&quot;
comma
id|state
ques
c_cond
l_string|&quot;enabled&quot;
suffix:colon
l_string|&quot;disabled&quot;
comma
id|irqno
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|state
)paren
id|s3c_irqwake_eintmask
op_or_assign
id|bit
suffix:semicolon
r_else
id|s3c_irqwake_eintmask
op_and_assign
op_complement
id|bit
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#else
DECL|macro|s3c_irqext_wake
mdefine_line|#define s3c_irqext_wake NULL
DECL|macro|s3c_irq_wake
mdefine_line|#define s3c_irq_wake NULL
macro_line|#endif
r_static
r_void
DECL|function|s3c_irq_mask
id|s3c_irq_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
id|irqno
op_sub_assign
id|IRQ_EINT0
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|mask
op_or_assign
l_int|1UL
op_lshift
id|irqno
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
comma
id|S3C2410_INTMSK
)paren
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|s3c_irq_ack
id|s3c_irq_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|bitval
op_assign
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|IRQ_EINT0
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bitval
comma
id|S3C2410_SRCPND
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bitval
comma
id|S3C2410_INTPND
)paren
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|s3c_irq_maskack
id|s3c_irq_maskack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|bitval
op_assign
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|IRQ_EINT0
)paren
suffix:semicolon
r_int
r_int
id|mask
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
op_or
id|bitval
comma
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bitval
comma
id|S3C2410_SRCPND
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bitval
comma
id|S3C2410_INTPND
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_unmask
id|s3c_irq_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|irqno
op_ne
id|IRQ_TIMER4
op_logical_and
id|irqno
op_ne
id|IRQ_EINT8t23
)paren
id|irqdbf2
c_func
(paren
l_string|&quot;s3c_irq_unmask %d&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|irqno
op_sub_assign
id|IRQ_EINT0
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|mask
op_and_assign
op_complement
(paren
l_int|1UL
op_lshift
id|irqno
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
comma
id|S3C2410_INTMSK
)paren
suffix:semicolon
)brace
DECL|variable|s3c_irq_level_chip
r_static
r_struct
id|irqchip
id|s3c_irq_level_chip
op_assign
(brace
dot
id|ack
op_assign
id|s3c_irq_maskack
comma
dot
id|mask
op_assign
id|s3c_irq_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_unmask
comma
dot
id|wake
op_assign
id|s3c_irq_wake
)brace
suffix:semicolon
DECL|variable|s3c_irq_chip
r_static
r_struct
id|irqchip
id|s3c_irq_chip
op_assign
(brace
dot
id|ack
op_assign
id|s3c_irq_ack
comma
dot
id|mask
op_assign
id|s3c_irq_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_unmask
comma
dot
id|wake
op_assign
id|s3c_irq_wake
)brace
suffix:semicolon
multiline_comment|/* S3C2410_EINTMASK&n; * S3C2410_EINTPEND&n; */
r_static
r_void
DECL|function|s3c_irqext_mask
id|s3c_irqext_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
id|irqno
op_sub_assign
id|EXTINT_OFF
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_EINTMASK
)paren
suffix:semicolon
id|mask
op_or_assign
(paren
l_int|1UL
op_lshift
id|irqno
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
comma
id|S3C2410_EINTMASK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|irqno
op_le
(paren
id|IRQ_EINT7
op_minus
id|EXTINT_OFF
)paren
)paren
(brace
multiline_comment|/* check to see if all need masking */
r_if
c_cond
(paren
(paren
id|mask
op_amp
(paren
l_int|0xf
op_lshift
l_int|4
)paren
)paren
op_eq
(paren
l_int|0xf
op_lshift
l_int|4
)paren
)paren
(brace
multiline_comment|/* all masked, mask the parent */
id|s3c_irq_mask
c_func
(paren
id|IRQ_EINT4t7
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* todo: the same check as above for the rest of the irq regs...*/
)brace
)brace
r_static
r_void
DECL|function|s3c_irqext_ack
id|s3c_irqext_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|req
suffix:semicolon
r_int
r_int
id|bit
suffix:semicolon
r_int
r_int
id|mask
suffix:semicolon
id|bit
op_assign
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|EXTINT_OFF
)paren
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_EINTMASK
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bit
comma
id|S3C2410_EINTPEND
)paren
suffix:semicolon
id|req
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_EINTPEND
)paren
suffix:semicolon
id|req
op_and_assign
op_complement
id|mask
suffix:semicolon
multiline_comment|/* not sure if we should be acking the parent irq... */
r_if
c_cond
(paren
id|irqno
op_le
id|IRQ_EINT7
)paren
(brace
r_if
c_cond
(paren
(paren
id|req
op_amp
l_int|0xf0
)paren
op_eq
l_int|0
)paren
id|s3c_irq_ack
c_func
(paren
id|IRQ_EINT4t7
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|req
op_rshift
l_int|8
)paren
op_eq
l_int|0
)paren
id|s3c_irq_ack
c_func
(paren
id|IRQ_EINT8t23
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|s3c_irqext_unmask
id|s3c_irqext_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
id|irqno
op_sub_assign
id|EXTINT_OFF
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_EINTMASK
)paren
suffix:semicolon
id|mask
op_and_assign
op_complement
(paren
l_int|1UL
op_lshift
id|irqno
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
comma
id|S3C2410_EINTMASK
)paren
suffix:semicolon
id|s3c_irq_unmask
c_func
(paren
(paren
id|irqno
op_le
(paren
id|IRQ_EINT7
op_minus
id|EXTINT_OFF
)paren
)paren
ques
c_cond
id|IRQ_EINT4t7
suffix:colon
id|IRQ_EINT8t23
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|s3c_irqext_type
id|s3c_irqext_type
c_func
(paren
r_int
r_int
id|irq
comma
r_int
r_int
id|type
)paren
(brace
r_int
r_int
id|extint_reg
suffix:semicolon
r_int
r_int
id|gpcon_reg
suffix:semicolon
r_int
r_int
id|gpcon_offset
comma
id|extint_offset
suffix:semicolon
r_int
r_int
id|newvalue
op_assign
l_int|0
comma
id|value
suffix:semicolon
r_if
c_cond
(paren
(paren
id|irq
op_ge
id|IRQ_EINT0
)paren
op_logical_and
(paren
id|irq
op_le
id|IRQ_EINT3
)paren
)paren
(brace
id|gpcon_reg
op_assign
id|S3C2410_GPFCON
suffix:semicolon
id|extint_reg
op_assign
id|S3C2410_EXTINT0
suffix:semicolon
id|gpcon_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT0
)paren
op_star
l_int|2
suffix:semicolon
id|extint_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT0
)paren
op_star
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|irq
op_ge
id|IRQ_EINT4
)paren
op_logical_and
(paren
id|irq
op_le
id|IRQ_EINT7
)paren
)paren
(brace
id|gpcon_reg
op_assign
id|S3C2410_GPFCON
suffix:semicolon
id|extint_reg
op_assign
id|S3C2410_EXTINT0
suffix:semicolon
id|gpcon_offset
op_assign
(paren
id|irq
op_minus
(paren
id|EXTINT_OFF
)paren
)paren
op_star
l_int|2
suffix:semicolon
id|extint_offset
op_assign
(paren
id|irq
op_minus
(paren
id|EXTINT_OFF
)paren
)paren
op_star
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|irq
op_ge
id|IRQ_EINT8
)paren
op_logical_and
(paren
id|irq
op_le
id|IRQ_EINT15
)paren
)paren
(brace
id|gpcon_reg
op_assign
id|S3C2410_GPGCON
suffix:semicolon
id|extint_reg
op_assign
id|S3C2410_EXTINT1
suffix:semicolon
id|gpcon_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT8
)paren
op_star
l_int|2
suffix:semicolon
id|extint_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT8
)paren
op_star
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|irq
op_ge
id|IRQ_EINT16
)paren
op_logical_and
(paren
id|irq
op_le
id|IRQ_EINT23
)paren
)paren
(brace
id|gpcon_reg
op_assign
id|S3C2410_GPGCON
suffix:semicolon
id|extint_reg
op_assign
id|S3C2410_EXTINT2
suffix:semicolon
id|gpcon_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT8
)paren
op_star
l_int|2
suffix:semicolon
id|extint_offset
op_assign
(paren
id|irq
op_minus
id|IRQ_EINT16
)paren
op_star
l_int|4
suffix:semicolon
)brace
r_else
r_return
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* Set the GPIO to external interrupt mode */
id|value
op_assign
id|__raw_readl
c_func
(paren
id|gpcon_reg
)paren
suffix:semicolon
id|value
op_assign
(paren
id|value
op_amp
op_complement
(paren
l_int|3
op_lshift
id|gpcon_offset
)paren
)paren
op_or
(paren
l_int|0x02
op_lshift
id|gpcon_offset
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|value
comma
id|gpcon_reg
)paren
suffix:semicolon
multiline_comment|/* Set the external interrupt to pointed trigger type */
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|IRQT_NOEDGE
suffix:colon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;No edge setting!&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQT_RISING
suffix:colon
id|newvalue
op_assign
id|S3C2410_EXTINT_RISEEDGE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQT_FALLING
suffix:colon
id|newvalue
op_assign
id|S3C2410_EXTINT_FALLEDGE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQT_BOTHEDGE
suffix:colon
id|newvalue
op_assign
id|S3C2410_EXTINT_BOTHEDGE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQT_LOW
suffix:colon
id|newvalue
op_assign
id|S3C2410_EXTINT_LOWLEV
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQT_HIGH
suffix:colon
id|newvalue
op_assign
id|S3C2410_EXTINT_HILEV
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;No such irq type %d&quot;
comma
id|type
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|value
op_assign
id|__raw_readl
c_func
(paren
id|extint_reg
)paren
suffix:semicolon
id|value
op_assign
(paren
id|value
op_amp
op_complement
(paren
l_int|7
op_lshift
id|extint_offset
)paren
)paren
op_or
(paren
id|newvalue
op_lshift
id|extint_offset
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|value
comma
id|extint_reg
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|s3c_irqext_chip
r_static
r_struct
id|irqchip
id|s3c_irqext_chip
op_assign
(brace
dot
id|mask
op_assign
id|s3c_irqext_mask
comma
dot
id|unmask
op_assign
id|s3c_irqext_unmask
comma
dot
id|ack
op_assign
id|s3c_irqext_ack
comma
dot
id|type
op_assign
id|s3c_irqext_type
comma
dot
id|wake
op_assign
id|s3c_irqext_wake
)brace
suffix:semicolon
DECL|variable|s3c_irq_eint0t4
r_static
r_struct
id|irqchip
id|s3c_irq_eint0t4
op_assign
(brace
dot
id|ack
op_assign
id|s3c_irq_ack
comma
dot
id|mask
op_assign
id|s3c_irq_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_unmask
comma
dot
id|wake
op_assign
id|s3c_irq_wake
comma
dot
id|type
op_assign
id|s3c_irqext_type
comma
)brace
suffix:semicolon
multiline_comment|/* mask values for the parent registers for each of the interrupt types */
DECL|macro|INTMSK_UART0
mdefine_line|#define INTMSK_UART0&t; (1UL &lt;&lt; (IRQ_UART0 - IRQ_EINT0))
DECL|macro|INTMSK_UART1
mdefine_line|#define INTMSK_UART1&t; (1UL &lt;&lt; (IRQ_UART1 - IRQ_EINT0))
DECL|macro|INTMSK_UART2
mdefine_line|#define INTMSK_UART2&t; (1UL &lt;&lt; (IRQ_UART2 - IRQ_EINT0))
DECL|macro|INTMSK_ADCPARENT
mdefine_line|#define INTMSK_ADCPARENT (1UL &lt;&lt; (IRQ_ADCPARENT - IRQ_EINT0))
DECL|macro|INTMSK_LCD
mdefine_line|#define INTMSK_LCD&t; (1UL &lt;&lt; (IRQ_LCD - IRQ_EINT0))
r_static
r_inline
r_void
DECL|function|s3c_irqsub_mask
id|s3c_irqsub_mask
c_func
(paren
r_int
r_int
id|irqno
comma
r_int
r_int
id|parentbit
comma
r_int
id|subcheck
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
r_int
r_int
id|submask
suffix:semicolon
id|submask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|submask
op_or_assign
(paren
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|IRQ_S3CUART_RX0
)paren
)paren
suffix:semicolon
multiline_comment|/* check to see if we need to mask the parent IRQ */
r_if
c_cond
(paren
(paren
id|submask
op_amp
id|subcheck
)paren
op_eq
id|subcheck
)paren
(brace
id|__raw_writel
c_func
(paren
id|mask
op_or
id|parentbit
comma
id|S3C2410_INTMSK
)paren
suffix:semicolon
)brace
multiline_comment|/* write back masks */
id|__raw_writel
c_func
(paren
id|submask
comma
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|s3c_irqsub_unmask
id|s3c_irqsub_unmask
c_func
(paren
r_int
r_int
id|irqno
comma
r_int
r_int
id|parentbit
)paren
(brace
r_int
r_int
id|mask
suffix:semicolon
r_int
r_int
id|submask
suffix:semicolon
id|submask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
id|mask
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTMSK
)paren
suffix:semicolon
id|submask
op_and_assign
op_complement
(paren
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|IRQ_S3CUART_RX0
)paren
)paren
suffix:semicolon
id|mask
op_and_assign
op_complement
id|parentbit
suffix:semicolon
multiline_comment|/* write back masks */
id|__raw_writel
c_func
(paren
id|submask
comma
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|mask
comma
id|S3C2410_INTMSK
)paren
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|s3c_irqsub_maskack
id|s3c_irqsub_maskack
c_func
(paren
r_int
r_int
id|irqno
comma
r_int
r_int
id|parentmask
comma
r_int
r_int
id|group
)paren
(brace
r_int
r_int
id|bit
op_assign
l_int|1UL
op_lshift
(paren
id|irqno
op_minus
id|IRQ_S3CUART_RX0
)paren
suffix:semicolon
id|s3c_irqsub_mask
c_func
(paren
id|irqno
comma
id|parentmask
comma
id|group
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|bit
comma
id|S3C2410_SUBSRCPND
)paren
suffix:semicolon
multiline_comment|/* only ack parent if we&squot;ve got all the irqs (seems we must&n;&t; * ack, all and hope that the irq system retriggers ok when&n;&t; * the interrupt goes off again)&n;&t; */
r_if
c_cond
(paren
l_int|1
)paren
(brace
id|__raw_writel
c_func
(paren
id|parentmask
comma
id|S3C2410_SRCPND
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|parentmask
comma
id|S3C2410_INTPND
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* UART0 */
r_static
r_void
DECL|function|s3c_irq_uart0_mask
id|s3c_irq_uart0_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_mask
c_func
(paren
id|irqno
comma
id|INTMSK_UART0
comma
l_int|7
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart0_unmask
id|s3c_irq_uart0_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_unmask
c_func
(paren
id|irqno
comma
id|INTMSK_UART0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart0_ack
id|s3c_irq_uart0_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_maskack
c_func
(paren
id|irqno
comma
id|INTMSK_UART0
comma
l_int|7
)paren
suffix:semicolon
)brace
DECL|variable|s3c_irq_uart0
r_static
r_struct
id|irqchip
id|s3c_irq_uart0
op_assign
(brace
dot
id|mask
op_assign
id|s3c_irq_uart0_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_uart0_unmask
comma
dot
id|ack
op_assign
id|s3c_irq_uart0_ack
comma
)brace
suffix:semicolon
multiline_comment|/* UART1 */
r_static
r_void
DECL|function|s3c_irq_uart1_mask
id|s3c_irq_uart1_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_mask
c_func
(paren
id|irqno
comma
id|INTMSK_UART1
comma
l_int|7
op_lshift
l_int|3
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart1_unmask
id|s3c_irq_uart1_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_unmask
c_func
(paren
id|irqno
comma
id|INTMSK_UART1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart1_ack
id|s3c_irq_uart1_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_maskack
c_func
(paren
id|irqno
comma
id|INTMSK_UART1
comma
l_int|7
op_lshift
l_int|3
)paren
suffix:semicolon
)brace
DECL|variable|s3c_irq_uart1
r_static
r_struct
id|irqchip
id|s3c_irq_uart1
op_assign
(brace
dot
id|mask
op_assign
id|s3c_irq_uart1_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_uart1_unmask
comma
dot
id|ack
op_assign
id|s3c_irq_uart1_ack
comma
)brace
suffix:semicolon
multiline_comment|/* UART2 */
r_static
r_void
DECL|function|s3c_irq_uart2_mask
id|s3c_irq_uart2_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_mask
c_func
(paren
id|irqno
comma
id|INTMSK_UART2
comma
l_int|7
op_lshift
l_int|6
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart2_unmask
id|s3c_irq_uart2_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_unmask
c_func
(paren
id|irqno
comma
id|INTMSK_UART2
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_uart2_ack
id|s3c_irq_uart2_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_maskack
c_func
(paren
id|irqno
comma
id|INTMSK_UART2
comma
l_int|7
op_lshift
l_int|6
)paren
suffix:semicolon
)brace
DECL|variable|s3c_irq_uart2
r_static
r_struct
id|irqchip
id|s3c_irq_uart2
op_assign
(brace
dot
id|mask
op_assign
id|s3c_irq_uart2_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_uart2_unmask
comma
dot
id|ack
op_assign
id|s3c_irq_uart2_ack
comma
)brace
suffix:semicolon
multiline_comment|/* ADC and Touchscreen */
r_static
r_void
DECL|function|s3c_irq_adc_mask
id|s3c_irq_adc_mask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_mask
c_func
(paren
id|irqno
comma
id|INTMSK_ADCPARENT
comma
l_int|3
op_lshift
l_int|9
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_adc_unmask
id|s3c_irq_adc_unmask
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_unmask
c_func
(paren
id|irqno
comma
id|INTMSK_ADCPARENT
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_adc_ack
id|s3c_irq_adc_ack
c_func
(paren
r_int
r_int
id|irqno
)paren
(brace
id|s3c_irqsub_maskack
c_func
(paren
id|irqno
comma
id|INTMSK_ADCPARENT
comma
l_int|3
op_lshift
l_int|9
)paren
suffix:semicolon
)brace
DECL|variable|s3c_irq_adc
r_static
r_struct
id|irqchip
id|s3c_irq_adc
op_assign
(brace
dot
id|mask
op_assign
id|s3c_irq_adc_mask
comma
dot
id|unmask
op_assign
id|s3c_irq_adc_unmask
comma
dot
id|ack
op_assign
id|s3c_irq_adc_ack
comma
)brace
suffix:semicolon
multiline_comment|/* irq demux for adc */
DECL|function|s3c_irq_demux_adc
r_static
r_void
id|s3c_irq_demux_adc
c_func
(paren
r_int
r_int
id|irq
comma
r_struct
id|irqdesc
op_star
id|desc
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|subsrc
comma
id|submsk
suffix:semicolon
r_int
r_int
id|offset
op_assign
l_int|9
suffix:semicolon
r_struct
id|irqdesc
op_star
id|mydesc
suffix:semicolon
multiline_comment|/* read the current pending interrupts, and the mask&n;&t; * for what it is available */
id|subsrc
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_SUBSRCPND
)paren
suffix:semicolon
id|submsk
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
id|subsrc
op_and_assign
op_complement
id|submsk
suffix:semicolon
id|subsrc
op_rshift_assign
id|offset
suffix:semicolon
id|subsrc
op_and_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|subsrc
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|subsrc
op_amp
l_int|1
)paren
(brace
id|mydesc
op_assign
id|irq_desc
op_plus
id|IRQ_TC
suffix:semicolon
id|mydesc
op_member_access_from_pointer
id|handle
c_func
(paren
id|IRQ_TC
comma
id|mydesc
comma
id|regs
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|subsrc
op_amp
l_int|2
)paren
(brace
id|mydesc
op_assign
id|irq_desc
op_plus
id|IRQ_ADC
suffix:semicolon
id|mydesc
op_member_access_from_pointer
id|handle
c_func
(paren
id|IRQ_ADC
comma
id|mydesc
comma
id|regs
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|s3c_irq_demux_uart
r_static
r_void
id|s3c_irq_demux_uart
c_func
(paren
r_int
r_int
id|start
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|subsrc
comma
id|submsk
suffix:semicolon
r_int
r_int
id|offset
op_assign
id|start
op_minus
id|IRQ_S3CUART_RX0
suffix:semicolon
r_struct
id|irqdesc
op_star
id|desc
suffix:semicolon
multiline_comment|/* read the current pending interrupts, and the mask&n;&t; * for what it is available */
id|subsrc
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_SUBSRCPND
)paren
suffix:semicolon
id|submsk
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTSUBMSK
)paren
suffix:semicolon
id|irqdbf2
c_func
(paren
l_string|&quot;s3c_irq_demux_uart: start=%d (%d), subsrc=0x%08x,0x%08x&bslash;n&quot;
comma
id|start
comma
id|offset
comma
id|subsrc
comma
id|submsk
)paren
suffix:semicolon
id|subsrc
op_and_assign
op_complement
id|submsk
suffix:semicolon
id|subsrc
op_rshift_assign
id|offset
suffix:semicolon
id|subsrc
op_and_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|subsrc
op_ne
l_int|0
)paren
(brace
id|desc
op_assign
id|irq_desc
op_plus
id|start
suffix:semicolon
r_if
c_cond
(paren
id|subsrc
op_amp
l_int|1
)paren
id|desc
op_member_access_from_pointer
id|handle
c_func
(paren
id|start
comma
id|desc
comma
id|regs
)paren
suffix:semicolon
id|desc
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|subsrc
op_amp
l_int|2
)paren
id|desc
op_member_access_from_pointer
id|handle
c_func
(paren
id|start
op_plus
l_int|1
comma
id|desc
comma
id|regs
)paren
suffix:semicolon
id|desc
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|subsrc
op_amp
l_int|4
)paren
id|desc
op_member_access_from_pointer
id|handle
c_func
(paren
id|start
op_plus
l_int|2
comma
id|desc
comma
id|regs
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* uart demux entry points */
r_static
r_void
DECL|function|s3c_irq_demux_uart0
id|s3c_irq_demux_uart0
c_func
(paren
r_int
r_int
id|irq
comma
r_struct
id|irqdesc
op_star
id|desc
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|irq
op_assign
id|irq
suffix:semicolon
id|s3c_irq_demux_uart
c_func
(paren
id|IRQ_S3CUART_RX0
comma
id|regs
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_demux_uart1
id|s3c_irq_demux_uart1
c_func
(paren
r_int
r_int
id|irq
comma
r_struct
id|irqdesc
op_star
id|desc
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|irq
op_assign
id|irq
suffix:semicolon
id|s3c_irq_demux_uart
c_func
(paren
id|IRQ_S3CUART_RX1
comma
id|regs
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|s3c_irq_demux_uart2
id|s3c_irq_demux_uart2
c_func
(paren
r_int
r_int
id|irq
comma
r_struct
id|irqdesc
op_star
id|desc
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|irq
op_assign
id|irq
suffix:semicolon
id|s3c_irq_demux_uart
c_func
(paren
id|IRQ_S3CUART_RX2
comma
id|regs
)paren
suffix:semicolon
)brace
multiline_comment|/* s3c24xx_init_irq&n; *&n; * Initialise S3C2410 IRQ system&n;*/
DECL|function|s3c24xx_init_irq
r_void
id|__init
id|s3c24xx_init_irq
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|pend
suffix:semicolon
r_int
r_int
id|last
suffix:semicolon
r_int
id|irqno
suffix:semicolon
r_int
id|i
suffix:semicolon
id|irqdbf
c_func
(paren
l_string|&quot;s3c2410_init_irq: clearing interrupt status flags&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* first, clear all interrupts pending... */
id|last
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pend
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_EINTPEND
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pend
op_eq
l_int|0
op_logical_or
id|pend
op_eq
id|last
)paren
r_break
suffix:semicolon
id|__raw_writel
c_func
(paren
id|pend
comma
id|S3C2410_EINTPEND
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;irq: clearing pending ext status %08x&bslash;n&quot;
comma
(paren
r_int
)paren
id|pend
)paren
suffix:semicolon
id|last
op_assign
id|pend
suffix:semicolon
)brace
id|last
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pend
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_INTPND
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pend
op_eq
l_int|0
op_logical_or
id|pend
op_eq
id|last
)paren
r_break
suffix:semicolon
id|__raw_writel
c_func
(paren
id|pend
comma
id|S3C2410_SRCPND
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|pend
comma
id|S3C2410_INTPND
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;irq: clearing pending status %08x&bslash;n&quot;
comma
(paren
r_int
)paren
id|pend
)paren
suffix:semicolon
id|last
op_assign
id|pend
suffix:semicolon
)brace
id|last
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pend
op_assign
id|__raw_readl
c_func
(paren
id|S3C2410_SUBSRCPND
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pend
op_eq
l_int|0
op_logical_or
id|pend
op_eq
id|last
)paren
r_break
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;irq: clearing subpending status %08x&bslash;n&quot;
comma
(paren
r_int
)paren
id|pend
)paren
suffix:semicolon
id|__raw_writel
c_func
(paren
id|pend
comma
id|S3C2410_SUBSRCPND
)paren
suffix:semicolon
id|last
op_assign
id|pend
suffix:semicolon
)brace
multiline_comment|/* register the main interrupts */
id|irqdbf
c_func
(paren
l_string|&quot;s3c2410_init_irq: registering s3c2410 interrupt handlers&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_BATT_FLT
suffix:semicolon
id|irqno
op_le
id|IRQ_ADCPARENT
suffix:semicolon
id|irqno
op_increment
)paren
(brace
multiline_comment|/* set all the s3c2410 internal irqs */
r_switch
c_cond
(paren
id|irqno
)paren
(brace
multiline_comment|/* deal with the special IRQs (cascaded) */
r_case
id|IRQ_UART0
suffix:colon
r_case
id|IRQ_UART1
suffix:colon
r_case
id|IRQ_UART2
suffix:colon
r_case
id|IRQ_LCD
suffix:colon
r_case
id|IRQ_ADCPARENT
suffix:colon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_level_chip
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_level_IRQ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IRQ_RESERVED6
suffix:colon
r_case
id|IRQ_RESERVED24
suffix:colon
multiline_comment|/* no IRQ here */
r_break
suffix:semicolon
r_default
suffix:colon
singleline_comment|//irqdbf(&quot;registering irq %d (s3c irq)&bslash;n&quot;, irqno);
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_chip
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_edge_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* setup the cascade irq handlers */
id|set_irq_chained_handler
c_func
(paren
id|IRQ_UART0
comma
id|s3c_irq_demux_uart0
)paren
suffix:semicolon
id|set_irq_chained_handler
c_func
(paren
id|IRQ_UART1
comma
id|s3c_irq_demux_uart1
)paren
suffix:semicolon
id|set_irq_chained_handler
c_func
(paren
id|IRQ_UART2
comma
id|s3c_irq_demux_uart2
)paren
suffix:semicolon
id|set_irq_chained_handler
c_func
(paren
id|IRQ_ADCPARENT
comma
id|s3c_irq_demux_adc
)paren
suffix:semicolon
multiline_comment|/* external interrupts */
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_EINT0
suffix:semicolon
id|irqno
op_le
id|IRQ_EINT3
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (ext int)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_eint0t4
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_edge_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_EINT4
suffix:semicolon
id|irqno
op_le
id|IRQ_EINT23
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (extended s3c irq)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irqext_chip
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_edge_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
multiline_comment|/* register the uart interrupts */
id|irqdbf
c_func
(paren
l_string|&quot;s3c2410: registering external interrupts&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_S3CUART_RX0
suffix:semicolon
id|irqno
op_le
id|IRQ_S3CUART_ERR0
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (s3c uart0 irq)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_uart0
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_level_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_S3CUART_RX1
suffix:semicolon
id|irqno
op_le
id|IRQ_S3CUART_ERR1
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (s3c uart1 irq)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_uart1
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_level_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_S3CUART_RX2
suffix:semicolon
id|irqno
op_le
id|IRQ_S3CUART_ERR2
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (s3c uart2 irq)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_uart2
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_level_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|irqno
op_assign
id|IRQ_TC
suffix:semicolon
id|irqno
op_le
id|IRQ_ADC
suffix:semicolon
id|irqno
op_increment
)paren
(brace
id|irqdbf
c_func
(paren
l_string|&quot;registering irq %d (s3c adc irq)&bslash;n&quot;
comma
id|irqno
)paren
suffix:semicolon
id|set_irq_chip
c_func
(paren
id|irqno
comma
op_amp
id|s3c_irq_adc
)paren
suffix:semicolon
id|set_irq_handler
c_func
(paren
id|irqno
comma
id|do_edge_IRQ
)paren
suffix:semicolon
id|set_irq_flags
c_func
(paren
id|irqno
comma
id|IRQF_VALID
)paren
suffix:semicolon
)brace
id|irqdbf
c_func
(paren
l_string|&quot;s3c2410: registered interrupt handlers&bslash;n&quot;
)paren
suffix:semicolon
)brace
eof
