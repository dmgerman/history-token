multiline_comment|/* linux/arch/arm/mach-s3c2410/mach-n30.c&n; *&n; * Copyright (c) 2003-2005 Simtec Electronics&n; *&t;Ben Dooks &lt;ben@simtec.co.uk&gt;&n; *&n; * Copyright (c) 2005 Christer Weinigel &lt;christer@weinigel.se&gt;&n; *&n; * There is a wiki with more information about the n30 port at&n; * http://handhelds.org/moin/moin.cgi/AcerN30Documentation .&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License version 2 as&n; * published by the Free Software Foundation.&n;*/
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/list.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/kthread.h&gt;
macro_line|#include &lt;asm/mach/arch.h&gt;
macro_line|#include &lt;asm/mach/map.h&gt;
macro_line|#include &lt;asm/mach/irq.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/hardware/iomd.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/mach-types.h&gt;
macro_line|#include &lt;asm/arch/regs-serial.h&gt;
macro_line|#include &lt;asm/arch/regs-gpio.h&gt;
macro_line|#include &lt;asm/arch/iic.h&gt;
macro_line|#include &lt;linux/serial_core.h&gt;
macro_line|#include &quot;s3c2410.h&quot;
macro_line|#include &quot;clock.h&quot;
macro_line|#include &quot;devs.h&quot;
macro_line|#include &quot;cpu.h&quot;
DECL|variable|__initdata
r_static
r_struct
id|map_desc
id|n30_iodesc
(braket
)braket
id|__initdata
op_assign
(brace
multiline_comment|/* nothing here yet */
)brace
suffix:semicolon
DECL|variable|n30_uartcfgs
r_static
r_struct
id|s3c2410_uartcfg
id|n30_uartcfgs
(braket
)braket
op_assign
(brace
multiline_comment|/* Normal serial port */
(braket
l_int|0
)braket
op_assign
(brace
dot
id|hwport
op_assign
l_int|0
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|ucon
op_assign
l_int|0x2c5
comma
dot
id|ulcon
op_assign
l_int|0x03
comma
dot
id|ufcon
op_assign
l_int|0x51
comma
)brace
comma
multiline_comment|/* IR port */
(braket
l_int|1
)braket
op_assign
(brace
dot
id|hwport
op_assign
l_int|1
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|uart_flags
op_assign
id|UPF_CONS_FLOW
comma
dot
id|ucon
op_assign
l_int|0x2c5
comma
dot
id|ulcon
op_assign
l_int|0x43
comma
dot
id|ufcon
op_assign
l_int|0x51
comma
)brace
comma
multiline_comment|/* The BlueTooth controller is connected to port 2 */
(braket
l_int|2
)braket
op_assign
(brace
dot
id|hwport
op_assign
l_int|2
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|ucon
op_assign
l_int|0x2c5
comma
dot
id|ulcon
op_assign
l_int|0x03
comma
dot
id|ufcon
op_assign
l_int|0x51
comma
)brace
comma
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|platform_device
op_star
id|n30_devices
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|s3c_device_usb
comma
op_amp
id|s3c_device_lcd
comma
op_amp
id|s3c_device_wdt
comma
op_amp
id|s3c_device_i2c
comma
op_amp
id|s3c_device_iis
comma
op_amp
id|s3c_device_usbgadget
comma
)brace
suffix:semicolon
DECL|variable|n30_i2ccfg
r_static
r_struct
id|s3c2410_platform_i2c
id|n30_i2ccfg
op_assign
(brace
dot
id|flags
op_assign
l_int|0
comma
dot
id|slave_addr
op_assign
l_int|0x10
comma
dot
id|bus_freq
op_assign
l_int|10
op_star
l_int|1000
comma
dot
id|max_freq
op_assign
l_int|10
op_star
l_int|1000
comma
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|s3c24xx_board
id|n30_board
id|__initdata
op_assign
(brace
dot
id|devices
op_assign
id|n30_devices
comma
dot
id|devices_count
op_assign
id|ARRAY_SIZE
c_func
(paren
id|n30_devices
)paren
)brace
suffix:semicolon
DECL|function|n30_map_io
r_void
id|__init
id|n30_map_io
c_func
(paren
r_void
)paren
(brace
id|s3c24xx_init_io
c_func
(paren
id|n30_iodesc
comma
id|ARRAY_SIZE
c_func
(paren
id|n30_iodesc
)paren
)paren
suffix:semicolon
id|s3c24xx_init_clocks
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|s3c24xx_init_uarts
c_func
(paren
id|n30_uartcfgs
comma
id|ARRAY_SIZE
c_func
(paren
id|n30_uartcfgs
)paren
)paren
suffix:semicolon
id|s3c24xx_set_board
c_func
(paren
op_amp
id|n30_board
)paren
suffix:semicolon
)brace
DECL|function|n30_init_irq
r_void
id|__init
id|n30_init_irq
c_func
(paren
r_void
)paren
(brace
id|s3c24xx_init_irq
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|n30_usbstart_thread
r_static
r_int
id|n30_usbstart_thread
c_func
(paren
r_void
op_star
id|unused
)paren
(brace
multiline_comment|/* Turn off suspend on both USB ports, and switch the&n;&t; * selectable USB port to USB device mode. */
id|writel
c_func
(paren
id|readl
c_func
(paren
id|S3C2410_MISCCR
)paren
op_amp
op_complement
l_int|0x00003008
comma
id|S3C2410_MISCCR
)paren
suffix:semicolon
multiline_comment|/* Turn off the D+ pull up for 3 seconds so that the USB host&n;&t; * at the other end will do a rescan of the USB bus.  */
id|s3c2410_gpio_setpin
c_func
(paren
id|S3C2410_GPB3
comma
l_int|0
)paren
suffix:semicolon
id|msleep_interruptible
c_func
(paren
l_int|3
op_star
id|HZ
)paren
suffix:semicolon
id|s3c2410_gpio_setpin
c_func
(paren
id|S3C2410_GPB3
comma
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|n30_init
r_void
id|__init
id|n30_init
c_func
(paren
r_void
)paren
(brace
id|s3c_device_i2c.dev.platform_data
op_assign
op_amp
id|n30_i2ccfg
suffix:semicolon
id|kthread_run
c_func
(paren
id|n30_usbstart_thread
comma
l_int|NULL
comma
l_string|&quot;n30_usbstart&quot;
)paren
suffix:semicolon
)brace
id|MACHINE_START
c_func
(paren
id|N30
comma
l_string|&quot;Acer-N30&quot;
)paren
id|MAINTAINER
c_func
(paren
l_string|&quot;Christer Weinigel &lt;christer@weinigel.se&gt;, Ben Dooks &lt;ben-linux@fluff.org&gt;&quot;
)paren
id|BOOT_MEM
c_func
(paren
id|S3C2410_SDRAM_PA
comma
id|S3C2410_PA_UART
comma
id|S3C2410_VA_UART
)paren
id|BOOT_PARAMS
c_func
(paren
id|S3C2410_SDRAM_PA
op_plus
l_int|0x100
)paren
dot
id|timer
op_assign
op_amp
id|s3c24xx_timer
comma
dot
id|init_machine
op_assign
id|n30_init
comma
dot
id|init_irq
op_assign
id|n30_init_irq
comma
dot
id|map_io
op_assign
id|n30_map_io
comma
id|MACHINE_END
multiline_comment|/*&n;    Local variables:&n;        compile-command: &quot;make ARCH=arm CROSS_COMPILE=/usr/local/arm/3.3.2/bin/arm-linux- -k -C ../../..&quot;&n;        c-basic-offset: 8&n;    End:&n;*/
eof
