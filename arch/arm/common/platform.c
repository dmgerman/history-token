macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/init.h&gt;
DECL|function|platform_add_device
r_int
id|__init
id|platform_add_device
c_func
(paren
r_struct
id|platform_device
op_star
id|dev
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dev-&gt;num_resources
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|resource
op_star
id|r
op_assign
op_amp
id|dev-&gt;resource
(braket
id|i
)braket
suffix:semicolon
id|r-&gt;name
op_assign
id|dev-&gt;dev.bus_id
suffix:semicolon
r_if
c_cond
(paren
id|r-&gt;flags
op_amp
id|IORESOURCE_MEM
op_logical_and
id|request_resource
c_func
(paren
op_amp
id|iomem_resource
comma
id|r
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s%d: failed to claim resource %d&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|dev-&gt;id
comma
id|i
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|i
op_eq
id|dev-&gt;num_resources
)paren
id|platform_device_register
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|platform_add_devices
r_int
id|__init
id|platform_add_devices
c_func
(paren
r_struct
id|platform_device
op_star
op_star
id|devs
comma
r_int
id|num
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num
suffix:semicolon
id|i
op_increment
)paren
id|platform_add_device
c_func
(paren
id|devs
(braket
id|i
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
