multiline_comment|/*&n; * linux/arch/arm/mach-h720x/cpu-h7201.c&n; *&n; * Copyright (C) 2003 Thomas Gleixner &lt;tglx@linutronix.de&gt;&n; *               2003 Robert Schwebel &lt;r.schwebel@pengutronix.de&gt;&n; *               2004 Sascha Hauer    &lt;s.hauer@pengutronix.de&gt;&n; *&n; * processor specific stuff for the Hynix h7201&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License version 2 as&n; * published by the Free Software Foundation.&n; *&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;asm/types.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/arch/irqs.h&gt;
macro_line|#include &lt;asm/mach/irq.h&gt;
macro_line|#include &lt;asm/mach/time.h&gt;
macro_line|#include &quot;common.h&quot;
multiline_comment|/*&n; * Timer interrupt handler&n; */
r_static
id|irqreturn_t
DECL|function|h7201_timer_interrupt
id|h7201_timer_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|write_seqlock
c_func
(paren
op_amp
id|xtime_lock
)paren
suffix:semicolon
id|CPU_REG
(paren
id|TIMER_VIRT
comma
id|TIMER_TOPSTAT
)paren
suffix:semicolon
id|timer_tick
c_func
(paren
id|regs
)paren
suffix:semicolon
id|write_sequnlock
c_func
(paren
op_amp
id|xtime_lock
)paren
suffix:semicolon
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
DECL|variable|h7201_timer_irq
r_static
r_struct
id|irqaction
id|h7201_timer_irq
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;h7201 Timer Tick&quot;
comma
dot
id|flags
op_assign
id|SA_INTERRUPT
comma
dot
id|handler
op_assign
id|h7201_timer_interrupt
)brace
suffix:semicolon
multiline_comment|/*&n; * Setup TIMER0 as system timer&n; */
DECL|function|h7201_init_time
r_void
id|__init
id|h7201_init_time
c_func
(paren
r_void
)paren
(brace
id|CPU_REG
(paren
id|TIMER_VIRT
comma
id|TM0_PERIOD
)paren
op_assign
id|LATCH
suffix:semicolon
id|CPU_REG
(paren
id|TIMER_VIRT
comma
id|TM0_CTRL
)paren
op_assign
id|TM_RESET
suffix:semicolon
id|CPU_REG
(paren
id|TIMER_VIRT
comma
id|TM0_CTRL
)paren
op_assign
id|TM_REPEAT
op_or
id|TM_START
suffix:semicolon
id|CPU_REG
(paren
id|TIMER_VIRT
comma
id|TIMER_TOPCTRL
)paren
op_assign
id|ENABLE_TM0_INTR
op_or
id|TIMER_ENABLE_BIT
suffix:semicolon
id|setup_irq
c_func
(paren
id|IRQ_TIMER0
comma
op_amp
id|h7201_timer_irq
)paren
suffix:semicolon
)brace
DECL|variable|h7201_timer
r_struct
id|sys_timer
id|h7201_timer
op_assign
(brace
dot
id|init
op_assign
id|h7201_init_time
comma
dot
id|offset
op_assign
id|h720x_gettimeoffset
comma
)brace
suffix:semicolon
eof
