multiline_comment|/*&n; * linux/arch/h8300/platform/h8300h/ints_h8300h.c&n; * Interrupt handling CPU variants&n; *&n; * Yoshinori Sato &lt;ysato@users.sourceforge.jp&gt;&n; *&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;asm/ptrace.h&gt;
macro_line|#include &lt;asm/traps.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/gpio.h&gt;
macro_line|#include &lt;asm/regs306x.h&gt;
multiline_comment|/* saved vector list */
DECL|variable|h8300_saved_vectors
r_const
r_int
id|__initdata
id|h8300_saved_vectors
(braket
)braket
op_assign
initialization_block
suffix:semicolon
multiline_comment|/* trap entry table */
DECL|variable|h8300_trap_table
r_const
r_int
r_int
id|__initdata
id|h8300_trap_table
(braket
id|NR_TRAPS
)braket
op_assign
initialization_block
suffix:semicolon
DECL|function|h8300_enable_irq_pin
r_int
id|h8300_enable_irq_pin
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
id|bitmask
suffix:semicolon
r_if
c_cond
(paren
id|irq
template_param
id|EXT_IRQ5
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* initialize IRQ pin */
id|bitmask
op_assign
l_int|1
op_lshift
(paren
id|irq
op_minus
id|EXT_IRQ0
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|irq
)paren
(brace
r_case
id|EXT_IRQ0
suffix:colon
r_case
id|EXT_IRQ1
suffix:colon
r_case
id|EXT_IRQ2
suffix:colon
r_case
id|EXT_IRQ3
suffix:colon
r_if
c_cond
(paren
id|H8300_GPIO_RESERVE
c_func
(paren
id|H8300_GPIO_P8
comma
id|bitmask
)paren
op_eq
l_int|0
)paren
r_return
op_minus
id|EBUSY
suffix:semicolon
id|H8300_GPIO_DDR
c_func
(paren
id|H8300_GPIO_P8
comma
id|bitmask
comma
id|H8300_GPIO_INPUT
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|EXT_IRQ4
suffix:colon
r_case
id|EXT_IRQ5
suffix:colon
r_if
c_cond
(paren
id|H8300_GPIO_RESERVE
c_func
(paren
id|H8300_GPIO_P9
comma
id|bitmask
)paren
op_eq
l_int|0
)paren
r_return
op_minus
id|EBUSY
suffix:semicolon
id|H8300_GPIO_DDR
c_func
(paren
id|H8300_GPIO_P9
comma
id|bitmask
comma
id|H8300_GPIO_INPUT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|h8300_disable_irq_pin
r_void
id|h8300_disable_irq_pin
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
id|bitmask
suffix:semicolon
r_if
c_cond
(paren
id|irq
template_param
id|EXT_IRQ5
)paren
r_return
suffix:semicolon
multiline_comment|/* disable interrupt &amp; release IRQ pin */
id|bitmask
op_assign
l_int|1
op_lshift
(paren
id|irq
op_minus
id|EXT_IRQ0
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|irq
)paren
(brace
r_case
id|EXT_IRQ0
suffix:colon
r_case
id|EXT_IRQ1
suffix:colon
r_case
id|EXT_IRQ2
suffix:colon
r_case
id|EXT_IRQ3
suffix:colon
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|IER
op_and_assign
op_complement
id|bitmask
suffix:semicolon
id|H8300_GPIO_FREE
c_func
(paren
id|H8300_GPIO_P8
comma
id|bitmask
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|EXT_IRQ4
suffix:colon
r_case
id|EXT_IRQ5
suffix:colon
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|IER
op_and_assign
op_complement
id|bitmask
suffix:semicolon
id|H8300_GPIO_FREE
c_func
(paren
id|H8300_GPIO_P9
comma
id|bitmask
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
eof
