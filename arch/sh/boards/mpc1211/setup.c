multiline_comment|/*&n; * linux/arch/sh/board/mpc1211/setup.c&n; *&n; * Copyright (C) 2002  Saito.K &amp; Jeanne,  Fujii.Y&n; *&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/irq.h&gt;
macro_line|#include &lt;linux/hdreg.h&gt;
macro_line|#include &lt;linux/ide.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/mpc1211/mpc1211.h&gt;
macro_line|#include &lt;asm/mpc1211/m1543c.h&gt;
multiline_comment|/* ALI15X3 SMBus address offsets */
DECL|macro|SMBHSTSTS
mdefine_line|#define SMBHSTSTS   (0 + 0x3100)
DECL|macro|SMBHSTCNT
mdefine_line|#define SMBHSTCNT   (1 + 0x3100)
DECL|macro|SMBHSTSTART
mdefine_line|#define SMBHSTSTART (2 + 0x3100)
DECL|macro|SMBHSTCMD
mdefine_line|#define SMBHSTCMD   (7 + 0x3100)
DECL|macro|SMBHSTADD
mdefine_line|#define SMBHSTADD   (3 + 0x3100)
DECL|macro|SMBHSTDAT0
mdefine_line|#define SMBHSTDAT0  (4 + 0x3100)
DECL|macro|SMBHSTDAT1
mdefine_line|#define SMBHSTDAT1  (5 + 0x3100)
DECL|macro|SMBBLKDAT
mdefine_line|#define SMBBLKDAT   (6 + 0x3100)
multiline_comment|/* Other settings */
DECL|macro|MAX_TIMEOUT
mdefine_line|#define MAX_TIMEOUT 500&t;&t;/* times 1/100 sec */
multiline_comment|/* ALI15X3 command constants */
DECL|macro|ALI15X3_ABORT
mdefine_line|#define ALI15X3_ABORT      0x04
DECL|macro|ALI15X3_T_OUT
mdefine_line|#define ALI15X3_T_OUT      0x08
DECL|macro|ALI15X3_QUICK
mdefine_line|#define ALI15X3_QUICK      0x00
DECL|macro|ALI15X3_BYTE
mdefine_line|#define ALI15X3_BYTE       0x10
DECL|macro|ALI15X3_BYTE_DATA
mdefine_line|#define ALI15X3_BYTE_DATA  0x20
DECL|macro|ALI15X3_WORD_DATA
mdefine_line|#define ALI15X3_WORD_DATA  0x30
DECL|macro|ALI15X3_BLOCK_DATA
mdefine_line|#define ALI15X3_BLOCK_DATA 0x40
DECL|macro|ALI15X3_BLOCK_CLR
mdefine_line|#define ALI15X3_BLOCK_CLR  0x80
multiline_comment|/* ALI15X3 status register bits */
DECL|macro|ALI15X3_STS_IDLE
mdefine_line|#define ALI15X3_STS_IDLE&t;0x04
DECL|macro|ALI15X3_STS_BUSY
mdefine_line|#define ALI15X3_STS_BUSY&t;0x08
DECL|macro|ALI15X3_STS_DONE
mdefine_line|#define ALI15X3_STS_DONE&t;0x10
DECL|macro|ALI15X3_STS_DEV
mdefine_line|#define ALI15X3_STS_DEV&t;&t;0x20&t;/* device error */
DECL|macro|ALI15X3_STS_COLL
mdefine_line|#define ALI15X3_STS_COLL&t;0x40&t;/* collision or no response */
DECL|macro|ALI15X3_STS_TERM
mdefine_line|#define ALI15X3_STS_TERM&t;0x80&t;/* terminated by abort */
DECL|macro|ALI15X3_STS_ERR
mdefine_line|#define ALI15X3_STS_ERR&t;&t;0xE0&t;/* all the bad error bits */
DECL|function|get_system_type
r_const
r_char
op_star
id|get_system_type
c_func
(paren
r_void
)paren
(brace
r_return
l_string|&quot;Interface MPC-1211(CTP/PCI/MPC-SH02)&quot;
suffix:semicolon
)brace
DECL|function|platform_setup
r_void
id|platform_setup
c_func
(paren
r_void
)paren
(brace
)brace
DECL|function|pci_write_config
r_static
r_void
id|__init
id|pci_write_config
c_func
(paren
r_int
r_int
id|busNo
comma
r_int
r_int
id|devNo
comma
r_int
r_int
id|fncNo
comma
r_int
r_int
id|cnfAdd
comma
r_int
r_int
id|cnfData
)paren
(brace
id|ctrl_outl
c_func
(paren
(paren
l_int|0x80000000
op_plus
(paren
(paren
id|busNo
op_amp
l_int|0xff
)paren
op_lshift
l_int|16
)paren
op_plus
(paren
(paren
id|devNo
op_amp
l_int|0x1f
)paren
op_lshift
l_int|11
)paren
op_plus
(paren
(paren
id|fncNo
op_amp
l_int|0x07
)paren
op_lshift
l_int|8
)paren
op_plus
(paren
id|cnfAdd
op_amp
l_int|0xfc
)paren
)paren
comma
id|PCIPAR
)paren
suffix:semicolon
id|ctrl_outl
c_func
(paren
id|cnfData
comma
id|PCIPDR
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  Initialize IRQ setting&n;*/
DECL|variable|m_irq_mask
r_static
r_int
r_char
id|m_irq_mask
op_assign
l_int|0xfb
suffix:semicolon
DECL|variable|s_irq_mask
r_static
r_int
r_char
id|s_irq_mask
op_assign
l_int|0xff
suffix:semicolon
DECL|variable|irq_err_count
r_volatile
r_int
r_int
id|irq_err_count
suffix:semicolon
DECL|function|disable_mpc1211_irq
r_static
r_void
id|disable_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|save_and_cli
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|irq
OL
l_int|8
)paren
(brace
id|m_irq_mask
op_or_assign
(paren
l_int|1
op_lshift
id|irq
)paren
suffix:semicolon
id|outb
c_func
(paren
id|m_irq_mask
comma
id|I8259_M_MR
)paren
suffix:semicolon
)brace
r_else
(brace
id|s_irq_mask
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|irq
op_minus
l_int|8
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|s_irq_mask
comma
id|I8259_S_MR
)paren
suffix:semicolon
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
DECL|function|enable_mpc1211_irq
r_static
r_void
id|enable_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|save_and_cli
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|irq
OL
l_int|8
)paren
(brace
id|m_irq_mask
op_and_assign
op_complement
(paren
l_int|1
op_lshift
id|irq
)paren
suffix:semicolon
id|outb
c_func
(paren
id|m_irq_mask
comma
id|I8259_M_MR
)paren
suffix:semicolon
)brace
r_else
(brace
id|s_irq_mask
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
id|irq
op_minus
l_int|8
)paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|s_irq_mask
comma
id|I8259_S_MR
)paren
suffix:semicolon
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
DECL|function|mpc1211_irq_real
r_static
r_inline
r_int
id|mpc1211_irq_real
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
id|value
suffix:semicolon
r_int
id|irqmask
suffix:semicolon
r_if
c_cond
(paren
id|irq
OL
l_int|8
)paren
(brace
id|irqmask
op_assign
l_int|1
op_lshift
id|irq
suffix:semicolon
id|outb
c_func
(paren
l_int|0x0b
comma
id|I8259_M_CR
)paren
suffix:semicolon
multiline_comment|/* ISR register */
id|value
op_assign
id|inb
c_func
(paren
id|I8259_M_CR
)paren
op_amp
id|irqmask
suffix:semicolon
id|outb
c_func
(paren
l_int|0x0a
comma
id|I8259_M_CR
)paren
suffix:semicolon
multiline_comment|/* back ro the IPR reg */
r_return
id|value
suffix:semicolon
)brace
id|irqmask
op_assign
l_int|1
op_lshift
(paren
id|irq
op_minus
l_int|8
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x0b
comma
id|I8259_S_CR
)paren
suffix:semicolon
multiline_comment|/* ISR register */
id|value
op_assign
id|inb
c_func
(paren
id|I8259_S_CR
)paren
op_amp
id|irqmask
suffix:semicolon
id|outb
c_func
(paren
l_int|0x0a
comma
id|I8259_S_CR
)paren
suffix:semicolon
multiline_comment|/* back ro the IPR reg */
r_return
id|value
suffix:semicolon
)brace
DECL|function|mask_and_ack_mpc1211
r_static
r_void
id|mask_and_ack_mpc1211
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|save_and_cli
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|irq
OL
l_int|8
)paren
(brace
r_if
c_cond
(paren
id|m_irq_mask
op_amp
(paren
l_int|1
op_lshift
id|irq
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|mpc1211_irq_real
c_func
(paren
id|irq
)paren
)paren
(brace
id|irq_err_count
op_increment
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;spurious 8259A interrupt: IRQ %x&bslash;n&quot;
comma
id|irq
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|m_irq_mask
op_or_assign
(paren
l_int|1
op_lshift
id|irq
)paren
suffix:semicolon
)brace
id|inb
c_func
(paren
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* DUMMY */
id|outb
c_func
(paren
id|m_irq_mask
comma
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* disable */
id|outb
c_func
(paren
l_int|0x60
op_plus
id|irq
comma
id|I8259_M_CR
)paren
suffix:semicolon
multiline_comment|/* EOI */
)brace
r_else
(brace
r_if
c_cond
(paren
id|s_irq_mask
op_amp
(paren
l_int|1
op_lshift
(paren
id|irq
op_minus
l_int|8
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|mpc1211_irq_real
c_func
(paren
id|irq
)paren
)paren
(brace
id|irq_err_count
op_increment
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;spurious 8259A interrupt: IRQ %x&bslash;n&quot;
comma
id|irq
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|s_irq_mask
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|irq
op_minus
l_int|8
)paren
)paren
suffix:semicolon
)brace
id|inb
c_func
(paren
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* DUMMY */
id|outb
c_func
(paren
id|s_irq_mask
comma
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* disable */
id|outb
c_func
(paren
l_int|0x60
op_plus
(paren
id|irq
op_minus
l_int|8
)paren
comma
id|I8259_S_CR
)paren
suffix:semicolon
multiline_comment|/* EOI */
id|outb
c_func
(paren
l_int|0x60
op_plus
l_int|2
comma
id|I8259_M_CR
)paren
suffix:semicolon
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
DECL|function|end_mpc1211_irq
r_static
r_void
id|end_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|enable_mpc1211_irq
c_func
(paren
id|irq
)paren
suffix:semicolon
)brace
DECL|function|startup_mpc1211_irq
r_static
r_int
r_int
id|startup_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|enable_mpc1211_irq
c_func
(paren
id|irq
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|shutdown_mpc1211_irq
r_static
r_void
id|shutdown_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|disable_mpc1211_irq
c_func
(paren
id|irq
)paren
suffix:semicolon
)brace
DECL|variable|mpc1211_irq_type
r_static
r_struct
id|hw_interrupt_type
id|mpc1211_irq_type
op_assign
(brace
dot
r_typename
op_assign
l_string|&quot;MPC1211-IRQ&quot;
comma
dot
id|startup
op_assign
id|startup_mpc1211_irq
comma
dot
id|shutdown
op_assign
id|shutdown_mpc1211_irq
comma
dot
id|enable
op_assign
id|enable_mpc1211_irq
comma
dot
id|disable
op_assign
id|disable_mpc1211_irq
comma
dot
id|ack
op_assign
id|mask_and_ack_mpc1211
comma
dot
id|end
op_assign
id|end_mpc1211_irq
)brace
suffix:semicolon
DECL|function|make_mpc1211_irq
r_static
r_void
id|make_mpc1211_irq
c_func
(paren
r_int
r_int
id|irq
)paren
(brace
id|irq_desc
(braket
id|irq
)braket
dot
id|handler
op_assign
op_amp
id|mpc1211_irq_type
suffix:semicolon
id|irq_desc
(braket
id|irq
)braket
dot
id|status
op_assign
id|IRQ_DISABLED
suffix:semicolon
id|irq_desc
(braket
id|irq
)braket
dot
id|action
op_assign
l_int|0
suffix:semicolon
id|irq_desc
(braket
id|irq
)braket
dot
id|depth
op_assign
l_int|1
suffix:semicolon
id|disable_mpc1211_irq
c_func
(paren
id|irq
)paren
suffix:semicolon
)brace
DECL|function|mpc1211_irq_demux
r_int
id|mpc1211_irq_demux
c_func
(paren
r_int
id|irq
)paren
(brace
r_int
r_int
id|poll
suffix:semicolon
r_if
c_cond
(paren
id|irq
op_eq
l_int|2
)paren
(brace
id|outb
c_func
(paren
l_int|0x0c
comma
id|I8259_M_CR
)paren
suffix:semicolon
id|poll
op_assign
id|inb
c_func
(paren
id|I8259_M_CR
)paren
suffix:semicolon
r_if
c_cond
(paren
id|poll
op_amp
l_int|0x80
)paren
(brace
id|irq
op_assign
(paren
id|poll
op_amp
l_int|0x07
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|irq
op_eq
l_int|2
)paren
(brace
id|outb
c_func
(paren
l_int|0x0c
comma
id|I8259_S_CR
)paren
suffix:semicolon
id|poll
op_assign
id|inb
c_func
(paren
id|I8259_S_CR
)paren
suffix:semicolon
id|irq
op_assign
(paren
id|poll
op_amp
l_int|0x07
)paren
op_plus
l_int|8
suffix:semicolon
)brace
)brace
r_return
id|irq
suffix:semicolon
)brace
DECL|function|init_mpc1211_IRQ
r_void
id|__init
id|init_mpc1211_IRQ
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/*&n;&t; * Super I/O (Just mimic PC):&n;&t; *  1: keyboard&n;&t; *  3: serial 1&n;&t; *  4: serial 0&n;&t; *  5: printer&n;&t; *  6: floppy&n;&t; *  8: rtc&n;&t; * 10: lan&n;&t; * 12: mouse&n;&t; * 14: ide0&n;&t; * 15: ide1&n;&t; */
id|pci_write_config
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0x54
comma
l_int|0xb0b0002d
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x11
comma
id|I8259_M_CR
)paren
suffix:semicolon
multiline_comment|/* mater icw1 edge trigger  */
id|outb
c_func
(paren
l_int|0x11
comma
id|I8259_S_CR
)paren
suffix:semicolon
multiline_comment|/* slave icw1 edge trigger  */
id|outb
c_func
(paren
l_int|0x20
comma
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* m icw2 base vec 0x08&t;    */
id|outb
c_func
(paren
l_int|0x28
comma
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* s icw2 base vec 0x70&t;    */
id|outb
c_func
(paren
l_int|0x04
comma
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* m icw3 slave irq2&t;    */
id|outb
c_func
(paren
l_int|0x02
comma
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* s icw3 slave id&t;    */
id|outb
c_func
(paren
l_int|0x01
comma
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* m icw4 non buf normal eoi*/
id|outb
c_func
(paren
l_int|0x01
comma
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* s icw4 non buf normal eo1*/
id|outb
c_func
(paren
l_int|0xfb
comma
id|I8259_M_MR
)paren
suffix:semicolon
multiline_comment|/* disable irq0--irq7  */
id|outb
c_func
(paren
l_int|0xff
comma
id|I8259_S_MR
)paren
suffix:semicolon
multiline_comment|/* disable irq8--irq15 */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
l_int|2
)paren
(brace
id|make_mpc1211_irq
c_func
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n;  Initialize the board&n;*/
DECL|function|delay
r_static
r_void
id|delay
(paren
r_void
)paren
(brace
r_volatile
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
l_int|0xa0000000
suffix:semicolon
)brace
DECL|function|delay1000
r_static
r_void
id|delay1000
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|1000
suffix:semicolon
id|i
op_increment
)paren
id|delay
(paren
)paren
suffix:semicolon
)brace
DECL|function|put_smb_blk
r_static
r_int
id|put_smb_blk
c_func
(paren
r_int
r_char
op_star
id|p
comma
r_int
id|address
comma
r_int
id|command
comma
r_int
id|no
)paren
(brace
r_int
id|temp
suffix:semicolon
r_int
id|timeout
suffix:semicolon
r_int
id|i
suffix:semicolon
id|outb
c_func
(paren
l_int|0xff
comma
id|SMBHSTSTS
)paren
suffix:semicolon
id|temp
op_assign
id|inb
c_func
(paren
id|SMBHSTSTS
)paren
suffix:semicolon
r_for
c_loop
(paren
id|timeout
op_assign
l_int|0
suffix:semicolon
(paren
id|timeout
OL
id|MAX_TIMEOUT
)paren
op_logical_and
op_logical_neg
(paren
id|temp
op_amp
id|ALI15X3_STS_IDLE
)paren
suffix:semicolon
id|timeout
op_increment
)paren
(brace
id|delay1000
c_func
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|inb
c_func
(paren
id|SMBHSTSTS
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|timeout
op_ge
id|MAX_TIMEOUT
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|outb
c_func
(paren
(paren
(paren
id|address
op_amp
l_int|0x7f
)paren
op_lshift
l_int|1
)paren
comma
id|SMBHSTADD
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0xc0
comma
id|SMBHSTCNT
)paren
suffix:semicolon
id|outb
c_func
(paren
id|command
op_amp
l_int|0xff
comma
id|SMBHSTCMD
)paren
suffix:semicolon
id|outb
c_func
(paren
id|no
op_amp
l_int|0x1f
comma
id|SMBHSTDAT0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|no
suffix:semicolon
id|i
op_increment
)paren
(brace
id|outb
c_func
(paren
op_star
id|p
op_increment
comma
id|SMBBLKDAT
)paren
suffix:semicolon
)brace
id|outb
c_func
(paren
l_int|0xff
comma
id|SMBHSTSTART
)paren
suffix:semicolon
id|temp
op_assign
id|inb
c_func
(paren
id|SMBHSTSTS
)paren
suffix:semicolon
r_for
c_loop
(paren
id|timeout
op_assign
l_int|0
suffix:semicolon
(paren
id|timeout
OL
id|MAX_TIMEOUT
)paren
op_logical_and
op_logical_neg
(paren
id|temp
op_amp
(paren
id|ALI15X3_STS_ERR
op_or
id|ALI15X3_STS_DONE
)paren
)paren
suffix:semicolon
id|timeout
op_increment
)paren
(brace
id|delay1000
c_func
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|inb
c_func
(paren
id|SMBHSTSTS
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|timeout
op_ge
id|MAX_TIMEOUT
)paren
(brace
r_return
op_minus
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
id|ALI15X3_STS_ERR
)paren
(brace
r_return
op_minus
l_int|3
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|setup_mpc1211
r_void
id|__init
id|setup_mpc1211
c_func
(paren
r_void
)paren
(brace
r_int
r_char
id|spd_buf
(braket
l_int|128
)braket
suffix:semicolon
id|pci_write_config
c_func
(paren
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0x54
comma
l_int|0xb0b00000
)paren
suffix:semicolon
id|retry
suffix:colon
id|outb
c_func
(paren
id|ALI15X3_ABORT
comma
id|SMBHSTCNT
)paren
suffix:semicolon
id|spd_buf
(braket
l_int|0
)braket
op_assign
l_int|0x0c
suffix:semicolon
id|spd_buf
(braket
l_int|1
)braket
op_assign
l_int|0x43
suffix:semicolon
id|spd_buf
(braket
l_int|2
)braket
op_assign
l_int|0x7f
suffix:semicolon
id|spd_buf
(braket
l_int|3
)braket
op_assign
l_int|0x03
suffix:semicolon
id|spd_buf
(braket
l_int|4
)braket
op_assign
l_int|0x00
suffix:semicolon
id|spd_buf
(braket
l_int|5
)braket
op_assign
l_int|0x03
suffix:semicolon
id|spd_buf
(braket
l_int|6
)braket
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|put_smb_blk
c_func
(paren
id|spd_buf
comma
l_int|0x69
comma
l_int|0
comma
l_int|7
)paren
OL
l_int|0
)paren
(brace
r_goto
id|retry
suffix:semicolon
)brace
)brace
eof
