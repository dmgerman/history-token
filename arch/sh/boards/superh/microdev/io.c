multiline_comment|/*&n; * linux/arch/sh/kernel/io_microdev.c&n; *&n; * Copyright (C) 2003 Sean McGoogan (Sean.McGoogan@superh.com)&n; * Copyright (C) 2003, 2004 SuperH, Inc.&n; * Copyright (C) 2004 Paul Mundt&n; *&n; * SuperH SH4-202 MicroDev board support.&n; *&n; * May be copied or modified under the terms of the GNU General Public&n; * License.  See linux/COPYING for more information.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/wait.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/mach/io.h&gt;
multiline_comment|/*&n;&t; *&t;we need to have a &squot;safe&squot; address to re-direct all I/O requests&n;&t; *&t;that we do not explicitly wish to handle. This safe address&n;&t; *&t;must have the following properies:&n;&t; *&n;&t; *&t;&t;* writes are ignored (no exception)&n;&t; *&t;&t;* reads are benign (no side-effects)&n;&t; *&t;&t;* accesses of width 1, 2 and 4-bytes are all valid.&n;&t; *&n;&t; *&t;The Processor Version Register (PVR) has these properties.&n;&t; */
DECL|macro|PVR
mdefine_line|#define&t;PVR&t;0xff000030&t;/* Processor Version Register */
DECL|macro|IO_IDE2_BASE
mdefine_line|#define&t;IO_IDE2_BASE&t;&t;0x170ul&t;/* I/O base for SMSC FDC37C93xAPM IDE #2 */
DECL|macro|IO_IDE1_BASE
mdefine_line|#define&t;IO_IDE1_BASE&t;&t;0x1f0ul&t;/* I/O base for SMSC FDC37C93xAPM IDE #1 */
DECL|macro|IO_ISP1161_BASE
mdefine_line|#define IO_ISP1161_BASE&t;&t;0x290ul /* I/O port for Philips ISP1161x USB chip */
DECL|macro|IO_SERIAL2_BASE
mdefine_line|#define IO_SERIAL2_BASE&t;&t;0x2f8ul /* I/O base for SMSC FDC37C93xAPM Serial #2 */
DECL|macro|IO_LAN91C111_BASE
mdefine_line|#define&t;IO_LAN91C111_BASE&t;0x300ul&t;/* I/O base for SMSC LAN91C111 Ethernet chip */
DECL|macro|IO_IDE2_MISC
mdefine_line|#define&t;IO_IDE2_MISC&t;&t;0x376ul&t;/* I/O misc for SMSC FDC37C93xAPM IDE #2 */
DECL|macro|IO_SUPERIO_BASE
mdefine_line|#define IO_SUPERIO_BASE&t;&t;0x3f0ul /* I/O base for SMSC FDC37C93xAPM SuperIO chip */
DECL|macro|IO_IDE1_MISC
mdefine_line|#define&t;IO_IDE1_MISC&t;&t;0x3f6ul&t;/* I/O misc for SMSC FDC37C93xAPM IDE #1 */
DECL|macro|IO_SERIAL1_BASE
mdefine_line|#define IO_SERIAL1_BASE&t;&t;0x3f8ul /* I/O base for SMSC FDC37C93xAPM Serial #1 */
DECL|macro|IO_ISP1161_EXTENT
mdefine_line|#define&t;IO_ISP1161_EXTENT&t;0x04ul&t;/* I/O extent for Philips ISP1161x USB chip */
DECL|macro|IO_LAN91C111_EXTENT
mdefine_line|#define&t;IO_LAN91C111_EXTENT&t;0x10ul&t;/* I/O extent for SMSC LAN91C111 Ethernet chip */
DECL|macro|IO_SUPERIO_EXTENT
mdefine_line|#define&t;IO_SUPERIO_EXTENT&t;0x02ul&t;/* I/O extent for SMSC FDC37C93xAPM SuperIO chip */
DECL|macro|IO_IDE_EXTENT
mdefine_line|#define&t;IO_IDE_EXTENT&t;&t;0x08ul&t;/* I/O extent for IDE Task Register set */
DECL|macro|IO_SERIAL_EXTENT
mdefine_line|#define IO_SERIAL_EXTENT&t;0x10ul
DECL|macro|IO_LAN91C111_PHYS
mdefine_line|#define&t;IO_LAN91C111_PHYS&t;0xa7500000ul&t;/* Physical address of SMSC LAN91C111 Ethernet chip */
DECL|macro|IO_ISP1161_PHYS
mdefine_line|#define&t;IO_ISP1161_PHYS&t;&t;0xa7700000ul&t;/* Physical address of Philips ISP1161x USB chip */
DECL|macro|IO_SUPERIO_PHYS
mdefine_line|#define&t;IO_SUPERIO_PHYS&t;&t;0xa7800000ul&t;/* Physical address of SMSC FDC37C93xAPM SuperIO chip */
DECL|macro|PORT2ADDR
mdefine_line|#define PORT2ADDR(x) (microdev_isa_port2addr(x))
DECL|function|delay
r_static
r_inline
r_void
id|delay
c_func
(paren
r_void
)paren
(brace
macro_line|#if defined(CONFIG_PCI)
multiline_comment|/* System board present, just make a dummy SRAM access.  (CS0 will be&n;&t;   mapped to PCI memory, probably good to avoid it.) */
id|ctrl_inw
c_func
(paren
l_int|0xa6800000
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/* CS0 will be mapped to flash, ROM etc so safe to access it. */
id|ctrl_inw
c_func
(paren
l_int|0xa0000000
)paren
suffix:semicolon
macro_line|#endif
)brace
DECL|function|microdev_inb
r_int
r_char
id|microdev_inb
c_func
(paren
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
r_return
id|microdev_pci_inb
c_func
(paren
id|port
)paren
suffix:semicolon
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|microdev_inw
r_int
r_int
id|microdev_inw
c_func
(paren
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
r_return
id|microdev_pci_inw
c_func
(paren
id|port
)paren
suffix:semicolon
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|microdev_inl
r_int
r_int
id|microdev_inl
c_func
(paren
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
r_return
id|microdev_pci_inl
c_func
(paren
id|port
)paren
suffix:semicolon
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|microdev_outb
r_void
id|microdev_outb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
(brace
id|microdev_pci_outb
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*&n;&t; *&t;There is a board feature with the current SH4-202 MicroDev in&n;&t; *&t;that the 2 byte enables (nBE0 and nBE1) are tied together (and&n;&t; *&t;to the Chip Select Line (Ethernet_CS)). Due to this conectivity,&n;&t; *&t;it is not possible to safely perform 8-bit writes to the&n;&t; *&t;Ethernet registers, as 16-bits will be consumed from the Data&n;&t; *&t;lines (corrupting the other byte).  Hence, this function is&n;&t; *&t;written to impliment 16-bit read/modify/write for all byte-wide&n;&t; *&t;acceses.&n;&t; *&n;&t; *&t;Note: there is no problem with byte READS (even or odd).&n;&t; *&n;&t; *&t;&t;&t;Sean McGoogan - 16th June 2003.&n;&t; */
r_if
c_cond
(paren
(paren
id|port
op_ge
id|IO_LAN91C111_BASE
)paren
op_logical_and
(paren
id|port
OL
id|IO_LAN91C111_BASE
op_plus
id|IO_LAN91C111_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; * Then are trying to perform a byte-write to the&n;&t;&t;&t; * LAN91C111.  This needs special care.&n;&t;&t;&t; */
r_if
c_cond
(paren
id|port
op_mod
l_int|2
op_eq
l_int|1
)paren
(brace
multiline_comment|/* is the port odd ? */
multiline_comment|/* unset bit-0, i.e. make even */
r_const
r_int
r_int
id|evenPort
op_assign
id|port
op_minus
l_int|1
suffix:semicolon
r_int
r_int
id|word
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t; * do a 16-bit read/write to write to &squot;port&squot;,&n;&t;&t;&t; * preserving even byte.&n;&t;&t;&t; *&n;&t;&t;&t; *&t;Even addresses are bits 0-7&n;&t;&t;&t; *&t;Odd  addresses are bits 8-15&n;&t;&t;&t; */
id|word
op_assign
id|microdev_inw
c_func
(paren
id|evenPort
)paren
suffix:semicolon
id|word
op_assign
(paren
id|word
op_amp
l_int|0xffu
)paren
op_or
(paren
id|b
op_lshift
l_int|8
)paren
suffix:semicolon
id|microdev_outw
c_func
(paren
id|word
comma
id|evenPort
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* else, we are trying to do an even byte write */
r_int
r_int
id|word
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t; * do a 16-bit read/write to write to &squot;port&squot;,&n;&t;&t;&t; * preserving odd byte.&n;&t;&t;&t; *&n;&t;&t;&t; *&t;Even addresses are bits 0-7&n;&t;&t;&t; *&t;Odd  addresses are bits 8-15&n;&t;&t;&t; */
id|word
op_assign
id|microdev_inw
c_func
(paren
id|port
)paren
suffix:semicolon
id|word
op_assign
(paren
id|word
op_amp
l_int|0xff00u
)paren
op_or
(paren
id|b
)paren
suffix:semicolon
id|microdev_outw
c_func
(paren
id|word
comma
id|port
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|b
suffix:semicolon
)brace
)brace
DECL|function|microdev_outw
r_void
id|microdev_outw
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
(brace
id|microdev_pci_outw
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|b
suffix:semicolon
)brace
DECL|function|microdev_outl
r_void
id|microdev_outl
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|port
)paren
(brace
macro_line|#ifdef CONFIG_PCI
r_if
c_cond
(paren
id|port
op_ge
id|PCIBIOS_MIN_IO
)paren
(brace
id|microdev_pci_outl
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|b
suffix:semicolon
)brace
DECL|function|microdev_inb_p
r_int
r_char
id|microdev_inb_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_char
id|v
op_assign
id|microdev_inb
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
id|v
suffix:semicolon
)brace
DECL|function|microdev_inw_p
r_int
r_int
id|microdev_inw_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_int
id|v
op_assign
id|microdev_inw
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
id|v
suffix:semicolon
)brace
DECL|function|microdev_inl_p
r_int
r_int
id|microdev_inl_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_int
id|v
op_assign
id|microdev_inl
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
id|v
suffix:semicolon
)brace
DECL|function|microdev_outb_p
r_void
id|microdev_outb_p
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|port
)paren
(brace
id|microdev_outb
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|microdev_outw_p
r_void
id|microdev_outw_p
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|port
)paren
(brace
id|microdev_outw
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|microdev_outl_p
r_void
id|microdev_outl_p
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|port
)paren
(brace
id|microdev_outl
c_func
(paren
id|b
comma
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|microdev_insb
r_void
id|microdev_insb
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_char
op_star
id|port_addr
suffix:semicolon
r_int
r_char
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
op_star
id|port_addr
suffix:semicolon
)brace
DECL|function|microdev_insw
r_void
id|microdev_insw
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_int
op_star
id|port_addr
suffix:semicolon
r_int
r_int
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
op_star
id|port_addr
suffix:semicolon
)brace
DECL|function|microdev_insl
r_void
id|microdev_insl
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_int
op_star
id|port_addr
suffix:semicolon
r_int
r_int
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
op_star
id|port_addr
suffix:semicolon
)brace
DECL|function|microdev_outsb
r_void
id|microdev_outsb
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_char
op_star
id|port_addr
suffix:semicolon
r_const
r_int
r_char
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|port_addr
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
DECL|function|microdev_outsw
r_void
id|microdev_outsw
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_int
op_star
id|port_addr
suffix:semicolon
r_const
r_int
r_int
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|port_addr
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
DECL|function|microdev_outsl
r_void
id|microdev_outsl
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|buffer
comma
r_int
r_int
id|count
)paren
(brace
r_volatile
r_int
r_int
op_star
id|port_addr
suffix:semicolon
r_const
r_int
r_int
op_star
id|buf
op_assign
id|buffer
suffix:semicolon
id|port_addr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|port_addr
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
multiline_comment|/*&n; * map I/O ports to memory-mapped addresses&n; */
DECL|function|microdev_isa_port2addr
r_int
r_int
id|microdev_isa_port2addr
c_func
(paren
r_int
r_int
id|offset
)paren
(brace
r_int
r_int
id|result
suffix:semicolon
r_if
c_cond
(paren
(paren
id|offset
op_ge
id|IO_LAN91C111_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_LAN91C111_BASE
op_plus
id|IO_LAN91C111_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC LAN91C111 Ethernet chip&n;&t;&t;&t; */
id|result
op_assign
id|IO_LAN91C111_PHYS
op_plus
id|offset
op_minus
id|IO_LAN91C111_BASE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|offset
op_ge
id|IO_SUPERIO_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_SUPERIO_BASE
op_plus
id|IO_SUPERIO_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;Configuration Registers&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
macro_line|#if 0
)brace
r_else
r_if
c_cond
(paren
id|offset
op_eq
id|KBD_DATA_REG
op_logical_or
id|offset
op_eq
id|KBD_CNTL_REG
op_logical_or
id|offset
op_eq
id|KBD_STATUS_REG
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;PS/2 Keyboard + Mouse (ports 0x60 and 0x64).&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|offset
op_ge
id|IO_IDE1_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_IDE1_BASE
op_plus
id|IO_IDE_EXTENT
)paren
)paren
op_logical_or
(paren
id|offset
op_eq
id|IO_IDE1_MISC
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;IDE #1&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|offset
op_ge
id|IO_IDE2_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_IDE2_BASE
op_plus
id|IO_IDE_EXTENT
)paren
)paren
op_logical_or
(paren
id|offset
op_eq
id|IO_IDE2_MISC
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;IDE #2&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|offset
op_ge
id|IO_SERIAL1_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_SERIAL1_BASE
op_plus
id|IO_SERIAL_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;Serial #1&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|offset
op_ge
id|IO_SERIAL2_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_SERIAL2_BASE
op_plus
id|IO_SERIAL_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;SMSC FDC37C93xAPM SuperIO chip&n;&t;&t;&t; *&n;&t;&t;&t; *&t;Serial #2&n;&t;&t;&t; */
id|result
op_assign
id|IO_SUPERIO_PHYS
op_plus
(paren
id|offset
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|offset
op_ge
id|IO_ISP1161_BASE
)paren
op_logical_and
(paren
id|offset
OL
id|IO_ISP1161_BASE
op_plus
id|IO_ISP1161_EXTENT
)paren
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;Philips USB ISP1161x chip&n;&t;&t;&t; */
id|result
op_assign
id|IO_ISP1161_PHYS
op_plus
id|offset
op_minus
id|IO_ISP1161_BASE
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*&n;&t;&t;&t; *&t;safe default.&n;&t;&t;&t; */
id|printk
c_func
(paren
l_string|&quot;Warning: unexpected port in %s( offset = 0x%lx )&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|offset
)paren
suffix:semicolon
id|result
op_assign
id|PVR
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
eof
