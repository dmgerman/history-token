multiline_comment|/*&n; * linux/arch/sh/kernel/adc.c -- SH3 on-chip ADC support&n; *&n; *  Copyright (C) 2004  Andriy Skulysh &lt;askulysh@image.kiev.ua&gt;&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;asm/adc.h&gt;
macro_line|#include &lt;asm/io.h&gt;
DECL|function|adc_single
r_int
id|adc_single
c_func
(paren
r_int
r_int
id|channel
)paren
(brace
r_int
id|off
suffix:semicolon
r_int
r_char
id|csr
suffix:semicolon
r_if
c_cond
(paren
id|channel
op_ge
l_int|8
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|off
op_assign
(paren
id|channel
op_amp
l_int|0x03
)paren
op_lshift
l_int|2
suffix:semicolon
id|csr
op_assign
id|ctrl_inb
c_func
(paren
id|ADCSR
)paren
suffix:semicolon
id|csr
op_assign
id|channel
op_or
id|ADCSR_ADST
op_or
id|ADCSR_CKS
suffix:semicolon
id|ctrl_outb
c_func
(paren
id|csr
comma
id|ADCSR
)paren
suffix:semicolon
r_do
(brace
id|csr
op_assign
id|ctrl_inb
c_func
(paren
id|ADCSR
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|csr
op_amp
id|ADCSR_ADF
)paren
op_eq
l_int|0
)paren
suffix:semicolon
id|csr
op_and_assign
op_complement
(paren
id|ADCSR_ADF
op_or
id|ADCSR_ADST
)paren
suffix:semicolon
id|ctrl_outb
c_func
(paren
id|csr
comma
id|ADCSR
)paren
suffix:semicolon
r_return
(paren
(paren
(paren
id|ctrl_inb
c_func
(paren
id|ADDRAH
op_plus
id|off
)paren
op_lshift
l_int|8
)paren
op_or
id|ctrl_inb
c_func
(paren
id|ADDRAL
op_plus
id|off
)paren
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
)brace
DECL|variable|adc_single
id|EXPORT_SYMBOL
c_func
(paren
id|adc_single
)paren
suffix:semicolon
eof
