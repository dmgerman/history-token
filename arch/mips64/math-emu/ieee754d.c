multiline_comment|/* some debug functions&n;*/
multiline_comment|/*&n; * MIPS floating point support&n; * Copyright (C) 1994-2000 Algorithmics Ltd.  All rights reserved.&n; * http://www.algor.co.uk&n; *&n; * ########################################################################&n; *&n; *  This program is free software; you can distribute it and/or modify it&n; *  under the terms of the GNU General Public License (Version 2) as&n; *  published by the Free Software Foundation.&n; *&n; *  This program is distributed in the hope it will be useful, but WITHOUT&n; *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or&n; *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License&n; *  for more details.&n; *&n; *  You should have received a copy of the GNU General Public License along&n; *  with this program; if not, write to the Free Software Foundation, Inc.,&n; *  59 Temple Place - Suite 330, Boston MA 02111-1307, USA.&n; *&n; * ########################################################################&n; */
multiline_comment|/**************************************************************************&n; *  Nov 7, 2000&n; *  Modified to build and operate in Linux kernel environment. &n; *&n; *  Kevin D. Kissell, kevink@mips.com and Carsten Langgaard, carstenl@mips.com&n; *  Copyright (C) 2000 MIPS Technologies, Inc. All rights reserved.&n; *************************************************************************/
macro_line|#include &quot;ieee754.h&quot;
DECL|macro|DP_EBIAS
mdefine_line|#define DP_EBIAS&t;1023
DECL|macro|DP_EMIN
mdefine_line|#define DP_EMIN&t;&t;(-1022)
DECL|macro|DP_EMAX
mdefine_line|#define DP_EMAX&t;&t;1023
DECL|macro|DP_FBITS
mdefine_line|#define DP_FBITS&t;52
DECL|macro|SP_EBIAS
mdefine_line|#define SP_EBIAS&t;127
DECL|macro|SP_EMIN
mdefine_line|#define SP_EMIN&t;&t;(-126)
DECL|macro|SP_EMAX
mdefine_line|#define SP_EMAX&t;&t;127
DECL|macro|SP_FBITS
mdefine_line|#define SP_FBITS&t;23
DECL|macro|DP_MBIT
mdefine_line|#define DP_MBIT(x)&t;((unsigned long long)1 &lt;&lt; (x))
DECL|macro|DP_HIDDEN_BIT
mdefine_line|#define DP_HIDDEN_BIT&t;DP_MBIT(DP_FBITS)
DECL|macro|DP_SIGN_BIT
mdefine_line|#define DP_SIGN_BIT&t;DP_MBIT(63)
DECL|macro|SP_MBIT
mdefine_line|#define SP_MBIT(x)&t;((unsigned long)1 &lt;&lt; (x))
DECL|macro|SP_HIDDEN_BIT
mdefine_line|#define SP_HIDDEN_BIT&t;SP_MBIT(SP_FBITS)
DECL|macro|SP_SIGN_BIT
mdefine_line|#define SP_SIGN_BIT&t;SP_MBIT(31)
DECL|macro|SPSIGN
mdefine_line|#define SPSIGN(sp)&t;(sp.parts.sign)
DECL|macro|SPBEXP
mdefine_line|#define SPBEXP(sp)&t;(sp.parts.bexp)
DECL|macro|SPMANT
mdefine_line|#define SPMANT(sp)&t;(sp.parts.mant)
DECL|macro|DPSIGN
mdefine_line|#define DPSIGN(dp)&t;(dp.parts.sign)
DECL|macro|DPBEXP
mdefine_line|#define DPBEXP(dp)&t;(dp.parts.bexp)
DECL|macro|DPMANT
mdefine_line|#define DPMANT(dp)&t;(dp.parts.mant)
DECL|function|ieee754dp_dump
id|ieee754dp
id|ieee754dp_dump
c_func
(paren
r_char
op_star
id|m
comma
id|ieee754dp
id|x
)paren
(brace
r_int
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;%s&quot;
comma
id|m
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&lt;%08x,%08x&gt;&bslash;n&quot;
comma
(paren
r_int
)paren
(paren
id|x.bits
op_rshift
l_int|32
)paren
comma
(paren
r_int
)paren
id|x.bits
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;t=&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ieee754dp_class
c_func
(paren
id|x
)paren
)paren
(brace
r_case
id|IEEE754_CLASS_QNAN
suffix:colon
r_case
id|IEEE754_CLASS_SNAN
suffix:colon
id|printk
c_func
(paren
l_string|&quot;Nan %c&quot;
comma
id|DPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|DP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|DPMANT
c_func
(paren
id|x
)paren
op_amp
id|DP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_INF
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%cInfinity&quot;
comma
id|DPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_ZERO
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%cZero&quot;
comma
id|DPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_DNORM
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%c0.&quot;
comma
id|DPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|DP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|DPMANT
c_func
(paren
id|x
)paren
op_amp
id|DP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;e%d&quot;
comma
id|DPBEXP
c_func
(paren
id|x
)paren
op_minus
id|DP_EBIAS
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_NORM
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%c1.&quot;
comma
id|DPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|DP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|DPMANT
c_func
(paren
id|x
)paren
op_amp
id|DP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;e%d&quot;
comma
id|DPBEXP
c_func
(paren
id|x
)paren
op_minus
id|DP_EBIAS
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;Illegal/Unknown IEEE754 value class&quot;
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|x
suffix:semicolon
)brace
DECL|function|ieee754sp_dump
id|ieee754sp
id|ieee754sp_dump
c_func
(paren
r_char
op_star
id|m
comma
id|ieee754sp
id|x
)paren
(brace
r_int
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;%s=&quot;
comma
id|m
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&lt;%08x&gt;&bslash;n&quot;
comma
(paren
r_int
)paren
id|x.bits
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;t=&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ieee754sp_class
c_func
(paren
id|x
)paren
)paren
(brace
r_case
id|IEEE754_CLASS_QNAN
suffix:colon
r_case
id|IEEE754_CLASS_SNAN
suffix:colon
id|printk
c_func
(paren
l_string|&quot;Nan %c&quot;
comma
id|SPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|SP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|SPMANT
c_func
(paren
id|x
)paren
op_amp
id|SP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_INF
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%cInfinity&quot;
comma
id|SPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_ZERO
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%cZero&quot;
comma
id|SPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_DNORM
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%c0.&quot;
comma
id|SPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|SP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|SPMANT
c_func
(paren
id|x
)paren
op_amp
id|SP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;e%d&quot;
comma
id|SPBEXP
c_func
(paren
id|x
)paren
op_minus
id|SP_EBIAS
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IEEE754_CLASS_NORM
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%c1.&quot;
comma
id|SPSIGN
c_func
(paren
id|x
)paren
ques
c_cond
l_char|&squot;-&squot;
suffix:colon
l_char|&squot;+&squot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|SP_FBITS
op_minus
l_int|1
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
id|SPMANT
c_func
(paren
id|x
)paren
op_amp
id|SP_MBIT
c_func
(paren
id|i
)paren
ques
c_cond
l_char|&squot;1&squot;
suffix:colon
l_char|&squot;0&squot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;e%d&quot;
comma
id|SPBEXP
c_func
(paren
id|x
)paren
op_minus
id|SP_EBIAS
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;Illegal/Unknown IEEE754 value class&quot;
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|x
suffix:semicolon
)brace
eof
