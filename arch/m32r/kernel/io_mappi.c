multiline_comment|/*&n; *  linux/arch/m32r/kernel/io_mappi.c&n; *&n; *  Typical I/O routines for Mappi board.&n; *&n; *  Copyright (c) 2001, 2002  Hiroyuki Kondo, Hirokazu Takata,&n; *                            Hitoshi Yamamoto&n; */
multiline_comment|/* $Id: io_mappi.c,v 1.9 2003/12/02 07:18:08 fujiwara Exp $ */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;asm/m32r.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
macro_line|#include &lt;linux/types.h&gt;
DECL|macro|M32R_PCC_IOMAP_SIZE
mdefine_line|#define M32R_PCC_IOMAP_SIZE 0x1000
DECL|macro|M32R_PCC_IOSTART0
mdefine_line|#define M32R_PCC_IOSTART0 0x1000
DECL|macro|M32R_PCC_IOEND0
mdefine_line|#define M32R_PCC_IOEND0   (M32R_PCC_IOSTART0 + M32R_PCC_IOMAP_SIZE - 1)
DECL|macro|M32R_PCC_IOSTART1
mdefine_line|#define M32R_PCC_IOSTART1 0x2000
DECL|macro|M32R_PCC_IOEND1
mdefine_line|#define M32R_PCC_IOEND1   (M32R_PCC_IOSTART1 + M32R_PCC_IOMAP_SIZE - 1)
r_extern
r_void
id|pcc_ioread
c_func
(paren
r_int
comma
r_int
r_int
comma
r_void
op_star
comma
r_int
comma
r_int
comma
r_int
)paren
suffix:semicolon
r_extern
r_void
id|pcc_iowrite
c_func
(paren
r_int
comma
r_int
r_int
comma
r_void
op_star
comma
r_int
comma
r_int
comma
r_int
)paren
suffix:semicolon
macro_line|#endif /* CONFIG_PCMCIA &amp;&amp; CONFIG_M32R_PCC */
DECL|macro|PORT2ADDR
mdefine_line|#define PORT2ADDR(port)  _port2addr(port)
DECL|function|_port2addr
r_static
id|__inline__
r_void
op_star
id|_port2addr
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_return
(paren
r_void
op_star
)paren
(paren
id|port
op_plus
id|NONCACHE_OFFSET
)paren
suffix:semicolon
)brace
DECL|function|_port2addr_ne
r_static
id|__inline__
r_void
op_star
id|_port2addr_ne
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_return
(paren
r_void
op_star
)paren
(paren
(paren
id|port
op_lshift
l_int|1
)paren
op_plus
id|NONCACHE_OFFSET
op_plus
l_int|0x0C000000
)paren
suffix:semicolon
)brace
DECL|function|delay
r_static
id|__inline__
r_void
id|delay
c_func
(paren
r_void
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;push r0; &bslash;n&bslash;t pop r0;&quot;
suffix:colon
suffix:colon
suffix:colon
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * NIC I/O function&n; */
DECL|macro|PORT2ADDR_NE
mdefine_line|#define PORT2ADDR_NE(port)  _port2addr_ne(port)
DECL|function|_ne_inb
r_static
id|__inline__
r_int
r_char
id|_ne_inb
c_func
(paren
r_void
op_star
id|portp
)paren
(brace
r_return
(paren
r_int
r_char
)paren
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
suffix:semicolon
)brace
DECL|function|_ne_inw
r_static
id|__inline__
r_int
r_int
id|_ne_inw
c_func
(paren
r_void
op_star
id|portp
)paren
(brace
r_int
r_int
id|tmp
suffix:semicolon
id|tmp
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
suffix:semicolon
r_return
id|le16_to_cpu
c_func
(paren
id|tmp
)paren
suffix:semicolon
)brace
DECL|function|_ne_outb
r_static
id|__inline__
r_void
id|_ne_outb
c_func
(paren
r_int
r_char
id|b
comma
r_void
op_star
id|portp
)paren
(brace
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
op_assign
(paren
r_int
r_int
)paren
id|b
suffix:semicolon
)brace
DECL|function|_ne_outw
r_static
id|__inline__
r_void
id|_ne_outw
c_func
(paren
r_int
r_int
id|w
comma
r_void
op_star
id|portp
)paren
(brace
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
op_assign
id|cpu_to_le16
c_func
(paren
id|w
)paren
suffix:semicolon
)brace
DECL|function|_inb
r_int
r_char
id|_inb
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
r_return
id|_ne_inb
c_func
(paren
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
r_int
r_char
id|b
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|b
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
r_int
r_char
id|b
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|b
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|_inw
r_int
r_int
id|_inw
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
r_return
id|_ne_inw
c_func
(paren
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
r_int
r_int
id|w
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|w
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
r_int
r_int
id|w
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|w
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|_inl
r_int
r_int
id|_inl
c_func
(paren
r_int
r_int
id|port
)paren
(brace
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
r_int
r_int
id|l
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|l
comma
r_sizeof
(paren
id|l
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|l
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
r_int
r_int
id|l
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|l
comma
r_sizeof
(paren
id|l
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|l
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
DECL|function|_inb_p
r_int
r_char
id|_inb_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_char
id|v
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|v
op_assign
id|_ne_inb
c_func
(paren
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
r_int
r_char
id|b
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|b
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
r_int
r_char
id|b
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|b
suffix:semicolon
)brace
r_else
macro_line|#endif
id|v
op_assign
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
(paren
id|v
)paren
suffix:semicolon
)brace
DECL|function|_inw_p
r_int
r_int
id|_inw_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_int
id|v
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|v
op_assign
id|_ne_inw
c_func
(paren
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
r_int
r_int
id|w
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|w
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
r_int
r_int
id|w
suffix:semicolon
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
r_return
id|w
suffix:semicolon
)brace
r_else
macro_line|#endif
id|v
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
(paren
id|v
)paren
suffix:semicolon
)brace
DECL|function|_inl_p
r_int
r_int
id|_inl_p
c_func
(paren
r_int
r_int
id|port
)paren
(brace
r_int
r_int
id|v
suffix:semicolon
id|v
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
r_return
(paren
id|v
)paren
suffix:semicolon
)brace
DECL|function|_outb
r_void
id|_outb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|_ne_outb
c_func
(paren
id|b
comma
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|b
suffix:semicolon
)brace
DECL|function|_outw
r_void
id|_outw
c_func
(paren
r_int
r_int
id|w
comma
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|_ne_outw
c_func
(paren
id|w
comma
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|w
suffix:semicolon
)brace
DECL|function|_outl
r_void
id|_outl
c_func
(paren
r_int
r_int
id|l
comma
r_int
r_int
id|port
)paren
(brace
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|l
comma
r_sizeof
(paren
id|l
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|l
comma
r_sizeof
(paren
id|l
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|l
suffix:semicolon
)brace
DECL|function|_outb_p
r_void
id|_outb_p
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|_ne_outb
c_func
(paren
id|b
comma
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|b
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|_outw_p
r_void
id|_outw_p
c_func
(paren
r_int
r_int
id|w
comma
r_int
r_int
id|port
)paren
(brace
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
id|_ne_outw
c_func
(paren
id|w
comma
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
)paren
suffix:semicolon
r_else
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
op_amp
id|w
comma
r_sizeof
(paren
id|w
)paren
comma
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|w
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|_outl_p
r_void
id|_outl_p
c_func
(paren
r_int
r_int
id|l
comma
r_int
r_int
id|port
)paren
(brace
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|PORT2ADDR
c_func
(paren
id|port
)paren
op_assign
id|l
suffix:semicolon
id|delay
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|_insb
r_void
id|_insb
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_int
r_int
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_int
op_star
id|portp
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
(brace
id|portp
op_assign
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
id|buf
op_increment
op_assign
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|portp
suffix:semicolon
)brace
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_char
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_char
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
id|buf
op_increment
op_assign
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|portp
suffix:semicolon
)brace
)brace
)brace
DECL|function|_insw
r_void
id|_insw
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_int
r_int
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_int
op_star
id|portp
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
(brace
id|portp
op_assign
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
id|_ne_inw
c_func
(paren
id|portp
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_ioread
c_func
(paren
l_int|0
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_int
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_ioread
c_func
(paren
l_int|1
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_int
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
suffix:semicolon
)brace
)brace
DECL|function|_insl
r_void
id|_insl
c_func
(paren
r_int
r_int
id|port
comma
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_int
r_int
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_int
op_star
id|portp
suffix:semicolon
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|buf
op_increment
op_assign
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
suffix:semicolon
)brace
DECL|function|_outsb
r_void
id|_outsb
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_const
r_int
r_char
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_char
op_star
id|portp
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
(brace
id|portp
op_assign
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|_ne_outb
c_func
(paren
op_star
id|buf
op_increment
comma
id|portp
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_char
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_char
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
(paren
r_volatile
r_int
r_char
op_star
)paren
id|portp
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
)brace
)brace
DECL|function|_outsw
r_void
id|_outsw
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_const
r_int
r_int
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_int
op_star
id|portp
suffix:semicolon
r_if
c_cond
(paren
id|port
op_ge
l_int|0x300
op_logical_and
id|port
OL
l_int|0x320
)paren
(brace
id|portp
op_assign
id|PORT2ADDR_NE
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|_ne_outw
c_func
(paren
op_star
id|buf
op_increment
comma
id|portp
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_PCMCIA) &amp;&amp; defined(CONFIG_M32R_PCC)
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART0
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND0
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|0
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_int
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|port
op_ge
id|M32R_PCC_IOSTART1
op_logical_and
id|port
op_le
id|M32R_PCC_IOEND1
)paren
(brace
id|pcc_iowrite
c_func
(paren
l_int|1
comma
id|port
comma
(paren
r_void
op_star
)paren
id|addr
comma
r_sizeof
(paren
r_int
r_int
)paren
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
)brace
)brace
DECL|function|_outsl
r_void
id|_outsl
c_func
(paren
r_int
r_int
id|port
comma
r_const
r_void
op_star
id|addr
comma
r_int
r_int
id|count
)paren
(brace
r_const
r_int
r_int
op_star
id|buf
op_assign
id|addr
suffix:semicolon
r_int
r_char
op_star
id|portp
suffix:semicolon
id|portp
op_assign
id|PORT2ADDR
c_func
(paren
id|port
)paren
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
(paren
r_volatile
r_int
r_int
op_star
)paren
id|portp
op_assign
op_star
id|buf
op_increment
suffix:semicolon
)brace
)brace
eof
