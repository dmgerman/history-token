multiline_comment|/*&n; *  linux/arch/m68knommu/kernel/setup.c&n; *&n; *  Copyright (C) 1999-2002  Greg Ungerer (gerg@snapgear.com)&n; *  Copyright (C) 1998,1999  D. Jeff Dionne &lt;jeff@lineo.ca&gt;&n; *  Copyleft  ()) 2000       James D. Schettine {james@telos-systems.com}&n; *  Copyright (C) 1998       Kenneth Albanowski &lt;kjahds@kjahds.com&gt;&n; *  Copyright (C) 1995       Hamish Macdonald&n; *  Copyright (C) 2000       Lineo Inc. (www.lineo.com) &n; *  Copyright (C) 2001 &t;     Lineo, Inc. &lt;www.lineo.com&gt;&n; *&n; *  68VZ328 Fixes/support    Evan Stawnyczy &lt;e@lineo.ca&gt;&n; */
multiline_comment|/*&n; * This file handles the architecture-dependent parts of system setup&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;linux/genhd.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/major.h&gt;
macro_line|#include &lt;linux/bootmem.h&gt;
macro_line|#include &lt;linux/seq_file.h&gt;
macro_line|#include &lt;linux/root_dev.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/setup.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/machdep.h&gt;
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#endif
DECL|variable|rom_length
r_int
r_int
id|rom_length
suffix:semicolon
DECL|variable|memory_start
r_int
r_int
id|memory_start
suffix:semicolon
DECL|variable|memory_end
r_int
r_int
id|memory_end
suffix:semicolon
DECL|variable|command_line
r_char
id|command_line
(braket
id|COMMAND_LINE_SIZE
)braket
suffix:semicolon
multiline_comment|/* setup some dummy routines */
DECL|function|dummy_waitbut
r_static
r_void
id|dummy_waitbut
c_func
(paren
r_void
)paren
(brace
)brace
DECL|variable|mach_sched_init
r_void
(paren
op_star
id|mach_sched_init
)paren
(paren
id|irqreturn_t
(paren
op_star
id|handler
)paren
(paren
r_int
comma
r_void
op_star
comma
r_struct
id|pt_regs
op_star
)paren
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_tick
r_void
(paren
op_star
id|mach_tick
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/* machine dependent keyboard functions */
DECL|variable|mach_keyb_init
r_int
(paren
op_star
id|mach_keyb_init
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_kbdrate
r_int
(paren
op_star
id|mach_kbdrate
)paren
(paren
r_struct
id|kbd_repeat
op_star
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_kbd_leds
r_void
(paren
op_star
id|mach_kbd_leds
)paren
(paren
r_int
r_int
)paren
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/* machine dependent irq functions */
DECL|variable|mach_init_IRQ
r_void
(paren
op_star
id|mach_init_IRQ
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_default_handler
id|irqreturn_t
(paren
op_star
(paren
op_star
id|mach_default_handler
)paren
(braket
)braket
)paren
(paren
r_int
comma
r_void
op_star
comma
r_struct
id|pt_regs
op_star
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_enable_irq
r_void
(paren
op_star
id|mach_enable_irq
)paren
(paren
r_int
r_int
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_disable_irq
r_void
(paren
op_star
id|mach_disable_irq
)paren
(paren
r_int
r_int
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_get_irq_list
r_int
(paren
op_star
id|mach_get_irq_list
)paren
(paren
r_struct
id|seq_file
op_star
comma
r_void
op_star
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_process_int
r_void
(paren
op_star
id|mach_process_int
)paren
(paren
r_int
id|irq
comma
r_struct
id|pt_regs
op_star
id|fp
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_trap_init
r_void
(paren
op_star
id|mach_trap_init
)paren
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/* machine dependent timer functions */
DECL|variable|mach_gettimeoffset
r_int
r_int
(paren
op_star
id|mach_gettimeoffset
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_gettod
r_void
(paren
op_star
id|mach_gettod
)paren
(paren
r_int
op_star
comma
r_int
op_star
comma
r_int
op_star
comma
r_int
op_star
comma
r_int
op_star
comma
r_int
op_star
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_hwclk
r_int
(paren
op_star
id|mach_hwclk
)paren
(paren
r_int
comma
r_struct
id|hwclk_time
op_star
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_set_clock_mmss
r_int
(paren
op_star
id|mach_set_clock_mmss
)paren
(paren
r_int
r_int
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_mksound
r_void
(paren
op_star
id|mach_mksound
)paren
(paren
r_int
r_int
id|count
comma
r_int
r_int
id|ticks
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_reset
r_void
(paren
op_star
id|mach_reset
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|waitbut
r_void
(paren
op_star
id|waitbut
)paren
(paren
r_void
)paren
op_assign
id|dummy_waitbut
suffix:semicolon
DECL|variable|mach_debug_init
r_void
(paren
op_star
id|mach_debug_init
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_halt
r_void
(paren
op_star
id|mach_halt
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|mach_power_off
r_void
(paren
op_star
id|mach_power_off
)paren
(paren
r_void
)paren
op_assign
l_int|NULL
suffix:semicolon
macro_line|#ifdef CONFIG_M68000
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68000&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_M68328
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68328&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_M68EZ328
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68EZ328&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_M68VZ328
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68VZ328&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_M68332
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68332&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_M68360
DECL|macro|CPU
mdefine_line|#define CPU &quot;MC68360&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5206)
DECL|macro|CPU
mdefine_line|#define&t;CPU &quot;COLDFIRE(m5206)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5206e)
DECL|macro|CPU
mdefine_line|#define&t;CPU &quot;COLDFIRE(m5206e)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5249)
DECL|macro|CPU
mdefine_line|#define CPU &quot;COLDFIRE(m5249)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5272)
DECL|macro|CPU
mdefine_line|#define CPU &quot;COLDFIRE(m5272)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5282)
DECL|macro|CPU
mdefine_line|#define CPU &quot;COLDFIRE(m5282)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5307)
DECL|macro|CPU
mdefine_line|#define&t;CPU &quot;COLDFIRE(m5307)&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_M5407)
DECL|macro|CPU
mdefine_line|#define&t;CPU &quot;COLDFIRE(m5407)&quot;
macro_line|#endif
macro_line|#ifndef CPU
DECL|macro|CPU
mdefine_line|#define&t;CPU &quot;UNKOWN&quot;
macro_line|#endif
multiline_comment|/* (es) */
multiline_comment|/* note: why is this defined here?  the must be a better place to put this */
macro_line|#if defined( CONFIG_TELOS) || defined( CONFIG_UCDIMM ) || defined( CONFIG_UCSIMM ) || defined(CONFIG_DRAGEN2) || (defined( CONFIG_PILOT ) &amp;&amp; defined( CONFIG_M68328 ))
DECL|macro|CAT_ROMARRAY
mdefine_line|#define CAT_ROMARRAY
macro_line|#endif
multiline_comment|/* (/es) */
r_extern
r_int
id|_stext
comma
id|_etext
comma
id|_sdata
comma
id|_edata
comma
id|_sbss
comma
id|_ebss
comma
id|_end
suffix:semicolon
r_extern
r_int
id|_ramstart
comma
id|_ramend
suffix:semicolon
DECL|function|setup_arch
r_void
id|setup_arch
c_func
(paren
r_char
op_star
op_star
id|cmdline_p
)paren
(brace
r_int
id|bootmap_size
suffix:semicolon
macro_line|#if defined(CAT_ROMARRAY) &amp;&amp; defined(DEBUG)
r_extern
r_int
id|__data_rom_start
suffix:semicolon
r_extern
r_int
id|__data_start
suffix:semicolon
r_int
op_star
id|romarray
op_assign
(paren
r_int
op_star
)paren
(paren
(paren
r_int
)paren
op_amp
id|__data_rom_start
op_plus
(paren
r_int
)paren
op_amp
id|_edata
op_minus
(paren
r_int
)paren
op_amp
id|__data_start
)paren
suffix:semicolon
macro_line|#endif
id|memory_start
op_assign
id|PAGE_ALIGN
c_func
(paren
id|_ramstart
)paren
suffix:semicolon
id|memory_end
op_assign
id|_ramend
suffix:semicolon
multiline_comment|/* by now the stack is part of the init task */
id|init_mm.start_code
op_assign
(paren
r_int
r_int
)paren
op_amp
id|_stext
suffix:semicolon
id|init_mm.end_code
op_assign
(paren
r_int
r_int
)paren
op_amp
id|_etext
suffix:semicolon
id|init_mm.end_data
op_assign
(paren
r_int
r_int
)paren
op_amp
id|_edata
suffix:semicolon
id|init_mm.brk
op_assign
(paren
r_int
r_int
)paren
l_int|0
suffix:semicolon
id|config_BSP
c_func
(paren
op_amp
id|command_line
(braket
l_int|0
)braket
comma
r_sizeof
(paren
id|command_line
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;&bslash;x0F&bslash;r&bslash;n&bslash;nuClinux/&quot;
id|CPU
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_UCDIMM
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;uCdimm by Lineo, Inc. &lt;www.lineo.com&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_M68VZ328
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;M68VZ328 support by Evan Stawnyczy &lt;e@lineo.ca&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_COLDFIRE
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;COLDFIRE port done by Greg Ungerer, gerg@snapgear.com&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_M5307
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Modified for M5307 by Dave Miller, dmiller@intellistor.com&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ELITE
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Modified for M5206eLITE by Rob Scott, rscott@mtrob.fdns.net&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif  
macro_line|#ifdef CONFIG_TELOS
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Modified for Omnia ToolVox by James D. Schettine, james@telos-systems.com&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Flat model support (C) 1998,1999 Kenneth Albanowski, D. Jeff Dionne&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#if defined( CONFIG_PILOT ) &amp;&amp; defined( CONFIG_M68328 )
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;TRG SuperPilot FLASH card support &lt;info@trgnet.com&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined( CONFIG_PILOT ) &amp;&amp; defined( CONFIG_M68EZ328 )
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;PalmV support by Lineo Inc. &lt;jeff@uclinux.com&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_M68EZ328ADS
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;M68EZ328ADS board support (C) 1999 Vladimir Gurevich &lt;vgurevic@cisco.com&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ALMA_ANS
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Alma Electronics board support (C) 1999 Vladimir Gurevich &lt;vgurevic@cisco.com&gt;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined (CONFIG_M68360)
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;QUICC port done by SED Systems &lt;hamilton@sedsystems.ca&gt;,&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;based on 2.0.38 port by Lineo Inc. &lt;mleslie@lineo.com&gt;.&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DRAGEN2
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;DragonEngine II board support by Georges Menie&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;KERNEL -&gt; TEXT=0x%06x-0x%06x DATA=0x%06x-0x%06x &quot;
l_string|&quot;BSS=0x%06x-0x%06x&bslash;n&quot;
comma
(paren
r_int
)paren
op_amp
id|_stext
comma
(paren
r_int
)paren
op_amp
id|_etext
comma
(paren
r_int
)paren
op_amp
id|_sdata
comma
(paren
r_int
)paren
op_amp
id|_edata
comma
(paren
r_int
)paren
op_amp
id|_sbss
comma
(paren
r_int
)paren
op_amp
id|_ebss
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;KERNEL -&gt; ROMFS=0x%06x-0x%06x MEM=0x%06x-0x%06x &quot;
l_string|&quot;STACK=0x%06x-0x%06x&bslash;n&quot;
comma
macro_line|#ifdef CAT_ROMARRAY
(paren
r_int
)paren
id|romarray
comma
(paren
(paren
r_int
)paren
id|romarray
)paren
op_plus
id|romarray
(braket
l_int|2
)braket
comma
macro_line|#else
(paren
r_int
)paren
op_amp
id|_ebss
comma
(paren
r_int
)paren
id|memory_start
comma
macro_line|#endif
(paren
r_int
)paren
id|memory_start
comma
(paren
r_int
)paren
id|memory_end
comma
(paren
r_int
)paren
id|memory_end
comma
(paren
r_int
)paren
id|_ramend
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Keep a copy of command line */
op_star
id|cmdline_p
op_assign
op_amp
id|command_line
(braket
l_int|0
)braket
suffix:semicolon
id|memcpy
c_func
(paren
id|saved_command_line
comma
id|command_line
comma
id|COMMAND_LINE_SIZE
)paren
suffix:semicolon
id|saved_command_line
(braket
id|COMMAND_LINE_SIZE
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef DEBUG
r_if
c_cond
(paren
id|strlen
c_func
(paren
op_star
id|cmdline_p
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Command line: &squot;%s&squot;&bslash;n&quot;
comma
op_star
id|cmdline_p
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_FRAMEBUFFER_CONSOLE) &amp;&amp; defined(CONFIG_DUMMY_CONSOLE)
id|conswitchp
op_assign
op_amp
id|dummy_con
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n;&t; * Give all the memory to the bootmap allocator, tell it to put the&n;&t; * boot mem_map at the start of memory.&n;&t; */
id|bootmap_size
op_assign
id|init_bootmem_node
c_func
(paren
id|NODE_DATA
c_func
(paren
l_int|0
)paren
comma
id|memory_start
op_rshift
id|PAGE_SHIFT
comma
multiline_comment|/* map goes here */
id|PAGE_OFFSET
op_rshift
id|PAGE_SHIFT
comma
multiline_comment|/* 0 on coldfire */
id|memory_end
op_rshift
id|PAGE_SHIFT
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Free the usable memory, we have to make sure we do not free&n;&t; * the bootmem bitmap so we then reserve it after freeing it :-)&n;&t; */
id|free_bootmem
c_func
(paren
id|memory_start
comma
id|memory_end
op_minus
id|memory_start
)paren
suffix:semicolon
id|reserve_bootmem
c_func
(paren
id|memory_start
comma
id|bootmap_size
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Get kmalloc into gear.&n;&t; */
id|paging_init
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|get_cpuinfo
r_int
id|get_cpuinfo
c_func
(paren
r_char
op_star
id|buffer
)paren
(brace
r_char
op_star
id|cpu
comma
op_star
id|mmu
comma
op_star
id|fpu
suffix:semicolon
id|u_long
id|clockfreq
suffix:semicolon
id|cpu
op_assign
id|CPU
suffix:semicolon
id|mmu
op_assign
l_string|&quot;none&quot;
suffix:semicolon
id|fpu
op_assign
l_string|&quot;none&quot;
suffix:semicolon
macro_line|#ifdef CONFIG_COLDFIRE
id|clockfreq
op_assign
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_star
l_int|3
suffix:semicolon
macro_line|#else
id|clockfreq
op_assign
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_star
l_int|16
suffix:semicolon
macro_line|#endif
r_return
id|sprintf
c_func
(paren
id|buffer
comma
l_string|&quot;CPU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;MMU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;FPU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;Clocking:&bslash;t%lu.%1luMHz&bslash;n&quot;
l_string|&quot;BogoMips:&bslash;t%lu.%02lu&bslash;n&quot;
l_string|&quot;Calibration:&bslash;t%lu loops&bslash;n&quot;
comma
id|cpu
comma
id|mmu
comma
id|fpu
comma
id|clockfreq
op_div
l_int|1000000
comma
(paren
id|clockfreq
op_div
l_int|100000
)paren
op_mod
l_int|10
comma
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_div
l_int|500000
comma
(paren
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_div
l_int|5000
)paren
op_mod
l_int|100
comma
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; *&t;Get CPU information for use by the procfs.&n; */
DECL|function|show_cpuinfo
r_static
r_int
id|show_cpuinfo
c_func
(paren
r_struct
id|seq_file
op_star
id|m
comma
r_void
op_star
id|v
)paren
(brace
r_char
op_star
id|cpu
comma
op_star
id|mmu
comma
op_star
id|fpu
suffix:semicolon
id|u_long
id|clockfreq
suffix:semicolon
id|cpu
op_assign
id|CPU
suffix:semicolon
id|mmu
op_assign
l_string|&quot;none&quot;
suffix:semicolon
id|fpu
op_assign
l_string|&quot;none&quot;
suffix:semicolon
macro_line|#ifdef CONFIG_COLDFIRE
id|clockfreq
op_assign
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_star
l_int|3
suffix:semicolon
macro_line|#else
id|clockfreq
op_assign
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_star
l_int|16
suffix:semicolon
macro_line|#endif
id|seq_printf
c_func
(paren
id|m
comma
l_string|&quot;CPU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;MMU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;FPU:&bslash;t&bslash;t%s&bslash;n&quot;
l_string|&quot;Clocking:&bslash;t%lu.%1luMHz&bslash;n&quot;
l_string|&quot;BogoMips:&bslash;t%lu.%02lu&bslash;n&quot;
l_string|&quot;Calibration:&bslash;t%lu loops&bslash;n&quot;
comma
id|cpu
comma
id|mmu
comma
id|fpu
comma
id|clockfreq
op_div
l_int|1000000
comma
(paren
id|clockfreq
op_div
l_int|100000
)paren
op_mod
l_int|10
comma
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_div
l_int|500000
comma
(paren
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
op_div
l_int|5000
)paren
op_mod
l_int|100
comma
(paren
id|loops_per_jiffy
op_star
id|HZ
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|c_start
r_static
r_void
op_star
id|c_start
c_func
(paren
r_struct
id|seq_file
op_star
id|m
comma
id|loff_t
op_star
id|pos
)paren
(brace
r_return
op_star
id|pos
OL
id|NR_CPUS
ques
c_cond
(paren
(paren
r_void
op_star
)paren
l_int|0x12345678
)paren
suffix:colon
l_int|NULL
suffix:semicolon
)brace
DECL|function|c_next
r_static
r_void
op_star
id|c_next
c_func
(paren
r_struct
id|seq_file
op_star
id|m
comma
r_void
op_star
id|v
comma
id|loff_t
op_star
id|pos
)paren
(brace
op_increment
op_star
id|pos
suffix:semicolon
r_return
id|c_start
c_func
(paren
id|m
comma
id|pos
)paren
suffix:semicolon
)brace
DECL|function|c_stop
r_static
r_void
id|c_stop
c_func
(paren
r_struct
id|seq_file
op_star
id|m
comma
r_void
op_star
id|v
)paren
(brace
)brace
DECL|variable|cpuinfo_op
r_struct
id|seq_operations
id|cpuinfo_op
op_assign
(brace
dot
id|start
op_assign
id|c_start
comma
dot
id|next
op_assign
id|c_next
comma
dot
id|stop
op_assign
id|c_stop
comma
dot
id|show
op_assign
id|show_cpuinfo
comma
)brace
suffix:semicolon
DECL|function|arch_gettod
r_void
id|arch_gettod
c_func
(paren
r_int
op_star
id|year
comma
r_int
op_star
id|mon
comma
r_int
op_star
id|day
comma
r_int
op_star
id|hour
comma
r_int
op_star
id|min
comma
r_int
op_star
id|sec
)paren
(brace
r_if
c_cond
(paren
id|mach_gettod
)paren
id|mach_gettod
c_func
(paren
id|year
comma
id|mon
comma
id|day
comma
id|hour
comma
id|min
comma
id|sec
)paren
suffix:semicolon
r_else
op_star
id|year
op_assign
op_star
id|mon
op_assign
op_star
id|day
op_assign
op_star
id|hour
op_assign
op_star
id|min
op_assign
op_star
id|sec
op_assign
l_int|0
suffix:semicolon
)brace
eof
