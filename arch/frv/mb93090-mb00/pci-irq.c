multiline_comment|/* pci-irq.c: PCI IRQ routing on the FRV motherboard&n; *&n; * Copyright (C) 2003 Red Hat, Inc. All Rights Reserved.&n; * Written by David Howells (dhowells@redhat.com)&n; * derived from: arch/i386/kernel/pci-irq.c: (c) 1999--2000 Martin Mares &lt;mj@suse.cz&gt;&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/irq.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/smp.h&gt;
macro_line|#include &lt;asm/irq-routing.h&gt;
macro_line|#include &quot;pci-frv.h&quot;
multiline_comment|/*&n; *&t;DEVICE&t;DEVNO&t;INT#A&t;INT#B&t;INT#C&t;INT#D&n; *&t;=======&t;=======&t;=======&t;=======&t;=======&t;=======&n; *&t;MB86943&t;0&t;fpga.10&t;-&t;-&t;-&n; *&t;RTL8029&t;16&t;fpga.12&t;-&t;-&t;-&n; *&t;SLOT 1&t;19&t;fpga.6&t;fpga.5&t;fpga.4&t;fpga.3&n; *&t;SLOT 2&t;18&t;fpga.5&t;fpga.4&t;fpga.3&t;fpga.6&n; *&t;SLOT 3&t;17&t;fpga.4&t;fpga.3&t;fpga.6&t;fpga.5&n; *&n; */
DECL|variable|pci_bus0_irq_routing
r_static
r_const
r_uint8
id|__initdata
id|pci_bus0_irq_routing
(braket
l_int|32
)braket
(braket
l_int|4
)braket
op_assign
(brace
(braket
l_int|0
)braket
(brace
id|IRQ_FPGA_MB86943_PCI_INTA
)brace
comma
(braket
l_int|16
)braket
(brace
id|IRQ_FPGA_RTL8029_INTA
)brace
comma
(braket
l_int|17
)braket
(brace
id|IRQ_FPGA_PCI_INTC
comma
id|IRQ_FPGA_PCI_INTD
comma
id|IRQ_FPGA_PCI_INTA
comma
id|IRQ_FPGA_PCI_INTB
)brace
comma
(braket
l_int|18
)braket
(brace
id|IRQ_FPGA_PCI_INTB
comma
id|IRQ_FPGA_PCI_INTC
comma
id|IRQ_FPGA_PCI_INTD
comma
id|IRQ_FPGA_PCI_INTA
)brace
comma
(braket
l_int|19
)braket
(brace
id|IRQ_FPGA_PCI_INTA
comma
id|IRQ_FPGA_PCI_INTB
comma
id|IRQ_FPGA_PCI_INTC
comma
id|IRQ_FPGA_PCI_INTD
)brace
comma
)brace
suffix:semicolon
DECL|function|pcibios_irq_init
r_void
id|__init
id|pcibios_irq_init
c_func
(paren
r_void
)paren
(brace
)brace
DECL|function|pcibios_fixup_irqs
r_void
id|__init
id|pcibios_fixup_irqs
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
op_assign
l_int|NULL
suffix:semicolon
r_uint8
id|line
comma
id|pin
suffix:semicolon
r_while
c_loop
(paren
id|dev
op_assign
id|pci_find_device
c_func
(paren
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
id|dev
)paren
comma
id|dev
op_ne
l_int|NULL
)paren
(brace
id|pci_read_config_byte
c_func
(paren
id|dev
comma
id|PCI_INTERRUPT_PIN
comma
op_amp
id|pin
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pin
)paren
(brace
id|dev-&gt;irq
op_assign
id|pci_bus0_irq_routing
(braket
id|PCI_SLOT
c_func
(paren
id|dev-&gt;devfn
)paren
)braket
(braket
id|pin
op_minus
l_int|1
)braket
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
id|PCI_INTERRUPT_LINE
comma
id|dev-&gt;irq
)paren
suffix:semicolon
)brace
id|pci_read_config_byte
c_func
(paren
id|dev
comma
id|PCI_INTERRUPT_LINE
comma
op_amp
id|line
)paren
suffix:semicolon
)brace
)brace
DECL|function|pcibios_penalize_isa_irq
r_void
id|__init
id|pcibios_penalize_isa_irq
c_func
(paren
r_int
id|irq
)paren
(brace
)brace
DECL|function|pcibios_enable_irq
r_void
id|pcibios_enable_irq
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
)paren
(brace
id|pci_write_config_byte
c_func
(paren
id|dev
comma
id|PCI_INTERRUPT_LINE
comma
id|dev-&gt;irq
)paren
suffix:semicolon
)brace
eof
