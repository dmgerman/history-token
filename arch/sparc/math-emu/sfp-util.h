macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
DECL|macro|add_ssaaaa
mdefine_line|#define add_ssaaaa(sh, sl, ah, al, bh, bl) &t;&t;&t;&t;&bslash;&n;  __asm__ (&quot;addcc %r4,%5,%1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;addx %r2,%3,%0&bslash;n&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;=r&quot; ((USItype)(sh)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;=&amp;r&quot; ((USItype)(sl))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;%rJ&quot; ((USItype)(ah)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;rI&quot; ((USItype)(bh)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;%rJ&quot; ((USItype)(al)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;rI&quot; ((USItype)(bl))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;cc&quot;)
DECL|macro|sub_ddmmss
mdefine_line|#define sub_ddmmss(sh, sl, ah, al, bh, bl) &t;&t;&t;&t;&bslash;&n;  __asm__ (&quot;subcc %r4,%5,%1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;subx %r2,%3,%0&bslash;n&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;=r&quot; ((USItype)(sh)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;=&amp;r&quot; ((USItype)(sl))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;rJ&quot; ((USItype)(ah)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;rI&quot; ((USItype)(bh)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;rJ&quot; ((USItype)(al)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;rI&quot; ((USItype)(bl))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;cc&quot;)
DECL|macro|umul_ppmm
mdefine_line|#define umul_ppmm(w1, w0, u, v) &bslash;&n;  __asm__ (&quot;! Inlined umul_ppmm&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;wr&t;%%g0,%2,%%y&t;! SPARC has 0-3 delay insn after a wr&bslash;n&bslash;t&quot; &bslash;&n;&t;&quot;sra&t;%3,31,%%g2&t;! Don&squot;t move this insn&bslash;n&bslash;t&quot;&t;&t;&bslash;&n;&t;&quot;and&t;%2,%%g2,%%g2&t;! Don&squot;t move this insn&bslash;n&bslash;t&quot;&t;&t;&bslash;&n;&t;&quot;andcc&t;%%g0,0,%%g1&t;! Don&squot;t move this insn&bslash;n&bslash;t&quot;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,%3,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;&quot;mulscc&t;%%g1,0,%%g1&bslash;n&bslash;t&quot; &t;&t;&t;&t;&t;&bslash;&n;&t;&quot;add&t;%%g1,%%g2,%0&bslash;n&bslash;t&quot; &t;&t;&t;&t;&t;&bslash;&n;&t;&quot;rd&t;%%y,%1&bslash;n&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;=r&quot; ((USItype)(w1)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;=r&quot; ((USItype)(w0))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;%rI&quot; ((USItype)(u)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;r&quot; ((USItype)(v))&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;%g1&quot;, &quot;%g2&quot;, &quot;cc&quot;)
multiline_comment|/* It&squot;s quite necessary to add this much assembler for the sparc.&n;   The default udiv_qrnnd (in C) is more than 10 times slower!  */
DECL|macro|udiv_qrnnd
mdefine_line|#define udiv_qrnnd(q, r, n1, n0, d) &bslash;&n;  __asm__ (&quot;! Inlined udiv_qrnnd&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;mov&t;32,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;subcc&t;%1,%2,%%g0&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;1:&t;bcs&t;5f&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;addxcc %0,%0,%0&t;! shift n1n0 and a q-bit in lsb&bslash;n&bslash;t&quot;&t;&bslash;&n;&t;   &quot;sub&t;%1,%2,%1&t;! this kills msb of n&bslash;n&bslash;t&quot;&t;&t;&bslash;&n;&t;   &quot;addx&t;%1,%1,%1&t;! so this can&squot;t give carry&bslash;n&bslash;t&quot;&t;&bslash;&n;&t;   &quot;subcc&t;%%g1,1,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&bslash;&n;&t;   &quot;2:&t;bne&t;1b&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;subcc&t;%1,%2,%%g0&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;bcs&t;3f&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;addxcc %0,%0,%0&t;! shift n1n0 and a q-bit in lsb&bslash;n&bslash;t&quot;&t;&bslash;&n;&t;   &quot;b&t;&t;3f&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;sub&t;%1,%2,%1&t;! this kills msb of n&bslash;n&bslash;t&quot;&t;&t;&bslash;&n;&t;   &quot;4:&t;sub&t;%1,%2,%1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;5:&t;addxcc&t;%1,%1,%1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;bcc&t;2b&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;subcc&t;%%g1,1,%%g1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&bslash;&n;&t;   &quot;! Got carry from n.  Subtract next step to cancel this carry.&bslash;n&bslash;t&quot; &bslash;&n;&t;   &quot;bne&t;4b&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;addcc&t;%0,%0,%0&t;! shift n1n0 and a 0-bit in lsb&bslash;n&bslash;t&quot; &bslash;&n;&t;   &quot;sub&t;%1,%2,%1&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;3:&t;xnor&t;%0,0,%0&bslash;n&bslash;t&quot;&t;&t;&t;&t;&t;&bslash;&n;&t;   &quot;! End of inline udiv_qrnnd&bslash;n&quot;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;=&amp;r&quot; ((USItype)(q)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;=&amp;r&quot; ((USItype)(r))&t;&t;&t;&t;&t;&bslash;&n;&t;   : &quot;r&quot; ((USItype)(d)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;1&quot; ((USItype)(n1)),&t;&t;&t;&t;&t;&bslash;&n;&t;     &quot;0&quot; ((USItype)(n0)) : &quot;%g1&quot;, &quot;cc&quot;)
DECL|macro|UDIV_NEEDS_NORMALIZATION
mdefine_line|#define UDIV_NEEDS_NORMALIZATION 0
DECL|macro|abort
mdefine_line|#define abort()&t;&t;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;return 0
macro_line|#ifdef __BIG_ENDIAN
DECL|macro|__BYTE_ORDER
mdefine_line|#define __BYTE_ORDER __BIG_ENDIAN
macro_line|#else
DECL|macro|__BYTE_ORDER
mdefine_line|#define __BYTE_ORDER __LITTLE_ENDIAN
macro_line|#endif
eof
