multiline_comment|/*&n; * Copyright (c) 2000-2003 Silicon Graphics, Inc.  All Rights Reserved.&n; *&n; * This program is free software; you can redistribute it and/or modify it&n; * under the terms of version 2 of the GNU General Public License as&n; * published by the Free Software Foundation.&n; *&n; * This program is distributed in the hope that it would be useful, but&n; * WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&n; *&n; * Further, this software is distributed without any warranty that it is&n; * free of the rightful claim of any third person regarding infringement&n; * or the like.  Any license provided herein, whether implied or&n; * otherwise, applies only to this software file.  Patent licenses, if&n; * any, provided herein do not apply to combinations of this program with&n; * other software, or any other product whatsoever.&n; *&n; * You should have received a copy of the GNU General Public License along&n; * with this program; if not, write the Free Software Foundation, Inc., 59&n; * Temple Place - Suite 330, Boston MA 02111-1307, USA.&n; *&n; * Contact information: Silicon Graphics, Inc., 1600 Amphitheatre Pkwy,&n; * Mountain View, CA  94043, or:&n; *&n; * http://www.sgi.com&n; *&n; * For further information regarding this notice, see:&n; *&n; * http://oss.sgi.com/projects/GenInfo/SGIGPLNoticeExplan/&n; */
macro_line|#include &quot;xfs.h&quot;
macro_line|#include &quot;pagebuf/page_buf_internal.h&quot;
macro_line|#include &lt;linux/ctype.h&gt;
macro_line|#include &lt;linux/kdb.h&gt;
macro_line|#include &lt;linux/kdbprivate.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &quot;xfs_macros.h&quot;
macro_line|#include &quot;xfs_types.h&quot;
macro_line|#include &quot;xfs_inum.h&quot;
macro_line|#include &quot;xfs_log.h&quot;
macro_line|#include &quot;xfs_trans.h&quot;
macro_line|#include &quot;xfs_sb.h&quot;
macro_line|#include &quot;xfs_dir.h&quot;
macro_line|#include &quot;xfs_dir2.h&quot;
macro_line|#include &quot;xfs_dmapi.h&quot;
macro_line|#include &quot;xfs_mount.h&quot;
macro_line|#include &quot;xfs_alloc.h&quot;
macro_line|#include &quot;xfs_ag.h&quot;
macro_line|#include &quot;xfs_alloc_btree.h&quot;
macro_line|#include &quot;xfs_bmap_btree.h&quot;
macro_line|#include &quot;xfs_ialloc_btree.h&quot;
macro_line|#include &quot;xfs_btree.h&quot;
macro_line|#include &quot;xfs_buf_item.h&quot;
macro_line|#include &quot;xfs_extfree_item.h&quot;
macro_line|#include &quot;xfs_inode_item.h&quot;
macro_line|#include &quot;xfs_attr_sf.h&quot;
macro_line|#include &quot;xfs_dir_sf.h&quot;
macro_line|#include &quot;xfs_dir2_sf.h&quot;
macro_line|#include &quot;xfs_dinode.h&quot;
macro_line|#include &quot;xfs_inode.h&quot;
macro_line|#include &quot;xfs_bmap.h&quot;
macro_line|#include &quot;xfs_da_btree.h&quot;
macro_line|#include &quot;xfs_attr.h&quot;
macro_line|#include &quot;xfs_attr_leaf.h&quot;
macro_line|#include &quot;xfs_dir_leaf.h&quot;
macro_line|#include &quot;xfs_dir2_data.h&quot;
macro_line|#include &quot;xfs_dir2_leaf.h&quot;
macro_line|#include &quot;xfs_dir2_block.h&quot;
macro_line|#include &quot;xfs_dir2_node.h&quot;
macro_line|#include &quot;xfs_dir2_trace.h&quot;
macro_line|#include &quot;xfs_log_priv.h&quot;
macro_line|#include &quot;xfs_log_recover.h&quot;
macro_line|#include &quot;xfs_rw.h&quot;
macro_line|#include &quot;xfs_bit.h&quot;
macro_line|#include &quot;xfs_quota.h&quot;
macro_line|#include &quot;xfs_log_recover.h&quot;
macro_line|#include &quot;quota/xfs_qm.h&quot;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Silicon Graphics, Inc.&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Additional kdb commands for debugging XFS&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
multiline_comment|/*&n; * Command table functions.&n; */
r_static
r_void
id|xfsidbg_xagf
c_func
(paren
id|xfs_agf_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xagi
c_func
(paren
id|xfs_agi_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xaildump
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xalloc
c_func
(paren
id|xfs_alloc_arg_t
op_star
)paren
suffix:semicolon
macro_line|#ifdef DEBUG
r_static
r_void
id|xfsidbg_xalmtrace
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
macro_line|#endif
r_static
r_void
id|xfsidbg_xattrcontext
c_func
(paren
id|xfs_attr_list_context_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xattrleaf
c_func
(paren
id|xfs_attr_leafblock_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xattrsf
c_func
(paren
id|xfs_attr_shortform_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbirec
c_func
(paren
id|xfs_bmbt_irec_t
op_star
id|r
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbmalla
c_func
(paren
id|xfs_bmalloca_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbrec
c_func
(paren
id|xfs_bmbt_rec_64_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbroot
c_func
(paren
id|xfs_inode_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbroota
c_func
(paren
id|xfs_inode_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbtcur
c_func
(paren
id|xfs_btree_cur_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbuf
c_func
(paren
id|xfs_buf_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xbuf_real
c_func
(paren
id|xfs_buf_t
op_star
comma
r_int
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xchash
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xchashlist
c_func
(paren
id|xfs_chashlist_t
op_star
id|chl
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdaargs
c_func
(paren
id|xfs_da_args_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdabuf
c_func
(paren
id|xfs_dabuf_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdanode
c_func
(paren
id|xfs_da_intnode_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdastate
c_func
(paren
id|xfs_da_state_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdirleaf
c_func
(paren
id|xfs_dir_leafblock_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdirsf
c_func
(paren
id|xfs_dir_shortform_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdir2free
c_func
(paren
id|xfs_dir2_free_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xdir2sf
c_func
(paren
id|xfs_dir2_sf_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xexlist
c_func
(paren
id|xfs_inode_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xflist
c_func
(paren
id|xfs_bmap_free_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xhelp
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xiclog
c_func
(paren
id|xlog_in_core_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xiclogall
c_func
(paren
id|xlog_in_core_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xiclogcb
c_func
(paren
id|xlog_in_core_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xihash
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xinodes
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_delayed_blocks
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xinodes_quiesce
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlog
c_func
(paren
id|xlog_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlog_ritem
c_func
(paren
id|xlog_recover_item_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlog_rtrans
c_func
(paren
id|xlog_recover_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlog_rtrans_entire
c_func
(paren
id|xlog_recover_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlog_tic
c_func
(paren
id|xlog_ticket_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xlogitem
c_func
(paren
id|xfs_log_item_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xmount
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xnode
c_func
(paren
id|xfs_inode_t
op_star
id|ip
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xcore
c_func
(paren
id|xfs_iocore_t
op_star
id|io
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xperag
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_diskdq
c_func
(paren
id|xfs_disk_dquot_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_dqattached_inos
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_dquot
c_func
(paren
id|xfs_dquot_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_mplist
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_qinfo
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_tpdqinfo
c_func
(paren
id|xfs_trans_t
op_star
id|tp
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xsb
c_func
(paren
id|xfs_sb_t
op_star
comma
r_int
id|convert
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xtp
c_func
(paren
id|xfs_trans_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xtrans_res
c_func
(paren
id|xfs_mount_t
op_star
)paren
suffix:semicolon
macro_line|#ifdef&t;CONFIG_XFS_QUOTA
r_static
r_void
id|xfsidbg_xqm
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_htab
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_freelist_print
c_func
(paren
id|xfs_frlist_t
op_star
id|qlist
comma
r_char
op_star
id|title
)paren
suffix:semicolon
r_static
r_void
id|xfsidbg_xqm_freelist
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* kdb wrappers */
DECL|function|kdbm_xfs_xagf
r_static
r_int
id|kdbm_xfs_xagf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xagf
c_func
(paren
(paren
id|xfs_agf_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xagi
r_static
r_int
id|kdbm_xfs_xagi
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xagi
c_func
(paren
(paren
id|xfs_agi_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xaildump
r_static
r_int
id|kdbm_xfs_xaildump
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xaildump
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xalloc
r_static
r_int
id|kdbm_xfs_xalloc
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xalloc
c_func
(paren
(paren
id|xfs_alloc_arg_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef DEBUG
DECL|function|kdbm_xfs_xalmtrace
r_static
r_int
id|kdbm_xfs_xalmtrace
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xalmtrace
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif /* DEBUG */
DECL|function|kdbm_xfs_xattrcontext
r_static
r_int
id|kdbm_xfs_xattrcontext
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xattrcontext
c_func
(paren
(paren
id|xfs_attr_list_context_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xattrleaf
r_static
r_int
id|kdbm_xfs_xattrleaf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xattrleaf
c_func
(paren
(paren
id|xfs_attr_leafblock_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xattrsf
r_static
r_int
id|kdbm_xfs_xattrsf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xattrsf
c_func
(paren
(paren
id|xfs_attr_shortform_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbirec
r_static
r_int
id|kdbm_xfs_xbirec
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbirec
c_func
(paren
(paren
id|xfs_bmbt_irec_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbmalla
r_static
r_int
id|kdbm_xfs_xbmalla
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbmalla
c_func
(paren
(paren
id|xfs_bmalloca_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbrec
r_static
r_int
id|kdbm_xfs_xbrec
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbrec
c_func
(paren
(paren
id|xfs_bmbt_rec_64_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbroot
r_static
r_int
id|kdbm_xfs_xbroot
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbroot
c_func
(paren
(paren
id|xfs_inode_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbroota
r_static
r_int
id|kdbm_xfs_xbroota
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbroota
c_func
(paren
(paren
id|xfs_inode_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbtcur
r_static
r_int
id|kdbm_xfs_xbtcur
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbtcur
c_func
(paren
(paren
id|xfs_btree_cur_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xbuf
r_static
r_int
id|kdbm_xfs_xbuf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xbuf
c_func
(paren
(paren
id|xfs_buf_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xchash
r_static
r_int
id|kdbm_xfs_xchash
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xchash
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xchashlist
r_static
r_int
id|kdbm_xfs_xchashlist
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xchashlist
c_func
(paren
(paren
id|xfs_chashlist_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdaargs
r_static
r_int
id|kdbm_xfs_xdaargs
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdaargs
c_func
(paren
(paren
id|xfs_da_args_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdabuf
r_static
r_int
id|kdbm_xfs_xdabuf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdabuf
c_func
(paren
(paren
id|xfs_dabuf_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdanode
r_static
r_int
id|kdbm_xfs_xdanode
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdanode
c_func
(paren
(paren
id|xfs_da_intnode_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdastate
r_static
r_int
id|kdbm_xfs_xdastate
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdastate
c_func
(paren
(paren
id|xfs_da_state_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdirleaf
r_static
r_int
id|kdbm_xfs_xdirleaf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdirleaf
c_func
(paren
(paren
id|xfs_dir_leafblock_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdirsf
r_static
r_int
id|kdbm_xfs_xdirsf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdirsf
c_func
(paren
(paren
id|xfs_dir_shortform_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdir2free
r_static
r_int
id|kdbm_xfs_xdir2free
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdir2free
c_func
(paren
(paren
id|xfs_dir2_free_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xdir2sf
r_static
r_int
id|kdbm_xfs_xdir2sf
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xdir2sf
c_func
(paren
(paren
id|xfs_dir2_sf_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xexlist
r_static
r_int
id|kdbm_xfs_xexlist
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xexlist
c_func
(paren
(paren
id|xfs_inode_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xflist
r_static
r_int
id|kdbm_xfs_xflist
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xflist
c_func
(paren
(paren
id|xfs_bmap_free_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xhelp
r_static
r_int
id|kdbm_xfs_xhelp
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_if
c_cond
(paren
id|argc
op_ne
l_int|0
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|xfsidbg_xhelp
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xiclog
r_static
r_int
id|kdbm_xfs_xiclog
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xiclog
c_func
(paren
(paren
id|xlog_in_core_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xiclogall
r_static
r_int
id|kdbm_xfs_xiclogall
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xiclogall
c_func
(paren
(paren
id|xlog_in_core_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xiclogcb
r_static
r_int
id|kdbm_xfs_xiclogcb
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xiclogcb
c_func
(paren
(paren
id|xlog_in_core_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xihash
r_static
r_int
id|kdbm_xfs_xihash
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xihash
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xinodes
r_static
r_int
id|kdbm_xfs_xinodes
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xinodes
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_delayed_blocks
r_static
r_int
id|kdbm_xfs_delayed_blocks
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_delayed_blocks
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xinodes_quiesce
r_static
r_int
id|kdbm_xfs_xinodes_quiesce
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xinodes_quiesce
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlog
r_static
r_int
id|kdbm_xfs_xlog
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlog
c_func
(paren
(paren
id|xlog_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlog_ritem
r_static
r_int
id|kdbm_xfs_xlog_ritem
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlog_ritem
c_func
(paren
(paren
id|xlog_recover_item_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlog_rtrans
r_static
r_int
id|kdbm_xfs_xlog_rtrans
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlog_rtrans
c_func
(paren
(paren
id|xlog_recover_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlog_rtrans_entire
r_static
r_int
id|kdbm_xfs_xlog_rtrans_entire
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlog_rtrans_entire
c_func
(paren
(paren
id|xlog_recover_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlog_tic
r_static
r_int
id|kdbm_xfs_xlog_tic
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlog_tic
c_func
(paren
(paren
id|xlog_ticket_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xlogitem
r_static
r_int
id|kdbm_xfs_xlogitem
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xlogitem
c_func
(paren
(paren
id|xfs_log_item_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xmount
r_static
r_int
id|kdbm_xfs_xmount
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xmount
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xnode
r_static
r_int
id|kdbm_xfs_xnode
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xnode
c_func
(paren
(paren
id|xfs_inode_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xcore
r_static
r_int
id|kdbm_xfs_xcore
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xcore
c_func
(paren
(paren
id|xfs_iocore_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xperag
r_static
r_int
id|kdbm_xfs_xperag
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xperag
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_diskdq
r_static
r_int
id|kdbm_xfs_xqm_diskdq
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_diskdq
c_func
(paren
(paren
id|xfs_disk_dquot_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_dqattached_inos
r_static
r_int
id|kdbm_xfs_xqm_dqattached_inos
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_dqattached_inos
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_dquot
r_static
r_int
id|kdbm_xfs_xqm_dquot
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_dquot
c_func
(paren
(paren
id|xfs_dquot_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef&t;CONFIG_XFS_QUOTA
DECL|function|kdbm_xfs_xqm
r_static
r_int
id|kdbm_xfs_xqm
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_if
c_cond
(paren
id|argc
op_ne
l_int|0
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|xfsidbg_xqm
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_freelist
r_static
r_int
id|kdbm_xfs_xqm_freelist
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_if
c_cond
(paren
id|argc
op_ne
l_int|0
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|xfsidbg_xqm_freelist
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_htab
r_static
r_int
id|kdbm_xfs_xqm_htab
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_if
c_cond
(paren
id|argc
op_ne
l_int|0
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|xfsidbg_xqm_htab
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|function|kdbm_xfs_xqm_mplist
r_static
r_int
id|kdbm_xfs_xqm_mplist
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_mplist
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_qinfo
r_static
r_int
id|kdbm_xfs_xqm_qinfo
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_qinfo
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xqm_tpdqinfo
r_static
r_int
id|kdbm_xfs_xqm_tpdqinfo
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xqm_tpdqinfo
c_func
(paren
(paren
id|xfs_trans_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xsb
r_static
r_int
id|kdbm_xfs_xsb
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
r_int
id|convert
op_assign
l_int|0
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
op_logical_and
id|argc
op_ne
l_int|2
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_eq
l_int|2
)paren
(brace
multiline_comment|/* extra argument - conversion flag */
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|convert
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
)brace
id|xfsidbg_xsb
c_func
(paren
(paren
id|xfs_sb_t
op_star
)paren
id|addr
comma
(paren
r_int
)paren
id|convert
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xtp
r_static
r_int
id|kdbm_xfs_xtp
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xtp
c_func
(paren
(paren
id|xfs_trans_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|kdbm_xfs_xtrans_res
r_static
r_int
id|kdbm_xfs_xtrans_res
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|xfsidbg_xtrans_res
c_func
(paren
(paren
id|xfs_mount_t
op_star
)paren
id|addr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Vnode descriptor dump.&n; * This table is a string version of all the flags defined in vnode.h.&n; */
DECL|variable|tab_vflags
r_char
op_star
id|tab_vflags
(braket
)braket
op_assign
(brace
multiline_comment|/* local only flags */
l_string|&quot;VINACT&quot;
comma
multiline_comment|/*&t; 0x01 */
l_string|&quot;VRECLM&quot;
comma
multiline_comment|/*&t; 0x02 */
l_string|&quot;VWAIT&quot;
comma
multiline_comment|/*&t; 0x04 */
l_string|&quot;VMODIFIED&quot;
comma
multiline_comment|/*&t; 0x08 */
l_string|&quot;INVALID0x10&quot;
comma
multiline_comment|/*&t; 0x10 */
l_string|&quot;INVALID0x20&quot;
comma
multiline_comment|/*&t; 0x20 */
l_string|&quot;INVALID0x40&quot;
comma
multiline_comment|/*&t; 0x40 */
l_string|&quot;INVALID0x80&quot;
comma
multiline_comment|/*&t; 0x80 */
l_string|&quot;INVALID0x100&quot;
comma
multiline_comment|/*&t;0x100 */
l_string|&quot;INVALID0x200&quot;
comma
multiline_comment|/*&t;0x200 */
l_string|&quot;INVALID0x400&quot;
comma
multiline_comment|/*&t;0x400 */
l_string|&quot;INVALID0x800&quot;
comma
multiline_comment|/*&t;0x800 */
l_string|&quot;INVALID0x1000&quot;
comma
multiline_comment|/*     0x1000 */
l_string|&quot;INVALID0x2000&quot;
comma
multiline_comment|/*     0x2000 */
l_string|&quot;INVALID0x4000&quot;
comma
multiline_comment|/*     0x4000 */
l_string|&quot;INVALID0x8000&quot;
comma
multiline_comment|/*     0x8000 */
l_string|&quot;INVALID0x10000&quot;
comma
multiline_comment|/*    0x10000 */
l_string|&quot;INVALID0x20000&quot;
comma
multiline_comment|/*    0x20000 */
l_string|&quot;INVALID0x40000&quot;
comma
multiline_comment|/*    0x40000 */
l_string|&quot;INVALID0x80000&quot;
comma
multiline_comment|/*    0x80000 */
l_string|&quot;VROOT&quot;
comma
multiline_comment|/*   0x100000 */
l_string|&quot;INVALID0x200000&quot;
comma
multiline_comment|/*   0x200000 */
l_string|&quot;INVALID00x400000&quot;
comma
multiline_comment|/*   0x400000 */
l_string|&quot;INVALID0x800000&quot;
comma
multiline_comment|/*   0x800000 */
l_string|&quot;INVALID0x1000000&quot;
comma
multiline_comment|/*  0x1000000 */
l_string|&quot;INVALID0x2000000&quot;
comma
multiline_comment|/*  0x2000000 */
l_string|&quot;VSHARE&quot;
comma
multiline_comment|/*  0x4000000 */
l_string|&quot;INVALID0x8000000&quot;
comma
multiline_comment|/*  0x8000000 */
l_string|&quot;VENF_LOCKING&quot;
comma
multiline_comment|/* 0x10000000 */
l_string|&quot;VOPLOCK&quot;
comma
multiline_comment|/* 0x20000000 */
l_string|&quot;VPURGE&quot;
comma
multiline_comment|/* 0x40000000 */
l_string|&quot;INVALID0x80000000&quot;
comma
multiline_comment|/* 0x80000000 */
l_int|0
)brace
suffix:semicolon
DECL|variable|vnode_type
r_static
r_char
op_star
id|vnode_type
(braket
)braket
op_assign
(brace
l_string|&quot;VNON&quot;
comma
l_string|&quot;VREG&quot;
comma
l_string|&quot;VDIR&quot;
comma
l_string|&quot;VBLK&quot;
comma
l_string|&quot;VLNK&quot;
comma
l_string|&quot;VFIFO&quot;
comma
l_string|&quot;VBAD&quot;
comma
l_string|&quot;VSOCK&quot;
)brace
suffix:semicolon
r_static
r_void
DECL|function|printflags
id|printflags
c_func
(paren
r_register
r_uint64
id|flags
comma
r_register
r_char
op_star
op_star
id|strings
comma
r_register
r_char
op_star
id|name
)paren
(brace
r_register
r_uint64
id|mask
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|name
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%s 0x%llx &lt;&quot;
comma
id|name
comma
(paren
r_int
r_int
r_int
)paren
id|flags
)paren
suffix:semicolon
r_while
c_loop
(paren
id|flags
op_ne
l_int|0
op_logical_and
op_star
id|strings
)paren
(brace
r_if
c_cond
(paren
id|mask
op_amp
id|flags
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%s &quot;
comma
op_star
id|strings
)paren
suffix:semicolon
id|flags
op_and_assign
op_complement
id|mask
suffix:semicolon
)brace
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
id|strings
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|name
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;&gt; &quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
DECL|function|printvnode
r_static
r_void
id|printvnode
c_func
(paren
id|vnode_t
op_star
id|vp
)paren
(brace
id|bhv_desc_t
op_star
id|bh
suffix:semicolon
id|kdb_symtab_t
id|symtab
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;vnode: 0x%p type &quot;
comma
id|vp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_int
)paren
id|vp-&gt;v_type
op_ge
r_sizeof
(paren
id|vnode_type
)paren
op_div
r_sizeof
(paren
id|vnode_type
(braket
l_int|0
)braket
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;out of range 0x%x&quot;
comma
id|vp-&gt;v_type
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;%s&quot;
comma
id|vnode_type
(braket
id|vp-&gt;v_type
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; v_bh %p&bslash;n&quot;
comma
op_amp
id|vp-&gt;v_bh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|bh
op_assign
id|vp-&gt;v_bh.bh_first
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;   v_inode 0x%p v_bh-&gt;bh_first 0x%p pobj 0x%p&bslash;n&quot;
comma
id|LINVFS_GET_IP
c_func
(paren
id|vp
)paren
comma
id|bh
comma
id|bh-&gt;bd_pdata
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kdbnearsym
c_func
(paren
(paren
r_int
r_int
)paren
id|bh-&gt;bd_ops
comma
op_amp
id|symtab
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;   ops %s &quot;
comma
id|symtab.sym_name
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;   ops %s/0x%p &quot;
comma
l_string|&quot;???&quot;
comma
(paren
r_void
op_star
)paren
id|bh-&gt;bd_ops
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;   v_inode 0x%p v_bh-&gt;bh_first = NULLBHV &quot;
comma
id|LINVFS_GET_IP
c_func
(paren
id|vp
)paren
)paren
suffix:semicolon
)brace
id|printflags
c_func
(paren
(paren
id|__psunsigned_t
)paren
id|vp-&gt;v_flag
comma
id|tab_vflags
comma
l_string|&quot;flag =&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef&t;CONFIG_XFS_VNODE_TRACING
id|kdb_printf
c_func
(paren
l_string|&quot;   v_trace 0x%p&bslash;n&quot;
comma
id|vp-&gt;v_trace
)paren
suffix:semicolon
macro_line|#endif&t;/* CONFIG_XFS_VNODE_TRACING */
id|kdb_printf
c_func
(paren
l_string|&quot;   v_vfsp 0x%p v_number %Lx&bslash;n&quot;
comma
id|vp-&gt;v_vfsp
comma
id|vp-&gt;v_number
)paren
suffix:semicolon
)brace
DECL|function|kdbm_vnode
r_static
r_int
id|kdbm_vnode
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
id|vnode_t
op_star
id|vp
suffix:semicolon
multiline_comment|/*&t;bhv_desc_t&t;*bh; */
multiline_comment|/*&t;kdb_symtab_t&t; symtab;*/
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|vp
op_assign
(paren
id|vnode_t
op_star
)paren
id|addr
suffix:semicolon
id|printvnode
c_func
(paren
id|vp
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef&t;CONFIG_XFS_VNODE_TRACING
multiline_comment|/*&n; * Print a vnode trace entry.&n; */
r_static
r_int
DECL|function|vn_trace_pr_entry
id|vn_trace_pr_entry
c_func
(paren
id|ktrace_entry_t
op_star
id|ktep
)paren
(brace
r_char
id|funcname
(braket
l_int|128
)braket
suffix:semicolon
id|kdb_symtab_t
id|symtab
suffix:semicolon
r_if
c_cond
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|kdbnearsym
c_func
(paren
(paren
r_int
r_int
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
comma
op_amp
id|symtab
)paren
)paren
(brace
r_int
r_int
id|offval
suffix:semicolon
id|offval
op_assign
(paren
r_int
r_int
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
op_minus
id|symtab.sym_start
suffix:semicolon
r_if
c_cond
(paren
id|offval
)paren
id|sprintf
c_func
(paren
id|funcname
comma
l_string|&quot;%s+0x%lx&quot;
comma
id|symtab.sym_name
comma
id|offval
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|funcname
comma
l_string|&quot;%s&quot;
comma
id|symtab.sym_name
)paren
suffix:semicolon
)brace
r_else
id|funcname
(braket
l_int|0
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_switch
c_cond
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
)paren
(brace
r_case
id|VNODE_KTRACE_ENTRY
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;entry to %s i_count = %d&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VNODE_KTRACE_EXIT
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;exit from %s i_count = %d&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VNODE_KTRACE_HOLD
suffix:colon
r_if
c_cond
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
op_ne
l_int|1
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;hold @%s:%d(%s) i_count %d =&gt; %d &quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
comma
id|funcname
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
op_minus
l_int|1
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;get @%s:%d(%s) i_count = %d&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
comma
id|funcname
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VNODE_KTRACE_REF
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ref @%s:%d(%s) i_count = %d&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
comma
id|funcname
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VNODE_KTRACE_RELE
suffix:colon
r_if
c_cond
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
op_ne
l_int|1
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;rele @%s:%d(%s) i_count %d =&gt; %d &quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
comma
id|funcname
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
op_minus
l_int|1
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;free @%s:%d(%s) i_count = %d&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
comma
id|funcname
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;unknown vntrace record&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  cpu = %d pid = %d &quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|pid_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
id|tab_vflags
comma
l_string|&quot;flag =&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kdbnearsym
c_func
(paren
(paren
r_int
r_int
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
op_amp
id|symtab
)paren
)paren
(brace
r_int
r_int
id|offval
suffix:semicolon
id|offval
op_assign
(paren
r_int
r_int
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
op_minus
id|symtab.sym_start
suffix:semicolon
r_if
c_cond
(paren
id|offval
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;  ra = %s+0x%lx&quot;
comma
id|symtab.sym_name
comma
id|offval
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;  ra = %s&quot;
comma
id|symtab.sym_name
)paren
suffix:semicolon
)brace
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;  ra = ?? 0x%p&quot;
comma
(paren
r_void
op_star
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/*&n; * Print out the trace buffer attached to the given vnode.&n; */
DECL|function|kdbm_vntrace
r_static
r_int
id|kdbm_vntrace
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|diag
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
id|vnode_t
op_star
id|vp
suffix:semicolon
id|ktrace_entry_t
op_star
id|ktep
suffix:semicolon
id|ktrace_snap_t
id|kts
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|vp
op_assign
(paren
id|vnode_t
op_star
)paren
id|addr
suffix:semicolon
r_if
c_cond
(paren
id|vp-&gt;v_trace
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;The vnode trace buffer is not initialized&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;vntrace vp 0x%p&bslash;n&quot;
comma
id|vp
)paren
suffix:semicolon
id|ktep
op_assign
id|ktrace_first
c_func
(paren
id|vp-&gt;v_trace
comma
op_amp
id|kts
)paren
suffix:semicolon
r_while
c_loop
(paren
id|ktep
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|vn_trace_pr_entry
c_func
(paren
id|ktep
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|ktep
op_assign
id|ktrace_next
c_func
(paren
id|vp-&gt;v_trace
comma
op_amp
id|kts
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Print out the trace buffer attached to the given vnode.&n; */
DECL|function|kdbm_vntraceaddr
r_static
r_int
id|kdbm_vntraceaddr
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|diag
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_struct
id|ktrace
op_star
id|kt
suffix:semicolon
id|ktrace_entry_t
op_star
id|ktep
suffix:semicolon
id|ktrace_snap_t
id|kts
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|kt
op_assign
(paren
r_struct
id|ktrace
op_star
)paren
id|addr
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;vntraceaddr kt 0x%p&bslash;n&quot;
comma
id|kt
)paren
suffix:semicolon
id|ktep
op_assign
id|ktrace_first
c_func
(paren
id|kt
comma
op_amp
id|kts
)paren
suffix:semicolon
r_while
c_loop
(paren
id|ktep
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|vn_trace_pr_entry
c_func
(paren
id|ktep
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|ktep
op_assign
id|ktrace_next
c_func
(paren
id|kt
comma
op_amp
id|kts
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif&t;/* CONFIG_XFS_VNODE_TRACING */
DECL|function|printinode
r_static
r_void
id|printinode
c_func
(paren
r_struct
id|inode
op_star
id|ip
)paren
(brace
r_int
r_int
id|addr
suffix:semicolon
r_if
c_cond
(paren
id|ip
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_ino = %lu i_count = %u i_size %Ld&bslash;n&quot;
comma
id|ip-&gt;i_ino
comma
id|atomic_read
c_func
(paren
op_amp
id|ip-&gt;i_count
)paren
comma
id|ip-&gt;i_size
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_mode = 0x%x  i_nlink = %d  i_rdev = 0x%x i_state = 0x%lx&bslash;n&quot;
comma
id|ip-&gt;i_mode
comma
id|ip-&gt;i_nlink
comma
id|kdev_t_to_nr
c_func
(paren
id|ip-&gt;i_rdev
)paren
comma
id|ip-&gt;i_state
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_hash.nxt = 0x%p i_hash.prv = 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_hash.next
comma
id|ip-&gt;i_hash.prev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_list.nxt = 0x%p i_list.prv = 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_list.next
comma
id|ip-&gt;i_list.prev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_dentry.nxt = 0x%p i_dentry.prv = 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_dentry.next
comma
id|ip-&gt;i_dentry.prev
)paren
suffix:semicolon
id|addr
op_assign
(paren
r_int
r_int
)paren
id|ip
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; i_sb = 0x%p i_op = 0x%p i_data = 0x%lx nrpages = %lu&bslash;n&quot;
comma
id|ip-&gt;i_sb
comma
id|ip-&gt;i_op
comma
id|addr
op_plus
m_offsetof
(paren
r_struct
id|inode
comma
id|i_data
)paren
comma
id|ip-&gt;i_data.nrpages
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  vnode ptr 0x%p&bslash;n&quot;
comma
id|LINVFS_GET_VP
c_func
(paren
id|ip
)paren
)paren
suffix:semicolon
)brace
DECL|function|kdbm_vn
r_static
r_int
id|kdbm_vn
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|diag
suffix:semicolon
r_int
id|nextarg
op_assign
l_int|1
suffix:semicolon
multiline_comment|/*&t;char&t;&t;*symname; */
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_struct
id|inode
op_star
id|ip
suffix:semicolon
multiline_comment|/*&t;bhv_desc_t&t;*bh; */
macro_line|#ifdef&t;CONFIG_XFS_VNODE_TRACING
id|ktrace_entry_t
op_star
id|ktep
suffix:semicolon
id|ktrace_snap_t
id|kts
suffix:semicolon
macro_line|#endif
id|vnode_t
op_star
id|vp
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|vp
op_assign
(paren
id|vnode_t
op_star
)paren
id|addr
suffix:semicolon
id|ip
op_assign
id|LINVFS_GET_IP
c_func
(paren
id|vp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;--&gt; Inode @ 0x%p&bslash;n&quot;
comma
id|ip
)paren
suffix:semicolon
id|printinode
c_func
(paren
id|ip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;--&gt; Vnode @ 0x%p&bslash;n&quot;
comma
id|vp
)paren
suffix:semicolon
id|printvnode
c_func
(paren
id|vp
)paren
suffix:semicolon
macro_line|#ifdef&t;CONFIG_XFS_VNODE_TRACING
id|kdb_printf
c_func
(paren
l_string|&quot;--&gt; Vntrace @ 0x%p/0x%p&bslash;n&quot;
comma
id|vp
comma
id|vp-&gt;v_trace
)paren
suffix:semicolon
r_if
c_cond
(paren
id|vp-&gt;v_trace
op_eq
l_int|NULL
)paren
r_return
l_int|0
suffix:semicolon
id|ktep
op_assign
id|ktrace_first
c_func
(paren
id|vp-&gt;v_trace
comma
op_amp
id|kts
)paren
suffix:semicolon
r_while
c_loop
(paren
id|ktep
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|vn_trace_pr_entry
c_func
(paren
id|ktep
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|ktep
op_assign
id|ktrace_next
c_func
(paren
id|vp-&gt;v_trace
comma
op_amp
id|kts
)paren
suffix:semicolon
)brace
macro_line|#endif&t;/* CONFIG_XFS_VNODE_TRACING */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* pagebuf stuff */
DECL|variable|pb_flag_vals
r_static
r_char
op_star
id|pb_flag_vals
(braket
)braket
op_assign
(brace
multiline_comment|/*  0 */
l_string|&quot;READ&quot;
comma
l_string|&quot;WRITE&quot;
comma
l_string|&quot;MAPPED&quot;
comma
l_string|&quot;PARTIAL&quot;
comma
l_string|&quot;ASYNC&quot;
comma
multiline_comment|/*  5 */
l_string|&quot;NONE&quot;
comma
l_string|&quot;DELWRI&quot;
comma
l_string|&quot;FREED&quot;
comma
l_string|&quot;SYNC&quot;
comma
l_string|&quot;MAPPABLE&quot;
comma
multiline_comment|/* 10 */
l_string|&quot;STALE&quot;
comma
l_string|&quot;FS_MANAGED&quot;
comma
l_string|&quot;INVALID12&quot;
comma
l_string|&quot;LOCK&quot;
comma
l_string|&quot;TRYLOCK&quot;
comma
multiline_comment|/* 15 */
l_string|&quot;DONT_BLOCK&quot;
comma
l_string|&quot;LOCKABLE&quot;
comma
l_string|&quot;PRIVATE_BH&quot;
comma
l_string|&quot;ALL_PAGES_MAPPED&quot;
comma
l_string|&quot;ADDR_ALLOCATED&quot;
comma
multiline_comment|/* 20 */
l_string|&quot;MEM_ALLOCATED&quot;
comma
l_string|&quot;FORCEIO&quot;
comma
l_string|&quot;FLUSH&quot;
comma
l_string|&quot;READ_AHEAD&quot;
comma
l_int|NULL
)brace
suffix:semicolon
DECL|variable|pbm_flag_vals
r_static
r_char
op_star
id|pbm_flag_vals
(braket
)braket
op_assign
(brace
l_string|&quot;EOF&quot;
comma
l_string|&quot;HOLE&quot;
comma
l_string|&quot;DELAY&quot;
comma
l_string|&quot;INVALID0x08&quot;
comma
l_string|&quot;INVALID0x10&quot;
comma
l_string|&quot;UNWRITTEN&quot;
comma
l_string|&quot;INVALID0x40&quot;
comma
l_string|&quot;INVALID0x80&quot;
comma
l_int|NULL
)brace
suffix:semicolon
DECL|function|map_flags
r_static
r_char
op_star
id|map_flags
c_func
(paren
r_int
r_int
id|flags
comma
r_char
op_star
id|mapping
(braket
)braket
)paren
(brace
r_static
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_int
id|index
suffix:semicolon
r_int
id|offset
op_assign
l_int|12
suffix:semicolon
id|buffer
(braket
l_int|0
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_for
c_loop
(paren
id|index
op_assign
l_int|0
suffix:semicolon
id|flags
op_logical_and
id|mapping
(braket
id|index
)braket
suffix:semicolon
id|flags
op_rshift_assign
l_int|1
comma
id|index
op_increment
)paren
(brace
r_if
c_cond
(paren
id|flags
op_amp
l_int|1
)paren
(brace
r_if
c_cond
(paren
(paren
id|offset
op_plus
id|strlen
c_func
(paren
id|mapping
(braket
id|index
)braket
)paren
op_plus
l_int|1
)paren
op_ge
l_int|80
)paren
(brace
id|strcat
c_func
(paren
id|buffer
comma
l_string|&quot;&bslash;n            &quot;
)paren
suffix:semicolon
id|offset
op_assign
l_int|12
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|offset
OG
l_int|12
)paren
(brace
id|strcat
c_func
(paren
id|buffer
comma
l_string|&quot; &quot;
)paren
suffix:semicolon
id|offset
op_increment
suffix:semicolon
)brace
id|strcat
c_func
(paren
id|buffer
comma
id|mapping
(braket
id|index
)braket
)paren
suffix:semicolon
id|offset
op_add_assign
id|strlen
c_func
(paren
id|mapping
(braket
id|index
)braket
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
id|buffer
)paren
suffix:semicolon
)brace
DECL|function|pb_flags
r_static
r_char
op_star
id|pb_flags
c_func
(paren
id|page_buf_flags_t
id|pb_flag
)paren
(brace
r_return
id|map_flags
c_func
(paren
(paren
r_int
r_int
)paren
id|pb_flag
comma
id|pb_flag_vals
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|kdbm_pb_flags
id|kdbm_pb_flags
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|diag
op_assign
id|kdbgetularg
c_func
(paren
id|argv
(braket
l_int|1
)braket
comma
op_amp
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;pb flags 0x%lx = %s&bslash;n&quot;
comma
id|flags
comma
id|pb_flags
c_func
(paren
id|flags
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|kdbm_pb
id|kdbm_pb
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|page_buf_t
id|bp
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|nextarg
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
)paren
op_logical_or
(paren
id|diag
op_assign
id|kdb_getarea
c_func
(paren
id|bp
comma
id|addr
)paren
)paren
)paren
r_return
id|diag
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;page_buf_t at 0x%lx&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_flags %s&bslash;n&quot;
comma
id|pb_flags
c_func
(paren
id|bp.pb_flags
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_target 0x%p pb_hold %d pb_next 0x%p pb_prev 0x%p&bslash;n&quot;
comma
id|bp.pb_target
comma
id|bp.pb_hold.counter
comma
id|bp.pb_list.next
comma
id|bp.pb_list.prev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_hash_index %d pb_hash_next 0x%p pb_hash_prev 0x%p&bslash;n&quot;
comma
id|bp.pb_hash_index
comma
id|bp.pb_hash_list.next
comma
id|bp.pb_hash_list.prev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_file_offset 0x%llx pb_buffer_length 0x%llx pb_addr 0x%p&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|bp.pb_file_offset
comma
(paren
r_int
r_int
r_int
)paren
id|bp.pb_buffer_length
comma
id|bp.pb_addr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_bn 0x%Lx pb_count_desired 0x%lx&bslash;n&quot;
comma
id|bp.pb_bn
comma
(paren
r_int
r_int
)paren
id|bp.pb_count_desired
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_io_remaining %d pb_error %u&bslash;n&quot;
comma
id|bp.pb_io_remaining.counter
comma
id|bp.pb_error
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_page_count %u pb_offset 0x%x pb_pages 0x%p&bslash;n&quot;
comma
id|bp.pb_page_count
comma
id|bp.pb_offset
comma
id|bp.pb_pages
)paren
suffix:semicolon
macro_line|#ifdef PAGEBUF_LOCK_TRACKING
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_iodonesema (%d,%d) pb_sema (%d,%d) pincount (%d) last holder %d&bslash;n&quot;
comma
id|bp.pb_iodonesema.count.counter
comma
id|bp.pb_iodonesema.sleepers
comma
id|bp.pb_sema.count.counter
comma
id|bp.pb_sema.sleepers
comma
id|bp.pb_pin_count.counter
comma
id|bp.pb_last_holder
)paren
suffix:semicolon
macro_line|#else
id|kdb_printf
c_func
(paren
l_string|&quot;  pb_iodonesema (%d,%d) pb_sema (%d,%d) pincount (%d)&bslash;n&quot;
comma
id|bp.pb_iodonesema.count.counter
comma
id|bp.pb_iodonesema.sleepers
comma
id|bp.pb_sema.count.counter
comma
id|bp.pb_sema.sleepers
comma
id|bp.pb_pin_count.counter
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|bp.pb_fspriv
op_logical_or
id|bp.pb_fspriv2
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;pb_fspriv 0x%p pb_fspriv2 0x%p&bslash;n&quot;
comma
id|bp.pb_fspriv
comma
id|bp.pb_fspriv2
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* XXXXXXXXXXXXXXXXXXXXXX */
multiline_comment|/* The start of this deliberately looks like a read_descriptor_t in layout */
r_typedef
r_struct
(brace
DECL|member|io_rdesc
id|read_descriptor_t
id|io_rdesc
suffix:semicolon
multiline_comment|/* 0x10 */
DECL|member|io_dir
id|page_buf_rw_t
id|io_dir
suffix:semicolon
multiline_comment|/* read or write */
DECL|member|io_offset
id|loff_t
id|io_offset
suffix:semicolon
multiline_comment|/* Starting offset of I/O */
DECL|member|io_iovec_nr
r_int
id|io_iovec_nr
suffix:semicolon
multiline_comment|/* Number of entries in iovec */
multiline_comment|/* 0x20 */
DECL|member|io_iovec
r_struct
id|iovec
op_star
op_star
id|io_iovec
suffix:semicolon
multiline_comment|/* iovec list indexed by iovec_index */
DECL|member|io_iovec_offset
id|loff_t
id|io_iovec_offset
suffix:semicolon
multiline_comment|/* offset into current iovec. */
DECL|member|io_iovec_index
r_int
id|io_iovec_index
suffix:semicolon
multiline_comment|/* current iovec being processed */
DECL|member|io_sshift
r_int
r_int
id|io_sshift
suffix:semicolon
multiline_comment|/* sector bit shift */
DECL|member|io_i_size
id|loff_t
id|io_i_size
suffix:semicolon
multiline_comment|/* size of the file */
DECL|typedef|pb_io_desc_t
)brace
id|pb_io_desc_t
suffix:semicolon
r_static
r_int
DECL|function|kdbm_pbiodesc
id|kdbm_pbiodesc
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|pb_io_desc_t
id|pbio
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|nextarg
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
)paren
op_logical_or
(paren
id|diag
op_assign
id|kdb_getarea
c_func
(paren
id|pbio
comma
id|addr
)paren
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;pb_io_desc_t at 0x%lx&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  io_rdesc [ written 0x%lx count 0x%lx buf 0x%p error %d ]&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|pbio.io_rdesc.written
comma
(paren
r_int
r_int
)paren
id|pbio.io_rdesc.count
comma
id|pbio.io_rdesc.buf
comma
id|pbio.io_rdesc.error
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  io_dir %d io_offset 0x%Lx io_iovec_nr 0x%d&bslash;n&quot;
comma
id|pbio.io_dir
comma
id|pbio.io_offset
comma
id|pbio.io_iovec_nr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  io_iovec 0x%p io_iovec_offset 0x%Lx io_iovec_index 0x%d&bslash;n&quot;
comma
id|pbio.io_iovec
comma
id|pbio.io_iovec_offset
comma
id|pbio.io_iovec_index
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  io_sshift 0x%d io_i_size 0x%Lx&bslash;n&quot;
comma
id|pbio.io_sshift
comma
id|pbio.io_i_size
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|kdbm_pbmap
id|kdbm_pbmap
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|page_buf_bmap_t
id|pbm
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|nextarg
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_ne
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
id|nextarg
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
)paren
op_logical_or
(paren
id|diag
op_assign
id|kdb_getarea
c_func
(paren
id|pbm
comma
id|addr
)paren
)paren
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;page_buf_bmap_t at 0x%lx&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pbm_bn 0x%llx pbm_offset 0x%Lx pbm_delta 0x%lx pbm_bsize 0x%lx&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|pbm.pbm_bn
comma
id|pbm.pbm_offset
comma
(paren
r_int
r_int
)paren
id|pbm.pbm_delta
comma
(paren
r_int
r_int
)paren
id|pbm.pbm_bsize
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  pbm_flags %s&bslash;n&quot;
comma
id|map_flags
c_func
(paren
id|pbm.pbm_flags
comma
id|pbm_flag_vals
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef PAGEBUF_TRACE
macro_line|# ifdef __PAGEBUF_TRACE__
DECL|macro|__PAGEBUF_TRACE__
macro_line|# undef __PAGEBUF_TRACE__
DECL|macro|PB_DEFINE_TRACES
macro_line|# undef PB_DEFINE_TRACES
DECL|macro|PB_TRACE_START
macro_line|# undef PB_TRACE_START
DECL|macro|PB_TRACE_REC
macro_line|# undef PB_TRACE_REC
DECL|macro|PB_TRACE_END
macro_line|# undef PB_TRACE_END
macro_line|# endif
macro_line|#include &quot;pagebuf/page_buf_trace.h&quot;
DECL|macro|EV_SIZE
mdefine_line|#define EV_SIZE&t;(sizeof(event_names)/sizeof(char *))
r_void
DECL|function|pb_trace_core
id|pb_trace_core
c_func
(paren
r_int
r_int
id|match
comma
r_char
op_star
id|event_match
comma
r_int
r_int
r_int
id|offset
comma
r_int
r_int
id|mask
)paren
(brace
r_extern
r_struct
id|pagebuf_trace_buf
id|pb_trace
suffix:semicolon
r_int
id|i
comma
id|total
comma
id|end
suffix:semicolon
id|pagebuf_trace_t
op_star
id|trace
suffix:semicolon
r_char
op_star
id|event
suffix:semicolon
r_char
id|value
(braket
l_int|10
)braket
suffix:semicolon
id|end
op_assign
id|pb_trace.start
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|end
OL
l_int|0
)paren
id|end
op_assign
id|PB_TRACE_BUFSIZE
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|match
op_logical_and
(paren
id|match
OL
id|PB_TRACE_BUFSIZE
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
id|pb_trace.start
comma
id|total
op_assign
l_int|0
suffix:semicolon
id|i
op_ne
id|end
suffix:semicolon
id|i
op_assign
id|CIRC_INC
c_func
(paren
id|i
)paren
)paren
(brace
id|trace
op_assign
op_amp
id|pb_trace.buf
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|trace-&gt;pb
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
id|total
op_increment
suffix:semicolon
)brace
id|total
op_assign
id|total
op_minus
id|match
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|pb_trace.start
suffix:semicolon
id|i
op_ne
id|end
op_logical_and
id|total
suffix:semicolon
id|i
op_assign
id|CIRC_INC
c_func
(paren
id|i
)paren
)paren
(brace
id|trace
op_assign
op_amp
id|pb_trace.buf
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|trace-&gt;pb
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
id|total
op_decrement
suffix:semicolon
)brace
id|match
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|i
op_assign
id|pb_trace.start
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|i
op_ne
id|end
suffix:semicolon
id|i
op_assign
id|CIRC_INC
c_func
(paren
id|i
)paren
)paren
(brace
id|trace
op_assign
op_amp
id|pb_trace.buf
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|offset
)paren
(brace
r_if
c_cond
(paren
(paren
id|trace-&gt;offset
op_amp
op_complement
id|mask
)paren
op_ne
id|offset
)paren
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|trace-&gt;pb
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
(paren
id|match
op_ne
l_int|0
)paren
op_logical_and
(paren
id|trace-&gt;pb
op_ne
id|match
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
(paren
id|trace-&gt;event
OL
id|EV_SIZE
op_minus
l_int|1
)paren
op_logical_and
id|event_names
(braket
id|trace-&gt;event
)braket
)paren
(brace
id|event
op_assign
id|event_names
(braket
id|trace-&gt;event
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|trace-&gt;event
op_eq
id|EV_SIZE
op_minus
l_int|1
)paren
(brace
id|event
op_assign
(paren
r_char
op_star
)paren
id|trace-&gt;misc
suffix:semicolon
)brace
r_else
(brace
id|event
op_assign
id|value
suffix:semicolon
id|sprintf
c_func
(paren
id|value
comma
l_string|&quot;%8d&quot;
comma
id|trace-&gt;event
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|event_match
op_logical_and
id|strcmp
c_func
(paren
id|event
comma
id|event_match
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;pb 0x%lx [%s] (hold %u lock %d) misc 0x%p&quot;
comma
id|trace-&gt;pb
comma
id|event
comma
id|trace-&gt;hold
comma
id|trace-&gt;lock_value
comma
id|trace-&gt;misc
)paren
suffix:semicolon
id|kdb_symbol_print
c_func
(paren
(paren
r_int
r_int
)paren
id|trace-&gt;ra
comma
l_int|NULL
comma
id|KDB_SP_SPACEB
op_or
id|KDB_SP_PAREN
op_or
id|KDB_SP_NEWLINE
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;    offset 0x%Lx size 0x%x task 0x%p&bslash;n&quot;
comma
id|trace-&gt;offset
comma
id|trace-&gt;size
comma
id|trace-&gt;task
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;    flags: %s&bslash;n&quot;
comma
id|pb_flags
c_func
(paren
id|trace-&gt;flags
)paren
)paren
suffix:semicolon
)brace
)brace
r_static
r_int
DECL|function|kdbm_pbtrace_offset
id|kdbm_pbtrace_offset
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|mask
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
suffix:semicolon
r_if
c_cond
(paren
id|argc
OG
l_int|2
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
r_if
c_cond
(paren
id|argc
OG
l_int|0
)paren
(brace
id|diag
op_assign
id|kdbgetularg
c_func
(paren
id|argv
(braket
l_int|1
)braket
comma
op_amp
id|offset
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
OG
l_int|1
)paren
(brace
id|diag
op_assign
id|kdbgetularg
c_func
(paren
id|argv
(braket
l_int|1
)braket
comma
op_amp
id|mask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
r_return
id|diag
suffix:semicolon
)brace
id|pb_trace_core
c_func
(paren
l_int|0
comma
l_int|NULL
comma
(paren
r_int
r_int
r_int
)paren
id|offset
comma
(paren
r_int
r_int
)paren
id|mask
)paren
suffix:semicolon
multiline_comment|/* sign extent mask */
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|kdbm_pbtrace
id|kdbm_pbtrace
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|addr
op_assign
l_int|0
suffix:semicolon
r_int
id|diag
comma
id|nextarg
suffix:semicolon
r_int
id|offset
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|event_match
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|argc
OG
l_int|1
)paren
r_return
id|KDB_ARGCOUNT
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|isupper
c_func
(paren
id|argv
(braket
l_int|1
)braket
(braket
l_int|0
)braket
)paren
op_logical_or
id|islower
c_func
(paren
id|argv
(braket
l_int|1
)braket
(braket
l_int|0
)braket
)paren
)paren
(brace
id|event_match
op_assign
(paren
r_char
op_star
)paren
id|argv
(braket
l_int|1
)braket
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;event match on &bslash;&quot;%s&bslash;&quot;&bslash;n&quot;
comma
id|event_match
)paren
suffix:semicolon
id|argc
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|nextarg
op_assign
l_int|1
suffix:semicolon
id|diag
op_assign
id|kdbgetaddrarg
c_func
(paren
id|argc
comma
id|argv
comma
op_amp
id|nextarg
comma
op_amp
id|addr
comma
op_amp
id|offset
comma
l_int|NULL
comma
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diag
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;failed to parse %s as a number&bslash;n&quot;
comma
id|argv
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_return
id|diag
suffix:semicolon
)brace
)brace
)brace
id|pb_trace_core
c_func
(paren
id|addr
comma
id|event_match
comma
l_int|0LL
comma
l_int|0LL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#else&t;/* PAGEBUF_TRACE */
r_static
r_int
DECL|function|kdbm_pbtrace
id|kdbm_pbtrace
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
op_star
id|envp
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;pagebuf tracing not compiled in&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif&t;/* PAGEBUF_TRACE */
DECL|struct|xif
r_static
r_struct
id|xif
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|func
r_int
(paren
op_star
id|func
)paren
(paren
r_int
comma
r_const
r_char
op_star
op_star
comma
r_const
r_char
op_star
op_star
comma
r_struct
id|pt_regs
op_star
)paren
suffix:semicolon
DECL|member|args
r_char
op_star
id|args
suffix:semicolon
DECL|member|help
r_char
op_star
id|help
suffix:semicolon
DECL|variable|xfsidbg_funcs
)brace
id|xfsidbg_funcs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;vn&quot;
comma
id|kdbm_vn
comma
l_string|&quot;&lt;vnode&gt;&quot;
comma
l_string|&quot;Dump inode/vnode/trace&quot;
)brace
comma
(brace
l_string|&quot;vnode&quot;
comma
id|kdbm_vnode
comma
l_string|&quot;&lt;vnode&gt;&quot;
comma
l_string|&quot;Dump vnode&quot;
)brace
comma
macro_line|#ifdef&t;CONFIG_XFS_VNODE_TRACING
(brace
l_string|&quot;vntrace&quot;
comma
id|kdbm_vntrace
comma
l_string|&quot;&lt;vntrace&gt;&quot;
comma
l_string|&quot;Dump vnode Trace&quot;
)brace
comma
(brace
l_string|&quot;vntraceaddr&quot;
comma
id|kdbm_vntraceaddr
comma
l_string|&quot;&lt;vntrace&gt;&quot;
comma
l_string|&quot;Dump vnode Trace by Address&quot;
)brace
comma
macro_line|#endif&t;/* CONFIG_XFS_VNODE_TRACING */
(brace
l_string|&quot;xagf&quot;
comma
id|kdbm_xfs_xagf
comma
l_string|&quot;&lt;agf&gt;&quot;
comma
l_string|&quot;Dump XFS allocation group freespace&quot;
)brace
comma
(brace
l_string|&quot;xagi&quot;
comma
id|kdbm_xfs_xagi
comma
l_string|&quot;&lt;agi&gt;&quot;
comma
l_string|&quot;Dump XFS allocation group inode&quot;
)brace
comma
(brace
l_string|&quot;xail&quot;
comma
id|kdbm_xfs_xaildump
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS AIL for a mountpoint&quot;
)brace
comma
(brace
l_string|&quot;xalloc&quot;
comma
id|kdbm_xfs_xalloc
comma
l_string|&quot;&lt;xfs_alloc_arg_t&gt;&quot;
comma
l_string|&quot;Dump XFS allocation args structure&quot;
)brace
comma
macro_line|#ifdef DEBUG
(brace
l_string|&quot;xalmtrc&quot;
comma
id|kdbm_xfs_xalmtrace
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS alloc mount-point trace&quot;
)brace
comma
macro_line|#endif
(brace
l_string|&quot;xattrcx&quot;
comma
id|kdbm_xfs_xattrcontext
comma
l_string|&quot;&lt;xfs_attr_list_context_t&gt;&quot;
comma
l_string|&quot;Dump XFS attr_list context struct&quot;
)brace
comma
(brace
l_string|&quot;xattrlf&quot;
comma
id|kdbm_xfs_xattrleaf
comma
l_string|&quot;&lt;xfs_attr_leafblock_t&gt;&quot;
comma
l_string|&quot;Dump XFS attribute leaf block&quot;
)brace
comma
(brace
l_string|&quot;xattrsf&quot;
comma
id|kdbm_xfs_xattrsf
comma
l_string|&quot;&lt;xfs_attr_shortform_t&gt;&quot;
comma
l_string|&quot;Dump XFS attribute shortform&quot;
)brace
comma
(brace
l_string|&quot;xbirec&quot;
comma
id|kdbm_xfs_xbirec
comma
l_string|&quot;&lt;xfs_bmbt_irec_t&quot;
comma
l_string|&quot;Dump XFS bmap incore record&quot;
)brace
comma
(brace
l_string|&quot;xbmalla&quot;
comma
id|kdbm_xfs_xbmalla
comma
l_string|&quot;&lt;xfs_bmalloca_t&gt;&quot;
comma
l_string|&quot;Dump XFS bmalloc args structure&quot;
)brace
comma
(brace
l_string|&quot;xbrec&quot;
comma
id|kdbm_xfs_xbrec
comma
l_string|&quot;&lt;xfs_bmbt_rec_64_t&quot;
comma
l_string|&quot;Dump XFS bmap record&quot;
)brace
comma
(brace
l_string|&quot;xbroot&quot;
comma
id|kdbm_xfs_xbroot
comma
l_string|&quot;&lt;xfs_inode_t&gt;&quot;
comma
l_string|&quot;Dump XFS bmap btree root (data)&quot;
)brace
comma
(brace
l_string|&quot;xbroota&quot;
comma
id|kdbm_xfs_xbroota
comma
l_string|&quot;&lt;xfs_inode_t&gt;&quot;
comma
l_string|&quot;Dump XFS bmap btree root (attr)&quot;
)brace
comma
(brace
l_string|&quot;xbtcur&quot;
comma
id|kdbm_xfs_xbtcur
comma
l_string|&quot;&lt;xfs_btree_cur_t&gt;&quot;
comma
l_string|&quot;Dump XFS btree cursor&quot;
)brace
comma
(brace
l_string|&quot;xbuf&quot;
comma
id|kdbm_xfs_xbuf
comma
l_string|&quot;&lt;xfs_buf_t&gt;&quot;
comma
l_string|&quot;Dump XFS data from a buffer&quot;
)brace
comma
(brace
l_string|&quot;xchash&quot;
comma
id|kdbm_xfs_xchash
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS cluster hash&quot;
)brace
comma
(brace
l_string|&quot;xchlist&quot;
comma
id|kdbm_xfs_xchashlist
comma
l_string|&quot;&lt;xfs_chashlist_t&gt;&quot;
comma
l_string|&quot;Dump XFS cluster hash list&quot;
)brace
comma
(brace
l_string|&quot;xd2free&quot;
comma
id|kdbm_xfs_xdir2free
comma
l_string|&quot;&lt;xfs_dir2_free_t&gt;&quot;
comma
l_string|&quot;Dump XFS directory v2 freemap&quot;
)brace
comma
(brace
l_string|&quot;xdaargs&quot;
comma
id|kdbm_xfs_xdaargs
comma
l_string|&quot;&lt;xfs_da_args_t&gt;&quot;
comma
l_string|&quot;Dump XFS dir/attr args structure&quot;
)brace
comma
(brace
l_string|&quot;xdabuf&quot;
comma
id|kdbm_xfs_xdabuf
comma
l_string|&quot;&lt;xfs_dabuf_t&gt;&quot;
comma
l_string|&quot;Dump XFS dir/attr buf structure&quot;
)brace
comma
(brace
l_string|&quot;xdanode&quot;
comma
id|kdbm_xfs_xdanode
comma
l_string|&quot;&lt;xfs_da_intnode_t&gt;&quot;
comma
l_string|&quot;Dump XFS dir/attr node block&quot;
)brace
comma
(brace
l_string|&quot;xdastat&quot;
comma
id|kdbm_xfs_xdastate
comma
l_string|&quot;&lt;xfs_da_state_t&gt;&quot;
comma
l_string|&quot;Dump XFS dir/attr state_blk struct&quot;
)brace
comma
(brace
l_string|&quot;xdelay&quot;
comma
id|kdbm_xfs_delayed_blocks
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump delayed block totals&quot;
)brace
comma
(brace
l_string|&quot;xdirlf&quot;
comma
id|kdbm_xfs_xdirleaf
comma
l_string|&quot;&lt;xfs_dir_leafblock_t&gt;&quot;
comma
l_string|&quot;Dump XFS directory leaf block&quot;
)brace
comma
(brace
l_string|&quot;xdirsf&quot;
comma
id|kdbm_xfs_xdirsf
comma
l_string|&quot;&lt;xfs_dir_shortform_t&gt;&quot;
comma
l_string|&quot;Dump XFS directory shortform&quot;
)brace
comma
(brace
l_string|&quot;xdir2sf&quot;
comma
id|kdbm_xfs_xdir2sf
comma
l_string|&quot;&lt;xfs_dir2_sf_t&gt;&quot;
comma
l_string|&quot;Dump XFS directory v2 shortform&quot;
)brace
comma
(brace
l_string|&quot;xdiskdq&quot;
comma
id|kdbm_xfs_xqm_diskdq
comma
l_string|&quot;&lt;xfs_disk_dquot_t&gt;&quot;
comma
l_string|&quot;Dump XFS ondisk dquot (quota) struct&quot;
)brace
comma
(brace
l_string|&quot;xdqatt&quot;
comma
id|kdbm_xfs_xqm_dqattached_inos
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;All incore inodes with dquots&quot;
)brace
comma
(brace
l_string|&quot;xdqinfo&quot;
comma
id|kdbm_xfs_xqm_tpdqinfo
comma
l_string|&quot;&lt;xfs_trans_t&gt;&quot;
comma
l_string|&quot;Dump dqinfo structure of a trans&quot;
)brace
comma
(brace
l_string|&quot;xdquot&quot;
comma
id|kdbm_xfs_xqm_dquot
comma
l_string|&quot;&lt;xfs_dquot_t&gt;&quot;
comma
l_string|&quot;Dump XFS dquot (quota) structure&quot;
)brace
comma
(brace
l_string|&quot;xexlist&quot;
comma
id|kdbm_xfs_xexlist
comma
l_string|&quot;&lt;xfs_inode_t&gt;&quot;
comma
l_string|&quot;Dump XFS bmap extents in inode&quot;
)brace
comma
(brace
l_string|&quot;xflist&quot;
comma
id|kdbm_xfs_xflist
comma
l_string|&quot;&lt;xfs_bmap_free_t&gt;&quot;
comma
l_string|&quot;Dump XFS to-be-freed extent list&quot;
)brace
comma
(brace
l_string|&quot;xhelp&quot;
comma
id|kdbm_xfs_xhelp
comma
l_string|&quot;&quot;
comma
l_string|&quot;Print idbg-xfs help&quot;
)brace
comma
(brace
l_string|&quot;xicall&quot;
comma
id|kdbm_xfs_xiclogall
comma
l_string|&quot;&lt;xlog_in_core_t&gt;&quot;
comma
l_string|&quot;Dump All XFS in-core logs&quot;
)brace
comma
(brace
l_string|&quot;xiclog&quot;
comma
id|kdbm_xfs_xiclog
comma
l_string|&quot;&lt;xlog_in_core_t&gt;&quot;
comma
l_string|&quot;Dump XFS in-core log&quot;
)brace
comma
(brace
l_string|&quot;xihash&quot;
comma
id|kdbm_xfs_xihash
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS inode hash statistics&quot;
)brace
comma
(brace
l_string|&quot;xinodes&quot;
comma
id|kdbm_xfs_xinodes
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS inodes per mount&quot;
)brace
comma
(brace
l_string|&quot;xquiesce&quot;
comma
id|kdbm_xfs_xinodes_quiesce
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump non-quiesced XFS inodes per mount&quot;
)brace
comma
(brace
l_string|&quot;xl_rcit&quot;
comma
id|kdbm_xfs_xlog_ritem
comma
l_string|&quot;&lt;xlog_recover_item_t&gt;&quot;
comma
l_string|&quot;Dump XFS recovery item&quot;
)brace
comma
(brace
l_string|&quot;xl_rctr&quot;
comma
id|kdbm_xfs_xlog_rtrans
comma
l_string|&quot;&lt;xlog_recover_t&gt;&quot;
comma
l_string|&quot;Dump XFS recovery transaction&quot;
)brace
comma
(brace
l_string|&quot;xl_rctr2&quot;
comma
id|kdbm_xfs_xlog_rtrans_entire
comma
l_string|&quot;&lt;xlog_recover_t&gt;&quot;
comma
l_string|&quot;Dump entire recovery transaction&quot;
)brace
comma
(brace
l_string|&quot;xl_tic&quot;
comma
id|kdbm_xfs_xlog_tic
comma
l_string|&quot;&lt;xlog_ticket_t&gt;&quot;
comma
l_string|&quot;Dump XFS log ticket&quot;
)brace
comma
(brace
l_string|&quot;xlog&quot;
comma
id|kdbm_xfs_xlog
comma
l_string|&quot;&lt;xlog_t&gt;&quot;
comma
l_string|&quot;Dump XFS log&quot;
)brace
comma
(brace
l_string|&quot;xlogcb&quot;
comma
id|kdbm_xfs_xiclogcb
comma
l_string|&quot;&lt;xlog_in_core_t&gt;&quot;
comma
l_string|&quot;Dump XFS in-core log callbacks&quot;
)brace
comma
(brace
l_string|&quot;xlogitm&quot;
comma
id|kdbm_xfs_xlogitem
comma
l_string|&quot;&lt;xfs_log_item_t&gt;&quot;
comma
l_string|&quot;Dump XFS log item structure&quot;
)brace
comma
(brace
l_string|&quot;xmount&quot;
comma
id|kdbm_xfs_xmount
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS mount structure&quot;
)brace
comma
(brace
l_string|&quot;xnode&quot;
comma
id|kdbm_xfs_xnode
comma
l_string|&quot;&lt;xfs_inode_t&gt;&quot;
comma
l_string|&quot;Dump XFS inode&quot;
)brace
comma
(brace
l_string|&quot;xiocore&quot;
comma
id|kdbm_xfs_xcore
comma
l_string|&quot;&lt;xfs_iocore_t&gt;&quot;
comma
l_string|&quot;Dump XFS iocore&quot;
)brace
comma
(brace
l_string|&quot;xperag&quot;
comma
id|kdbm_xfs_xperag
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS per-allocation group data&quot;
)brace
comma
(brace
l_string|&quot;xqinfo&quot;
comma
id|kdbm_xfs_xqm_qinfo
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump mount-&gt;m_quotainfo structure&quot;
)brace
comma
macro_line|#ifdef&t;CONFIG_XFS_QUOTA
(brace
l_string|&quot;xqm&quot;
comma
id|kdbm_xfs_xqm
comma
l_string|&quot;&quot;
comma
l_string|&quot;Dump XFS quota manager structure&quot;
)brace
comma
(brace
l_string|&quot;xqmfree&quot;
comma
id|kdbm_xfs_xqm_freelist
comma
l_string|&quot;&quot;
comma
l_string|&quot;Dump XFS global freelist of dquots&quot;
)brace
comma
(brace
l_string|&quot;xqmhtab&quot;
comma
id|kdbm_xfs_xqm_htab
comma
l_string|&quot;&quot;
comma
l_string|&quot;Dump XFS hashtable of dquots&quot;
)brace
comma
macro_line|#endif&t;/* CONFIG_XFS_QUOTA */
(brace
l_string|&quot;xqmplist&quot;
comma
id|kdbm_xfs_xqm_mplist
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS all dquots of a f/s&quot;
)brace
comma
(brace
l_string|&quot;xsb&quot;
comma
id|kdbm_xfs_xsb
comma
l_string|&quot;&lt;xfs_sb_t&gt; &lt;cnv&gt;&quot;
comma
l_string|&quot;Dump XFS superblock&quot;
)brace
comma
(brace
l_string|&quot;xtp&quot;
comma
id|kdbm_xfs_xtp
comma
l_string|&quot;&lt;xfs_trans_t&gt;&quot;
comma
l_string|&quot;Dump XFS transaction structure&quot;
)brace
comma
(brace
l_string|&quot;xtrres&quot;
comma
id|kdbm_xfs_xtrans_res
comma
l_string|&quot;&lt;xfs_mount_t&gt;&quot;
comma
l_string|&quot;Dump XFS reservation values&quot;
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0
)brace
)brace
suffix:semicolon
r_static
r_int
DECL|function|xfsidbg_init
id|__init
id|xfsidbg_init
c_func
(paren
r_void
)paren
(brace
r_struct
id|xif
op_star
id|p
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
id|xfsidbg_funcs
suffix:semicolon
id|p-&gt;name
suffix:semicolon
id|p
op_increment
)paren
id|kdb_register
c_func
(paren
id|p-&gt;name
comma
id|p-&gt;func
comma
id|p-&gt;args
comma
id|p-&gt;help
comma
l_int|0
)paren
suffix:semicolon
id|kdb_register
c_func
(paren
l_string|&quot;pb&quot;
comma
id|kdbm_pb
comma
l_string|&quot;&lt;vaddr&gt;&quot;
comma
l_string|&quot;Display page_buf_t&quot;
comma
l_int|0
)paren
suffix:semicolon
id|kdb_register
c_func
(paren
l_string|&quot;pbflags&quot;
comma
id|kdbm_pb_flags
comma
l_string|&quot;&lt;flags&gt;&quot;
comma
l_string|&quot;Display page buf flags&quot;
comma
l_int|0
)paren
suffix:semicolon
id|kdb_register
c_func
(paren
l_string|&quot;pbiodesc&quot;
comma
id|kdbm_pbiodesc
comma
l_string|&quot;&lt;pb_io_desc_t *&gt;&quot;
comma
l_string|&quot;Display I/O Descriptor&quot;
comma
l_int|0
)paren
suffix:semicolon
id|kdb_register
c_func
(paren
l_string|&quot;pbmap&quot;
comma
id|kdbm_pbmap
comma
l_string|&quot;&lt;page_buf_bmap_t *&gt;&quot;
comma
l_string|&quot;Display Bmap&quot;
comma
l_int|0
)paren
suffix:semicolon
id|kdb_register
c_func
(paren
l_string|&quot;pbtrace&quot;
comma
id|kdbm_pbtrace
comma
l_string|&quot;&lt;vaddr&gt;|&lt;count&gt;&quot;
comma
l_string|&quot;page_buf_t trace&quot;
comma
l_int|0
)paren
suffix:semicolon
macro_line|#ifdef PAGEBUF_TRACE
id|kdb_register
c_func
(paren
l_string|&quot;pboffset&quot;
comma
id|kdbm_pbtrace_offset
comma
l_string|&quot;&lt;addr&gt; [&lt;mask&gt;]&quot;
comma
l_string|&quot;page_buf_t trace&quot;
comma
l_int|0
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_exit
id|__exit
id|xfsidbg_exit
c_func
(paren
r_void
)paren
(brace
r_struct
id|xif
op_star
id|p
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
id|xfsidbg_funcs
suffix:semicolon
id|p-&gt;name
suffix:semicolon
id|p
op_increment
)paren
id|kdb_unregister
c_func
(paren
id|p-&gt;name
)paren
suffix:semicolon
id|kdb_unregister
c_func
(paren
l_string|&quot;pb&quot;
)paren
suffix:semicolon
id|kdb_unregister
c_func
(paren
l_string|&quot;pbflags&quot;
)paren
suffix:semicolon
id|kdb_unregister
c_func
(paren
l_string|&quot;pbmap&quot;
)paren
suffix:semicolon
id|kdb_unregister
c_func
(paren
l_string|&quot;pbiodesc&quot;
)paren
suffix:semicolon
id|kdb_unregister
c_func
(paren
l_string|&quot;pbtrace&quot;
)paren
suffix:semicolon
macro_line|#ifdef PAGEBUF_TRACE
id|kdb_unregister
c_func
(paren
l_string|&quot;pboffset&quot;
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n; * Argument to xfs_alloc routines, for allocation type.&n; */
DECL|variable|xfs_alloctype
r_static
r_char
op_star
id|xfs_alloctype
(braket
)braket
op_assign
(brace
l_string|&quot;any_ag&quot;
comma
l_string|&quot;first_ag&quot;
comma
l_string|&quot;start_ag&quot;
comma
l_string|&quot;this_ag&quot;
comma
l_string|&quot;start_bno&quot;
comma
l_string|&quot;near_bno&quot;
comma
l_string|&quot;this_bno&quot;
)brace
suffix:semicolon
multiline_comment|/*&n; * Prototypes for static functions.&n; */
macro_line|#ifdef DEBUG
r_static
r_int
id|xfs_alloc_trace_entry
c_func
(paren
id|ktrace_entry_t
op_star
id|ktep
)paren
suffix:semicolon
macro_line|#endif
r_static
r_void
id|xfs_broot
c_func
(paren
id|xfs_inode_t
op_star
id|ip
comma
id|xfs_ifork_t
op_star
id|f
)paren
suffix:semicolon
r_static
r_void
id|xfs_btalloc
c_func
(paren
id|xfs_alloc_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
suffix:semicolon
r_static
r_void
id|xfs_btbmap
c_func
(paren
id|xfs_bmbt_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
suffix:semicolon
r_static
r_void
id|xfs_btino
c_func
(paren
id|xfs_inobt_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
suffix:semicolon
r_static
r_void
id|xfs_buf_item_print
c_func
(paren
id|xfs_buf_log_item_t
op_star
id|blip
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_void
id|xfs_dastate_path
c_func
(paren
id|xfs_da_state_path_t
op_star
id|p
)paren
suffix:semicolon
r_static
r_void
id|xfs_dir2data
c_func
(paren
r_void
op_star
id|addr
comma
r_int
id|size
)paren
suffix:semicolon
r_static
r_void
id|xfs_dir2leaf
c_func
(paren
id|xfs_dir2_leaf_t
op_star
id|leaf
comma
r_int
id|size
)paren
suffix:semicolon
r_static
r_void
id|xfs_dquot_item_print
c_func
(paren
id|xfs_dq_logitem_t
op_star
id|lip
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_void
id|xfs_efd_item_print
c_func
(paren
id|xfs_efd_log_item_t
op_star
id|efdp
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_void
id|xfs_efi_item_print
c_func
(paren
id|xfs_efi_log_item_t
op_star
id|efip
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtformat
c_func
(paren
id|xfs_dinode_fmt_t
id|f
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtfsblock
c_func
(paren
id|xfs_fsblock_t
id|bno
comma
id|xfs_mount_t
op_star
id|mp
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtino
c_func
(paren
id|xfs_ino_t
id|ino
comma
id|xfs_mount_t
op_star
id|mp
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtlsn
c_func
(paren
id|xfs_lsn_t
op_star
id|lsnp
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtmode
c_func
(paren
r_int
id|m
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtsize
c_func
(paren
r_int
id|i
)paren
suffix:semicolon
r_static
r_char
op_star
id|xfs_fmtuuid
c_func
(paren
id|uuid_t
op_star
)paren
suffix:semicolon
r_static
r_void
id|xfs_inode_item_print
c_func
(paren
id|xfs_inode_log_item_t
op_star
id|ilip
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_void
id|xfs_inodebuf
c_func
(paren
id|xfs_buf_t
op_star
id|bp
)paren
suffix:semicolon
r_static
r_void
id|xfs_prdinode
c_func
(paren
id|xfs_dinode_t
op_star
id|di
comma
r_int
id|coreonly
comma
r_int
id|convert
)paren
suffix:semicolon
r_static
r_void
id|xfs_prdinode_core
c_func
(paren
id|xfs_dinode_core_t
op_star
id|dip
comma
r_int
id|convert
)paren
suffix:semicolon
r_static
r_void
id|xfs_qoff_item_print
c_func
(paren
id|xfs_qoff_logitem_t
op_star
id|lip
comma
r_int
id|summary
)paren
suffix:semicolon
r_static
r_void
id|xfs_xexlist_fork
c_func
(paren
id|xfs_inode_t
op_star
id|ip
comma
r_int
id|whichfork
)paren
suffix:semicolon
r_static
r_void
id|xfs_xnode_fork
c_func
(paren
r_char
op_star
id|name
comma
id|xfs_ifork_t
op_star
id|f
)paren
suffix:semicolon
multiline_comment|/*&n; * Static functions.&n; */
macro_line|#ifdef DEBUG
multiline_comment|/*&n; * Print xfs alloc trace buffer entry.&n; */
r_static
r_int
DECL|function|xfs_alloc_trace_entry
id|xfs_alloc_trace_entry
c_func
(paren
id|ktrace_entry_t
op_star
id|ktep
)paren
(brace
r_static
r_char
op_star
id|modagf_flags
(braket
)braket
op_assign
(brace
l_string|&quot;magicnum&quot;
comma
l_string|&quot;versionnum&quot;
comma
l_string|&quot;seqno&quot;
comma
l_string|&quot;length&quot;
comma
l_string|&quot;roots&quot;
comma
l_string|&quot;levels&quot;
comma
l_string|&quot;flfirst&quot;
comma
l_string|&quot;fllast&quot;
comma
l_string|&quot;flcount&quot;
comma
l_string|&quot;freeblks&quot;
comma
l_string|&quot;longest&quot;
comma
l_int|NULL
)brace
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_amp
l_int|0xffff
)paren
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
(paren
r_int
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_amp
l_int|0xffffL
)paren
(brace
r_case
id|XFS_ALLOC_KTRACE_ALLOC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;alloc %s[%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;agno %d agbno %d minlen %d maxlen %d mod %d prod %d minleft %d&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|9
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;total %d alignment %d len %d type %s otype %s&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|11
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|12
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|13
)braket
comma
id|xfs_alloctype
(braket
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|14
)braket
)paren
op_rshift
l_int|16
)braket
comma
id|xfs_alloctype
(braket
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|14
)braket
)paren
op_amp
l_int|0xffff
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;wasdel %d wasfromfl %d isfl %d userdata %d&bslash;n&quot;
comma
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|15
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|3
)paren
)paren
op_ne
l_int|0
comma
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|15
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|2
)paren
)paren
op_ne
l_int|0
comma
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|15
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|1
)paren
)paren
op_ne
l_int|0
comma
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|15
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|0
)paren
)paren
op_ne
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ALLOC_KTRACE_FREE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;free %s[%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;agno %d agbno %d len %d isfl %d&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ALLOC_KTRACE_MODAGF
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;modagf %s[%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
id|modagf_flags
comma
l_string|&quot;modified&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;seqno %d length %d roots b %d c %d&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;levels b %d c %d flfirst %d fllast %d flcount %d&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|9
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|10
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|11
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|12
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|13
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;freeblks %d longest %d&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|14
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|15
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ALLOC_KTRACE_UNBUSY
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;unbusy %s [%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;      agno %d slot %d tp 0x%x&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ALLOC_KTRACE_BUSY
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;busy %s [%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;      agno %d agbno %d len %d slot %d tp 0x%x&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ALLOC_KTRACE_BUSYSEARCH
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;busy-search %s [%s %d] mp 0x%p&bslash;n&quot;
comma
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|1
)braket
comma
id|ktep-&gt;val
(braket
l_int|2
)braket
ques
c_cond
(paren
r_char
op_star
)paren
id|ktep-&gt;val
(braket
l_int|2
)braket
suffix:colon
l_string|&quot;&quot;
comma
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_rshift
l_int|16
comma
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;      agno %d agbno %d len %d slot %d tp 0x%x&bslash;n&quot;
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|4
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|5
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|6
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|7
)braket
comma
(paren
id|__psunsigned_t
)paren
id|ktep-&gt;val
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;unknown alloc trace record&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif /* DEBUG */
multiline_comment|/*&n; * Print an xfs in-inode bmap btree root.&n; */
r_static
r_void
DECL|function|xfs_broot
id|xfs_broot
c_func
(paren
id|xfs_inode_t
op_star
id|ip
comma
id|xfs_ifork_t
op_star
id|f
)paren
(brace
id|xfs_bmbt_block_t
op_star
id|broot
suffix:semicolon
r_int
id|format
suffix:semicolon
r_int
id|i
suffix:semicolon
id|xfs_bmbt_key_t
op_star
id|kp
suffix:semicolon
id|xfs_bmbt_ptr_t
op_star
id|pp
suffix:semicolon
id|format
op_assign
id|f
op_eq
op_amp
id|ip-&gt;i_df
ques
c_cond
id|ip-&gt;i_d.di_format
suffix:colon
id|ip-&gt;i_d.di_aformat
suffix:semicolon
r_if
c_cond
(paren
(paren
id|f-&gt;if_flags
op_amp
id|XFS_IFBROOT
)paren
op_eq
l_int|0
op_logical_or
id|format
op_ne
id|XFS_DINODE_FMT_BTREE
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;inode 0x%p not btree format&bslash;n&quot;
comma
id|ip
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|broot
op_assign
id|f-&gt;if_broot
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;block @0x%p magic %x level %d numrecs %d&bslash;n&quot;
comma
id|broot
comma
id|INT_GET
c_func
(paren
id|broot-&gt;bb_magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|broot-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|broot-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kp
op_assign
id|XFS_BMAP_BROOT_KEY_ADDR
c_func
(paren
id|broot
comma
l_int|1
comma
id|f-&gt;if_broot_bytes
)paren
suffix:semicolon
id|pp
op_assign
id|XFS_BMAP_BROOT_PTR_ADDR
c_func
(paren
id|broot
comma
l_int|1
comma
id|f-&gt;if_broot_bytes
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|broot-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;t%d: startoff %Ld ptr %Lx %s&bslash;n&quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|kp
(braket
id|i
op_minus
l_int|1
)braket
dot
id|br_startoff
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|pp
(braket
id|i
op_minus
l_int|1
)braket
comma
id|ARCH_CONVERT
)paren
comma
id|xfs_fmtfsblock
c_func
(paren
id|INT_GET
c_func
(paren
id|pp
(braket
id|i
op_minus
l_int|1
)braket
comma
id|ARCH_CONVERT
)paren
comma
id|ip-&gt;i_mount
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print allocation btree block.&n; */
r_static
r_void
DECL|function|xfs_btalloc
id|xfs_btalloc
c_func
(paren
id|xfs_alloc_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magic 0x%x level %d numrecs %d leftsib 0x%x rightsib 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_leftsib
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_rightsib
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT_ISZERO
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_alloc_rec_t
op_star
id|r
suffix:semicolon
id|r
op_assign
id|XFS_BTREE_REC_ADDR
c_func
(paren
id|bsz
comma
id|xfs_alloc
comma
id|bt
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rec %d startblock 0x%x blockcount %d&bslash;n&quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|r-&gt;ar_startblock
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|r-&gt;ar_blockcount
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_int
id|mxr
suffix:semicolon
id|mxr
op_assign
id|XFS_BTREE_BLOCK_MAXRECS
c_func
(paren
id|bsz
comma
id|xfs_alloc
comma
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_alloc_key_t
op_star
id|k
suffix:semicolon
id|xfs_alloc_ptr_t
op_star
id|p
suffix:semicolon
id|k
op_assign
id|XFS_BTREE_KEY_ADDR
c_func
(paren
id|bsz
comma
id|xfs_alloc
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|p
op_assign
id|XFS_BTREE_PTR_ADDR
c_func
(paren
id|bsz
comma
id|xfs_alloc
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;key %d startblock 0x%x blockcount %d ptr 0x%x&bslash;n&quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|k-&gt;ar_startblock
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|k-&gt;ar_blockcount
comma
id|ARCH_CONVERT
)paren
comma
op_star
id|p
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print a bmap btree block.&n; */
r_static
r_void
DECL|function|xfs_btbmap
id|xfs_btbmap
c_func
(paren
id|xfs_bmbt_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magic 0x%x level %d numrecs %d leftsib %Lx &quot;
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_leftsib
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rightsib %Lx&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_rightsib
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT_ISZERO
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_bmbt_rec_t
op_star
id|r
suffix:semicolon
id|xfs_bmbt_irec_t
id|irec
suffix:semicolon
id|r
op_assign
(paren
id|xfs_bmbt_rec_t
op_star
)paren
id|XFS_BTREE_REC_ADDR
c_func
(paren
id|bsz
comma
id|xfs_bmbt
comma
id|bt
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
id|xfs_bmbt_disk_get_all
c_func
(paren
(paren
id|xfs_bmbt_rec_t
op_star
)paren
id|r
comma
op_amp
id|irec
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rec %d startoff %Ld startblock %Lx blockcount %Ld flag %d&bslash;n&quot;
comma
id|i
comma
id|irec.br_startoff
comma
(paren
id|__uint64_t
)paren
id|irec.br_startblock
comma
id|irec.br_blockcount
comma
id|irec.br_state
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_int
id|mxr
suffix:semicolon
id|mxr
op_assign
id|XFS_BTREE_BLOCK_MAXRECS
c_func
(paren
id|bsz
comma
id|xfs_bmbt
comma
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_bmbt_key_t
op_star
id|k
suffix:semicolon
id|xfs_bmbt_ptr_t
op_star
id|p
suffix:semicolon
id|k
op_assign
id|XFS_BTREE_KEY_ADDR
c_func
(paren
id|bsz
comma
id|xfs_bmbt
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|p
op_assign
id|XFS_BTREE_PTR_ADDR
c_func
(paren
id|bsz
comma
id|xfs_bmbt
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;key %d startoff %Ld &quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|k-&gt;br_startoff
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ptr %Lx&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
op_star
id|p
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print an inode btree block.&n; */
r_static
r_void
DECL|function|xfs_btino
id|xfs_btino
c_func
(paren
id|xfs_inobt_block_t
op_star
id|bt
comma
r_int
id|bsz
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magic 0x%x level %d numrecs %d leftsib 0x%x rightsib 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_leftsib
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|bt-&gt;bb_rightsib
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT_ISZERO
c_func
(paren
id|bt-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_inobt_rec_t
op_star
id|r
suffix:semicolon
id|r
op_assign
id|XFS_BTREE_REC_ADDR
c_func
(paren
id|bsz
comma
id|xfs_inobt
comma
id|bt
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rec %d startino 0x%x freecount %d, free %Lx&bslash;n&quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|r-&gt;ir_startino
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|r-&gt;ir_freecount
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|r-&gt;ir_free
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_int
id|mxr
suffix:semicolon
id|mxr
op_assign
id|XFS_BTREE_BLOCK_MAXRECS
c_func
(paren
id|bsz
comma
id|xfs_inobt
comma
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
op_le
id|INT_GET
c_func
(paren
id|bt-&gt;bb_numrecs
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_inobt_key_t
op_star
id|k
suffix:semicolon
id|xfs_inobt_ptr_t
op_star
id|p
suffix:semicolon
id|k
op_assign
id|XFS_BTREE_KEY_ADDR
c_func
(paren
id|bsz
comma
id|xfs_inobt
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|p
op_assign
id|XFS_BTREE_PTR_ADDR
c_func
(paren
id|bsz
comma
id|xfs_inobt
comma
id|bt
comma
id|i
comma
id|mxr
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;key %d startino 0x%x ptr 0x%x&bslash;n&quot;
comma
id|i
comma
id|INT_GET
c_func
(paren
id|k-&gt;ir_startino
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
op_star
id|p
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print a buf log item.&n; */
r_static
r_void
DECL|function|xfs_buf_item_print
id|xfs_buf_item_print
c_func
(paren
id|xfs_buf_log_item_t
op_star
id|blip
comma
r_int
id|summary
)paren
(brace
r_static
r_char
op_star
id|bli_flags
(braket
)braket
op_assign
(brace
l_string|&quot;hold&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;dirty&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;stale&quot;
comma
multiline_comment|/* 0x4 */
l_string|&quot;logged&quot;
comma
multiline_comment|/* 0x8 */
l_string|&quot;ialloc&quot;
comma
multiline_comment|/* 0x10 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|blf_flags
(braket
)braket
op_assign
(brace
l_string|&quot;inode&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;cancel&quot;
comma
multiline_comment|/* 0x2 */
l_int|0
)brace
suffix:semicolon
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p blkno 0x%Lx &quot;
comma
id|blip-&gt;bli_buf
comma
id|blip-&gt;bli_format.blf_blkno
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|blip-&gt;bli_flags
comma
id|bli_flags
comma
l_string|&quot;flags:&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n   &quot;
)paren
suffix:semicolon
id|xfsidbg_xbuf_real
c_func
(paren
id|blip-&gt;bli_buf
comma
l_int|1
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p recur %d refcount %d flags:&quot;
comma
id|blip-&gt;bli_buf
comma
id|blip-&gt;bli_recur
comma
id|atomic_read
c_func
(paren
op_amp
id|blip-&gt;bli_refcount
)paren
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|blip-&gt;bli_flags
comma
id|bli_flags
comma
l_int|NULL
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;size %d blkno 0x%Lx len 0x%x map size %d map 0x%p&bslash;n&quot;
comma
id|blip-&gt;bli_format.blf_size
comma
id|blip-&gt;bli_format.blf_blkno
comma
(paren
id|uint
)paren
id|blip-&gt;bli_format.blf_len
comma
id|blip-&gt;bli_format.blf_map_size
comma
op_amp
(paren
id|blip-&gt;bli_format.blf_data_map
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;blf flags: &quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|uint
)paren
id|blip-&gt;bli_format.blf_flags
comma
id|blf_flags
comma
l_int|NULL
)paren
suffix:semicolon
macro_line|#ifdef XFS_TRANS_DEBUG
id|kdb_printf
c_func
(paren
l_string|&quot;orig 0x%x logged 0x%x&quot;
comma
id|blip-&gt;bli_orig
comma
id|blip-&gt;bli_logged
)paren
suffix:semicolon
macro_line|#endif
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print an xfs_da_state_path structure.&n; */
r_static
r_void
DECL|function|xfs_dastate_path
id|xfs_dastate_path
c_func
(paren
id|xfs_da_state_path_t
op_star
id|p
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;active %d&bslash;n&quot;
comma
id|p-&gt;active
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|XFS_DA_NODE_MAXDEPTH
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot; blk %d bp 0x%p blkno 0x%x&quot;
comma
id|i
comma
id|p-&gt;blk
(braket
id|i
)braket
dot
id|bp
comma
id|p-&gt;blk
(braket
id|i
)braket
dot
id|blkno
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; index %d hashval 0x%x &quot;
comma
id|p-&gt;blk
(braket
id|i
)braket
dot
id|index
comma
(paren
id|uint_t
)paren
id|p-&gt;blk
(braket
id|i
)braket
dot
id|hashval
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|p-&gt;blk
(braket
id|i
)braket
dot
id|magic
)paren
(brace
r_case
id|XFS_DA_NODE_MAGIC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;NODE&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_DIR_LEAF_MAGIC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;DIR&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_ATTR_LEAF_MAGIC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATTR&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_DIR2_LEAFN_MAGIC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;DIR2&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;type ??&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print an efd log item.&n; */
r_static
r_void
DECL|function|xfs_efd_item_print
id|xfs_efd_item_print
c_func
(paren
id|xfs_efd_log_item_t
op_star
id|efdp
comma
r_int
id|summary
)paren
(brace
r_int
id|i
suffix:semicolon
id|xfs_extent_t
op_star
id|ep
suffix:semicolon
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Extent Free Done: ID 0x%Lx nextents %d (at 0x%p)&bslash;n&quot;
comma
id|efdp-&gt;efd_format.efd_efi_id
comma
id|efdp-&gt;efd_format.efd_nextents
comma
id|efdp
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;size %d nextents %d next extent %d efip 0x%p&bslash;n&quot;
comma
id|efdp-&gt;efd_format.efd_size
comma
id|efdp-&gt;efd_format.efd_nextents
comma
id|efdp-&gt;efd_next_extent
comma
id|efdp-&gt;efd_efip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;efi_id 0x%Lx&bslash;n&quot;
comma
id|efdp-&gt;efd_format.efd_efi_id
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;efd extents:&bslash;n&quot;
)paren
suffix:semicolon
id|ep
op_assign
op_amp
(paren
id|efdp-&gt;efd_format.efd_extents
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|efdp-&gt;efd_next_extent
suffix:semicolon
id|i
op_increment
comma
id|ep
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;    block %Lx len %d&bslash;n&quot;
comma
id|ep-&gt;ext_start
comma
id|ep-&gt;ext_len
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print an efi log item.&n; */
r_static
r_void
DECL|function|xfs_efi_item_print
id|xfs_efi_item_print
c_func
(paren
id|xfs_efi_log_item_t
op_star
id|efip
comma
r_int
id|summary
)paren
(brace
r_int
id|i
suffix:semicolon
id|xfs_extent_t
op_star
id|ep
suffix:semicolon
r_static
r_char
op_star
id|efi_flags
(braket
)braket
op_assign
(brace
l_string|&quot;recovered&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;committed&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;cancelled&quot;
comma
multiline_comment|/* 0x4 */
l_int|0
comma
)brace
suffix:semicolon
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Extent Free Intention: ID 0x%Lx nextents %d (at 0x%p)&bslash;n&quot;
comma
id|efip-&gt;efi_format.efi_id
comma
id|efip-&gt;efi_format.efi_nextents
comma
id|efip
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;size %d nextents %d next extent %d&bslash;n&quot;
comma
id|efip-&gt;efi_format.efi_size
comma
id|efip-&gt;efi_format.efi_nextents
comma
id|efip-&gt;efi_next_extent
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;id %Lx&quot;
comma
id|efip-&gt;efi_format.efi_id
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|efip-&gt;efi_flags
comma
id|efi_flags
comma
l_string|&quot;flags :&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;efi extents:&bslash;n&quot;
)paren
suffix:semicolon
id|ep
op_assign
op_amp
(paren
id|efip-&gt;efi_format.efi_extents
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|efip-&gt;efi_next_extent
suffix:semicolon
id|i
op_increment
comma
id|ep
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;    block %Lx len %d&bslash;n&quot;
comma
id|ep-&gt;ext_start
comma
id|ep-&gt;ext_len
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Format inode &quot;format&quot; into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtformat
id|xfs_fmtformat
c_func
(paren
id|xfs_dinode_fmt_t
id|f
)paren
(brace
r_static
r_char
op_star
id|t
(braket
)braket
op_assign
(brace
l_string|&quot;dev&quot;
comma
l_string|&quot;local&quot;
comma
l_string|&quot;extents&quot;
comma
l_string|&quot;btree&quot;
comma
l_string|&quot;uuid&quot;
)brace
suffix:semicolon
r_return
id|t
(braket
id|f
)braket
suffix:semicolon
)brace
multiline_comment|/*&n; * Format fsblock number into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtfsblock
id|xfs_fmtfsblock
c_func
(paren
id|xfs_fsblock_t
id|bno
comma
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_static
r_char
id|rval
(braket
l_int|50
)braket
suffix:semicolon
r_if
c_cond
(paren
id|bno
op_eq
id|NULLFSBLOCK
)paren
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;NULLFSBLOCK&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ISNULLSTARTBLOCK
c_func
(paren
id|bno
)paren
)paren
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;NULLSTARTBLOCK(%Ld)&quot;
comma
id|STARTBLOCKVAL
c_func
(paren
id|bno
)paren
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|mp
)paren
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;%Ld[%x:%x]&quot;
comma
(paren
id|xfs_dfsbno_t
)paren
id|bno
comma
id|XFS_FSB_TO_AGNO
c_func
(paren
id|mp
comma
id|bno
)paren
comma
id|XFS_FSB_TO_AGBNO
c_func
(paren
id|mp
comma
id|bno
)paren
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;%Ld&quot;
comma
(paren
id|xfs_dfsbno_t
)paren
id|bno
)paren
suffix:semicolon
r_return
id|rval
suffix:semicolon
)brace
multiline_comment|/*&n; * Format inode number into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtino
id|xfs_fmtino
c_func
(paren
id|xfs_ino_t
id|ino
comma
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_static
r_char
id|rval
(braket
l_int|50
)braket
suffix:semicolon
r_if
c_cond
(paren
id|mp
)paren
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;%llu[%x:%x:%x]&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|ino
comma
id|XFS_INO_TO_AGNO
c_func
(paren
id|mp
comma
id|ino
)paren
comma
id|XFS_INO_TO_AGBNO
c_func
(paren
id|mp
comma
id|ino
)paren
comma
id|XFS_INO_TO_OFFSET
c_func
(paren
id|mp
comma
id|ino
)paren
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;%llu&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|ino
)paren
suffix:semicolon
r_return
id|rval
suffix:semicolon
)brace
multiline_comment|/*&n; * Format an lsn for printing into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtlsn
id|xfs_fmtlsn
c_func
(paren
id|xfs_lsn_t
op_star
id|lsnp
)paren
(brace
id|uint
op_star
id|wordp
suffix:semicolon
id|uint
op_star
id|word2p
suffix:semicolon
r_static
r_char
id|buf
(braket
l_int|20
)braket
suffix:semicolon
id|wordp
op_assign
(paren
id|uint
op_star
)paren
id|lsnp
suffix:semicolon
id|word2p
op_assign
id|wordp
op_increment
suffix:semicolon
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;[%u:%u]&quot;
comma
op_star
id|wordp
comma
op_star
id|word2p
)paren
suffix:semicolon
r_return
id|buf
suffix:semicolon
)brace
multiline_comment|/*&n; * Format file mode into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtmode
id|xfs_fmtmode
c_func
(paren
r_int
id|m
)paren
(brace
r_static
r_char
id|rval
(braket
l_int|16
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;%c%c%c%c%c%c%c%c%c%c%c%c%c&quot;
comma
l_string|&quot;?fc?dxb?r?l?S?m?&quot;
(braket
(paren
id|m
op_amp
id|IFMT
)paren
op_rshift
l_int|12
)braket
comma
id|m
op_amp
id|ISUID
ques
c_cond
l_char|&squot;u&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
id|ISGID
ques
c_cond
l_char|&squot;g&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
id|ISVTX
ques
c_cond
l_char|&squot;v&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
id|IREAD
ques
c_cond
l_char|&squot;r&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
id|IWRITE
ques
c_cond
l_char|&squot;w&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
id|IEXEC
ques
c_cond
l_char|&squot;x&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IREAD
op_rshift
l_int|3
)paren
ques
c_cond
l_char|&squot;r&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IWRITE
op_rshift
l_int|3
)paren
ques
c_cond
l_char|&squot;w&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IEXEC
op_rshift
l_int|3
)paren
ques
c_cond
l_char|&squot;x&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IREAD
op_rshift
l_int|6
)paren
ques
c_cond
l_char|&squot;r&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IWRITE
op_rshift
l_int|6
)paren
ques
c_cond
l_char|&squot;w&squot;
suffix:colon
l_char|&squot;-&squot;
comma
id|m
op_amp
(paren
id|IEXEC
op_rshift
l_int|6
)paren
ques
c_cond
l_char|&squot;x&squot;
suffix:colon
l_char|&squot;-&squot;
)paren
suffix:semicolon
r_return
id|rval
suffix:semicolon
)brace
multiline_comment|/*&n; * Format a size into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtsize
id|xfs_fmtsize
c_func
(paren
r_int
id|i
)paren
(brace
r_static
r_char
id|rval
(braket
l_int|20
)braket
suffix:semicolon
multiline_comment|/* size_t is 32 bits in 32-bit kernel, 64 bits in 64-bit kernel */
id|sprintf
c_func
(paren
id|rval
comma
l_string|&quot;0x%lx&quot;
comma
(paren
r_int
r_int
)paren
id|i
)paren
suffix:semicolon
r_return
id|rval
suffix:semicolon
)brace
multiline_comment|/*&n; * Format a uuid into a static buffer &amp; return it.&n; */
r_static
r_char
op_star
DECL|function|xfs_fmtuuid
id|xfs_fmtuuid
c_func
(paren
id|uuid_t
op_star
id|uu
)paren
(brace
r_static
r_char
id|rval
(braket
l_int|40
)braket
suffix:semicolon
r_char
op_star
id|o
op_assign
id|rval
suffix:semicolon
r_char
op_star
id|i
op_assign
(paren
r_int
r_char
op_star
)paren
id|uu
suffix:semicolon
r_int
id|b
suffix:semicolon
r_for
c_loop
(paren
id|b
op_assign
l_int|0
suffix:semicolon
id|b
OL
l_int|16
suffix:semicolon
id|b
op_increment
)paren
(brace
id|o
op_add_assign
id|sprintf
c_func
(paren
id|o
comma
l_string|&quot;%02x&quot;
comma
op_star
id|i
op_increment
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b
op_eq
l_int|3
op_logical_or
id|b
op_eq
l_int|5
op_logical_or
id|b
op_eq
l_int|7
op_logical_or
id|b
op_eq
l_int|9
)paren
op_star
id|o
op_increment
op_assign
l_char|&squot;-&squot;
suffix:semicolon
)brace
op_star
id|o
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_return
id|rval
suffix:semicolon
)brace
multiline_comment|/*&n; * Print an inode log item.&n; */
r_static
r_void
DECL|function|xfs_inode_item_print
id|xfs_inode_item_print
c_func
(paren
id|xfs_inode_log_item_t
op_star
id|ilip
comma
r_int
id|summary
)paren
(brace
r_static
r_char
op_star
id|ili_flags
(braket
)braket
op_assign
(brace
l_string|&quot;hold&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;iolock excl&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;iolock shrd&quot;
comma
multiline_comment|/* 0x4 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|ilf_fields
(braket
)braket
op_assign
(brace
l_string|&quot;core&quot;
comma
multiline_comment|/* 0x001 */
l_string|&quot;ddata&quot;
comma
multiline_comment|/* 0x002 */
l_string|&quot;dexts&quot;
comma
multiline_comment|/* 0x004 */
l_string|&quot;dbroot&quot;
comma
multiline_comment|/* 0x008 */
l_string|&quot;dev&quot;
comma
multiline_comment|/* 0x010 */
l_string|&quot;uuid&quot;
comma
multiline_comment|/* 0x020 */
l_string|&quot;adata&quot;
comma
multiline_comment|/* 0x040 */
l_string|&quot;aext&quot;
comma
multiline_comment|/* 0x080 */
l_string|&quot;abroot&quot;
comma
multiline_comment|/* 0x100 */
l_int|0
)brace
suffix:semicolon
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;inode 0x%p logged %d &quot;
comma
id|ilip-&gt;ili_inode
comma
id|ilip-&gt;ili_logged
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_flags
comma
id|ili_flags
comma
l_string|&quot;flags:&quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_format.ilf_fields
comma
id|ilf_fields
comma
l_string|&quot;format:&quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_last_fields
comma
id|ilf_fields
comma
l_string|&quot;lastfield:&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;inode 0x%p ino 0x%llu logged %d flags: &quot;
comma
id|ilip-&gt;ili_inode
comma
(paren
r_int
r_int
r_int
)paren
id|ilip-&gt;ili_format.ilf_ino
comma
id|ilip-&gt;ili_logged
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_flags
comma
id|ili_flags
comma
l_int|NULL
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ilock recur %d iolock recur %d ext buf 0x%p&bslash;n&quot;
comma
id|ilip-&gt;ili_ilock_recur
comma
id|ilip-&gt;ili_iolock_recur
comma
id|ilip-&gt;ili_extents_buf
)paren
suffix:semicolon
macro_line|#ifdef XFS_TRANS_DEBUG
id|kdb_printf
c_func
(paren
l_string|&quot;root bytes %d root orig 0x%x&bslash;n&quot;
comma
id|ilip-&gt;ili_root_size
comma
id|ilip-&gt;ili_orig_root
)paren
suffix:semicolon
macro_line|#endif
id|kdb_printf
c_func
(paren
l_string|&quot;size %d fields: &quot;
comma
id|ilip-&gt;ili_format.ilf_size
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_format.ilf_fields
comma
id|ilf_fields
comma
l_string|&quot;formatfield&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; last fields: &quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|ilip-&gt;ili_last_fields
comma
id|ilf_fields
comma
l_string|&quot;lastfield&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; flush lsn %s last lsn %s&bslash;n&quot;
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
(paren
id|ilip-&gt;ili_flush_lsn
)paren
)paren
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
(paren
id|ilip-&gt;ili_last_lsn
)paren
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dsize %d, asize %d, rdev 0x%x&bslash;n&quot;
comma
id|ilip-&gt;ili_format.ilf_dsize
comma
id|ilip-&gt;ili_format.ilf_asize
comma
id|ilip-&gt;ili_format.ilf_u.ilfu_rdev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;blkno 0x%Lx len 0x%x boffset 0x%x&bslash;n&quot;
comma
id|ilip-&gt;ili_format.ilf_blkno
comma
id|ilip-&gt;ili_format.ilf_len
comma
id|ilip-&gt;ili_format.ilf_boffset
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a dquot log item.&n; */
multiline_comment|/* ARGSUSED */
r_static
r_void
DECL|function|xfs_dquot_item_print
id|xfs_dquot_item_print
c_func
(paren
id|xfs_dq_logitem_t
op_star
id|lip
comma
r_int
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;dquot 0x%p&bslash;n&quot;
comma
id|lip-&gt;qli_dquot
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a quotaoff log item.&n; */
multiline_comment|/* ARGSUSED */
r_static
r_void
DECL|function|xfs_qoff_item_print
id|xfs_qoff_item_print
c_func
(paren
id|xfs_qoff_logitem_t
op_star
id|lip
comma
r_int
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;start qoff item 0x%p flags 0x%x&bslash;n&quot;
comma
id|lip-&gt;qql_start_lip
comma
id|lip-&gt;qql_format.qf_flags
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print buffer full of inodes.&n; */
r_static
r_void
DECL|function|xfs_inodebuf
id|xfs_inodebuf
c_func
(paren
id|xfs_buf_t
op_star
id|bp
)paren
(brace
id|xfs_dinode_t
op_star
id|di
suffix:semicolon
r_int
id|n
comma
id|i
suffix:semicolon
id|n
op_assign
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
op_rshift
l_int|8
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|n
suffix:semicolon
id|i
op_increment
)paren
(brace
id|di
op_assign
(paren
id|xfs_dinode_t
op_star
)paren
id|xfs_buf_offset
c_func
(paren
id|bp
comma
id|i
op_star
l_int|256
)paren
suffix:semicolon
id|xfs_prdinode
c_func
(paren
id|di
comma
l_int|0
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print disk inode.&n; */
r_static
r_void
DECL|function|xfs_prdinode
id|xfs_prdinode
c_func
(paren
id|xfs_dinode_t
op_star
id|di
comma
r_int
id|coreonly
comma
r_int
id|convert
)paren
(brace
id|xfs_prdinode_core
c_func
(paren
op_amp
id|di-&gt;di_core
comma
id|convert
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|coreonly
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;next_unlinked 0x%x u@0x%p&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|di-&gt;di_next_unlinked
comma
id|convert
)paren
comma
op_amp
id|di-&gt;di_u
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print disk inode core.&n; */
r_static
r_void
DECL|function|xfs_prdinode_core
id|xfs_prdinode_core
c_func
(paren
id|xfs_dinode_core_t
op_star
id|dip
comma
r_int
id|convert
)paren
(brace
r_static
r_char
op_star
id|diflags
(braket
)braket
op_assign
(brace
l_string|&quot;realtime&quot;
comma
multiline_comment|/* XFS_DIFLAG_REALTIME */
l_string|&quot;prealloc&quot;
comma
multiline_comment|/* XFS_DIFLAG_PREALLOC */
l_int|NULL
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magic 0x%x mode 0%o (%s) version 0x%x format 0x%x (%s)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_magic
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_mode
comma
id|convert
)paren
comma
id|xfs_fmtmode
c_func
(paren
id|INT_GET
c_func
(paren
id|dip-&gt;di_mode
comma
id|convert
)paren
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_version
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_format
comma
id|convert
)paren
comma
id|xfs_fmtformat
c_func
(paren
(paren
id|xfs_dinode_fmt_t
)paren
id|INT_GET
c_func
(paren
id|dip-&gt;di_format
comma
id|convert
)paren
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nlink 0x%x uid 0x%x gid 0x%x projid 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_nlink
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_uid
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_gid
comma
id|convert
)paren
comma
(paren
id|uint
)paren
id|INT_GET
c_func
(paren
id|dip-&gt;di_projid
comma
id|convert
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;atime 0x%x:%x mtime 0x%x:%x ctime 0x%x:%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_atime.t_sec
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_atime.t_nsec
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_mtime.t_sec
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_mtime.t_nsec
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_ctime.t_sec
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_ctime.t_nsec
comma
id|convert
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;size 0x%Lx &quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_size
comma
id|convert
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nblocks %Ld extsize 0x%x nextents 0x%x anextents 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_nblocks
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_extsize
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_nextents
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_anextents
comma
id|convert
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;forkoff %d aformat 0x%x (%s) dmevmask 0x%x dmstate 0x%x &quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_forkoff
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_aformat
comma
id|convert
)paren
comma
id|xfs_fmtformat
c_func
(paren
(paren
id|xfs_dinode_fmt_t
)paren
id|INT_GET
c_func
(paren
id|dip-&gt;di_aformat
comma
id|convert
)paren
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_dmevmask
comma
id|convert
)paren
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_dmstate
comma
id|convert
)paren
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|INT_GET
c_func
(paren
id|dip-&gt;di_flags
comma
id|convert
)paren
comma
id|diflags
comma
l_string|&quot;flags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;gen 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dip-&gt;di_gen
comma
id|convert
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print xfs extent list for a fork.&n; */
r_static
r_void
DECL|function|xfs_xexlist_fork
id|xfs_xexlist_fork
c_func
(paren
id|xfs_inode_t
op_star
id|ip
comma
r_int
id|whichfork
)paren
(brace
r_int
id|nextents
comma
id|i
suffix:semicolon
id|xfs_ifork_t
op_star
id|ifp
suffix:semicolon
id|xfs_bmbt_irec_t
id|irec
suffix:semicolon
id|ifp
op_assign
id|XFS_IFORK_PTR
c_func
(paren
id|ip
comma
id|whichfork
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ifp-&gt;if_flags
op_amp
id|XFS_IFEXTENTS
)paren
(brace
id|nextents
op_assign
id|ifp-&gt;if_bytes
op_div
r_sizeof
(paren
id|xfs_bmbt_rec_64_t
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inode 0x%p %cf extents 0x%p nextents 0x%x&bslash;n&quot;
comma
id|ip
comma
l_string|&quot;da&quot;
(braket
id|whichfork
)braket
comma
id|ifp-&gt;if_u1.if_extents
comma
id|nextents
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|nextents
suffix:semicolon
id|i
op_increment
)paren
(brace
id|xfs_bmbt_get_all
c_func
(paren
op_amp
id|ifp-&gt;if_u1.if_extents
(braket
id|i
)braket
comma
op_amp
id|irec
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;%d: startoff %Ld startblock %s blockcount %Ld flag %d&bslash;n&quot;
comma
id|i
comma
id|irec.br_startoff
comma
id|xfs_fmtfsblock
c_func
(paren
id|irec.br_startblock
comma
id|ip-&gt;i_mount
)paren
comma
id|irec.br_blockcount
comma
id|irec.br_state
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|xfs_xnode_fork
id|xfs_xnode_fork
c_func
(paren
r_char
op_star
id|name
comma
id|xfs_ifork_t
op_star
id|f
)paren
(brace
r_static
r_char
op_star
id|tab_flags
(braket
)braket
op_assign
(brace
l_string|&quot;inline&quot;
comma
multiline_comment|/* XFS_IFINLINE */
l_string|&quot;extents&quot;
comma
multiline_comment|/* XFS_IFEXTENTS */
l_string|&quot;broot&quot;
comma
multiline_comment|/* XFS_IFBROOT */
l_int|NULL
)brace
suffix:semicolon
r_int
op_star
id|p
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;%s fork&quot;
comma
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|f
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot; empty&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; bytes %s &quot;
comma
id|xfs_fmtsize
c_func
(paren
id|f-&gt;if_bytes
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;real_bytes %s lastex 0x%x u1:%s 0x%p&bslash;n&quot;
comma
id|xfs_fmtsize
c_func
(paren
id|f-&gt;if_real_bytes
)paren
comma
id|f-&gt;if_lastex
comma
id|f-&gt;if_flags
op_amp
id|XFS_IFINLINE
ques
c_cond
l_string|&quot;data&quot;
suffix:colon
l_string|&quot;extents&quot;
comma
id|f-&gt;if_flags
op_amp
id|XFS_IFINLINE
ques
c_cond
id|f-&gt;if_u1.if_data
suffix:colon
(paren
r_char
op_star
)paren
id|f-&gt;if_u1.if_extents
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; broot 0x%p broot_bytes %s ext_max %d &quot;
comma
id|f-&gt;if_broot
comma
id|xfs_fmtsize
c_func
(paren
id|f-&gt;if_broot_bytes
)paren
comma
id|f-&gt;if_ext_max
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|f-&gt;if_flags
comma
id|tab_flags
comma
l_string|&quot;flags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; u2&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
(paren
r_int
op_star
)paren
op_amp
id|f-&gt;if_u2
suffix:semicolon
id|p
OL
(paren
r_int
op_star
)paren
(paren
(paren
r_char
op_star
)paren
op_amp
id|f-&gt;if_u2
op_plus
id|XFS_INLINE_DATA
)paren
suffix:semicolon
id|p
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot; 0x%x&quot;
comma
op_star
id|p
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Command-level xfs-idbg functions.&n; */
multiline_comment|/*&n; * Print xfs allocation group freespace header.&n; */
r_static
r_void
DECL|function|xfsidbg_xagf
id|xfsidbg_xagf
c_func
(paren
id|xfs_agf_t
op_star
id|agf
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;magicnum 0x%x versionnum 0x%x seqno 0x%x length 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_magicnum
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_versionnum
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_seqno
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_length
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;roots b 0x%x c 0x%x levels b %d c %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_roots
(braket
id|XFS_BTNUM_BNO
)braket
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_roots
(braket
id|XFS_BTNUM_CNT
)braket
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_levels
(braket
id|XFS_BTNUM_BNO
)braket
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_levels
(braket
id|XFS_BTNUM_CNT
)braket
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;flfirst %d fllast %d flcount %d freeblks %d longest %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_flfirst
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_fllast
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_flcount
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_freeblks
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_longest
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print xfs allocation group inode header.&n; */
r_static
r_void
DECL|function|xfsidbg_xagi
id|xfsidbg_xagi
c_func
(paren
id|xfs_agi_t
op_star
id|agi
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|j
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magicnum 0x%x versionnum 0x%x seqno 0x%x length 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_magicnum
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_versionnum
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_seqno
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_length
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;count 0x%x root 0x%x level 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_count
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_root
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_level
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;freecount 0x%x newino 0x%x dirino 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_freecount
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_newino
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_dirino
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;unlinked buckets&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|XFS_AGI_UNLINKED_BUCKETS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|4
suffix:semicolon
id|j
op_increment
comma
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%08x &quot;
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_unlinked
(braket
id|i
)braket
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print an allocation argument structure for XFS.&n; */
r_static
r_void
DECL|function|xfsidbg_xalloc
id|xfsidbg_xalloc
c_func
(paren
id|xfs_alloc_arg_t
op_star
id|args
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;tp 0x%p mp 0x%p agbp 0x%p pag 0x%p fsbno %s&bslash;n&quot;
comma
id|args-&gt;tp
comma
id|args-&gt;mp
comma
id|args-&gt;agbp
comma
id|args-&gt;pag
comma
id|xfs_fmtfsblock
c_func
(paren
id|args-&gt;fsbno
comma
id|args-&gt;mp
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;agno 0x%x agbno 0x%x minlen 0x%x maxlen 0x%x mod 0x%x&bslash;n&quot;
comma
id|args-&gt;agno
comma
id|args-&gt;agbno
comma
id|args-&gt;minlen
comma
id|args-&gt;maxlen
comma
id|args-&gt;mod
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;prod 0x%x minleft 0x%x total 0x%x alignment 0x%x&bslash;n&quot;
comma
id|args-&gt;prod
comma
id|args-&gt;minleft
comma
id|args-&gt;total
comma
id|args-&gt;alignment
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;minalignslop 0x%x len 0x%x type %s otype %s wasdel %d&bslash;n&quot;
comma
id|args-&gt;minalignslop
comma
id|args-&gt;len
comma
id|xfs_alloctype
(braket
id|args-&gt;type
)braket
comma
id|xfs_alloctype
(braket
id|args-&gt;otype
)braket
comma
id|args-&gt;wasdel
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;wasfromfl %d isfl %d userdata %d&bslash;n&quot;
comma
id|args-&gt;wasfromfl
comma
id|args-&gt;isfl
comma
id|args-&gt;userdata
)paren
suffix:semicolon
)brace
macro_line|#ifdef DEBUG
multiline_comment|/*&n; * Print out all the entries in the alloc trace buf corresponding&n; * to the given mount point.&n; */
r_static
r_void
DECL|function|xfsidbg_xalmtrace
id|xfsidbg_xalmtrace
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|ktrace_entry_t
op_star
id|ktep
suffix:semicolon
id|ktrace_snap_t
id|kts
suffix:semicolon
r_extern
id|ktrace_t
op_star
id|xfs_alloc_trace_buf
suffix:semicolon
r_if
c_cond
(paren
id|xfs_alloc_trace_buf
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;The xfs alloc trace buffer is not initialized&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|ktep
op_assign
id|ktrace_first
c_func
(paren
id|xfs_alloc_trace_buf
comma
op_amp
id|kts
)paren
suffix:semicolon
r_while
c_loop
(paren
id|ktep
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|__psint_t
)paren
id|ktep-&gt;val
(braket
l_int|0
)braket
op_logical_and
(paren
id|xfs_mount_t
op_star
)paren
id|ktep-&gt;val
(braket
l_int|3
)braket
op_eq
id|mp
)paren
(brace
(paren
r_void
)paren
id|xfs_alloc_trace_entry
c_func
(paren
id|ktep
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|ktep
op_assign
id|ktrace_next
c_func
(paren
id|xfs_alloc_trace_buf
comma
op_amp
id|kts
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif /* DEBUG */
multiline_comment|/*&n; * Print an attr_list() context structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xattrcontext
id|xfsidbg_xattrcontext
c_func
(paren
id|xfs_attr_list_context_t
op_star
id|context
)paren
(brace
r_static
r_char
op_star
id|attr_arg_flags
(braket
)braket
op_assign
(brace
l_string|&quot;DONTFOLLOW&quot;
comma
multiline_comment|/* 0x0001 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0002 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0004 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0008 */
l_string|&quot;CREATE&quot;
comma
multiline_comment|/* 0x0010 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0020 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0040 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0080 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0100 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0200 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0400 */
l_string|&quot;?&quot;
comma
multiline_comment|/* 0x0800 */
l_string|&quot;KERNOTIME&quot;
comma
multiline_comment|/* 0x1000 */
l_int|NULL
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dp 0x%p, dupcnt %d, resynch %d&quot;
comma
id|context-&gt;dp
comma
id|context-&gt;dupcnt
comma
id|context-&gt;resynch
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|__psunsigned_t
)paren
id|context-&gt;flags
comma
id|attr_arg_flags
comma
l_string|&quot;, flags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;ncursor h/b/o 0x%x/0x%x/%d -- p/p/i 0x%x/0x%x/0x%x&bslash;n&quot;
comma
id|context-&gt;cursor-&gt;hashval
comma
id|context-&gt;cursor-&gt;blkno
comma
id|context-&gt;cursor-&gt;offset
comma
id|context-&gt;cursor-&gt;pad1
comma
id|context-&gt;cursor-&gt;pad2
comma
id|context-&gt;cursor-&gt;initted
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;alist 0x%p, bufsize 0x%x, count %d, firstu 0x%x&bslash;n&quot;
comma
id|context-&gt;alist
comma
id|context-&gt;bufsize
comma
id|context-&gt;count
comma
id|context-&gt;firstu
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print attribute leaf block.&n; */
r_static
r_void
DECL|function|xfsidbg_xattrleaf
id|xfsidbg_xattrleaf
c_func
(paren
id|xfs_attr_leafblock_t
op_star
id|leaf
)paren
(brace
id|xfs_attr_leaf_hdr_t
op_star
id|h
suffix:semicolon
id|xfs_da_blkinfo_t
op_star
id|i
suffix:semicolon
id|xfs_attr_leaf_map_t
op_star
id|m
suffix:semicolon
id|xfs_attr_leaf_entry_t
op_star
id|e
suffix:semicolon
id|xfs_attr_leaf_name_local_t
op_star
id|l
suffix:semicolon
id|xfs_attr_leaf_name_remote_t
op_star
id|r
suffix:semicolon
r_int
id|j
comma
id|k
suffix:semicolon
id|h
op_assign
op_amp
id|leaf-&gt;hdr
suffix:semicolon
id|i
op_assign
op_amp
id|h-&gt;info
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr info forw 0x%x back 0x%x magic 0x%x&bslash;n&quot;
comma
id|i-&gt;forw
comma
id|i-&gt;back
comma
id|i-&gt;magic
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d usedbytes %d firstused %d holes %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;usedbytes
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;firstused
comma
id|ARCH_CONVERT
)paren
comma
id|h-&gt;holes
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|m
op_assign
id|h-&gt;freemap
suffix:semicolon
id|j
OL
id|XFS_ATTR_LEAF_MAPSIZE
suffix:semicolon
id|j
op_increment
comma
id|m
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;hdr freemap %d base %d size %d&bslash;n&quot;
comma
id|j
comma
id|INT_GET
c_func
(paren
id|m-&gt;base
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|m-&gt;size
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|e
op_assign
id|leaf-&gt;entries
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|e
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;[%2d] hash 0x%x nameidx %d flags 0x%x&quot;
comma
id|j
comma
id|INT_GET
c_func
(paren
id|e-&gt;hashval
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|e-&gt;nameidx
comma
id|ARCH_CONVERT
)paren
comma
id|e-&gt;flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;flags
op_amp
id|XFS_ATTR_LOCAL
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;LOCAL &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;flags
op_amp
id|XFS_ATTR_ROOT
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;ROOT &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;flags
op_amp
id|XFS_ATTR_INCOMPLETE
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;INCOMPLETE &quot;
)paren
suffix:semicolon
id|k
op_assign
op_complement
(paren
id|XFS_ATTR_LOCAL
op_or
id|XFS_ATTR_ROOT
op_or
id|XFS_ATTR_INCOMPLETE
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|e-&gt;flags
op_amp
id|k
)paren
op_ne
l_int|0
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;0x%x&quot;
comma
id|e-&gt;flags
op_amp
id|k
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&gt;&bslash;n     name &bslash;&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;flags
op_amp
id|XFS_ATTR_LOCAL
)paren
(brace
id|l
op_assign
id|XFS_ATTR_LEAF_NAME_LOCAL
c_func
(paren
id|leaf
comma
id|j
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
id|l-&gt;namelen
suffix:semicolon
id|k
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|l-&gt;nameval
(braket
id|k
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;(%d) value &bslash;&quot;&quot;
comma
id|l-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
(paren
id|k
OL
id|INT_GET
c_func
(paren
id|l-&gt;valuelen
comma
id|ARCH_CONVERT
)paren
)paren
op_logical_and
(paren
id|k
OL
l_int|32
)paren
suffix:semicolon
id|k
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|l-&gt;nameval
(braket
id|l-&gt;namelen
op_plus
id|k
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|k
op_eq
l_int|32
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;...&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;(%d)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|l-&gt;valuelen
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|r
op_assign
id|XFS_ATTR_LEAF_NAME_REMOTE
c_func
(paren
id|leaf
comma
id|j
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
id|r-&gt;namelen
suffix:semicolon
id|k
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|r-&gt;name
(braket
id|k
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;(%d) value blk 0x%x len %d&bslash;n&quot;
comma
id|r-&gt;namelen
comma
id|INT_GET
c_func
(paren
id|r-&gt;valueblk
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|r-&gt;valuelen
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print a shortform attribute list.&n; */
r_static
r_void
DECL|function|xfsidbg_xattrsf
id|xfsidbg_xattrsf
c_func
(paren
id|xfs_attr_shortform_t
op_star
id|s
)paren
(brace
id|xfs_attr_sf_hdr_t
op_star
id|sfh
suffix:semicolon
id|xfs_attr_sf_entry_t
op_star
id|sfe
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|sfh
op_assign
op_amp
id|s-&gt;hdr
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sfh-&gt;count
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|sfe
op_assign
id|s-&gt;list
suffix:semicolon
id|i
OL
id|INT_GET
c_func
(paren
id|sfh-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;entry %d namelen %d name &bslash;&quot;&quot;
comma
id|i
comma
id|sfe-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|sfe-&gt;namelen
suffix:semicolon
id|j
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|sfe-&gt;nameval
(braket
id|j
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot; valuelen %d value &bslash;&quot;&quot;
comma
id|INT_GET
c_func
(paren
id|sfe-&gt;valuelen
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
(paren
id|j
OL
id|INT_GET
c_func
(paren
id|sfe-&gt;valuelen
comma
id|ARCH_CONVERT
)paren
)paren
op_logical_and
(paren
id|j
OL
l_int|32
)paren
suffix:semicolon
id|j
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|sfe-&gt;nameval
(braket
id|sfe-&gt;namelen
op_plus
id|j
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|j
op_eq
l_int|32
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;...&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|sfe
op_assign
id|XFS_ATTR_SF_NEXTENTRY
c_func
(paren
id|sfe
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print xfs bmap internal record&n; */
r_static
r_void
DECL|function|xfsidbg_xbirec
id|xfsidbg_xbirec
c_func
(paren
id|xfs_bmbt_irec_t
op_star
id|r
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;startoff %Ld startblock %Lx blockcount %Ld state %Ld&bslash;n&quot;
comma
(paren
id|__uint64_t
)paren
id|r-&gt;br_startoff
comma
(paren
id|__uint64_t
)paren
id|r-&gt;br_startblock
comma
(paren
id|__uint64_t
)paren
id|r-&gt;br_blockcount
comma
(paren
id|__uint64_t
)paren
id|r-&gt;br_state
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a bmap alloc argument structure for XFS.&n; */
r_static
r_void
DECL|function|xfsidbg_xbmalla
id|xfsidbg_xbmalla
c_func
(paren
id|xfs_bmalloca_t
op_star
id|a
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;tp 0x%p ip 0x%p eof %d prevp 0x%p&bslash;n&quot;
comma
id|a-&gt;tp
comma
id|a-&gt;ip
comma
id|a-&gt;eof
comma
id|a-&gt;prevp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;gotp 0x%p firstblock %s alen %d total %d&bslash;n&quot;
comma
id|a-&gt;gotp
comma
id|xfs_fmtfsblock
c_func
(paren
id|a-&gt;firstblock
comma
id|a-&gt;ip-&gt;i_mount
)paren
comma
id|a-&gt;alen
comma
id|a-&gt;total
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;off %s wasdel %d userdata %d minlen %d&bslash;n&quot;
comma
id|xfs_fmtfsblock
c_func
(paren
id|a-&gt;off
comma
id|a-&gt;ip-&gt;i_mount
)paren
comma
id|a-&gt;wasdel
comma
id|a-&gt;userdata
comma
id|a-&gt;minlen
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;minleft %d low %d rval %s aeof %d&bslash;n&quot;
comma
id|a-&gt;minleft
comma
id|a-&gt;low
comma
id|xfs_fmtfsblock
c_func
(paren
id|a-&gt;rval
comma
id|a-&gt;ip-&gt;i_mount
)paren
comma
id|a-&gt;aeof
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print xfs bmap record&n; */
r_static
r_void
DECL|function|xfsidbg_xbrec
id|xfsidbg_xbrec
c_func
(paren
id|xfs_bmbt_rec_64_t
op_star
id|r
)paren
(brace
id|xfs_bmbt_irec_t
id|irec
suffix:semicolon
id|xfs_bmbt_get_all
c_func
(paren
(paren
id|xfs_bmbt_rec_t
op_star
)paren
id|r
comma
op_amp
id|irec
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;startoff %Ld startblock %Lx blockcount %Ld flag %d&bslash;n&quot;
comma
id|irec.br_startoff
comma
(paren
id|__uint64_t
)paren
id|irec.br_startblock
comma
id|irec.br_blockcount
comma
id|irec.br_state
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print an xfs in-inode bmap btree root (data fork).&n; */
r_static
r_void
DECL|function|xfsidbg_xbroot
id|xfsidbg_xbroot
c_func
(paren
id|xfs_inode_t
op_star
id|ip
)paren
(brace
id|xfs_broot
c_func
(paren
id|ip
comma
op_amp
id|ip-&gt;i_df
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print an xfs in-inode bmap btree root (attribute fork).&n; */
r_static
r_void
DECL|function|xfsidbg_xbroota
id|xfsidbg_xbroota
c_func
(paren
id|xfs_inode_t
op_star
id|ip
)paren
(brace
r_if
c_cond
(paren
id|ip-&gt;i_afp
)paren
id|xfs_broot
c_func
(paren
id|ip
comma
id|ip-&gt;i_afp
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print xfs btree cursor.&n; */
r_static
r_void
DECL|function|xfsidbg_xbtcur
id|xfsidbg_xbtcur
c_func
(paren
id|xfs_btree_cur_t
op_star
id|c
)paren
(brace
r_int
id|l
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;tp 0x%p mp 0x%p&bslash;n&quot;
comma
id|c-&gt;bc_tp
comma
id|c-&gt;bc_mp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_BMAP
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;rec.b &quot;
)paren
suffix:semicolon
id|xfsidbg_xbirec
c_func
(paren
op_amp
id|c-&gt;bc_rec.b
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_INO
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;rec.i startino 0x%x freecount 0x%x free %Lx&bslash;n&quot;
comma
id|c-&gt;bc_rec.i.ir_startino
comma
id|c-&gt;bc_rec.i.ir_freecount
comma
id|c-&gt;bc_rec.i.ir_free
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;rec.a startblock 0x%x blockcount 0x%x&bslash;n&quot;
comma
id|c-&gt;bc_rec.a.ar_startblock
comma
id|c-&gt;bc_rec.a.ar_blockcount
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;bufs&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|l
op_assign
l_int|0
suffix:semicolon
id|l
OL
id|c-&gt;bc_nlevels
suffix:semicolon
id|l
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot; 0x%p&quot;
comma
id|c-&gt;bc_bufs
(braket
id|l
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ptrs&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|l
op_assign
l_int|0
suffix:semicolon
id|l
OL
id|c-&gt;bc_nlevels
suffix:semicolon
id|l
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot; 0x%x&quot;
comma
id|c-&gt;bc_ptrs
(braket
id|l
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  ra&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|l
op_assign
l_int|0
suffix:semicolon
id|l
OL
id|c-&gt;bc_nlevels
suffix:semicolon
id|l
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot; %d&quot;
comma
id|c-&gt;bc_ra
(braket
id|l
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nlevels %d btnum %s blocklog %d&bslash;n&quot;
comma
id|c-&gt;bc_nlevels
comma
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_BNO
ques
c_cond
l_string|&quot;bno&quot;
suffix:colon
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_CNT
ques
c_cond
l_string|&quot;cnt&quot;
suffix:colon
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_BMAP
ques
c_cond
l_string|&quot;bmap&quot;
suffix:colon
l_string|&quot;ino&quot;
)paren
)paren
comma
id|c-&gt;bc_blocklog
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_BMAP
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;private forksize 0x%x whichfork %d ip 0x%p flags %d&bslash;n&quot;
comma
id|c-&gt;bc_private.b.forksize
comma
id|c-&gt;bc_private.b.whichfork
comma
id|c-&gt;bc_private.b.ip
comma
id|c-&gt;bc_private.b.flags
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;private firstblock %s flist 0x%p allocated 0x%x&bslash;n&quot;
comma
id|xfs_fmtfsblock
c_func
(paren
id|c-&gt;bc_private.b.firstblock
comma
id|c-&gt;bc_mp
)paren
comma
id|c-&gt;bc_private.b.flist
comma
id|c-&gt;bc_private.b.allocated
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|c-&gt;bc_btnum
op_eq
id|XFS_BTNUM_INO
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;private agbp 0x%p agno 0x%x&bslash;n&quot;
comma
id|c-&gt;bc_private.i.agbp
comma
id|c-&gt;bc_private.i.agno
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;private agbp 0x%p agno 0x%x&bslash;n&quot;
comma
id|c-&gt;bc_private.a.agbp
comma
id|c-&gt;bc_private.a.agno
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Figure out what kind of xfs block the buffer contains,&n; * and invoke a print routine.&n; */
r_static
r_void
DECL|function|xfsidbg_xbuf
id|xfsidbg_xbuf
c_func
(paren
id|xfs_buf_t
op_star
id|bp
)paren
(brace
id|xfsidbg_xbuf_real
c_func
(paren
id|bp
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Figure out what kind of xfs block the buffer contains,&n; * and invoke a print routine (if asked to).&n; */
r_static
r_void
DECL|function|xfsidbg_xbuf_real
id|xfsidbg_xbuf_real
c_func
(paren
id|xfs_buf_t
op_star
id|bp
comma
r_int
id|summary
)paren
(brace
r_void
op_star
id|d
suffix:semicolon
id|xfs_agf_t
op_star
id|agf
suffix:semicolon
id|xfs_agi_t
op_star
id|agi
suffix:semicolon
id|xfs_sb_t
op_star
id|sb
suffix:semicolon
id|xfs_alloc_block_t
op_star
id|bta
suffix:semicolon
id|xfs_bmbt_block_t
op_star
id|btb
suffix:semicolon
id|xfs_inobt_block_t
op_star
id|bti
suffix:semicolon
id|xfs_attr_leafblock_t
op_star
id|aleaf
suffix:semicolon
id|xfs_dir_leafblock_t
op_star
id|dleaf
suffix:semicolon
id|xfs_da_intnode_t
op_star
id|node
suffix:semicolon
id|xfs_dinode_t
op_star
id|di
suffix:semicolon
id|xfs_disk_dquot_t
op_star
id|dqb
suffix:semicolon
id|xfs_dir2_block_t
op_star
id|d2block
suffix:semicolon
id|xfs_dir2_data_t
op_star
id|d2data
suffix:semicolon
id|xfs_dir2_leaf_t
op_star
id|d2leaf
suffix:semicolon
id|xfs_dir2_free_t
op_star
id|d2free
suffix:semicolon
id|d
op_assign
id|XFS_BUF_PTR
c_func
(paren
id|bp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|agf
op_assign
id|d
)paren
op_member_access_from_pointer
id|agf_magicnum
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_AGF_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;freespace hdr for AG %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agf-&gt;agf_seqno
comma
id|ARCH_CONVERT
)paren
comma
id|agf
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p agf 0x%p&bslash;n&quot;
comma
id|bp
comma
id|agf
)paren
suffix:semicolon
id|xfsidbg_xagf
c_func
(paren
id|agf
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|agi
op_assign
id|d
)paren
op_member_access_from_pointer
id|agi_magicnum
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_AGI_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Inode hdr for AG %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|agi-&gt;agi_seqno
comma
id|ARCH_CONVERT
)paren
comma
id|agi
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p agi 0x%p&bslash;n&quot;
comma
id|bp
comma
id|agi
)paren
suffix:semicolon
id|xfsidbg_xagi
c_func
(paren
id|agi
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|bta
op_assign
id|d
)paren
op_member_access_from_pointer
id|bb_magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_ABTB_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Alloc BNO Btree blk, level %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bta-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|bta
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p abtbno 0x%p&bslash;n&quot;
comma
id|bp
comma
id|bta
)paren
suffix:semicolon
id|xfs_btalloc
c_func
(paren
id|bta
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|bta
op_assign
id|d
)paren
op_member_access_from_pointer
id|bb_magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_ABTC_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Alloc COUNT Btree blk, level %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bta-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|bta
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p abtcnt 0x%p&bslash;n&quot;
comma
id|bp
comma
id|bta
)paren
suffix:semicolon
id|xfs_btalloc
c_func
(paren
id|bta
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|btb
op_assign
id|d
)paren
op_member_access_from_pointer
id|bb_magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_BMAP_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Bmap Btree blk, level %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|btb-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|btb
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p bmapbt 0x%p&bslash;n&quot;
comma
id|bp
comma
id|btb
)paren
suffix:semicolon
id|xfs_btbmap
c_func
(paren
id|btb
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|bti
op_assign
id|d
)paren
op_member_access_from_pointer
id|bb_magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_IBT_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Inode Btree blk, level %d (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|bti-&gt;bb_level
comma
id|ARCH_CONVERT
)paren
comma
id|bti
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p inobt 0x%p&bslash;n&quot;
comma
id|bp
comma
id|bti
)paren
suffix:semicolon
id|xfs_btino
c_func
(paren
id|bti
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|aleaf
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.info.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_ATTR_LEAF_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Attr Leaf, 1st hash 0x%x (at 0x%p)&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|aleaf-&gt;entries
(braket
l_int|0
)braket
dot
id|hashval
comma
id|ARCH_CONVERT
)paren
comma
id|aleaf
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p attr leaf 0x%p&bslash;n&quot;
comma
id|bp
comma
id|aleaf
)paren
suffix:semicolon
id|xfsidbg_xattrleaf
c_func
(paren
id|aleaf
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|dleaf
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.info.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR_LEAF_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir Leaf, 1st hash 0x%x (at 0x%p)&bslash;n&quot;
comma
id|dleaf-&gt;entries
(braket
l_int|0
)braket
dot
id|hashval
comma
id|dleaf
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir leaf 0x%p&bslash;n&quot;
comma
id|bp
comma
id|dleaf
)paren
suffix:semicolon
id|xfsidbg_xdirleaf
c_func
(paren
id|dleaf
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|node
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.info.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DA_NODE_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir/Attr Node, level %d, 1st hash 0x%x (at 0x%p)&bslash;n&quot;
comma
id|node-&gt;hdr.level
comma
id|node-&gt;btree
(braket
l_int|0
)braket
dot
id|hashval
comma
id|node
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir/attr node 0x%p&bslash;n&quot;
comma
id|bp
comma
id|node
)paren
suffix:semicolon
id|xfsidbg_xdanode
c_func
(paren
id|node
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|di
op_assign
id|d
)paren
op_member_access_from_pointer
id|di_core.di_magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DINODE_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Disk Inode (at 0x%p)&bslash;n&quot;
comma
id|di
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dinode 0x%p&bslash;n&quot;
comma
id|bp
comma
id|di
)paren
suffix:semicolon
id|xfs_inodebuf
c_func
(paren
id|bp
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|sb
op_assign
id|d
)paren
op_member_access_from_pointer
id|sb_magicnum
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_SB_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Superblock (at 0x%p)&bslash;n&quot;
comma
id|sb
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p sb 0x%p&bslash;n&quot;
comma
id|bp
comma
id|sb
)paren
suffix:semicolon
multiline_comment|/* SB in a buffer - we need to convert */
id|xfsidbg_xsb
c_func
(paren
id|sb
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|dqb
op_assign
id|d
)paren
op_member_access_from_pointer
id|d_magic
op_eq
id|XFS_DQUOT_MAGIC
)paren
(brace
DECL|macro|XFSIDBG_DQTYPESTR
mdefine_line|#define XFSIDBG_DQTYPESTR(d)     &bslash;&n;&t;((INT_GET((d)-&gt;d_flags, ARCH_CONVERT) &amp; XFS_DQ_USER) ? &quot;USR&quot; : &bslash;&n;&t;((INT_GET((d)-&gt;d_flags, ARCH_CONVERT) &amp; XFS_DQ_GROUP) ? &quot;GRP&quot; : &quot;???&quot;))
id|kdb_printf
c_func
(paren
l_string|&quot;Quota blk starting ID [%d], type %s at 0x%p&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|dqb-&gt;d_id
comma
id|ARCH_CONVERT
)paren
comma
id|XFSIDBG_DQTYPESTR
c_func
(paren
id|dqb
)paren
comma
id|dqb
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|d2block
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_BLOCK_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir2 block (at 0x%p)&bslash;n&quot;
comma
id|d2block
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir2 block 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d2block
)paren
suffix:semicolon
id|xfs_dir2data
c_func
(paren
(paren
r_void
op_star
)paren
id|d2block
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|d2data
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_DATA_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir2 data (at 0x%p)&bslash;n&quot;
comma
id|d2data
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir2 data 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d2data
)paren
suffix:semicolon
id|xfs_dir2data
c_func
(paren
(paren
r_void
op_star
)paren
id|d2data
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|d2leaf
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.info.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_LEAF1_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir2 leaf(1) (at 0x%p)&bslash;n&quot;
comma
id|d2leaf
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir2 leaf 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d2leaf
)paren
suffix:semicolon
id|xfs_dir2leaf
c_func
(paren
id|d2leaf
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
id|d2leaf-&gt;hdr.info.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_LEAFN_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir2 leaf(n) (at 0x%p)&bslash;n&quot;
comma
id|d2leaf
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir2 leaf 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d2leaf
)paren
suffix:semicolon
id|xfs_dir2leaf
c_func
(paren
id|d2leaf
comma
id|XFS_BUF_COUNT
c_func
(paren
id|bp
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
(paren
id|d2free
op_assign
id|d
)paren
op_member_access_from_pointer
id|hdr.magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_FREE_MAGIC
)paren
(brace
r_if
c_cond
(paren
id|summary
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Dir2 free (at 0x%p)&bslash;n&quot;
comma
id|d2free
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p dir2 free 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d2free
)paren
suffix:semicolon
id|xfsidbg_xdir2free
c_func
(paren
id|d2free
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;buf 0x%p unknown 0x%p&bslash;n&quot;
comma
id|bp
comma
id|d
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print an xfs_da_args structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xdaargs
id|xfsidbg_xdaargs
c_func
(paren
id|xfs_da_args_t
op_star
id|n
)paren
(brace
r_char
op_star
id|ch
suffix:semicolon
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; name &bslash;&quot;&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|n-&gt;namelen
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|n-&gt;name
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;(%d) value &quot;
comma
id|n-&gt;namelen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n-&gt;value
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;&quot;
)paren
suffix:semicolon
id|ch
op_assign
id|n-&gt;value
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
(paren
id|i
OL
id|n-&gt;valuelen
)paren
op_logical_and
(paren
id|i
OL
l_int|32
)paren
suffix:semicolon
id|ch
op_increment
comma
id|i
op_increment
)paren
(brace
r_switch
c_cond
(paren
op_star
id|ch
)paren
(brace
r_case
l_char|&squot;&bslash;n&squot;
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;&bslash;b&squot;
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;b&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;&bslash;t&squot;
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;t&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
op_star
id|ch
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|i
op_eq
l_int|32
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;...&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;(%d)&bslash;n&quot;
comma
id|n-&gt;valuelen
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;(NULL)(%d)&bslash;n&quot;
comma
id|n-&gt;valuelen
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot; hashval 0x%x whichfork %d flags &lt;&quot;
comma
(paren
id|uint_t
)paren
id|n-&gt;hashval
comma
id|n-&gt;whichfork
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n-&gt;flags
op_amp
id|ATTR_ROOT
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;ROOT &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n-&gt;flags
op_amp
id|ATTR_CREATE
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;CREATE &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n-&gt;flags
op_amp
id|ATTR_REPLACE
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;REPLACE &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n-&gt;flags
op_amp
id|XFS_ATTR_INCOMPLETE
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;INCOMPLETE &quot;
)paren
suffix:semicolon
id|i
op_assign
op_complement
(paren
id|ATTR_ROOT
op_or
id|ATTR_CREATE
op_or
id|ATTR_REPLACE
op_or
id|XFS_ATTR_INCOMPLETE
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|n-&gt;flags
op_amp
id|i
)paren
op_ne
l_int|0
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;0x%x&quot;
comma
id|n-&gt;flags
op_amp
id|i
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&gt;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; rename %d justcheck %d addname %d oknoent %d&bslash;n&quot;
comma
id|n-&gt;rename
comma
id|n-&gt;justcheck
comma
id|n-&gt;addname
comma
id|n-&gt;oknoent
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; leaf: blkno %d index %d rmtblkno %d rmtblkcnt %d&bslash;n&quot;
comma
id|n-&gt;blkno
comma
id|n-&gt;index
comma
id|n-&gt;rmtblkno
comma
id|n-&gt;rmtblkcnt
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; leaf2: blkno %d index %d rmtblkno %d rmtblkcnt %d&bslash;n&quot;
comma
id|n-&gt;blkno2
comma
id|n-&gt;index2
comma
id|n-&gt;rmtblkno2
comma
id|n-&gt;rmtblkcnt2
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; inumber %llu dp 0x%p firstblock 0x%p flist 0x%p&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|n-&gt;inumber
comma
id|n-&gt;dp
comma
id|n-&gt;firstblock
comma
id|n-&gt;flist
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; trans 0x%p total %d&bslash;n&quot;
comma
id|n-&gt;trans
comma
id|n-&gt;total
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a da buffer structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xdabuf
id|xfsidbg_xdabuf
c_func
(paren
id|xfs_dabuf_t
op_star
id|dabuf
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nbuf %d dirty %d bbcount %d data 0x%p bps&quot;
comma
id|dabuf-&gt;nbuf
comma
id|dabuf-&gt;dirty
comma
id|dabuf-&gt;bbcount
comma
id|dabuf-&gt;data
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dabuf-&gt;nbuf
suffix:semicolon
id|i
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot; %d:0x%p&quot;
comma
id|i
comma
id|dabuf-&gt;bps
(braket
id|i
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef XFS_DABUF_DEBUG
id|kdb_printf
c_func
(paren
l_string|&quot; ra 0x%x prev 0x%x next 0x%x dev 0x%x blkno 0x%x&bslash;n&quot;
comma
id|dabuf-&gt;ra
comma
id|dabuf-&gt;prev
comma
id|dabuf-&gt;next
comma
id|dabuf-&gt;dev
comma
id|dabuf-&gt;blkno
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n; * Print a directory/attribute internal node block.&n; */
r_static
r_void
DECL|function|xfsidbg_xdanode
id|xfsidbg_xdanode
c_func
(paren
id|xfs_da_intnode_t
op_star
id|node
)paren
(brace
id|xfs_da_node_hdr_t
op_star
id|h
suffix:semicolon
id|xfs_da_blkinfo_t
op_star
id|i
suffix:semicolon
id|xfs_da_node_entry_t
op_star
id|e
suffix:semicolon
r_int
id|j
suffix:semicolon
id|h
op_assign
op_amp
id|node-&gt;hdr
suffix:semicolon
id|i
op_assign
op_amp
id|h-&gt;info
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr info forw 0x%x back 0x%x magic 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|i-&gt;forw
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;back
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;magic
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d level %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;level
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|e
op_assign
id|node-&gt;btree
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|e
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;btree %d hashval 0x%x before 0x%x&bslash;n&quot;
comma
id|j
comma
(paren
id|uint_t
)paren
id|INT_GET
c_func
(paren
id|e-&gt;hashval
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|e-&gt;before
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print an xfs_da_state_blk structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xdastate
id|xfsidbg_xdastate
c_func
(paren
id|xfs_da_state_t
op_star
id|s
)paren
(brace
id|xfs_da_state_blk_t
op_star
id|eblk
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;args 0x%p mp 0x%p blocksize %u node_ents %u inleaf %u&bslash;n&quot;
comma
id|s-&gt;args
comma
id|s-&gt;mp
comma
id|s-&gt;blocksize
comma
id|s-&gt;node_ents
comma
id|s-&gt;inleaf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|s-&gt;args
)paren
id|xfsidbg_xdaargs
c_func
(paren
id|s-&gt;args
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;path:  &quot;
)paren
suffix:semicolon
id|xfs_dastate_path
c_func
(paren
op_amp
id|s-&gt;path
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;altpath:  &quot;
)paren
suffix:semicolon
id|xfs_dastate_path
c_func
(paren
op_amp
id|s-&gt;altpath
)paren
suffix:semicolon
id|eblk
op_assign
op_amp
id|s-&gt;extrablk
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;extra: valid %d, after %d&bslash;n&quot;
comma
id|s-&gt;extravalid
comma
id|s-&gt;extraafter
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; bp 0x%p blkno 0x%x &quot;
comma
id|eblk-&gt;bp
comma
id|eblk-&gt;blkno
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;index %d hashval 0x%x&bslash;n&quot;
comma
id|eblk-&gt;index
comma
(paren
id|uint_t
)paren
id|eblk-&gt;hashval
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a directory leaf block.&n; */
r_static
r_void
DECL|function|xfsidbg_xdirleaf
id|xfsidbg_xdirleaf
c_func
(paren
id|xfs_dir_leafblock_t
op_star
id|leaf
)paren
(brace
id|xfs_dir_leaf_hdr_t
op_star
id|h
suffix:semicolon
id|xfs_da_blkinfo_t
op_star
id|i
suffix:semicolon
id|xfs_dir_leaf_map_t
op_star
id|m
suffix:semicolon
id|xfs_dir_leaf_entry_t
op_star
id|e
suffix:semicolon
id|xfs_dir_leaf_name_t
op_star
id|n
suffix:semicolon
r_int
id|j
comma
id|k
suffix:semicolon
id|xfs_ino_t
id|ino
suffix:semicolon
id|h
op_assign
op_amp
id|leaf-&gt;hdr
suffix:semicolon
id|i
op_assign
op_amp
id|h-&gt;info
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr info forw 0x%x back 0x%x magic 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|i-&gt;forw
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;back
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;magic
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d namebytes %d firstused %d holes %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;namebytes
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;firstused
comma
id|ARCH_CONVERT
)paren
comma
id|h-&gt;holes
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|m
op_assign
id|h-&gt;freemap
suffix:semicolon
id|j
OL
id|XFS_DIR_LEAF_MAPSIZE
suffix:semicolon
id|j
op_increment
comma
id|m
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;hdr freemap %d base %d size %d&bslash;n&quot;
comma
id|j
comma
id|INT_GET
c_func
(paren
id|m-&gt;base
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|m-&gt;size
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|e
op_assign
id|leaf-&gt;entries
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|e
op_increment
)paren
(brace
id|n
op_assign
id|XFS_DIR_LEAF_NAMESTRUCT
c_func
(paren
id|leaf
comma
id|INT_GET
c_func
(paren
id|e-&gt;nameidx
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|XFS_DIR_SF_GET_DIRINO_ARCH
c_func
(paren
op_amp
id|n-&gt;inumber
comma
op_amp
id|ino
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;leaf %d hashval 0x%x nameidx %d inumber %llu &quot;
comma
id|j
comma
(paren
id|uint_t
)paren
id|INT_GET
c_func
(paren
id|e-&gt;hashval
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|e-&gt;nameidx
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|ino
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;namelen %d name &bslash;&quot;&quot;
comma
id|e-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
id|e-&gt;namelen
suffix:semicolon
id|k
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|n-&gt;name
(braket
id|k
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print a directory v2 data block, single or multiple.&n; */
r_static
r_void
DECL|function|xfs_dir2data
id|xfs_dir2data
c_func
(paren
r_void
op_star
id|addr
comma
r_int
id|size
)paren
(brace
id|xfs_dir2_data_t
op_star
id|db
suffix:semicolon
id|xfs_dir2_block_t
op_star
id|bb
suffix:semicolon
id|xfs_dir2_data_hdr_t
op_star
id|h
suffix:semicolon
id|xfs_dir2_data_free_t
op_star
id|m
suffix:semicolon
id|xfs_dir2_data_entry_t
op_star
id|e
suffix:semicolon
id|xfs_dir2_data_unused_t
op_star
id|u
suffix:semicolon
id|xfs_dir2_leaf_entry_t
op_star
id|l
op_assign
l_int|NULL
suffix:semicolon
r_int
id|j
comma
id|k
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_char
op_star
id|t
suffix:semicolon
id|xfs_dir2_block_tail_t
op_star
id|tail
op_assign
l_int|NULL
suffix:semicolon
id|db
op_assign
(paren
id|xfs_dir2_data_t
op_star
)paren
id|addr
suffix:semicolon
id|bb
op_assign
(paren
id|xfs_dir2_block_t
op_star
)paren
id|addr
suffix:semicolon
id|h
op_assign
op_amp
id|db-&gt;hdr
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr magic 0x%x (%s)&bslash;nhdr bestfree&quot;
comma
id|INT_GET
c_func
(paren
id|h-&gt;magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_DATA_MAGIC
ques
c_cond
l_string|&quot;DATA&quot;
suffix:colon
(paren
id|INT_GET
c_func
(paren
id|h-&gt;magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_BLOCK_MAGIC
ques
c_cond
l_string|&quot;BLOCK&quot;
suffix:colon
l_string|&quot;&quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|m
op_assign
id|h-&gt;bestfree
suffix:semicolon
id|j
OL
id|XFS_DIR2_DATA_FD_COUNT
suffix:semicolon
id|j
op_increment
comma
id|m
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot; %d: 0x%x@0x%x&quot;
comma
id|j
comma
id|INT_GET
c_func
(paren
id|m-&gt;length
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|m-&gt;offset
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
id|h-&gt;magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_DATA_MAGIC
)paren
id|t
op_assign
(paren
r_char
op_star
)paren
id|db
op_plus
id|size
suffix:semicolon
r_else
(brace
multiline_comment|/* XFS_DIR2_BLOCK_TAIL_P */
id|tail
op_assign
(paren
id|xfs_dir2_block_tail_t
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|bb
op_plus
id|size
op_minus
r_sizeof
(paren
id|xfs_dir2_block_tail_t
)paren
)paren
suffix:semicolon
id|l
op_assign
id|XFS_DIR2_BLOCK_LEAF_P_ARCH
c_func
(paren
id|tail
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|t
op_assign
(paren
r_char
op_star
)paren
id|l
suffix:semicolon
)brace
r_for
c_loop
(paren
id|p
op_assign
(paren
r_char
op_star
)paren
(paren
id|h
op_plus
l_int|1
)paren
suffix:semicolon
id|p
OL
id|t
suffix:semicolon
)paren
(brace
id|u
op_assign
(paren
id|xfs_dir2_data_unused_t
op_star
)paren
id|p
suffix:semicolon
r_if
c_cond
(paren
id|u-&gt;freetag
op_eq
id|XFS_DIR2_DATA_FREE_TAG
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx unused freetag 0x%x length 0x%x tag 0x%x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
(paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|addr
)paren
comma
id|INT_GET
c_func
(paren
id|u-&gt;freetag
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|u-&gt;length
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
op_star
id|XFS_DIR2_DATA_UNUSED_TAG_P_ARCH
c_func
(paren
id|u
comma
id|ARCH_CONVERT
)paren
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|p
op_add_assign
id|INT_GET
c_func
(paren
id|u-&gt;length
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|e
op_assign
(paren
id|xfs_dir2_data_entry_t
op_star
)paren
id|p
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx entry inumber %llu namelen %d name &bslash;&quot;&quot;
comma
(paren
r_int
r_int
)paren
(paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|addr
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|e-&gt;inumber
comma
id|ARCH_CONVERT
)paren
comma
id|e-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
id|e-&gt;namelen
suffix:semicolon
id|k
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|e-&gt;name
(braket
id|k
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot; tag 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
op_star
id|XFS_DIR2_DATA_ENTRY_TAG_P
c_func
(paren
id|e
)paren
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|p
op_add_assign
id|XFS_DIR2_DATA_ENTSIZE
c_func
(paren
id|e-&gt;namelen
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
id|h-&gt;magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_DATA_MAGIC
)paren
r_return
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|tail-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|l
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx leaf %d hashval 0x%x address 0x%x (byte 0x%x)&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
(paren
(paren
r_char
op_star
)paren
id|l
op_minus
(paren
r_char
op_star
)paren
id|addr
)paren
comma
id|j
comma
(paren
id|uint_t
)paren
id|INT_GET
c_func
(paren
id|l-&gt;hashval
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|l-&gt;address
comma
id|ARCH_CONVERT
)paren
comma
multiline_comment|/* XFS_DIR2_DATAPTR_TO_BYTE */
id|INT_GET
c_func
(paren
id|l-&gt;address
comma
id|ARCH_CONVERT
)paren
op_lshift
id|XFS_DIR2_DATA_ALIGN_LOG
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx tail count %d&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
(paren
(paren
r_char
op_star
)paren
id|tail
op_minus
(paren
r_char
op_star
)paren
id|addr
)paren
comma
id|INT_GET
c_func
(paren
id|tail-&gt;count
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfs_dir2leaf
id|xfs_dir2leaf
c_func
(paren
id|xfs_dir2_leaf_t
op_star
id|leaf
comma
r_int
id|size
)paren
(brace
id|xfs_dir2_leaf_hdr_t
op_star
id|h
suffix:semicolon
id|xfs_da_blkinfo_t
op_star
id|i
suffix:semicolon
id|xfs_dir2_leaf_entry_t
op_star
id|e
suffix:semicolon
id|xfs_dir2_data_off_t
op_star
id|b
suffix:semicolon
id|xfs_dir2_leaf_tail_t
op_star
id|t
suffix:semicolon
r_int
id|j
suffix:semicolon
id|h
op_assign
op_amp
id|leaf-&gt;hdr
suffix:semicolon
id|i
op_assign
op_amp
id|h-&gt;info
suffix:semicolon
id|e
op_assign
id|leaf-&gt;ents
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr info forw 0x%x back 0x%x magic 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|i-&gt;forw
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;back
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|i-&gt;magic
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d stale %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|h-&gt;stale
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|h-&gt;count
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|e
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx ent %d hashval 0x%x address 0x%x (byte 0x%x)&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
(paren
(paren
r_char
op_star
)paren
id|e
op_minus
(paren
r_char
op_star
)paren
id|leaf
)paren
comma
id|j
comma
(paren
id|uint_t
)paren
id|INT_GET
c_func
(paren
id|e-&gt;hashval
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|e-&gt;address
comma
id|ARCH_CONVERT
)paren
comma
multiline_comment|/* XFS_DIR2_DATAPTR_TO_BYTE */
id|INT_GET
c_func
(paren
id|e-&gt;address
comma
id|ARCH_CONVERT
)paren
op_lshift
id|XFS_DIR2_DATA_ALIGN_LOG
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|INT_GET
c_func
(paren
id|i-&gt;magic
comma
id|ARCH_CONVERT
)paren
op_eq
id|XFS_DIR2_LEAFN_MAGIC
)paren
r_return
suffix:semicolon
multiline_comment|/* XFS_DIR2_LEAF_TAIL_P */
id|t
op_assign
(paren
id|xfs_dir2_leaf_tail_t
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|leaf
op_plus
id|size
op_minus
r_sizeof
(paren
op_star
id|t
)paren
)paren
suffix:semicolon
id|b
op_assign
id|XFS_DIR2_LEAF_BESTS_P_ARCH
c_func
(paren
id|t
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|INT_GET
c_func
(paren
id|t-&gt;bestcount
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|j
op_increment
comma
id|b
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%lx best %d 0x%x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
(paren
(paren
r_char
op_star
)paren
id|b
op_minus
(paren
r_char
op_star
)paren
id|leaf
)paren
comma
id|j
comma
id|INT_GET
c_func
(paren
op_star
id|b
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;tail bestcount %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|t-&gt;bestcount
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print a shortform directory.&n; */
r_static
r_void
DECL|function|xfsidbg_xdirsf
id|xfsidbg_xdirsf
c_func
(paren
id|xfs_dir_shortform_t
op_star
id|s
)paren
(brace
id|xfs_dir_sf_hdr_t
op_star
id|sfh
suffix:semicolon
id|xfs_dir_sf_entry_t
op_star
id|sfe
suffix:semicolon
id|xfs_ino_t
id|ino
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|sfh
op_assign
op_amp
id|s-&gt;hdr
suffix:semicolon
id|XFS_DIR_SF_GET_DIRINO_ARCH
c_func
(paren
op_amp
id|sfh-&gt;parent
comma
op_amp
id|ino
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr parent %llu&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|ino
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; count %d&bslash;n&quot;
comma
id|sfh-&gt;count
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|sfe
op_assign
id|s-&gt;list
suffix:semicolon
id|i
OL
id|sfh-&gt;count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|XFS_DIR_SF_GET_DIRINO_ARCH
c_func
(paren
op_amp
id|sfe-&gt;inumber
comma
op_amp
id|ino
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;entry %d inumber %llu&quot;
comma
id|i
comma
(paren
r_int
r_int
r_int
)paren
id|ino
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; namelen %d name &bslash;&quot;&quot;
comma
id|sfe-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|sfe-&gt;namelen
suffix:semicolon
id|j
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|sfe-&gt;name
(braket
id|j
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|sfe
op_assign
id|XFS_DIR_SF_NEXTENTRY
c_func
(paren
id|sfe
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print a shortform v2 directory.&n; */
r_static
r_void
DECL|function|xfsidbg_xdir2sf
id|xfsidbg_xdir2sf
c_func
(paren
id|xfs_dir2_sf_t
op_star
id|s
)paren
(brace
id|xfs_dir2_sf_hdr_t
op_star
id|sfh
suffix:semicolon
id|xfs_dir2_sf_entry_t
op_star
id|sfe
suffix:semicolon
id|xfs_ino_t
id|ino
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|sfh
op_assign
op_amp
id|s-&gt;hdr
suffix:semicolon
id|ino
op_assign
id|XFS_DIR2_SF_GET_INUMBER_ARCH
c_func
(paren
id|s
comma
op_amp
id|sfh-&gt;parent
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr count %d i8count %d parent %llu&bslash;n&quot;
comma
id|sfh-&gt;count
comma
id|sfh-&gt;i8count
comma
(paren
r_int
r_int
r_int
)paren
id|ino
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|sfe
op_assign
id|XFS_DIR2_SF_FIRSTENTRY
c_func
(paren
id|s
)paren
suffix:semicolon
id|i
OL
id|sfh-&gt;count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ino
op_assign
id|XFS_DIR2_SF_GET_INUMBER_ARCH
c_func
(paren
id|s
comma
id|XFS_DIR2_SF_INUMBERP
c_func
(paren
id|sfe
)paren
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;entry %d inumber %llu offset 0x%x namelen %d name &bslash;&quot;&quot;
comma
id|i
comma
(paren
r_int
r_int
r_int
)paren
id|ino
comma
id|XFS_DIR2_SF_GET_OFFSET_ARCH
c_func
(paren
id|sfe
comma
id|ARCH_CONVERT
)paren
comma
id|sfe-&gt;namelen
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|sfe-&gt;namelen
suffix:semicolon
id|j
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%c&quot;
comma
id|sfe-&gt;name
(braket
id|j
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|sfe
op_assign
id|XFS_DIR2_SF_NEXTENTRY
c_func
(paren
id|s
comma
id|sfe
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print a node-form v2 directory freemap block.&n; */
r_static
r_void
DECL|function|xfsidbg_xdir2free
id|xfsidbg_xdir2free
c_func
(paren
id|xfs_dir2_free_t
op_star
id|f
)paren
(brace
r_int
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hdr magic 0x%x firstdb %d nvalid %d nused %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|f-&gt;hdr.magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|f-&gt;hdr.firstdb
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|f-&gt;hdr.nvalid
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|f-&gt;hdr.nused
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|INT_GET
c_func
(paren
id|f-&gt;hdr.nvalid
comma
id|ARCH_CONVERT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;entry %d db %d count %d&bslash;n&quot;
comma
id|i
comma
id|i
op_plus
id|INT_GET
c_func
(paren
id|f-&gt;hdr.firstdb
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|f-&gt;bests
(braket
id|i
)braket
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print xfs extent list.&n; */
r_static
r_void
DECL|function|xfsidbg_xexlist
id|xfsidbg_xexlist
c_func
(paren
id|xfs_inode_t
op_star
id|ip
)paren
(brace
id|xfs_xexlist_fork
c_func
(paren
id|ip
comma
id|XFS_DATA_FORK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|XFS_IFORK_Q
c_func
(paren
id|ip
)paren
)paren
id|xfs_xexlist_fork
c_func
(paren
id|ip
comma
id|XFS_ATTR_FORK
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print an xfs free-extent list.&n; */
r_static
r_void
DECL|function|xfsidbg_xflist
id|xfsidbg_xflist
c_func
(paren
id|xfs_bmap_free_t
op_star
id|flist
)paren
(brace
id|xfs_bmap_free_item_t
op_star
id|item
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;flist@0x%p: first 0x%p count %d low %d&bslash;n&quot;
comma
id|flist
comma
id|flist-&gt;xbf_first
comma
id|flist-&gt;xbf_count
comma
id|flist-&gt;xbf_low
)paren
suffix:semicolon
r_for
c_loop
(paren
id|item
op_assign
id|flist-&gt;xbf_first
suffix:semicolon
id|item
suffix:semicolon
id|item
op_assign
id|item-&gt;xbfi_next
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;item@0x%p: startblock %Lx blockcount %d&quot;
comma
id|item
comma
(paren
id|xfs_dfsbno_t
)paren
id|item-&gt;xbfi_startblock
comma
id|item-&gt;xbfi_blockcount
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print out the help messages for these functions.&n; */
r_static
r_void
DECL|function|xfsidbg_xhelp
id|xfsidbg_xhelp
c_func
(paren
r_void
)paren
(brace
r_struct
id|xif
op_star
id|p
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
id|xfsidbg_funcs
suffix:semicolon
id|p-&gt;name
suffix:semicolon
id|p
op_increment
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;%-16s %s %s&bslash;n&quot;
comma
id|p-&gt;name
comma
id|p-&gt;args
comma
id|p-&gt;help
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print out an XFS in-core log structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xiclog
id|xfsidbg_xiclog
c_func
(paren
id|xlog_in_core_t
op_star
id|iclog
)paren
(brace
r_int
id|i
suffix:semicolon
r_static
r_char
op_star
id|ic_flags
(braket
)braket
op_assign
(brace
l_string|&quot;ACTIVE&quot;
comma
multiline_comment|/* 0x0001 */
l_string|&quot;WANT_SYNC&quot;
comma
multiline_comment|/* 0x0002 */
l_string|&quot;SYNCING&quot;
comma
multiline_comment|/* 0X0004 */
l_string|&quot;DONE_SYNC&quot;
comma
multiline_comment|/* 0X0008 */
l_string|&quot;DO_CALLBACK&quot;
comma
multiline_comment|/* 0X0010 */
l_string|&quot;CALLBACK&quot;
comma
multiline_comment|/* 0X0020 */
l_string|&quot;DIRTY&quot;
comma
multiline_comment|/* 0X0040 */
l_string|&quot;IOERROR&quot;
comma
multiline_comment|/* 0X0080 */
l_string|&quot;NOTUSED&quot;
comma
multiline_comment|/* 0X8000 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xlog_in_core/header at 0x%p/0x%p&bslash;n&quot;
comma
id|iclog
comma
id|iclog-&gt;hic_data
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magicno: %x  cycle: %d  version: %d  lsn: 0x%Lx&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_magicno
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_cycle
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_version
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_lsn
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;tail_lsn: 0x%Lx  len: %d  prev_block: %d  num_ops: %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_tail_lsn
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_len
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_prev_block
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_num_logops
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;cycle_data: &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
id|iclog-&gt;ic_size
op_rshift
id|BBSHIFT
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%x  &quot;
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_cycle_data
(braket
id|i
)braket
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;size: %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|iclog-&gt;ic_header.h_size
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;--------------------------------------------------&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;data: 0x%p  &amp;forcesema: 0x%p  next: 0x%p bp: 0x%p&bslash;n&quot;
comma
id|iclog-&gt;ic_datap
comma
op_amp
id|iclog-&gt;ic_forcesema
comma
id|iclog-&gt;ic_next
comma
id|iclog-&gt;ic_bp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;log: 0x%p  callb: 0x%p  callb_tail: 0x%p  roundoff: %d&bslash;n&quot;
comma
id|iclog-&gt;ic_log
comma
id|iclog-&gt;ic_callback
comma
id|iclog-&gt;ic_callback_tail
comma
id|iclog-&gt;ic_roundoff
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;size: %d (OFFSET: %d) refcnt: %d  bwritecnt: %d&quot;
comma
id|iclog-&gt;ic_size
comma
id|iclog-&gt;ic_offset
comma
id|iclog-&gt;ic_refcnt
comma
id|iclog-&gt;ic_bwritecnt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|iclog-&gt;ic_state
op_amp
id|XLOG_STATE_ALL
)paren
id|printflags
c_func
(paren
id|iclog-&gt;ic_state
comma
id|ic_flags
comma
l_string|&quot;state:&quot;
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;state: INVALID 0x%x&quot;
comma
id|iclog-&gt;ic_state
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* xfsidbg_xiclog */
multiline_comment|/*&n; * Print all incore logs.&n; */
r_static
r_void
DECL|function|xfsidbg_xiclogall
id|xfsidbg_xiclogall
c_func
(paren
id|xlog_in_core_t
op_star
id|iclog
)paren
(brace
id|xlog_in_core_t
op_star
id|first_iclog
op_assign
id|iclog
suffix:semicolon
r_do
(brace
id|xfsidbg_xiclog
c_func
(paren
id|iclog
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;=================================================&bslash;n&quot;
)paren
suffix:semicolon
id|iclog
op_assign
id|iclog-&gt;ic_next
suffix:semicolon
)brace
r_while
c_loop
(paren
id|iclog
op_ne
id|first_iclog
)paren
suffix:semicolon
)brace
multiline_comment|/* xfsidbg_xiclogall */
multiline_comment|/*&n; * Print out the callback structures attached to an iclog.&n; */
r_static
r_void
DECL|function|xfsidbg_xiclogcb
id|xfsidbg_xiclogcb
c_func
(paren
id|xlog_in_core_t
op_star
id|iclog
)paren
(brace
id|xfs_log_callback_t
op_star
id|cb
suffix:semicolon
id|kdb_symtab_t
id|symtab
suffix:semicolon
r_for
c_loop
(paren
id|cb
op_assign
id|iclog-&gt;ic_callback
suffix:semicolon
id|cb
op_ne
l_int|NULL
suffix:semicolon
id|cb
op_assign
id|cb-&gt;cb_next
)paren
(brace
r_if
c_cond
(paren
id|kdbnearsym
c_func
(paren
(paren
r_int
r_int
)paren
id|cb-&gt;cb_func
comma
op_amp
id|symtab
)paren
)paren
(brace
r_int
r_int
id|offval
suffix:semicolon
id|offval
op_assign
(paren
r_int
r_int
)paren
id|cb-&gt;cb_func
op_minus
id|symtab.sym_start
suffix:semicolon
r_if
c_cond
(paren
id|offval
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;func = %s+0x%lx&quot;
comma
id|symtab.sym_name
comma
id|offval
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;func = %s&quot;
comma
id|symtab.sym_name
)paren
suffix:semicolon
)brace
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;func = ?? 0x%p&quot;
comma
(paren
r_void
op_star
)paren
id|cb-&gt;cb_func
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot; arg 0x%p next 0x%p&bslash;n&quot;
comma
id|cb-&gt;cb_arg
comma
id|cb-&gt;cb_next
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print all of the inodes attached to the given mount structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xinodes
id|xfsidbg_xinodes
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xfs_mount at 0x%p&bslash;n&quot;
comma
id|mp
)paren
suffix:semicolon
id|ip
op_assign
id|mp-&gt;m_inodes
suffix:semicolon
r_if
c_cond
(paren
id|ip
op_ne
l_int|NULL
)paren
(brace
r_do
(brace
r_if
c_cond
(paren
id|ip-&gt;i_mount
op_eq
l_int|NULL
)paren
(brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|xfsidbg_xnode
c_func
(paren
id|ip
)paren
suffix:semicolon
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ip
op_ne
id|mp-&gt;m_inodes
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;nEnd of Inodes&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_delayed_blocks
id|xfsidbg_delayed_blocks
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
r_int
r_int
id|total
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|icount
op_assign
l_int|0
suffix:semicolon
id|ip
op_assign
id|mp-&gt;m_inodes
suffix:semicolon
r_if
c_cond
(paren
id|ip
op_ne
l_int|NULL
)paren
(brace
r_do
(brace
r_if
c_cond
(paren
id|ip-&gt;i_mount
op_eq
l_int|NULL
)paren
(brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ip-&gt;i_delayed_blks
)paren
(brace
id|total
op_add_assign
id|ip-&gt;i_delayed_blks
suffix:semicolon
id|icount
op_increment
suffix:semicolon
)brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ip
op_ne
id|mp-&gt;m_inodes
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;delayed blocks total: %d in %d inodes&bslash;n&quot;
comma
id|total
comma
id|icount
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xinodes_quiesce
id|xfsidbg_xinodes_quiesce
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xfs_mount at 0x%p&bslash;n&quot;
comma
id|mp
)paren
suffix:semicolon
id|ip
op_assign
id|mp-&gt;m_inodes
suffix:semicolon
r_if
c_cond
(paren
id|ip
op_ne
l_int|NULL
)paren
(brace
r_do
(brace
r_if
c_cond
(paren
id|ip-&gt;i_mount
op_eq
l_int|NULL
)paren
(brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ip-&gt;i_flags
op_amp
id|XFS_IQUIESCE
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;ip 0x%p not quiesced&bslash;n&quot;
comma
id|ip
)paren
suffix:semicolon
)brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ip
op_ne
id|mp-&gt;m_inodes
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;nEnd of Inodes&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_static
r_char
op_star
DECL|function|xfsidbg_get_cstate
id|xfsidbg_get_cstate
c_func
(paren
r_int
id|state
)paren
(brace
r_switch
c_cond
(paren
id|state
)paren
(brace
r_case
id|XLOG_STATE_COVER_IDLE
suffix:colon
r_return
l_string|&quot;idle&quot;
suffix:semicolon
r_case
id|XLOG_STATE_COVER_NEED
suffix:colon
r_return
l_string|&quot;need&quot;
suffix:semicolon
r_case
id|XLOG_STATE_COVER_DONE
suffix:colon
r_return
l_string|&quot;done&quot;
suffix:semicolon
r_case
id|XLOG_STATE_COVER_NEED2
suffix:colon
r_return
l_string|&quot;need2&quot;
suffix:semicolon
r_case
id|XLOG_STATE_COVER_DONE2
suffix:colon
r_return
l_string|&quot;done2&quot;
suffix:semicolon
r_default
suffix:colon
r_return
l_string|&quot;unknown&quot;
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print out an XFS log structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xlog
id|xfsidbg_xlog
c_func
(paren
id|xlog_t
op_star
id|log
)paren
(brace
r_int
id|rbytes
suffix:semicolon
r_int
id|wbytes
suffix:semicolon
r_static
r_char
op_star
id|t_flags
(braket
)braket
op_assign
(brace
l_string|&quot;CHKSUM_MISMATCH&quot;
comma
multiline_comment|/* 0x01 */
l_string|&quot;ACTIVE_RECOVERY&quot;
comma
multiline_comment|/* 0x02 */
l_string|&quot;RECOVERY_NEEDED&quot;
comma
multiline_comment|/* 0x04 */
l_string|&quot;IO_ERROR&quot;
comma
multiline_comment|/* 0x08 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xlog at 0x%p&bslash;n&quot;
comma
id|log
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;flushsm: 0x%p  flushcnt: %d tic_cnt: %d&t; tic_tcnt: %d  &bslash;n&quot;
comma
op_amp
id|log-&gt;l_flushsema
comma
id|log-&gt;l_flushcnt
comma
id|log-&gt;l_ticket_cnt
comma
id|log-&gt;l_ticket_tcnt
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;freelist: 0x%p  tail: 0x%p&t;ICLOG: 0x%p  &bslash;n&quot;
comma
id|log-&gt;l_freelist
comma
id|log-&gt;l_tail
comma
id|log-&gt;l_iclog
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;icloglock: 0x%p  tail_lsn: %s  last_sync_lsn: %s &bslash;n&quot;
comma
op_amp
id|log-&gt;l_icloglock
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
id|log-&gt;l_tail_lsn
)paren
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
id|log-&gt;l_last_sync_lsn
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;mp: 0x%p  xbuf: 0x%p  roundoff: %d  l_covered_state: %s &bslash;n&quot;
comma
id|log-&gt;l_mp
comma
id|log-&gt;l_xbuf
comma
id|log-&gt;l_roundoff
comma
id|xfsidbg_get_cstate
c_func
(paren
id|log-&gt;l_covered_state
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;flags: &quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|log-&gt;l_flags
comma
id|t_flags
comma
l_string|&quot;log&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  dev: 0x%x logBBstart: %lld logsize: %d logBBsize: %d&bslash;n&quot;
comma
id|log-&gt;l_dev
comma
(paren
r_int
r_int
)paren
id|log-&gt;l_logBBstart
comma
id|log-&gt;l_logsize
comma
id|log-&gt;l_logBBsize
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;curr_cycle: %d  prev_cycle: %d  curr_block: %d  prev_block: %d&bslash;n&quot;
comma
id|log-&gt;l_curr_cycle
comma
id|log-&gt;l_prev_cycle
comma
id|log-&gt;l_curr_block
comma
id|log-&gt;l_prev_block
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;iclog_bak: 0x%p  iclog_size: 0x%x (%d)  num iclogs: %d&bslash;n&quot;
comma
id|log-&gt;l_iclog_bak
comma
id|log-&gt;l_iclog_size
comma
id|log-&gt;l_iclog_size
comma
id|log-&gt;l_iclog_bufs
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;l_stripemask %d l_iclog_hsize %d l_iclog_heads %d&bslash;n&quot;
comma
id|log-&gt;l_stripemask
comma
id|log-&gt;l_iclog_hsize
comma
id|log-&gt;l_iclog_heads
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;l_sectbb_log %u l_sectbb_mask %u&bslash;n&quot;
comma
id|log-&gt;l_sectbb_log
comma
id|log-&gt;l_sectbb_mask
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;grant_lock: 0x%p  resHeadQ: 0x%p  wrHeadQ: 0x%p&bslash;n&quot;
comma
op_amp
id|log-&gt;l_grant_lock
comma
id|log-&gt;l_reserve_headq
comma
id|log-&gt;l_write_headq
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;GResCycle: %d  GResBytes: %d  GWrCycle: %d  GWrBytes: %d&bslash;n&quot;
comma
id|log-&gt;l_grant_reserve_cycle
comma
id|log-&gt;l_grant_reserve_bytes
comma
id|log-&gt;l_grant_write_cycle
comma
id|log-&gt;l_grant_write_bytes
)paren
suffix:semicolon
id|rbytes
op_assign
id|log-&gt;l_grant_reserve_bytes
op_plus
id|log-&gt;l_roundoff
suffix:semicolon
id|wbytes
op_assign
id|log-&gt;l_grant_write_bytes
op_plus
id|log-&gt;l_roundoff
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;GResBlocks: %d  GResRemain: %d  GWrBlocks: %d  GWrRemain: %d&bslash;n&quot;
comma
id|rbytes
op_div
id|BBSIZE
comma
id|rbytes
op_mod
id|BBSIZE
comma
id|wbytes
op_div
id|BBSIZE
comma
id|wbytes
op_mod
id|BBSIZE
)paren
suffix:semicolon
)brace
multiline_comment|/* xfsidbg_xlog */
multiline_comment|/*&n; * Print out an XFS recovery transaction&n; */
r_static
r_void
DECL|function|xfsidbg_xlog_ritem
id|xfsidbg_xlog_ritem
c_func
(paren
id|xlog_recover_item_t
op_star
id|item
)paren
(brace
r_int
id|i
op_assign
id|XLOG_MAX_REGIONS_IN_ITEM
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;(xlog_recover_item 0x%p) &quot;
comma
id|item
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;next: 0x%p prev: 0x%p type: %d cnt: %d ttl: %d&bslash;n&quot;
comma
id|item-&gt;ri_next
comma
id|item-&gt;ri_prev
comma
id|ITEM_TYPE
c_func
(paren
id|item
)paren
comma
id|item-&gt;ri_cnt
comma
id|item-&gt;ri_total
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|i
OG
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|item-&gt;ri_buf
(braket
id|XLOG_MAX_REGIONS_IN_ITEM
op_minus
id|i
)braket
dot
id|i_addr
)paren
r_break
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;a: 0x%p l: %d &quot;
comma
id|item-&gt;ri_buf
(braket
id|XLOG_MAX_REGIONS_IN_ITEM
op_minus
id|i
)braket
dot
id|i_addr
comma
id|item-&gt;ri_buf
(braket
id|XLOG_MAX_REGIONS_IN_ITEM
op_minus
id|i
)braket
dot
id|i_len
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* xfsidbg_xlog_ritem */
multiline_comment|/*&n; * Print out an XFS recovery transaction&n; */
r_static
r_void
DECL|function|xfsidbg_xlog_rtrans
id|xfsidbg_xlog_rtrans
c_func
(paren
id|xlog_recover_t
op_star
id|trans
)paren
(brace
id|xlog_recover_item_t
op_star
id|rip
comma
op_star
id|first_rip
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;(xlog_recover 0x%p) &quot;
comma
id|trans
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;tid: %x type: %d items: %d ttid: 0x%x  &quot;
comma
id|trans-&gt;r_log_tid
comma
id|trans-&gt;r_theader.th_type
comma
id|trans-&gt;r_theader.th_num_items
comma
id|trans-&gt;r_theader.th_tid
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;itemq: 0x%p&bslash;n&quot;
comma
id|trans-&gt;r_itemq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trans-&gt;r_itemq
)paren
(brace
id|rip
op_assign
id|first_rip
op_assign
id|trans-&gt;r_itemq
suffix:semicolon
r_do
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;(recovery item: 0x%p) &quot;
comma
id|rip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;type: %d cnt: %d total: %d&bslash;n&quot;
comma
id|ITEM_TYPE
c_func
(paren
id|rip
)paren
comma
id|rip-&gt;ri_cnt
comma
id|rip-&gt;ri_total
)paren
suffix:semicolon
id|rip
op_assign
id|rip-&gt;ri_next
suffix:semicolon
)brace
r_while
c_loop
(paren
id|rip
op_ne
id|first_rip
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* xfsidbg_xlog_rtrans */
r_static
r_void
DECL|function|xfsidbg_xlog_buf_logitem
id|xfsidbg_xlog_buf_logitem
c_func
(paren
id|xlog_recover_item_t
op_star
id|item
)paren
(brace
id|xfs_buf_log_format_t
op_star
id|buf_f
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
r_int
id|bit
suffix:semicolon
r_int
id|nbits
suffix:semicolon
r_int
r_int
op_star
id|data_map
suffix:semicolon
r_int
r_int
id|map_size
suffix:semicolon
r_int
id|size
suffix:semicolon
id|buf_f
op_assign
(paren
id|xfs_buf_log_format_t
op_star
)paren
id|item-&gt;ri_buf
(braket
l_int|0
)braket
dot
id|i_addr
suffix:semicolon
r_if
c_cond
(paren
id|buf_f-&gt;blf_flags
op_amp
id|XFS_BLI_INODE_BUF
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;tINODE BUF &lt;blkno=0x%Lx, len=0x%x&gt;&bslash;n&quot;
comma
id|buf_f-&gt;blf_blkno
comma
id|buf_f-&gt;blf_len
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|buf_f-&gt;blf_flags
op_amp
(paren
id|XFS_BLI_UDQUOT_BUF
op_or
id|XFS_BLI_GDQUOT_BUF
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;tDQUOT BUF &lt;blkno=0x%Lx, len=0x%x&gt;&bslash;n&quot;
comma
id|buf_f-&gt;blf_blkno
comma
id|buf_f-&gt;blf_len
)paren
suffix:semicolon
)brace
r_else
(brace
id|data_map
op_assign
id|buf_f-&gt;blf_data_map
suffix:semicolon
id|map_size
op_assign
id|buf_f-&gt;blf_map_size
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;tREG BUF &lt;blkno=0x%Lx, len=0x%x map 0x%p size %d&gt;&bslash;n&quot;
comma
id|buf_f-&gt;blf_blkno
comma
id|buf_f-&gt;blf_len
comma
id|data_map
comma
id|map_size
)paren
suffix:semicolon
id|bit
op_assign
l_int|0
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* 0 is the buf format structure */
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|bit
op_assign
id|xfs_next_bit
c_func
(paren
id|data_map
comma
id|map_size
comma
id|bit
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bit
op_eq
op_minus
l_int|1
)paren
r_break
suffix:semicolon
id|nbits
op_assign
id|xfs_contig_bits
c_func
(paren
id|data_map
comma
id|map_size
comma
id|bit
)paren
suffix:semicolon
id|size
op_assign
(paren
(paren
id|uint
)paren
id|bit
op_lshift
id|XFS_BLI_SHIFT
)paren
op_plus
(paren
id|nbits
op_lshift
id|XFS_BLI_SHIFT
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;t&bslash;tlogbuf.i_addr 0x%p, size 0x%x&bslash;n&quot;
comma
id|item-&gt;ri_buf
(braket
id|i
)braket
dot
id|i_addr
comma
id|size
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;t&bslash;t&bslash;t&bslash;&quot;&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|8
op_logical_and
id|j
OL
id|size
suffix:semicolon
id|j
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%02x&quot;
comma
(paren
(paren
r_char
op_star
)paren
id|item-&gt;ri_buf
(braket
id|i
)braket
dot
id|i_addr
)paren
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;...&bslash;&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
id|bit
op_add_assign
id|nbits
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print out an ENTIRE XFS recovery transaction&n; */
r_static
r_void
DECL|function|xfsidbg_xlog_rtrans_entire
id|xfsidbg_xlog_rtrans_entire
c_func
(paren
id|xlog_recover_t
op_star
id|trans
)paren
(brace
id|xlog_recover_item_t
op_star
id|item
comma
op_star
id|first_rip
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;(Recovering Xact 0x%p) &quot;
comma
id|trans
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;tid: %x type: %d nitems: %d ttid: 0x%x  &quot;
comma
id|trans-&gt;r_log_tid
comma
id|trans-&gt;r_theader.th_type
comma
id|trans-&gt;r_theader.th_num_items
comma
id|trans-&gt;r_theader.th_tid
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;itemq: 0x%p&bslash;n&quot;
comma
id|trans-&gt;r_itemq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|trans-&gt;r_itemq
)paren
(brace
id|item
op_assign
id|first_rip
op_assign
id|trans-&gt;r_itemq
suffix:semicolon
r_do
(brace
multiline_comment|/*&n;&t;&t;&t;   kdb_printf(&quot;(recovery item: 0x%x) &quot;, item);&n;&t;&t;&t;   kdb_printf(&quot;type: %d cnt: %d total: %d&bslash;n&quot;,&n;&t;&t;&t;&t;   item-&gt;ri_type, item-&gt;ri_cnt, item-&gt;ri_total);&n;&t;&t;&t;&t;   */
r_if
c_cond
(paren
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_BUF
)paren
op_logical_or
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_6_1_BUF
)paren
op_logical_or
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_5_3_BUF
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;BUF:&quot;
)paren
suffix:semicolon
id|xfsidbg_xlog_buf_logitem
c_func
(paren
id|item
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_INODE
)paren
op_logical_or
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_6_1_INODE
)paren
op_logical_or
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_5_3_INODE
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;INODE:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_EFI
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;EFI:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_EFD
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;EFD:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_DQUOT
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;DQUOT:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|ITEM_TYPE
c_func
(paren
id|item
)paren
op_eq
id|XFS_LI_QUOTAOFF
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;QUOTAOFF:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;UNKNOWN LOGITEM 0x%x&bslash;n&quot;
comma
id|ITEM_TYPE
c_func
(paren
id|item
)paren
)paren
suffix:semicolon
)brace
id|item
op_assign
id|item-&gt;ri_next
suffix:semicolon
)brace
r_while
c_loop
(paren
id|item
op_ne
id|first_rip
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* xfsidbg_xlog_rtrans */
multiline_comment|/*&n; * Print out an XFS ticket structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xlog_tic
id|xfsidbg_xlog_tic
c_func
(paren
id|xlog_ticket_t
op_star
id|tic
)paren
(brace
r_static
r_char
op_star
id|t_flags
(braket
)braket
op_assign
(brace
l_string|&quot;INIT&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;PERM_RES&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;IN_Q&quot;
comma
multiline_comment|/* 0x4 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xlog_ticket at 0x%p&bslash;n&quot;
comma
id|tic
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;next: 0x%p  prev: 0x%p  tid: 0x%x  &bslash;n&quot;
comma
id|tic-&gt;t_next
comma
id|tic-&gt;t_prev
comma
id|tic-&gt;t_tid
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;curr_res: %d  unit_res: %d  ocnt: %d  cnt: %d&bslash;n&quot;
comma
id|tic-&gt;t_curr_res
comma
id|tic-&gt;t_unit_res
comma
(paren
r_int
)paren
id|tic-&gt;t_ocnt
comma
(paren
r_int
)paren
id|tic-&gt;t_cnt
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;clientid: %c  &bslash;n&quot;
comma
id|tic-&gt;t_clientid
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|tic-&gt;t_flags
comma
id|t_flags
comma
l_string|&quot;ticket&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* xfsidbg_xlog_tic */
multiline_comment|/*&n; * Print out a single log item.&n; */
r_static
r_void
DECL|function|xfsidbg_xlogitem
id|xfsidbg_xlogitem
c_func
(paren
id|xfs_log_item_t
op_star
id|lip
)paren
(brace
id|xfs_log_item_t
op_star
id|bio_lip
suffix:semicolon
r_static
r_char
op_star
id|lid_type
(braket
)braket
op_assign
(brace
l_string|&quot;???&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;5-3-buf&quot;
comma
multiline_comment|/* 1 */
l_string|&quot;5-3-inode&quot;
comma
multiline_comment|/* 2 */
l_string|&quot;efi&quot;
comma
multiline_comment|/* 3 */
l_string|&quot;efd&quot;
comma
multiline_comment|/* 4 */
l_string|&quot;iunlink&quot;
comma
multiline_comment|/* 5 */
l_string|&quot;6-1-inode&quot;
comma
multiline_comment|/* 6 */
l_string|&quot;6-1-buf&quot;
comma
multiline_comment|/* 7 */
l_string|&quot;inode&quot;
comma
multiline_comment|/* 8 */
l_string|&quot;buf&quot;
comma
multiline_comment|/* 9 */
l_string|&quot;dquot&quot;
comma
multiline_comment|/* 10 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|li_flags
(braket
)braket
op_assign
(brace
l_string|&quot;in ail&quot;
comma
multiline_comment|/* 0x1 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;type %s mountp 0x%p flags &quot;
comma
id|lid_type
(braket
id|lip-&gt;li_type
op_minus
id|XFS_LI_5_3_BUF
op_plus
l_int|1
)braket
comma
id|lip-&gt;li_mountp
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|uint
)paren
(paren
id|lip-&gt;li_flags
)paren
comma
id|li_flags
comma
l_string|&quot;log&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ail forw 0x%p ail back 0x%p lsn %s desc %p ops 0x%p&bslash;n&quot;
comma
id|lip-&gt;li_ail.ail_forw
comma
id|lip-&gt;li_ail.ail_back
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
(paren
id|lip-&gt;li_lsn
)paren
)paren
comma
id|lip-&gt;li_desc
comma
id|lip-&gt;li_ops
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;iodonefunc &amp;0x%p&bslash;n&quot;
comma
id|lip-&gt;li_cb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|lip-&gt;li_type
op_eq
id|XFS_LI_BUF
)paren
(brace
id|bio_lip
op_assign
id|lip-&gt;li_bio_list
suffix:semicolon
r_if
c_cond
(paren
id|bio_lip
op_ne
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;iodone list:&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|bio_lip
op_ne
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;item 0x%p func 0x%p&bslash;n&quot;
comma
id|bio_lip
comma
id|bio_lip-&gt;li_cb
)paren
suffix:semicolon
id|bio_lip
op_assign
id|bio_lip-&gt;li_bio_list
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|lip-&gt;li_type
)paren
(brace
r_case
id|XFS_LI_BUF
suffix:colon
id|xfs_buf_item_print
c_func
(paren
(paren
id|xfs_buf_log_item_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_INODE
suffix:colon
id|xfs_inode_item_print
c_func
(paren
(paren
id|xfs_inode_log_item_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_EFI
suffix:colon
id|xfs_efi_item_print
c_func
(paren
(paren
id|xfs_efi_log_item_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_EFD
suffix:colon
id|xfs_efd_item_print
c_func
(paren
(paren
id|xfs_efd_log_item_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_DQUOT
suffix:colon
id|xfs_dquot_item_print
c_func
(paren
(paren
id|xfs_dq_logitem_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_QUOTAOFF
suffix:colon
id|xfs_qoff_item_print
c_func
(paren
(paren
id|xfs_qoff_logitem_t
op_star
)paren
id|lip
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;Unknown item type %d&bslash;n&quot;
comma
id|lip-&gt;li_type
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print out a summary of the AIL hanging off of a mount struct.&n; */
r_static
r_void
DECL|function|xfsidbg_xaildump
id|xfsidbg_xaildump
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_log_item_t
op_star
id|lip
suffix:semicolon
r_static
r_char
op_star
id|lid_type
(braket
)braket
op_assign
(brace
l_string|&quot;???&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;5-3-buf&quot;
comma
multiline_comment|/* 1 */
l_string|&quot;5-3-inode&quot;
comma
multiline_comment|/* 2 */
l_string|&quot;efi&quot;
comma
multiline_comment|/* 3 */
l_string|&quot;efd&quot;
comma
multiline_comment|/* 4 */
l_string|&quot;iunlink&quot;
comma
multiline_comment|/* 5 */
l_string|&quot;6-1-inode&quot;
comma
multiline_comment|/* 6 */
l_string|&quot;6-1-buf&quot;
comma
multiline_comment|/* 7 */
l_string|&quot;inode&quot;
comma
multiline_comment|/* 8 */
l_string|&quot;buf&quot;
comma
multiline_comment|/* 9 */
l_string|&quot;dquot&quot;
comma
multiline_comment|/* 10 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|li_flags
(braket
)braket
op_assign
(brace
l_string|&quot;in ail&quot;
comma
multiline_comment|/* 0x1 */
l_int|0
)brace
suffix:semicolon
r_int
id|count
suffix:semicolon
r_if
c_cond
(paren
(paren
id|mp-&gt;m_ail.ail_forw
op_eq
l_int|NULL
)paren
op_logical_or
(paren
id|mp-&gt;m_ail.ail_forw
op_eq
(paren
id|xfs_log_item_t
op_star
)paren
op_amp
id|mp-&gt;m_ail
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;AIL is empty&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;AIL for mp 0x%p, oldest first&bslash;n&quot;
comma
id|mp
)paren
suffix:semicolon
id|lip
op_assign
(paren
id|xfs_log_item_t
op_star
)paren
id|mp-&gt;m_ail.ail_forw
suffix:semicolon
r_for
c_loop
(paren
id|count
op_assign
l_int|0
suffix:semicolon
id|lip
suffix:semicolon
id|count
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;[%d] type %s &quot;
comma
id|count
comma
id|lid_type
(braket
id|lip-&gt;li_type
op_minus
id|XFS_LI_5_3_BUF
op_plus
l_int|1
)braket
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
id|uint
)paren
(paren
id|lip-&gt;li_flags
)paren
comma
id|li_flags
comma
l_string|&quot;flags:&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;  lsn %s&bslash;n   &quot;
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
(paren
id|lip-&gt;li_lsn
)paren
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|lip-&gt;li_type
)paren
(brace
r_case
id|XFS_LI_BUF
suffix:colon
id|xfs_buf_item_print
c_func
(paren
(paren
id|xfs_buf_log_item_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_INODE
suffix:colon
id|xfs_inode_item_print
c_func
(paren
(paren
id|xfs_inode_log_item_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_EFI
suffix:colon
id|xfs_efi_item_print
c_func
(paren
(paren
id|xfs_efi_log_item_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_EFD
suffix:colon
id|xfs_efd_item_print
c_func
(paren
(paren
id|xfs_efd_log_item_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_DQUOT
suffix:colon
id|xfs_dquot_item_print
c_func
(paren
(paren
id|xfs_dq_logitem_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_LI_QUOTAOFF
suffix:colon
id|xfs_qoff_item_print
c_func
(paren
(paren
id|xfs_qoff_logitem_t
op_star
)paren
id|lip
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;Unknown item type %d&bslash;n&quot;
comma
id|lip-&gt;li_type
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|lip-&gt;li_ail.ail_forw
op_eq
(paren
id|xfs_log_item_t
op_star
)paren
op_amp
id|mp-&gt;m_ail
)paren
(brace
id|lip
op_assign
l_int|NULL
suffix:semicolon
)brace
r_else
(brace
id|lip
op_assign
id|lip-&gt;li_ail.ail_forw
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print xfs mount structure.&n; */
r_static
r_void
DECL|function|xfsidbg_xmount
id|xfsidbg_xmount
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_static
r_char
op_star
id|xmount_flags
(braket
)braket
op_assign
(brace
l_string|&quot;WSYNC&quot;
comma
multiline_comment|/* 0x0001 */
l_string|&quot;INO64&quot;
comma
multiline_comment|/* 0x0002 */
l_string|&quot;RQCHK&quot;
comma
multiline_comment|/* 0x0004 */
l_string|&quot;FSCLEAN&quot;
comma
multiline_comment|/* 0x0008 */
l_string|&quot;FSSHUTDN&quot;
comma
multiline_comment|/* 0x0010 */
l_string|&quot;NOATIME&quot;
comma
multiline_comment|/* 0x0020 */
l_string|&quot;RETERR&quot;
comma
multiline_comment|/* 0x0040 */
l_string|&quot;NOALIGN&quot;
comma
multiline_comment|/* 0x0080 */
l_string|&quot;UNSHRD&quot;
comma
multiline_comment|/* 0x0100 */
l_string|&quot;RGSTRD&quot;
comma
multiline_comment|/* 0x0200 */
l_string|&quot;NORECVR&quot;
comma
multiline_comment|/* 0x0400 */
l_string|&quot;SHRD&quot;
comma
multiline_comment|/* 0x0800 */
l_string|&quot;IOSZ&quot;
comma
multiline_comment|/* 0x1000 */
l_string|&quot;OSYNC&quot;
comma
multiline_comment|/* 0x2000 */
l_string|&quot;NOUUID&quot;
comma
multiline_comment|/* 0x4000 */
l_string|&quot;32BIT&quot;
comma
multiline_comment|/* 0x8000 */
l_string|&quot;NOLOGFLUSH&quot;
comma
multiline_comment|/* 0x10000 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|quota_flags
(braket
)braket
op_assign
(brace
l_string|&quot;UQ&quot;
comma
multiline_comment|/* 0x0001 */
l_string|&quot;UQE&quot;
comma
multiline_comment|/* 0x0002 */
l_string|&quot;UQCHKD&quot;
comma
multiline_comment|/* 0x0004 */
l_string|&quot;PQ&quot;
comma
multiline_comment|/* 0x0008 (IRIX ondisk) */
l_string|&quot;GQE&quot;
comma
multiline_comment|/* 0x0010 */
l_string|&quot;GQCHKD&quot;
comma
multiline_comment|/* 0x0020 */
l_string|&quot;GQ&quot;
comma
multiline_comment|/* 0x0040 */
l_string|&quot;UQACTV&quot;
comma
multiline_comment|/* 0x0080 */
l_string|&quot;GQACTV&quot;
comma
multiline_comment|/* 0x0100 */
l_string|&quot;QMAYBE&quot;
comma
multiline_comment|/* 0x0200 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;xfs_mount at 0x%p&bslash;n&quot;
comma
id|mp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;vfsp 0x%p tid 0x%x ail_lock 0x%p &amp;ail 0x%p&bslash;n&quot;
comma
id|XFS_MTOVFS
c_func
(paren
id|mp
)paren
comma
id|mp-&gt;m_tid
comma
op_amp
id|mp-&gt;m_ail_lock
comma
op_amp
id|mp-&gt;m_ail
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ail_gen 0x%x &amp;sb 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_ail_gen
comma
op_amp
id|mp-&gt;m_sb
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;sb_lock 0x%p sb_bp 0x%p dev 0x%x logdev 0x%x rtdev 0x%x&bslash;n&quot;
comma
op_amp
id|mp-&gt;m_sb_lock
comma
id|mp-&gt;m_sb_bp
comma
id|mp-&gt;m_ddev_targp
ques
c_cond
id|mp-&gt;m_ddev_targp-&gt;pbr_dev
suffix:colon
l_int|0
comma
id|mp-&gt;m_logdev_targp
ques
c_cond
id|mp-&gt;m_logdev_targp-&gt;pbr_dev
suffix:colon
l_int|0
comma
id|mp-&gt;m_rtdev_targp
ques
c_cond
id|mp-&gt;m_rtdev_targp-&gt;pbr_dev
suffix:colon
l_int|0
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;bsize %d agfrotor %d agirotor %d ihash 0x%p ihsize %d&bslash;n&quot;
comma
id|mp-&gt;m_bsize
comma
id|mp-&gt;m_agfrotor
comma
id|mp-&gt;m_agirotor
comma
id|mp-&gt;m_ihash
comma
id|mp-&gt;m_ihsize
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inodes 0x%p ilock 0x%p ireclaims 0x%x&bslash;n&quot;
comma
id|mp-&gt;m_inodes
comma
op_amp
id|mp-&gt;m_ilock
comma
id|mp-&gt;m_ireclaims
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;readio_log 0x%x readio_blocks 0x%x &quot;
comma
id|mp-&gt;m_readio_log
comma
id|mp-&gt;m_readio_blocks
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;writeio_log 0x%x writeio_blocks 0x%x&bslash;n&quot;
comma
id|mp-&gt;m_writeio_log
comma
id|mp-&gt;m_writeio_blocks
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;logbufs %d logbsize %d LOG 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_logbufs
comma
id|mp-&gt;m_logbsize
comma
id|mp-&gt;m_log
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rsumlevels 0x%x rsumsize 0x%x rbmip 0x%p rsumip 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_rsumlevels
comma
id|mp-&gt;m_rsumsize
comma
id|mp-&gt;m_rbmip
comma
id|mp-&gt;m_rsumip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rootip 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_rootip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dircook_elog %d blkbit_log %d blkbb_log %d agno_log %d&bslash;n&quot;
comma
id|mp-&gt;m_dircook_elog
comma
id|mp-&gt;m_blkbit_log
comma
id|mp-&gt;m_blkbb_log
comma
id|mp-&gt;m_agno_log
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;agino_log %d nreadaheads %d inode cluster size %d&bslash;n&quot;
comma
id|mp-&gt;m_agino_log
comma
id|mp-&gt;m_nreadaheads
comma
id|mp-&gt;m_inode_cluster_size
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;blockmask 0x%x blockwsize 0x%x blockwmask 0x%x&bslash;n&quot;
comma
id|mp-&gt;m_blockmask
comma
id|mp-&gt;m_blockwsize
comma
id|mp-&gt;m_blockwmask
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;alloc_mxr[lf,nd] %d %d alloc_mnr[lf,nd] %d %d&bslash;n&quot;
comma
id|mp-&gt;m_alloc_mxr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_alloc_mxr
(braket
l_int|1
)braket
comma
id|mp-&gt;m_alloc_mnr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_alloc_mnr
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;bmap_dmxr[lfnr,ndnr] %d %d bmap_dmnr[lfnr,ndnr] %d %d&bslash;n&quot;
comma
id|mp-&gt;m_bmap_dmxr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_bmap_dmxr
(braket
l_int|1
)braket
comma
id|mp-&gt;m_bmap_dmnr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_bmap_dmnr
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inobt_mxr[lf,nd] %d %d inobt_mnr[lf,nd] %d %d&bslash;n&quot;
comma
id|mp-&gt;m_inobt_mxr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_inobt_mxr
(braket
l_int|1
)braket
comma
id|mp-&gt;m_inobt_mnr
(braket
l_int|0
)braket
comma
id|mp-&gt;m_inobt_mnr
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ag_maxlevels %d bm_maxlevels[d,a] %d %d in_maxlevels %d&bslash;n&quot;
comma
id|mp-&gt;m_ag_maxlevels
comma
id|mp-&gt;m_bm_maxlevels
(braket
l_int|0
)braket
comma
id|mp-&gt;m_bm_maxlevels
(braket
l_int|1
)braket
comma
id|mp-&gt;m_in_maxlevels
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;perag 0x%p &amp;peraglock 0x%p &amp;growlock 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_perag
comma
op_amp
id|mp-&gt;m_peraglock
comma
op_amp
id|mp-&gt;m_growlock
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|mp-&gt;m_flags
comma
id|xmount_flags
comma
l_string|&quot;flags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ialloc_inos %d ialloc_blks %d litino %d&bslash;n&quot;
comma
id|mp-&gt;m_ialloc_inos
comma
id|mp-&gt;m_ialloc_blks
comma
id|mp-&gt;m_litino
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dir_node_ents %u attr_node_ents %u&bslash;n&quot;
comma
id|mp-&gt;m_dir_node_ents
comma
id|mp-&gt;m_attr_node_ents
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;attroffset %d maxicount %Ld inoalign_mask %d&bslash;n&quot;
comma
id|mp-&gt;m_attroffset
comma
id|mp-&gt;m_maxicount
comma
id|mp-&gt;m_inoalign_mask
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;resblks %Ld resblks_avail %Ld&bslash;n&quot;
comma
id|mp-&gt;m_resblks
comma
id|mp-&gt;m_resblks_avail
)paren
suffix:semicolon
macro_line|#if XFS_BIG_FILESYSTEMS
id|kdb_printf
c_func
(paren
l_string|&quot; inoadd %llx&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|mp-&gt;m_inoadd
)paren
suffix:semicolon
macro_line|#else
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|mp-&gt;m_quotainfo
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;quotainfo 0x%p (uqip = 0x%p, gqip = 0x%p)&bslash;n&quot;
comma
id|mp-&gt;m_quotainfo
comma
id|mp-&gt;m_quotainfo-&gt;qi_uquotaip
comma
id|mp-&gt;m_quotainfo-&gt;qi_gquotaip
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;quotainfo NULL&bslash;n&quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|mp-&gt;m_qflags
comma
id|quota_flags
comma
l_string|&quot;quotaflags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dalign %d swidth %d sinoalign %d attr_magicpct %d dir_magicpct %d&bslash;n&quot;
comma
id|mp-&gt;m_dalign
comma
id|mp-&gt;m_swidth
comma
id|mp-&gt;m_sinoalign
comma
id|mp-&gt;m_attr_magicpct
comma
id|mp-&gt;m_dir_magicpct
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;mk_sharedro %d inode_quiesce %d sectbb_log %d&bslash;n&quot;
comma
id|mp-&gt;m_mk_sharedro
comma
id|mp-&gt;m_inode_quiesce
comma
id|mp-&gt;m_sectbb_log
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dirversion %d dirblkfsbs %d &amp;dirops 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_dirversion
comma
id|mp-&gt;m_dirblkfsbs
comma
op_amp
id|mp-&gt;m_dirops
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dirblksize %d dirdatablk 0x%Lx dirleafblk 0x%Lx dirfreeblk 0x%Lx&bslash;n&quot;
comma
id|mp-&gt;m_dirblksize
comma
(paren
id|xfs_dfiloff_t
)paren
id|mp-&gt;m_dirdatablk
comma
(paren
id|xfs_dfiloff_t
)paren
id|mp-&gt;m_dirleafblk
comma
(paren
id|xfs_dfiloff_t
)paren
id|mp-&gt;m_dirfreeblk
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;chsize %d chash 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_chsize
comma
id|mp-&gt;m_chash
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;m_frozen %d m_active_trans %d&bslash;n&quot;
comma
id|mp-&gt;m_frozen
comma
id|mp-&gt;m_active_trans.counter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mp-&gt;m_fsname
op_ne
l_int|NULL
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;mountpoint &bslash;&quot;%s&bslash;&quot;&bslash;n&quot;
comma
id|mp-&gt;m_fsname
)paren
suffix:semicolon
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;No name!!!&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xihash
id|xfsidbg_xihash
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_ihash_t
op_star
id|ih
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|j
suffix:semicolon
r_int
id|total
suffix:semicolon
r_int
id|numzeros
suffix:semicolon
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
r_int
op_star
id|hist
suffix:semicolon
r_int
id|hist_bytes
op_assign
id|mp-&gt;m_ihsize
op_star
r_sizeof
(paren
r_int
)paren
suffix:semicolon
r_int
id|hist2
(braket
l_int|21
)braket
suffix:semicolon
id|hist
op_assign
(paren
r_int
op_star
)paren
id|kmalloc
c_func
(paren
id|hist_bytes
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hist
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;xfsidbg_xihash: kmalloc(%d) failed!&bslash;n&quot;
comma
id|hist_bytes
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|mp-&gt;m_ihsize
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ih
op_assign
id|mp-&gt;m_ihash
op_plus
id|i
suffix:semicolon
id|j
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|ip
op_assign
id|ih-&gt;ih_next
suffix:semicolon
id|ip
op_ne
l_int|NULL
suffix:semicolon
id|ip
op_assign
id|ip-&gt;i_next
)paren
id|j
op_increment
suffix:semicolon
id|hist
(braket
id|i
)braket
op_assign
id|j
suffix:semicolon
)brace
id|numzeros
op_assign
id|total
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|21
suffix:semicolon
id|i
op_increment
)paren
id|hist2
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|mp-&gt;m_ihsize
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%d &quot;
comma
id|hist
(braket
id|i
)braket
)paren
suffix:semicolon
id|total
op_add_assign
id|hist
(braket
id|i
)braket
suffix:semicolon
id|numzeros
op_add_assign
id|hist
(braket
id|i
)braket
op_eq
l_int|0
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|hist
(braket
id|i
)braket
OG
l_int|20
)paren
id|j
op_assign
l_int|20
suffix:semicolon
r_else
id|j
op_assign
id|hist
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|j
op_le
l_int|20
)paren
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;xfsidbg_xihash: (j &gt; 20)/%d @ line # %d&bslash;n&quot;
comma
id|j
comma
id|__LINE__
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|hist2
(braket
id|j
)braket
op_increment
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;total inodes = %d, average length = %d, adjusted average = %d &bslash;n&quot;
comma
id|total
comma
id|total
op_div
id|mp-&gt;m_ihsize
comma
id|total
op_div
(paren
id|mp-&gt;m_ihsize
op_minus
id|numzeros
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|21
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;%d - %d , &quot;
comma
id|i
comma
id|hist2
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|hist
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Command to print xfs inodes: kp xnode &lt;addr&gt;&n; */
r_static
r_void
DECL|function|xfsidbg_xnode
id|xfsidbg_xnode
c_func
(paren
id|xfs_inode_t
op_star
id|ip
)paren
(brace
r_static
r_char
op_star
id|tab_flags
(braket
)braket
op_assign
(brace
l_string|&quot;grio&quot;
comma
multiline_comment|/* XFS_IGRIO */
l_string|&quot;uiosize&quot;
comma
multiline_comment|/* XFS_IUIOSZ */
l_string|&quot;quiesce&quot;
comma
multiline_comment|/* XFS_IQUIESCE */
l_string|&quot;reclaim&quot;
comma
multiline_comment|/* XFS_IRECLAIM */
l_int|NULL
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;hash 0x%p next 0x%p prevp 0x%p mount 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_hash
comma
id|ip-&gt;i_next
comma
id|ip-&gt;i_prevp
comma
id|ip-&gt;i_mount
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;mnext 0x%p mprev 0x%p vnode 0x%p &bslash;n&quot;
comma
id|ip-&gt;i_mnext
comma
id|ip-&gt;i_mprev
comma
id|XFS_ITOV_NULL
c_func
(paren
id|ip
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dev %x ino %s&bslash;n&quot;
comma
id|ip-&gt;i_mount-&gt;m_dev
comma
id|xfs_fmtino
c_func
(paren
id|ip-&gt;i_ino
comma
id|ip-&gt;i_mount
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;blkno 0x%llx len 0x%x boffset 0x%x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|ip-&gt;i_blkno
comma
id|ip-&gt;i_len
comma
id|ip-&gt;i_boffset
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;transp 0x%p &amp;itemp 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_transp
comma
id|ip-&gt;i_itemp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;lock 0x%p &amp;iolock 0x%p&quot;
comma
op_amp
id|ip-&gt;i_lock
comma
op_amp
id|ip-&gt;i_iolock
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;flock 0x%p (%d) pincount 0x%x&bslash;n&quot;
comma
op_amp
id|ip-&gt;i_flock
comma
id|valusema
c_func
(paren
op_amp
id|ip-&gt;i_flock
)paren
comma
id|xfs_ipincount
c_func
(paren
id|ip
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;udquotp 0x%p gdquotp 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_udquot
comma
id|ip-&gt;i_gdquot
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;new_size %Lx&bslash;n&quot;
comma
id|ip-&gt;i_iocore.io_new_size
)paren
suffix:semicolon
id|printflags
c_func
(paren
(paren
r_int
)paren
id|ip-&gt;i_flags
comma
id|tab_flags
comma
l_string|&quot;flags&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;update_core 0x%x update size 0x%x&bslash;n&quot;
comma
(paren
r_int
)paren
(paren
id|ip-&gt;i_update_core
)paren
comma
(paren
r_int
)paren
id|ip-&gt;i_update_size
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;gen 0x%x delayed blks %d&quot;
comma
id|ip-&gt;i_gen
comma
id|ip-&gt;i_delayed_blks
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;chash 0x%p cnext 0x%p cprev 0x%p&bslash;n&quot;
comma
id|ip-&gt;i_chash
comma
id|ip-&gt;i_cnext
comma
id|ip-&gt;i_cprev
)paren
suffix:semicolon
id|xfs_xnode_fork
c_func
(paren
l_string|&quot;data&quot;
comma
op_amp
id|ip-&gt;i_df
)paren
suffix:semicolon
id|xfs_xnode_fork
c_func
(paren
l_string|&quot;attr&quot;
comma
id|ip-&gt;i_afp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|xfs_prdinode_core
c_func
(paren
op_amp
id|ip-&gt;i_d
comma
id|ARCH_NOCONVERT
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xcore
id|xfsidbg_xcore
c_func
(paren
id|xfs_iocore_t
op_star
id|io
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;io_obj 0x%p io_flags 0x%x io_mount 0x%p&bslash;n&quot;
comma
id|io-&gt;io_obj
comma
id|io-&gt;io_flags
comma
id|io-&gt;io_mount
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;new_size %Lx&bslash;n&quot;
comma
id|io-&gt;io_new_size
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Command to print xfs inode cluster hash table: kp xchash &lt;addr&gt;&n; */
r_static
r_void
DECL|function|xfsidbg_xchash
id|xfsidbg_xchash
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_int
id|i
suffix:semicolon
id|xfs_chash_t
op_star
id|ch
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;m_chash 0x%p size %d&bslash;n&quot;
comma
id|mp-&gt;m_chash
comma
id|mp-&gt;m_chsize
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|mp-&gt;m_chsize
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ch
op_assign
id|mp-&gt;m_chash
op_plus
id|i
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;[%3d] ch 0x%p chashlist 0x%p&bslash;n&quot;
comma
id|i
comma
id|ch
comma
id|ch-&gt;ch_list
)paren
suffix:semicolon
id|xfsidbg_xchashlist
c_func
(paren
id|ch-&gt;ch_list
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Command to print xfs inode cluster hash list: kp xchashlist &lt;addr&gt;&n; */
r_static
r_void
DECL|function|xfsidbg_xchashlist
id|xfsidbg_xchashlist
c_func
(paren
id|xfs_chashlist_t
op_star
id|chl
)paren
(brace
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
r_while
c_loop
(paren
id|chl
op_ne
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;hashlist inode 0x%p blkno %lld buf 0x%p&quot;
comma
id|chl-&gt;chl_ip
comma
(paren
r_int
r_int
)paren
id|chl-&gt;chl_blkno
comma
id|chl-&gt;chl_buf
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* print inodes on chashlist */
id|ip
op_assign
id|chl-&gt;chl_ip
suffix:semicolon
r_do
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;0x%p &quot;
comma
id|ip
)paren
suffix:semicolon
id|ip
op_assign
id|ip-&gt;i_cnext
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ip
op_ne
id|chl-&gt;chl_ip
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|chl
op_assign
id|chl-&gt;chl_next
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Print xfs per-ag data structures for filesystem.&n; */
r_static
r_void
DECL|function|xfsidbg_xperag
id|xfsidbg_xperag
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_agnumber_t
id|agno
suffix:semicolon
id|xfs_perag_t
op_star
id|pag
suffix:semicolon
r_int
id|busy
suffix:semicolon
id|pag
op_assign
id|mp-&gt;m_perag
suffix:semicolon
r_for
c_loop
(paren
id|agno
op_assign
l_int|0
suffix:semicolon
id|agno
OL
id|mp-&gt;m_sb.sb_agcount
suffix:semicolon
id|agno
op_increment
comma
id|pag
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;ag %d f_init %d i_init %d&bslash;n&quot;
comma
id|agno
comma
id|pag-&gt;pagf_init
comma
id|pag-&gt;pagi_init
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pag-&gt;pagf_init
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;    f_levels[b,c] %d,%d f_flcount %d f_freeblks %d f_longest %d&bslash;n&quot;
l_string|&quot;    f__metadata %d&bslash;n&quot;
comma
id|pag-&gt;pagf_levels
(braket
id|XFS_BTNUM_BNOi
)braket
comma
id|pag-&gt;pagf_levels
(braket
id|XFS_BTNUM_CNTi
)braket
comma
id|pag-&gt;pagf_flcount
comma
id|pag-&gt;pagf_freeblks
comma
id|pag-&gt;pagf_longest
comma
id|pag-&gt;pagf_metadata
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pag-&gt;pagi_init
)paren
id|kdb_printf
c_func
(paren
l_string|&quot;    i_freecount %d i_inodeok %d&bslash;n&quot;
comma
id|pag-&gt;pagi_freecount
comma
id|pag-&gt;pagi_inodeok
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pag-&gt;pagf_init
)paren
(brace
r_for
c_loop
(paren
id|busy
op_assign
l_int|0
suffix:semicolon
id|busy
OL
id|XFS_PAGB_NUM_SLOTS
suffix:semicolon
id|busy
op_increment
)paren
(brace
r_if
c_cond
(paren
id|pag-&gt;pagb_list
(braket
id|busy
)braket
dot
id|busy_length
op_ne
l_int|0
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;&t; %04d: start %d length %d tp 0x%p&bslash;n&quot;
comma
id|busy
comma
id|pag-&gt;pagb_list
(braket
id|busy
)braket
dot
id|busy_start
comma
id|pag-&gt;pagb_list
(braket
id|busy
)braket
dot
id|busy_length
comma
id|pag-&gt;pagb_list
(braket
id|busy
)braket
dot
id|busy_tp
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#ifdef CONFIG_XFS_QUOTA
r_static
r_void
DECL|function|xfsidbg_xqm
id|xfsidbg_xqm
c_func
(paren
)paren
(brace
r_if
c_cond
(paren
id|xfs_Gqm
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;NULL XQM!!&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;usrhtab 0x%p&bslash;tgrphtab 0x%p&bslash;tndqfree 0x%x&bslash;thashmask 0x%x&bslash;n&quot;
comma
id|xfs_Gqm-&gt;qm_usr_dqhtable
comma
id|xfs_Gqm-&gt;qm_grp_dqhtable
comma
id|xfs_Gqm-&gt;qm_dqfreelist.qh_nelems
comma
id|xfs_Gqm-&gt;qm_dqhashmask
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&amp;freelist 0x%p, totaldquots 0x%x nrefs 0x%x&bslash;n&quot;
comma
op_amp
id|xfs_Gqm-&gt;qm_dqfreelist
comma
id|atomic_read
c_func
(paren
op_amp
id|xfs_Gqm-&gt;qm_totaldquots
)paren
comma
id|xfs_Gqm-&gt;qm_nrefs
)paren
suffix:semicolon
)brace
macro_line|#endif
r_static
r_void
DECL|function|xfsidbg_xqm_diskdq
id|xfsidbg_xqm_diskdq
c_func
(paren
id|xfs_disk_dquot_t
op_star
id|d
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;magic 0x%x&bslash;tversion 0x%x&bslash;tID 0x%x (%d)&bslash;t&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|d-&gt;d_magic
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|d-&gt;d_version
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|d-&gt;d_id
comma
id|ARCH_CONVERT
)paren
comma
id|INT_GET
c_func
(paren
id|d-&gt;d_id
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;bhard 0x%llx&bslash;tbsoft 0x%llx&bslash;tihard 0x%llx&bslash;tisoft 0x%llx&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_blk_hardlimit
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_blk_softlimit
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_ino_hardlimit
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_ino_softlimit
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;bcount 0x%llx icount 0x%llx&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_bcount
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
r_int
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_icount
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;btimer 0x%x itimer 0x%x &bslash;n&quot;
comma
(paren
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_btimer
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
)paren
id|INT_GET
c_func
(paren
id|d-&gt;d_itimer
comma
id|ARCH_CONVERT
)paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xqm_dquot
id|xfsidbg_xqm_dquot
c_func
(paren
id|xfs_dquot_t
op_star
id|dqp
)paren
(brace
r_static
r_char
op_star
id|qflags
(braket
)braket
op_assign
(brace
l_string|&quot;USR&quot;
comma
l_string|&quot;GRP&quot;
comma
l_string|&quot;LCKD&quot;
comma
l_string|&quot;FLKD&quot;
comma
l_string|&quot;DIRTY&quot;
comma
l_string|&quot;WANT&quot;
comma
l_string|&quot;INACT&quot;
comma
l_string|&quot;MARKER&quot;
comma
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;mount 0x%p hash 0x%p gdquotp 0x%p HL_next 0x%p HL_prevp 0x%p&bslash;n&quot;
comma
id|dqp-&gt;q_mount
comma
id|dqp-&gt;q_hash
comma
id|dqp-&gt;q_gdquot
comma
id|dqp-&gt;HL_NEXT
comma
id|dqp-&gt;HL_PREVP
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;MPL_next 0x%p MPL_prevp 0x%p FL_next 0x%p FL_prev 0x%p&bslash;n&quot;
comma
id|dqp-&gt;MPL_NEXT
comma
id|dqp-&gt;MPL_PREVP
comma
id|dqp-&gt;dq_flnext
comma
id|dqp-&gt;dq_flprev
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nrefs 0x%x, res_bcount %d, &quot;
comma
id|dqp-&gt;q_nrefs
comma
(paren
r_int
)paren
id|dqp-&gt;q_res_bcount
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|dqp-&gt;dq_flags
comma
id|qflags
comma
l_string|&quot;flags:&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;nblkno 0x%llx&bslash;tboffset 0x%x&bslash;n&quot;
comma
(paren
r_int
r_int
r_int
)paren
id|dqp-&gt;q_blkno
comma
(paren
r_int
)paren
id|dqp-&gt;q_bufoffset
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;qlock 0x%p  flock 0x%p (%s) pincount 0x%x&bslash;n&quot;
comma
op_amp
id|dqp-&gt;q_qlock
comma
op_amp
id|dqp-&gt;q_flock
comma
(paren
id|valusema
c_func
(paren
op_amp
id|dqp-&gt;q_flock
)paren
op_le
l_int|0
)paren
ques
c_cond
l_string|&quot;LCK&quot;
suffix:colon
l_string|&quot;UNLKD&quot;
comma
id|dqp-&gt;q_pincount
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;disk-dquot 0x%p&bslash;n&quot;
comma
op_amp
id|dqp-&gt;q_core
)paren
suffix:semicolon
id|xfsidbg_xqm_diskdq
c_func
(paren
op_amp
id|dqp-&gt;q_core
)paren
suffix:semicolon
)brace
DECL|macro|XQMIDBG_LIST_PRINT
mdefine_line|#define XQMIDBG_LIST_PRINT(l, NXT) &bslash;&n;{ &bslash;&n;&t;  xfs_dquot_t&t;*dqp;&bslash;&n;&t;  int i = 0; &bslash;&n;&t;  kdb_printf(&quot;[#%d dquots]&bslash;n&quot;, (int) (l)-&gt;qh_nelems); &bslash;&n;&t;  for (dqp = (l)-&gt;qh_next; dqp != NULL; dqp = dqp-&gt;NXT) {&bslash;&n;&t;   kdb_printf( &bslash;&n;&t;      &quot;&bslash;t%d. [0x%p] &bslash;&quot;%d (%s)&bslash;&quot;&bslash;t blks = %d, inos = %d refs = %d&bslash;n&quot;, &bslash;&n;&t;&t;&t; ++i, dqp, (int) INT_GET(dqp-&gt;q_core.d_id, ARCH_CONVERT), &bslash;&n;&t;&t;&t; DQFLAGTO_TYPESTR(dqp),      &bslash;&n;&t;&t;&t; (int) INT_GET(dqp-&gt;q_core.d_bcount, ARCH_CONVERT), &bslash;&n;&t;&t;&t; (int) INT_GET(dqp-&gt;q_core.d_icount, ARCH_CONVERT), &bslash;&n;&t;&t;&t; (int) dqp-&gt;q_nrefs); }&bslash;&n;&t;  kdb_printf(&quot;&bslash;n&quot;); &bslash;&n;}
r_static
r_void
DECL|function|xfsidbg_xqm_dqattached_inos
id|xfsidbg_xqm_dqattached_inos
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_inode_t
op_star
id|ip
suffix:semicolon
r_int
id|n
op_assign
l_int|0
suffix:semicolon
id|ip
op_assign
id|mp-&gt;m_inodes
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|ip-&gt;i_mount
op_eq
l_int|NULL
)paren
(brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ip-&gt;i_udquot
op_logical_or
id|ip-&gt;i_gdquot
)paren
(brace
id|n
op_increment
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inode = 0x%p, ino %d: udq 0x%p, gdq 0x%p&bslash;n&quot;
comma
id|ip
comma
(paren
r_int
)paren
id|ip-&gt;i_ino
comma
id|ip-&gt;i_udquot
comma
id|ip-&gt;i_gdquot
)paren
suffix:semicolon
)brace
id|ip
op_assign
id|ip-&gt;i_mnext
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ip
op_ne
id|mp-&gt;m_inodes
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;nNumber of inodes with dquots attached: %d&bslash;n&quot;
comma
id|n
)paren
suffix:semicolon
)brace
macro_line|#ifdef&t;CONFIG_XFS_QUOTA
r_static
r_void
DECL|function|xfsidbg_xqm_freelist_print
id|xfsidbg_xqm_freelist_print
c_func
(paren
id|xfs_frlist_t
op_star
id|qlist
comma
r_char
op_star
id|title
)paren
(brace
id|xfs_dquot_t
op_star
id|dq
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;%s (#%d)&bslash;n&quot;
comma
id|title
comma
(paren
r_int
)paren
id|qlist-&gt;qh_nelems
)paren
suffix:semicolon
id|FOREACH_DQUOT_IN_FREELIST
c_func
(paren
id|dq
comma
id|qlist
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;t%d.&bslash;t&bslash;&quot;%d (%s:0x%p)&bslash;&quot;&bslash;t bcnt = %d, icnt = %d &quot;
l_string|&quot;refs = %d&bslash;n&quot;
comma
op_increment
id|i
comma
(paren
r_int
)paren
id|INT_GET
c_func
(paren
id|dq-&gt;q_core.d_id
comma
id|ARCH_CONVERT
)paren
comma
id|DQFLAGTO_TYPESTR
c_func
(paren
id|dq
)paren
comma
id|dq
comma
(paren
r_int
)paren
id|INT_GET
c_func
(paren
id|dq-&gt;q_core.d_bcount
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
)paren
id|INT_GET
c_func
(paren
id|dq-&gt;q_core.d_icount
comma
id|ARCH_CONVERT
)paren
comma
(paren
r_int
)paren
id|dq-&gt;q_nrefs
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|xfsidbg_xqm_freelist
id|xfsidbg_xqm_freelist
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|xfs_Gqm
)paren
(brace
id|xfsidbg_xqm_freelist_print
c_func
(paren
op_amp
(paren
id|xfs_Gqm-&gt;qm_dqfreelist
)paren
comma
l_string|&quot;Freelist&quot;
)paren
suffix:semicolon
)brace
r_else
id|kdb_printf
c_func
(paren
l_string|&quot;NULL XQM!!&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xqm_htab
id|xfsidbg_xqm_htab
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
id|xfs_dqhash_t
op_star
id|h
suffix:semicolon
r_if
c_cond
(paren
id|xfs_Gqm
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;NULL XQM!!&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|xfs_Gqm-&gt;qm_dqhashmask
suffix:semicolon
id|i
op_increment
)paren
(brace
id|h
op_assign
op_amp
id|xfs_Gqm-&gt;qm_usr_dqhtable
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|h-&gt;qh_next
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;USR %d: &quot;
comma
id|i
)paren
suffix:semicolon
id|XQMIDBG_LIST_PRINT
c_func
(paren
id|h
comma
id|HL_NEXT
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|xfs_Gqm-&gt;qm_dqhashmask
suffix:semicolon
id|i
op_increment
)paren
(brace
id|h
op_assign
op_amp
id|xfs_Gqm-&gt;qm_grp_dqhtable
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|h-&gt;qh_next
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;GRP %d: &quot;
comma
id|i
)paren
suffix:semicolon
id|XQMIDBG_LIST_PRINT
c_func
(paren
id|h
comma
id|HL_NEXT
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|xfsidbg_xqm_mplist
id|xfsidbg_xqm_mplist
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_if
c_cond
(paren
id|mp-&gt;m_quotainfo
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;NULL quotainfo&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|XQMIDBG_LIST_PRINT
c_func
(paren
op_amp
(paren
id|mp-&gt;m_quotainfo-&gt;qi_dqlist
)paren
comma
id|MPL_NEXT
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xqm_qinfo
id|xfsidbg_xqm_qinfo
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
r_if
c_cond
(paren
id|mp
op_eq
l_int|NULL
op_logical_or
id|mp-&gt;m_quotainfo
op_eq
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;NULL quotainfo&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;uqip 0x%p, gqip 0x%p, &amp;pinlock 0x%p &amp;dqlist 0x%p&bslash;n&quot;
comma
id|mp-&gt;m_quotainfo-&gt;qi_uquotaip
comma
id|mp-&gt;m_quotainfo-&gt;qi_gquotaip
comma
op_amp
id|mp-&gt;m_quotainfo-&gt;qi_pinlock
comma
op_amp
id|mp-&gt;m_quotainfo-&gt;qi_dqlist
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;nreclaims %d, btmlimit 0x%x, itmlimit 0x%x, RTbtmlim 0x%x&bslash;n&quot;
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_dqreclaims
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_btimelimit
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_itimelimit
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_rtbtimelimit
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;bwarnlim 0x%x, iwarnlim 0x%x, &amp;qofflock 0x%p, &quot;
l_string|&quot;chunklen 0x%x, dqperchunk 0x%x&bslash;n&quot;
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_bwarnlimit
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_iwarnlimit
comma
op_amp
id|mp-&gt;m_quotainfo-&gt;qi_quotaofflock
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_dqchunklen
comma
(paren
r_int
)paren
id|mp-&gt;m_quotainfo-&gt;qi_dqperchunk
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|xfsidbg_xqm_tpdqinfo
id|xfsidbg_xqm_tpdqinfo
c_func
(paren
id|xfs_trans_t
op_star
id|tp
)paren
(brace
id|xfs_dqtrx_t
op_star
id|qa
comma
op_star
id|q
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dqinfo 0x%p&bslash;n&quot;
comma
id|tp-&gt;t_dqinfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tp-&gt;t_dqinfo
)paren
r_return
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;USR: &bslash;n&quot;
)paren
suffix:semicolon
id|qa
op_assign
id|tp-&gt;t_dqinfo-&gt;dqa_usrdquots
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|2
suffix:semicolon
id|j
op_increment
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|XFS_QM_TRANS_MAXDQS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|qa
(braket
id|i
)braket
dot
id|qt_dquot
op_eq
l_int|NULL
)paren
r_break
suffix:semicolon
id|q
op_assign
op_amp
id|qa
(braket
id|i
)braket
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;&quot;%d&bslash;&quot;[0x%p]: bres %d, bres-used %d, bdelta %d, del-delta %d, icnt-delta %d&bslash;n&quot;
comma
(paren
r_int
)paren
id|q-&gt;qt_dquot-&gt;q_core.d_id
comma
id|q-&gt;qt_dquot
comma
(paren
r_int
)paren
id|q-&gt;qt_blk_res
comma
(paren
r_int
)paren
id|q-&gt;qt_blk_res_used
comma
(paren
r_int
)paren
id|q-&gt;qt_bcount_delta
comma
(paren
r_int
)paren
id|q-&gt;qt_delbcnt_delta
comma
(paren
r_int
)paren
id|q-&gt;qt_icount_delta
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
op_eq
l_int|0
)paren
(brace
id|qa
op_assign
id|tp-&gt;t_dqinfo-&gt;dqa_grpdquots
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;GRP: &bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Print xfs superblock.&n; */
r_static
r_void
DECL|function|xfsidbg_xsb
id|xfsidbg_xsb
c_func
(paren
id|xfs_sb_t
op_star
id|sbp
comma
r_int
id|convert
)paren
(brace
id|xfs_arch_t
id|arch
op_assign
id|convert
ques
c_cond
id|ARCH_CONVERT
suffix:colon
id|ARCH_NOCONVERT
suffix:semicolon
id|kdb_printf
c_func
(paren
id|convert
ques
c_cond
l_string|&quot;&lt;converted&gt;&bslash;n&quot;
suffix:colon
l_string|&quot;&lt;unconverted&gt;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;magicnum 0x%x blocksize 0x%x dblocks %Ld rblocks %Ld&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_magicnum
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_blocksize
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_dblocks
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rblocks
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rextents %Ld uuid %s logstart %s&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rextents
comma
id|arch
)paren
comma
id|xfs_fmtuuid
c_func
(paren
op_amp
id|sbp-&gt;sb_uuid
)paren
comma
id|xfs_fmtfsblock
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_logstart
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rootino %s &quot;
comma
id|xfs_fmtino
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rootino
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rbmino %s &quot;
comma
id|xfs_fmtino
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rbmino
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rsumino %s&bslash;n&quot;
comma
id|xfs_fmtino
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rsumino
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rextsize 0x%x agblocks 0x%x agcount 0x%x rbmblocks 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rextsize
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_agblocks
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_agcount
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rbmblocks
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;logblocks 0x%x versionnum 0x%x sectsize 0x%x inodesize 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_logblocks
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_versionnum
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_sectsize
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inodesize
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inopblock 0x%x blocklog 0x%x sectlog 0x%x inodelog 0x%x&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inopblock
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_blocklog
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_sectlog
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inodelog
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;inopblog %d agblklog %d rextslog %d inprogress %d imax_pct %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inopblog
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_agblklog
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_rextslog
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inprogress
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_imax_pct
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;icount %Lx ifree %Lx fdblocks %Lx frextents %Lx&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_icount
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_ifree
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_fdblocks
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_frextents
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;uquotino %s &quot;
comma
id|xfs_fmtino
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_uquotino
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;gquotino %s &quot;
comma
id|xfs_fmtino
c_func
(paren
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_gquotino
comma
id|arch
)paren
comma
l_int|NULL
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;qflags 0x%x flags 0x%x shared_vn %d inoaligmt %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_qflags
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_flags
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_shared_vn
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_inoalignmt
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;unit %d width %d dirblklog %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_unit
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_width
comma
id|arch
)paren
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_dirblklog
comma
id|arch
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;log sunit %d&bslash;n&quot;
comma
id|INT_GET
c_func
(paren
id|sbp-&gt;sb_logsunit
comma
id|arch
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print out an XFS transaction structure.  Print summaries for&n; * each of the items.&n; */
r_static
r_void
DECL|function|xfsidbg_xtp
id|xfsidbg_xtp
c_func
(paren
id|xfs_trans_t
op_star
id|tp
)paren
(brace
id|xfs_log_item_chunk_t
op_star
id|licp
suffix:semicolon
id|xfs_log_item_desc_t
op_star
id|lidp
suffix:semicolon
id|xfs_log_busy_chunk_t
op_star
id|lbcp
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|chunk
suffix:semicolon
r_static
r_char
op_star
id|xtp_flags
(braket
)braket
op_assign
(brace
l_string|&quot;dirty&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;sb_dirty&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;perm_log_res&quot;
comma
multiline_comment|/* 0x4 */
l_string|&quot;sync&quot;
comma
multiline_comment|/* 0x08 */
l_string|&quot;dq_dirty&quot;
comma
multiline_comment|/* 0x10 */
l_int|0
)brace
suffix:semicolon
r_static
r_char
op_star
id|lid_flags
(braket
)braket
op_assign
(brace
l_string|&quot;dirty&quot;
comma
multiline_comment|/* 0x1 */
l_string|&quot;pinned&quot;
comma
multiline_comment|/* 0x2 */
l_string|&quot;sync unlock&quot;
comma
multiline_comment|/* 0x4 */
l_string|&quot;buf stale&quot;
comma
multiline_comment|/* 0x8 */
l_int|0
)brace
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;tp 0x%p type &quot;
comma
id|tp
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|tp-&gt;t_type
)paren
(brace
r_case
id|XFS_TRANS_SETATTR_NOT_SIZE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;SETATTR_NOT_SIZE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_SETATTR_SIZE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;SETATTR_SIZE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_INACTIVE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;INACTIVE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_CREATE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;CREATE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_CREATE_TRUNC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;CREATE_TRUNC&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_TRUNCATE_FILE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;TRUNCATE_FILE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_REMOVE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;REMOVE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_LINK
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;LINK&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_RENAME
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;RENAME&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_MKDIR
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;MKDIR&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_RMDIR
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;RMDIR&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_SYMLINK
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;SYMLINK&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_SET_DMATTRS
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;SET_DMATTRS&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_GROWFS
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;GROWFS&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_STRAT_WRITE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;STRAT_WRITE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_DIOSTRAT
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;DIOSTRAT&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_WRITE_SYNC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;WRITE_SYNC&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_WRITEID
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;WRITEID&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ADDAFORK
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ADDAFORK&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ATTRINVAL
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATTRINVAL&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ATRUNCATE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATRUNCATE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ATTR_SET
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATTR_SET&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ATTR_RM
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATTR_RM&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_ATTR_FLAG
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;ATTR_FLAG&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_CLEAR_AGI_BUCKET
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;CLEAR_AGI_BUCKET&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_SBCHANGE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_SBCHANGE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_QUOTAOFF
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_QUOTAOFF&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_DQALLOC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_DQALLOC&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_SETQLIM
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_SETQLIM&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_DQCLUSTER
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_DQCLUSTER&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_QINOCREATE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_QINOCREATE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_QM_QUOTAOFF_END
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;QM_QOFF_END&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_SB_UNIT
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;SB_UNIT&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_FSYNC_TS
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;FSYNC_TS&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_GROWFSRT_ALLOC
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;GROWFSRT_ALLOC&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_GROWFSRT_ZERO
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;GROWFSRT_ZERO&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|XFS_TRANS_GROWFSRT_FREE
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;GROWFSRT_FREE&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|kdb_printf
c_func
(paren
l_string|&quot;0x%x&quot;
comma
id|tp-&gt;t_type
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot; mount 0x%p&bslash;n&quot;
comma
id|tp-&gt;t_mountp
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;flags &quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|tp-&gt;t_flags
comma
id|xtp_flags
comma
l_string|&quot;xtp&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;callback 0x%p forw 0x%p back 0x%p&bslash;n&quot;
comma
op_amp
id|tp-&gt;t_logcb
comma
id|tp-&gt;t_forw
comma
id|tp-&gt;t_back
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;log res %d block res %d block res used %d&bslash;n&quot;
comma
id|tp-&gt;t_log_res
comma
id|tp-&gt;t_blk_res
comma
id|tp-&gt;t_blk_res_used
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rt res %d rt res used %d&bslash;n&quot;
comma
id|tp-&gt;t_rtx_res
comma
id|tp-&gt;t_rtx_res_used
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ticket 0x%lx lsn %s commit_lsn %s&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|tp-&gt;t_ticket
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
id|tp-&gt;t_lsn
)paren
comma
id|xfs_fmtlsn
c_func
(paren
op_amp
id|tp-&gt;t_commit_lsn
)paren
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;callback 0x%p callarg 0x%p&bslash;n&quot;
comma
id|tp-&gt;t_callback
comma
id|tp-&gt;t_callarg
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;icount delta %ld ifree delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_icount_delta
comma
id|tp-&gt;t_ifree_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;blocks delta %ld res blocks delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_fdblocks_delta
comma
id|tp-&gt;t_res_fdblocks_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rt delta %ld res rt delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_frextents_delta
comma
id|tp-&gt;t_res_frextents_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ag freeblks delta %ld ag flist delta %ld ag btree delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_ag_freeblks_delta
comma
id|tp-&gt;t_ag_flist_delta
comma
id|tp-&gt;t_ag_btree_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dblocks delta %ld agcount delta %ld imaxpct delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_dblocks_delta
comma
id|tp-&gt;t_agcount_delta
comma
id|tp-&gt;t_imaxpct_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rextsize delta %ld rbmblocks delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_rextsize_delta
comma
id|tp-&gt;t_rbmblocks_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;rblocks delta %ld rextents delta %ld rextslog delta %ld&bslash;n&quot;
comma
id|tp-&gt;t_rblocks_delta
comma
id|tp-&gt;t_rextents_delta
comma
id|tp-&gt;t_rextslog_delta
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;dqinfo 0x%p&bslash;n&quot;
comma
id|tp-&gt;t_dqinfo
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;log items:&bslash;n&quot;
)paren
suffix:semicolon
id|licp
op_assign
op_amp
id|tp-&gt;t_items
suffix:semicolon
id|chunk
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|licp
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|XFS_LIC_ARE_ALL_FREE
c_func
(paren
id|licp
)paren
)paren
(brace
id|licp
op_assign
id|licp-&gt;lic_next
suffix:semicolon
id|chunk
op_increment
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|licp-&gt;lic_unused
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|XFS_LIC_ISFREE
c_func
(paren
id|licp
comma
id|i
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
id|lidp
op_assign
id|XFS_LIC_SLOT
c_func
(paren
id|licp
comma
id|i
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;chunk %d index %d item 0x%p size %d&bslash;n&quot;
comma
id|chunk
comma
id|i
comma
id|lidp-&gt;lid_item
comma
id|lidp-&gt;lid_size
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;flags &quot;
)paren
suffix:semicolon
id|printflags
c_func
(paren
id|lidp-&gt;lid_flags
comma
id|lid_flags
comma
l_string|&quot;lic&quot;
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|xfsidbg_xlogitem
c_func
(paren
id|lidp-&gt;lid_item
)paren
suffix:semicolon
)brace
id|chunk
op_increment
suffix:semicolon
id|licp
op_assign
id|licp-&gt;lic_next
suffix:semicolon
)brace
id|kdb_printf
c_func
(paren
l_string|&quot;log busy free %d, list:&bslash;n&quot;
comma
id|tp-&gt;t_busy_free
)paren
suffix:semicolon
id|lbcp
op_assign
op_amp
id|tp-&gt;t_busy
suffix:semicolon
id|chunk
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|lbcp
op_ne
l_int|NULL
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;Chunk %d at 0x%p next 0x%p free 0x%08x unused %d&bslash;n&quot;
comma
id|chunk
comma
id|lbcp
comma
id|lbcp-&gt;lbc_next
comma
id|lbcp-&gt;lbc_free
comma
id|lbcp-&gt;lbc_unused
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|XFS_LBC_NUM_SLOTS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|kdb_printf
c_func
(paren
l_string|&quot;  %02d: ag %d idx %d&bslash;n&quot;
comma
id|i
comma
id|lbcp-&gt;lbc_busy
(braket
id|i
)braket
dot
id|lbc_ag
comma
id|lbcp-&gt;lbc_busy
(braket
id|i
)braket
dot
id|lbc_idx
)paren
suffix:semicolon
)brace
id|lbcp
op_assign
id|lbcp-&gt;lbc_next
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|xfsidbg_xtrans_res
id|xfsidbg_xtrans_res
c_func
(paren
id|xfs_mount_t
op_star
id|mp
)paren
(brace
id|xfs_trans_reservations_t
op_star
id|xtrp
suffix:semicolon
id|xtrp
op_assign
op_amp
id|mp-&gt;m_reservations
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;write: %d&bslash;ttruncate: %d&bslash;trename: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_write
comma
id|xtrp-&gt;tr_itruncate
comma
id|xtrp-&gt;tr_rename
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;link: %d&bslash;tremove: %d&bslash;tsymlink: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_link
comma
id|xtrp-&gt;tr_remove
comma
id|xtrp-&gt;tr_symlink
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;create: %d&bslash;tmkdir: %d&bslash;tifree: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_create
comma
id|xtrp-&gt;tr_mkdir
comma
id|xtrp-&gt;tr_ifree
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;ichange: %d&bslash;tgrowdata: %d&bslash;tswrite: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_ichange
comma
id|xtrp-&gt;tr_growdata
comma
id|xtrp-&gt;tr_swrite
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;addafork: %d&bslash;twriteid: %d&bslash;tattrinval: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_addafork
comma
id|xtrp-&gt;tr_writeid
comma
id|xtrp-&gt;tr_attrinval
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;attrset: %d&bslash;tattrrm: %d&bslash;tclearagi: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_attrset
comma
id|xtrp-&gt;tr_attrrm
comma
id|xtrp-&gt;tr_clearagi
)paren
suffix:semicolon
id|kdb_printf
c_func
(paren
l_string|&quot;growrtalloc: %d&bslash;tgrowrtzero: %d&bslash;tgrowrtfree: %d&bslash;n&quot;
comma
id|xtrp-&gt;tr_growrtalloc
comma
id|xtrp-&gt;tr_growrtzero
comma
id|xtrp-&gt;tr_growrtfree
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|xfsidbg_init
)paren
id|module_exit
c_func
(paren
id|xfsidbg_exit
)paren
eof
