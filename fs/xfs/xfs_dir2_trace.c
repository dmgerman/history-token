multiline_comment|/*&n; * Copyright (c) 2000-2003 Silicon Graphics, Inc.  All Rights Reserved.&n; *&n; * This program is free software; you can redistribute it and/or modify it&n; * under the terms of version 2 of the GNU General Public License as&n; * published by the Free Software Foundation.&n; *&n; * This program is distributed in the hope that it would be useful, but&n; * WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&n; *&n; * Further, this software is distributed without any warranty that it is&n; * free of the rightful claim of any third person regarding infringement&n; * or the like.  Any license provided herein, whether implied or&n; * otherwise, applies only to this software file.  Patent licenses, if&n; * any, provided herein do not apply to combinations of this program with&n; * other software, or any other product whatsoever.&n; *&n; * You should have received a copy of the GNU General Public License along&n; * with this program; if not, write the Free Software Foundation, Inc., 59&n; * Temple Place - Suite 330, Boston MA 02111-1307, USA.&n; *&n; * Contact information: Silicon Graphics, Inc., 1600 Amphitheatre Pkwy,&n; * Mountain View, CA  94043, or:&n; *&n; * http://www.sgi.com&n; *&n; * For further information regarding this notice, see:&n; *&n; * http://oss.sgi.com/projects/GenInfo/SGIGPLNoticeExplan/&n; */
multiline_comment|/*&n; * xfs_dir2_trace.c&n; * Tracing for xfs v2 directories.&n; */
macro_line|#include &quot;xfs.h&quot;
macro_line|#include &quot;xfs_types.h&quot;
macro_line|#include &quot;xfs_inum.h&quot;
macro_line|#include &quot;xfs_dir.h&quot;
macro_line|#include &quot;xfs_dir2.h&quot;
macro_line|#include &quot;xfs_bmap_btree.h&quot;
macro_line|#include &quot;xfs_attr_sf.h&quot;
macro_line|#include &quot;xfs_dir_sf.h&quot;
macro_line|#include &quot;xfs_dir2_sf.h&quot;
macro_line|#include &quot;xfs_dinode.h&quot;
macro_line|#include &quot;xfs_inode.h&quot;
macro_line|#include &quot;xfs_da_btree.h&quot;
macro_line|#include &quot;xfs_dir2_trace.h&quot;
macro_line|#ifdef XFS_DIR2_TRACE
DECL|variable|xfs_dir2_trace_buf
id|ktrace_t
op_star
id|xfs_dir2_trace_buf
suffix:semicolon
multiline_comment|/*&n; * Enter something in the trace buffers.&n; */
r_static
r_void
DECL|function|xfs_dir2_trace_enter
id|xfs_dir2_trace_enter
c_func
(paren
id|xfs_inode_t
op_star
id|dp
comma
r_int
id|type
comma
r_char
op_star
id|where
comma
r_char
op_star
id|name
comma
r_int
id|namelen
comma
r_void
op_star
id|a0
comma
r_void
op_star
id|a1
comma
r_void
op_star
id|a2
comma
r_void
op_star
id|a3
comma
r_void
op_star
id|a4
comma
r_void
op_star
id|a5
comma
r_void
op_star
id|a6
comma
r_void
op_star
id|a7
)paren
(brace
r_void
op_star
id|n
(braket
l_int|5
)braket
suffix:semicolon
id|ASSERT
c_func
(paren
id|xfs_dir2_trace_buf
)paren
suffix:semicolon
id|ASSERT
c_func
(paren
id|dp-&gt;i_dir_trace
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
)paren
id|memcpy
c_func
(paren
id|n
comma
id|name
comma
id|min
c_func
(paren
(paren
r_int
)paren
r_sizeof
(paren
id|n
)paren
comma
id|namelen
)paren
)paren
suffix:semicolon
r_else
id|memset
c_func
(paren
(paren
r_char
op_star
)paren
id|n
comma
l_int|0
comma
r_sizeof
(paren
id|n
)paren
)paren
suffix:semicolon
id|ktrace_enter
c_func
(paren
id|xfs_dir2_trace_buf
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|type
comma
(paren
r_void
op_star
)paren
id|where
comma
(paren
r_void
op_star
)paren
id|a0
comma
(paren
r_void
op_star
)paren
id|a1
comma
(paren
r_void
op_star
)paren
id|a2
comma
(paren
r_void
op_star
)paren
id|a3
comma
(paren
r_void
op_star
)paren
id|a4
comma
(paren
r_void
op_star
)paren
id|a5
comma
(paren
r_void
op_star
)paren
id|a6
comma
(paren
r_void
op_star
)paren
id|a7
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|namelen
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|0
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|1
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|2
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|3
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|ktrace_enter
c_func
(paren
id|dp-&gt;i_dir_trace
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|type
comma
(paren
r_void
op_star
)paren
id|where
comma
(paren
r_void
op_star
)paren
id|a0
comma
(paren
r_void
op_star
)paren
id|a1
comma
(paren
r_void
op_star
)paren
id|a2
comma
(paren
r_void
op_star
)paren
id|a3
comma
(paren
r_void
op_star
)paren
id|a4
comma
(paren
r_void
op_star
)paren
id|a5
comma
(paren
r_void
op_star
)paren
id|a6
comma
(paren
r_void
op_star
)paren
id|a7
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|namelen
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|0
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|1
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|2
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|3
)braket
comma
(paren
r_void
op_star
)paren
id|n
(braket
l_int|4
)braket
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args
id|xfs_dir2_trace_args
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
)paren
(brace
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_b
id|xfs_dir2_trace_args_b
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
id|xfs_dabuf_t
op_star
id|bp
)paren
(brace
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_B
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
id|bp
ques
c_cond
id|bp-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
)paren
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_bb
id|xfs_dir2_trace_args_bb
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
id|xfs_dabuf_t
op_star
id|lbp
comma
id|xfs_dabuf_t
op_star
id|dbp
)paren
(brace
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_BB
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
id|lbp
ques
c_cond
id|lbp-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
)paren
comma
(paren
r_void
op_star
)paren
(paren
id|dbp
ques
c_cond
id|dbp-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
)paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_bibii
id|xfs_dir2_trace_args_bibii
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
id|xfs_dabuf_t
op_star
id|bs
comma
r_int
id|ss
comma
id|xfs_dabuf_t
op_star
id|bd
comma
r_int
id|sd
comma
r_int
id|c
)paren
(brace
id|xfs_buf_t
op_star
id|bpbs
op_assign
id|bs
ques
c_cond
id|bs-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
suffix:semicolon
id|xfs_buf_t
op_star
id|bpbd
op_assign
id|bd
ques
c_cond
id|bd-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
suffix:semicolon
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_BIBII
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
id|bpbs
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|ss
comma
(paren
r_void
op_star
)paren
id|bpbd
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|sd
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|c
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_db
id|xfs_dir2_trace_args_db
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
id|xfs_dir2_db_t
id|db
comma
id|xfs_dabuf_t
op_star
id|bp
)paren
(brace
id|xfs_buf_t
op_star
id|dbp
op_assign
id|bp
ques
c_cond
id|bp-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
suffix:semicolon
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_DB
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|db
comma
(paren
r_void
op_star
)paren
id|dbp
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_i
id|xfs_dir2_trace_args_i
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
id|xfs_ino_t
id|i
)paren
(brace
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_I
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|i
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|i
op_amp
l_int|0xFFFFFFFF
)paren
)paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_s
id|xfs_dir2_trace_args_s
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
r_int
id|s
)paren
(brace
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_S
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|s
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_void
DECL|function|xfs_dir2_trace_args_sb
id|xfs_dir2_trace_args_sb
c_func
(paren
r_char
op_star
id|where
comma
id|xfs_da_args_t
op_star
id|args
comma
r_int
id|s
comma
id|xfs_dabuf_t
op_star
id|bp
)paren
(brace
id|xfs_buf_t
op_star
id|dbp
op_assign
id|bp
ques
c_cond
id|bp-&gt;bps
(braket
l_int|0
)braket
suffix:colon
l_int|NULL
suffix:semicolon
id|xfs_dir2_trace_enter
c_func
(paren
id|args-&gt;dp
comma
id|XFS_DIR2_KTRACE_ARGS_SB
comma
id|where
comma
(paren
r_char
op_star
)paren
id|args-&gt;name
comma
(paren
r_int
)paren
id|args-&gt;namelen
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;hashval
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_rshift
l_int|32
)paren
)paren
comma
(paren
r_void
op_star
)paren
(paren
(paren
r_int
r_int
)paren
(paren
id|args-&gt;inumber
op_amp
l_int|0xFFFFFFFF
)paren
)paren
comma
(paren
r_void
op_star
)paren
id|args-&gt;dp
comma
(paren
r_void
op_star
)paren
id|args-&gt;trans
comma
(paren
r_void
op_star
)paren
(paren
r_int
r_int
)paren
id|args-&gt;justcheck
comma
(paren
r_void
op_star
)paren
(paren
r_int
)paren
id|s
comma
(paren
r_void
op_star
)paren
id|dbp
)paren
suffix:semicolon
)brace
macro_line|#endif&t;/* XFS_DIR2_TRACE */
eof
