multiline_comment|/*&n; * linux/fs/befs/attribute.c&n; *&n; * Copyright (C) 2002 Will Dyson &lt;will_dyson@pobox.com&gt;&n; *&n; * Many thanks to Dominic Giampaolo, author of &quot;Practical File System&n; * Design with the Be File System&quot;, for such a helpful book.&n; *&n; */
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &quot;befs.h&quot;
macro_line|#include &quot;endian.h&quot;
DECL|macro|SD_DATA
mdefine_line|#define SD_DATA(sd)&bslash;&n;&t;(void*)((char*)sd + sizeof(*sd) + (sd-&gt;name_size - sizeof(sd-&gt;name)))
DECL|macro|SD_NEXT
mdefine_line|#define SD_NEXT(sd)&bslash;&n;&t;(befs_small_data*)((char*)sd + sizeof(*sd) + (sd-&gt;name_size - &bslash;&n;&t;sizeof(sd-&gt;name) + sd-&gt;data_size))
r_int
id|list_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
comma
id|filldir_t
id|filldir
)paren
suffix:semicolon
id|befs_small_data
op_star
id|find_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
comma
r_const
r_char
op_star
id|name
)paren
suffix:semicolon
r_int
id|read_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
comma
id|befs_small_data
op_star
id|sdata
comma
r_void
op_star
id|buf
comma
r_int
id|bufsize
)paren
suffix:semicolon
multiline_comment|/**&n; *&n; *&n; *&n; *&n; *&n; */
id|befs_small_data
op_star
DECL|function|find_small_data
id|find_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
comma
r_const
r_char
op_star
id|name
)paren
(brace
id|befs_small_data
op_star
id|sdata
op_assign
id|inode-&gt;small_data
suffix:semicolon
r_while
c_loop
(paren
id|sdata-&gt;type
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|name
comma
id|sdata-&gt;name
)paren
op_ne
l_int|0
)paren
(brace
r_return
id|sdata
suffix:semicolon
)brace
id|sdata
op_assign
id|SD_NEXT
c_func
(paren
id|sdata
)paren
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; *&n; *&n; *&n; *&n; *&n; */
r_int
DECL|function|read_small_data
id|read_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
comma
r_const
r_char
op_star
id|name
comma
r_void
op_star
id|buf
comma
r_int
id|bufsize
)paren
(brace
id|befs_small_data
op_star
id|sdata
suffix:semicolon
id|sdata
op_assign
id|find_small_data
c_func
(paren
id|sb
comma
id|inode
comma
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sdata
op_eq
l_int|NULL
)paren
r_return
id|BEFS_ERR
suffix:semicolon
r_else
r_if
c_cond
(paren
id|sdata-&gt;data_size
OG
id|bufsize
)paren
r_return
id|BEFS_ERR
suffix:semicolon
id|memcpy
c_func
(paren
id|buf
comma
id|SD_DATA
c_func
(paren
id|sdata
)paren
comma
id|sdata-&gt;data_size
)paren
suffix:semicolon
r_return
id|BEFS_OK
suffix:semicolon
)brace
multiline_comment|/**&n; *&n; *&n; *&n; *&n; *&n; */
r_int
DECL|function|list_small_data
id|list_small_data
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
)paren
(brace
)brace
multiline_comment|/**&n; *&n; *&n; *&n; *&n; *&n; */
r_int
DECL|function|list_attr
id|list_attr
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
)paren
(brace
)brace
multiline_comment|/**&n; *&n; *&n; *&n; *&n; *&n; */
r_int
DECL|function|read_attr
id|read_attr
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
id|befs_inode
op_star
id|inode
)paren
(brace
)brace
eof
