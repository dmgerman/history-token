multiline_comment|/*&n; *  fs/nfs/nfs4xdr.c&n; *&n; *  Client-side XDR for NFSv4.&n; *&n; *  Copyright (c) 2002 The Regents of the University of Michigan.&n; *  All rights reserved.&n; *&n; *  Kendrick Smith &lt;kmsmith@umich.edu&gt;&n; *  Andy Adamson   &lt;andros@umich.edu&gt;&n; * &n; *  Redistribution and use in source and binary forms, with or without&n; *  modification, are permitted provided that the following conditions&n; *  are met:&n; *&n; *  1. Redistributions of source code must retain the above copyright&n; *     notice, this list of conditions and the following disclaimer.&n; *  2. Redistributions in binary form must reproduce the above copyright&n; *     notice, this list of conditions and the following disclaimer in the&n; *     documentation and/or other materials provided with the distribution.&n; *  3. Neither the name of the University nor the names of its&n; *     contributors may be used to endorse or promote products derived&n; *     from this software without specific prior written permission.&n; *&n; *  THIS SOFTWARE IS PROVIDED ``AS IS&squot;&squot; AND ANY EXPRESS OR IMPLIED&n; *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF&n; *  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE&n; *  DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE&n; *  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR&n; *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF&n; *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR&n; *  BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF&n; *  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING&n; *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS&n; *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&n; */
macro_line|#include &lt;linux/param.h&gt;
macro_line|#include &lt;linux/time.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/utsname.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/in.h&gt;
macro_line|#include &lt;linux/pagemap.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/kdev_t.h&gt;
macro_line|#include &lt;linux/sunrpc/clnt.h&gt;
macro_line|#include &lt;linux/nfs.h&gt;
macro_line|#include &lt;linux/nfs4.h&gt;
macro_line|#include &lt;linux/nfs_fs.h&gt;
macro_line|#include &lt;linux/nfs_idmap.h&gt;
DECL|macro|NFSDBG_FACILITY
mdefine_line|#define NFSDBG_FACILITY&t;&t;NFSDBG_XDR
multiline_comment|/* Mapping from NFS error code to &quot;errno&quot; error code. */
DECL|macro|errno_NFSERR_IO
mdefine_line|#define errno_NFSERR_IO&t;&t;EIO
r_static
r_int
id|nfs_stat_to_errno
c_func
(paren
r_int
)paren
suffix:semicolon
multiline_comment|/* NFSv4 COMPOUND tags are only wanted for debugging purposes */
macro_line|#ifdef DEBUG
DECL|macro|NFS4_MAXTAGLEN
mdefine_line|#define NFS4_MAXTAGLEN&t;&t;20
macro_line|#else
DECL|macro|NFS4_MAXTAGLEN
mdefine_line|#define NFS4_MAXTAGLEN&t;&t;0
macro_line|#endif
multiline_comment|/* lock,open owner id: &n; * we currently use size 1 (u32) out of (NFS4_OPAQUE_LIMIT  &gt;&gt; 2)&n; */
DECL|macro|owner_id_maxsz
mdefine_line|#define owner_id_maxsz          (1 + 1)
DECL|macro|compound_encode_hdr_maxsz
mdefine_line|#define compound_encode_hdr_maxsz&t;(3 + (NFS4_MAXTAGLEN &gt;&gt; 2))
DECL|macro|compound_decode_hdr_maxsz
mdefine_line|#define compound_decode_hdr_maxsz&t;(3 + (NFS4_MAXTAGLEN &gt;&gt; 2))
DECL|macro|op_encode_hdr_maxsz
mdefine_line|#define op_encode_hdr_maxsz&t;(1)
DECL|macro|op_decode_hdr_maxsz
mdefine_line|#define op_decode_hdr_maxsz&t;(2)
DECL|macro|encode_putfh_maxsz
mdefine_line|#define encode_putfh_maxsz&t;(op_encode_hdr_maxsz + 1 + &bslash;&n;&t;&t;&t;&t;(NFS4_FHSIZE &gt;&gt; 2))
DECL|macro|decode_putfh_maxsz
mdefine_line|#define decode_putfh_maxsz&t;(op_decode_hdr_maxsz)
DECL|macro|encode_putrootfh_maxsz
mdefine_line|#define encode_putrootfh_maxsz&t;(op_encode_hdr_maxsz)
DECL|macro|decode_putrootfh_maxsz
mdefine_line|#define decode_putrootfh_maxsz&t;(op_decode_hdr_maxsz)
DECL|macro|encode_getfh_maxsz
mdefine_line|#define encode_getfh_maxsz      (op_encode_hdr_maxsz)
DECL|macro|decode_getfh_maxsz
mdefine_line|#define decode_getfh_maxsz      (op_decode_hdr_maxsz + 1 + &bslash;&n;&t;&t;&t;&t;((3+NFS4_FHSIZE) &gt;&gt; 2))
DECL|macro|encode_getattr_maxsz
mdefine_line|#define encode_getattr_maxsz    (op_encode_hdr_maxsz + 3)
DECL|macro|nfs4_name_maxsz
mdefine_line|#define nfs4_name_maxsz&t;&t;(1 + ((3 + NFS4_MAXNAMLEN) &gt;&gt; 2))
DECL|macro|nfs4_fattr_bitmap_maxsz
mdefine_line|#define nfs4_fattr_bitmap_maxsz (36 + 2 * nfs4_name_maxsz)
DECL|macro|decode_getattr_maxsz
mdefine_line|#define decode_getattr_maxsz    (op_decode_hdr_maxsz + 3 + &bslash;&n;                                nfs4_fattr_bitmap_maxsz)
DECL|macro|encode_savefh_maxsz
mdefine_line|#define encode_savefh_maxsz     (op_encode_hdr_maxsz)
DECL|macro|decode_savefh_maxsz
mdefine_line|#define decode_savefh_maxsz     (op_decode_hdr_maxsz)
DECL|macro|encode_fsinfo_maxsz
mdefine_line|#define encode_fsinfo_maxsz&t;(op_encode_hdr_maxsz + 2)
DECL|macro|decode_fsinfo_maxsz
mdefine_line|#define decode_fsinfo_maxsz&t;(op_decode_hdr_maxsz + 11)
DECL|macro|encode_renew_maxsz
mdefine_line|#define encode_renew_maxsz&t;(op_encode_hdr_maxsz + 3)
DECL|macro|decode_renew_maxsz
mdefine_line|#define decode_renew_maxsz&t;(op_decode_hdr_maxsz)
DECL|macro|encode_setclientid_maxsz
mdefine_line|#define encode_setclientid_maxsz &bslash;&n;&t;&t;&t;&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;4 /*server-&gt;ip_addr*/ + &bslash;&n;&t;&t;&t;&t;1 /*Netid*/ + &bslash;&n;&t;&t;&t;&t;6 /*uaddr*/ + &bslash;&n;&t;&t;&t;&t;6 + (NFS4_VERIFIER_SIZE &gt;&gt; 2))
DECL|macro|decode_setclientid_maxsz
mdefine_line|#define decode_setclientid_maxsz &bslash;&n;&t;&t;&t;&t;(op_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;2 + &bslash;&n;&t;&t;&t;&t;1024) /* large value for CLID_INUSE */
DECL|macro|encode_setclientid_confirm_maxsz
mdefine_line|#define encode_setclientid_confirm_maxsz &bslash;&n;&t;&t;&t;&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;3 + (NFS4_VERIFIER_SIZE &gt;&gt; 2))
DECL|macro|decode_setclientid_confirm_maxsz
mdefine_line|#define decode_setclientid_confirm_maxsz &bslash;&n;&t;&t;&t;&t;(op_decode_hdr_maxsz)
DECL|macro|encode_lookup_maxsz
mdefine_line|#define encode_lookup_maxsz&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;1 + ((3 + NFS4_FHSIZE) &gt;&gt; 2))
DECL|macro|encode_remove_maxsz
mdefine_line|#define encode_remove_maxsz&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;nfs4_name_maxsz)
DECL|macro|encode_rename_maxsz
mdefine_line|#define encode_rename_maxsz&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;2 * nfs4_name_maxsz)
DECL|macro|decode_rename_maxsz
mdefine_line|#define decode_rename_maxsz&t;(op_decode_hdr_maxsz + 5 + 5)
DECL|macro|encode_link_maxsz
mdefine_line|#define encode_link_maxsz&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;nfs4_name_maxsz)
DECL|macro|decode_link_maxsz
mdefine_line|#define decode_link_maxsz&t;(op_decode_hdr_maxsz + 5)
DECL|macro|encode_create_maxsz
mdefine_line|#define encode_create_maxsz&t;(op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;2 + 2 * nfs4_name_maxsz + &bslash;&n;&t;&t;&t;&t;nfs4_fattr_bitmap_maxsz)
DECL|macro|decode_create_maxsz
mdefine_line|#define decode_create_maxsz&t;(op_decode_hdr_maxsz + 8)
DECL|macro|NFS4_enc_compound_sz
mdefine_line|#define NFS4_enc_compound_sz&t;(1024)  /* XXX: large enough? */
DECL|macro|NFS4_dec_compound_sz
mdefine_line|#define NFS4_dec_compound_sz&t;(1024)  /* XXX: large enough? */
DECL|macro|NFS4_enc_read_sz
mdefine_line|#define NFS4_enc_read_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + 7)
DECL|macro|NFS4_dec_read_sz
mdefine_line|#define NFS4_dec_read_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 2)
DECL|macro|NFS4_enc_readlink_sz
mdefine_line|#define NFS4_enc_readlink_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz)
DECL|macro|NFS4_dec_readlink_sz
mdefine_line|#define NFS4_dec_readlink_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz)
DECL|macro|NFS4_enc_readdir_sz
mdefine_line|#define NFS4_enc_readdir_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + 9)
DECL|macro|NFS4_dec_readdir_sz
mdefine_line|#define NFS4_dec_readdir_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 2)
DECL|macro|NFS4_enc_write_sz
mdefine_line|#define NFS4_enc_write_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + 8)
DECL|macro|NFS4_dec_write_sz
mdefine_line|#define NFS4_dec_write_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 4)
DECL|macro|NFS4_enc_commit_sz
mdefine_line|#define NFS4_enc_commit_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + 3)
DECL|macro|NFS4_dec_commit_sz
mdefine_line|#define NFS4_dec_commit_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 2)
DECL|macro|NFS4_enc_open_sz
mdefine_line|#define NFS4_enc_open_sz        (compound_encode_hdr_maxsz + &bslash;&n;                                encode_putfh_maxsz + &bslash;&n;                                op_encode_hdr_maxsz + &bslash;&n;                                13 + 3 + 2 + 64 + &bslash;&n;                                encode_getattr_maxsz + &bslash;&n;                                encode_getfh_maxsz)
DECL|macro|NFS4_dec_open_sz
mdefine_line|#define NFS4_dec_open_sz        (compound_decode_hdr_maxsz + &bslash;&n;                                decode_putfh_maxsz + &bslash;&n;                                op_decode_hdr_maxsz + 4 + 5 + 2 + 3 + &bslash;&n;                                decode_getattr_maxsz + &bslash;&n;                                decode_getfh_maxsz)
DECL|macro|NFS4_enc_open_confirm_sz
mdefine_line|#define NFS4_enc_open_confirm_sz      &bslash;&n;                                (compound_encode_hdr_maxsz + &bslash;&n;                                encode_putfh_maxsz + &bslash;&n;                                op_encode_hdr_maxsz + 5)
DECL|macro|NFS4_dec_open_confirm_sz
mdefine_line|#define NFS4_dec_open_confirm_sz        (compound_decode_hdr_maxsz + &bslash;&n;                                        decode_putfh_maxsz + &bslash;&n;                                        op_decode_hdr_maxsz + 4)
DECL|macro|NFS4_enc_open_reclaim_sz
mdefine_line|#define NFS4_enc_open_reclaim_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;&t;op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;&t;11 + &bslash;&n;&t;&t;&t;&t;&t;encode_getattr_maxsz)
DECL|macro|NFS4_dec_open_reclaim_sz
mdefine_line|#define NFS4_dec_open_reclaim_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;&t;op_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;&t;4 + 5 + 2 + 3 + &bslash;&n;&t;&t;&t;&t;&t;decode_getattr_maxsz)
DECL|macro|NFS4_enc_open_downgrade_sz
mdefine_line|#define NFS4_enc_open_downgrade_sz &bslash;&n;&t;&t;&t;&t;(compound_encode_hdr_maxsz + &bslash;&n;                                encode_putfh_maxsz + &bslash;&n;                                op_encode_hdr_maxsz + 7)
DECL|macro|NFS4_dec_open_downgrade_sz
mdefine_line|#define NFS4_dec_open_downgrade_sz &bslash;&n;&t;&t;&t;&t;(compound_decode_hdr_maxsz + &bslash;&n;                                decode_putfh_maxsz + &bslash;&n;                                op_decode_hdr_maxsz + 4)
DECL|macro|NFS4_enc_close_sz
mdefine_line|#define NFS4_enc_close_sz       (compound_encode_hdr_maxsz + &bslash;&n;                                encode_putfh_maxsz + &bslash;&n;                                op_encode_hdr_maxsz + 5)
DECL|macro|NFS4_dec_close_sz
mdefine_line|#define NFS4_dec_close_sz       (compound_decode_hdr_maxsz + &bslash;&n;                                decode_putfh_maxsz + &bslash;&n;                                op_decode_hdr_maxsz + 4)
DECL|macro|NFS4_enc_setattr_sz
mdefine_line|#define NFS4_enc_setattr_sz     (compound_encode_hdr_maxsz + &bslash;&n;                                encode_putfh_maxsz + &bslash;&n;                                op_encode_hdr_maxsz + 4 + &bslash;&n;                                nfs4_fattr_bitmap_maxsz + &bslash;&n;                                encode_getattr_maxsz)
DECL|macro|NFS4_dec_setattr_sz
mdefine_line|#define NFS4_dec_setattr_sz     (compound_decode_hdr_maxsz + &bslash;&n;                                decode_putfh_maxsz + &bslash;&n;                                op_decode_hdr_maxsz + 3)
DECL|macro|NFS4_enc_fsinfo_sz
mdefine_line|#define NFS4_enc_fsinfo_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_fsinfo_maxsz)
DECL|macro|NFS4_dec_fsinfo_sz
mdefine_line|#define NFS4_dec_fsinfo_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_fsinfo_maxsz)
DECL|macro|NFS4_enc_renew_sz
mdefine_line|#define NFS4_enc_renew_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_renew_maxsz)
DECL|macro|NFS4_dec_renew_sz
mdefine_line|#define NFS4_dec_renew_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_renew_maxsz)
DECL|macro|NFS4_enc_setclientid_sz
mdefine_line|#define NFS4_enc_setclientid_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_setclientid_maxsz)
DECL|macro|NFS4_dec_setclientid_sz
mdefine_line|#define NFS4_dec_setclientid_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_setclientid_maxsz)
DECL|macro|NFS4_enc_setclientid_confirm_sz
mdefine_line|#define NFS4_enc_setclientid_confirm_sz &bslash;&n;&t;&t;&t;&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_setclientid_confirm_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putrootfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_fsinfo_maxsz)
DECL|macro|NFS4_dec_setclientid_confirm_sz
mdefine_line|#define NFS4_dec_setclientid_confirm_sz &bslash;&n;&t;&t;&t;&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_setclientid_confirm_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putrootfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_fsinfo_maxsz)
DECL|macro|NFS4_enc_lock_sz
mdefine_line|#define NFS4_enc_lock_sz        (compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;1 + 1 + 2 + 2 + &bslash;&n;&t;&t;&t;&t;1 + 4 + 1 + 2 + &bslash;&n;&t;&t;&t;&t;owner_id_maxsz)
DECL|macro|NFS4_dec_lock_sz
mdefine_line|#define NFS4_dec_lock_sz        (compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;2 + 2 + 1 + 2 + &bslash;&n;&t;&t;&t;&t;owner_id_maxsz)
DECL|macro|NFS4_enc_lockt_sz
mdefine_line|#define NFS4_enc_lockt_sz       (compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;1 + 2 + 2 + 2 + &bslash;&n;&t;&t;&t;&t;owner_id_maxsz)
DECL|macro|NFS4_dec_lockt_sz
mdefine_line|#define NFS4_dec_lockt_sz       (NFS4_dec_lock_sz)
DECL|macro|NFS4_enc_locku_sz
mdefine_line|#define NFS4_enc_locku_sz       (compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;1 + 1 + 4 + 2 + 2)
DECL|macro|NFS4_dec_locku_sz
mdefine_line|#define NFS4_dec_locku_sz       (compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 4)
DECL|macro|NFS4_enc_access_sz
mdefine_line|#define NFS4_enc_access_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_encode_hdr_maxsz + 1)
DECL|macro|NFS4_dec_access_sz
mdefine_line|#define NFS4_dec_access_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 2)
DECL|macro|NFS4_enc_getattr_sz
mdefine_line|#define NFS4_enc_getattr_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz)
DECL|macro|NFS4_dec_getattr_sz
mdefine_line|#define NFS4_dec_getattr_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz)
DECL|macro|NFS4_enc_lookup_sz
mdefine_line|#define NFS4_enc_lookup_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_lookup_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getfh_maxsz)
DECL|macro|NFS4_dec_lookup_sz
mdefine_line|#define NFS4_dec_lookup_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getfh_maxsz)
DECL|macro|NFS4_enc_lookup_root_sz
mdefine_line|#define NFS4_enc_lookup_root_sz (compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putrootfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getfh_maxsz)
DECL|macro|NFS4_dec_lookup_root_sz
mdefine_line|#define NFS4_dec_lookup_root_sz (compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putrootfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getfh_maxsz)
DECL|macro|NFS4_enc_remove_sz
mdefine_line|#define NFS4_enc_remove_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_remove_maxsz)
DECL|macro|NFS4_dec_remove_sz
mdefine_line|#define NFS4_dec_remove_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 5)
DECL|macro|NFS4_enc_rename_sz
mdefine_line|#define NFS4_enc_rename_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_savefh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_rename_maxsz)
DECL|macro|NFS4_dec_rename_sz
mdefine_line|#define NFS4_dec_rename_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_savefh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_rename_maxsz)
DECL|macro|NFS4_enc_link_sz
mdefine_line|#define NFS4_enc_link_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_savefh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_link_maxsz)
DECL|macro|NFS4_dec_link_sz
mdefine_line|#define NFS4_dec_link_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_savefh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_link_maxsz)
DECL|macro|NFS4_enc_create_sz
mdefine_line|#define NFS4_enc_create_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_create_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getfh_maxsz)
DECL|macro|NFS4_dec_create_sz
mdefine_line|#define NFS4_dec_create_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_create_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getfh_maxsz)
DECL|macro|NFS4_enc_pathconf_sz
mdefine_line|#define NFS4_enc_pathconf_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz)
DECL|macro|NFS4_dec_pathconf_sz
mdefine_line|#define NFS4_dec_pathconf_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;decode_getattr_maxsz)
DECL|macro|NFS4_enc_statfs_sz
mdefine_line|#define NFS4_enc_statfs_sz&t;(compound_encode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;encode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;encode_getattr_maxsz)
DECL|macro|NFS4_dec_statfs_sz
mdefine_line|#define NFS4_dec_statfs_sz&t;(compound_decode_hdr_maxsz + &bslash;&n;&t;&t;&t;&t;decode_putfh_maxsz + &bslash;&n;&t;&t;&t;&t;op_decode_hdr_maxsz + 12)
r_static
r_struct
(brace
DECL|member|mode
r_int
r_int
id|mode
suffix:semicolon
DECL|member|nfs2type
r_int
r_int
id|nfs2type
suffix:semicolon
DECL|variable|nfs_type2fmt
)brace
id|nfs_type2fmt
(braket
)braket
op_assign
(brace
(brace
l_int|0
comma
id|NFNON
)brace
comma
(brace
id|S_IFREG
comma
id|NFREG
)brace
comma
(brace
id|S_IFDIR
comma
id|NFDIR
)brace
comma
(brace
id|S_IFBLK
comma
id|NFBLK
)brace
comma
(brace
id|S_IFCHR
comma
id|NFCHR
)brace
comma
(brace
id|S_IFLNK
comma
id|NFLNK
)brace
comma
(brace
id|S_IFSOCK
comma
id|NFSOCK
)brace
comma
(brace
id|S_IFIFO
comma
id|NFFIFO
)brace
comma
(brace
l_int|0
comma
id|NFNON
)brace
comma
(brace
l_int|0
comma
id|NFNON
)brace
comma
)brace
suffix:semicolon
DECL|struct|compound_hdr
r_struct
id|compound_hdr
(brace
DECL|member|status
r_int32
id|status
suffix:semicolon
DECL|member|nops
r_uint32
id|nops
suffix:semicolon
DECL|member|taglen
r_uint32
id|taglen
suffix:semicolon
DECL|member|tag
r_char
op_star
id|tag
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/*&n; * START OF &quot;GENERIC&quot; ENCODE ROUTINES.&n; *   These may look a little ugly since they are imported from a &quot;generic&quot;&n; * set of XDR encode/decode routines which are intended to be shared by&n; * all of our NFSv4 implementations (OpenBSD, MacOS X...).&n; *&n; * If the pain of reading these is too great, it should be a straightforward&n; * task to translate them into Linux-specific versions which are more&n; * consistent with the style used in NFSv2/v3...&n; */
DECL|macro|WRITE32
mdefine_line|#define WRITE32(n)               *p++ = htonl(n)
DECL|macro|WRITE64
mdefine_line|#define WRITE64(n)               do {&t;&t;&t;&t;&bslash;&n;&t;*p++ = htonl((uint32_t)((n) &gt;&gt; 32));&t;&t;&t;&t;&bslash;&n;&t;*p++ = htonl((uint32_t)(n));&t;&t;&t;&t;&t;&bslash;&n;} while (0)
DECL|macro|WRITEMEM
mdefine_line|#define WRITEMEM(ptr,nbytes)     do {&t;&t;&t;&t;&bslash;&n;&t;p = xdr_encode_opaque_fixed(p, ptr, nbytes);&t;&t;&bslash;&n;} while (0)
DECL|macro|RESERVE_SPACE
mdefine_line|#define RESERVE_SPACE(nbytes)&t;do {&t;&t;&t;&t;&bslash;&n;&t;p = xdr_reserve_space(xdr, nbytes);&t;&t;&t;&bslash;&n;&t;if (!p) printk(&quot;RESERVE_SPACE(%d) failed in function %s&bslash;n&quot;, (int) (nbytes), __FUNCTION__); &bslash;&n;&t;BUG_ON(!p);&t;&t;&t;&t;&t;&t;&bslash;&n;} while (0)
DECL|function|encode_compound_hdr
r_static
r_int
id|encode_compound_hdr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|compound_hdr
op_star
id|hdr
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;encode_compound: tag=%.*s&bslash;n&quot;
comma
(paren
r_int
)paren
id|hdr-&gt;taglen
comma
id|hdr-&gt;tag
)paren
suffix:semicolon
id|BUG_ON
c_func
(paren
id|hdr-&gt;taglen
OG
id|NFS4_MAXTAGLEN
)paren
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|12
op_plus
(paren
id|XDR_QUADLEN
c_func
(paren
id|hdr-&gt;taglen
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|hdr-&gt;taglen
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|hdr-&gt;tag
comma
id|hdr-&gt;taglen
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_MINOR_VERSION
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|hdr-&gt;nops
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_attrs
r_static
r_int
id|encode_attrs
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|iattr
op_star
id|iap
comma
r_const
r_struct
id|nfs_server
op_star
id|server
)paren
(brace
r_char
id|owner_name
(braket
id|IDMAP_NAMESZ
)braket
suffix:semicolon
r_char
id|owner_group
(braket
id|IDMAP_NAMESZ
)braket
suffix:semicolon
r_int
id|owner_namelen
op_assign
l_int|0
suffix:semicolon
r_int
id|owner_grouplen
op_assign
l_int|0
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
op_star
id|q
suffix:semicolon
r_int
id|len
suffix:semicolon
r_uint32
id|bmval0
op_assign
l_int|0
suffix:semicolon
r_uint32
id|bmval1
op_assign
l_int|0
suffix:semicolon
r_int
id|status
suffix:semicolon
multiline_comment|/*&n;&t; * We reserve enough space to write the entire attribute buffer at once.&n;&t; * In the worst-case, this would be&n;&t; *   12(bitmap) + 4(attrlen) + 8(size) + 4(mode) + 4(atime) + 4(mtime)&n;&t; *          = 36 bytes, plus any contribution from variable-length fields&n;&t; *            such as owner/group/acl&squot;s.&n;&t; */
id|len
op_assign
l_int|16
suffix:semicolon
multiline_comment|/* Sigh */
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_SIZE
)paren
id|len
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MODE
)paren
id|len
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_UID
)paren
(brace
id|owner_namelen
op_assign
id|nfs_map_uid_to_name
c_func
(paren
id|server-&gt;nfs4_state
comma
id|iap-&gt;ia_uid
comma
id|owner_name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|owner_namelen
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;nfs: couldn&squot;t resolve uid %d to string&bslash;n&quot;
comma
id|iap-&gt;ia_uid
)paren
suffix:semicolon
multiline_comment|/* XXX */
id|strcpy
c_func
(paren
id|owner_name
comma
l_string|&quot;nobody&quot;
)paren
suffix:semicolon
id|owner_namelen
op_assign
r_sizeof
(paren
l_string|&quot;nobody&quot;
)paren
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* goto out; */
)brace
id|len
op_add_assign
l_int|4
op_plus
(paren
id|XDR_QUADLEN
c_func
(paren
id|owner_namelen
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_GID
)paren
(brace
id|owner_grouplen
op_assign
id|nfs_map_gid_to_group
c_func
(paren
id|server-&gt;nfs4_state
comma
id|iap-&gt;ia_gid
comma
id|owner_group
)paren
suffix:semicolon
r_if
c_cond
(paren
id|owner_grouplen
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;nfs4: couldn&squot;t resolve gid %d to string&bslash;n&quot;
comma
id|iap-&gt;ia_gid
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|owner_group
comma
l_string|&quot;nobody&quot;
)paren
suffix:semicolon
id|owner_grouplen
op_assign
r_sizeof
(paren
l_string|&quot;nobody&quot;
)paren
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* goto out; */
)brace
id|len
op_add_assign
l_int|4
op_plus
(paren
id|XDR_QUADLEN
c_func
(paren
id|owner_grouplen
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_ATIME_SET
)paren
id|len
op_add_assign
l_int|16
suffix:semicolon
r_else
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_ATIME
)paren
id|len
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MTIME_SET
)paren
id|len
op_add_assign
l_int|16
suffix:semicolon
r_else
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MTIME
)paren
id|len
op_add_assign
l_int|4
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
id|len
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * We write the bitmap length now, but leave the bitmap and the attribute&n;&t; * buffer length to be backfilled at the end of this routine.&n;&t; */
id|WRITE32
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|q
op_assign
id|p
suffix:semicolon
id|p
op_add_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_SIZE
)paren
(brace
id|bmval0
op_or_assign
id|FATTR4_WORD0_SIZE
suffix:semicolon
id|WRITE64
c_func
(paren
id|iap-&gt;ia_size
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MODE
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_MODE
suffix:semicolon
id|WRITE32
c_func
(paren
id|iap-&gt;ia_mode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_UID
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_OWNER
suffix:semicolon
id|WRITE32
c_func
(paren
id|owner_namelen
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|owner_name
comma
id|owner_namelen
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_GID
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_OWNER_GROUP
suffix:semicolon
id|WRITE32
c_func
(paren
id|owner_grouplen
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|owner_group
comma
id|owner_grouplen
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_ATIME_SET
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_TIME_ACCESS_SET
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_SET_TO_CLIENT_TIME
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|iap-&gt;ia_mtime.tv_sec
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|iap-&gt;ia_mtime.tv_nsec
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_ATIME
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_TIME_ACCESS_SET
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_SET_TO_SERVER_TIME
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MTIME_SET
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_TIME_MODIFY_SET
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_SET_TO_CLIENT_TIME
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|iap-&gt;ia_mtime.tv_sec
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|iap-&gt;ia_mtime.tv_nsec
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|iap-&gt;ia_valid
op_amp
id|ATTR_MTIME
)paren
(brace
id|bmval1
op_or_assign
id|FATTR4_WORD1_TIME_MODIFY_SET
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_SET_TO_SERVER_TIME
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Now we backfill the bitmap and the attribute buffer length.&n;&t; */
r_if
c_cond
(paren
id|len
op_ne
(paren
(paren
r_char
op_star
)paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|q
)paren
op_plus
l_int|4
)paren
(brace
id|printk
(paren
l_string|&quot;encode_attr: Attr length calculation error! %u != %Zu&bslash;n&quot;
comma
id|len
comma
(paren
(paren
r_char
op_star
)paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|q
)paren
op_plus
l_int|4
)paren
suffix:semicolon
id|BUG
c_func
(paren
)paren
suffix:semicolon
)brace
id|len
op_assign
(paren
r_char
op_star
)paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|q
op_minus
l_int|12
suffix:semicolon
op_star
id|q
op_increment
op_assign
id|htonl
c_func
(paren
id|bmval0
)paren
suffix:semicolon
op_star
id|q
op_increment
op_assign
id|htonl
c_func
(paren
id|bmval1
)paren
suffix:semicolon
op_star
id|q
op_increment
op_assign
id|htonl
c_func
(paren
id|len
)paren
suffix:semicolon
id|status
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* out: */
r_return
id|status
suffix:semicolon
)brace
DECL|function|encode_access
r_static
r_int
id|encode_access
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
id|u32
id|access
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_ACCESS
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|access
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_close
r_static
r_int
id|encode_close
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_closeargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_CLOSE
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;seqid
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;stateid.data
comma
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_commit
r_static
r_int
id|encode_commit
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_writeargs
op_star
id|args
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_COMMIT
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|args-&gt;offset
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|args-&gt;count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_create
r_static
r_int
id|encode_create
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_create_arg
op_star
id|create
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_CREATE
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|create-&gt;ftype
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|create-&gt;ftype
)paren
(brace
r_case
id|NF4LNK
suffix:colon
id|RESERVE_SPACE
c_func
(paren
l_int|4
op_plus
id|create-&gt;u.symlink-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|create-&gt;u.symlink-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|create-&gt;u.symlink-&gt;name
comma
id|create-&gt;u.symlink-&gt;len
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|NF4BLK
suffix:colon
r_case
id|NF4CHR
suffix:colon
id|RESERVE_SPACE
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|create-&gt;u.device.specdata1
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|create-&gt;u.device.specdata2
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|RESERVE_SPACE
c_func
(paren
l_int|4
op_plus
id|create-&gt;name-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|create-&gt;name-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|create-&gt;name-&gt;name
comma
id|create-&gt;name-&gt;len
)paren
suffix:semicolon
r_return
id|encode_attrs
c_func
(paren
id|xdr
comma
id|create-&gt;attrs
comma
id|create-&gt;server
)paren
suffix:semicolon
)brace
DECL|function|encode_getattr_one
r_static
r_int
id|encode_getattr_one
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
id|bitmap
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_GETATTR
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|bitmap
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_getattr_two
r_static
r_int
id|encode_getattr_two
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
id|bm0
comma
r_uint32
id|bm1
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_GETATTR
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|bm0
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|bm1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_getfattr
r_static
r_int
id|encode_getfattr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
id|u32
op_star
id|bitmask
)paren
(brace
r_extern
id|u32
id|nfs4_fattr_bitmap
(braket
)braket
suffix:semicolon
r_return
id|encode_getattr_two
c_func
(paren
id|xdr
comma
id|bitmask
(braket
l_int|0
)braket
op_amp
id|nfs4_fattr_bitmap
(braket
l_int|0
)braket
comma
id|bitmask
(braket
l_int|1
)braket
op_amp
id|nfs4_fattr_bitmap
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
DECL|function|encode_fsinfo
r_static
r_int
id|encode_fsinfo
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
id|u32
op_star
id|bitmask
)paren
(brace
r_extern
id|u32
id|nfs4_fsinfo_bitmap
(braket
)braket
suffix:semicolon
r_return
id|encode_getattr_two
c_func
(paren
id|xdr
comma
id|bitmask
(braket
l_int|0
)braket
op_amp
id|nfs4_fsinfo_bitmap
(braket
l_int|0
)braket
comma
id|bitmask
(braket
l_int|1
)braket
op_amp
id|nfs4_fsinfo_bitmap
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
DECL|function|encode_getfh
r_static
r_int
id|encode_getfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_GETFH
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_link
r_static
r_int
id|encode_link
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|qstr
op_star
id|name
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|name-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_LINK
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|name-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|name-&gt;name
comma
id|name-&gt;len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * opcode,type,reclaim,offset,length,new_lock_owner = 32&n; * open_seqid,open_stateid,lock_seqid,lock_owner.clientid, lock_owner.id = 40&n; */
DECL|function|encode_lock
r_static
r_int
id|encode_lock
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_lockargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_struct
id|nfs_lock_opargs
op_star
id|opargs
op_assign
id|arg-&gt;u.lock
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|32
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_LOCK
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;type
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|opargs-&gt;reclaim
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;offset
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;length
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|opargs-&gt;new_lock_owner
)paren
suffix:semicolon
r_if
c_cond
(paren
id|opargs-&gt;new_lock_owner
)paren
(brace
r_struct
id|nfs_open_to_lock
op_star
id|ol
op_assign
id|opargs-&gt;u.open_lock
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|40
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|ol-&gt;open_seqid
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
op_amp
id|ol-&gt;open_stateid
comma
r_sizeof
(paren
id|ol-&gt;open_stateid
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|ol-&gt;lock_seqid
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|ol-&gt;lock_owner.clientid
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|ol-&gt;lock_owner.id
)paren
suffix:semicolon
)brace
r_else
(brace
r_struct
id|nfs_exist_lock
op_star
id|el
op_assign
id|opargs-&gt;u.exist_lock
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|20
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
op_amp
id|el-&gt;stateid
comma
r_sizeof
(paren
id|el-&gt;stateid
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|el-&gt;seqid
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_lockt
r_static
r_int
id|encode_lockt
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_lockargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_struct
id|nfs_lowner
op_star
id|opargs
op_assign
id|arg-&gt;u.lockt
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|40
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_LOCKT
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;type
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;offset
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;length
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|opargs-&gt;clientid
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|opargs-&gt;id
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_locku
r_static
r_int
id|encode_locku
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_lockargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_struct
id|nfs_locku_opargs
op_star
id|opargs
op_assign
id|arg-&gt;u.locku
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|44
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_LOCKU
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;type
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|opargs-&gt;seqid
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
op_amp
id|opargs-&gt;stateid
comma
r_sizeof
(paren
id|opargs-&gt;stateid
)paren
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;offset
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|arg-&gt;length
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_lookup
r_static
r_int
id|encode_lookup
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|qstr
op_star
id|name
)paren
(brace
r_int
id|len
op_assign
id|name-&gt;len
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_LOOKUP
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|name-&gt;name
comma
id|len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_open
r_static
r_int
id|encode_open
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_openargs
op_star
id|arg
)paren
(brace
r_int
id|status
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
multiline_comment|/*&n; * opcode 4, seqid 4, share_access 4, share_deny 4, clientid 8, ownerlen 4,&n; * owner 4, opentype 4 = 36&n; */
id|RESERVE_SPACE
c_func
(paren
l_int|36
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_OPEN
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;seqid
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|arg-&gt;share_access
)paren
(brace
r_case
id|FMODE_READ
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_READ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|FMODE_WRITE
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_WRITE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|FMODE_READ
op_or
id|FMODE_WRITE
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_BOTH
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|BUG
c_func
(paren
)paren
suffix:semicolon
)brace
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/* for linux, share_deny = 0 always */
id|WRITE64
c_func
(paren
id|arg-&gt;clientid
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;id
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;opentype
)paren
suffix:semicolon
r_if
c_cond
(paren
id|arg-&gt;opentype
op_eq
id|NFS4_OPEN_CREATE
)paren
(brace
r_if
c_cond
(paren
id|arg-&gt;createmode
op_eq
id|NFS4_CREATE_EXCLUSIVE
)paren
(brace
id|RESERVE_SPACE
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;createmode
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;u.verifier.data
comma
r_sizeof
(paren
id|arg-&gt;u.verifier.data
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|arg-&gt;u.attrs
)paren
(brace
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;createmode
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_attrs
c_func
(paren
id|xdr
comma
id|arg-&gt;u.attrs
comma
id|arg-&gt;server
)paren
)paren
)paren
r_return
id|status
suffix:semicolon
)brace
r_else
(brace
id|RESERVE_SPACE
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;createmode
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|arg-&gt;name-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_OPEN_CLAIM_NULL
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;name-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;name-&gt;name
comma
id|arg-&gt;name-&gt;len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_open_confirm
r_static
r_int
id|encode_open_confirm
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_open_confirmargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_OPEN_CONFIRM
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;stateid.data
comma
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;seqid
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_open_reclaim
r_static
r_int
id|encode_open_reclaim
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_open_reclaimargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
multiline_comment|/*&n; * opcode 4, seqid 4, share_access 4, share_deny 4, clientid 8, ownerlen 4,&n; * owner 4, opentype 4, claim 4, delegation_type 4 = 44&n; */
id|RESERVE_SPACE
c_func
(paren
l_int|44
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_OPEN
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;seqid
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|arg-&gt;share_access
)paren
(brace
r_case
id|FMODE_READ
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_READ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|FMODE_WRITE
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_WRITE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|FMODE_READ
op_or
id|FMODE_WRITE
suffix:colon
id|WRITE32
c_func
(paren
id|NFS4_SHARE_ACCESS_BOTH
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|BUG
c_func
(paren
)paren
suffix:semicolon
)brace
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/* for linux, share_deny = 0 always */
id|WRITE64
c_func
(paren
id|arg-&gt;clientid
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;id
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_OPEN_NOCREATE
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_OPEN_CLAIM_PREVIOUS
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|NFS4_OPEN_DELEGATE_NONE
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_open_downgrade
r_static
r_int
id|encode_open_downgrade
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_closeargs
op_star
id|arg
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|16
op_plus
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_OPEN_DOWNGRADE
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;stateid.data
comma
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;seqid
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|arg-&gt;share_access
)paren
suffix:semicolon
multiline_comment|/* No deny modes */
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|encode_putfh
id|encode_putfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_fh
op_star
id|fh
)paren
(brace
r_int
id|len
op_assign
id|fh-&gt;size
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_PUTFH
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|fh-&gt;data
comma
id|len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_putrootfh
r_static
r_int
id|encode_putrootfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_PUTROOTFH
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_stateid
r_static
r_void
id|encode_stateid
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_state
op_star
id|state
comma
id|fl_owner_t
id|lockowner
)paren
(brace
r_extern
id|nfs4_stateid
id|zero_stateid
suffix:semicolon
id|nfs4_stateid
id|stateid
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|state
op_ne
l_int|NULL
)paren
(brace
id|nfs4_copy_stateid
c_func
(paren
op_amp
id|stateid
comma
id|state
comma
id|lockowner
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|stateid.data
comma
r_sizeof
(paren
id|stateid.data
)paren
)paren
suffix:semicolon
)brace
r_else
id|WRITEMEM
c_func
(paren
id|zero_stateid.data
comma
r_sizeof
(paren
id|zero_stateid.data
)paren
)paren
suffix:semicolon
)brace
DECL|function|encode_read
r_static
r_int
id|encode_read
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_readargs
op_star
id|args
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_READ
)paren
suffix:semicolon
id|encode_stateid
c_func
(paren
id|xdr
comma
id|args-&gt;state
comma
id|args-&gt;lockowner
)paren
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|args-&gt;offset
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|args-&gt;count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_readdir
r_static
r_int
id|encode_readdir
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_readdir_arg
op_star
id|readdir
comma
r_struct
id|rpc_rqst
op_star
id|req
)paren
(brace
r_struct
id|rpc_auth
op_star
id|auth
op_assign
id|req-&gt;rq_task-&gt;tk_auth
suffix:semicolon
r_int
id|replen
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|32
op_plus
r_sizeof
(paren
id|nfs4_verifier
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_READDIR
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|readdir-&gt;cookie
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|readdir-&gt;verifier.data
comma
r_sizeof
(paren
id|readdir-&gt;verifier.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|readdir-&gt;count
op_rshift
l_int|5
)paren
suffix:semicolon
multiline_comment|/* meaningless &quot;dircount&quot; field */
id|WRITE32
c_func
(paren
id|readdir-&gt;count
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|FATTR4_WORD0_FILEID
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/* set up reply iovec&n;&t; *    toplevel_status + taglen + rescount + OP_PUTFH + status&n;&t; *      + OP_READDIR + status + verifer(2)  = 9&n;&t; */
id|replen
op_assign
(paren
id|RPC_REPHDRSIZE
op_plus
id|auth-&gt;au_rslack
op_plus
l_int|9
)paren
op_lshift
l_int|2
suffix:semicolon
id|xdr_inline_pages
c_func
(paren
op_amp
id|req-&gt;rq_rcv_buf
comma
id|replen
comma
id|readdir-&gt;pages
comma
id|readdir-&gt;pgbase
comma
id|readdir-&gt;count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_readlink
r_static
r_int
id|encode_readlink
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_readlink
op_star
id|readlink
comma
r_struct
id|rpc_rqst
op_star
id|req
)paren
(brace
r_struct
id|rpc_auth
op_star
id|auth
op_assign
id|req-&gt;rq_task-&gt;tk_auth
suffix:semicolon
r_int
id|replen
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_READLINK
)paren
suffix:semicolon
multiline_comment|/* set up reply iovec&n;&t; *    toplevel_status + taglen + rescount + OP_PUTFH + status&n;&t; *      + OP_READLINK + status  = 7&n;&t; */
id|replen
op_assign
(paren
id|RPC_REPHDRSIZE
op_plus
id|auth-&gt;au_rslack
op_plus
l_int|7
)paren
op_lshift
l_int|2
suffix:semicolon
id|xdr_inline_pages
c_func
(paren
op_amp
id|req-&gt;rq_rcv_buf
comma
id|replen
comma
id|readlink-&gt;pages
comma
l_int|0
comma
id|readlink-&gt;count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_remove
r_static
r_int
id|encode_remove
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|qstr
op_star
id|name
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|name-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_REMOVE
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|name-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|name-&gt;name
comma
id|name-&gt;len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_rename
r_static
r_int
id|encode_rename
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|qstr
op_star
id|oldname
comma
r_const
r_struct
id|qstr
op_star
id|newname
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|8
op_plus
id|oldname-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_RENAME
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|oldname-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|oldname-&gt;name
comma
id|oldname-&gt;len
)paren
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
op_plus
id|newname-&gt;len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|newname-&gt;len
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|newname-&gt;name
comma
id|newname-&gt;len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_renew
r_static
r_int
id|encode_renew
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_client
op_star
id|client_stateid
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_RENEW
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|client_stateid-&gt;cl_clientid
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|encode_savefh
id|encode_savefh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_SAVEFH
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_setattr
r_static
r_int
id|encode_setattr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_setattrargs
op_star
id|arg
comma
r_const
r_struct
id|nfs_server
op_star
id|server
)paren
(brace
r_int
id|status
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
op_plus
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_SETATTR
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|arg-&gt;stateid.data
comma
r_sizeof
(paren
id|arg-&gt;stateid.data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_attrs
c_func
(paren
id|xdr
comma
id|arg-&gt;iap
comma
id|server
)paren
)paren
)paren
r_return
id|status
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_setclientid
r_static
r_int
id|encode_setclientid
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_setclientid
op_star
id|setclientid
)paren
(brace
r_uint32
id|total_len
suffix:semicolon
r_uint32
id|len1
comma
id|len2
comma
id|len3
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
id|len1
op_assign
id|strlen
c_func
(paren
id|setclientid-&gt;sc_name
)paren
suffix:semicolon
id|len2
op_assign
id|strlen
c_func
(paren
id|setclientid-&gt;sc_netid
)paren
suffix:semicolon
id|len3
op_assign
id|strlen
c_func
(paren
id|setclientid-&gt;sc_uaddr
)paren
suffix:semicolon
id|total_len
op_assign
id|XDR_QUADLEN
c_func
(paren
id|len1
)paren
op_plus
id|XDR_QUADLEN
c_func
(paren
id|len2
)paren
op_plus
id|XDR_QUADLEN
c_func
(paren
id|len3
)paren
suffix:semicolon
id|total_len
op_assign
(paren
id|total_len
op_lshift
l_int|2
)paren
op_plus
l_int|24
op_plus
r_sizeof
(paren
id|setclientid-&gt;sc_verifier.data
)paren
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
id|total_len
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_SETCLIENTID
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|setclientid-&gt;sc_verifier.data
comma
r_sizeof
(paren
id|setclientid-&gt;sc_verifier.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|len1
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|setclientid-&gt;sc_name
comma
id|len1
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|setclientid-&gt;sc_prog
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|len2
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|setclientid-&gt;sc_netid
comma
id|len2
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|len3
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|setclientid-&gt;sc_uaddr
comma
id|len3
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|setclientid-&gt;sc_cb_ident
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_setclientid_confirm
r_static
r_int
id|encode_setclientid_confirm
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs4_client
op_star
id|client_state
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|12
op_plus
r_sizeof
(paren
id|client_state-&gt;cl_confirm.data
)paren
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_SETCLIENTID_CONFIRM
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|client_state-&gt;cl_clientid
)paren
suffix:semicolon
id|WRITEMEM
c_func
(paren
id|client_state-&gt;cl_confirm.data
comma
r_sizeof
(paren
id|client_state-&gt;cl_confirm.data
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|encode_write
r_static
r_int
id|encode_write
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_const
r_struct
id|nfs_writeargs
op_star
id|args
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|OP_WRITE
)paren
suffix:semicolon
id|encode_stateid
c_func
(paren
id|xdr
comma
id|args-&gt;state
comma
id|args-&gt;lockowner
)paren
suffix:semicolon
id|RESERVE_SPACE
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|WRITE64
c_func
(paren
id|args-&gt;offset
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|args-&gt;stable
)paren
suffix:semicolon
id|WRITE32
c_func
(paren
id|args-&gt;count
)paren
suffix:semicolon
id|xdr_write_pages
c_func
(paren
id|xdr
comma
id|args-&gt;pages
comma
id|args-&gt;pgbase
comma
id|args-&gt;count
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * END OF &quot;GENERIC&quot; ENCODE ROUTINES.&n; */
multiline_comment|/*&n; * Encode an ACCESS request&n; */
DECL|function|nfs4_xdr_enc_access
r_static
r_int
id|nfs4_xdr_enc_access
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_accessargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|encode_access
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;access
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode LOOKUP request&n; */
DECL|function|nfs4_xdr_enc_lookup
r_static
r_int
id|nfs4_xdr_enc_lookup
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_lookup_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|4
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;dir_fh
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_lookup
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;name
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_getfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode LOOKUP_ROOT request&n; */
DECL|function|nfs4_xdr_enc_lookup_root
r_static
r_int
id|nfs4_xdr_enc_lookup_root
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_lookup_root_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|3
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putrootfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_getfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode REMOVE request&n; */
DECL|function|nfs4_xdr_enc_remove
r_static
r_int
id|nfs4_xdr_enc_remove
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_remove_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|encode_remove
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;name
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode RENAME request&n; */
DECL|function|nfs4_xdr_enc_rename
r_static
r_int
id|nfs4_xdr_enc_rename
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_rename_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|4
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;old_dir
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_savefh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;new_dir
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_rename
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;old_name
comma
id|args-&gt;new_name
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode LINK request&n; */
DECL|function|nfs4_xdr_enc_link
r_static
r_int
id|nfs4_xdr_enc_link
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_link_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|4
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_savefh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;dir_fh
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_link
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;name
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode CREATE request&n; */
DECL|function|nfs4_xdr_enc_create
r_static
r_int
id|nfs4_xdr_enc_create
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_create_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|4
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;dir_fh
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_create
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_getfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode GETATTR request&n; */
DECL|function|nfs4_xdr_enc_getattr
r_static
r_int
id|nfs4_xdr_enc_getattr
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_getattr_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a CLOSE request&n; */
DECL|function|nfs4_xdr_enc_close
r_static
r_int
id|nfs4_xdr_enc_close
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_closeargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_close
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode an OPEN request&n; */
DECL|function|nfs4_xdr_enc_open
r_static
r_int
id|nfs4_xdr_enc_open
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_openargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|4
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_open
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_getfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode an OPEN_CONFIRM request&n; */
DECL|function|nfs4_xdr_enc_open_confirm
r_static
r_int
id|nfs4_xdr_enc_open_confirm
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_open_confirmargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_open_confirm
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode an OPEN request&n; */
DECL|function|nfs4_xdr_enc_open_reclaim
r_static
r_int
id|nfs4_xdr_enc_open_reclaim
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_open_reclaimargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|3
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_open_reclaim
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode an OPEN_DOWNGRADE request&n; */
DECL|function|nfs4_xdr_enc_open_downgrade
r_static
r_int
id|nfs4_xdr_enc_open_downgrade
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_closeargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_open_downgrade
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a LOCK request&n; */
DECL|function|nfs4_xdr_enc_lock
r_static
r_int
id|nfs4_xdr_enc_lock
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_lock
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a LOCKT request&n; */
DECL|function|nfs4_xdr_enc_lockt
r_static
r_int
id|nfs4_xdr_enc_lockt
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_lockt
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a LOCKU request&n; */
DECL|function|nfs4_xdr_enc_locku
r_static
r_int
id|nfs4_xdr_enc_locku
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_locku
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a READLINK request&n; */
DECL|function|nfs4_xdr_enc_readlink
r_static
r_int
id|nfs4_xdr_enc_readlink
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_readlink
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_readlink
c_func
(paren
op_amp
id|xdr
comma
id|args
comma
id|req
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a READDIR request&n; */
DECL|function|nfs4_xdr_enc_readdir
r_static
r_int
id|nfs4_xdr_enc_readdir
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_readdir_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_readdir
c_func
(paren
op_amp
id|xdr
comma
id|args
comma
id|req
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a READ request&n; */
DECL|function|nfs4_xdr_enc_read
r_static
r_int
id|nfs4_xdr_enc_read
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_readargs
op_star
id|args
)paren
(brace
r_struct
id|rpc_auth
op_star
id|auth
op_assign
id|req-&gt;rq_task-&gt;tk_auth
suffix:semicolon
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|replen
comma
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_read
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
multiline_comment|/* set up reply iovec&n;&t; *    toplevel status + taglen=0 + rescount + OP_PUTFH + status&n;&t; *       + OP_READ + status + eof + datalen = 9&n;&t; */
id|replen
op_assign
(paren
id|RPC_REPHDRSIZE
op_plus
id|auth-&gt;au_rslack
op_plus
id|NFS4_dec_read_sz
)paren
op_lshift
l_int|2
suffix:semicolon
id|xdr_inline_pages
c_func
(paren
op_amp
id|req-&gt;rq_rcv_buf
comma
id|replen
comma
id|args-&gt;pages
comma
id|args-&gt;pgbase
comma
id|args-&gt;count
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode an SETATTR request&n; */
DECL|function|nfs4_xdr_enc_setattr
r_static
r_int
id|nfs4_xdr_enc_setattr
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_setattrargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|3
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_setattr
c_func
(paren
op_amp
id|xdr
comma
id|args
comma
id|args-&gt;server
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|status
op_assign
id|encode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Encode a WRITE request&n; */
DECL|function|nfs4_xdr_enc_write
r_static
r_int
id|nfs4_xdr_enc_write
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_writeargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_write
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; *  a COMMIT request&n; */
DECL|function|nfs4_xdr_enc_commit
r_static
r_int
id|nfs4_xdr_enc_commit
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_writeargs
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|encode_commit
c_func
(paren
op_amp
id|xdr
comma
id|args
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * FSINFO request&n; */
DECL|function|nfs4_xdr_enc_fsinfo
r_static
r_int
id|nfs4_xdr_enc_fsinfo
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_fsinfo_arg
op_star
id|args
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|encode_fsinfo
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * a PATHCONF request&n; */
DECL|function|nfs4_xdr_enc_pathconf
r_static
r_int
id|nfs4_xdr_enc_pathconf
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_pathconf_arg
op_star
id|args
)paren
(brace
r_extern
id|u32
id|nfs4_pathconf_bitmap
(braket
l_int|2
)braket
suffix:semicolon
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|encode_getattr_one
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
(braket
l_int|0
)braket
op_amp
id|nfs4_pathconf_bitmap
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * a STATFS request&n; */
DECL|function|nfs4_xdr_enc_statfs
r_static
r_int
id|nfs4_xdr_enc_statfs
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_const
r_struct
id|nfs4_statfs_arg
op_star
id|args
)paren
(brace
r_extern
id|u32
id|nfs4_statfs_bitmap
(braket
)braket
suffix:semicolon
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|2
comma
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_putfh
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;fh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
l_int|0
)paren
id|status
op_assign
id|encode_getattr_two
c_func
(paren
op_amp
id|xdr
comma
id|args-&gt;bitmask
(braket
l_int|0
)braket
op_amp
id|nfs4_statfs_bitmap
(braket
l_int|0
)braket
comma
id|args-&gt;bitmask
(braket
l_int|1
)braket
op_amp
id|nfs4_statfs_bitmap
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * a RENEW request&n; */
DECL|function|nfs4_xdr_enc_renew
r_static
r_int
id|nfs4_xdr_enc_renew
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_client
op_star
id|clp
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|1
comma
)brace
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_return
id|encode_renew
c_func
(paren
op_amp
id|xdr
comma
id|clp
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * a SETCLIENTID request&n; */
DECL|function|nfs4_xdr_enc_setclientid
r_static
r_int
id|nfs4_xdr_enc_setclientid
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_setclientid
op_star
id|sc
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|1
comma
)brace
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_return
id|encode_setclientid
c_func
(paren
op_amp
id|xdr
comma
id|sc
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * a SETCLIENTID_CONFIRM request&n; */
DECL|function|nfs4_xdr_enc_setclientid_confirm
r_static
r_int
id|nfs4_xdr_enc_setclientid_confirm
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_client
op_star
id|clp
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
op_assign
(brace
dot
id|nops
op_assign
l_int|3
comma
)brace
suffix:semicolon
r_const
id|u32
id|lease_bitmap
(braket
l_int|2
)braket
op_assign
(brace
id|FATTR4_WORD0_LEASE_TIME
comma
l_int|0
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_encode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_snd_buf
comma
id|p
)paren
suffix:semicolon
id|encode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
id|status
op_assign
id|encode_setclientid_confirm
c_func
(paren
op_amp
id|xdr
comma
id|clp
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|encode_putrootfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|encode_fsinfo
c_func
(paren
op_amp
id|xdr
comma
id|lease_bitmap
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * START OF &quot;GENERIC&quot; DECODE ROUTINES.&n; *   These may look a little ugly since they are imported from a &quot;generic&quot;&n; * set of XDR encode/decode routines which are intended to be shared by&n; * all of our NFSv4 implementations (OpenBSD, MacOS X...).&n; *&n; * If the pain of reading these is too great, it should be a straightforward&n; * task to translate them into Linux-specific versions which are more&n; * consistent with the style used in NFSv2/v3...&n; */
DECL|macro|READ32
mdefine_line|#define READ32(x)         (x) = ntohl(*p++)
DECL|macro|READ64
mdefine_line|#define READ64(x)         do {&t;&t;&t;&bslash;&n;&t;(x) = (u64)ntohl(*p++) &lt;&lt; 32;&t;&t;&bslash;&n;&t;(x) |= ntohl(*p++);&t;&t;&t;&bslash;&n;} while (0)
DECL|macro|READTIME
mdefine_line|#define READTIME(x)       do {&t;&t;&t;&bslash;&n;&t;p++;&t;&t;&t;&t;&t;&bslash;&n;&t;(x.tv_sec) = ntohl(*p++);&t;&t;&bslash;&n;&t;(x.tv_nsec) = ntohl(*p++);&t;&t;&bslash;&n;} while (0)
DECL|macro|COPYMEM
mdefine_line|#define COPYMEM(x,nbytes) do {&t;&t;&t;&bslash;&n;&t;memcpy((x), p, nbytes);&t;&t;&t;&bslash;&n;&t;p += XDR_QUADLEN(nbytes);&t;&t;&bslash;&n;} while (0)
DECL|macro|READ_BUF
mdefine_line|#define READ_BUF(nbytes)  do { &bslash;&n;&t;p = xdr_inline_decode(xdr, nbytes); &bslash;&n;&t;if (!p) { &bslash;&n;&t;&t;printk(KERN_WARNING &quot;%s: reply buffer overflowed in line %d.&quot;, &bslash;&n;&t;&t;&t;       &t;__FUNCTION__, __LINE__); &bslash;&n;&t;&t;return -EIO; &bslash;&n;&t;} &bslash;&n;} while (0)
DECL|function|decode_compound_hdr
r_static
r_int
id|decode_compound_hdr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|compound_hdr
op_star
id|hdr
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|hdr-&gt;status
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|hdr-&gt;taglen
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|hdr-&gt;taglen
op_plus
l_int|4
)paren
suffix:semicolon
id|hdr-&gt;tag
op_assign
(paren
r_char
op_star
)paren
id|p
suffix:semicolon
id|p
op_add_assign
id|XDR_QUADLEN
c_func
(paren
id|hdr-&gt;taglen
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|hdr-&gt;nops
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_op_hdr
r_static
r_int
id|decode_op_hdr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_enum
id|nfs_opnum4
id|expected
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|opnum
suffix:semicolon
r_int32
id|nfserr
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|opnum
)paren
suffix:semicolon
r_if
c_cond
(paren
id|opnum
op_ne
id|expected
)paren
(brace
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;nfs4_decode_op_hdr: Server returned operation&quot;
l_string|&quot; %d but we issued a request for %d&bslash;n&quot;
comma
id|opnum
comma
id|expected
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|READ32
c_func
(paren
id|nfserr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nfserr
op_ne
id|NFS_OK
)paren
r_return
op_minus
id|nfs_stat_to_errno
c_func
(paren
id|nfserr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_bitmap
r_static
r_int
id|decode_attr_bitmap
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
)paren
(brace
r_uint32
id|bmlen
comma
op_star
id|p
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|bmlen
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_assign
id|bitmap
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|READ_BUF
c_func
(paren
(paren
id|bmlen
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bmlen
OG
l_int|0
)paren
(brace
id|READ32
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bmlen
OG
l_int|1
)paren
id|READ32
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_length
r_static
r_inline
r_int
id|decode_attr_length
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|attrlen
comma
r_uint32
op_star
op_star
id|savep
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|attrlen
)paren
suffix:semicolon
op_star
id|savep
op_assign
id|xdr-&gt;p
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_type
r_static
r_int
id|decode_attr_type
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|type
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|type
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_TYPE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_TYPE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|type
)paren
suffix:semicolon
r_if
c_cond
(paren
op_star
id|type
template_param
id|NF4NAMEDATTR
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s: bad type %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_star
id|type
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_TYPE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: type=0%o&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|nfs_type2fmt
(braket
op_star
id|type
)braket
dot
id|nfs2type
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_change
r_static
r_int
id|decode_attr_change
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|change
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|change
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_CHANGE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_CHANGE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|change
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_CHANGE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: change attribute=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|change
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_size
r_static
r_int
id|decode_attr_size
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|size
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|size
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_SIZE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_SIZE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|size
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_SIZE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: file size=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|size
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_fsid
r_static
r_int
id|decode_attr_fsid
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|nfs4_fsid
op_star
id|fsid
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|fsid-&gt;major
op_assign
l_int|0
suffix:semicolon
id|fsid-&gt;minor
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_FSID
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_FSID
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|fsid-&gt;major
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|fsid-&gt;minor
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_FSID
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: fsid=(0x%Lx/0x%Lx)&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
id|fsid-&gt;major
comma
(paren
r_int
r_int
r_int
)paren
id|fsid-&gt;minor
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_lease_time
r_static
r_int
id|decode_attr_lease_time
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|res
op_assign
l_int|60
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_LEASE_TIME
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_LEASE_TIME
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_LEASE_TIME
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: file size=%u&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_fileid
r_static
r_int
id|decode_attr_fileid
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|fileid
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|fileid
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_FILEID
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_FILEID
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|fileid
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_FILEID
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: fileid=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|fileid
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_files_avail
r_static
r_int
id|decode_attr_files_avail
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_FILES_AVAIL
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_FILES_AVAIL
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_FILES_AVAIL
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: files avail=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_files_free
r_static
r_int
id|decode_attr_files_free
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_FILES_FREE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_FILES_FREE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_FILES_FREE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: files free=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_files_total
r_static
r_int
id|decode_attr_files_total
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_FILES_TOTAL
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_FILES_TOTAL
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_FILES_TOTAL
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: files total=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_maxfilesize
r_static
r_int
id|decode_attr_maxfilesize
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_MAXFILESIZE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_MAXFILESIZE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_MAXFILESIZE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: maxfilesize=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_maxlink
r_static
r_int
id|decode_attr_maxlink
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|maxlink
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|maxlink
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_MAXLINK
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_MAXLINK
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|maxlink
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_MAXLINK
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: maxlink=%u&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_star
id|maxlink
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_maxname
r_static
r_int
id|decode_attr_maxname
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|maxname
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|maxname
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_MAXNAME
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_MAXNAME
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|maxname
)paren
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_MAXNAME
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: maxname=%u&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_star
id|maxname
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_maxread
r_static
r_int
id|decode_attr_maxread
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_MAXREAD
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_MAXREAD
)paren
)paren
(brace
r_uint64
id|maxread
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|maxread
)paren
suffix:semicolon
r_if
c_cond
(paren
id|maxread
OG
l_int|0x7FFFFFFF
)paren
id|maxread
op_assign
l_int|0x7FFFFFFF
suffix:semicolon
op_star
id|res
op_assign
(paren
r_uint32
)paren
id|maxread
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_MAXREAD
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: maxread=%lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_maxwrite
r_static
r_int
id|decode_attr_maxwrite
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
(paren
id|FATTR4_WORD0_MAXWRITE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|0
)braket
op_amp
id|FATTR4_WORD0_MAXWRITE
)paren
)paren
(brace
r_uint64
id|maxwrite
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|maxwrite
)paren
suffix:semicolon
r_if
c_cond
(paren
id|maxwrite
OG
l_int|0x7FFFFFFF
)paren
id|maxwrite
op_assign
l_int|0x7FFFFFFF
suffix:semicolon
op_star
id|res
op_assign
(paren
r_uint32
)paren
id|maxwrite
suffix:semicolon
id|bitmap
(braket
l_int|0
)braket
op_and_assign
op_complement
id|FATTR4_WORD0_MAXWRITE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: maxwrite=%lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_mode
r_static
r_int
id|decode_attr_mode
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|mode
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|mode
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_MODE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_MODE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|mode
)paren
suffix:semicolon
op_star
id|mode
op_and_assign
op_complement
id|S_IFMT
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_MODE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: file mode=0%o&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
)paren
op_star
id|mode
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_nlink
r_static
r_int
id|decode_attr_nlink
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint32
op_star
id|nlink
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|nlink
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_NUMLINKS
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_NUMLINKS
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
op_star
id|nlink
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_NUMLINKS
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: nlink=%u&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
)paren
op_star
id|nlink
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_owner
r_static
r_int
id|decode_attr_owner
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|nfs4_client
op_star
id|clp
comma
r_int32
op_star
id|uid
)paren
(brace
r_uint32
id|len
comma
op_star
id|p
suffix:semicolon
op_star
id|uid
op_assign
op_minus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_OWNER
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_OWNER
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|len
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OL
id|XDR_MAX_NETOBJ
)paren
(brace
r_if
c_cond
(paren
id|nfs_map_name_to_uid
c_func
(paren
id|clp
comma
(paren
r_char
op_star
)paren
id|p
comma
id|len
comma
id|uid
)paren
op_ne
l_int|0
)paren
id|dprintk
c_func
(paren
l_string|&quot;%s: nfs_map_name_to_uid failed!&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
)brace
r_else
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: name too long (%u)!&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|len
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_OWNER
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: uid=%d&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
)paren
op_star
id|uid
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_group
r_static
r_int
id|decode_attr_group
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|nfs4_client
op_star
id|clp
comma
r_int32
op_star
id|gid
)paren
(brace
r_uint32
id|len
comma
op_star
id|p
suffix:semicolon
op_star
id|gid
op_assign
op_minus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_OWNER_GROUP
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_OWNER_GROUP
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|len
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OL
id|XDR_MAX_NETOBJ
)paren
(brace
r_if
c_cond
(paren
id|nfs_map_group_to_gid
c_func
(paren
id|clp
comma
(paren
r_char
op_star
)paren
id|p
comma
id|len
comma
id|gid
)paren
op_ne
l_int|0
)paren
id|dprintk
c_func
(paren
l_string|&quot;%s: nfs_map_group_to_gid failed!&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
)brace
r_else
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: name too long (%u)!&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|len
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_OWNER_GROUP
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: gid=%d&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
)paren
op_star
id|gid
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_rdev
r_static
r_int
id|decode_attr_rdev
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
id|dev_t
op_star
id|rdev
)paren
(brace
r_uint32
id|major
op_assign
l_int|0
comma
id|minor
op_assign
l_int|0
comma
op_star
id|p
suffix:semicolon
op_star
id|rdev
op_assign
id|MKDEV
c_func
(paren
l_int|0
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_RAWDEV
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_RAWDEV
)paren
)paren
(brace
id|dev_t
id|tmp
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|major
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|minor
)paren
suffix:semicolon
id|tmp
op_assign
id|MKDEV
c_func
(paren
id|major
comma
id|minor
)paren
suffix:semicolon
r_if
c_cond
(paren
id|MAJOR
c_func
(paren
id|tmp
)paren
op_eq
id|major
op_logical_and
id|MINOR
c_func
(paren
id|tmp
)paren
op_eq
id|minor
)paren
op_star
id|rdev
op_assign
id|tmp
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_RAWDEV
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: rdev=(0x%x:0x%x)&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|major
comma
id|minor
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_space_avail
r_static
r_int
id|decode_attr_space_avail
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_SPACE_AVAIL
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_SPACE_AVAIL
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_SPACE_AVAIL
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: space avail=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_space_free
r_static
r_int
id|decode_attr_space_free
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_SPACE_FREE
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_SPACE_FREE
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_SPACE_FREE
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: space free=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_space_total
r_static
r_int
id|decode_attr_space_total
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
op_assign
l_int|0
suffix:semicolon
op_star
id|res
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_SPACE_TOTAL
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_SPACE_TOTAL
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|res
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_SPACE_TOTAL
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: space total=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|res
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_space_used
r_static
r_int
id|decode_attr_space_used
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_uint64
op_star
id|used
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
op_star
id|used
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_SPACE_USED
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_SPACE_USED
)paren
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ64
c_func
(paren
op_star
id|used
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_SPACE_USED
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: space used=%Lu&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
r_int
r_int
)paren
op_star
id|used
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_time
r_static
r_int
id|decode_attr_time
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|timespec
op_star
id|time
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint64
id|sec
suffix:semicolon
r_uint32
id|nsec
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|sec
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|nsec
)paren
suffix:semicolon
id|time-&gt;tv_sec
op_assign
(paren
id|time_t
)paren
id|sec
suffix:semicolon
id|time-&gt;tv_nsec
op_assign
(paren
r_int
)paren
id|nsec
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_attr_time_access
r_static
r_int
id|decode_attr_time_access
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|timespec
op_star
id|time
)paren
(brace
r_int
id|status
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_sec
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_nsec
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_TIME_ACCESS
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_TIME_ACCESS
)paren
)paren
(brace
id|status
op_assign
id|decode_attr_time
c_func
(paren
id|xdr
comma
id|time
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_TIME_ACCESS
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: atime=%ld&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
)paren
id|time-&gt;tv_sec
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_time_metadata
r_static
r_int
id|decode_attr_time_metadata
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|timespec
op_star
id|time
)paren
(brace
r_int
id|status
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_sec
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_nsec
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_TIME_METADATA
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_TIME_METADATA
)paren
)paren
(brace
id|status
op_assign
id|decode_attr_time
c_func
(paren
id|xdr
comma
id|time
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_TIME_METADATA
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: ctime=%ld&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
)paren
id|time-&gt;tv_sec
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_attr_time_modify
r_static
r_int
id|decode_attr_time_modify
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|bitmap
comma
r_struct
id|timespec
op_star
id|time
)paren
(brace
r_int
id|status
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_sec
op_assign
l_int|0
suffix:semicolon
id|time-&gt;tv_nsec
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
(paren
id|FATTR4_WORD1_TIME_MODIFY
op_minus
l_int|1U
)paren
)paren
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|bitmap
(braket
l_int|1
)braket
op_amp
id|FATTR4_WORD1_TIME_MODIFY
)paren
)paren
(brace
id|status
op_assign
id|decode_attr_time
c_func
(paren
id|xdr
comma
id|time
)paren
suffix:semicolon
id|bitmap
(braket
l_int|1
)braket
op_and_assign
op_complement
id|FATTR4_WORD1_TIME_MODIFY
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;%s: mtime=%ld&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_int
)paren
id|time-&gt;tv_sec
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|verify_attr_len
r_static
r_int
id|verify_attr_len
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_uint32
op_star
id|savep
comma
r_uint32
id|attrlen
)paren
(brace
r_int
r_int
id|attrwords
op_assign
id|XDR_QUADLEN
c_func
(paren
id|attrlen
)paren
suffix:semicolon
r_int
r_int
id|nwords
op_assign
id|xdr-&gt;p
op_minus
id|savep
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|attrwords
op_ne
id|nwords
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: server returned incorrect attribute length: %u %c %u&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|attrwords
op_lshift
l_int|2
comma
(paren
id|attrwords
OL
id|nwords
)paren
ques
c_cond
l_char|&squot;&lt;&squot;
suffix:colon
l_char|&squot;&gt;&squot;
comma
id|nwords
op_lshift
l_int|2
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_change_info
r_static
r_int
id|decode_change_info
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|20
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|cinfo-&gt;atomic
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|cinfo-&gt;before
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|cinfo-&gt;after
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_access
r_static
r_int
id|decode_access
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_accessres
op_star
id|access
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|supp
comma
id|acc
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_ACCESS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|supp
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|acc
)paren
suffix:semicolon
id|access-&gt;supported
op_assign
id|supp
suffix:semicolon
id|access-&gt;access
op_assign
id|acc
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_close
r_static
r_int
id|decode_close
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_closeres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_CLOSE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;stateid.data
comma
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_commit
r_static
r_int
id|decode_commit
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_writeres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_COMMIT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;verf-&gt;verifier
comma
l_int|8
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_create
r_static
r_int
id|decode_create
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|bmlen
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_CREATE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_change_info
c_func
(paren
id|xdr
comma
id|cinfo
)paren
)paren
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|bmlen
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|bmlen
op_lshift
l_int|2
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_statfs
r_static
r_int
id|decode_statfs
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_fsstat
op_star
id|fsstat
)paren
(brace
r_uint32
op_star
id|savep
suffix:semicolon
r_uint32
id|attrlen
comma
id|bitmap
(braket
l_int|2
)braket
op_assign
(brace
l_int|0
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_GETATTR
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_bitmap
c_func
(paren
id|xdr
comma
id|bitmap
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_length
c_func
(paren
id|xdr
comma
op_amp
id|attrlen
comma
op_amp
id|savep
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_files_avail
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;afiles
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_files_free
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;ffiles
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_files_total
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;tfiles
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_space_avail
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;abytes
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_space_free
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;fbytes
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_space_total
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsstat-&gt;tbytes
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|status
op_assign
id|verify_attr_len
c_func
(paren
id|xdr
comma
id|savep
comma
id|attrlen
)paren
suffix:semicolon
id|xdr_error
suffix:colon
r_if
c_cond
(paren
id|status
op_ne
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: xdr error %d!&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_minus
id|status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_pathconf
r_static
r_int
id|decode_pathconf
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_pathconf
op_star
id|pathconf
)paren
(brace
r_uint32
op_star
id|savep
suffix:semicolon
r_uint32
id|attrlen
comma
id|bitmap
(braket
l_int|2
)braket
op_assign
(brace
l_int|0
)brace
suffix:semicolon
r_int
id|status
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_GETATTR
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_bitmap
c_func
(paren
id|xdr
comma
id|bitmap
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_length
c_func
(paren
id|xdr
comma
op_amp
id|attrlen
comma
op_amp
id|savep
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_maxlink
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|pathconf-&gt;max_link
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_maxname
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|pathconf-&gt;max_namelen
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|status
op_assign
id|verify_attr_len
c_func
(paren
id|xdr
comma
id|savep
comma
id|attrlen
)paren
suffix:semicolon
id|xdr_error
suffix:colon
r_if
c_cond
(paren
id|status
op_ne
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: xdr error %d!&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_minus
id|status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_getfattr
r_static
r_int
id|decode_getfattr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_fattr
op_star
id|fattr
comma
r_const
r_struct
id|nfs_server
op_star
id|server
)paren
(brace
r_uint32
op_star
id|savep
suffix:semicolon
r_uint32
id|attrlen
comma
id|bitmap
(braket
l_int|2
)braket
op_assign
(brace
l_int|0
)brace
comma
id|type
suffix:semicolon
r_int
id|status
comma
id|fmode
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_GETATTR
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_bitmap
c_func
(paren
id|xdr
comma
id|bitmap
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fattr-&gt;bitmap
(braket
l_int|0
)braket
op_assign
id|bitmap
(braket
l_int|0
)braket
suffix:semicolon
id|fattr-&gt;bitmap
(braket
l_int|1
)braket
op_assign
id|bitmap
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_length
c_func
(paren
id|xdr
comma
op_amp
id|attrlen
comma
op_amp
id|savep
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_type
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|type
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fattr-&gt;type
op_assign
id|nfs_type2fmt
(braket
id|type
)braket
dot
id|nfs2type
suffix:semicolon
id|fmode
op_assign
id|nfs_type2fmt
(braket
id|type
)braket
dot
id|mode
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_change
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;change_attr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_size
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;size
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_fsid
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;fsid_u.nfs4
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_fileid
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;fileid
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_mode
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;mode
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fattr-&gt;mode
op_or_assign
id|fmode
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_nlink
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;nlink
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_owner
c_func
(paren
id|xdr
comma
id|bitmap
comma
id|server-&gt;nfs4_state
comma
op_amp
id|fattr-&gt;uid
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_group
c_func
(paren
id|xdr
comma
id|bitmap
comma
id|server-&gt;nfs4_state
comma
op_amp
id|fattr-&gt;gid
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_rdev
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;rdev
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_space_used
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;du.nfs3.used
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_time_access
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;atime
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_time_metadata
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;ctime
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_time_modify
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fattr-&gt;mtime
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|verify_attr_len
c_func
(paren
id|xdr
comma
id|savep
comma
id|attrlen
)paren
)paren
op_eq
l_int|0
)paren
(brace
id|fattr-&gt;valid
op_assign
id|NFS_ATTR_FATTR
op_or
id|NFS_ATTR_FATTR_V3
op_or
id|NFS_ATTR_FATTR_V4
suffix:semicolon
id|fattr-&gt;timestamp
op_assign
id|jiffies
suffix:semicolon
)brace
id|xdr_error
suffix:colon
r_if
c_cond
(paren
id|status
op_ne
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: xdr error %d!&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_minus
id|status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_fsinfo
r_static
r_int
id|decode_fsinfo
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_fsinfo
op_star
id|fsinfo
)paren
(brace
r_uint32
op_star
id|savep
suffix:semicolon
r_uint32
id|attrlen
comma
id|bitmap
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|status
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_GETATTR
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_bitmap
c_func
(paren
id|xdr
comma
id|bitmap
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_length
c_func
(paren
id|xdr
comma
op_amp
id|attrlen
comma
op_amp
id|savep
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fsinfo-&gt;rtmult
op_assign
id|fsinfo-&gt;wtmult
op_assign
l_int|512
suffix:semicolon
multiline_comment|/* ??? */
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_lease_time
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsinfo-&gt;lease_time
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_maxfilesize
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsinfo-&gt;maxfilesize
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_maxread
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsinfo-&gt;rtmax
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fsinfo-&gt;rtpref
op_assign
id|fsinfo-&gt;dtpref
op_assign
id|fsinfo-&gt;rtmax
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_attr_maxwrite
c_func
(paren
id|xdr
comma
id|bitmap
comma
op_amp
id|fsinfo-&gt;wtmax
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|xdr_error
suffix:semicolon
id|fsinfo-&gt;wtpref
op_assign
id|fsinfo-&gt;wtmax
suffix:semicolon
id|status
op_assign
id|verify_attr_len
c_func
(paren
id|xdr
comma
id|savep
comma
id|attrlen
)paren
suffix:semicolon
id|xdr_error
suffix:colon
r_if
c_cond
(paren
id|status
op_ne
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: xdr error %d!&bslash;n&quot;
comma
id|__FUNCTION__
comma
op_minus
id|status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_getfh
r_static
r_int
id|decode_getfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_fh
op_star
id|fh
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|len
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_GETFH
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
multiline_comment|/* Zero handle first to allow comparisons */
id|memset
c_func
(paren
id|fh
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|fh
)paren
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
id|NFS4_FHSIZE
)paren
r_return
op_minus
id|EIO
suffix:semicolon
id|fh-&gt;size
op_assign
id|len
suffix:semicolon
id|READ_BUF
c_func
(paren
id|len
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|fh-&gt;data
comma
id|len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_link
r_static
r_int
id|decode_link
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_LINK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
r_return
id|decode_change_info
c_func
(paren
id|xdr
comma
id|cinfo
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * We create the owner, so we know a proper owner.id length is 4.&n; */
DECL|function|decode_lock_denied
r_static
r_int
id|decode_lock_denied
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_lock_denied
op_star
id|denied
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|namelen
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|32
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|denied-&gt;offset
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|denied-&gt;length
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|denied-&gt;type
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|denied-&gt;owner.clientid
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|namelen
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|namelen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|namelen
op_eq
l_int|4
)paren
id|READ32
c_func
(paren
id|denied-&gt;owner.id
)paren
suffix:semicolon
r_return
op_minus
id|NFS4ERR_DENIED
suffix:semicolon
)brace
DECL|function|decode_lock
r_static
r_int
id|decode_lock
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_LOCK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
l_int|0
)paren
(brace
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|nfs4_stateid
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
op_amp
id|res-&gt;u.stateid
comma
r_sizeof
(paren
id|res-&gt;u.stateid
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|status
op_eq
op_minus
id|NFS4ERR_DENIED
)paren
r_return
id|decode_lock_denied
c_func
(paren
id|xdr
comma
op_amp
id|res-&gt;u.denied
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_lockt
r_static
r_int
id|decode_lockt
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_LOCKT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
op_minus
id|NFS4ERR_DENIED
)paren
r_return
id|decode_lock_denied
c_func
(paren
id|xdr
comma
op_amp
id|res-&gt;u.denied
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_locku
r_static
r_int
id|decode_locku
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_LOCKU
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_eq
l_int|0
)paren
(brace
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|nfs4_stateid
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
op_amp
id|res-&gt;u.stateid
comma
r_sizeof
(paren
id|res-&gt;u.stateid
)paren
)paren
suffix:semicolon
)brace
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_lookup
r_static
r_int
id|decode_lookup
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_LOOKUP
)paren
suffix:semicolon
)brace
DECL|function|decode_open
r_static
r_int
id|decode_open
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_openres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|bmlen
comma
id|delegation_type
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_OPEN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;stateid.data
comma
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|decode_change_info
c_func
(paren
id|xdr
comma
op_amp
id|res-&gt;cinfo
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|res-&gt;rflags
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|bmlen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bmlen
OG
l_int|10
)paren
r_goto
id|xdr_error
suffix:semicolon
id|READ_BUF
c_func
(paren
(paren
id|bmlen
op_lshift
l_int|2
)paren
op_plus
l_int|4
)paren
suffix:semicolon
id|p
op_add_assign
id|bmlen
suffix:semicolon
id|READ32
c_func
(paren
id|delegation_type
)paren
suffix:semicolon
r_if
c_cond
(paren
id|delegation_type
op_eq
id|NFS4_OPEN_DELEGATE_NONE
)paren
r_return
l_int|0
suffix:semicolon
id|xdr_error
suffix:colon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: xdr error!&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
DECL|function|decode_open_confirm
r_static
r_int
id|decode_open_confirm
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_open_confirmres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_OPEN_CONFIRM
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;stateid.data
comma
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_open_downgrade
r_static
r_int
id|decode_open_downgrade
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_closeres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_OPEN_DOWNGRADE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;stateid.data
comma
r_sizeof
(paren
id|res-&gt;stateid.data
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_putfh
r_static
r_int
id|decode_putfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_PUTFH
)paren
suffix:semicolon
)brace
DECL|function|decode_putrootfh
r_static
r_int
id|decode_putrootfh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_PUTROOTFH
)paren
suffix:semicolon
)brace
DECL|function|decode_read
r_static
r_int
id|decode_read
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|rpc_rqst
op_star
id|req
comma
r_struct
id|nfs_readres
op_star
id|res
)paren
(brace
r_struct
id|iovec
op_star
id|iov
op_assign
id|req-&gt;rq_rvec
suffix:semicolon
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|count
comma
id|eof
comma
id|recvd
comma
id|hdrlen
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_READ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|eof
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|count
)paren
suffix:semicolon
id|hdrlen
op_assign
(paren
id|u8
op_star
)paren
id|p
op_minus
(paren
id|u8
op_star
)paren
id|iov-&gt;iov_base
suffix:semicolon
id|recvd
op_assign
id|req-&gt;rq_received
op_minus
id|hdrlen
suffix:semicolon
r_if
c_cond
(paren
id|count
OG
id|recvd
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;NFS: server cheating in read reply: &quot;
l_string|&quot;count %u &gt; recvd %u&bslash;n&quot;
comma
id|count
comma
id|recvd
)paren
suffix:semicolon
id|count
op_assign
id|recvd
suffix:semicolon
id|eof
op_assign
l_int|0
suffix:semicolon
)brace
id|xdr_read_pages
c_func
(paren
id|xdr
comma
id|count
)paren
suffix:semicolon
id|res-&gt;eof
op_assign
id|eof
suffix:semicolon
id|res-&gt;count
op_assign
id|count
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_readdir
r_static
r_int
id|decode_readdir
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|rpc_rqst
op_star
id|req
comma
r_struct
id|nfs4_readdir_res
op_star
id|readdir
)paren
(brace
r_struct
id|xdr_buf
op_star
id|rcvbuf
op_assign
op_amp
id|req-&gt;rq_rcv_buf
suffix:semicolon
r_struct
id|page
op_star
id|page
op_assign
op_star
id|rcvbuf-&gt;pages
suffix:semicolon
r_struct
id|iovec
op_star
id|iov
op_assign
id|rcvbuf-&gt;head
suffix:semicolon
r_int
r_int
id|nr
comma
id|pglen
op_assign
id|rcvbuf-&gt;page_len
suffix:semicolon
r_uint32
op_star
id|end
comma
op_star
id|entry
comma
op_star
id|p
comma
op_star
id|kaddr
suffix:semicolon
r_uint32
id|len
comma
id|attrlen
comma
id|word
suffix:semicolon
r_int
id|i
comma
id|hdrlen
comma
id|recvd
comma
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_READDIR
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|readdir-&gt;verifier.data
comma
l_int|8
)paren
suffix:semicolon
id|hdrlen
op_assign
(paren
r_char
op_star
)paren
id|p
op_minus
(paren
r_char
op_star
)paren
id|iov-&gt;iov_base
suffix:semicolon
id|recvd
op_assign
id|req-&gt;rq_received
op_minus
id|hdrlen
suffix:semicolon
r_if
c_cond
(paren
id|pglen
OG
id|recvd
)paren
id|pglen
op_assign
id|recvd
suffix:semicolon
id|xdr_read_pages
c_func
(paren
id|xdr
comma
id|pglen
)paren
suffix:semicolon
id|BUG_ON
c_func
(paren
id|pglen
op_plus
id|readdir-&gt;pgbase
OG
id|PAGE_CACHE_SIZE
)paren
suffix:semicolon
id|kaddr
op_assign
id|p
op_assign
(paren
r_uint32
op_star
)paren
id|kmap_atomic
c_func
(paren
id|page
comma
id|KM_USER0
)paren
suffix:semicolon
id|end
op_assign
(paren
r_uint32
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|p
op_plus
id|pglen
op_plus
id|readdir-&gt;pgbase
)paren
suffix:semicolon
id|entry
op_assign
id|p
suffix:semicolon
r_for
c_loop
(paren
id|nr
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_increment
suffix:semicolon
id|nr
op_increment
)paren
(brace
r_if
c_cond
(paren
id|p
op_plus
l_int|3
OG
id|end
)paren
r_goto
id|short_pkt
suffix:semicolon
id|p
op_add_assign
l_int|2
suffix:semicolon
multiline_comment|/* cookie */
id|len
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
multiline_comment|/* filename length */
r_if
c_cond
(paren
id|len
OG
id|NFS4_MAXNAMLEN
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;NFS: giant filename in readdir (len 0x%x)&bslash;n&quot;
comma
id|len
)paren
suffix:semicolon
r_goto
id|err_unmap
suffix:semicolon
)brace
id|p
op_add_assign
id|XDR_QUADLEN
c_func
(paren
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_plus
l_int|1
OG
id|end
)paren
r_goto
id|short_pkt
suffix:semicolon
id|len
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
multiline_comment|/* bitmap length */
r_if
c_cond
(paren
id|len
OG
l_int|10
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;NFS: giant bitmap in readdir (len 0x%x)&bslash;n&quot;
comma
id|len
)paren
suffix:semicolon
r_goto
id|err_unmap
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p
op_plus
id|len
op_plus
l_int|1
OG
id|end
)paren
r_goto
id|short_pkt
suffix:semicolon
id|attrlen
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|len
suffix:semicolon
id|i
op_increment
)paren
(brace
id|word
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|word
)paren
r_continue
suffix:semicolon
r_else
r_if
c_cond
(paren
id|i
op_eq
l_int|0
op_logical_and
id|word
op_eq
id|FATTR4_WORD0_FILEID
)paren
(brace
id|attrlen
op_assign
l_int|8
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;NFS: unexpected bitmap word in readdir (0x%x)&bslash;n&quot;
comma
id|word
)paren
suffix:semicolon
r_goto
id|err_unmap
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
op_ne
id|attrlen
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;NFS: unexpected attrlen in readdir&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_unmap
suffix:semicolon
)brace
id|p
op_add_assign
id|XDR_QUADLEN
c_func
(paren
id|attrlen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_plus
l_int|1
OG
id|end
)paren
r_goto
id|short_pkt
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|nr
op_logical_and
(paren
id|entry
(braket
l_int|0
)braket
op_ne
l_int|0
op_logical_or
id|entry
(braket
l_int|1
)braket
op_eq
l_int|0
)paren
)paren
r_goto
id|short_pkt
suffix:semicolon
id|out
suffix:colon
id|kunmap_atomic
c_func
(paren
id|kaddr
comma
id|KM_USER0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|short_pkt
suffix:colon
id|entry
(braket
l_int|0
)braket
op_assign
id|entry
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* truncate listing ? */
r_if
c_cond
(paren
op_logical_neg
id|nr
)paren
(brace
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;NFS: readdir reply truncated!&bslash;n&quot;
)paren
suffix:semicolon
id|entry
(braket
l_int|1
)braket
op_assign
l_int|1
suffix:semicolon
)brace
r_goto
id|out
suffix:semicolon
id|err_unmap
suffix:colon
id|kunmap_atomic
c_func
(paren
id|kaddr
comma
id|KM_USER0
)paren
suffix:semicolon
r_return
op_minus
id|errno_NFSERR_IO
suffix:semicolon
)brace
DECL|function|decode_readlink
r_static
r_int
id|decode_readlink
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|rpc_rqst
op_star
id|req
)paren
(brace
r_struct
id|xdr_buf
op_star
id|rcvbuf
op_assign
op_amp
id|req-&gt;rq_rcv_buf
suffix:semicolon
r_struct
id|iovec
op_star
id|iov
op_assign
id|rcvbuf-&gt;head
suffix:semicolon
r_uint32
op_star
id|strlen
suffix:semicolon
r_int
r_int
id|hdrlen
comma
id|len
suffix:semicolon
r_char
op_star
id|string
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_READLINK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|hdrlen
op_assign
(paren
r_char
op_star
)paren
id|xdr-&gt;p
op_minus
(paren
r_char
op_star
)paren
id|iov-&gt;iov_base
suffix:semicolon
r_if
c_cond
(paren
id|iov-&gt;iov_len
OG
id|hdrlen
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;NFS: READLINK header is short. iovec will be shifted.&bslash;n&quot;
)paren
suffix:semicolon
id|xdr_shift_buf
c_func
(paren
id|rcvbuf
comma
id|iov-&gt;iov_len
op_minus
id|hdrlen
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * The XDR encode routine has set things up so that&n;&t; * the link text will be copied directly into the&n;&t; * buffer.  We just have to do overflow-checking,&n;&t; * and and null-terminate the text (the VFS expects&n;&t; * null-termination).&n;&t; */
id|strlen
op_assign
(paren
r_uint32
op_star
)paren
id|kmap_atomic
c_func
(paren
id|rcvbuf-&gt;pages
(braket
l_int|0
)braket
comma
id|KM_USER0
)paren
suffix:semicolon
id|len
op_assign
id|ntohl
c_func
(paren
op_star
id|strlen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
id|PAGE_CACHE_SIZE
op_minus
l_int|5
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;nfs: server returned giant symlink!&bslash;n&quot;
)paren
suffix:semicolon
id|kunmap_atomic
c_func
(paren
id|strlen
comma
id|KM_USER0
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
op_star
id|strlen
op_assign
id|len
suffix:semicolon
id|string
op_assign
(paren
r_char
op_star
)paren
(paren
id|strlen
op_plus
l_int|1
)paren
suffix:semicolon
id|string
(braket
id|len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|kunmap_atomic
c_func
(paren
id|strlen
comma
id|KM_USER0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_remove
r_static
r_int
id|decode_remove
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_REMOVE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_change_info
c_func
(paren
id|xdr
comma
id|cinfo
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_rename
r_static
r_int
id|decode_rename
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_change_info
op_star
id|old_cinfo
comma
r_struct
id|nfs4_change_info
op_star
id|new_cinfo
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_RENAME
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_change_info
c_func
(paren
id|xdr
comma
id|old_cinfo
)paren
)paren
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_change_info
c_func
(paren
id|xdr
comma
id|new_cinfo
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
DECL|function|decode_renew
r_static
r_int
id|decode_renew
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_RENEW
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|decode_savefh
id|decode_savefh
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_SAVEFH
)paren
suffix:semicolon
)brace
DECL|function|decode_setattr
r_static
r_int
id|decode_setattr
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_setattrres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|bmlen
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_SETATTR
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|bmlen
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|bmlen
op_lshift
l_int|2
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_setclientid
r_static
r_int
id|decode_setclientid
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs4_client
op_star
id|clp
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_uint32
id|opnum
suffix:semicolon
r_int32
id|nfserr
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|8
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|opnum
)paren
suffix:semicolon
r_if
c_cond
(paren
id|opnum
op_ne
id|OP_SETCLIENTID
)paren
(brace
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;nfs4_decode_setclientid: Server returned operation&quot;
l_string|&quot; %d&bslash;n&quot;
comma
id|opnum
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|READ32
c_func
(paren
id|nfserr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nfserr
op_eq
id|NFS_OK
)paren
(brace
id|READ_BUF
c_func
(paren
l_int|8
op_plus
r_sizeof
(paren
id|clp-&gt;cl_confirm.data
)paren
)paren
suffix:semicolon
id|READ64
c_func
(paren
id|clp-&gt;cl_clientid
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|clp-&gt;cl_confirm.data
comma
r_sizeof
(paren
id|clp-&gt;cl_confirm.data
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|nfserr
op_eq
id|NFSERR_CLID_INUSE
)paren
(brace
r_uint32
id|len
suffix:semicolon
multiline_comment|/* skip netid string */
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|len
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|len
)paren
suffix:semicolon
multiline_comment|/* skip uaddr string */
id|READ_BUF
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|len
)paren
suffix:semicolon
id|READ_BUF
c_func
(paren
id|len
)paren
suffix:semicolon
r_return
op_minus
id|EEXIST
suffix:semicolon
)brace
r_else
r_return
op_minus
id|nfs_stat_to_errno
c_func
(paren
id|nfserr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|decode_setclientid_confirm
r_static
r_int
id|decode_setclientid_confirm
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
)paren
(brace
r_return
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_SETCLIENTID_CONFIRM
)paren
suffix:semicolon
)brace
DECL|function|decode_write
r_static
r_int
id|decode_write
c_func
(paren
r_struct
id|xdr_stream
op_star
id|xdr
comma
r_struct
id|nfs_writeres
op_star
id|res
)paren
(brace
r_uint32
op_star
id|p
suffix:semicolon
r_int
id|status
suffix:semicolon
id|status
op_assign
id|decode_op_hdr
c_func
(paren
id|xdr
comma
id|OP_WRITE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_return
id|status
suffix:semicolon
id|READ_BUF
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|res-&gt;count
)paren
suffix:semicolon
id|READ32
c_func
(paren
id|res-&gt;verf-&gt;committed
)paren
suffix:semicolon
id|COPYMEM
c_func
(paren
id|res-&gt;verf-&gt;verifier
comma
l_int|8
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode OPEN_DOWNGRADE response&n; */
DECL|function|nfs4_xdr_dec_open_downgrade
r_static
r_int
id|nfs4_xdr_dec_open_downgrade
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_closeres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_open_downgrade
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * END OF &quot;GENERIC&quot; DECODE ROUTINES.&n; */
multiline_comment|/*&n; * Decode ACCESS response&n; */
DECL|function|nfs4_xdr_dec_access
r_static
r_int
id|nfs4_xdr_dec_access
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_accessres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|decode_access
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LOOKUP response&n; */
DECL|function|nfs4_xdr_dec_lookup
r_static
r_int
id|nfs4_xdr_dec_lookup
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_lookup_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_lookup
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_getfh
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fh
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fattr
comma
id|res-&gt;server
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LOOKUP_ROOT response&n; */
DECL|function|nfs4_xdr_dec_lookup_root
r_static
r_int
id|nfs4_xdr_dec_lookup_root
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_lookup_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putrootfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_getfh
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fh
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fattr
comma
id|res-&gt;server
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode REMOVE response&n; */
DECL|function|nfs4_xdr_dec_remove
r_static
r_int
id|nfs4_xdr_dec_remove
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_eq
l_int|0
)paren
id|status
op_assign
id|decode_remove
c_func
(paren
op_amp
id|xdr
comma
id|cinfo
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode RENAME response&n; */
DECL|function|nfs4_xdr_dec_rename
r_static
r_int
id|nfs4_xdr_dec_rename
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_rename_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_savefh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_rename
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|res-&gt;old_cinfo
comma
op_amp
id|res-&gt;new_cinfo
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LINK response&n; */
DECL|function|nfs4_xdr_dec_link
r_static
r_int
id|nfs4_xdr_dec_link
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_change_info
op_star
id|cinfo
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_savefh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_link
c_func
(paren
op_amp
id|xdr
comma
id|cinfo
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode CREATE response&n; */
DECL|function|nfs4_xdr_dec_create
r_static
r_int
id|nfs4_xdr_dec_create
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_create_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_create
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|res-&gt;dir_cinfo
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fattr
comma
id|res-&gt;server
)paren
)paren
op_ne
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfh
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fh
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode GETATTR response&n; */
DECL|function|nfs4_xdr_dec_getattr
r_static
r_int
id|nfs4_xdr_dec_getattr
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_getattr_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fattr
comma
id|res-&gt;server
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode CLOSE response&n; */
DECL|function|nfs4_xdr_dec_close
r_static
r_int
id|nfs4_xdr_dec_close
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_closeres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_close
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode OPEN response&n; */
DECL|function|nfs4_xdr_dec_open
r_static
r_int
id|nfs4_xdr_dec_open
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_openres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_open
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;f_attr
comma
id|res-&gt;server
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfh
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|res-&gt;fh
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode OPEN_CONFIRM response&n; */
DECL|function|nfs4_xdr_dec_open_confirm
r_static
r_int
id|nfs4_xdr_dec_open_confirm
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_open_confirmres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_open_confirm
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode OPEN_RECLAIM response&n; */
DECL|function|nfs4_xdr_dec_open_reclaim
r_static
r_int
id|nfs4_xdr_dec_open_reclaim
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_openres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_open
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;f_attr
comma
id|res-&gt;server
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode SETATTR response&n; */
DECL|function|nfs4_xdr_dec_setattr
r_static
r_int
id|nfs4_xdr_dec_setattr
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_setattrres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_setattr
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_getfattr
c_func
(paren
op_amp
id|xdr
comma
id|res-&gt;fattr
comma
id|res-&gt;server
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LOCK response&n; */
DECL|function|nfs4_xdr_dec_lock
r_static
r_int
id|nfs4_xdr_dec_lock
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_lock
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LOCKT response&n; */
DECL|function|nfs4_xdr_dec_lockt
r_static
r_int
id|nfs4_xdr_dec_lockt
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_lockt
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode LOCKU response&n; */
DECL|function|nfs4_xdr_dec_locku
r_static
r_int
id|nfs4_xdr_dec_locku
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_lockres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_locku
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode READLINK response&n; */
DECL|function|nfs4_xdr_dec_readlink
r_static
r_int
id|nfs4_xdr_dec_readlink
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_void
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_readlink
c_func
(paren
op_amp
id|xdr
comma
id|rqstp
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode READDIR response&n; */
DECL|function|nfs4_xdr_dec_readdir
r_static
r_int
id|nfs4_xdr_dec_readdir
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_readdir_res
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_readdir
c_func
(paren
op_amp
id|xdr
comma
id|rqstp
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode Read response&n; */
DECL|function|nfs4_xdr_dec_read
r_static
r_int
id|nfs4_xdr_dec_read
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_readres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_read
c_func
(paren
op_amp
id|xdr
comma
id|rqstp
comma
id|res
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|res-&gt;count
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode WRITE response&n; */
DECL|function|nfs4_xdr_dec_write
r_static
r_int
id|nfs4_xdr_dec_write
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_writeres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_write
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|res-&gt;count
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode COMMIT response&n; */
DECL|function|nfs4_xdr_dec_commit
r_static
r_int
id|nfs4_xdr_dec_commit
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_writeres
op_star
id|res
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
)paren
r_goto
id|out
suffix:semicolon
id|status
op_assign
id|decode_commit
c_func
(paren
op_amp
id|xdr
comma
id|res
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * FSINFO request&n; */
DECL|function|nfs4_xdr_dec_fsinfo
r_static
r_int
id|nfs4_xdr_dec_fsinfo
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_fsinfo
op_star
id|fsinfo
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_fsinfo
c_func
(paren
op_amp
id|xdr
comma
id|fsinfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
op_minus
id|nfs_stat_to_errno
c_func
(paren
id|hdr.status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * PATHCONF request&n; */
DECL|function|nfs4_xdr_dec_pathconf
r_static
r_int
id|nfs4_xdr_dec_pathconf
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_pathconf
op_star
id|pathconf
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_pathconf
c_func
(paren
op_amp
id|xdr
comma
id|pathconf
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * STATFS request&n; */
DECL|function|nfs4_xdr_dec_statfs
r_static
r_int
id|nfs4_xdr_dec_statfs
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_fsstat
op_star
id|fsstat
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_putfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_statfs
c_func
(paren
op_amp
id|xdr
comma
id|fsstat
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * Decode RENEW response&n; */
DECL|function|nfs4_xdr_dec_renew
r_static
r_int
id|nfs4_xdr_dec_renew
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|rqstp
comma
r_uint32
op_star
id|p
comma
r_void
op_star
id|dummy
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|rqstp-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_renew
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * a SETCLIENTID request&n; */
DECL|function|nfs4_xdr_dec_setclientid
r_static
r_int
id|nfs4_xdr_dec_setclientid
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs4_client
op_star
id|clp
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_setclientid
c_func
(paren
op_amp
id|xdr
comma
id|clp
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
op_minus
id|nfs_stat_to_errno
c_func
(paren
id|hdr.status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
multiline_comment|/*&n; * a SETCLIENTID_CONFIRM request&n; */
DECL|function|nfs4_xdr_dec_setclientid_confirm
r_static
r_int
id|nfs4_xdr_dec_setclientid_confirm
c_func
(paren
r_struct
id|rpc_rqst
op_star
id|req
comma
r_uint32
op_star
id|p
comma
r_struct
id|nfs_fsinfo
op_star
id|fsinfo
)paren
(brace
r_struct
id|xdr_stream
id|xdr
suffix:semicolon
r_struct
id|compound_hdr
id|hdr
suffix:semicolon
r_int
id|status
suffix:semicolon
id|xdr_init_decode
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|req-&gt;rq_rcv_buf
comma
id|p
)paren
suffix:semicolon
id|status
op_assign
id|decode_compound_hdr
c_func
(paren
op_amp
id|xdr
comma
op_amp
id|hdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_setclientid_confirm
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_putrootfh
c_func
(paren
op_amp
id|xdr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
id|decode_fsinfo
c_func
(paren
op_amp
id|xdr
comma
id|fsinfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|status
)paren
id|status
op_assign
op_minus
id|nfs_stat_to_errno
c_func
(paren
id|hdr.status
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
DECL|function|nfs4_decode_dirent
r_uint32
op_star
id|nfs4_decode_dirent
c_func
(paren
r_uint32
op_star
id|p
comma
r_struct
id|nfs_entry
op_star
id|entry
comma
r_int
id|plus
)paren
(brace
r_uint32
id|len
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|p
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
op_star
id|p
)paren
r_return
id|ERR_PTR
c_func
(paren
op_minus
id|EAGAIN
)paren
suffix:semicolon
id|entry-&gt;eof
op_assign
l_int|1
suffix:semicolon
r_return
id|ERR_PTR
c_func
(paren
op_minus
id|EBADCOOKIE
)paren
suffix:semicolon
)brace
id|entry-&gt;prev_cookie
op_assign
id|entry-&gt;cookie
suffix:semicolon
id|p
op_assign
id|xdr_decode_hyper
c_func
(paren
id|p
comma
op_amp
id|entry-&gt;cookie
)paren
suffix:semicolon
id|entry-&gt;len
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
id|entry-&gt;name
op_assign
(paren
r_const
r_char
op_star
)paren
id|p
suffix:semicolon
id|p
op_add_assign
id|XDR_QUADLEN
c_func
(paren
id|entry-&gt;len
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * In case the server doesn&squot;t return an inode number,&n;&t; * we fake one here.  (We don&squot;t use inode number 0,&n;&t; * since glibc seems to choke on it...)&n;&t; */
id|entry-&gt;ino
op_assign
l_int|1
suffix:semicolon
id|len
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
multiline_comment|/* bitmap length */
id|p
op_add_assign
id|len
suffix:semicolon
id|len
op_assign
id|ntohl
c_func
(paren
op_star
id|p
op_increment
)paren
suffix:semicolon
multiline_comment|/* attribute buffer length */
r_if
c_cond
(paren
id|len
)paren
id|p
op_assign
id|xdr_decode_hyper
c_func
(paren
id|p
comma
op_amp
id|entry-&gt;ino
)paren
suffix:semicolon
id|entry-&gt;eof
op_assign
op_logical_neg
id|p
(braket
l_int|0
)braket
op_logical_and
id|p
(braket
l_int|1
)braket
suffix:semicolon
r_return
id|p
suffix:semicolon
)brace
multiline_comment|/*&n; * We need to translate between nfs status return values and&n; * the local errno values which may not be the same.&n; */
r_static
r_struct
(brace
DECL|member|stat
r_int
id|stat
suffix:semicolon
DECL|member|errno
r_int
id|errno
suffix:semicolon
DECL|variable|nfs_errtbl
)brace
id|nfs_errtbl
(braket
)braket
op_assign
(brace
(brace
id|NFS4_OK
comma
l_int|0
)brace
comma
(brace
id|NFS4ERR_PERM
comma
id|EPERM
)brace
comma
(brace
id|NFS4ERR_NOENT
comma
id|ENOENT
)brace
comma
(brace
id|NFS4ERR_IO
comma
id|errno_NFSERR_IO
)brace
comma
(brace
id|NFS4ERR_NXIO
comma
id|ENXIO
)brace
comma
(brace
id|NFS4ERR_ACCESS
comma
id|EACCES
)brace
comma
(brace
id|NFS4ERR_EXIST
comma
id|EEXIST
)brace
comma
(brace
id|NFS4ERR_XDEV
comma
id|EXDEV
)brace
comma
(brace
id|NFS4ERR_NOTDIR
comma
id|ENOTDIR
)brace
comma
(brace
id|NFS4ERR_ISDIR
comma
id|EISDIR
)brace
comma
(brace
id|NFS4ERR_INVAL
comma
id|EINVAL
)brace
comma
(brace
id|NFS4ERR_FBIG
comma
id|EFBIG
)brace
comma
(brace
id|NFS4ERR_NOSPC
comma
id|ENOSPC
)brace
comma
(brace
id|NFS4ERR_ROFS
comma
id|EROFS
)brace
comma
(brace
id|NFS4ERR_MLINK
comma
id|EMLINK
)brace
comma
(brace
id|NFS4ERR_NAMETOOLONG
comma
id|ENAMETOOLONG
)brace
comma
(brace
id|NFS4ERR_NOTEMPTY
comma
id|ENOTEMPTY
)brace
comma
(brace
id|NFS4ERR_DQUOT
comma
id|EDQUOT
)brace
comma
(brace
id|NFS4ERR_STALE
comma
id|ESTALE
)brace
comma
(brace
id|NFS4ERR_BADHANDLE
comma
id|EBADHANDLE
)brace
comma
(brace
id|NFS4ERR_BAD_COOKIE
comma
id|EBADCOOKIE
)brace
comma
(brace
id|NFS4ERR_NOTSUPP
comma
id|ENOTSUPP
)brace
comma
(brace
id|NFS4ERR_TOOSMALL
comma
id|ETOOSMALL
)brace
comma
(brace
id|NFS4ERR_SERVERFAULT
comma
id|ESERVERFAULT
)brace
comma
(brace
id|NFS4ERR_BADTYPE
comma
id|EBADTYPE
)brace
comma
(brace
id|NFS4ERR_LOCKED
comma
id|EAGAIN
)brace
comma
(brace
id|NFS4ERR_RESOURCE
comma
id|EREMOTEIO
)brace
comma
(brace
id|NFS4ERR_SYMLINK
comma
id|ELOOP
)brace
comma
(brace
id|NFS4ERR_OP_ILLEGAL
comma
id|EOPNOTSUPP
)brace
comma
(brace
id|NFS4ERR_DEADLOCK
comma
id|EDEADLK
)brace
comma
(brace
id|NFS4ERR_WRONGSEC
comma
id|EPERM
)brace
comma
multiline_comment|/* FIXME: this needs&n;&t;&t;&t;&t;&t;&t;    * to be handled by a&n;&t;&t;&t;&t;&t;&t;    * middle-layer.&n;&t;&t;&t;&t;&t;&t;    */
(brace
op_minus
l_int|1
comma
id|EIO
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Convert an NFS error code to a local one.&n; * This one is used jointly by NFSv2 and NFSv3.&n; */
r_static
r_int
DECL|function|nfs_stat_to_errno
id|nfs_stat_to_errno
c_func
(paren
r_int
id|stat
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|nfs_errtbl
(braket
id|i
)braket
dot
id|stat
op_ne
op_minus
l_int|1
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|nfs_errtbl
(braket
id|i
)braket
dot
id|stat
op_eq
id|stat
)paren
r_return
id|nfs_errtbl
(braket
id|i
)braket
dot
id|errno
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
OL
l_int|0
)paren
(brace
multiline_comment|/* The server is looney tunes. */
r_return
id|ESERVERFAULT
suffix:semicolon
)brace
multiline_comment|/* If we cannot translate the error, the recovery routines should&n;&t; * handle it.&n;&t; * Note: remaining NFSv4 error codes have values &gt; 10000, so should&n;&t; * not conflict with native Linux error codes.&n;&t; */
r_return
id|stat
suffix:semicolon
)brace
macro_line|#ifndef MAX
DECL|macro|MAX
macro_line|# define MAX(a, b)&t;(((a) &gt; (b))? (a) : (b))
macro_line|#endif
DECL|macro|PROC
mdefine_line|#define PROC(proc, argtype, restype)&t;&t;&t;&t;&bslash;&n;[NFSPROC4_CLNT_##proc] = {&t;&t;&t;&t;&t;&bslash;&n;&t;.p_proc   = NFSPROC4_COMPOUND,&t;&t;&t;&t;&bslash;&n;&t;.p_encode = (kxdrproc_t) nfs4_xdr_##argtype,&t;&t;&bslash;&n;&t;.p_decode = (kxdrproc_t) nfs4_xdr_##restype,&t;&t;&bslash;&n;&t;.p_bufsiz = MAX(NFS4_##argtype##_sz,NFS4_##restype##_sz) &lt;&lt; 2,&t;&bslash;&n;    }
DECL|variable|nfs4_procedures
r_struct
id|rpc_procinfo
id|nfs4_procedures
(braket
)braket
op_assign
(brace
id|PROC
c_func
(paren
id|READ
comma
id|enc_read
comma
id|dec_read
)paren
comma
id|PROC
c_func
(paren
id|WRITE
comma
id|enc_write
comma
id|dec_write
)paren
comma
id|PROC
c_func
(paren
id|COMMIT
comma
id|enc_commit
comma
id|dec_commit
)paren
comma
id|PROC
c_func
(paren
id|OPEN
comma
id|enc_open
comma
id|dec_open
)paren
comma
id|PROC
c_func
(paren
id|OPEN_CONFIRM
comma
id|enc_open_confirm
comma
id|dec_open_confirm
)paren
comma
id|PROC
c_func
(paren
id|OPEN_RECLAIM
comma
id|enc_open_reclaim
comma
id|dec_open_reclaim
)paren
comma
id|PROC
c_func
(paren
id|OPEN_DOWNGRADE
comma
id|enc_open_downgrade
comma
id|dec_open_downgrade
)paren
comma
id|PROC
c_func
(paren
id|CLOSE
comma
id|enc_close
comma
id|dec_close
)paren
comma
id|PROC
c_func
(paren
id|SETATTR
comma
id|enc_setattr
comma
id|dec_setattr
)paren
comma
id|PROC
c_func
(paren
id|FSINFO
comma
id|enc_fsinfo
comma
id|dec_fsinfo
)paren
comma
id|PROC
c_func
(paren
id|RENEW
comma
id|enc_renew
comma
id|dec_renew
)paren
comma
id|PROC
c_func
(paren
id|SETCLIENTID
comma
id|enc_setclientid
comma
id|dec_setclientid
)paren
comma
id|PROC
c_func
(paren
id|SETCLIENTID_CONFIRM
comma
id|enc_setclientid_confirm
comma
id|dec_setclientid_confirm
)paren
comma
id|PROC
c_func
(paren
id|LOCK
comma
id|enc_lock
comma
id|dec_lock
)paren
comma
id|PROC
c_func
(paren
id|LOCKT
comma
id|enc_lockt
comma
id|dec_lockt
)paren
comma
id|PROC
c_func
(paren
id|LOCKU
comma
id|enc_locku
comma
id|dec_locku
)paren
comma
id|PROC
c_func
(paren
id|ACCESS
comma
id|enc_access
comma
id|dec_access
)paren
comma
id|PROC
c_func
(paren
id|GETATTR
comma
id|enc_getattr
comma
id|dec_getattr
)paren
comma
id|PROC
c_func
(paren
id|LOOKUP
comma
id|enc_lookup
comma
id|dec_lookup
)paren
comma
id|PROC
c_func
(paren
id|LOOKUP_ROOT
comma
id|enc_lookup_root
comma
id|dec_lookup_root
)paren
comma
id|PROC
c_func
(paren
id|REMOVE
comma
id|enc_remove
comma
id|dec_remove
)paren
comma
id|PROC
c_func
(paren
id|RENAME
comma
id|enc_rename
comma
id|dec_rename
)paren
comma
id|PROC
c_func
(paren
id|LINK
comma
id|enc_link
comma
id|dec_link
)paren
comma
id|PROC
c_func
(paren
id|CREATE
comma
id|enc_create
comma
id|dec_create
)paren
comma
id|PROC
c_func
(paren
id|PATHCONF
comma
id|enc_pathconf
comma
id|dec_pathconf
)paren
comma
id|PROC
c_func
(paren
id|STATFS
comma
id|enc_statfs
comma
id|dec_statfs
)paren
comma
id|PROC
c_func
(paren
id|READLINK
comma
id|enc_readlink
comma
id|dec_readlink
)paren
comma
id|PROC
c_func
(paren
id|READDIR
comma
id|enc_readdir
comma
id|dec_readdir
)paren
comma
)brace
suffix:semicolon
DECL|variable|nfs_version4
r_struct
id|rpc_version
id|nfs_version4
op_assign
(brace
dot
id|number
op_assign
l_int|4
comma
dot
id|nrprocs
op_assign
r_sizeof
(paren
id|nfs4_procedures
)paren
op_div
r_sizeof
(paren
id|nfs4_procedures
(braket
l_int|0
)braket
)paren
comma
dot
id|procs
op_assign
id|nfs4_procedures
)brace
suffix:semicolon
multiline_comment|/*&n; * Local variables:&n; *  c-basic-offset: 8&n; * End:&n; */
eof
