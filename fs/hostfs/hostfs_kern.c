multiline_comment|/*&n; * Copyright (C) 2000, 2001, 2002 Jeff Dike (jdike@karaya.com)&n; * Licensed under the GPL&n; *&n; * Ported the filesystem routines to 2.5.&n; * 2003-02-10 Petr Baudis &lt;pasky@ucw.cz&gt;&n; */
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/pagemap.h&gt;
macro_line|#include &lt;linux/blkdev.h&gt;
macro_line|#include &lt;linux/list.h&gt;
macro_line|#include &lt;linux/buffer_head.h&gt;
macro_line|#include &lt;linux/root_dev.h&gt;
macro_line|#include &lt;linux/statfs.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &quot;hostfs.h&quot;
macro_line|#include &quot;kern_util.h&quot;
macro_line|#include &quot;kern.h&quot;
macro_line|#include &quot;user_util.h&quot;
macro_line|#include &quot;2_5compat.h&quot;
macro_line|#include &quot;init.h&quot;
DECL|struct|hostfs_inode_info
r_struct
id|hostfs_inode_info
(brace
DECL|member|host_filename
r_char
op_star
id|host_filename
suffix:semicolon
DECL|member|fd
r_int
id|fd
suffix:semicolon
DECL|member|mode
r_int
id|mode
suffix:semicolon
DECL|member|vfs_inode
r_struct
id|inode
id|vfs_inode
suffix:semicolon
)brace
suffix:semicolon
DECL|function|HOSTFS_I
r_static
r_inline
r_struct
id|hostfs_inode_info
op_star
id|HOSTFS_I
c_func
(paren
r_struct
id|inode
op_star
id|inode
)paren
(brace
r_return
id|list_entry
c_func
(paren
id|inode
comma
r_struct
id|hostfs_inode_info
comma
id|vfs_inode
)paren
suffix:semicolon
)brace
DECL|macro|FILE_HOSTFS_I
mdefine_line|#define FILE_HOSTFS_I(file) HOSTFS_I((file)-&gt;f_dentry-&gt;d_inode)
DECL|function|hostfs_d_delete
r_int
id|hostfs_d_delete
c_func
(paren
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|variable|hostfs_dentry_ops
r_struct
id|dentry_operations
id|hostfs_dentry_ops
op_assign
(brace
dot
id|d_delete
op_assign
id|hostfs_d_delete
comma
)brace
suffix:semicolon
multiline_comment|/* Changed in hostfs_args before the kernel starts running */
DECL|variable|root_ino
r_static
r_char
op_star
id|root_ino
op_assign
l_string|&quot;/&quot;
suffix:semicolon
DECL|variable|append
r_static
r_int
id|append
op_assign
l_int|0
suffix:semicolon
DECL|macro|HOSTFS_SUPER_MAGIC
mdefine_line|#define HOSTFS_SUPER_MAGIC 0x00c0ffee
DECL|variable|hostfs_iops
r_static
r_struct
id|inode_operations
id|hostfs_iops
suffix:semicolon
DECL|variable|hostfs_dir_iops
r_static
r_struct
id|inode_operations
id|hostfs_dir_iops
suffix:semicolon
DECL|variable|hostfs_link_aops
r_static
r_struct
id|address_space_operations
id|hostfs_link_aops
suffix:semicolon
DECL|function|hostfs_args
r_static
r_int
id|__init
id|hostfs_args
c_func
(paren
r_char
op_star
id|options
comma
r_int
op_star
id|add
)paren
(brace
r_char
op_star
id|ptr
suffix:semicolon
id|ptr
op_assign
id|strchr
c_func
(paren
id|options
comma
l_char|&squot;,&squot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_ne
l_int|NULL
)paren
(brace
op_star
id|ptr
op_increment
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|options
op_ne
l_char|&squot;&bslash;0&squot;
)paren
(brace
id|root_ino
op_assign
id|options
suffix:semicolon
)brace
id|options
op_assign
id|ptr
suffix:semicolon
r_while
c_loop
(paren
id|options
)paren
(brace
id|ptr
op_assign
id|strchr
c_func
(paren
id|options
comma
l_char|&squot;,&squot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ptr
op_ne
l_int|NULL
)paren
(brace
op_star
id|ptr
op_increment
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|options
op_ne
l_char|&squot;&bslash;0&squot;
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|options
comma
l_string|&quot;append&quot;
)paren
)paren
(brace
id|append
op_assign
l_int|1
suffix:semicolon
)brace
r_else
id|printf
c_func
(paren
l_string|&quot;hostfs_args - unsupported option - %s&bslash;n&quot;
comma
id|options
)paren
suffix:semicolon
)brace
id|options
op_assign
id|ptr
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|__uml_setup
c_func
(paren
l_string|&quot;hostfs=&quot;
comma
id|hostfs_args
comma
l_string|&quot;hostfs=&lt;root dir&gt;,&lt;flags&gt;,...&bslash;n&quot;
l_string|&quot;    This is used to set hostfs parameters.  The root directory argument&bslash;n&quot;
l_string|&quot;    is used to confine all hostfs mounts to within the specified directory&bslash;n&quot;
l_string|&quot;    tree on the host.  If this isn&squot;t specified, then a user inside UML can&bslash;n&quot;
l_string|&quot;    mount anything on the host that&squot;s accessible to the user that&squot;s running&bslash;n&quot;
l_string|&quot;    it.&bslash;n&quot;
l_string|&quot;    The only flag currently supported is &squot;append&squot;, which specifies that all&bslash;n&quot;
l_string|&quot;    files opened by hostfs will be opened in append mode.&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
DECL|function|dentry_name
r_static
r_char
op_star
id|dentry_name
c_func
(paren
r_struct
id|dentry
op_star
id|dentry
comma
r_int
id|extra
)paren
(brace
r_struct
id|dentry
op_star
id|parent
suffix:semicolon
r_char
op_star
id|root
comma
op_star
id|name
suffix:semicolon
r_int
id|len
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|parent
op_assign
id|dentry
suffix:semicolon
r_while
c_loop
(paren
id|parent-&gt;d_parent
op_ne
id|parent
)paren
(brace
id|len
op_add_assign
id|parent-&gt;d_name.len
op_plus
l_int|1
suffix:semicolon
id|parent
op_assign
id|parent-&gt;d_parent
suffix:semicolon
)brace
id|root
op_assign
id|HOSTFS_I
c_func
(paren
id|parent-&gt;d_inode
)paren
op_member_access_from_pointer
id|host_filename
suffix:semicolon
id|len
op_add_assign
id|strlen
c_func
(paren
id|root
)paren
suffix:semicolon
id|name
op_assign
id|kmalloc
c_func
(paren
id|len
op_plus
id|extra
op_plus
l_int|1
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
id|name
(braket
id|len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|parent
op_assign
id|dentry
suffix:semicolon
r_while
c_loop
(paren
id|parent-&gt;d_parent
op_ne
id|parent
)paren
(brace
id|len
op_sub_assign
id|parent-&gt;d_name.len
op_plus
l_int|1
suffix:semicolon
id|name
(braket
id|len
)braket
op_assign
l_char|&squot;/&squot;
suffix:semicolon
id|strncpy
c_func
(paren
op_amp
id|name
(braket
id|len
op_plus
l_int|1
)braket
comma
id|parent-&gt;d_name.name
comma
id|parent-&gt;d_name.len
)paren
suffix:semicolon
id|parent
op_assign
id|parent-&gt;d_parent
suffix:semicolon
)brace
id|strncpy
c_func
(paren
id|name
comma
id|root
comma
id|strlen
c_func
(paren
id|root
)paren
)paren
suffix:semicolon
r_return
id|name
suffix:semicolon
)brace
DECL|function|inode_name
r_static
r_char
op_star
id|inode_name
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_int
id|extra
)paren
(brace
r_struct
id|dentry
op_star
id|dentry
suffix:semicolon
id|dentry
op_assign
id|list_entry
c_func
(paren
id|ino-&gt;i_dentry.next
comma
r_struct
id|dentry
comma
id|d_alias
)paren
suffix:semicolon
r_return
id|dentry_name
c_func
(paren
id|dentry
comma
id|extra
)paren
suffix:semicolon
)brace
DECL|function|read_name
r_static
r_int
id|read_name
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_char
op_star
id|name
)paren
(brace
multiline_comment|/* The non-int inode fields are copied into ints by stat_file and&n;&t; * then copied into the inode because passing the actual pointers&n;&t; * in and having them treated as int * breaks on big-endian machines&n;&t; */
r_int
id|err
suffix:semicolon
r_int
id|i_mode
comma
id|i_nlink
comma
id|i_blksize
suffix:semicolon
r_int
r_int
r_int
id|i_size
suffix:semicolon
r_int
r_int
r_int
id|i_ino
suffix:semicolon
r_int
r_int
r_int
id|i_blocks
suffix:semicolon
id|err
op_assign
id|stat_file
c_func
(paren
id|name
comma
op_amp
id|i_ino
comma
op_amp
id|i_mode
comma
op_amp
id|i_nlink
comma
op_amp
id|ino-&gt;i_uid
comma
op_amp
id|ino-&gt;i_gid
comma
op_amp
id|i_size
comma
op_amp
id|ino-&gt;i_atime
comma
op_amp
id|ino-&gt;i_mtime
comma
op_amp
id|ino-&gt;i_ctime
comma
op_amp
id|i_blksize
comma
op_amp
id|i_blocks
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|ino-&gt;i_ino
op_assign
id|i_ino
suffix:semicolon
id|ino-&gt;i_mode
op_assign
id|i_mode
suffix:semicolon
id|ino-&gt;i_nlink
op_assign
id|i_nlink
suffix:semicolon
id|ino-&gt;i_size
op_assign
id|i_size
suffix:semicolon
id|ino-&gt;i_blksize
op_assign
id|i_blksize
suffix:semicolon
id|ino-&gt;i_blocks
op_assign
id|i_blocks
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ino-&gt;i_sb-&gt;s_dev
op_eq
id|ROOT_DEV
)paren
op_logical_and
(paren
id|ino-&gt;i_uid
op_eq
id|getuid
c_func
(paren
)paren
)paren
)paren
(brace
id|ino-&gt;i_uid
op_assign
l_int|0
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|follow_link
r_static
r_char
op_star
id|follow_link
c_func
(paren
r_char
op_star
id|link
)paren
(brace
r_int
id|len
comma
id|n
suffix:semicolon
r_char
op_star
id|name
comma
op_star
id|resolved
comma
op_star
id|end
suffix:semicolon
id|len
op_assign
l_int|64
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|n
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|kmalloc
c_func
(paren
id|len
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|n
op_assign
id|do_readlink
c_func
(paren
id|link
comma
id|name
comma
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n
OL
id|len
)paren
(brace
r_break
suffix:semicolon
)brace
id|len
op_mul_assign
l_int|2
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|n
OL
l_int|0
)paren
(brace
r_goto
id|out_free
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|name
op_eq
l_char|&squot;/&squot;
)paren
(brace
r_return
id|name
suffix:semicolon
)brace
id|end
op_assign
id|strrchr
c_func
(paren
id|link
comma
l_char|&squot;/&squot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|end
op_eq
l_int|NULL
)paren
(brace
r_return
id|name
suffix:semicolon
)brace
op_star
(paren
id|end
op_plus
l_int|1
)paren
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|link
)paren
op_plus
id|strlen
c_func
(paren
id|name
)paren
op_plus
l_int|1
suffix:semicolon
id|resolved
op_assign
id|kmalloc
c_func
(paren
id|len
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|resolved
op_eq
l_int|NULL
)paren
(brace
id|n
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|out_free
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|resolved
comma
l_string|&quot;%s%s&quot;
comma
id|link
comma
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|link
)paren
suffix:semicolon
r_return
id|resolved
suffix:semicolon
id|out_free
suffix:colon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|ERR_PTR
c_func
(paren
id|n
)paren
suffix:semicolon
)brace
DECL|function|read_inode
r_static
r_int
id|read_inode
c_func
(paren
r_struct
id|inode
op_star
id|ino
)paren
(brace
r_char
op_star
id|name
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Unfortunately, we are called from iget() when we don&squot;t have a dentry&n;&t; * allocated yet.&n;&t; */
r_if
c_cond
(paren
id|list_empty
c_func
(paren
op_amp
id|ino-&gt;i_dentry
)paren
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|inode_name
c_func
(paren
id|ino
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|file_type
c_func
(paren
id|name
comma
l_int|NULL
)paren
op_eq
id|OS_TYPE_SYMLINK
)paren
(brace
id|name
op_assign
id|follow_link
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_ERR
c_func
(paren
id|name
)paren
)paren
(brace
id|err
op_assign
id|PTR_ERR
c_func
(paren
id|name
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
)brace
id|err
op_assign
id|read_name
c_func
(paren
id|ino
comma
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_statfs
r_int
id|hostfs_statfs
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_struct
id|kstatfs
op_star
id|sf
)paren
(brace
multiline_comment|/* do_statfs uses struct statfs64 internally, but the linux kernel&n;&t; * struct statfs still has 32-bit versions for most of these fields,&n;&t; * so we convert them here&n;&t; */
r_int
id|err
suffix:semicolon
r_int
r_int
id|f_blocks
suffix:semicolon
r_int
r_int
id|f_bfree
suffix:semicolon
r_int
r_int
id|f_bavail
suffix:semicolon
r_int
r_int
id|f_files
suffix:semicolon
r_int
r_int
id|f_ffree
suffix:semicolon
id|err
op_assign
id|do_statfs
c_func
(paren
id|HOSTFS_I
c_func
(paren
id|sb-&gt;s_root-&gt;d_inode
)paren
op_member_access_from_pointer
id|host_filename
comma
op_amp
id|sf-&gt;f_bsize
comma
op_amp
id|f_blocks
comma
op_amp
id|f_bfree
comma
op_amp
id|f_bavail
comma
op_amp
id|f_files
comma
op_amp
id|f_ffree
comma
op_amp
id|sf-&gt;f_fsid
comma
r_sizeof
(paren
id|sf-&gt;f_fsid
)paren
comma
op_amp
id|sf-&gt;f_namelen
comma
id|sf-&gt;f_spare
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|sf-&gt;f_blocks
op_assign
id|f_blocks
suffix:semicolon
id|sf-&gt;f_bfree
op_assign
id|f_bfree
suffix:semicolon
id|sf-&gt;f_bavail
op_assign
id|f_bavail
suffix:semicolon
id|sf-&gt;f_files
op_assign
id|f_files
suffix:semicolon
id|sf-&gt;f_ffree
op_assign
id|f_ffree
suffix:semicolon
id|sf-&gt;f_type
op_assign
id|HOSTFS_SUPER_MAGIC
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|hostfs_alloc_inode
r_static
r_struct
id|inode
op_star
id|hostfs_alloc_inode
c_func
(paren
r_struct
id|super_block
op_star
id|sb
)paren
(brace
r_struct
id|hostfs_inode_info
op_star
id|hi
suffix:semicolon
id|hi
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|hi
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hi
op_eq
l_int|NULL
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
op_star
id|hi
op_assign
(paren
(paren
r_struct
id|hostfs_inode_info
)paren
(brace
dot
id|host_filename
op_assign
l_int|NULL
comma
dot
id|fd
op_assign
op_minus
l_int|1
comma
dot
id|mode
op_assign
l_int|0
)brace
)paren
suffix:semicolon
id|inode_init_once
c_func
(paren
op_amp
id|hi-&gt;vfs_inode
)paren
suffix:semicolon
r_return
op_amp
id|hi-&gt;vfs_inode
suffix:semicolon
)brace
DECL|function|hostfs_destroy_inode
r_static
r_void
id|hostfs_destroy_inode
c_func
(paren
r_struct
id|inode
op_star
id|inode
)paren
(brace
r_if
c_cond
(paren
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|host_filename
)paren
(brace
id|kfree
c_func
(paren
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|host_filename
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|fd
op_ne
op_minus
l_int|1
)paren
(brace
id|close_file
c_func
(paren
op_amp
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|fd
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|HOSTFS_I
c_func
(paren
id|inode
)paren
)paren
suffix:semicolon
)brace
DECL|function|hostfs_read_inode
r_static
r_void
id|hostfs_read_inode
c_func
(paren
r_struct
id|inode
op_star
id|inode
)paren
(brace
id|read_inode
c_func
(paren
id|inode
)paren
suffix:semicolon
)brace
DECL|variable|hostfs_sbops
r_static
r_struct
id|super_operations
id|hostfs_sbops
op_assign
(brace
dot
id|alloc_inode
op_assign
id|hostfs_alloc_inode
comma
dot
id|destroy_inode
op_assign
id|hostfs_destroy_inode
comma
dot
id|read_inode
op_assign
id|hostfs_read_inode
comma
dot
id|statfs
op_assign
id|hostfs_statfs
comma
)brace
suffix:semicolon
DECL|function|hostfs_readdir
r_int
id|hostfs_readdir
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_void
op_star
id|ent
comma
id|filldir_t
id|filldir
)paren
(brace
r_void
op_star
id|dir
suffix:semicolon
r_char
op_star
id|name
suffix:semicolon
r_int
r_int
r_int
id|next
comma
id|ino
suffix:semicolon
r_int
id|error
comma
id|len
suffix:semicolon
id|name
op_assign
id|dentry_name
c_func
(paren
id|file-&gt;f_dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|dir
op_assign
id|open_dir
c_func
(paren
id|name
comma
op_amp
id|error
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dir
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|error
suffix:semicolon
)brace
id|next
op_assign
id|file-&gt;f_pos
suffix:semicolon
r_while
c_loop
(paren
(paren
id|name
op_assign
id|read_dir
c_func
(paren
id|dir
comma
op_amp
id|next
comma
op_amp
id|ino
comma
op_amp
id|len
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|error
op_assign
(paren
op_star
id|filldir
)paren
(paren
id|ent
comma
id|name
comma
id|len
comma
id|file-&gt;f_pos
comma
id|ino
comma
id|DT_UNKNOWN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_break
suffix:semicolon
)brace
id|file-&gt;f_pos
op_assign
id|next
suffix:semicolon
)brace
id|close_dir
c_func
(paren
id|dir
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|hostfs_file_open
r_int
id|hostfs_file_open
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_char
op_star
id|name
suffix:semicolon
r_int
id|mode
op_assign
l_int|0
comma
id|r
op_assign
l_int|0
comma
id|w
op_assign
l_int|0
comma
id|fd
suffix:semicolon
id|mode
op_assign
id|file-&gt;f_mode
op_amp
(paren
id|FMODE_READ
op_or
id|FMODE_WRITE
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|mode
op_amp
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|mode
)paren
op_eq
id|mode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* The file may already have been opened, but with the wrong access,&n;&t; * so this resets things and reopens the file with the new access.&n;&t; */
r_if
c_cond
(paren
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|fd
op_ne
op_minus
l_int|1
)paren
(brace
id|close_file
c_func
(paren
op_amp
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|fd
)paren
suffix:semicolon
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|fd
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|mode
op_or_assign
id|mode
suffix:semicolon
r_if
c_cond
(paren
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|mode
op_amp
id|FMODE_READ
)paren
(brace
id|r
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HOSTFS_I
c_func
(paren
id|ino
)paren
op_member_access_from_pointer
id|mode
op_amp
id|FMODE_WRITE
)paren
(brace
id|w
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|w
)paren
(brace
id|r
op_assign
l_int|1
suffix:semicolon
)brace
id|name
op_assign
id|dentry_name
c_func
(paren
id|file-&gt;f_dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|fd
op_assign
id|open_file
c_func
(paren
id|name
comma
id|r
comma
id|w
comma
id|append
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fd
OL
l_int|0
)paren
(brace
r_return
id|fd
suffix:semicolon
)brace
id|FILE_HOSTFS_I
c_func
(paren
id|file
)paren
op_member_access_from_pointer
id|fd
op_assign
id|fd
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|hostfs_fsync
r_int
id|hostfs_fsync
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_int
id|datasync
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|hostfs_file_fops
r_static
r_struct
id|file_operations
id|hostfs_file_fops
op_assign
(brace
dot
id|llseek
op_assign
id|generic_file_llseek
comma
dot
id|read
op_assign
id|generic_file_read
comma
dot
id|write
op_assign
id|generic_file_write
comma
dot
id|mmap
op_assign
id|generic_file_mmap
comma
dot
id|open
op_assign
id|hostfs_file_open
comma
dot
id|release
op_assign
l_int|NULL
comma
dot
id|fsync
op_assign
id|hostfs_fsync
comma
)brace
suffix:semicolon
DECL|variable|hostfs_dir_fops
r_static
r_struct
id|file_operations
id|hostfs_dir_fops
op_assign
(brace
dot
id|readdir
op_assign
id|hostfs_readdir
comma
dot
id|read
op_assign
id|generic_read_dir
comma
)brace
suffix:semicolon
DECL|function|hostfs_writepage
r_int
id|hostfs_writepage
c_func
(paren
r_struct
id|page
op_star
id|page
comma
r_struct
id|writeback_control
op_star
id|wbc
)paren
(brace
r_struct
id|address_space
op_star
id|mapping
op_assign
id|page-&gt;mapping
suffix:semicolon
r_struct
id|inode
op_star
id|inode
op_assign
id|mapping-&gt;host
suffix:semicolon
r_char
op_star
id|buffer
suffix:semicolon
r_int
r_int
r_int
id|base
suffix:semicolon
r_int
id|count
op_assign
id|PAGE_CACHE_SIZE
suffix:semicolon
r_int
id|end_index
op_assign
id|inode-&gt;i_size
op_rshift
id|PAGE_CACHE_SHIFT
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|page-&gt;index
op_ge
id|end_index
)paren
id|count
op_assign
id|inode-&gt;i_size
op_amp
(paren
id|PAGE_CACHE_SIZE
op_minus
l_int|1
)paren
suffix:semicolon
id|buffer
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|base
op_assign
(paren
(paren
r_int
r_int
r_int
)paren
id|page-&gt;index
)paren
op_lshift
id|PAGE_CACHE_SHIFT
suffix:semicolon
id|err
op_assign
id|write_file
c_func
(paren
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|fd
comma
op_amp
id|base
comma
id|buffer
comma
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
op_ne
id|count
)paren
(brace
id|ClearPageUptodate
c_func
(paren
id|page
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|base
OG
id|inode-&gt;i_size
)paren
id|inode-&gt;i_size
op_assign
id|base
suffix:semicolon
r_if
c_cond
(paren
id|PageError
c_func
(paren
id|page
)paren
)paren
id|ClearPageError
c_func
(paren
id|page
)paren
suffix:semicolon
id|err
op_assign
l_int|0
suffix:semicolon
id|out
suffix:colon
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|unlock_page
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_readpage
r_int
id|hostfs_readpage
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|page
op_star
id|page
)paren
(brace
r_char
op_star
id|buffer
suffix:semicolon
r_int
r_int
id|start
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
id|start
op_assign
(paren
r_int
r_int
)paren
id|page-&gt;index
op_lshift
id|PAGE_CACHE_SHIFT
suffix:semicolon
id|buffer
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|err
op_assign
id|read_file
c_func
(paren
id|FILE_HOSTFS_I
c_func
(paren
id|file
)paren
op_member_access_from_pointer
id|fd
comma
op_amp
id|start
comma
id|buffer
comma
id|PAGE_CACHE_SIZE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|memset
c_func
(paren
op_amp
id|buffer
(braket
id|err
)braket
comma
l_int|0
comma
id|PAGE_CACHE_SIZE
op_minus
id|err
)paren
suffix:semicolon
id|flush_dcache_page
c_func
(paren
id|page
)paren
suffix:semicolon
id|SetPageUptodate
c_func
(paren
id|page
)paren
suffix:semicolon
r_if
c_cond
(paren
id|PageError
c_func
(paren
id|page
)paren
)paren
id|ClearPageError
c_func
(paren
id|page
)paren
suffix:semicolon
id|err
op_assign
l_int|0
suffix:semicolon
id|out
suffix:colon
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|unlock_page
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_prepare_write
r_int
id|hostfs_prepare_write
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|page
op_star
id|page
comma
r_int
r_int
id|from
comma
r_int
r_int
id|to
)paren
(brace
r_char
op_star
id|buffer
suffix:semicolon
r_int
r_int
id|start
comma
id|tmp
suffix:semicolon
r_int
id|err
suffix:semicolon
id|start
op_assign
(paren
r_int
r_int
)paren
id|page-&gt;index
op_lshift
id|PAGE_CACHE_SHIFT
suffix:semicolon
id|buffer
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
r_if
c_cond
(paren
id|from
op_ne
l_int|0
)paren
(brace
id|tmp
op_assign
id|start
suffix:semicolon
id|err
op_assign
id|read_file
c_func
(paren
id|FILE_HOSTFS_I
c_func
(paren
id|file
)paren
op_member_access_from_pointer
id|fd
comma
op_amp
id|tmp
comma
id|buffer
comma
id|from
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|to
op_ne
id|PAGE_CACHE_SIZE
)paren
(brace
id|start
op_add_assign
id|to
suffix:semicolon
id|err
op_assign
id|read_file
c_func
(paren
id|FILE_HOSTFS_I
c_func
(paren
id|file
)paren
op_member_access_from_pointer
id|fd
comma
op_amp
id|start
comma
id|buffer
op_plus
id|to
comma
id|PAGE_CACHE_SIZE
op_minus
id|to
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
)brace
id|err
op_assign
l_int|0
suffix:semicolon
id|out
suffix:colon
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_commit_write
r_int
id|hostfs_commit_write
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|page
op_star
id|page
comma
r_int
id|from
comma
r_int
id|to
)paren
(brace
r_struct
id|address_space
op_star
id|mapping
op_assign
id|page-&gt;mapping
suffix:semicolon
r_struct
id|inode
op_star
id|inode
op_assign
id|mapping-&gt;host
suffix:semicolon
r_char
op_star
id|buffer
suffix:semicolon
r_int
r_int
id|start
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
id|start
op_assign
(paren
r_int
r_int
)paren
(paren
id|page-&gt;index
op_lshift
id|PAGE_CACHE_SHIFT
)paren
op_plus
id|from
suffix:semicolon
id|buffer
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|err
op_assign
id|write_file
c_func
(paren
id|FILE_HOSTFS_I
c_func
(paren
id|file
)paren
op_member_access_from_pointer
id|fd
comma
op_amp
id|start
comma
id|buffer
op_plus
id|from
comma
id|to
op_minus
id|from
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OG
l_int|0
)paren
(brace
id|err
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|err
op_logical_and
(paren
id|start
OG
id|inode-&gt;i_size
)paren
)paren
(brace
id|inode-&gt;i_size
op_assign
id|start
suffix:semicolon
)brace
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|variable|hostfs_aops
r_static
r_struct
id|address_space_operations
id|hostfs_aops
op_assign
(brace
dot
id|writepage
op_assign
id|hostfs_writepage
comma
dot
id|readpage
op_assign
id|hostfs_readpage
comma
multiline_comment|/* &t;.set_page_dirty = __set_page_dirty_nobuffers, */
dot
id|prepare_write
op_assign
id|hostfs_prepare_write
comma
dot
id|commit_write
op_assign
id|hostfs_commit_write
)brace
suffix:semicolon
DECL|function|init_inode
r_static
r_int
id|init_inode
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_char
op_star
id|name
suffix:semicolon
r_int
id|type
comma
id|err
op_assign
op_minus
id|ENOMEM
comma
id|rdev
suffix:semicolon
r_if
c_cond
(paren
id|dentry
)paren
(brace
id|name
op_assign
id|dentry_name
c_func
(paren
id|dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|type
op_assign
id|file_type
c_func
(paren
id|name
comma
op_amp
id|rdev
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
)brace
r_else
id|type
op_assign
id|OS_TYPE_DIR
suffix:semicolon
id|err
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|type
op_eq
id|OS_TYPE_SYMLINK
)paren
(brace
id|inode-&gt;i_op
op_assign
op_amp
id|page_symlink_inode_operations
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|type
op_eq
id|OS_TYPE_DIR
)paren
(brace
id|inode-&gt;i_op
op_assign
op_amp
id|hostfs_dir_iops
suffix:semicolon
)brace
r_else
id|inode-&gt;i_op
op_assign
op_amp
id|hostfs_iops
suffix:semicolon
r_if
c_cond
(paren
id|type
op_eq
id|OS_TYPE_DIR
)paren
(brace
id|inode-&gt;i_fop
op_assign
op_amp
id|hostfs_dir_fops
suffix:semicolon
)brace
r_else
id|inode-&gt;i_fop
op_assign
op_amp
id|hostfs_file_fops
suffix:semicolon
r_if
c_cond
(paren
id|type
op_eq
id|OS_TYPE_SYMLINK
)paren
(brace
id|inode-&gt;i_mapping-&gt;a_ops
op_assign
op_amp
id|hostfs_link_aops
suffix:semicolon
)brace
r_else
id|inode-&gt;i_mapping-&gt;a_ops
op_assign
op_amp
id|hostfs_aops
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|OS_TYPE_CHARDEV
suffix:colon
id|init_special_inode
c_func
(paren
id|inode
comma
id|S_IFCHR
comma
id|rdev
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|OS_TYPE_BLOCKDEV
suffix:colon
id|init_special_inode
c_func
(paren
id|inode
comma
id|S_IFBLK
comma
id|rdev
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|OS_TYPE_FIFO
suffix:colon
id|init_special_inode
c_func
(paren
id|inode
comma
id|S_IFIFO
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|OS_TYPE_SOCK
suffix:colon
id|init_special_inode
c_func
(paren
id|inode
comma
id|S_IFSOCK
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_create
r_int
id|hostfs_create
c_func
(paren
r_struct
id|inode
op_star
id|dir
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_int
id|mode
comma
r_struct
id|nameidata
op_star
id|nd
)paren
(brace
r_struct
id|inode
op_star
id|inode
suffix:semicolon
r_char
op_star
id|name
suffix:semicolon
r_int
id|error
comma
id|fd
suffix:semicolon
id|error
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|inode
op_assign
id|iget
c_func
(paren
id|dir-&gt;i_sb
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|inode
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|init_inode
c_func
(paren
id|inode
comma
id|dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|error
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|dentry_name
c_func
(paren
id|dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|fd
op_assign
id|file_create
c_func
(paren
id|name
comma
id|mode
op_amp
id|S_IRUSR
comma
id|mode
op_amp
id|S_IWUSR
comma
id|mode
op_amp
id|S_IXUSR
comma
id|mode
op_amp
id|S_IRGRP
comma
id|mode
op_amp
id|S_IWGRP
comma
id|mode
op_amp
id|S_IXGRP
comma
id|mode
op_amp
id|S_IROTH
comma
id|mode
op_amp
id|S_IWOTH
comma
id|mode
op_amp
id|S_IXOTH
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fd
OL
l_int|0
)paren
(brace
id|error
op_assign
id|fd
suffix:semicolon
)brace
r_else
id|error
op_assign
id|read_name
c_func
(paren
id|inode
comma
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|fd
op_assign
id|fd
suffix:semicolon
id|HOSTFS_I
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|mode
op_assign
id|FMODE_READ
op_or
id|FMODE_WRITE
suffix:semicolon
id|d_instantiate
c_func
(paren
id|dentry
comma
id|inode
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|out_put
suffix:colon
id|iput
c_func
(paren
id|inode
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|hostfs_lookup
r_struct
id|dentry
op_star
id|hostfs_lookup
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_struct
id|nameidata
op_star
id|nd
)paren
(brace
r_struct
id|inode
op_star
id|inode
suffix:semicolon
r_char
op_star
id|name
suffix:semicolon
r_int
id|err
suffix:semicolon
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|inode
op_assign
id|iget
c_func
(paren
id|ino-&gt;i_sb
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|inode
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|err
op_assign
id|init_inode
c_func
(paren
id|inode
comma
id|dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|dentry_name
c_func
(paren
id|dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|err
op_assign
id|read_name
c_func
(paren
id|inode
comma
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
op_eq
op_minus
id|ENOENT
)paren
(brace
id|iput
c_func
(paren
id|inode
)paren
suffix:semicolon
id|inode
op_assign
l_int|NULL
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|d_add
c_func
(paren
id|dentry
comma
id|inode
)paren
suffix:semicolon
id|dentry-&gt;d_op
op_assign
op_amp
id|hostfs_dentry_ops
suffix:semicolon
r_return
l_int|NULL
suffix:semicolon
id|out_put
suffix:colon
id|iput
c_func
(paren
id|inode
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|ERR_PTR
c_func
(paren
id|err
)paren
suffix:semicolon
)brace
DECL|function|inode_dentry_name
r_static
r_char
op_star
id|inode_dentry_name
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_char
op_star
id|file
suffix:semicolon
r_int
id|len
suffix:semicolon
id|file
op_assign
id|inode_name
c_func
(paren
id|ino
comma
id|dentry-&gt;d_name.len
op_plus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|file
op_eq
l_int|NULL
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
id|strcat
c_func
(paren
id|file
comma
l_string|&quot;/&quot;
)paren
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|file
)paren
suffix:semicolon
id|strncat
c_func
(paren
id|file
comma
id|dentry-&gt;d_name.name
comma
id|dentry-&gt;d_name.len
)paren
suffix:semicolon
id|file
(braket
id|len
op_plus
id|dentry-&gt;d_name.len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_return
id|file
suffix:semicolon
)brace
DECL|function|hostfs_link
r_int
id|hostfs_link
c_func
(paren
r_struct
id|dentry
op_star
id|to
comma
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|from
)paren
(brace
r_char
op_star
id|from_name
comma
op_star
id|to_name
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|from_name
op_assign
id|inode_dentry_name
c_func
(paren
id|ino
comma
id|from
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|to_name
op_assign
id|dentry_name
c_func
(paren
id|to
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|to_name
op_eq
l_int|NULL
)paren
(brace
id|kfree
c_func
(paren
id|from_name
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|link_file
c_func
(paren
id|to_name
comma
id|from_name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|from_name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|to_name
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_unlink
r_int
id|hostfs_unlink
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_char
op_star
id|file
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|file
op_assign
id|inode_dentry_name
c_func
(paren
id|ino
comma
id|dentry
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
r_if
c_cond
(paren
id|append
)paren
(brace
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
id|err
op_assign
id|unlink_file
c_func
(paren
id|file
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_symlink
r_int
id|hostfs_symlink
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_const
r_char
op_star
id|to
)paren
(brace
r_char
op_star
id|file
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|file
op_assign
id|inode_dentry_name
c_func
(paren
id|ino
comma
id|dentry
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|make_symlink
c_func
(paren
id|file
comma
id|to
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_mkdir
r_int
id|hostfs_mkdir
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_int
id|mode
)paren
(brace
r_char
op_star
id|file
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|file
op_assign
id|inode_dentry_name
c_func
(paren
id|ino
comma
id|dentry
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|do_mkdir
c_func
(paren
id|file
comma
id|mode
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_rmdir
r_int
id|hostfs_rmdir
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_char
op_star
id|file
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|file
op_assign
id|inode_dentry_name
c_func
(paren
id|ino
comma
id|dentry
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|do_rmdir
c_func
(paren
id|file
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_mknod
r_int
id|hostfs_mknod
c_func
(paren
r_struct
id|inode
op_star
id|dir
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_int
id|mode
comma
id|dev_t
id|dev
)paren
(brace
r_struct
id|inode
op_star
id|inode
suffix:semicolon
r_char
op_star
id|name
suffix:semicolon
r_int
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|inode
op_assign
id|iget
c_func
(paren
id|dir-&gt;i_sb
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|inode
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|err
op_assign
id|init_inode
c_func
(paren
id|inode
comma
id|dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|dentry_name
c_func
(paren
id|dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|init_special_inode
c_func
(paren
id|inode
comma
id|mode
comma
id|dev
)paren
suffix:semicolon
id|err
op_assign
id|do_mknod
c_func
(paren
id|name
comma
id|mode
comma
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_free
suffix:semicolon
)brace
id|err
op_assign
id|read_name
c_func
(paren
id|inode
comma
id|name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|d_instantiate
c_func
(paren
id|dentry
comma
id|inode
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|out_free
suffix:colon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
id|out_put
suffix:colon
id|iput
c_func
(paren
id|inode
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_rename
r_int
id|hostfs_rename
c_func
(paren
r_struct
id|inode
op_star
id|from_ino
comma
r_struct
id|dentry
op_star
id|from
comma
r_struct
id|inode
op_star
id|to_ino
comma
r_struct
id|dentry
op_star
id|to
)paren
(brace
r_char
op_star
id|from_name
comma
op_star
id|to_name
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|from_name
op_assign
id|inode_dentry_name
c_func
(paren
id|from_ino
comma
id|from
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|to_name
op_assign
id|inode_dentry_name
c_func
(paren
id|to_ino
comma
id|to
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|kfree
c_func
(paren
id|from_name
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|rename_file
c_func
(paren
id|from_name
comma
id|to_name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|from_name
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|to_name
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_truncate
r_void
id|hostfs_truncate
c_func
(paren
r_struct
id|inode
op_star
id|ino
)paren
(brace
id|not_implemented
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|hostfs_permission
r_int
id|hostfs_permission
c_func
(paren
r_struct
id|inode
op_star
id|ino
comma
r_int
id|desired
comma
r_struct
id|nameidata
op_star
id|nd
)paren
(brace
r_char
op_star
id|name
suffix:semicolon
r_int
id|r
op_assign
l_int|0
comma
id|w
op_assign
l_int|0
comma
id|x
op_assign
l_int|0
comma
id|err
suffix:semicolon
r_if
c_cond
(paren
id|desired
op_amp
id|MAY_READ
)paren
(brace
id|r
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|desired
op_amp
id|MAY_WRITE
)paren
(brace
id|w
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|desired
op_amp
id|MAY_EXEC
)paren
(brace
id|x
op_assign
l_int|1
suffix:semicolon
)brace
id|name
op_assign
id|inode_name
c_func
(paren
id|ino
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|access_file
c_func
(paren
id|name
comma
id|r
comma
id|w
comma
id|x
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|err
)paren
(brace
id|err
op_assign
id|vfs_permission
c_func
(paren
id|ino
comma
id|desired
)paren
suffix:semicolon
)brace
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_setattr
r_int
id|hostfs_setattr
c_func
(paren
r_struct
id|dentry
op_star
id|dentry
comma
r_struct
id|iattr
op_star
id|attr
)paren
(brace
r_struct
id|hostfs_iattr
id|attrs
suffix:semicolon
r_char
op_star
id|name
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|append
)paren
(brace
id|attr-&gt;ia_valid
op_and_assign
op_complement
id|ATTR_SIZE
suffix:semicolon
)brace
id|attrs.ia_valid
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_MODE
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_MODE
suffix:semicolon
id|attrs.ia_mode
op_assign
id|attr-&gt;ia_mode
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_UID
)paren
(brace
r_if
c_cond
(paren
(paren
id|dentry-&gt;d_inode-&gt;i_sb-&gt;s_dev
op_eq
id|ROOT_DEV
)paren
op_logical_and
(paren
id|attr-&gt;ia_uid
op_eq
l_int|0
)paren
)paren
(brace
id|attr-&gt;ia_uid
op_assign
id|getuid
c_func
(paren
)paren
suffix:semicolon
)brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_UID
suffix:semicolon
id|attrs.ia_uid
op_assign
id|attr-&gt;ia_uid
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_GID
)paren
(brace
r_if
c_cond
(paren
(paren
id|dentry-&gt;d_inode-&gt;i_sb-&gt;s_dev
op_eq
id|ROOT_DEV
)paren
op_logical_and
(paren
id|attr-&gt;ia_gid
op_eq
l_int|0
)paren
)paren
(brace
id|attr-&gt;ia_gid
op_assign
id|getuid
c_func
(paren
)paren
suffix:semicolon
)brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_GID
suffix:semicolon
id|attrs.ia_gid
op_assign
id|attr-&gt;ia_gid
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_SIZE
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_SIZE
suffix:semicolon
id|attrs.ia_size
op_assign
id|attr-&gt;ia_size
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_ATIME
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_ATIME
suffix:semicolon
id|attrs.ia_atime
op_assign
id|attr-&gt;ia_atime
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_MTIME
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_MTIME
suffix:semicolon
id|attrs.ia_mtime
op_assign
id|attr-&gt;ia_mtime
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_CTIME
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_CTIME
suffix:semicolon
id|attrs.ia_ctime
op_assign
id|attr-&gt;ia_ctime
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_ATIME_SET
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_ATIME_SET
suffix:semicolon
)brace
r_if
c_cond
(paren
id|attr-&gt;ia_valid
op_amp
id|ATTR_MTIME_SET
)paren
(brace
id|attrs.ia_valid
op_or_assign
id|HOSTFS_ATTR_MTIME_SET
suffix:semicolon
)brace
id|name
op_assign
id|dentry_name
c_func
(paren
id|dentry
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|set_attr
c_func
(paren
id|name
comma
op_amp
id|attrs
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_return
id|inode_setattr
c_func
(paren
id|dentry-&gt;d_inode
comma
id|attr
)paren
suffix:semicolon
)brace
DECL|function|hostfs_getattr
r_int
id|hostfs_getattr
c_func
(paren
r_struct
id|vfsmount
op_star
id|mnt
comma
r_struct
id|dentry
op_star
id|dentry
comma
r_struct
id|kstat
op_star
id|stat
)paren
(brace
id|generic_fillattr
c_func
(paren
id|dentry-&gt;d_inode
comma
id|stat
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|hostfs_iops
r_static
r_struct
id|inode_operations
id|hostfs_iops
op_assign
(brace
dot
id|create
op_assign
id|hostfs_create
comma
dot
id|link
op_assign
id|hostfs_link
comma
dot
id|unlink
op_assign
id|hostfs_unlink
comma
dot
id|symlink
op_assign
id|hostfs_symlink
comma
dot
id|mkdir
op_assign
id|hostfs_mkdir
comma
dot
id|rmdir
op_assign
id|hostfs_rmdir
comma
dot
id|mknod
op_assign
id|hostfs_mknod
comma
dot
id|rename
op_assign
id|hostfs_rename
comma
dot
id|truncate
op_assign
id|hostfs_truncate
comma
dot
id|permission
op_assign
id|hostfs_permission
comma
dot
id|setattr
op_assign
id|hostfs_setattr
comma
dot
id|getattr
op_assign
id|hostfs_getattr
comma
)brace
suffix:semicolon
DECL|variable|hostfs_dir_iops
r_static
r_struct
id|inode_operations
id|hostfs_dir_iops
op_assign
(brace
dot
id|create
op_assign
id|hostfs_create
comma
dot
id|lookup
op_assign
id|hostfs_lookup
comma
dot
id|link
op_assign
id|hostfs_link
comma
dot
id|unlink
op_assign
id|hostfs_unlink
comma
dot
id|symlink
op_assign
id|hostfs_symlink
comma
dot
id|mkdir
op_assign
id|hostfs_mkdir
comma
dot
id|rmdir
op_assign
id|hostfs_rmdir
comma
dot
id|mknod
op_assign
id|hostfs_mknod
comma
dot
id|rename
op_assign
id|hostfs_rename
comma
dot
id|truncate
op_assign
id|hostfs_truncate
comma
dot
id|permission
op_assign
id|hostfs_permission
comma
dot
id|setattr
op_assign
id|hostfs_setattr
comma
dot
id|getattr
op_assign
id|hostfs_getattr
comma
)brace
suffix:semicolon
DECL|function|hostfs_link_readpage
r_int
id|hostfs_link_readpage
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|page
op_star
id|page
)paren
(brace
r_char
op_star
id|buffer
comma
op_star
id|name
suffix:semicolon
r_int
r_int
id|start
suffix:semicolon
r_int
id|err
suffix:semicolon
id|start
op_assign
id|page-&gt;index
op_lshift
id|PAGE_CACHE_SHIFT
suffix:semicolon
id|buffer
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|name
op_assign
id|inode_name
c_func
(paren
id|page-&gt;mapping-&gt;host
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|err
op_assign
id|do_readlink
c_func
(paren
id|name
comma
id|buffer
comma
id|PAGE_CACHE_SIZE
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
op_eq
id|PAGE_CACHE_SIZE
)paren
(brace
id|err
op_assign
op_minus
id|E2BIG
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|err
OG
l_int|0
)paren
(brace
id|flush_dcache_page
c_func
(paren
id|page
)paren
suffix:semicolon
id|SetPageUptodate
c_func
(paren
id|page
)paren
suffix:semicolon
r_if
c_cond
(paren
id|PageError
c_func
(paren
id|page
)paren
)paren
id|ClearPageError
c_func
(paren
id|page
)paren
suffix:semicolon
id|err
op_assign
l_int|0
suffix:semicolon
)brace
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|unlock_page
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|variable|hostfs_link_aops
r_static
r_struct
id|address_space_operations
id|hostfs_link_aops
op_assign
(brace
dot
id|readpage
op_assign
id|hostfs_link_readpage
comma
)brace
suffix:semicolon
DECL|function|hostfs_fill_sb_common
r_static
r_int
id|hostfs_fill_sb_common
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_void
op_star
id|d
comma
r_int
id|silent
)paren
(brace
r_struct
id|inode
op_star
id|root_inode
suffix:semicolon
r_char
op_star
id|name
comma
op_star
id|data
op_assign
id|d
suffix:semicolon
r_int
id|err
suffix:semicolon
id|sb-&gt;s_blocksize
op_assign
l_int|1024
suffix:semicolon
id|sb-&gt;s_blocksize_bits
op_assign
l_int|10
suffix:semicolon
id|sb-&gt;s_magic
op_assign
id|HOSTFS_SUPER_MAGIC
suffix:semicolon
id|sb-&gt;s_op
op_assign
op_amp
id|hostfs_sbops
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data
op_eq
l_int|NULL
)paren
op_logical_or
(paren
op_star
id|data
op_eq
l_char|&squot;&bslash;0&squot;
)paren
)paren
(brace
id|data
op_assign
id|root_ino
suffix:semicolon
)brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|name
op_assign
id|kmalloc
c_func
(paren
id|strlen
c_func
(paren
id|data
)paren
op_plus
l_int|1
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|name
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|name
comma
id|data
)paren
suffix:semicolon
id|root_inode
op_assign
id|iget
c_func
(paren
id|sb
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|root_inode
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out_free
suffix:semicolon
)brace
id|err
op_assign
id|init_inode
c_func
(paren
id|root_inode
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|HOSTFS_I
c_func
(paren
id|root_inode
)paren
op_member_access_from_pointer
id|host_filename
op_assign
id|name
suffix:semicolon
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|sb-&gt;s_root
op_assign
id|d_alloc_root
c_func
(paren
id|root_inode
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb-&gt;s_root
op_eq
l_int|NULL
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
id|err
op_assign
id|read_inode
c_func
(paren
id|root_inode
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
r_goto
id|out_put
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
id|out_put
suffix:colon
id|iput
c_func
(paren
id|root_inode
)paren
suffix:semicolon
id|out_free
suffix:colon
id|kfree
c_func
(paren
id|name
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|err
suffix:semicolon
)brace
DECL|function|hostfs_read_sb
r_static
r_struct
id|super_block
op_star
id|hostfs_read_sb
c_func
(paren
r_struct
id|file_system_type
op_star
id|type
comma
r_int
id|flags
comma
r_const
r_char
op_star
id|dev_name
comma
r_void
op_star
id|data
)paren
(brace
r_return
id|get_sb_nodev
c_func
(paren
id|type
comma
id|flags
comma
id|data
comma
id|hostfs_fill_sb_common
)paren
suffix:semicolon
)brace
DECL|variable|hostfs_type
r_static
r_struct
id|file_system_type
id|hostfs_type
op_assign
(brace
dot
id|owner
op_assign
id|THIS_MODULE
comma
dot
id|name
op_assign
l_string|&quot;hostfs&quot;
comma
dot
id|get_sb
op_assign
id|hostfs_read_sb
comma
dot
id|kill_sb
op_assign
id|kill_anon_super
comma
dot
id|fs_flags
op_assign
l_int|0
comma
)brace
suffix:semicolon
DECL|function|init_hostfs
r_static
r_int
id|__init
id|init_hostfs
c_func
(paren
r_void
)paren
(brace
r_return
id|register_filesystem
c_func
(paren
op_amp
id|hostfs_type
)paren
suffix:semicolon
)brace
DECL|function|exit_hostfs
r_static
r_void
id|__exit
id|exit_hostfs
c_func
(paren
r_void
)paren
(brace
id|unregister_filesystem
c_func
(paren
op_amp
id|hostfs_type
)paren
suffix:semicolon
)brace
id|module_init
c_func
(paren
id|init_hostfs
)paren
id|module_exit
c_func
(paren
id|exit_hostfs
)paren
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
multiline_comment|/*&n; * Overrides for Emacs so that we follow Linus&squot;s tabbing style.&n; * Emacs will notice this stuff at the end of the file and automatically&n; * adjust the settings for this buffer only.  This must remain at the end&n; * of the file.&n; * ---------------------------------------------------------------------------&n; * Local variables:&n; * c-file-style: &quot;linux&quot;&n; * End:&n; */
eof
