multiline_comment|/*&n; * JFFS2 -- Journalling Flash File System, Version 2.&n; *&n; * Copyright (C) 2001, 2002 Red Hat, Inc.&n; *&n; * Created by David Woodhouse &lt;dwmw2@cambridge.redhat.com&gt;&n; *&n; * For licensing information, see the file &squot;LICENCE&squot; in this directory.&n; *&n; * $Id: pushpull.h,v 1.8 2002/05/20 14:56:38 dwmw2 Exp $&n; *&n; */
macro_line|#ifndef __PUSHPULL_H__
DECL|macro|__PUSHPULL_H__
mdefine_line|#define __PUSHPULL_H__
macro_line|#include &lt;linux/errno.h&gt;
DECL|struct|pushpull
r_struct
id|pushpull
(brace
DECL|member|buf
r_int
r_char
op_star
id|buf
suffix:semicolon
DECL|member|buflen
r_int
r_int
id|buflen
suffix:semicolon
DECL|member|ofs
r_int
r_int
id|ofs
suffix:semicolon
DECL|member|reserve
r_int
r_int
id|reserve
suffix:semicolon
)brace
suffix:semicolon
DECL|function|init_pushpull
r_static
r_inline
r_void
id|init_pushpull
c_func
(paren
r_struct
id|pushpull
op_star
id|pp
comma
r_char
op_star
id|buf
comma
r_int
id|buflen
comma
r_int
id|ofs
comma
r_int
id|reserve
)paren
(brace
id|pp-&gt;buf
op_assign
id|buf
suffix:semicolon
id|pp-&gt;buflen
op_assign
id|buflen
suffix:semicolon
id|pp-&gt;ofs
op_assign
id|ofs
suffix:semicolon
id|pp-&gt;reserve
op_assign
id|reserve
suffix:semicolon
)brace
DECL|function|pushbit
r_static
r_inline
r_int
id|pushbit
c_func
(paren
r_struct
id|pushpull
op_star
id|pp
comma
r_int
id|bit
comma
r_int
id|use_reserved
)paren
(brace
r_if
c_cond
(paren
id|pp-&gt;ofs
op_ge
id|pp-&gt;buflen
op_minus
(paren
id|use_reserved
ques
c_cond
l_int|0
suffix:colon
id|pp-&gt;reserve
)paren
)paren
(brace
r_return
op_minus
id|ENOSPC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bit
)paren
(brace
id|pp-&gt;buf
(braket
id|pp-&gt;ofs
op_rshift
l_int|3
)braket
op_or_assign
(paren
l_int|1
op_lshift
(paren
l_int|7
op_minus
(paren
id|pp-&gt;ofs
op_amp
l_int|7
)paren
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|pp-&gt;buf
(braket
id|pp-&gt;ofs
op_rshift
l_int|3
)braket
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
l_int|7
op_minus
(paren
id|pp-&gt;ofs
op_amp
l_int|7
)paren
)paren
)paren
suffix:semicolon
)brace
id|pp-&gt;ofs
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|pushedbits
r_static
r_inline
r_int
id|pushedbits
c_func
(paren
r_struct
id|pushpull
op_star
id|pp
)paren
(brace
r_return
id|pp-&gt;ofs
suffix:semicolon
)brace
DECL|function|pullbit
r_static
r_inline
r_int
id|pullbit
c_func
(paren
r_struct
id|pushpull
op_star
id|pp
)paren
(brace
r_int
id|bit
suffix:semicolon
id|bit
op_assign
(paren
id|pp-&gt;buf
(braket
id|pp-&gt;ofs
op_rshift
l_int|3
)braket
op_rshift
(paren
l_int|7
op_minus
(paren
id|pp-&gt;ofs
op_amp
l_int|7
)paren
)paren
)paren
op_amp
l_int|1
suffix:semicolon
id|pp-&gt;ofs
op_increment
suffix:semicolon
r_return
id|bit
suffix:semicolon
)brace
DECL|function|pulledbits
r_static
r_inline
r_int
id|pulledbits
c_func
(paren
r_struct
id|pushpull
op_star
id|pp
)paren
(brace
r_return
id|pp-&gt;ofs
suffix:semicolon
)brace
macro_line|#endif /* __PUSHPULL_H__ */
eof
