multiline_comment|/*&n;  File: fs/ext3/acl.h&n;&n;  (C) 2001 Andreas Gruenbacher, &lt;a.gruenbacher@computer.org&gt;&n;*/
macro_line|#include &lt;linux/xattr_acl.h&gt;
DECL|macro|EXT3_ACL_VERSION
mdefine_line|#define EXT3_ACL_VERSION&t;0x0001
DECL|macro|EXT3_ACL_MAX_ENTRIES
mdefine_line|#define EXT3_ACL_MAX_ENTRIES&t;32
r_typedef
r_struct
(brace
DECL|member|e_tag
id|__u16
id|e_tag
suffix:semicolon
DECL|member|e_perm
id|__u16
id|e_perm
suffix:semicolon
DECL|member|e_id
id|__u32
id|e_id
suffix:semicolon
DECL|typedef|ext3_acl_entry
)brace
id|ext3_acl_entry
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|e_tag
id|__u16
id|e_tag
suffix:semicolon
DECL|member|e_perm
id|__u16
id|e_perm
suffix:semicolon
DECL|typedef|ext3_acl_entry_short
)brace
id|ext3_acl_entry_short
suffix:semicolon
r_typedef
r_struct
(brace
DECL|member|a_version
id|__u32
id|a_version
suffix:semicolon
DECL|typedef|ext3_acl_header
)brace
id|ext3_acl_header
suffix:semicolon
DECL|function|ext3_acl_size
r_static
r_inline
r_int
id|ext3_acl_size
c_func
(paren
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
op_le
l_int|4
)paren
(brace
r_return
r_sizeof
(paren
id|ext3_acl_header
)paren
op_plus
id|count
op_star
r_sizeof
(paren
id|ext3_acl_entry_short
)paren
suffix:semicolon
)brace
r_else
(brace
r_return
r_sizeof
(paren
id|ext3_acl_header
)paren
op_plus
l_int|4
op_star
r_sizeof
(paren
id|ext3_acl_entry_short
)paren
op_plus
(paren
id|count
op_minus
l_int|4
)paren
op_star
r_sizeof
(paren
id|ext3_acl_entry
)paren
suffix:semicolon
)brace
)brace
DECL|function|ext3_acl_count
r_static
r_inline
r_int
id|ext3_acl_count
c_func
(paren
r_int
id|size
)paren
(brace
id|ssize_t
id|s
suffix:semicolon
id|size
op_sub_assign
r_sizeof
(paren
id|ext3_acl_header
)paren
suffix:semicolon
id|s
op_assign
id|size
op_minus
l_int|4
op_star
r_sizeof
(paren
id|ext3_acl_entry_short
)paren
suffix:semicolon
r_if
c_cond
(paren
id|s
OL
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|size
op_mod
r_sizeof
(paren
id|ext3_acl_entry_short
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
id|size
op_div
r_sizeof
(paren
id|ext3_acl_entry_short
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|s
op_mod
r_sizeof
(paren
id|ext3_acl_entry
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
id|s
op_div
r_sizeof
(paren
id|ext3_acl_entry
)paren
op_plus
l_int|4
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_EXT3_FS_POSIX_ACL
multiline_comment|/* Value for inode-&gt;u.ext3_i.i_acl and inode-&gt;u.ext3_i.i_default_acl&n;   if the ACL has not been cached */
DECL|macro|EXT3_ACL_NOT_CACHED
mdefine_line|#define EXT3_ACL_NOT_CACHED ((void *)-1)
multiline_comment|/* acl.c */
r_extern
r_int
id|ext3_permission
(paren
r_struct
id|inode
op_star
comma
r_int
comma
r_struct
id|nameidata
op_star
)paren
suffix:semicolon
r_extern
r_int
id|ext3_permission_locked
(paren
r_struct
id|inode
op_star
comma
r_int
)paren
suffix:semicolon
r_extern
r_int
id|ext3_acl_chmod
(paren
r_struct
id|inode
op_star
)paren
suffix:semicolon
r_extern
r_int
id|ext3_init_acl
(paren
id|handle_t
op_star
comma
r_struct
id|inode
op_star
comma
r_struct
id|inode
op_star
)paren
suffix:semicolon
r_extern
r_int
id|init_ext3_acl
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|exit_ext3_acl
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#else  /* CONFIG_EXT3_FS_POSIX_ACL */
macro_line|#include &lt;linux/sched.h&gt;
DECL|macro|ext3_permission
mdefine_line|#define ext3_permission NULL
r_static
r_inline
r_int
DECL|function|ext3_acl_chmod
id|ext3_acl_chmod
c_func
(paren
r_struct
id|inode
op_star
id|inode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|ext3_init_acl
id|ext3_init_acl
c_func
(paren
id|handle_t
op_star
id|handle
comma
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|inode
op_star
id|dir
)paren
(brace
id|inode-&gt;i_mode
op_and_assign
op_complement
id|current-&gt;fs-&gt;umask
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif  /* CONFIG_EXT3_FS_POSIX_ACL */
eof
