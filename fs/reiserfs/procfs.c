multiline_comment|/* -*- linux-c -*- */
multiline_comment|/* fs/reiserfs/procfs.c */
multiline_comment|/*&n; * Copyright 2000 by Hans Reiser, licensing governed by reiserfs/README&n; */
multiline_comment|/* proc info support a la one created by Sizif@Botik.RU for PGC */
multiline_comment|/* $Id: procfs.c,v 1.1.8.2 2001/07/15 17:08:42 god Exp $ */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;linux/reiserfs_fs.h&gt;
macro_line|#include &lt;linux/reiserfs_fs_sb.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/locks.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#if defined( REISERFS_PROC_INFO )
multiline_comment|/*&n; * LOCKING:&n; *&n; * We rely on new Alexander Viro&squot;s super-block locking.&n; *&n; */
DECL|function|procinfo_prologue
r_static
r_struct
id|super_block
op_star
id|procinfo_prologue
c_func
(paren
id|kdev_t
id|dev
)paren
(brace
r_struct
id|super_block
op_star
id|result
suffix:semicolon
multiline_comment|/* get super-block by device */
id|result
op_assign
id|get_super
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|reiserfs_is_super
c_func
(paren
id|result
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;reiserfs: procfs-52: &quot;
l_string|&quot;non-reiserfs super found&bslash;n&quot;
)paren
suffix:semicolon
id|drop_super
c_func
(paren
id|result
)paren
suffix:semicolon
id|result
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;reiserfs: procfs-74: &quot;
l_string|&quot;race between procinfo and umount&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|procinfo_epilogue
r_int
id|procinfo_epilogue
c_func
(paren
r_struct
id|super_block
op_star
id|super
)paren
(brace
id|drop_super
c_func
(paren
id|super
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_proc_tail
r_int
id|reiserfs_proc_tail
c_func
(paren
r_int
id|len
comma
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
)paren
(brace
multiline_comment|/* this is black procfs magic */
r_if
c_cond
(paren
id|offset
op_ge
id|len
)paren
(brace
op_star
id|start
op_assign
id|buffer
suffix:semicolon
op_star
id|eof
op_assign
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
op_star
id|start
op_assign
id|buffer
op_plus
id|offset
suffix:semicolon
r_if
c_cond
(paren
(paren
id|len
op_sub_assign
id|offset
)paren
OG
id|count
)paren
(brace
r_return
id|count
suffix:semicolon
)brace
op_star
id|eof
op_assign
l_int|1
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|reiserfs_version_in_proc
r_int
id|reiserfs_version_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_char
op_star
id|format
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|sb-&gt;u.reiserfs_sb.s_properties
op_amp
(paren
l_int|1
op_lshift
id|REISERFS_3_6
)paren
)paren
(brace
id|format
op_assign
l_string|&quot;3.6&quot;
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|sb-&gt;u.reiserfs_sb.s_properties
op_amp
(paren
l_int|1
op_lshift
id|REISERFS_3_5
)paren
)paren
(brace
id|format
op_assign
l_string|&quot;3.5&quot;
suffix:semicolon
)brace
r_else
(brace
id|format
op_assign
l_string|&quot;unknown&quot;
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;%s format&bslash;twith checks %s&bslash;n&quot;
comma
id|format
comma
macro_line|#if defined( CONFIG_REISERFS_CHECK )
l_string|&quot;on&quot;
macro_line|#else
l_string|&quot;off&quot;
macro_line|#endif
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_global_version_in_proc
r_int
id|reiserfs_global_version_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|macro|SF
mdefine_line|#define SF( x ) ( r -&gt; x )
DECL|macro|SFP
mdefine_line|#define SFP( x ) SF( s_proc_info_data.x )
DECL|macro|SFPL
mdefine_line|#define SFPL( x ) SFP( x[ level ] )
DECL|macro|SFPF
mdefine_line|#define SFPF( x ) SFP( find_forward.x )
DECL|macro|SFPJ
mdefine_line|#define SFPJ( x ) SFP( journal.x )
DECL|macro|D2C
mdefine_line|#define D2C( x ) le16_to_cpu( x )
DECL|macro|D4C
mdefine_line|#define D4C( x ) le32_to_cpu( x )
DECL|macro|DF
mdefine_line|#define DF( x ) D2C( rs -&gt; s_v1.x )
DECL|macro|DFL
mdefine_line|#define DFL( x ) D4C( rs -&gt; s_v1.x )
DECL|macro|objectid_map
mdefine_line|#define objectid_map( s, rs ) (old_format_only (s) ?&t;&t;&t;&t;&bslash;&n;                         (__u32 *)((struct reiserfs_super_block_v1 *)rs + 1) :&t;&bslash;&n;&t;&t;&t; (__u32 *)(rs + 1))
DECL|macro|MAP
mdefine_line|#define MAP( i ) D4C( objectid_map( sb, rs )[ i ] )
DECL|macro|DJF
mdefine_line|#define DJF( x ) le32_to_cpu( rs -&gt; x )
DECL|macro|DJV
mdefine_line|#define DJV( x ) le32_to_cpu( s_v1 -&gt; x )
DECL|macro|DJP
mdefine_line|#define DJP( x ) le32_to_cpu( jp -&gt; x ) 
DECL|macro|JF
mdefine_line|#define JF( x ) ( r -&gt; s_journal -&gt; x )
DECL|function|reiserfs_super_in_proc
r_int
id|reiserfs_super_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|r
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|r
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;state: &bslash;t%s&bslash;n&quot;
l_string|&quot;mount options: &bslash;t%s%s%s%s%s%s%s%s%s%s%s%s&bslash;n&quot;
l_string|&quot;gen. counter: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_kmallocs: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_disk_reads: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_disk_writes: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_fix_nodes: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_do_balance: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_unneeded_left_neighbor: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_good_search_by_key_reada: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_bmaps: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_bmaps_without_search: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_direct2indirect: &bslash;t%i&bslash;n&quot;
l_string|&quot;s_indirect2direct: &bslash;t%i&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;max_hash_collisions: &bslash;t%i&bslash;n&quot;
l_string|&quot;breads: &bslash;t%lu&bslash;n&quot;
l_string|&quot;bread_misses: &bslash;t%lu&bslash;n&quot;
l_string|&quot;search_by_key: &bslash;t%lu&bslash;n&quot;
l_string|&quot;search_by_key_fs_changed: &bslash;t%lu&bslash;n&quot;
l_string|&quot;search_by_key_restarted: &bslash;t%lu&bslash;n&quot;
l_string|&quot;leaked_oid: &bslash;t%lu&bslash;n&quot;
l_string|&quot;leaves_removable: &bslash;t%lu&bslash;n&quot;
comma
id|SF
c_func
(paren
id|s_mount_state
)paren
op_eq
id|REISERFS_VALID_FS
ques
c_cond
l_string|&quot;REISERFS_VALID_FS&quot;
suffix:colon
l_string|&quot;REISERFS_ERROR_FS&quot;
comma
id|reiserfs_r5_hash
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;FORCE_R5 &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_rupasov_hash
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;FORCE_RUPASOV &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_tea_hash
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;FORCE_TEA &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_hash_detect
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;DETECT_HASH &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_no_border
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;NO_BORDER &quot;
suffix:colon
l_string|&quot;BORDER &quot;
comma
id|reiserfs_no_unhashed_relocation
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;NO_UNHASHED_RELOCATION &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_hashed_relocation
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;UNHASHED_RELOCATION &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_test4
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;TEST4 &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|dont_have_tails
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;NO_TAILS &quot;
suffix:colon
l_string|&quot;TAILS &quot;
comma
id|replay_only
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;REPLAY_ONLY &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|reiserfs_dont_log
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;DONT_LOG &quot;
suffix:colon
l_string|&quot;LOG &quot;
comma
id|convert_reiserfs
c_func
(paren
id|sb
)paren
ques
c_cond
l_string|&quot;CONV &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|atomic_read
c_func
(paren
op_amp
id|r
op_member_access_from_pointer
id|s_generation_counter
)paren
comma
id|SF
c_func
(paren
id|s_kmallocs
)paren
comma
id|SF
c_func
(paren
id|s_disk_reads
)paren
comma
id|SF
c_func
(paren
id|s_disk_writes
)paren
comma
id|SF
c_func
(paren
id|s_fix_nodes
)paren
comma
id|SF
c_func
(paren
id|s_do_balance
)paren
comma
id|SF
c_func
(paren
id|s_unneeded_left_neighbor
)paren
comma
id|SF
c_func
(paren
id|s_good_search_by_key_reada
)paren
comma
id|SF
c_func
(paren
id|s_bmaps
)paren
comma
id|SF
c_func
(paren
id|s_bmaps_without_search
)paren
comma
id|SF
c_func
(paren
id|s_direct2indirect
)paren
comma
id|SF
c_func
(paren
id|s_indirect2direct
)paren
comma
id|SFP
c_func
(paren
id|max_hash_collisions
)paren
comma
id|SFP
c_func
(paren
id|breads
)paren
comma
id|SFP
c_func
(paren
id|bread_miss
)paren
comma
id|SFP
c_func
(paren
id|search_by_key
)paren
comma
id|SFP
c_func
(paren
id|search_by_key_fs_changed
)paren
comma
id|SFP
c_func
(paren
id|search_by_key_restarted
)paren
comma
id|SFP
c_func
(paren
id|leaked_oid
)paren
comma
id|SFP
c_func
(paren
id|leaves_removable
)paren
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_per_level_in_proc
r_int
id|reiserfs_per_level_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|r
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_int
id|level
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|r
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;level&bslash;t&quot;
l_string|&quot;     balances&quot;
l_string|&quot; [sbk:  reads&quot;
l_string|&quot;   fs_changed&quot;
l_string|&quot;   restarted]&quot;
l_string|&quot;   free space&quot;
l_string|&quot;        items&quot;
l_string|&quot;   can_remove&quot;
l_string|&quot;         lnum&quot;
l_string|&quot;         rnum&quot;
l_string|&quot;       lbytes&quot;
l_string|&quot;       rbytes&quot;
l_string|&quot;     get_neig&quot;
l_string|&quot; get_neig_res&quot;
l_string|&quot;  need_l_neig&quot;
l_string|&quot;  need_r_neig&quot;
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|level
op_assign
l_int|0
suffix:semicolon
id|level
OL
id|MAX_HEIGHT
suffix:semicolon
op_increment
id|level
)paren
(brace
r_if
c_cond
(paren
id|len
OG
id|PAGE_SIZE
op_minus
l_int|240
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;... and more&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;%i&bslash;t&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12li&quot;
l_string|&quot; %12li&quot;
l_string|&quot; %12li&quot;
l_string|&quot; %12li&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot;&bslash;n&quot;
comma
id|level
comma
id|SFPL
c_func
(paren
id|balance_at
)paren
comma
id|SFPL
c_func
(paren
id|sbk_read_at
)paren
comma
id|SFPL
c_func
(paren
id|sbk_fs_changed
)paren
comma
id|SFPL
c_func
(paren
id|sbk_restarted
)paren
comma
id|SFPL
c_func
(paren
id|free_at
)paren
comma
id|SFPL
c_func
(paren
id|items_at
)paren
comma
id|SFPL
c_func
(paren
id|can_node_be_removed
)paren
comma
id|SFPL
c_func
(paren
id|lnum
)paren
comma
id|SFPL
c_func
(paren
id|rnum
)paren
comma
id|SFPL
c_func
(paren
id|lbytes
)paren
comma
id|SFPL
c_func
(paren
id|rbytes
)paren
comma
id|SFPL
c_func
(paren
id|get_neighbors
)paren
comma
id|SFPL
c_func
(paren
id|get_neighbors_restart
)paren
comma
id|SFPL
c_func
(paren
id|need_l_neighbor
)paren
comma
id|SFPL
c_func
(paren
id|need_r_neighbor
)paren
)paren
suffix:semicolon
)brace
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_bitmap_in_proc
r_int
id|reiserfs_bitmap_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|r
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|r
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;free_block: %lu&bslash;n&quot;
l_string|&quot;find_forward:&quot;
l_string|&quot;         wait&quot;
l_string|&quot;         bmap&quot;
l_string|&quot;        retry&quot;
l_string|&quot; journal_hint&quot;
l_string|&quot;  journal_out&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot; %12lu&quot;
l_string|&quot;&bslash;n&quot;
comma
id|SFP
c_func
(paren
id|free_block
)paren
comma
id|SFPF
c_func
(paren
id|call
)paren
comma
id|SFPF
c_func
(paren
id|wait
)paren
comma
id|SFPF
c_func
(paren
id|bmap
)paren
comma
id|SFPF
c_func
(paren
id|retry
)paren
comma
id|SFPF
c_func
(paren
id|in_journal_hint
)paren
comma
id|SFPF
c_func
(paren
id|in_journal_out
)paren
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_on_disk_super_in_proc
r_int
id|reiserfs_on_disk_super_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|sb_info
suffix:semicolon
r_struct
id|reiserfs_super_block
op_star
id|rs
suffix:semicolon
r_int
id|hash_code
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|sb_info
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|rs
op_assign
id|sb_info
op_member_access_from_pointer
id|s_rs
suffix:semicolon
id|hash_code
op_assign
id|DFL
c_func
(paren
id|s_hash_function_code
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;block_count: &bslash;t%i&bslash;n&quot;
l_string|&quot;free_blocks: &bslash;t%i&bslash;n&quot;
l_string|&quot;root_block: &bslash;t%i&bslash;n&quot;
l_string|&quot;blocksize: &bslash;t%i&bslash;n&quot;
l_string|&quot;oid_maxsize: &bslash;t%i&bslash;n&quot;
l_string|&quot;oid_cursize: &bslash;t%i&bslash;n&quot;
l_string|&quot;umount_state: &bslash;t%i&bslash;n&quot;
l_string|&quot;magic: &bslash;t%10.10s&bslash;n&quot;
l_string|&quot;fs_state: &bslash;t%i&bslash;n&quot;
l_string|&quot;hash: &bslash;t%s&bslash;n&quot;
l_string|&quot;tree_height: &bslash;t%i&bslash;n&quot;
l_string|&quot;bmap_nr: &bslash;t%i&bslash;n&quot;
l_string|&quot;version: &bslash;t%i&bslash;n&quot;
l_string|&quot;reserved_for_journal: &bslash;t%i&bslash;n&quot;
comma
id|DFL
c_func
(paren
id|s_block_count
)paren
comma
id|DFL
c_func
(paren
id|s_free_blocks
)paren
comma
id|DFL
c_func
(paren
id|s_root_block
)paren
comma
id|DF
c_func
(paren
id|s_blocksize
)paren
comma
id|DF
c_func
(paren
id|s_oid_maxsize
)paren
comma
id|DF
c_func
(paren
id|s_oid_cursize
)paren
comma
id|DF
c_func
(paren
id|s_umount_state
)paren
comma
id|rs
op_member_access_from_pointer
id|s_v1.s_magic
comma
id|DF
c_func
(paren
id|s_fs_state
)paren
comma
id|hash_code
op_eq
id|TEA_HASH
ques
c_cond
l_string|&quot;tea&quot;
suffix:colon
(paren
id|hash_code
op_eq
id|YURA_HASH
)paren
ques
c_cond
l_string|&quot;rupasov&quot;
suffix:colon
(paren
id|hash_code
op_eq
id|R5_HASH
)paren
ques
c_cond
l_string|&quot;r5&quot;
suffix:colon
(paren
id|hash_code
op_eq
id|UNSET_HASH
)paren
ques
c_cond
l_string|&quot;unset&quot;
suffix:colon
l_string|&quot;unknown&quot;
comma
id|DF
c_func
(paren
id|s_tree_height
)paren
comma
id|DF
c_func
(paren
id|s_bmap_nr
)paren
comma
id|DF
c_func
(paren
id|s_version
)paren
comma
id|DF
(paren
id|s_reserved_for_journal
)paren
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_oidmap_in_proc
r_int
id|reiserfs_oidmap_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|sb_info
suffix:semicolon
r_struct
id|reiserfs_super_block
op_star
id|rs
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
r_int
id|mapsize
suffix:semicolon
r_int
r_int
id|total_used
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_int
id|exact
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|sb_info
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|rs
op_assign
id|sb_info
op_member_access_from_pointer
id|s_rs
suffix:semicolon
id|mapsize
op_assign
id|le16_to_cpu
c_func
(paren
id|rs
op_member_access_from_pointer
id|s_v1.s_oid_cursize
)paren
suffix:semicolon
id|total_used
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|mapsize
suffix:semicolon
op_increment
id|i
)paren
(brace
id|__u32
id|right
suffix:semicolon
id|right
op_assign
(paren
id|i
op_eq
id|mapsize
op_minus
l_int|1
)paren
ques
c_cond
id|MAX_KEY_OBJECTID
suffix:colon
id|MAP
c_func
(paren
id|i
op_plus
l_int|1
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;%s: [ %x .. %x )&bslash;n&quot;
comma
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
l_string|&quot;free&quot;
suffix:colon
l_string|&quot;used&quot;
comma
id|MAP
c_func
(paren
id|i
)paren
comma
id|right
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_amp
l_int|1
)paren
)paren
(brace
id|total_used
op_add_assign
id|right
op_minus
id|MAP
c_func
(paren
id|i
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OG
id|PAGE_SIZE
op_minus
l_int|100
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;... and more&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
macro_line|#if defined( REISERFS_USE_OIDMAPF )
r_if
c_cond
(paren
id|sb_info
op_member_access_from_pointer
id|oidmap.use_file
op_logical_and
(paren
id|sb_info
op_member_access_from_pointer
id|oidmap.mapf
op_ne
l_int|NULL
)paren
)paren
(brace
id|loff_t
id|size
suffix:semicolon
id|size
op_assign
id|sb_info
op_member_access_from_pointer
id|oidmap.mapf
op_member_access_from_pointer
id|f_dentry
op_member_access_from_pointer
id|d_inode
op_member_access_from_pointer
id|i_size
suffix:semicolon
id|total_used
op_add_assign
id|size
op_div
r_sizeof
(paren
id|reiserfs_oidinterval_d_t
)paren
suffix:semicolon
id|exact
op_assign
l_int|1
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
id|exact
op_assign
(paren
id|i
op_eq
id|mapsize
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
l_string|&quot;total: &bslash;t%i [%i/%i] used: %lu [%s]&bslash;n&quot;
comma
id|i
comma
id|mapsize
comma
id|le16_to_cpu
c_func
(paren
id|rs
op_member_access_from_pointer
id|s_v1.s_oid_maxsize
)paren
comma
id|total_used
comma
id|exact
ques
c_cond
l_string|&quot;exact&quot;
suffix:colon
l_string|&quot;estimation&quot;
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_journal_in_proc
r_int
id|reiserfs_journal_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|super_block
op_star
id|sb
suffix:semicolon
r_struct
id|reiserfs_sb_info
op_star
id|r
suffix:semicolon
r_struct
id|reiserfs_super_block
op_star
id|rs
suffix:semicolon
r_struct
id|journal_params
op_star
id|jp
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
id|sb
op_assign
id|procinfo_prologue
c_func
(paren
id|to_kdev_t
c_func
(paren
(paren
r_int
)paren
id|data
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb
op_eq
l_int|NULL
)paren
(brace
r_return
op_minus
id|ENOENT
suffix:semicolon
)brace
id|r
op_assign
op_amp
id|sb-&gt;u.reiserfs_sb
suffix:semicolon
id|rs
op_assign
id|r
op_member_access_from_pointer
id|s_rs
suffix:semicolon
id|jp
op_assign
op_amp
id|rs-&gt;s_v1.s_journal
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
op_amp
id|buffer
(braket
id|len
)braket
comma
multiline_comment|/* on-disk fields */
l_string|&quot;jp_journal_1st_block: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_dev: &bslash;t%s[%x]&bslash;n&quot;
l_string|&quot;jp_journal_size: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_trans_max: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_magic: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_max_batch: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_max_commit_age: &bslash;t%i&bslash;n&quot;
l_string|&quot;jp_journal_max_trans_age: &bslash;t%i&bslash;n&quot;
multiline_comment|/* incore fields */
l_string|&quot;j_1st_reserved_block: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_state: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_trans_id: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_mount_id: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_start: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_len: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_len_alloc: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_wcount: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_bcount: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_first_unflushed_offset: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_last_flush_trans_id: &bslash;t%lu&bslash;n&quot;
l_string|&quot;j_trans_start_time: &bslash;t%li&bslash;n&quot;
l_string|&quot;j_journal_list_index: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_list_bitmap_index: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_must_wait: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_next_full_flush: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_next_async_flush: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_cnode_used: &bslash;t%i&bslash;n&quot;
l_string|&quot;j_cnode_free: &bslash;t%i&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
multiline_comment|/* reiserfs_proc_info_data_t.journal fields */
l_string|&quot;in_journal: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;in_journal_bitmap: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;in_journal_reusable: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;lock_journal: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;lock_journal_wait: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;journal_begin: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;journal_relock_writers: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;journal_relock_wcount: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;mark_dirty: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;mark_dirty_already: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;mark_dirty_notjournal: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;restore_prepared: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;prepare: &bslash;t%12lu&bslash;n&quot;
l_string|&quot;prepare_retry: &bslash;t%12lu&bslash;n&quot;
comma
id|DJP
c_func
(paren
id|jp_journal_1st_block
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_dev
)paren
op_eq
l_int|0
ques
c_cond
l_string|&quot;none&quot;
suffix:colon
id|bdevname
c_func
(paren
id|to_kdev_t
c_func
(paren
id|DJP
c_func
(paren
id|jp_journal_dev
)paren
)paren
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_dev
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_size
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_trans_max
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_magic
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_max_batch
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_max_commit_age
)paren
comma
id|DJP
c_func
(paren
id|jp_journal_max_trans_age
)paren
comma
id|JF
c_func
(paren
id|j_1st_reserved_block
)paren
comma
id|JF
c_func
(paren
id|j_state
)paren
comma
id|JF
c_func
(paren
id|j_trans_id
)paren
comma
id|JF
c_func
(paren
id|j_mount_id
)paren
comma
id|JF
c_func
(paren
id|j_start
)paren
comma
id|JF
c_func
(paren
id|j_len
)paren
comma
id|JF
c_func
(paren
id|j_len_alloc
)paren
comma
id|atomic_read
c_func
(paren
op_amp
id|r
op_member_access_from_pointer
id|s_journal
op_member_access_from_pointer
id|j_wcount
)paren
comma
id|JF
c_func
(paren
id|j_bcount
)paren
comma
id|JF
c_func
(paren
id|j_first_unflushed_offset
)paren
comma
id|JF
c_func
(paren
id|j_last_flush_trans_id
)paren
comma
id|JF
c_func
(paren
id|j_trans_start_time
)paren
comma
id|JF
c_func
(paren
id|j_journal_list_index
)paren
comma
id|JF
c_func
(paren
id|j_list_bitmap_index
)paren
comma
id|JF
c_func
(paren
id|j_must_wait
)paren
comma
id|JF
c_func
(paren
id|j_next_full_flush
)paren
comma
id|JF
c_func
(paren
id|j_next_async_flush
)paren
comma
id|JF
c_func
(paren
id|j_cnode_used
)paren
comma
id|JF
c_func
(paren
id|j_cnode_free
)paren
comma
id|SFPJ
c_func
(paren
id|in_journal
)paren
comma
id|SFPJ
c_func
(paren
id|in_journal_bitmap
)paren
comma
id|SFPJ
c_func
(paren
id|in_journal_reusable
)paren
comma
id|SFPJ
c_func
(paren
id|lock_journal
)paren
comma
id|SFPJ
c_func
(paren
id|lock_journal_wait
)paren
comma
id|SFPJ
c_func
(paren
id|journal_being
)paren
comma
id|SFPJ
c_func
(paren
id|journal_relock_writers
)paren
comma
id|SFPJ
c_func
(paren
id|journal_relock_wcount
)paren
comma
id|SFPJ
c_func
(paren
id|mark_dirty
)paren
comma
id|SFPJ
c_func
(paren
id|mark_dirty_already
)paren
comma
id|SFPJ
c_func
(paren
id|mark_dirty_notjournal
)paren
comma
id|SFPJ
c_func
(paren
id|restore_prepared
)paren
comma
id|SFPJ
c_func
(paren
id|prepare
)paren
comma
id|SFPJ
c_func
(paren
id|prepare_retry
)paren
)paren
suffix:semicolon
id|procinfo_epilogue
c_func
(paren
id|sb
)paren
suffix:semicolon
r_return
id|reiserfs_proc_tail
c_func
(paren
id|len
comma
id|buffer
comma
id|start
comma
id|offset
comma
id|count
comma
id|eof
)paren
suffix:semicolon
)brace
DECL|variable|proc_info_root
r_static
r_struct
id|proc_dir_entry
op_star
id|proc_info_root
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|proc_info_root_name
r_static
r_const
r_char
op_star
id|proc_info_root_name
op_assign
l_string|&quot;fs/reiserfs&quot;
suffix:semicolon
DECL|function|reiserfs_proc_info_init
r_int
id|reiserfs_proc_info_init
c_func
(paren
r_struct
id|super_block
op_star
id|sb
)paren
(brace
id|spin_lock_init
c_func
(paren
op_amp
id|__PINFO
c_func
(paren
id|sb
)paren
dot
id|lock
)paren
suffix:semicolon
id|sb-&gt;u.reiserfs_sb.procdir
op_assign
id|proc_mkdir
c_func
(paren
id|sb-&gt;s_id
comma
id|proc_info_root
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sb-&gt;u.reiserfs_sb.procdir
)paren
(brace
id|sb-&gt;u.reiserfs_sb.procdir
op_member_access_from_pointer
id|owner
op_assign
id|THIS_MODULE
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|reiserfs_warning
c_func
(paren
l_string|&quot;reiserfs: cannot create /proc/%s/%s&bslash;n&quot;
comma
id|proc_info_root_name
comma
id|sb-&gt;s_id
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_done
r_int
id|reiserfs_proc_info_done
c_func
(paren
r_struct
id|super_block
op_star
id|sb
)paren
(brace
id|spin_lock
c_func
(paren
op_amp
id|__PINFO
c_func
(paren
id|sb
)paren
dot
id|lock
)paren
suffix:semicolon
id|__PINFO
c_func
(paren
id|sb
)paren
dot
id|exiting
op_assign
l_int|1
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|__PINFO
c_func
(paren
id|sb
)paren
dot
id|lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|proc_info_root
)paren
(brace
id|remove_proc_entry
c_func
(paren
id|sb-&gt;s_id
comma
id|proc_info_root
)paren
suffix:semicolon
id|sb-&gt;u.reiserfs_sb.procdir
op_assign
l_int|NULL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Create /proc/fs/reiserfs/DEV/name and attach read procedure @func&n;   to it.  Other parts of reiserfs use this function to make their&n;   per-device statistics available via /proc */
DECL|function|reiserfs_proc_register
r_struct
id|proc_dir_entry
op_star
id|reiserfs_proc_register
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_char
op_star
id|name
comma
id|read_proc_t
op_star
id|func
)paren
(brace
r_return
(paren
id|sb-&gt;u.reiserfs_sb.procdir
)paren
ques
c_cond
id|create_proc_read_entry
(paren
id|name
comma
l_int|0
comma
id|sb-&gt;u.reiserfs_sb.procdir
comma
id|func
comma
(paren
r_void
op_star
)paren
id|kdev_t_to_nr
c_func
(paren
id|sb
op_member_access_from_pointer
id|s_dev
)paren
)paren
suffix:colon
l_int|NULL
suffix:semicolon
)brace
DECL|function|reiserfs_proc_unregister
r_void
id|reiserfs_proc_unregister
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_const
r_char
op_star
id|name
)paren
(brace
id|remove_proc_entry
c_func
(paren
id|name
comma
id|sb-&gt;u.reiserfs_sb.procdir
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_proc_register_global
r_struct
id|proc_dir_entry
op_star
id|reiserfs_proc_register_global
c_func
(paren
r_char
op_star
id|name
comma
id|read_proc_t
op_star
id|func
)paren
(brace
r_return
(paren
id|proc_info_root
)paren
ques
c_cond
id|create_proc_read_entry
c_func
(paren
id|name
comma
l_int|0
comma
id|proc_info_root
comma
id|func
comma
l_int|NULL
)paren
suffix:colon
l_int|NULL
suffix:semicolon
)brace
DECL|function|reiserfs_proc_unregister_global
r_void
id|reiserfs_proc_unregister_global
c_func
(paren
r_const
r_char
op_star
id|name
)paren
(brace
id|remove_proc_entry
c_func
(paren
id|name
comma
id|proc_info_root
)paren
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_global_init
r_int
id|reiserfs_proc_info_global_init
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|proc_info_root
op_eq
l_int|NULL
)paren
(brace
id|proc_info_root
op_assign
id|proc_mkdir
c_func
(paren
id|proc_info_root_name
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|proc_info_root
)paren
(brace
id|proc_info_root
op_member_access_from_pointer
id|owner
op_assign
id|THIS_MODULE
suffix:semicolon
)brace
r_else
(brace
id|reiserfs_warning
c_func
(paren
l_string|&quot;reiserfs: cannot create /proc/%s&bslash;n&quot;
comma
id|proc_info_root_name
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_global_done
r_int
id|reiserfs_proc_info_global_done
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|proc_info_root
op_ne
l_int|NULL
)paren
(brace
id|proc_info_root
op_assign
l_int|NULL
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|proc_info_root_name
comma
l_int|0
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* REISERFS_PROC_INFO */
macro_line|#else
DECL|function|reiserfs_proc_info_init
r_int
id|reiserfs_proc_info_init
c_func
(paren
r_struct
id|super_block
op_star
id|sb
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_done
r_int
id|reiserfs_proc_info_done
c_func
(paren
r_struct
id|super_block
op_star
id|sb
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_proc_register
r_struct
id|proc_dir_entry
op_star
id|reiserfs_proc_register
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_char
op_star
id|name
comma
id|read_proc_t
op_star
id|func
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|reiserfs_proc_unregister
r_void
id|reiserfs_proc_unregister
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_const
r_char
op_star
id|name
)paren
(brace
suffix:semicolon
)brace
DECL|function|reiserfs_proc_register_global
r_struct
id|proc_dir_entry
op_star
id|reiserfs_proc_register_global
c_func
(paren
r_char
op_star
id|name
comma
id|read_proc_t
op_star
id|func
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|reiserfs_proc_unregister_global
r_void
id|reiserfs_proc_unregister_global
c_func
(paren
r_const
r_char
op_star
id|name
)paren
(brace
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_global_init
r_int
id|reiserfs_proc_info_global_init
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_proc_info_global_done
r_int
id|reiserfs_proc_info_global_done
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_global_version_in_proc
r_int
id|reiserfs_global_version_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_version_in_proc
r_int
id|reiserfs_version_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_super_in_proc
r_int
id|reiserfs_super_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_per_level_in_proc
r_int
id|reiserfs_per_level_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_bitmap_in_proc
r_int
id|reiserfs_bitmap_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_on_disk_super_in_proc
r_int
id|reiserfs_on_disk_super_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_oidmap_in_proc
r_int
id|reiserfs_oidmap_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reiserfs_journal_in_proc
r_int
id|reiserfs_journal_in_proc
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* REISERFS_PROC_INFO */
macro_line|#endif
multiline_comment|/*&n; * $Log: procfs.c,v $&n; * Revision 1.1.8.2  2001/07/15 17:08:42  god&n; *  . use get_super() in procfs.c&n; *  . remove remove_save_link() from reiserfs_do_truncate()&n; *&n; * I accept terms and conditions stated in the Legal Agreement&n; * (available at http://www.namesys.com/legalese.html)&n; *&n; * Revision 1.1.8.1  2001/07/11 16:48:50  god&n; * proc info support&n; *&n; * I accept terms and conditions stated in the Legal Agreement&n; * (available at http://www.namesys.com/legalese.html)&n; *&n; */
multiline_comment|/* &n; * Make Linus happy.&n; * Local variables:&n; * c-indentation-style: &quot;K&amp;R&quot;&n; * mode-name: &quot;LC&quot;&n; * c-basic-offset: 8&n; * tab-width: 8&n; * End:&n; */
eof
