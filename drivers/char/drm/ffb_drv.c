multiline_comment|/* $Id: ffb_drv.c,v 1.16 2001/10/18 16:00:24 davem Exp $&n; * ffb_drv.c: Creator/Creator3D direct rendering driver.&n; *&n; * Copyright (C) 2000 David S. Miller (davem@redhat.com)&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;ffb.h&quot;
macro_line|#include &quot;drmP.h&quot;
macro_line|#include &quot;ffb_drv.h&quot;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;asm/shmparam.h&gt;
macro_line|#include &lt;asm/oplib.h&gt;
macro_line|#include &lt;asm/upa.h&gt;
DECL|macro|DRIVER_AUTHOR
mdefine_line|#define DRIVER_AUTHOR&t;&t;&quot;David S. Miller&quot;
DECL|macro|DRIVER_NAME
mdefine_line|#define DRIVER_NAME&t;&t;&quot;ffb&quot;
DECL|macro|DRIVER_DESC
mdefine_line|#define DRIVER_DESC&t;&t;&quot;Creator/Creator3D&quot;
DECL|macro|DRIVER_DATE
mdefine_line|#define DRIVER_DATE&t;&t;&quot;20000517&quot;
DECL|macro|DRIVER_MAJOR
mdefine_line|#define DRIVER_MAJOR&t;&t;0
DECL|macro|DRIVER_MINOR
mdefine_line|#define DRIVER_MINOR&t;&t;0
DECL|macro|DRIVER_PATCHLEVEL
mdefine_line|#define DRIVER_PATCHLEVEL&t;1
DECL|struct|_ffb_position_t
r_typedef
r_struct
id|_ffb_position_t
(brace
DECL|member|node
r_int
id|node
suffix:semicolon
DECL|member|root
r_int
id|root
suffix:semicolon
DECL|typedef|ffb_position_t
)brace
id|ffb_position_t
suffix:semicolon
DECL|variable|ffb_position
r_static
id|ffb_position_t
op_star
id|ffb_position
suffix:semicolon
DECL|function|get_ffb_type
r_static
r_void
id|get_ffb_type
c_func
(paren
id|ffb_dev_priv_t
op_star
id|ffb_priv
comma
r_int
id|instance
)paren
(brace
r_volatile
r_int
r_char
op_star
id|strap_bits
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
id|strap_bits
op_assign
(paren
r_volatile
r_int
r_char
op_star
)paren
(paren
id|ffb_priv-&gt;card_phys_base
op_plus
l_int|0x00200000UL
)paren
suffix:semicolon
multiline_comment|/* Don&squot;t ask, you have to read the value twice for whatever&n;&t; * reason to get correct contents.&n;&t; */
id|val
op_assign
id|upa_readb
c_func
(paren
id|strap_bits
)paren
suffix:semicolon
id|val
op_assign
id|upa_readb
c_func
(paren
id|strap_bits
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|val
op_amp
l_int|0x78
)paren
(brace
r_case
(paren
l_int|0x0
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x0
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb1_prototype
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB1 pre-FCS prototype&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x0
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x1
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb1_standard
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB1&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x0
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x3
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb1_speedsort
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB1-SpeedSort&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x1
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x0
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_prototype
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB2/vertical pre-FCS prototype&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x1
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x1
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_vertical
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB2/vertical&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x1
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x2
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_vertical_plus
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB2+/vertical&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x2
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x0
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_horizontal
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB2/horizontal&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
l_int|0x2
op_lshift
l_int|5
)paren
op_or
(paren
l_int|0x2
op_lshift
l_int|3
)paren
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_horizontal
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Detected FFB2+/horizontal&bslash;n&quot;
comma
id|instance
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|ffb_priv-&gt;ffb_type
op_assign
id|ffb2_vertical
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ffb%d: Unknown boardID[%08x], assuming FFB2&bslash;n&quot;
comma
id|instance
comma
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
)brace
DECL|function|ffb_apply_upa_parent_ranges
r_static
r_void
id|ffb_apply_upa_parent_ranges
c_func
(paren
r_int
id|parent
comma
r_struct
id|linux_prom64_registers
op_star
id|regs
)paren
(brace
r_struct
id|linux_prom64_ranges
id|ranges
(braket
id|PROMREG_MAX
)braket
suffix:semicolon
r_char
id|name
(braket
l_int|128
)braket
suffix:semicolon
r_int
id|len
comma
id|i
suffix:semicolon
id|prom_getproperty
c_func
(paren
id|parent
comma
l_string|&quot;name&quot;
comma
id|name
comma
r_sizeof
(paren
id|name
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|name
comma
l_string|&quot;upa&quot;
)paren
op_ne
l_int|0
)paren
r_return
suffix:semicolon
id|len
op_assign
id|prom_getproperty
c_func
(paren
id|parent
comma
l_string|&quot;ranges&quot;
comma
(paren
r_void
op_star
)paren
id|ranges
comma
r_sizeof
(paren
id|ranges
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
op_le
l_int|0
)paren
r_return
suffix:semicolon
id|len
op_div_assign
r_sizeof
(paren
r_struct
id|linux_prom64_ranges
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|len
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|linux_prom64_ranges
op_star
id|rng
op_assign
op_amp
id|ranges
(braket
id|i
)braket
suffix:semicolon
id|u64
id|phys_addr
op_assign
id|regs-&gt;phys_addr
suffix:semicolon
r_if
c_cond
(paren
id|phys_addr
op_ge
id|rng-&gt;ot_child_base
op_logical_and
id|phys_addr
OL
(paren
id|rng-&gt;ot_child_base
op_plus
id|rng-&gt;or_size
)paren
)paren
(brace
id|regs-&gt;phys_addr
op_sub_assign
id|rng-&gt;ot_child_base
suffix:semicolon
id|regs-&gt;phys_addr
op_add_assign
id|rng-&gt;ot_parent_base
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
DECL|function|ffb_init_one
r_static
r_int
id|ffb_init_one
c_func
(paren
id|drm_device_t
op_star
id|dev
comma
r_int
id|prom_node
comma
r_int
id|parent_node
comma
r_int
id|instance
)paren
(brace
r_struct
id|linux_prom64_registers
id|regs
(braket
l_int|2
op_star
id|PROMREG_MAX
)braket
suffix:semicolon
id|ffb_dev_priv_t
op_star
id|ffb_priv
op_assign
(paren
id|ffb_dev_priv_t
op_star
)paren
id|dev-&gt;dev_private
suffix:semicolon
r_int
id|i
suffix:semicolon
id|ffb_priv-&gt;prom_node
op_assign
id|prom_node
suffix:semicolon
r_if
c_cond
(paren
id|prom_getproperty
c_func
(paren
id|ffb_priv-&gt;prom_node
comma
l_string|&quot;reg&quot;
comma
(paren
r_void
op_star
)paren
id|regs
comma
r_sizeof
(paren
id|regs
)paren
)paren
op_le
l_int|0
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|ffb_apply_upa_parent_ranges
c_func
(paren
id|parent_node
comma
op_amp
id|regs
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|ffb_priv-&gt;card_phys_base
op_assign
id|regs
(braket
l_int|0
)braket
dot
id|phys_addr
suffix:semicolon
id|ffb_priv-&gt;regs
op_assign
(paren
id|ffb_fbcPtr
)paren
(paren
id|regs
(braket
l_int|0
)braket
dot
id|phys_addr
op_plus
l_int|0x00600000UL
)paren
suffix:semicolon
id|get_ffb_type
c_func
(paren
id|ffb_priv
comma
id|instance
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|FFB_MAX_CTXS
suffix:semicolon
id|i
op_increment
)paren
id|ffb_priv-&gt;hw_state
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ffb_find_map
r_static
id|drm_map_t
op_star
id|ffb_find_map
c_func
(paren
r_struct
id|file
op_star
id|filp
comma
r_int
r_int
id|off
)paren
(brace
id|drm_file_t
op_star
id|priv
op_assign
id|filp-&gt;private_data
suffix:semicolon
id|drm_device_t
op_star
id|dev
suffix:semicolon
id|drm_map_list_t
op_star
id|r_list
suffix:semicolon
r_struct
id|list_head
op_star
id|list
suffix:semicolon
id|drm_map_t
op_star
id|map
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|priv
op_logical_or
(paren
id|dev
op_assign
id|priv-&gt;dev
)paren
op_eq
l_int|NULL
)paren
r_return
l_int|NULL
suffix:semicolon
id|list_for_each
c_func
(paren
id|list
comma
op_amp
id|dev-&gt;maplist-&gt;head
)paren
(brace
r_int
r_int
id|uoff
suffix:semicolon
id|r_list
op_assign
(paren
id|drm_map_list_t
op_star
)paren
id|list
suffix:semicolon
id|map
op_assign
id|r_list-&gt;map
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|map
)paren
r_continue
suffix:semicolon
id|uoff
op_assign
(paren
id|map-&gt;offset
op_amp
l_int|0xffffffff
)paren
suffix:semicolon
r_if
c_cond
(paren
id|uoff
op_eq
id|off
)paren
r_return
id|map
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|ffb_get_unmapped_area
r_int
r_int
id|ffb_get_unmapped_area
c_func
(paren
r_struct
id|file
op_star
id|filp
comma
r_int
r_int
id|hint
comma
r_int
r_int
id|len
comma
r_int
r_int
id|pgoff
comma
r_int
r_int
id|flags
)paren
(brace
id|drm_map_t
op_star
id|map
op_assign
id|ffb_find_map
c_func
(paren
id|filp
comma
id|pgoff
op_lshift
id|PAGE_SHIFT
)paren
suffix:semicolon
r_int
r_int
id|addr
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|map
)paren
r_return
id|get_unmapped_area
c_func
(paren
l_int|NULL
comma
id|hint
comma
id|len
comma
id|pgoff
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;type
op_eq
id|_DRM_FRAME_BUFFER
op_logical_or
id|map-&gt;type
op_eq
id|_DRM_REGISTERS
)paren
(brace
macro_line|#ifdef HAVE_ARCH_FB_UNMAPPED_AREA
id|addr
op_assign
id|get_fb_unmapped_area
c_func
(paren
id|filp
comma
id|hint
comma
id|len
comma
id|pgoff
comma
id|flags
)paren
suffix:semicolon
macro_line|#else
id|addr
op_assign
id|get_unmapped_area
c_func
(paren
l_int|NULL
comma
id|hint
comma
id|len
comma
id|pgoff
comma
id|flags
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
id|map-&gt;type
op_eq
id|_DRM_SHM
op_logical_and
id|SHMLBA
OG
id|PAGE_SIZE
)paren
(brace
r_int
r_int
id|slack
op_assign
id|SHMLBA
op_minus
id|PAGE_SIZE
suffix:semicolon
id|addr
op_assign
id|get_unmapped_area
c_func
(paren
l_int|NULL
comma
id|hint
comma
id|len
op_plus
id|slack
comma
id|pgoff
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|addr
op_amp
op_complement
id|PAGE_MASK
)paren
)paren
(brace
r_int
r_int
id|kvirt
op_assign
(paren
r_int
r_int
)paren
id|map-&gt;handle
suffix:semicolon
r_if
c_cond
(paren
(paren
id|kvirt
op_amp
(paren
id|SHMLBA
op_minus
l_int|1
)paren
)paren
op_ne
(paren
id|addr
op_amp
(paren
id|SHMLBA
op_minus
l_int|1
)paren
)paren
)paren
(brace
r_int
r_int
id|koff
comma
id|aoff
suffix:semicolon
id|koff
op_assign
id|kvirt
op_amp
(paren
id|SHMLBA
op_minus
l_int|1
)paren
suffix:semicolon
id|aoff
op_assign
id|addr
op_amp
(paren
id|SHMLBA
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|koff
OL
id|aoff
)paren
id|koff
op_add_assign
id|SHMLBA
suffix:semicolon
id|addr
op_add_assign
(paren
id|koff
op_minus
id|aoff
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|addr
op_assign
id|get_unmapped_area
c_func
(paren
l_int|NULL
comma
id|hint
comma
id|len
comma
id|pgoff
comma
id|flags
)paren
suffix:semicolon
)brace
r_return
id|addr
suffix:semicolon
)brace
multiline_comment|/* This functions must be here since it references drm_numdevs)&n; * which drm_drv.h declares.&n; */
DECL|function|ffb_presetup
r_static
r_int
id|ffb_presetup
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|ffb_dev_priv_t
op_star
id|ffb_priv
suffix:semicolon
id|drm_device_t
op_star
id|temp_dev
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Check for the case where no device was found. */
r_if
c_cond
(paren
id|ffb_position
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
multiline_comment|/* Find our instance number by finding our device in dev structure */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|drm_numdevs
suffix:semicolon
id|i
op_increment
)paren
(brace
id|temp_dev
op_assign
op_amp
(paren
id|drm_device
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp_dev
op_eq
id|dev
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|i
op_eq
id|drm_numdevs
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|ffb_priv
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
id|ffb_dev_priv_t
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ffb_priv
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|memset
c_func
(paren
id|ffb_priv
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|ffb_priv
)paren
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
id|ffb_priv
suffix:semicolon
id|ret
op_assign
id|ffb_init_one
c_func
(paren
id|dev
comma
id|ffb_position
(braket
id|i
)braket
dot
id|node
comma
id|ffb_position
(braket
id|i
)braket
dot
id|root
comma
id|i
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|ffb_driver_release
r_static
r_void
id|ffb_driver_release
c_func
(paren
id|drm_device_t
op_star
id|dev
comma
r_struct
id|file
op_star
id|filp
)paren
(brace
id|ffb_dev_priv_t
op_star
id|fpriv
op_assign
(paren
id|ffb_dev_priv_t
op_star
)paren
id|dev-&gt;dev_private
suffix:semicolon
r_int
id|context
op_assign
id|_DRM_LOCKING_CONTEXT
c_func
(paren
id|dev-&gt;lock.hw_lock-&gt;lock
)paren
suffix:semicolon
r_int
id|idx
suffix:semicolon
id|idx
op_assign
id|context
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|fpriv
op_logical_and
id|context
op_ne
id|DRM_KERNEL_CONTEXT
op_logical_and
id|fpriv-&gt;hw_state
(braket
id|idx
)braket
op_ne
l_int|NULL
)paren
(brace
id|kfree
c_func
(paren
id|fpriv-&gt;hw_state
(braket
id|idx
)braket
)paren
suffix:semicolon
id|fpriv-&gt;hw_state
(braket
id|idx
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|ffb_driver_pretakedown
r_static
r_void
id|ffb_driver_pretakedown
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;dev_private
)paren
id|kfree
c_func
(paren
id|dev-&gt;dev_private
)paren
suffix:semicolon
)brace
DECL|function|ffb_driver_postcleanup
r_static
r_int
id|ffb_driver_postcleanup
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
r_if
c_cond
(paren
id|ffb_position
op_ne
l_int|NULL
)paren
id|kfree
c_func
(paren
id|ffb_position
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ffb_driver_kernel_context_switch_unlock
r_static
r_void
id|ffb_driver_kernel_context_switch_unlock
c_func
(paren
r_struct
id|drm_device
op_star
id|dev
comma
id|drm_lock_t
op_star
id|lock
)paren
(brace
id|dev-&gt;lock.filp
op_assign
l_int|0
suffix:semicolon
(brace
id|__volatile__
r_int
r_int
op_star
id|plock
op_assign
op_amp
id|dev-&gt;lock.hw_lock-&gt;lock
suffix:semicolon
r_int
r_int
id|old
comma
r_new
comma
id|prev
comma
id|ctx
suffix:semicolon
id|ctx
op_assign
id|lock-&gt;context
suffix:semicolon
r_do
(brace
id|old
op_assign
op_star
id|plock
suffix:semicolon
r_new
op_assign
id|ctx
suffix:semicolon
id|prev
op_assign
id|cmpxchg
c_func
(paren
id|plock
comma
id|old
comma
r_new
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|prev
op_ne
id|old
)paren
suffix:semicolon
)brace
id|wake_up_interruptible
c_func
(paren
op_amp
id|dev-&gt;lock.lock_queue
)paren
suffix:semicolon
)brace
DECL|function|ffb_driver_get_map_ofs
r_static
r_int
r_int
id|ffb_driver_get_map_ofs
c_func
(paren
id|drm_map_t
op_star
id|map
)paren
(brace
r_return
(paren
id|map-&gt;offset
op_amp
l_int|0xffffffff
)paren
suffix:semicolon
)brace
DECL|function|ffb_driver_get_reg_ofs
r_static
r_int
r_int
id|ffb_driver_get_reg_ofs
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|ffb_dev_priv_t
op_star
id|ffb_priv
op_assign
(paren
id|ffb_dev_priv_t
op_star
)paren
id|dev-&gt;dev_private
suffix:semicolon
r_if
c_cond
(paren
id|ffb_priv
)paren
r_return
id|ffb_priv-&gt;card_phys_base
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ffb_driver_register_fns
r_void
id|ffb_driver_register_fns
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|ffb_set_context_ioctls
c_func
(paren
)paren
suffix:semicolon
id|DRM
c_func
(paren
id|fops
)paren
dot
id|get_unmapped_area
op_assign
id|ffb_get_unmapped_area
suffix:semicolon
id|dev-&gt;fn_tbl.release
op_assign
id|ffb_driver_release
suffix:semicolon
id|dev-&gt;fn_tbl.presetup
op_assign
id|ffb_presetup
suffix:semicolon
id|dev-&gt;fn_tbl.pretakedown
op_assign
id|ffb_driver_pretakedown
suffix:semicolon
id|dev-&gt;fn_tbl.postcleanup
op_assign
id|ffb_driver_postcleanup
suffix:semicolon
id|dev-&gt;fn_tbl.kernel_context_switch
op_assign
id|ffb_context_switch
suffix:semicolon
id|dev-&gt;fn_tbl.kernel_context_switch_unlock
op_assign
id|ffb_driver_kernel_context_switch_unlock
suffix:semicolon
id|dev-&gt;fn_tbl.get_map_ofs
op_assign
id|ffb_driver_get_map_ofs
suffix:semicolon
id|dev-&gt;fn_tbl.get_reg_ofs
op_assign
id|ffb_driver_get_reg_ofs
suffix:semicolon
)brace
eof
