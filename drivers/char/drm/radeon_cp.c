multiline_comment|/* radeon_cp.c -- CP support for Radeon -*- linux-c -*-&n; *&n; * Copyright 2000 Precision Insight, Inc., Cedar Park, Texas.&n; * Copyright 2000 VA Linux Systems, Inc., Fremont, California.&n; * All Rights Reserved.&n; *&n; * Permission is hereby granted, free of charge, to any person obtaining a&n; * copy of this software and associated documentation files (the &quot;Software&quot;),&n; * to deal in the Software without restriction, including without limitation&n; * the rights to use, copy, modify, merge, publish, distribute, sublicense,&n; * and/or sell copies of the Software, and to permit persons to whom the&n; * Software is furnished to do so, subject to the following conditions:&n; *&n; * The above copyright notice and this permission notice (including the next&n; * paragraph) shall be included in all copies or substantial portions of the&n; * Software.&n; *&n; * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR&n; * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,&n; * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL&n; * PRECISION INSIGHT AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR&n; * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,&n; * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER&n; * DEALINGS IN THE SOFTWARE.&n; *&n; * Authors:&n; *    Kevin E. Martin &lt;martin@valinux.com&gt;&n; *    Gareth Hughes &lt;gareth@valinux.com&gt;&n; */
macro_line|#include &quot;drmP.h&quot;
macro_line|#include &quot;drm.h&quot;
macro_line|#include &quot;radeon_drm.h&quot;
macro_line|#include &quot;radeon_drv.h&quot;
DECL|macro|RADEON_FIFO_DEBUG
mdefine_line|#define RADEON_FIFO_DEBUG&t;0
multiline_comment|/* CP microcode (from ATI) */
DECL|variable|R200_cp_microcode
r_static
id|u32
id|R200_cp_microcode
(braket
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|0x21007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x20007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000000ab
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000000af
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x66544a49
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x49494174
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x54517d83
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x498d8b64
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x49494949
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x49da493c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x49989898
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xd34949d5
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x9dc90e11
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xce9b9b9b
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000f0000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x352e232c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000013
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000f0000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x352e272c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000f0001
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x3239362f
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000077ef
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000020
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000020
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000020
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00000016
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0003802a
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000016
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000077e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000037e1
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e1
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x000077e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000077e1
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000077e1
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0xffffffff
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x10000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0003802a
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e0
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00007675
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007676
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007677
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007678
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0003802b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002676
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007677
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007678
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0000002e
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x0000002e
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0000002f
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x0000002f
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x01605000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00098000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x64c0603d
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00080000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0400251d
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007580
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00067581
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002580
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00067581
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000046
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00019000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00011055
comma
l_int|0x00000014
)brace
comma
(brace
l_int|0x00000055
comma
l_int|0x00000012
)brace
comma
(brace
l_int|0x0400250f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000504a
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00007565
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007566
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000051
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x01e655b4
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x4401b0dc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01c110dc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x2666705d
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040c2565
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000005d
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x04002564
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007566
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000054
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00401060
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x00101000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000d80ff
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00800063
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x000f9000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000e00ff
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00000080
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x00000054
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00007576
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00009000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00041000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0c00350e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00049000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00051000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01e785f8
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600073
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00007563
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x006075f0
comma
l_int|0x00000021
)brace
comma
(brace
l_int|0x20007068
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00005068
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00007576
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007577
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600076
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x006075f0
comma
l_int|0x00000021
)brace
comma
(brace
l_int|0x000075f8
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000076
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000a750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0020750f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600079
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00007570
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007571
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007572
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007568
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000084
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00058000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0c607562
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000086
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00600085
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x400070dd
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380dd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000093
comma
l_int|0x0000001c
)brace
comma
(brace
l_int|0x00065095
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040025bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061096
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040075bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000075bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00090000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00090000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000d8002
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007821
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007800
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00007821
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007800
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x01665000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000a0000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000671cc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0286f1cd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000a3
comma
l_int|0x00000010
)brace
comma
(brace
l_int|0x21007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000000aa
comma
l_int|0x0000001c
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000a0000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000b0000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x38067000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000a00a6
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x20007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x01200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x20077000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x20007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0120751b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x8040750a
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x8040750b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00110000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380dd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000bd
comma
l_int|0x0000001c
)brace
comma
(brace
l_int|0x00061096
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x844075bd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061095
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x840075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061096
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x844075bc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000c0
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x804075bd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x800075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x804075bc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00108000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01400000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x006000c4
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x20c07000
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x000000c6
comma
l_int|0x00000012
)brace
comma
(brace
l_int|0x00800000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0080751d
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x000025bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000040c0
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000775c
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00661000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0460275d
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00007999
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00661000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0460299b
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x01e00830
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x21007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00038042
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000075e1
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000001
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380d9
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04007394
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
)brace
suffix:semicolon
DECL|variable|radeon_cp_microcode
r_static
id|u32
id|radeon_cp_microcode
(braket
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|0x21007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x20007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000000b4
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000000b8
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x6f5b4d4c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4c4c427f
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x5b568a92
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4ca09c6d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xad4c4c4c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4ce1af3d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xd8afafaf
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xd64c4cdc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4cd10d10
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000f0000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x362f242d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000012
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000f0000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x362f282d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380e7
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002c97
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000f0001
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0x333a3730
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000077ef
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000021
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000021
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000021
comma
l_int|0x0000001a
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0x0000001e
)brace
comma
(brace
l_int|0x00000017
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0003802b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000017
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000077e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000037e1
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e1
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x000077e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000077e1
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000077e1
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0xffffffff
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x10000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0003802b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040067e0
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00007675
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007676
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007677
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007678
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0003802c
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002676
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007677
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007678
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0000002f
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x0000002f
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00000030
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x00000030
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x01605000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00098000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x64c0603e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00080000
comma
l_int|0x00000016
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0400251d
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007580
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00067581
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002580
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00067581
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000049
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00019000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00011055
comma
l_int|0x00000014
)brace
comma
(brace
l_int|0x00000055
comma
l_int|0x00000012
)brace
comma
(brace
l_int|0x0400250f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000504f
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007565
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007566
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000058
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01e655b4
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x4401b0e4
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01c110e4
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x26667066
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040c2565
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000066
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x04002564
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007566
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000005d
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00401069
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x00101000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000d80ff
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0080006c
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x000f9000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000e00ff
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0000008f
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x0000005b
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007576
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00065000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00009000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00041000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0c00350e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00049000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00051000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01e785f8
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0060007e
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00007563
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x006075f0
comma
l_int|0x00000021
)brace
comma
(brace
l_int|0x20007073
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00005073
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007576
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007577
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0000750f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600083
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x006075f0
comma
l_int|0x00000021
)brace
comma
(brace
l_int|0x000075f8
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000083
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000a750e
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0020750f
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600086
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00007570
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007571
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007572
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007568
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000095
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00058000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0c607562
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00000097
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00600096
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x400070e5
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380e6
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025c5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380e5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000a8
comma
l_int|0x0000001c
)brace
comma
(brace
l_int|0x000650aa
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040025bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000610ab
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x040075bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000075bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00090000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00090000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000d8002
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x00007832
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380e7
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002c97
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007820
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007821
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00007800
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x01200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x20077000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01200000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x20007000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00061000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0120751b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x8040750a
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x8040750b
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00110000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380e5
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000c6
comma
l_int|0x0000001c
)brace
comma
(brace
l_int|0x000610ab
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x844075bd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000610aa
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x840075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000610ab
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x844075bc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000000c9
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x804075bd
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x800075bb
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x804075bc
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00108000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x01400000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x006000cd
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x20c07000
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x000000cf
comma
l_int|0x00000012
)brace
comma
(brace
l_int|0x00800000
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0x0080751d
comma
l_int|0x00000006
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000775c
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00a05000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00661000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x0460275d
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x00004000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x01e00830
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x21007000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x6464614d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x69687420
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000073
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000380d0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x040025e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x000075e1
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000001
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000380e0
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x04002394
comma
l_int|0x00000002
)brace
comma
(brace
l_int|0x00005000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000008
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000004
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
)brace
suffix:semicolon
DECL|variable|R300_cp_microcode
r_static
id|u32
id|R300_cp_microcode
(braket
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_int|0x4200e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4000e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000000af
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x000000b3
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x6c5a504f
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4f4f497a
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x5a578288
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4f91906a
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4f4f4f4f
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4fe24f44
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4f9c9c9c
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xdc4f4fde
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xa1cd4f4f
comma
l_int|0000000000
)brace
comma
(brace
l_int|0xd29d9d9d
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x4f0f9fd7
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000ca000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0012
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e8b4
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0014
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e8b6
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0016
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e854
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0018
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e855
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d001a
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e856
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d001c
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e857
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d001e
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e824
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0020
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e825
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0022
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000e830
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0024
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f0c0
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0026
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f0c1
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0028
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f041
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d002a
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f184
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d002c
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f185
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d002e
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f186
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0030
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f187
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0032
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f180
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0034
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f393
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0036
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f38a
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000d0038
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x0000f38e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e821
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000043
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x00cce800
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001b0001
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08004800
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001b0001
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08004800
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001b0001
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08004800
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000003a
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000a000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x02c0a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000ca000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00130000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000c2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0xc980c045
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x2000451d
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e580
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000ce581
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08004580
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000ce581
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000004c
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000a000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000c2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e50e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00032000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00022056
comma
l_int|0x00000028
)brace
comma
(brace
l_int|0x00000056
comma
l_int|0x00000024
)brace
comma
(brace
l_int|0x0800450f
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000a050
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000e565
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e566
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000057
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x03cca5b4
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x05432000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00022000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x4ccce063
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x08274565
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000063
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x08004564
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e566
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000005a
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x00802066
comma
l_int|0x00000010
)brace
comma
(brace
l_int|0x00202000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001b00ff
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x01000069
comma
l_int|0x00000010
)brace
comma
(brace
l_int|0x001f2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001c00ff
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0000000000
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00000085
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x0000005a
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000e576
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000ca000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00012000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00082000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x1800650e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00092000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000a2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000f0000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00400000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000079
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x0000e563
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00c0e5f9
comma
l_int|0x000000c2
)brace
comma
(brace
l_int|0x0000006e
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000a06e
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000e576
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e577
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e50e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e50f
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000007c
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x00c0e5f9
comma
l_int|0x000000c2
)brace
comma
(brace
l_int|0x0000007c
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0014e50e
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0040e50f
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00c0007f
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000e570
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e571
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e572
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x0000a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e568
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000c2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000089
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x000b0000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x18c0e562
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000008b
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x00c0008a
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x000700e4
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00000097
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x000ca099
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x080045bb
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000c209a
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x0800e5bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000e5bb
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e5bc
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00120000
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x00120000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001b0002
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x0000a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e821
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e800
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000e821
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e82e
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x02cca000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00140000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000ce1cc
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x050de1cd
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000000a7
comma
l_int|0x00000020
)brace
comma
(brace
l_int|0x4200e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000000ae
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x000ca000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00140000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000c2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00160000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x700ce000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x001400aa
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x4000e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x02400000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x400ee000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x02400000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x4000e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000c2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0240e51b
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0080e50a
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x0080e50b
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x00220000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000700e4
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000000c1
comma
l_int|0x00000038
)brace
comma
(brace
l_int|0x000c209a
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x0880e5bd
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x000c2099
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x0800e5bb
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x000c209a
comma
l_int|0x00000030
)brace
comma
(brace
l_int|0x0880e5bc
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x000000c4
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0080e5bd
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x0000e5bb
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x0080e5bc
comma
l_int|0x00000005
)brace
comma
(brace
l_int|0x00210000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x02800000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00c000c8
comma
l_int|0x00000018
)brace
comma
(brace
l_int|0x4180e000
comma
l_int|0x00000040
)brace
comma
(brace
l_int|0x000000ca
comma
l_int|0x00000024
)brace
comma
(brace
l_int|0x01000000
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x0100e51d
comma
l_int|0x0000000c
)brace
comma
(brace
l_int|0x000045bb
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x000080c4
comma
l_int|0x00000008
)brace
comma
(brace
l_int|0x0000f3ce
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00cc2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08c053cf
comma
l_int|0x00000040
)brace
comma
(brace
l_int|0x00008000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000f3d2
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00cc2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08c053d3
comma
l_int|0x00000040
)brace
comma
(brace
l_int|0x00008000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000f39d
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0140a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x00cc2000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x08c0539e
comma
l_int|0x00000040
)brace
comma
(brace
l_int|0x00008000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x03c00830
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x4200e000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x0000a000
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x200045e0
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0000e5e1
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x00000001
comma
l_int|0000000000
)brace
comma
(brace
l_int|0x000700e1
comma
l_int|0x00000004
)brace
comma
(brace
l_int|0x0800e394
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
(brace
l_int|0000000000
comma
l_int|0000000000
)brace
comma
)brace
suffix:semicolon
DECL|function|RADEON_READ_PLL
r_int
id|RADEON_READ_PLL
c_func
(paren
id|drm_device_t
op_star
id|dev
comma
r_int
id|addr
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|RADEON_WRITE8
c_func
(paren
id|RADEON_CLOCK_CNTL_INDEX
comma
id|addr
op_amp
l_int|0x1f
)paren
suffix:semicolon
r_return
id|RADEON_READ
c_func
(paren
id|RADEON_CLOCK_CNTL_DATA
)paren
suffix:semicolon
)brace
macro_line|#if RADEON_FIFO_DEBUG
DECL|function|radeon_status
r_static
r_void
id|radeon_status
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s:&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;RBBM_STATUS = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_STATUS
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CP_RB_RTPR = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_RPTR
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CP_RB_WTPR = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_WPTR
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;AIC_CNTL = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_CNTL
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;AIC_STAT = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_STAT
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;AIC_PT_BASE = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_PT_BASE
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;TLB_ADDR = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_TLB_ADDR
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;TLB_DATA = 0x%08x&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_TLB_DATA
)paren
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ================================================================&n; * Engine, FIFO control&n; */
DECL|function|radeon_do_pixcache_flush
r_static
r_int
id|radeon_do_pixcache_flush
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|u32
id|tmp
suffix:semicolon
r_int
id|i
suffix:semicolon
id|dev_priv-&gt;stats.boxes
op_or_assign
id|RADEON_BOX_WAIT_IDLE
suffix:semicolon
id|tmp
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_RB2D_DSTCACHE_CTLSTAT
)paren
suffix:semicolon
id|tmp
op_or_assign
id|RADEON_RB2D_DC_FLUSH_ALL
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_RB2D_DSTCACHE_CTLSTAT
comma
id|tmp
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|RADEON_READ
c_func
(paren
id|RADEON_RB2D_DSTCACHE_CTLSTAT
)paren
op_amp
id|RADEON_RB2D_DC_BUSY
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#if RADEON_FIFO_DEBUG
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed!&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_status
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
macro_line|#endif
r_return
id|DRM_ERR
c_func
(paren
id|EBUSY
)paren
suffix:semicolon
)brace
DECL|function|radeon_do_wait_for_fifo
r_static
r_int
id|radeon_do_wait_for_fifo
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
comma
r_int
id|entries
)paren
(brace
r_int
id|i
suffix:semicolon
id|dev_priv-&gt;stats.boxes
op_or_assign
id|RADEON_BOX_WAIT_IDLE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|slots
op_assign
(paren
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_STATUS
)paren
op_amp
id|RADEON_RBBM_FIFOCNT_MASK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|slots
op_ge
id|entries
)paren
r_return
l_int|0
suffix:semicolon
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#if RADEON_FIFO_DEBUG
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed!&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_status
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
macro_line|#endif
r_return
id|DRM_ERR
c_func
(paren
id|EBUSY
)paren
suffix:semicolon
)brace
DECL|function|radeon_do_wait_for_idle
r_static
r_int
id|radeon_do_wait_for_idle
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
r_int
id|i
comma
id|ret
suffix:semicolon
id|dev_priv-&gt;stats.boxes
op_or_assign
id|RADEON_BOX_WAIT_IDLE
suffix:semicolon
id|ret
op_assign
id|radeon_do_wait_for_fifo
c_func
(paren
id|dev_priv
comma
l_int|64
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_STATUS
)paren
op_amp
id|RADEON_RBBM_ACTIVE
)paren
)paren
(brace
id|radeon_do_pixcache_flush
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#if RADEON_FIFO_DEBUG
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed!&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_status
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
macro_line|#endif
r_return
id|DRM_ERR
c_func
(paren
id|EBUSY
)paren
suffix:semicolon
)brace
multiline_comment|/* ================================================================&n; * CP control, initialization&n; */
multiline_comment|/* Load the microcode for the CP */
DECL|function|radeon_cp_load_microcode
r_static
r_void
id|radeon_cp_load_microcode
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
r_int
id|i
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_do_wait_for_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_ADDR
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv-&gt;microcode_version
op_eq
id|UCODE_R200
)paren
(brace
id|DRM_INFO
c_func
(paren
l_string|&quot;Loading R200 Microcode&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAH
comma
id|R200_cp_microcode
(braket
id|i
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAL
comma
id|R200_cp_microcode
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|dev_priv-&gt;microcode_version
op_eq
id|UCODE_R300
)paren
(brace
id|DRM_INFO
c_func
(paren
l_string|&quot;Loading R300 Microcode&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAH
comma
id|R300_cp_microcode
(braket
id|i
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAL
comma
id|R300_cp_microcode
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAH
comma
id|radeon_cp_microcode
(braket
id|i
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_ME_RAM_DATAL
comma
id|radeon_cp_microcode
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* Flush any pending commands to the CP.  This should only be used just&n; * prior to a wait for idle, as it informs the engine that the command&n; * stream is ending.&n; */
DECL|function|radeon_do_cp_flush
r_static
r_void
id|radeon_do_cp_flush
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#if 0
id|u32
id|tmp
suffix:semicolon
id|tmp
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_WPTR
)paren
op_or
(paren
l_int|1
op_lshift
l_int|31
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_WPTR
comma
id|tmp
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/* Wait for the CP to go idle.&n; */
DECL|function|radeon_do_cp_idle
r_int
id|radeon_do_cp_idle
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|RING_LOCALS
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|BEGIN_RING
c_func
(paren
l_int|6
)paren
suffix:semicolon
id|RADEON_PURGE_CACHE
c_func
(paren
)paren
suffix:semicolon
id|RADEON_PURGE_ZCACHE
c_func
(paren
)paren
suffix:semicolon
id|RADEON_WAIT_UNTIL_IDLE
c_func
(paren
)paren
suffix:semicolon
id|ADVANCE_RING
c_func
(paren
)paren
suffix:semicolon
id|COMMIT_RING
c_func
(paren
)paren
suffix:semicolon
r_return
id|radeon_do_wait_for_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
)brace
multiline_comment|/* Start the Command Processor.&n; */
DECL|function|radeon_do_cp_start
r_static
r_void
id|radeon_do_cp_start
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|RING_LOCALS
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_do_wait_for_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_CSQ_CNTL
comma
id|dev_priv-&gt;cp_mode
)paren
suffix:semicolon
id|dev_priv-&gt;cp_running
op_assign
l_int|1
suffix:semicolon
id|BEGIN_RING
c_func
(paren
l_int|6
)paren
suffix:semicolon
id|RADEON_PURGE_CACHE
c_func
(paren
)paren
suffix:semicolon
id|RADEON_PURGE_ZCACHE
c_func
(paren
)paren
suffix:semicolon
id|RADEON_WAIT_UNTIL_IDLE
c_func
(paren
)paren
suffix:semicolon
id|ADVANCE_RING
c_func
(paren
)paren
suffix:semicolon
id|COMMIT_RING
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/* Reset the Command Processor.  This will not flush any pending&n; * commands, so you must wait for the CP command stream to complete&n; * before calling this routine.&n; */
DECL|function|radeon_do_cp_reset
r_static
r_void
id|radeon_do_cp_reset
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|u32
id|cur_read_ptr
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|cur_read_ptr
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_RPTR
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_WPTR
comma
id|cur_read_ptr
)paren
suffix:semicolon
id|SET_RING_HEAD
c_func
(paren
id|dev_priv
comma
id|cur_read_ptr
)paren
suffix:semicolon
id|dev_priv-&gt;ring.tail
op_assign
id|cur_read_ptr
suffix:semicolon
)brace
multiline_comment|/* Stop the Command Processor.  This will not flush any pending&n; * commands, so you must flush the command stream and wait for the CP&n; * to go idle before calling this routine.&n; */
DECL|function|radeon_do_cp_stop
r_static
r_void
id|radeon_do_cp_stop
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_CSQ_CNTL
comma
id|RADEON_CSQ_PRIDIS_INDDIS
)paren
suffix:semicolon
id|dev_priv-&gt;cp_running
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Reset the engine.  This will stop the CP if it is running.&n; */
DECL|function|radeon_do_engine_reset
r_static
r_int
id|radeon_do_engine_reset
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|u32
id|clock_cntl_index
comma
id|mclk_cntl
comma
id|rbbm_soft_reset
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|radeon_do_pixcache_flush
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|clock_cntl_index
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_CLOCK_CNTL_INDEX
)paren
suffix:semicolon
id|mclk_cntl
op_assign
id|RADEON_READ_PLL
c_func
(paren
id|dev
comma
id|RADEON_MCLK_CNTL
)paren
suffix:semicolon
id|RADEON_WRITE_PLL
c_func
(paren
id|RADEON_MCLK_CNTL
comma
(paren
id|mclk_cntl
op_or
id|RADEON_FORCEON_MCLKA
op_or
id|RADEON_FORCEON_MCLKB
op_or
id|RADEON_FORCEON_YCLKA
op_or
id|RADEON_FORCEON_YCLKB
op_or
id|RADEON_FORCEON_MC
op_or
id|RADEON_FORCEON_AIC
)paren
)paren
suffix:semicolon
id|rbbm_soft_reset
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
comma
(paren
id|rbbm_soft_reset
op_or
id|RADEON_SOFT_RESET_CP
op_or
id|RADEON_SOFT_RESET_HI
op_or
id|RADEON_SOFT_RESET_SE
op_or
id|RADEON_SOFT_RESET_RE
op_or
id|RADEON_SOFT_RESET_PP
op_or
id|RADEON_SOFT_RESET_E2
op_or
id|RADEON_SOFT_RESET_RB
)paren
)paren
suffix:semicolon
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
comma
(paren
id|rbbm_soft_reset
op_amp
op_complement
(paren
id|RADEON_SOFT_RESET_CP
op_or
id|RADEON_SOFT_RESET_HI
op_or
id|RADEON_SOFT_RESET_SE
op_or
id|RADEON_SOFT_RESET_RE
op_or
id|RADEON_SOFT_RESET_PP
op_or
id|RADEON_SOFT_RESET_E2
op_or
id|RADEON_SOFT_RESET_RB
)paren
)paren
)paren
suffix:semicolon
id|RADEON_READ
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
)paren
suffix:semicolon
id|RADEON_WRITE_PLL
c_func
(paren
id|RADEON_MCLK_CNTL
comma
id|mclk_cntl
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CLOCK_CNTL_INDEX
comma
id|clock_cntl_index
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_RBBM_SOFT_RESET
comma
id|rbbm_soft_reset
)paren
suffix:semicolon
multiline_comment|/* Reset the CP ring */
id|radeon_do_cp_reset
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
multiline_comment|/* The CP is no longer running after an engine reset */
id|dev_priv-&gt;cp_running
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Reset any pending vertex, indirect buffers */
id|radeon_freelist_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_cp_init_ring_buffer
r_static
r_void
id|radeon_cp_init_ring_buffer
c_func
(paren
id|drm_device_t
op_star
id|dev
comma
id|drm_radeon_private_t
op_star
id|dev_priv
)paren
(brace
id|u32
id|ring_start
comma
id|cur_read_ptr
suffix:semicolon
id|u32
id|tmp
suffix:semicolon
multiline_comment|/* Initialize the memory controller */
id|RADEON_WRITE
c_func
(paren
id|RADEON_MC_FB_LOCATION
comma
(paren
(paren
id|dev_priv-&gt;gart_vm_start
op_minus
l_int|1
)paren
op_amp
l_int|0xffff0000
)paren
op_or
(paren
id|dev_priv-&gt;fb_location
op_rshift
l_int|16
)paren
)paren
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_MC_AGP_LOCATION
comma
(paren
(paren
(paren
id|dev_priv-&gt;gart_vm_start
op_minus
l_int|1
op_plus
id|dev_priv-&gt;gart_size
)paren
op_amp
l_int|0xffff0000
)paren
op_or
(paren
id|dev_priv-&gt;gart_vm_start
op_rshift
l_int|16
)paren
)paren
)paren
suffix:semicolon
id|ring_start
op_assign
(paren
id|dev_priv-&gt;cp_ring-&gt;offset
op_minus
id|dev-&gt;agp-&gt;base
op_plus
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
id|ring_start
op_assign
(paren
id|dev_priv-&gt;cp_ring-&gt;offset
op_minus
id|dev-&gt;sg-&gt;handle
op_plus
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_BASE
comma
id|ring_start
)paren
suffix:semicolon
multiline_comment|/* Set the write pointer delay */
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_WPTR_DELAY
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Initialize the ring buffer&squot;s read and write pointers */
id|cur_read_ptr
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_RPTR
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_WPTR
comma
id|cur_read_ptr
)paren
suffix:semicolon
id|SET_RING_HEAD
c_func
(paren
id|dev_priv
comma
id|cur_read_ptr
)paren
suffix:semicolon
id|dev_priv-&gt;ring.tail
op_assign
id|cur_read_ptr
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_RPTR_ADDR
comma
id|dev_priv-&gt;ring_rptr-&gt;offset
op_minus
id|dev-&gt;agp-&gt;base
op_plus
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
id|drm_sg_mem_t
op_star
id|entry
op_assign
id|dev-&gt;sg
suffix:semicolon
r_int
r_int
id|tmp_ofs
comma
id|page_ofs
suffix:semicolon
id|tmp_ofs
op_assign
id|dev_priv-&gt;ring_rptr-&gt;offset
op_minus
id|dev-&gt;sg-&gt;handle
suffix:semicolon
id|page_ofs
op_assign
id|tmp_ofs
op_rshift
id|PAGE_SHIFT
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_RPTR_ADDR
comma
id|entry-&gt;busaddr
(braket
id|page_ofs
)braket
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;ring rptr: offset=0x%08lx handle=0x%08lx&bslash;n&quot;
comma
(paren
r_int
r_int
)paren
id|entry-&gt;busaddr
(braket
id|page_ofs
)braket
comma
id|entry-&gt;handle
op_plus
id|tmp_ofs
)paren
suffix:semicolon
)brace
multiline_comment|/* Initialize the scratch register pointer.  This will cause&n;&t; * the scratch register values to be written out to memory&n;&t; * whenever they are updated.&n;&t; *&n;&t; * We simply put this behind the ring read pointer, this works&n;&t; * with PCI GART as well as (whatever kind of) AGP GART&n;&t; */
id|RADEON_WRITE
c_func
(paren
id|RADEON_SCRATCH_ADDR
comma
id|RADEON_READ
c_func
(paren
id|RADEON_CP_RB_RPTR_ADDR
)paren
op_plus
id|RADEON_SCRATCH_REG_OFFSET
)paren
suffix:semicolon
id|dev_priv-&gt;scratch
op_assign
(paren
(paren
id|__volatile__
id|u32
op_star
)paren
id|dev_priv-&gt;ring_rptr-&gt;handle
op_plus
(paren
id|RADEON_SCRATCH_REG_OFFSET
op_div
r_sizeof
(paren
id|u32
)paren
)paren
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_SCRATCH_UMSK
comma
l_int|0x7
)paren
suffix:semicolon
multiline_comment|/* Writeback doesn&squot;t seem to work everywhere, test it first */
id|DRM_WRITE32
c_func
(paren
id|dev_priv-&gt;ring_rptr
comma
id|RADEON_SCRATCHOFF
c_func
(paren
l_int|1
)paren
comma
l_int|0
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_SCRATCH_REG1
comma
l_int|0xdeadbeef
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tmp
op_assign
l_int|0
suffix:semicolon
id|tmp
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|tmp
op_increment
)paren
(brace
r_if
c_cond
(paren
id|DRM_READ32
c_func
(paren
id|dev_priv-&gt;ring_rptr
comma
id|RADEON_SCRATCHOFF
c_func
(paren
l_int|1
)paren
)paren
op_eq
l_int|0xdeadbeef
)paren
r_break
suffix:semicolon
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tmp
OL
id|dev_priv-&gt;usec_timeout
)paren
(brace
id|dev_priv-&gt;writeback_works
op_assign
l_int|1
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;writeback test succeeded, tmp=%d&bslash;n&quot;
comma
id|tmp
)paren
suffix:semicolon
)brace
r_else
(brace
id|dev_priv-&gt;writeback_works
op_assign
l_int|0
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;writeback test failed&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;sarea_priv-&gt;last_frame
op_assign
id|dev_priv-&gt;scratch
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_LAST_FRAME_REG
comma
id|dev_priv-&gt;sarea_priv-&gt;last_frame
)paren
suffix:semicolon
id|dev_priv-&gt;sarea_priv-&gt;last_dispatch
op_assign
id|dev_priv-&gt;scratch
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_LAST_DISPATCH_REG
comma
id|dev_priv-&gt;sarea_priv-&gt;last_dispatch
)paren
suffix:semicolon
id|dev_priv-&gt;sarea_priv-&gt;last_clear
op_assign
id|dev_priv-&gt;scratch
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_LAST_CLEAR_REG
comma
id|dev_priv-&gt;sarea_priv-&gt;last_clear
)paren
suffix:semicolon
multiline_comment|/* Set ring buffer size */
macro_line|#ifdef __BIG_ENDIAN
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_CNTL
comma
id|dev_priv-&gt;ring.size_l2qw
op_or
id|RADEON_BUF_SWAP_32BIT
)paren
suffix:semicolon
macro_line|#else
id|RADEON_WRITE
c_func
(paren
id|RADEON_CP_RB_CNTL
comma
id|dev_priv-&gt;ring.size_l2qw
)paren
suffix:semicolon
macro_line|#endif
id|radeon_do_wait_for_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
multiline_comment|/* Turn on bus mastering */
id|tmp
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_BUS_CNTL
)paren
op_amp
op_complement
id|RADEON_BUS_MASTER_DIS
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_BUS_CNTL
comma
id|tmp
)paren
suffix:semicolon
multiline_comment|/* Sync everything up */
id|RADEON_WRITE
c_func
(paren
id|RADEON_ISYNC_CNTL
comma
(paren
id|RADEON_ISYNC_ANY2D_IDLE3D
op_or
id|RADEON_ISYNC_ANY3D_IDLE2D
op_or
id|RADEON_ISYNC_WAIT_IDLEGUI
op_or
id|RADEON_ISYNC_CPSCRATCH_IDLEGUI
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* Enable or disable PCI GART on the chip */
DECL|function|radeon_set_pcigart
r_static
r_void
id|radeon_set_pcigart
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
comma
r_int
id|on
)paren
(brace
id|u32
id|tmp
op_assign
id|RADEON_READ
c_func
(paren
id|RADEON_AIC_CNTL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|on
)paren
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_AIC_CNTL
comma
id|tmp
op_or
id|RADEON_PCIGART_TRANSLATE_EN
)paren
suffix:semicolon
multiline_comment|/* set PCI GART page-table base address&n;&t;&t; */
id|RADEON_WRITE
c_func
(paren
id|RADEON_AIC_PT_BASE
comma
id|dev_priv-&gt;bus_pci_gart
)paren
suffix:semicolon
multiline_comment|/* set address range for PCI address translate&n;&t;&t; */
id|RADEON_WRITE
c_func
(paren
id|RADEON_AIC_LO_ADDR
comma
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
id|RADEON_WRITE
c_func
(paren
id|RADEON_AIC_HI_ADDR
comma
id|dev_priv-&gt;gart_vm_start
op_plus
id|dev_priv-&gt;gart_size
op_minus
l_int|1
)paren
suffix:semicolon
multiline_comment|/* Turn off AGP aperture -- is this required for PCI GART?&n;&t;&t; */
id|RADEON_WRITE
c_func
(paren
id|RADEON_MC_AGP_LOCATION
comma
l_int|0xffffffc0
)paren
suffix:semicolon
multiline_comment|/* ?? */
id|RADEON_WRITE
c_func
(paren
id|RADEON_AGP_COMMAND
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* clear AGP_COMMAND */
)brace
r_else
(brace
id|RADEON_WRITE
c_func
(paren
id|RADEON_AIC_CNTL
comma
id|tmp
op_amp
op_complement
id|RADEON_PCIGART_TRANSLATE_EN
)paren
suffix:semicolon
)brace
)brace
DECL|function|radeon_do_init_cp
r_static
r_int
id|radeon_do_init_cp
c_func
(paren
id|drm_device_t
op_star
id|dev
comma
id|drm_radeon_init_t
op_star
id|init
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|dev_priv-&gt;is_pci
op_assign
id|init-&gt;is_pci
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv-&gt;is_pci
op_logical_and
op_logical_neg
id|dev-&gt;sg
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;PCI GART memory not allocated!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;usec_timeout
op_assign
id|init-&gt;usec_timeout
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv-&gt;usec_timeout
template_param
id|RADEON_MAX_USEC_TIMEOUT
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;TIMEOUT problem!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|init-&gt;func
)paren
(brace
r_case
id|RADEON_INIT_R200_CP
suffix:colon
id|dev_priv-&gt;microcode_version
op_assign
id|UCODE_R200
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RADEON_INIT_R300_CP
suffix:colon
id|dev_priv-&gt;microcode_version
op_assign
id|UCODE_R300
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dev_priv-&gt;microcode_version
op_assign
id|UCODE_R100
suffix:semicolon
)brace
id|dev_priv-&gt;do_boxes
op_assign
l_int|0
suffix:semicolon
id|dev_priv-&gt;cp_mode
op_assign
id|init-&gt;cp_mode
suffix:semicolon
multiline_comment|/* We don&squot;t support anything other than bus-mastering ring mode,&n;&t; * but the ring can be in either AGP or PCI space for the ring&n;&t; * read pointer.&n;&t; */
r_if
c_cond
(paren
(paren
id|init-&gt;cp_mode
op_ne
id|RADEON_CSQ_PRIBM_INDDIS
)paren
op_logical_and
(paren
id|init-&gt;cp_mode
op_ne
id|RADEON_CSQ_PRIBM_INDBM
)paren
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;BAD cp_mode (%x)!&bslash;n&quot;
comma
id|init-&gt;cp_mode
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|init-&gt;fb_bpp
)paren
(brace
r_case
l_int|16
suffix:colon
id|dev_priv-&gt;color_fmt
op_assign
id|RADEON_COLOR_FORMAT_RGB565
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
r_default
suffix:colon
id|dev_priv-&gt;color_fmt
op_assign
id|RADEON_COLOR_FORMAT_ARGB8888
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dev_priv-&gt;front_offset
op_assign
id|init-&gt;front_offset
suffix:semicolon
id|dev_priv-&gt;front_pitch
op_assign
id|init-&gt;front_pitch
suffix:semicolon
id|dev_priv-&gt;back_offset
op_assign
id|init-&gt;back_offset
suffix:semicolon
id|dev_priv-&gt;back_pitch
op_assign
id|init-&gt;back_pitch
suffix:semicolon
r_switch
c_cond
(paren
id|init-&gt;depth_bpp
)paren
(brace
r_case
l_int|16
suffix:colon
id|dev_priv-&gt;depth_fmt
op_assign
id|RADEON_DEPTH_FORMAT_16BIT_INT_Z
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
r_default
suffix:colon
id|dev_priv-&gt;depth_fmt
op_assign
id|RADEON_DEPTH_FORMAT_24BIT_INT_Z
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dev_priv-&gt;depth_offset
op_assign
id|init-&gt;depth_offset
suffix:semicolon
id|dev_priv-&gt;depth_pitch
op_assign
id|init-&gt;depth_pitch
suffix:semicolon
multiline_comment|/* Hardware state for depth clears.  Remove this if/when we no&n;&t; * longer clear the depth buffer with a 3D rectangle.  Hard-code&n;&t; * all values to prevent unwanted 3D state from slipping through&n;&t; * and screwing with the clear operation.&n;&t; */
id|dev_priv-&gt;depth_clear.rb3d_cntl
op_assign
(paren
id|RADEON_PLANE_MASK_ENABLE
op_or
(paren
id|dev_priv-&gt;color_fmt
op_lshift
l_int|10
)paren
op_or
(paren
l_int|1
op_lshift
l_int|15
)paren
)paren
suffix:semicolon
id|dev_priv-&gt;depth_clear.rb3d_zstencilcntl
op_assign
(paren
id|dev_priv-&gt;depth_fmt
op_or
id|RADEON_Z_TEST_ALWAYS
op_or
id|RADEON_STENCIL_TEST_ALWAYS
op_or
id|RADEON_STENCIL_S_FAIL_REPLACE
op_or
id|RADEON_STENCIL_ZPASS_REPLACE
op_or
id|RADEON_STENCIL_ZFAIL_REPLACE
op_or
id|RADEON_Z_WRITE_ENABLE
)paren
suffix:semicolon
id|dev_priv-&gt;depth_clear.se_cntl
op_assign
(paren
id|RADEON_FFACE_CULL_CW
op_or
id|RADEON_BFACE_SOLID
op_or
id|RADEON_FFACE_SOLID
op_or
id|RADEON_FLAT_SHADE_VTX_LAST
op_or
id|RADEON_DIFFUSE_SHADE_FLAT
op_or
id|RADEON_ALPHA_SHADE_FLAT
op_or
id|RADEON_SPECULAR_SHADE_FLAT
op_or
id|RADEON_FOG_SHADE_FLAT
op_or
id|RADEON_VTX_PIX_CENTER_OGL
op_or
id|RADEON_ROUND_MODE_TRUNC
op_or
id|RADEON_ROUND_PREC_8TH_PIX
)paren
suffix:semicolon
id|DRM_GETSAREA
c_func
(paren
)paren
suffix:semicolon
id|dev_priv-&gt;fb_offset
op_assign
id|init-&gt;fb_offset
suffix:semicolon
id|dev_priv-&gt;mmio_offset
op_assign
id|init-&gt;mmio_offset
suffix:semicolon
id|dev_priv-&gt;ring_offset
op_assign
id|init-&gt;ring_offset
suffix:semicolon
id|dev_priv-&gt;ring_rptr_offset
op_assign
id|init-&gt;ring_rptr_offset
suffix:semicolon
id|dev_priv-&gt;buffers_offset
op_assign
id|init-&gt;buffers_offset
suffix:semicolon
id|dev_priv-&gt;gart_textures_offset
op_assign
id|init-&gt;gart_textures_offset
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;sarea
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find sarea!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;mmio
op_assign
id|drm_core_findmap
c_func
(paren
id|dev
comma
id|init-&gt;mmio_offset
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;mmio
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find mmio region!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;cp_ring
op_assign
id|drm_core_findmap
c_func
(paren
id|dev
comma
id|init-&gt;ring_offset
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;cp_ring
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find cp ring region!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;ring_rptr
op_assign
id|drm_core_findmap
c_func
(paren
id|dev
comma
id|init-&gt;ring_rptr_offset
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;ring_rptr
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find ring read pointer!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|dev-&gt;agp_buffer_map
op_assign
id|drm_core_findmap
c_func
(paren
id|dev
comma
id|init-&gt;buffers_offset
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev-&gt;agp_buffer_map
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find dma buffer region!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|init-&gt;gart_textures_offset
)paren
(brace
id|dev_priv-&gt;gart_textures
op_assign
id|drm_core_findmap
c_func
(paren
id|dev
comma
id|init-&gt;gart_textures_offset
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;gart_textures
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find GART texture region!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
)brace
id|dev_priv-&gt;sarea_priv
op_assign
(paren
id|drm_radeon_sarea_t
op_star
)paren
(paren
(paren
id|u8
op_star
)paren
id|dev_priv-&gt;sarea-&gt;handle
op_plus
id|init-&gt;sarea_priv_offset
)paren
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
id|drm_core_ioremap
c_func
(paren
id|dev_priv-&gt;cp_ring
comma
id|dev
)paren
suffix:semicolon
id|drm_core_ioremap
c_func
(paren
id|dev_priv-&gt;ring_rptr
comma
id|dev
)paren
suffix:semicolon
id|drm_core_ioremap
c_func
(paren
id|dev-&gt;agp_buffer_map
comma
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;cp_ring-&gt;handle
op_logical_or
op_logical_neg
id|dev_priv-&gt;ring_rptr-&gt;handle
op_logical_or
op_logical_neg
id|dev-&gt;agp_buffer_map-&gt;handle
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;could not find ioremap agp regions!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
)brace
r_else
macro_line|#endif
(brace
id|dev_priv-&gt;cp_ring-&gt;handle
op_assign
(paren
r_void
op_star
)paren
id|dev_priv-&gt;cp_ring-&gt;offset
suffix:semicolon
id|dev_priv-&gt;ring_rptr-&gt;handle
op_assign
(paren
r_void
op_star
)paren
id|dev_priv-&gt;ring_rptr-&gt;offset
suffix:semicolon
id|dev-&gt;agp_buffer_map-&gt;handle
op_assign
(paren
r_void
op_star
)paren
id|dev-&gt;agp_buffer_map-&gt;offset
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev_priv-&gt;cp_ring-&gt;handle %p&bslash;n&quot;
comma
id|dev_priv-&gt;cp_ring-&gt;handle
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev_priv-&gt;ring_rptr-&gt;handle %p&bslash;n&quot;
comma
id|dev_priv-&gt;ring_rptr-&gt;handle
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev-&gt;agp_buffer_map-&gt;handle %p&bslash;n&quot;
comma
id|dev-&gt;agp_buffer_map-&gt;handle
)paren
suffix:semicolon
)brace
id|dev_priv-&gt;fb_location
op_assign
(paren
id|RADEON_READ
c_func
(paren
id|RADEON_MC_FB_LOCATION
)paren
op_amp
l_int|0xffff
)paren
op_lshift
l_int|16
suffix:semicolon
id|dev_priv-&gt;front_pitch_offset
op_assign
(paren
(paren
(paren
id|dev_priv-&gt;front_pitch
op_div
l_int|64
)paren
op_lshift
l_int|22
)paren
op_or
(paren
(paren
id|dev_priv-&gt;front_offset
op_plus
id|dev_priv-&gt;fb_location
)paren
op_rshift
l_int|10
)paren
)paren
suffix:semicolon
id|dev_priv-&gt;back_pitch_offset
op_assign
(paren
(paren
(paren
id|dev_priv-&gt;back_pitch
op_div
l_int|64
)paren
op_lshift
l_int|22
)paren
op_or
(paren
(paren
id|dev_priv-&gt;back_offset
op_plus
id|dev_priv-&gt;fb_location
)paren
op_rshift
l_int|10
)paren
)paren
suffix:semicolon
id|dev_priv-&gt;depth_pitch_offset
op_assign
(paren
(paren
(paren
id|dev_priv-&gt;depth_pitch
op_div
l_int|64
)paren
op_lshift
l_int|22
)paren
op_or
(paren
(paren
id|dev_priv-&gt;depth_offset
op_plus
id|dev_priv-&gt;fb_location
)paren
op_rshift
l_int|10
)paren
)paren
suffix:semicolon
id|dev_priv-&gt;gart_size
op_assign
id|init-&gt;gart_size
suffix:semicolon
id|dev_priv-&gt;gart_vm_start
op_assign
id|dev_priv-&gt;fb_location
op_plus
id|RADEON_READ
c_func
(paren
id|RADEON_CONFIG_APER_SIZE
)paren
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
id|dev_priv-&gt;gart_buffers_offset
op_assign
(paren
id|dev-&gt;agp_buffer_map-&gt;offset
op_minus
id|dev-&gt;agp-&gt;base
op_plus
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
r_else
macro_line|#endif
id|dev_priv-&gt;gart_buffers_offset
op_assign
(paren
id|dev-&gt;agp_buffer_map-&gt;offset
op_minus
id|dev-&gt;sg-&gt;handle
op_plus
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev_priv-&gt;gart_size %d&bslash;n&quot;
comma
id|dev_priv-&gt;gart_size
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev_priv-&gt;gart_vm_start 0x%x&bslash;n&quot;
comma
id|dev_priv-&gt;gart_vm_start
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;dev_priv-&gt;gart_buffers_offset 0x%lx&bslash;n&quot;
comma
id|dev_priv-&gt;gart_buffers_offset
)paren
suffix:semicolon
id|dev_priv-&gt;ring.start
op_assign
(paren
id|u32
op_star
)paren
id|dev_priv-&gt;cp_ring-&gt;handle
suffix:semicolon
id|dev_priv-&gt;ring.end
op_assign
(paren
(paren
id|u32
op_star
)paren
id|dev_priv-&gt;cp_ring-&gt;handle
op_plus
id|init-&gt;ring_size
op_div
r_sizeof
(paren
id|u32
)paren
)paren
suffix:semicolon
id|dev_priv-&gt;ring.size
op_assign
id|init-&gt;ring_size
suffix:semicolon
id|dev_priv-&gt;ring.size_l2qw
op_assign
id|drm_order
c_func
(paren
id|init-&gt;ring_size
op_div
l_int|8
)paren
suffix:semicolon
id|dev_priv-&gt;ring.tail_mask
op_assign
(paren
id|dev_priv-&gt;ring.size
op_div
r_sizeof
(paren
id|u32
)paren
)paren
op_minus
l_int|1
suffix:semicolon
id|dev_priv-&gt;ring.high_mark
op_assign
id|RADEON_RING_HIGH_MARK
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
multiline_comment|/* Turn off PCI GART */
id|radeon_set_pcigart
c_func
(paren
id|dev_priv
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
r_if
c_cond
(paren
op_logical_neg
id|drm_ati_pcigart_init
c_func
(paren
id|dev
comma
op_amp
id|dev_priv-&gt;phys_pci_gart
comma
op_amp
id|dev_priv-&gt;bus_pci_gart
)paren
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed to init PCI GART!&bslash;n&quot;
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|ENOMEM
)paren
suffix:semicolon
)brace
multiline_comment|/* Turn on PCI GART */
id|radeon_set_pcigart
c_func
(paren
id|dev_priv
comma
l_int|1
)paren
suffix:semicolon
)brace
id|radeon_cp_load_microcode
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|radeon_cp_init_ring_buffer
c_func
(paren
id|dev
comma
id|dev_priv
)paren
suffix:semicolon
id|dev_priv-&gt;last_buf
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|radeon_do_engine_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_do_cleanup_cp
r_int
id|radeon_do_cleanup_cp
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* Make sure interrupts are disabled here because the uninstall ioctl&n;&t; * may not have been called from userspace and after dev_private&n;&t; * is freed, it&squot;s too late.&n;&t; */
r_if
c_cond
(paren
id|dev-&gt;irq_enabled
)paren
id|drm_irq_uninstall
c_func
(paren
id|dev
)paren
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
r_if
c_cond
(paren
id|dev_priv-&gt;cp_ring
op_ne
l_int|NULL
)paren
id|drm_core_ioremapfree
c_func
(paren
id|dev_priv-&gt;cp_ring
comma
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv-&gt;ring_rptr
op_ne
l_int|NULL
)paren
id|drm_core_ioremapfree
c_func
(paren
id|dev_priv-&gt;ring_rptr
comma
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev-&gt;agp_buffer_map
op_ne
l_int|NULL
)paren
id|drm_core_ioremapfree
c_func
(paren
id|dev-&gt;agp_buffer_map
comma
id|dev
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
r_if
c_cond
(paren
op_logical_neg
id|drm_ati_pcigart_cleanup
c_func
(paren
id|dev
comma
id|dev_priv-&gt;phys_pci_gart
comma
id|dev_priv-&gt;bus_pci_gart
)paren
)paren
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed to cleanup PCI GART!&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* only clear to the start of flags */
id|memset
c_func
(paren
id|dev_priv
comma
l_int|0
comma
m_offsetof
(paren
id|drm_radeon_private_t
comma
id|flags
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* This code will reinit the Radeon CP hardware after a resume from disc.  &n; * AFAIK, it would be very difficult to pickle the state at suspend time, so &n; * here we make sure that all Radeon hardware initialisation is re-done without&n; * affecting running applications.&n; *&n; * Charl P. Botha &lt;http://cpbotha.net&gt;&n; */
DECL|function|radeon_do_resume_cp
r_static
r_int
id|radeon_do_resume_cp
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;Called with no initialization&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;Starting radeon_do_resume_cp()&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#if __OS_HAS_AGP
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;is_pci
)paren
(brace
multiline_comment|/* Turn off PCI GART */
id|radeon_set_pcigart
c_func
(paren
id|dev_priv
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
multiline_comment|/* Turn on PCI GART */
id|radeon_set_pcigart
c_func
(paren
id|dev_priv
comma
l_int|1
)paren
suffix:semicolon
)brace
id|radeon_cp_load_microcode
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|radeon_cp_init_ring_buffer
c_func
(paren
id|dev
comma
id|dev_priv
)paren
suffix:semicolon
id|radeon_do_engine_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;radeon_do_resume_cp() complete&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_cp_init
r_int
id|radeon_cp_init
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_radeon_init_t
id|init
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
id|DRM_COPY_FROM_USER_IOCTL
c_func
(paren
id|init
comma
(paren
id|drm_radeon_init_t
id|__user
op_star
)paren
id|data
comma
r_sizeof
(paren
id|init
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|init.func
)paren
(brace
r_case
id|RADEON_INIT_CP
suffix:colon
r_case
id|RADEON_INIT_R200_CP
suffix:colon
r_case
id|RADEON_INIT_R300_CP
suffix:colon
r_return
id|radeon_do_init_cp
c_func
(paren
id|dev
comma
op_amp
id|init
)paren
suffix:semicolon
r_case
id|RADEON_CLEANUP_CP
suffix:colon
r_return
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
DECL|function|radeon_cp_start
r_int
id|radeon_cp_start
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv-&gt;cp_running
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;%s while CP running&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|dev_priv-&gt;cp_mode
op_eq
id|RADEON_CSQ_PRIDIS_INDDIS
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;%s called with bogus CP mode (%d)&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|dev_priv-&gt;cp_mode
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|radeon_do_cp_start
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Stop the CP.  The engine must have been idled before calling this&n; * routine.&n; */
DECL|function|radeon_cp_stop
r_int
id|radeon_cp_stop
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|drm_radeon_cp_stop_t
id|stop
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
id|DRM_COPY_FROM_USER_IOCTL
c_func
(paren
id|stop
comma
(paren
id|drm_radeon_cp_stop_t
id|__user
op_star
)paren
id|data
comma
r_sizeof
(paren
id|stop
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv-&gt;cp_running
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* Flush any pending CP commands.  This ensures any outstanding&n;&t; * commands are exectuted by the engine before we turn it off.&n;&t; */
r_if
c_cond
(paren
id|stop.flush
)paren
(brace
id|radeon_do_cp_flush
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
)brace
multiline_comment|/* If we fail to make the engine go idle, we return an error&n;&t; * code so that the DRM ioctl wrapper can try again.&n;&t; */
r_if
c_cond
(paren
id|stop.idle
)paren
(brace
id|ret
op_assign
id|radeon_do_cp_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
)brace
multiline_comment|/* Finally, we can turn off the CP.  If the engine isn&squot;t idle,&n;&t; * we will get some dropped triangles as they won&squot;t be fully&n;&t; * rendered before the CP is shut down.&n;&t; */
id|radeon_do_cp_stop
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
multiline_comment|/* Reset the engine */
id|radeon_do_engine_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_do_release
r_void
id|radeon_do_release
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv
)paren
(brace
r_if
c_cond
(paren
id|dev_priv-&gt;cp_running
)paren
(brace
multiline_comment|/* Stop the cp */
r_while
c_loop
(paren
(paren
id|ret
op_assign
id|radeon_do_cp_idle
c_func
(paren
id|dev_priv
)paren
)paren
op_ne
l_int|0
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;radeon_do_cp_idle %d&bslash;n&quot;
comma
id|ret
)paren
suffix:semicolon
macro_line|#ifdef __linux__
id|schedule
c_func
(paren
)paren
suffix:semicolon
macro_line|#else
id|tsleep
c_func
(paren
op_amp
id|ret
comma
id|PZERO
comma
l_string|&quot;rdnrel&quot;
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
id|radeon_do_cp_stop
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|radeon_do_engine_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/* Disable *all* interrupts */
id|RADEON_WRITE
c_func
(paren
id|RADEON_GEN_INT_CNTL
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Free memory heap structures */
id|radeon_mem_takedown
c_func
(paren
op_amp
(paren
id|dev_priv-&gt;gart_heap
)paren
)paren
suffix:semicolon
id|radeon_mem_takedown
c_func
(paren
op_amp
(paren
id|dev_priv-&gt;fb_heap
)paren
)paren
suffix:semicolon
multiline_comment|/* deallocate kernel resources */
id|radeon_do_cleanup_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Just reset the CP ring.  Called as part of an X Server engine reset.&n; */
DECL|function|radeon_cp_reset
r_int
id|radeon_cp_reset
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev_priv
)paren
(brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;%s called before init done&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|radeon_do_cp_reset
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
multiline_comment|/* The CP is no longer running after an engine reset */
id|dev_priv-&gt;cp_running
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_cp_idle
r_int
id|radeon_cp_idle
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
r_return
id|radeon_do_cp_idle
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
)brace
multiline_comment|/* Added by Charl P. Botha to call radeon_do_resume_cp().&n; */
DECL|function|radeon_cp_resume
r_int
id|radeon_cp_resume
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
r_return
id|radeon_do_resume_cp
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
DECL|function|radeon_engine_reset
r_int
id|radeon_engine_reset
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
r_return
id|radeon_do_engine_reset
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/* ================================================================&n; * Fullscreen mode&n; */
multiline_comment|/* KW: Deprecated to say the least:&n; */
DECL|function|radeon_fullscreen
r_int
id|radeon_fullscreen
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ================================================================&n; * Freelist management&n; */
multiline_comment|/* Original comment: FIXME: ROTATE_BUFS is a hack to cycle through&n; *   bufs until freelist code is used.  Note this hides a problem with&n; *   the scratch register * (used to keep track of last buffer&n; *   completed) being written to before * the last buffer has actually&n; *   completed rendering.  &n; *&n; * KW:  It&squot;s also a good way to find free buffers quickly.&n; *&n; * KW: Ideally this loop wouldn&squot;t exist, and freelist_get wouldn&squot;t&n; * sleep.  However, bugs in older versions of radeon_accel.c mean that&n; * we essentially have to do this, else old clients will break.&n; * &n; * However, it does leave open a potential deadlock where all the&n; * buffers are held by other clients, which can&squot;t release them because&n; * they can&squot;t get the lock.  &n; */
DECL|function|radeon_freelist_get
id|drm_buf_t
op_star
id|radeon_freelist_get
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_device_dma_t
op_star
id|dma
op_assign
id|dev-&gt;dma
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|drm_radeon_buf_priv_t
op_star
id|buf_priv
suffix:semicolon
id|drm_buf_t
op_star
id|buf
suffix:semicolon
r_int
id|i
comma
id|t
suffix:semicolon
r_int
id|start
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|dev_priv-&gt;last_buf
op_ge
id|dma-&gt;buf_count
)paren
id|dev_priv-&gt;last_buf
op_assign
l_int|0
suffix:semicolon
id|start
op_assign
id|dev_priv-&gt;last_buf
suffix:semicolon
r_for
c_loop
(paren
id|t
op_assign
l_int|0
suffix:semicolon
id|t
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|t
op_increment
)paren
(brace
id|u32
id|done_age
op_assign
id|GET_SCRATCH
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;done_age = %d&bslash;n&quot;
comma
id|done_age
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|start
suffix:semicolon
id|i
OL
id|dma-&gt;buf_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buf
op_assign
id|dma-&gt;buflist
(braket
id|i
)braket
suffix:semicolon
id|buf_priv
op_assign
id|buf-&gt;dev_private
suffix:semicolon
r_if
c_cond
(paren
id|buf-&gt;filp
op_eq
l_int|0
op_logical_or
(paren
id|buf-&gt;pending
op_logical_and
id|buf_priv-&gt;age
op_le
id|done_age
)paren
)paren
(brace
id|dev_priv-&gt;stats.requested_bufs
op_increment
suffix:semicolon
id|buf-&gt;pending
op_assign
l_int|0
suffix:semicolon
r_return
id|buf
suffix:semicolon
)brace
id|start
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|t
)paren
(brace
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|dev_priv-&gt;stats.freelist_loops
op_increment
suffix:semicolon
)brace
)brace
id|DRM_DEBUG
c_func
(paren
l_string|&quot;returning NULL!&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|NULL
suffix:semicolon
)brace
macro_line|#if 0
id|drm_buf_t
op_star
id|radeon_freelist_get
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_device_dma_t
op_star
id|dma
op_assign
id|dev-&gt;dma
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|drm_radeon_buf_priv_t
op_star
id|buf_priv
suffix:semicolon
id|drm_buf_t
op_star
id|buf
suffix:semicolon
r_int
id|i
comma
id|t
suffix:semicolon
r_int
id|start
suffix:semicolon
id|u32
id|done_age
op_assign
id|DRM_READ32
c_func
(paren
id|dev_priv-&gt;ring_rptr
comma
id|RADEON_SCRATCHOFF
c_func
(paren
l_int|1
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|dev_priv-&gt;last_buf
op_ge
id|dma-&gt;buf_count
)paren
id|dev_priv-&gt;last_buf
op_assign
l_int|0
suffix:semicolon
id|start
op_assign
id|dev_priv-&gt;last_buf
suffix:semicolon
id|dev_priv-&gt;stats.freelist_loops
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|t
op_assign
l_int|0
suffix:semicolon
id|t
OL
l_int|2
suffix:semicolon
id|t
op_increment
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
id|start
suffix:semicolon
id|i
OL
id|dma-&gt;buf_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buf
op_assign
id|dma-&gt;buflist
(braket
id|i
)braket
suffix:semicolon
id|buf_priv
op_assign
id|buf-&gt;dev_private
suffix:semicolon
r_if
c_cond
(paren
id|buf-&gt;filp
op_eq
l_int|0
op_logical_or
(paren
id|buf-&gt;pending
op_logical_and
id|buf_priv-&gt;age
op_le
id|done_age
)paren
)paren
(brace
id|dev_priv-&gt;stats.requested_bufs
op_increment
suffix:semicolon
id|buf-&gt;pending
op_assign
l_int|0
suffix:semicolon
r_return
id|buf
suffix:semicolon
)brace
)brace
id|start
op_assign
l_int|0
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
macro_line|#endif
DECL|function|radeon_freelist_reset
r_void
id|radeon_freelist_reset
c_func
(paren
id|drm_device_t
op_star
id|dev
)paren
(brace
id|drm_device_dma_t
op_star
id|dma
op_assign
id|dev-&gt;dma
suffix:semicolon
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
r_int
id|i
suffix:semicolon
id|dev_priv-&gt;last_buf
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dma-&gt;buf_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|drm_buf_t
op_star
id|buf
op_assign
id|dma-&gt;buflist
(braket
id|i
)braket
suffix:semicolon
id|drm_radeon_buf_priv_t
op_star
id|buf_priv
op_assign
id|buf-&gt;dev_private
suffix:semicolon
id|buf_priv-&gt;age
op_assign
l_int|0
suffix:semicolon
)brace
)brace
multiline_comment|/* ================================================================&n; * CP command submission&n; */
DECL|function|radeon_wait_ring
r_int
id|radeon_wait_ring
c_func
(paren
id|drm_radeon_private_t
op_star
id|dev_priv
comma
r_int
id|n
)paren
(brace
id|drm_radeon_ring_buffer_t
op_star
id|ring
op_assign
op_amp
id|dev_priv-&gt;ring
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u32
id|last_head
op_assign
id|GET_RING_HEAD
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|dev_priv-&gt;usec_timeout
suffix:semicolon
id|i
op_increment
)paren
(brace
id|u32
id|head
op_assign
id|GET_RING_HEAD
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|ring-&gt;space
op_assign
(paren
id|head
op_minus
id|ring-&gt;tail
)paren
op_star
r_sizeof
(paren
id|u32
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ring-&gt;space
op_le
l_int|0
)paren
id|ring-&gt;space
op_add_assign
id|ring-&gt;size
suffix:semicolon
r_if
c_cond
(paren
id|ring-&gt;space
OG
id|n
)paren
r_return
l_int|0
suffix:semicolon
id|dev_priv-&gt;stats.boxes
op_or_assign
id|RADEON_BOX_WAIT_IDLE
suffix:semicolon
r_if
c_cond
(paren
id|head
op_ne
id|last_head
)paren
id|i
op_assign
l_int|0
suffix:semicolon
id|last_head
op_assign
id|head
suffix:semicolon
id|DRM_UDELAY
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/* FIXME: This return value is ignored in the BEGIN_RING macro! */
macro_line|#if RADEON_FIFO_DEBUG
id|radeon_status
c_func
(paren
id|dev_priv
)paren
suffix:semicolon
id|DRM_ERROR
c_func
(paren
l_string|&quot;failed!&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
id|DRM_ERR
c_func
(paren
id|EBUSY
)paren
suffix:semicolon
)brace
DECL|function|radeon_cp_get_buffers
r_static
r_int
id|radeon_cp_get_buffers
c_func
(paren
id|DRMFILE
id|filp
comma
id|drm_device_t
op_star
id|dev
comma
id|drm_dma_t
op_star
id|d
)paren
(brace
r_int
id|i
suffix:semicolon
id|drm_buf_t
op_star
id|buf
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|d-&gt;granted_count
suffix:semicolon
id|i
OL
id|d-&gt;request_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buf
op_assign
id|radeon_freelist_get
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|buf
)paren
r_return
id|DRM_ERR
c_func
(paren
id|EBUSY
)paren
suffix:semicolon
multiline_comment|/* NOTE: broken client */
id|buf-&gt;filp
op_assign
id|filp
suffix:semicolon
r_if
c_cond
(paren
id|DRM_COPY_TO_USER
c_func
(paren
op_amp
id|d-&gt;request_indices
(braket
id|i
)braket
comma
op_amp
id|buf-&gt;idx
comma
r_sizeof
(paren
id|buf-&gt;idx
)paren
)paren
)paren
r_return
id|DRM_ERR
c_func
(paren
id|EFAULT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|DRM_COPY_TO_USER
c_func
(paren
op_amp
id|d-&gt;request_sizes
(braket
id|i
)braket
comma
op_amp
id|buf-&gt;total
comma
r_sizeof
(paren
id|buf-&gt;total
)paren
)paren
)paren
r_return
id|DRM_ERR
c_func
(paren
id|EFAULT
)paren
suffix:semicolon
id|d-&gt;granted_count
op_increment
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|radeon_cp_buffers
r_int
id|radeon_cp_buffers
c_func
(paren
id|DRM_IOCTL_ARGS
)paren
(brace
id|DRM_DEVICE
suffix:semicolon
id|drm_device_dma_t
op_star
id|dma
op_assign
id|dev-&gt;dma
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
suffix:semicolon
id|drm_dma_t
id|__user
op_star
id|argp
op_assign
(paren
r_void
id|__user
op_star
)paren
id|data
suffix:semicolon
id|drm_dma_t
id|d
suffix:semicolon
id|LOCK_TEST_WITH_RETURN
c_func
(paren
id|dev
comma
id|filp
)paren
suffix:semicolon
id|DRM_COPY_FROM_USER_IOCTL
c_func
(paren
id|d
comma
id|argp
comma
r_sizeof
(paren
id|d
)paren
)paren
suffix:semicolon
multiline_comment|/* Please don&squot;t send us buffers.&n;&t; */
r_if
c_cond
(paren
id|d.send_count
op_ne
l_int|0
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;Process %d trying to send %d buffers via drmDMA&bslash;n&quot;
comma
id|DRM_CURRENTPID
comma
id|d.send_count
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
multiline_comment|/* We&squot;ll send you buffers.&n;&t; */
r_if
c_cond
(paren
id|d.request_count
template_param
id|dma-&gt;buf_count
)paren
(brace
id|DRM_ERROR
c_func
(paren
l_string|&quot;Process %d trying to get %d buffers (of %d max)&bslash;n&quot;
comma
id|DRM_CURRENTPID
comma
id|d.request_count
comma
id|dma-&gt;buf_count
)paren
suffix:semicolon
r_return
id|DRM_ERR
c_func
(paren
id|EINVAL
)paren
suffix:semicolon
)brace
id|d.granted_count
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|d.request_count
)paren
(brace
id|ret
op_assign
id|radeon_cp_get_buffers
c_func
(paren
id|filp
comma
id|dev
comma
op_amp
id|d
)paren
suffix:semicolon
)brace
id|DRM_COPY_TO_USER_IOCTL
c_func
(paren
id|argp
comma
id|d
comma
r_sizeof
(paren
id|d
)paren
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|radeon_driver_preinit
r_int
id|radeon_driver_preinit
c_func
(paren
r_struct
id|drm_device
op_star
id|dev
comma
r_int
r_int
id|flags
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
suffix:semicolon
id|dev_priv
op_assign
id|drm_alloc
c_func
(paren
r_sizeof
(paren
id|drm_radeon_private_t
)paren
comma
id|DRM_MEM_DRIVER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev_priv
op_eq
l_int|NULL
)paren
r_return
id|DRM_ERR
c_func
(paren
id|ENOMEM
)paren
suffix:semicolon
id|memset
c_func
(paren
id|dev_priv
comma
l_int|0
comma
r_sizeof
(paren
id|drm_radeon_private_t
)paren
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
(paren
r_void
op_star
)paren
id|dev_priv
suffix:semicolon
id|dev_priv-&gt;flags
op_assign
id|flags
suffix:semicolon
r_switch
c_cond
(paren
id|flags
op_amp
id|CHIP_FAMILY_MASK
)paren
(brace
r_case
id|CHIP_R100
suffix:colon
r_case
id|CHIP_RV200
suffix:colon
r_case
id|CHIP_R200
suffix:colon
r_case
id|CHIP_R300
suffix:colon
id|dev_priv-&gt;flags
op_or_assign
id|CHIP_HAS_HIERZ
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* all other chips have no hierarchical z buffer */
r_break
suffix:semicolon
)brace
r_return
id|ret
suffix:semicolon
)brace
DECL|function|radeon_driver_postcleanup
r_int
id|radeon_driver_postcleanup
c_func
(paren
r_struct
id|drm_device
op_star
id|dev
)paren
(brace
id|drm_radeon_private_t
op_star
id|dev_priv
op_assign
id|dev-&gt;dev_private
suffix:semicolon
id|DRM_DEBUG
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|drm_free
c_func
(paren
id|dev_priv
comma
r_sizeof
(paren
op_star
id|dev_priv
)paren
comma
id|DRM_MEM_DRIVER
)paren
suffix:semicolon
id|dev-&gt;dev_private
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
