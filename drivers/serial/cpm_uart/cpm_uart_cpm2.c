multiline_comment|/*&n; *  linux/drivers/serial/cpm_uart_cpm2.c&n; *&n; *  Driver for CPM (SCC/SMC) serial ports; CPM2 definitions&n; *&n; *  Maintainer: Kumar Gala (kumar.gala@freescale.com) (CPM2)&n; *              Pantelis Antoniou (panto@intracom.gr) (CPM1)&n; * &n; *  Copyright (C) 2004 Freescale Semiconductor, Inc.&n; *            (C) 2004 Intracom, S.A.&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n; *&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/serial.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;linux/sysrq.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/bootmem.h&gt;
macro_line|#include &lt;linux/dma-mapping.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;linux/serial_core.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &quot;cpm_uart.h&quot;
multiline_comment|/**************************************************************/
DECL|function|cpm_line_cr_cmd
r_void
id|cpm_line_cr_cmd
c_func
(paren
r_int
id|line
comma
r_int
id|cmd
)paren
(brace
r_volatile
id|cpm_cpm2_t
op_star
id|cp
op_assign
id|cpmp
suffix:semicolon
id|ulong
id|val
suffix:semicolon
r_switch
c_cond
(paren
id|line
)paren
(brace
r_case
id|UART_SMC1
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SMC1_PAGE
comma
id|CPM_CR_SMC1_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UART_SMC2
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SMC2_PAGE
comma
id|CPM_CR_SMC2_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UART_SCC1
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SCC1_PAGE
comma
id|CPM_CR_SCC1_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UART_SCC2
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SCC2_PAGE
comma
id|CPM_CR_SCC2_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UART_SCC3
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SCC3_PAGE
comma
id|CPM_CR_SCC3_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UART_SCC4
suffix:colon
id|val
op_assign
id|mk_cr_cmd
c_func
(paren
id|CPM_CR_SCC4_PAGE
comma
id|CPM_CR_SCC4_SBLOCK
comma
l_int|0
comma
id|cmd
)paren
op_or
id|CPM_CR_FLG
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
suffix:semicolon
)brace
id|cp-&gt;cp_cpcr
op_assign
id|val
suffix:semicolon
r_while
c_loop
(paren
id|cp-&gt;cp_cpcr
op_amp
id|CPM_CR_FLG
)paren
suffix:semicolon
)brace
DECL|function|smc1_lineif
r_void
id|smc1_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
multiline_comment|/* SMC1 is only on port D */
id|io-&gt;iop_ppard
op_or_assign
l_int|0x00c00000
suffix:semicolon
id|io-&gt;iop_pdird
op_or_assign
l_int|0x00400000
suffix:semicolon
id|io-&gt;iop_pdird
op_and_assign
op_complement
l_int|0x00800000
suffix:semicolon
id|io-&gt;iop_psord
op_and_assign
op_complement
l_int|0x00c00000
suffix:semicolon
multiline_comment|/* Wire BRG1 to SMC1 */
id|cpm2_immr-&gt;im_cpmux.cmx_smr
op_and_assign
l_int|0x0f
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|1
suffix:semicolon
)brace
DECL|function|smc2_lineif
r_void
id|smc2_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
multiline_comment|/* SMC2 is only on port A */
id|io-&gt;iop_ppara
op_or_assign
l_int|0x00c00000
suffix:semicolon
id|io-&gt;iop_pdira
op_or_assign
l_int|0x00400000
suffix:semicolon
id|io-&gt;iop_pdira
op_and_assign
op_complement
l_int|0x00800000
suffix:semicolon
id|io-&gt;iop_psora
op_and_assign
op_complement
l_int|0x00c00000
suffix:semicolon
multiline_comment|/* Wire BRG2 to SMC2 */
id|cpm2_immr-&gt;im_cpmux.cmx_smr
op_and_assign
l_int|0xf0
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|2
suffix:semicolon
)brace
DECL|function|scc1_lineif
r_void
id|scc1_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
multiline_comment|/* Use Port D for SCC1 instead of other functions.  */
id|io-&gt;iop_ppard
op_or_assign
l_int|0x00000003
suffix:semicolon
id|io-&gt;iop_psord
op_and_assign
op_complement
l_int|0x00000001
suffix:semicolon
multiline_comment|/* Rx */
id|io-&gt;iop_psord
op_or_assign
l_int|0x00000002
suffix:semicolon
multiline_comment|/* Tx */
id|io-&gt;iop_pdird
op_and_assign
op_complement
l_int|0x00000001
suffix:semicolon
multiline_comment|/* Rx */
id|io-&gt;iop_pdird
op_or_assign
l_int|0x00000002
suffix:semicolon
multiline_comment|/* Tx */
multiline_comment|/* Wire BRG1 to SCC1 */
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_and_assign
l_int|0x00ffffff
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_or_assign
l_int|0x00000000
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|1
suffix:semicolon
)brace
DECL|function|scc2_lineif
r_void
id|scc2_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
id|io-&gt;iop_pparb
op_or_assign
l_int|0x008b0000
suffix:semicolon
id|io-&gt;iop_pdirb
op_or_assign
l_int|0x00880000
suffix:semicolon
id|io-&gt;iop_psorb
op_or_assign
l_int|0x00880000
suffix:semicolon
id|io-&gt;iop_pdirb
op_and_assign
op_complement
l_int|0x00030000
suffix:semicolon
id|io-&gt;iop_psorb
op_and_assign
op_complement
l_int|0x00030000
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_and_assign
l_int|0xff00ffff
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_or_assign
l_int|0x00090000
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|2
suffix:semicolon
)brace
DECL|function|scc3_lineif
r_void
id|scc3_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
id|io-&gt;iop_pparb
op_or_assign
l_int|0x008b0000
suffix:semicolon
id|io-&gt;iop_pdirb
op_or_assign
l_int|0x00880000
suffix:semicolon
id|io-&gt;iop_psorb
op_or_assign
l_int|0x00880000
suffix:semicolon
id|io-&gt;iop_pdirb
op_and_assign
op_complement
l_int|0x00030000
suffix:semicolon
id|io-&gt;iop_psorb
op_and_assign
op_complement
l_int|0x00030000
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_and_assign
l_int|0xffff00ff
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_or_assign
l_int|0x00001200
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|3
suffix:semicolon
)brace
DECL|function|scc4_lineif
r_void
id|scc4_lineif
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
r_volatile
id|iop_cpm2_t
op_star
id|io
op_assign
op_amp
id|cpm2_immr-&gt;im_ioport
suffix:semicolon
id|io-&gt;iop_ppard
op_or_assign
l_int|0x00000600
suffix:semicolon
id|io-&gt;iop_psord
op_and_assign
op_complement
l_int|0x00000600
suffix:semicolon
multiline_comment|/* Tx/Rx */
id|io-&gt;iop_pdird
op_and_assign
op_complement
l_int|0x00000200
suffix:semicolon
multiline_comment|/* Rx */
id|io-&gt;iop_pdird
op_or_assign
l_int|0x00000400
suffix:semicolon
multiline_comment|/* Tx */
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_and_assign
l_int|0xffffff00
suffix:semicolon
id|cpm2_immr-&gt;im_cpmux.cmx_scr
op_or_assign
l_int|0x0000001b
suffix:semicolon
id|pinfo-&gt;brg
op_assign
l_int|4
suffix:semicolon
)brace
multiline_comment|/*&n; * Allocate DP-Ram and memory buffers. We need to allocate a transmit and &n; * receive buffer descriptors from dual port ram, and a character&n; * buffer area from host mem. If we are allocating for the console we need&n; * to do it from bootmem&n; */
DECL|function|cpm_uart_allocbuf
r_int
id|cpm_uart_allocbuf
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
comma
r_int
r_int
id|is_con
)paren
(brace
r_int
id|dpmemsz
comma
id|memsz
suffix:semicolon
id|u8
op_star
id|dp_mem
suffix:semicolon
id|uint
id|dp_offset
suffix:semicolon
id|u8
op_star
id|mem_addr
suffix:semicolon
id|dma_addr_t
id|dma_addr
op_assign
l_int|0
suffix:semicolon
id|pr_debug
c_func
(paren
l_string|&quot;CPM uart[%d]:allocbuf&bslash;n&quot;
comma
id|pinfo-&gt;port.line
)paren
suffix:semicolon
id|dpmemsz
op_assign
r_sizeof
(paren
id|cbd_t
)paren
op_star
(paren
id|pinfo-&gt;rx_nrfifos
op_plus
id|pinfo-&gt;tx_nrfifos
)paren
suffix:semicolon
id|dp_offset
op_assign
id|cpm_dpalloc
c_func
(paren
id|dpmemsz
comma
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_DPERR
c_func
(paren
id|dp_offset
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;cpm_uart_cpm.c: could not allocate buffer descriptors&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|dp_mem
op_assign
id|cpm_dpram_addr
c_func
(paren
id|dp_offset
)paren
suffix:semicolon
id|memsz
op_assign
id|L1_CACHE_ALIGN
c_func
(paren
id|pinfo-&gt;rx_nrfifos
op_star
id|pinfo-&gt;rx_fifosize
)paren
op_plus
id|L1_CACHE_ALIGN
c_func
(paren
id|pinfo-&gt;tx_nrfifos
op_star
id|pinfo-&gt;tx_fifosize
)paren
suffix:semicolon
r_if
c_cond
(paren
id|is_con
)paren
id|mem_addr
op_assign
id|alloc_bootmem
c_func
(paren
id|memsz
)paren
suffix:semicolon
r_else
id|mem_addr
op_assign
id|dma_alloc_coherent
c_func
(paren
l_int|NULL
comma
id|memsz
comma
op_amp
id|dma_addr
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mem_addr
op_eq
l_int|NULL
)paren
(brace
id|cpm_dpfree
c_func
(paren
id|dp_offset
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;cpm_uart_cpm.c: could not allocate coherent memory&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|pinfo-&gt;dp_addr
op_assign
id|dp_offset
suffix:semicolon
id|pinfo-&gt;mem_addr
op_assign
id|mem_addr
suffix:semicolon
id|pinfo-&gt;dma_addr
op_assign
id|dma_addr
suffix:semicolon
id|pinfo-&gt;rx_buf
op_assign
id|mem_addr
suffix:semicolon
id|pinfo-&gt;tx_buf
op_assign
id|pinfo-&gt;rx_buf
op_plus
id|L1_CACHE_ALIGN
c_func
(paren
id|pinfo-&gt;rx_nrfifos
op_star
id|pinfo-&gt;rx_fifosize
)paren
suffix:semicolon
id|pinfo-&gt;rx_bd_base
op_assign
(paren
r_volatile
id|cbd_t
op_star
)paren
id|dp_mem
suffix:semicolon
id|pinfo-&gt;tx_bd_base
op_assign
id|pinfo-&gt;rx_bd_base
op_plus
id|pinfo-&gt;rx_nrfifos
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|cpm_uart_freebuf
r_void
id|cpm_uart_freebuf
c_func
(paren
r_struct
id|uart_cpm_port
op_star
id|pinfo
)paren
(brace
id|dma_free_coherent
c_func
(paren
l_int|NULL
comma
id|L1_CACHE_ALIGN
c_func
(paren
id|pinfo-&gt;rx_nrfifos
op_star
id|pinfo-&gt;rx_fifosize
)paren
op_plus
id|L1_CACHE_ALIGN
c_func
(paren
id|pinfo-&gt;tx_nrfifos
op_star
id|pinfo-&gt;tx_fifosize
)paren
comma
id|pinfo-&gt;mem_addr
comma
id|pinfo-&gt;dma_addr
)paren
suffix:semicolon
id|cpm_dpfree
c_func
(paren
id|pinfo-&gt;dp_addr
)paren
suffix:semicolon
)brace
multiline_comment|/* Setup any dynamic params in the uart desc */
DECL|function|cpm_uart_init_portdesc
r_int
id|cpm_uart_init_portdesc
c_func
(paren
r_void
)paren
(brace
id|pr_debug
c_func
(paren
l_string|&quot;CPM uart[-]:init portdesc&bslash;n&quot;
)paren
suffix:semicolon
id|cpm_uart_nr
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef CONFIG_SERIAL_CPM_SMC1
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|smcp
op_assign
(paren
id|smc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_smc
(braket
l_int|0
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|smcup
op_assign
(paren
id|smc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SMC1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_smc
(braket
l_int|0
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|smcp-&gt;smc_smcm
op_or_assign
(paren
id|SMCM_RX
op_or
id|SMCM_TX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|smcp-&gt;smc_smcmr
op_and_assign
op_complement
(paren
id|SMCMR_REN
op_or
id|SMCMR_TEN
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC1
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SMC1
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SERIAL_CPM_SMC2
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|smcp
op_assign
(paren
id|smc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_smc
(braket
l_int|1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|smcup
op_assign
(paren
id|smc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SMC2
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_smc
(braket
l_int|1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|smcp-&gt;smc_smcm
op_or_assign
(paren
id|SMCM_RX
op_or
id|SMCM_TX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|smcp-&gt;smc_smcmr
op_and_assign
op_complement
(paren
id|SMCMR_REN
op_or
id|SMCMR_TEN
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SMC2
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SMC2
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SERIAL_CPM_SCC1
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|sccp
op_assign
(paren
id|scc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|0
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|sccup
op_assign
(paren
id|scc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SCC1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|0
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|sccp-&gt;scc_sccm
op_and_assign
op_complement
(paren
id|UART_SCCM_TX
op_or
id|UART_SCCM_RX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|sccp-&gt;scc_gsmrl
op_and_assign
op_complement
(paren
id|SCC_GSMRL_ENR
op_or
id|SCC_GSMRL_ENT
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC1
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SCC1
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SERIAL_CPM_SCC2
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|sccp
op_assign
(paren
id|scc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|sccup
op_assign
(paren
id|scc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SCC2
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|1
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|sccp-&gt;scc_sccm
op_and_assign
op_complement
(paren
id|UART_SCCM_TX
op_or
id|UART_SCCM_RX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|sccp-&gt;scc_gsmrl
op_and_assign
op_complement
(paren
id|SCC_GSMRL_ENR
op_or
id|SCC_GSMRL_ENT
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC2
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SCC2
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SERIAL_CPM_SCC3
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|sccp
op_assign
(paren
id|scc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|2
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|sccup
op_assign
(paren
id|scc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SCC3
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|2
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|sccp-&gt;scc_sccm
op_and_assign
op_complement
(paren
id|UART_SCCM_TX
op_or
id|UART_SCCM_RX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|sccp-&gt;scc_gsmrl
op_and_assign
op_complement
(paren
id|SCC_GSMRL_ENR
op_or
id|SCC_GSMRL_ENT
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC3
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SCC3
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SERIAL_CPM_SCC4
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|sccp
op_assign
(paren
id|scc_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|3
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|sccup
op_assign
(paren
id|scc_uart_t
op_star
)paren
op_amp
id|cpm2_immr-&gt;im_dprambase
(braket
id|PROFF_SCC4
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|port.mapbase
op_assign
(paren
r_int
r_int
)paren
op_amp
id|cpm2_immr-&gt;im_scc
(braket
l_int|3
)braket
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|sccp-&gt;scc_sccm
op_and_assign
op_complement
(paren
id|UART_SCCM_TX
op_or
id|UART_SCCM_RX
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|sccp-&gt;scc_gsmrl
op_and_assign
op_complement
(paren
id|SCC_GSMRL_ENR
op_or
id|SCC_GSMRL_ENT
)paren
suffix:semicolon
id|cpm_uart_ports
(braket
id|UART_SCC4
)braket
dot
id|port.uartclk
op_assign
(paren
(paren
(paren
id|bd_t
op_star
)paren
id|__res
)paren
op_member_access_from_pointer
id|bi_intfreq
)paren
suffix:semicolon
id|cpm_uart_port_map
(braket
id|cpm_uart_nr
op_increment
)braket
op_assign
id|UART_SCC4
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
eof
