multiline_comment|/*&n; * Copyright (c) 2004, 2005, Voltaire, Inc. All rights reserved.&n; *&n; * This software is available to you under a choice of one of two&n; * licenses.  You may choose to be licensed under the terms of the GNU&n; * General Public License (GPL) Version 2, available from the file&n; * COPYING in the main directory of this source tree, or the&n; * OpenIB.org BSD license below:&n; *&n; *     Redistribution and use in source and binary forms, with or&n; *     without modification, are permitted provided that the following&n; *     conditions are met:&n; *&n; *      - Redistributions of source code must retain the above&n; *        copyright notice, this list of conditions and the following&n; *        disclaimer.&n; *&n; *      - Redistributions in binary form must reproduce the above&n; *        copyright notice, this list of conditions and the following&n; *        disclaimer in the documentation and/or other materials&n; *        provided with the distribution.&n; *&n; * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,&n; * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF&n; * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND&n; * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS&n; * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN&n; * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN&n; * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE&n; * SOFTWARE.&n; *&n; * $Id: mad_priv.h 1389 2004-12-27 22:56:47Z roland $&n; */
macro_line|#ifndef __IB_MAD_PRIV_H__
DECL|macro|__IB_MAD_PRIV_H__
mdefine_line|#define __IB_MAD_PRIV_H__
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/kthread.h&gt;
macro_line|#include &lt;linux/workqueue.h&gt;
macro_line|#include &lt;ib_mad.h&gt;
macro_line|#include &lt;ib_smi.h&gt;
DECL|macro|PFX
mdefine_line|#define PFX &quot;ib_mad: &quot;
DECL|macro|IB_MAD_QPS_CORE
mdefine_line|#define IB_MAD_QPS_CORE&t;&t;2 /* Always QP0 and QP1 as a minimum */
multiline_comment|/* QP and CQ parameters */
DECL|macro|IB_MAD_QP_SEND_SIZE
mdefine_line|#define IB_MAD_QP_SEND_SIZE&t;128
DECL|macro|IB_MAD_QP_RECV_SIZE
mdefine_line|#define IB_MAD_QP_RECV_SIZE&t;512
DECL|macro|IB_MAD_SEND_REQ_MAX_SG
mdefine_line|#define IB_MAD_SEND_REQ_MAX_SG&t;2
DECL|macro|IB_MAD_RECV_REQ_MAX_SG
mdefine_line|#define IB_MAD_RECV_REQ_MAX_SG&t;1
DECL|macro|IB_MAD_SEND_Q_PSN
mdefine_line|#define IB_MAD_SEND_Q_PSN&t;0
multiline_comment|/* Registration table sizes */
DECL|macro|MAX_MGMT_CLASS
mdefine_line|#define MAX_MGMT_CLASS&t;&t;80
DECL|macro|MAX_MGMT_VERSION
mdefine_line|#define MAX_MGMT_VERSION&t;8
DECL|macro|MAX_MGMT_OUI
mdefine_line|#define MAX_MGMT_OUI&t;&t;8
DECL|macro|MAX_MGMT_VENDOR_RANGE2
mdefine_line|#define MAX_MGMT_VENDOR_RANGE2&t;IB_MGMT_CLASS_VENDOR_RANGE2_END - &bslash;&n;&t;&t;&t;&t;IB_MGMT_CLASS_VENDOR_RANGE2_START + 1
DECL|struct|ib_mad_list_head
r_struct
id|ib_mad_list_head
(brace
DECL|member|list
r_struct
id|list_head
id|list
suffix:semicolon
DECL|member|mad_queue
r_struct
id|ib_mad_queue
op_star
id|mad_queue
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_private_header
r_struct
id|ib_mad_private_header
(brace
DECL|member|mad_list
r_struct
id|ib_mad_list_head
id|mad_list
suffix:semicolon
DECL|member|recv_wc
r_struct
id|ib_mad_recv_wc
id|recv_wc
suffix:semicolon
id|DECLARE_PCI_UNMAP_ADDR
c_func
(paren
id|mapping
)paren
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|ib_mad_private
r_struct
id|ib_mad_private
(brace
DECL|member|header
r_struct
id|ib_mad_private_header
id|header
suffix:semicolon
DECL|member|grh
r_struct
id|ib_grh
id|grh
suffix:semicolon
r_union
(brace
DECL|member|mad
r_struct
id|ib_mad
id|mad
suffix:semicolon
DECL|member|rmpp_mad
r_struct
id|ib_rmpp_mad
id|rmpp_mad
suffix:semicolon
DECL|member|smp
r_struct
id|ib_smp
id|smp
suffix:semicolon
DECL|member|mad
)brace
id|mad
suffix:semicolon
)brace
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|ib_mad_agent_private
r_struct
id|ib_mad_agent_private
(brace
DECL|member|agent_list
r_struct
id|list_head
id|agent_list
suffix:semicolon
DECL|member|agent
r_struct
id|ib_mad_agent
id|agent
suffix:semicolon
DECL|member|reg_req
r_struct
id|ib_mad_reg_req
op_star
id|reg_req
suffix:semicolon
DECL|member|qp_info
r_struct
id|ib_mad_qp_info
op_star
id|qp_info
suffix:semicolon
DECL|member|lock
id|spinlock_t
id|lock
suffix:semicolon
DECL|member|send_list
r_struct
id|list_head
id|send_list
suffix:semicolon
DECL|member|wait_list
r_struct
id|list_head
id|wait_list
suffix:semicolon
DECL|member|timed_work
r_struct
id|work_struct
id|timed_work
suffix:semicolon
DECL|member|timeout
r_int
r_int
id|timeout
suffix:semicolon
DECL|member|local_list
r_struct
id|list_head
id|local_list
suffix:semicolon
DECL|member|local_work
r_struct
id|work_struct
id|local_work
suffix:semicolon
DECL|member|refcount
id|atomic_t
id|refcount
suffix:semicolon
DECL|member|wait
id|wait_queue_head_t
id|wait
suffix:semicolon
DECL|member|rmpp_version
id|u8
id|rmpp_version
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_snoop_private
r_struct
id|ib_mad_snoop_private
(brace
DECL|member|agent
r_struct
id|ib_mad_agent
id|agent
suffix:semicolon
DECL|member|qp_info
r_struct
id|ib_mad_qp_info
op_star
id|qp_info
suffix:semicolon
DECL|member|snoop_index
r_int
id|snoop_index
suffix:semicolon
DECL|member|mad_snoop_flags
r_int
id|mad_snoop_flags
suffix:semicolon
DECL|member|refcount
id|atomic_t
id|refcount
suffix:semicolon
DECL|member|wait
id|wait_queue_head_t
id|wait
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_send_wr_private
r_struct
id|ib_mad_send_wr_private
(brace
DECL|member|mad_list
r_struct
id|ib_mad_list_head
id|mad_list
suffix:semicolon
DECL|member|agent_list
r_struct
id|list_head
id|agent_list
suffix:semicolon
DECL|member|agent
r_struct
id|ib_mad_agent
op_star
id|agent
suffix:semicolon
DECL|member|send_wr
r_struct
id|ib_send_wr
id|send_wr
suffix:semicolon
DECL|member|sg_list
r_struct
id|ib_sge
id|sg_list
(braket
id|IB_MAD_SEND_REQ_MAX_SG
)braket
suffix:semicolon
DECL|member|wr_id
id|u64
id|wr_id
suffix:semicolon
multiline_comment|/* client WR ID */
DECL|member|tid
id|u64
id|tid
suffix:semicolon
DECL|member|timeout
r_int
r_int
id|timeout
suffix:semicolon
DECL|member|retry
r_int
id|retry
suffix:semicolon
DECL|member|refcount
r_int
id|refcount
suffix:semicolon
DECL|member|status
r_enum
id|ib_wc_status
id|status
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_local_private
r_struct
id|ib_mad_local_private
(brace
DECL|member|completion_list
r_struct
id|list_head
id|completion_list
suffix:semicolon
DECL|member|mad_priv
r_struct
id|ib_mad_private
op_star
id|mad_priv
suffix:semicolon
DECL|member|recv_mad_agent
r_struct
id|ib_mad_agent_private
op_star
id|recv_mad_agent
suffix:semicolon
DECL|member|send_wr
r_struct
id|ib_send_wr
id|send_wr
suffix:semicolon
DECL|member|sg_list
r_struct
id|ib_sge
id|sg_list
(braket
id|IB_MAD_SEND_REQ_MAX_SG
)braket
suffix:semicolon
DECL|member|wr_id
id|u64
id|wr_id
suffix:semicolon
multiline_comment|/* client WR ID */
DECL|member|tid
id|u64
id|tid
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_mgmt_method_table
r_struct
id|ib_mad_mgmt_method_table
(brace
DECL|member|agent
r_struct
id|ib_mad_agent_private
op_star
id|agent
(braket
id|IB_MGMT_MAX_METHODS
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_mgmt_class_table
r_struct
id|ib_mad_mgmt_class_table
(brace
DECL|member|method_table
r_struct
id|ib_mad_mgmt_method_table
op_star
id|method_table
(braket
id|MAX_MGMT_CLASS
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_mgmt_vendor_class
r_struct
id|ib_mad_mgmt_vendor_class
(brace
DECL|member|oui
id|u8
id|oui
(braket
id|MAX_MGMT_OUI
)braket
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|method_table
r_struct
id|ib_mad_mgmt_method_table
op_star
id|method_table
(braket
id|MAX_MGMT_OUI
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_mgmt_vendor_class_table
r_struct
id|ib_mad_mgmt_vendor_class_table
(brace
DECL|member|vendor_class
r_struct
id|ib_mad_mgmt_vendor_class
op_star
id|vendor_class
(braket
id|MAX_MGMT_VENDOR_RANGE2
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_mgmt_version_table
r_struct
id|ib_mad_mgmt_version_table
(brace
DECL|member|class
r_struct
id|ib_mad_mgmt_class_table
op_star
r_class
suffix:semicolon
DECL|member|vendor
r_struct
id|ib_mad_mgmt_vendor_class_table
op_star
id|vendor
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_queue
r_struct
id|ib_mad_queue
(brace
DECL|member|lock
id|spinlock_t
id|lock
suffix:semicolon
DECL|member|list
r_struct
id|list_head
id|list
suffix:semicolon
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|max_active
r_int
id|max_active
suffix:semicolon
DECL|member|qp_info
r_struct
id|ib_mad_qp_info
op_star
id|qp_info
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_qp_info
r_struct
id|ib_mad_qp_info
(brace
DECL|member|port_priv
r_struct
id|ib_mad_port_private
op_star
id|port_priv
suffix:semicolon
DECL|member|qp
r_struct
id|ib_qp
op_star
id|qp
suffix:semicolon
DECL|member|send_queue
r_struct
id|ib_mad_queue
id|send_queue
suffix:semicolon
DECL|member|recv_queue
r_struct
id|ib_mad_queue
id|recv_queue
suffix:semicolon
DECL|member|overflow_list
r_struct
id|list_head
id|overflow_list
suffix:semicolon
DECL|member|snoop_lock
id|spinlock_t
id|snoop_lock
suffix:semicolon
DECL|member|snoop_table
r_struct
id|ib_mad_snoop_private
op_star
op_star
id|snoop_table
suffix:semicolon
DECL|member|snoop_table_size
r_int
id|snoop_table_size
suffix:semicolon
DECL|member|snoop_count
id|atomic_t
id|snoop_count
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ib_mad_port_private
r_struct
id|ib_mad_port_private
(brace
DECL|member|port_list
r_struct
id|list_head
id|port_list
suffix:semicolon
DECL|member|device
r_struct
id|ib_device
op_star
id|device
suffix:semicolon
DECL|member|port_num
r_int
id|port_num
suffix:semicolon
DECL|member|cq
r_struct
id|ib_cq
op_star
id|cq
suffix:semicolon
DECL|member|pd
r_struct
id|ib_pd
op_star
id|pd
suffix:semicolon
DECL|member|mr
r_struct
id|ib_mr
op_star
id|mr
suffix:semicolon
DECL|member|reg_lock
id|spinlock_t
id|reg_lock
suffix:semicolon
DECL|member|version
r_struct
id|ib_mad_mgmt_version_table
id|version
(braket
id|MAX_MGMT_VERSION
)braket
suffix:semicolon
DECL|member|agent_list
r_struct
id|list_head
id|agent_list
suffix:semicolon
DECL|member|wq
r_struct
id|workqueue_struct
op_star
id|wq
suffix:semicolon
DECL|member|work
r_struct
id|work_struct
id|work
suffix:semicolon
DECL|member|qp_info
r_struct
id|ib_mad_qp_info
id|qp_info
(braket
id|IB_MAD_QPS_CORE
)braket
suffix:semicolon
)brace
suffix:semicolon
macro_line|#endif&t;/* __IB_MAD_PRIV_H__ */
eof
