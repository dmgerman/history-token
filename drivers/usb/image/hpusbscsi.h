multiline_comment|/* Header file for the hpusbscsi driver */
multiline_comment|/* (C) Copyright 2001 Oliver Neukum */
multiline_comment|/* sponsored by the Linux Usb Project */
multiline_comment|/* large parts based on or taken from code by John Fremlin and Matt Dharm */
multiline_comment|/* this file is licensed under the GPL */
multiline_comment|/* A big thanks to Jose for untiring testing */
DECL|typedef|scsi_callback
r_typedef
r_void
(paren
op_star
id|scsi_callback
)paren
(paren
id|Scsi_Cmnd
op_star
)paren
suffix:semicolon
DECL|macro|SENSE_COMMAND_SIZE
mdefine_line|#define SENSE_COMMAND_SIZE 6
DECL|macro|HPUSBSCSI_SENSE_LENGTH
mdefine_line|#define HPUSBSCSI_SENSE_LENGTH 0x16
DECL|struct|hpusbscsi
r_struct
id|hpusbscsi
(brace
DECL|member|lh
r_struct
id|list_head
id|lh
suffix:semicolon
DECL|member|dev
r_struct
id|usb_device
op_star
id|dev
suffix:semicolon
multiline_comment|/* NULL indicates unplugged device */
DECL|member|ep_out
r_int
id|ep_out
suffix:semicolon
DECL|member|ep_in
r_int
id|ep_in
suffix:semicolon
DECL|member|ep_int
r_int
id|ep_int
suffix:semicolon
DECL|member|interrupt_interval
r_int
id|interrupt_interval
suffix:semicolon
DECL|member|number
r_int
id|number
suffix:semicolon
DECL|member|fragment
r_int
id|fragment
suffix:semicolon
DECL|member|host
r_struct
id|Scsi_Host
op_star
id|host
suffix:semicolon
DECL|member|scallback
id|scsi_callback
id|scallback
suffix:semicolon
DECL|member|srb
id|Scsi_Cmnd
op_star
id|srb
suffix:semicolon
DECL|member|pending
id|wait_queue_head_t
id|pending
suffix:semicolon
DECL|member|deathrow
id|wait_queue_head_t
id|deathrow
suffix:semicolon
DECL|member|dataurb
r_struct
id|urb
op_star
id|dataurb
suffix:semicolon
DECL|member|controlurb
r_struct
id|urb
op_star
id|controlurb
suffix:semicolon
DECL|member|state
r_int
id|state
suffix:semicolon
DECL|member|current_data_pipe
r_int
id|current_data_pipe
suffix:semicolon
DECL|member|ctempl
id|Scsi_Host_Template
id|ctempl
suffix:semicolon
DECL|member|sense_command
id|u8
id|sense_command
(braket
id|SENSE_COMMAND_SIZE
)braket
suffix:semicolon
DECL|member|scsi_state_byte
id|u8
id|scsi_state_byte
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|SCSI_ERR_MASK
mdefine_line|#define SCSI_ERR_MASK ~0x3fu
DECL|variable|scsi_command_direction
r_static
r_const
r_int
r_char
id|scsi_command_direction
(braket
l_int|256
op_div
l_int|8
)braket
op_assign
(brace
l_int|0x28
comma
l_int|0x81
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x20
comma
l_int|0x01
comma
l_int|0x90
comma
l_int|0x77
comma
l_int|0x0C
comma
l_int|0x20
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|macro|DIRECTION_IS_IN
mdefine_line|#define DIRECTION_IS_IN(x) ((scsi_command_direction[x&gt;&gt;3] &gt;&gt; (x &amp; 7)) &amp; 1)
r_static
r_int
id|hpusbscsi_scsi_detect
(paren
r_struct
id|SHT
op_star
id|sht
)paren
suffix:semicolon
r_static
r_void
id|simple_command_callback
c_func
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|scatter_gather_callback
c_func
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|simple_payload_callback
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|request_sense_callback
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|control_interrupt_callback
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|simple_done
(paren
r_struct
id|urb
op_star
id|u
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_int
id|hpusbscsi_scsi_queuecommand
(paren
id|Scsi_Cmnd
op_star
id|srb
comma
id|scsi_callback
id|callback
)paren
suffix:semicolon
r_static
r_int
id|hpusbscsi_scsi_host_reset
(paren
id|Scsi_Cmnd
op_star
id|srb
)paren
suffix:semicolon
r_static
r_int
id|hpusbscsi_scsi_abort
(paren
id|Scsi_Cmnd
op_star
id|srb
)paren
suffix:semicolon
r_static
r_void
id|issue_request_sense
(paren
r_struct
id|hpusbscsi
op_star
id|hpusbscsi
)paren
suffix:semicolon
DECL|variable|hpusbscsi_scsi_host_template
r_static
id|Scsi_Host_Template
id|hpusbscsi_scsi_host_template
op_assign
(brace
id|name
suffix:colon
l_string|&quot;hpusbscsi&quot;
comma
id|detect
suffix:colon
id|hpusbscsi_scsi_detect
comma
singleline_comment|//&t;release:&t;hpusbscsi_scsi_release,
id|queuecommand
suffix:colon
id|hpusbscsi_scsi_queuecommand
comma
id|eh_abort_handler
suffix:colon
id|hpusbscsi_scsi_abort
comma
id|eh_host_reset_handler
suffix:colon
id|hpusbscsi_scsi_host_reset
comma
id|sg_tablesize
suffix:colon
id|SG_ALL
comma
id|can_queue
suffix:colon
l_int|1
comma
id|this_id
suffix:colon
op_minus
l_int|1
comma
id|cmd_per_lun
suffix:colon
l_int|1
comma
id|present
suffix:colon
l_int|0
comma
id|unchecked_isa_dma
suffix:colon
id|FALSE
comma
id|use_clustering
suffix:colon
id|TRUE
comma
id|emulated
suffix:colon
id|TRUE
)brace
suffix:semicolon
multiline_comment|/* defines for internal driver state */
DECL|macro|HP_STATE_FREE
mdefine_line|#define HP_STATE_FREE                 0  /*ready for next request */
DECL|macro|HP_STATE_BEGINNING
mdefine_line|#define HP_STATE_BEGINNING      1  /*command being transfered */
DECL|macro|HP_STATE_WORKING
mdefine_line|#define HP_STATE_WORKING         2  /* data transfer stage */
DECL|macro|HP_STATE_ERROR
mdefine_line|#define HP_STATE_ERROR             3  /* error has been reported */
DECL|macro|HP_STATE_WAIT
mdefine_line|#define HP_STATE_WAIT                 4  /* waiting for status transfer */
DECL|macro|HP_STATE_PREMATURE
mdefine_line|#define HP_STATE_PREMATURE              5 /* status prematurely reported */
eof
