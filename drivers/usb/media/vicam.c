multiline_comment|/*&n; * USB ViCam WebCam driver&n; * Copyright (c) 2002 Joe Burks (jburks@wavicle.org),&n; *                    Christopher L Cheney (ccheney@cheney.cx),&n; *                    Pavel Machek (pavel@suse.cz),&n; *                    John Tyner (jtyner@cs.ucr.edu),&n; *                    Monroe Williams (monroe@pobox.com)&n; *&n; * Supports 3COM HomeConnect PC Digital WebCam&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; *&n; * This source code is based heavily on the CPiA webcam driver which was&n; * written by Peter Pregler, Scott J. Bertin and Johannes Erdfelt&n; *&n; * Portions of this code were also copied from usbvideo.c&n; *&n; * Special thanks to the the whole team at Sourceforge for help making&n; * this driver become a reality.  Notably:&n; * Andy Armstrong who reverse engineered the color encoding and&n; * Pavel Machek and Chris Cheney who worked on reverse engineering the&n; *    camera controls and wrote the first generation driver.&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/videodev.h&gt;
macro_line|#include &lt;linux/usb.h&gt;
macro_line|#include &lt;linux/vmalloc.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &quot;usbvideo.h&quot;
singleline_comment|// #define VICAM_DEBUG
macro_line|#ifdef VICAM_DEBUG
DECL|macro|ADBG
mdefine_line|#define ADBG(lineno,fmt,args...) printk(fmt, jiffies, __FUNCTION__, lineno, ##args)
DECL|macro|DBG
mdefine_line|#define DBG(fmt,args...) ADBG((__LINE__),KERN_DEBUG __FILE__&quot;(%ld):%s (%d):&quot;fmt,##args)
macro_line|#else
DECL|macro|DBG
mdefine_line|#define DBG(fmn,args...) do {} while(0)
macro_line|#endif
DECL|macro|DRIVER_AUTHOR
mdefine_line|#define DRIVER_AUTHOR           &quot;Joe Burks, jburks@wavicle.org&quot;
DECL|macro|DRIVER_DESC
mdefine_line|#define DRIVER_DESC             &quot;ViCam WebCam Driver&quot;
multiline_comment|/* Define these values to match your device */
DECL|macro|USB_VICAM_VENDOR_ID
mdefine_line|#define USB_VICAM_VENDOR_ID&t;0x04c1
DECL|macro|USB_VICAM_PRODUCT_ID
mdefine_line|#define USB_VICAM_PRODUCT_ID&t;0x009d
DECL|macro|VICAM_BYTES_PER_PIXEL
mdefine_line|#define VICAM_BYTES_PER_PIXEL   3
DECL|macro|VICAM_MAX_READ_SIZE
mdefine_line|#define VICAM_MAX_READ_SIZE     (512*242+128)
DECL|macro|VICAM_MAX_FRAME_SIZE
mdefine_line|#define VICAM_MAX_FRAME_SIZE    (VICAM_BYTES_PER_PIXEL*320*240)
DECL|macro|VICAM_FRAMES
mdefine_line|#define VICAM_FRAMES            2
DECL|macro|VICAM_HEADER_SIZE
mdefine_line|#define VICAM_HEADER_SIZE       64
DECL|macro|clamp
mdefine_line|#define clamp( x, l, h )        max_t( __typeof__( x ),         &bslash;&n;                                       ( l ),                   &bslash;&n;                                       min_t( __typeof__( x ),  &bslash;&n;                                              ( h ),            &bslash;&n;                                              ( x ) ) )
multiline_comment|/* Not sure what all the bytes in these char&n; * arrays do, but they&squot;re necessary to make&n; * the camera work.&n; */
DECL|variable|setup1
r_static
r_int
r_char
id|setup1
(braket
)braket
op_assign
(brace
l_int|0xB6
comma
l_int|0xC3
comma
l_int|0x1F
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x64
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFD
comma
l_int|0xFF
comma
l_int|0x0E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xDE
comma
l_int|0x00
comma
l_int|0x8E
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0x09
comma
l_int|0x40
comma
l_int|0x03
comma
l_int|0xC0
comma
l_int|0x17
comma
l_int|0x44
comma
l_int|0x03
comma
l_int|0x4B
comma
l_int|0xAF
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x4B
comma
l_int|0xAF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|setup2
r_static
r_int
r_char
id|setup2
(braket
)braket
op_assign
(brace
l_int|0xB6
comma
l_int|0xC3
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x64
comma
l_int|0x18
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|setup3
r_static
r_int
r_char
id|setup3
(braket
)braket
op_assign
(brace
l_int|0xB6
comma
l_int|0xC3
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x64
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|setup4
r_static
r_int
r_char
id|setup4
(braket
)braket
op_assign
(brace
l_int|0xB6
comma
l_int|0xC3
comma
l_int|0x8F
comma
l_int|0x06
comma
l_int|0x02
comma
l_int|0x64
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x08
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x3E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x54
comma
l_int|0x01
comma
l_int|0xAA
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xC8
comma
l_int|0x05
comma
l_int|0xB6
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x42
comma
l_int|0x01
comma
l_int|0xD2
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x7C
comma
l_int|0x00
comma
l_int|0x16
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x56
comma
l_int|0x00
comma
l_int|0x18
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x1E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xEC
comma
l_int|0x27
comma
l_int|0x28
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x16
comma
l_int|0x01
comma
l_int|0x8E
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0E
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xD7
comma
l_int|0x09
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x77
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0x09
comma
l_int|0xC1
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xFE
comma
l_int|0x05
comma
l_int|0x24
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0x04
comma
l_int|0x06
comma
l_int|0x26
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0xDF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x17
comma
l_int|0x00
comma
l_int|0x57
comma
l_int|0x00
comma
l_int|0x17
comma
l_int|0x02
comma
l_int|0xD7
comma
l_int|0x09
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x77
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0x0A
comma
l_int|0xC1
comma
l_int|0xE7
comma
l_int|0x57
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0x0D
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x57
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0x0F
comma
l_int|0xC0
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xC6
comma
l_int|0x00
comma
l_int|0xE7
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0xC8
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0xDF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x27
comma
l_int|0xDA
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0B
comma
l_int|0x06
comma
l_int|0x73
comma
l_int|0xCF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x78
comma
l_int|0x01
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x1A
comma
l_int|0x03
comma
l_int|0x6E
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0x24
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0x02
comma
l_int|0x06
comma
l_int|0x26
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0xFE
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0x02
comma
l_int|0x06
comma
l_int|0x04
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xFE
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x27
comma
l_int|0xDA
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x57
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0x02
comma
l_int|0xCA
comma
l_int|0x04
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x66
comma
l_int|0x05
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x06
comma
l_int|0xC8
comma
l_int|0x09
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xDA
comma
l_int|0x02
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xCF
comma
l_int|0x17
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0xEF
comma
l_int|0x57
comma
l_int|0x81
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xA0
comma
l_int|0xB6
comma
l_int|0x01
comma
l_int|0xEF
comma
l_int|0x57
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xA0
comma
l_int|0x40
comma
l_int|0x02
comma
l_int|0xEF
comma
l_int|0x57
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0B
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xA0
comma
l_int|0x46
comma
l_int|0x03
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0A
comma
l_int|0xC0
comma
l_int|0x46
comma
l_int|0xAF
comma
l_int|0x47
comma
l_int|0xAF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x40
comma
l_int|0x02
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x2E
comma
l_int|0x00
comma
l_int|0x0A
comma
l_int|0xC0
comma
l_int|0xEF
comma
l_int|0x87
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x00
comma
l_int|0x0E
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0x57
comma
l_int|0x51
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xC0
comma
l_int|0x9E
comma
l_int|0x02
comma
l_int|0xC0
comma
l_int|0x57
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0x57
comma
l_int|0x55
comma
l_int|0x00
comma
l_int|0x12
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0x57
comma
l_int|0x56
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xC0
comma
l_int|0x72
comma
l_int|0x02
comma
l_int|0x9F
comma
l_int|0xCF
comma
l_int|0xD6
comma
l_int|0x02
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0x08
comma
l_int|0x06
comma
l_int|0x01
comma
l_int|0xD0
comma
l_int|0x6F
comma
l_int|0x90
comma
l_int|0x08
comma
l_int|0x06
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x08
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0x08
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x2F
comma
l_int|0x0E
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x08
comma
l_int|0x06
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x08
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0x08
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xCF
comma
l_int|0xD6
comma
l_int|0x02
comma
l_int|0x2F
comma
l_int|0x0E
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0xEF
comma
l_int|0x87
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xCF
comma
l_int|0xD6
comma
l_int|0x02
comma
l_int|0xEF
comma
l_int|0x67
comma
l_int|0x7F
comma
l_int|0xFF
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xFD
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xEF
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0x28
comma
l_int|0xC0
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xB8
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0xE0
comma
l_int|0x21
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xA8
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x08
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xDF
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0x0A
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xB8
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x9E
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x44
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xFE
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0x09
comma
l_int|0x20
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0x77
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x0F
comma
l_int|0xC1
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xF7
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xF7
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x08
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x08
comma
l_int|0xDA
comma
l_int|0x5E
comma
l_int|0xC1
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0A
comma
l_int|0x06
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x0B
comma
l_int|0x06
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x0A
comma
l_int|0x06
comma
l_int|0xEF
comma
l_int|0x67
comma
l_int|0x7F
comma
l_int|0xFF
comma
l_int|0x09
comma
l_int|0x06
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x0D
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xEF
comma
l_int|0xFF
comma
l_int|0x28
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0x17
comma
l_int|0xD8
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x1E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xDA
comma
l_int|0x02
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xF2
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0xF6
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x06
comma
l_int|0xF4
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xD6
comma
l_int|0x02
comma
l_int|0xF8
comma
l_int|0x05
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0xF2
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x80
comma
l_int|0x50
comma
l_int|0xAF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x2F
comma
l_int|0x0C
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x2F
comma
l_int|0x0C
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xF2
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0xF6
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xE2
comma
l_int|0x05
comma
l_int|0xF4
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xCE
comma
l_int|0x02
comma
l_int|0xF8
comma
l_int|0x05
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0xF2
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x80
comma
l_int|0x51
comma
l_int|0xAF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x66
comma
l_int|0x04
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x1A
comma
l_int|0x03
comma
l_int|0x59
comma
l_int|0xAF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0x0C
comma
l_int|0x06
comma
l_int|0x41
comma
l_int|0xD1
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x3C
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x44
comma
l_int|0x05
comma
l_int|0x68
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x3B
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x44
comma
l_int|0x05
comma
l_int|0x6F
comma
l_int|0x00
comma
l_int|0x0C
comma
l_int|0x06
comma
l_int|0x68
comma
l_int|0x00
comma
l_int|0xE0
comma
l_int|0x07
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0xE8
comma
l_int|0x0B
comma
l_int|0x0A
comma
l_int|0x06
comma
l_int|0xE8
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xE0
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0xE0
comma
l_int|0x07
comma
l_int|0xEC
comma
l_int|0x01
comma
l_int|0xE0
comma
l_int|0x07
comma
l_int|0xFC
comma
l_int|0xFF
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x0B
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x06
comma
l_int|0x24
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x06
comma
l_int|0xFE
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x26
comma
l_int|0x01
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x0B
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x78
comma
l_int|0x01
comma
l_int|0xEF
comma
l_int|0x77
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xC0
comma
l_int|0x14
comma
l_int|0x04
comma
l_int|0xEF
comma
l_int|0x77
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x37
comma
l_int|0xC0
comma
l_int|0xEF
comma
l_int|0x77
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0D
comma
l_int|0x06
comma
l_int|0x0F
comma
l_int|0xC1
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0D
comma
l_int|0x06
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x30
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0xFF
comma
l_int|0x4F
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xA8
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x38
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x44
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0x77
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0xC1
comma
l_int|0x08
comma
l_int|0xDA
comma
l_int|0x75
comma
l_int|0xC1
comma
l_int|0xC1
comma
l_int|0x77
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x0A
comma
l_int|0xC1
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x2C
comma
l_int|0xCF
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x22
comma
l_int|0xCF
comma
l_int|0xEF
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x0D
comma
l_int|0x06
comma
l_int|0xEF
comma
l_int|0x57
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x1B
comma
l_int|0xC0
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x30
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0xFF
comma
l_int|0x4F
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xA8
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x38
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x44
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0x67
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x57
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0xC0
comma
l_int|0x08
comma
l_int|0xDA
comma
l_int|0x73
comma
l_int|0xC1
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x12
comma
l_int|0x00
comma
l_int|0xEF
comma
l_int|0x57
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x02
comma
l_int|0xC0
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x23
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x14
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0xEA
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x3E
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x0A
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x09
comma
l_int|0xE4
comma
l_int|0x05
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0x27
comma
l_int|0xD8
comma
l_int|0xFA
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x0E
comma
l_int|0x06
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x4E
comma
l_int|0x06
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x06
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x66
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xC6
comma
l_int|0x00
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0xE2
comma
l_int|0x05
comma
l_int|0x41
comma
l_int|0xD0
comma
l_int|0x01
comma
l_int|0xD2
comma
l_int|0xC1
comma
l_int|0x17
comma
l_int|0x23
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0xDC
comma
l_int|0x04
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x0B
comma
l_int|0xE3
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x09
comma
l_int|0xE6
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x09
comma
l_int|0xE6
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0xD1
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x0B
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x09
comma
l_int|0xE8
comma
l_int|0x05
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x0C
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x09
comma
l_int|0xE8
comma
l_int|0x05
comma
l_int|0xC1
comma
l_int|0xD1
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x0D
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x09
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x32
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x0F
comma
l_int|0x00
comma
l_int|0xC1
comma
l_int|0x07
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x28
comma
l_int|0x05
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xD9
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xC8
comma
l_int|0x07
comma
l_int|0x0A
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0xC0
comma
l_int|0x67
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x27
comma
l_int|0x80
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xF9
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x01
comma
l_int|0xD2
comma
l_int|0x08
comma
l_int|0xDA
comma
l_int|0x72
comma
l_int|0xC1
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x27
comma
l_int|0x00
comma
l_int|0x1E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0xFF
comma
l_int|0x00
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0x7F
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x80
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x0A
comma
l_int|0x05
comma
l_int|0x67
comma
l_int|0x00
comma
l_int|0x1E
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xBF
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x9F
comma
l_int|0xAF
comma
l_int|0x0A
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xFE
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xFE
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xC1
comma
l_int|0x09
comma
l_int|0x20
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xC0
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0xC8
comma
l_int|0x09
comma
l_int|0xFC
comma
l_int|0x05
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0x22
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xFF
comma
l_int|0xFE
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xBF
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x67
comma
l_int|0xBF
comma
l_int|0xFF
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x00
comma
l_int|0xDA
comma
l_int|0xE8
comma
l_int|0x09
comma
l_int|0x20
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x00
comma
l_int|0xDA
comma
l_int|0xE8
comma
l_int|0x09
comma
l_int|0x20
comma
l_int|0xC0
comma
l_int|0x6D
comma
l_int|0xC1
comma
l_int|0xE7
comma
l_int|0x87
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x24
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x32
comma
l_int|0x00
comma
l_int|0x12
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x77
comma
l_int|0x00
comma
l_int|0x80
comma
l_int|0x12
comma
l_int|0xC0
comma
l_int|0x7C
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0xE7
comma
l_int|0x07
comma
l_int|0x20
comma
l_int|0x4E
comma
l_int|0x12
comma
l_int|0xC0
comma
l_int|0xE7
comma
l_int|0x77
comma
l_int|0x00
comma
l_int|0x80
comma
l_int|0x12
comma
l_int|0xC0
comma
l_int|0x7C
comma
l_int|0xC0
comma
l_int|0x97
comma
l_int|0xCF
comma
l_int|0x09
comma
l_int|0x02
comma
l_int|0x19
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x80
comma
l_int|0x96
comma
l_int|0x09
comma
l_int|0x04
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x05
comma
l_int|0x81
comma
l_int|0x02
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
)brace
suffix:semicolon
DECL|variable|setup5
r_static
r_int
r_char
id|setup5
(braket
)braket
op_assign
(brace
l_int|0xB6
comma
l_int|0xC3
comma
l_int|0x2F
comma
l_int|0x01
comma
l_int|0x03
comma
l_int|0x64
comma
l_int|0x0E
comma
l_int|0x00
comma
l_int|0x14
comma
l_int|0x00
comma
l_int|0x1A
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0x00
comma
l_int|0x26
comma
l_int|0x00
comma
l_int|0x4A
comma
l_int|0x00
comma
l_int|0x64
comma
l_int|0x00
comma
l_int|0x6A
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0x00
comma
l_int|0x9A
comma
l_int|0x00
comma
l_int|0xA0
comma
l_int|0x00
comma
l_int|0xB2
comma
l_int|0x00
comma
l_int|0xB8
comma
l_int|0x00
comma
l_int|0xBE
comma
l_int|0x00
comma
l_int|0xC2
comma
l_int|0x00
comma
l_int|0xC8
comma
l_int|0x00
comma
l_int|0xCE
comma
l_int|0x00
comma
l_int|0xDC
comma
l_int|0x00
comma
l_int|0xDA
comma
l_int|0x00
comma
l_int|0xE2
comma
l_int|0x00
comma
l_int|0xE0
comma
l_int|0x00
comma
l_int|0xE8
comma
l_int|0x00
comma
l_int|0xE6
comma
l_int|0x00
comma
l_int|0xEE
comma
l_int|0x00
comma
l_int|0xEC
comma
l_int|0x00
comma
l_int|0xF2
comma
l_int|0x00
comma
l_int|0xF8
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x0A
comma
l_int|0x01
comma
l_int|0x0E
comma
l_int|0x01
comma
l_int|0x12
comma
l_int|0x01
comma
l_int|0x1E
comma
l_int|0x01
comma
l_int|0x22
comma
l_int|0x01
comma
l_int|0x28
comma
l_int|0x01
comma
l_int|0x2C
comma
l_int|0x01
comma
l_int|0x32
comma
l_int|0x01
comma
l_int|0x36
comma
l_int|0x01
comma
l_int|0x44
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x01
comma
l_int|0x5E
comma
l_int|0x01
comma
l_int|0x72
comma
l_int|0x01
comma
l_int|0x76
comma
l_int|0x01
comma
l_int|0x7A
comma
l_int|0x01
comma
l_int|0x80
comma
l_int|0x01
comma
l_int|0x88
comma
l_int|0x01
comma
l_int|0x8C
comma
l_int|0x01
comma
l_int|0x94
comma
l_int|0x01
comma
l_int|0x9C
comma
l_int|0x01
comma
l_int|0xA0
comma
l_int|0x01
comma
l_int|0xA4
comma
l_int|0x01
comma
l_int|0xAA
comma
l_int|0x01
comma
l_int|0xB0
comma
l_int|0x01
comma
l_int|0xB4
comma
l_int|0x01
comma
l_int|0xBA
comma
l_int|0x01
comma
l_int|0xD0
comma
l_int|0x01
comma
l_int|0xDA
comma
l_int|0x01
comma
l_int|0xF6
comma
l_int|0x01
comma
l_int|0xFA
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x34
comma
l_int|0x02
comma
l_int|0x3C
comma
l_int|0x02
comma
l_int|0x44
comma
l_int|0x02
comma
l_int|0x4A
comma
l_int|0x02
comma
l_int|0x50
comma
l_int|0x02
comma
l_int|0x56
comma
l_int|0x02
comma
l_int|0x74
comma
l_int|0x02
comma
l_int|0x78
comma
l_int|0x02
comma
l_int|0x7E
comma
l_int|0x02
comma
l_int|0x84
comma
l_int|0x02
comma
l_int|0x8A
comma
l_int|0x02
comma
l_int|0x88
comma
l_int|0x02
comma
l_int|0x90
comma
l_int|0x02
comma
l_int|0x8E
comma
l_int|0x02
comma
l_int|0x94
comma
l_int|0x02
comma
l_int|0xA2
comma
l_int|0x02
comma
l_int|0xA8
comma
l_int|0x02
comma
l_int|0xAE
comma
l_int|0x02
comma
l_int|0xB4
comma
l_int|0x02
comma
l_int|0xBA
comma
l_int|0x02
comma
l_int|0xB8
comma
l_int|0x02
comma
l_int|0xC0
comma
l_int|0x02
comma
l_int|0xBE
comma
l_int|0x02
comma
l_int|0xC4
comma
l_int|0x02
comma
l_int|0xD0
comma
l_int|0x02
comma
l_int|0xD4
comma
l_int|0x02
comma
l_int|0xE0
comma
l_int|0x02
comma
l_int|0xE6
comma
l_int|0x02
comma
l_int|0xEE
comma
l_int|0x02
comma
l_int|0xF8
comma
l_int|0x02
comma
l_int|0xFC
comma
l_int|0x02
comma
l_int|0x06
comma
l_int|0x03
comma
l_int|0x1E
comma
l_int|0x03
comma
l_int|0x24
comma
l_int|0x03
comma
l_int|0x28
comma
l_int|0x03
comma
l_int|0x30
comma
l_int|0x03
comma
l_int|0x2E
comma
l_int|0x03
comma
l_int|0x3C
comma
l_int|0x03
comma
l_int|0x4A
comma
l_int|0x03
comma
l_int|0x4E
comma
l_int|0x03
comma
l_int|0x54
comma
l_int|0x03
comma
l_int|0x58
comma
l_int|0x03
comma
l_int|0x5E
comma
l_int|0x03
comma
l_int|0x66
comma
l_int|0x03
comma
l_int|0x6E
comma
l_int|0x03
comma
l_int|0x7A
comma
l_int|0x03
comma
l_int|0x86
comma
l_int|0x03
comma
l_int|0x8E
comma
l_int|0x03
comma
l_int|0x96
comma
l_int|0x03
comma
l_int|0xB2
comma
l_int|0x03
comma
l_int|0xB8
comma
l_int|0x03
comma
l_int|0xC6
comma
l_int|0x03
comma
l_int|0xCC
comma
l_int|0x03
comma
l_int|0xD4
comma
l_int|0x03
comma
l_int|0xDA
comma
l_int|0x03
comma
l_int|0xE8
comma
l_int|0x03
comma
l_int|0xF4
comma
l_int|0x03
comma
l_int|0xFC
comma
l_int|0x03
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x20
comma
l_int|0x04
comma
l_int|0x2A
comma
l_int|0x04
comma
l_int|0x32
comma
l_int|0x04
comma
l_int|0x36
comma
l_int|0x04
comma
l_int|0x3E
comma
l_int|0x04
comma
l_int|0x44
comma
l_int|0x04
comma
l_int|0x42
comma
l_int|0x04
comma
l_int|0x48
comma
l_int|0x04
comma
l_int|0x4E
comma
l_int|0x04
comma
l_int|0x4C
comma
l_int|0x04
comma
l_int|0x54
comma
l_int|0x04
comma
l_int|0x52
comma
l_int|0x04
comma
l_int|0x5A
comma
l_int|0x04
comma
l_int|0x5E
comma
l_int|0x04
comma
l_int|0x62
comma
l_int|0x04
comma
l_int|0x68
comma
l_int|0x04
comma
l_int|0x74
comma
l_int|0x04
comma
l_int|0x7C
comma
l_int|0x04
comma
l_int|0x80
comma
l_int|0x04
comma
l_int|0x88
comma
l_int|0x04
comma
l_int|0x8C
comma
l_int|0x04
comma
l_int|0x94
comma
l_int|0x04
comma
l_int|0x9A
comma
l_int|0x04
comma
l_int|0xA2
comma
l_int|0x04
comma
l_int|0xA6
comma
l_int|0x04
comma
l_int|0xAE
comma
l_int|0x04
comma
l_int|0xB4
comma
l_int|0x04
comma
l_int|0xC0
comma
l_int|0x04
comma
l_int|0xCC
comma
l_int|0x04
comma
l_int|0xD8
comma
l_int|0x04
comma
l_int|0x2A
comma
l_int|0x05
comma
l_int|0x46
comma
l_int|0x05
comma
l_int|0x6C
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|function|kvirt_to_pa
r_static
r_int
r_int
id|kvirt_to_pa
c_func
(paren
r_int
r_int
id|adr
)paren
(brace
r_int
r_int
id|kva
comma
id|ret
suffix:semicolon
id|kva
op_assign
(paren
r_int
r_int
)paren
id|page_address
c_func
(paren
id|vmalloc_to_page
c_func
(paren
(paren
r_void
op_star
)paren
id|adr
)paren
)paren
suffix:semicolon
id|kva
op_or_assign
id|adr
op_amp
(paren
id|PAGE_SIZE
op_minus
l_int|1
)paren
suffix:semicolon
multiline_comment|/* restore the offset */
id|ret
op_assign
id|__pa
c_func
(paren
id|kva
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
multiline_comment|/* rvmalloc / rvfree copied from usbvideo.c&n; *&n; * Not sure why these are not yet non-statics which I can reference through&n; * usbvideo.h the same as it is in 2.4.20.  I bet this will get fixed sometime&n; * in the future.&n; * &n;*/
DECL|function|rvmalloc
r_static
r_void
op_star
id|rvmalloc
c_func
(paren
r_int
r_int
id|size
)paren
(brace
r_void
op_star
id|mem
suffix:semicolon
r_int
r_int
id|adr
suffix:semicolon
id|size
op_assign
id|PAGE_ALIGN
c_func
(paren
id|size
)paren
suffix:semicolon
id|mem
op_assign
id|vmalloc_32
c_func
(paren
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mem
)paren
r_return
l_int|NULL
suffix:semicolon
id|memset
c_func
(paren
id|mem
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Clear the ram out, no junk to the user */
id|adr
op_assign
(paren
r_int
r_int
)paren
id|mem
suffix:semicolon
r_while
c_loop
(paren
id|size
OG
l_int|0
)paren
(brace
id|SetPageReserved
c_func
(paren
id|vmalloc_to_page
c_func
(paren
(paren
r_void
op_star
)paren
id|adr
)paren
)paren
suffix:semicolon
id|adr
op_add_assign
id|PAGE_SIZE
suffix:semicolon
id|size
op_sub_assign
id|PAGE_SIZE
suffix:semicolon
)brace
r_return
id|mem
suffix:semicolon
)brace
DECL|function|rvfree
r_static
r_void
id|rvfree
c_func
(paren
r_void
op_star
id|mem
comma
r_int
r_int
id|size
)paren
(brace
r_int
r_int
id|adr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mem
)paren
r_return
suffix:semicolon
id|adr
op_assign
(paren
r_int
r_int
)paren
id|mem
suffix:semicolon
r_while
c_loop
(paren
(paren
r_int
)paren
id|size
OG
l_int|0
)paren
(brace
id|ClearPageReserved
c_func
(paren
id|vmalloc_to_page
c_func
(paren
(paren
r_void
op_star
)paren
id|adr
)paren
)paren
suffix:semicolon
id|adr
op_add_assign
id|PAGE_SIZE
suffix:semicolon
id|size
op_sub_assign
id|PAGE_SIZE
suffix:semicolon
)brace
id|vfree
c_func
(paren
id|mem
)paren
suffix:semicolon
)brace
DECL|struct|vicam_camera
r_struct
id|vicam_camera
(brace
DECL|member|shutter_speed
id|u16
id|shutter_speed
suffix:semicolon
singleline_comment|// capture shutter speed
DECL|member|gain
id|u16
id|gain
suffix:semicolon
singleline_comment|// capture gain
DECL|member|raw_image
id|u8
op_star
id|raw_image
suffix:semicolon
singleline_comment|// raw data captured from the camera
DECL|member|framebuf
id|u8
op_star
id|framebuf
suffix:semicolon
singleline_comment|// processed data in RGB24 format
DECL|member|cntrlbuf
id|u8
op_star
id|cntrlbuf
suffix:semicolon
singleline_comment|// area used to send control msgs
DECL|member|vdev
r_struct
id|video_device
id|vdev
suffix:semicolon
singleline_comment|// v4l video device
DECL|member|udev
r_struct
id|usb_device
op_star
id|udev
suffix:semicolon
singleline_comment|// usb device
multiline_comment|/* guard against simultaneous accesses to the camera */
DECL|member|cam_lock
r_struct
id|semaphore
id|cam_lock
suffix:semicolon
DECL|member|is_initialized
r_int
id|is_initialized
suffix:semicolon
DECL|member|open_count
id|u8
id|open_count
suffix:semicolon
DECL|member|bulkEndpoint
id|u8
id|bulkEndpoint
suffix:semicolon
DECL|member|needsDummyRead
r_int
id|needsDummyRead
suffix:semicolon
macro_line|#if defined(CONFIG_VIDEO_PROC_FS)
DECL|member|proc_dir
r_struct
id|proc_dir_entry
op_star
id|proc_dir
suffix:semicolon
macro_line|#endif
)brace
suffix:semicolon
r_static
r_int
id|vicam_probe
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
comma
r_const
r_struct
id|usb_device_id
op_star
id|id
)paren
suffix:semicolon
r_static
r_void
id|vicam_disconnect
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
)paren
suffix:semicolon
r_static
r_void
id|read_frame
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
comma
r_int
id|framenum
)paren
suffix:semicolon
r_static
r_void
id|vicam_decode_color
c_func
(paren
r_const
id|u8
op_star
comma
id|u8
op_star
)paren
suffix:semicolon
DECL|function|__send_control_msg
r_static
r_int
id|__send_control_msg
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
comma
id|u8
id|request
comma
id|u16
id|value
comma
id|u16
id|index
comma
r_int
r_char
op_star
id|cp
comma
id|u16
id|size
)paren
(brace
r_int
id|status
suffix:semicolon
multiline_comment|/* cp must be memory that has been allocated by kmalloc */
id|status
op_assign
id|usb_control_msg
c_func
(paren
id|cam-&gt;udev
comma
id|usb_sndctrlpipe
c_func
(paren
id|cam-&gt;udev
comma
l_int|0
)paren
comma
id|request
comma
id|USB_DIR_OUT
op_or
id|USB_TYPE_VENDOR
op_or
id|USB_RECIP_DEVICE
comma
id|value
comma
id|index
comma
id|cp
comma
id|size
comma
id|HZ
)paren
suffix:semicolon
id|status
op_assign
id|min
c_func
(paren
id|status
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Failed sending control message, error %d.&bslash;n&quot;
comma
id|status
)paren
suffix:semicolon
)brace
r_return
id|status
suffix:semicolon
)brace
DECL|function|send_control_msg
r_static
r_int
id|send_control_msg
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
comma
id|u8
id|request
comma
id|u16
id|value
comma
id|u16
id|index
comma
r_int
r_char
op_star
id|cp
comma
id|u16
id|size
)paren
(brace
r_int
id|status
op_assign
op_minus
id|ENODEV
suffix:semicolon
id|down
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cam-&gt;udev
)paren
(brace
id|status
op_assign
id|__send_control_msg
c_func
(paren
id|cam
comma
id|request
comma
id|value
comma
id|index
comma
id|cp
comma
id|size
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
r_static
r_int
DECL|function|initialize_camera
id|initialize_camera
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
)paren
(brace
r_const
r_struct
(brace
id|u8
op_star
id|data
suffix:semicolon
id|u32
id|size
suffix:semicolon
)brace
id|firmware
(braket
)braket
op_assign
(brace
(brace
dot
id|data
op_assign
id|setup1
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup1
)paren
)brace
comma
(brace
dot
id|data
op_assign
id|setup2
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup2
)paren
)brace
comma
(brace
dot
id|data
op_assign
id|setup3
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup3
)paren
)brace
comma
(brace
dot
id|data
op_assign
id|setup4
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup4
)paren
)brace
comma
(brace
dot
id|data
op_assign
id|setup5
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup5
)paren
)brace
comma
(brace
dot
id|data
op_assign
id|setup3
comma
dot
id|size
op_assign
r_sizeof
(paren
id|setup3
)paren
)brace
comma
(brace
dot
id|data
op_assign
l_int|NULL
comma
dot
id|size
op_assign
l_int|0
)brace
)brace
suffix:semicolon
r_int
id|err
comma
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|err
op_assign
l_int|0
suffix:semicolon
id|firmware
(braket
id|i
)braket
dot
id|data
op_logical_and
op_logical_neg
id|err
suffix:semicolon
id|i
op_increment
)paren
(brace
id|memcpy
c_func
(paren
id|cam-&gt;cntrlbuf
comma
id|firmware
(braket
id|i
)braket
dot
id|data
comma
id|firmware
(braket
id|i
)braket
dot
id|size
)paren
suffix:semicolon
id|err
op_assign
id|send_control_msg
c_func
(paren
id|cam
comma
l_int|0xff
comma
l_int|0
comma
l_int|0
comma
id|cam-&gt;cntrlbuf
comma
id|firmware
(braket
id|i
)braket
dot
id|size
)paren
suffix:semicolon
)brace
r_return
id|err
suffix:semicolon
)brace
r_static
r_int
DECL|function|set_camera_power
id|set_camera_power
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
comma
r_int
id|state
)paren
(brace
r_int
id|status
suffix:semicolon
r_if
c_cond
(paren
(paren
id|status
op_assign
id|send_control_msg
c_func
(paren
id|cam
comma
l_int|0x50
comma
id|state
comma
l_int|0
comma
l_int|NULL
comma
l_int|0
)paren
)paren
OL
l_int|0
)paren
r_return
id|status
suffix:semicolon
r_if
c_cond
(paren
id|state
)paren
(brace
id|send_control_msg
c_func
(paren
id|cam
comma
l_int|0x55
comma
l_int|1
comma
l_int|0
comma
l_int|NULL
comma
l_int|0
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|vicam_ioctl
id|vicam_ioctl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|ioctlnr
comma
r_int
r_int
id|ul_arg
)paren
(brace
r_void
op_star
id|arg
op_assign
(paren
r_void
op_star
)paren
id|ul_arg
suffix:semicolon
r_struct
id|vicam_camera
op_star
id|cam
op_assign
id|file-&gt;private_data
suffix:semicolon
r_int
id|retval
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_switch
c_cond
(paren
id|ioctlnr
)paren
(brace
multiline_comment|/* query capabilities */
r_case
id|VIDIOCGCAP
suffix:colon
(brace
r_struct
id|video_capability
id|b
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCGCAP&bslash;n&quot;
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|b.name
comma
l_string|&quot;ViCam-based Camera&quot;
)paren
suffix:semicolon
id|b.type
op_assign
id|VID_TYPE_CAPTURE
suffix:semicolon
id|b.channels
op_assign
l_int|1
suffix:semicolon
id|b.audios
op_assign
l_int|0
suffix:semicolon
id|b.maxwidth
op_assign
l_int|320
suffix:semicolon
multiline_comment|/* VIDEOSIZE_CIF */
id|b.maxheight
op_assign
l_int|240
suffix:semicolon
id|b.minwidth
op_assign
l_int|320
suffix:semicolon
multiline_comment|/* VIDEOSIZE_48_48 */
id|b.minheight
op_assign
l_int|240
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|arg
comma
op_amp
id|b
comma
r_sizeof
(paren
id|b
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* get/set video source - we are a camera and nothing else */
r_case
id|VIDIOCGCHAN
suffix:colon
(brace
r_struct
id|video_channel
id|v
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCGCHAN&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|v
comma
id|arg
comma
r_sizeof
(paren
id|v
)paren
)paren
)paren
(brace
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|v.channel
op_ne
l_int|0
)paren
(brace
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|v.channel
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|v.name
comma
l_string|&quot;Camera&quot;
)paren
suffix:semicolon
id|v.tuners
op_assign
l_int|0
suffix:semicolon
id|v.flags
op_assign
l_int|0
suffix:semicolon
id|v.type
op_assign
id|VIDEO_TYPE_CAMERA
suffix:semicolon
id|v.norm
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|arg
comma
op_amp
id|v
comma
r_sizeof
(paren
id|v
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|VIDIOCSCHAN
suffix:colon
(brace
r_int
id|v
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|v
comma
id|arg
comma
r_sizeof
(paren
id|v
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCSCHAN %d&bslash;n&quot;
comma
id|v
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
op_eq
l_int|0
op_logical_and
id|v
op_ne
l_int|0
)paren
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* image properties */
r_case
id|VIDIOCGPICT
suffix:colon
(brace
r_struct
id|video_picture
id|vp
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCGPICT&bslash;n&quot;
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|vp
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|video_picture
)paren
)paren
suffix:semicolon
id|vp.brightness
op_assign
id|cam-&gt;gain
op_lshift
l_int|8
suffix:semicolon
id|vp.depth
op_assign
l_int|24
suffix:semicolon
id|vp.palette
op_assign
id|VIDEO_PALETTE_RGB24
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
(paren
id|arg
comma
op_amp
id|vp
comma
r_sizeof
(paren
r_struct
id|video_picture
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|VIDIOCSPICT
suffix:colon
(brace
r_struct
id|video_picture
op_star
id|vp
op_assign
(paren
r_struct
id|video_picture
op_star
)paren
id|arg
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCSPICT depth = %d, pal = %d&bslash;n&quot;
comma
id|vp-&gt;depth
comma
id|vp-&gt;palette
)paren
suffix:semicolon
id|cam-&gt;gain
op_assign
id|vp-&gt;brightness
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|vp-&gt;depth
op_ne
l_int|24
op_logical_or
id|vp-&gt;palette
op_ne
id|VIDEO_PALETTE_RGB24
)paren
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* get/set capture window */
r_case
id|VIDIOCGWIN
suffix:colon
(brace
r_struct
id|video_window
id|vw
suffix:semicolon
id|vw.x
op_assign
l_int|0
suffix:semicolon
id|vw.y
op_assign
l_int|0
suffix:semicolon
id|vw.width
op_assign
l_int|320
suffix:semicolon
id|vw.height
op_assign
l_int|240
suffix:semicolon
id|vw.chromakey
op_assign
l_int|0
suffix:semicolon
id|vw.flags
op_assign
l_int|0
suffix:semicolon
id|vw.clips
op_assign
l_int|NULL
suffix:semicolon
id|vw.clipcount
op_assign
l_int|0
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCGWIN&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
(paren
(paren
r_void
op_star
)paren
id|arg
comma
(paren
r_void
op_star
)paren
op_amp
id|vw
comma
r_sizeof
(paren
id|vw
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
singleline_comment|// I&squot;m not sure what the deal with a capture window is, it is very poorly described
singleline_comment|// in the doc.  So I won&squot;t support it now.
r_break
suffix:semicolon
)brace
r_case
id|VIDIOCSWIN
suffix:colon
(brace
r_struct
id|video_window
op_star
id|vw
op_assign
(paren
r_struct
id|video_window
op_star
)paren
id|arg
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCSWIN %d x %d&bslash;n&quot;
comma
id|vw-&gt;width
comma
id|vw-&gt;height
)paren
suffix:semicolon
r_if
c_cond
(paren
id|vw-&gt;width
op_ne
l_int|320
op_logical_or
id|vw-&gt;height
op_ne
l_int|240
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* mmap interface */
r_case
id|VIDIOCGMBUF
suffix:colon
(brace
r_struct
id|video_mbuf
id|vm
suffix:semicolon
r_int
id|i
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;VIDIOCGMBUF&bslash;n&quot;
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|vm
comma
l_int|0
comma
r_sizeof
(paren
id|vm
)paren
)paren
suffix:semicolon
id|vm.size
op_assign
id|VICAM_MAX_FRAME_SIZE
op_star
id|VICAM_FRAMES
suffix:semicolon
id|vm.frames
op_assign
id|VICAM_FRAMES
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|VICAM_FRAMES
suffix:semicolon
id|i
op_increment
)paren
id|vm.offsets
(braket
id|i
)braket
op_assign
id|VICAM_MAX_FRAME_SIZE
op_star
id|i
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
(paren
(paren
r_void
op_star
)paren
id|arg
comma
(paren
r_void
op_star
)paren
op_amp
id|vm
comma
r_sizeof
(paren
id|vm
)paren
)paren
)paren
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|VIDIOCMCAPTURE
suffix:colon
(brace
r_struct
id|video_mmap
id|vm
suffix:semicolon
singleline_comment|// int video_size;
r_if
c_cond
(paren
id|copy_from_user
(paren
(paren
r_void
op_star
)paren
op_amp
id|vm
comma
(paren
r_void
op_star
)paren
id|arg
comma
r_sizeof
(paren
id|vm
)paren
)paren
)paren
(brace
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|DBG
c_func
(paren
l_string|&quot;VIDIOCMCAPTURE frame=%d, height=%d, width=%d, format=%d.&bslash;n&quot;
comma
id|vm.frame
comma
id|vm.width
comma
id|vm.height
comma
id|vm.format
)paren
suffix:semicolon
r_if
c_cond
(paren
id|vm.frame
op_ge
id|VICAM_FRAMES
op_logical_or
id|vm.format
op_ne
id|VIDEO_PALETTE_RGB24
)paren
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
singleline_comment|// in theory right here we&squot;d start the image capturing
singleline_comment|// (fill in a bulk urb and submit it asynchronously)
singleline_comment|//
singleline_comment|// Instead we&squot;re going to do a total hack job for now and
singleline_comment|// retrieve the frame in VIDIOCSYNC
r_break
suffix:semicolon
)brace
r_case
id|VIDIOCSYNC
suffix:colon
(brace
r_int
id|frame
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
(paren
r_void
op_star
)paren
op_amp
id|frame
comma
id|arg
comma
r_sizeof
(paren
r_int
)paren
)paren
)paren
(brace
id|retval
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|DBG
c_func
(paren
l_string|&quot;VIDIOCSYNC: %d&bslash;n&quot;
comma
id|frame
)paren
suffix:semicolon
id|read_frame
c_func
(paren
id|cam
comma
id|frame
)paren
suffix:semicolon
id|vicam_decode_color
c_func
(paren
id|cam-&gt;raw_image
comma
id|cam-&gt;framebuf
op_plus
id|frame
op_star
id|VICAM_MAX_FRAME_SIZE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* pointless to implement overlay with this camera */
r_case
id|VIDIOCCAPTURE
suffix:colon
r_case
id|VIDIOCGFBUF
suffix:colon
r_case
id|VIDIOCSFBUF
suffix:colon
r_case
id|VIDIOCKEY
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* tuner interface - we have none */
r_case
id|VIDIOCGTUNER
suffix:colon
r_case
id|VIDIOCSTUNER
suffix:colon
r_case
id|VIDIOCGFREQ
suffix:colon
r_case
id|VIDIOCSFREQ
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* audio interface - we have none */
r_case
id|VIDIOCGAUDIO
suffix:colon
r_case
id|VIDIOCSAUDIO
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
op_minus
id|ENOIOCTLCMD
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|retval
suffix:semicolon
)brace
r_static
r_int
DECL|function|vicam_open
id|vicam_open
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_struct
id|video_device
op_star
id|dev
op_assign
id|video_devdata
c_func
(paren
id|file
)paren
suffix:semicolon
r_struct
id|vicam_camera
op_star
id|cam
op_assign
(paren
r_struct
id|vicam_camera
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;open&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;vicam video_device improperly initialized&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* the videodev_lock held above us protects us from&n;&t; * simultaneous opens...for now. we probably shouldn&squot;t&n;&t; * rely on this fact forever.&n;&t; */
r_if
c_cond
(paren
id|cam-&gt;open_count
OG
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;vicam_open called on already opened camera&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|cam-&gt;raw_image
op_assign
id|kmalloc
c_func
(paren
id|VICAM_MAX_READ_SIZE
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;raw_image
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|cam-&gt;framebuf
op_assign
id|rvmalloc
c_func
(paren
id|VICAM_MAX_FRAME_SIZE
op_star
id|VICAM_FRAMES
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;framebuf
)paren
(brace
id|kfree
c_func
(paren
id|cam-&gt;raw_image
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|cam-&gt;cntrlbuf
op_assign
id|kmalloc
c_func
(paren
id|PAGE_SIZE
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;cntrlbuf
)paren
(brace
id|kfree
c_func
(paren
id|cam-&gt;raw_image
)paren
suffix:semicolon
id|rvfree
c_func
(paren
id|cam-&gt;framebuf
comma
id|VICAM_MAX_FRAME_SIZE
op_star
id|VICAM_FRAMES
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
singleline_comment|// First upload firmware, then turn the camera on
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;is_initialized
)paren
(brace
id|initialize_camera
c_func
(paren
id|cam
)paren
suffix:semicolon
id|cam-&gt;is_initialized
op_assign
l_int|1
suffix:semicolon
)brace
id|set_camera_power
c_func
(paren
id|cam
comma
l_int|1
)paren
suffix:semicolon
id|cam-&gt;needsDummyRead
op_assign
l_int|1
suffix:semicolon
id|cam-&gt;open_count
op_increment
suffix:semicolon
id|file-&gt;private_data
op_assign
id|cam
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|vicam_close
id|vicam_close
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_struct
id|vicam_camera
op_star
id|cam
op_assign
id|file-&gt;private_data
suffix:semicolon
r_int
id|open_count
suffix:semicolon
r_struct
id|usb_device
op_star
id|udev
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;close&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* it&squot;s not the end of the world if&n;&t; * we fail to turn the camera off.&n;&t; */
id|set_camera_power
c_func
(paren
id|cam
comma
l_int|0
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|cam-&gt;raw_image
)paren
suffix:semicolon
id|rvfree
c_func
(paren
id|cam-&gt;framebuf
comma
id|VICAM_MAX_FRAME_SIZE
op_star
id|VICAM_FRAMES
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|cam-&gt;cntrlbuf
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
id|cam-&gt;open_count
op_decrement
suffix:semicolon
id|open_count
op_assign
id|cam-&gt;open_count
suffix:semicolon
id|udev
op_assign
id|cam-&gt;udev
suffix:semicolon
id|up
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|open_count
op_logical_and
op_logical_neg
id|udev
)paren
(brace
id|kfree
c_func
(paren
id|cam
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|vicam_decode_color
r_static
r_void
id|vicam_decode_color
c_func
(paren
r_const
id|u8
op_star
id|data
comma
id|u8
op_star
id|rgb
)paren
(brace
multiline_comment|/* vicam_decode_color - Convert from Vicam Y-Cr-Cb to RGB&n;&t; * Copyright (C) 2002 Monroe Williams (monroe@pobox.com)&n;&t; */
r_int
id|i
comma
id|prevY
comma
id|nextY
suffix:semicolon
id|prevY
op_assign
l_int|512
suffix:semicolon
id|nextY
op_assign
l_int|512
suffix:semicolon
id|data
op_add_assign
id|VICAM_HEADER_SIZE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|240
suffix:semicolon
id|i
op_increment
comma
id|data
op_add_assign
l_int|512
)paren
(brace
r_const
r_int
id|y
op_assign
(paren
id|i
op_star
l_int|242
)paren
op_div
l_int|240
suffix:semicolon
r_int
id|j
comma
id|prevX
comma
id|nextX
suffix:semicolon
r_int
id|Y
comma
id|Cr
comma
id|Cb
suffix:semicolon
r_if
c_cond
(paren
id|y
op_eq
l_int|242
op_minus
l_int|1
)paren
(brace
id|nextY
op_assign
op_minus
l_int|512
suffix:semicolon
)brace
id|prevX
op_assign
l_int|1
suffix:semicolon
id|nextX
op_assign
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|320
suffix:semicolon
id|j
op_increment
comma
id|rgb
op_add_assign
l_int|3
)paren
(brace
r_const
r_int
id|x
op_assign
(paren
id|j
op_star
l_int|512
)paren
op_div
l_int|320
suffix:semicolon
r_const
id|u8
op_star
r_const
id|src
op_assign
op_amp
id|data
(braket
id|x
)braket
suffix:semicolon
r_if
c_cond
(paren
id|x
op_eq
l_int|512
op_minus
l_int|1
)paren
(brace
id|nextX
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|Cr
op_assign
(paren
id|src
(braket
id|prevX
)braket
op_minus
id|src
(braket
l_int|0
)braket
)paren
op_plus
(paren
id|src
(braket
id|nextX
)braket
op_minus
id|src
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|Cr
op_div_assign
l_int|2
suffix:semicolon
id|Cb
op_assign
(paren
id|src
(braket
id|prevY
)braket
op_minus
id|src
(braket
id|prevX
op_plus
id|prevY
)braket
)paren
op_plus
(paren
id|src
(braket
id|prevY
)braket
op_minus
id|src
(braket
id|nextX
op_plus
id|prevY
)braket
)paren
op_plus
(paren
id|src
(braket
id|nextY
)braket
op_minus
id|src
(braket
id|prevX
op_plus
id|nextY
)braket
)paren
op_plus
(paren
id|src
(braket
id|nextY
)braket
op_minus
id|src
(braket
id|nextX
op_plus
id|nextY
)braket
)paren
suffix:semicolon
id|Cb
op_div_assign
l_int|4
suffix:semicolon
id|Y
op_assign
l_int|1160
op_star
(paren
id|src
(braket
l_int|0
)braket
op_plus
(paren
id|Cr
op_div
l_int|2
)paren
op_minus
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_amp
l_int|1
)paren
(brace
r_int
id|Ct
op_assign
id|Cr
suffix:semicolon
id|Cr
op_assign
id|Cb
suffix:semicolon
id|Cb
op_assign
id|Ct
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|x
op_xor
id|i
)paren
op_amp
l_int|1
)paren
(brace
id|Cr
op_assign
op_minus
id|Cr
suffix:semicolon
id|Cb
op_assign
op_minus
id|Cb
suffix:semicolon
)brace
id|rgb
(braket
l_int|0
)braket
op_assign
id|clamp
c_func
(paren
(paren
(paren
id|Y
op_plus
(paren
l_int|2017
op_star
id|Cb
)paren
)paren
op_plus
l_int|500
)paren
op_div
l_int|900
comma
l_int|0
comma
l_int|255
)paren
suffix:semicolon
id|rgb
(braket
l_int|1
)braket
op_assign
id|clamp
c_func
(paren
(paren
(paren
id|Y
op_minus
(paren
l_int|392
op_star
id|Cb
)paren
op_minus
(paren
l_int|813
op_star
id|Cr
)paren
)paren
op_plus
l_int|500
)paren
op_div
l_int|1000
comma
l_int|0
comma
l_int|255
)paren
suffix:semicolon
id|rgb
(braket
l_int|2
)braket
op_assign
id|clamp
c_func
(paren
(paren
(paren
id|Y
op_plus
(paren
l_int|1594
op_star
id|Cr
)paren
)paren
op_plus
l_int|500
)paren
op_div
l_int|1300
comma
l_int|0
comma
l_int|255
)paren
suffix:semicolon
id|prevX
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|prevY
op_assign
op_minus
l_int|512
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|read_frame
id|read_frame
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
comma
r_int
id|framenum
)paren
(brace
r_int
r_char
op_star
id|request
op_assign
id|cam-&gt;cntrlbuf
suffix:semicolon
r_int
id|realShutter
suffix:semicolon
r_int
id|n
suffix:semicolon
r_int
id|actual_length
suffix:semicolon
r_if
c_cond
(paren
id|cam-&gt;needsDummyRead
)paren
(brace
id|cam-&gt;needsDummyRead
op_assign
l_int|0
suffix:semicolon
id|read_frame
c_func
(paren
id|cam
comma
id|framenum
)paren
suffix:semicolon
)brace
id|memset
c_func
(paren
id|request
comma
l_int|0
comma
l_int|16
)paren
suffix:semicolon
id|request
(braket
l_int|0
)braket
op_assign
id|cam-&gt;gain
suffix:semicolon
singleline_comment|// 0 = 0% gain, FF = 100% gain
id|request
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
singleline_comment|// 512x242 capture
id|request
(braket
l_int|2
)braket
op_assign
l_int|0x90
suffix:semicolon
singleline_comment|// the function of these two bytes
id|request
(braket
l_int|3
)braket
op_assign
l_int|0x07
suffix:semicolon
singleline_comment|// is not yet understood
r_if
c_cond
(paren
id|cam-&gt;shutter_speed
OG
l_int|60
)paren
(brace
singleline_comment|// Short exposure
id|realShutter
op_assign
(paren
(paren
op_minus
l_int|15631900
op_div
id|cam-&gt;shutter_speed
)paren
op_plus
l_int|260533
)paren
op_div
l_int|1000
suffix:semicolon
id|request
(braket
l_int|4
)braket
op_assign
id|realShutter
op_amp
l_int|0xFF
suffix:semicolon
id|request
(braket
l_int|5
)braket
op_assign
(paren
id|realShutter
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|request
(braket
l_int|6
)braket
op_assign
l_int|0x03
suffix:semicolon
id|request
(braket
l_int|7
)braket
op_assign
l_int|0x01
suffix:semicolon
)brace
r_else
(brace
singleline_comment|// Long exposure
id|realShutter
op_assign
l_int|15600
op_div
id|cam-&gt;shutter_speed
op_minus
l_int|1
suffix:semicolon
id|request
(braket
l_int|4
)braket
op_assign
l_int|0
suffix:semicolon
id|request
(braket
l_int|5
)braket
op_assign
l_int|0
suffix:semicolon
id|request
(braket
l_int|6
)braket
op_assign
id|realShutter
op_amp
l_int|0xFF
suffix:semicolon
id|request
(braket
l_int|7
)braket
op_assign
id|realShutter
op_rshift
l_int|8
suffix:semicolon
)brace
singleline_comment|// Per John Markus Bj&#xfffd;rndalen, byte at index 8 causes problems if it isn&squot;t 0
id|request
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
singleline_comment|// bytes 9-15 do not seem to affect exposure or image quality
id|down
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;udev
)paren
(brace
r_goto
id|done
suffix:semicolon
)brace
id|n
op_assign
id|__send_control_msg
c_func
(paren
id|cam
comma
l_int|0x51
comma
l_int|0x80
comma
l_int|0
comma
id|request
comma
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot; Problem sending frame capture control message&quot;
)paren
suffix:semicolon
r_goto
id|done
suffix:semicolon
)brace
id|n
op_assign
id|usb_bulk_msg
c_func
(paren
id|cam-&gt;udev
comma
id|usb_rcvbulkpipe
c_func
(paren
id|cam-&gt;udev
comma
id|cam-&gt;bulkEndpoint
)paren
comma
id|cam-&gt;raw_image
comma
l_int|512
op_star
l_int|242
op_plus
l_int|128
comma
op_amp
id|actual_length
comma
id|HZ
op_star
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;Problem during bulk read of frame data: %d&bslash;n&quot;
comma
id|n
)paren
suffix:semicolon
)brace
id|done
suffix:colon
id|up
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
)brace
r_static
id|ssize_t
DECL|function|vicam_read
id|vicam_read
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_char
op_star
id|buf
comma
r_int
id|count
comma
id|loff_t
op_star
id|ppos
)paren
(brace
r_struct
id|vicam_camera
op_star
id|cam
op_assign
id|file-&gt;private_data
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;read %d bytes.&bslash;n&quot;
comma
(paren
r_int
)paren
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
op_star
id|ppos
op_ge
id|VICAM_MAX_FRAME_SIZE
)paren
(brace
op_star
id|ppos
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|ppos
op_eq
l_int|0
)paren
(brace
id|read_frame
c_func
(paren
id|cam
comma
l_int|0
)paren
suffix:semicolon
id|vicam_decode_color
c_func
(paren
id|cam-&gt;raw_image
comma
id|cam-&gt;framebuf
op_plus
l_int|0
op_star
id|VICAM_MAX_FRAME_SIZE
)paren
suffix:semicolon
)brace
id|count
op_assign
id|min_t
c_func
(paren
r_int
comma
id|count
comma
id|VICAM_MAX_FRAME_SIZE
op_minus
op_star
id|ppos
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|buf
comma
op_amp
id|cam-&gt;framebuf
(braket
op_star
id|ppos
)braket
comma
id|count
)paren
)paren
(brace
id|count
op_assign
op_minus
id|EFAULT
suffix:semicolon
)brace
r_else
(brace
op_star
id|ppos
op_add_assign
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|count
op_eq
id|VICAM_MAX_FRAME_SIZE
)paren
(brace
op_star
id|ppos
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|count
suffix:semicolon
)brace
r_static
r_int
DECL|function|vicam_mmap
id|vicam_mmap
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|vm_area_struct
op_star
id|vma
)paren
(brace
singleline_comment|// TODO: allocate the raw frame buffer if necessary
r_int
r_int
id|page
comma
id|pos
suffix:semicolon
r_int
r_int
id|start
op_assign
id|vma-&gt;vm_start
suffix:semicolon
r_int
r_int
id|size
op_assign
id|vma-&gt;vm_end
op_minus
id|vma-&gt;vm_start
suffix:semicolon
r_struct
id|vicam_camera
op_star
id|cam
op_assign
id|file-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;vicam_mmap: %ld&bslash;n&quot;
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* We let mmap allocate as much as it wants because Linux was adding 2048 bytes&n;&t; * to the size the application requested for mmap and it was screwing apps up.&n;&t; if (size &gt; VICAM_FRAMES*VICAM_MAX_FRAME_SIZE)&n;&t; return -EINVAL;&n;&t; */
id|pos
op_assign
(paren
r_int
r_int
)paren
id|cam-&gt;framebuf
suffix:semicolon
r_while
c_loop
(paren
id|size
OG
l_int|0
)paren
(brace
id|page
op_assign
id|kvirt_to_pa
c_func
(paren
id|pos
)paren
suffix:semicolon
r_if
c_cond
(paren
id|remap_page_range
c_func
(paren
id|vma
comma
id|start
comma
id|page
comma
id|PAGE_SIZE
comma
id|PAGE_SHARED
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
id|start
op_add_assign
id|PAGE_SIZE
suffix:semicolon
id|pos
op_add_assign
id|PAGE_SIZE
suffix:semicolon
r_if
c_cond
(paren
id|size
OG
id|PAGE_SIZE
)paren
id|size
op_sub_assign
id|PAGE_SIZE
suffix:semicolon
r_else
id|size
op_assign
l_int|0
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#if defined(CONFIG_VIDEO_PROC_FS)
DECL|variable|vicam_proc_root
r_static
r_struct
id|proc_dir_entry
op_star
id|vicam_proc_root
op_assign
l_int|NULL
suffix:semicolon
DECL|function|vicam_read_helper
r_static
r_int
id|vicam_read_helper
c_func
(paren
r_char
op_star
id|page
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|off
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_int
id|value
)paren
(brace
r_char
op_star
id|out
op_assign
id|page
suffix:semicolon
r_int
id|len
suffix:semicolon
id|out
op_add_assign
id|sprintf
c_func
(paren
id|out
comma
l_string|&quot;%d&quot;
comma
id|value
)paren
suffix:semicolon
id|len
op_assign
id|out
op_minus
id|page
suffix:semicolon
id|len
op_sub_assign
id|off
suffix:semicolon
r_if
c_cond
(paren
id|len
OL
id|count
)paren
(brace
op_star
id|eof
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|len
op_le
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
)brace
r_else
id|len
op_assign
id|count
suffix:semicolon
op_star
id|start
op_assign
id|page
op_plus
id|off
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|vicam_read_proc_shutter
r_static
r_int
id|vicam_read_proc_shutter
c_func
(paren
r_char
op_star
id|page
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|off
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
id|vicam_read_helper
c_func
(paren
id|page
comma
id|start
comma
id|off
comma
id|count
comma
id|eof
comma
(paren
(paren
r_struct
id|vicam_camera
op_star
)paren
id|data
)paren
op_member_access_from_pointer
id|shutter_speed
)paren
suffix:semicolon
)brace
DECL|function|vicam_read_proc_gain
r_static
r_int
id|vicam_read_proc_gain
c_func
(paren
r_char
op_star
id|page
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|off
comma
r_int
id|count
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_return
id|vicam_read_helper
c_func
(paren
id|page
comma
id|start
comma
id|off
comma
id|count
comma
id|eof
comma
(paren
(paren
r_struct
id|vicam_camera
op_star
)paren
id|data
)paren
op_member_access_from_pointer
id|gain
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|vicam_create_proc_root
id|vicam_create_proc_root
c_func
(paren
r_void
)paren
(brace
id|vicam_proc_root
op_assign
id|create_proc_entry
c_func
(paren
l_string|&quot;video/vicam&quot;
comma
id|S_IFDIR
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|vicam_proc_root
)paren
id|vicam_proc_root-&gt;owner
op_assign
id|THIS_MODULE
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;could not create /proc entry for vicam!&quot;
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|vicam_destroy_proc_root
id|vicam_destroy_proc_root
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|vicam_proc_root
)paren
id|remove_proc_entry
c_func
(paren
l_string|&quot;video/vicam&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|vicam_create_proc_entry
id|vicam_create_proc_entry
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
)paren
(brace
r_char
id|name
(braket
l_int|64
)braket
suffix:semicolon
r_struct
id|proc_dir_entry
op_star
id|ent
suffix:semicolon
id|DBG
c_func
(paren
id|KERN_INFO
l_string|&quot;vicam: creating proc entry&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|vicam_proc_root
op_logical_or
op_logical_neg
id|cam
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;vicam: could not create proc entry, %s pointer is null.&bslash;n&quot;
comma
(paren
op_logical_neg
id|cam
ques
c_cond
l_string|&quot;camera&quot;
suffix:colon
l_string|&quot;root&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;video%d&quot;
comma
id|cam-&gt;vdev.minor
)paren
suffix:semicolon
id|cam-&gt;proc_dir
op_assign
id|create_proc_entry
c_func
(paren
id|name
comma
id|S_IFDIR
comma
id|vicam_proc_root
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;proc_dir
)paren
r_return
suffix:semicolon
singleline_comment|// FIXME: We should probably return an error here
id|ent
op_assign
id|create_proc_entry
c_func
(paren
l_string|&quot;shutter&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|cam-&gt;proc_dir
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ent
)paren
(brace
id|ent-&gt;data
op_assign
id|cam
suffix:semicolon
id|ent-&gt;read_proc
op_assign
id|vicam_read_proc_shutter
suffix:semicolon
id|ent-&gt;size
op_assign
l_int|64
suffix:semicolon
)brace
id|ent
op_assign
id|create_proc_entry
c_func
(paren
l_string|&quot;gain&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|cam-&gt;proc_dir
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ent
)paren
(brace
id|ent-&gt;data
op_assign
id|cam
suffix:semicolon
id|ent-&gt;read_proc
op_assign
id|vicam_read_proc_gain
suffix:semicolon
id|ent-&gt;size
op_assign
l_int|64
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|vicam_destroy_proc_entry
id|vicam_destroy_proc_entry
c_func
(paren
r_void
op_star
id|ptr
)paren
(brace
r_struct
id|vicam_camera
op_star
id|cam
op_assign
(paren
r_struct
id|vicam_camera
op_star
)paren
id|ptr
suffix:semicolon
r_char
id|name
(braket
l_int|16
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cam-&gt;proc_dir
)paren
r_return
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;video%d&quot;
comma
id|cam-&gt;vdev.minor
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
l_string|&quot;shutter&quot;
comma
id|cam-&gt;proc_dir
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
l_string|&quot;gain&quot;
comma
id|cam-&gt;proc_dir
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|name
comma
id|vicam_proc_root
)paren
suffix:semicolon
id|cam-&gt;proc_dir
op_assign
l_int|NULL
suffix:semicolon
)brace
macro_line|#else
DECL|function|vicam_create_proc_root
r_static
r_inline
r_void
id|vicam_create_proc_root
c_func
(paren
r_void
)paren
(brace
)brace
DECL|function|vicam_destroy_proc_root
r_static
r_inline
r_void
id|vicam_destroy_proc_root
c_func
(paren
r_void
)paren
(brace
)brace
DECL|function|vicam_create_proc_entry
r_static
r_inline
r_void
id|vicam_create_proc_entry
c_func
(paren
r_struct
id|vicam_camera
op_star
id|cam
)paren
(brace
)brace
DECL|function|vicam_destroy_proc_entry
r_static
r_inline
r_void
id|vicam_destroy_proc_entry
c_func
(paren
r_void
op_star
id|ptr
)paren
(brace
)brace
macro_line|#endif
DECL|variable|vicam_fops
r_static
r_struct
id|file_operations
id|vicam_fops
op_assign
(brace
dot
id|owner
op_assign
id|THIS_MODULE
comma
dot
id|open
op_assign
id|vicam_open
comma
dot
id|release
op_assign
id|vicam_close
comma
dot
id|read
op_assign
id|vicam_read
comma
dot
id|mmap
op_assign
id|vicam_mmap
comma
dot
id|ioctl
op_assign
id|vicam_ioctl
comma
dot
id|llseek
op_assign
id|no_llseek
comma
)brace
suffix:semicolon
DECL|variable|vicam_template
r_static
r_struct
id|video_device
id|vicam_template
op_assign
(brace
dot
id|owner
op_assign
id|THIS_MODULE
comma
dot
id|name
op_assign
l_string|&quot;ViCam-based USB Camera&quot;
comma
dot
id|type
op_assign
id|VID_TYPE_CAPTURE
comma
dot
id|hardware
op_assign
id|VID_HARDWARE_VICAM
comma
dot
id|fops
op_assign
op_amp
id|vicam_fops
comma
dot
id|minor
op_assign
op_minus
l_int|1
comma
)brace
suffix:semicolon
multiline_comment|/* table of devices that work with this driver */
DECL|variable|vicam_table
r_static
r_struct
id|usb_device_id
id|vicam_table
(braket
)braket
op_assign
(brace
(brace
id|USB_DEVICE
c_func
(paren
id|USB_VICAM_VENDOR_ID
comma
id|USB_VICAM_PRODUCT_ID
)paren
)brace
comma
(brace
)brace
multiline_comment|/* Terminating entry */
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|usb
comma
id|vicam_table
)paren
suffix:semicolon
DECL|variable|vicam_driver
r_static
r_struct
id|usb_driver
id|vicam_driver
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;vicam&quot;
comma
dot
id|probe
op_assign
id|vicam_probe
comma
dot
id|disconnect
op_assign
id|vicam_disconnect
comma
dot
id|id_table
op_assign
id|vicam_table
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;vicam_probe&n; *&n; *&t;Called by the usb core when a new device is connected that it thinks&n; *&t;this driver might be interested in.&n; */
r_static
r_int
DECL|function|vicam_probe
id|vicam_probe
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
comma
r_const
r_struct
id|usb_device_id
op_star
id|id
)paren
(brace
r_struct
id|usb_device
op_star
id|dev
op_assign
id|interface_to_usbdev
c_func
(paren
id|intf
)paren
suffix:semicolon
r_int
id|bulkEndpoint
op_assign
l_int|0
suffix:semicolon
r_const
r_struct
id|usb_host_interface
op_star
id|interface
suffix:semicolon
r_const
r_struct
id|usb_endpoint_descriptor
op_star
id|endpoint
suffix:semicolon
r_struct
id|vicam_camera
op_star
id|cam
suffix:semicolon
multiline_comment|/* See if the device offered us matches what we can accept */
r_if
c_cond
(paren
(paren
id|dev-&gt;descriptor.idVendor
op_ne
id|USB_VICAM_VENDOR_ID
)paren
op_logical_or
(paren
id|dev-&gt;descriptor.idProduct
op_ne
id|USB_VICAM_PRODUCT_ID
)paren
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;ViCam based webcam connected&bslash;n&quot;
)paren
suffix:semicolon
id|interface
op_assign
op_amp
id|intf-&gt;altsetting
(braket
l_int|0
)braket
suffix:semicolon
id|DBG
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Interface %d. has %u. endpoints!&bslash;n&quot;
comma
id|ifnum
comma
(paren
r_int
)paren
(paren
id|interface-&gt;desc.bNumEndpoints
)paren
)paren
suffix:semicolon
id|endpoint
op_assign
op_amp
id|interface-&gt;endpoint
(braket
l_int|0
)braket
dot
id|desc
suffix:semicolon
r_if
c_cond
(paren
(paren
id|endpoint-&gt;bEndpointAddress
op_amp
l_int|0x80
)paren
op_logical_and
(paren
(paren
id|endpoint-&gt;bmAttributes
op_amp
l_int|3
)paren
op_eq
l_int|0x02
)paren
)paren
(brace
multiline_comment|/* we found a bulk in endpoint */
id|bulkEndpoint
op_assign
id|endpoint-&gt;bEndpointAddress
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;No bulk in endpoint was found ?! (this is bad)&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|cam
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|vicam_camera
)paren
comma
id|GFP_KERNEL
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;could not allocate kernel memory for vicam_camera struct&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|cam
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|vicam_camera
)paren
)paren
suffix:semicolon
id|cam-&gt;shutter_speed
op_assign
l_int|15
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|cam-&gt;vdev
comma
op_amp
id|vicam_template
comma
r_sizeof
(paren
id|vicam_template
)paren
)paren
suffix:semicolon
id|cam-&gt;vdev.priv
op_assign
id|cam
suffix:semicolon
singleline_comment|// sort of a reverse mapping for those functions that get vdev only
id|cam-&gt;udev
op_assign
id|dev
suffix:semicolon
id|cam-&gt;bulkEndpoint
op_assign
id|bulkEndpoint
suffix:semicolon
r_if
c_cond
(paren
id|video_register_device
c_func
(paren
op_amp
id|cam-&gt;vdev
comma
id|VFL_TYPE_GRABBER
comma
op_minus
l_int|1
)paren
op_eq
op_minus
l_int|1
)paren
(brace
id|kfree
c_func
(paren
id|cam
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;video_register_device failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|vicam_create_proc_entry
c_func
(paren
id|cam
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;ViCam webcam driver now controlling video device %d&bslash;n&quot;
comma
id|cam-&gt;vdev.minor
)paren
suffix:semicolon
id|usb_set_intfdata
(paren
id|intf
comma
id|cam
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|vicam_disconnect
id|vicam_disconnect
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
)paren
(brace
r_int
id|open_count
suffix:semicolon
r_struct
id|vicam_camera
op_star
id|cam
op_assign
id|usb_get_intfdata
(paren
id|intf
)paren
suffix:semicolon
id|usb_set_intfdata
(paren
id|intf
comma
l_int|NULL
)paren
suffix:semicolon
multiline_comment|/* we must unregister the device before taking its&n;&t; * cam_lock. This is because the video open call&n;&t; * holds the same lock as video unregister. if we&n;&t; * unregister inside of the cam_lock and open also&n;&t; * uses the cam_lock, we get deadlock.&n;&t; */
id|video_unregister_device
c_func
(paren
op_amp
id|cam-&gt;vdev
)paren
suffix:semicolon
multiline_comment|/* stop the camera from being used */
id|down
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
multiline_comment|/* mark the camera as gone */
id|cam-&gt;udev
op_assign
l_int|NULL
suffix:semicolon
id|vicam_destroy_proc_entry
c_func
(paren
id|cam
)paren
suffix:semicolon
multiline_comment|/* the only thing left to do is synchronize with&n;&t; * our close/release function on who should release&n;&t; * the camera memory. if there are any users using the&n;&t; * camera, it&squot;s their job. if there are no users,&n;&t; * it&squot;s ours.&n;&t; */
id|open_count
op_assign
id|cam-&gt;open_count
suffix:semicolon
id|up
c_func
(paren
op_amp
id|cam-&gt;cam_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|open_count
)paren
(brace
id|kfree
c_func
(paren
id|cam
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;ViCam-based WebCam disconnected&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; */
r_static
r_int
id|__init
DECL|function|usb_vicam_init
id|usb_vicam_init
c_func
(paren
r_void
)paren
(brace
id|DBG
c_func
(paren
id|KERN_INFO
l_string|&quot;ViCam-based WebCam driver startup&bslash;n&quot;
)paren
suffix:semicolon
id|vicam_create_proc_root
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|usb_register
c_func
(paren
op_amp
id|vicam_driver
)paren
op_ne
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;usb_register failed!&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
id|__exit
DECL|function|usb_vicam_exit
id|usb_vicam_exit
c_func
(paren
r_void
)paren
(brace
id|DBG
c_func
(paren
id|KERN_INFO
l_string|&quot;ViCam-based WebCam driver shutdown&bslash;n&quot;
)paren
suffix:semicolon
id|usb_deregister
c_func
(paren
op_amp
id|vicam_driver
)paren
suffix:semicolon
id|vicam_destroy_proc_root
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|usb_vicam_init
id|module_init
c_func
(paren
id|usb_vicam_init
)paren
suffix:semicolon
DECL|variable|usb_vicam_exit
id|module_exit
c_func
(paren
id|usb_vicam_exit
)paren
suffix:semicolon
DECL|variable|DRIVER_AUTHOR
id|MODULE_AUTHOR
c_func
(paren
id|DRIVER_AUTHOR
)paren
suffix:semicolon
DECL|variable|DRIVER_DESC
id|MODULE_DESCRIPTION
c_func
(paren
id|DRIVER_DESC
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
eof
