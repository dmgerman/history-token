multiline_comment|/* Linux driver for Philips webcam&n;   Decompression for chipset version 2 et 3&n;   (C) 2004      Luc Saillard (luc@saillard.org)&n;&n;   NOTE: this version of pwc is an unofficial (modified) release of pwc &amp; pcwx&n;   driver and thus may have bugs that are not present in the original version.&n;   Please send bug reports and support requests to &lt;luc@saillard.org&gt;.&n;   The decompression routines have been implemented by reverse-engineering the&n;   Nemosoft binary pwcx module. Caveat emptor.&n;&n;   This program is free software; you can redistribute it and/or modify&n;   it under the terms of the GNU General Public License as published by&n;   the Free Software Foundation; either version 2 of the License, or&n;   (at your option) any later version.&n;&n;   This program is distributed in the hope that it will be useful,&n;   but WITHOUT ANY WARRANTY; without even the implied warranty of&n;   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n;   GNU General Public License for more details.&n;&n;   You should have received a copy of the GNU General Public License&n;   along with this program; if not, write to the Free Software&n;   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n;*/
macro_line|#include &quot;pwc-timon.h&quot;
macro_line|#include &quot;pwc-kiara.h&quot;
macro_line|#include &quot;pwc-dec23.h&quot;
macro_line|#include &quot;pwc-ioctl.h&quot;
macro_line|#include &lt;linux/string.h&gt;
multiline_comment|/****&n; *&n; *&n; *&n; */
DECL|function|fill_table_a000
r_static
r_void
id|fill_table_a000
c_func
(paren
r_int
r_int
op_star
id|p
)paren
(brace
r_static
r_int
r_int
id|initial_values
(braket
l_int|12
)braket
op_assign
(brace
l_int|0xFFAD9B00
comma
l_int|0xFFDDEE00
comma
l_int|0x00221200
comma
l_int|0x00526500
comma
l_int|0xFFC21E00
comma
l_int|0x003DE200
comma
l_int|0xFF924B80
comma
l_int|0xFFD2A300
comma
l_int|0x002D5D00
comma
l_int|0x006DB480
comma
l_int|0xFFED3E00
comma
l_int|0x0012C200
)brace
suffix:semicolon
r_static
r_int
r_int
id|values_derivated
(braket
l_int|12
)braket
op_assign
(brace
l_int|0x0000A4CA
comma
l_int|0x00004424
comma
l_int|0xFFFFBBDC
comma
l_int|0xFFFF5B36
comma
l_int|0x00007BC4
comma
l_int|0xFFFF843C
comma
l_int|0x0000DB69
comma
l_int|0x00005ABA
comma
l_int|0xFFFFA546
comma
l_int|0xFFFF2497
comma
l_int|0x00002584
comma
l_int|0xFFFFDA7C
)brace
suffix:semicolon
r_int
r_int
id|temp_values
(braket
l_int|12
)braket
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|memcpy
c_func
(paren
id|temp_values
comma
id|initial_values
comma
r_sizeof
(paren
id|initial_values
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|12
suffix:semicolon
id|j
op_increment
)paren
(brace
op_star
id|p
op_increment
op_assign
id|temp_values
(braket
id|j
)braket
suffix:semicolon
id|temp_values
(braket
id|j
)braket
op_add_assign
id|values_derivated
(braket
id|j
)braket
suffix:semicolon
)brace
)brace
)brace
DECL|function|fill_table_d000
r_static
r_void
id|fill_table_d000
c_func
(paren
r_int
r_char
op_star
id|p
)paren
(brace
r_int
id|bit
comma
id|byte
suffix:semicolon
r_for
c_loop
(paren
id|bit
op_assign
l_int|0
suffix:semicolon
id|bit
OL
l_int|8
suffix:semicolon
id|bit
op_increment
)paren
(brace
r_int
r_char
id|bitpower
op_assign
l_int|1
op_lshift
id|bit
suffix:semicolon
r_int
r_char
id|mask
op_assign
id|bitpower
op_minus
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|byte
op_assign
l_int|0
suffix:semicolon
id|byte
OL
l_int|256
suffix:semicolon
id|byte
op_increment
)paren
(brace
r_if
c_cond
(paren
id|byte
op_amp
id|bitpower
)paren
op_star
id|p
op_increment
op_assign
op_minus
(paren
id|byte
op_amp
id|mask
)paren
suffix:semicolon
r_else
op_star
id|p
op_increment
op_assign
(paren
id|byte
op_amp
id|mask
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; *&n; * Kiara: 0 &lt;= ver &lt;= 7&n; * Timon: 0 &lt;= ver &lt;= 15&n; *&n; */
DECL|function|fill_table_color
r_static
r_void
id|fill_table_color
c_func
(paren
r_int
r_int
id|version
comma
r_const
r_int
r_int
op_star
id|romtable
comma
r_int
r_char
op_star
id|p0004
comma
r_int
r_char
op_star
id|p8004
)paren
(brace
r_const
r_int
r_int
op_star
id|table
suffix:semicolon
r_int
r_char
op_star
id|p0
comma
op_star
id|p8
suffix:semicolon
r_int
id|i
comma
id|j
comma
id|k
suffix:semicolon
r_int
id|dl
comma
id|bit
comma
id|pw
suffix:semicolon
id|romtable
op_add_assign
id|version
op_star
l_int|256
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|table
op_assign
id|romtable
op_plus
id|i
op_star
l_int|128
suffix:semicolon
r_for
c_loop
(paren
id|dl
op_assign
l_int|0
suffix:semicolon
id|dl
OL
l_int|16
suffix:semicolon
id|dl
op_increment
)paren
(brace
id|p0
op_assign
id|p0004
op_plus
(paren
id|i
op_lshift
l_int|14
)paren
op_plus
(paren
id|dl
op_lshift
l_int|10
)paren
suffix:semicolon
id|p8
op_assign
id|p8004
op_plus
(paren
id|i
op_lshift
l_int|12
)paren
op_plus
(paren
id|dl
op_lshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|8
suffix:semicolon
id|j
op_increment
comma
id|table
op_increment
comma
id|p0
op_add_assign
l_int|128
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|16
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
id|k
op_eq
l_int|0
)paren
id|bit
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|k
op_ge
l_int|1
op_logical_and
id|k
OL
l_int|3
)paren
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
op_rshift
l_int|15
)paren
op_amp
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|k
op_ge
l_int|3
op_logical_and
id|k
OL
l_int|6
)paren
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
op_rshift
l_int|12
)paren
op_amp
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|k
op_ge
l_int|6
op_logical_and
id|k
OL
l_int|10
)paren
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
op_rshift
l_int|9
)paren
op_amp
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|k
op_ge
l_int|10
op_logical_and
id|k
OL
l_int|13
)paren
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
op_rshift
l_int|6
)paren
op_amp
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|k
op_ge
l_int|13
op_logical_and
id|k
OL
l_int|15
)paren
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
op_rshift
l_int|3
)paren
op_amp
l_int|7
suffix:semicolon
r_else
id|bit
op_assign
(paren
id|table
(braket
l_int|0
)braket
)paren
op_amp
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|k
op_eq
l_int|0
)paren
op_star
(paren
r_int
r_char
op_star
)paren
id|p8
op_increment
op_assign
l_int|8
suffix:semicolon
r_else
op_star
(paren
r_int
r_char
op_star
)paren
id|p8
op_increment
op_assign
id|j
op_minus
id|bit
suffix:semicolon
op_star
(paren
r_int
r_char
op_star
)paren
id|p8
op_increment
op_assign
id|bit
suffix:semicolon
id|pw
op_assign
l_int|1
op_lshift
id|bit
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x00
)braket
op_assign
(paren
l_int|1
op_star
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x10
)braket
op_assign
(paren
l_int|2
op_star
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x20
)braket
op_assign
(paren
l_int|3
op_star
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x30
)braket
op_assign
(paren
l_int|4
op_star
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x40
)braket
op_assign
(paren
op_minus
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x50
)braket
op_assign
(paren
l_int|2
op_star
op_minus
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x60
)braket
op_assign
(paren
l_int|3
op_star
op_minus
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
id|p0
(braket
id|k
op_plus
l_int|0x70
)braket
op_assign
(paren
l_int|4
op_star
op_minus
id|pw
)paren
op_plus
l_int|0x80
suffix:semicolon
)brace
multiline_comment|/* end of for (k=0; k&lt;16; k++, p8++) */
)brace
multiline_comment|/* end of for (j=0; j&lt;8; j++ , table++) */
)brace
multiline_comment|/* end of for (dl=0; dl&lt;16; dl++) */
)brace
multiline_comment|/* end of for (i=0; i&lt;2; i++) */
)brace
multiline_comment|/*&n; * precision = (pdev-&gt;xx + pdev-&gt;yy)&n; *&n; */
DECL|function|fill_table_dc00_d800
r_static
r_void
id|fill_table_dc00_d800
c_func
(paren
r_int
r_int
id|precision
comma
r_int
r_int
op_star
id|pdc00
comma
r_int
r_int
op_star
id|pd800
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
r_int
id|offset1
comma
id|offset2
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|offset1
op_assign
l_int|0x4000
comma
id|offset2
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
comma
id|offset1
op_add_assign
l_int|0x7BC4
comma
id|offset2
op_add_assign
l_int|0x7BC4
)paren
(brace
r_int
r_int
id|msb
op_assign
id|offset1
op_rshift
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|msb
OG
l_int|255
)paren
(brace
r_if
c_cond
(paren
id|msb
)paren
id|msb
op_assign
l_int|0
suffix:semicolon
r_else
id|msb
op_assign
l_int|255
suffix:semicolon
)brace
op_star
id|pdc00
op_increment
op_assign
id|msb
op_lshift
id|precision
suffix:semicolon
op_star
id|pd800
op_increment
op_assign
id|offset2
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * struct {&n; *   unsigned char op;&t;    // operation to execute&n; *   unsigned char bits;    // bits use to perform operation&n; *   unsigned char offset1; // offset to add to access in the table_0004 % 16&n; *   unsigned char offset2; // offset to add to access in the table_0004&n; * }&n; *&n; */
DECL|variable|table_ops
r_static
r_int
r_int
id|table_ops
(braket
)braket
op_assign
(brace
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x01
comma
l_int|0x30
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x01
comma
l_int|0x20
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x02
comma
l_int|0x10
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x01
comma
l_int|0x60
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x02
comma
l_int|0x40
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x03
comma
l_int|0x40
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x01
comma
l_int|0x70
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x01
comma
l_int|0x20
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x03
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x10
comma
l_int|0x00
comma
l_int|0x06
comma
l_int|0x02
comma
l_int|0x50
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x01
comma
l_int|0x60
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x02
comma
l_int|0x40
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x40
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x03
comma
l_int|0x40
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
multiline_comment|/*&n; * TODO: multiply by 4 all values&n; *&n; */
DECL|variable|MulIdx
r_static
r_int
r_int
id|MulIdx
(braket
l_int|256
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|6
comma
l_int|7
comma
l_int|8
comma
l_int|9
comma
l_int|7
comma
l_int|10
comma
l_int|11
comma
l_int|8
comma
l_int|8
comma
l_int|11
comma
l_int|10
comma
l_int|7
comma
l_int|9
comma
l_int|8
comma
l_int|7
comma
l_int|6
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|1
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|3
comma
l_int|2
comma
l_int|1
comma
l_int|0
comma
l_int|3
comma
l_int|2
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|7
comma
l_int|10
comma
l_int|11
comma
l_int|8
comma
l_int|9
comma
l_int|8
comma
l_int|7
comma
l_int|6
comma
l_int|6
comma
l_int|7
comma
l_int|8
comma
l_int|9
comma
l_int|8
comma
l_int|11
comma
l_int|10
comma
l_int|7
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|4
comma
l_int|5
comma
l_int|5
comma
l_int|4
comma
l_int|7
comma
l_int|9
comma
l_int|6
comma
l_int|8
comma
l_int|10
comma
l_int|8
comma
l_int|7
comma
l_int|11
comma
l_int|11
comma
l_int|7
comma
l_int|8
comma
l_int|10
comma
l_int|8
comma
l_int|6
comma
l_int|9
comma
l_int|7
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|2
comma
l_int|0
comma
l_int|3
comma
l_int|1
comma
l_int|2
comma
l_int|0
comma
l_int|3
comma
l_int|1
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|1
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|3
comma
l_int|0
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|10
comma
l_int|8
comma
l_int|7
comma
l_int|11
comma
l_int|8
comma
l_int|6
comma
l_int|9
comma
l_int|7
comma
l_int|7
comma
l_int|9
comma
l_int|6
comma
l_int|8
comma
l_int|11
comma
l_int|7
comma
l_int|8
comma
l_int|10
)brace
suffix:semicolon
DECL|function|pwc_dec23_init
r_void
id|pwc_dec23_init
c_func
(paren
r_int
id|type
comma
r_int
id|release
comma
r_int
r_char
op_star
id|mode
comma
r_void
op_star
id|data
)paren
(brace
r_int
id|flags
suffix:semicolon
r_struct
id|pwc_dec23_private
op_star
id|pdev
op_assign
id|data
suffix:semicolon
id|release
op_assign
id|release
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
l_int|720
suffix:colon
r_case
l_int|730
suffix:colon
r_case
l_int|740
suffix:colon
r_case
l_int|750
suffix:colon
id|flags
op_assign
id|mode
(braket
l_int|2
)braket
op_amp
l_int|0x18
suffix:semicolon
multiline_comment|/* our: flags = 8, mode[2]==e8 */
r_if
c_cond
(paren
id|flags
op_eq
l_int|8
)paren
id|pdev-&gt;zz
op_assign
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|flags
op_eq
l_int|0x10
)paren
id|pdev-&gt;zz
op_assign
l_int|8
suffix:semicolon
r_else
id|pdev-&gt;zz
op_assign
l_int|6
suffix:semicolon
id|flags
op_assign
id|mode
(braket
l_int|2
)braket
op_rshift
l_int|5
suffix:semicolon
multiline_comment|/* our: 7 */
id|fill_table_color
c_func
(paren
id|flags
comma
(paren
r_int
r_int
op_star
)paren
id|KiaraRomTable
comma
id|pdev-&gt;table_0004
comma
id|pdev-&gt;table_8004
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|675
suffix:colon
r_case
l_int|680
suffix:colon
r_case
l_int|690
suffix:colon
id|flags
op_assign
id|mode
(braket
l_int|2
)braket
op_amp
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|flags
op_eq
l_int|2
)paren
id|pdev-&gt;zz
op_assign
l_int|7
suffix:semicolon
r_else
r_if
c_cond
(paren
id|flags
op_eq
l_int|4
)paren
id|pdev-&gt;zz
op_assign
l_int|8
suffix:semicolon
r_else
id|pdev-&gt;zz
op_assign
l_int|6
suffix:semicolon
id|flags
op_assign
id|mode
(braket
l_int|2
)braket
op_rshift
l_int|3
suffix:semicolon
id|fill_table_color
c_func
(paren
id|flags
comma
(paren
r_int
r_int
op_star
)paren
id|TimonRomTable
comma
id|pdev-&gt;table_0004
comma
id|pdev-&gt;table_8004
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* Not supported */
r_return
suffix:semicolon
)brace
multiline_comment|/* * * * ** */
id|pdev-&gt;xx
op_assign
l_int|8
op_minus
id|pdev-&gt;zz
suffix:semicolon
id|pdev-&gt;yy
op_assign
l_int|15
op_minus
id|pdev-&gt;xx
suffix:semicolon
id|pdev-&gt;zzmask
op_assign
l_int|0xFF
op_rshift
id|pdev-&gt;xx
suffix:semicolon
singleline_comment|//pdev-&gt;zzmask = (1U&lt;&lt;pdev-&gt;zz)-1;
id|fill_table_dc00_d800
c_func
(paren
id|pdev-&gt;xx
op_plus
id|pdev-&gt;yy
comma
id|pdev-&gt;table_dc00
comma
id|pdev-&gt;table_d800
)paren
suffix:semicolon
id|fill_table_a000
c_func
(paren
id|pdev-&gt;table_a004
)paren
suffix:semicolon
id|fill_table_d000
c_func
(paren
id|pdev-&gt;table_d004
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * To manage the stream, we keep in a 32 bits variables,&n; * the next bits in the stream. fill_reservoir() add to&n; * the reservoir at least wanted nbits.&n; *&n; *&n; */
DECL|macro|fill_nbits
mdefine_line|#define fill_nbits(reservoir,nbits_in_reservoir,stream,nbits_wanted) do { &bslash;&n;   while (nbits_in_reservoir&lt;nbits_wanted) &bslash;&n;    { &bslash;&n;      reservoir |= (*(stream)++) &lt;&lt; nbits_in_reservoir; &bslash;&n;      nbits_in_reservoir+=8; &bslash;&n;    } &bslash;&n;}  while(0);
DECL|macro|get_nbits
mdefine_line|#define get_nbits(reservoir,nbits_in_reservoir,stream,nbits_wanted,result) do { &bslash;&n;   fill_nbits(reservoir,nbits_in_reservoir,stream,nbits_wanted); &bslash;&n;   result = (reservoir) &amp; ((1U&lt;&lt;nbits_wanted)-1); &bslash;&n;   reservoir &gt;&gt;= nbits_wanted; &bslash;&n;   nbits_in_reservoir -= nbits_wanted; &bslash;&n;}  while(0);
DECL|function|DecompressBand23
r_static
r_void
id|DecompressBand23
c_func
(paren
r_const
r_struct
id|pwc_dec23_private
op_star
id|pdev
comma
r_const
r_int
r_char
op_star
id|rawyuv
comma
r_int
r_char
op_star
id|planar_y
comma
r_int
r_char
op_star
id|planar_u
comma
r_int
r_char
op_star
id|planar_v
comma
r_int
r_int
id|image_x
comma
multiline_comment|/* aka number of pixels wanted ??? */
r_int
r_int
id|pixels_per_line
comma
multiline_comment|/* aka number of pixels per line */
r_int
id|flags
)paren
(brace
r_int
r_int
id|reservoir
comma
id|nbits_in_reservoir
suffix:semicolon
r_int
id|first_4_bits
suffix:semicolon
r_int
r_int
id|bytes_per_channel
suffix:semicolon
r_int
id|line_size
suffix:semicolon
multiline_comment|/* size of the line (4Y+U+V) */
r_int
id|passes
suffix:semicolon
r_const
r_int
r_char
op_star
id|ptable0004
comma
op_star
id|ptable8004
suffix:semicolon
r_int
id|even_line
suffix:semicolon
r_int
r_int
id|temp_colors
(braket
l_int|16
)braket
suffix:semicolon
r_int
id|nblocks
suffix:semicolon
r_const
r_int
r_char
op_star
id|stream
suffix:semicolon
r_int
r_char
op_star
id|dest_y
comma
op_star
id|dest_u
op_assign
l_int|NULL
comma
op_star
id|dest_v
op_assign
l_int|NULL
suffix:semicolon
r_int
r_int
id|offset_to_plane_u
comma
id|offset_to_plane_v
suffix:semicolon
r_int
id|i
suffix:semicolon
id|reservoir
op_assign
l_int|0
suffix:semicolon
id|nbits_in_reservoir
op_assign
l_int|0
suffix:semicolon
id|stream
op_assign
id|rawyuv
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* The first byte of the stream is skipped */
id|even_line
op_assign
l_int|1
suffix:semicolon
id|get_nbits
c_func
(paren
id|reservoir
comma
id|nbits_in_reservoir
comma
id|stream
comma
l_int|4
comma
id|first_4_bits
)paren
suffix:semicolon
id|line_size
op_assign
id|pixels_per_line
op_star
l_int|3
suffix:semicolon
r_for
c_loop
(paren
id|passes
op_assign
l_int|0
suffix:semicolon
id|passes
OL
l_int|2
suffix:semicolon
id|passes
op_increment
)paren
(brace
r_if
c_cond
(paren
id|passes
op_eq
l_int|0
)paren
(brace
id|bytes_per_channel
op_assign
id|pixels_per_line
suffix:semicolon
id|dest_y
op_assign
id|planar_y
suffix:semicolon
id|nblocks
op_assign
id|image_x
op_div
l_int|4
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Format planar: All Y, then all U, then all V */
id|bytes_per_channel
op_assign
id|pixels_per_line
op_div
l_int|2
suffix:semicolon
id|dest_u
op_assign
id|planar_u
suffix:semicolon
id|dest_v
op_assign
id|planar_v
suffix:semicolon
id|dest_y
op_assign
id|dest_u
suffix:semicolon
id|nblocks
op_assign
id|image_x
op_div
l_int|8
suffix:semicolon
)brace
id|offset_to_plane_u
op_assign
id|bytes_per_channel
op_star
l_int|2
suffix:semicolon
id|offset_to_plane_v
op_assign
id|bytes_per_channel
op_star
l_int|3
suffix:semicolon
multiline_comment|/*&n;     printf(&quot;bytes_per_channel = %d&bslash;n&quot;,bytes_per_channel);&n;     printf(&quot;offset_to_plane_u = %d&bslash;n&quot;,offset_to_plane_u);&n;     printf(&quot;offset_to_plane_v = %d&bslash;n&quot;,offset_to_plane_v);&n;     */
r_while
c_loop
(paren
id|nblocks
op_decrement
OG
l_int|0
)paren
(brace
r_int
r_int
id|gray_index
suffix:semicolon
id|fill_nbits
c_func
(paren
id|reservoir
comma
id|nbits_in_reservoir
comma
id|stream
comma
l_int|16
)paren
suffix:semicolon
id|gray_index
op_assign
id|reservoir
op_amp
id|pdev-&gt;zzmask
suffix:semicolon
id|reservoir
op_rshift_assign
id|pdev-&gt;zz
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
id|pdev-&gt;zz
suffix:semicolon
id|fill_nbits
c_func
(paren
id|reservoir
comma
id|nbits_in_reservoir
comma
id|stream
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|reservoir
op_amp
l_int|3
)paren
op_eq
l_int|0
)paren
(brace
id|reservoir
op_rshift_assign
l_int|2
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
id|temp_colors
(braket
id|i
)braket
op_assign
id|pdev-&gt;table_dc00
(braket
id|gray_index
)braket
suffix:semicolon
)brace
r_else
(brace
r_int
r_int
id|channel_v
comma
id|offset1
suffix:semicolon
multiline_comment|/* swap bit 0 and 2 of offset_OR */
id|channel_v
op_assign
(paren
(paren
id|reservoir
op_amp
l_int|1
)paren
op_lshift
l_int|2
)paren
op_or
(paren
id|reservoir
op_amp
l_int|2
)paren
op_or
(paren
(paren
id|reservoir
op_amp
l_int|4
)paren
op_rshift
l_int|2
)paren
suffix:semicolon
id|reservoir
op_rshift_assign
l_int|3
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
l_int|3
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
id|temp_colors
(braket
id|i
)braket
op_assign
id|pdev-&gt;table_d800
(braket
id|gray_index
)braket
suffix:semicolon
id|ptable0004
op_assign
id|pdev-&gt;table_0004
op_plus
(paren
id|passes
op_star
l_int|16384
)paren
op_plus
(paren
id|first_4_bits
op_star
l_int|1024
)paren
op_plus
(paren
id|channel_v
op_star
l_int|128
)paren
suffix:semicolon
id|ptable8004
op_assign
id|pdev-&gt;table_8004
op_plus
(paren
id|passes
op_star
l_int|4096
)paren
op_plus
(paren
id|first_4_bits
op_star
l_int|256
)paren
op_plus
(paren
id|channel_v
op_star
l_int|32
)paren
suffix:semicolon
id|offset1
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
r_int
r_int
id|index_in_table_ops
comma
id|op
comma
id|rows
op_assign
l_int|0
suffix:semicolon
id|fill_nbits
c_func
(paren
id|reservoir
comma
id|nbits_in_reservoir
comma
id|stream
comma
l_int|16
)paren
suffix:semicolon
multiline_comment|/* mode is 0,1 or 2 */
id|index_in_table_ops
op_assign
(paren
id|reservoir
op_amp
l_int|0x3F
)paren
suffix:semicolon
id|op
op_assign
id|table_ops
(braket
id|index_in_table_ops
op_star
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|op
op_eq
l_int|2
)paren
(brace
id|reservoir
op_rshift_assign
l_int|2
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* exit the while(1) */
)brace
r_if
c_cond
(paren
id|op
op_eq
l_int|0
)paren
(brace
r_int
r_int
id|shift
suffix:semicolon
id|offset1
op_assign
(paren
id|offset1
op_plus
id|table_ops
(braket
id|index_in_table_ops
op_star
l_int|4
op_plus
l_int|2
)braket
)paren
op_amp
l_int|0x0F
suffix:semicolon
id|shift
op_assign
id|table_ops
(braket
id|index_in_table_ops
op_star
l_int|4
op_plus
l_int|1
)braket
suffix:semicolon
id|reservoir
op_rshift_assign
id|shift
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
id|shift
suffix:semicolon
id|rows
op_assign
id|ptable0004
(braket
id|offset1
op_plus
id|table_ops
(braket
id|index_in_table_ops
op_star
l_int|4
op_plus
l_int|3
)braket
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|op
op_eq
l_int|1
)paren
(brace
multiline_comment|/* 10bits [ xxxx xxxx yyyy 000 ]&n;&t;&t;   * yyy =&gt; offset in the table8004&n;&t;&t;   * xxx =&gt; offset in the tabled004&n;&t;&t;   */
r_int
r_int
id|mask
comma
id|shift
suffix:semicolon
r_int
r_int
id|col1
comma
id|row1
comma
id|total_bits
suffix:semicolon
id|offset1
op_assign
(paren
id|offset1
op_plus
(paren
(paren
id|reservoir
op_rshift
l_int|3
)paren
op_amp
l_int|0x0F
)paren
op_plus
l_int|1
)paren
op_amp
l_int|0x0F
suffix:semicolon
id|col1
op_assign
(paren
id|reservoir
op_rshift
l_int|7
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|row1
op_assign
id|ptable8004
(braket
id|offset1
op_star
l_int|2
)braket
suffix:semicolon
multiline_comment|/* Bit mask table */
id|mask
op_assign
id|pdev-&gt;table_d004
(braket
(paren
id|row1
op_lshift
l_int|8
)paren
op_plus
id|col1
)braket
suffix:semicolon
id|shift
op_assign
id|ptable8004
(braket
id|offset1
op_star
l_int|2
op_plus
l_int|1
)braket
suffix:semicolon
id|rows
op_assign
(paren
(paren
id|mask
op_lshift
id|shift
)paren
op_plus
l_int|0x80
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|total_bits
op_assign
id|row1
op_plus
l_int|8
suffix:semicolon
id|reservoir
op_rshift_assign
id|total_bits
suffix:semicolon
id|nbits_in_reservoir
op_sub_assign
id|total_bits
suffix:semicolon
)brace
(brace
r_const
r_int
r_int
op_star
id|table_a004
op_assign
id|pdev-&gt;table_a004
op_plus
id|rows
op_star
l_int|12
suffix:semicolon
r_int
r_int
op_star
id|poffset
op_assign
id|MulIdx
op_plus
id|offset1
op_star
l_int|16
suffix:semicolon
multiline_comment|/* 64/4 (int) */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|temp_colors
(braket
id|i
)braket
op_add_assign
id|table_a004
(braket
op_star
id|poffset
)braket
suffix:semicolon
id|poffset
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|macro|USE_SIGNED_INT_FOR_COLOR
mdefine_line|#define USE_SIGNED_INT_FOR_COLOR
macro_line|#ifdef USE_SIGNED_INT_FOR_COLOR
DECL|macro|CLAMP
macro_line|#  define CLAMP(x) ((x)&gt;255?255:((x)&lt;0?0:x))
macro_line|#else
macro_line|#  define CLAMP(x) ((x)&gt;255?255:x)
macro_line|#endif
r_if
c_cond
(paren
id|passes
op_eq
l_int|0
)paren
(brace
macro_line|#ifdef USE_SIGNED_INT_FOR_COLOR
r_const
r_int
op_star
id|c
op_assign
id|temp_colors
suffix:semicolon
macro_line|#else
r_const
r_int
r_int
op_star
id|c
op_assign
id|temp_colors
suffix:semicolon
macro_line|#endif
r_int
r_char
op_star
id|d
suffix:semicolon
id|d
op_assign
id|dest_y
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c
op_increment
)paren
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
id|d
op_assign
id|dest_y
op_plus
id|bytes_per_channel
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c
op_increment
)paren
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
id|d
op_assign
id|dest_y
op_plus
id|offset_to_plane_u
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c
op_increment
)paren
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
id|d
op_assign
id|dest_y
op_plus
id|offset_to_plane_v
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c
op_increment
)paren
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
id|dest_y
op_add_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|passes
op_eq
l_int|1
)paren
(brace
macro_line|#ifdef USE_SIGNED_INT_FOR_COLOR
r_int
op_star
id|c1
op_assign
id|temp_colors
suffix:semicolon
r_int
op_star
id|c2
op_assign
id|temp_colors
op_plus
l_int|4
suffix:semicolon
macro_line|#else
r_int
r_int
op_star
id|c1
op_assign
id|temp_colors
suffix:semicolon
r_int
r_int
op_star
id|c2
op_assign
id|temp_colors
op_plus
l_int|4
suffix:semicolon
macro_line|#endif
r_int
r_char
op_star
id|d
suffix:semicolon
id|d
op_assign
id|dest_y
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c1
op_increment
comma
id|c2
op_increment
)paren
(brace
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c1
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c2
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
)brace
id|c1
op_assign
id|temp_colors
op_plus
l_int|12
suffix:semicolon
singleline_comment|//c2 = temp_colors+8;
id|d
op_assign
id|dest_y
op_plus
id|bytes_per_channel
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|c1
op_increment
comma
id|c2
op_increment
)paren
(brace
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c1
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
op_star
id|d
op_increment
op_assign
id|CLAMP
c_func
(paren
(paren
op_star
id|c2
)paren
op_rshift
id|pdev-&gt;yy
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|even_line
)paren
multiline_comment|/* Each line, swap u/v */
(brace
id|even_line
op_assign
l_int|0
suffix:semicolon
id|dest_y
op_assign
id|dest_v
suffix:semicolon
id|dest_u
op_add_assign
l_int|8
suffix:semicolon
)brace
r_else
(brace
id|even_line
op_assign
l_int|1
suffix:semicolon
id|dest_y
op_assign
id|dest_u
suffix:semicolon
id|dest_v
op_add_assign
l_int|8
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* end of while (nblocks--&gt;0) */
)brace
multiline_comment|/* end of for (passes=0;passes&lt;2;passes++) */
)brace
multiline_comment|/**&n; *&n; * image: size of the image wanted&n; * view : size of the image returned by the camera&n; * offset: (x,y) to displayer image in the view&n; *&n; * src: raw data&n; * dst: image output&n; * flags: PWCX_FLAG_PLANAR&n; * pdev: private buffer&n; * bandlength:&n; *&n; */
DECL|function|pwc_dec23_decompress
r_void
id|pwc_dec23_decompress
c_func
(paren
r_const
r_struct
id|pwc_coord
op_star
id|image
comma
r_const
r_struct
id|pwc_coord
op_star
id|view
comma
r_const
r_struct
id|pwc_coord
op_star
id|offset
comma
r_const
r_void
op_star
id|src
comma
r_void
op_star
id|dst
comma
r_int
id|flags
comma
r_const
r_void
op_star
id|data
comma
r_int
id|bandlength
)paren
(brace
r_const
r_struct
id|pwc_dec23_private
op_star
id|pdev
op_assign
id|data
suffix:semicolon
r_int
r_char
op_star
id|pout
comma
op_star
id|pout_planar_y
op_assign
l_int|NULL
comma
op_star
id|pout_planar_u
op_assign
l_int|NULL
comma
op_star
id|pout_planar_v
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
comma
id|n
comma
id|stride
comma
id|pixel_size
suffix:semicolon
r_if
c_cond
(paren
id|flags
op_amp
id|PWCX_FLAG_BAYER
)paren
(brace
id|pout
op_assign
id|dst
op_plus
(paren
id|view-&gt;x
op_star
id|offset-&gt;y
)paren
op_plus
id|offset-&gt;x
suffix:semicolon
id|pixel_size
op_assign
id|view-&gt;x
op_star
l_int|4
suffix:semicolon
)brace
r_else
(brace
id|n
op_assign
id|view-&gt;x
op_star
id|view-&gt;y
suffix:semicolon
multiline_comment|/* offset in Y plane */
id|stride
op_assign
id|view-&gt;x
op_star
id|offset-&gt;y
suffix:semicolon
id|pout_planar_y
op_assign
id|dst
op_plus
id|stride
op_plus
id|offset-&gt;x
suffix:semicolon
multiline_comment|/* offsets in U/V planes */
id|stride
op_assign
(paren
id|view-&gt;x
op_star
id|offset-&gt;y
)paren
op_div
l_int|4
op_plus
id|offset-&gt;x
op_div
l_int|2
suffix:semicolon
id|pout_planar_u
op_assign
id|dst
op_plus
id|n
op_plus
op_plus
id|stride
suffix:semicolon
id|pout_planar_v
op_assign
id|dst
op_plus
id|n
op_plus
id|n
op_div
l_int|4
op_plus
id|stride
suffix:semicolon
id|pixel_size
op_assign
id|view-&gt;x
op_star
l_int|4
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|image-&gt;y
suffix:semicolon
id|i
op_add_assign
l_int|4
)paren
(brace
r_if
c_cond
(paren
id|flags
op_amp
id|PWCX_FLAG_BAYER
)paren
(brace
singleline_comment|//TODO:
singleline_comment|//DecompressBandBayer(pdev,src,pout,image.x,view-&gt;x,flags);
id|src
op_add_assign
id|bandlength
suffix:semicolon
id|pout
op_add_assign
id|pixel_size
suffix:semicolon
)brace
r_else
(brace
id|DecompressBand23
c_func
(paren
id|pdev
comma
id|src
comma
id|pout_planar_y
comma
id|pout_planar_u
comma
id|pout_planar_v
comma
id|image-&gt;x
comma
id|view-&gt;x
comma
id|flags
)paren
suffix:semicolon
id|src
op_add_assign
id|bandlength
suffix:semicolon
id|pout_planar_y
op_add_assign
id|pixel_size
suffix:semicolon
id|pout_planar_u
op_add_assign
id|view-&gt;x
suffix:semicolon
id|pout_planar_v
op_add_assign
id|view-&gt;x
suffix:semicolon
)brace
)brace
)brace
DECL|function|pwc_dec23_exit
r_void
id|pwc_dec23_exit
c_func
(paren
r_void
)paren
(brace
multiline_comment|/* Do nothing */
)brace
eof
