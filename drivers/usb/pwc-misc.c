multiline_comment|/* Linux driver for Philips webcam &n;   Various miscellaneous functions and tables.&n;   (C) 1999-2001 Nemosoft Unv. (webcam@smcc.demon.nl)&n;&n;   This program is free software; you can redistribute it and/or modify&n;   it under the terms of the GNU General Public License as published by&n;   the Free Software Foundation; either version 2 of the License, or&n;   (at your option) any later version.&n;&n;   This program is distributed in the hope that it will be useful,&n;   but WITHOUT ANY WARRANTY; without even the implied warranty of&n;   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n;   GNU General Public License for more details.&n;&n;   You should have received a copy of the GNU General Public License&n;   along with this program; if not, write to the Free Software&n;   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n;*/
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &quot;pwc.h&quot;
DECL|variable|pwc_image_sizes
r_struct
id|pwc_coord
id|pwc_image_sizes
(braket
id|PSZ_MAX
)braket
op_assign
(brace
(brace
l_int|128
comma
l_int|96
comma
l_int|0
)brace
comma
(brace
l_int|160
comma
l_int|120
comma
l_int|0
)brace
comma
(brace
l_int|176
comma
l_int|144
comma
l_int|0
)brace
comma
(brace
l_int|320
comma
l_int|240
comma
l_int|0
)brace
comma
(brace
l_int|352
comma
l_int|288
comma
l_int|0
)brace
comma
(brace
l_int|640
comma
l_int|480
comma
l_int|0
)brace
comma
)brace
suffix:semicolon
multiline_comment|/* x,y -&gt; PSZ_ */
DECL|function|pwc_decode_size
r_int
id|pwc_decode_size
c_func
(paren
r_struct
id|pwc_device
op_star
id|pdev
comma
r_int
id|width
comma
r_int
id|height
)paren
(brace
r_int
id|i
comma
id|find
suffix:semicolon
multiline_comment|/* Make sure we don&squot;t go beyond our max size */
r_if
c_cond
(paren
id|width
OG
id|pdev-&gt;view_max.x
op_logical_or
id|height
OG
id|pdev-&gt;view_max.y
)paren
r_return
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* Find the largest size supported by the camera that fits into the&n;&t;   requested size. &n;&t; */
id|find
op_assign
op_minus
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|PSZ_MAX
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|pdev-&gt;image_mask
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
(brace
r_if
c_cond
(paren
id|pwc_image_sizes
(braket
id|i
)braket
dot
id|x
op_le
id|width
op_logical_and
id|pwc_image_sizes
(braket
id|i
)braket
dot
id|y
op_le
id|height
)paren
id|find
op_assign
id|i
suffix:semicolon
)brace
)brace
r_return
id|find
suffix:semicolon
)brace
multiline_comment|/* initialize variables depending on type */
DECL|function|pwc_construct
r_void
id|pwc_construct
c_func
(paren
r_struct
id|pwc_device
op_star
id|pdev
)paren
(brace
r_switch
c_cond
(paren
id|pdev-&gt;type
)paren
(brace
r_case
l_int|645
suffix:colon
r_case
l_int|646
suffix:colon
id|pdev-&gt;view_min.x
op_assign
l_int|128
suffix:semicolon
id|pdev-&gt;view_min.y
op_assign
l_int|96
suffix:semicolon
id|pdev-&gt;view_max.x
op_assign
l_int|352
suffix:semicolon
id|pdev-&gt;view_max.y
op_assign
l_int|288
suffix:semicolon
id|pdev-&gt;image_mask
op_assign
l_int|1
op_lshift
id|PSZ_SQCIF
op_or
l_int|1
op_lshift
id|PSZ_QCIF
op_or
l_int|1
op_lshift
id|PSZ_CIF
suffix:semicolon
id|pdev-&gt;vcinterface
op_assign
l_int|2
suffix:semicolon
id|pdev-&gt;vendpoint
op_assign
l_int|4
suffix:semicolon
id|pdev-&gt;frame_header_size
op_assign
l_int|0
suffix:semicolon
id|pdev-&gt;frame_trailer_size
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|675
suffix:colon
r_case
l_int|680
suffix:colon
r_case
l_int|690
suffix:colon
id|pdev-&gt;view_min.x
op_assign
l_int|128
suffix:semicolon
id|pdev-&gt;view_min.y
op_assign
l_int|96
suffix:semicolon
id|pdev-&gt;view_max.x
op_assign
l_int|640
suffix:semicolon
id|pdev-&gt;view_max.y
op_assign
l_int|480
suffix:semicolon
id|pdev-&gt;image_mask
op_assign
l_int|1
op_lshift
id|PSZ_SQCIF
op_or
l_int|1
op_lshift
id|PSZ_QSIF
op_or
l_int|1
op_lshift
id|PSZ_QCIF
op_or
l_int|1
op_lshift
id|PSZ_SIF
op_or
l_int|1
op_lshift
id|PSZ_CIF
op_or
l_int|1
op_lshift
id|PSZ_VGA
suffix:semicolon
id|pdev-&gt;vcinterface
op_assign
l_int|3
suffix:semicolon
id|pdev-&gt;vendpoint
op_assign
l_int|4
suffix:semicolon
id|pdev-&gt;frame_header_size
op_assign
l_int|0
suffix:semicolon
id|pdev-&gt;frame_trailer_size
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|730
suffix:colon
r_case
l_int|740
suffix:colon
r_case
l_int|750
suffix:colon
id|pdev-&gt;view_min.x
op_assign
l_int|160
suffix:semicolon
id|pdev-&gt;view_min.y
op_assign
l_int|120
suffix:semicolon
id|pdev-&gt;view_max.x
op_assign
l_int|640
suffix:semicolon
id|pdev-&gt;view_max.y
op_assign
l_int|480
suffix:semicolon
id|pdev-&gt;image_mask
op_assign
l_int|1
op_lshift
id|PSZ_QSIF
op_or
l_int|1
op_lshift
id|PSZ_SIF
op_or
l_int|1
op_lshift
id|PSZ_VGA
suffix:semicolon
id|pdev-&gt;vcinterface
op_assign
l_int|3
suffix:semicolon
id|pdev-&gt;vendpoint
op_assign
l_int|5
suffix:semicolon
id|pdev-&gt;frame_header_size
op_assign
id|TOUCAM_HEADER_SIZE
suffix:semicolon
id|pdev-&gt;frame_trailer_size
op_assign
id|TOUCAM_TRAILER_SIZE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|pdev-&gt;view_min.size
op_assign
id|pdev-&gt;view_min.x
op_star
id|pdev-&gt;view_min.y
suffix:semicolon
id|pdev-&gt;view_max.size
op_assign
id|pdev-&gt;view_max.x
op_star
id|pdev-&gt;view_max.y
suffix:semicolon
multiline_comment|/* length of image, in YUV format */
id|pdev-&gt;len_per_image
op_assign
(paren
id|pdev-&gt;view_max.size
op_star
l_int|3
)paren
op_div
l_int|2
suffix:semicolon
)brace
eof
