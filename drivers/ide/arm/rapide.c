multiline_comment|/*&n; * linux/drivers/ide/arm/rapide.c&n; *&n; * Copyright (c) 1996-2002 Russell King.&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/blkdev.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/ide.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/ecard.h&gt;
r_static
r_int
id|__devinit
DECL|function|rapide_probe
id|rapide_probe
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
comma
r_const
r_struct
id|ecard_id
op_star
id|id
)paren
(brace
r_int
r_int
id|port
op_assign
id|ecard_address
(paren
id|ec
comma
id|ECARD_MEMC
comma
l_int|0
)paren
suffix:semicolon
id|hw_regs_t
id|hw
suffix:semicolon
r_int
id|i
comma
id|ret
suffix:semicolon
id|ecard_claim
c_func
(paren
id|ec
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|hw
comma
l_int|0
comma
r_sizeof
(paren
id|hw
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|IDE_DATA_OFFSET
suffix:semicolon
id|i
op_le
id|IDE_STATUS_OFFSET
suffix:semicolon
id|i
op_increment
)paren
(brace
id|hw.io_ports
(braket
id|i
)braket
op_assign
id|port
suffix:semicolon
id|port
op_add_assign
l_int|1
op_lshift
l_int|4
suffix:semicolon
)brace
id|hw.io_ports
(braket
id|IDE_CONTROL_OFFSET
)braket
op_assign
id|port
op_plus
l_int|0x206
suffix:semicolon
id|hw.irq
op_assign
id|ec-&gt;irq
suffix:semicolon
id|ret
op_assign
id|ide_register_hw
c_func
(paren
op_amp
id|hw
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
id|ecard_release
c_func
(paren
id|ec
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * this locks the driver in-core - remove this&n;&t; * comment and the two lines below when we can&n;&t; * safely remove interfaces.&n;&t; */
r_else
id|MOD_INC_USE_COUNT
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|rapide_remove
r_static
r_void
id|__devexit
id|rapide_remove
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
)paren
(brace
multiline_comment|/* need to do more */
id|ecard_release
c_func
(paren
id|ec
)paren
suffix:semicolon
)brace
DECL|variable|rapide_ids
r_static
r_struct
id|ecard_id
id|rapide_ids
(braket
)braket
op_assign
(brace
(brace
id|MANU_YELLOWSTONE
comma
id|PROD_YELLOWSTONE_RAPIDE32
)brace
comma
(brace
l_int|0xffff
comma
l_int|0xffff
)brace
)brace
suffix:semicolon
DECL|variable|rapide_driver
r_static
r_struct
id|ecard_driver
id|rapide_driver
op_assign
(brace
dot
id|probe
op_assign
id|rapide_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|rapide_remove
)paren
comma
dot
id|id_table
op_assign
id|rapide_ids
comma
dot
id|drv
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;rapide&quot;
comma
)brace
comma
)brace
suffix:semicolon
DECL|function|rapide_init
r_static
r_int
id|__init
id|rapide_init
c_func
(paren
r_void
)paren
(brace
r_return
id|ecard_register_driver
c_func
(paren
op_amp
id|rapide_driver
)paren
suffix:semicolon
)brace
DECL|function|rapide_exit
r_static
r_void
id|__exit
id|rapide_exit
c_func
(paren
r_void
)paren
(brace
id|ecard_remove_driver
c_func
(paren
op_amp
id|rapide_driver
)paren
suffix:semicolon
)brace
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Yellowstone RAPIDE driver&quot;
)paren
suffix:semicolon
DECL|variable|rapide_init
id|module_init
c_func
(paren
id|rapide_init
)paren
suffix:semicolon
DECL|variable|rapide_exit
id|module_exit
c_func
(paren
id|rapide_exit
)paren
suffix:semicolon
eof
