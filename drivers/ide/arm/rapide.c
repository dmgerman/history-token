multiline_comment|/*&n; * linux/drivers/ide/arm/rapide.c&n; *&n; * Copyright (c) 1996-2002 Russell King.&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/blkdev.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/ide.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/ecard.h&gt;
multiline_comment|/*&n; * Something like this really should be in generic code, but isn&squot;t.&n; */
r_static
id|ide_hwif_t
op_star
DECL|function|rapide_locate_hwif
id|rapide_locate_hwif
c_func
(paren
r_void
id|__iomem
op_star
id|base
comma
r_void
id|__iomem
op_star
id|ctrl
comma
r_int
r_int
id|sz
comma
r_int
id|irq
)paren
(brace
r_int
r_int
id|port
op_assign
(paren
r_int
r_int
)paren
id|base
suffix:semicolon
id|ide_hwif_t
op_star
id|hwif
suffix:semicolon
r_int
id|index
comma
id|i
suffix:semicolon
r_for
c_loop
(paren
id|index
op_assign
l_int|0
suffix:semicolon
id|index
OL
id|MAX_HWIFS
suffix:semicolon
op_increment
id|index
)paren
(brace
id|hwif
op_assign
id|ide_hwifs
op_plus
id|index
suffix:semicolon
r_if
c_cond
(paren
id|hwif-&gt;io_ports
(braket
id|IDE_DATA_OFFSET
)braket
op_eq
id|port
)paren
r_goto
id|found
suffix:semicolon
)brace
r_for
c_loop
(paren
id|index
op_assign
l_int|0
suffix:semicolon
id|index
OL
id|MAX_HWIFS
suffix:semicolon
op_increment
id|index
)paren
(brace
id|hwif
op_assign
id|ide_hwifs
op_plus
id|index
suffix:semicolon
r_if
c_cond
(paren
id|hwif-&gt;io_ports
(braket
id|IDE_DATA_OFFSET
)braket
op_eq
l_int|0
)paren
r_goto
id|found
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
id|found
suffix:colon
r_for
c_loop
(paren
id|i
op_assign
id|IDE_DATA_OFFSET
suffix:semicolon
id|i
op_le
id|IDE_STATUS_OFFSET
suffix:semicolon
id|i
op_increment
)paren
(brace
id|hwif-&gt;hw.io_ports
(braket
id|i
)braket
op_assign
id|port
suffix:semicolon
id|hwif-&gt;io_ports
(braket
id|i
)braket
op_assign
id|port
suffix:semicolon
id|port
op_add_assign
id|sz
suffix:semicolon
)brace
id|hwif-&gt;hw.io_ports
(braket
id|IDE_CONTROL_OFFSET
)braket
op_assign
(paren
r_int
r_int
)paren
id|ctrl
suffix:semicolon
id|hwif-&gt;io_ports
(braket
id|IDE_CONTROL_OFFSET
)braket
op_assign
(paren
r_int
r_int
)paren
id|ctrl
suffix:semicolon
id|hwif-&gt;hw.irq
op_assign
id|hwif-&gt;irq
op_assign
id|irq
suffix:semicolon
id|hwif-&gt;mmio
op_assign
l_int|2
suffix:semicolon
id|default_hwif_mmiops
c_func
(paren
id|hwif
)paren
suffix:semicolon
r_return
id|hwif
suffix:semicolon
)brace
r_static
r_int
id|__devinit
DECL|function|rapide_probe
id|rapide_probe
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
comma
r_const
r_struct
id|ecard_id
op_star
id|id
)paren
(brace
id|ide_hwif_t
op_star
id|hwif
suffix:semicolon
r_void
id|__iomem
op_star
id|base
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|ret
op_assign
id|ecard_request_resources
c_func
(paren
id|ec
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_goto
id|out
suffix:semicolon
id|base
op_assign
id|ioremap
c_func
(paren
id|ecard_resource_start
c_func
(paren
id|ec
comma
id|ECARD_RES_MEMC
)paren
comma
id|ecard_resource_len
c_func
(paren
id|ec
comma
id|ECARD_RES_MEMC
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|base
)paren
(brace
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|release
suffix:semicolon
)brace
id|hwif
op_assign
id|rapide_locate_hwif
c_func
(paren
id|base
comma
id|base
op_plus
l_int|0x818
comma
l_int|1
op_lshift
l_int|6
comma
id|ec-&gt;irq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hwif
)paren
(brace
id|hwif-&gt;hwif_data
op_assign
id|base
suffix:semicolon
id|hwif-&gt;gendev.parent
op_assign
op_amp
id|ec-&gt;dev
suffix:semicolon
id|hwif-&gt;noprobe
op_assign
l_int|0
suffix:semicolon
id|probe_hwif_init
c_func
(paren
id|hwif
)paren
suffix:semicolon
id|create_proc_ide_interfaces
c_func
(paren
)paren
suffix:semicolon
id|ecard_set_drvdata
c_func
(paren
id|ec
comma
id|hwif
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|iounmap
c_func
(paren
id|base
)paren
suffix:semicolon
id|release
suffix:colon
id|ecard_release_resources
c_func
(paren
id|ec
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|rapide_remove
r_static
r_void
id|__devexit
id|rapide_remove
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
)paren
(brace
id|ide_hwif_t
op_star
id|hwif
op_assign
id|ecard_get_drvdata
c_func
(paren
id|ec
)paren
suffix:semicolon
id|ecard_set_drvdata
c_func
(paren
id|ec
comma
l_int|NULL
)paren
suffix:semicolon
multiline_comment|/* there must be a better way */
id|ide_unregister
c_func
(paren
id|hwif
op_minus
id|ide_hwifs
)paren
suffix:semicolon
id|iounmap
c_func
(paren
id|hwif-&gt;hwif_data
)paren
suffix:semicolon
id|ecard_release_resources
c_func
(paren
id|ec
)paren
suffix:semicolon
)brace
DECL|variable|rapide_ids
r_static
r_struct
id|ecard_id
id|rapide_ids
(braket
)braket
op_assign
(brace
(brace
id|MANU_YELLOWSTONE
comma
id|PROD_YELLOWSTONE_RAPIDE32
)brace
comma
(brace
l_int|0xffff
comma
l_int|0xffff
)brace
)brace
suffix:semicolon
DECL|variable|rapide_driver
r_static
r_struct
id|ecard_driver
id|rapide_driver
op_assign
(brace
dot
id|probe
op_assign
id|rapide_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|rapide_remove
)paren
comma
dot
id|id_table
op_assign
id|rapide_ids
comma
dot
id|drv
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;rapide&quot;
comma
)brace
comma
)brace
suffix:semicolon
DECL|function|rapide_init
r_static
r_int
id|__init
id|rapide_init
c_func
(paren
r_void
)paren
(brace
r_return
id|ecard_register_driver
c_func
(paren
op_amp
id|rapide_driver
)paren
suffix:semicolon
)brace
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Yellowstone RAPIDE driver&quot;
)paren
suffix:semicolon
DECL|variable|rapide_init
id|module_init
c_func
(paren
id|rapide_init
)paren
suffix:semicolon
eof
