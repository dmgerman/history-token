multiline_comment|/*&n; *   linux/drivers/video/fbmon.c&n; *&n; *  Copyright (C) 2002 James Simmons &lt;jsimmons@users.sf.net&gt;&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file COPYING in the main directory of this archive&n; * for more details.&n; *&n; */
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#ifdef CONFIG_PCI
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#endif
multiline_comment|/* &n; * EDID parser&n; *&n; * portions of this file were based on the EDID parser by&n; * John Fremlin &lt;vii@users.sourceforge.net&gt; and Ani Joshi &lt;ajoshi@unixbox.com&gt;&n; */
DECL|macro|EDID_LENGTH
mdefine_line|#define EDID_LENGTH&t;&t;&t;&t;0x80
DECL|macro|EDID_HEADER
mdefine_line|#define EDID_HEADER&t;&t;&t;&t;0x00
DECL|macro|EDID_HEADER_END
mdefine_line|#define EDID_HEADER_END&t;&t;&t;&t;0x07
DECL|macro|ID_MANUFACTURER_NAME
mdefine_line|#define ID_MANUFACTURER_NAME&t;&t;&t;0x08
DECL|macro|ID_MANUFACTURER_NAME_END
mdefine_line|#define ID_MANUFACTURER_NAME_END&t;&t;0x09
DECL|macro|ID_MODEL
mdefine_line|#define ID_MODEL&t;&t;&t;&t;0x0a
DECL|macro|ID_SERIAL_NUMBER
mdefine_line|#define ID_SERIAL_NUMBER&t;&t;&t;0x0c
DECL|macro|MANUFACTURE_WEEK
mdefine_line|#define MANUFACTURE_WEEK&t;&t;&t;0x10
DECL|macro|MANUFACTURE_YEAR
mdefine_line|#define MANUFACTURE_YEAR&t;&t;&t;0x11
DECL|macro|EDID_STRUCT_VERSION
mdefine_line|#define EDID_STRUCT_VERSION&t;&t;&t;0x12
DECL|macro|EDID_STRUCT_REVISION
mdefine_line|#define EDID_STRUCT_REVISION&t;&t;&t;0x13
DECL|macro|DPMS_FLAGS
mdefine_line|#define DPMS_FLAGS&t;&t;&t;&t;0x18
DECL|macro|ESTABLISHED_TIMING_1
mdefine_line|#define ESTABLISHED_TIMING_1&t;&t;&t;0x23
DECL|macro|ESTABLISHED_TIMING_2
mdefine_line|#define ESTABLISHED_TIMING_2&t;&t;&t;0x24
DECL|macro|MANUFACTURERS_TIMINGS
mdefine_line|#define MANUFACTURERS_TIMINGS&t;&t;&t;0x25
DECL|macro|DETAILED_TIMING_DESCRIPTIONS_START
mdefine_line|#define DETAILED_TIMING_DESCRIPTIONS_START&t;0x36
DECL|macro|DETAILED_TIMING_DESCRIPTION_SIZE
mdefine_line|#define DETAILED_TIMING_DESCRIPTION_SIZE&t;18
DECL|macro|NO_DETAILED_TIMING_DESCRIPTIONS
mdefine_line|#define NO_DETAILED_TIMING_DESCRIPTIONS&t;&t;4
DECL|macro|DETAILED_TIMING_DESCRIPTION_1
mdefine_line|#define DETAILED_TIMING_DESCRIPTION_1&t;&t;0x36
DECL|macro|DETAILED_TIMING_DESCRIPTION_2
mdefine_line|#define DETAILED_TIMING_DESCRIPTION_2&t;&t;0x48
DECL|macro|DETAILED_TIMING_DESCRIPTION_3
mdefine_line|#define DETAILED_TIMING_DESCRIPTION_3&t;&t;0x5a
DECL|macro|DETAILED_TIMING_DESCRIPTION_4
mdefine_line|#define DETAILED_TIMING_DESCRIPTION_4&t;&t;0x6c
DECL|macro|DESCRIPTOR_DATA
mdefine_line|#define DESCRIPTOR_DATA&t;&t;&t;&t;5
DECL|macro|UPPER_NIBBLE
mdefine_line|#define UPPER_NIBBLE( x ) &bslash;&n;        (((128|64|32|16) &amp; (x)) &gt;&gt; 4)
DECL|macro|LOWER_NIBBLE
mdefine_line|#define LOWER_NIBBLE( x ) &bslash;&n;        ((1|2|4|8) &amp; (x))
DECL|macro|COMBINE_HI_8LO
mdefine_line|#define COMBINE_HI_8LO( hi, lo ) &bslash;&n;        ( (((unsigned)hi) &lt;&lt; 8) | (unsigned)lo )
DECL|macro|COMBINE_HI_4LO
mdefine_line|#define COMBINE_HI_4LO( hi, lo ) &bslash;&n;        ( (((unsigned)hi) &lt;&lt; 4) | (unsigned)lo )
DECL|macro|PIXEL_CLOCK_LO
mdefine_line|#define PIXEL_CLOCK_LO     (unsigned)block[ 0 ]
DECL|macro|PIXEL_CLOCK_HI
mdefine_line|#define PIXEL_CLOCK_HI     (unsigned)block[ 1 ]
DECL|macro|PIXEL_CLOCK
mdefine_line|#define PIXEL_CLOCK&t;   (COMBINE_HI_8LO( PIXEL_CLOCK_HI,PIXEL_CLOCK_LO )*1000)
DECL|macro|H_ACTIVE_LO
mdefine_line|#define H_ACTIVE_LO        (unsigned)block[ 2 ]
DECL|macro|H_BLANKING_LO
mdefine_line|#define H_BLANKING_LO      (unsigned)block[ 3 ]
DECL|macro|H_ACTIVE_HI
mdefine_line|#define H_ACTIVE_HI        UPPER_NIBBLE( (unsigned)block[ 4 ] )
DECL|macro|H_ACTIVE
mdefine_line|#define H_ACTIVE           COMBINE_HI_8LO( H_ACTIVE_HI, H_ACTIVE_LO )
DECL|macro|H_BLANKING_HI
mdefine_line|#define H_BLANKING_HI      LOWER_NIBBLE( (unsigned)block[ 4 ] )
DECL|macro|H_BLANKING
mdefine_line|#define H_BLANKING         COMBINE_HI_8LO( H_BLANKING_HI, H_BLANKING_LO )
DECL|macro|V_ACTIVE_LO
mdefine_line|#define V_ACTIVE_LO        (unsigned)block[ 5 ]
DECL|macro|V_BLANKING_LO
mdefine_line|#define V_BLANKING_LO      (unsigned)block[ 6 ]
DECL|macro|V_ACTIVE_HI
mdefine_line|#define V_ACTIVE_HI        UPPER_NIBBLE( (unsigned)block[ 7 ] )
DECL|macro|V_ACTIVE
mdefine_line|#define V_ACTIVE           COMBINE_HI_8LO( V_ACTIVE_HI, V_ACTIVE_LO )
DECL|macro|V_BLANKING_HI
mdefine_line|#define V_BLANKING_HI      LOWER_NIBBLE( (unsigned)block[ 7 ] )
DECL|macro|V_BLANKING
mdefine_line|#define V_BLANKING         COMBINE_HI_8LO( V_BLANKING_HI, V_BLANKING_LO )
DECL|macro|H_SYNC_OFFSET_LO
mdefine_line|#define H_SYNC_OFFSET_LO   (unsigned)block[ 8 ]
DECL|macro|H_SYNC_WIDTH_LO
mdefine_line|#define H_SYNC_WIDTH_LO    (unsigned)block[ 9 ]
DECL|macro|V_SYNC_OFFSET_LO
mdefine_line|#define V_SYNC_OFFSET_LO   UPPER_NIBBLE( (unsigned)block[ 10 ] )
DECL|macro|V_SYNC_WIDTH_LO
mdefine_line|#define V_SYNC_WIDTH_LO    LOWER_NIBBLE( (unsigned)block[ 10 ] )
DECL|macro|V_SYNC_WIDTH_HI
mdefine_line|#define V_SYNC_WIDTH_HI    ((unsigned)block[ 11 ] &amp; (1|2))
DECL|macro|V_SYNC_OFFSET_HI
mdefine_line|#define V_SYNC_OFFSET_HI   (((unsigned)block[ 11 ] &amp; (4|8)) &gt;&gt; 2)
DECL|macro|H_SYNC_WIDTH_HI
mdefine_line|#define H_SYNC_WIDTH_HI    (((unsigned)block[ 11 ] &amp; (16|32)) &gt;&gt; 4)
DECL|macro|H_SYNC_OFFSET_HI
mdefine_line|#define H_SYNC_OFFSET_HI   (((unsigned)block[ 11 ] &amp; (64|128)) &gt;&gt; 6)
DECL|macro|V_SYNC_WIDTH
mdefine_line|#define V_SYNC_WIDTH       COMBINE_HI_4LO( V_SYNC_WIDTH_HI, V_SYNC_WIDTH_LO )
DECL|macro|V_SYNC_OFFSET
mdefine_line|#define V_SYNC_OFFSET      COMBINE_HI_4LO( V_SYNC_OFFSET_HI, V_SYNC_OFFSET_LO )
DECL|macro|H_SYNC_WIDTH
mdefine_line|#define H_SYNC_WIDTH       COMBINE_HI_4LO( H_SYNC_WIDTH_HI, H_SYNC_WIDTH_LO )
DECL|macro|H_SYNC_OFFSET
mdefine_line|#define H_SYNC_OFFSET      COMBINE_HI_4LO( H_SYNC_OFFSET_HI, H_SYNC_OFFSET_LO )
DECL|macro|H_SIZE_LO
mdefine_line|#define H_SIZE_LO          (unsigned)block[ 12 ]
DECL|macro|V_SIZE_LO
mdefine_line|#define V_SIZE_LO          (unsigned)block[ 13 ]
DECL|macro|H_SIZE_HI
mdefine_line|#define H_SIZE_HI          UPPER_NIBBLE( (unsigned)block[ 14 ] )
DECL|macro|V_SIZE_HI
mdefine_line|#define V_SIZE_HI          LOWER_NIBBLE( (unsigned)block[ 14 ] )
DECL|macro|H_SIZE
mdefine_line|#define H_SIZE             COMBINE_HI_8LO( H_SIZE_HI, H_SIZE_LO )
DECL|macro|V_SIZE
mdefine_line|#define V_SIZE             COMBINE_HI_8LO( V_SIZE_HI, V_SIZE_LO )
DECL|macro|H_BORDER
mdefine_line|#define H_BORDER           (unsigned)block[ 15 ]
DECL|macro|V_BORDER
mdefine_line|#define V_BORDER           (unsigned)block[ 16 ]
DECL|macro|FLAGS
mdefine_line|#define FLAGS              (unsigned)block[ 17 ]
DECL|macro|INTERLACED
mdefine_line|#define INTERLACED         (FLAGS&amp;128)
DECL|macro|SYNC_TYPE
mdefine_line|#define SYNC_TYPE          (FLAGS&amp;3&lt;&lt;3)&t;/* bits 4,3 */
DECL|macro|SYNC_SEPARATE
mdefine_line|#define SYNC_SEPARATE      (3&lt;&lt;3)
DECL|macro|HSYNC_POSITIVE
mdefine_line|#define HSYNC_POSITIVE     (FLAGS &amp; 4)
DECL|macro|VSYNC_POSITIVE
mdefine_line|#define VSYNC_POSITIVE     (FLAGS &amp; 2)
DECL|variable|edid_v1_header
r_const
r_int
r_char
id|edid_v1_header
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|edid_v1_descriptor_flag
r_const
r_int
r_char
id|edid_v1_descriptor_flag
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|function|edid_checksum
r_static
r_int
id|edid_checksum
c_func
(paren
r_int
r_char
op_star
id|edid
)paren
(brace
r_int
r_char
id|i
comma
id|csum
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|EDID_LENGTH
suffix:semicolon
id|i
op_increment
)paren
id|csum
op_add_assign
id|edid
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|csum
op_eq
l_int|0x00
)paren
(brace
multiline_comment|/* checksum passed, everything&squot;s good */
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
l_string|&quot;EDID checksum failed, aborting&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|edid_check_header
r_static
r_int
id|edid_check_header
c_func
(paren
r_int
r_char
op_star
id|edid
)paren
(brace
r_if
c_cond
(paren
(paren
id|edid
(braket
l_int|0
)braket
op_ne
l_int|0x00
)paren
op_logical_or
(paren
id|edid
(braket
l_int|1
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|edid
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|edid
(braket
l_int|3
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|edid
(braket
l_int|4
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|edid
(braket
l_int|5
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|edid
(braket
l_int|6
)braket
op_ne
l_int|0xff
)paren
)paren
(brace
id|printk
(paren
l_string|&quot;EDID header doesn&squot;t match EDID v1 header, aborting&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|edid_get_vendor
r_static
r_char
op_star
id|edid_get_vendor
c_func
(paren
r_int
r_char
op_star
id|block
)paren
(brace
r_static
r_char
id|sign
(braket
l_int|4
)braket
suffix:semicolon
r_int
r_int
id|h
suffix:semicolon
id|h
op_assign
id|COMBINE_HI_8LO
c_func
(paren
id|block
(braket
l_int|0
)braket
comma
id|block
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sign
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|h
op_rshift
l_int|10
)paren
op_amp
l_int|0x1f
)paren
op_plus
l_char|&squot;A&squot;
op_minus
l_int|1
suffix:semicolon
id|sign
(braket
l_int|1
)braket
op_assign
(paren
(paren
id|h
op_rshift
l_int|5
)paren
op_amp
l_int|0x1f
)paren
op_plus
l_char|&squot;A&squot;
op_minus
l_int|1
suffix:semicolon
id|sign
(braket
l_int|2
)braket
op_assign
(paren
id|h
op_amp
l_int|0x1f
)paren
op_plus
l_char|&squot;A&squot;
op_minus
l_int|1
suffix:semicolon
id|sign
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
r_return
id|sign
suffix:semicolon
)brace
DECL|function|edid_get_monitor
r_static
r_char
op_star
id|edid_get_monitor
c_func
(paren
r_int
r_char
op_star
id|block
)paren
(brace
r_static
r_char
id|name
(braket
l_int|13
)braket
suffix:semicolon
r_int
id|i
suffix:semicolon
r_const
r_int
r_char
op_star
id|ptr
op_assign
id|block
op_plus
id|DESCRIPTOR_DATA
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|13
suffix:semicolon
id|i
op_increment
comma
id|ptr
op_increment
)paren
(brace
r_if
c_cond
(paren
op_star
id|ptr
op_eq
l_int|0xa
)paren
(brace
id|name
(braket
id|i
)braket
op_assign
l_int|0x00
suffix:semicolon
r_return
id|name
suffix:semicolon
)brace
id|name
(braket
id|i
)braket
op_assign
op_star
id|ptr
suffix:semicolon
)brace
r_return
id|name
suffix:semicolon
)brace
DECL|function|edid_is_timing_block
r_static
r_int
id|edid_is_timing_block
c_func
(paren
r_int
r_char
op_star
id|block
)paren
(brace
r_if
c_cond
(paren
(paren
id|block
(braket
l_int|0
)braket
op_eq
l_int|0x00
)paren
op_logical_and
(paren
id|block
(braket
l_int|1
)braket
op_eq
l_int|0x00
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_else
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|edid_is_monitor_block
r_static
r_int
id|edid_is_monitor_block
c_func
(paren
r_int
r_char
op_star
id|block
)paren
(brace
r_if
c_cond
(paren
(paren
id|block
(braket
l_int|0
)braket
op_eq
l_int|0x00
)paren
op_logical_and
(paren
id|block
(braket
l_int|1
)braket
op_eq
l_int|0x00
)paren
op_logical_and
(paren
id|block
(braket
l_int|3
)braket
op_eq
l_int|0xfc
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_else
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|parse_timing_block
r_static
r_void
id|parse_timing_block
c_func
(paren
r_int
r_char
op_star
id|block
comma
r_struct
id|fb_var_screeninfo
op_star
id|var
)paren
(brace
id|var-&gt;xres
op_assign
id|var-&gt;xres_virtual
op_assign
id|H_ACTIVE
suffix:semicolon
id|var-&gt;yres
op_assign
id|var-&gt;yres_virtual
op_assign
id|V_ACTIVE
suffix:semicolon
id|var-&gt;height
op_assign
id|var-&gt;width
op_assign
op_minus
l_int|1
suffix:semicolon
id|var-&gt;right_margin
op_assign
id|H_SYNC_OFFSET
suffix:semicolon
id|var-&gt;left_margin
op_assign
(paren
id|H_ACTIVE
op_plus
id|H_BLANKING
)paren
op_minus
(paren
id|H_ACTIVE
op_plus
id|H_SYNC_OFFSET
op_plus
id|H_SYNC_WIDTH
)paren
suffix:semicolon
id|var-&gt;upper_margin
op_assign
id|V_BLANKING
op_minus
id|V_SYNC_OFFSET
op_minus
id|V_SYNC_WIDTH
suffix:semicolon
id|var-&gt;lower_margin
op_assign
id|V_SYNC_OFFSET
suffix:semicolon
id|var-&gt;hsync_len
op_assign
id|H_SYNC_WIDTH
suffix:semicolon
id|var-&gt;vsync_len
op_assign
id|V_SYNC_WIDTH
suffix:semicolon
id|var-&gt;pixclock
op_assign
id|PIXEL_CLOCK
suffix:semicolon
id|var-&gt;pixclock
op_div_assign
l_int|1000
suffix:semicolon
id|var-&gt;pixclock
op_assign
id|KHZ2PICOS
c_func
(paren
id|var-&gt;pixclock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HSYNC_POSITIVE
)paren
id|var-&gt;sync
op_or_assign
id|FB_SYNC_HOR_HIGH_ACT
suffix:semicolon
r_if
c_cond
(paren
id|VSYNC_POSITIVE
)paren
id|var-&gt;sync
op_or_assign
id|FB_SYNC_VERT_HIGH_ACT
suffix:semicolon
)brace
DECL|function|parse_edid
r_int
id|parse_edid
c_func
(paren
r_int
r_char
op_star
id|edid
comma
r_struct
id|fb_var_screeninfo
op_star
id|var
)paren
(brace
r_int
r_char
op_star
id|block
comma
op_star
id|vendor
comma
op_star
id|monitor
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|edid_checksum
c_func
(paren
id|edid
)paren
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|edid_check_header
c_func
(paren
id|edid
)paren
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;EDID ver %d rev %d&bslash;n&quot;
comma
(paren
r_int
)paren
id|edid
(braket
id|EDID_STRUCT_VERSION
)braket
comma
(paren
r_int
)paren
id|edid
(braket
id|EDID_STRUCT_REVISION
)braket
)paren
suffix:semicolon
id|vendor
op_assign
id|edid_get_vendor
c_func
(paren
id|edid
op_plus
id|ID_MANUFACTURER_NAME
)paren
suffix:semicolon
id|block
op_assign
id|edid
op_plus
id|DETAILED_TIMING_DESCRIPTIONS_START
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|block
op_add_assign
id|DETAILED_TIMING_DESCRIPTION_SIZE
)paren
(brace
r_if
c_cond
(paren
id|edid_is_monitor_block
c_func
(paren
id|block
)paren
)paren
(brace
id|monitor
op_assign
id|edid_get_monitor
c_func
(paren
id|block
)paren
suffix:semicolon
)brace
)brace
id|printk
c_func
(paren
l_string|&quot;EDID: detected %s %s&bslash;n&quot;
comma
id|vendor
comma
id|monitor
)paren
suffix:semicolon
id|block
op_assign
id|edid
op_plus
id|DETAILED_TIMING_DESCRIPTIONS_START
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|block
op_add_assign
id|DETAILED_TIMING_DESCRIPTION_SIZE
)paren
(brace
r_if
c_cond
(paren
id|edid_is_timing_block
c_func
(paren
id|block
)paren
)paren
(brace
id|parse_timing_block
c_func
(paren
id|block
comma
id|var
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_PCI
DECL|function|get_EDID
r_char
op_star
id|get_EDID
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
macro_line|#ifdef CONFIG_ALL_PPC
r_static
r_char
op_star
id|propnames
(braket
)braket
op_assign
(brace
l_string|&quot;DFP,EDID&quot;
comma
l_string|&quot;LCD,EDID&quot;
comma
l_string|&quot;EDID&quot;
comma
l_string|&quot;EDID1&quot;
comma
l_int|NULL
)brace
suffix:semicolon
r_int
r_char
op_star
id|pedid
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|device_node
op_star
id|dp
suffix:semicolon
r_int
id|i
suffix:semicolon
id|dp
op_assign
id|pci_device_to_OF_node
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_while
c_loop
(paren
id|dp
op_ne
l_int|NULL
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|propnames
(braket
id|i
)braket
op_ne
l_int|NULL
suffix:semicolon
op_increment
id|i
)paren
(brace
id|pedid
op_assign
(paren
r_int
r_char
op_star
)paren
id|get_property
c_func
(paren
id|dp
comma
id|propnames
(braket
id|i
)braket
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pedid
op_ne
l_int|NULL
)paren
r_return
id|pedid
suffix:semicolon
)brace
id|dp
op_assign
id|dp-&gt;child
suffix:semicolon
)brace
r_return
id|pedid
suffix:semicolon
macro_line|#else
r_return
l_int|NULL
suffix:semicolon
macro_line|#endif
)brace
macro_line|#endif
DECL|variable|parse_edid
id|EXPORT_SYMBOL
c_func
(paren
id|parse_edid
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PCI
DECL|variable|get_EDID
id|EXPORT_SYMBOL
c_func
(paren
id|get_EDID
)paren
suffix:semicolon
macro_line|#endif
eof
