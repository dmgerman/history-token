multiline_comment|/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/sis/init301.c,v 1.3 2000/12/02 01:16:16 dawes Exp $ */
macro_line|#include &quot;init301.h&quot;
macro_line|#ifdef CONFIG_FB_SIS_300
macro_line|#include &quot;oem300.h&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
macro_line|#include &quot;oem310.h&quot;
macro_line|#endif
id|BOOLEAN
DECL|function|SiS_SetCRT2Group301
id|SiS_SetCRT2Group301
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
suffix:semicolon
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_SelectCRT2Rate
op_assign
l_int|4
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_SaveCRT2Info
(paren
id|ModeNo
)paren
suffix:semicolon
id|SiS_DisableBridge
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetCRT2ModeRegs
(paren
id|BaseAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_LockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_DisplayOn
(paren
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
multiline_comment|/* SetDefCRT2ExtRegs(BaseAddr);   */
id|SiS_GetCRT2Data
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_GetLVDSDesData
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_GetLVDSDesData
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
id|SiS_SetGroup1
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
id|SiS_SetGroup2
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup3
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup4
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup5
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
id|SiS_SetCHTVReg
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
id|SiS_ModCRT1CRTC
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
id|SiS_SetCRT2ECLK
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
id|SiS_OEM300Setting
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
multiline_comment|/* 05/02/01 ynlai for sis550 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
multiline_comment|/* 05/02/01 ynlai for 550 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
multiline_comment|/* 09/03/01 chiawen for 640/740 */
id|SiS_OEM310Setting
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_CRT2AutoThreshold
(paren
id|BaseAddr
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SiS_EnableBridge
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_DisplayOn
(paren
)paren
suffix:semicolon
id|SiS_LockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup1
id|SiS_SetGroup1
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
op_assign
l_int|0
comma
id|tempax
op_assign
l_int|0
comma
id|tempbx
op_assign
l_int|0
comma
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|pushbx
op_assign
l_int|0
comma
id|CRT1Index
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
)brace
r_else
(brace
id|CRT1Index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|CRT1Index
op_assign
id|CRT1Index
op_amp
l_int|0x3F
suffix:semicolon
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
)brace
r_else
(brace
id|SiS_SetCRT2Offset
(paren
id|SiS_Part1Port
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
multiline_comment|/* 300 series */
id|SiS_SetCRT2FIFO
(paren
id|SiS_Part1Port
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_else
multiline_comment|/* 310 series */
id|SiS_SetCRT2FIFO2
(paren
id|SiS_Part1Port
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetCRT2Sync
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_SetGroup1_LCDA
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b */
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
id|temp
op_assign
(paren
id|SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
(paren
id|SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
op_complement
l_int|0x0F0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
id|pushbx
op_assign
id|SiS_VGAHDE
op_plus
l_int|12
suffix:semicolon
multiline_comment|/* bx  BTVGA@HRS 0x0B,0x0C */
id|tempcx
op_assign
(paren
id|SiS_VGAHT
op_minus
id|SiS_VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* cx */
id|tempbx
op_assign
id|pushbx
op_plus
id|tempcx
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_lshift
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
(paren
(paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_minus
l_int|1
)paren
op_lshift
l_int|3
suffix:semicolon
id|tempcx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0x1F
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|6
op_minus
l_int|2
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
(paren
id|tempcx
op_or
id|temp
)paren
op_minus
l_int|1
)paren
op_lshift
l_int|3
suffix:semicolon
)brace
)brace
multiline_comment|/*add for hardware request */
r_if
c_cond
(paren
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310 series */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
multiline_comment|/* for low resolution mode */
id|temp
op_assign
(paren
id|SiS_VGAHT
op_div
l_int|2
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
(paren
id|SiS_VGAHT
op_div
l_int|2
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
op_complement
l_int|0x0F0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_VGAHDE
op_div
l_int|2
op_plus
l_int|16
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
id|pushbx
op_assign
id|SiS_VGAHDE
op_div
l_int|2
op_plus
l_int|16
suffix:semicolon
id|tempcx
op_assign
(paren
(paren
id|SiS_VGAHT
op_minus
id|SiS_VGAHDE
)paren
op_div
l_int|2
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* cx */
id|tempbx
op_assign
id|pushbx
op_plus
id|tempcx
suffix:semicolon
multiline_comment|/* bx  BTVGA@HRS 0x0B,0x0C */
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
(paren
(paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/*(VGAHRS-3)*8 */
id|tempcx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0x1F
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|5
op_minus
l_int|2
)paren
suffix:semicolon
multiline_comment|/*VGAHRE D[5] */
id|tempcx
op_assign
(paren
(paren
id|tempcx
op_or
id|temp
)paren
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* (VGAHRE-3)*8 */
)brace
)brace
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
id|tempcx
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OG
(paren
id|SiS_VGAHT
op_div
l_int|2
)paren
)paren
id|tempcx
op_assign
id|SiS_VGAHT
op_div
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
(paren
id|SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
op_complement
l_int|0x0F0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_VGAHDE
op_plus
l_int|16
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
id|pushbx
op_assign
id|SiS_VGAHDE
op_plus
l_int|16
suffix:semicolon
id|tempcx
op_assign
(paren
id|SiS_VGAHT
op_minus
id|SiS_VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* cx */
id|tempbx
op_assign
id|pushbx
op_plus
id|tempcx
suffix:semicolon
multiline_comment|/* bx  BTVGA@HRS 0x0B,0x0C */
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
(paren
(paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/*(VGAHRS-3)*8 */
id|tempcx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0x1F
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|5
op_minus
l_int|2
)paren
suffix:semicolon
multiline_comment|/*VGAHRE D[5] */
id|tempcx
op_assign
(paren
(paren
id|tempcx
op_or
id|temp
)paren
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* (VGAHRE-3)*8 */
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
id|tempcx
op_add_assign
l_int|16
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempcx
OG
id|SiS_VGAHT
)paren
id|tempcx
op_assign
id|SiS_VGAHT
suffix:semicolon
multiline_comment|/*add for hardware request */
r_if
c_cond
(paren
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_or
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|tempbx
op_assign
id|pushbx
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_or
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0D
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|SiS_VGAVT
op_minus
l_int|1
)paren
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
l_int|0x0C
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|3
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x12
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempbx
op_assign
(paren
id|SiS_VGAVT
op_plus
id|SiS_VGAVDE
)paren
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/*      BTVGA2VRS     0x10,0x11   */
id|tempcx
op_assign
(paren
(paren
id|SiS_VGAVT
op_minus
id|SiS_VGAVDE
)paren
op_rshift
l_int|4
)paren
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
multiline_comment|/*      BTVGA2VRE     0x11        */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|8
)braket
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x04
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0100
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x080
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0200
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0400
suffix:semicolon
id|temp
op_assign
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|9
)braket
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|temp
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0x000F
)paren
op_or
(paren
id|temp
)paren
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x960
)paren
id|temp
op_assign
l_int|0x24
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
id|temp
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
id|temp
op_assign
l_int|0x2c
suffix:semicolon
r_else
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
multiline_comment|/* 300 series */
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x03C
comma
id|temp
)paren
suffix:semicolon
r_else
(brace
multiline_comment|/* 310 series */
id|temp
op_rshift_assign
l_int|2
suffix:semicolon
id|temp
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/*  ynlai 05/30/2001 for delay compenation  */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*SiS_SetRegANDOR(SiS_Part1Port,0x2D,~0x00F,temp); */
id|SiS_SetRegAND
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* BDirectLCD=0 for lcd ?? */
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
id|tempax
op_or_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
id|tempax
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2C
comma
op_complement
l_int|0x0C0
comma
id|tempax
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/*  301  */
id|SiS_SetGroup1_301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*  LVDS  */
id|SiS_SetGroup1_LVDS
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetGroup1_301
id|SiS_SetGroup1_301
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|push1
comma
id|push2
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|USHORT
id|resinfo
comma
id|modeflag
suffix:semicolon
id|USHORT
id|CRT1Index
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|CRT1Index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|CRT1Index
op_assign
id|CRT1Index
op_amp
l_int|0x3F
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|tempax
op_assign
l_int|0xFFFF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_GetVGAHT2
(paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
id|tempcx
op_assign
l_int|0x08
suffix:semicolon
r_else
id|tempcx
op_assign
l_int|0x09
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|SiS_VGAHT
)paren
(brace
id|tempax
op_assign
id|SiS_VGAHT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|5
suffix:semicolon
id|tempbx
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
l_int|0xFF
suffix:semicolon
multiline_comment|/* set MAX HT */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_VGAHDE
suffix:semicolon
multiline_comment|/* 0x04 Horizontal Display End */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
(paren
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
id|temp
op_assign
id|temp
op_minus
l_int|2
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x05
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x05 Horizontal Display Start */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x06
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x06 Horizontal Blank end     */
multiline_comment|/* 0x07 horizontal Retrace Start */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
id|temp
op_assign
id|temp
op_minus
l_int|10
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|tempcx
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_plus
id|tempbx
)paren
op_rshift
l_int|1
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|6
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_assign
id|temp
op_minus
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|1024
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|7
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|28
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x07 Horizontal Retrace Start */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* 0x08 Horizontal Retrace End   */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x06
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x11
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x0F
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x5b
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x00
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x01
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetNTSCTV
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x61
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x41
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0C
comma
l_int|0xF0
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x02
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x07
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetNTSCTV
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x54
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x55
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0C
comma
l_int|0xF0
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x04
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x05
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x0D
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x50
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetNTSCTV
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x30
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2f
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x02
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x18 SR08                     */
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
l_int|0xFF
)paren
suffix:semicolon
multiline_comment|/* 0x09 Set Max VT               */
id|tempbx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_assign
l_int|0x121
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
multiline_comment|/* 0x0E Virtical Display End */
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|357
)paren
id|tempbx
op_assign
l_int|350
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|360
)paren
id|tempbx
op_assign
l_int|350
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|375
)paren
id|tempbx
op_assign
l_int|350
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|405
)paren
id|tempbx
op_assign
l_int|400
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|420
)paren
id|tempbx
op_assign
l_int|400
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|525
)paren
id|tempbx
op_assign
l_int|480
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|350
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|480
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|5
suffix:semicolon
)brace
)brace
)brace
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x10 vertical Blank Start */
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0002
suffix:semicolon
)brace
id|tempax
op_assign
l_int|0x000B
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
l_int|0x08000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0040
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0600
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x11
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x11 Vertival Blank End */
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempax
op_assign
id|tempax
op_minus
id|tempbx
suffix:semicolon
multiline_comment|/* 0x0C Vertical Retrace Start */
id|tempax
op_assign
id|tempax
op_rshift
l_int|2
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* push ax */
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|0x09
)paren
(brace
id|tempax
op_assign
id|tempax
op_lshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
l_int|10
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|40
suffix:semicolon
)brace
)brace
)brace
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|2
suffix:semicolon
id|tempax
op_increment
suffix:semicolon
id|tempax
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* push ax  */
r_if
c_cond
(paren
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_le
l_int|513
)paren
(brace
r_if
c_cond
(paren
id|tempax
op_ge
l_int|513
)paren
(brace
id|tempbx
op_assign
l_int|513
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0008
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x0B
comma
l_int|0x0FF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|tempbx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0004
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x0C00
suffix:semicolon
)brace
id|tempbx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* pop ax */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x0F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0D vertical Retrace End */
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0010
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x2000
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0A CR07 */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x0FF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x17 SR0A */
id|tempax
op_assign
id|modeflag
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_rshift
l_int|1
)paren
op_amp
l_int|0x09
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x16 SR01 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0F
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* 0x0F CR14 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x12
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* 0x12 CR17 */
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
id|temp
op_assign
l_int|0x80
suffix:semicolon
r_else
id|temp
op_assign
l_int|0x00
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x1A SR0E */
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup1_LVDS
id|SiS_SetGroup1_LVDS
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
comma
id|pushcx
suffix:semicolon
id|ULONG
id|tempeax
op_assign
l_int|0
comma
id|tempebx
comma
id|tempecx
comma
id|tempvcfact
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_LCDHDES
suffix:semicolon
id|tempbx
op_assign
id|SiS_HDE
suffix:semicolon
id|tempcx
op_assign
id|SiS_HT
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
multiline_comment|/* HT-HDE  */
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
id|tempbx
op_assign
l_int|800
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
id|push1
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempbx
op_assign
id|SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|tempbx
)paren
(brace
id|tempax
op_assign
id|tempax
op_minus
id|tempbx
suffix:semicolon
)brace
id|push2
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* push ax   lcdhdee  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* temp  */
id|tempcx
op_assign
id|tempcx
op_plus
id|tempax
suffix:semicolon
multiline_comment|/* lcdhrs  */
r_if
c_cond
(paren
id|tempcx
op_ge
id|tempbx
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
)brace
multiline_comment|/* v ah,cl  */
id|tempax
op_assign
id|tempcx
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHRS */
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_14h  */
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_plus
l_int|10
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01F
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0x00ff
)paren
op_amp
l_int|0x07
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_15h  */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* lcdhdes  */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
multiline_comment|/* BPLHDESKEW  */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDES */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_16h  */
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x07
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|8
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDEE  */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_17h  */
id|tempcx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
multiline_comment|/* GAVT-VGAVDE  */
id|tempbx
op_assign
id|SiS_LCDVDES
suffix:semicolon
multiline_comment|/* VGAVDES  */
id|push1
op_assign
id|tempbx
suffix:semicolon
multiline_comment|/* push bx temppush1 */
r_if
c_cond
(paren
id|SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_assign
id|SiS_VGAVDE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
id|tempax
op_assign
l_int|600
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
)brace
r_else
id|tempax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempax
op_assign
id|SiS_VT
suffix:semicolon
multiline_comment|/* VT  */
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_VT
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
multiline_comment|/* push bx  temppush2  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRS  */
r_if
c_cond
(paren
id|tempbx
op_ge
id|tempax
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_18h  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRE  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x0F
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x19
comma
op_complement
l_int|0x00F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_19h  */
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLDESKEW =0 */
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_VDE
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah */
id|tempecx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempebx
op_assign
id|SiS_VDE
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_minus
id|tempeax
suffix:semicolon
multiline_comment|/* VGAVT-VGAVDE  */
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempebx
op_assign
id|tempebx
op_amp
l_int|0x003F
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Eh */
multiline_comment|/*add for 301b different 301 */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
id|tempecx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempebx
op_assign
id|SiS_VDE
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_minus
id|tempeax
suffix:semicolon
multiline_comment|/* VGAVT-VGAVDE  */
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|18
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
id|tempvcfact
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/*301b */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VDE
op_eq
id|SiS_VGAVDE
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*end for 301b */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* p bx temppush2 BPLVDEE  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* pop cx temppush1 NPLVDES */
id|push1
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
id|tempcx
op_increment
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Dh */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ch  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Bh  */
id|tempecx
op_assign
id|SiS_VGAHDE
suffix:semicolon
id|tempebx
op_assign
id|SiS_HDE
suffix:semicolon
id|tempeax
op_assign
id|tempecx
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|tempebx
op_eq
id|tempecx
)paren
(brace
id|tempeax
op_assign
l_int|65535
suffix:semicolon
)brace
id|tempecx
op_assign
id|tempeax
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAHDE
suffix:semicolon
multiline_comment|/*change VGAHT-&gt;VGAHDE */
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempecx
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_lshift
l_int|16
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_minus
l_int|1
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_or
(paren
id|tempeax
op_amp
l_int|0x00FFFF
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Fh  */
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|18
suffix:semicolon
multiline_comment|/*301b */
id|tempeax
op_assign
id|tempeax
op_div
id|tempvcfact
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x0FFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempbx
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x20
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_20h */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_21h */
id|tempecx
op_assign
id|tempecx
op_rshift
l_int|16
suffix:semicolon
multiline_comment|/* BPLHCFACT  */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_assign
id|tempecx
op_rshift
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_22h */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*add dstn new register */
r_if
c_cond
(paren
id|SiS_IF_DEF_DSTN
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x25
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x26
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x27
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x28
comma
l_int|0x87
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x29
comma
l_int|0x5A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2A
comma
l_int|0x4B
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x007
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_HDE
suffix:semicolon
multiline_comment|/*Blps=lcdhdee(lcdhdes+HDE) +64 */
id|tempbx
op_assign
id|tempbx
op_plus
l_int|64
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x38
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x35
comma
op_complement
l_int|0x078
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
l_int|32
suffix:semicolon
multiline_comment|/*Blpe=lBlps+32 */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x39
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x3A
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*Bflml=0 */
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x007
comma
l_int|0x00
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_VDE
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_div
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x3B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x038
comma
id|temp
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_HDE
suffix:semicolon
multiline_comment|/* BDxFIFOSTOP= (HDE*4)/128 */
id|tempeax
op_assign
id|tempeax
op_star
l_int|4
suffix:semicolon
id|tempebx
op_assign
l_int|128
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x0000003F
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x45
comma
op_complement
l_int|0x0FF
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x3F
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*BDxWadrst0 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x3E
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x3D
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x040
comma
l_int|0x00
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_HDE
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|4
suffix:semicolon
multiline_comment|/*BDxWadroff = HDE*4/8/8  */
id|pushcx
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x43
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x0F8
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_VDE
suffix:semicolon
multiline_comment|/*BDxWadrst1 = BDxWadrst0+BDxWadroff*VDE */
id|tempeax
op_assign
(paren
id|tempax
op_star
id|pushcx
)paren
suffix:semicolon
id|tempebx
op_assign
l_int|0x00100000
op_plus
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
id|tempebx
op_amp
l_int|0x000000FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x42
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x41
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF0000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x40
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x01000000
)paren
op_rshift
l_int|24
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|7
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x080
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x03
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x03
comma
l_int|0x50
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x04
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1e
comma
l_int|0x62
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x38
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x7d
)paren
suffix:semicolon
)brace
multiline_comment|/*end add dstn */
r_return
suffix:semicolon
)brace
multiline_comment|/*301b*/
r_void
DECL|function|SiS_SetGroup1_LCDA
id|SiS_SetGroup1_LCDA
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|ULONG
id|tempeax
op_assign
l_int|0
comma
id|tempebx
comma
id|tempecx
comma
id|tempvcfact
suffix:semicolon
multiline_comment|/*301b */
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_LCDHDES
suffix:semicolon
id|tempbx
op_assign
id|SiS_HDE
suffix:semicolon
id|tempcx
op_assign
id|SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
id|tempbx
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
multiline_comment|/* HT-HDE  */
id|push1
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempbx
op_assign
id|SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|tempbx
)paren
(brace
id|tempax
op_assign
id|tempax
op_minus
id|tempbx
suffix:semicolon
)brace
id|push2
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* push ax   lcdhdee  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* temp  */
id|tempcx
op_assign
id|tempcx
op_plus
id|tempax
suffix:semicolon
multiline_comment|/* lcdhrs  */
r_if
c_cond
(paren
id|tempcx
op_ge
id|tempbx
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
)brace
multiline_comment|/* v ah,cl  */
id|tempax
op_assign
id|tempcx
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHRS */
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_14h  */
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_plus
l_int|10
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01F
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0x00ff
)paren
op_amp
l_int|0x07
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_15h  */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* lcdhdes  */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
multiline_comment|/* BPLHDESKEW  */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDES */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_16h  */
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x07
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|8
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDEE  */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_17h  */
id|tempcx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
multiline_comment|/* GAVT-VGAVDE  */
id|tempbx
op_assign
id|SiS_LCDVDES
suffix:semicolon
multiline_comment|/* VGAVDES  */
id|push1
op_assign
id|tempbx
suffix:semicolon
multiline_comment|/* push bx temppush1 */
r_if
c_cond
(paren
id|SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_assign
id|SiS_VGAVDE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempax
op_assign
l_int|768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
id|tempax
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
id|tempax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempax
op_assign
id|SiS_VT
suffix:semicolon
multiline_comment|/* VT  */
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_VT
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
multiline_comment|/* push bx  temppush2  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRS  */
r_if
c_cond
(paren
id|tempbx
op_ge
id|tempax
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_18h  */
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRE  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x0F
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x19
comma
op_complement
l_int|0x00F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_19h  */
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLDESKEW =0 */
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_VDE
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* p bx temppush2 BPLVDEE  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* pop cx temppush1 NPLVDES */
id|push1
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
id|tempcx
op_increment
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x07
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Dh */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ch  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Bh  */
id|tempecx
op_assign
id|SiS_VGAVT
suffix:semicolon
id|tempebx
op_assign
id|SiS_VDE
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_minus
id|tempeax
suffix:semicolon
multiline_comment|/* VGAVT-VGAVDE  */
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|18
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
id|tempvcfact
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/*301b */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VDE
op_eq
id|SiS_VGAVDE
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
id|tempecx
op_assign
id|SiS_VGAHDE
suffix:semicolon
id|tempebx
op_assign
id|SiS_HDE
suffix:semicolon
id|tempeax
op_assign
id|tempecx
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|tempebx
op_eq
id|tempecx
)paren
(brace
id|tempeax
op_assign
l_int|65535
suffix:semicolon
)brace
id|tempecx
op_assign
id|tempeax
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAHDE
suffix:semicolon
multiline_comment|/*301b to change HT-&gt;HDE */
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempecx
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_lshift
l_int|16
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_minus
l_int|1
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_or
(paren
id|tempeax
op_amp
l_int|0x00FFFF
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Fh  */
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|18
suffix:semicolon
multiline_comment|/*301b */
id|tempeax
op_assign
id|tempeax
op_div
id|tempvcfact
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x0FFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempbx
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x20
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_20h */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_21h */
id|tempecx
op_assign
id|tempecx
op_rshift
l_int|16
suffix:semicolon
multiline_comment|/* BPLHCFACT  */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_22h */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
r_void
DECL|function|SiS_SetTPData
id|SiS_SetTPData
(paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2Offset
id|SiS_SetCRT2Offset
(paren
id|USHORT
id|SiS_Part1Port
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|offset
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_return
suffix:semicolon
)brace
id|offset
op_assign
id|SiS_GetOffset
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
id|offset
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
(paren
id|offset
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
(paren
(paren
id|offset
op_rshift
l_int|3
)paren
op_amp
l_int|0xFF
)paren
op_plus
l_int|1
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetOffset
id|SiS_GetOffset
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|colordepth
suffix:semicolon
id|USHORT
id|modeinfo
comma
id|index
comma
id|infoflag
suffix:semicolon
id|USHORT
id|ColorDepth
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
)brace
suffix:semicolon
id|modeinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeInfo
suffix:semicolon
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
id|index
op_assign
(paren
id|modeinfo
op_rshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310 series */
id|index
op_assign
(paren
id|modeinfo
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_ScreenOffset
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|temp
op_assign
id|temp
op_lshift
l_int|1
suffix:semicolon
)brace
id|colordepth
op_assign
id|SiS_GetColorDepth
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_ge
l_int|0x7C
)paren
op_logical_and
(paren
id|ModeNo
op_le
l_int|0x7E
)paren
)paren
(brace
id|temp
op_assign
id|ModeNo
op_minus
l_int|0x7C
suffix:semicolon
id|colordepth
op_assign
id|ColorDepth
(braket
id|temp
)braket
suffix:semicolon
id|temp
op_assign
l_int|0x6B
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|temp
op_assign
id|temp
op_lshift
l_int|1
suffix:semicolon
)brace
r_return
(paren
id|temp
op_star
id|colordepth
)paren
suffix:semicolon
)brace
r_else
r_return
(paren
id|temp
op_star
id|colordepth
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetColorDepth
id|SiS_GetColorDepth
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|ColorDepth
(braket
l_int|6
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|4
comma
l_int|4
comma
l_int|6
comma
l_int|8
)brace
suffix:semicolon
id|SHORT
id|index
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|index
op_assign
(paren
id|modeflag
op_amp
id|ModeInfoFlag
)paren
op_minus
id|ModeEGA
suffix:semicolon
r_if
c_cond
(paren
id|index
OL
l_int|0
)paren
id|index
op_assign
l_int|0
suffix:semicolon
r_return
(paren
id|ColorDepth
(braket
id|index
)braket
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2Sync
id|SiS_SetCRT2Sync
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|tempah
op_assign
l_int|0
comma
id|infoflag
comma
id|flag
suffix:semicolon
id|flag
op_assign
l_int|0
suffix:semicolon
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempah
op_assign
id|SiS_LCDInfo
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
id|LCDSync
)paren
(brace
id|flag
op_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|flag
op_ne
l_int|1
)paren
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0xC0
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0xC0
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x3F
comma
id|tempah
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2FIFO
id|SiS_SetCRT2FIFO
(paren
id|USHORT
id|SiS_Part1Port
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|index
suffix:semicolon
id|USHORT
id|modeidindex
comma
id|refreshratetableindex
suffix:semicolon
id|USHORT
id|VCLK
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
comma
id|data
comma
id|data2
suffix:semicolon
id|ULONG
id|eax
suffix:semicolon
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
(brace
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|87
comma
l_int|85
comma
l_int|78
comma
l_int|76
comma
l_int|54
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|79
comma
l_int|77
comma
l_int|70
comma
l_int|68
comma
l_int|48
comma
multiline_comment|/*; 128 bit    BQ=1   */
l_int|80
comma
l_int|72
comma
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|70
comma
l_int|68
comma
l_int|61
comma
l_int|59
comma
l_int|37
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|86
comma
l_int|77
comma
l_int|75
comma
l_int|68
comma
l_int|66
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|68
comma
l_int|66
comma
l_int|59
comma
l_int|57
comma
l_int|37
)brace
suffix:semicolon
multiline_comment|/*; 128 bit    BQ=1   */
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|ModeNo
comma
op_amp
id|modeidindex
)paren
suffix:semicolon
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
id|refreshratetableindex
op_assign
id|SiS_GetRatePtrCRT2
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|modeidindex
)paren
suffix:semicolon
multiline_comment|/* 11.GetRatePtr */
r_if
c_cond
(paren
id|ModeNo
op_ge
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|refreshratetableindex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_assign
id|index
op_amp
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|index
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|index
op_assign
id|index
op_amp
l_int|07
suffix:semicolon
id|MCLK
op_assign
id|SiS_MCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|data2
op_assign
id|SiS_ModeType
op_minus
l_int|0x02
suffix:semicolon
r_switch
c_cond
(paren
id|data2
)paren
(brace
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
)brace
id|data2
op_assign
(paren
id|data2
op_star
id|VCLK
)paren
op_div
id|MCLK
suffix:semicolon
multiline_comment|/*  bx */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|6
)paren
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
id|temp
op_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|2
suffix:semicolon
id|data2
op_assign
id|temp
op_minus
id|data2
suffix:semicolon
r_if
c_cond
(paren
id|data2
op_mod
(paren
l_int|28
op_star
l_int|16
)paren
)paren
(brace
id|data2
op_assign
id|data2
op_div
(paren
l_int|28
op_star
l_int|16
)paren
suffix:semicolon
id|data2
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
id|data2
op_div
(paren
l_int|28
op_star
l_int|16
)paren
suffix:semicolon
)brace
id|index
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x0080
)paren
id|index
op_assign
id|index
op_plus
l_int|12
suffix:semicolon
id|SiS_SetReg4
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
id|index
op_assign
id|index
op_plus
l_int|24
suffix:semicolon
id|SiS_SetReg4
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
id|index
op_assign
id|index
op_plus
l_int|6
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0F
)paren
op_rshift
l_int|1
suffix:semicolon
id|index
op_assign
id|index
op_plus
id|temp
suffix:semicolon
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
id|data
op_assign
id|data
op_plus
l_int|15
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
id|data
op_assign
id|data
op_plus
l_int|5
suffix:semicolon
id|data
op_assign
id|data
op_plus
id|data2
suffix:semicolon
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
id|data
op_assign
id|data
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
r_if
c_cond
(paren
id|data
op_mod
(paren
id|MCLK
op_lshift
l_int|4
)paren
)paren
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
id|data
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
id|temp
op_assign
l_int|0x16
suffix:semicolon
multiline_comment|/*  Revision ID  */
id|temp
op_assign
l_int|0x13
suffix:semicolon
multiline_comment|/*  Revision ID  */
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x01
comma
op_complement
l_int|0x01F
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
op_complement
l_int|0x01F
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetCRT2FIFO2
id|SiS_SetCRT2FIFO2
(paren
id|USHORT
id|SiS_Part1Port
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
macro_line|#ifdef CONFIG_FB_SIS_315
id|UCHAR
id|CombCode
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|4
comma
l_int|3
comma
l_int|1
comma
l_int|3
comma
l_int|4
comma
l_int|4
comma
l_int|1
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|1
comma
l_int|5
comma
l_int|4
)brace
suffix:semicolon
id|UCHAR
id|CRT2ThLow
(braket
)braket
op_assign
(brace
l_int|39
comma
l_int|63
comma
l_int|55
comma
l_int|79
comma
l_int|78
comma
l_int|102
comma
l_int|90
comma
l_int|114
comma
l_int|55
comma
l_int|87
comma
l_int|84
comma
l_int|116
comma
l_int|103
comma
l_int|135
comma
l_int|119
comma
l_int|151
)brace
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp
comma
id|temp1
comma
id|temp2
comma
id|temp3
suffix:semicolon
id|USHORT
id|index
suffix:semicolon
id|USHORT
id|CRT1ModeNo
comma
id|CRT2ModeNo
suffix:semicolon
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1
comma
l_int|0x3B
)paren
suffix:semicolon
multiline_comment|/* CRT1ModeNo=(UCHAR)SiS_GetReg1(SiS_P3d4,0x34); */
multiline_comment|/* get CRT1 ModeNo */
id|CRT1ModeNo
op_assign
id|SiS_CRT1Mode
suffix:semicolon
multiline_comment|/* CRT1ModeNo =ModeNo; */
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Get ModeID Table */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Set REFIndex-&gt; for crt1 refreshrate */
id|index
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|temp2
op_assign
id|SiS_GetColorDepth
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
id|index
op_assign
id|SiS_Get310DRAMType
(paren
id|ROMAddr
)paren
suffix:semicolon
macro_line|#endif
id|temp3
op_assign
id|SiS_MCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
id|temp
op_assign
l_int|16
suffix:semicolon
r_else
id|temp
op_assign
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_minus
id|temp1
op_star
id|temp2
op_div
id|temp3
suffix:semicolon
multiline_comment|/* 16-DRamBus - DCLK*BytePerPixel/MCLK */
r_if
c_cond
(paren
(paren
l_int|52
op_star
l_int|16
op_mod
id|temp
)paren
op_eq
l_int|0
)paren
id|temp
op_assign
l_int|52
op_star
l_int|16
op_div
id|temp
op_plus
l_int|40
suffix:semicolon
r_else
id|temp
op_assign
l_int|52
op_star
l_int|16
op_div
id|temp
op_plus
l_int|40
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* get DRAM latency */
id|temp1
op_assign
(paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
op_rshift
l_int|3
)paren
op_amp
l_int|0x7
suffix:semicolon
multiline_comment|/* SR17[5:3] DRAM Queue depth */
id|temp2
op_assign
(paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
op_rshift
l_int|6
)paren
op_amp
l_int|0x3
suffix:semicolon
multiline_comment|/* SR17[7:6] DRAM Grant length */
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
id|SiS_Get310DRAMType
(paren
id|ROMAddr
)paren
OL
l_int|2
)paren
(brace
r_for
c_loop
(paren
id|temp3
op_assign
l_int|0
suffix:semicolon
id|temp3
OL
l_int|16
suffix:semicolon
id|temp3
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|CombCode
(braket
id|temp3
)braket
op_eq
id|temp1
)paren
op_logical_and
(paren
id|CombCode
(braket
id|temp3
op_plus
l_int|1
)braket
op_eq
id|temp2
)paren
)paren
(brace
id|temp3
op_assign
id|CRT2ThLow
(braket
id|temp3
op_rshift
l_int|1
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|temp3
op_assign
l_int|0
suffix:semicolon
id|temp3
OL
l_int|16
suffix:semicolon
id|temp3
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|CombCode
(braket
id|temp3
)braket
op_eq
id|temp1
)paren
op_logical_and
(paren
id|CombCode
(braket
id|temp3
op_plus
l_int|1
)braket
op_eq
id|temp2
)paren
)paren
(brace
id|temp3
op_assign
id|CRT2ThLow
(braket
l_int|8
op_plus
(paren
id|temp3
op_rshift
l_int|1
)paren
)braket
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
id|temp
op_add_assign
id|temp3
suffix:semicolon
multiline_comment|/* CRT1 Request Period */
id|CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
multiline_comment|/* get CRT2 ModeNo */
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|CRT2ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Get ModeID Table */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Set REFIndex-&gt; for crt1 refreshrate */
id|index
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|temp2
op_assign
id|SiS_GetColorDepth
(paren
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
id|index
op_assign
id|SiS_Get310DRAMType
(paren
id|ROMAddr
)paren
suffix:semicolon
macro_line|#endif
id|temp3
op_assign
id|SiS_MCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
r_if
c_cond
(paren
(paren
id|temp
op_star
id|temp1
op_star
id|temp2
)paren
op_mod
(paren
l_int|16
op_star
id|temp3
)paren
op_eq
l_int|0
)paren
id|temp
op_assign
id|temp
op_star
id|temp1
op_star
id|temp2
op_div
(paren
l_int|16
op_star
id|temp3
)paren
suffix:semicolon
multiline_comment|/* CRT1 Request period * TCLK*BytePerPixel/(MCLK*16) */
r_else
id|temp
op_assign
id|temp
op_star
id|temp1
op_star
id|temp2
op_div
(paren
l_int|16
op_star
id|temp3
)paren
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* CRT1 Request period * TCLK*BytePerPixel/(MCLK*16) */
r_if
c_cond
(paren
id|temp
OG
l_int|0x37
)paren
id|temp
op_assign
l_int|0x37
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
op_complement
l_int|0x3F
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetLVDSDesData
id|SiS_GetLVDSDesData
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
id|USHORT
id|PanelIndex
comma
id|ResIndex
suffix:semicolon
id|SiS_LVDSDesStruct
op_star
id|PanelDesPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*301b */
multiline_comment|/*for test */
id|SiS_GetLVDSDesPtrA
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|PanelIndex
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|PanelIndex
)paren
(brace
r_case
l_int|0
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1024x768Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1280x1024Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1280x960Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1024x768Des_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1280x1024Des_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|PanelDesPtr
op_assign
id|LVDS1280x960Des_2
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_GetLVDSDesPtr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|PanelIndex
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|PanelIndex
)paren
(brace
r_case
l_int|0
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType00_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType01_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType02_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType03_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType04_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType05_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType06_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType07_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType08_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType09_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0a_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0b_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0c_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0d_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0e_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0f_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType00_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType01_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType02_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType03_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType04_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType05_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType06_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|23
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType07_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType08_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType09_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0a_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0b_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0c_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0d_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0e_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|31
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_PanelType0f_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_CHTVUNTSCDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|33
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_CHTVONTSCDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|34
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_CHTVUPALDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|35
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_CHTVOPALDesData
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|SiS_LCDHDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHDES
suffix:semicolon
id|SiS_LCDVDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVDES
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ge
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_LCDHDES
op_assign
l_int|320
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetLVDSDesPtr
id|SiS_GetLVDSDesPtr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|PanelIndex
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempbx
op_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_assign
id|SiS_LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|16
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
op_star
id|PanelIndex
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
multiline_comment|/*301b*/
r_void
DECL|function|SiS_GetLVDSDesPtrA
id|SiS_GetLVDSDesPtrA
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|PanelIndex
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_minus
id|Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
op_star
id|PanelIndex
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
r_void
DECL|function|SiS_SetCRT2ModeRegs
id|SiS_SetCRT2ModeRegs
(paren
id|USHORT
id|BaseAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
comma
id|j
suffix:semicolon
id|USHORT
id|tempcl
comma
id|tempah
suffix:semicolon
multiline_comment|/*301b*/
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
op_complement
l_int|0x050
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetRegAND
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0xF7
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xCF
comma
l_int|0x30
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x7F
comma
l_int|0x00
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b */
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|4
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
id|j
comma
l_int|0
)paren
suffix:semicolon
id|tempcl
op_assign
id|SiS_ModeType
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_minus
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
id|tempah
op_assign
(paren
(paren
l_int|0x010
op_rshift
id|tempcl
)paren
op_or
l_int|0x080
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x0A0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 310 series */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_minus
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
id|tempah
op_assign
(paren
l_int|0x008
op_rshift
id|tempcl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_eq
l_int|0
)paren
id|tempah
op_assign
l_int|1
suffix:semicolon
id|tempah
op_or_assign
l_int|0x040
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x040
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x050
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/* ifdef 301 */
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_or
l_int|0x02
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x05
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
id|tempcl
op_assign
id|tempah
suffix:semicolon
multiline_comment|/* 05/03/01 ynlai for TV display bug */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
l_int|5
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310 series */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
)paren
op_amp
l_int|0xF8
)paren
op_or
id|tempah
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|tempcl
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_ModeType
op_eq
id|ModeVGA
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x010
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
op_logical_or
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x960
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*301b */
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
r_else
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x0D
comma
op_complement
l_int|0x0BF
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*301b */
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x40
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x40
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x40
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x960
)paren
id|tempah
op_assign
id|tempah
op_or
l_int|0x80
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*LVDS*/
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x02
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xF0
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*301b*/
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
r_else
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xFF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xCF
comma
l_int|0x00
)paren
suffix:semicolon
r_else
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xFF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3F
comma
l_int|0x00
)paren
suffix:semicolon
r_else
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x21
comma
l_int|0xFF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x23
comma
l_int|0xFF
comma
l_int|0x80
)paren
suffix:semicolon
r_else
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x23
comma
l_int|0xFF
comma
l_int|0x00
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
)brace
r_void
DECL|function|SiS_GetCRT2Data
id|SiS_GetCRT2Data
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/*301  */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
id|SiS_GetCRT2DataLVDS
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
r_else
id|SiS_GetCRT2Data301
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
id|SiS_GetCRT2Data301
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*LVDS */
id|SiS_GetCRT2DataLVDS
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_GetCRT2DataLVDS
id|SiS_GetCRT2DataLVDS
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
suffix:semicolon
id|USHORT
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
id|SiS_LVDSDataStruct
op_star
id|LVDSData
op_assign
l_int|NULL
suffix:semicolon
id|SiS_GetCRT2ResInfo
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_GetCRT2PtrA
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/*  case  2:  LVDSData=SiS_LVDS1280x960Data_1;  break; */
r_case
l_int|3
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1024x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/*  case  5:  LVDSData=SiS_LVDS1280x960Data_2;  break; */
)brace
)brace
r_else
(brace
id|SiS_GetCRT2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS800x600Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS800x600Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1024x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSData
op_assign
id|SiS_LVDS640x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSData
op_assign
id|SiS_CHTVUNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSData
op_assign
id|SiS_CHTVONTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSData
op_assign
id|SiS_CHTVUPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSData
op_assign
id|SiS_CHTVOPALData
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|SiS_VGAHT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_VGAVT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_HT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_VT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
multiline_comment|/*301b*/
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*for test */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
id|SiS_HDE
op_assign
id|tempax
suffix:semicolon
id|SiS_VDE
op_assign
id|tempbx
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
id|tempax
op_assign
l_int|800
suffix:semicolon
id|tempbx
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
id|SiS_HDE
op_assign
id|tempax
suffix:semicolon
id|SiS_VDE
op_assign
id|tempbx
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetCRT2Data301
id|SiS_GetCRT2Data301
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|modeflag
suffix:semicolon
id|USHORT
id|resinfo
suffix:semicolon
id|USHORT
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
id|SiS_LCDDataStruct
op_star
id|LCDPtr
op_assign
l_int|NULL
suffix:semicolon
id|SiS_TVDataStruct
op_star
id|TVPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|SiS_NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|SiS_RVBHRS
op_assign
l_int|50
suffix:semicolon
id|SiS_RY1COE
op_assign
l_int|0
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0
suffix:semicolon
id|SiS_RY3COE
op_assign
l_int|0
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0
suffix:semicolon
id|SiS_GetCRT2ResInfo
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|SiS_GetRAMDAC2DATA
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_GetCRT2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|2
suffix:colon
id|TVPtr
op_assign
id|SiS_ExtHiTVData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|TVPtr
op_assign
id|SiS_ExtPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|TVPtr
op_assign
id|SiS_ExtNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|TVPtr
op_assign
id|SiS_St1HiTVData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|TVPtr
op_assign
id|SiS_StPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|TVPtr
op_assign
id|SiS_StNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|TVPtr
op_assign
id|SiS_St2HiTVData
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_RVBHCMAX
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_RVBHCFACT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_VGAHT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_VGAVT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_HDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVHDE
suffix:semicolon
id|SiS_VDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVVDE
suffix:semicolon
id|SiS_RVBHRS
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHRS
suffix:semicolon
id|SiS_NewFlickerMode
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|FlickerMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x08
)paren
id|SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x09
)paren
id|SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x10
)paren
id|SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|350
)paren
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|TVSimuMode
suffix:semicolon
id|tempax
op_assign
id|ExtHiTVHT
suffix:semicolon
id|tempbx
op_assign
id|ExtHiTVVT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempax
op_assign
id|StHiTVHT
suffix:semicolon
id|tempbx
op_assign
id|StHiTVVT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|tempax
op_assign
id|StHiTextTVHT
suffix:semicolon
id|tempbx
op_assign
id|StHiTextTVVT
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
id|SiS_RY1COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY1COE
suffix:semicolon
id|SiS_RY2COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY2COE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_RY1COE
op_assign
l_int|0x00
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0xf4
suffix:semicolon
)brace
id|SiS_RY3COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY3COE
suffix:semicolon
id|SiS_RY4COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY4COE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_RY3COE
op_assign
l_int|0x10
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempax
op_assign
id|NTSCHT
suffix:semicolon
id|tempbx
op_assign
id|NTSCVT
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|PALHT
suffix:semicolon
id|tempbx
op_assign
id|PALVT
suffix:semicolon
)brace
)brace
id|SiS_HT
op_assign
id|tempax
suffix:semicolon
id|SiS_VT
op_assign
id|tempbx
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_GetCRT2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LCDPtr
op_assign
id|SiS_ExtLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LCDPtr
op_assign
id|SiS_ExtLCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LCDPtr
op_assign
id|SiS_StLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LCDPtr
op_assign
id|SiS_StLCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LCDPtr
op_assign
id|SiS_St2LCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LCDPtr
op_assign
id|SiS_St2LCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LCDPtr
op_assign
id|SiS_NoScaleData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LCDPtr
op_assign
id|SiS_LCD1280x960Data
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_RVBHCMAX
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_RVBHCFACT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_VGAHT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_VGAVT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_HT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_VT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
id|tempax
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|560
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|400
)paren
id|tempbx
op_assign
l_int|640
suffix:semicolon
r_else
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|357
)paren
id|tempbx
op_assign
l_int|527
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|420
)paren
id|tempbx
op_assign
l_int|620
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|525
)paren
id|tempbx
op_assign
l_int|775
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|600
)paren
id|tempbx
op_assign
l_int|775
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|560
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|400
)paren
id|tempbx
op_assign
l_int|640
suffix:semicolon
r_else
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|360
)paren
id|tempbx
op_assign
l_int|768
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|375
)paren
id|tempbx
op_assign
l_int|800
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|405
)paren
id|tempbx
op_assign
l_int|864
suffix:semicolon
r_else
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x960
)paren
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|700
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|400
)paren
id|tempbx
op_assign
l_int|800
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|1024
)paren
id|tempbx
op_assign
l_int|960
suffix:semicolon
r_else
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempax
op_assign
id|SiS_VGAHDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAVDE
suffix:semicolon
)brace
id|SiS_HDE
op_assign
id|tempax
suffix:semicolon
id|SiS_VDE
op_assign
id|tempbx
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
id|USHORT
DECL|function|SiS_GetResInfo
id|SiS_GetResInfo
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|resindex
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resindex
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|resindex
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
r_return
(paren
id|resindex
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetCRT2ResInfo
id|SiS_GetCRT2ResInfo
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|xres
comma
id|yres
comma
id|modeflag
comma
id|resindex
suffix:semicolon
id|resindex
op_assign
id|SiS_GetResInfo
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
id|yres
op_assign
id|SiS_StResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
multiline_comment|/* xres-&gt;ax */
id|yres
op_assign
id|SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
multiline_comment|/* yres-&gt;bx */
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ModeFlag */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|xres
op_assign
id|xres
op_star
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|yres
op_assign
id|yres
op_star
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
id|yres
op_assign
l_int|405
suffix:semicolon
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
id|yres
op_assign
l_int|360
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|360
)paren
id|yres
op_assign
l_int|375
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
id|yres
op_assign
l_int|357
suffix:semicolon
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
id|yres
op_assign
l_int|420
suffix:semicolon
multiline_comment|/*          if(!OldBios)             */
r_if
c_cond
(paren
id|yres
op_eq
l_int|480
)paren
id|yres
op_assign
l_int|525
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
id|SiS_VGAHDE
op_assign
id|xres
suffix:semicolon
id|SiS_HDE
op_assign
id|xres
suffix:semicolon
id|SiS_VGAVDE
op_assign
id|yres
suffix:semicolon
id|SiS_VDE
op_assign
id|yres
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetCRT2Ptr
id|SiS_GetCRT2Ptr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
id|USHORT
id|Flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
multiline_comment|/* LCD */
id|tempbx
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_minus
id|Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
multiline_comment|/*      GetRevisionID();  */
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
multiline_comment|/* TV */
r_if
c_cond
(paren
id|SiS_VGAVDE
OG
l_int|480
)paren
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
(paren
op_logical_neg
id|TVSimuMode
)paren
suffix:semicolon
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
id|tempbx
op_assign
l_int|10
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|5
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x3F
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
multiline_comment|/*look */
r_if
c_cond
(paren
id|tempal
op_eq
l_int|0x06
)paren
id|tempal
op_assign
l_int|0x07
suffix:semicolon
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
(paren
l_int|0x31
op_le
id|ModeNo
)paren
op_logical_and
(paren
id|ModeNo
op_le
l_int|0x35
)paren
)paren
id|tempal
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
id|tempbx
op_assign
l_int|0x0D
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x960
)paren
id|tempbx
op_assign
l_int|0x0E
suffix:semicolon
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* LVDS */
id|Flag
op_assign
l_int|1
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|Flag
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|Flag
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
id|SiS_LCDResInfo
op_minus
id|Panel800x600
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_GetCRT2PtrA
id|SiS_GetCRT2PtrA
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
id|tempbx
op_assign
id|SiS_LCDResInfo
op_minus
id|Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
id|USHORT
DECL|function|SiS_GetRatePtrCRT2
id|SiS_GetRatePtrCRT2
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|SHORT
id|LCDRefreshIndex
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
)brace
suffix:semicolon
id|SHORT
id|LCDARefreshIndex
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
comma
id|i
suffix:semicolon
id|USHORT
id|modeflag
comma
id|index
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OL
l_int|0x14
)paren
r_return
(paren
l_int|0xFFFF
)paren
suffix:semicolon
id|index
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x33
)paren
suffix:semicolon
id|index
op_assign
id|index
op_rshift
id|SiS_SelectCRT2Rate
suffix:semicolon
id|index
op_assign
id|index
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
l_int|0
)paren
id|index
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|temp
op_assign
id|LCDARefreshIndex
(braket
id|SiS_LCDResInfo
)braket
suffix:semicolon
multiline_comment|/*301b */
r_else
id|temp
op_assign
id|LCDRefreshIndex
(braket
id|SiS_LCDResInfo
)braket
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
id|temp
)paren
(brace
id|index
op_assign
id|temp
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|ModeNo
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|ModeID
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
)braket
dot
id|ModeID
op_ne
id|ModeNo
)paren
r_break
suffix:semicolon
id|temp
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
id|ModeInfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
id|SiS_ModeType
)paren
r_break
suffix:semicolon
id|i
op_increment
suffix:semicolon
id|index
op_decrement
suffix:semicolon
)brace
r_while
c_loop
(paren
id|index
op_ne
l_int|0xFFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
op_minus
l_int|1
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|InterlaceMode
)paren
(brace
id|i
op_increment
suffix:semicolon
)brace
)brace
)brace
id|i
op_decrement
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
)paren
(brace
id|temp
op_assign
id|SiS_AjustCRT2Rate
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|i
)paren
suffix:semicolon
)brace
r_return
(paren
id|RefreshRateTableIndex
op_plus
id|i
)paren
suffix:semicolon
multiline_comment|/*return(0x01|(temp1&lt;&lt;1));   */
)brace
id|BOOLEAN
DECL|function|SiS_AjustCRT2Rate
id|SiS_AjustCRT2Rate
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|i
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|resinfo
suffix:semicolon
id|USHORT
id|modeflag
comma
id|infoflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ModeFlag */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|tempbx
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
suffix:semicolon
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportRAMDAC2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*301b */
id|tempax
op_assign
id|tempax
op_or
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ge
l_int|9
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
multiline_comment|/* for HiTV */
id|tempax
op_assign
id|tempax
op_or
id|SupportHiVisionTV
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|4
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|7
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportTV
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
multiline_comment|/*301b */
id|tempax
op_assign
id|tempax
op_or
id|SupportTV1024
suffix:semicolon
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* for LVDS */
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportCHTV
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|resinfo
OG
l_int|0x08
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*1024x768  */
r_if
c_cond
(paren
id|SiS_LCDResInfo
OL
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|0x07
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*800x600  */
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x04
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*512x384  */
)brace
)brace
)brace
r_for
c_loop
(paren
suffix:semicolon
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_eq
id|tempbx
suffix:semicolon
(paren
op_star
id|i
)paren
op_decrement
)paren
(brace
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|tempax
)paren
(brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_star
id|i
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
r_for
c_loop
(paren
(paren
op_star
id|i
)paren
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|i
)paren
op_increment
)paren
(brace
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_ne
id|tempbx
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|infoflag
op_amp
id|tempax
)paren
(brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SaveCRT2Info
id|SiS_SaveCRT2Info
(paren
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x34
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* reserve CR34 for CRT1 Mode No */
id|temp1
op_assign
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp2
op_assign
op_complement
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x31
comma
id|temp2
comma
id|temp1
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetVBInfo301
id|SiS_GetVBInfo301
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
id|UCHAR
id|OutputSelect
op_assign
op_star
id|pSiS_OutputSelect
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|SiS_SetFlag
op_assign
l_int|0
suffix:semicolon
id|SiS_ModeType
op_assign
id|modeflag
op_amp
id|ModeInfoFlag
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|tempax
op_assign
id|temp
op_lshift
l_int|8
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|tempax
suffix:semicolon
id|temp
op_assign
id|SetCHTVOverScan
op_or
id|SetInSlaveMode
op_or
id|DisableCRT2Display
suffix:semicolon
multiline_comment|/* ynlai */
id|temp
op_assign
l_int|0xFFFF
op_xor
id|temp
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_amp
id|temp
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x03
)paren
id|tempbx
op_assign
id|tempbx
op_or
(paren
id|SetCRT2ToLCDA
)paren
suffix:semicolon
)brace
multiline_comment|/*end301b */
macro_line|#endif
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_HiVision
)paren
id|temp
op_assign
l_int|0x80FC
suffix:semicolon
r_else
id|temp
op_assign
l_int|0x807C
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SetCRT2ToTV
op_or
id|SetCRT2ToLCD
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|temp
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|DisableCRT2Display
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
multiline_comment|/*301b */
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToRAMDAC
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
multiline_comment|/*301dlvds */
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToSCART
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|SetPALTV
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToHiVisionTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
multiline_comment|/* ynlai begin */
id|tempbx
op_assign
id|tempbx
op_or
id|SetPALTV
suffix:semicolon
multiline_comment|/* ynlai end */
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
id|tempbx
op_assign
id|tempbx
op_amp
(paren
l_int|0xFF00
op_or
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempax
op_amp
id|DisableCRT2Display
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
(paren
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
)paren
)paren
(brace
id|tempbx
op_assign
id|SetSimuScanMode
op_or
id|DisableCRT2Display
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
id|SetSimuScanMode
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SwitchToCRT2
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_BridgeIsEnable
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_BridgeInSlave
(paren
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
id|SetInSlaveMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DisableCRT2Display
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|DriverMode
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetNotSimuMode
)paren
)paren
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|tempbx
op_assign
id|tempbx
op_or
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetNotSimuMode
)paren
)paren
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|TVOverScan
)paren
id|tempbx
op_assign
id|tempbx
op_or
id|SetCHTVOverScan
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_FB_SIS_300
multiline_comment|/*add PALMN */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
)paren
id|SiS_SetRegAND
(paren
id|SiS_P3d4
comma
l_int|0x35
comma
l_int|0x3F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetPALTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x40
)paren
id|tempbx
op_assign
id|tempbx
op_amp
(paren
op_complement
id|SetPALTV
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*add PALMN */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
)paren
id|SiS_SetRegAND
(paren
id|SiS_P3d4
comma
l_int|0x38
comma
l_int|0x3F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetPALTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x40
)paren
id|tempbx
op_assign
id|tempbx
op_amp
(paren
op_complement
id|SetPALTV
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
id|SiS_VBInfo
op_assign
id|tempbx
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetRAMDAC2DATA
id|SiS_GetRAMDAC2DATA
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|USHORT
id|temp1
comma
id|temp2
comma
id|modeflag
op_assign
l_int|0
comma
id|tempcx
suffix:semicolon
id|USHORT
id|StandTableIndex
comma
id|CRT1Index
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
id|SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|StandTableIndex
op_assign
id|SiS_GetModePtr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|6
)braket
suffix:semicolon
id|temp1
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|7
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*add crt1ptr */
id|temp
op_assign
id|SiS_GetLVDSCRT1Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|temp1
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|temp2
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempax
op_assign
(paren
id|temp1
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
id|temp2
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|tempcx
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|13
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0x0100
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_lshift
l_int|2
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|tempcx
suffix:semicolon
id|temp1
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|7
)braket
suffix:semicolon
)brace
multiline_comment|/*add 301b */
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|CRT1Index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|CRT1Index
op_assign
id|CRT1Index
op_amp
l_int|0x3F
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|temp2
op_assign
(paren
id|USHORT
)paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempax
op_assign
(paren
id|temp1
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
id|temp2
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|tempcx
op_assign
(paren
id|USHORT
)paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0x0100
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_lshift
l_int|2
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|tempcx
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x01
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0100
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x20
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0200
suffix:semicolon
id|tempax
op_assign
id|tempax
op_plus
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
id|tempax
op_assign
id|tempax
op_star
l_int|8
suffix:semicolon
r_else
id|tempax
op_assign
id|tempax
op_star
l_int|9
suffix:semicolon
id|SiS_VGAHT
op_assign
id|tempax
suffix:semicolon
id|SiS_HT
op_assign
id|tempax
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
id|SiS_VGAVT
op_assign
id|tempbx
suffix:semicolon
id|SiS_VT
op_assign
id|tempbx
suffix:semicolon
)brace
r_void
DECL|function|SiS_UnLockCRT2
id|SiS_UnLockCRT2
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2f
comma
l_int|0xFF
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x24
comma
l_int|0xFF
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_LockCRT2
id|SiS_LockCRT2
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x24
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_EnableCRT2
id|SiS_EnableCRT2
(paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xFF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DisableBridge
id|SiS_DisableBridge
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp1
comma
id|tempah
comma
id|temp
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
multiline_comment|/*SetPanelDelay(1);  */
id|temp1
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
id|temp1
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/*no disable vb */
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|temp1
)paren
(brace
multiline_comment|/*301b */
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x0DF
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* disable VB */
id|SiS_DisplayOff
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* alan,BScreenOff */
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* alan,BScreenOff */
multiline_comment|/*&n;     if(HwDeviceExtension-&gt;jChipType &gt;= SIS_315H) &n;     {&n;      SiS_SetRegAND(SiS_Part1Port,0x2E,0x7F);  &n;     }&n;     */
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
multiline_comment|/*301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
)paren
id|tempah
op_assign
l_int|0x7F
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
)paren
op_logical_and
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
id|tempah
op_assign
l_int|0xBF
suffix:semicolon
r_else
id|tempah
op_assign
l_int|0x3F
suffix:semicolon
id|SiS_SetRegAND
(paren
id|SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
)paren
(brace
id|SiS_SetCH7005
(paren
l_int|0x090E
)paren
suffix:semicolon
)brace
id|SiS_DisplayOff
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_UnLockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x01
comma
l_int|0xFF
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xFF
comma
l_int|0x40
)paren
suffix:semicolon
)brace
multiline_comment|/*SetPanelDelay(0);  */
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_EnableBridge
id|SiS_EnableBridge
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
comma
id|tempah
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*SetPanelDelay(0);        */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
op_logical_and
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
(paren
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xFF
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* by alan,BVBDOENABLE=1 */
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* by alan,BVBDOENABLE=1 */
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_VBLongWait
(paren
)paren
suffix:semicolon
id|SiS_DisplayOn
(paren
)paren
suffix:semicolon
id|SiS_VBLongWait
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/*add301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
id|SiS_SetRegOR
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
)paren
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
(paren
id|BaseAddr
)paren
)paren
)paren
op_logical_and
(paren
id|SiS_IsVAMode
(paren
id|BaseAddr
)paren
)paren
)paren
id|tempah
op_assign
l_int|0x40
suffix:semicolon
r_else
id|tempah
op_assign
l_int|0xC0
suffix:semicolon
id|SiS_SetRegOR
(paren
id|SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*end 301b */
)brace
r_else
(brace
multiline_comment|/*LVDS*/
id|SiS_EnableCRT2
(paren
)paren
suffix:semicolon
id|SiS_DisplayOn
(paren
)paren
suffix:semicolon
id|SiS_UnLockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xBF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
(paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
)paren
(brace
id|SiS_SetCH7005
(paren
l_int|0x0B0E
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*SetPanelDelay(1);  */
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetPanelDelay
id|SiS_SetPanelDelay
(paren
id|USHORT
id|DelayTime
)paren
(brace
id|USHORT
id|PanelID
suffix:semicolon
id|PanelID
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|PanelID
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|DelayTime
op_eq
l_int|0
)paren
id|SiS_LCD_Wait_Time
(paren
id|SiS_PanelDelayTbl
(braket
id|PanelID
)braket
dot
id|timer
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_else
id|SiS_LCD_Wait_Time
(paren
id|SiS_PanelDelayTbl
(braket
id|PanelID
)braket
dot
id|timer
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_LCD_Wait_Time
id|SiS_LCD_Wait_Time
(paren
id|UCHAR
id|DelayTime
)paren
(brace
id|USHORT
id|i
comma
id|j
suffix:semicolon
id|ULONG
id|temp
comma
id|flag
suffix:semicolon
id|flag
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DelayTime
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|66
suffix:semicolon
id|j
op_increment
)paren
(brace
id|temp
op_assign
id|SiS_GetReg3
(paren
l_int|0x61
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|flag
)paren
r_continue
suffix:semicolon
id|flag
op_assign
id|temp
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*301b*/
id|BOOLEAN
DECL|function|SiS_Is301B
id|SiS_Is301B
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
OG
(paren
l_int|0x0B0
)paren
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*301b */
r_else
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsDualEdge
id|SiS_IsDualEdge
(paren
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef CONFIG_FB_SIS_315
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
r_else
r_return
(paren
l_int|1
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsVAMode
id|SiS_IsVAMode
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
op_logical_and
(paren
id|flag
op_amp
id|SetToLCDA
)paren
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
r_else
r_return
(paren
l_int|1
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsDisableCRT2
id|SiS_IsDisableCRT2
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*301b */
r_else
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
id|BOOLEAN
DECL|function|SiS_BridgeIsOn
id|SiS_BridgeIsOn
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|1
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|2
)paren
)paren
r_return
(paren
l_int|1
)paren
suffix:semicolon
multiline_comment|/*301b */
r_else
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_BridgeIsEnable
id|SiS_BridgeIsEnable
(paren
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
op_eq
l_int|0
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x0a0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 310 series */
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x050
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_BridgeInSlave
id|SiS_BridgeInSlave
(paren
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|flag1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_amp
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_GetLCDResInfo301
id|SiS_GetLCDResInfo301
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|SiS_P3d4
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|temp
comma
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
id|SiS_LCDResInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_LCDTypeInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_LCDInfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ModeFlag  */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
multiline_comment|/*si+Ext_ResInfo */
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|SiS_LCDTypeInfo
op_assign
id|temp
op_rshift
l_int|4
suffix:semicolon
id|SiS_LCDResInfo
op_assign
id|temp
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
OL
id|Panel1024x768
)paren
id|SiS_LCDResInfo
op_assign
id|Panel1024x768
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
OL
id|Panel800x600
)paren
id|SiS_LCDResInfo
op_assign
id|Panel800x600
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
OG
id|Panel640x480
)paren
id|SiS_LCDResInfo
op_assign
id|Panel1024x768
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|SiS_LCDInfo
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|4
)paren
(brace
multiline_comment|/* 512x384  */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
multiline_comment|/*400x300  */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|LCDVESATiming
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|LCDVESATiming
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_PresetScratchregister
id|SiS_PresetScratchregister
(paren
id|USHORT
id|SiS_P3d4
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x30,0x21);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x31,0x41);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x32,0x28);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x33,0x22);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x35,0x43);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x36,0x01);  */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x37,0x00);  */
)brace
r_void
DECL|function|SiS_LongWait
id|SiS_LongWait
(paren
)paren
(brace
id|USHORT
id|i
suffix:semicolon
id|i
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_amp
l_int|0xC0
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0xFFFF
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
r_break
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0xFFFF
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
r_break
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_VBLongWait
id|SiS_VBLongWait
(paren
)paren
(brace
id|USHORT
id|tempal
comma
id|temp
comma
id|i
comma
id|j
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|100
suffix:semicolon
id|j
op_increment
)paren
(brace
id|tempal
op_assign
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
multiline_comment|/* VBWaitMode2  */
r_if
c_cond
(paren
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* VBWaitMode1  */
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|temp
op_xor
l_int|0x01
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_LongWait
(paren
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_WaitVBRetrace
id|SiS_WaitVBRetrace
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|temp
op_assign
l_int|0
suffix:semicolon
id|temp
op_eq
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x25
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|temp
OG
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x25
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegANDOR
id|SiS_SetRegANDOR
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
multiline_comment|/* SiS_Part1Port index 02 */
id|temp
op_assign
(paren
id|temp
op_amp
(paren
id|DataAND
)paren
)paren
op_or
id|DataOR
suffix:semicolon
id|SiS_SetReg1
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegAND
id|SiS_SetRegAND
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
multiline_comment|/* SiS_Part1Port index 02 */
id|temp
op_assign
id|temp
op_amp
id|DataAND
suffix:semicolon
id|SiS_SetReg1
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegOR
id|SiS_SetRegOR
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
multiline_comment|/* SiS_Part1Port index 02 */
id|temp
op_assign
id|temp
op_or
id|DataOR
suffix:semicolon
id|SiS_SetReg1
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup2
id|SiS_SetGroup2
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
comma
id|j
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
comma
id|temp3
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
comma
id|temp1
suffix:semicolon
id|UCHAR
op_star
id|PhasePoint
suffix:semicolon
id|UCHAR
op_star
id|TimingPoint
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
comma
id|crt2crtc
comma
id|resindex
comma
id|xres
suffix:semicolon
id|ULONG
id|longtemp
comma
id|tempeax
comma
id|tempebx
comma
id|temp2
comma
id|tempecx
suffix:semicolon
id|USHORT
id|SiS_RY1COE
op_assign
l_int|0
comma
id|SiS_RY2COE
op_assign
l_int|0
comma
id|SiS_RY3COE
op_assign
l_int|0
comma
id|SiS_RY4COE
op_assign
l_int|0
comma
id|SiS_RY5COE
op_assign
l_int|0
comma
id|SiS_RY6COE
op_assign
l_int|0
comma
id|SiS_RY7COE
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempcx
op_assign
id|SiS_VBInfo
suffix:semicolon
id|tempax
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_amp
l_int|0x0410
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x0800
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_rshift
l_int|1
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_xor
l_int|0x0C
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_PALPhase
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
multiline_comment|/* PALPhase */
id|temp
op_assign
id|temp
op_xor
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|TimingPoint
op_assign
id|SiS_HiTVSt2Timing
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
id|TimingPoint
op_assign
id|SiS_HiTVSt1Timing
suffix:semicolon
r_else
id|TimingPoint
op_assign
id|SiS_HiTVTextTiming
suffix:semicolon
)brace
)brace
r_else
id|TimingPoint
op_assign
id|SiS_HiTVExtTiming
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|PhasePoint
op_assign
id|SiS_PALPhase2
suffix:semicolon
multiline_comment|/* PALPhase */
r_else
id|PhasePoint
op_assign
id|SiS_PALPhase
suffix:semicolon
id|TimingPoint
op_assign
id|SiS_PALTiming
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|PhasePoint
op_assign
id|SiS_NTSCPhase2
suffix:semicolon
multiline_comment|/* PALPhase */
r_else
id|PhasePoint
op_assign
id|SiS_NTSCPhase
suffix:semicolon
id|TimingPoint
op_assign
id|SiS_NTSCTiming
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x0
comma
id|temp
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300
multiline_comment|/*add PALMN */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|PhasePoint
op_assign
id|SiS_PALMPhase
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|PhasePoint
op_assign
id|SiS_PALNPhase
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*end add*/
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*add PALMN */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|PhasePoint
op_assign
id|SiS_PALMPhase
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|PhasePoint
op_assign
id|SiS_PALNPhase
suffix:semicolon
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
id|i
comma
id|PhasePoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2D
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
multiline_comment|/* di-&gt;temp2[j] */
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_NewFlickerMode
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0xFF
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x35
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*301b */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x36
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x37
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x38
comma
id|SiS_RY1COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x48
comma
id|SiS_RY2COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x49
comma
id|SiS_RY3COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x4a
comma
id|SiS_RY4COE
)paren
suffix:semicolon
multiline_comment|/*add to change 630+301b filter*/
id|resindex
op_assign
id|SiS_GetResInfo
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
multiline_comment|/* xres-&gt;ax */
)brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|640
)paren
(brace
id|SiS_RY1COE
op_assign
l_int|0xFF
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0x03
suffix:semicolon
id|SiS_RY3COE
op_assign
l_int|0x02
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0xF6
suffix:semicolon
id|SiS_RY5COE
op_assign
l_int|0xFC
suffix:semicolon
id|SiS_RY6COE
op_assign
l_int|0x27
suffix:semicolon
id|SiS_RY7COE
op_assign
l_int|0x46
suffix:semicolon
)brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|800
)paren
(brace
id|SiS_RY1COE
op_assign
l_int|0x01
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0x01
suffix:semicolon
id|SiS_RY3COE
op_assign
l_int|0xFC
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0xF8
suffix:semicolon
id|SiS_RY5COE
op_assign
l_int|0x08
suffix:semicolon
id|SiS_RY6COE
op_assign
l_int|0x26
suffix:semicolon
id|SiS_RY7COE
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|1024
)paren
(brace
id|SiS_RY1COE
op_assign
l_int|0xFF
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0xFF
suffix:semicolon
id|SiS_RY3COE
op_assign
l_int|0xFC
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0x00
suffix:semicolon
id|SiS_RY5COE
op_assign
l_int|0x0F
suffix:semicolon
id|SiS_RY6COE
op_assign
l_int|0x22
suffix:semicolon
id|SiS_RY7COE
op_assign
l_int|0x28
suffix:semicolon
)brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|SiS_RY1COE
op_assign
l_int|0x01
suffix:semicolon
id|SiS_RY2COE
op_assign
l_int|0x02
suffix:semicolon
id|SiS_RY3COE
op_assign
l_int|0xFE
suffix:semicolon
id|SiS_RY4COE
op_assign
l_int|0xF7
suffix:semicolon
id|SiS_RY5COE
op_assign
l_int|0x03
suffix:semicolon
id|SiS_RY6COE
op_assign
l_int|0x27
suffix:semicolon
id|SiS_RY7COE
op_assign
l_int|0x3c
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x35
comma
id|SiS_RY1COE
)paren
suffix:semicolon
multiline_comment|/*301b */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x36
comma
id|SiS_RY2COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x37
comma
id|SiS_RY3COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x38
comma
id|SiS_RY4COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x48
comma
id|SiS_RY5COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x49
comma
id|SiS_RY6COE
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x4a
comma
id|SiS_RY7COE
)paren
suffix:semicolon
multiline_comment|/*end add*/
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
id|tempax
op_assign
l_int|950
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|tempax
op_assign
l_int|520
suffix:semicolon
r_else
id|tempax
op_assign
l_int|440
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VDE
op_le
id|tempax
)paren
(brace
id|tempax
op_assign
id|tempax
op_minus
id|SiS_VDE
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|2
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_plus
(paren
id|USHORT
)paren
id|TimingPoint
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|push1
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_plus
id|TimingPoint
(braket
l_int|1
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|SiS_VGAHDE
op_eq
l_int|1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x19
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x52
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x0B
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x11
)paren
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
id|SiS_HT
op_minus
l_int|1
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x1D
comma
op_complement
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_HT
op_rshift
l_int|1
suffix:semicolon
id|push1
op_assign
id|tempcx
suffix:semicolon
multiline_comment|/* push cx */
id|tempcx
op_assign
id|tempcx
op_plus
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
l_int|4
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x22
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x24
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
l_int|4
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x29
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|j
op_assign
id|j
op_plus
l_int|2
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
(paren
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x27
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x28
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
l_int|4
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x2A
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* pop cx */
id|j
op_assign
id|j
op_plus
l_int|2
suffix:semicolon
id|temp
op_assign
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|temp
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
l_int|11
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_GetVGAHT2
(paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempax
op_minus
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x2E
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|360
)paren
id|tempbx
op_assign
l_int|746
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|375
)paren
id|tempbx
op_assign
l_int|746
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|405
)paren
id|tempbx
op_assign
l_int|853
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempbx
op_assign
id|tempbx
op_minus
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x2f
)paren
id|temp
op_assign
id|temp
op_plus
l_int|1
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x2F
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToSVIDEO
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x30
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*tv gatingno */
id|tempbx
op_assign
id|SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
(paren
id|tempbx
op_minus
l_int|3
)paren
op_amp
l_int|0x0300
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|5
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x46
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_minus
l_int|3
)paren
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x47
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
id|tempbx
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|tempcx
op_assign
id|SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_ge
id|SiS_HDE
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x2000
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
l_int|0x0101
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToHiVisionTV
op_or
id|SetCRT2ToTV
)paren
)paren
(brace
multiline_comment|/*301b */
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
id|tempcx
op_assign
l_int|0x1920
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
id|tempcx
op_assign
l_int|0x1420
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_amp
l_int|0xDFFF
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
l_int|0x2000
)paren
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAHDE
suffix:semicolon
id|tempebx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|longtemp
op_assign
id|tempeax
op_star
id|tempebx
suffix:semicolon
id|tempecx
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|longtemp
op_assign
id|longtemp
op_div
id|tempecx
suffix:semicolon
multiline_comment|/*301b */
id|tempecx
op_assign
l_int|8
op_star
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|tempecx
op_assign
id|tempecx
op_star
l_int|8
suffix:semicolon
)brace
id|longtemp
op_assign
id|longtemp
op_star
id|tempecx
suffix:semicolon
id|tempecx
op_assign
id|SiS_HDE
suffix:semicolon
id|temp2
op_assign
id|longtemp
op_mod
id|tempecx
suffix:semicolon
id|tempeax
op_assign
id|longtemp
op_div
id|tempecx
suffix:semicolon
r_if
c_cond
(paren
id|temp2
op_ne
l_int|0
)paren
(brace
id|tempeax
op_assign
id|tempeax
op_plus
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|USHORT
)paren
id|tempeax
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|tempcx
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|5
)paren
op_rshift
l_int|8
suffix:semicolon
)brace
multiline_comment|/*end 301b */
id|tempbx
op_assign
id|push1
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempeax
op_amp
l_int|0x0000FF00
)paren
op_amp
l_int|0x1F00
)paren
op_or
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempeax
op_amp
l_int|0x000000FF
)paren
op_lshift
l_int|8
)paren
op_or
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|8
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x44
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x45
comma
op_complement
l_int|0x03F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_eq
l_int|0x01
)paren
id|tempcx
op_assign
l_int|0x00
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x46
comma
op_complement
l_int|0x007
comma
id|tempcx
)paren
suffix:semicolon
id|SiS_SetRegOR
(paren
id|SiS_Part2Port
comma
l_int|0x46
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|0x0364
suffix:semicolon
id|tempcx
op_assign
l_int|0x009c
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|0x0346
suffix:semicolon
id|tempcx
op_assign
l_int|0x0078
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x4B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x4C
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0x0300
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0003
)paren
op_lshift
l_int|2
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempbx
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x4D
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x43
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x43
comma
id|temp
op_minus
l_int|3
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
macro_line|#ifdef CONFIG_FB_SIS_300
multiline_comment|/*add PALMN*/
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xEF
comma
l_int|0x00
)paren
suffix:semicolon
id|temp3
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
id|temp3
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*add PALMN*/
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xEF
comma
l_int|0x00
)paren
suffix:semicolon
id|temp3
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
id|temp3
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x0B
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
suffix:semicolon
)brace
id|tempbx
op_assign
id|SiS_HDE
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* RHACTE=HDE-1 */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x2C
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x2B
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
id|temp
op_assign
l_int|0x01
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_VDE
suffix:semicolon
multiline_comment|/* RTVACTEO=(VDE-1)&amp;0xFF */
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x0C
comma
op_complement
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_VT
op_minus
l_int|1
suffix:semicolon
id|push2
op_assign
id|tempcx
op_plus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVTVT=VT-1 */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x19
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|SiS_LCDInfo
op_amp
l_int|0x0FF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
id|LCDSync
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_amp
id|LCDSyncBit
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_or
(paren
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_rshift
id|LCDSyncShift
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
id|tempbx
op_assign
l_int|768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
id|tempbx
op_assign
l_int|1200
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1600x1200
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_VDE
)paren
(brace
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|SiS_VDE
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|tempcx
op_decrement
suffix:semicolon
)brace
id|tempax
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_VDE
)paren
(brace
id|tempax
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|tempax
OL
id|SiS_VDE
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|tempax
op_minus
id|SiS_VDE
suffix:semicolon
)brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdes */
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdee */
)brace
r_else
(brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdes */
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdee */
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVEQ1EQ=lcdvdes */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x05
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVEQ2EQ=lcdvdee */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x06
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempax
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|4
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
l_int|10
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RTVACTEE=lcdvrs */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
op_plus
l_int|1
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempbx
op_amp
l_int|0x000F
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xB9
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x05
comma
l_int|0xCC
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xA6
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|crt2crtc
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|4
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x2B
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xE5
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x05
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xE2
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x09
comma
l_int|0xF0
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0xF0
comma
l_int|0x00
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|SiS_HT
op_minus
id|SiS_HDE
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* (HT-HDE)&gt;&gt;2     */
id|tempbx
op_assign
(paren
id|SiS_HDE
op_plus
l_int|7
)paren
suffix:semicolon
multiline_comment|/* lcdhdee         */
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|2
suffix:semicolon
)brace
id|push1
op_assign
id|tempbx
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RHEQPLE=lcdhdee */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x25
comma
op_complement
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*301b */
id|temp
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|2
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* RHBLKE=lcdhdes */
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x0F
comma
l_int|0x00
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* RHBURSTS=lcdhrs */
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_HDE
op_eq
l_int|1280
)paren
(brace
id|temp
op_assign
l_int|0x47
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x1D
comma
op_complement
l_int|0x0F0
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_lshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RHSYEXP2S=lcdhre */
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x17
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part2Port
comma
l_int|0x18
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
multiline_comment|/*301b */
id|temp
op_assign
l_int|0xC6
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0xC4
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x30
comma
l_int|0xB3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|temp
op_assign
l_int|0x4F
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x4E
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
id|USHORT
DECL|function|SiS_GetVGAHT2
id|SiS_GetVGAHT2
(paren
)paren
(brace
id|ULONG
id|tempax
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|SiS_VGAVT
op_minus
id|SiS_VGAVDE
)paren
op_star
id|SiS_RVBHCMAX
)paren
op_amp
l_int|0xFFFF
suffix:semicolon
id|tempax
op_assign
(paren
id|SiS_VT
op_minus
id|SiS_VDE
)paren
op_star
id|SiS_RVBHCFACT
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_star
id|SiS_HT
)paren
op_div
id|tempbx
suffix:semicolon
r_return
(paren
(paren
id|USHORT
)paren
id|tempax
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup3
id|SiS_SetGroup3
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
suffix:semicolon
id|UCHAR
op_star
id|tempdi
suffix:semicolon
id|USHORT
id|modeflag
comma
id|temp
comma
id|temp1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xF6
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xBF
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_FB_SIS_300
multiline_comment|/*add PALMN */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x3D
comma
l_int|0xA8
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*add PALMN*/
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
l_int|0x3D
comma
l_int|0xA8
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*end add */
macro_line|#endif
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3Data
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3Simu
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3Text
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x3E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part3Port
comma
id|i
comma
id|tempdi
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup4
id|SiS_SetGroup4
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
comma
id|tempcx
comma
id|tempbx
comma
id|modeflag
comma
id|temp
comma
id|temp2
comma
id|push1
suffix:semicolon
id|ULONG
id|tempebx
comma
id|tempeax
comma
id|templong
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|temp
op_assign
id|SiS_RVBHCFACT
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x13
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_RVBHCMAX
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
id|temp2
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|7
suffix:semicolon
id|tempcx
op_assign
id|SiS_VGAHT
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp2
op_assign
id|temp
op_or
id|temp2
suffix:semicolon
id|tempcx
op_assign
id|SiS_VGAVT
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
l_int|5
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|temp2
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_VBInfo
suffix:semicolon
id|tempbx
op_assign
id|SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempcx
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
l_int|0xA0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
l_int|1280
)paren
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|tempcx
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|SiS_VGAHDE
op_eq
l_int|1024
)paren
)paren
(brace
multiline_comment|/*301b */
id|temp
op_assign
l_int|0xA0
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
id|temp
op_assign
l_int|0x60
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1280x1024
)paren
id|temp
op_assign
id|temp
op_or
l_int|0x0A
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x0E
comma
op_complement
l_int|0xEF
comma
id|temp
)paren
suffix:semicolon
id|tempebx
op_assign
id|SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
multiline_comment|/* if(!(tempax&amp;0xE000)) tempbx=tempbx&gt;&gt;1; */
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xE000
)paren
)paren
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/* alan ???? */
)brace
id|tempcx
op_assign
id|SiS_RVBHRS
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
id|tempebx
op_assign
id|tempebx
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x04000
suffix:semicolon
multiline_comment|/*tempeax=tempeax-tempebx;  */
r_if
c_cond
(paren
id|tempeax
op_le
id|tempebx
)paren
(brace
id|tempcx
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_xor
l_int|0x4000
)paren
op_or
(paren
id|tempcx
op_amp
l_int|0x00ff
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_VGAVDE
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_assign
id|tempeax
op_minus
id|tempebx
suffix:semicolon
)brace
id|push1
op_assign
id|tempcx
suffix:semicolon
id|templong
op_assign
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
)paren
op_mod
id|tempebx
suffix:semicolon
id|tempeax
op_assign
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
)paren
op_div
id|tempebx
suffix:semicolon
id|tempebx
op_assign
id|tempeax
suffix:semicolon
r_if
c_cond
(paren
id|templong
op_ne
l_int|0
)paren
(brace
id|tempebx
op_increment
suffix:semicolon
)brace
id|tempcx
op_assign
id|push1
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_rshift
l_int|16
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|temp
op_lshift
l_int|4
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x19
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|temp
op_assign
l_int|0x0028
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempax
OG
l_int|800
)paren
id|tempax
op_assign
id|tempax
op_minus
l_int|800
suffix:semicolon
)brace
id|tempax
op_assign
id|tempax
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_or
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAHDE
OG
l_int|800
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAHDE
op_eq
l_int|1024
)paren
id|tempax
op_assign
(paren
id|tempax
op_star
l_int|25
op_div
l_int|32
)paren
op_minus
l_int|1
suffix:semicolon
r_else
id|tempax
op_assign
(paren
id|tempax
op_star
l_int|20
op_div
l_int|32
)paren
op_minus
l_int|1
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x0003
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_or
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VGAHDE
OG
l_int|800
)paren
(brace
id|SiS_SetRegOR
(paren
id|SiS_Part4Port
comma
l_int|0x1E
comma
l_int|0x08
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
l_int|0x0036
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
id|temp
op_or
l_int|0x0001
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0x00C0
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|SiS_HT
op_div
l_int|2
)paren
op_minus
l_int|2
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x00C0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*end 301b*/
id|SiS_SetCRT2VCLK
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2VCLK
id|SiS_SetCRT2VCLK
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|vclkindex
suffix:semicolon
id|USHORT
id|tempah
comma
id|temp1
suffix:semicolon
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0A
comma
l_int|0x01
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x12
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|temp1
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x12
comma
id|tempah
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetVCLK2Ptr
id|SiS_GetVCLK2Ptr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempbx
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300
id|USHORT
id|LCDXlat1VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
id|USHORT
id|LCDXlat2VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK108_2
comma
id|VCLK108_2
comma
id|VCLK108_2
comma
id|VCLK108_2
)brace
suffix:semicolon
id|USHORT
id|LVDSXlat2VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
id|USHORT
id|LVDSXlat3VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
macro_line|#else&t;&t;&t;&t;/* SIS315H */
id|USHORT
id|LCDXlat1VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
)brace
suffix:semicolon
id|USHORT
id|LCDXlat2VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
)brace
suffix:semicolon
id|USHORT
id|LVDSXlat2VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
)brace
suffix:semicolon
id|USHORT
id|LVDSXlat3VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
)brace
suffix:semicolon
macro_line|#endif
id|USHORT
id|LVDSXlat1VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
)brace
suffix:semicolon
id|USHORT
id|CRT2Index
comma
id|VCLKIndex
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|UCHAR
op_star
id|CHTVVCLKPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|CRT2Index
op_assign
id|CRT2Index
op_rshift
l_int|6
suffix:semicolon
multiline_comment|/*  for LCD */
r_if
c_cond
(paren
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_or
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*301b */
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_ne
id|Panel1024x768
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlat2VCLK
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|LCDXlat1VCLK
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* for TV */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_HiVision
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|RPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVVCLKDIV2
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|HiTVVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVSimuVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|HiTVTextVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetFlag
op_amp
id|RPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|TVVCLKDIV2
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|TVVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension
op_member_access_from_pointer
id|jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* 310 series */
multiline_comment|/*            VCLKIndex += 11;    for chip310  0x2E */
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
multiline_comment|/* for chip315  */
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* for CRT2 */
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
multiline_comment|/*  Port 3cch */
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
multiline_comment|/* di+Ext_CRTVCLK */
id|VCLKIndex
op_assign
id|VCLKIndex
op_amp
l_int|0x3f
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/*   LVDS  */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|VCLKIndex
op_assign
id|CRT2Index
suffix:semicolon
r_else
id|VCLKIndex
op_assign
id|CRT2Index
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|VCLKIndex
op_assign
id|VCLKIndex
op_amp
l_int|0x1f
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|tempbx
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_CHTVVCLKUNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_CHTVVCLKONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_CHTVVCLKUPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_CHTVVCLKOPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|VCLKIndex
op_assign
id|CHTVVCLKPtr
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|VCLKIndex
op_rshift
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel800x600
)paren
id|VCLKIndex
op_assign
id|LVDSXlat1VCLK
(braket
id|VCLKIndex
)braket
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_LCDResInfo
op_eq
id|Panel1024x768
)paren
id|VCLKIndex
op_assign
id|LVDSXlat2VCLK
(braket
id|VCLKIndex
)braket
suffix:semicolon
r_else
id|VCLKIndex
op_assign
id|LVDSXlat3VCLK
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
)brace
multiline_comment|/*VCLKIndex=VCLKIndex&amp;0x3F;   */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* for300 serial */
id|VCLKIndex
op_assign
id|VCLKIndex
op_amp
l_int|0x3F
suffix:semicolon
)brace
r_return
(paren
id|VCLKIndex
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup5
id|SiS_SetGroup5
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|Pindex
comma
id|Pdata
suffix:semicolon
id|Pindex
op_assign
id|SiS_Part5Port
suffix:semicolon
id|Pdata
op_assign
id|SiS_Part5Port
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetInSlaveMode
op_or
id|LoadDACFlag
op_or
id|CRT2DisplayFlag
)paren
)paren
)paren
(brace
id|SiS_EnableCRT2
(paren
)paren
suffix:semicolon
multiline_comment|/*    LoadDAC2(ROMAddr,SiS_Part5Port,ModeNo,ModeIdIndex);  */
)brace
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_LoadDAC2
id|SiS_LoadDAC2
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|SiS_Part5Port
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
suffix:semicolon
id|USHORT
id|time
comma
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|m
comma
id|n
comma
id|o
suffix:semicolon
id|USHORT
id|si
comma
id|di
comma
id|bx
comma
id|dl
suffix:semicolon
id|USHORT
id|al
comma
id|ah
comma
id|dh
suffix:semicolon
id|USHORT
op_star
id|table
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|Pindex
comma
id|Pdata
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|Pindex
op_assign
id|SiS_Part5Port
suffix:semicolon
id|Pdata
op_assign
id|SiS_Part5Port
op_plus
l_int|1
suffix:semicolon
id|data
op_assign
id|modeflag
op_amp
id|DACInfoFlag
suffix:semicolon
id|time
op_assign
l_int|64
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x00
)paren
id|table
op_assign
id|SiS_MDA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x08
)paren
id|table
op_assign
id|SiS_CGA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x10
)paren
id|table
op_assign
id|SiS_EGA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x18
)paren
(brace
id|time
op_assign
l_int|256
suffix:semicolon
id|table
op_assign
id|SiS_VGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
id|j
op_assign
l_int|16
suffix:semicolon
r_else
id|j
op_assign
id|time
suffix:semicolon
id|SiS_SetReg3
(paren
id|Pindex
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|j
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x01
)paren
id|data2
op_assign
l_int|0x2A
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
id|data2
op_assign
id|data2
op_plus
l_int|0x15
suffix:semicolon
id|SiS_SetReg3
(paren
id|Pdata
comma
id|data2
)paren
suffix:semicolon
id|data
op_assign
id|data
op_rshift
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
id|SiS_SetReg3
(paren
id|Pdata
comma
id|data
)paren
suffix:semicolon
)brace
id|si
op_assign
l_int|32
suffix:semicolon
r_for
c_loop
(paren
id|m
op_assign
l_int|0
suffix:semicolon
id|m
OL
l_int|9
suffix:semicolon
id|m
op_increment
)paren
(brace
id|di
op_assign
id|si
suffix:semicolon
id|bx
op_assign
id|si
op_plus
l_int|0x04
suffix:semicolon
id|dl
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|5
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|si
op_increment
suffix:semicolon
id|SiS_WriteDAC2
(paren
id|Pdata
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 5 */
id|si
op_assign
id|si
op_minus
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|3
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|si
op_decrement
suffix:semicolon
id|SiS_WriteDAC2
(paren
id|Pdata
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|dl
op_increment
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|si
op_assign
id|si
op_plus
l_int|5
suffix:semicolon
)brace
multiline_comment|/* for 9 */
)brace
)brace
r_void
DECL|function|SiS_WriteDAC2
id|SiS_WriteDAC2
(paren
id|USHORT
id|Pdata
comma
id|USHORT
id|dl
comma
id|USHORT
id|ah
comma
id|USHORT
id|al
comma
id|USHORT
id|dh
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|bh
comma
id|bl
suffix:semicolon
id|bh
op_assign
id|ah
suffix:semicolon
id|bl
op_assign
id|al
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|temp
suffix:semicolon
)brace
)brace
id|SiS_SetReg3
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|dh
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|bh
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|bl
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCHTVReg
id|SiS_SetCHTVReg
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
comma
id|tempbx
comma
id|tempcl
suffix:semicolon
multiline_comment|/*  USHORT CRT2CRTC; */
id|USHORT
id|TVType
comma
id|resindex
suffix:semicolon
id|SiS_CHTVRegDataStruct
op_star
id|CHTVRegData
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempcl
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|TVType
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|TVType
op_assign
id|TVType
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
id|TVType
op_assign
id|TVType
op_plus
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|TVType
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVRegData
op_assign
id|SiS_CHTVReg_UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVRegData
op_assign
id|SiS_CHTVReg_ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVRegData
op_assign
id|SiS_CHTVReg_UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVRegData
op_assign
id|SiS_CHTVReg_OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|resindex
op_assign
id|tempcl
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetCH7005
(paren
l_int|0x4304
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x6909
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetCH7005
(paren
l_int|0x0304
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x7109
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x00
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|1
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x07
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|2
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x08
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|3
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0A
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0B
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbx
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x2801
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x3103
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x003D
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0010
comma
l_int|0x1F
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0211
comma
l_int|0xF8
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001C
comma
l_int|0xEF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
multiline_comment|/* tempcl=CRT2CRTC; */
id|tempcl
op_assign
id|tempcl
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* 640x480   underscan */
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* 800x600  underscan */
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0C19
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x001F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0120
comma
l_int|0xEF
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* 640x480   overscan  */
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* 800x600   overscan */
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0F19
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x011A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0C1B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x071C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x011D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0C1E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x071F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0120
comma
l_int|0xEF
)paren
suffix:semicolon
id|SiS_SetCHTVRegANDOR
(paren
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_SetCHTVRegANDOR
id|SiS_SetCHTVRegANDOR
(paren
id|USHORT
id|tempax
comma
id|USHORT
id|tempbh
)paren
(brace
id|USHORT
id|tempal
comma
id|tempah
comma
id|tempbl
suffix:semicolon
id|tempal
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|tempah
op_assign
(paren
id|tempax
op_rshift
l_int|8
)paren
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetCH7005
(paren
id|tempal
)paren
suffix:semicolon
id|tempbl
op_assign
(paren
(paren
(paren
id|tempbl
op_amp
id|tempbh
)paren
op_or
id|tempah
)paren
op_lshift
l_int|8
op_or
id|tempal
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
id|tempbl
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCH7005
id|SiS_SetCH7005
(paren
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
suffix:semicolon
id|SiS_DDC_Port
op_assign
l_int|0x3c4
suffix:semicolon
id|SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
id|SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
id|temp
op_assign
l_int|1
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|temp
op_ne
l_int|0
suffix:semicolon
)paren
(brace
id|SiS_SetSwitchDDC2
(paren
)paren
suffix:semicolon
id|SiS_SetStart
(paren
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|SiS_SetStop
(paren
)paren
suffix:semicolon
)brace
)brace
id|USHORT
DECL|function|SiS_GetCH7005
id|SiS_GetCH7005
(paren
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
suffix:semicolon
id|SiS_DDC_Port
op_assign
l_int|0x3c4
suffix:semicolon
id|SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
id|SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
id|SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
id|SiS_SetSwitchDDC2
(paren
)paren
suffix:semicolon
id|SiS_SetStart
(paren
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|tempah
op_assign
id|SiS_DDC_ReadAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|SiS_SetStart
(paren
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_DDC_DeviceAddr
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x01
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
r_continue
suffix:semicolon
id|tempah
op_assign
id|SiS_ReadDDC2Data
(paren
id|tempah
)paren
suffix:semicolon
id|SiS_SetStop
(paren
)paren
suffix:semicolon
r_return
(paren
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetSwitchDDC2
id|SiS_SetSwitchDDC2
(paren
r_void
)paren
(brace
id|USHORT
id|i
suffix:semicolon
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|1000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
l_int|0x05
)paren
suffix:semicolon
)brace
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|1000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
l_int|0x05
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetStart
id|SiS_SetStart
(paren
r_void
)paren
(brace
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/*  SetSDA(0x01); */
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SetSDA(0x00); */
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetStop
id|SiS_SetStop
(paren
r_void
)paren
(brace
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*  SetSDA(0x00); */
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/* SetSDA(0x01); */
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_WriteDDC2Data
id|SiS_WriteDDC2Data
(paren
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|flag
comma
id|temp
suffix:semicolon
id|flag
op_assign
l_int|0x80
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_amp
id|flag
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x02
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
id|flag
op_assign
id|flag
op_rshift
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_CheckACK
(paren
)paren
suffix:semicolon
r_return
(paren
id|temp
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ReadDDC2Data
id|SiS_ReadDDC2Data
(paren
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|temp
comma
id|getdata
suffix:semicolon
id|getdata
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|getdata
op_assign
id|getdata
op_lshift
l_int|1
suffix:semicolon
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
id|getdata
op_assign
id|getdata
op_or
l_int|0x01
suffix:semicolon
)brace
r_return
(paren
id|getdata
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetSCLKLow
id|SiS_SetSCLKLow
(paren
r_void
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SetSCLKLow()  */
r_do
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|temp
op_amp
l_int|0x01
)paren
suffix:semicolon
id|SiS_DDC2Delay
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetSCLKHigh
id|SiS_SetSCLKHigh
(paren
r_void
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFE
comma
l_int|0x01
)paren
suffix:semicolon
multiline_comment|/* SetSCLKHigh()  */
r_do
(brace
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
suffix:semicolon
id|SiS_DDC2Delay
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DDC2Delay
id|SiS_DDC2Delay
(paren
r_void
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DDC2DelayTime
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
)brace
)brace
id|USHORT
DECL|function|SiS_CheckACK
id|SiS_CheckACK
(paren
r_void
)paren
(brace
id|USHORT
id|tempah
suffix:semicolon
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
comma
l_int|0xFD
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetSCLKHigh
(paren
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg1
(paren
id|SiS_DDC_Port
comma
id|SiS_DDC_Index
)paren
suffix:semicolon
id|SiS_SetSCLKLow
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x02
)paren
r_return
(paren
l_int|1
)paren
suffix:semicolon
r_else
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_ModCRT1CRTC
id|SiS_ModCRT1CRTC
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|temp
op_assign
id|SiS_GetLVDSCRT1Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
multiline_comment|/*unlock cr0-7  */
id|tempah
op_assign
id|tempah
op_amp
l_int|0x7F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x0
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x02
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x05
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
comma
id|j
op_assign
l_int|5
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|7
suffix:semicolon
id|i
op_le
l_int|0x11
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|9
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0E0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/*301b*/
r_void
DECL|function|SiS_CHACRT1CRTC
id|SiS_CHACRT1CRTC
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|temp
op_assign
id|SiS_GetLVDSCRT1Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
multiline_comment|/*unlock cr0-7  */
id|tempah
op_assign
id|tempah
op_amp
l_int|0x7F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x0
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x02
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x05
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
comma
id|j
op_assign
l_int|5
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|7
suffix:semicolon
id|i
op_le
l_int|0x11
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|9
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0E0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/*add for LCDA*/
id|BOOLEAN
DECL|function|SiS_GetLCDACRT1Ptr
id|SiS_GetLCDACRT1Ptr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|ResInfo
comma
id|USHORT
op_star
id|DisplayType
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|modeflag
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|CRT2CRTC
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempbx
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_sub_assign
id|Panel800x600
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
id|tempbx
op_add_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
id|tempbx
op_add_assign
op_plus
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|CRT2CRTC
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|CRT2CRTC
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
)brace
op_star
id|ResInfo
op_assign
id|CRT2CRTC
op_amp
l_int|0x3F
suffix:semicolon
op_star
id|DisplayType
op_assign
id|tempbx
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/*end for 301b*/
id|BOOLEAN
DECL|function|SiS_GetLVDSCRT1Ptr
id|SiS_GetLVDSCRT1Ptr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|ResInfo
comma
id|USHORT
op_star
id|DisplayType
)paren
(brace
id|USHORT
id|tempbx
comma
id|modeflag
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|Flag
comma
id|CRT2CRTC
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|CRT2CRTC
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|CRT2CRTC
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|Flag
op_assign
l_int|1
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|Flag
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
l_int|12
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|Flag
)paren
(brace
id|tempbx
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_sub_assign
id|Panel800x600
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
id|tempbx
op_add_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
id|tempbx
op_add_assign
op_plus
l_int|3
suffix:semicolon
)brace
op_star
id|ResInfo
op_assign
id|CRT2CRTC
op_amp
l_int|0x3F
suffix:semicolon
op_star
id|DisplayType
op_assign
id|tempbx
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2ECLK
id|SiS_SetCRT2ECLK
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempah
comma
id|tempal
suffix:semicolon
id|USHORT
id|P3cc
op_assign
id|SiS_P3c9
op_plus
l_int|3
suffix:semicolon
id|USHORT
id|vclkindex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
multiline_comment|/*no trumpion  */
id|tempal
op_assign
id|SiS_GetReg2
(paren
id|P3cc
)paren
suffix:semicolon
id|tempal
op_assign
id|tempal
op_amp
l_int|0x0C
suffix:semicolon
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*trumpion  */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
multiline_comment|/*  tempal=*((UCHAR *)(ROMAddr+SiS_RefIndex+0x03));     &amp;di+Ext_CRTVCLK  */
id|tempal
op_assign
id|tempal
op_amp
l_int|0x03F
suffix:semicolon
r_if
c_cond
(paren
id|tempal
op_eq
l_int|0x02
)paren
(brace
multiline_comment|/*31.5MHz  */
multiline_comment|/*      SiS_RefIndex=SiS_RefIndex-Ext2StructSize;   */
)brace
multiline_comment|/*    SiS_RefIndex=GetVCLKPtr(ROMAddr,ModeNo);  */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
)brace
id|tempal
op_assign
l_int|0x02B
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempal
op_assign
id|tempal
op_plus
l_int|3
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|tempah
op_assign
id|SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|tempal
comma
l_int|0x80
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDefCRT2ExtRegs
id|SiS_SetDefCRT2ExtRegs
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x10
comma
l_int|0x80
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xC3
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*&n;    for SIS310 O.E.M.&n;*/
multiline_comment|/*&n;---------------------------------------------------------&n;   LCDResInfo 1 : 800x600&n;              2 : 1024x768&n;              3 : 1280x1024&n;              4 : 1280x960&n;              5 : 640x480&n;              6 : 1600x1200&n;              7 : 1920x1440&n;   VESA&n;   non-VESA&n;   non-Expanding&n;---------------------------------------------------------&n;*/
id|USHORT
DECL|function|GetLCDPtrIndex
id|GetLCDPtrIndex
(paren
r_void
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
(paren
id|SiS_LCDResInfo
op_amp
l_int|0x0F
)paren
op_minus
l_int|1
suffix:semicolon
id|index
op_mul_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
id|index
op_add_assign
l_int|2
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDInfo
op_amp
id|LCDVESATiming
)paren
)paren
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
multiline_comment|/*&n;---------------------------------------------------------&n;       GetTVPtrIndex()&n;          return       0 : NTSC Enhanced/Standard&n;                       1 : NTSC Standard TVSimuMode&n;                       2 : PAL Enhanced/Standard&n;                       3 : PAL Standard TVSimuMode&n;                       4 : HiVision Enhanced/Standard&n;                       5 : HiVision Standard TVSimuMode&n;---------------------------------------------------------&n;*/
id|USHORT
DECL|function|GetTVPtrIndex
id|GetTVPtrIndex
(paren
r_void
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|index
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
multiline_comment|/* Hivision TV use PAL */
id|index
op_increment
suffix:semicolon
id|index
op_mul_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
id|SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
id|index
op_increment
suffix:semicolon
r_return
id|index
suffix:semicolon
)brace
r_void
DECL|function|SetDelayComp
id|SetDelayComp
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part1Port
suffix:semicolon
id|USHORT
id|delay
comma
id|index
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|delay
op_assign
id|SiS310_CRT2DelayCompensation1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|delay
op_assign
id|SiS310_CRT2DelayCompensation2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|index
op_assign
id|GetLCDPtrIndex
(paren
)paren
suffix:semicolon
id|delay
op_assign
id|SiS310_LCDDelayCompensation1
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|delay
op_assign
id|SiS310_LCDDelayCompensation2
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|GetTVPtrIndex
(paren
)paren
suffix:semicolon
id|delay
op_assign
id|SiS310_TVDelayCompensation1
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|delay
op_assign
id|SiS310_TVDelayCompensation2
(braket
id|index
)braket
suffix:semicolon
)brace
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part1Port
comma
l_int|0x2D
comma
op_complement
l_int|0x0F
comma
id|delay
)paren
suffix:semicolon
multiline_comment|/* index 2D D[3:0] */
)brace
multiline_comment|/*&n;*/
r_void
DECL|function|SetAntiFlicker
id|SetAntiFlicker
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
(paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_rshift
l_int|1
)paren
suffix:semicolon
multiline_comment|/* 0: NTSC, 1 :PAL, 2:HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVFlickerIndex
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVFlickerIndex
suffix:semicolon
)brace
id|temp
op_assign
id|SiS310_TVAntiFlick1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part2Port
comma
l_int|0x0A
comma
op_complement
l_int|0x70
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_void
DECL|function|SetEdgeEnhance
id|SetEdgeEnhance
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
(paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_rshift
l_int|1
)paren
suffix:semicolon
multiline_comment|/* 0: NTSC, 1 :PAL, 2:HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVEdgeIndex
suffix:semicolon
multiline_comment|/* si+VB_StTVEdgeIndex */
)brace
r_else
(brace
id|index
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVEdgeIndex
suffix:semicolon
multiline_comment|/* si+VB_ExtTVEdgeIndex */
)brace
id|temp
op_assign
id|SiS310_TVEdge1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
id|temp
op_lshift_assign
l_int|5
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part2Port
comma
l_int|0x3A
comma
op_complement
l_int|0xE0
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[7:5] */
)brace
r_void
DECL|function|SetYFilter
id|SetYFilter
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|Part2Port
comma
id|temp1
comma
id|temp2
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|i
comma
id|index1
suffix:semicolon
id|UCHAR
id|OutputSelect
op_assign
op_star
id|pSiS_OutputSelect
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
(paren
)paren
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC, 1 :PAL, 2:HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVYFilterIndex
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVYFilterIndex
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
multiline_comment|/* Hivision TV use PAL */
id|temp
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*end 301b */
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_TVYFilter1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*add PALMN*/
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
(brace
id|index1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp1
op_assign
id|index1
op_amp
l_int|0x01
suffix:semicolon
id|index1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp2
op_assign
id|index1
op_amp
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALMFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALMFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALMFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x80
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALNFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALNFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_PALNFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*end PALMN */
)brace
r_void
DECL|function|SetPhaseIncr
id|SetPhaseIncr
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|temp1
comma
id|i
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
(paren
)paren
suffix:semicolon
multiline_comment|/* 0: NTSC Graphics, 1: NTSC Text, 2 :PAL Graphics, 3 :PAL Text, 4:HiTV Graphics 5:HiTV Text */
id|index
op_assign
id|temp
op_mod
l_int|2
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC, 1 :PAL, 2:HiTV */
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
multiline_comment|/*if PALMN Not Set */
id|temp1
op_assign
id|temp1
op_amp
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp1
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
r_else
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_OEM310Setting
id|SiS_OEM310Setting
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|SetDelayComp
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SetAntiFlicker
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetPhaseIncr
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|SetYFilter
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetEdgeEnhance
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_300
multiline_comment|/*&n;    for SIS300 O.E.M.&n;*/
id|USHORT
DECL|function|GetRevisionID
id|GetRevisionID
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
macro_line|#ifdef CONFIG_FB_SIS_300
id|ULONG
id|temp1
comma
id|base
suffix:semicolon
id|USHORT
id|temp2
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* add to set SR14 */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000008
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x000000FF
suffix:semicolon
id|temp2
op_assign
(paren
id|USHORT
)paren
(paren
id|temp1
)paren
suffix:semicolon
r_return
id|temp2
suffix:semicolon
)brace
macro_line|#endif
)brace
id|USHORT
DECL|function|GetOEMLCDPtr
id|GetOEMLCDPtr
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|tempbx
op_assign
l_int|0
comma
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
multiline_comment|/* LCD */
id|tempax
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_assign
id|SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_minus
id|Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
id|temp
op_assign
id|GetRevisionID
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_and
(paren
id|temp
OL
l_int|1
)paren
)paren
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|temp
OL
l_int|3
)paren
)paren
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|tempax
op_eq
id|Panel1024x768
)paren
op_logical_and
(paren
id|SiS_LCDInfo
op_eq
id|LCDNonExpanding
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
multiline_comment|/*add OEMLCDPanelIDSupport */
id|tempbx
op_assign
id|SiS_LCDTypeInfo
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|1
suffix:semicolon
)brace
)brace
id|tempbx
op_mul_assign
l_int|2
suffix:semicolon
r_return
id|tempbx
suffix:semicolon
)brace
id|USHORT
DECL|function|GetOEMTVPtr
id|GetOEMTVPtr
(paren
r_void
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
id|index
op_assign
id|index
op_plus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|index
op_assign
id|index
op_plus
l_int|2
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
id|index
op_assign
id|index
op_plus
l_int|3
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
id|index
op_assign
id|index
op_plus
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|index
suffix:semicolon
)brace
r_void
DECL|function|SetOEMTVDelay
id|SetOEMTVDelay
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part1Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|ModeIdIndex
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp
op_assign
id|GetOEMTVPtr
(paren
)paren
suffix:semicolon
id|index
op_assign
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVDelayIndex
suffix:semicolon
id|temp
op_assign
id|SiS300_OEMTVDelay
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_void
DECL|function|SetOEMLCDDelay
id|SetOEMLCDDelay
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|ModeIdIndex
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp
op_assign
id|GetOEMLCDPtr
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|index
op_assign
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_LCDDelayIndex
suffix:semicolon
id|temp
op_assign
id|SiS300_OEMLCDDelay1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
multiline_comment|/*add OEMLCDPanelIDSupport */
id|temp
op_assign
id|SiS300_OEMLCDDelay2
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part2Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
multiline_comment|/*&n;*/
r_void
DECL|function|SetOEMAntiFlicker
id|SetOEMAntiFlicker
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp
suffix:semicolon
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp
op_assign
id|GetOEMTVPtr
(paren
)paren
suffix:semicolon
id|index
op_assign
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVFlickerIndex
suffix:semicolon
id|temp
op_assign
id|SiS300_OEMTVFlicker
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x70
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|Part2Port
comma
l_int|0x0A
comma
op_complement
l_int|0x70
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_void
DECL|function|SetOEMPhaseIncr
id|SetOEMPhaseIncr
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|i
comma
id|ModeIdIndex
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
singleline_comment|// temp = GetTVPtrIndex();
multiline_comment|/* 0: NTSC Graphics, 1: NTSC Text, 2 :PAL Graphics, 3 :PAL Text, 4:HiTV Graphics 5:HiTV Text */
singleline_comment|// index = temp % 2;
singleline_comment|// temp &gt;&gt;= 1;   /* 0: NTSC, 1 :PAL, 2:HiTV */
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|index
op_assign
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVPhaseIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_StPALPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_StNTSCPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_StSCARTPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_ExtPALPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_ExtNTSCPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_ExtSCARTPhase
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x31
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SetOEMYFilter
id|SetOEMYFilter
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part2Port
suffix:semicolon
id|USHORT
id|index
comma
id|temp1
comma
id|temp2
comma
id|i
comma
id|ModeIdIndex
comma
id|index1
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
multiline_comment|/*301b */
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|index
op_assign
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVYFilterIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_StPALFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_StNTSCFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_ExtPALFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_ExtNTSCFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_NTSCFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_NTSCFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*add PALMN*/
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|index1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp1
op_assign
id|index1
op_amp
l_int|0x01
suffix:semicolon
id|index1
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp2
op_assign
id|index1
op_amp
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALMFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALMFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALMFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x80
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALNFilter2
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALNFilter2
(braket
id|index
)braket
(braket
(paren
id|i
op_minus
l_int|0x48
)paren
op_plus
l_int|0x04
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|Part2Port
comma
id|i
comma
id|SiS300_PALNFilter
(braket
id|index
)braket
(braket
id|i
op_minus
l_int|0x35
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*end PALMN */
)brace
r_void
DECL|function|SiS_OEM300Setting
id|SiS_OEM300Setting
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SetOEMLCDDelay
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SetOEMTVDelay
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|SetOEMAntiFlicker
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* SetOEMPhaseIncr(HwDeviceExtension,BaseAddr,ROMAddr,ModeNo); */
id|SetOEMYFilter
(paren
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
eof
