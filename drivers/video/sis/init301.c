multiline_comment|/* $XFree86$ */
multiline_comment|/* $XdotOrg$ */
multiline_comment|/*&n; * Mode initializing code (CRT2 section)&n; * for SiS 300/305/540/630/730 and&n; *     SiS 315/550/650/M650/651/661FX/M661xX/740/741(GX)/M741/330/660/M660/760/M760&n; * (Universal module for Linux kernel framebuffer and XFree86/X.org 4.x)&n; *&n; * Copyright (C) 2001-2004 by Thomas Winischhofer, Vienna, Austria&n; *&n; * If distributed as part of the Linux kernel, the following license terms&n; * apply:&n; *&n; * * This program is free software; you can redistribute it and/or modify&n; * * it under the terms of the GNU General Public License as published by&n; * * the Free Software Foundation; either version 2 of the named License,&n; * * or any later version.&n; * *&n; * * This program is distributed in the hope that it will be useful,&n; * * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the&n; * * GNU General Public License for more details.&n; * *&n; * * You should have received a copy of the GNU General Public License&n; * * along with this program; if not, write to the Free Software&n; * * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA&n; *&n; * Otherwise, the following license terms apply:&n; *&n; * * Redistribution and use in source and binary forms, with or without&n; * * modification, are permitted provided that the following conditions&n; * * are met:&n; * * 1) Redistributions of source code must retain the above copyright&n; * *    notice, this list of conditions and the following disclaimer.&n; * * 2) Redistributions in binary form must reproduce the above copyright&n; * *    notice, this list of conditions and the following disclaimer in the&n; * *    documentation and/or other materials provided with the distribution.&n; * * 3) The name of the author may not be used to endorse or promote products&n; * *    derived from this software without specific prior written permission.&n; * *&n; * * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&squot;&squot; AND ANY EXPRESSED OR&n; * * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES&n; * * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.&n; * * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,&n; * * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT&n; * * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,&n; * * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY&n; * * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT&n; * * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF&n; * * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&n; *&n; * Author: &t;Thomas Winischhofer &lt;thomas@winischhofer.net&gt;&n; *&n; * Formerly based on non-functional code-fragements for 300 series by SiS, Inc.&n; * Used by permission.&n; *&n; * TW says: This code looks awful, I know. But please don&squot;t do anything about&n; * this otherwise debugging will be hell.&n; * The code is extremely fragile as regards the different chipsets, different&n; * video bridges and combinations thereof. If anything is changed, extreme&n; * care has to be taken that that change doesn&squot;t break it for other chipsets,&n; * bridges or combinations thereof.&n; * All comments in this file are by me, regardless if marked TW or not.&n; *&n; */
macro_line|#if 1
DECL|macro|SET_EMI
mdefine_line|#define SET_EMI&t;&t;/* 302LV/ELV: Set EMI values */
macro_line|#endif
DECL|macro|COMPAL_HACK
mdefine_line|#define COMPAL_HACK&t;/* Needed for Compal 1400x1050 (EMI) */
DECL|macro|COMPAQ_HACK
mdefine_line|#define COMPAQ_HACK&t;/* Needed for Inventec/Compaq 1280x1024 (EMI) */
DECL|macro|ASUS_HACK
mdefine_line|#define ASUS_HACK&t;/* Needed for Asus A2H 1024x768 (EMI) */
macro_line|#include &quot;init301.h&quot;
macro_line|#ifdef SIS300
macro_line|#include &quot;oem300.h&quot;
macro_line|#endif
macro_line|#ifdef SIS315H
macro_line|#include &quot;oem310.h&quot;
macro_line|#endif
DECL|macro|SiS_I2CDELAY
mdefine_line|#define SiS_I2CDELAY      1000
DECL|macro|SiS_I2CDELAYSHORT
mdefine_line|#define SiS_I2CDELAYSHORT  150
r_static
id|USHORT
id|SiS_GetBIOSLCDResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/*********************************************/
multiline_comment|/*         HELPER: Lock/Unlock CRT2          */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_UnLockCRT2
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2f
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x24
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_LockCRT2
id|SiS_LockCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x24
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            HELPER: Write SR11             */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetRegSR11ANDOR
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|DataAND
comma
id|USHORT
id|DataOR
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|DataAND
op_and_assign
l_int|0x0f
suffix:semicolon
id|DataOR
op_and_assign
l_int|0x0f
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
id|DataAND
comma
id|DataOR
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*    HELPER: Get Pointer to LCD structure   */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS315H
r_static
id|UCHAR
op_star
DECL|function|GetLCDStructPtr661
id|GetLCDStructPtr661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|UCHAR
op_star
id|myptr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|romindex
op_assign
l_int|0
comma
id|reg
op_assign
l_int|0
comma
id|idx
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Use the BIOS tables only for LVDS panels; TMDS is unreliable&n;    * due to the variaty of panels the BIOS doesn&squot;t know about.&n;    * Exception: If the BIOS has better knowledge (such as in case&n;    * of machines with a 301C and a panel that does not support DDC)&n;    * use the BIOS data as well.&n;    */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_or
(paren
op_logical_neg
id|SiS_Pr-&gt;PanelSelfDetected
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
id|reg
op_assign
l_int|0x3c
suffix:semicolon
)brace
r_else
id|reg
op_assign
l_int|0x7d
suffix:semicolon
id|idx
op_assign
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|reg
)paren
op_amp
l_int|0x1f
)paren
op_star
l_int|26
suffix:semicolon
r_if
c_cond
(paren
id|idx
OL
(paren
l_int|8
op_star
l_int|26
)paren
)paren
(brace
id|myptr
op_assign
(paren
id|UCHAR
op_star
)paren
op_amp
id|SiS_LCDStruct661
(braket
id|idx
)braket
suffix:semicolon
)brace
id|romindex
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x100
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romindex
)paren
(brace
id|romindex
op_add_assign
id|idx
suffix:semicolon
id|myptr
op_assign
op_amp
id|ROMAddr
(braket
id|romindex
)braket
suffix:semicolon
)brace
)brace
r_return
id|myptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDStructPtr661_2
id|GetLCDStructPtr661_2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Use the BIOS tables only for LVDS panels; TMDS is unreliable&n;    * due to the variaty of panels the BIOS doesn&squot;t know about.&n;    * Exception: If the BIOS has better knowledge (such as in case&n;    * of machines with a 301C and a panel that does not support DDC)&n;    * use the BIOS data as well.&n;    */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_or
(paren
op_logical_neg
id|SiS_Pr-&gt;PanelSelfDetected
)paren
)paren
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x102
)paren
suffix:semicolon
id|romptr
op_add_assign
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
)paren
op_star
id|SiS_Pr-&gt;SiS661LCD2TableSize
)paren
suffix:semicolon
)brace
r_return
id|romptr
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*           Adjust Rate for CRT2            */
multiline_comment|/*********************************************/
r_static
id|BOOLEAN
DECL|function|SiS_AdjustCRT2Rate
id|SiS_AdjustCRT2Rate
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RRTI
comma
id|USHORT
op_star
id|i
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|checkmask
op_assign
l_int|0
comma
id|modeid
comma
id|infoflag
suffix:semicolon
id|modeid
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|checkmask
op_or_assign
id|SupportRAMDAC2
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|checkmask
op_or_assign
id|SupportRAMDAC2_135
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|checkmask
op_or_assign
id|SupportRAMDAC2_162
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
id|checkmask
op_or_assign
id|SupportRAMDAC2_202
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|checkmask
op_or_assign
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|modeid
op_eq
l_int|0x2e
)paren
(brace
id|checkmask
op_or_assign
id|Support64048060Hz
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|checkmask
op_or_assign
id|SupportHiVision
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToYPbPr525750
op_or
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
)paren
)paren
(brace
id|checkmask
op_or_assign
id|SupportTV
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|checkmask
op_or_assign
id|SupportTV1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|checkmask
op_or_assign
id|SupportYPbPr750p
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|checkmask
op_or_assign
id|SupportCHTV
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|checkmask
op_or_assign
id|SupportLCD
suffix:semicolon
)brace
)brace
multiline_comment|/* Look backwards in table for matching CRT2 mode */
r_for
c_loop
(paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_eq
id|modeid
suffix:semicolon
(paren
op_star
id|i
)paren
op_decrement
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|checkmask
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_star
id|i
)paren
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* Look through the whole mode-section of the table from the beginning&n;   * for a matching CRT2 mode if no mode was found yet.&n;   */
r_for
c_loop
(paren
(paren
op_star
id|i
)paren
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|i
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_ne
id|modeid
)paren
(brace
r_break
suffix:semicolon
)brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|checkmask
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*              Get rate index               */
multiline_comment|/*********************************************/
id|USHORT
DECL|function|SiS_GetRatePtr
id|SiS_GetRatePtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|SHORT
id|LCDRefreshIndex
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
id|USHORT
id|RRTI
comma
id|i
comma
id|backup_i
suffix:semicolon
id|USHORT
id|modeflag
comma
id|index
comma
id|temp
comma
id|backupindex
suffix:semicolon
multiline_comment|/* Do NOT check for UseCustomMode here, will skrew up FIFO */
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0xfe
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OL
l_int|0x14
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|index
op_assign
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x33
)paren
op_rshift
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
)paren
op_amp
l_int|0x0F
suffix:semicolon
id|backupindex
op_assign
id|index
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
l_int|0
)paren
(brace
id|index
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_assign
id|backupindex
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
id|temp
op_assign
id|LCDRefreshIndex
(braket
id|SiS_GetBIOSLCDResInfo
c_func
(paren
id|SiS_Pr
)paren
)braket
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
id|temp
)paren
(brace
id|index
op_assign
id|temp
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|RRTI
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|ModeNo
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
)braket
dot
id|ModeID
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DriverMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_VESAID
op_eq
l_int|0x105
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_VESAID
op_eq
l_int|0x107
)paren
)paren
(brace
r_if
c_cond
(paren
id|backupindex
op_le
l_int|1
)paren
(brace
id|RRTI
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
id|i
)braket
dot
id|ModeID
op_ne
id|ModeNo
)paren
(brace
r_break
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
id|i
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|temp
op_and_assign
id|ModeTypeMask
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
id|SiS_Pr-&gt;SiS_ModeType
)paren
(brace
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
id|index
op_decrement
suffix:semicolon
)brace
r_while
c_loop
(paren
id|index
op_ne
l_int|0xFFFF
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RRTI
op_plus
id|i
op_minus
l_int|1
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|InterlaceMode
)paren
(brace
id|i
op_increment
suffix:semicolon
)brace
)brace
)brace
id|i
op_decrement
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
)paren
)paren
(brace
id|backup_i
op_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_AdjustCRT2Rate
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RRTI
comma
op_amp
id|i
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|i
op_assign
id|backup_i
suffix:semicolon
)brace
)brace
r_return
id|RRTI
op_plus
id|i
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            STORE CRT2 INFO in CR34        */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SaveCRT2Info
id|SiS_SaveCRT2Info
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
suffix:semicolon
multiline_comment|/* Store CRT1 ModeNo in CR34 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
comma
id|ModeNo
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp2
op_assign
op_complement
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
id|temp2
comma
id|temp1
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*    HELPER: GET SOME DATA FROM BIOS ROM    */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS300
r_static
id|BOOLEAN
DECL|function|SiS_CR36BIOSWord23b
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x233
)braket
op_eq
l_int|0x12
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x234
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|temp
op_assign
l_int|1
op_lshift
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
)paren
op_amp
l_int|0x0f
)paren
suffix:semicolon
id|temp1
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x23b
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|temp
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|SiS_CR36BIOSWord23d
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x233
)braket
op_eq
l_int|0x12
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x234
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|temp
op_assign
l_int|1
op_lshift
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
)paren
op_amp
l_int|0x0f
)paren
suffix:semicolon
id|temp1
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x23d
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|temp
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*          HELPER: DELAY FUNCTIONS          */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_DDC2Delay
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delaytime
)paren
(brace
id|USHORT
id|i
comma
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|delaytime
suffix:semicolon
id|i
op_increment
)paren
(brace
id|j
op_add_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
)brace
)brace
macro_line|#if defined(SIS300) || defined(SIS315H)
r_static
r_void
DECL|function|SiS_GenericDelay
id|SiS_GenericDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
id|USHORT
id|temp
comma
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetRegByte
c_func
(paren
l_int|0x61
)paren
op_amp
l_int|0x10
suffix:semicolon
r_while
c_loop
(paren
id|delay
)paren
(brace
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
l_int|0x61
)paren
op_amp
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|flag
)paren
(brace
r_continue
suffix:semicolon
)brace
id|flag
op_assign
id|temp
suffix:semicolon
id|delay
op_decrement
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|SiS_LongDelay
id|SiS_LongDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
r_while
c_loop
(paren
id|delay
op_decrement
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x19df
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#if defined(SIS300) || defined(SIS315H)
r_static
r_void
DECL|function|SiS_ShortDelay
id|SiS_ShortDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
r_while
c_loop
(paren
id|delay
op_decrement
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x42
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiS_PanelDelay
id|SiS_PanelDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|DelayTime
)paren
(brace
macro_line|#if defined(SIS300) || defined(SIS315H)
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|PanelID
comma
id|DelayIndex
comma
id|Delay
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|PanelID
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|PanelID
op_and_assign
l_int|0xf7
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
id|PanelID
op_assign
l_int|0x12
suffix:semicolon
)brace
)brace
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|DelayTime
op_ge
l_int|2
)paren
op_logical_and
(paren
(paren
id|PanelID
op_amp
l_int|0x0f
)paren
op_eq
l_int|1
)paren
)paren
(brace
id|Delay
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|DelayTime
op_ge
l_int|2
)paren
(brace
id|DelayTime
op_sub_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x225
)braket
suffix:semicolon
)brace
r_else
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x226
)braket
suffix:semicolon
)brace
)brace
)brace
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_le
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0x1000
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0x4000
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
multiline_comment|/* ||&n;         (SiS_Pr-&gt;SiS_CustomT == CUT_COMPAQ1280) ||&n;&t; (SiS_Pr-&gt;SiS_CustomT == CUT_CLEVO1400) */
)paren
(brace
multiline_comment|/* 315 series, LVDS; Special */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|PanelID
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1400
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1b
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
id|PanelID
op_assign
l_int|0x12
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
(brace
id|DelayIndex
op_assign
id|PanelID
op_amp
l_int|0x0f
suffix:semicolon
)brace
r_else
(brace
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|DelayTime
op_ge
l_int|2
)paren
op_logical_and
(paren
(paren
id|PanelID
op_amp
l_int|0x0f
)paren
op_eq
l_int|1
)paren
)paren
(brace
id|Delay
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|DelayTime
op_ge
l_int|2
)paren
(brace
id|DelayTime
op_sub_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x13c
)braket
op_amp
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x17e
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x17f
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
multiline_comment|/* 315 series, all bridges */
id|DelayIndex
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
id|Delay
op_lshift_assign
l_int|8
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS315H */
)brace
)brace
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|SiS_PanelDelayLoop
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|DelayTime
comma
id|USHORT
id|DelayLoop
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DelayLoop
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|DelayTime
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*    HELPER: WAIT-FOR-RETRACE FUNCTIONS     */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_WaitRetrace1
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|watchdog
suffix:semicolon
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
)paren
op_amp
l_int|0xc0
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x17
)paren
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
)brace
macro_line|#if defined(SIS300) || defined(SIS315H)
r_static
r_void
DECL|function|SiS_WaitRetrace2
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|reg
)paren
(brace
id|USHORT
id|watchdog
suffix:semicolon
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|reg
)paren
op_amp
l_int|0x02
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|reg
)paren
op_amp
l_int|0x02
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiS_WaitVBRetrace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x20
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Pr
comma
l_int|0x25
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Pr
comma
l_int|0x30
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
)brace
r_static
r_void
DECL|function|SiS_VBWait
id|SiS_VBWait
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|tempal
comma
id|temp
comma
id|i
comma
id|j
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|100
suffix:semicolon
id|j
op_increment
)paren
(brace
id|tempal
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_else
r_break
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_else
r_break
suffix:semicolon
)brace
)brace
id|temp
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_VBLongWait
id|SiS_VBLongWait
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_VBWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*               HELPER: MISC                */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS300
r_static
id|BOOLEAN
DECL|function|SiS_Is301B
id|SiS_Is301B
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x01
)paren
op_ge
l_int|0xb0
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
r_static
id|BOOLEAN
DECL|function|SiS_CRT2IsLCD
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsDualEdge
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_650
)paren
op_logical_or
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xf0
)paren
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
r_return
id|FALSE
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsVAMode
id|SiS_IsVAMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
op_logical_and
(paren
id|flag
op_amp
id|SetToLCDA
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
macro_line|#endif
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsVAorLCD
id|SiS_IsVAorLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
r_static
id|BOOLEAN
DECL|function|SiS_IsDualLink
id|SiS_IsDualLink
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDDualLink
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_TVEnabled
id|SiS_TVEnabled
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
)paren
op_amp
l_int|0x0f
)paren
op_ne
l_int|0x0c
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4d
)paren
op_amp
l_int|0x10
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_LCDAEnabled
id|SiS_LCDAEnabled
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
)paren
op_amp
l_int|0x04
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_WeHaveBacklightCtrl
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x79
)paren
op_amp
l_int|0x10
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsNotM650orLater
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_650
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
suffix:semicolon
id|flag
op_and_assign
l_int|0xF0
suffix:semicolon
multiline_comment|/* Check for revision != A0 only */
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0xe0
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0xc0
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0xb0
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x90
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsYPbPr
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableCHYPbPr
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* = YPrPb = 0x08 */
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsChScart
id|SiS_IsChScart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableCHScart
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* = Scart = 0x04 */
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsTVOrYPbPrOrScart
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableCHYPbPr
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* = YPrPb = 0x08 */
r_if
c_cond
(paren
id|flag
op_amp
id|EnableCHScart
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* = Scart = 0x04 - TW */
)brace
r_else
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
id|BOOLEAN
DECL|function|SiS_IsLCDOrLCDA
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetToLCDA
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_else
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#endif
r_static
id|BOOLEAN
DECL|function|SiS_BridgeIsOn
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|1
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|2
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|SiS_BridgeIsEnabled
id|SiS_BridgeIsEnabled
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|flag
op_and_assign
l_int|0xa0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0x80
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x20
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_else
(brace
id|flag
op_and_assign
l_int|0x50
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0x40
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x10
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|SiS_BridgeInSlavemode
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|flag1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_amp
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*       GET VIDEO BRIDGE CONFIG INFO        */
multiline_comment|/*********************************************/
multiline_comment|/* Setup general purpose IO for Chrontel communication */
r_void
DECL|function|SiS_SetChrontelGPIO
id|SiS_SetChrontelGPIO
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|myvbinfo
)paren
(brace
r_int
r_int
id|acpibase
suffix:semicolon
r_int
r_int
id|temp
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChSW
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000874
)paren
suffix:semicolon
multiline_comment|/* get ACPI base */
id|acpibase
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|acpibase
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000800
comma
l_int|0x74
)paren
suffix:semicolon
macro_line|#endif
id|acpibase
op_and_assign
l_int|0xFFFF
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3c
)paren
)paren
suffix:semicolon
multiline_comment|/* ACPI register 0x3c: GP Event 1 I/O mode select */
id|temp
op_and_assign
l_int|0xFEFF
suffix:semicolon
id|SiS_SetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3c
)paren
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3c
)paren
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3a
)paren
)paren
suffix:semicolon
multiline_comment|/* ACPI register 0x3a: GP Pin Level (low/high) */
id|temp
op_and_assign
l_int|0xFEFF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|myvbinfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
id|SiS_SetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3a
)paren
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegShort
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|acpibase
op_plus
l_int|0x3a
)paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetVBInfo
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
comma
r_int
id|checkcrt2mode
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_SetFlag
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_ModeType
op_assign
id|modeflag
op_amp
id|ModeTypeMask
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
multiline_comment|/* NO - YPbPr not set yet ! */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_YPbPr
op_amp
template_param
)paren
(brace
id|temp
op_and_assign
(paren
id|SetCRT2ToHiVision
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
multiline_comment|/* 0x83 */
id|temp
op_or_assign
id|SetCRT2ToHiVision
suffix:semicolon
multiline_comment|/* 0x80 */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_YPbPr
op_amp
template_param
)paren
(brace
id|temp
op_and_assign
(paren
id|SetCRT2ToHiVision
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
multiline_comment|/* 0x83 */
id|temp
op_or_assign
id|SetCRT2ToSVIDEO
suffix:semicolon
multiline_comment|/* 0x08 */
)brace
)brace
macro_line|#endif
id|tempbx
op_or_assign
id|temp
suffix:semicolon
id|tempax
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_lshift
l_int|8
suffix:semicolon
id|tempax
op_and_assign
(paren
id|DriverMode
op_or
id|LoadDACFlag
op_or
id|SetNotSimuMode
op_or
id|SetPALTV
)paren
suffix:semicolon
id|tempbx
op_or_assign
id|tempax
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISLCDA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
(brace
multiline_comment|/* Mode 0x03 is never in driver mode */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
l_int|0xbf
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
(brace
multiline_comment|/* Reset LCDA setting if not driver mode */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
l_int|0xfc
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xF0
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
op_eq
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCDA
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV
op_or
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|tempbx
op_and_assign
op_complement
(paren
id|SetCRT2ToRAMDAC
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|tempbx
op_and_assign
op_complement
(paren
id|SetCRT2ToYPbPr525750
op_or
id|SetCRT2ToHiVision
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISYPBPR
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x04
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
op_amp
l_int|0xe0
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x60
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToHiVision
suffix:semicolon
)brace
r_else
id|tempbx
op_or_assign
id|SetCRT2ToYPbPr525750
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISHIVISION
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x04
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
op_amp
l_int|0xe0
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x60
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToHiVision
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SetToLCDA
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCDA
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
id|EnableCHYPbPr
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToCHYPbPr
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSCART
op_or
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToRAMDAC
op_or
id|SetCRT2ToHiVision
op_or
id|SetCRT2ToYPbPr525750
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
op_or
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToCHYPbPr
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|SetCRT2ToTV
op_or
id|SetCRT2ToLCD
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|temp
)paren
)paren
(brace
id|tempax
op_assign
id|DisableCRT2Display
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|USHORT
id|clearmask
op_assign
(paren
id|DriverMode
op_or
id|DisableCRT2Display
op_or
id|LoadDACFlag
op_or
id|SetNotSimuMode
op_or
id|SetInSlaveMode
op_or
id|SetPALTV
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToLCDA
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToRAMDAC
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToLCD
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToSCART
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToHiVision
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
id|tempbx
op_and_assign
(paren
id|clearmask
op_or
id|SetCRT2ToYPbPr525750
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToTV
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToLCD
op_or
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|tempax
op_amp
id|DisableCRT2Display
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
(paren
id|SwitchCRT2
op_or
id|SetSimuScanMode
)paren
)paren
)paren
(brace
id|tempbx
op_assign
id|SetSimuScanMode
op_or
id|DisableCRT2Display
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
multiline_comment|/* LVDS/CHRONTEL (LCD/TV) and 301BDH (LCD) can only be slave in 8bpp modes */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
id|modeflag
op_and_assign
(paren
op_complement
id|CRT2Mode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SwitchCRT2
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
op_logical_and
(paren
id|checkcrt2mode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
id|SIS_RI_1600x1200
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_BridgeIsEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DisableCRT2Display
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|DriverMode
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
op_logical_and
(paren
id|checkcrt2mode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
id|SIS_RI_1600x1200
)paren
(brace
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_VBInfo
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
(brace
id|SiS_SetChrontelGPIO
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_VBInfo
)paren
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
macro_line|#ifdef LINUX_KERNEL
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;sisfb: (VBInfo= 0x%04x, SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VBInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsgVerb
c_func
(paren
l_int|0
comma
id|X_PROBED
comma
l_int|3
comma
l_string|&quot;(init301: VBInfo=0x%04x, SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VBInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           DETERMINE YPbPr MODE            */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_SetYPbPr
id|SiS_SetYPbPr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|temp
suffix:semicolon
multiline_comment|/* Note: This variable is only used on 30xLV systems.&n;   * CR38 has a different meaning on LVDS/CH7019 systems.&n;   * On 661 and later, these bits moved to CR35.&n;   *&n;   * On 301, 301B, only HiVision 1080i is supported.&n;   * On 30xLV, 301C, only YPbPr 1080i is supported.&n;   */
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
id|YPbPrHiVision
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV302LV
op_or
id|VB_SIS301C
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
(brace
r_switch
c_cond
(paren
(paren
id|temp
op_rshift
l_int|4
)paren
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
id|YPbPr525i
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
id|YPbPr525p
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
id|YPbPr750p
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|SiS_Pr-&gt;SiS_YPbPr
op_assign
id|YPbPrHiVision
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           DETERMINE TVMode flag           */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_SetTVMode
id|SiS_SetTVMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|temp
comma
id|temp1
comma
id|resinfo
op_assign
l_int|0
comma
id|romindex
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|OutputSelect
op_assign
op_star
id|SiS_Pr-&gt;pSiS_OutputSelect
suffix:semicolon
id|SiS_Pr-&gt;SiS_TVMode
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
l_int|0x35
suffix:semicolon
id|romindex
op_assign
l_int|0xfe
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
l_int|0x38
suffix:semicolon
id|romindex
op_assign
l_int|0xf3
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romindex
op_assign
l_int|0x11b
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp
)paren
(brace
r_if
c_cond
(paren
id|romindex
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
id|romindex
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|temp
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
)brace
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
r_if
c_cond
(paren
id|temp1
op_amp
id|EnablePALM
)paren
(brace
multiline_comment|/* 0x40 */
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALM
suffix:semicolon
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
id|TVSetPAL
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp1
op_amp
id|EnablePALN
)paren
(brace
multiline_comment|/* 0x80 */
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALN
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|temp1
op_amp
id|EnableNTSCJ
)paren
(brace
multiline_comment|/* 0x40 */
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetNTSCJ
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* Translate HiVision/YPbPr to our new flags */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_YPbPr
op_eq
id|YPbPr750p
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr750p
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_YPbPr
op_eq
id|YPbPr525p
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr525p
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_YPbPr
op_eq
id|YPbPrHiVision
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetHiVision
suffix:semicolon
)brace
r_else
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr525i
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr750p
op_or
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr525i
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_VBInfo
op_and_assign
op_complement
id|SetCRT2ToHiVision
suffix:semicolon
id|SiS_Pr-&gt;SiS_VBInfo
op_or_assign
id|SetCRT2ToYPbPr525750
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetHiVision
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPAL
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
id|TVOverScan
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
op_eq
l_int|1
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetCHOverScan
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x79
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x80
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
op_eq
l_int|1
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetCHOverScan
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetCHOverScan
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALM
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALM
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALN
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALN
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|temp
op_amp
id|EnableNTSCJ
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetNTSCJ
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 661 and later */
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x01
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPAL
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALN
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x04
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
id|TVSetPAL
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPALM
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetNTSCJ
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
)paren
(brace
r_if
c_cond
(paren
(paren
id|temp1
op_amp
l_int|0x10
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
op_eq
l_int|1
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetCHOverScan
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
id|temp1
op_and_assign
l_int|0xe0
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0x00
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr525i
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0x20
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr525p
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0x40
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetYPbPr750p
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
(paren
id|TVSetHiVision
op_or
id|TVSetPAL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToYPbPr525750
op_or
id|SetCRT2ToHiVision
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_800x480
op_logical_or
id|resinfo
op_eq
id|SIS_RI_1024x576
op_logical_or
id|resinfo
op_eq
id|SIS_RI_1280x720
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVAspect169
suffix:semicolon
)brace
r_else
(brace
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x02
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr750p
op_or
id|TVSetHiVision
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVAspect169
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVAspect43LB
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVAspect43
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
(paren
id|TVSetPALM
op_or
id|TVSetPALN
op_or
id|TVSetNTSCJ
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525i
op_or
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
(paren
id|TVSetPAL
op_or
id|TVSetNTSCJ
op_or
id|TVSetPALM
op_or
id|TVSetPALN
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetTVSimuMode
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
multiline_comment|/* BIOS sets TVNTSC1024 without checking 525p here. Wrong? */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetHiVision
op_or
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetNTSC1024
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVRPLLDIV2XO
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
id|TVRPLLDIV2XO
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
id|TVRPLLDIV2XO
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_and_assign
op_complement
id|TVRPLLDIV2XO
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_VBInfo
op_and_assign
op_complement
id|SetPALTV
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: TVMode %x, VBInfo %x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_TVMode
comma
id|SiS_Pr-&gt;SiS_VBInfo
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*               GET LCD INFO                */
multiline_comment|/*********************************************/
r_static
id|USHORT
DECL|function|SiS_GetBIOSLCDResInfo
id|SiS_GetBIOSLCDResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
suffix:semicolon
multiline_comment|/* Translate my LCDResInfo to BIOS value */
r_if
c_cond
(paren
id|temp
op_eq
id|Panel_1280x768_2
)paren
(brace
id|temp
op_assign
id|Panel_1280x768
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
id|Panel_1280x800_2
)paren
(brace
id|temp
op_assign
id|Panel_1280x800
suffix:semicolon
)brace
r_return
id|temp
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_GetLCDInfoBIOS
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS315H
id|UCHAR
op_star
id|ROMAddr
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Paneldata driver: [%d %d] [H %d %d] [V %d %d] [C %d 0x%02x 0x%02x]&bslash;n&quot;
comma
id|SiS_Pr-&gt;PanelHT
comma
id|SiS_Pr-&gt;PanelVT
comma
id|SiS_Pr-&gt;PanelHRS
comma
id|SiS_Pr-&gt;PanelHRE
comma
id|SiS_Pr-&gt;PanelVRS
comma
id|SiS_Pr-&gt;PanelVRE
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|CLOCK
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|Part4_A
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|Part4_B
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
(paren
id|ROMAddr
op_assign
id|GetLCDStructPtr661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|temp
op_assign
id|SISGETROMW
c_func
(paren
l_int|6
)paren
)paren
op_ne
id|SiS_Pr-&gt;PanelHT
)paren
(brace
id|SiS_Pr-&gt;SiS_NeedRomModeData
op_assign
id|TRUE
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
id|temp
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|temp
op_assign
id|SISGETROMW
c_func
(paren
l_int|8
)paren
)paren
op_ne
id|SiS_Pr-&gt;PanelVT
)paren
(brace
id|SiS_Pr-&gt;SiS_NeedRomModeData
op_assign
id|TRUE
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
id|temp
suffix:semicolon
)brace
id|SiS_Pr-&gt;PanelHRS
op_assign
id|SISGETROMW
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
id|SISGETROMW
c_func
(paren
l_int|12
)paren
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
id|SISGETROMW
c_func
(paren
l_int|14
)paren
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
id|SISGETROMW
c_func
(paren
l_int|16
)paren
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_CUSTOM_315
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|CLOCK
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|CLOCK
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|UCHAR
)paren
id|ROMAddr
(braket
l_int|18
)braket
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|SR2B
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|Part4_A
op_assign
id|ROMAddr
(braket
l_int|19
)braket
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|SR2C
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|VCLK_CUSTOM_315
)braket
dot
id|Part4_B
op_assign
id|ROMAddr
(braket
l_int|20
)braket
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Paneldata BIOS:  [%d %d] [H %d %d] [V %d %d] [C %d 0x%02x 0x%02x]&bslash;n&quot;
comma
id|SiS_Pr-&gt;PanelHT
comma
id|SiS_Pr-&gt;PanelVT
comma
id|SiS_Pr-&gt;PanelHRS
comma
id|SiS_Pr-&gt;PanelHRE
comma
id|SiS_Pr-&gt;PanelVRS
comma
id|SiS_Pr-&gt;PanelVRE
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|CLOCK
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|Part4_A
comma
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|SiS_Pr-&gt;PanelVCLKIdx315
)braket
dot
id|Part4_B
)paren
suffix:semicolon
macro_line|#endif
)brace
macro_line|#endif
)brace
r_static
r_void
DECL|function|SiS_CheckScaling
id|SiS_CheckScaling
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|resinfo
comma
r_const
id|UCHAR
op_star
id|nonscalingmodes
)paren
(brace
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|nonscalingmodes
(braket
id|i
)braket
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|nonscalingmodes
(braket
id|i
op_increment
)braket
op_eq
id|resinfo
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
op_minus
l_int|1
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_GetLCDResInfo
id|SiS_GetLCDResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS300
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
r_const
r_int
r_char
id|SiS300SeriesLCDRes
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|7
comma
l_int|4
comma
l_int|5
comma
l_int|8
comma
l_int|0
comma
l_int|0
comma
l_int|10
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|15
)brace
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
id|UCHAR
op_star
id|myptr
op_assign
l_int|NULL
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp
comma
id|modeflag
comma
id|resinfo
op_assign
l_int|0
comma
id|modexres
op_assign
l_int|0
comma
id|modeyres
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|panelcanscale
op_assign
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|999
suffix:semicolon
multiline_comment|/* HSync start */
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|999
suffix:semicolon
multiline_comment|/* HSync end */
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|999
suffix:semicolon
multiline_comment|/* VSync start */
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|999
suffix:semicolon
multiline_comment|/* VSync end */
id|SiS_Pr-&gt;SiS_NeedRomModeData
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|modexres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resinfo
)braket
dot
id|HTotal
suffix:semicolon
id|modeyres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resinfo
)braket
dot
id|VTotal
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
multiline_comment|/* For broken BIOSes: Assume 1024x768 */
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x7c
)paren
op_rshift
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
id|temp
op_rshift
l_int|4
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
(paren
id|temp
op_amp
l_int|0x0F
)paren
op_minus
l_int|1
suffix:semicolon
)brace
id|temp
op_and_assign
l_int|0x0f
suffix:semicolon
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* Very old BIOSes only know 7 sizes (NetVista 2179, 1.01g) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|temp
OL
l_int|0x0f
)paren
(brace
id|temp
op_and_assign
l_int|0x07
suffix:semicolon
)brace
)brace
multiline_comment|/* Translate 300 series LCDRes to 315 series for unified usage */
id|temp
op_assign
id|SiS300SeriesLCDRes
(braket
id|temp
)braket
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* Translate to our internal types */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
id|Panel310_640x480_2
)paren
(brace
id|temp
op_assign
id|Panel_640x480_2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
id|Panel310_640x480_3
)paren
(brace
id|temp
op_assign
id|Panel_640x480_3
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISLVDS
)paren
(brace
multiline_comment|/* SiS LVDS */
r_if
c_cond
(paren
id|temp
op_eq
id|Panel310_1280x768
)paren
(brace
id|temp
op_assign
id|Panel_1280x768_2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
id|Panel661_1280x800
)paren
(brace
id|temp
op_assign
id|Panel_1280x800_2
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|Panel_Barco1366
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|Panel_848x480
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
OL
id|SiS_Pr-&gt;SiS_PanelMin301
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_PanelMin301
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
OL
id|SiS_Pr-&gt;SiS_PanelMinLVDS
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_PanelMinLVDS
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDInfo
op_assign
id|temp
op_amp
op_complement
l_int|0x000e
suffix:semicolon
multiline_comment|/* Need temp below! */
multiline_comment|/* These can&squot;t scale no matter what */
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_1280x960
suffix:colon
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|DontExpandLCD
suffix:semicolon
)brace
id|panelcanscale
op_assign
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UsePanelScaler
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|DontExpandLCD
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
multiline_comment|/* Dual link, Pass 1:1 BIOS default, etc. */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDDualLink
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|myptr
op_assign
id|GetLCDStructPtr661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|myptr
(braket
l_int|2
)braket
op_amp
l_int|0x01
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDDualLink
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x01
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;PanelSelfDetected
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
(paren
id|LCDRGB18Bit
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDRGB18Bit
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDDualLink
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1024
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDDualLink
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1680x1050
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDDualLink
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/* Pass 1:1 */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
multiline_comment|/* Always center screen on LVDS (if scaling is disabled) */
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISLVDS
)paren
(brace
multiline_comment|/* Always center screen on SiS LVDS (if scaling is disabled) */
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* By default, pass 1:1 on SiS TMDS (if scaling is supported) */
r_if
c_cond
(paren
id|panelcanscale
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;CenterScreen
op_eq
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK65_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK108_2_315
suffix:semicolon
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_320x480
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|320
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|480
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|400
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|525
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK28
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK28
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_640x480_2
suffix:colon
r_case
id|Panel_640x480_3
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|640
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|480
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|24
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK28
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK28
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_640x480
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|640
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|480
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK28
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK28
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_800x600
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|800
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|600
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1056
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|628
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|40
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|128
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|4
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK40
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK40
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x600
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|600
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1344
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|800
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|24
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|136
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|2
multiline_comment|/* 88 */
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK65_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK65_315
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|768
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1344
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|806
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|24
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|136
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|23
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|5
suffix:semicolon
)brace
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK65_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK65_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1152x768
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1152
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|768
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1344
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|806
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|24
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|23
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|5
suffix:semicolon
)brace
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK65_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK65_315
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1152x864
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1152
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|864
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x720
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|720
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1650
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|750
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|110
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|40
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|5
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|5
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_1280x720
suffix:semicolon
multiline_comment|/* Data above for TMDS (projector); get from BIOS for LVDS */
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1408
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|806
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK81_300
suffix:semicolon
multiline_comment|/* ? */
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK81_315
suffix:semicolon
multiline_comment|/* ? */
)brace
r_else
(brace
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1688
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|802
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|48
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|112
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK81_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK81_315
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|Panel_1280x768_2
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|768
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1660
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|806
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|48
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|112
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_1280x768_2
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|800
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1408
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|816
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|21
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|24
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|4
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_1280x800_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800_2
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|800
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1552
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|812
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|48
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|112
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|4
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_1280x800_315_2
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x960
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|960
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1800
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1000
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK108_3_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK108_3_315
suffix:semicolon
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1280x1024
)paren
(brace
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK100_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK100_315
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1688
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1066
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|48
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|112
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK108_3_300
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK108_2_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1400
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|1050
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1688
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1066
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|48
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|112
suffix:semicolon
multiline_comment|/* HRE OK for LVDS, not for LCDA */
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK108_2_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1600
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|1200
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|2160
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1250
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|64
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|192
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK162_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1680x1050
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1680
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|1050
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1900
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1066
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|26
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|76
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|6
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK121_315
suffix:semicolon
id|SiS_GetLCDInfoBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_Barco1366
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1360
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1688
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|1066
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_848x480
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|848
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|480
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1088
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|525
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_Custom
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
id|SiS_Pr-&gt;CP_MaxX
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
id|SiS_Pr-&gt;CP_MaxY
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_PreferredIndex
op_ne
op_minus
l_int|1
)paren
(brace
id|SiS_Pr-&gt;PanelXRes
op_assign
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
id|SiS_Pr-&gt;CP_HTotal
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
id|SiS_Pr-&gt;CP_VTotal
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_assign
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_assign
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|SiS_Pr-&gt;CP_PreferredIndex
)braket
suffix:semicolon
id|SiS_Pr-&gt;PanelHRS
op_sub_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_sub_assign
id|SiS_Pr-&gt;PanelHRS
suffix:semicolon
id|SiS_Pr-&gt;PanelVRS
op_sub_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_sub_assign
id|SiS_Pr-&gt;PanelVRS
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_PrefClock
)paren
(brace
r_int
id|idx
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx315
op_assign
id|VCLK_CUSTOM_315
suffix:semicolon
id|SiS_Pr-&gt;PanelVCLKIdx300
op_assign
id|VCLK_CUSTOM_300
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|idx
op_assign
id|VCLK_CUSTOM_300
suffix:semicolon
)brace
r_else
id|idx
op_assign
id|VCLK_CUSTOM_315
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|idx
)braket
dot
id|CLOCK
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|idx
)braket
dot
id|CLOCK
op_assign
id|SiS_Pr-&gt;CP_PrefClock
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|idx
)braket
dot
id|SR2B
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|idx
)braket
dot
id|Part4_A
op_assign
id|SiS_Pr-&gt;CP_PrefSR2B
suffix:semicolon
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|idx
)braket
dot
id|SR2C
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|idx
)braket
dot
id|Part4_B
op_assign
id|SiS_Pr-&gt;CP_PrefSR2C
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|SiS_Pr-&gt;PanelXRes
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;PanelYRes
op_assign
l_int|768
suffix:semicolon
id|SiS_Pr-&gt;PanelHT
op_assign
l_int|1344
suffix:semicolon
id|SiS_Pr-&gt;PanelVT
op_assign
l_int|806
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* Special cases */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
)paren
(brace
id|SiS_Pr-&gt;PanelHRS
op_assign
l_int|999
suffix:semicolon
id|SiS_Pr-&gt;PanelHRE
op_assign
l_int|999
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
)paren
(brace
id|SiS_Pr-&gt;PanelVRS
op_assign
l_int|999
suffix:semicolon
id|SiS_Pr-&gt;PanelVRE
op_assign
l_int|999
suffix:semicolon
)brace
multiline_comment|/* DontExpand overrule */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|modeflag
op_amp
id|NoSupportLCDScale
)paren
)paren
(brace
multiline_comment|/* No scaling for this mode on any panel (LCD=CRT2)*/
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_Custom
suffix:colon
r_case
id|Panel_1152x864
suffix:colon
r_case
id|Panel_1280x768
suffix:colon
multiline_comment|/* TMDS only */
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_800x600
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1024x768
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x720
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelHT
op_eq
l_int|1650
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x768_2
suffix:colon
(brace
multiline_comment|/* LVDS only */
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|resinfo
)paren
(brace
r_case
id|SIS_RI_1280x720
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
op_minus
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x800
suffix:colon
(brace
multiline_comment|/* SiS TMDS special (Averatec 6200 series) */
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1280x720
comma
id|SIS_RI_1280x768
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x800_2
suffix:colon
(brace
multiline_comment|/* SiS LVDS */
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|resinfo
)paren
(brace
r_case
id|SIS_RI_1280x720
suffix:colon
r_case
id|SIS_RI_1280x768
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
op_minus
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x960
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1152x864
comma
id|SIS_RI_1280x720
comma
id|SIS_RI_1280x768
comma
id|SIS_RI_1280x800
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1280x1024
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1152x864
comma
id|SIS_RI_1280x720
comma
id|SIS_RI_1280x768
comma
id|SIS_RI_1280x800
comma
id|SIS_RI_1280x960
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1400x1050
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1152x864
comma
id|SIS_RI_1280x768
comma
id|SIS_RI_1280x800
comma
id|SIS_RI_1280x960
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|resinfo
)paren
(brace
r_case
id|SIS_RI_1280x720
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
op_minus
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SIS_RI_1280x1024
suffix:colon
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_case
id|Panel_1600x1200
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1152x864
comma
id|SIS_RI_1280x720
comma
id|SIS_RI_1280x768
comma
id|SIS_RI_1280x800
comma
id|SIS_RI_1280x960
comma
id|SIS_RI_1360x768
comma
id|SIS_RI_1360x1024
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|Panel_1680x1050
suffix:colon
(brace
r_static
r_const
id|UCHAR
id|nonscalingmodes
(braket
)braket
op_assign
(brace
id|SIS_RI_720x480
comma
id|SIS_RI_720x576
comma
id|SIS_RI_768x576
comma
id|SIS_RI_800x480
comma
id|SIS_RI_848x480
comma
id|SIS_RI_856x480
comma
id|SIS_RI_960x540
comma
id|SIS_RI_960x600
comma
id|SIS_RI_1024x576
comma
id|SIS_RI_1024x600
comma
id|SIS_RI_1152x768
comma
id|SIS_RI_1152x864
comma
id|SIS_RI_1280x960
comma
id|SIS_RI_1360x768
comma
id|SIS_RI_1360x1024
comma
l_int|0xff
)brace
suffix:semicolon
id|SiS_CheckScaling
c_func
(paren
id|SiS_Pr
comma
id|resinfo
comma
id|nonscalingmodes
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_assign
l_int|0x80
op_or
l_int|0x40
op_or
l_int|0x20
suffix:semicolon
multiline_comment|/* neg h/v sync, RGB24(D0 = 0) */
)brace
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x233
)braket
op_eq
l_int|0x12
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x234
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
(paren
op_complement
id|DontExpandLCD
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
op_logical_and
(paren
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
(paren
op_complement
id|DontExpandLCD
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/* Special cases */
r_if
c_cond
(paren
id|modexres
op_eq
id|SiS_Pr-&gt;PanelXRes
op_logical_and
id|modeyres
op_eq
id|SiS_Pr-&gt;PanelYRes
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
(paren
id|DontExpandLCD
op_or
id|LCDPass11
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800
suffix:colon
multiline_comment|/* Don&squot;t pass 1:1 by default (TMDS special) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;CenterScreen
op_eq
op_minus
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|Panel_1280x960
suffix:colon
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_Custom
suffix:colon
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;CP_PrefClock
)paren
op_logical_or
(paren
id|modexres
OG
id|SiS_Pr-&gt;PanelXRes
)paren
op_logical_or
(paren
id|modeyres
OG
id|SiS_Pr-&gt;PanelYRes
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
(paren
id|DontExpandLCD
op_or
id|LCDPass11
)paren
suffix:semicolon
)brace
multiline_comment|/* (In)validate LCDPass11 flag */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
)brace
multiline_comment|/* LVDS DDA */
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x600
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_800x600
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_400x300
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_512x384
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_400x300
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
multiline_comment|/* VESA timing */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|LCDVESATiming
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|LCDVESATiming
suffix:semicolon
)brace
macro_line|#ifdef LINUX_KERNEL
macro_line|#ifdef TWDEBUG
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;sisfb: (LCDInfo=0x%04x LCDResInfo=0x%02x LCDTypeInfo=0x%02x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDInfo
comma
id|SiS_Pr-&gt;SiS_LCDResInfo
comma
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsgVerb
c_func
(paren
l_int|0
comma
id|X_PROBED
comma
l_int|4
comma
l_string|&quot;(init301: LCDInfo=0x%04x LCDResInfo=0x%02x LCDTypeInfo=0x%02x SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDInfo
comma
id|SiS_Pr-&gt;SiS_LCDResInfo
comma
id|SiS_Pr-&gt;SiS_LCDTypeInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                 GET VCLK                  */
multiline_comment|/*********************************************/
id|USHORT
DECL|function|SiS_GetVCLK2Ptr
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|CRT2Index
comma
id|VCLKIndex
op_assign
l_int|0
comma
id|VCLKIndexGEN
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
comma
id|tempbx
suffix:semicolon
r_const
id|UCHAR
op_star
id|CHTVVCLKPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
id|VCLKIndexGEN
op_assign
(paren
id|SiS_GetRegByte
c_func
(paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|VCLKIndexGEN
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndexGEN
op_and_assign
l_int|0x3f
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
multiline_comment|/* 30x/B/LV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
id|CRT2Index
op_rshift_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*  LCD */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;PanelVCLKIdx300
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;PanelVCLKIdx315
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_switch
c_cond
(paren
id|resinfo
)paren
(brace
multiline_comment|/* Only those whose IndexGEN doesn&squot;t match VBVCLK array */
r_case
id|SIS_RI_1280x720
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_1280x720
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_720x480
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_720x480
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_720x576
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_720x576
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_768x576
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_768x576
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_848x480
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_848x480
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_856x480
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_856x480
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_800x480
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_800x480
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_1024x576
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_1024x576
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_1152x864
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_1152x864
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_RI_1360x768
suffix:colon
id|VCLKIndex
op_assign
id|VCLK_1360x768
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_le
id|SIS_315PRO
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
op_eq
l_int|1
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x42
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
op_eq
l_int|1
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_le
id|SIS_315PRO
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x41
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|1
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x43
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|4
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x44
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/*  TV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVRPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVVCLKDIV2
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|HiTVVCLK
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVSimuVCLK
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|HiTVTextVCLK
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|VCLKIndex
op_assign
id|YPbPr750pVCLK
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|VCLKIndex
op_assign
id|TVVCLKDIV2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVRPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|TVVCLKDIV2
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|TVVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_add_assign
id|TVCLKBASE_300
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_add_assign
id|TVCLKBASE_315
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* VGA2 */
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x14
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x34
suffix:semicolon
)brace
)brace
multiline_comment|/* Better VGA2 clock for 1280x1024@75 */
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x17
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x45
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* If not programming CRT2 */
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x1b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x48
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/*   LVDS  */
id|VCLKIndex
op_assign
id|CRT2Index
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x1f
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|tempbx
op_assign
l_int|8
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|tempbx
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_switch
c_cond
(paren
id|tempbx
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKSOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|VCLKIndex
op_assign
id|CHTVVCLKPtr
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;PanelVCLKIdx300
suffix:semicolon
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;PanelVCLKIdx315
suffix:semicolon
)brace
multiline_comment|/* Special Timing: Barco iQ Pro R series */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x44
suffix:semicolon
)brace
multiline_comment|/* Special Timing: 848x480 parallel lvds */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_assign
id|VCLK34_300
suffix:semicolon
multiline_comment|/* if(resinfo == SIS_RI_1360x768) VCLKIndex = ?; */
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|VCLK34_315
suffix:semicolon
multiline_comment|/* if(resinfo == SIS_RI_1360x768) VCLKIndex = ?; */
)brace
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x14
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x2e
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* if not programming CRT2 */
id|VCLKIndex
op_assign
id|VCLKIndexGEN
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x1b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x48
suffix:semicolon
)brace
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x0b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x40
suffix:semicolon
)brace
multiline_comment|/* 1024x768-70 */
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x0d
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x41
suffix:semicolon
)brace
multiline_comment|/* 1024x768-75 */
)brace
macro_line|#endif
)brace
)brace
)brace
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;VCLKIndex %d (0x%x)&bslash;n&quot;
comma
id|VCLKIndex
comma
id|VCLKIndex
)paren
suffix:semicolon
macro_line|#endif
r_return
id|VCLKIndex
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*        SET CRT2 MODE TYPE REGISTERS       */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT2ModeRegs
id|SiS_SetCRT2ModeRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|i
comma
id|j
comma
id|modeflag
suffix:semicolon
id|USHORT
id|tempcl
comma
id|tempah
op_assign
l_int|0
suffix:semicolon
macro_line|#if defined(SIS300) || defined(SIS315H)
id|USHORT
id|tempbl
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|tempah2
comma
id|tempbl2
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xAF
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0xF7
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|4
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|j
comma
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x7F
)paren
suffix:semicolon
)brace
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_ModeType
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300    /* ---- 300 series ---- */
multiline_comment|/* For 301BDH: (with LCD via LVDS) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
id|tempbl
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|tempbl
op_and_assign
l_int|0xef
suffix:semicolon
id|tempbl
op_or_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempbl
op_or_assign
l_int|0x10
suffix:semicolon
id|tempbl
op_and_assign
l_int|0xfd
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|tempbl
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_sub_assign
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
multiline_comment|/* tempcl is USHORT -&gt; always true! */
id|tempah
op_assign
(paren
(paren
l_int|0x10
op_rshift
id|tempcl
)paren
op_or
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
r_else
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_xor_assign
l_int|0xA0
suffix:semicolon
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* ------- 315/330 series ------ */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x08
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_sub_assign
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
multiline_comment|/* tempcl is USHORT -&gt; always true! */
id|tempah
op_assign
(paren
l_int|0x08
op_rshift
id|tempcl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_eq
l_int|0
)paren
id|tempah
op_assign
l_int|1
suffix:semicolon
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
r_else
id|tempah
op_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_xor_assign
l_int|0x50
suffix:semicolon
)brace
macro_line|#endif  /* SIS315H */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xa0
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xa0
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempah
op_xor_assign
l_int|0x05
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempah
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_rshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0xF8
comma
id|tempah
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeVGA
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelXRes
OL
l_int|1280
op_logical_and
id|SiS_Pr-&gt;PanelYRes
OL
l_int|960
)paren
(brace
id|tempah
op_and_assign
op_complement
l_int|0x80
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr750p
op_or
id|TVSetYPbPr525p
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0D
comma
l_int|0x40
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelXRes
OL
l_int|1280
op_logical_and
id|SiS_Pr-&gt;PanelYRes
OL
l_int|960
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVRPLLDIV2XO
)paren
(brace
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
multiline_comment|/* LVDS can only be slave in 8bpp modes */
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DriverMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xF0
comma
id|tempah
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS300
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
)brace
multiline_comment|/* LCDA */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
r_int
r_char
id|bridgerev
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
multiline_comment|/* The following is nearly unpreditable and varies from machine&n;&t; * to machine. Especially the 301DH seems to be a real trouble&n;&t; * maker. Some BIOSes simply set the registers (like in the&n;&t; * NoLCD-if-statements here), some set them according to the&n;&t; * LCDA stuff. It is very likely that some machines are not&n;&t; * treated correctly in the following, very case-orientated&n;&t; * code. What do I do then...?&n;&t; */
multiline_comment|/* 740 variants match for 30xB, 301B-DH, 30xLV */
r_if
c_cond
(paren
op_logical_neg
(paren
id|IS_SIS740
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* For all bridges */
id|tempbl
op_assign
l_int|0xfb
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
multiline_comment|/* The following two are responsible for eventually wrong colors&n;&t; * in TV output. The DH (VB_NoLCD) conditions are unknown; the&n;&t; * b0 was found in some 651 machine (Pim; P4_23=0xe5); the b1 version&n;&t; * in a 650 box (Jake). What is the criteria?&n;&t; */
r_if
c_cond
(paren
(paren
id|IS_SIS740
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x30
suffix:semicolon
id|tempbl
op_assign
l_int|0xc0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x5b
)braket
op_amp
l_int|0x04
)paren
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
id|tempbl
op_assign
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xcf
comma
id|tempah
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3f
comma
id|tempbl
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
multiline_comment|/* Fixes &quot;TV-blue-bug&quot; on 315+301 */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xcf
)paren
suffix:semicolon
multiline_comment|/* For 301   */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3f
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x30
)paren
suffix:semicolon
multiline_comment|/* For 30xLV */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0xc0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|bridgerev
op_eq
l_int|0xb0
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x30
)paren
suffix:semicolon
multiline_comment|/* For 30xB-DH rev b0 (or &quot;DH on 651&quot;?) */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0xc0
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x30
suffix:semicolon
id|tempah2
op_assign
l_int|0xc0
suffix:semicolon
multiline_comment|/* For 30xB (and 301BDH rev b1) */
id|tempbl
op_assign
l_int|0xcf
suffix:semicolon
id|tempbl2
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
id|tempah2
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbl
op_assign
id|tempbl2
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
id|tempbl2
comma
id|tempah2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x7f
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
id|tempbl
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS315H */
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
macro_line|#ifdef SIS300
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3f
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x7F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x80
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0D
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3A
comma
l_int|0xC0
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|tempah
op_assign
l_int|0x04
suffix:semicolon
id|tempbl
op_assign
l_int|0xfb
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x30
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x30
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            GET RESOLUTION DATA            */
multiline_comment|/*********************************************/
id|USHORT
DECL|function|SiS_GetResInfo
id|SiS_GetResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_return
(paren
id|USHORT
)paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
r_return
(paren
id|USHORT
)paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_GetCRT2ResInfo
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|xres
comma
id|yres
comma
id|modeflag
op_assign
l_int|0
comma
id|resindex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|xres
op_assign
id|SiS_Pr-&gt;CHDisplay
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|HalfDCLK
)paren
(brace
id|xres
op_mul_assign
l_int|2
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VGAHDE
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|xres
suffix:semicolon
id|yres
op_assign
id|SiS_Pr-&gt;CVDisplay
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|DoubleScanMode
)paren
(brace
id|yres
op_mul_assign
l_int|2
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VGAVDE
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|yres
suffix:semicolon
r_return
suffix:semicolon
)brace
id|resindex
op_assign
id|SiS_GetResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_Pr-&gt;SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
id|yres
op_assign
id|SiS_Pr-&gt;SiS_StResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
id|yres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
op_logical_and
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_ne
l_int|0x03
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x3a
)paren
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|xres
op_mul_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|yres
op_mul_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToHiVision
)paren
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_1024x768
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|357
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
(brace
id|yres
op_assign
l_int|420
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|480
)paren
(brace
id|yres
op_assign
l_int|525
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
multiline_comment|/* BIOS bug - does this regardless of scaling */
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
(brace
id|yres
op_assign
l_int|405
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|360
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|360
)paren
(brace
id|yres
op_assign
l_int|375
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1024
)paren
(brace
id|yres
op_assign
l_int|1056
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToHiVision
)paren
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
op_logical_or
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_VGAHDE
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|xres
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVDE
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|yres
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           GET CRT2 TIMING DATA            */
multiline_comment|/*********************************************/
r_static
id|BOOLEAN
DECL|function|SiS_GetLVDSCRT1Ptr
id|SiS_GetLVDSCRT1Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|ResIndex
comma
id|USHORT
op_star
id|DisplayType
)paren
(brace
id|USHORT
id|modeflag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
r_return
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
(paren
op_star
id|ResIndex
)paren
op_and_assign
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|18
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|99
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|18
suffix:semicolon
multiline_comment|/* PALM uses NTSC data */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|20
suffix:semicolon
multiline_comment|/* PALN uses PAL data  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|50
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_640x480_2
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|52
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_640x480_3
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|54
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_800x600
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x600
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|23
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1152x768
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|27
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|40
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|14
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|36
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_increment
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
r_case
id|Panel_640x480_2
suffix:colon
r_case
id|Panel_640x480_3
suffix:colon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|12
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_increment
suffix:semicolon
)brace
)brace
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel320x480
)paren
(brace
(paren
op_star
id|DisplayType
)paren
op_assign
l_int|22
suffix:semicolon
)brace
)brace
macro_line|#endif
r_return
id|TRUE
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_GetCRT2Ptr
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|tempal
op_assign
l_int|0
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
multiline_comment|/* LCD */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|32
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1680x1050
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1280x800
)paren
id|tempal
op_assign
l_int|9
suffix:semicolon
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1400x1050
)paren
(brace
id|tempal
op_assign
l_int|11
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x800
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x800_2
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1280x768
)paren
id|tempal
op_assign
l_int|9
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
multiline_comment|/* Pass 1:1 only (center-screen handled outside) */
multiline_comment|/* This is never called for the panel&squot;s native resolution */
multiline_comment|/* since Pass1:1 will not be set in this case */
id|tempbx
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_ge
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC_NS
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
id|tempbx
op_assign
l_int|200
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
)brace
r_else
(brace
multiline_comment|/* TV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
multiline_comment|/* if(SiS_Pr-&gt;SiS_VGAVDE &gt; 480) SiS_Pr-&gt;SiS_TVMode &amp;= (~TVSetTVSimuMode); */
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempbx
op_assign
l_int|13
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
(brace
id|tempbx
op_assign
l_int|14
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|tempbx
op_assign
l_int|7
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|tempbx
op_assign
l_int|6
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
)brace
id|tempal
op_and_assign
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoHiVision
)paren
(brace
r_if
c_cond
(paren
id|tempal
op_eq
l_int|6
)paren
(brace
id|tempal
op_assign
l_int|7
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_720x480
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_720x576
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_768x576
)paren
)paren
(brace
id|tempal
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetPAL
op_or
id|TVSetPALN
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_720x480
)paren
(brace
id|tempal
op_assign
l_int|9
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
id|tempal
op_assign
l_int|8
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_720x576
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_768x576
)paren
)paren
(brace
id|tempal
op_assign
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1280x720
)paren
(brace
id|tempal
op_assign
l_int|9
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* LVDS, 301B-DH (if running on LCD) */
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempbx
op_assign
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|tempbx
op_assign
l_int|99
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|tempbx
op_assign
l_int|90
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|tempbx
op_assign
l_int|92
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
id|tempbx
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_640x480_2
suffix:colon
r_case
id|Panel_640x480_3
suffix:colon
id|tempbx
op_assign
l_int|30
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_800x600
suffix:colon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x600
suffix:colon
id|tempbx
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
suffix:colon
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1152x768
suffix:colon
id|tempbx
op_assign
l_int|17
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768
suffix:colon
id|tempbx
op_assign
l_int|18
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
suffix:colon
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
id|tempbx
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
id|tempbx
op_assign
l_int|21
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_Barco1366
suffix:colon
id|tempbx
op_assign
l_int|80
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
r_case
id|Panel_640x480_2
suffix:colon
r_case
id|Panel_640x480_3
suffix:colon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|tempbx
op_assign
l_int|7
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
(brace
id|tempbx
op_assign
l_int|82
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
id|tempbx
op_assign
l_int|84
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_ne
id|CUT_BARCO1366
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_ne
id|CUT_PANEL848
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
id|tempal
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
(paren
op_star
id|CRT2Index
)paren
op_assign
id|tempbx
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_GetRAMDAC2DATA
id|SiS_GetRAMDAC2DATA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempax
op_assign
l_int|0
comma
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|temp1
op_assign
l_int|0
comma
id|modeflag
op_assign
l_int|0
comma
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|index
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|index
op_assign
id|SiS_GetModePtr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|index
)braket
dot
id|CRTC
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|index
)braket
dot
id|CRTC
(braket
l_int|6
)braket
suffix:semicolon
id|temp1
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|index
)braket
dot
id|CRTC
(braket
l_int|7
)braket
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|tempax
op_or_assign
(paren
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempax
op_and_assign
l_int|0x03FF
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|13
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x0100
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|2
suffix:semicolon
id|tempbx
op_or_assign
id|tempcx
suffix:semicolon
id|temp1
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x01
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x20
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0200
suffix:semicolon
)brace
id|tempax
op_add_assign
l_int|5
suffix:semicolon
multiline_comment|/* Charx8Dot is no more used (and assumed), so we set it */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|modeflag
op_or_assign
id|Charx8Dot
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|tempax
op_mul_assign
l_int|8
suffix:semicolon
)brace
r_else
id|tempax
op_mul_assign
l_int|9
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_increment
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;SiS_HT
op_assign
id|tempax
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;SiS_VT
op_assign
id|tempbx
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_GetCRT2DataLVDS
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LVDSDataStruct
op_star
id|LVDSData
op_assign
l_int|NULL
suffix:semicolon
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
l_int|50
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
OL
l_int|0x13
)paren
(brace
id|ResIndex
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|ResIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC_NS
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData
(braket
id|ResIndex
)braket
dot
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData
(braket
id|ResIndex
)braket
dot
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData
(braket
id|ResIndex
)braket
dot
id|LCDHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData
(braket
id|ResIndex
)braket
dot
id|LCDVT
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* This handles custom modes and custom panels */
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;PanelHT
op_minus
(paren
id|SiS_Pr-&gt;PanelXRes
op_minus
id|SiS_Pr-&gt;SiS_VGAHDE
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;PanelVT
op_minus
(paren
id|SiS_Pr-&gt;PanelYRes
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
suffix:semicolon
)brace
id|SiS_CalcLCDACRT1Timing
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
multiline_comment|/* 301BDH needs LVDS Data */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* 301BDH needs LVDS Data */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS800x600Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS800x600Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS640x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSXXXxXXXData_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVONTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS320x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS640x480Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|80
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSBARCO1366Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|81
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSBARCO1366Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|82
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSBARCO1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|83
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSBARCO1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|84
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS848x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|85
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS848x480Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|90
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALMData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|91
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALMData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|92
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALNData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|93
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALNData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|99
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVSOPALData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Super Overscan */
r_default
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
r_if
c_cond
(paren
id|ResIndex
OL
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1024
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_GetCRT2Data301
id|SiS_GetCRT2Data301
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|modeflag
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|resinfo
comma
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LCDDataStruct
op_star
id|LCDPtr
op_assign
l_int|NULL
suffix:semicolon
r_const
id|SiS_TVDataStruct
op_star
id|TVPtr
op_assign
l_int|NULL
suffix:semicolon
macro_line|#ifdef SIS315H
id|SHORT
id|resinfo661
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|resinfo
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
macro_line|#ifdef SIS315H
id|resinfo661
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ROMMODEIDX661
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
op_logical_and
(paren
id|resinfo661
op_ge
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_NeedRomModeData
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
op_assign
id|GetLCDStructPtr661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|romptr
op_assign
(paren
id|SISGETROMW
c_func
(paren
l_int|21
)paren
)paren
)paren
)paren
(brace
id|romptr
op_add_assign
(paren
id|resinfo661
op_star
l_int|10
)paren
suffix:semicolon
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
)brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
l_int|50
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0
suffix:semicolon
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
)brace
r_else
(brace
id|SiS_GetRAMDAC2DATA
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|2
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtHiTVData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_Ext525iData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_Ext525pData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_Ext750pData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St525iData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St525pData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St750pData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St1HiTVData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St2HiTVData
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StPALData
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVHDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVVDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHRS
suffix:semicolon
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|FlickerMode
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|HALFRVBHRS
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_1280x1024
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_1280x720
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
(brace
id|SiS_Pr-&gt;SiS_TVMode
op_or_assign
id|TVSetTVSimuMode
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|ExtHiTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|ExtHiTVVT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|StHiTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|StHiTVVT
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|StHiTextTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|StHiTextTVVT
suffix:semicolon
)brace
macro_line|#endif
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
l_int|1650
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
l_int|750
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSCHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|NTSCVT
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSCHT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSC2HT
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VT
op_assign
id|NTSCVT
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY1COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY2COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY3COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY4COE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0xf4
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0x10
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSCHT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSC2HT
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VT
op_assign
id|NTSCVT
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|PALHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|PALVT
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;CVTotal
suffix:semicolon
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
)brace
r_else
(brace
id|BOOLEAN
id|gotit
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
id|gotit
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
op_logical_and
(paren
id|romptr
)paren
op_logical_and
(paren
id|ROMAddr
)paren
)paren
(brace
macro_line|#ifdef SIS315H
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
l_int|2
)braket
op_or
(paren
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|3
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
l_int|4
)braket
op_or
(paren
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|3
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
l_int|5
)braket
op_or
(paren
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|6
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
l_int|7
)braket
op_or
(paren
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|6
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHT
)paren
(brace
id|gotit
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|LCDPass11
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
id|SiS_Pr-&gt;PanelHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|SiS_Pr-&gt;PanelVT
suffix:semicolon
id|gotit
op_assign
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
id|gotit
)paren
(brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
id|Panel_1024x768
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_St2LCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x720
suffix:colon
r_case
id|Panel_1280x720
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1280x720Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768_2
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1280x768_2Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768_2
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1280x768_2Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800
suffix:colon
r_case
id|Panel_1280x800
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1280x800Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800_2
suffix:colon
r_case
id|Panel_1280x800_2
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1280x800_2Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x960
suffix:colon
r_case
id|Panel_1280x960
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1280x960Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x1024
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_St2LCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1400x1050Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1400x1050Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1600x1200Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1600x1200Data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1680x1050
suffix:colon
r_case
id|Panel_1680x1050
op_plus
l_int|32
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1680x1050Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|100
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef SIS315H
r_case
l_int|200
suffix:colon
id|LCDPtr
op_assign
id|SiS310_ExtCompaq1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|201
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_St2LCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;GetCRT2Data: Index %d ResIndex %d&bslash;n&quot;
comma
id|CRT2Index
comma
id|ResIndex
)paren
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|560
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|640
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|357
)paren
id|tempbx
op_assign
l_int|527
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
id|tempbx
op_assign
l_int|620
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
id|tempbx
op_assign
l_int|775
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|600
)paren
(brace
id|tempbx
op_assign
l_int|775
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
(brace
id|tempbx
op_assign
l_int|560
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|640
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|700
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|1024
)paren
(brace
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|360
)paren
id|tempbx
op_assign
l_int|768
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|864
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|875
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|1000
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|tempax
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|tempbx
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_GetCRT2Data
id|SiS_GetCRT2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
multiline_comment|/* Need LVDS Data for LCD on 301B-DH */
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_GetCRT2Data301
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         GET LVDS DES (SKEW) DATA          */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_GetLVDSDesPtr
id|SiS_GetLVDSDesPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|PanelIndex
comma
id|USHORT
op_star
id|ResIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
(paren
op_star
id|ResIndex
)paren
op_and_assign
l_int|0x1F
suffix:semicolon
(paren
op_star
id|PanelIndex
)paren
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_assign
l_int|50
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
)paren
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_add_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Nothing special needed for SOverscan    */
multiline_comment|/* PALM uses NTSC data, PALN uses PAL data */
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
op_star
id|PanelIndex
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
multiline_comment|/* As long as we don&squot;s use the BIOS tables, we&n;&t; * need to convert the TypeInfo as for 315 series&n;&t; */
(paren
op_star
id|PanelIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_add_assign
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
(paren
op_star
id|PanelIndex
)paren
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_640x480
)paren
(brace
(paren
op_star
id|ResIndex
)paren
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
(paren
op_star
id|ResIndex
)paren
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_GetLVDSDesData
id|SiS_GetLVDSDesData
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
id|USHORT
id|PanelIndex
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LVDSDesStruct
op_star
id|PanelDesPtr
op_assign
l_int|NULL
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_Custom
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
multiline_comment|/* non-pass 1:1 only, see above */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ne
id|SiS_Pr-&gt;PanelXRes
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_minus
id|SiS_Pr-&gt;SiS_VGAHDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_ne
id|SiS_Pr-&gt;PanelYRes
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
id|SiS_Pr-&gt;SiS_VT
op_minus
(paren
(paren
id|SiS_Pr-&gt;PanelYRes
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
id|SiS_Pr-&gt;PanelYRes
)paren
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
)paren
(brace
r_case
id|CUT_UNIWILL1024
suffix:colon
r_case
id|CUT_UNIWILL10242
suffix:colon
r_case
id|CUT_CLEVO1400
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
id|SiS_Pr-&gt;PanelVT
op_minus
l_int|1
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_ne
id|CUT_COMPAQ1280
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
id|SiS_Pr-&gt;PanelVT
op_minus
l_int|1
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
)brace
r_else
(brace
id|SiS_GetLVDSDesPtr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|PanelIndex
comma
op_amp
id|ResIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|PanelIndex
)paren
(brace
r_case
l_int|0
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType00_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* ---  */
r_case
l_int|1
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType01_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType02_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType03_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType04_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType05_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType06_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType07_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType08_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType09_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0a_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0b_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0c_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0d_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0e_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0f_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType00_2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* --- */
r_case
l_int|17
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType01_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType02_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType03_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType04_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType05_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType06_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|23
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType07_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType08_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType09_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0a_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0b_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0c_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0d_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0e_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|31
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0f_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelTypeNS_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* pass 1:1 */
r_case
l_int|33
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelTypeNS_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|50
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVUNTSCDesData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* TV */
r_case
l_int|51
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVONTSCDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|52
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|53
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALDesData
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHDES
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVDES
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|632
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ge
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|320
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|480
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|804
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|704
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|320
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|632
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|542
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           DISABLE VIDEO BRIDGE            */
multiline_comment|/*********************************************/
multiline_comment|/* NEVER use any variables (VBInfo), this will be called&n; * from outside the context of modeswitch!&n; * MUST call getVBType before calling this&n; */
r_void
DECL|function|SiS_DisableBridge
id|SiS_DisableBridge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|tempah
comma
id|pushax
op_assign
l_int|0
comma
id|modenum
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* ===== For 30xB/LV ===== */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300&t;   /* 300 series */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
)brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0x3f
)paren
suffix:semicolon
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H&t;   /* 315 series */
id|BOOLEAN
id|custom1
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1400
)paren
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|modenum
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
)paren
op_amp
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
macro_line|#ifdef SET_EMI
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_ne
id|CUT_CLEVO1400
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
(paren
id|modenum
op_le
l_int|0x13
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|custom1
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|custom1
)paren
(brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0xff00
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0xe000
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
)brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_340
)paren
(brace
id|tempah
op_assign
l_int|0xef
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xf7
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
op_complement
l_int|0x10
)paren
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xbf
suffix:semicolon
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
(paren
id|modenum
op_le
l_int|0x13
)paren
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
(paren
id|modenum
op_le
l_int|0x13
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xdf
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|custom1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAorLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|20
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|4
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif /* SIS315H */
)brace
)brace
r_else
(brace
multiline_comment|/* ============ For 301 ================ */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable VB */
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable lock mode */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
macro_line|#ifdef SIS300
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable CRT2 */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* ============ For LVDS =============*/
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300&t;/* 300 series */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x090E
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
op_amp
l_int|0x1c
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H&t;/* 315 series */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_340
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
op_complement
l_int|0x18
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|1
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0066
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Chrontel701xOff
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0149
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xdf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xbf
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xef
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
multiline_comment|/* SiS_SetRegAND(SiS_Pr-&gt;SiS_Part1Port,0x13,0xff); */
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
)brace
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* DirectDVD PAL?*/
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
multiline_comment|/* VB clock / 4 ? */
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 315 series */
)brace
multiline_comment|/* LVDS */
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            ENABLE VIDEO BRIDGE            */
multiline_comment|/*********************************************/
multiline_comment|/* NEVER use any variables (VBInfo), this will be called&n; * from outside the context of a mode switch!&n; * MUST call getVBType before calling this&n; */
r_void
DECL|function|SiS_EnableBridge
id|SiS_EnableBridge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
op_assign
l_int|0
comma
id|tempah
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|temp1
comma
id|pushax
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|delaylong
op_assign
id|FALSE
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* ====== For 301B et al  ====== */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300     /* 300 series */
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV302LV
op_or
id|VB_NoLCD
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* Enable CRT2 */
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xBF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* lock mode */
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable VB processor */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* 315 series */
macro_line|#ifdef SET_EMI
id|UCHAR
id|r30
op_assign
l_int|0
comma
id|r31
op_assign
l_int|0
comma
id|r32
op_assign
l_int|0
comma
id|r33
op_assign
l_int|0
comma
id|cr36
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* USHORT  emidelay=0; */
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0xef
)paren
suffix:semicolon
macro_line|#ifdef SET_EMI
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_340
)paren
(brace
id|tempah
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LCDAEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_TVEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x18
suffix:semicolon
)brace
r_else
id|tempah
op_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsVAorLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x4500
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
id|delaylong
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_LCDAEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1f
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0xc0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_ne
id|CUT_CLEVO1400
)paren
(brace
macro_line|#ifdef SET_EMI
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x500
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x0c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
macro_line|#ifdef SET_EMI
id|cr36
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
op_assign
id|GetLCDStructPtr661_2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* Reset */
id|SiS_Pr-&gt;EMI_30
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;EMI_31
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_EMIOffset
op_plus
l_int|0
)braket
suffix:semicolon
id|SiS_Pr-&gt;EMI_32
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_EMIOffset
op_plus
l_int|1
)braket
suffix:semicolon
id|SiS_Pr-&gt;EMI_33
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_EMIOffset
op_plus
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;EMI_30
op_assign
l_int|0x40
suffix:semicolon
)brace
multiline_comment|/* emidelay = SISGETROMW((romptr + 0x22)); */
id|SiS_Pr-&gt;HaveEMI
op_assign
id|SiS_Pr-&gt;HaveEMILCD
op_assign
id|SiS_Pr-&gt;OverruleEMI
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
multiline_comment|/*                                              (P4_30|0x40)  */
multiline_comment|/* Compal 1400x1050: 0x05, 0x60, 0x00                YES  (1.10.7w;  CR36=69)      */
multiline_comment|/* Compal 1400x1050: 0x0d, 0x70, 0x40                YES  (1.10.7x;  CR36=69)      */
multiline_comment|/* Acer   1280x1024: 0x12, 0xd0, 0x6b                NO   (1.10.9k;  CR36=73)      */
multiline_comment|/* Compaq 1280x1024: 0x0d, 0x70, 0x6b                YES  (1.12.04b; CR36=03)      */
multiline_comment|/* Clevo   1024x768: 0x05, 0x60, 0x33                NO   (1.10.8e;  CR36=12, DL!) */
multiline_comment|/* Clevo   1024x768: 0x0d, 0x70, 0x40 (if type == 3) YES  (1.10.8y;  CR36=?2)      */
multiline_comment|/* Clevo   1024x768: 0x05, 0x60, 0x33 (if type != 3) YES  (1.10.8y;  CR36=?2)      */
multiline_comment|/* Asus    1024x768: ?                                ?   (1.10.8o;  CR36=?2)      */
multiline_comment|/* Asus    1024x768: 0x08, 0x10, 0x3c (problematic)  YES  (1.10.8q;  CR36=22)      */
r_if
c_cond
(paren
id|SiS_Pr-&gt;HaveEMI
)paren
(brace
id|r30
op_assign
id|SiS_Pr-&gt;EMI_30
suffix:semicolon
id|r31
op_assign
id|SiS_Pr-&gt;EMI_31
suffix:semicolon
id|r32
op_assign
id|SiS_Pr-&gt;EMI_32
suffix:semicolon
id|r33
op_assign
id|SiS_Pr-&gt;EMI_33
suffix:semicolon
)brace
r_else
(brace
id|r30
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* EMI_30 is read at driver start; however, the BIOS sets this&n;&t;&t;   * (if it is used) only if the LCD is in use. In case we caught&n;&t;&t;   * the machine while on TV output, this bit is not set and we&n;&t;&t;   * don&squot;t know if it should be set - hence our detection is wrong.&n;&t;&t;   * Work-around this here:&n;&t;&t;   */
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMI
)paren
op_logical_or
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMILCD
)paren
)paren
(brace
r_switch
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x0f
)paren
)paren
(brace
r_case
l_int|2
suffix:colon
id|r30
op_or_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1024
)paren
(brace
id|r30
op_and_assign
op_complement
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMI
)paren
(brace
id|r31
op_assign
l_int|0x05
suffix:semicolon
id|r32
op_assign
l_int|0x60
suffix:semicolon
id|r33
op_assign
l_int|0x33
suffix:semicolon
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x30
)paren
(brace
id|r31
op_assign
l_int|0x0d
suffix:semicolon
id|r32
op_assign
l_int|0x70
suffix:semicolon
id|r33
op_assign
l_int|0x40
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* 1280x1024 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
(brace
id|r30
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMI
)paren
(brace
id|r31
op_assign
l_int|0x12
suffix:semicolon
id|r32
op_assign
l_int|0xd0
suffix:semicolon
id|r33
op_assign
l_int|0x6b
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
(brace
id|r31
op_assign
l_int|0x0d
suffix:semicolon
id|r32
op_assign
l_int|0x70
suffix:semicolon
id|r33
op_assign
l_int|0x6b
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
multiline_comment|/* 1400x1050 */
id|r30
op_or_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMI
)paren
(brace
id|r31
op_assign
l_int|0x05
suffix:semicolon
id|r32
op_assign
l_int|0x60
suffix:semicolon
id|r33
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAL1400_2
)paren
(brace
id|r31
op_assign
l_int|0x0d
suffix:semicolon
id|r32
op_assign
l_int|0x70
suffix:semicolon
id|r33
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* BIOS values */
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
multiline_comment|/* 1600x1200 - unknown */
id|r30
op_or_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;HaveEMI
)paren
(brace
id|r31
op_assign
l_int|0x05
suffix:semicolon
id|r32
op_assign
l_int|0x60
suffix:semicolon
id|r33
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* BIOS values don&squot;t work so well sometimes */
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;OverruleEMI
)paren
(brace
macro_line|#ifdef COMPAL_HACK
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAL1400_2
)paren
(brace
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x09
)paren
(brace
id|r30
op_assign
l_int|0x60
suffix:semicolon
id|r31
op_assign
l_int|0x05
suffix:semicolon
id|r32
op_assign
l_int|0x60
suffix:semicolon
id|r33
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef COMPAQ_HACK
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
(brace
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x03
)paren
(brace
id|r30
op_assign
l_int|0x20
suffix:semicolon
id|r31
op_assign
l_int|0x12
suffix:semicolon
id|r32
op_assign
l_int|0xd0
suffix:semicolon
id|r33
op_assign
l_int|0x6b
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef ASUS_HACK
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSA2H_2
)paren
(brace
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x02
)paren
(brace
multiline_comment|/* r30 = 0x60; r31 = 0x05; r32 = 0x60; r33 = 0x33;  */
multiline_comment|/* rev 2 */
multiline_comment|/* r30 = 0x20; r31 = 0x05; r32 = 0x60; r33 = 0x33;  */
multiline_comment|/* rev 3 */
multiline_comment|/* r30 = 0x60; r31 = 0x0d; r32 = 0x70; r33 = 0x40;  */
multiline_comment|/* rev 4 */
multiline_comment|/* r30 = 0x20; r31 = 0x0d; r32 = 0x70; r33 = 0x40;  */
multiline_comment|/* rev 5 */
)brace
)brace
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;OverruleEMI
op_logical_and
(paren
op_logical_neg
id|r30
)paren
op_logical_and
(paren
op_logical_neg
id|r31
)paren
op_logical_and
(paren
op_logical_neg
id|r32
)paren
op_logical_and
(paren
op_logical_neg
id|r33
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* Reset */
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x500
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x31
comma
id|r31
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x32
comma
id|r32
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x33
comma
id|r33
)paren
suffix:semicolon
macro_line|#endif&t;/* SET_EMI */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
macro_line|#ifdef SET_EMI
r_if
c_cond
(paren
(paren
id|SiS_LCDAEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|r30
op_amp
l_int|0x40
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|delaylong
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|5
)paren
suffix:semicolon
id|delaylong
op_assign
id|FALSE
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSA2H_2
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x500
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x40
)paren
suffix:semicolon
multiline_comment|/* Enable */
)brace
)brace
macro_line|#endif
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAorLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|delaylong
)paren
(brace
id|SiS_PanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x500
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS315H */
)brace
)brace
r_else
(brace
multiline_comment|/* ============  For 301 ================ */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* lock mode */
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* BVBDOENABLE=1 */
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable VB processor */
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* =================== For LVDS ================== */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300    /* 300 series */
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xBF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlavemode
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0B0E
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* 315 series */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_340
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
l_int|0x18
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFB
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x20
suffix:semicolon
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_550
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
)brace
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|temp
)paren
(brace
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_740
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_Chrontel701xOn
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_ChrontelDoSomething1
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
op_logical_or
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelInitTVVSync
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_PanelDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 310 series */
)brace
multiline_comment|/* LVDS */
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET PART 1 REGISTER GROUP         */
multiline_comment|/*********************************************/
multiline_comment|/* Set CRT2 OFFSET / PITCH */
r_static
r_void
DECL|function|SiS_SetCRT2Offset
id|SiS_SetCRT2Offset
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RRTI
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|offset
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_return
suffix:semicolon
)brace
id|offset
op_assign
id|SiS_GetOffset
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RRTI
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
)paren
(brace
id|offset
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
(paren
id|offset
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
(paren
id|offset
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
(paren
(paren
id|offset
op_rshift
l_int|3
)paren
op_amp
l_int|0xFF
)paren
op_plus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|offset
op_mod
l_int|8
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/* Set CRT2 sync and PanelLink mode */
r_static
r_void
DECL|function|SiS_SetCRT2Sync
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempah
op_assign
l_int|0
comma
id|tempbl
comma
id|infoflag
suffix:semicolon
id|tempbl
op_assign
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
)brace
r_else
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
)brace
r_else
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0xf0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x30
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|tempah
op_and_assign
l_int|0x18
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xE7
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Don&squot;t care about 12/18/24 bit mode - TV is via VGA, not PL */
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
l_int|0xe0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300  /* ---- 300 series --- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* 630 - 301B(-DH) */
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempbl
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
id|tempbl
op_assign
(paren
id|tempah
op_rshift
l_int|6
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
)brace
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|tempah
op_or_assign
l_int|0xc0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xf0
comma
id|tempbl
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 630 - 301 */
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* ------- 315 series ------ */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* 315 - LVDS */
id|tempbl
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_COMPAQ1280
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
)paren
(brace
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
id|tempbl
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1400
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
)paren
(brace
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempbl
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|tempbl
op_assign
(paren
id|tempah
op_rshift
l_int|6
)paren
op_amp
l_int|0x03
suffix:semicolon
id|tempbl
op_or_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempbl
op_or_assign
l_int|0x04
suffix:semicolon
)brace
)brace
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempah
op_or_assign
l_int|0xc0
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xf0
comma
id|tempbl
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 315 - TMDS */
id|tempah
op_assign
id|tempbl
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbl
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempah
op_assign
id|SiS_GetRegByte
c_func
(paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
id|tempbl
op_assign
(paren
id|tempah
op_rshift
l_int|6
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
multiline_comment|/* Imitate BIOS bug */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_or_assign
l_int|0xc0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|tempah
op_and_assign
l_int|0x18
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xe7
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xf0
comma
id|tempbl
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
)brace
)brace
multiline_comment|/* Set CRT2 FIFO on 300/630/730 */
macro_line|#ifdef SIS300
r_static
r_void
DECL|function|SiS_SetCRT2FIFO_300
id|SiS_SetCRT2FIFO_300
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|temp
comma
id|index
suffix:semicolon
id|USHORT
id|modeidindex
comma
id|refreshratetableindex
suffix:semicolon
id|USHORT
id|VCLK
op_assign
l_int|0
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
comma
id|data2
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|tempal
comma
id|tempah
comma
id|tempbx
comma
id|tempcl
comma
id|tempax
suffix:semicolon
id|USHORT
id|CRT1ModeNo
comma
id|CRT2ModeNo
suffix:semicolon
id|USHORT
id|SelectRate_backup
suffix:semicolon
id|ULONG
id|data
comma
id|eax
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
(brace
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|87
comma
l_int|85
comma
l_int|78
comma
l_int|76
comma
l_int|54
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|79
comma
l_int|77
comma
l_int|70
comma
l_int|68
comma
l_int|48
comma
multiline_comment|/*; 128 bit    BQ=1   */
l_int|80
comma
l_int|72
comma
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|70
comma
l_int|68
comma
l_int|61
comma
l_int|59
comma
l_int|37
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|86
comma
l_int|77
comma
l_int|75
comma
l_int|68
comma
l_int|66
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|68
comma
l_int|66
comma
l_int|59
comma
l_int|57
comma
l_int|37
multiline_comment|/*; 128 bit    BQ=1   */
)brace
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor730
(braket
)braket
op_assign
(brace
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|103
comma
l_int|96
comma
l_int|94
comma
l_int|120
comma
l_int|113
comma
l_int|111
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* &lt;-- last entry, data below */
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* to avoid using illegal values */
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThLowB
(braket
)braket
op_assign
(brace
l_int|81
comma
l_int|4
comma
l_int|72
comma
l_int|6
comma
l_int|88
comma
l_int|8
comma
l_int|120
comma
l_int|12
comma
l_int|55
comma
l_int|4
comma
l_int|54
comma
l_int|6
comma
l_int|66
comma
l_int|8
comma
l_int|90
comma
l_int|12
comma
l_int|42
comma
l_int|4
comma
l_int|45
comma
l_int|6
comma
l_int|55
comma
l_int|8
comma
l_int|75
comma
l_int|12
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThTiming
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
id|SelectRate_backup
op_assign
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;CRT1UsesCustomMode
)paren
(brace
id|CRT1ModeNo
op_assign
id|SiS_Pr-&gt;SiS_CRT1Mode
suffix:semicolon
multiline_comment|/* get CRT1 ModeNo */
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|CRT1ModeNo
comma
op_amp
id|modeidindex
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
id|refreshratetableindex
op_assign
id|SiS_GetRatePtr
c_func
(paren
id|SiS_Pr
comma
id|CRT1ModeNo
comma
id|modeidindex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|CRT1ModeNo
op_ge
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|refreshratetableindex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK */
id|colorth
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|CRT1ModeNo
comma
id|modeidindex
)paren
suffix:semicolon
multiline_comment|/* Get colordepth */
id|colorth
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|colorth
)paren
(brace
id|colorth
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|CRT1ModeNo
op_assign
l_int|0xfe
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock_CRT1
suffix:semicolon
multiline_comment|/* Get VCLK */
id|data2
op_assign
(paren
id|SiS_Pr-&gt;CModeFlag_CRT1
op_amp
id|ModeTypeMask
)paren
op_minus
l_int|2
suffix:semicolon
r_switch
c_cond
(paren
id|data2
)paren
(brace
multiline_comment|/* Get color depth */
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|CRT1ModeNo
op_ge
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|index
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
)brace
id|index
op_and_assign
l_int|0x07
suffix:semicolon
id|MCLK
op_assign
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK */
id|data2
op_assign
(paren
id|colorth
op_star
id|VCLK
)paren
op_div
id|MCLK
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|6
)paren
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|2
suffix:semicolon
id|temp
op_and_assign
l_int|0xff
suffix:semicolon
id|data2
op_assign
id|temp
op_minus
id|data2
suffix:semicolon
r_if
c_cond
(paren
(paren
l_int|28
op_star
l_int|16
)paren
op_mod
id|data2
)paren
(brace
id|data2
op_assign
(paren
l_int|28
op_star
l_int|16
)paren
op_div
id|data2
suffix:semicolon
id|data2
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
(paren
l_int|28
op_star
l_int|16
)paren
op_div
id|data2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0x62
suffix:semicolon
id|tempah
op_rshift_assign
l_int|1
suffix:semicolon
id|tempal
op_assign
id|tempah
suffix:semicolon
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|tempal
op_or_assign
id|tempah
suffix:semicolon
id|tempal
op_and_assign
l_int|0x07
suffix:semicolon
id|tempcl
op_assign
id|ThTiming
(braket
id|tempal
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|6
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|tempah
op_rshift_assign
l_int|4
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0c
suffix:semicolon
id|tempbx
op_or_assign
id|tempah
suffix:semicolon
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempal
op_assign
id|ThLowB
(braket
id|tempbx
op_plus
l_int|1
)braket
suffix:semicolon
id|tempal
op_mul_assign
id|tempcl
suffix:semicolon
id|tempal
op_add_assign
id|ThLowB
(braket
id|tempbx
)braket
suffix:semicolon
id|data
op_assign
id|tempal
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
macro_line|#endif
id|tempal
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempal
op_and_assign
l_int|0x06
suffix:semicolon
id|tempal
op_lshift_assign
l_int|5
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|28
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x0F
suffix:semicolon
id|tempal
op_or_assign
id|temp
suffix:semicolon
id|tempbx
op_assign
id|tempal
suffix:semicolon
multiline_comment|/* BIOS BUG (2.04.5d, 2.04.6a use ah here, which is unset!) */
id|tempbx
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* -- do it like the BIOS anyway... */
id|tempax
op_assign
id|tempbx
suffix:semicolon
id|tempbx
op_and_assign
l_int|0xc0
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|6
suffix:semicolon
id|tempax
op_and_assign
l_int|0x0f
suffix:semicolon
id|tempax
op_mul_assign
l_int|3
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
id|data
op_assign
id|LatencyFactor730
(braket
id|tempbx
)braket
suffix:semicolon
id|data
op_add_assign
l_int|15
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|data
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x0080
)paren
(brace
id|index
op_add_assign
l_int|12
suffix:semicolon
)brace
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/* We use pci functions X offers. We use tag 0, because&n;        * we want to read/write to the host bridge (which is always&n;        * 00:00.0 on 630, 730 and 540), not the VGA device.&n;        */
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
id|index
op_add_assign
l_int|24
suffix:semicolon
)brace
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
id|index
op_add_assign
l_int|6
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0F
)paren
op_rshift
l_int|1
suffix:semicolon
id|index
op_add_assign
id|temp
suffix:semicolon
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
id|data
op_add_assign
l_int|15
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|data
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
id|data
op_add_assign
id|data2
suffix:semicolon
multiline_comment|/* CRT1 Request Period */
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
id|SelectRate_backup
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|CRT2ModeNo
comma
op_amp
id|modeidindex
)paren
suffix:semicolon
id|refreshratetableindex
op_assign
id|SiS_GetRatePtr
c_func
(paren
id|SiS_Pr
comma
id|CRT2ModeNo
comma
id|modeidindex
comma
id|HwInfo
)paren
suffix:semicolon
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|CRT2ModeNo
comma
id|modeidindex
comma
id|refreshratetableindex
comma
id|HwInfo
)paren
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x01
)paren
(brace
id|VCLK
op_assign
id|ROMAddr
(braket
l_int|0x229
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x22a
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|CRT2ModeNo
op_assign
l_int|0xfe
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
multiline_comment|/* Get VCLK */
)brace
id|colorth
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|CRT2ModeNo
comma
id|modeidindex
)paren
suffix:semicolon
multiline_comment|/* Get colordepth */
id|colorth
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|colorth
)paren
(brace
id|colorth
op_increment
suffix:semicolon
)brace
id|data
op_assign
id|data
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
r_if
c_cond
(paren
id|data
op_mod
(paren
id|MCLK
op_lshift
l_int|4
)paren
)paren
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
id|data
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_le
l_int|6
)paren
(brace
id|data
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
OG
l_int|0x14
)paren
(brace
id|data
op_assign
l_int|0x14
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|data
op_le
l_int|0x0f
)paren
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x13
suffix:semicolon
)brace
r_else
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x13
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
multiline_comment|/* 630s or 730(s?) */
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x1b
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x16
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0xe0
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
multiline_comment|/* 630s, NOT 730 */
(brace
r_if
c_cond
(paren
id|data
OG
l_int|0x13
)paren
(brace
id|data
op_assign
l_int|0x13
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xe0
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* If mode &lt;= 0x13, we just restore everything */
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
id|SelectRate_backup
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* Set CRT2 FIFO on 315/330 series */
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|SiS_SetCRT2FIFO_310
id|SiS_SetCRT2FIFO_310
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x3B
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_760
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SysFlags
op_amp
id|SF_760LFB
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|Mode32Bpp
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1280
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_ge
l_int|1024
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2f
comma
l_int|0x03
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x3b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4d
comma
l_int|0xc0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2f
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4d
comma
l_int|0xc0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x6e
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
op_complement
l_int|0x3f
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_static
id|USHORT
DECL|function|SiS_GetVGAHT2
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|ULONG
id|tempax
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_star
id|SiS_Pr-&gt;SiS_RVBHCMAX
suffix:semicolon
id|tempax
op_assign
(paren
id|SiS_Pr-&gt;SiS_VT
op_minus
id|SiS_Pr-&gt;SiS_VDE
)paren
op_star
id|SiS_Pr-&gt;SiS_RVBHCFACT
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_star
id|SiS_Pr-&gt;SiS_HT
)paren
op_div
id|tempbx
suffix:semicolon
r_return
(paren
id|USHORT
)paren
id|tempax
suffix:semicolon
)brace
multiline_comment|/* Set Part 1 / SiS bridge slave mode */
r_static
r_void
DECL|function|SiS_SetGroup1_301
id|SiS_SetGroup1_301
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|push1
comma
id|push2
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|USHORT
id|resinfo
comma
id|modeflag
comma
id|xres
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|p1_7
comma
id|p1_8
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|resinfo
op_assign
l_int|0
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;CHDisplay
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|XRes
suffix:semicolon
)brace
multiline_comment|/* The following is only done if bridge is in slave mode: */
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_and
(paren
id|ModeNo
OG
l_int|0x13
)paren
)paren
(brace
r_if
c_cond
(paren
id|xres
op_ge
l_int|1600
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
l_int|0xff
)paren
suffix:semicolon
multiline_comment|/* set MAX HT */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|modeflag
op_or_assign
id|Charx8Dot
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|tempcx
op_assign
l_int|0x08
suffix:semicolon
)brace
r_else
id|tempcx
op_assign
l_int|0x09
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
multiline_comment|/* 0x04 Horizontal Display End */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|1
)paren
op_amp
l_int|0xff
suffix:semicolon
id|tempbx
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
id|tempax
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_800x600
)paren
(brace
id|temp
op_sub_assign
l_int|2
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x05
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x05 Horizontal Display Start */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x06
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x06 Horizontal Blank end     */
id|tempax
op_assign
l_int|0xFFFF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempax
op_ge
id|SiS_Pr-&gt;SiS_VGAHT
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|5
suffix:semicolon
id|tempcx
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|temp
op_assign
id|tempcx
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_sub_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|temp
op_sub_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|temp
op_sub_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|tempcx
op_assign
(paren
id|tempcx
op_plus
id|tempbx
)paren
op_rshift
l_int|1
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_decrement
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|temp
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_sub_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|800
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_sub_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x960
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1600x1200
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_sub_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|1024
)paren
(brace
id|temp
op_add_assign
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x1024
)paren
(brace
id|temp
op_add_assign
l_int|7
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1400x1050
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|temp
op_add_assign
l_int|28
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
id|p1_7
op_assign
id|temp
suffix:semicolon
id|p1_8
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x01
)paren
(brace
id|p1_7
op_assign
l_int|0x2a
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|p1_8
op_assign
l_int|0x61
suffix:semicolon
)brace
r_else
id|p1_8
op_assign
l_int|0x41
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeText
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|p1_7
op_assign
l_int|0x54
suffix:semicolon
)brace
r_else
id|p1_7
op_assign
l_int|0x55
suffix:semicolon
id|p1_8
op_assign
l_int|0x00
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|p1_7
op_assign
l_int|0x30
suffix:semicolon
id|p1_8
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
id|p1_7
op_assign
l_int|0x2f
suffix:semicolon
id|p1_8
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
r_else
(brace
id|p1_7
op_assign
l_int|0x5b
suffix:semicolon
id|p1_8
op_assign
l_int|0x03
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
(paren
id|ModeNo
op_eq
l_int|0x50
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x56
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x53
)paren
)paren
)paren
op_logical_or
(paren
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|resinfo
op_eq
id|SIS_RI_320x200
op_logical_or
id|resinfo
op_eq
id|SIS_RI_320x240
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|p1_7
op_assign
l_int|0x30
comma
id|p1_8
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
id|p1_7
op_assign
l_int|0x2f
suffix:semicolon
id|p1_8
op_assign
l_int|0x03
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
id|p1_7
op_assign
l_int|0x63
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|p1_7
op_assign
l_int|0x55
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|p1_7
op_assign
l_int|0xb2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|p1_7
op_assign
l_int|0xab
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|p1_7
op_assign
l_int|0x30
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
id|p1_7
)paren
suffix:semicolon
multiline_comment|/* 0x07 Horizontal Retrace Start */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
id|p1_8
)paren
suffix:semicolon
multiline_comment|/* 0x08 Horizontal Retrace End   */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x18 SR08 (FIFO Threshold?)   */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0xFF
)paren
suffix:semicolon
multiline_comment|/* 0x09 Set Max VT    */
id|tempcx
op_assign
l_int|0x121
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
multiline_comment|/* 0x0E Vertical Display End */
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|357
)paren
id|tempbx
op_assign
l_int|350
suffix:semicolon
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|400
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|420
)paren
(brace
id|tempbx
op_assign
l_int|400
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|525
)paren
(brace
id|tempbx
op_assign
l_int|480
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|350
)paren
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
r_else
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|480
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x10 vertical Blank Start */
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
macro_line|#if 0
multiline_comment|/* Missing code from 630/301B 2.04.5a and 650/302LV 1.10.6s (calles int 2f) */
r_if
c_cond
(paren
id|xxx
c_func
(paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|0xdf
)paren
(brace
id|temp
op_assign
l_int|0xda
suffix:semicolon
)brace
)brace
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
l_int|0x5F
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x000a
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
id|tempcx
op_or_assign
l_int|0x1200
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0002
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0600
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0040
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x11
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x11 Vertical Blank End */
id|tempax
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|tempbx
)paren
op_rshift
l_int|2
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
OG
l_int|0x13
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
id|SIS_RI_1280x1024
)paren
(brace
id|tempbx
op_add_assign
(paren
id|tempax
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1400x1050
)paren
(brace
id|tempbx
op_add_assign
(paren
id|tempax
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempbx
op_sub_assign
l_int|10
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempbx
op_add_assign
l_int|40
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|800
)paren
(brace
id|tempbx
op_add_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_increment
suffix:semicolon
id|tempax
op_add_assign
id|tempbx
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_le
l_int|513
)paren
(brace
r_if
c_cond
(paren
id|tempax
op_ge
l_int|513
)paren
(brace
id|tempbx
op_assign
l_int|513
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0C Vertical Retrace Start */
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0008
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|tempbx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0004
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0800
suffix:semicolon
)brace
r_else
id|tempcx
op_or_assign
l_int|0x0C00
suffix:semicolon
)brace
id|tempbx
op_assign
id|push1
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x000F
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0D vertical Retrace End */
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0010
)paren
(brace
id|tempcx
op_or_assign
l_int|0x2000
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0A CR07 */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x17 SR0A */
id|tempax
op_assign
id|modeflag
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_rshift
l_int|1
)paren
op_amp
l_int|0x09
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
)brace
multiline_comment|/* Always 8 dotclock */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x16 SR01 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0F
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x0F CR14 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x12 CR17 */
id|temp
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x1A SR0E */
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/* Setup panel link&n; * This is used for LVDS, LCDA and Chrontel TV output&n; * 300/LVDS+TV, 300/301B-DH, 315/LVDS+TV, 315/LCDA&n; */
r_static
r_void
DECL|function|SiS_SetGroup1_LVDS
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|USHORT
id|push2
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|ULONG
id|tempeax
op_assign
l_int|0
comma
id|tempebx
comma
id|tempecx
comma
id|tempvcfact
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|islvds
op_assign
id|FALSE
comma
id|issis
op_assign
id|FALSE
comma
id|chkdclkfirst
op_assign
id|FALSE
suffix:semicolon
macro_line|#ifdef SIS300
id|USHORT
id|crt2crtc
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
id|USHORT
id|pushcx
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
macro_line|#ifdef SIS300
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|resinfo
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS300
id|crt2crtc
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
macro_line|#ifdef SIS300
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/* is lvds if really LVDS, or 301B-DH with external LVDS transmitter */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
id|islvds
op_assign
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* is really sis if sis bridge, but not 301B-DH */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
id|issis
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|islvds
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
)paren
(brace
id|chkdclkfirst
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS330
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
r_if
c_cond
(paren
id|islvds
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
comma
l_int|0x04
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|islvds
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
comma
l_int|0x04
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x0f
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/* Horizontal */
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_LCDHDES
suffix:semicolon
r_if
c_cond
(paren
id|islvds
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempax
op_sub_assign
l_int|8
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x0007
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLHDESKEW[2:0]   */
id|temp
op_assign
(paren
id|tempax
op_rshift
l_int|3
)paren
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLHDESKEW[10:3]  */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
)brace
)brace
id|tempax
op_add_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|SiS_Pr-&gt;SiS_HT
)paren
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
)brace
id|temp
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x07
)paren
(brace
id|temp
op_add_assign
l_int|8
suffix:semicolon
)brace
id|temp
op_rshift_assign
l_int|3
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLHDEE  */
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_HT
op_minus
id|tempbx
)paren
op_rshift
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelHRS
op_ne
l_int|999
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;PanelHRS
suffix:semicolon
)brace
)brace
)brace
id|tempcx
op_add_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_ge
id|SiS_Pr-&gt;SiS_HT
)paren
(brace
id|tempcx
op_sub_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempcx
op_rshift
l_int|3
)paren
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_switch
c_cond
(paren
id|ModeNo
)paren
(brace
r_case
l_int|0x04
suffix:colon
r_case
l_int|0x05
suffix:colon
r_case
l_int|0x0d
suffix:colon
id|temp
op_assign
l_int|0x56
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|temp
op_assign
l_int|0x60
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x13
suffix:colon
id|temp
op_assign
l_int|0x5f
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x40
suffix:colon
r_case
l_int|0x41
suffix:colon
r_case
l_int|0x4f
suffix:colon
r_case
l_int|0x43
suffix:colon
r_case
l_int|0x44
suffix:colon
r_case
l_int|0x62
suffix:colon
r_case
l_int|0x56
suffix:colon
r_case
l_int|0x53
suffix:colon
r_case
l_int|0x5d
suffix:colon
r_case
l_int|0x5e
suffix:colon
id|temp
op_assign
l_int|0x54
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLHRS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|temp
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelHRE
op_ne
l_int|999
)paren
(brace
id|temp
op_assign
id|tempcx
op_plus
id|SiS_Pr-&gt;PanelHRE
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ge
id|SiS_Pr-&gt;SiS_HT
)paren
(brace
id|temp
op_sub_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
)brace
id|temp
op_rshift_assign
l_int|3
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_add_assign
l_int|10
suffix:semicolon
)brace
id|temp
op_and_assign
l_int|0x1F
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0x07
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
multiline_comment|/* WRONG? BIOS loads cl, not ah */
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLHRE */
multiline_comment|/* Vertical */
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
op_plus
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_Pr-&gt;SiS_VT
)paren
(brace
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|islvds
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelVRS
op_ne
l_int|999
)paren
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;PanelVRS
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|issis
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|issis
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_Pr-&gt;SiS_VT
)paren
(brace
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
)brace
multiline_comment|/* BPLVRS  */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
(brace
id|temp
op_assign
l_int|0xa9
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|3
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelVRE
op_ne
l_int|999
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;PanelVRE
suffix:semicolon
)brace
)brace
)brace
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x000F
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLVRE  */
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
op_lshift
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_logical_or
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HDE
op_ne
l_int|640
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
id|tempbx
op_assign
l_int|0x87
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
id|tempbx
op_assign
l_int|0x07
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x03
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
multiline_comment|/* Chrontel 701x operates in 24bit mode (8-8-8, 2x12bit mutliplexed) via VGA2 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
op_amp
l_int|0x10
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|tempbx
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* BPLVDEE */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
suffix:semicolon
multiline_comment|/* BPLVDES */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_640x480
suffix:colon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_minus
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_800x600
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_800x600
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|Panel_1024x600
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x600
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_800x600
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
id|Panel_1024x768
suffix:colon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* if(SiS_Pr-&gt;SiS_IF_DEF_FSTN) tempbx++;  */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1C
comma
id|tempbx
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1B
comma
id|tempcx
)paren
suffix:semicolon
multiline_comment|/* Vertical scaling */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300      /* 300 series */
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|6
suffix:semicolon
id|temp
op_assign
(paren
id|tempeax
op_mod
(paren
id|ULONG
)paren
id|SiS_Pr-&gt;SiS_VDE
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
(paren
id|ULONG
)paren
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempeax
op_assign
l_int|0x3F
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* BPLVCFACT */
id|tempvcfact
op_assign
id|temp
suffix:semicolon
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* 315 series */
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|18
suffix:semicolon
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
id|temp
op_assign
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempvcfact
op_assign
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempeax
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempeax
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VDE
op_eq
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3c
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempeax
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3b
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempeax
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3a
comma
l_int|0x3f
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VDE
op_ne
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
(brace
id|temp
op_or_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0xf3
comma
id|temp
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
multiline_comment|/* Horizontal scaling */
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
multiline_comment|/* 1f = ( (VGAHDE * 65536) / ( (VGAHDE * 65536) / HDE ) ) - 1*/
r_if
c_cond
(paren
id|chkdclkfirst
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempeax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempebx
op_assign
id|tempeax
op_lshift
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HDE
op_eq
id|tempeax
)paren
(brace
id|tempecx
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
r_else
(brace
id|tempecx
op_assign
id|tempebx
op_div
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempebx
op_mod
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempecx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempeax
op_assign
(paren
id|tempebx
op_div
id|tempecx
)paren
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_lshift
l_int|16
)paren
op_div
id|tempecx
)paren
op_minus
l_int|1
suffix:semicolon
)brace
id|tempecx
op_assign
(paren
id|tempecx
op_lshift
l_int|16
)paren
op_or
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempeax
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|18
)paren
op_div
id|tempvcfact
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|6
suffix:semicolon
id|tempbx
op_assign
id|tempvcfact
op_amp
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0
)paren
(brace
id|tempbx
op_assign
l_int|64
suffix:semicolon
)brace
id|tempeax
op_div_assign
id|tempbx
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|tempbx
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_640x480
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
id|tempecx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x21
comma
id|tempbx
)paren
suffix:semicolon
id|tempecx
op_rshift_assign
l_int|16
suffix:semicolon
multiline_comment|/* BPLHCFACT  */
r_if
c_cond
(paren
op_logical_neg
id|chkdclkfirst
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
(paren
id|islvds
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|islvds
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x23
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
)paren
(brace
r_int
id|i
suffix:semicolon
id|UCHAR
id|TrumpMode13
(braket
l_int|4
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x10
comma
l_int|0x2c
comma
l_int|0x00
)brace
suffix:semicolon
id|UCHAR
id|TrumpMode10_1
(braket
l_int|4
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x10
comma
l_int|0x27
comma
l_int|0x00
)brace
suffix:semicolon
id|UCHAR
id|TrumpMode10_2
(braket
l_int|4
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x16
comma
l_int|0x10
comma
l_int|0x00
)brace
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xbf
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetTrumpionBlock
c_func
(paren
id|SiS_Pr
comma
op_amp
id|SiS300_TrumpionData
(braket
id|crt2crtc
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetTrumpionBlock
c_func
(paren
id|SiS_Pr
comma
op_amp
id|TrumpMode13
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetTrumpionBlock
c_func
(paren
id|SiS_Pr
comma
op_amp
id|TrumpMode10_1
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetTrumpionBlock
c_func
(paren
id|SiS_Pr
comma
op_amp
id|TrumpMode10_2
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_logical_or
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x25
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x26
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x27
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x28
comma
l_int|0x87
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x29
comma
l_int|0x5A
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2A
comma
l_int|0x4B
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x07
comma
l_int|0x03
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
multiline_comment|/* Blps = lcdhdee(lcdhdes+HDE) + 64 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
op_logical_or
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_add_assign
l_int|64
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x38
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
op_complement
l_int|0x078
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_add_assign
l_int|32
suffix:semicolon
multiline_comment|/* Blpe=lBlps+32 */
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x39
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3A
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* Bflml=0 */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x007
comma
l_int|0x00
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
op_logical_or
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x038
comma
id|temp
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
op_logical_or
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
(brace
id|tempeax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempeax
op_lshift_assign
l_int|2
suffix:semicolon
multiline_comment|/* BDxFIFOSTOP = (HDE*4)/128 */
id|tempebx
op_assign
l_int|128
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x003F
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x45
comma
op_complement
l_int|0x0FF
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3F
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* BDxWadrst0 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3E
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3D
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x040
comma
l_int|0x00
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
op_logical_or
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_rshift_assign
l_int|4
suffix:semicolon
multiline_comment|/* BDxWadroff = HDE*4/8/8 */
id|pushcx
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x43
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x0F8
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
multiline_comment|/* BDxWadrst1 = BDxWadrst0 + BDxWadroff * VDE */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_2
op_logical_or
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480_3
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempeax
op_assign
(paren
id|tempax
op_star
id|pushcx
)paren
suffix:semicolon
id|tempebx
op_assign
l_int|0x00100000
op_plus
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
id|tempebx
op_amp
l_int|0x000000FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x42
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x41
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF0000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x40
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempebx
op_amp
l_int|0x01000000
)paren
op_rshift
l_int|24
)paren
op_lshift
l_int|7
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x080
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x03
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
l_int|0x50
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x04
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2b
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
l_int|0x0c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x36
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x37
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x38
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x39
comma
l_int|0xA0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3a
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3b
comma
l_int|0xf0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3c
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3d
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3e
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3f
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x40
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x41
comma
l_int|0x25
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x42
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x43
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x44
comma
l_int|0x03
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x45
comma
l_int|0x0a
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* Set Part 1 */
r_static
r_void
DECL|function|SiS_SetGroup1
id|SiS_SetGroup1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
macro_line|#if defined(SIS300) || defined(SIS315H)
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp
op_assign
l_int|0
comma
id|tempax
op_assign
l_int|0
comma
id|tempbx
op_assign
l_int|0
comma
id|tempcx
op_assign
l_int|0
comma
id|bridgeadd
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|pushbx
op_assign
l_int|0
comma
id|CRT1Index
op_assign
l_int|0
comma
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|tempbl
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|CRT1Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|SiS_SetCRT2Offset
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|SiS_SetCRT2FIFO_300
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
id|SiS_SetCRT2FIFO_310
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/* 1. Horizontal setup */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300   /* ------------- 300 series --------------*/
id|temp
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Total */
id|temp
op_assign
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0x0f
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Total Overflow [7:4] */
id|temp
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Display Enable End */
id|pushbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
op_plus
l_int|12
suffix:semicolon
multiline_comment|/* bx  BTVGA2HRS 0x0B,0x0C */
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
id|SiS_Pr-&gt;SiS_VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
id|tempbx
op_assign
id|pushbx
op_plus
id|tempcx
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|bridgeadd
op_assign
l_int|12
suffix:semicolon
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* ------------------- 315/330 series --------------- */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
op_rshift
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
id|SiS_Pr-&gt;SiS_HDE
op_plus
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
id|tempax
suffix:semicolon
)brace
)brace
)brace
id|tempcx
op_decrement
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
id|tempcx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Total */
id|temp
op_assign
(paren
id|tempcx
op_rshift
l_int|4
)paren
op_amp
l_int|0xF0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Total Overflow [7:4] */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Display Enable End */
id|pushbx
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|bridgeadd
op_assign
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1280x1024
)paren
(brace
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xff00
)paren
op_or
l_int|0x30
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1600x1200
)paren
(brace
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xff00
)paren
op_or
l_int|0xff
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 315/330 series */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;CHSyncStart
op_plus
id|bridgeadd
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;CHSyncEnd
op_plus
id|bridgeadd
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OG
id|tempax
)paren
(brace
id|tempcx
op_assign
id|tempax
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
r_int
r_char
id|cr4
comma
id|cr14
comma
id|cr5
comma
id|cr15
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|cr4
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|4
)braket
suffix:semicolon
id|cr14
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|14
)braket
suffix:semicolon
id|cr5
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|5
)braket
suffix:semicolon
id|cr15
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|15
)braket
suffix:semicolon
)brace
r_else
(brace
id|cr4
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|cr14
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|cr5
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|cr15
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
)brace
id|tempbx
op_assign
(paren
(paren
id|cr4
op_or
(paren
(paren
id|cr14
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
)paren
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* (VGAHRS-3)*8 */
id|tempcx
op_assign
(paren
(paren
(paren
id|cr5
op_amp
l_int|0x1f
)paren
op_or
(paren
(paren
id|cr15
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|5
op_minus
l_int|2
)paren
)paren
)paren
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* (VGAHRE-3)*8 */
id|tempcx
op_and_assign
l_int|0x00FF
suffix:semicolon
id|tempcx
op_or_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|tempbx
op_add_assign
id|bridgeadd
suffix:semicolon
id|tempcx
op_add_assign
id|bridgeadd
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OG
id|tempax
)paren
(brace
id|tempcx
op_assign
id|tempax
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1044
suffix:semicolon
multiline_comment|/* HWCursor bug! */
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Retrace Start */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0D
comma
id|tempcx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Horizontal Retrace End */
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x0F
)paren
op_or
(paren
(paren
id|pushbx
op_rshift
l_int|4
)paren
op_amp
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Overflow */
multiline_comment|/* 2. Vertical setup */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToAVIDEO
)paren
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Vertical Total */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0F
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Vertical Display Enable End */
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|5
)paren
op_amp
l_int|0x38
)paren
op_or
(paren
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x12
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Overflow */
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
id|tempax
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OL
l_int|4
)paren
(brace
id|tempcx
op_assign
l_int|4
suffix:semicolon
)brace
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_plus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/*  BTVGA2VRS     0x10,0x11   */
id|tempcx
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_rshift
l_int|4
)paren
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
multiline_comment|/*  BTVGA2VRE     0x11        */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;CVSyncStart
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;CVSyncEnd
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
r_int
r_char
id|cr8
comma
id|cr7
comma
id|cr13
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|cr8
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|8
)braket
suffix:semicolon
id|cr7
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|7
)braket
suffix:semicolon
id|cr13
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|13
)braket
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|9
)braket
suffix:semicolon
)brace
r_else
(brace
id|cr8
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|8
)braket
suffix:semicolon
id|cr7
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
id|cr13
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|9
)braket
suffix:semicolon
)brace
id|tempbx
op_assign
id|cr8
suffix:semicolon
r_if
c_cond
(paren
id|cr7
op_amp
l_int|0x04
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|cr7
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0200
suffix:semicolon
)brace
r_if
c_cond
(paren
id|cr13
op_amp
l_int|0x08
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0400
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* CRT2 Vertical Retrace Start */
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0x70
)paren
op_or
(paren
id|tempcx
op_amp
l_int|0x0F
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* CRT2 Vert. Retrace End; Overflow */
multiline_comment|/* 3. Panel delay compensation */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300  /* ---------- 300 series -------------- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|temp
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x960
)paren
(brace
id|temp
op_assign
l_int|0x24
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_Custom
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x80
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoYPbPrHiVision
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x221
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x222
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x223
)braket
suffix:semicolon
)brace
r_else
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x224
)braket
suffix:semicolon
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PDC
op_ne
op_minus
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_Pr-&gt;PDC
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480
)paren
(brace
id|temp
op_assign
l_int|0x04
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x80
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PDC
op_ne
op_minus
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_Pr-&gt;PDC
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Panel Link Delay Compensation; (Software Command Reset; Power Saving) */
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H   /* --------------- 315/330 series ---------------*/
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
l_int|0x0a
suffix:semicolon
)brace
id|tempbl
op_assign
l_int|0xF0
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_650
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0x0F
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
op_logical_or
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0x08
suffix:semicolon
id|tempbl
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x13c
)braket
op_amp
l_int|0x80
)paren
(brace
id|tempbl
op_assign
l_int|0xf0
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
id|tempbl
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Panel Link Delay Compensation */
)brace
)brace
multiline_comment|/* &lt; 661 */
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempax
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_or_assign
l_int|0x40
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2C
comma
l_int|0x3f
comma
id|tempax
)paren
suffix:semicolon
macro_line|#endif  /* SIS315H */
)brace
)brace
multiline_comment|/* Slavemode */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
multiline_comment|/* For 301BDH with LCD, we set up the Panel Link */
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_SetGroup1_301
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET PART 2 REGISTER GROUP         */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS315H
r_static
id|UCHAR
op_star
DECL|function|SiS_GetGroup2CLVXPtr
id|SiS_GetGroup2CLVXPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|tabletype
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_const
id|UCHAR
op_star
id|tableptr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|a
comma
id|b
comma
id|p
op_assign
l_int|0
suffix:semicolon
id|a
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|b
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|tabletype
)paren
(brace
id|a
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|b
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a
OL
id|b
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|a
op_eq
id|b
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_2
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_4
suffix:semicolon
)brace
r_else
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525i
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_3
suffix:semicolon
)brace
r_else
id|tableptr
op_assign
id|SiS_Part2CLVX_5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tableptr
op_assign
id|SiS_Part2CLVX_6
suffix:semicolon
)brace
r_do
(brace
r_if
c_cond
(paren
(paren
id|tableptr
(braket
id|p
)braket
op_or
id|tableptr
(braket
id|p
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
op_eq
id|a
)paren
(brace
r_break
suffix:semicolon
)brace
id|p
op_add_assign
l_int|0x42
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|tableptr
(braket
id|p
)braket
op_or
id|tableptr
(braket
id|p
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
op_ne
l_int|0xffff
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|tableptr
(braket
id|p
)braket
op_or
id|tableptr
(braket
id|p
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
op_eq
l_int|0xffff
)paren
(brace
id|p
op_sub_assign
l_int|0x42
suffix:semicolon
)brace
)brace
id|p
op_add_assign
l_int|2
suffix:semicolon
r_return
(paren
id|UCHAR
op_star
)paren
op_amp
id|tableptr
(braket
id|p
)braket
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetGroup2_C_ELV
id|SiS_SetGroup2_C_ELV
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|tableptr
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302ELV
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|tableptr
op_assign
id|SiS_GetGroup2CLVXPtr
c_func
(paren
id|SiS_Pr
comma
l_int|0
comma
id|HwInfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x80
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0xbf
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|tableptr
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tableptr
op_assign
id|SiS_GetGroup2CLVXPtr
c_func
(paren
id|SiS_Pr
comma
l_int|1
comma
id|HwInfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0xc0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0xff
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|tableptr
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4e
comma
l_int|0xeb
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|SiS_GetCRT2Part2Ptr
id|SiS_GetCRT2Part2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(paren
op_star
id|ResIndex
)paren
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
(paren
op_star
id|ResIndex
)paren
op_and_assign
l_int|0x3f
suffix:semicolon
(paren
op_star
id|CRT2Index
)paren
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
(paren
op_star
id|CRT2Index
)paren
op_assign
l_int|200
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSA2H_2
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
(paren
op_star
id|CRT2Index
)paren
op_assign
l_int|206
suffix:semicolon
)brace
)brace
)brace
r_return
(paren
(paren
op_star
id|CRT2Index
)paren
op_ne
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_static
r_void
DECL|function|SiS_Group2LCDSpecial
id|SiS_Group2LCDSpecial
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|crt2crtc
)paren
(brace
id|USHORT
id|tempcx
suffix:semicolon
r_const
id|UCHAR
id|atable
(braket
)braket
op_assign
(brace
l_int|0xc3
comma
l_int|0x9e
comma
l_int|0xc3
comma
l_int|0x9e
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0xab
comma
l_int|0x87
comma
l_int|0xab
comma
l_int|0x9e
comma
l_int|0xe7
comma
l_int|0x02
comma
l_int|0x02
)brace
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
OG
l_int|2
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xB9
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
l_int|0xCC
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xA6
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|crt2crtc
op_amp
l_int|0x3F
)paren
op_eq
l_int|4
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x2B
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xE5
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xE2
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|0x0c
)paren
(brace
id|crt2crtc
op_and_assign
l_int|0x1f
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempcx
op_add_assign
l_int|7
suffix:semicolon
)brace
)brace
id|tempcx
op_add_assign
id|crt2crtc
suffix:semicolon
r_if
c_cond
(paren
id|crt2crtc
op_ge
l_int|4
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xff
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|crt2crtc
op_eq
l_int|4
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x28
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x18
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|atable
(braket
id|tempcx
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* For ECS A907. Highly preliminary. */
r_static
r_void
DECL|function|SiS_Set300Part2Regs
id|SiS_Set300Part2Regs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|crt2crtc
comma
id|resindex
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
r_const
id|SiS_Part2PortTblStruct
op_star
id|CRT2Part2Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|resindex
op_assign
id|crt2crtc
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
)brace
r_else
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_2
suffix:semicolon
multiline_comment|/* The BIOS code (1.16.51,56) is obviously a fragment! */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
id|resindex
op_assign
l_int|4
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
comma
id|j
op_assign
l_int|0x04
suffix:semicolon
id|j
op_le
l_int|0x06
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1c
suffix:semicolon
id|j
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1f
suffix:semicolon
id|j
op_le
l_int|0x21
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0f
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|11
)braket
)paren
suffix:semicolon
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiS_SetTVSpecial
id|SiS_SetTVSpecial
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoHiVision
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
r_const
id|UCHAR
id|specialtv
(braket
)braket
op_assign
(brace
l_int|0xa7
comma
l_int|0x07
comma
l_int|0xf2
comma
l_int|0x6e
comma
l_int|0x17
comma
l_int|0x8b
comma
l_int|0x73
comma
l_int|0x53
comma
l_int|0x13
comma
l_int|0x40
comma
l_int|0x34
comma
l_int|0xf4
comma
l_int|0x63
comma
l_int|0xbb
comma
l_int|0xcc
comma
l_int|0x7a
comma
l_int|0x58
comma
l_int|0xe4
comma
l_int|0x73
comma
l_int|0xda
comma
l_int|0x13
)brace
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x1c
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x30
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|specialtv
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
l_int|0x72
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x1b
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* 15 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x1a
)paren
suffix:semicolon
multiline_comment|/* 1b */
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x64
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x52
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x58
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x5c
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x1b
)paren
suffix:semicolon
multiline_comment|/* 21 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x54
)paren
suffix:semicolon
multiline_comment|/* 5a */
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x1a
)paren
suffix:semicolon
multiline_comment|/* 21 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x53
)paren
suffix:semicolon
multiline_comment|/* 5a */
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_SetGroup2_Tail
id|SiS_SetGroup2_Tail
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
id|temp
op_assign
l_int|0xc3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
l_int|0xb3
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
id|temp
op_assign
l_int|0x4d
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Not always for LV, see SetGrp2 */
)brace
id|temp
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|temp
op_assign
l_int|3
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0b
comma
id|temp
)paren
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* 651+301C, for 1280x768 - do I really need that? */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_PanelXRes
op_eq
l_int|1280
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_PanelYRes
op_eq
l_int|768
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_HDE
op_eq
l_int|640
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VDE
op_eq
l_int|480
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_HDE
op_eq
l_int|320
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VDE
op_eq
l_int|240
)paren
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x2b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xe5
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x05
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xe2
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x1c
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x1d
comma
l_int|0x45
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x1f
comma
l_int|0x0b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x21
comma
l_int|0xa9
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x23
comma
l_int|0x0b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
)brace
)brace
r_static
r_void
DECL|function|SiS_SetGroup2
id|SiS_SetGroup2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|i
comma
id|j
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|tempch
comma
id|tempcl
comma
id|temp
suffix:semicolon
id|USHORT
id|push2
comma
id|modeflag
comma
id|crt2crtc
comma
id|bridgeoffset
suffix:semicolon
id|ULONG
id|longtemp
suffix:semicolon
r_const
id|UCHAR
op_star
id|PhasePoint
suffix:semicolon
r_const
id|UCHAR
op_star
id|TimingPoint
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|resindex
comma
id|CRT2Index
suffix:semicolon
r_const
id|SiS_Part2PortTblStruct
op_star
id|CRT2Part2Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_return
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|crt2crtc
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToAVIDEO
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSVIDEO
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|temp
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase
suffix:semicolon
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_PALTiming
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVExtTiming
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVSt2Timing
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVSt1Timing
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVTextTiming
suffix:semicolon
)brace
macro_line|#endif
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|TimingPoint
op_assign
op_amp
id|SiS_YPbPrTable
(braket
l_int|2
)braket
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|TimingPoint
op_assign
op_amp
id|SiS_YPbPrTable
(braket
l_int|1
)braket
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
id|TimingPoint
op_assign
op_amp
id|SiS_YPbPrTable
(braket
l_int|0
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCPhase
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase2
suffix:semicolon
)brace
)brace
r_else
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCTiming
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCPhase
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCPhase2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase2
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALMPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALMPhase2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALNPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALNPhase2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_SpecialPhase
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_SpecialPhaseM
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_SpecialPhaseJ
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|PhasePoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2D
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ne
id|ModeText
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
id|SiS_Pr-&gt;SiS_NewFlickerMode
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x35
comma
id|SiS_Pr-&gt;SiS_RY1COE
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x36
comma
id|SiS_Pr-&gt;SiS_RY2COE
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x37
comma
id|SiS_Pr-&gt;SiS_RY3COE
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x38
comma
id|SiS_Pr-&gt;SiS_RY4COE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempax
op_assign
l_int|950
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempax
op_assign
l_int|520
suffix:semicolon
)brace
r_else
id|tempax
op_assign
l_int|440
suffix:semicolon
multiline_comment|/* NTSC, YPbPr 525, 750 */
r_if
c_cond
(paren
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoHiVision
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VDE
op_le
id|tempax
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoHiVision
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VDE
op_le
id|tempax
)paren
)paren
)paren
)paren
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_and_assign
l_int|0x00ff
suffix:semicolon
id|temp
op_assign
id|tempax
op_plus
(paren
id|USHORT
)paren
id|TimingPoint
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempax
op_plus
(paren
id|USHORT
)paren
id|TimingPoint
(braket
l_int|1
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoYPbPrHiVision
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x1b
)paren
suffix:semicolon
multiline_comment|/* 19 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x54
)paren
suffix:semicolon
multiline_comment|/* 52 */
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x17
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x1d
)paren
suffix:semicolon
)brace
)brace
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempcx
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempcx
op_decrement
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1B
comma
id|tempcx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1D
comma
l_int|0xF0
comma
(paren
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempcx
op_add_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempcx
op_sub_assign
l_int|4
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x22
comma
l_int|0x0F
comma
(paren
(paren
id|tempcx
op_lshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempbx
op_assign
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x24
comma
id|tempbx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0F
comma
(paren
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempbx
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempbx
op_sub_assign
l_int|4
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x29
comma
l_int|0x0F
comma
(paren
(paren
id|tempbx
op_lshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|j
op_add_assign
l_int|2
suffix:semicolon
id|tempcx
op_add_assign
(paren
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x27
comma
id|tempcx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x28
comma
l_int|0x0F
comma
(paren
(paren
id|tempcx
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempcx
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempcx
op_sub_assign
l_int|4
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2A
comma
l_int|0x0F
comma
(paren
(paren
id|tempcx
op_lshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|j
op_add_assign
l_int|2
suffix:semicolon
id|tempcx
op_sub_assign
(paren
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
(paren
(paren
id|tempcx
op_lshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempcx
op_sub_assign
l_int|11
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempcx
op_assign
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Pr
)paren
op_minus
l_int|1
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2E
comma
id|tempcx
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|853
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_and
(paren
id|crt2crtc
op_eq
l_int|1
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
id|crt2crtc
op_eq
l_int|4
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x2f
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x5d
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x5e
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w - doesn&squot;t make sense */
)brace
)brace
)brace
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2F
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x0F
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempbx
op_rshift
l_int|2
)paren
op_amp
l_int|0xC0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToAVIDEO
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToAVIDEO
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0xdf
comma
(paren
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
op_rshift
l_int|5
)paren
)paren
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* TEST qqqq */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2D
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_sub_assign
l_int|3
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|3
)paren
op_amp
l_int|0x60
)paren
op_or
l_int|0x18
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x46
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x47
comma
id|tempbx
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0xbf
comma
(paren
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|tempch
op_assign
id|tempcl
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
)paren
(brace
id|tempch
op_assign
l_int|0x19
suffix:semicolon
id|tempcl
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
id|tempch
op_assign
l_int|0x14
suffix:semicolon
id|tempbx
op_and_assign
op_complement
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
l_int|0x20
)paren
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempcl
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|longtemp
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_star
id|tempch
)paren
op_div
id|tempcl
)paren
op_lshift
l_int|13
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|longtemp
op_lshift_assign
l_int|3
suffix:semicolon
)brace
id|tempax
op_assign
id|longtemp
op_div
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|longtemp
op_mod
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempax
op_increment
suffix:semicolon
)brace
id|tempbx
op_or_assign
(paren
(paren
id|tempax
op_rshift
l_int|8
)paren
op_amp
l_int|0x1F
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempax
op_rshift
l_int|13
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x44
comma
id|tempax
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x45
comma
l_int|0xC0
comma
id|tempbx
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempcx
op_and_assign
l_int|0x07
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x20
)paren
(brace
id|tempcx
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x46
comma
l_int|0xF8
comma
id|tempcx
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|tempbx
op_assign
l_int|0x0382
suffix:semicolon
id|tempcx
op_assign
l_int|0x007e
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|0x0369
suffix:semicolon
id|tempcx
op_assign
l_int|0x0061
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4B
comma
id|tempbx
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4C
comma
id|tempcx
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x0300
)paren
op_rshift
l_int|6
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4D
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
(paren
id|temp
op_minus
l_int|3
)paren
)paren
suffix:semicolon
id|SiS_SetTVSpecial
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|temp
op_assign
l_int|8
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4e
comma
l_int|0xf7
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
(paren
id|temp
op_minus
l_int|1
)paren
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xEF
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0B
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* From here: Part2 LCD setup */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_decrement
suffix:semicolon
multiline_comment|/* RHACTE = HDE - 1 */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2C
comma
id|tempbx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2B
comma
l_int|0x0F
comma
(paren
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|temp
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|temp
op_assign
l_int|0x01
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x03
comma
id|tempbx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0C
comma
l_int|0xF8
comma
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VT
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x19
comma
id|tempcx
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_rshift
l_int|3
)paren
op_amp
l_int|0xE0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
multiline_comment|/* Enable dithering; only do this for 32bpp mode */
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1A
comma
l_int|0x0f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x17
comma
l_int|0xFB
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x18
comma
l_int|0xDF
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_GetCRT2Part2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|resindex
comma
id|HwInfo
)paren
)paren
(brace
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|200
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|206
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS310_CRT2Part2_Asus1024x768_3
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_3
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
comma
id|j
op_assign
l_int|0x04
suffix:semicolon
id|j
op_le
l_int|0x06
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1c
suffix:semicolon
id|j
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1f
suffix:semicolon
id|j
op_le
l_int|0x21
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0f
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|11
)braket
)paren
suffix:semicolon
id|SiS_SetGroup2_Tail
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_else
(brace
macro_line|#endif
multiline_comment|/* Checked for 1024x768, 1280x1024, 1400x1050, 1600x1200 */
multiline_comment|/*             Clevo dual-link 1024x768 */
multiline_comment|/* &t;&t;   Compaq 1280x1024 has HT 1696 sometimes (calculation OK, if given HT is correct)  */
multiline_comment|/*&t;&t;   Acer: OK, but uses different setting for VESA timing at 640/800/1024 and 640x400 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;PanelYRes
op_eq
id|SiS_Pr-&gt;SiS_VDE
)paren
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_minus
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VT
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_plus
(paren
(paren
id|SiS_Pr-&gt;PanelYRes
op_minus
id|SiS_Pr-&gt;SiS_VDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VT
op_minus
(paren
(paren
id|SiS_Pr-&gt;PanelYRes
op_minus
id|SiS_Pr-&gt;SiS_VDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
id|tempax
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelYRes
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
multiline_comment|/* if(SiS_Pr-&gt;SiS_VGAVDE == 525) tempax += 0x3c;   */
multiline_comment|/* 651+301C */
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelYRes
OL
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempax
op_assign
id|tempcx
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
)brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdes */
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdee */
)brace
multiline_comment|/* Non-expanding: lcdvdes = tempcx = VT-1; lcdvdee = tempbx = VDE-1 */
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdvdes 0x%x lcdvdee 0x%x&bslash;n&quot;
comma
id|tempcx
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
id|tempcx
)paren
suffix:semicolon
multiline_comment|/* lcdvdes  */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* lcdvdee  */
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|5
)paren
op_amp
l_int|0x38
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
)brace
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VT
op_minus
id|tempax
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelYRes
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VT
op_minus
id|tempax
)paren
op_div
l_int|10
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VT
op_plus
id|SiS_Pr-&gt;SiS_VDE
)paren
op_rshift
l_int|1
)paren
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelYRes
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
multiline_comment|/* ? */
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VT
op_minus
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_mod
l_int|4
)paren
(brace
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_increment
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
)brace
id|tempbx
op_sub_assign
(paren
id|tempax
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_sub_assign
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_le
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_plus
l_int|1
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
op_logical_or
(paren
id|crt2crtc
op_eq
l_int|6
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|tempbx
op_assign
l_int|770
suffix:semicolon
id|tempcx
op_assign
l_int|3
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* non-expanding: lcdvrs = ((VT + VDE) / 2) - 10 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;CVSyncStart
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdvrs 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* lcdvrs */
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0xF0
suffix:semicolon
id|tempbx
op_add_assign
(paren
id|tempcx
op_plus
l_int|1
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
id|tempbx
op_amp
l_int|0x0F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|temp
op_and_assign
l_int|0xf0
suffix:semicolon
id|temp
op_or_assign
(paren
id|SiS_Pr-&gt;CVSyncEnd
op_amp
l_int|0x0f
)paren
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdvre[3:0] 0x%x&bslash;n&quot;
comma
(paren
id|temp
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
macro_line|#ifdef SIS300
id|SiS_Group2LCDSpecial
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|crt2crtc
)paren
suffix:semicolon
macro_line|#endif
id|bridgeoffset
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|bridgeoffset
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|bridgeoffset
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|bridgeoffset
op_increment
suffix:semicolon
)brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelXRes
op_ne
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_minus
id|SiS_Pr-&gt;SiS_HDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
id|temp
op_add_assign
id|bridgeoffset
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* lcdhdes */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x0F
comma
(paren
(paren
id|temp
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
id|tempax
op_assign
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelXRes
op_ne
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelXRes
op_minus
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_minus
id|SiS_Pr-&gt;SiS_HDE
)paren
op_div
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhdee 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|tempbx
op_add_assign
id|bridgeoffset
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* lcdhdee */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0xF0
comma
(paren
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_minus
id|tempax
)paren
op_rshift
l_int|2
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HDE
op_eq
l_int|1280
)paren
(brace
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_or
l_int|0x47
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;CHSyncStart
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_add_assign
id|bridgeoffset
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhrs 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1C
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* lcdhrs */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1D
comma
l_int|0x0F
comma
(paren
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PanelXRes
op_ne
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
)brace
)brace
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;CHSyncEnd
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_add_assign
id|bridgeoffset
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhre 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x21
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* lcdhre */
id|SiS_SetGroup2_Tail
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
)paren
suffix:semicolon
macro_line|#ifdef SIS300
id|SiS_Set300Part2Regs
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|ModeNo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
)brace
multiline_comment|/* CRT2-LCD from table */
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET PART 3 REGISTER GROUP         */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetGroup3
id|SiS_SetGroup3
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_const
id|UCHAR
op_star
id|tempdi
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_return
suffix:semicolon
)brace
macro_line|#ifndef SIS_CP
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#else
id|SIS_CP_INIT301_CP
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xF5
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xB7
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x3D
comma
l_int|0xA8
)paren
suffix:semicolon
)brace
id|tempdi
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|tempdi
op_assign
id|SiS_Pr-&gt;SiS_HiTVGroup3Data
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|tempdi
op_assign
id|SiS_Pr-&gt;SiS_HiTVGroup3Simu
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525i
)paren
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3_1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3_2
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|tempdi
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x3E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
id|i
comma
id|tempdi
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x28
comma
l_int|0x3f
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#ifdef SIS_CP
id|SIS_CP_INIT301_CP2
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET PART 4 REGISTER GROUP         */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|SiS_ShiftXPos
id|SiS_ShiftXPos
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|shift
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
comma
id|temp2
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1f
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
r_int
)paren
(paren
(paren
id|temp1
op_or
(paren
(paren
id|temp2
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
)paren
)paren
op_plus
id|shift
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x0f
comma
(paren
(paren
id|temp
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2b
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
r_int
)paren
(paren
id|temp
)paren
op_plus
id|shift
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2b
comma
l_int|0xf0
comma
(paren
id|temp
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x42
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
r_int
)paren
(paren
(paren
id|temp1
op_or
(paren
(paren
id|temp2
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
)paren
)paren
op_plus
id|shift
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x42
comma
l_int|0x0f
comma
(paren
(paren
id|temp
op_rshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetGroup4_C_ELV
id|SiS_SetGroup4_C_ELV
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToHiVision
op_or
id|SetCRT2ToYPbPr525750
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3a
comma
l_int|0x08
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3a
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3a
comma
l_int|0xdf
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x25
comma
l_int|0xfc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x25
comma
l_int|0xf8
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0f
comma
l_int|0xfb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|temp
op_assign
l_int|0x0000
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|temp
op_assign
l_int|0x0002
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetHiVision
)paren
(brace
id|temp
op_assign
l_int|0x0400
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x0402
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
(brace
id|temp1
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVAspect43
)paren
(brace
id|temp1
op_assign
l_int|4
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0f
comma
l_int|0xfb
comma
id|temp1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVAspect43LB
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x7c
comma
(paren
id|temp
op_amp
l_int|0xff
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x3b
)paren
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0x03
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
multiline_comment|/* ? why not 0x10? */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xf8
comma
(paren
id|temp
op_amp
l_int|0xff
)paren
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3a
comma
l_int|0xfb
comma
(paren
id|temp
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x3b
comma
l_int|0xfd
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
multiline_comment|/* ? */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVAspect43
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
id|SiS_ShiftXPos
c_func
(paren
id|SiS_Pr
comma
l_int|97
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_ShiftXPos
c_func
(paren
id|SiS_Pr
comma
l_int|111
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetHiVision
)paren
(brace
id|SiS_ShiftXPos
c_func
(paren
id|SiS_Pr
comma
l_int|136
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiS_SetCRT2VCLK
id|SiS_SetCRT2VCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|vclkindex
suffix:semicolon
id|USHORT
id|temp
comma
id|reg1
comma
id|reg2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|reg1
op_assign
id|SiS_Pr-&gt;CSR2B
suffix:semicolon
id|reg2
op_assign
id|SiS_Pr-&gt;CSR2C
suffix:semicolon
)brace
r_else
(brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|reg1
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|reg2
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0a
comma
l_int|0x57
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0b
comma
l_int|0x46
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0xf6
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0a
comma
id|reg1
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0b
comma
id|reg2
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0a
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0b
comma
id|reg2
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0a
comma
id|reg1
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
id|temp
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x12
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetGroup4
id|SiS_SetGroup4
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempax
comma
id|tempcx
comma
id|tempbx
comma
id|modeflag
comma
id|temp
comma
id|resinfo
suffix:semicolon
id|ULONG
id|tempebx
comma
id|tempeax
comma
id|templong
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|resinfo
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0x0e
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301C
op_or
id|VB_SIS302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0x9f
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
op_complement
l_int|0x20
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#ifdef SET_EMI
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x13
comma
id|SiS_Pr-&gt;SiS_RVBHCFACT
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_RVBHCMAX
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x14
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|1
)paren
op_amp
l_int|0x80
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x16
comma
id|tempcx
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_rshift
l_int|5
)paren
op_amp
l_int|0x78
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempcx
op_sub_assign
l_int|5
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x17
comma
id|tempcx
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
(brace
id|temp
op_assign
l_int|0x60
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0xA0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
OG
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0xC0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ge
l_int|1280
)paren
(brace
id|temp
op_assign
l_int|0x40
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbx
op_ge
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ge
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0xA0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x1024
)paren
(brace
id|temp
op_or_assign
l_int|0x0A
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0E
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xE0
)paren
)paren
(brace
id|tempebx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_RVBHRS
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x18
comma
id|tempcx
)paren
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|8
suffix:semicolon
id|tempcx
op_or_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|tempeax
op_le
id|tempebx
)paren
(brace
id|tempcx
op_xor_assign
l_int|0x40
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_sub_assign
id|tempebx
suffix:semicolon
)brace
id|tempeax
op_mul_assign
(paren
l_int|256
op_star
l_int|1024
)paren
suffix:semicolon
id|templong
op_assign
id|tempeax
op_mod
id|tempebx
suffix:semicolon
id|tempeax
op_div_assign
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|templong
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempeax
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempeax
op_rshift
l_int|12
)paren
op_amp
l_int|0x70
)paren
suffix:semicolon
multiline_comment|/* sic! */
id|temp
op_or_assign
(paren
id|tempcx
op_amp
l_int|0x4F
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x19
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1C
comma
l_int|0x28
)paren
suffix:semicolon
multiline_comment|/* Calc Linebuffer max address and set/clear decimode */
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetHiVision
op_or
id|TVSetYPbPr750p
)paren
)paren
(brace
id|tempbx
op_assign
l_int|0x08
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempax
OG
l_int|800
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempax
op_sub_assign
l_int|800
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 651+301C: Only if TVNoHiviNoYPbPr */
id|tempbx
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_eq
l_int|1024
)paren
(brace
id|tempax
op_mul_assign
l_int|25
suffix:semicolon
)brace
r_else
id|tempax
op_mul_assign
l_int|20
suffix:semicolon
id|temp
op_assign
id|tempax
op_mod
l_int|32
suffix:semicolon
id|tempax
op_div_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempax
op_increment
suffix:semicolon
)brace
id|tempax
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTVNoYPbPrHiVision
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525i
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
multiline_comment|/* Otherwise white line at right edge */
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0xff00
)paren
op_or
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempax
op_decrement
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_rshift
l_int|4
)paren
op_amp
l_int|0x30
)paren
op_or
id|tempbx
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1D
comma
id|tempax
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0x0036
suffix:semicolon
id|tempbx
op_assign
l_int|0xD0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
id|temp
op_assign
l_int|0x0026
suffix:semicolon
id|tempbx
op_assign
l_int|0xC0
suffix:semicolon
multiline_comment|/* See En/DisableBridge() */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetNTSC1024
op_or
id|TVSetHiVision
op_or
id|TVSetYPbPr750p
op_or
id|TVSetYPbPr525p
)paren
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
(brace
id|temp
op_and_assign
op_complement
l_int|0x01
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempbx
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x22
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|5
)paren
op_amp
l_int|0x38
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0xC0
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0x0e
)paren
suffix:semicolon
multiline_comment|/* LCD-too-dark-error-source, see FinalizeLCD() */
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsDualLink
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
op_complement
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#ifdef SET_EMI
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* 301B */
id|SiS_SetCRT2VCLK
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET PART 5 REGISTER GROUP         */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetGroup5
id|SiS_SetGroup5
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetInSlaveMode
op_or
id|LoadDACFlag
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_LoadDAC
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*     MODIFY CRT1 GROUP FOR SLAVE MODE      */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_ModCRT1CRTC
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResIndex
comma
id|DisplayType
suffix:semicolon
r_const
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_PANEL848
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetLVDSCRT1Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResIndex
comma
op_amp
id|DisplayType
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1320x480_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* FSTN */
r_case
l_int|23
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|36
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|37
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|38
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|39
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|40
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|41
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|42
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|43
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|50
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|51
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|52
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|53
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|54
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|55
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_3_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|99
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1SOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x02
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x05
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
comma
id|j
op_assign
l_int|5
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|7
suffix:semicolon
id|i
op_le
l_int|0x11
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|9
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0xE0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
l_int|0x1f
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x01
suffix:semicolon
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*              SET CRT2 ECLK                */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT2ECLK
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|clkbase
comma
id|vclkindex
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|sr2b
comma
id|sr2c
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_640x480
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
op_amp
l_int|0x3f
)paren
op_eq
l_int|2
)paren
(brace
id|RefreshRateTableIndex
op_decrement
suffix:semicolon
)brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
r_else
(brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
id|sr2b
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|sr2c
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x01
)paren
(brace
id|sr2b
op_assign
id|ROMAddr
(braket
l_int|0x227
)braket
suffix:semicolon
id|sr2c
op_assign
id|ROMAddr
(braket
l_int|0x228
)braket
suffix:semicolon
)brace
)brace
)brace
id|clkbase
op_assign
l_int|0x02B
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|clkbase
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
comma
id|sr2b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
op_plus
l_int|1
comma
id|sr2c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
comma
id|sr2b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
op_plus
l_int|1
comma
id|sr2c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
comma
id|sr2b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|clkbase
op_plus
l_int|1
comma
id|sr2c
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           SET UP CHRONTEL CHIPS           */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCHTVReg
id|SiS_SetCHTVReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
macro_line|#if defined(SIS300) || defined(SIS315H)
id|USHORT
id|temp
comma
id|tempbx
suffix:semicolon
macro_line|#endif
id|USHORT
id|tempcl
suffix:semicolon
id|USHORT
id|TVType
comma
id|resindex
suffix:semicolon
r_const
id|SiS_CHTVRegDataStruct
op_star
id|CHTVRegData
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|TVType
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|TVType
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|TVType
op_assign
l_int|8
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|TVType
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|TVType
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_switch
c_cond
(paren
id|TVType
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_SOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|resindex
op_assign
id|tempcl
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
macro_line|#ifdef SIS300
multiline_comment|/* Chrontel 7005 - I assume that it does not come with a 315 series chip */
multiline_comment|/* We don&squot;t support modes &gt;800x600 */
r_if
c_cond
(paren
id|resindex
OG
l_int|5
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4304
)paren
suffix:semicolon
multiline_comment|/* 0x40=76uA (PAL); 0x03=15bit non-multi RGB*/
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6909
)paren
suffix:semicolon
multiline_comment|/* Black level for PAL (105)*/
)brace
r_else
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0304
)paren
suffix:semicolon
multiline_comment|/* upper nibble=71uA (NTSC), 0x03=15bit non-multi RGB*/
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x7109
)paren
suffix:semicolon
multiline_comment|/* Black level for NTSC (113)*/
)brace
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x00
suffix:semicolon
multiline_comment|/* Mode register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|1
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x07
suffix:semicolon
multiline_comment|/* Start active video register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|2
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x08
suffix:semicolon
multiline_comment|/* Position overflow register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|3
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0A
suffix:semicolon
multiline_comment|/* Horiz Position register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0B
suffix:semicolon
multiline_comment|/* Vertical Position register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* Set minimum flicker filter for Luma channel (SR1-0=00),&n;                minimum text enhancement (S3-2=10),&n;   &t;        maximum flicker filter for Chroma channel (S5-4=10)&n;&t;        =00101000=0x28 (When reading, S1-0-&gt;S3-2, and S3-2-&gt;S1-0!)&n;      */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2801
)paren
suffix:semicolon
multiline_comment|/* Set video bandwidth&n;            High bandwith Luma composite video filter(S0=1)&n;            low bandwith Luma S-video filter (S2-1=00)&n;&t;    disable peak filter in S-video channel (S3=0)&n;&t;    high bandwidth Chroma Filter (S5-4=11)&n;&t;    =00110001=0x31&n;     */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0xb103
)paren
suffix:semicolon
multiline_comment|/* old: 3103 */
multiline_comment|/* Register 0x3D does not exist in non-macrovision register map&n;            (Maybe this is a macrovision register?)&n;      */
macro_line|#ifndef SIS_CP
id|SiS_SetCH70xx
c_func
(paren
id|SiS_Pr
comma
l_int|0x003D
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Register 0x10 only contains 1 writable bit (S0) for sensing,&n;            all other bits a read-only. Macrovision?&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0010
comma
l_int|0x1F
)paren
suffix:semicolon
multiline_comment|/* Register 0x11 only contains 3 writable bits (S0-S2) for&n;            contrast enhancement (set to 010 -&gt; gain 1 Yout = 17/16*(Yin-30) )&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0211
comma
l_int|0xF8
)paren
suffix:semicolon
multiline_comment|/* Clear DSEN&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001C
comma
l_int|0xEF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
)paren
(brace
multiline_comment|/* ---- NTSC ---- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* 640x480 overscan: Mode 16 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on, no need to set FSCI */
)brace
r_else
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* 800x600 overscan: Mode 23 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* 0x18-0x1f: FSCI 469,762,048 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0C19
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0120
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* Loop filter on for mode 23 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV off, need to set FSCI */
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* ----- 640x480 underscan; Mode 17 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* ----- 800x600 underscan: Mode 24 */
macro_line|#if 0
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* (FSCI was 0x1f1c71c7 - this is for mode 22) */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0919
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* FSCI for mode 24 is 428,554,851 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x081A
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* 198b3a63 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0b1B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x041C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x011D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x061E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x051F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off for mode 24 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV off, need to set FSCI */
macro_line|#endif     /* All alternatives wrong (datasheet wrong?), don&squot;t use FSCI */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* ---- PAL ---- */
multiline_comment|/* We don&squot;t play around with FSCI in PAL mode */
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on */
)brace
r_else
(brace
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on */
)brace
)brace
macro_line|#endif  /* 300 */
)brace
r_else
(brace
multiline_comment|/* Chrontel 7019 - assumed that it does not come with a 300 series chip */
macro_line|#ifdef SIS315H
multiline_comment|/* We don&squot;t support modes &gt;1024x768 */
r_if
c_cond
(paren
id|resindex
OG
l_int|6
)paren
r_return
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x00
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|1
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x01
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|2
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x02
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|3
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x04
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x03
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|5
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x05
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|6
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x06
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|temp
op_assign
l_int|0x66
suffix:semicolon
)brace
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x07
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|8
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x08
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|9
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x15
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|10
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x1f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|11
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0c
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|12
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0d
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|13
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0e
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|14
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|15
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x10
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x21
)paren
op_amp
op_complement
l_int|0x02
suffix:semicolon
multiline_comment|/* D1 should be set for PAL, PAL-N and NTSC-J,&n;        but I won&squot;t do that for PAL unless somebody&n;&t;tells me to do so. Since the BIOS uses&n;&t;non-default CIV values and blacklevels,&n;&t;this might be compensated anyway.&n;      */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetPALN
op_or
id|TVSetNTSCJ
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x02
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x21
)paren
)paren
suffix:semicolon
macro_line|#endif&t;/* 315 */
)brace
macro_line|#ifdef SIS_CP
id|SIS_CP_INIT301_CP3
macro_line|#endif
)brace
r_void
DECL|function|SiS_Chrontel701xBLOn
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* Enable Chrontel 7019 LCD panel backlight */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6566
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_Chrontel701xBLOff
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* Disable Chrontel 7019 LCD panel backlight */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xDF
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H  /* ----------- 315 series only ---------- */
r_static
r_void
DECL|function|SiS_ChrontelPowerSequencing
id|SiS_ChrontelPowerSequencing
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|regtable
(braket
)braket
op_assign
(brace
l_int|0x67
comma
l_int|0x68
comma
l_int|0x69
comma
l_int|0x6a
comma
l_int|0x6b
)brace
suffix:semicolon
id|UCHAR
id|table1024_740
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
id|UCHAR
id|table1400_740
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x6e
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
id|UCHAR
id|asus1024_740
(braket
)braket
op_assign
(brace
l_int|0x19
comma
l_int|0x6e
comma
l_int|0x01
comma
l_int|0x19
comma
l_int|0x09
)brace
suffix:semicolon
id|UCHAR
id|asus1400_740
(braket
)braket
op_assign
(brace
l_int|0x19
comma
l_int|0x6e
comma
l_int|0x01
comma
l_int|0x19
comma
l_int|0x09
)brace
suffix:semicolon
id|UCHAR
id|table1024_650
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1400_650
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
op_star
id|tableptr
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Set up Power up/down timing */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSL3000D
)paren
(brace
id|tableptr
op_assign
id|asus1024_740
suffix:semicolon
)brace
r_else
id|tableptr
op_assign
id|table1024_740
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSL3000D
)paren
(brace
id|tableptr
op_assign
id|asus1400_740
suffix:semicolon
)brace
r_else
id|tableptr
op_assign
id|table1400_740
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|tableptr
op_assign
id|table1024_650
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
)paren
(brace
id|tableptr
op_assign
id|table1400_650
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tableptr
(braket
id|i
)braket
op_lshift
l_int|8
)paren
op_or
id|regtable
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_SetCH701xForLCD
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|regtable
(braket
)braket
op_assign
(brace
l_int|0x1c
comma
l_int|0x5f
comma
l_int|0x64
comma
l_int|0x6f
comma
l_int|0x70
comma
l_int|0x71
comma
l_int|0x72
comma
l_int|0x73
comma
l_int|0x74
comma
l_int|0x76
comma
l_int|0x78
comma
l_int|0x7d
comma
l_int|0x66
)brace
suffix:semicolon
id|UCHAR
id|table1024_740
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0xed
comma
l_int|0xa3
comma
l_int|0xc8
comma
l_int|0xc7
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1280_740
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1400_740
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1600_740
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x04
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xde
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x1a
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1024_650
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0xed
comma
l_int|0xa3
comma
l_int|0xc8
comma
l_int|0xc7
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1280_650
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1400_650
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xef
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1600_650
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x04
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xde
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x1a
)brace
suffix:semicolon
id|UCHAR
op_star
id|tableptr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|tempbh
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|tableptr
op_assign
id|table1024_740
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|tableptr
op_assign
id|table1280_740
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|tableptr
op_assign
id|table1400_740
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
id|tableptr
op_assign
id|table1600_740
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|tableptr
op_assign
id|table1024_650
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|tableptr
op_assign
id|table1280_650
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|tableptr
op_assign
id|table1400_650
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
id|tableptr
op_assign
id|table1600_650
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
)brace
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x74
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempbh
op_eq
l_int|0xf6
)paren
op_logical_or
(paren
id|tempbh
op_eq
l_int|0xc7
)paren
)paren
(brace
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x73
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xc8
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xdb
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xde
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|tempbh
op_assign
l_int|0x0d
suffix:semicolon
)brace
r_else
id|tempbh
op_assign
l_int|0x0c
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|tempbh
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tableptr
(braket
id|i
)braket
op_lshift
l_int|8
)paren
op_or
id|regtable
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_ChrontelPowerSequencing
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1e
)paren
suffix:semicolon
id|tempbh
op_or_assign
l_int|0xc0
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x1e
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0xfb
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x64
)paren
suffix:semicolon
id|tempbh
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x64
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x3f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_ChrontelResetVSync
id|SiS_ChrontelResetVSync
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_int
r_char
id|temp
comma
id|temp1
suffix:semicolon
id|temp1
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
multiline_comment|/* Use external VSYNC */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Use internal VSYNC */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp1
op_lshift
l_int|8
)paren
op_or
l_int|0x49
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_Chrontel701xOn
id|SiS_Chrontel701xOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* Invert XCLK phase */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x01
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Enable YPrPb (HDTV) */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsChScart
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x01
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
id|temp
op_or_assign
l_int|0xc0
suffix:semicolon
multiline_comment|/* Enable SCART + CVBS */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_ChrontelResetVSync
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2049
)paren
suffix:semicolon
multiline_comment|/* Enable TV path */
)brace
r_else
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2049
)paren
suffix:semicolon
multiline_comment|/* Enable TV path */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x73
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x60
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x73
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_Chrontel701xOff
id|SiS_Chrontel701xOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* Complete power down of LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x16ff
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0066
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfc
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0066
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_ChrontelResetDB
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4a
)paren
suffix:semicolon
multiline_comment|/* Version ID */
id|temp
op_and_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
)brace
multiline_comment|/* Reset Chrontel 7019 datapath */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1048
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1848
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_ChrontelResetVSync
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x49
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* Clear/set/clear GPIO */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xef
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xef
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 650 */
multiline_comment|/* Reset Chrontel 7019 datapath */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1048
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1848
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_ChrontelInitTVVSync
id|SiS_ChrontelInitTVVSync
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_ChrontelResetVSync
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
multiline_comment|/* Power up LVDS block */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|1
)paren
(brace
multiline_comment|/* TV block powered? (0 = yes, 1 = no) */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x70
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
multiline_comment|/* enable VSYNC */
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
multiline_comment|/* disable VSYNC */
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_ChrontelDoSomething3
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|1
)paren
(brace
id|temp
op_increment
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x61
)paren
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4566
)paren
suffix:semicolon
multiline_comment|/* Panel power on */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
multiline_comment|/* All power on */
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x16ff
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 650 */
id|temp1
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|2
)paren
(brace
id|temp
op_increment
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x61
)paren
suffix:semicolon
id|temp1
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x5f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x3ff
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x2ff
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|temp1
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x2ff
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x03
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SiS_ChrontelDoSomething2
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
comma
id|tempcl
comma
id|tempch
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|tempcl
op_assign
l_int|3
suffix:semicolon
id|tempch
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* PLL stable? -&gt; bail out */
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x04
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
multiline_comment|/* Power down LVDS output, PLL normal operation */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
)brace
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempch
op_eq
l_int|3
)paren
(brace
r_break
suffix:semicolon
)brace
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|tempcl
op_assign
l_int|3
suffix:semicolon
id|tempch
op_increment
suffix:semicolon
)brace
id|tempcl
op_decrement
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfb
suffix:semicolon
multiline_comment|/* Reset PLL */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* PLL normal operation */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xe078
)paren
suffix:semicolon
multiline_comment|/* PLL loop filter */
)brace
r_else
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6078
)paren
suffix:semicolon
)brace
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|0
)paren
(brace
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0077
)paren
suffix:semicolon
multiline_comment|/* MV? */
)brace
r_static
r_void
DECL|function|SiS_ChrontelDoSomething1
id|SiS_ChrontelDoSomething1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Set datapath 1 to TV   */
id|temp
op_and_assign
l_int|0xbf
suffix:semicolon
multiline_comment|/* Set datapath 2 to LVDS */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfb
suffix:semicolon
multiline_comment|/* Normal XCLK phase */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x64
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* ? Bit not defined */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x64
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
multiline_comment|/* D1 input to both LVDS and TV */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_ASUSL3000D
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4063
)paren
suffix:semicolon
multiline_comment|/* LVDS off */
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0063
)paren
suffix:semicolon
multiline_comment|/* LVDS on */
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Pr
comma
l_int|0
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0x45
)paren
(brace
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Pr
comma
l_int|0
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 650 */
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Pr
comma
id|temp
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
multiline_comment|/* All power on, LVDS normal operation */
)brace
)brace
macro_line|#endif  /* 315 series  */
multiline_comment|/*********************************************/
multiline_comment|/*      MAIN: SET CRT2 REGISTER GROUP        */
multiline_comment|/*********************************************/
id|BOOLEAN
DECL|function|SiS_SetCRT2Group
id|SiS_SetCRT2Group
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
)paren
(brace
macro_line|#ifdef SIS300
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
macro_line|#endif
id|USHORT
id|ModeIdIndex
comma
id|RefreshRateTableIndex
suffix:semicolon
macro_line|#if 0
id|USHORT
id|temp
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
)brace
r_else
(brace
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Used for shifting CR33 */
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|4
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SaveCRT2Info
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
id|SiS_DisableBridge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
id|SiS_SetCRT2ModeRegs
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_LockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
id|SiS_GetCRT2Data
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* Set up Panel Link for LVDS and LCDA */
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
op_logical_or
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
)paren
(brace
id|SiS_GetLVDSDesData
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
macro_line|#ifdef LINUX_XF86
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: LCDHDES 0x%03x LCDVDES 0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDHDES
comma
id|SiS_Pr-&gt;SiS_LCDVDES
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: HDE     0x%03x VDE     0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_HDE
comma
id|SiS_Pr-&gt;SiS_VDE
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: VGAHDE  0x%03x VGAVDE  0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VGAHDE
comma
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: HT      0x%03x VT      0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_HT
comma
id|SiS_Pr-&gt;SiS_VT
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: VGAHT   0x%03x VGAVT   0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VGAHT
comma
id|SiS_Pr-&gt;SiS_VGAVT
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
id|SiS_SetGroup1
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
id|SiS_SetGroup2
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
id|SiS_SetGroup2_C_ELV
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetGroup3
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetGroup4
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
id|SiS_SetGroup4_C_ELV
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetGroup5
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* For 301BDH (Panel link initialization): */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_640x480
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
op_logical_and
(paren
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
macro_line|#ifdef SIS315H
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetCHTVReg
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseOEM
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseOEM
op_eq
op_minus
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x233
)braket
op_eq
l_int|0x12
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x234
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
)paren
(brace
id|SetOEMLCDData2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
id|SiS_FinalizeLCD
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_OEM310Setting
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_OEM661Setting
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
id|SiS_EnableBridge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/* Disable LCD panel when using TV */
id|SiS_SetRegSR11ANDOR
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0xFF
comma
l_int|0x0C
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Disable TV when using LCD */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x010E
comma
l_int|0xF8
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
id|SiS_LockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*     ENABLE/DISABLE LCD BACKLIGHT (SIS)    */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_SiS30xBLOn
id|SiS_SiS30xBLOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
multiline_comment|/* Switch on LCD backlight on SiS30xLV */
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0xff00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x01
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SiS30xBLOff
id|SiS_SiS30xBLOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
multiline_comment|/* Switch off LCD backlight on SiS30xLV */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0xe000
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*          DDC RELATED FUNCTIONS            */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetupDDCN
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_NData
op_assign
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_NClk
op_assign
op_complement
id|SiS_Pr-&gt;SiS_DDC_Clk
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_DDC_Index
op_eq
l_int|0x11
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SensibleSR11
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_NData
op_and_assign
l_int|0x0f
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_NClk
op_and_assign
l_int|0x0f
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS300
r_static
id|UCHAR
op_star
DECL|function|SiS_SetTrumpBlockLoop
id|SiS_SetTrumpBlockLoop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|dataptr
)paren
(brace
r_int
id|i
comma
id|j
comma
id|num
suffix:semicolon
id|USHORT
id|tempah
comma
id|temp
suffix:semicolon
id|UCHAR
op_star
id|mydataptr
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* Do 20 attempts to write */
id|mydataptr
op_assign
id|dataptr
suffix:semicolon
id|num
op_assign
op_star
id|mydataptr
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|num
)paren
(brace
r_return
id|mydataptr
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
op_star
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*    (ERROR: no ack) */
id|tempah
op_assign
op_star
id|mydataptr
op_increment
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write register number */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*    (ERROR: no ack) */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|num
suffix:semicolon
id|j
op_increment
)paren
(brace
id|tempah
op_assign
op_star
id|mydataptr
op_increment
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_return
id|mydataptr
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|SiS_SetTrumpionBlock
id|SiS_SetTrumpionBlock
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|dataptr
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xF0
suffix:semicolon
multiline_comment|/* DAB (Device Address Byte) */
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_while
c_loop
(paren
op_star
id|dataptr
)paren
(brace
id|dataptr
op_assign
id|SiS_SetTrumpBlockLoop
c_func
(paren
id|SiS_Pr
comma
id|dataptr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dataptr
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Trumpion block success&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* The Chrontel 700x is connected to the 630/730 via&n; * the 630/730&squot;s DDC/I2C port.&n; *&n; * On 630(S)T chipset, the index changed from 0x11 to&n; * 0x0a, possibly for working around the DDC problems&n; */
r_static
id|BOOLEAN
DECL|function|SiS_SetChReg
id|SiS_SetChReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
comma
id|USHORT
id|myor
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* Do 20 attempts to write */
r_if
c_cond
(paren
id|i
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*    (ERROR: no ack) */
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* Write RAB */
id|tempah
op_or_assign
id|myor
suffix:semicolon
multiline_comment|/* (700x: set bit 7, see datasheet) */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*    (ERROR: no ack) */
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write data */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*    (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* Set stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#if 0
macro_line|#ifdef SIS300
multiline_comment|/* Write Trumpion register */
r_static
r_void
id|SiS_SetTrumpReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xF0
suffix:semicolon
multiline_comment|/* DAB (Device Address Byte) */
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetChReg
c_func
(paren
id|SiS_Pr
comma
id|tempbx
comma
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
multiline_comment|/* Write to Chrontel 700x */
multiline_comment|/* Parameter is [Data (S15-S8) | Register no (S7-S0)] */
r_void
DECL|function|SiS_SetCH700x
id|SiS_SetCH700x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* DAB (Device Address Byte) */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_SetChReg
c_func
(paren
id|SiS_Pr
comma
id|tempbx
comma
l_int|0x80
)paren
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0a
suffix:semicolon
multiline_comment|/* Bit 7 = SC;  Bit 6 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetChReg
c_func
(paren
id|SiS_Pr
comma
id|tempbx
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Write to Chrontel 701x */
multiline_comment|/* Parameter is [Data (S15-S8) | Register no (S7-S0)] */
r_void
DECL|function|SiS_SetCH701x
id|SiS_SetCH701x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x08
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* DAB (Device Address Byte) */
id|SiS_SetChReg
c_func
(paren
id|SiS_Pr
comma
id|tempbx
comma
l_int|0
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCH70xx
id|SiS_SetCH70xx
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_GetChReg
id|SiS_GetChReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|myor
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* Do 20 attempts to read */
r_if
c_cond
(paren
id|i
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_or
id|myor
suffix:semicolon
multiline_comment|/* Write RAB (700x: | 0x80) */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*        (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* Re-start */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* DAB | 0x01 = Read */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* DAB (S0=1=read) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/*        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* Read byte */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* Stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
id|tempah
suffix:semicolon
)brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
macro_line|#if 0
macro_line|#ifdef SIS300
multiline_comment|/* Read from Trumpion */
r_static
id|USHORT
id|SiS_GetTrumpReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xF0
suffix:semicolon
multiline_comment|/* DAB */
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_return
id|SiS_GetChReg
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
multiline_comment|/* Read from Chrontel 700x */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH700x
id|SiS_GetCH700x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|result
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* DAB */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|result
op_assign
id|SiS_GetChReg
c_func
(paren
id|SiS_Pr
comma
l_int|0x80
)paren
)paren
op_eq
l_int|0xFFFF
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0a
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x80
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x40
suffix:semicolon
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|result
op_assign
id|SiS_GetChReg
c_func
(paren
id|SiS_Pr
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* Read from Chrontel 701x */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH701x
id|SiS_GetCH701x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x08
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* DAB */
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_return
id|SiS_GetChReg
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* Read from Chrontel 70xx */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH70xx
id|SiS_GetCH70xx
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
r_return
id|SiS_GetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
r_else
r_return
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
multiline_comment|/* Our own DDC functions */
r_static
id|USHORT
DECL|function|SiS_InitDDCRegs
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
r_int
id|VBFlags
comma
r_int
id|VGAEngine
comma
id|USHORT
id|adaptnum
comma
id|USHORT
id|DDCdatatype
comma
id|BOOLEAN
id|checkcr32
)paren
(brace
r_int
r_char
id|ddcdtype
(braket
)braket
op_assign
(brace
l_int|0xa0
comma
l_int|0xa0
comma
l_int|0xa0
comma
l_int|0xa2
comma
l_int|0xa6
)brace
suffix:semicolon
r_int
r_char
id|flag
comma
id|cr32
suffix:semicolon
id|USHORT
id|temp
op_assign
l_int|0
comma
id|myadaptnum
op_assign
id|adaptnum
suffix:semicolon
r_if
c_cond
(paren
id|adaptnum
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|VB_30xBDH
)paren
op_logical_and
(paren
id|adaptnum
op_eq
l_int|1
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
multiline_comment|/* adapternum for SiS bridges: 0 = CRT1, 1 = LCD, 2 = VGA2 */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* force re-detection! */
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
id|ddcdtype
(braket
id|DDCdatatype
)braket
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_P3c4
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
id|flag
op_assign
l_int|0xff
suffix:semicolon
id|cr32
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x20
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
multiline_comment|/* 300 series */
r_if
c_cond
(paren
id|myadaptnum
op_ne
l_int|0
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_Part4Port
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0f
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|VB_301
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|cr32
op_amp
l_int|0x80
)paren
op_logical_and
(paren
id|checkcr32
)paren
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_ge
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|temp
op_assign
l_int|4
op_minus
(paren
id|myadaptnum
op_star
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 315/330 series */
multiline_comment|/* here we simplify: 0 = CRT1, 1 = CRT2 (VGA, LCD) */
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|2
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|1
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_Part4Port
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0f
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|cr32
op_amp
l_int|0x80
)paren
op_logical_and
(paren
id|checkcr32
)paren
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_ge
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
id|myadaptnum
suffix:semicolon
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_LVDS
)paren
(brace
id|flag
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|flag
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
op_lshift
id|temp
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
op_lshift
id|temp
suffix:semicolon
id|SiS_SetupDDCN
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;DDC Port %x Index %x Shift %d&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|temp
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_WriteDABDDC
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_DDC_SecAddr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_PrepareReadDDC
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
)paren
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_PrepareDDC
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SendACK
id|SiS_SendACK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|yesno
)paren
(brace
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|yesno
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
l_int|0
)paren
suffix:semicolon
)brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_DoProbeDDC
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_int
r_char
id|mask
comma
id|value
suffix:semicolon
id|USHORT
id|temp
comma
id|ret
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|failed
op_assign
id|FALSE
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Probe: Prepare failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|mask
op_assign
l_int|0xf0
suffix:semicolon
id|value
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
id|temp
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|mask
op_assign
l_int|0xff
suffix:semicolon
id|value
op_assign
l_int|0xff
suffix:semicolon
)brace
r_else
(brace
id|failed
op_assign
id|TRUE
suffix:semicolon
id|ret
op_assign
l_int|0xFFFF
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Probe: Read 1 failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_if
c_cond
(paren
id|failed
op_eq
id|FALSE
)paren
(brace
id|temp
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|temp
op_and_assign
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|value
)paren
(brace
id|ret
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|ret
op_assign
l_int|0xFFFF
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Probe: Read 2 failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x30
)paren
(brace
id|ret
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_ProbeDDC
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
l_int|0x180
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x02
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x1a
)paren
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|flag
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_ReadDDC
id|SiS_ReadDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|DDCdatatype
comma
r_int
r_char
op_star
id|buffer
)paren
(brace
id|USHORT
id|flag
comma
id|length
comma
id|i
suffix:semicolon
r_int
r_char
id|chksum
comma
id|gotcha
suffix:semicolon
r_if
c_cond
(paren
id|DDCdatatype
OG
l_int|4
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|flag
op_assign
l_int|0
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|length
op_assign
l_int|127
suffix:semicolon
r_if
c_cond
(paren
id|DDCdatatype
op_ne
l_int|1
)paren
(brace
id|length
op_assign
l_int|255
suffix:semicolon
)brace
id|chksum
op_assign
l_int|0
suffix:semicolon
id|gotcha
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|chksum
op_add_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|gotcha
op_or_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|chksum
op_add_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|gotcha
)paren
(brace
id|flag
op_assign
(paren
id|USHORT
)paren
id|chksum
suffix:semicolon
)brace
r_else
id|flag
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
r_else
(brace
id|flag
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|flag
suffix:semicolon
)brace
multiline_comment|/* Our private DDC functions&n;&n;   It complies somewhat with the corresponding VESA function&n;   in arguments and return values.&n;&n;   Since this is probably called before the mode is changed,&n;   we use our pre-detected pSiS-values instead of SiS_Pr as&n;   regards chipset and video bridge type.&n;&n;   Arguments:&n;       adaptnum: 0=CRT1(analog), 1=CRT2/LCD(digital), 2=CRT2/VGA2(analog)&n;                 CRT2 DDC is only supported on SiS301, 301B, 301C, 302B.&n;&t;&t; LCDA is CRT1, but DDC is read from CRT2 port.&n;       DDCdatatype: 0=Probe, 1=EDID, 2=EDID+VDIF, 3=EDID V2 (P&amp;D), 4=EDID V2 (FPDI-2)&n;       buffer: ptr to 256 data bytes which will be filled with read data.&n;&n;   Returns 0xFFFF if error, otherwise&n;       if DDCdatatype &gt; 0:  Returns 0 if reading OK (included a correct checksum)&n;       if DDCdatatype = 0:  Returns supported DDC modes&n;&n; */
id|USHORT
DECL|function|SiS_HandleDDC
id|SiS_HandleDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
r_int
id|VBFlags
comma
r_int
id|VGAEngine
comma
id|USHORT
id|adaptnum
comma
id|USHORT
id|DDCdatatype
comma
r_int
r_char
op_star
id|buffer
)paren
(brace
r_int
r_char
id|sr1f
comma
id|cr17
op_assign
l_int|1
suffix:semicolon
id|USHORT
id|result
suffix:semicolon
r_if
c_cond
(paren
id|adaptnum
OG
l_int|2
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|DDCdatatype
OG
l_int|4
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|VB_VIDEOBRIDGE
)paren
)paren
op_logical_and
(paren
id|adaptnum
OG
l_int|0
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|VBFlags
comma
id|VGAEngine
comma
id|adaptnum
comma
id|DDCdatatype
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|sr1f
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
comma
l_int|0x3f
comma
l_int|0x04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|cr17
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x17
)paren
op_amp
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cr17
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x17
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x00
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x00
comma
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|sr1f
)paren
op_logical_or
(paren
op_logical_neg
id|cr17
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|DDCdatatype
op_eq
l_int|0
)paren
(brace
id|result
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|result
op_assign
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|DDCdatatype
comma
id|buffer
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|result
)paren
op_logical_and
(paren
id|DDCdatatype
op_eq
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0
)braket
op_eq
l_int|0x00
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|1
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|2
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|3
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|4
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|5
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|6
)braket
op_eq
l_int|0xff
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|7
)braket
op_eq
l_int|0x00
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|0x12
)braket
op_eq
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
id|adaptnum
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
id|result
op_assign
l_int|0xFFFE
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
(brace
id|result
op_assign
l_int|0xFFFE
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
comma
id|sr1f
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x17
comma
l_int|0x7f
comma
id|cr17
)paren
suffix:semicolon
)brace
r_return
id|result
suffix:semicolon
)brace
macro_line|#ifdef LINUX_XF86
r_static
id|BOOLEAN
DECL|function|checkedid1
id|checkedid1
c_func
(paren
r_int
r_char
op_star
id|buffer
)paren
(brace
multiline_comment|/* Check header */
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0
)braket
op_ne
l_int|0x00
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|1
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|3
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|4
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|5
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|6
)braket
op_ne
l_int|0xff
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|7
)braket
op_ne
l_int|0x00
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Check EDID version and revision */
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x12
)braket
op_ne
l_int|1
)paren
op_logical_or
(paren
id|buffer
(braket
l_int|0x13
)braket
OG
l_int|4
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Check week of manufacture for sanity */
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x10
)braket
OG
l_int|53
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Check year of manufacture for sanity */
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x11
)braket
OG
l_int|40
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
r_static
id|BOOLEAN
DECL|function|checkedid2
id|checkedid2
c_func
(paren
r_int
r_char
op_star
id|buffer
)paren
(brace
id|USHORT
id|year
op_assign
id|buffer
(braket
l_int|6
)braket
op_or
(paren
id|buffer
(braket
l_int|7
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* Check EDID version */
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0
)braket
op_amp
l_int|0xf0
)paren
op_ne
l_int|0x20
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Check week of manufacture for sanity */
r_if
c_cond
(paren
id|buffer
(braket
l_int|5
)braket
OG
l_int|53
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Check year of manufacture for sanity */
r_if
c_cond
(paren
(paren
id|year
op_ne
l_int|0
)paren
op_logical_and
(paren
(paren
id|year
OL
l_int|1990
)paren
op_logical_or
(paren
id|year
OG
l_int|2030
)paren
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* Sense the LCD parameters (CR36, CR37) via DDC */
multiline_comment|/* SiS30x(B) only */
id|USHORT
DECL|function|SiS_SenseLCDDDC
id|SiS_SenseLCDDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
)paren
(brace
id|USHORT
id|DDCdatatype
comma
id|paneltype
comma
id|flag
comma
id|xres
op_assign
l_int|0
comma
id|yres
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|index
comma
id|myindex
comma
id|lumsize
comma
id|numcodes
comma
id|panelvendor
comma
id|panelproduct
suffix:semicolon
r_int
id|maxx
op_assign
l_int|0
comma
id|maxy
op_assign
l_int|0
comma
id|prefx
op_assign
l_int|0
comma
id|prefy
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|cr37
op_assign
l_int|0
comma
id|seekcode
suffix:semicolon
id|BOOLEAN
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
id|BOOLEAN
id|havesync
op_assign
id|FALSE
suffix:semicolon
id|BOOLEAN
id|indb
op_assign
id|FALSE
suffix:semicolon
r_int
id|retry
comma
id|i
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
op_assign
id|FALSE
suffix:semicolon
)brace
id|SiS_Pr-&gt;CP_HaveCustomData
op_assign
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|SiS_Pr-&gt;CP_MaxClock
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;CP_PreferredX
op_assign
id|SiS_Pr-&gt;CP_PreferredY
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;CP_PreferredIndex
op_assign
op_minus
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;CP_PrefClock
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;PanelSelfDetected
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_30xBDH
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS-&gt;VBFlags
comma
id|pSiS-&gt;VGAEngine
comma
l_int|1
comma
l_int|0
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Probe supported DA&squot;s */
id|flag
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;CRT2 DDC capabilities 0x%x&bslash;n&quot;
comma
id|flag
)paren
suffix:semicolon
macro_line|#endif&t;
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
multiline_comment|/* EDID V2 (FP) */
id|DDCdatatype
op_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
multiline_comment|/* EDID V2 (P&amp;D-D Monitor) */
id|DDCdatatype
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EDID V1 */
id|DDCdatatype
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
multiline_comment|/* no DDC support (or no device attached) */
multiline_comment|/* Read the entire EDID */
id|retry
op_assign
l_int|2
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|DDCdatatype
comma
id|buffer
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: DDC read failed (attempt %d), %s&bslash;n&quot;
comma
(paren
l_int|3
op_minus
id|retry
)paren
comma
(paren
id|retry
op_eq
l_int|1
)paren
ques
c_cond
l_string|&quot;giving up&quot;
suffix:colon
l_string|&quot;retrying&quot;
)paren
suffix:semicolon
id|retry
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|retry
op_eq
l_int|0
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
r_else
r_break
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
(brace
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_add_assign
l_int|16
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;%02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x&bslash;n&quot;
comma
id|buffer
(braket
id|i
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|1
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|2
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|3
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|4
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|5
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|6
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|7
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|8
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|9
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|10
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|11
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|12
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|13
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|14
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|15
)braket
)paren
suffix:semicolon
)brace
macro_line|#endif   
multiline_comment|/* Analyze EDID and retrieve LCD panel information */
id|paneltype
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|DDCdatatype
)paren
(brace
r_case
l_int|1
suffix:colon
multiline_comment|/* Analyze EDID V1 */
multiline_comment|/* Catch a few clear cases: */
r_if
c_cond
(paren
op_logical_neg
(paren
id|checkedid1
c_func
(paren
id|buffer
)paren
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: EDID corrupt&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: Attached display expects analog input (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x14
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_ne
l_int|0x08
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: Warning: Attached display is not of RGB but of %s type (0x%02x)&bslash;n&quot;
comma
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x00
)paren
ques
c_cond
l_string|&quot;monochrome/greyscale&quot;
suffix:colon
(paren
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x10
)paren
ques
c_cond
l_string|&quot;non-RGB multicolor&quot;
suffix:colon
l_string|&quot;undefined&quot;
)paren
comma
id|buffer
(braket
l_int|0x18
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/* Now analyze the first Detailed Timing Block and see&n;       * if the preferred timing mode is stored there. If so,&n;       * check if this is a standard panel for which we already&n;       * know the timing.&n;       */
id|paneltype
op_assign
id|Panel_Custom
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
id|panelvendor
op_assign
id|buffer
(braket
l_int|9
)braket
op_or
(paren
id|buffer
(braket
l_int|8
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|panelproduct
op_assign
id|buffer
(braket
l_int|10
)braket
op_or
(paren
id|buffer
(braket
l_int|11
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* Overrule bogus preferred modes from database */
r_if
c_cond
(paren
(paren
id|indb
op_assign
id|SiS_FindPanelFromDB
c_func
(paren
id|pSiS
comma
id|panelvendor
comma
id|panelproduct
comma
op_amp
id|maxx
comma
op_amp
id|maxy
comma
op_amp
id|prefx
comma
op_amp
id|prefy
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|prefx
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredX
op_assign
id|xres
op_assign
id|prefx
suffix:semicolon
)brace
r_if
c_cond
(paren
id|prefy
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredY
op_assign
id|yres
op_assign
id|prefy
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x02
)paren
(brace
id|USHORT
id|pclk
op_assign
(paren
id|buffer
(braket
l_int|0x36
)braket
op_or
(paren
id|buffer
(braket
l_int|0x37
)braket
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|USHORT
id|phb
op_assign
(paren
id|buffer
(braket
l_int|0x39
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3a
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|USHORT
id|pvb
op_assign
(paren
id|buffer
(braket
l_int|0x3c
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3d
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|xres
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredX
op_assign
id|xres
op_assign
id|buffer
(braket
l_int|0x38
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3a
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|yres
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredY
op_assign
id|yres
op_assign
id|buffer
(braket
l_int|0x3b
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3d
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|xres
)paren
(brace
macro_line|#if 0&t;    /* Treat as custom */
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|600
)paren
(brace
id|paneltype
op_assign
id|Panel_800x600
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
macro_line|#endif
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel_1024x768
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|1024
)paren
(brace
id|paneltype
op_assign
id|Panel_1280x1024
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|paneltype
op_assign
id|Panel300_1280x960
suffix:semicolon
)brace
r_else
(brace
id|paneltype
op_assign
id|Panel310_1280x960
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
r_if
c_cond
(paren
(paren
id|pclk
op_eq
l_int|8100
)paren
op_logical_and
(paren
id|phb
op_eq
(paren
l_int|1688
op_minus
l_int|1280
)paren
)paren
op_logical_and
(paren
id|pvb
op_eq
(paren
l_int|802
op_minus
l_int|768
)paren
)paren
)paren
(brace
id|paneltype
op_assign
id|Panel_1280x768
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|800
)paren
(brace
r_if
c_cond
(paren
(paren
id|pclk
op_eq
l_int|6900
)paren
op_logical_and
(paren
id|phb
op_eq
(paren
l_int|1408
op_minus
l_int|1280
)paren
)paren
op_logical_and
(paren
id|pvb
op_eq
(paren
l_int|816
op_minus
l_int|800
)paren
)paren
)paren
(brace
id|paneltype
op_assign
id|Panel_1280x800
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1050
)paren
(brace
id|paneltype
op_assign
id|Panel310_1400x1050
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1200
)paren
(brace
id|paneltype
op_assign
id|Panel310_1600x1200
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* Save sync: This is used if &quot;Pass 1:1&quot; is off; in this case&n;&t;  * we always use the panel&squot;s native mode = this &quot;preferred mode&quot;&n;&t;  * we just have been analysing. Hence, we also need its sync.&n;&t;  */
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x47
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x18
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
l_int|0x47
)braket
op_amp
l_int|0x06
)paren
op_xor
l_int|0x06
)paren
op_lshift
l_int|5
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
id|havesync
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* What now? There is no digital separate output timing... */
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;LCD sense: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
id|cr37
op_or_assign
l_int|0xc0
suffix:semicolon
multiline_comment|/* Default */
)brace
)brace
multiline_comment|/* Check against our database; eg. Sanyo Z2 projector reports&n;       * 1024x768 as preferred mode, although it supports 1280x720&n;       * natively in non-HDCP mode. Treat such wrongly reporting&n;       * panels as custom and fixup actual maximum resolutions.&n;       */
r_if
c_cond
(paren
id|paneltype
op_ne
id|Panel_Custom
)paren
(brace
r_if
c_cond
(paren
id|indb
)paren
(brace
id|paneltype
op_assign
id|Panel_Custom
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|maxx
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|maxy
suffix:semicolon
multiline_comment|/* Leave preferred unchanged (MUST contain a valid mode!) */
)brace
)brace
multiline_comment|/* If we still don&squot;t know what panel this is, we take it&n;       * as a custom panel and derive the timing data from the&n;       * detailed timing blocks&n;       */
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel_Custom
)paren
(brace
r_int
id|i
comma
id|temp
comma
id|base
op_assign
l_int|0x36
suffix:semicolon
r_int
r_int
id|estpack
suffix:semicolon
r_const
r_int
r_int
id|estx
(braket
)braket
op_assign
(brace
l_int|720
comma
l_int|720
comma
l_int|640
comma
l_int|640
comma
l_int|640
comma
l_int|640
comma
l_int|800
comma
l_int|800
comma
l_int|800
comma
l_int|800
comma
l_int|832
comma
l_int|1024
comma
l_int|1024
comma
l_int|1024
comma
l_int|1024
comma
l_int|1280
comma
l_int|1152
)brace
suffix:semicolon
r_const
r_int
r_int
id|esty
(braket
)braket
op_assign
(brace
l_int|400
comma
l_int|400
comma
l_int|480
comma
l_int|480
comma
l_int|480
comma
l_int|480
comma
l_int|600
comma
l_int|600
comma
l_int|600
comma
l_int|600
comma
l_int|624
comma
l_int|768
comma
l_int|768
comma
l_int|768
comma
l_int|768
comma
l_int|1024
comma
l_int|870
)brace
suffix:semicolon
r_const
r_int
id|estclk
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|25100
comma
l_int|0
comma
l_int|31500
comma
l_int|31500
comma
l_int|36100
comma
l_int|40000
comma
l_int|50100
comma
l_int|49500
comma
l_int|0
comma
l_int|0
comma
l_int|65100
comma
l_int|75200
comma
l_int|78700
comma
l_int|135200
comma
l_int|0
)brace
suffix:semicolon
id|paneltype
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;CP_Supports64048075
op_assign
id|TRUE
suffix:semicolon
multiline_comment|/* Find the maximum resolution */
multiline_comment|/* 1. From Established timings */
id|estpack
op_assign
(paren
id|buffer
(braket
l_int|0x23
)braket
op_lshift
l_int|9
)paren
op_or
(paren
id|buffer
(braket
l_int|0x24
)braket
op_lshift
l_int|1
)paren
op_or
(paren
(paren
id|buffer
(braket
l_int|0x25
)braket
op_rshift
l_int|7
)paren
op_amp
l_int|0x01
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|estpack
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
(brace
r_if
c_cond
(paren
id|estx
(braket
l_int|16
op_minus
id|i
)braket
OG
id|SiS_Pr-&gt;CP_MaxX
)paren
(brace
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|estx
(braket
l_int|16
op_minus
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|esty
(braket
l_int|16
op_minus
id|i
)braket
OG
id|SiS_Pr-&gt;CP_MaxY
)paren
(brace
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|esty
(braket
l_int|16
op_minus
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|estclk
(braket
l_int|16
op_minus
id|i
)braket
OG
id|SiS_Pr-&gt;CP_MaxClock
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|estclk
(braket
l_int|16
op_minus
id|i
)braket
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* By default we drive the LCD at 75Hz in 640x480 mode; if&n;  &t;  * the panel does not provide this mode, use 60hz&n;&t;  */
r_if
c_cond
(paren
op_logical_neg
(paren
id|buffer
(braket
l_int|0x23
)braket
op_amp
l_int|0x04
)paren
)paren
(brace
id|SiS_Pr-&gt;CP_Supports64048075
op_assign
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* 2. From Standard Timings */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x26
suffix:semicolon
id|i
OL
l_int|0x36
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|i
)braket
op_ne
l_int|0x01
)paren
op_logical_and
(paren
id|buffer
(braket
id|i
op_plus
l_int|1
)braket
op_ne
l_int|0x01
)paren
)paren
(brace
id|temp
op_assign
(paren
id|buffer
(braket
id|i
)braket
op_plus
l_int|31
)paren
op_star
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|temp
OG
id|SiS_Pr-&gt;CP_MaxX
)paren
(brace
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|temp
suffix:semicolon
)brace
r_switch
c_cond
(paren
(paren
id|buffer
(braket
id|i
op_plus
l_int|1
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
)paren
(brace
r_case
l_int|0x03
suffix:colon
id|temp
op_assign
id|temp
op_star
l_int|9
op_div
l_int|16
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|temp
op_assign
id|temp
op_star
l_int|4
op_div
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|temp
op_assign
id|temp
op_star
l_int|3
op_div
l_int|4
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
OG
id|SiS_Pr-&gt;CP_MaxY
)paren
(brace
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|temp
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* Now extract the Detailed Timings and convert them into modes */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
comma
id|base
op_add_assign
l_int|18
)paren
(brace
multiline_comment|/* Is this a detailed timing block or a monitor descriptor? */
r_if
c_cond
(paren
id|buffer
(braket
id|base
)braket
op_logical_or
id|buffer
(braket
id|base
op_plus
l_int|1
)braket
op_logical_or
id|buffer
(braket
id|base
op_plus
l_int|2
)braket
)paren
(brace
id|xres
op_assign
id|buffer
(braket
id|base
op_plus
l_int|2
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|4
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|yres
op_assign
id|buffer
(braket
id|base
op_plus
l_int|5
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|7
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_assign
id|xres
suffix:semicolon
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_assign
id|xres
op_plus
(paren
id|buffer
(braket
id|base
op_plus
l_int|8
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|11
)braket
op_amp
l_int|0xc0
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_plus
(paren
id|buffer
(braket
id|base
op_plus
l_int|9
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|11
)braket
op_amp
l_int|0x30
)paren
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
op_assign
id|xres
op_plus
(paren
id|buffer
(braket
id|base
op_plus
l_int|3
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|4
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HBlankStart
(braket
id|i
)braket
op_assign
id|xres
op_plus
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;CP_HBlankEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
suffix:semicolon
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_assign
id|yres
suffix:semicolon
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
op_assign
id|yres
op_plus
(paren
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|10
)braket
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
)paren
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|11
)braket
op_amp
l_int|0x0c
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
op_plus
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|10
)braket
op_amp
l_int|0x0f
)paren
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|11
)braket
op_amp
l_int|0x03
)paren
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
op_assign
id|yres
op_plus
(paren
id|buffer
(braket
id|base
op_plus
l_int|6
)braket
op_or
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|7
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VBlankStart
(braket
id|i
)braket
op_assign
id|yres
op_plus
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;CP_VBlankEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
suffix:semicolon
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|base
)braket
op_or
(paren
id|buffer
(braket
id|base
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
)paren
op_star
l_int|10
suffix:semicolon
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
op_assign
id|TRUE
suffix:semicolon
multiline_comment|/* Sort out invalid timings, interlace and too high clocks */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_amp
l_int|7
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
l_int|162500
)paren
)paren
op_logical_or
(paren
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
l_int|108200
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
OG
l_int|1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
OG
l_int|1600
)paren
)paren
)paren
)paren
op_logical_or
(paren
id|buffer
(braket
id|base
op_plus
l_int|17
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
op_assign
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;CP_HaveCustomData
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
id|xres
OG
id|SiS_Pr-&gt;CP_MaxX
)paren
(brace
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|xres
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
OG
id|SiS_Pr-&gt;CP_MaxY
)paren
(brace
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|yres
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_MaxClock
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;CP_PreferredX
op_eq
id|xres
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;CP_PreferredY
op_eq
id|yres
)paren
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredIndex
op_assign
id|i
suffix:semicolon
id|SiS_MakeClockRegs
c_func
(paren
id|pSiS-&gt;pScrn
comma
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
comma
op_amp
id|SiS_Pr-&gt;CP_PrefSR2B
comma
op_amp
id|SiS_Pr-&gt;CP_PrefSR2C
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_PrefClock
op_assign
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
op_div
l_int|1000
)paren
op_plus
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Extract the sync polarisation information. This only works&n;&t;           * if the Flags indicate a digital separate output.&n;&t;           */
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|17
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x18
)paren
(brace
id|SiS_Pr-&gt;CP_HSync_P
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|base
op_plus
l_int|17
)braket
op_amp
l_int|0x02
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CP_VSync_P
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|base
op_plus
l_int|17
)braket
op_amp
l_int|0x04
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CP_SyncValid
(braket
id|i
)braket
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_eq
id|SiS_Pr-&gt;CP_PreferredIndex
)paren
op_logical_and
(paren
op_logical_neg
id|havesync
)paren
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|17
)braket
op_amp
l_int|0x06
)paren
op_xor
l_int|0x06
)paren
op_lshift
l_int|5
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
id|havesync
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;CP_SyncValid
(braket
id|i
)braket
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
id|buffer
(braket
id|base
)braket
)paren
op_logical_and
(paren
op_logical_neg
id|buffer
(braket
id|base
op_plus
l_int|1
)braket
)paren
op_logical_and
(paren
op_logical_neg
id|buffer
(braket
id|base
op_plus
l_int|2
)braket
)paren
op_logical_and
(paren
op_logical_neg
id|buffer
(braket
id|base
op_plus
l_int|4
)braket
)paren
)paren
(brace
multiline_comment|/* Maximum pixclock from Monitor Range Limits */
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|base
op_plus
l_int|3
)braket
op_eq
l_int|0xfd
)paren
op_logical_and
(paren
id|buffer
(braket
id|base
op_plus
l_int|9
)braket
op_ne
l_int|0xff
)paren
)paren
(brace
r_int
id|maxclk
op_assign
id|buffer
(braket
id|base
op_plus
l_int|9
)braket
op_star
l_int|10
suffix:semicolon
multiline_comment|/* More than 170 is not supported anyway */
r_if
c_cond
(paren
id|maxclk
op_le
l_int|170
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|maxclk
op_star
l_int|1000
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_MaxX
op_logical_and
id|SiS_Pr-&gt;CP_MaxY
)paren
(brace
id|paneltype
op_assign
id|Panel_Custom
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_Pr-&gt;CP_Vendor
op_assign
id|panelvendor
suffix:semicolon
id|SiS_Pr-&gt;CP_Product
op_assign
id|panelproduct
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|paneltype
op_logical_and
id|checkexpand
)paren
(brace
multiline_comment|/* If any of the Established low-res modes is supported, the&n;&t;  * panel can scale automatically. For 800x600 panels, we only &n;&t;  * check the even lower ones.&n;&t;  */
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel_800x600
)paren
(brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x23
)braket
op_amp
l_int|0xfc
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x23
)braket
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* Analyze EDID V2 */
r_case
l_int|4
suffix:colon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|checkedid2
c_func
(paren
id|buffer
)paren
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: EDID corrupt&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x03
)paren
(brace
id|index
op_assign
l_int|0x42
op_plus
l_int|3
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: Display supports TMDS input on primary interface&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x30
)paren
(brace
id|index
op_assign
l_int|0x46
op_plus
l_int|3
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: Display supports TMDS input on secondary interface&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;LCD sense: Display does not support TMDS video interface (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x41
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;CP_Vendor
op_assign
id|panelvendor
op_assign
id|buffer
(braket
l_int|2
)braket
op_or
(paren
id|buffer
(braket
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_Product
op_assign
id|panelproduct
op_assign
id|buffer
(braket
l_int|3
)braket
op_or
(paren
id|buffer
(braket
l_int|4
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|paneltype
op_assign
id|Panel_Custom
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|SiS_Pr-&gt;CP_PreferredX
op_assign
id|xres
op_assign
id|buffer
(braket
l_int|0x76
)braket
op_or
(paren
id|buffer
(braket
l_int|0x77
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|SiS_Pr-&gt;CP_PreferredY
op_assign
id|yres
op_assign
id|buffer
(braket
l_int|0x78
)braket
op_or
(paren
id|buffer
(braket
l_int|0x79
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|xres
)paren
(brace
macro_line|#if 0
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|600
)paren
(brace
id|paneltype
op_assign
id|Panel_800x600
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
macro_line|#endif
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel_1024x768
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x960
suffix:semicolon
)brace
r_else
(brace
id|paneltype
op_assign
id|Panel300_1280x960
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|1024
)paren
(brace
id|paneltype
op_assign
id|Panel_1280x1024
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* 1280x768 treated as custom here */
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1050
)paren
(brace
id|paneltype
op_assign
id|Panel310_1400x1050
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1200
)paren
(brace
id|paneltype
op_assign
id|Panel310_1600x1200
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* Determine if RGB18 or RGB24 */
r_if
c_cond
(paren
id|index
)paren
(brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|index
)braket
op_eq
l_int|0x20
)paren
op_logical_or
(paren
id|buffer
(braket
id|index
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|cr37
op_or_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|checkexpand
)paren
(brace
multiline_comment|/* TODO - for now, we let the panel scale */
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
multiline_comment|/* Now seek 4-Byte Timing codes and extract sync pol info */
id|index
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x20
)paren
(brace
multiline_comment|/* skip Luminance Table (if provided) */
id|lumsize
op_assign
id|buffer
(braket
l_int|0x80
)braket
op_amp
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x80
)braket
op_amp
l_int|0x80
)paren
(brace
id|lumsize
op_mul_assign
l_int|3
suffix:semicolon
)brace
id|lumsize
op_increment
suffix:semicolon
multiline_comment|/* luminance header byte */
id|index
op_add_assign
id|lumsize
suffix:semicolon
)brace
macro_line|#if 0 /* &quot;pixel rate&quot; = pixel clock? */
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x1c
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x1c
)paren
op_rshift
l_int|2
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|8
)paren
op_plus
l_int|6
)braket
op_logical_and
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|8
)paren
op_plus
l_int|7
)braket
op_amp
l_int|0x0f
)paren
)paren
(brace
r_int
id|clk
op_assign
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|8
)paren
op_plus
l_int|6
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|8
)paren
op_plus
l_int|7
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|4
)paren
)paren
op_star
l_int|1000
suffix:semicolon
r_if
c_cond
(paren
id|clk
OG
id|SiS_Pr-&gt;CP_MaxClock
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|clk
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
id|index
op_add_assign
(paren
(paren
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x1c
)paren
op_rshift
l_int|2
)paren
op_star
l_int|8
)paren
suffix:semicolon
multiline_comment|/* skip Frequency Ranges */
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x03
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x03
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|27
)paren
op_plus
l_int|9
)braket
)paren
op_logical_or
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|27
)paren
op_plus
l_int|10
)braket
)paren
)paren
(brace
r_int
id|clk
op_assign
(paren
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|27
)paren
op_plus
l_int|9
)braket
)paren
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
(paren
id|i
op_star
l_int|27
)paren
op_plus
l_int|9
)braket
)paren
op_lshift
l_int|8
)paren
)paren
op_star
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|clk
OG
id|SiS_Pr-&gt;CP_MaxClock
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|clk
suffix:semicolon
)brace
)brace
)brace
)brace
id|index
op_add_assign
(paren
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x03
)paren
op_star
l_int|27
)paren
suffix:semicolon
multiline_comment|/* skip Detailed Range Limits */
id|numcodes
op_assign
(paren
id|buffer
(braket
l_int|0x7f
)braket
op_amp
l_int|0xf8
)paren
op_rshift
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|numcodes
)paren
(brace
id|myindex
op_assign
id|index
suffix:semicolon
id|seekcode
op_assign
(paren
id|xres
op_minus
l_int|256
)paren
op_div
l_int|16
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|numcodes
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|buffer
(braket
id|myindex
)braket
op_eq
id|seekcode
)paren
(brace
r_break
suffix:semicolon
)brace
id|myindex
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buffer
(braket
id|myindex
)braket
op_eq
id|seekcode
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
id|myindex
op_plus
l_int|1
)braket
op_amp
l_int|0x0c
)paren
op_xor
l_int|0x0c
)paren
op_lshift
l_int|4
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
id|havesync
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;LCD sense: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;LCD sense: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* Check against our database; Eg. Sanyo projector reports&n;       * 1024x768 in non-HDPC mode, although it supports 1280x720.&n;       * Treat such wrongly reporting panels as custom.&n;       */
r_if
c_cond
(paren
id|paneltype
op_ne
id|Panel_Custom
)paren
(brace
r_int
id|maxx
comma
id|maxy
comma
id|prefx
comma
id|prefy
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_FindPanelFromDB
c_func
(paren
id|pSiS
comma
id|panelvendor
comma
id|panelproduct
comma
op_amp
id|maxx
comma
op_amp
id|maxy
comma
op_amp
id|prefx
comma
op_amp
id|prefy
)paren
)paren
)paren
(brace
id|paneltype
op_assign
id|Panel_Custom
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxX
op_assign
id|maxx
suffix:semicolon
id|SiS_Pr-&gt;CP_MaxY
op_assign
id|maxy
suffix:semicolon
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
multiline_comment|/* Leave preferred unchanged (MUST be a valid mode!) */
)brace
)brace
multiline_comment|/* Now seek the detailed timing descriptions for custom panels */
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel_Custom
)paren
(brace
id|SiS_Pr-&gt;CP_Supports64048075
op_assign
id|TRUE
suffix:semicolon
id|index
op_add_assign
(paren
id|numcodes
op_star
l_int|4
)paren
suffix:semicolon
id|numcodes
op_assign
id|buffer
(braket
l_int|0x7f
)braket
op_amp
l_int|0x07
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|numcodes
suffix:semicolon
id|i
op_increment
comma
id|index
op_add_assign
l_int|18
)paren
(brace
id|xres
op_assign
id|buffer
(braket
id|index
op_plus
l_int|2
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|4
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|yres
op_assign
id|buffer
(braket
id|index
op_plus
l_int|5
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|7
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_assign
id|xres
suffix:semicolon
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_assign
id|xres
op_plus
(paren
id|buffer
(braket
id|index
op_plus
l_int|8
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|11
)braket
op_amp
l_int|0xc0
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_plus
(paren
id|buffer
(braket
id|index
op_plus
l_int|9
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|11
)braket
op_amp
l_int|0x30
)paren
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
op_assign
id|xres
op_plus
(paren
id|buffer
(braket
id|index
op_plus
l_int|3
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|4
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_HBlankStart
(braket
id|i
)braket
op_assign
id|xres
op_plus
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;CP_HBlankEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
suffix:semicolon
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_assign
id|yres
suffix:semicolon
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
op_assign
id|yres
op_plus
(paren
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|10
)braket
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
)paren
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|11
)braket
op_amp
l_int|0x0c
)paren
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
op_plus
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|10
)braket
op_amp
l_int|0x0f
)paren
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|11
)braket
op_amp
l_int|0x03
)paren
op_lshift
l_int|4
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
op_assign
id|yres
op_plus
(paren
id|buffer
(braket
id|index
op_plus
l_int|6
)braket
op_or
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|7
)braket
op_amp
l_int|0x0f
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_VBlankStart
(braket
id|i
)braket
op_assign
id|yres
op_plus
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;CP_VBlankEnd
(braket
id|i
)braket
op_assign
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
suffix:semicolon
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|index
)braket
op_or
(paren
id|buffer
(braket
id|index
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
)paren
op_star
l_int|10
suffix:semicolon
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_amp
l_int|7
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
op_ge
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
op_logical_or
(paren
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
l_int|162500
)paren
)paren
op_logical_or
(paren
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301C
)paren
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
l_int|108200
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
OG
l_int|1024
)paren
)paren
)paren
)paren
op_logical_or
(paren
id|buffer
(braket
id|index
op_plus
l_int|17
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
op_assign
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;CP_HaveCustomData
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
OG
id|SiS_Pr-&gt;CP_MaxClock
)paren
(brace
id|SiS_Pr-&gt;CP_MaxClock
op_assign
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;CP_PreferredX
op_eq
id|xres
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;CP_PreferredY
op_eq
id|yres
)paren
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredIndex
op_assign
id|i
suffix:semicolon
id|SiS_MakeClockRegs
c_func
(paren
id|pSiS-&gt;pScrn
comma
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
comma
op_amp
id|SiS_Pr-&gt;CP_PrefSR2B
comma
op_amp
id|SiS_Pr-&gt;CP_PrefSR2C
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_PrefClock
op_assign
(paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
op_div
l_int|1000
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|havesync
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
id|index
op_plus
l_int|17
)braket
op_amp
l_int|0x06
)paren
op_xor
l_int|0x06
)paren
op_lshift
l_int|5
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
id|havesync
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;CP_HSync_P
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|index
op_plus
l_int|17
)braket
op_amp
l_int|0x02
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CP_VSync_P
(braket
id|i
)braket
op_assign
(paren
id|buffer
(braket
id|index
op_plus
l_int|17
)braket
op_amp
l_int|0x04
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CP_SyncValid
(braket
id|i
)braket
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* 1280x960 panels are always RGB24, unable to scale and use&n;    * high active sync polarity&n;    */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel310_1280x960
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel300_1280x960
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Non-standard LCD/DVI-D timing data no. %d:&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;   HDisplay %d HSync %d HSyncEnd %d HTotal %d&bslash;n&quot;
comma
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;   VDisplay %d VSync %d VSyncEnd %d VTotal %d&bslash;n&quot;
comma
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;   Pixel clock: %3.3fMhz&bslash;n&quot;
comma
(paren
r_float
)paren
id|SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
op_div
l_int|1000
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;   To use this, add &bslash;&quot;%dx%d&bslash;&quot; to the list of Modes in the Screen section&bslash;n&quot;
comma
id|SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
comma
id|SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|paneltype
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;CP_PreferredX
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredX
op_assign
id|SiS_Pr-&gt;CP_MaxX
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;CP_PreferredY
)paren
(brace
id|SiS_Pr-&gt;CP_PreferredY
op_assign
id|SiS_Pr-&gt;CP_MaxY
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
id|paneltype
)paren
suffix:semicolon
id|cr37
op_and_assign
l_int|0xf1
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
comma
l_int|0x0c
comma
id|cr37
)paren
suffix:semicolon
id|SiS_Pr-&gt;PanelSelfDetected
op_assign
id|TRUE
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsgVerb
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_int|3
comma
l_string|&quot;LCD sense: [DDC LCD results: 0x%02x, 0x%02x]&bslash;n&quot;
comma
id|paneltype
comma
id|cr37
)paren
suffix:semicolon
macro_line|#endif&t;
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
op_complement
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseVGA2DDC
id|SiS_SenseVGA2DDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
)paren
(brace
id|USHORT
id|DDCdatatype
comma
id|flag
suffix:semicolon
id|BOOLEAN
id|foundcrt
op_assign
id|FALSE
suffix:semicolon
r_int
id|retry
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS-&gt;VBFlags
comma
id|pSiS-&gt;VGAEngine
comma
l_int|2
comma
l_int|0
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Probe supported DA&squot;s */
id|flag
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
multiline_comment|/* EDID V2 (FP) */
id|DDCdatatype
op_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
multiline_comment|/* EDID V2 (P&amp;D-D Monitor) */
id|DDCdatatype
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EDID V1 */
id|DDCdatatype
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;VGA2 sense: Do DDC answer&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
multiline_comment|/* no DDC support (or no device attached) */
)brace
multiline_comment|/* Read the entire EDID */
id|retry
op_assign
l_int|2
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|DDCdatatype
comma
id|buffer
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;VGA2 sense: DDC read failed (attempt %d), %s&bslash;n&quot;
comma
(paren
l_int|3
op_minus
id|retry
)paren
comma
(paren
id|retry
op_eq
l_int|1
)paren
ques
c_cond
l_string|&quot;giving up&quot;
suffix:colon
l_string|&quot;retrying&quot;
)paren
suffix:semicolon
id|retry
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|retry
op_eq
l_int|0
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
r_else
r_break
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
(brace
suffix:semicolon
)brace
multiline_comment|/* Analyze EDID. We don&squot;t have many chances to&n;    * distinguish a flat panel from a CRT...&n;    */
r_switch
c_cond
(paren
id|DDCdatatype
)paren
(brace
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|checkedid1
c_func
(paren
id|buffer
)paren
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_ERROR
comma
l_string|&quot;VGA2 sense: EDID corrupt&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
(brace
multiline_comment|/* Display uses digital input */
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_ERROR
comma
l_string|&quot;VGA2 sense: Attached display expects digital input&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;CP_Vendor
op_assign
id|buffer
(braket
l_int|9
)braket
op_or
(paren
id|buffer
(braket
l_int|8
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_Product
op_assign
id|buffer
(braket
l_int|10
)braket
op_or
(paren
id|buffer
(braket
l_int|11
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|foundcrt
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|checkedid2
c_func
(paren
id|buffer
)paren
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_ERROR
comma
l_string|&quot;VGA2 sense: EDID corrupt&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_ne
l_int|0x01
)paren
op_logical_and
multiline_comment|/* Display does not support analog input */
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_ne
l_int|0x02
)paren
op_logical_and
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_ne
l_int|0x10
)paren
op_logical_and
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_ne
l_int|0x20
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_ERROR
comma
l_string|&quot;VGA2 sense: Attached display does not support analog input (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x41
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;CP_Vendor
op_assign
id|buffer
(braket
l_int|2
)braket
op_or
(paren
id|buffer
(braket
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;CP_Product
op_assign
id|buffer
(braket
l_int|3
)braket
op_or
(paren
id|buffer
(braket
l_int|4
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|foundcrt
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|foundcrt
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
r_void
DECL|function|SiS_SetCH70xxANDOR
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
comma
id|USHORT
id|tempbh
)paren
(brace
id|USHORT
id|tempbl
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetCH70xx
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
)paren
suffix:semicolon
id|tempbl
op_assign
(paren
(paren
(paren
id|tempbl
op_amp
id|tempbh
)paren
op_lshift
l_int|8
)paren
op_or
id|tempax
)paren
suffix:semicolon
id|SiS_SetCH70xx
c_func
(paren
id|SiS_Pr
comma
id|tempbl
)paren
suffix:semicolon
)brace
multiline_comment|/* Generic I2C functions for Chrontel &amp; DDC --------- */
r_static
r_void
DECL|function|SiS_SetSwitchDDC2
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ReadDDC1Bit
id|SiS_ReadDDC1Bit
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
)paren
op_amp
l_int|0x02
)paren
op_rshift
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Set I2C start condition */
multiline_comment|/* This is done by a SD high-to-low transition while SC is high */
r_static
id|USHORT
DECL|function|SiS_SetStart
id|SiS_SetStart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* (SC-&gt;low)  */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* SD-&gt;high */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* SC-&gt;high */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SD-&gt;low = start condition */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* (SC-&gt;low) */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Set I2C stop condition */
multiline_comment|/* This is done by a SD low-to-high transition while SC is high */
r_static
id|USHORT
DECL|function|SiS_SetStop
id|SiS_SetStop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* (SC-&gt;low) */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SD-&gt;low   */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* SC-&gt;high  */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* SD-&gt;high = stop condition */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* (SC-&gt;high) */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Write 8 bits of data */
r_static
id|USHORT
DECL|function|SiS_WriteDDC2Data
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|flag
comma
id|temp
suffix:semicolon
id|flag
op_assign
l_int|0x80
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SC-&gt;low */
r_if
c_cond
(paren
id|tempax
op_amp
id|flag
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* Write bit (1) to SD */
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* Write bit (0) to SD */
)brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SC-&gt;high */
id|flag
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_CheckACK
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* Check acknowledge */
r_return
id|temp
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_ReadDDC2Data
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|temp
comma
id|getdata
suffix:semicolon
id|getdata
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|getdata
op_lshift_assign
l_int|1
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
(brace
id|getdata
op_or_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_return
id|getdata
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_SetSCLKLow
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NClk
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SetSCLKLow()  */
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_SetSCLKHigh
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
comma
id|watchdog
op_assign
l_int|1000
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NClk
comma
id|SiS_Pr-&gt;SiS_DDC_Clk
)paren
suffix:semicolon
multiline_comment|/* SetSCLKHigh()  */
r_do
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|temp
op_amp
id|SiS_Pr-&gt;SiS_DDC_Clk
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|watchdog
)paren
(brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;SetClkHigh failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Check I2C acknowledge */
multiline_comment|/* Returns 0 if ack ok, non-0 if ack not ok */
r_static
id|USHORT
DECL|function|SiS_CheckACK
id|SiS_CheckACK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|tempah
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* (SC-&gt;low) */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|SiS_Pr-&gt;SiS_DDC_NData
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* (SD-&gt;high) */
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SC-&gt;high = clock impulse for ack */
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
multiline_comment|/* Read SD */
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SC-&gt;low = end of clock impulse */
r_if
c_cond
(paren
id|tempah
op_amp
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Ack OK if bit = 0 */
r_else
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* End of I2C functions ----------------------- */
multiline_comment|/* =============== SiS 315/330 O.E.M. ================= */
macro_line|#ifdef SIS315H
r_static
id|USHORT
DECL|function|GetRAMDACromptr
id|GetRAMDACromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x128
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x12a
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x1a8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x1aa
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDromptr
id|GetLCDromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x120
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x122
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x1a0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x1a2
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetTVromptr
id|GetTVromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x114
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x11a
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x194
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x19a
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDPtrIndexBIOS
id|GetLCDPtrIndexBIOS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|index
suffix:semicolon
r_if
c_cond
(paren
(paren
id|IS_SIS650
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|index
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0xf0
)paren
)paren
(brace
id|index
op_rshift_assign
l_int|4
suffix:semicolon
id|index
op_mul_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
)brace
)brace
id|index
op_assign
id|SiS_GetBIOSLCDResInfo
c_func
(paren
id|SiS_Pr
)paren
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|index
op_sub_assign
l_int|5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1600x1200
)paren
(brace
id|index
op_sub_assign
l_int|6
suffix:semicolon
)brace
id|index
op_decrement
suffix:semicolon
id|index
op_mul_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDPtrIndex
id|GetLCDPtrIndex
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
(paren
(paren
id|SiS_GetBIOSLCDResInfo
c_func
(paren
id|SiS_Pr
)paren
op_amp
l_int|0x0F
)paren
op_minus
l_int|1
)paren
op_star
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetTVPtrIndex
id|GetTVPtrIndex
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|index
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|index
op_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToYPbPr525750
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
id|index
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
id|ULONG
DECL|function|GetOEMTVPtr661_2_GEN
id|GetOEMTVPtr661_2_GEN
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|addme
)paren
(brace
id|USHORT
id|index
op_assign
l_int|0
comma
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|index
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|index
op_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|index
op_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|index
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSC1024
)paren
(brace
id|index
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|index
op_assign
l_int|7
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
(brace
id|index
op_add_assign
id|addme
suffix:semicolon
id|temp
op_increment
suffix:semicolon
)brace
id|temp
op_add_assign
l_int|0x0100
suffix:semicolon
)brace
r_return
(paren
id|ULONG
)paren
(paren
id|index
op_or
(paren
id|temp
op_lshift
l_int|16
)paren
)paren
suffix:semicolon
)brace
r_static
id|ULONG
DECL|function|GetOEMTVPtr661_2_OLD
id|GetOEMTVPtr661_2_OLD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_return
id|GetOEMTVPtr661_2_GEN
c_func
(paren
id|SiS_Pr
comma
l_int|8
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_static
id|ULONG
id|GetOEMTVPtr661_2_NEW
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_return
id|GetOEMTVPtr661_2_GEN
c_func
(paren
id|SiS_Pr
comma
l_int|6
)paren
suffix:semicolon
)brace
macro_line|#endif
r_static
r_int
DECL|function|GetOEMTVPtr661
id|GetOEMTVPtr661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_int
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|index
op_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525i
)paren
(brace
id|index
op_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|index
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|index
op_assign
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetHiVision
)paren
(brace
id|index
op_assign
l_int|10
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetHiVision
)paren
(brace
id|index
op_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525i
)paren
(brace
id|index
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr525p
)paren
(brace
id|index
op_assign
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetYPbPr750p
)paren
(brace
id|index
op_assign
l_int|10
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetDelayComp
id|SetDelayComp
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|delay
op_assign
l_int|0
comma
id|index
comma
id|myindex
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|dochiptest
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
l_int|0xbf
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
multiline_comment|/* Find delay (from ROM, internal tables, PCI subsystem) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
multiline_comment|/* ------------ VGA */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
id|romptr
op_assign
id|GetRAMDACromptr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
id|delay
op_assign
l_int|0x0a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x00
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|delay
op_assign
l_int|0x0c
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x0c
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|delay
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/* ----------&t;LCD/LCDA */
id|BOOLEAN
id|gotitfrompci
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* Could we detect a PDC for LCD or did we get a user-defined? If yes, use it */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PDC
op_ne
op_minus
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0xf0
comma
(paren
(paren
id|SiS_Pr-&gt;PDC
op_rshift
l_int|1
)paren
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
l_int|0x7f
comma
(paren
(paren
id|SiS_Pr-&gt;PDC
op_amp
l_int|0x01
)paren
op_lshift
l_int|7
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;PDCA
op_ne
op_minus
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x0f
comma
(paren
(paren
id|SiS_Pr-&gt;PDCA
op_lshift
l_int|3
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
l_int|0xbf
comma
(paren
(paren
id|SiS_Pr-&gt;PDCA
op_amp
l_int|0x01
)paren
op_lshift
l_int|6
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
multiline_comment|/* Custom Panel? */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_Custom
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|delay
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_le
l_int|1280
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelYRes
op_le
l_int|1024
)paren
)paren
(brace
id|delay
op_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x0f
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x0c
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
id|delay
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x01
suffix:semicolon
)brace
r_else
id|delay
op_assign
l_int|0x03
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0xf0
comma
id|delay
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* This is a piece of typical SiS crap: They code the OEM LCD&n;      * delay into the code, at no defined place in the BIOS.&n;      * We now have to start doing a PCI subsystem check here.&n;      */
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
)paren
(brace
r_case
id|CUT_COMPAQ1280
suffix:colon
r_case
id|CUT_COMPAQ12802
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
id|gotitfrompci
op_assign
id|TRUE
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
id|delay
op_assign
l_int|0x03
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CUT_CLEVO1400
suffix:colon
r_case
id|CUT_CLEVO14002
suffix:colon
id|gotitfrompci
op_assign
id|TRUE
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
id|delay
op_assign
l_int|0x02
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUT_CLEVO1024
suffix:colon
r_case
id|CUT_CLEVO10242
suffix:colon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
id|gotitfrompci
op_assign
id|TRUE
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
id|delay
op_assign
l_int|0x33
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
id|delay
)paren
suffix:semicolon
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* Could we find it through the PCI ID? If no, use ROM or table */
r_if
c_cond
(paren
op_logical_neg
id|gotitfrompci
)paren
(brace
id|index
op_assign
id|GetLCDPtrIndexBIOS
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|myindex
op_assign
id|GetLCDPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
multiline_comment|/* Always use the second pointer on 650; some BIOSes */
multiline_comment|/* still carry old 301 data at the first location    */
multiline_comment|/* romptr = SISGETROMW(0x120);                       */
multiline_comment|/* if(SiS_Pr-&gt;SiS_VBType &amp; VB_SIS302LV)              */
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x122
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
(paren
id|romptr
op_plus
id|index
)paren
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_650301LV
(braket
id|myindex
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_651301LV
(braket
id|myindex
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_651302LV
(braket
id|myindex
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x1024
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x768
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_1280x960
)paren
)paren
(brace
multiline_comment|/* Data for 1280x1024 wrong in 301B BIOS */
id|romptr
op_assign
id|GetLCDromptr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
(paren
id|romptr
op_plus
id|index
)paren
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
id|delay
op_assign
l_int|0x00
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_301
(braket
id|myindex
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x01
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_le
id|SIS_315PRO
)paren
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_3xx301LV
(braket
id|myindex
)braket
suffix:semicolon
)brace
r_else
id|delay
op_assign
id|SiS310_LCDDelayCompensation_650301LV
(braket
id|myindex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x01
suffix:semicolon
)brace
multiline_comment|/* ? */
r_else
id|delay
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x01
suffix:semicolon
)brace
r_else
id|delay
op_assign
id|SiS310_LCDDelayCompensation_3xx301B
(braket
id|myindex
)braket
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* got it from PCI */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
(paren
(paren
id|delay
op_lshift
l_int|4
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/* ------------ TV */
id|index
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsNotM650orLater
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
multiline_comment|/* Always use the second pointer on 650; some BIOSes */
multiline_comment|/* still carry old 301 data at the first location    */
multiline_comment|/* romptr = SISGETROMW(0x114);&t;&t;&t;   */
multiline_comment|/* if(SiS_Pr-&gt;SiS_VBType &amp; VB_SIS302LV)              */
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x11a
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301B
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
)paren
(brace
r_case
id|CUT_COMPAQ1280
suffix:colon
r_case
id|CUT_COMPAQ12802
suffix:colon
r_case
id|CUT_CLEVO1400
suffix:colon
r_case
id|CUT_CLEVO14002
suffix:colon
id|delay
op_assign
l_int|0x02
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUT_CLEVO1024
suffix:colon
r_case
id|CUT_CLEVO10242
suffix:colon
id|delay
op_assign
l_int|0x03
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|delay
op_assign
id|SiS310_TVDelayCompensation_651301LV
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_651302LV
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
id|romptr
op_assign
id|GetTVromptr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_LVDS
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_740301B
(braket
id|index
)braket
suffix:semicolon
multiline_comment|/* LV: use 301 data? BIOS bug? */
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301B
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301C
)paren
(brace
id|delay
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_LCDAEnabled
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
id|dochiptest
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
r_else
r_return
suffix:semicolon
multiline_comment|/* Write delay */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
id|dochiptest
)paren
(brace
id|temp
op_assign
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|8
)paren
(brace
multiline_comment|/* 1400x1050 BIOS (COMPAL) */
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
id|delay
op_or_assign
l_int|0xb0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp
op_eq
l_int|6
)paren
(brace
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
id|delay
op_or_assign
l_int|0xc0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp
OG
l_int|7
)paren
(brace
multiline_comment|/* 1280x1024 BIOS (which one?) */
id|delay
op_assign
l_int|0x35
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
)paren
(brace
id|delay
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SetAntiFlicker
id|SetAntiFlicker
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|temp1
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetYPbPr750p
op_or
id|TVSetYPbPr525p
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVFlickerIndex
suffix:semicolon
)brace
r_else
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVFlickerIndex
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC/YPbPr, 1: PAL, 2: HiTV */
id|temp1
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|temp1
op_assign
id|GetOEMTVPtr661
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp1
op_rshift_assign
l_int|1
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x260
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_760
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x360
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x192
)paren
suffix:semicolon
)brace
r_else
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x112
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|temp1
op_lshift_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|temp1
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS310_TVAntiFlick1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0x8f
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetEdgeEnhance
id|SetEdgeEnhance
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|temp1
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|temp1
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC/YPbPr, 1: PAL, 2: HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVEdgeIndex
suffix:semicolon
)brace
r_else
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVEdgeIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x26c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_760
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x36c
)paren
suffix:semicolon
)brace
id|temp1
op_assign
id|GetOEMTVPtr661
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp1
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x1a4
)paren
suffix:semicolon
)brace
r_else
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x124
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|temp1
op_lshift_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|temp1
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS310_TVEdge1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|5
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[7:5] */
)brace
r_static
r_void
DECL|function|SetYFilter
id|SetYFilter
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|i
comma
id|j
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVYFilterIndex
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVYFilterIndex
suffix:semicolon
)brace
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC/YPbPr, 1: PAL, 2: HiTV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
id|temp
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* NTSC-J uses PAL */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|temp
op_assign
l_int|3
suffix:semicolon
)brace
multiline_comment|/* PAL-M */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|temp
op_assign
l_int|4
suffix:semicolon
)brace
multiline_comment|/* PAL-N */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|temp
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* HiVision uses PAL */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SetPhaseIncr
id|SetPhaseIncr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|i
comma
id|j
comma
id|resinfo
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|ULONG
id|lindex
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* NTSC-J data not in BIOS, and already set in SetGroup2 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetNTSCJ
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
op_logical_or
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|lindex
op_assign
id|GetOEMTVPtr661_2_OLD
c_func
(paren
id|SiS_Pr
)paren
op_amp
l_int|0xffff
suffix:semicolon
id|lindex
op_lshift_assign
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS661_TVPhase
(braket
id|lindex
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* PAL-M, PAL-N not in BIOS, and already set in SetGroup2 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetPALM
op_or
id|TVSetPALN
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* 0: NTSC Graphics, 1: NTSC Text,    2: PAL Graphics,&n;   * 3: PAL Text,      4: HiTV Graphics 5: HiTV Text&n;   */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x116
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x196
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x11c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x19c
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x116
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x196
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_lshift
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
id|temp
op_mod
l_int|2
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0:NTSC, 1:PAL, 2:HiTV */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetTVSimuMode
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetPAL
op_or
id|TVSetYPbPr525p
op_or
id|TVSetYPbPr750p
)paren
)paren
)paren
op_logical_and
(paren
id|ModeNo
OG
l_int|0x13
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_640x480
)paren
op_logical_or
(paren
id|resinfo
op_eq
id|SIS_RI_800x600
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x31
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x32
comma
l_int|0xf0
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x33
comma
l_int|0xf5
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x34
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x31
comma
l_int|0x1e
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x32
comma
l_int|0x8b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x33
comma
l_int|0xfb
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x34
comma
l_int|0x7b
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SetDelayComp661
id|SetDelayComp661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RTI
)paren
(brace
id|USHORT
id|delay
op_assign
l_int|0
comma
id|romptr
op_assign
l_int|0
comma
id|index
comma
id|lcdpdcindex
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToRAMDAC
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* 1. New ROM: VGA2 and LCD/LCDA-Pass1:1 */
multiline_comment|/* (If a custom mode is used, Pass1:1 is always set; hence we do this:) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
id|index
op_assign
l_int|25
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RTI
comma
id|HwInfo
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_if
c_cond
(paren
id|index
OL
l_int|25
)paren
(brace
id|index
op_assign
l_int|25
suffix:semicolon
)brace
id|index
op_assign
(paren
(paren
id|index
op_div
l_int|25
)paren
op_minus
l_int|1
)paren
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x5b
)braket
op_amp
l_int|0x80
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToRAMDAC
op_or
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x104
)paren
suffix:semicolon
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToRAMDAC
op_or
id|SetCRT2ToLCD
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0xf0
comma
(paren
(paren
id|delay
op_rshift
l_int|1
)paren
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
l_int|0x7f
comma
(paren
(paren
id|delay
op_amp
l_int|0x01
)paren
op_lshift
l_int|7
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x0f
comma
(paren
(paren
id|delay
op_lshift
l_int|3
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
l_int|0xbf
comma
(paren
(paren
id|delay
op_amp
l_int|0x01
)paren
op_lshift
l_int|6
)paren
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
)brace
multiline_comment|/* 2. Old ROM: VGA2 and LCD/LCDA-Pass 1:1 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|delay
op_assign
l_int|0x04
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|delay
op_assign
l_int|0x04
suffix:semicolon
)brace
r_else
id|delay
op_assign
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RTI
)braket
dot
id|Ext_PDC
op_rshift
l_int|4
)paren
suffix:semicolon
id|delay
op_or_assign
(paren
id|delay
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/* 3. TV */
id|index
op_assign
id|GetOEMTVPtr661
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x106
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_UMC
)paren
(brace
id|romptr
op_add_assign
l_int|12
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
l_int|3
)paren
(brace
id|delay
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/* 4. LCD, LCDA (for new ROM only LV and non-Pass 1:1) */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|Panel_Custom
)paren
op_logical_and
(paren
(paren
id|romptr
op_assign
id|GetLCDStructPtr661_2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
)paren
(brace
id|lcdpdcindex
op_assign
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_UMC
)paren
ques
c_cond
l_int|14
suffix:colon
l_int|12
suffix:semicolon
multiline_comment|/* For LVDS (and sometimes TMDS), the BIOS must know about the correct value */
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|lcdpdcindex
op_plus
l_int|1
)braket
suffix:semicolon
multiline_comment|/* LCD  */
id|delay
op_or_assign
(paren
id|ROMAddr
(braket
id|romptr
op_plus
id|lcdpdcindex
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* LCDA */
)brace
r_else
(brace
multiline_comment|/* TMDS: Set our own, since BIOS has no idea */
multiline_comment|/* (This is done on &gt;=661 only, since &lt;661 is calling this only for LVDS) */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
)paren
(brace
r_case
id|Panel_1024x768
suffix:colon
id|delay
op_assign
l_int|0x0008
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x720
suffix:colon
id|delay
op_assign
l_int|0x0004
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x768
suffix:colon
r_case
id|Panel_1280x768_2
suffix:colon
id|delay
op_assign
l_int|0x0004
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1280x800
suffix:colon
r_case
id|Panel_1280x800_2
suffix:colon
id|delay
op_assign
l_int|0x0004
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Verified for 1280x800 */
r_case
id|Panel_1280x1024
suffix:colon
id|delay
op_assign
l_int|0x1e04
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
id|delay
op_assign
l_int|0x0004
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
id|delay
op_assign
l_int|0x0400
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1680x1050
suffix:colon
id|delay
op_assign
l_int|0x0e04
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_le
l_int|1024
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelYRes
op_le
l_int|768
)paren
)paren
(brace
id|delay
op_assign
l_int|0x0008
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_eq
l_int|1280
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelYRes
op_eq
l_int|1024
)paren
)paren
(brace
id|delay
op_assign
l_int|0x1e04
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_le
l_int|1400
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelYRes
op_le
l_int|1050
)paren
)paren
(brace
id|delay
op_assign
l_int|0x0004
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;PanelXRes
op_le
l_int|1600
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PanelYRes
op_le
l_int|1200
)paren
)paren
(brace
id|delay
op_assign
l_int|0x0400
suffix:semicolon
)brace
r_else
id|delay
op_assign
l_int|0x0e04
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* Override by detected or user-set values */
multiline_comment|/* (but only if, for some reason, we can&squot;t read value from BIOS) */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PDC
op_ne
op_minus
l_int|1
)paren
)paren
(brace
id|delay
op_assign
id|SiS_Pr-&gt;PDC
op_amp
l_int|0x1f
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;PDCA
op_ne
op_minus
l_int|1
)paren
)paren
(brace
id|delay
op_assign
(paren
id|SiS_Pr-&gt;PDCA
op_amp
l_int|0x1f
)paren
op_lshift
l_int|8
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|delay
op_rshift_assign
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x0f
comma
(paren
(paren
id|delay
op_lshift
l_int|3
)paren
op_amp
l_int|0xf0
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
l_int|0xbf
comma
(paren
(paren
id|delay
op_amp
l_int|0x01
)paren
op_lshift
l_int|6
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0xf0
comma
(paren
(paren
id|delay
op_rshift
l_int|1
)paren
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
l_int|0x7f
comma
(paren
(paren
id|delay
op_amp
l_int|0x01
)paren
op_lshift
l_int|7
)paren
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|SetCRT2SyncDither661
id|SetCRT2SyncDither661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RTI
)paren
(brace
id|USHORT
id|infoflag
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|infoflag
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|2
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
)brace
r_else
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RTI
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
id|infoflag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
multiline_comment|/* No longer check D5 */
)brace
id|infoflag
op_and_assign
l_int|0xc0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp
op_assign
(paren
id|infoflag
op_rshift
l_int|6
)paren
op_or
l_int|0x0c
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_xor_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ge
id|Mode24Bpp
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xe0
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
l_int|0x30
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
id|temp
op_or_assign
id|infoflag
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0f
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ge
id|Mode24Bpp
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0x7f
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SetPanelParms661
id|SetPanelParms661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
comma
id|temp1
comma
id|temp2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV
op_or
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_ne
op_minus
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0xfc
comma
id|SiS_Pr-&gt;LVDSHL
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
(paren
id|romptr
op_assign
id|GetLCDStructPtr661_2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV
op_or
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|temp1
op_assign
(paren
id|ROMAddr
(braket
id|romptr
)braket
op_amp
l_int|0x03
)paren
op_or
l_int|0x0c
suffix:semicolon
id|temp2
op_assign
l_int|0xfc
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_ne
op_minus
l_int|1
)paren
(brace
id|temp1
op_and_assign
l_int|0xfc
suffix:semicolon
id|temp2
op_assign
l_int|0xf3
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
id|temp2
comma
id|temp1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp1
op_assign
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_amp
l_int|0x80
)paren
op_rshift
l_int|1
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0d
comma
l_int|0xbf
comma
id|temp1
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_OEM310Setting
id|SiS_OEM310Setting
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RRTI
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISLVDS
)paren
)paren
(brace
id|SetDelayComp661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RRTI
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SetCRT2SyncDither661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|RRTI
)paren
suffix:semicolon
id|SetPanelParms661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SetDelayComp
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|SetAntiFlicker
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetPhaseIncr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetYFilter
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|SetEdgeEnhance
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_OEM661Setting
id|SiS_OEM661Setting
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RRTI
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SetDelayComp661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RRTI
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SetCRT2SyncDither661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|RRTI
)paren
suffix:semicolon
id|SetPanelParms661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SetPhaseIncr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetYFilter
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetAntiFlicker
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|SetEdgeEnhance
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* FinalizeLCD&n; * This finalizes some CRT2 registers for the very panel used.&n; * If we have a backup if these registers, we use it; otherwise&n; * we set the register according to most BIOSes. However, this&n; * function looks quite different in every BIOS, so you better&n; * pray that we have a backup...&n; */
r_static
r_void
DECL|function|SiS_FinalizeLCD
id|SiS_FinalizeLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|tempcl
comma
id|tempch
comma
id|tempbl
comma
id|tempbh
comma
id|tempbx
comma
id|tempax
comma
id|temp
suffix:semicolon
id|USHORT
id|resinfo
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_ne
op_minus
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0xfc
comma
id|SiS_Pr-&gt;LVDSHL
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_Custom
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
)paren
(brace
r_case
id|CUT_COMPAQ1280
suffix:colon
r_case
id|CUT_COMPAQ12802
suffix:colon
r_case
id|CUT_CLEVO1400
suffix:colon
r_case
id|CUT_CLEVO14002
suffix:colon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xf0
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1024
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x02
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
multiline_comment|/* Maybe all panels? */
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_eq
op_minus
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0xfc
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_CLEVO10242
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_eq
op_minus
l_int|1
)paren
(brace
multiline_comment|/* Maybe all panels? */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0xfc
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempch
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|tempch
op_eq
l_int|3
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x25
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x1b
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302LV
op_or
id|VB_SIS302ELV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#ifdef SET_EMI
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x0c
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;LVDSHL
op_eq
op_minus
l_int|1
)paren
(brace
multiline_comment|/* Maybe ACER only? */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0xfc
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
id|tempch
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1400x1050
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1f
comma
l_int|0x76
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|tempch
op_eq
l_int|0x03
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x25
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x1b
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;Backup
op_eq
id|TRUE
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;Backup_Mode
op_eq
id|ModeNo
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|SiS_Pr-&gt;Backup_14
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
id|SiS_Pr-&gt;Backup_15
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|SiS_Pr-&gt;Backup_16
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|SiS_Pr-&gt;Backup_17
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|SiS_Pr-&gt;Backup_18
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
id|SiS_Pr-&gt;Backup_19
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
id|SiS_Pr-&gt;Backup_1a
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
id|SiS_Pr-&gt;Backup_1b
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
id|SiS_Pr-&gt;Backup_1c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
id|SiS_Pr-&gt;Backup_1d
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
multiline_comment|/* 1.10.8w */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
l_int|0x90
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x11
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|0
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|2
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|1
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|3
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
OG
l_int|0x13
)paren
op_logical_and
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/* 1.10.7u */
macro_line|#if 0
id|tempbx
op_assign
l_int|806
suffix:semicolon
multiline_comment|/* 0x326 */
multiline_comment|/* other older BIOSes */
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x03
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0xf8
comma
id|temp
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|1
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x70
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xff
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x48
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x12
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
l_int|0x1a
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
l_int|0x28
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x4c
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xdc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
r_switch
c_cond
(paren
id|tempch
)paren
(brace
r_case
l_int|0
suffix:colon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xdc
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
l_int|0x48
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x12
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x48
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x95
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|tempcl
op_assign
id|tempbh
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|tempcl
op_and_assign
l_int|0x0f
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x70
suffix:semicolon
id|tempbh
op_rshift_assign
l_int|4
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
id|tempbl
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
id|SIS_RI_1024x768
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|tempbx
op_assign
l_int|770
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempbx
OG
l_int|770
)paren
(brace
id|tempbx
op_assign
l_int|770
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
OL
l_int|600
)paren
(brace
id|tempax
op_assign
l_int|768
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempax
op_rshift_assign
l_int|4
suffix:semicolon
multiline_comment|/* 1.10.7w; 1.10.6s: 3;  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_le
l_int|480
)paren
(brace
id|tempax
op_rshift_assign
l_int|4
suffix:semicolon
)brace
multiline_comment|/* 1.10.7w; 1.10.6s: &lt; 480; &gt;&gt;=1; */
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
)brace
)brace
)brace
r_else
r_return
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_rshift
l_int|4
)paren
op_or
id|tempcl
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/*  =================  SiS 300 O.E.M. ================== */
macro_line|#ifdef SIS300
r_static
r_void
DECL|function|SetOEMLCDData2
id|SetOEMLCDData2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefTabIndex
)paren
(brace
id|USHORT
id|crt2crtc
op_assign
l_int|0
comma
id|modeflag
comma
id|myindex
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefTabIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|crt2crtc
op_and_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|myindex
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|barco_p1
(braket
id|myindex
)braket
(braket
id|crt2crtc
)braket
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|barco_p1
(braket
id|myindex
)braket
(braket
id|crt2crtc
)braket
(braket
id|i
)braket
(braket
l_int|0
)braket
comma
id|barco_p1
(braket
id|myindex
)braket
(braket
id|crt2crtc
)braket
(braket
id|i
)braket
(braket
l_int|2
)braket
comma
id|barco_p1
(braket
id|myindex
)braket
(braket
id|crt2crtc
)braket
(braket
id|i
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x80
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
)paren
suffix:semicolon
id|temp
op_increment
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
id|USHORT
DECL|function|GetOEMLCDPtr
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
r_int
id|Flag
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|customtable300
(braket
)braket
op_assign
(brace
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
id|UCHAR
id|customtable630
(braket
)braket
op_assign
(brace
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|tempbx
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0x0f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|tempbx
op_and_assign
l_int|0x07
suffix:semicolon
)brace
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|Flag
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x255
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|tempbx
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
id|customtable300
(braket
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0xFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|Flag
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x255
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|tempbx
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|0xff
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
id|customtable630
(braket
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0xFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|tempbx
op_lshift_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_return
id|tempbx
suffix:semicolon
)brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_lshift
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_return
id|tempbx
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMLCDDelay
id|SetOEMLCDDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|Panel_Custom
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x24b
)paren
suffix:semicolon
)brace
multiline_comment|/* The Panel Compensation Delay should be set according to tables&n;   * here. Unfortunately, various BIOS versions don&squot;t case about&n;   * a uniform way using eg. ROM byte 0x220, but use different&n;   * hard coded delays (0x04, 0x20, 0x18) in SetGroup1().&n;   * Thus we don&squot;t set this if the user select a custom pdc or if&n;   * we otherwise detected a valid pdc.&n;   */
r_if
c_cond
(paren
id|SiS_Pr-&gt;PDC
op_ne
op_minus
l_int|1
)paren
(brace
r_return
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_LCDDelayIndex
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay2
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay3
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay5
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x249
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x24a
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay4
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay4
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetOEMLCDData
id|SetOEMLCDData
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
macro_line|#if 0  /* Unfinished; Data table missing */
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x04
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* No rom pointer in BIOS header! */
)brace
id|temp
op_assign
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_assign
l_int|0xFFFF
)paren
(brace
r_return
suffix:semicolon
)brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|_VB_LCDHIndex
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x14
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x17
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|i
comma
id|SiS300_LCDHData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0xf8
comma
(paren
id|SiS300_LCDHData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
op_amp
l_int|0x07
)paren
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|_VB_LCDVIndex
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x18
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0xC7
comma
(paren
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|2
)braket
op_amp
l_int|0x38
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x1b
comma
id|j
op_assign
l_int|3
suffix:semicolon
id|i
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|i
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_static
id|USHORT
DECL|function|GetOEMTVPtr
id|GetOEMTVPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|index
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
id|index
op_add_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|index
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetCHOverScan
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPAL
)paren
(brace
id|index
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMTVDelay
id|SetOEMTVDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x241
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVDelayIndex
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
id|SiS300_OEMTVDelay301
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMTVDelayLVDS
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMAntiFlicker
id|SetOEMAntiFlicker
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x04
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x243
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVFlickerIndex
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMTVFlicker
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_and_assign
l_int|0x70
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0x8F
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMPhaseIncr
id|SetOEMPhaseIncr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|i
comma
id|j
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVision
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetNTSC1024
op_or
id|TVSetNTSCJ
op_or
id|TVSetPALM
op_or
id|TVSetPALN
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x08
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x245
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVPhaseIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Phase2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
(paren
id|index
op_star
l_int|4
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Phase1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SetOEMYFilter
id|SetOEMYFilter
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
comma
id|temp
comma
id|i
comma
id|j
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToSCART
op_or
id|SetCRT2ToHiVision
op_or
id|SetCRT2ToYPbPr525750
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x247
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALM
)paren
(brace
id|temp
op_assign
l_int|8
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
id|TVSetPALN
)paren
(brace
id|temp
op_assign
l_int|9
suffix:semicolon
)brace
multiline_comment|/* NTSCJ uses NTSC filters */
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVYFilterIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|romptr
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_TVMode
op_amp
(paren
id|TVSetPALM
op_or
id|TVSetPALN
)paren
)paren
)paren
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
id|romptr
)paren
suffix:semicolon
id|romptr
op_add_assign
(paren
id|index
op_star
l_int|4
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
id|USHORT
DECL|function|SiS_SearchVBModeID
id|SiS_SearchVBModeID
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
op_star
id|ModeNo
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|UCHAR
id|VGAINFO
op_assign
id|SiS_Pr-&gt;SiS_VGAINFO
suffix:semicolon
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|5
)paren
(brace
op_star
id|ModeNo
op_or_assign
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
id|ModeIdIndex
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
op_star
id|ModeNo
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
l_int|0xFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_ne
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
op_star
id|ModeNo
OG
l_int|0x03
)paren
(brace
r_return
id|ModeIdIndex
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x80
)paren
(brace
r_return
id|ModeIdIndex
suffix:semicolon
)brace
id|ModeIdIndex
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
id|ModeIdIndex
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
r_return
id|ModeIdIndex
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_OEM300Setting
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefTableIndex
)paren
(brace
id|USHORT
id|OEMModeIdIndex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|OEMModeIdIndex
op_assign
id|SiS_SearchVBModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|OEMModeIdIndex
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SetOEMLCDDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SetOEMLCDData
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SetOEMTVDelay
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SetOEMAntiFlicker
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
id|SetOEMPhaseIncr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
id|SetOEMYFilter
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|OEMModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
eof
