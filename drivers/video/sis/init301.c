multiline_comment|/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/sis/init301.c,v 1.3 2002/22/04 01:16:16 dawes Exp $ */
multiline_comment|/*&n; * Mode switching code (CRT2 section) for SiS 300/540/630/730/315/550/650/740/330&n; * (Universal module for Linux kernel framebuffer, XFree86 4.x)&n; *&n; * Assembler-To-C translation&n; * Copyright 2002, 2003 by Thomas Winischhofer &lt;thomas@winischhofer.net&gt;&n; * Minor parts Copyright SiS, Inc.&n; *&n; * Based on BIOS&n; *     1.10.07, 1.10a for 650/CH7019&n; *     1.11.21a for 740/CH7019&n; *     1.11.05 for 650/LVDS (w/o Chrontel)&n; *     1.07.1b, 1.10.6s, 1.11.6w, 1.11.7w, 1.11.8r for 650/301(B/LV), 650/302LV&n; *     2.04.50 (I) and 2.04.5c (II) for 630/301(B)&n; *     2.02.3b, 2.03.02, 2.04.2c, 2.04.5c, 2.07a and 2.08.b3 for 630/LVDS/LVDS+CH7005&n; *     2.04.5c, 2.04.6c for 730+LVDS+CH7005&n; *     1.09b for 315/301(B)&n; *     1.16.51 for 300+301LV (ECS A907)&n; *     1.01.03 for 330 (Xabre 400)&n; *&n; * Known bugs:&n; *   1024x768 panel, expanding (CR37=1): Mode 640x480 does not work on SOME panels&n; *       therefore, we always do the scaling ourselves for now.&n; *&n; * Permission to use, copy, modify, distribute, and sell this software and its&n; * documentation for any purpose is hereby granted without fee, provided that&n; * the above copyright notice appear in all copies and that both that&n; * copyright notice and this permission notice appear in supporting&n; * documentation, and that the name of the copyright holder not be used in&n; * advertising or publicity pertaining to distribution of the software without&n; * specific, written prior permission.  The copyright holder makes no representations&n; * about the suitability of this software for any purpose.  It is provided&n; * &quot;as is&quot; without express or implied warranty.&n; *&n; * THE COPYRIGHT HOLDER DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,&n; * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO&n; * EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY SPECIAL, INDIRECT OR&n; * CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,&n; * DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER&n; * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR&n; * PERFORMANCE OF THIS SOFTWARE.&n; *&n; * TW says: This code looks awful, I know. But please don&squot;t do anything about&n; * this otherwise debugging will be hell.&n; * The code is extremely fragile as regards the different chipsets, different&n; * video bridges and combinations thereof. If anything is changed, extreme&n; * care has to be taken that that change doesn&squot;t break it for other chipsets,&n; * bridges or combinations thereof.&n; * All comments in this file are by me, regardless if they are marked TW or not.&n; *&n; */
macro_line|#if 1 
DECL|macro|NEWCH701x
mdefine_line|#define NEWCH701x
macro_line|#endif
macro_line|#include &quot;init301.h&quot;
macro_line|#if 0
mdefine_line|#define TWNEWPANEL
macro_line|#endif
macro_line|#ifdef SIS300
macro_line|#include &quot;oem300.h&quot;
macro_line|#endif
macro_line|#ifdef SIS315H
macro_line|#include &quot;oem310.h&quot;
macro_line|#endif
DECL|macro|SiS_I2CDELAY
mdefine_line|#define SiS_I2CDELAY      1000
DECL|macro|SiS_I2CDELAYSHORT
mdefine_line|#define SiS_I2CDELAYSHORT  150
id|BOOLEAN
DECL|function|SiS_SetCRT2Group301
id|SiS_SetCRT2Group301
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
)brace
r_else
(brace
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Used for shifting CR33 */
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|4
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SaveCRT2Info
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_DisableBridge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
id|SiS_SetCRT2ModeRegs
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_LockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|SiS_GetCRT2Data
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* Set up Panel Link for LVDS, 301BDH and 650/30xLV(for LCDA) */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
op_logical_or
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
)paren
(brace
id|SiS_GetLVDSDesData
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef LINUX_XF86
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: LCDHDES 0x%03x LCDVDES 0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDHDES
comma
id|SiS_Pr-&gt;SiS_LCDVDES
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: HDE     0x%03x VDE     0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_HDE
comma
id|SiS_Pr-&gt;SiS_VDE
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: VGAHDE  0x%03x VGAVDE  0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VGAHDE
comma
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: HT      0x%03x VT      0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_HT
comma
id|SiS_Pr-&gt;SiS_VT
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init301: VGAHT   0x%03x VGAVT   0x%03x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VGAHT
comma
id|SiS_Pr-&gt;SiS_VGAVT
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetGroup1
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetGroup2
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup3
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup4
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGroup5
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* TW: For 301BDH (Panel link initialization): */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
op_logical_and
(paren
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_assign
l_int|0x10
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_eq
l_int|0
)paren
(brace
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
macro_line|#ifdef SIS315H&t;&t; 
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
macro_line|#endif&t;&t;    
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetCHTVReg
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseOEM
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
id|ROMAddr
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseOEM
op_eq
op_minus
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x233
)braket
op_eq
l_int|0x12
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x234
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_FinalizeLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#if 0      /* Instead of FinalizeLCD(), older BIOSes (A92x) used OEMLCD() */
id|SiS_OEMLCD
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseOEM
)paren
(brace
id|SiS_OEM310Setting
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
id|SiS_CRT2AutoThreshold
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_730
)paren
(brace
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
id|SiS_EnableBridge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/* TW: Disable LCD panel when using TV */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0x0C
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: Disable TV when using LCD */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x010E
comma
l_int|0xF8
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_LockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_LowModeStuff
id|SiS_LowModeStuff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
comma
id|temp2
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_ne
l_int|0x03
)paren
op_logical_and
(paren
id|ModeNo
op_ne
l_int|0x10
)paren
op_logical_and
(paren
id|ModeNo
op_ne
l_int|0x12
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x80
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
l_int|0x55
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
id|temp1
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x55
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|temp2
op_ne
l_int|0x55
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0x01
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: Set Part1 registers */
r_void
DECL|function|SiS_SetGroup1
id|SiS_SetGroup1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
op_assign
l_int|0
comma
id|tempax
op_assign
l_int|0
comma
id|tempbx
op_assign
l_int|0
comma
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|pushbx
op_assign
l_int|0
comma
id|CRT1Index
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|pushcx
op_assign
l_int|0
comma
id|tempbl
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
id|USHORT
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|CRT1Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
id|SiS_SetGroup1_LCDA
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetCRT2Offset
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|SiS_SetCRT2FIFO_300
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
id|SiS_SetCRT2FIFO_310
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
)brace
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* 1. Horizontal setup */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300   /* ------------- 300 series --------------*/
id|temp
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Total */
id|temp
op_assign
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0x0f
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Total Overflow [7:4] */
id|temp
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0x0FF
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Display Enable End */
id|pushbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
op_plus
l_int|12
suffix:semicolon
multiline_comment|/* bx  BTVGA@HRS 0x0B,0x0C */
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
id|SiS_Pr-&gt;SiS_VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
id|tempbx
op_assign
id|pushbx
op_plus
id|tempcx
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
multiline_comment|/* CRT1Index &amp;= 0x3F; - Not any longer */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_or_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_minus
l_int|1
)paren
op_lshift
l_int|3
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x1F
suffix:semicolon
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|6
op_minus
l_int|2
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_or
id|temp
)paren
suffix:semicolon
id|tempcx
op_decrement
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Retrace Start */
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* ----------------- 310/325/330 series ------------- */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
multiline_comment|/* BTVGA2HT 0x08,0x09 */
id|pushcx
op_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
macro_line|#ifndef NEWCH701x&t;&t;
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
)paren
(brace
macro_line|#endif&t;&t;    
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
op_rshift
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
id|SiS_Pr-&gt;SiS_HDE
op_plus
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
op_minus
id|tempax
suffix:semicolon
)brace
macro_line|#ifndef NEWCH701x&t;&t;&t;&t;&t;  
)brace
r_else
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
macro_line|#endif&t;&t;    
)brace
id|tempcx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Total */
id|temp
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Total Overflow [7:4] */
id|tempcx
op_assign
id|pushcx
suffix:semicolon
multiline_comment|/* BTVGA2HDEE 0x0A,0x0C */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Display Enable End */
id|pushbx
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_or_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_minus
l_int|3
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/*(VGAHRS-3)*8 */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x1F
suffix:semicolon
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|5
op_minus
l_int|2
)paren
suffix:semicolon
multiline_comment|/* VGAHRE D[5] */
id|tempcx
op_assign
(paren
id|tempcx
op_or
id|temp
)paren
suffix:semicolon
multiline_comment|/* (VGAHRE-3)*8 */
id|tempcx
op_sub_assign
l_int|3
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|3
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x00FF
suffix:semicolon
id|tempcx
op_or_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
id|tempcx
op_add_assign
l_int|16
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OG
id|tempax
)paren
(brace
id|tempcx
op_assign
id|tempax
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Makes no sense, but is in 650/302LV 1.10.6s */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempbx
op_assign
l_int|1040
suffix:semicolon
id|tempcx
op_assign
l_int|1042
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Retrace Start */
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 310/325/330 series */
multiline_comment|/* TW: The following is done for all bridge/chip types/series */
id|tempax
op_assign
id|tempbx
op_amp
l_int|0xFF00
suffix:semicolon
id|tempbx
op_assign
id|pushbx
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|tempax
op_or_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: Overflow */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Horizontal Retrace End */
multiline_comment|/* 2. Vertical setup */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToAVIDEO
)paren
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_decrement
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
id|temp
op_decrement
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Vertical Total */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Vertical Display Enable End */
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|3
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x12
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: Overflow (and HWCursor Test Mode) */
multiline_comment|/* TW: 650/LVDS (1.10.07), 650/30xLV (1.10.6s) */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
id|tempax
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
OL
l_int|4
)paren
(brace
id|tempcx
op_assign
l_int|4
suffix:semicolon
)brace
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: 300 series, LVDS/301B: */
id|tempbx
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_plus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_rshift
l_int|1
suffix:semicolon
multiline_comment|/*  BTVGA2VRS     0x10,0x11   */
id|tempcx
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_rshift
l_int|4
)paren
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
multiline_comment|/*  BTVGA2VRE     0x11        */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|8
)braket
suffix:semicolon
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x04
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0200
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0400
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|9
)braket
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|temp
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Vertical Retrace Start */
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|temp
op_or_assign
(paren
id|tempcx
op_amp
l_int|0x000F
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: CRT2 Vert. Retrace End; Overflow; &quot;Enable CRTC Check&quot; */
multiline_comment|/* 3. Panel compensation delay */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300  /* ---------- 300 series -------------- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|temp
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|temp
op_assign
l_int|0x24
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|temp
op_assign
l_int|0x24
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x80
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x221
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x222
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x223
)braket
suffix:semicolon
)brace
r_else
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x224
)braket
suffix:semicolon
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;pdc
)paren
(brace
id|temp
op_assign
id|HwDeviceExtension-&gt;pdc
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|temp
op_assign
l_int|0x04
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x80
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;pdc
)paren
(brace
id|temp
op_assign
id|HwDeviceExtension-&gt;pdc
op_amp
l_int|0x3c
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x03C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: Panel Link Delay Compensation; (Software Command Reset; Power Saving) */
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H   /* ----------- 310/325/330 series ---------------*/
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|temp
op_assign
l_int|0x24
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
)paren
(brace
r_case
l_int|2
suffix:colon
r_case
l_int|1
suffix:colon
r_case
l_int|0
suffix:colon
id|temp
op_assign
l_int|0x08
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
l_int|0x2c
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|tempbl
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_330
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x13c
)braket
op_amp
l_int|0x80
)paren
(brace
id|tempbl
op_assign
l_int|0xf0
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x1bc
)braket
op_amp
l_int|0x80
)paren
(brace
id|tempbl
op_assign
l_int|0xf0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* LV (550/301LV checks ROM byte, other LV BIOSes do not) */
id|tempbl
op_assign
l_int|0xF0
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
(brace
id|temp
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
l_int|0x00
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_assign
l_int|0x0a
suffix:semicolon
)brace
id|tempbl
op_assign
l_int|0xF0
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0x0F
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
id|tempbl
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: Panel Link Delay Compensation */
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
id|tempax
op_or_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
id|tempax
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2C
comma
l_int|0x3f
comma
id|tempax
)paren
suffix:semicolon
macro_line|#endif  /* SIS315H */
)brace
)brace
multiline_comment|/* Slavemode */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/* TW: For 301BDH, we set up the Panel Link */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_SetGroup1_301
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* LCDA */
)brace
r_void
DECL|function|SiS_SetGroup1_301
id|SiS_SetGroup1_301
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|push1
comma
id|push2
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|USHORT
id|resinfo
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
multiline_comment|/* TW: The following is only done if bridge is in slave mode: */
id|tempax
op_assign
l_int|0xFFFF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|modeflag
op_or_assign
id|Charx8Dot
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|tempcx
op_assign
l_int|0x08
suffix:semicolon
)brace
r_else
id|tempcx
op_assign
l_int|0x09
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|SiS_Pr-&gt;SiS_VGAHT
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|5
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
l_int|0xFF
suffix:semicolon
multiline_comment|/* set MAX HT */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
multiline_comment|/* 0x04 Horizontal Display End */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcx
)paren
op_minus
l_int|1
suffix:semicolon
id|tempbx
op_or_assign
(paren
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|temp
op_sub_assign
l_int|2
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x05
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x05 Horizontal Display Start */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x06
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x06 Horizontal Blank end     */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_sub_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|temp
op_sub_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|temp
op_sub_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|tempcx
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_plus
id|tempbx
)paren
op_rshift
l_int|1
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|temp
op_decrement
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|temp
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_sub_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|800
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|temp
op_sub_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|800
)paren
(brace
id|temp
op_sub_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 650/301LV(x) does not do this, 630/301B, 300/301LV do */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|1024
)paren
(brace
id|temp
op_add_assign
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_add_assign
l_int|7
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|temp
op_add_assign
l_int|28
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x07 Horizontal Retrace Start */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x08 Horizontal Retrace End   */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x01
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2a
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x61
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x41
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeText
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x54
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x55
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x30
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2f
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x02
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x5b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|ModeNo
op_eq
l_int|0x50
)paren
)paren
op_logical_or
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|0
op_logical_or
id|resinfo
op_eq
l_int|1
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x30
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0x2f
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x08
comma
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0xb2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x02
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
l_int|0xab
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* 0x18 SR08 (FIFO Threshold?)   */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
suffix:semicolon
id|push1
op_assign
id|tempbx
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0xFF
)paren
suffix:semicolon
multiline_comment|/* 0x09 Set Max VT    */
id|tempcx
op_assign
l_int|0x121
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
multiline_comment|/* 0x0E Vertical Display End */
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|357
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|400
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|420
)paren
(brace
id|tempbx
op_assign
l_int|400
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|525
)paren
(brace
id|tempbx
op_assign
l_int|480
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|350
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|480
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x10 vertical Blank Start */
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
macro_line|#if 0
multiline_comment|/* TW: Missing code from 630/301B 2.04.5a and 650/302LV 1.10.6s (calles int 2f) */
r_if
c_cond
(paren
id|xxx
c_func
(paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|0xdf
)paren
(brace
id|temp
op_assign
l_int|0xda
suffix:semicolon
)brace
)brace
macro_line|#endif
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0002
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|tempcx
op_or_assign
l_int|0x000a
suffix:semicolon
)brace
)brace
id|tempax
op_assign
l_int|0x000B
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempax
op_or_assign
l_int|0x8000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0040
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|tempax
op_or_assign
l_int|0x2000
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|480
)paren
(brace
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x00ff
)paren
op_or
l_int|0x2000
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempax
op_or_assign
l_int|0x8000
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0600
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x11
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x11 Vertical Blank End */
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempax
op_sub_assign
id|tempbx
suffix:semicolon
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|0x09
)paren
(brace
multiline_comment|/* 1280x1024 */
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x09
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
)paren
(brace
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|tempbx
op_sub_assign
l_int|10
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|40
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|800
)paren
(brace
id|tempbx
op_add_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_increment
suffix:semicolon
id|tempax
op_add_assign
id|tempbx
suffix:semicolon
id|push1
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_le
l_int|513
)paren
(brace
r_if
c_cond
(paren
id|tempax
op_ge
l_int|513
)paren
(brace
id|tempbx
op_assign
l_int|513
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0C Vertical Retrace Start */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
)paren
(brace
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0008
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0B
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0100
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0004
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0200
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0400
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|tempcx
op_or_assign
l_int|0x0800
suffix:semicolon
)brace
r_else
id|tempcx
op_or_assign
l_int|0x0C00
suffix:semicolon
)brace
id|tempbx
op_assign
id|push1
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_and_assign
l_int|0x0F
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0D vertical Retrace End */
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x0010
)paren
(brace
id|tempcx
op_or_assign
l_int|0x2000
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|480
)paren
(brace
id|temp
op_assign
l_int|0xa3
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x0A CR07 */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x17 SR0A */
id|tempax
op_assign
id|modeflag
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_rshift
l_int|1
)paren
op_amp
l_int|0x09
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
)paren
(brace
multiline_comment|/* Only use 8 dot clock */
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x16 SR01 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0F
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x0F CR14 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 0x12 CR17 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
)brace
)brace
r_else
id|temp
op_assign
l_int|0x80
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x00
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* 0x1A SR0E */
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGroup1_LVDS
id|SiS_SetGroup1_LVDS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|pushcx
suffix:semicolon
macro_line|#endif
id|ULONG
id|tempeax
op_assign
l_int|0
comma
id|tempebx
comma
id|tempecx
comma
id|tempvcfact
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
multiline_comment|/* TW: Set up Panel Link */
multiline_comment|/* 1. Horizontal setup */
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_LCDHDES
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempax
op_sub_assign
l_int|8
suffix:semicolon
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
multiline_comment|/* Horiz. Total */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
multiline_comment|/* Horiz. Display End */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
multiline_comment|/* TW */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempbx
op_assign
l_int|1152
suffix:semicolon
)brace
multiline_comment|/* TW */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempbx
op_assign
l_int|1280
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempbx
op_assign
l_int|1280
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|1400
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|1600
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempcx
op_assign
(paren
id|tempcx
op_minus
id|tempbx
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* HT-HDE / 4 */
id|push1
op_assign
id|tempax
suffix:semicolon
id|tempax
op_add_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|SiS_Pr-&gt;SiS_HT
)paren
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
)brace
id|push2
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0028
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0018
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempcx
op_assign
l_int|0x0017
suffix:semicolon
macro_line|#ifdef TWNEWPANEL
id|tempcx
op_assign
l_int|0x0018
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|tempcx
op_assign
l_int|0x0017
suffix:semicolon
multiline_comment|/* A901; sometimes 0x0018; */
)brace
)brace
r_else
(brace
id|tempcx
op_assign
l_int|0x0018
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempcx
op_assign
l_int|0x0028
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempcx
op_assign
l_int|0x0030
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|0x0030
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|0x0040
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempcx
op_add_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdhrs  */
r_if
c_cond
(paren
id|tempcx
op_ge
id|SiS_Pr-&gt;SiS_HT
)paren
(brace
id|tempcx
op_sub_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
)brace
id|tempax
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLHRS */
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_14h; TW: Panel Link Horizontal Retrace Start  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_plus
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_plus
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|temp
op_add_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|temp
op_add_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|temp
op_sub_assign
l_int|0x14
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|temp
op_sub_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
id|temp
op_and_assign
l_int|0x1F
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0x0007
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_15h; TW: Panel Link Horizontal Retrace End/Skew */
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* lcdhdes  */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x0007
)paren
suffix:semicolon
multiline_comment|/* BPLHDESKEW  */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah; TW: Panel Link Vertical Retrace Start (2:0) */
id|tempcx
op_rshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDES */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x5b
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_16h; TW: Panel Link Horizontal Display Enable Start  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x07
)paren
(brace
id|tempbx
op_add_assign
l_int|8
suffix:semicolon
)brace
)brace
id|tempbx
op_rshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDEE  */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x5b
)paren
(brace
id|temp
op_decrement
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_17h; TW: Panel Link Horizontal Display Enable End  */
multiline_comment|/* 2. Vertical setup */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempbx
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempbx
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
)brace
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
)brace
r_else
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
multiline_comment|/* VGAVT-VGAVDE  */
)brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
suffix:semicolon
multiline_comment|/* VGAVDES  */
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempax
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempax
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempax
op_assign
l_int|1050
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempax
op_assign
l_int|1200
suffix:semicolon
)brace
)brace
)brace
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_Pr-&gt;SiS_VT
)paren
(brace
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempcx
op_assign
l_int|0x0002
suffix:semicolon
macro_line|#ifdef TWNEWPANEL
id|tempcx
op_assign
l_int|0x0003
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|tempcx
op_assign
l_int|0x0002
suffix:semicolon
multiline_comment|/* TW: A901; sometimes 0x0003; */
)brace
)brace
r_else
id|tempcx
op_assign
l_int|0x0003
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempcx
op_assign
l_int|0x0003
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
id|tempcx
op_assign
l_int|0x0057
suffix:semicolon
)brace
)brace
)brace
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
multiline_comment|/* BPLVRS  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_ge
id|SiS_Pr-&gt;SiS_VT
)paren
(brace
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_18h; TW: Panel Link Vertical Retrace Start  */
id|tempcx
op_rshift_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
(brace
id|tempcx
op_assign
l_int|0x0001
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0003
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempcx
op_assign
l_int|0x0005
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempcx
op_assign
l_int|0x0005
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempcx
op_assign
l_int|0x0011
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempcx
op_assign
l_int|0x0005
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|0x0002
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|0x0011
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempcx
op_assign
l_int|0x0004
suffix:semicolon
macro_line|#ifdef TWNEWPANEL
id|tempcx
op_assign
l_int|0x0005
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|tempcx
op_assign
l_int|0x0004
suffix:semicolon
multiline_comment|/* A901; Other BIOS sets 0x0005; */
)brace
)brace
r_else
(brace
id|tempcx
op_assign
l_int|0x0005
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* BPLVRE  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x000F
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xf0
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_19h; TW: Panel Link Vertical Retrace End (3:0); Misc.  */
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
multiline_comment|/* BPLDESKEW =0 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0x87
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah; TW: Panel Link Control Signal (7:3); Vertical Retrace Start (2:0) */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300      /* 300 series */
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|6
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
(paren
id|ULONG
)paren
id|SiS_Pr-&gt;SiS_VDE
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
(paren
id|ULONG
)paren
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempebx
op_assign
l_int|0x003F
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Eh; TW: Panel Link Vertical Scaling Factor */
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* 310/325 series */
macro_line|#ifdef NEWCH701x
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x03
)paren
suffix:semicolon
macro_line|#else
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x23
)paren
suffix:semicolon
macro_line|#endif&t;
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|18
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
(paren
id|ULONG
)paren
id|SiS_Pr-&gt;SiS_VDE
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
id|tempvcfact
op_assign
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_37h; TW: Panel Link Vertical Scaling Factor */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_36h; TW: Panel Link Vertical Scaling Factor */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VDE
op_eq
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_35h; TW: Panel Link Vertical Scaling Factor */
macro_line|#endif /* SIS315H */
)brace
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* BPLVDEE  */
id|tempcx
op_assign
id|push1
suffix:semicolon
id|push1
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|15
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
multiline_comment|/* TW: Doesnt make sense anyway... */
)brace
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_minus
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Dh; TW: Vertical Display Overflow; Control Signal */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ch; TW: Panel Link Vertical Display Enable End  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Bh; TW: Panel Link Vertical Display Enable Start  */
multiline_comment|/* 3. Additional horizontal setup (scaling, etc) */
id|tempecx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|tempecx
op_eq
id|tempebx
)paren
(brace
id|tempeax
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_assign
id|tempecx
suffix:semicolon
id|tempeax
op_lshift_assign
l_int|16
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
)brace
)brace
id|tempecx
op_assign
id|tempeax
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempeax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempeax
op_lshift_assign
l_int|16
suffix:semicolon
id|tempeax
op_assign
(paren
id|tempeax
op_div
id|tempecx
)paren
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHT
op_lshift
l_int|16
)paren
op_div
id|tempecx
)paren
op_minus
l_int|1
suffix:semicolon
)brace
id|tempecx
op_lshift_assign
l_int|16
suffix:semicolon
id|tempecx
op_or_assign
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Fh; TW: Panel Link DDA Operational Number in each horiz. line */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempeax
op_assign
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|18
)paren
op_div
id|tempvcfact
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x0FFFF
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
op_lshift
l_int|6
suffix:semicolon
id|tempbx
op_assign
id|push1
suffix:semicolon
id|tempbx
op_and_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0
)paren
(brace
id|tempbx
op_assign
l_int|64
suffix:semicolon
)brace
id|tempax
op_assign
id|tempax
op_div
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|tempax
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_or_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_20h; TW: Overflow register */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_21h; TW: Panel Link Vertical Accumulator Register */
id|tempecx
op_rshift_assign
l_int|16
suffix:semicolon
multiline_comment|/* BPLHCFACT  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_22h; TW: Panel Link Horizontal Scaling Factor High */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_22h; TW: Panel Link Horizontal Scaling Factor Low */
multiline_comment|/* 630/301B and 630/LVDS do something for 640x480 panels here */
macro_line|#ifdef SIS315H
multiline_comment|/* TW: DSTN/FSTN initialisation - hardcoded for 320x480 panel */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x25
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x26
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x27
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x28
comma
l_int|0x87
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x29
comma
l_int|0x5A
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2A
comma
l_int|0x4B
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x007
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_plus
l_int|64
suffix:semicolon
multiline_comment|/*Blps = lcdhdee(lcdhdes+HDE) + 64*/
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x38
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
op_complement
l_int|0x078
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_add_assign
l_int|32
suffix:semicolon
multiline_comment|/*Blpe=lBlps+32*/
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x39
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3A
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*Bflml=0*/
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x007
comma
l_int|0x00
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_div
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x038
comma
id|temp
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_lshift
l_int|2
suffix:semicolon
multiline_comment|/* BDxFIFOSTOP = (HDE*4)/128 */
id|tempebx
op_assign
l_int|128
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x003F
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x45
comma
op_complement
l_int|0x0FF
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3F
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* BDxWadrst0 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3E
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3D
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x040
comma
l_int|0x00
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_rshift
l_int|4
suffix:semicolon
multiline_comment|/* BDxWadroff = HDE*4/8/8 */
id|pushcx
op_assign
id|tempax
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x43
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x44
comma
op_complement
l_int|0x0F8
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
multiline_comment|/*BDxWadrst1 = BDxWadrst0 + BDxWadroff * VDE */
id|tempeax
op_assign
(paren
id|tempax
op_star
id|pushcx
)paren
suffix:semicolon
id|tempebx
op_assign
l_int|0x00100000
op_plus
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
id|tempebx
op_amp
l_int|0x000000FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x42
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x41
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF0000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x40
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempebx
op_amp
l_int|0x01000000
)paren
op_rshift
l_int|24
)paren
op_lshift
l_int|7
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x3C
comma
op_complement
l_int|0x080
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x03
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
l_int|0x50
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x04
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* Unlock */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1e
comma
l_int|0x62
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2b
comma
l_int|0x1b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2c
comma
l_int|0xe3
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1e
comma
l_int|0x62
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2e
comma
l_int|0x04
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2f
comma
l_int|0x42
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2b
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0f
comma
l_int|0x30
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x7d
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xe0
)paren
suffix:semicolon
)brace
macro_line|#endif  /* SIS315H */
r_return
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_void
DECL|function|SiS_CRT2AutoThreshold
id|SiS_CRT2AutoThreshold
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x40
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
multiline_comment|/* TW: For LVDS / 302B/30xLV - LCDA (this must only be called on 310/325 series!) */
r_void
DECL|function|SiS_SetGroup1_LCDA
id|SiS_SetGroup1_LCDA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|ULONG
id|tempeax
op_assign
l_int|0
comma
id|tempebx
comma
id|tempecx
comma
id|tempvcfact
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS330
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* Xabre 1.01.03 */
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* 740/LVDS */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
comma
l_int|0x04
)paren
suffix:semicolon
multiline_comment|/* 740/LVDS */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x03
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* 740/301LV 1.10.1i */
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* 650/LVDS */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
comma
l_int|0x04
)paren
suffix:semicolon
multiline_comment|/* 650/LVDS */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 650/LVDS 1.10.07 */
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x0f
)paren
suffix:semicolon
multiline_comment|/* 650/30xLv 1.10.6s */
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_LCDHDES
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|1400
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|1600
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|1280
suffix:semicolon
)brace
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
multiline_comment|/* HT-HDE  */
id|push1
op_assign
id|tempax
suffix:semicolon
id|tempax
op_add_assign
id|tempbx
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|tempbx
)paren
(brace
id|tempax
op_sub_assign
id|tempbx
suffix:semicolon
)brace
id|push2
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* push ax   lcdhdee  */
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
multiline_comment|/* TW: 650/30xLV 1.10.6s, 740/LVDS */
r_if
c_cond
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|0x28
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempcx
op_assign
l_int|0x18
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|0x30
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|0x40
suffix:semicolon
)brace
r_else
id|tempcx
op_assign
l_int|0x30
suffix:semicolon
)brace
)brace
id|tempcx
op_add_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdhrs  */
r_if
c_cond
(paren
id|tempcx
op_ge
id|tempbx
)paren
(brace
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
)brace
multiline_comment|/* v ah,cl  */
id|tempax
op_assign
id|tempcx
suffix:semicolon
id|tempax
op_rshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLHRS */
id|temp
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_14h  */
id|temp
op_add_assign
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|temp
op_add_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|temp
op_add_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|temp
op_sub_assign
l_int|10
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
id|temp
op_and_assign
l_int|0x1F
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0x07
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_15h  */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* lcdhdee  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* lcdhdes  */
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x07
suffix:semicolon
multiline_comment|/* BPLHDESKEW  */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah  */
id|tempcx
op_rshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDES */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_16h  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x07
)paren
(brace
id|tempbx
op_add_assign
l_int|8
suffix:semicolon
)brace
)brace
id|tempbx
op_rshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLHDEE  */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_17h  */
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempcx
op_sub_assign
id|tempbx
suffix:semicolon
multiline_comment|/* GAVT-VGAVDE  */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDVDES
suffix:semicolon
multiline_comment|/* VGAVDES  */
id|push1
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempax
op_assign
l_int|1050
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempax
op_assign
l_int|1200
suffix:semicolon
)brace
r_else
id|tempax
op_assign
l_int|960
suffix:semicolon
)brace
r_else
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
multiline_comment|/* Trumpion */
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
multiline_comment|/* VT  */
r_if
c_cond
(paren
id|tempbx
op_ge
id|tempax
)paren
(brace
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
)brace
id|push2
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|2
suffix:semicolon
multiline_comment|/* TW: 650/30xLV 1.10.6s, 740/LVDS */
r_if
c_cond
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempcx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempcx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempcx
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|1
suffix:semicolon
)brace
r_else
id|tempcx
op_assign
l_int|0x0057
suffix:semicolon
)brace
)brace
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRS  */
)brace
r_if
c_cond
(paren
id|tempbx
op_ge
id|tempax
)paren
(brace
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
)brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_18h  */
id|tempcx
op_rshift_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|tempcx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempcx
op_assign
l_int|5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempcx
op_assign
l_int|5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempcx
op_assign
l_int|5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempcx
op_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempcx
op_assign
l_int|2
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempcx
op_add_assign
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
multiline_comment|/* BPLVRE  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_and_assign
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s, Xabre */
id|temp
op_or_assign
l_int|0xC0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_19h  */
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_and_assign
l_int|0x07
suffix:semicolon
id|temp
op_lshift_assign
l_int|3
suffix:semicolon
multiline_comment|/* BPLDESKEW =0 */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0x87
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ah */
id|tempbx
op_assign
id|push2
suffix:semicolon
multiline_comment|/* BPLVDEE  */
id|tempcx
op_assign
id|push1
suffix:semicolon
multiline_comment|/* NPLVDES */
id|push1
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_and_assign
l_int|0x07
suffix:semicolon
id|temp
op_lshift_assign
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1D
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Dh */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Ch  */
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Bh  */
id|tempecx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
suffix:semicolon
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempecx
op_sub_assign
id|tempeax
suffix:semicolon
multiline_comment|/* VGAVT-VGAVDE  */
id|tempeax
op_lshift_assign
l_int|18
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_mod
id|tempebx
)paren
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|tempeax
suffix:semicolon
multiline_comment|/* BPLVCFACT  */
id|tempvcfact
op_assign
id|tempeax
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x00030000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VDE
op_eq
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
id|tempecx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
id|tempeax
op_assign
id|tempecx
suffix:semicolon
id|tempeax
op_lshift_assign
l_int|16
suffix:semicolon
id|temp
op_assign
id|tempeax
op_mod
id|tempebx
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempebx
op_eq
id|tempecx
)paren
(brace
id|tempeax
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
id|tempecx
op_assign
id|tempeax
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempeax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempeax
op_lshift_assign
l_int|16
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempecx
suffix:semicolon
id|tempecx
op_lshift_assign
l_int|16
suffix:semicolon
id|tempeax
op_decrement
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_or
(paren
id|tempeax
op_amp
l_int|0xFFFF
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_1Fh  */
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempeax
op_lshift_assign
l_int|18
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempvcfact
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x0FFFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x20
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_20h */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_21h */
id|tempecx
op_rshift_assign
l_int|16
suffix:semicolon
multiline_comment|/* BPLHCFACT  */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempecx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Part1_22h */
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
macro_line|#if 0
multiline_comment|/* TW: Missing code (calles int 2f) (650/302LV 1.10.6s; 1.10.7w doesn&squot;t do this) */
r_if
c_cond
(paren
id|xxx
c_func
(paren
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x0e
comma
l_int|0xda
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* TW: Only for LVDS and 301LV/302LV */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
macro_line|#endif  /* SIS 315 */
DECL|function|SiS_SetCRT2Offset
r_void
id|SiS_SetCRT2Offset
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|offset
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_return
suffix:semicolon
)brace
id|offset
op_assign
id|SiS_GetOffset
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;LCDResInfo
op_eq
l_int|13
)paren
(brace
id|offset
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;LCDResInfo
op_eq
l_int|12
)paren
(brace
id|offset
op_rshift_assign
l_int|1
suffix:semicolon
)brace
macro_line|#endif&t;&t;&t; 
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
id|offset
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
(paren
id|offset
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
(paren
(paren
(paren
id|offset
op_rshift
l_int|3
)paren
op_amp
l_int|0xFF
)paren
op_plus
l_int|1
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetOffset
id|SiS_GetOffset
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|colordepth
suffix:semicolon
id|USHORT
id|modeinfo
comma
id|index
comma
id|infoflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
id|temp
op_assign
id|SiS_Pr-&gt;CHDisplay
op_div
l_int|16
suffix:semicolon
)brace
r_else
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|modeinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeInfo
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|index
op_assign
(paren
id|modeinfo
op_rshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
(paren
id|modeinfo
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_ScreenOffset
(braket
id|index
)braket
suffix:semicolon
)brace
id|colordepth
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_mul_assign
id|colordepth
suffix:semicolon
multiline_comment|/* TW: For 1400x1050 and 856x480 */
r_if
c_cond
(paren
(paren
(paren
(paren
id|ModeNo
op_ge
l_int|0x26
)paren
op_logical_and
(paren
id|ModeNo
op_le
l_int|0x28
)paren
)paren
op_logical_or
id|ModeNo
op_eq
l_int|0x3f
op_logical_or
id|ModeNo
op_eq
l_int|0x42
op_logical_or
id|ModeNo
op_eq
l_int|0x45
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;UseCustomMode
op_logical_and
(paren
id|SiS_Pr-&gt;CHDisplay
op_mod
l_int|16
)paren
)paren
)paren
(brace
id|colordepth
op_rshift_assign
l_int|1
suffix:semicolon
id|temp
op_add_assign
id|colordepth
suffix:semicolon
)brace
r_return
id|temp
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetColorDepth
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|ColorDepth
(braket
l_int|6
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|4
comma
l_int|4
comma
l_int|6
comma
l_int|8
)brace
suffix:semicolon
id|SHORT
id|index
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|index
op_assign
(paren
id|modeflag
op_amp
id|ModeInfoFlag
)paren
op_minus
id|ModeEGA
suffix:semicolon
r_if
c_cond
(paren
id|index
OL
l_int|0
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|ColorDepth
(braket
id|index
)braket
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2Sync
id|SiS_SetCRT2Sync
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempah
op_assign
l_int|0
comma
id|tempbl
comma
id|infoflag
comma
id|flag
suffix:semicolon
id|flag
op_assign
l_int|0
suffix:semicolon
id|tempbl
op_assign
l_int|0xC0
suffix:semicolon
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
)brace
r_else
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xE7
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300  /* ---- 300 series --- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* 630 - 301B(-DH) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
id|flag
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|flag
op_ne
l_int|1
)paren
(brace
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
)brace
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
multiline_comment|/* TW: BIOS does something here @@@ */
)brace
id|tempah
op_and_assign
l_int|0x3f
suffix:semicolon
id|tempah
op_or_assign
id|tempbl
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 630 - 301 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCDShift
)paren
(brace
multiline_comment|/* ! */
id|flag
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|flag
op_ne
l_int|1
)paren
(brace
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
)brace
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x30
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x3F
comma
id|tempah
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H  /* ----- 310/325 series ---- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* 310/325 - 30xLV */
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310/325 - 301, 301B */
id|tempah
op_assign
id|infoflag
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_LCDInfo
suffix:semicolon
id|tempah
op_and_assign
l_int|0xC0
suffix:semicolon
)brace
)brace
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
multiline_comment|/* TW: BIOS does something here @@@ */
)brace
macro_line|#endif&t;    
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
)brace
macro_line|#endif  /* SIS315H */
)brace
)brace
)brace
multiline_comment|/* TW: Set CRT2 FIFO on 300/630/730 */
macro_line|#ifdef SIS300
r_void
DECL|function|SiS_SetCRT2FIFO_300
id|SiS_SetCRT2FIFO_300
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|index
suffix:semicolon
id|USHORT
id|modeidindex
comma
id|refreshratetableindex
suffix:semicolon
id|USHORT
id|VCLK
op_assign
l_int|0
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
comma
id|data2
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|tempal
comma
id|tempah
comma
id|tempbx
comma
id|tempcl
comma
id|tempax
suffix:semicolon
id|USHORT
id|CRT1ModeNo
comma
id|CRT2ModeNo
suffix:semicolon
id|USHORT
id|SelectRate_backup
suffix:semicolon
id|ULONG
id|data
comma
id|eax
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
(brace
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|87
comma
l_int|85
comma
l_int|78
comma
l_int|76
comma
l_int|54
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|79
comma
l_int|77
comma
l_int|70
comma
l_int|68
comma
l_int|48
comma
multiline_comment|/*; 128 bit    BQ=1   */
l_int|80
comma
l_int|72
comma
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|70
comma
l_int|68
comma
l_int|61
comma
l_int|59
comma
l_int|37
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|86
comma
l_int|77
comma
l_int|75
comma
l_int|68
comma
l_int|66
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|68
comma
l_int|66
comma
l_int|59
comma
l_int|57
comma
l_int|37
multiline_comment|/*; 128 bit    BQ=1   */
)brace
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor730
(braket
)braket
op_assign
(brace
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|103
comma
l_int|96
comma
l_int|94
comma
l_int|120
comma
l_int|113
comma
l_int|111
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* &lt;-- last entry, data below */
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* to avoid using illegal values */
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThLowB
(braket
)braket
op_assign
(brace
l_int|81
comma
l_int|4
comma
l_int|72
comma
l_int|6
comma
l_int|88
comma
l_int|8
comma
l_int|120
comma
l_int|12
comma
l_int|55
comma
l_int|4
comma
l_int|54
comma
l_int|6
comma
l_int|66
comma
l_int|8
comma
l_int|90
comma
l_int|12
comma
l_int|42
comma
l_int|4
comma
l_int|45
comma
l_int|6
comma
l_int|55
comma
l_int|8
comma
l_int|75
comma
l_int|12
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThTiming
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
id|SelectRate_backup
op_assign
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;CRT1UsesCustomMode
)paren
(brace
id|CRT1ModeNo
op_assign
id|SiS_Pr-&gt;SiS_CRT1Mode
suffix:semicolon
multiline_comment|/* get CRT1 ModeNo */
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|CRT1ModeNo
comma
op_amp
id|modeidindex
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
id|refreshratetableindex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|modeidindex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|CRT1ModeNo
op_ge
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|refreshratetableindex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK */
id|data2
op_assign
id|SiS_Pr-&gt;SiS_ModeType
op_minus
l_int|2
suffix:semicolon
)brace
)brace
r_else
(brace
id|CRT1ModeNo
op_assign
l_int|0xfe
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
multiline_comment|/* Get VCLK */
id|data2
op_assign
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|ModeInfoFlag
)paren
op_minus
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|CRT1ModeNo
op_ge
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|index
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
)brace
id|index
op_and_assign
l_int|0x07
suffix:semicolon
id|MCLK
op_assign
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK */
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: CRT1Mode 0x%x VCLK %d MCLK %d modetype-2 = %d&bslash;n&quot;
comma
id|CRT1ModeNo
comma
id|VCLK
comma
id|MCLK
comma
id|data2
)paren
suffix:semicolon
macro_line|#endif  
r_switch
c_cond
(paren
id|data2
)paren
(brace
multiline_comment|/* Get color depth */
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|data2
op_assign
(paren
id|colorth
op_star
id|VCLK
)paren
op_div
id|MCLK
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|6
)paren
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|2
suffix:semicolon
id|temp
op_and_assign
l_int|0xff
suffix:semicolon
id|data2
op_assign
id|temp
op_minus
id|data2
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: data2 (step1) = %d&bslash;n&quot;
comma
id|data2
)paren
suffix:semicolon
macro_line|#endif    
r_if
c_cond
(paren
(paren
l_int|28
op_star
l_int|16
)paren
op_mod
id|data2
)paren
(brace
id|data2
op_assign
(paren
l_int|28
op_star
l_int|16
)paren
op_div
id|data2
suffix:semicolon
id|data2
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
(paren
l_int|28
op_star
l_int|16
)paren
op_div
id|data2
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: data2 (step2) = %d&bslash;n&quot;
comma
id|data2
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0x62
suffix:semicolon
id|tempah
op_rshift_assign
l_int|1
suffix:semicolon
id|tempal
op_assign
id|tempah
suffix:semicolon
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|tempal
op_or_assign
id|tempah
suffix:semicolon
id|tempal
op_and_assign
l_int|0x07
suffix:semicolon
id|tempcl
op_assign
id|ThTiming
(braket
id|tempal
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|6
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|tempah
op_rshift_assign
l_int|4
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0c
suffix:semicolon
id|tempbx
op_or_assign
id|tempah
suffix:semicolon
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempal
op_assign
id|ThLowB
(braket
id|tempbx
op_plus
l_int|1
)braket
suffix:semicolon
id|tempal
op_mul_assign
id|tempcl
suffix:semicolon
id|tempal
op_add_assign
id|ThLowB
(braket
id|tempbx
)braket
suffix:semicolon
id|data
op_assign
id|tempal
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
macro_line|#endif
id|tempal
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempal
op_and_assign
l_int|0x06
suffix:semicolon
id|tempal
op_lshift_assign
l_int|5
suffix:semicolon
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|28
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x0F
suffix:semicolon
id|tempal
op_or_assign
id|temp
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: Latencyfactorindex = 0x%x&bslash;n&quot;
comma
id|tempal
)paren
suffix:semicolon
macro_line|#endif
id|tempbx
op_assign
id|tempal
suffix:semicolon
multiline_comment|/* BIOS BUG (2.04.5d, 2.04.6a use ah here, which is unset!) */
id|tempbx
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* -- do it like the BIOS anyway... */
id|tempax
op_assign
id|tempbx
suffix:semicolon
id|tempbx
op_and_assign
l_int|0xc0
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|6
suffix:semicolon
id|tempax
op_and_assign
l_int|0x0f
suffix:semicolon
id|tempax
op_mul_assign
l_int|3
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
id|data
op_assign
id|LatencyFactor730
(braket
id|tempbx
)braket
suffix:semicolon
id|data
op_add_assign
l_int|15
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|data
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x0080
)paren
(brace
id|index
op_add_assign
l_int|12
suffix:semicolon
)brace
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/* TW: We use pci functions X offers. We use tag 0, because&n;        * we want to read/write to the host bridge (which is always&n;        * 00:00.0 on 630, 730 and 540), not the VGA device.&n;        */
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
id|index
op_add_assign
l_int|24
suffix:semicolon
)brace
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|eax
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
id|index
op_add_assign
l_int|6
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0F
)paren
op_rshift
l_int|1
suffix:semicolon
id|index
op_add_assign
id|temp
suffix:semicolon
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
id|data
op_add_assign
l_int|15
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|data
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
macro_line|#ifdef TWDEBUG    
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: latencyfactor (CRT1) = %d&bslash;n&quot;
comma
id|data
)paren
suffix:semicolon
macro_line|#endif
id|data
op_add_assign
id|data2
suffix:semicolon
multiline_comment|/* CRT1 Request Period */
macro_line|#ifdef TWDEBUG    
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: CRT1 request period = %d&bslash;n&quot;
comma
id|data
)paren
suffix:semicolon
macro_line|#endif
id|CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
id|SelectRate_backup
suffix:semicolon
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|CRT2ModeNo
comma
op_amp
id|modeidindex
)paren
suffix:semicolon
id|refreshratetableindex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|modeidindex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|modeidindex
comma
id|refreshratetableindex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|data2
op_assign
id|SiS_Pr-&gt;SiS_ModeType
op_minus
l_int|2
suffix:semicolon
r_switch
c_cond
(paren
id|data2
)paren
(brace
multiline_comment|/* Get color depth */
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG    
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: CRT2Mode 0x%x VCLK %d MCLK %d modetype-2 = %d, colorth %d&bslash;n&quot;
comma
id|CRT2ModeNo
comma
id|VCLK
comma
id|MCLK
comma
id|data2
comma
id|colorth
)paren
suffix:semicolon
macro_line|#endif
id|data
op_assign
id|data
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
r_if
c_cond
(paren
id|data
op_mod
(paren
id|MCLK
op_lshift
l_int|4
)paren
)paren
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
id|data
op_increment
suffix:semicolon
)brace
r_else
(brace
id|data
op_assign
id|data
op_div
(paren
id|MCLK
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG    
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;FIFO2: data (unclipped) = 0x%x&bslash;n&quot;
comma
id|data
)paren
suffix:semicolon
macro_line|#endif    
r_if
c_cond
(paren
id|data
op_le
l_int|6
)paren
(brace
id|data
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
OG
l_int|0x14
)paren
(brace
id|data
op_assign
l_int|0x14
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|data
op_le
l_int|0x0f
)paren
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x13
suffix:semicolon
)brace
r_else
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x13
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
multiline_comment|/* 630s or 730(s?) */
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x1b
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|temp
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x16
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0xe0
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
multiline_comment|/* 630s, NOT 730 */
(brace
r_if
c_cond
(paren
id|data
OG
l_int|0x13
)paren
(brace
id|data
op_assign
l_int|0x13
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xe0
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* If mode &lt;= 0x13, we just restore everything */
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
id|SelectRate_backup
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* TW: Set FIFO on 310/325/330 series */
macro_line|#ifdef SIS315H
r_void
DECL|function|SiS_SetCRT2FIFO_310
id|SiS_SetCRT2FIFO_310
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
id|CombCode
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|4
comma
l_int|3
comma
l_int|1
comma
l_int|3
comma
l_int|4
comma
l_int|4
comma
l_int|1
comma
l_int|4
comma
l_int|4
comma
l_int|5
comma
l_int|1
comma
l_int|5
comma
l_int|4
)brace
suffix:semicolon
id|UCHAR
id|CRT2ThLow
(braket
)braket
op_assign
(brace
l_int|39
comma
l_int|63
comma
l_int|55
comma
l_int|79
comma
l_int|78
comma
l_int|102
comma
l_int|90
comma
l_int|114
comma
l_int|55
comma
l_int|87
comma
l_int|84
comma
l_int|116
comma
l_int|103
comma
l_int|135
comma
l_int|119
comma
l_int|151
)brace
suffix:semicolon
id|USHORT
id|temp3
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
suffix:semicolon
id|USHORT
id|tempcl
comma
id|tempch
suffix:semicolon
id|USHORT
id|index
suffix:semicolon
id|USHORT
id|CRT1ModeNo
comma
id|CRT2ModeNo
suffix:semicolon
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
suffix:semicolon
id|USHORT
id|SelectRate_backup
suffix:semicolon
id|SelectRate_backup
op_assign
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x3B
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;CRT1UsesCustomMode
)paren
(brace
id|CRT1ModeNo
op_assign
id|SiS_Pr-&gt;SiS_CRT1Mode
suffix:semicolon
multiline_comment|/* get CRT1 ModeNo */
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|CRT1ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Get REFIndex for crt1 refreshrate */
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK */
id|tempbx
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Get colordepth */
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tempbx
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
multiline_comment|/* Get VCLK */
id|tempbx
op_assign
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|ModeInfoFlag
)paren
op_minus
l_int|2
suffix:semicolon
r_switch
c_cond
(paren
id|tempbx
)paren
(brace
multiline_comment|/* Get color depth */
r_case
l_int|0
suffix:colon
id|tempbx
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|tempbx
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|tempbx
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|tempax
op_mul_assign
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|SiS_GetMCLK
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* Get MCLK */
id|tempax
op_div_assign
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|tempax
suffix:semicolon
macro_line|#if 0 /* TW: BIOS code is skrewed */
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
op_amp
l_int|0x02
)paren
(brace
id|tempax
op_assign
l_int|16
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
l_int|8
suffix:semicolon
)brace
macro_line|#endif
id|tempax
op_assign
l_int|16
suffix:semicolon
id|tempax
op_sub_assign
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|tempax
suffix:semicolon
multiline_comment|/* tempbx = 16-DRamBus - DCLK*BytePerPixel/MCLK */
id|tempax
op_assign
(paren
(paren
l_int|52
op_star
l_int|16
)paren
op_div
id|tempbx
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
l_int|52
op_star
l_int|16
op_mod
id|tempbx
)paren
op_ne
l_int|0
)paren
(brace
id|tempax
op_increment
suffix:semicolon
)brace
id|tempcx
op_assign
id|tempax
suffix:semicolon
id|tempcx
op_add_assign
l_int|40
suffix:semicolon
multiline_comment|/* get DRAM latency */
id|tempcl
op_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
)paren
op_rshift
l_int|3
)paren
op_amp
l_int|0x7
suffix:semicolon
multiline_comment|/* SR17[5:3] DRAM Queue depth */
id|tempch
op_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
)paren
op_rshift
l_int|6
)paren
op_amp
l_int|0x3
suffix:semicolon
multiline_comment|/* SR17[7:6] DRAM Grant length */
r_for
c_loop
(paren
id|temp3
op_assign
l_int|0
suffix:semicolon
id|temp3
OL
l_int|16
suffix:semicolon
id|temp3
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|CombCode
(braket
id|temp3
)braket
op_eq
id|tempcl
)paren
op_logical_and
(paren
id|CombCode
(braket
id|temp3
op_plus
l_int|1
)braket
op_eq
id|tempch
)paren
)paren
(brace
id|temp3
op_assign
id|CRT2ThLow
(braket
id|temp3
op_rshift
l_int|1
)braket
suffix:semicolon
)brace
)brace
id|tempcx
op_add_assign
id|temp3
suffix:semicolon
multiline_comment|/* CRT1 Request Period */
id|CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
multiline_comment|/* get CRT2 ModeNo */
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|CRT2ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Get ModeID Table */
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
id|SelectRate_backup
suffix:semicolon
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
)brace
r_else
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
)brace
id|tempbx
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|CRT2ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* Get colordepth */
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tempbx
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
id|tempax
op_mul_assign
id|tempbx
suffix:semicolon
id|tempax
op_mul_assign
id|tempcx
suffix:semicolon
id|tempbx
op_assign
id|SiS_GetMCLK
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* Get MCLK */
id|tempbx
op_lshift_assign
l_int|4
suffix:semicolon
id|tempcx
op_assign
id|tempax
suffix:semicolon
id|tempax
op_div_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_mod
id|tempbx
)paren
(brace
id|tempax
op_increment
suffix:semicolon
)brace
multiline_comment|/* CRT1 Request period * TCLK * BytePerPixel / (MCLK*16) */
r_if
c_cond
(paren
id|tempax
OG
l_int|0x37
)paren
id|tempax
op_assign
l_int|0x37
suffix:semicolon
multiline_comment|/* TW: 650/LVDS (1.10.07, 1.10.00), 650/301LV, 740, 330 overrule calculated value; 315 does not */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_650
)paren
(brace
id|tempax
op_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
op_complement
l_int|0x3F
comma
id|tempax
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetMCLK
id|SiS_GetMCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
id|SiS_Get310DRAMType
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|index
op_ge
l_int|4
)paren
(brace
id|index
op_sub_assign
l_int|4
suffix:semicolon
r_return
id|SiS_Pr-&gt;SiS_MCLKData_1
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_else
(brace
r_return
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* TW: Checked against 650/LVDS 1.10.07 BIOS */
r_void
DECL|function|SiS_GetLVDSDesData
id|SiS_GetLVDSDesData
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
id|USHORT
id|PanelIndex
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LVDSDesStruct
op_star
id|PanelDesPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
macro_line|#ifdef SIS315H  
id|SiS_GetLVDSDesPtrA
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|PanelIndex
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|PanelIndex
)paren
(brace
r_case
l_int|0
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1024x768Des_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* --- expanding --- */
r_case
l_int|1
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1280x1024Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1400x1050Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1600x1200Des_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1024x768Des_2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* --- non expanding --- */
r_case
l_int|5
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1280x1024Des_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1400x1050Des_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1600x1200Des_2
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;LVDS1024x768Des_1
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
id|SiS_GetLVDSDesPtr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|PanelIndex
comma
op_amp
id|ResIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|PanelIndex
)paren
(brace
r_case
l_int|0
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType00_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* ---  */
r_case
l_int|1
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType01_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType02_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType03_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType04_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType05_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType06_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType07_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType08_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType09_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0a_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0b_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0c_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0d_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0e_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0f_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType00_2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* --- */
r_case
l_int|17
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType01_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType02_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType03_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType04_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType05_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType06_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|23
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType07_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType08_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType09_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0a_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0b_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0c_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0d_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0e_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|31
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0f_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelTypeNS_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* pass 1:1 */
r_case
l_int|33
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelTypeNS_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|50
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVUNTSCDesData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* TV */
r_case
l_int|51
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVONTSCDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|52
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALDesData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|53
suffix:colon
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALDesData
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType0e_1
suffix:semicolon
)brace
r_else
id|PanelDesPtr
op_assign
id|SiS_Pr-&gt;SiS_PanelType01_1
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHDES
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDVDES
op_assign
(paren
id|PanelDesPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVDES
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|632
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ge
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|320
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|480
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|804
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|704
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|320
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|632
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDHDES
op_assign
l_int|542
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetLVDSDesPtr
id|SiS_GetLVDSDesPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|PanelIndex
comma
id|USHORT
op_star
id|ResIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempbx
op_assign
l_int|50
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_CHPALM
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* TW: Nothing special needed for SOverscan    */
multiline_comment|/*     PALM uses NTSC data, PALN uses PAL data */
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|tempbx
op_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: 630/LVDS and 650/LVDS (1.10.07) BIOS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|tempal
op_assign
l_int|0x07
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
id|tempal
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
op_star
id|PanelIndex
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_void
DECL|function|SiS_GetLVDSDesPtrA
id|SiS_GetLVDSDesPtrA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|PanelIndex
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|tempal
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_minus
id|SiS_Pr-&gt;SiS_PanelMinLVDS
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
op_star
id|PanelIndex
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
macro_line|#endif
r_void
DECL|function|SiS_SetCRT2ModeRegs
id|SiS_SetCRT2ModeRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
comma
id|j
comma
id|modeflag
suffix:semicolon
id|USHORT
id|tempcl
comma
id|tempah
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS300
id|USHORT
id|temp
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
id|USHORT
id|tempbl
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: BIOS does not do this (neither 301 nor LVDS) */
multiline_comment|/*     (But it&squot;s harmless; see SetCRT2Offset) */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x03
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* fix write part1 index 0  BTDRAM bit Bug */
multiline_comment|/* TW: Removed 301B302B301LV302LV check here to match 650/LVDS BIOS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
multiline_comment|/* TW:   1. for LVDS/302B/302LV **LCDA** */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xAF
comma
l_int|0x40
)paren
suffix:semicolon
multiline_comment|/* FUNCTION CONTROL */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0xF7
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|4
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|j
comma
l_int|0
)paren
suffix:semicolon
)brace
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_ModeType
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300    /* ---- 300 series ---- */
multiline_comment|/* For 301BDH: */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xef
suffix:semicolon
id|temp
op_or_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
id|temp
op_and_assign
l_int|0xfd
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_sub_assign
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
multiline_comment|/* TW: tempcl is USHORT -&gt; always true! */
id|tempah
op_assign
(paren
(paren
l_int|0x10
op_rshift
id|tempcl
)paren
op_or
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
r_else
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_xor_assign
l_int|0xA0
suffix:semicolon
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* ---- 310/325/330 series ---- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x08
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_sub_assign
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempcl
OG
l_int|0
)paren
op_logical_or
(paren
id|tempcl
op_eq
l_int|0
)paren
)paren
(brace
multiline_comment|/* TW: tempcl is USHORT -&gt; always true! */
id|tempah
op_assign
(paren
l_int|0x08
op_rshift
id|tempcl
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_eq
l_int|0
)paren
id|tempah
op_assign
l_int|1
suffix:semicolon
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
r_else
id|tempah
op_assign
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_xor_assign
l_int|0x50
suffix:semicolon
)brace
macro_line|#endif  /* SIS315H */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* FUNCTION CONTROL */
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xa0
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* FUNCTION CONTROL */
)brace
r_else
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* FUNCTION CONTROL */
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0xa0
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* FUNCTION CONTROL */
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/* TW:   2. for 301 (301B, 302B 301LV, 302LV non-LCDA) */
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempah
op_xor_assign
l_int|0x05
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempah
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* --- 300 series --- */
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_rshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* --- 310 series --- */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0xF8
comma
id|tempah
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeVGA
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x10
suffix:semicolon
)brace
multiline_comment|/* TW: 630/301 BIOS */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0D
comma
l_int|0x40
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|RPLLDIV2XO
suffix:semicolon
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: For 302LV dual-channel */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|tempah
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: 3. for LVDS */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: Inserted this entire section (BIOS 650/LVDS); added ModeType check&n;&t;    *     (LVDS can only be slave in 8bpp modes)&n;&t;    */
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DriverMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xF0
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: (added ModeType check) */
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x02
suffix:semicolon
)brace
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: Inserted the entire following section */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
op_logical_neg
(paren
id|IS_SIS740
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* For all bridges */
id|tempbl
op_assign
l_int|0xfb
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|tempah
op_assign
l_int|0x30
suffix:semicolon
id|tempbl
op_assign
l_int|0xcf
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: This in order to fix &quot;TV-blue-bug&quot; on 315+301 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xCF
)paren
suffix:semicolon
multiline_comment|/* For 301   */
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xCF
comma
l_int|0x30
)paren
suffix:semicolon
multiline_comment|/* For 30xLV */
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x30
suffix:semicolon
multiline_comment|/* For 301B  */
id|tempbl
op_assign
l_int|0xcf
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|tempah
op_assign
l_int|0xc0
suffix:semicolon
id|tempbl
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* For 30xLV */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3f
comma
l_int|0xc0
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* For 301, 301B */
id|tempah
op_assign
l_int|0xc0
suffix:semicolon
id|tempbl
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
id|tempbl
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* For all bridges */
id|tempbl
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS315H */
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0x3f
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x7F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|tempah
op_assign
l_int|0x04
suffix:semicolon
id|tempbl
op_assign
l_int|0xfb
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempbl
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
id|tempbl
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2c
comma
l_int|0xcf
comma
l_int|0x30
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
)brace
r_void
DECL|function|SiS_GetCRT2Data
id|SiS_GetCRT2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
multiline_comment|/* TW: Need LVDS Data for LCD on 301BDH */
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_GetCRT2Data301
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|SiS_GetCRT2Data301
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Checked with 650/LVDS 1.10.07 BIOS */
r_void
DECL|function|SiS_GetCRT2DataLVDS
id|SiS_GetCRT2DataLVDS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LVDSDataStruct
op_star
id|LVDSData
op_assign
l_int|NULL
suffix:semicolon
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
l_int|50
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
macro_line|#ifdef SIS315H   
id|SiS_GetCRT2PtrA
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LCDA1400x1050Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LCDA1600x1200Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LCDA1400x1050Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LCDA1600x1200Data_2
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#endif      
)brace
r_else
(brace
multiline_comment|/* TW: 301BDH needs LVDS Data */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: 301BDH needs LVDS Data */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS800x600Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS800x600Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS640x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDSXXXxXXXData_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVONTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS320x480Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|90
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALMData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|91
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALMData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|92
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVUPALNData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|93
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVOPALNData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|99
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_CHTVSOPALData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* TW: Super Overscan */
r_default
suffix:colon
id|LVDSData
op_assign
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
(paren
id|LVDSData
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1400
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1050
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1600
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1200
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|960
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|800
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1024
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1152
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x864
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1152
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|864
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1280
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1400
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1050
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|1600
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|1200
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
l_int|320
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
l_int|480
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_GetCRT2Data301
id|SiS_GetCRT2Data301
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|modeflag
suffix:semicolon
id|USHORT
id|resinfo
suffix:semicolon
id|USHORT
id|CRT2Index
comma
id|ResIndex
suffix:semicolon
r_const
id|SiS_LCDDataStruct
op_star
id|LCDPtr
op_assign
l_int|NULL
suffix:semicolon
r_const
id|SiS_TVDataStruct
op_star
id|TVPtr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
l_int|50
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0
suffix:semicolon
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: For VGA2 (&quot;RAMDAC2&quot;) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|SiS_GetRAMDAC2DATA
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* TW: For TV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|2
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtHiTVData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/*    case  7:  TVPtr = SiS_Pr-&gt;SiS_St1HiTVData;   break;  */
r_case
l_int|12
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_St2HiTVData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StPALData
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StNTSCData
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|TVPtr
op_assign
id|SiS_Pr-&gt;SiS_StPALData
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* TW: Just to avoid a crash */
)brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVHDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|TVVDE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHRS
suffix:semicolon
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|FlickerMode
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_Pr-&gt;SiS_RVBHRS
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|HALFRVBHRS
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_ne
l_int|3
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x09
)paren
(brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x12
)paren
(brace
id|SiS_Pr-&gt;SiS_NewFlickerMode
op_assign
l_int|0x40
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
)paren
(brace
r_case
l_int|2
suffix:colon
r_case
l_int|1
suffix:colon
r_case
l_int|0
suffix:colon
id|SiS_Pr-&gt;SiS_HT
op_assign
l_int|0x6b4
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
l_int|0x20d
suffix:semicolon
multiline_comment|/* Don&squot;t care about TVSimuMode */
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|TVSimuMode
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|ExtHiTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|ExtHiTVVT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|StHiTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|StHiTVVT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|StHiTextTVHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|StHiTextTVVT
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY1COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY2COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY3COE
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
(paren
id|TVPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RY4COE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_Pr-&gt;SiS_RY1COE
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY2COE
op_assign
l_int|0xf4
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY3COE
op_assign
l_int|0x10
suffix:semicolon
id|SiS_Pr-&gt;SiS_RY4COE
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSCHT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|NTSC2HT
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_VT
op_assign
id|NTSCVT
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_HT
op_assign
id|PALHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
id|PALVT
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* TW: For LCD */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|ResIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
l_int|0
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* VESA Timing */
r_case
l_int|1
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* VESA Timing */
r_case
l_int|5
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Obviously unused */
r_case
l_int|6
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Obviously unused */
r_case
l_int|10
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_St2LCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-VESA Timing */
r_case
l_int|11
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_St2LCD1280x1024Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-VESA Timing */
r_case
l_int|13
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData1024x768
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-expanding */
r_case
l_int|14
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData1280x1024
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-expanding */
r_case
l_int|15
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_LCD1280x960Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* 1280x960 */
r_case
l_int|20
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1400x1050Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* VESA Timing */
r_case
l_int|21
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData1400x1050
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-expanding (let panel scale) */
r_case
l_int|22
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1400x1050Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-VESA Timing (let panel scale) */
r_case
l_int|23
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1600x1200Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* VESA Timing */
r_case
l_int|24
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_NoScaleData1600x1200
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-expanding */
r_case
l_int|25
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_StLCD1600x1200Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-VESA Timing */
r_default
suffix:colon
id|LCDPtr
op_assign
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Just to avoid a crash */
)brace
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCMAX
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|RVBHCFACT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|VGAVT
suffix:semicolon
id|SiS_Pr-&gt;SiS_HT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDHT
suffix:semicolon
id|SiS_Pr-&gt;SiS_VT
op_assign
(paren
id|LCDPtr
op_plus
id|ResIndex
)paren
op_member_access_from_pointer
id|LCDVT
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;GetCRT2Data: Index %d ResIndex %d&bslash;n&quot;
comma
id|CRT2Index
comma
id|ResIndex
)paren
suffix:semicolon
macro_line|#endif    
id|tempax
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|560
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|640
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|357
)paren
id|tempbx
op_assign
l_int|527
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
id|tempbx
op_assign
l_int|620
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
id|tempbx
op_assign
l_int|775
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|600
)paren
(brace
id|tempbx
op_assign
l_int|775
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
(brace
id|tempbx
op_assign
l_int|560
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|640
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|360
)paren
id|tempbx
op_assign
l_int|768
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|864
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|350
)paren
id|tempbx
op_assign
l_int|700
suffix:semicolon
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|1024
)paren
(brace
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempax
op_assign
l_int|1400
suffix:semicolon
id|tempbx
op_assign
l_int|1050
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempax
op_assign
l_int|1600
suffix:semicolon
id|tempbx
op_assign
l_int|1200
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|tempax
suffix:semicolon
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|tempbx
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
id|USHORT
DECL|function|SiS_GetResInfo
id|SiS_GetResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|resindex
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resindex
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
id|resindex
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
r_return
id|resindex
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetCRT2ResInfo
id|SiS_GetCRT2ResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|xres
comma
id|yres
comma
id|modeflag
op_assign
l_int|0
comma
id|resindex
suffix:semicolon
id|resindex
op_assign
id|SiS_GetResInfo
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_Pr-&gt;SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
id|yres
op_assign
id|SiS_Pr-&gt;SiS_StResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
id|yres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|VTotal
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_ne
l_int|0x03
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x3a
)paren
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_eq
l_int|1
)paren
(brace
id|xres
op_mul_assign
l_int|2
suffix:semicolon
id|yres
op_mul_assign
l_int|2
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|xres
op_mul_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|yres
op_mul_assign
l_int|2
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
multiline_comment|/* TW: 301BDH */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToAVIDEO
op_or
multiline_comment|/* (Allow 720 for VGA2) */
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
multiline_comment|/* TW: This is wrong for 640x400 *graphics* mode */
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
(brace
id|yres
op_assign
l_int|405
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|360
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|360
)paren
(brace
id|yres
op_assign
l_int|375
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|357
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
(brace
id|yres
op_assign
l_int|420
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|480
)paren
(brace
id|yres
op_assign
l_int|525
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|720
)paren
(brace
id|xres
op_assign
l_int|640
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
id|yres
op_assign
l_int|400
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
id|yres
op_assign
l_int|480
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_VGAHDE
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_assign
id|xres
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVDE
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_assign
id|yres
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetCRT2Ptr
id|SiS_GetCRT2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|tempal
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|Flag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
multiline_comment|/* LCD */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|tempbx
op_assign
l_int|15
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_assign
l_int|21
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_assign
l_int|22
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|23
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_assign
l_int|24
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_assign
l_int|25
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_assign
l_int|13
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_minus
id|SiS_Pr-&gt;SiS_Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
multiline_comment|/* GetRevisionID();  */
multiline_comment|/* TW: BIOS only adds 5 once */
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* TV */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
OG
l_int|480
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|TVSimuMode
)paren
suffix:semicolon
)brace
id|tempbx
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|tempbx
op_assign
l_int|12
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|tempal
op_and_assign
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempal
op_eq
l_int|0x06
)paren
(brace
id|tempal
op_assign
l_int|0x07
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: 300/301LV BIOS */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|0x0c
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|0x0d
)paren
)paren
(brace
multiline_comment|/* 720 (index diff. on 310/325!) */
id|tempal
op_assign
l_int|6
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x31
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x32
)paren
)paren
(brace
id|tempal
op_assign
l_int|6
suffix:semicolon
)brace
)brace
)brace
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* LVDS, 301B-DH (if running on LCD) */
id|Flag
op_assign
l_int|1
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|Flag
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|tempbx
op_assign
l_int|99
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALM
)paren
(brace
id|tempbx
op_assign
l_int|90
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALN
)paren
(brace
id|tempbx
op_assign
l_int|92
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|Flag
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_le
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_minus
id|SiS_Pr-&gt;SiS_PanelMinLVDS
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempbx
op_assign
l_int|18
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|tempbx
op_assign
l_int|6
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempbx
op_assign
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempbx
op_assign
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|21
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|tempbx
op_assign
l_int|7
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel320x480
)paren
(brace
id|tempbx
op_assign
l_int|14
suffix:semicolon
id|tempal
op_assign
l_int|6
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
id|tempal
op_assign
l_int|7
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
(brace
id|tempal
op_increment
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|0x0c
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|0x0d
)paren
)paren
(brace
multiline_comment|/* 720 */
id|tempal
op_assign
l_int|6
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|0x0d
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|0x0e
)paren
)paren
(brace
multiline_comment|/* 720 */
id|tempal
op_assign
l_int|6
suffix:semicolon
)brace
)brace
)brace
)brace
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H
r_void
DECL|function|SiS_GetCRT2PtrA
id|SiS_GetCRT2PtrA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|tempbx
op_assign
l_int|2
suffix:semicolon
)brace
r_else
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_Panel1024x768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
macro_line|#endif
r_void
DECL|function|SiS_GetCRT2Part2Ptr
id|SiS_GetCRT2Part2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|CRT2Index
comma
id|USHORT
op_star
id|ResIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempal
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|16
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|tempbx
op_add_assign
l_int|32
suffix:semicolon
)brace
op_star
id|CRT2Index
op_assign
id|tempbx
suffix:semicolon
op_star
id|ResIndex
op_assign
id|tempal
op_amp
l_int|0x3F
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetRatePtrCRT2
id|SiS_GetRatePtrCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|SHORT
id|LCDRefreshIndex
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x03
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
comma
id|i
comma
id|backup_i
suffix:semicolon
id|USHORT
id|modeflag
comma
id|index
comma
id|temp
comma
id|backupindex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
OL
l_int|0x14
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: CR33 holds refresh rate index for CRT1 [3:0] and CRT2 [7:4].&n;  *     On LVDS machines, CRT2 index is always 0 and will be&n;  *     set to 0 by the following code; this causes the function&n;  *     to take the first non-interlaced mode in SiS_Ext2Struct&n;  */
id|index
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x33
)paren
suffix:semicolon
id|index
op_rshift_assign
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
suffix:semicolon
id|index
op_and_assign
l_int|0x0F
suffix:semicolon
id|backupindex
op_assign
id|index
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
l_int|0
)paren
(brace
id|index
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_assign
id|backupindex
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
(brace
id|temp
op_assign
id|LCDRefreshIndex
(braket
id|SiS_Pr-&gt;SiS_LCDResInfo
)braket
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
id|temp
)paren
(brace
id|index
op_assign
id|temp
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|ModeNo
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|ModeID
suffix:semicolon
multiline_comment|/* TW: 650/LVDS 1.10.07, 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DriverMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_VESAID
op_eq
l_int|0x105
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_VESAID
op_eq
l_int|0x107
)paren
)paren
(brace
r_if
c_cond
(paren
id|backupindex
op_le
l_int|1
)paren
(brace
id|RefreshRateTableIndex
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
)braket
dot
id|ModeID
op_ne
id|ModeNo
)paren
(brace
r_break
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|temp
op_and_assign
id|ModeInfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
id|SiS_Pr-&gt;SiS_ModeType
)paren
(brace
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
id|index
op_decrement
suffix:semicolon
)brace
r_while
c_loop
(paren
id|index
op_ne
l_int|0xFFFF
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
id|i
op_minus
l_int|1
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|InterlaceMode
)paren
(brace
id|i
op_increment
suffix:semicolon
)brace
)brace
)brace
id|i
op_decrement
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|DisableCRT2Display
)paren
)paren
)paren
(brace
id|backup_i
op_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_AdjustCRT2Rate
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|i
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
multiline_comment|/* TW: This is for avoiding random data to be used; i is&n;&t;&t; *     in an undefined state if no matching CRT2 mode is&n;&t;&t; *     found.&n;&t;&t; */
id|i
op_assign
id|backup_i
suffix:semicolon
)brace
)brace
r_return
id|RefreshRateTableIndex
op_plus
id|i
suffix:semicolon
)brace
multiline_comment|/* Checked against all (incl 650/LVDS (1.10.07), 630/301) BIOSes */
id|BOOLEAN
DECL|function|SiS_AdjustCRT2Rate
id|SiS_AdjustCRT2Rate
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|i
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|resinfo
suffix:semicolon
id|USHORT
id|modeflag
comma
id|infoflag
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
suffix:semicolon
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempax
op_or_assign
id|SupportRAMDAC2
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|tempax
op_or_assign
id|SupportTV
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x0a
)paren
(brace
id|tempax
op_or_assign
id|SupportTV1024
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|tempax
op_or_assign
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|6
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
(paren
op_star
id|i
)paren
op_assign
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|6
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ge
l_int|9
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|0x14
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x0f
)paren
op_logical_and
(paren
(paren
id|resinfo
op_eq
l_int|4
)paren
op_logical_or
(paren
id|resinfo
op_ge
l_int|8
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x10
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|8
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x0e
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|8
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|9
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|8
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|4
)paren
op_logical_or
(paren
id|resinfo
OG
l_int|7
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|4
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|3
)paren
op_logical_or
(paren
id|resinfo
OG
l_int|6
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
(brace
id|tempax
op_or_assign
id|SupportHiVisionTV2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|4
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|7
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|tempax
op_or_assign
id|SupportHiVisionTV
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|4
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|3
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|7
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|7
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
)paren
)paren
(brace
id|tempax
op_or_assign
id|SupportTV
suffix:semicolon
id|tempax
op_or_assign
id|SupportTV1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|8
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|4
)paren
)paren
)paren
(brace
id|tempax
op_and_assign
op_complement
(paren
id|SupportTV1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|7
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|3
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|tempax
op_and_assign
op_complement
(paren
id|SupportTV1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|7
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|3
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* slavemode */
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|8
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|4
)paren
)paren
)paren
(brace
id|tempax
op_and_assign
op_complement
(paren
id|SupportTV1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|7
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|3
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 301 */
id|tempax
op_and_assign
op_complement
(paren
id|SupportTV1024
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|resinfo
op_ne
l_int|7
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|3
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|modeflag
op_amp
id|NoSupportSimuTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* TW: for LVDS  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_or_assign
id|SupportCHTV
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempax
op_or_assign
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x14
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|0x09
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x0f
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|0x08
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x10
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|0x08
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_ne
l_int|0x15
)paren
op_logical_and
(paren
id|resinfo
OG
l_int|0x09
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|0x09
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|0x08
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
OG
l_int|0x07
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x04
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* TW: Look backwards in table for matching CRT2 mode */
r_for
c_loop
(paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_eq
id|tempbx
suffix:semicolon
(paren
op_star
id|i
)paren
op_decrement
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|tempax
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_star
id|i
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
)brace
multiline_comment|/* TW: Look through the whole mode-section of the table from the beginning&n;   *     for a matching CRT2 mode if no mode was found yet.&n;   */
r_for
c_loop
(paren
(paren
op_star
id|i
)paren
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|i
)paren
op_increment
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
op_plus
(paren
op_star
id|i
)paren
)braket
dot
id|ModeID
op_ne
id|tempbx
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|infoflag
op_amp
id|tempax
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_SaveCRT2Info
id|SiS_SaveCRT2Info
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
suffix:semicolon
multiline_comment|/* TW: We store CRT1 ModeNo in CR34 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
comma
id|ModeNo
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp2
op_assign
op_complement
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
id|temp2
comma
id|temp1
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetVBInfo
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
r_int
id|checkcrt2mode
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|OutputSelect
op_assign
op_star
id|SiS_Pr-&gt;pSiS_OutputSelect
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_SetFlag
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_ModeType
op_assign
id|modeflag
op_amp
id|ModeInfoFlag
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
macro_line|#if 0&t;
multiline_comment|/* SiS_HiVision is only used on 310/325/330+30xLV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
multiline_comment|/* TW: New from 650/30xLV 1.10.6s */
id|temp
op_and_assign
(paren
id|SetCRT2ToHiVisionTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
multiline_comment|/* 0x83 */
id|temp
op_or_assign
id|SetCRT2ToHiVisionTV
suffix:semicolon
multiline_comment|/* 0x80 */
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x04
)paren
(brace
multiline_comment|/* TW: New from 650/30xLV 1.10.6s */
id|temp
op_and_assign
(paren
id|SetCRT2ToHiVisionTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
multiline_comment|/* 0x83 */
id|temp
op_or_assign
id|SetCRT2ToSVIDEO
suffix:semicolon
multiline_comment|/* 0x08 */
)brace
)brace
macro_line|#endif&t;
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
multiline_comment|/* fstn must set CR30=0x21 */
id|temp
op_assign
(paren
id|SetCRT2ToLCD
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
comma
id|temp
)paren
suffix:semicolon
)brace
id|tempbx
op_or_assign
id|temp
suffix:semicolon
id|tempax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_lshift
l_int|8
suffix:semicolon
id|tempax
op_and_assign
(paren
id|LoadDACFlag
op_or
id|DriverMode
op_or
id|SetDispDevSwitch
op_or
id|SetNotSimuMode
op_or
id|SetPALTV
)paren
suffix:semicolon
id|tempbx
op_or_assign
id|tempax
suffix:semicolon
id|tempbx
op_and_assign
op_complement
(paren
id|SetCHTVOverScan
op_or
id|SetInSlaveMode
op_or
id|DisableCRT2Display
)paren
suffix:semicolon
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302B
op_or
id|VB_SIS301LV
op_or
id|VB_SIS302LV
)paren
)paren
(brace
multiline_comment|/* From 1.10.7w, not in 1.10.8r */
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
(brace
multiline_comment|/* Mode 0x03 is never in driver mode */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
l_int|0xbf
)paren
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w, not in 1.10.8r */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
(brace
multiline_comment|/* Reset LCDA setting */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
l_int|0xfc
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xF0
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
suffix:semicolon
multiline_comment|/* 3 */
)brace
)brace
)brace
macro_line|#if 0&t;&t; /* We can&squot;t detect it this way; there are machines which do not use LCDA despite&n;                  * the chip revision&n;&t;&t;  */      &t;      
r_if
c_cond
(paren
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0x0f
)paren
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xF0
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
suffix:semicolon
multiline_comment|/* 3 */
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_le
l_int|0x13
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xF0
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
suffix:semicolon
multiline_comment|/* 3 */
)brace
)brace
)brace
)brace
macro_line|#endif&t;&t; 
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
op_eq
(paren
id|EnableDualEdge
op_or
id|SetToLCDA
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCDA
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SetToLCDA
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCDA
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|temp
op_amp
id|EnableLVDSHiVision
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToHiVisionTV
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToSCART
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToRAMDAC
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToAVIDEO
op_or
multiline_comment|/* = 0x807C; */
id|SetCRT2ToHiVisionTV
suffix:semicolon
multiline_comment|/* = 0x80FC; */
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToSCART
op_or
id|SetCRT2ToLCD
op_or
id|SetCRT2ToHiVisionTV
op_or
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
suffix:semicolon
)brace
multiline_comment|/* = 0x80bc */
r_else
id|temp
op_assign
id|SetCRT2ToLCDA
op_or
id|SetCRT2ToLCD
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|SetCRT2ToTV
op_or
id|SetCRT2ToLCD
suffix:semicolon
)brace
r_else
id|temp
op_assign
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|temp
)paren
)paren
(brace
id|tempax
op_assign
id|DisableCRT2Display
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToRAMDAC
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
multiline_comment|/* &amp;&amp; (!(SiS_Pr-&gt;SiS_VBType &amp; VB_NoLCD)) */
)paren
(brace
multiline_comment|/* We initialize the Panel Link of the type of bridge is DH */
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToSCART
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
id|tempbx
op_or_assign
id|SetPALTV
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToHiVisionTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
id|tempbx
op_or_assign
id|SetPALTV
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbx
op_and_assign
(paren
l_int|0xFF00
op_or
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|tempbx
op_or_assign
id|SetCRT2ToLCD
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|tempax
op_amp
id|DisableCRT2Display
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
(paren
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
)paren
)paren
(brace
id|tempbx
op_assign
id|SetSimuScanMode
op_or
id|DisableCRT2Display
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
multiline_comment|/* TW: LVDS (LCD/TV) and 301BDH (LCD) can only be slave in 8bpp modes */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|tempbx
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
)paren
(brace
id|modeflag
op_and_assign
(paren
op_complement
id|CRT2Mode
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SwitchToCRT2
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
op_logical_and
(paren
id|checkcrt2mode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|0x0a
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_BridgeIsEnable
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DriverMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|DisableCRT2Display
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|DriverMode
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|CRT2Mode
)paren
)paren
op_logical_and
(paren
id|checkcrt2mode
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_ne
l_int|0x0a
)paren
(brace
multiline_comment|/* TW: 650/301 BIOS */
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* TW: 650/301 BIOS */
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|tempbx
op_or_assign
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
id|TVOverScan
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
op_eq
l_int|1
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetCHTVOverScan
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x79
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x80
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_CHOverScan
op_eq
l_int|1
)paren
)paren
(brace
id|tempbx
op_or_assign
id|SetCHTVOverScan
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
l_int|0xfe
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetPALTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALM
)paren
(brace
id|tempbx
op_and_assign
(paren
op_complement
id|SetPALTV
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
l_int|0xf3
)braket
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
l_int|0x11b
)braket
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetPALTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALM
)paren
(brace
id|tempbx
op_and_assign
(paren
op_complement
id|SetPALTV
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
)brace
multiline_comment|/* PALM/PALN on Chrontel 7019 */
id|SiS_Pr-&gt;SiS_CHPALM
op_assign
id|SiS_Pr-&gt;SiS_CHPALN
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_amp
id|SetPALTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALM
)paren
(brace
id|SiS_Pr-&gt;SiS_CHPALM
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp
op_amp
id|EnablePALN
)paren
(brace
id|SiS_Pr-&gt;SiS_CHPALN
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_Pr-&gt;SiS_VBInfo
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
(brace
id|SiS_WhatIsThis
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_VBInfo
)paren
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
macro_line|#ifdef LINUX_KERNEL
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;sisfb: (VBInfo= 0x%04x, SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VBInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsgVerb
c_func
(paren
l_int|0
comma
id|X_PROBED
comma
l_int|3
comma
l_string|&quot;(init301: VBInfo=0x%04x, SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VBInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
macro_line|#if 0  /* TW: Incomplete! (But does not seem to be required) */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: From A901/630+301B BIOS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x80
)paren
r_if
c_cond
(paren
(braket
id|si
)braket
op_eq
l_int|3
)paren
(brace
id|ModeIdIndex
op_assign
l_int|0x3f2b
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
l_int|0xF7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
id|bp
op_plus
l_int|4
op_assign
l_int|0x03
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* From 650/30xLV BIOS: */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
l_int|0xF7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
id|bp
op_plus
l_int|4
op_assign
l_int|0x03
suffix:semicolon
)brace
r_else
id|bp
op_plus
l_int|4
op_assign
id|ModeNo
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* TW: 630/301B and 650/301 (not 301LV!) BIOSes do more here, but this seems for DOS mode */
)brace
r_void
DECL|function|SiS_WhatIsThis
id|SiS_WhatIsThis
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|myvbinfo
)paren
(brace
r_int
r_int
id|eax
comma
id|temp
suffix:semicolon
r_int
r_int
id|temp1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChSW
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000874
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000800
comma
l_int|0x74
)paren
suffix:semicolon
macro_line|#endif
id|eax
op_and_assign
l_int|0xFFFF
suffix:semicolon
id|temp
op_assign
id|eax
suffix:semicolon
id|eax
op_add_assign
l_int|0x3c
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg4
c_func
(paren
(paren
id|USHORT
)paren
id|eax
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0xFEFF
suffix:semicolon
id|SiS_SetReg5
c_func
(paren
(paren
id|USHORT
)paren
id|eax
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg4
c_func
(paren
(paren
id|USHORT
)paren
id|eax
)paren
suffix:semicolon
id|eax
op_assign
id|temp
suffix:semicolon
id|eax
op_add_assign
l_int|0x3a
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg4
c_func
(paren
(paren
id|USHORT
)paren
id|eax
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0xFEFF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|myvbinfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|temp1
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
id|SiS_SetReg5
c_func
(paren
(paren
id|USHORT
)paren
id|eax
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg4
c_func
(paren
(paren
id|USHORT
)paren
id|eax
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_GetRAMDAC2DATA
id|SiS_GetRAMDAC2DATA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
op_assign
l_int|0
comma
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|temp1
op_assign
l_int|0
comma
id|modeflag
op_assign
l_int|0
comma
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|StandTableIndex
comma
id|CRT1Index
suffix:semicolon
macro_line|#ifdef SIS315H   
id|USHORT
id|ResInfo
comma
id|DisplayType
comma
id|temp
op_assign
l_int|0
suffix:semicolon
r_const
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_RVBHCFACT
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|StandTableIndex
op_assign
id|SiS_GetModePtr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|6
)braket
suffix:semicolon
id|temp1
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
l_int|7
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
macro_line|#ifdef SIS315H     
id|temp
op_assign
id|SiS_GetLVDSCRT1Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1320x480_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|23
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|36
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|37
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|38
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|39
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|99
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|tempax
op_or_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempax
op_and_assign
l_int|0x03FF
suffix:semicolon
id|tempbx
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|tempcx
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|13
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x0100
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|2
suffix:semicolon
id|tempbx
op_or_assign
id|tempcx
suffix:semicolon
id|temp1
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|7
)braket
suffix:semicolon
macro_line|#endif&t;
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|CRT1Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
macro_line|#if 0   /* Not any longer */&t;
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|CRT1Index
op_and_assign
l_int|0x3F
suffix:semicolon
)brace
macro_line|#endif&t;
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|tempax
op_or_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempax
op_and_assign
l_int|0x03FF
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
op_lshift
l_int|8
suffix:semicolon
id|tempcx
op_and_assign
l_int|0x0100
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|2
suffix:semicolon
id|tempbx
op_or_assign
id|tempcx
suffix:semicolon
id|temp1
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x01
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x20
)paren
(brace
id|tempbx
op_or_assign
l_int|0x0200
suffix:semicolon
)brace
id|tempax
op_add_assign
l_int|5
suffix:semicolon
multiline_comment|/* Charx8Dot is no more used (and assumed), so we set it */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|modeflag
op_or_assign
id|Charx8Dot
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|tempax
op_mul_assign
l_int|8
suffix:semicolon
)brace
r_else
id|tempax
op_mul_assign
l_int|9
suffix:semicolon
multiline_comment|/* TW: From 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VGAHT
op_assign
id|SiS_Pr-&gt;SiS_HT
op_assign
id|tempax
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
id|SiS_Pr-&gt;SiS_VGAVT
op_assign
id|SiS_Pr-&gt;SiS_VT
op_assign
id|tempbx
suffix:semicolon
)brace
r_void
DECL|function|SiS_UnLockCRT2
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2f
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x24
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_LockCRT2
id|SiS_LockCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x24
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_EnableCRT2
id|SiS_EnableCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
multiline_comment|/* Checked against all BIOSes */
r_void
DECL|function|SiS_DisableBridge
id|SiS_DisableBridge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|tempah
comma
id|pushax
op_assign
l_int|0
comma
id|modenum
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp
op_assign
l_int|0
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* ===== TW: For 30xB/LV ===== */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300&t;   /* 300 series */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
multiline_comment|/* New for 300+301LV */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0x3f
)paren
suffix:semicolon
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0x3f
)paren
suffix:semicolon
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H&t;   /* 310/325 series */
r_if
c_cond
(paren
id|IS_SIS650740
)paren
(brace
multiline_comment|/* 650, 740 */
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
op_ne
l_int|1
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w */
macro_line|#endif
id|modenum
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|modenum
op_le
l_int|0x13
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0xff00
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0x6000
)paren
suffix:semicolon
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
l_int|0x8000
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
)brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xef
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xf7
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|tempah
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xbf
suffix:semicolon
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
(paren
id|modenum
op_le
l_int|0x13
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
(paren
id|modenum
op_le
l_int|0x13
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xdf
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
op_complement
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* 1.10.8r */
id|tempah
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xbf
suffix:semicolon
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
multiline_comment|/* 1.10.8r */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
multiline_comment|/* 1.10.8r */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
)brace
macro_line|#if 0
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
multiline_comment|/* 740 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* 30xLV */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0x3F
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* (from 650) */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* (301,) 301B */
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
macro_line|#endif&t;  
)brace
r_else
(brace
multiline_comment|/* 315, 330 - all bridge types */
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x7f
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0xbf
suffix:semicolon
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* 315/330 */
macro_line|#endif /* SIS315H */
)brace
)brace
r_else
(brace
multiline_comment|/* ============ TW: For 301 ================ */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF0
comma
l_int|0x0B
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable VB */
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable lock mode */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* disable CRT2 */
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* ============ TW: For LVDS =============*/
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300&t;/* 300 series */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x090E
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
op_amp
l_int|0x1c
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H&t;/* 310/325 series */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|1
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0066
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Chrontel701xOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_Chrontel701xOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x80
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xDF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0xdf
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xff
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
)brace
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
)brace
macro_line|#if 0  /* TW: BIOS code makes no sense */
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
multiline_comment|/* Nothing there! */
)brace
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
comma
l_int|0x04
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 310 series */
)brace
multiline_comment|/* LVDS */
)brace
multiline_comment|/* TW: Checked against all BIOSes */
r_void
DECL|function|SiS_EnableBridge
id|SiS_EnableBridge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
op_assign
l_int|0
comma
id|tempah
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|temp1
comma
id|pushax
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|delaylong
op_assign
id|FALSE
suffix:semicolon
macro_line|#endif
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* TW: ====== For 301B et al  ====== */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300     /* 300 series */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* lock mode */
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable VB processor */
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xfe
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
op_logical_and
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
multiline_comment|/* This is only for LCD output on 301B-DH via LVDS */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* Enable CRT2 */
multiline_comment|/*&t;       DoSomeThingPCI_On(SiS_Pr) */
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xBF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* lock mode */
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable VB processor */
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* 310/325 series */
r_if
c_cond
(paren
id|IS_SIS650740
)paren
(brace
multiline_comment|/* 650 */
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
op_ne
l_int|1
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w */
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0xef
)paren
suffix:semicolon
multiline_comment|/* 1.10.7u */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 1.10.7u */
r_if
c_cond
(paren
op_logical_neg
(paren
id|IS_SIS740
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x4c
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
id|delaylong
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1e
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1f
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
id|tempah
op_assign
l_int|0xc0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* All this from 1.10.7u */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x0c
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x31
comma
l_int|0x05
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x32
comma
l_int|0x60
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x33
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* 1.10.8r */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|delaylong
)paren
(brace
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xfe
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
macro_line|#if 0
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x0c
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x31
comma
l_int|0x05
)paren
suffix:semicolon
multiline_comment|/* 1.10.8r: 0x0d */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x32
comma
l_int|0x60
)paren
suffix:semicolon
multiline_comment|/* 1.10.8r: 0x70 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x33
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* 1.10.8r: 0x40 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x40
)paren
suffix:semicolon
macro_line|#endif&t;      
)brace
macro_line|#if 0
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
multiline_comment|/* 740 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* 30xLV */
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_DisplayOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|pushax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xE3
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1f
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0x10
)paren
suffix:semicolon
multiline_comment|/* (taken from 650 1.10.8r) */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x40
)paren
(brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xfe
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|3
comma
l_int|10
)paren
suffix:semicolon
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
id|pushax
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* (301), 301B */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1f
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7F
)paren
suffix:semicolon
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
r_else
(brace
multiline_comment|/* 315, 330 */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1f
comma
l_int|0x20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0xc0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x40
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7F
)paren
suffix:semicolon
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* 315, 330 */
macro_line|#endif /* SIS315H */
)brace
)brace
r_else
(brace
multiline_comment|/* ============  TW: For 301 ================ */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF0
comma
l_int|0x0B
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
)paren
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* lock mode */
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable CRT2 */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
)brace
multiline_comment|/* BVBDOENABLE=1 */
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1F
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* enable VB processor */
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
id|SiS_VBLongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF0
comma
l_int|0x03
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* =================== TW: For LVDS ================== */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300    /* 300 series */
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|SiS_EnableCRT2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0xBF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x01
comma
l_int|0x1F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0B0E
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
)brace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
macro_line|#ifdef SIS315H    /* 310/325 series */
macro_line|#if 0  /* BIOS code makes no sense */
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
)paren
)paren
(brace
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xFB
)paren
suffix:semicolon
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|SiS_EnableCRT2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0xf7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x20
suffix:semicolon
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2e
comma
l_int|0x7f
)paren
suffix:semicolon
macro_line|#ifdef NEWCH701x
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif       
id|temp1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
l_int|0x80
)paren
)paren
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|temp
)paren
(brace
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifndef NEWCH701x       
r_else
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1E
comma
l_int|0x20
)paren
suffix:semicolon
)brace
macro_line|#endif       
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_Chrontel701xOn
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_ChrontelDoSomething1
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_ChrontelDoSomething1
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething4
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething4
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x11
comma
l_int|0xF7
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif  /* SIS315H */
)brace
multiline_comment|/* 310 series */
)brace
multiline_comment|/* LVDS */
)brace
r_void
DECL|function|SiS_SiS30xBLOn
id|SiS_SiS30xBLOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
multiline_comment|/* TW: Switch on LCD backlight on SiS30xLV */
r_if
c_cond
(paren
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
op_logical_or
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x01
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_SiS30xBLOff
id|SiS_SiS30xBLOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
multiline_comment|/* TW: Switch off LCD backlight on SiS30xLV */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
op_logical_or
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFE
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
comma
l_int|0xFD
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|BOOLEAN
DECL|function|SiS_CR36BIOSWord23b
id|SiS_CR36BIOSWord23b
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
op_assign
(paren
id|UCHAR
op_star
)paren
id|HwDeviceExtension-&gt;pjVirtualRomBase
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0xff
suffix:semicolon
id|temp
op_rshift_assign
l_int|4
suffix:semicolon
id|temp
op_assign
l_int|1
op_lshift
id|temp
suffix:semicolon
id|temp1
op_assign
(paren
id|ROMAddr
(braket
l_int|0x23c
)braket
op_lshift
l_int|8
)paren
op_or
id|ROMAddr
(braket
l_int|0x23b
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|temp
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_CR36BIOSWord23d
id|SiS_CR36BIOSWord23d
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
op_assign
(paren
id|UCHAR
op_star
)paren
id|HwDeviceExtension-&gt;pjVirtualRomBase
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0xff
suffix:semicolon
id|temp
op_rshift_assign
l_int|4
suffix:semicolon
id|temp
op_assign
l_int|1
op_lshift
id|temp
suffix:semicolon
id|temp1
op_assign
(paren
id|ROMAddr
(braket
l_int|0x23e
)braket
op_lshift
l_int|8
)paren
op_or
id|ROMAddr
(braket
l_int|0x23d
)braket
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|temp
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetPanelDelayLoop
id|SiS_SetPanelDelayLoop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|DelayTime
comma
id|USHORT
id|DelayLoop
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DelayLoop
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|DelayTime
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetPanelDelay
id|SiS_SetPanelDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|DelayTime
)paren
(brace
id|USHORT
id|PanelID
comma
id|DelayIndex
comma
id|Delay
suffix:semicolon
macro_line|#ifdef SIS300
id|USHORT
id|temp
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* 300 series, LVDS */
id|PanelID
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|DelayTime
op_ge
l_int|2
)paren
op_logical_and
(paren
(paren
id|PanelID
op_amp
l_int|0x0f
)paren
op_eq
l_int|1
)paren
)paren
(brace
id|Delay
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|DelayTime
op_ge
l_int|2
)paren
(brace
id|DelayTime
op_sub_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x225
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x226
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 300 series, 301(B) */
id|PanelID
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x10
)paren
)paren
(brace
id|PanelID
op_assign
l_int|0x12
suffix:semicolon
)brace
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|DelayTime
op_ge
l_int|2
)paren
op_logical_and
(paren
(paren
id|PanelID
op_amp
l_int|0x0f
)paren
op_eq
l_int|1
)paren
)paren
(brace
id|Delay
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|DelayTime
op_ge
l_int|2
)paren
(brace
id|DelayTime
op_sub_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x220
)braket
op_amp
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x225
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x226
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
)brace
macro_line|#endif  /* SIS300 */
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
r_return
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/* 310/325 series, LVDS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|0
)paren
(brace
id|PanelID
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|DelayTime
op_ge
l_int|2
)paren
op_logical_and
(paren
(paren
id|PanelID
op_amp
l_int|0x0f
)paren
op_eq
l_int|1
)paren
)paren
(brace
id|Delay
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|DelayTime
op_ge
l_int|2
)paren
(brace
id|DelayTime
op_sub_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x13c
)braket
op_amp
l_int|0x40
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x17e
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
(paren
id|USHORT
)paren
id|ROMAddr
(braket
l_int|0x17f
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_ShortDelay
c_func
(paren
id|SiS_Pr
comma
id|Delay
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 310/325 series, 301(B) */
id|PanelID
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|DelayIndex
op_assign
id|PanelID
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|DelayTime
op_amp
l_int|0x01
)paren
)paren
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|0
)braket
suffix:semicolon
)brace
r_else
(brace
id|Delay
op_assign
id|SiS_Pr-&gt;SiS_PanelDelayTbl
(braket
id|DelayIndex
)braket
dot
id|timer
(braket
l_int|1
)braket
suffix:semicolon
)brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|Delay
op_star
l_int|4
)paren
suffix:semicolon
)brace
macro_line|#endif /* SIS315H */
)brace
)brace
r_void
DECL|function|SiS_LongDelay
id|SiS_LongDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
r_while
c_loop
(paren
id|delay
op_decrement
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x19df
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_ShortDelay
id|SiS_ShortDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
r_while
c_loop
(paren
id|delay
op_decrement
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x42
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_GenericDelay
id|SiS_GenericDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delay
)paren
(brace
id|USHORT
id|temp
comma
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0x61
)paren
op_amp
l_int|0x10
suffix:semicolon
r_while
c_loop
(paren
id|delay
)paren
(brace
id|temp
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0x61
)paren
op_amp
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|flag
)paren
(brace
r_continue
suffix:semicolon
)brace
id|flag
op_assign
id|temp
suffix:semicolon
id|delay
op_decrement
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_Is301B
id|SiS_Is301B
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0x0B0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_CRT2IsLCD
id|SiS_CRT2IsLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsDualEdge
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_650
)paren
op_logical_or
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xf0
)paren
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsVAMode
id|SiS_IsVAMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_amp
id|EnableDualEdge
)paren
op_logical_and
(paren
id|flag
op_amp
id|SetToLCDA
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#if 0 /* Not done in 650/30xLV 1.10.6s, but in 650/301LV */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|flag
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_WeHaveBacklightCtrl
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x79
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#if 0
id|BOOLEAN
id|SiS_Is315E
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
id|BOOLEAN
DECL|function|SiS_IsNotM650or651
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
suffix:semicolon
id|flag
op_and_assign
l_int|0xF0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0xb0
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x90
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|1
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsYPbPr
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableLVDSHiVision
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* = YPrPb = 0x08 */
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsChScart
id|SiS_IsChScart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableLVDSScart
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* = Scart = 0x04 */
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsTVOrYPbPrOrScart
id|SiS_IsTVOrYPbPrOrScart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|EnableLVDSHiVision
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* = YPrPb = 0x08 */
r_if
c_cond
(paren
id|flag
op_amp
id|EnableLVDSScart
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* = Scart = 0x04- TW inserted */
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsLCDOrLCDA
id|SiS_IsLCDOrLCDA
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetToLCDA
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_IsDisableCRT2
id|SiS_IsDisableCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x20
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_BridgeIsOn
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|1
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|2
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_BridgeIsEnable
id|SiS_BridgeIsEnable
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series (630/301B 2.04.5a) */
id|flag
op_and_assign
l_int|0xa0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0x80
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x20
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310/325 series (650/30xLV 1.10.6s) */
id|flag
op_and_assign
l_int|0x50
suffix:semicolon
r_if
c_cond
(paren
(paren
id|flag
op_eq
l_int|0x40
)paren
op_logical_or
(paren
id|flag
op_eq
l_int|0x10
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_BridgeInSlave
id|SiS_BridgeInSlave
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|flag1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_amp
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetHiVision
id|SiS_SetHiVision
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
macro_line|#ifdef SIS315H
id|USHORT
id|temp
suffix:semicolon
macro_line|#endif
multiline_comment|/* Note: This variable is only used on 30xLV systems.&n;     CR38 has a different meaning on LVDS/CH7019 systems.&n;   */
id|SiS_Pr-&gt;SiS_HiVision
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x38
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiVision
op_assign
(paren
id|temp
op_rshift
l_int|3
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif /* SIS315H */
)brace
)brace
id|BOOLEAN
DECL|function|SiS_GetLCDResInfo
id|SiS_GetLCDResInfo
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|modeflag
comma
id|resinfo
op_assign
l_int|0
suffix:semicolon
r_const
r_int
r_char
id|SiS300SeriesLCDRes
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|7
comma
l_int|4
comma
l_int|5
comma
l_int|8
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDInfo
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
multiline_comment|/* FSTN: Fake CR36 (TypeInfo 2, ResInfo SiS_Panel320x480) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|temp
op_assign
l_int|0x20
op_or
id|SiS_Pr-&gt;SiS_Panel320x480
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
id|temp
op_rshift
l_int|4
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_assign
(paren
id|temp
op_amp
l_int|0x0F
)paren
op_minus
l_int|1
suffix:semicolon
)brace
id|temp
op_and_assign
l_int|0x0f
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: Translate 300 series LCDRes to 310/325 series for unified usage */
id|temp
op_assign
id|SiS300SeriesLCDRes
(braket
id|temp
)braket
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_Panel320x480
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
OL
id|SiS_Pr-&gt;SiS_PanelMin301
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_PanelMin301
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
OL
id|SiS_Pr-&gt;SiS_PanelMinLVDS
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_PanelMinLVDS
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
OG
id|SiS_Pr-&gt;SiS_PanelMax
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDResInfo
op_assign
id|SiS_Pr-&gt;SiS_Panel1024x768
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
multiline_comment|/* TW: Fake LVDS bridge for FSTN */
id|temp
op_assign
l_int|0x04
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
comma
id|temp
)paren
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;UsePanelScaler
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|DontExpandLCD
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UsePanelScaler
op_eq
l_int|1
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
multiline_comment|/* TW: Inserted entire 315-block from 650/LVDS/30xLV BIOSes */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x3a
op_logical_or
id|ModeNo
op_eq
l_int|0x4d
op_logical_or
id|ModeNo
op_eq
l_int|0x65
)paren
(brace
multiline_comment|/* Bridge does not scale to 1280x1024 */
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x7c
op_logical_or
id|ModeNo
op_eq
l_int|0x7d
op_logical_or
id|ModeNo
op_eq
l_int|0x7e
)paren
(brace
multiline_comment|/* TW: Bridge does not scale to 1280x960 */
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x2f
op_logical_or
id|ModeNo
op_eq
l_int|0x5d
op_logical_or
id|ModeNo
op_eq
l_int|0x5e
)paren
(brace
multiline_comment|/* TW: Bridge does not scale to 640x400 */
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|DontExpandLCD
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x2f
op_logical_or
id|ModeNo
op_eq
l_int|0x5d
op_logical_or
id|ModeNo
op_eq
l_int|0x5e
)paren
(brace
multiline_comment|/* TW: Most panels can&squot;t scale to 640x400 */
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
op_complement
id|DontExpandLCD
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x01
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
l_int|0xFFEF
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCDInfo
op_or_assign
id|LCDPass11
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
l_int|0xEF
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
op_logical_and
(paren
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
l_int|0xEF
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
)brace
multiline_comment|/* TW: With Trumpion, always Expanding */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_ne
l_int|0
)paren
(brace
id|SiS_Pr-&gt;SiS_LCDInfo
op_and_assign
(paren
op_complement
id|DontExpandLCD
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|7
)paren
op_logical_or
(paren
id|resinfo
op_eq
l_int|3
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|4
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
multiline_comment|/* 512x384  */
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|3
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
multiline_comment|/* 400x300  */
)brace
)brace
)brace
r_else
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
r_else
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
r_else
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|LCDVESATiming
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|LCDVESATiming
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS302B
op_or
id|VB_SIS302LV
)paren
)paren
(brace
multiline_comment|/* Enable 302B/302LV dual link mode */
multiline_comment|/* (302B is a theory - not in any BIOS */
id|temp
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|temp
op_assign
l_int|0x04
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_assign
l_int|0x04
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|temp
op_assign
l_int|0x04
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef LINUX_KERNEL
macro_line|#ifdef TWDEBUG
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;sisfb: (LCDInfo=0x%04x LCDResInfo=0x%02x LCDTypeInfo=0x%02x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDInfo
comma
id|SiS_Pr-&gt;SiS_LCDResInfo
comma
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsgVerb
c_func
(paren
l_int|0
comma
id|X_PROBED
comma
l_int|3
comma
l_string|&quot;(init301: LCDInfo=0x%04x LCDResInfo=0x%02x LCDTypeInfo=0x%02x SetFlag=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_LCDInfo
comma
id|SiS_Pr-&gt;SiS_LCDResInfo
comma
id|SiS_Pr-&gt;SiS_LCDTypeInfo
comma
id|SiS_Pr-&gt;SiS_SetFlag
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_PresetScratchregister
id|SiS_PresetScratchregister
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
r_return
suffix:semicolon
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x30,0x21);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x31,0x41);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x32,0x28);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x33,0x22);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x35,0x43);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x36,0x01);  */
multiline_comment|/*SiS_SetReg1(SiS_Pr-&gt;SiS_P3d4,0x37,0x00);  */
)brace
r_void
DECL|function|SiS_LongWait
id|SiS_LongWait
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|i
suffix:semicolon
id|i
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_amp
l_int|0xC0
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0xFFFF
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0xFFFF
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_VBLongWait
id|SiS_VBLongWait
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|SiS_VBWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_LongWait
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_void
DECL|function|SiS_VBWait
id|SiS_VBWait
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|tempal
comma
id|temp
comma
id|i
comma
id|j
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|100
suffix:semicolon
id|j
op_increment
)paren
(brace
id|tempal
op_assign
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|tempal
op_amp
l_int|0x08
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
)brace
id|temp
op_xor_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_WaitVBRetrace
id|SiS_WaitVBRetrace
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x20
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x40
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
)brace
r_void
DECL|function|SiS_WaitRetrace1
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|watchdog
suffix:semicolon
macro_line|#ifdef SIS300
id|USHORT
id|i
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
)paren
op_amp
l_int|0xc0
)paren
(brace
r_return
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS300
macro_line|#if 0  /* TW: Not done in A901 BIOS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
)paren
op_amp
l_int|0xc0
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|watchdog
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|watchdog
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
)brace
r_void
DECL|function|SiS_WaitRetraceDDC
id|SiS_WaitRetraceDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|watchdog
suffix:semicolon
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
)paren
op_amp
l_int|0xc0
)paren
(brace
r_return
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg2
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
op_amp
l_int|0x08
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_WaitRetrace2
id|SiS_WaitRetrace2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|watchdog
suffix:semicolon
macro_line|#ifdef SIS300
id|USHORT
id|i
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x30
)paren
op_amp
l_int|0x02
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x30
)paren
op_amp
l_int|0x02
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS300
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x25
)paren
op_amp
l_int|0x02
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|watchdog
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
id|watchdog
op_assign
l_int|65535
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x25
)paren
op_amp
l_int|0x02
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|watchdog
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
)brace
multiline_comment|/* =========== Set and Get register routines ========== */
r_void
DECL|function|SiS_SetRegANDOR
id|SiS_SetRegANDOR
c_func
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
(paren
id|DataAND
)paren
)paren
op_or
id|DataOR
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegAND
id|SiS_SetRegAND
c_func
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_and_assign
id|DataAND
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
DECL|function|SiS_SetRegOR
r_void
id|SiS_SetRegOR
c_func
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_or_assign
id|DataOR
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================================= */
multiline_comment|/* TW: Set 301 TV Encoder (and some LCD relevant) registers */
r_void
DECL|function|SiS_SetGroup2
id|SiS_SetGroup2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
comma
id|j
comma
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|temp
comma
id|temp1
suffix:semicolon
id|USHORT
id|push1
comma
id|push2
suffix:semicolon
r_const
id|UCHAR
op_star
id|PhasePoint
suffix:semicolon
r_const
id|UCHAR
op_star
id|TimingPoint
suffix:semicolon
macro_line|#ifdef SIS315H   
r_const
id|SiS_Part2PortTblStruct
op_star
id|CRT2Part2Ptr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|resindex
comma
id|CRT2Index
suffix:semicolon
macro_line|#endif  
id|USHORT
id|modeflag
comma
id|resinfo
comma
id|crt2crtc
suffix:semicolon
id|ULONG
id|longtemp
comma
id|tempeax
comma
id|tempebx
comma
id|temp2
comma
id|tempecx
suffix:semicolon
r_const
id|UCHAR
id|atable
(braket
)braket
op_assign
(brace
l_int|0xc3
comma
l_int|0x9e
comma
l_int|0xc3
comma
l_int|0x9e
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0xab
comma
l_int|0x87
comma
l_int|0xab
comma
l_int|0x9e
comma
l_int|0xe7
comma
l_int|0x02
comma
l_int|0x02
)brace
suffix:semicolon
macro_line|#ifdef SIS315H   
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s: (Is at end of SetGroup2!) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xfc
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|temp
op_assign
l_int|3
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0b
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1c
comma
l_int|0xa7
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1d
comma
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1e
comma
l_int|0xf2
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1f
comma
l_int|0x6e
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x21
comma
l_int|0x8b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x22
comma
l_int|0x73
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
l_int|0x53
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x24
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x26
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x27
comma
l_int|0xf4
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x28
comma
l_int|0x63
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x29
comma
l_int|0xbb
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2a
comma
l_int|0xcc
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2b
comma
l_int|0x7a
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2c
comma
l_int|0x58
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2d
comma
l_int|0xe4
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2e
comma
l_int|0x73
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
l_int|0xda
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
l_int|0x72
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
suffix:semicolon
)brace
macro_line|#endif  
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VBInfo
suffix:semicolon
id|tempax
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_and_assign
l_int|0x0410
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0x0800
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|3
)paren
suffix:semicolon
id|temp
op_xor_assign
l_int|0x0C
suffix:semicolon
multiline_comment|/* TW: From 1.10.7w (no vb check there; don&squot;t care - this only disables SVIDEO and CVBS signal) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|temp
op_or_assign
l_int|0x0c
suffix:semicolon
)brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase
suffix:semicolon
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_PALTiming
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_xor_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVSt2Timing
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVSt1Timing
suffix:semicolon
)brace
r_else
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVTextTiming
suffix:semicolon
)brace
)brace
r_else
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_HiTVExtTiming
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
id|temp
op_and_assign
l_int|0xfe
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_PALTiming
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALPhase2
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
id|TimingPoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCTiming
suffix:semicolon
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_NTSCPhase2
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
l_int|0x35
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|EnablePALM
)paren
(brace
multiline_comment|/* 0x40 */
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALMPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALMPhase2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|temp1
op_amp
id|EnablePALN
)paren
(brace
multiline_comment|/* 0x80 */
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALNPhase
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
op_logical_and
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_PALNPhase2
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#ifdef SIS315H
multiline_comment|/* TW: 650/301LV BIOS */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
)paren
(brace
id|PhasePoint
op_assign
id|SiS_Pr-&gt;SiS_SpecialPhase
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|PhasePoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2D
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|TimingPoint
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_amp
l_int|0x07
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
id|SiS_Pr-&gt;SiS_NewFlickerMode
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x35
comma
id|SiS_Pr-&gt;SiS_RY1COE
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x36
comma
id|SiS_Pr-&gt;SiS_RY2COE
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x37
comma
id|SiS_Pr-&gt;SiS_RY3COE
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x38
comma
id|SiS_Pr-&gt;SiS_RY4COE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
(brace
id|tempax
op_assign
l_int|950
suffix:semicolon
)brace
r_else
id|tempax
op_assign
l_int|440
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempax
op_assign
l_int|520
suffix:semicolon
)brace
r_else
id|tempax
op_assign
l_int|440
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VDE
op_le
id|tempax
)paren
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_ne
l_int|3
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|1024
)paren
op_logical_or
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ne
l_int|1024
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VDE
op_le
id|tempax
)paren
)paren
)paren
)paren
)paren
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_or
(paren
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_add_assign
(paren
id|USHORT
)paren
id|TimingPoint
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_add_assign
(paren
id|USHORT
)paren
id|TimingPoint
(braket
l_int|1
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_ne
l_int|3
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x19
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x52
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x1d
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x0b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x11
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempcx
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempcx
op_decrement
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1D
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempcx
op_increment
suffix:semicolon
)brace
id|tempcx
op_rshift_assign
l_int|1
suffix:semicolon
id|push1
op_assign
id|tempcx
suffix:semicolon
id|tempcx
op_add_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|tempcx
op_sub_assign
l_int|4
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x22
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x24
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempbx
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|tempbx
op_sub_assign
l_int|4
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x29
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|j
op_add_assign
l_int|2
suffix:semicolon
id|tempcx
op_add_assign
(paren
(paren
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
)paren
)paren
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x27
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x28
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_add_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|tempcx
op_sub_assign
l_int|4
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2A
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|push1
suffix:semicolon
id|j
op_add_assign
l_int|2
suffix:semicolon
id|tempcx
op_sub_assign
(paren
id|TimingPoint
(braket
id|j
)braket
op_or
(paren
(paren
id|TimingPoint
(braket
id|j
op_plus
l_int|1
)braket
)paren
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_sub_assign
l_int|11
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Pr
)paren
op_minus
l_int|1
suffix:semicolon
id|tempcx
op_assign
id|tempax
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2E
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|853
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|crt2crtc
op_eq
l_int|1
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|crt2crtc
op_eq
l_int|4
)paren
multiline_comment|/* TW: BIOS calls GetRatePtrCRT2 here - does not make sense */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
l_int|3
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x2f
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: From 1.10.7w - doesn&squot;t make sense */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
multiline_comment|/* SetFlag?? */
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2F
comma
id|temp
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|6
)paren
op_or
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|tempax
op_or_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
)paren
(brace
multiline_comment|/* TW: New from 630/301B (II) BIOS */
id|tempax
op_or_assign
l_int|0x1000
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSVIDEO
)paren
)paren
(brace
id|tempax
op_or_assign
l_int|0x2000
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* TODO Check this with other BIOSes */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_eq
l_int|3
)paren
)paren
(brace
id|tempax
op_or_assign
l_int|0x1000
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSVIDEO
)paren
)paren
(brace
id|tempax
op_or_assign
l_int|0x2000
suffix:semicolon
)brace
)brace
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0x60
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_ne
l_int|3
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS_HiVisionTable
(braket
id|SiS_Pr-&gt;SiS_HiVision
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS_HiVisionTable
(braket
id|SiS_Pr-&gt;SiS_HiVision
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_sub_assign
l_int|3
suffix:semicolon
id|tempbx
op_and_assign
l_int|0x03ff
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|5
suffix:semicolon
id|temp
op_or_assign
l_int|0x18
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x46
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x47
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* tv gatingno */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
id|tempax
op_assign
l_int|0x3000
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x01
)paren
(brace
id|tempax
op_assign
l_int|0x5000
suffix:semicolon
)brace
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4d
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
id|tempbx
op_and_assign
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_ge
id|SiS_Pr-&gt;SiS_HDE
)paren
(brace
id|tempbx
op_or_assign
l_int|0x2000
suffix:semicolon
id|tempax
op_and_assign
l_int|0x00FF
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
l_int|0x0101
suffix:semicolon
multiline_comment|/*if(SiS_Pr-&gt;SiS_VBInfo &amp; (SetPALTV | SetCRT2ToTV)) {  */
multiline_comment|/*301b- TW: BIOS BUG? */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
)paren
(brace
multiline_comment|/* TW: This check not in 630/301B */
id|tempcx
op_assign
l_int|0x1920
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1280
)paren
(brace
id|tempcx
op_assign
l_int|0x1420
suffix:semicolon
id|tempbx
op_and_assign
l_int|0xDFFF
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbx
op_amp
l_int|0x2000
)paren
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|1
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
)brace
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
id|tempebx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|longtemp
op_assign
id|tempeax
op_star
id|tempebx
suffix:semicolon
id|tempecx
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|longtemp
op_div_assign
id|tempecx
suffix:semicolon
id|longtemp
op_lshift_assign
l_int|0x0d
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|longtemp
op_lshift_assign
l_int|3
suffix:semicolon
)brace
id|tempecx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
id|temp2
op_assign
id|longtemp
op_mod
id|tempecx
suffix:semicolon
id|tempeax
op_assign
id|longtemp
op_div
id|tempecx
suffix:semicolon
r_if
c_cond
(paren
id|temp2
op_ne
l_int|0
)paren
(brace
id|tempeax
op_increment
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|USHORT
)paren
id|tempeax
suffix:semicolon
id|tempbx
op_assign
id|push1
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xff00
)paren
op_or
(paren
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_rshift
l_int|5
)paren
suffix:semicolon
id|tempbx
op_or_assign
(paren
id|tempax
op_amp
l_int|0x1F00
)paren
suffix:semicolon
id|tempax
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x44
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x45
comma
l_int|0xC0
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
l_int|0x2000
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
id|temp
op_or_assign
l_int|0x18
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x46
comma
l_int|0xE0
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_assign
l_int|0x0382
suffix:semicolon
id|tempcx
op_assign
l_int|0x007e
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|0x0369
suffix:semicolon
id|tempcx
op_assign
l_int|0x0061
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4C
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_and_assign
l_int|0x03FF
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0003
)paren
op_lshift
l_int|2
suffix:semicolon
id|temp
op_or_assign
(paren
id|tempbx
op_rshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4D
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x4D
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
(paren
id|USHORT
)paren
(paren
id|temp
op_minus
l_int|3
)paren
)paren
suffix:semicolon
)brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
l_int|0x35
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|temp
)paren
op_amp
id|EnablePALM
)paren
(brace
multiline_comment|/* 0x40 */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0xEF
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
id|temp
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0B
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_Set300Part2Regs
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|BaseAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* TW: !!! The following is a duplicate, done for LCDA as well (see above) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1c
comma
l_int|0xa7
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1d
comma
l_int|0x07
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1e
comma
l_int|0xf2
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1f
comma
l_int|0x6e
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x21
comma
l_int|0x8b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x22
comma
l_int|0x73
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
l_int|0x53
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x24
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x26
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x27
comma
l_int|0xf4
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x28
comma
l_int|0x63
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x29
comma
l_int|0xbb
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2a
comma
l_int|0xcc
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2b
comma
l_int|0x7a
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2c
comma
l_int|0x58
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2d
comma
l_int|0xe4
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2e
comma
l_int|0x73
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
l_int|0xda
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x43
comma
l_int|0x72
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: From here: Part2 LCD setup */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempbx
op_decrement
suffix:semicolon
multiline_comment|/* RHACTE=HDE-1 */
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2C
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2B
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_ge
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|temp
op_assign
l_int|0x01
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0B
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
multiline_comment|/* RTVACTEO=(VDE-1)&amp;0xFF */
id|push1
op_assign
id|tempbx
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x03
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0C
comma
l_int|0xF8
comma
id|temp
)paren
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VT
suffix:semicolon
id|push2
op_assign
id|tempcx
suffix:semicolon
id|tempcx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVTVT=VT-1 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x19
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_lshift_assign
l_int|5
suffix:semicolon
multiline_comment|/* Enable dithering; newer versions only do this for 32bpp mode */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDSync
)paren
(brace
multiline_comment|/* TW: 630/301 BIOS checks this */
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x01
)paren
(brace
multiline_comment|/* 32bpp mode? */
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
multiline_comment|/* 630/301 does not do all this */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
multiline_comment|/* TW: 650/30xLV 1.10.6s */
id|temp
op_or_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x08
suffix:semicolon
multiline_comment|/* From 1.10.7w */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDRGB18Bit
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w */
)brace
r_else
(brace
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
l_int|0x0FF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_amp
id|LCDSync
)paren
(brace
id|tempbx
op_and_assign
l_int|0xFFE0
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_or
(paren
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
id|tempbx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x17
comma
l_int|0xFB
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x18
comma
l_int|0xDF
)paren
suffix:semicolon
multiline_comment|/* 1280x960, 1280x1024 and 1600x1200 data invalid/missing in tables, use old calculation */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
)paren
(brace
macro_line|#ifdef SIS315H &t;&t;&t;&t;&t;&t;&t;/* ------------- 310/325/330 series ------------ */
multiline_comment|/* TW: Inserted this entire section from 650/301LV(x) BIOS */
multiline_comment|/* Using this on the 301B with an auto-expanding 1024 panel (CR37=1) results&n;       * in a black bar in modes &lt; 1024; if the panel is non-expanding, the bridge&n;       * scales all modes to 1024. All modes in both variants (exp/non-exp) work.&n;       */
id|SiS_GetCRT2Part2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|CRT2Index
comma
op_amp
id|resindex
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|CRT2Index
)paren
(brace
r_case
id|Panel_1024x768
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* &quot;Normal&quot; */
r_case
id|Panel_1280x1024
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1400x1050_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1600x1200_1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
op_plus
l_int|16
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_2
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Non-Expanding */
r_case
id|Panel_1280x1024
op_plus
l_int|16
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
op_plus
l_int|16
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1400x1050_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
op_plus
l_int|16
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1600x1200_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1024x768
op_plus
l_int|32
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_3
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* VESA Timing */
r_case
id|Panel_1280x1024
op_plus
l_int|32
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1400x1050
op_plus
l_int|32
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1400x1050_3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|Panel_1600x1200
op_plus
l_int|32
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1600x1200_3
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_3
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
comma
id|j
op_assign
l_int|0x04
suffix:semicolon
id|j
op_le
l_int|0x06
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1c
suffix:semicolon
id|j
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1f
suffix:semicolon
id|j
op_le
l_int|0x21
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0f
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|11
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
id|temp
op_assign
l_int|0xc3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
l_int|0xb3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
id|temp
op_assign
l_int|0x4d
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: 650/30xLV 1.10.6s: */
multiline_comment|/* !!! This is a duplicate, done for LCDA as well - see above */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1a
comma
l_int|0xfc
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Not done in 1.10.7w */
id|temp
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|temp
op_assign
l_int|3
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0b
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
r_else
(brace
multiline_comment|/* ------ 300 series and other bridges, other LCD resolutions ------ */
multiline_comment|/* Using this on the 301B with an auto-expanding 1024 panel (CR37=1) makes&n;       * the panel scale at modes &lt; 1024 (no black bars); if the panel is non-expanding, &n;       * the bridge scales all modes to 1024.&n;       * !!! Malfunction at 640x480 and 640x400 when panel is auto-expanding - black screen !!!&n;       */
id|tempcx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|1200
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VDE
op_ne
l_int|1024
)paren
(brace
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
r_else
id|tempbx
op_assign
l_int|1024
suffix:semicolon
macro_line|#if 0  /* old */
id|tempbx
op_assign
l_int|768
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tempbx
op_assign
l_int|1200
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempbx
op_assign
l_int|960
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VDE
op_minus
l_int|1
suffix:semicolon
id|tempcx
op_decrement
suffix:semicolon
)brace
id|tempax
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_ne
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempax
op_assign
id|tempbx
suffix:semicolon
multiline_comment|/*&t;if(SiS_Pr-&gt;SiS_VGAVDE == 525) tempax += 60;   in 650/301B BIOS */
r_if
c_cond
(paren
id|tempax
OL
id|SiS_Pr-&gt;SiS_VDE
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_sub_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
)brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdes */
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdee */
)brace
r_else
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdes */
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
multiline_comment|/* lcdvdee */
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdvds 0x%x lcdvde 0x%x&bslash;n&quot;
comma
id|tempcx
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif    
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVEQ1EQ=lcdvdes */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RVEQ2EQ=lcdvdee */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempax
op_assign
id|push1
suffix:semicolon
id|tempcx
op_assign
id|tempbx
suffix:semicolon
id|tempcx
op_sub_assign
id|tempax
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|4
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_sub_assign
l_int|10
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdvrs 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RTVACTEE=lcdvrs */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|tempbx
op_add_assign
(paren
id|tempcx
op_plus
l_int|1
)paren
suffix:semicolon
id|temp
op_or_assign
(paren
id|tempbx
op_amp
l_int|0x000F
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* TW: Code from 630/301B (I+II) BIOS */
r_if
c_cond
(paren
(paren
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
OG
l_int|2
)paren
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x13
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xB9
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
l_int|0xCC
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xA6
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|crt2crtc
op_amp
l_int|0x3F
)paren
op_eq
l_int|4
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x2B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
l_int|0xE5
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x05
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xE2
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: Inserted missing code from 630/301B BIOS;&n;     *     Strangely, this is done in all 650 BIOSes as&n;     *     well (although LCDTypeInfo is not used there&n;     *     in the same way as on 300 series)&n;     */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|0x0c
)paren
(brace
id|crt2crtc
op_and_assign
l_int|0x1f
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempcx
op_add_assign
l_int|7
suffix:semicolon
)brace
)brace
id|tempcx
op_add_assign
id|crt2crtc
suffix:semicolon
r_if
c_cond
(paren
id|crt2crtc
op_ge
l_int|4
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x06
comma
l_int|0xff
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetNotSimuMode
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|crt2crtc
op_eq
l_int|4
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x28
)paren
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x18
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|atable
(braket
id|tempcx
)braket
)paren
suffix:semicolon
)brace
id|tempcx
op_assign
(paren
id|SiS_Pr-&gt;SiS_HT
op_minus
id|SiS_Pr-&gt;SiS_HDE
)paren
op_rshift
l_int|2
suffix:semicolon
multiline_comment|/* (HT-HDE)&gt;&gt;2     */
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HDE
op_plus
l_int|7
suffix:semicolon
multiline_comment|/* lcdhdee         */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
id|push1
op_assign
id|tempbx
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhde 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif    
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RHEQPLE=lcdhdee */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|temp
op_add_assign
l_int|2
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* RHBLKE=lcdhdes[7:0] */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x20
comma
l_int|0x0F
)paren
suffix:semicolon
multiline_comment|/* lcdhdes [11:8] */
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
id|push2
op_assign
id|tempbx
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhrs 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RHBURSTS=lcdhrs */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HDE
op_eq
l_int|1280
)paren
(brace
id|temp
op_assign
l_int|0x47
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1C
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x1D
comma
l_int|0x0F
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|push2
suffix:semicolon
id|tempcx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_add_assign
id|tempcx
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;lcdhre 0x%x&bslash;n&quot;
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif    
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* RHSYEXP2S=lcdhre */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x21
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|525
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_assign
l_int|0xC6
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0xC3
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x30
comma
l_int|0xB3
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_eq
l_int|420
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeVGA
)paren
(brace
id|temp
op_assign
l_int|0x4F
suffix:semicolon
)brace
r_else
id|temp
op_assign
l_int|0x4D
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x2f
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
id|SiS_Set300Part2Regs
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|BaseAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
multiline_comment|/* HwDeviceExtension */
)brace
id|USHORT
DECL|function|SiS_GetVGAHT2
id|SiS_GetVGAHT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|ULONG
id|tempax
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
)paren
op_star
id|SiS_Pr-&gt;SiS_RVBHCMAX
)paren
op_amp
l_int|0xFFFF
suffix:semicolon
id|tempax
op_assign
(paren
id|SiS_Pr-&gt;SiS_VT
op_minus
id|SiS_Pr-&gt;SiS_VDE
)paren
op_star
id|SiS_Pr-&gt;SiS_RVBHCFACT
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_star
id|SiS_Pr-&gt;SiS_HT
)paren
op_div
id|tempbx
suffix:semicolon
r_return
(paren
id|USHORT
)paren
id|tempax
suffix:semicolon
)brace
multiline_comment|/* TW: New from 300/301LV BIOS 1.16.51 for ECS A907. Seems highly preliminary. */
r_void
DECL|function|SiS_Set300Part2Regs
id|SiS_Set300Part2Regs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
id|BaseAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|crt2crtc
comma
id|resindex
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
r_const
id|SiS_Part2PortTblStruct
op_star
id|CRT2Part2Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|crt2crtc
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|resindex
op_assign
id|crt2crtc
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
)brace
r_else
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_2
suffix:semicolon
multiline_comment|/* TW: The BIOS code (1.16.51) is obviously a fragment! */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|CRT2Part2Ptr
op_assign
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
suffix:semicolon
id|resindex
op_assign
l_int|4
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x02
comma
l_int|0x80
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
comma
id|j
op_assign
l_int|0x04
suffix:semicolon
id|j
op_le
l_int|0x06
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1c
suffix:semicolon
id|j
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x1f
suffix:semicolon
id|j
op_le
l_int|0x21
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|j
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x23
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x25
comma
l_int|0x0f
comma
(paren
id|CRT2Part2Ptr
op_plus
id|resindex
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|11
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Set 301 Macrovision(tm) registers */
r_void
DECL|function|SiS_SetGroup3
id|SiS_SetGroup3
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_const
id|UCHAR
op_star
id|tempdi
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xF5
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xB7
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xF6
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xBf
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
l_int|0x35
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
l_int|0x38
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x01
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|temp
)paren
op_amp
id|EnablePALM
)paren
(brace
multiline_comment|/* 0x40 */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x13
comma
l_int|0xFA
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x14
comma
l_int|0xC8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
l_int|0x3D
comma
l_int|0xA8
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempdi
op_assign
id|SiS_Pr-&gt;SiS_HiTVGroup3Data
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempdi
op_assign
id|SiS_Pr-&gt;SiS_HiTVGroup3Simu
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|tempdi
op_assign
id|SiS_Pr-&gt;SiS_HiTVGroup3Text
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3_1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x02
)paren
(brace
id|tempdi
op_assign
id|SiS_HiTVGroup3_2
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x3E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part3Port
comma
id|i
comma
id|tempdi
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* TW: Set 301 VGA2 registers */
r_void
DECL|function|SiS_SetGroup4
id|SiS_SetGroup4
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempax
comma
id|tempcx
comma
id|tempbx
comma
id|modeflag
comma
id|temp
comma
id|temp2
comma
id|resinfo
suffix:semicolon
id|ULONG
id|tempebx
comma
id|tempeax
comma
id|templong
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: From 650/302LV 1.10.6s (not for 300/301LV - no LCDA on this combination) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0x0e
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0x9f
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
multiline_comment|/* TW: From 650/301LV (any, incl. 1.10.6s, 1.10.7w) */
multiline_comment|/* TW: This is a duplicate; done at the end, too */
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_RVBHCFACT
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x13
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_RVBHCMAX
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x14
comma
id|temp
)paren
suffix:semicolon
id|temp2
op_assign
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|7
)paren
op_amp
l_int|0x00ff
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAHT
op_minus
l_int|1
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x16
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
)paren
op_amp
l_int|0x00ff
suffix:semicolon
id|temp2
op_or_assign
id|temp
suffix:semicolon
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_VGAVT
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempcx
op_sub_assign
l_int|5
suffix:semicolon
)brace
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x17
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|temp2
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x15
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* TW: New for 650/301LV and 630/301B */
id|temp
op_assign
l_int|0xA0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
(brace
id|temp
op_assign
l_int|0xA0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0xC0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
l_int|1280
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|tempbx
op_le
l_int|800
)paren
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
(brace
id|temp
op_assign
l_int|0x60
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
(brace
id|temp
op_assign
l_int|0x60
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAHDE
op_eq
l_int|1024
)paren
(brace
id|temp
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|temp
op_or_assign
l_int|0x0A
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0E
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
id|tempebx
op_assign
id|SiS_Pr-&gt;SiS_VDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xE0
)paren
)paren
(brace
id|tempebx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
id|SiS_Pr-&gt;SiS_RVBHRS
suffix:semicolon
id|temp
op_assign
id|tempcx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x18
comma
id|temp
)paren
suffix:semicolon
id|tempeax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempcx
op_or_assign
l_int|0x4000
suffix:semicolon
r_if
c_cond
(paren
id|tempeax
op_le
id|tempebx
)paren
(brace
id|tempcx
op_xor_assign
l_int|0x4000
suffix:semicolon
)brace
r_else
(brace
id|tempeax
op_sub_assign
id|tempebx
suffix:semicolon
)brace
id|templong
op_assign
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
)paren
op_mod
id|tempebx
suffix:semicolon
id|tempeax
op_assign
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
)paren
op_div
id|tempebx
suffix:semicolon
id|tempebx
op_assign
id|tempeax
suffix:semicolon
r_if
c_cond
(paren
id|templong
op_ne
l_int|0
)paren
(brace
id|tempebx
op_increment
suffix:semicolon
)brace
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x000000FF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1B
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0x0000FF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1A
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_rshift
l_int|16
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|temp
op_or_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x19
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1C
comma
l_int|0x28
)paren
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempax
OG
l_int|800
)paren
(brace
id|tempax
op_sub_assign
l_int|800
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempax
OG
l_int|800
)paren
(brace
id|tempax
op_sub_assign
l_int|800
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*       if((SiS_Pr-&gt;SiS_VBInfo &amp; (SetCRT2ToTV | SetPALTV)) &amp;&amp; (!(SiS_Pr-&gt;SiS_HiVision &amp; 0x03))) {  */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempax
OG
l_int|800
)paren
(brace
id|tempbx
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_eq
l_int|1024
)paren
(brace
id|tempax
op_mul_assign
l_int|25
suffix:semicolon
)brace
r_else
id|tempax
op_mul_assign
l_int|20
suffix:semicolon
id|temp
op_assign
id|tempax
op_mod
l_int|32
suffix:semicolon
id|tempax
op_div_assign
l_int|32
suffix:semicolon
id|tempax
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0
)paren
id|tempax
op_increment
suffix:semicolon
)brace
)brace
id|tempax
op_decrement
suffix:semicolon
id|temp
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_and_assign
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/* From 1.10.7w */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
multiline_comment|/* From 1.10.7w */
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
(brace
id|tempax
op_assign
l_int|0x1f
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w */
)brace
multiline_comment|/* From 1.10.7w */
)brace
multiline_comment|/* From 1.10.7w */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1D
comma
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|temp
op_or_assign
id|tempbx
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1E
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650740
)paren
(brace
id|temp
op_assign
l_int|0x0026
suffix:semicolon
multiline_comment|/* 1.10.7w; 1.10.8r; needs corresponding code in Dis/EnableBridge! */
)brace
r_else
(brace
id|temp
op_assign
l_int|0x0036
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
l_int|0x0036
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_minus
id|SetCRT2ToHiVisionTV
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_HiVision
op_amp
l_int|0x03
)paren
)paren
)paren
(brace
id|temp
op_or_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|temp
op_and_assign
l_int|0xFE
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1F
comma
l_int|0xC0
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_HT
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
)brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_sub_assign
l_int|2
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0x0700
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x21
comma
l_int|0xC0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x22
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x24
comma
l_int|0x0e
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
multiline_comment|/* TW: 650/LV BIOS does this for all bridge types - assumingly wrong */
multiline_comment|/* 315, 330, 650+301B BIOS don&squot;t do this at all */
multiline_comment|/* TW: This is a duplicate; done for LCDA as well (see above) */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
)paren
op_amp
l_int|0x04
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
multiline_comment|/* TW: 300/301LV BIOS does this for all bridge types - assumingly wrong */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* 301B */
id|SiS_SetCRT2VCLK
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2VCLK
id|SiS_SetCRT2VCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|vclkindex
suffix:semicolon
id|USHORT
id|tempah
suffix:semicolon
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x4a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x38
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0a
comma
l_int|0x57
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0b
comma
l_int|0x46
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x1f
comma
l_int|0xf6
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0A
comma
l_int|0x01
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x12
comma
id|tempah
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetVCLK2Ptr
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempbx
suffix:semicolon
r_const
id|USHORT
id|LCDXlat0VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
)brace
suffix:semicolon
r_const
id|USHORT
id|LVDSXlat1VCLK
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
comma
id|VCLK40
)brace
suffix:semicolon
macro_line|#ifdef SIS300
r_const
id|USHORT
id|LCDXlat1VCLK300
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
r_const
id|USHORT
id|LCDXlat2VCLK300
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK108_2
comma
id|VCLK108_2
comma
id|VCLK108_2
comma
id|VCLK108_2
)brace
suffix:semicolon
r_const
id|USHORT
id|LVDSXlat2VCLK300
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
r_const
id|USHORT
id|LVDSXlat3VCLK300
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
comma
id|VCLK65
)brace
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
r_const
id|USHORT
id|LCDXlat1VCLK310
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
)brace
suffix:semicolon
r_const
id|USHORT
id|LCDXlat2VCLK310
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
)brace
suffix:semicolon
r_const
id|USHORT
id|LVDSXlat2VCLK310
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
comma
id|VCLK65
op_plus
l_int|2
)brace
suffix:semicolon
r_const
id|USHORT
id|LVDSXlat3VCLK310
(braket
l_int|4
)braket
op_assign
(brace
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
comma
id|VCLK108_2
op_plus
l_int|5
)brace
suffix:semicolon
macro_line|#endif
id|USHORT
id|CRT2Index
comma
id|VCLKIndex
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|modeflag
comma
id|resinfo
suffix:semicolon
r_const
id|UCHAR
op_star
id|CHTVVCLKPtr
op_assign
l_int|NULL
suffix:semicolon
r_const
id|USHORT
op_star
id|LCDXlatVCLK1
op_assign
l_int|NULL
suffix:semicolon
r_const
id|USHORT
op_star
id|LCDXlatVCLK2
op_assign
l_int|NULL
suffix:semicolon
r_const
id|USHORT
op_star
id|LVDSXlatVCLK2
op_assign
l_int|NULL
suffix:semicolon
r_const
id|USHORT
op_star
id|LVDSXlatVCLK3
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS315H
id|LCDXlatVCLK1
op_assign
id|LCDXlat1VCLK310
suffix:semicolon
id|LCDXlatVCLK2
op_assign
id|LCDXlat2VCLK310
suffix:semicolon
id|LVDSXlatVCLK2
op_assign
id|LVDSXlat2VCLK310
suffix:semicolon
id|LVDSXlatVCLK3
op_assign
id|LVDSXlat3VCLK310
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS300
id|LCDXlatVCLK1
op_assign
id|LCDXlat1VCLK300
suffix:semicolon
id|LCDXlatVCLK2
op_assign
id|LCDXlat2VCLK300
suffix:semicolon
id|LVDSXlatVCLK2
op_assign
id|LVDSXlat2VCLK300
suffix:semicolon
id|LVDSXlatVCLK3
op_assign
id|LVDSXlat3VCLK300
suffix:semicolon
macro_line|#endif
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|CRT2Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
multiline_comment|/* 30x/B/LV */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
id|CRT2Index
op_rshift_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*  LCD */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlat0VCLK
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlatVCLK1
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlatVCLK1
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlatVCLK1
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|LCDXlatVCLK2
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: 330, 650/301LV BIOS does not check expanding, 315 does  */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315PRO
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x19
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x19
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x21
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|VCLKIndex
op_assign
id|LCDXlatVCLK1
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x960
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x45
suffix:semicolon
multiline_comment|/* TW: in VBVCLK table */
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|0x09
)paren
(brace
id|VCLKIndex
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
id|LCDXlatVCLK2
(braket
id|CRT2Index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
multiline_comment|/*  Port 3cch */
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
multiline_comment|/* TW: 315 BIOS */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
op_eq
l_int|1
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x42
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x41
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|1
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x43
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|4
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x44
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
multiline_comment|/*  TV */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|RPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVVCLKDIV2
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|HiTVVCLK
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|Charx8Dot
)paren
(brace
id|VCLKIndex
op_assign
id|HiTVSimuVCLK
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|HiTVTextVCLK
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|RPLLDIV2XO
)paren
(brace
id|VCLKIndex
op_assign
id|TVVCLKDIV2
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|TVVCLK
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_add_assign
l_int|25
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* RAMDAC2 */
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x14
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x2e
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* If not programming CRT2 */
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x1b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x35
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/*   LVDS  */
id|VCLKIndex
op_assign
id|CRT2Index
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
multiline_comment|/* programming CRT2 */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x1f
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|tempbx
op_assign
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALM
)paren
(brace
id|tempbx
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALN
)paren
(brace
id|tempbx
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_switch
c_cond
(paren
id|tempbx
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKSOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CHTVVCLKPtr
op_assign
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|VCLKIndex
op_assign
id|CHTVVCLKPtr
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|VCLKIndex
op_rshift_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel800x600
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel320x480
)paren
)paren
(brace
id|VCLKIndex
op_assign
id|LVDSXlat1VCLK
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|VCLKIndex
op_assign
id|LVDSXlatVCLK2
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|VCLKIndex
op_assign
id|LVDSXlatVCLK2
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|VCLKIndex
op_assign
id|LVDSXlatVCLK2
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
id|VCLKIndex
op_assign
id|LVDSXlatVCLK3
(braket
id|VCLKIndex
)braket
suffix:semicolon
)brace
r_else
(brace
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x3F
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x14
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x2e
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* if not programming CRT2 */
id|VCLKIndex
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|SiS_Pr-&gt;SiS_P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
id|VCLKIndex
op_assign
(paren
(paren
id|VCLKIndex
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|VCLKIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|VCLKIndex
op_and_assign
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x1b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x35
suffix:semicolon
)brace
)brace
macro_line|#if 0&t;&t; 
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x0b
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x40
suffix:semicolon
)brace
multiline_comment|/* 1024x768-70 */
r_if
c_cond
(paren
id|VCLKIndex
op_eq
l_int|0x0d
)paren
(brace
id|VCLKIndex
op_assign
l_int|0x41
suffix:semicolon
)brace
multiline_comment|/* 1024x768-75 */
)brace
macro_line|#endif&t;&t; 
)brace
)brace
)brace
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;VCLKIndex %d (0x%x)&bslash;n&quot;
comma
id|VCLKIndex
comma
id|VCLKIndex
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
id|VCLKIndex
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Set 301 Palette address port registers */
multiline_comment|/* TW: Checked against 650/301LV BIOS */
r_void
DECL|function|SiS_SetGroup5
id|SiS_SetGroup5
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetInSlaveMode
op_or
id|LoadDACFlag
)paren
)paren
)paren
(brace
id|SiS_EnableCRT2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_LoadDAC
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_ModCRT1CRTC
id|SiS_ModCRT1CRTC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
r_const
id|SiS_LVDSCRT1DataStruct
op_star
id|LVDSCRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetLVDSCRT1Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|SetDOSMode
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|18
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|21
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT1320x480_1
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* FSTN */
r_case
l_int|23
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|25
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|27
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|29
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|30
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|36
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|37
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|38
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|39
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|40
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|41
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|42
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|43
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|99
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_CHTVCRT1SOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|LVDSCRT1Ptr
op_assign
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
multiline_comment|/*unlock cr0-7  */
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x02
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x05
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
comma
id|j
op_assign
l_int|5
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|7
suffix:semicolon
id|i
op_le
l_int|0x11
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|9
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0xE0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
l_int|0x1f
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LVDSCRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x01
suffix:semicolon
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: 650/LVDS BIOS - doesn&squot;t make sense */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
)brace
)brace
id|BOOLEAN
DECL|function|SiS_GetLVDSCRT1Ptr
id|SiS_GetLVDSCRT1Ptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
op_star
id|ResInfo
comma
id|USHORT
op_star
id|DisplayType
)paren
(brace
id|USHORT
id|tempbx
comma
id|modeflag
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|Flag
comma
id|CRT2CRTC
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|CRT2CRTC
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|CRT2CRTC
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
)brace
id|Flag
op_assign
l_int|1
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|Flag
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
l_int|18
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|tempbx
op_assign
l_int|99
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALM
)paren
(brace
id|tempbx
op_assign
l_int|18
suffix:semicolon
multiline_comment|/* PALM uses NTSC data */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALN
)paren
(brace
id|tempbx
op_assign
l_int|20
suffix:semicolon
multiline_comment|/* PALN uses PAL data  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|Flag
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
suffix:semicolon
id|tempbx
op_sub_assign
id|SiS_Pr-&gt;SiS_PanelMinLVDS
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_le
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tempbx
op_assign
l_int|14
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x600
)paren
(brace
id|tempbx
op_assign
l_int|23
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1152x768
)paren
(brace
id|tempbx
op_assign
l_int|27
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tempbx
op_assign
l_int|36
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x768
)paren
(brace
id|tempbx
op_assign
l_int|40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
id|tempbx
op_assign
l_int|12
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel320x480
)paren
(brace
id|tempbx
op_assign
l_int|22
suffix:semicolon
)brace
)brace
op_star
id|ResInfo
op_assign
id|CRT2CRTC
op_amp
l_int|0x3F
suffix:semicolon
op_star
id|DisplayType
op_assign
id|tempbx
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT2ECLK
id|SiS_SetCRT2ECLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempah
comma
id|tempal
comma
id|pushax
suffix:semicolon
id|USHORT
id|vclkindex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel640x480
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_eq
l_int|1
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|tempal
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|tempal
op_and_assign
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|tempal
op_eq
l_int|2
)paren
(brace
id|RefreshRateTableIndex
op_decrement
suffix:semicolon
)brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
r_else
(brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
id|tempal
op_assign
l_int|0x02B
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempal
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|pushax
op_assign
id|tempal
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x20
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x10
)paren
suffix:semicolon
id|tempal
op_assign
id|pushax
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x00
)paren
suffix:semicolon
id|tempal
op_assign
id|pushax
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
macro_line|#if 0  /* TW: Not used */
r_void
id|SiS_SetDefCRT2ExtRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x10
comma
l_int|0x80
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xC3
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* TW: Start of Chrontel 70xx functions ---------------------- */
multiline_comment|/* Set-up the Chrontel Registers */
r_void
DECL|function|SiS_SetCHTVReg
id|SiS_SetCHTVReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|temp
comma
id|tempbx
comma
id|tempcl
suffix:semicolon
id|USHORT
id|TVType
comma
id|resindex
suffix:semicolon
r_const
id|SiS_CHTVRegDataStruct
op_star
id|CHTVRegData
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_CRT2CRTC
suffix:semicolon
)brace
r_else
id|tempcl
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT2CRTC
suffix:semicolon
id|TVType
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|TVType
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHSOverScan
)paren
(brace
id|TVType
op_assign
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALM
)paren
(brace
id|TVType
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CHPALN
)paren
(brace
id|TVType
op_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|TVType
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_switch
c_cond
(paren
id|TVType
)paren
(brace
r_case
l_int|0
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UNTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_ONTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPALM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_UPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPALN
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_SOPAL
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|CHTVRegData
op_assign
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|resindex
op_assign
id|tempcl
op_amp
l_int|0x3F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
(brace
macro_line|#ifdef SIS300
multiline_comment|/* Chrontel 7005 - I assume that it does not come with a 310/325 series chip */
multiline_comment|/* TW: We don&squot;t support modes &gt;800x600 */
r_if
c_cond
(paren
id|resindex
OG
l_int|5
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4304
)paren
suffix:semicolon
multiline_comment|/* TW: 0x40=76uA (PAL); 0x03=15bit non-multi RGB*/
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6909
)paren
suffix:semicolon
multiline_comment|/* TW: Black level for PAL (105)*/
)brace
r_else
(brace
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0304
)paren
suffix:semicolon
multiline_comment|/* TW: upper nibble=71uA (NTSC), 0x03=15bit non-multi RGB*/
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x7109
)paren
suffix:semicolon
multiline_comment|/* TW: Black level for NTSC (113)*/
)brace
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x00
suffix:semicolon
multiline_comment|/* TW: Mode register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|1
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x07
suffix:semicolon
multiline_comment|/* TW: Start active video register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|2
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x08
suffix:semicolon
multiline_comment|/* TW: Position overflow register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|3
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0A
suffix:semicolon
multiline_comment|/* TW: Horiz Position register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0B
suffix:semicolon
multiline_comment|/* TW: Vertical Position register */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* TW: Set minimum flicker filter for Luma channel (SR1-0=00),&n;                minimum text enhancement (S3-2=10),&n;   &t;        maximum flicker filter for Chroma channel (S5-4=10)&n;&t;        =00101000=0x28 (When reading, S1-0-&gt;S3-2, and S3-2-&gt;S1-0!)&n;      */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2801
)paren
suffix:semicolon
multiline_comment|/* TW: Set video bandwidth&n;            High bandwith Luma composite video filter(S0=1)&n;            low bandwith Luma S-video filter (S2-1=00)&n;&t;    disable peak filter in S-video channel (S3=0)&n;&t;    high bandwidth Chroma Filter (S5-4=11)&n;&t;    =00110001=0x31&n;     */
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0xb103
)paren
suffix:semicolon
multiline_comment|/* old: 3103 */
multiline_comment|/* TW: Register 0x3D does not exist in non-macrovision register map&n;            (Maybe this is a macrovision register?)&n;      */
multiline_comment|/* SiS_SetCH70xx(SiS_Pr,0x003D); */
multiline_comment|/* TW: Register 0x10 only contains 1 writable bit (S0) for sensing,&n;            all other bits a read-only. Macrovision?&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0010
comma
l_int|0x1F
)paren
suffix:semicolon
multiline_comment|/* TW: Register 0x11 only contains 3 writable bits (S0-S2) for&n;            contrast enhancement (set to 010 -&gt; gain 1 Yout = 17/16*(Yin-30) )&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0211
comma
l_int|0xF8
)paren
suffix:semicolon
multiline_comment|/* TW: Clear DSEN&n;      */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001C
comma
l_int|0xEF
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
multiline_comment|/* ---- NTSC ---- */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* 640x480 overscan: Mode 16 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on, no need to set FSCI */
)brace
r_else
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* 800x600 overscan: Mode 23 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* 0x18-0x1f: FSCI 469,762,048 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0C19
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x001F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0120
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* Loop filter on for mode 23 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV off, need to set FSCI */
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
multiline_comment|/* ----- 640x480 underscan; Mode 17 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x05
)paren
(brace
multiline_comment|/* ----- 800x600 underscan: Mode 24 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0118
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* (FSCI was 0x1f1c71c7 - this is for mode 22) */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0919
comma
l_int|0xF0
)paren
suffix:semicolon
multiline_comment|/* FSCI for mode 24 is 428,554,851 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x081A
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0b1B
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x031C
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0a1D
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x061E
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x031F
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off for mode 24 */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0021
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV off, need to set FSCI */
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* ---- PAL ---- */
multiline_comment|/* TW: We don&squot;t play around with FSCI in PAL mode */
r_if
c_cond
(paren
id|resindex
op_eq
l_int|0x04
)paren
(brace
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on */
)brace
r_else
(brace
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0020
comma
l_int|0xEF
)paren
suffix:semicolon
multiline_comment|/* loop filter off */
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Pr
comma
l_int|0x0121
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* ACIV on */
)brace
)brace
macro_line|#endif  /* 300 */
)brace
r_else
(brace
multiline_comment|/* Chrontel 7019 - assumed that it does not come with a 300 series chip */
macro_line|#ifdef SIS315H
multiline_comment|/* TW: We don&squot;t support modes &gt;1024x768 */
r_if
c_cond
(paren
id|resindex
OG
l_int|6
)paren
r_return
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|0
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x00
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|1
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x01
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|2
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x02
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|3
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x04
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|4
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x03
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|5
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x05
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|6
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x06
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|7
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x07
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|8
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x08
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|9
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x15
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|10
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x1f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|11
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0c
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|12
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0d
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|13
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0e
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|14
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
id|temp
op_assign
id|CHTVRegData
(braket
id|resindex
)braket
dot
id|Reg
(braket
l_int|15
)braket
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|temp
op_amp
l_int|0x00FF
)paren
op_lshift
l_int|8
)paren
op_or
l_int|0x10
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
macro_line|#endif&t;/* 315 */
)brace
)brace
multiline_comment|/* TW: Chrontel 701x functions ================================= */
r_void
DECL|function|SiS_Chrontel701xBLOn
id|SiS_Chrontel701xBLOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
macro_line|#ifndef NEWCH701x
id|USHORT
id|temp
suffix:semicolon
macro_line|#endif  
multiline_comment|/* TW: Enable Chrontel 7019 LCD panel backlight */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
macro_line|#ifdef NEWCH701x
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6566
)paren
suffix:semicolon
macro_line|#else  
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x20
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
macro_line|#endif&t;
)brace
)brace
r_void
DECL|function|SiS_Chrontel701xBLOff
id|SiS_Chrontel701xBLOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* TW: Disable Chrontel 7019 LCD panel backlight */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xDF
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H  /* -------- 310/325 series only --------- */
r_void
DECL|function|SiS_SetCH701xForLCD
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef NEWCH701x  
id|UCHAR
id|regtable
(braket
)braket
op_assign
(brace
l_int|0x1c
comma
l_int|0x5f
comma
l_int|0x64
comma
l_int|0x6f
comma
l_int|0x70
comma
l_int|0x71
comma
l_int|0x72
comma
l_int|0x73
comma
l_int|0x74
comma
l_int|0x76
comma
l_int|0x78
comma
l_int|0x7d
comma
l_int|0x66
)brace
suffix:semicolon
id|UCHAR
id|table1024
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0xed
comma
l_int|0xa3
comma
l_int|0xc8
comma
l_int|0xc7
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1280
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1400
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
comma
l_int|0x44
)brace
suffix:semicolon
id|UCHAR
id|table1600
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x04
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xde
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x1a
comma
l_int|0x44
)brace
suffix:semicolon
macro_line|#else
id|UCHAR
id|regtable
(braket
)braket
op_assign
(brace
l_int|0x1c
comma
l_int|0x5f
comma
l_int|0x64
comma
l_int|0x6f
comma
l_int|0x70
comma
l_int|0x71
comma
l_int|0x72
comma
l_int|0x73
comma
l_int|0x74
comma
l_int|0x76
comma
l_int|0x78
comma
l_int|0x7d
)brace
suffix:semicolon
id|UCHAR
id|table1024
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x02
comma
l_int|0x00
comma
l_int|0x07
comma
l_int|0x40
comma
l_int|0xed
comma
l_int|0xa3
comma
l_int|0xc8
comma
l_int|0xc7
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1280
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0xe0
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1400
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x03
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xef
comma
l_int|0xad
comma
l_int|0xdb
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1600
(braket
)braket
op_assign
(brace
l_int|0x60
comma
l_int|0x04
comma
l_int|0x11
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0xe3
comma
l_int|0xad
comma
l_int|0xde
comma
l_int|0xf6
comma
l_int|0xac
comma
l_int|0x60
comma
l_int|0x1a
)brace
suffix:semicolon
macro_line|#endif&t;&t;&t;
id|UCHAR
op_star
id|tableptr
op_assign
l_int|NULL
suffix:semicolon
id|USHORT
id|tempbh
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tableptr
op_assign
id|table1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
id|tableptr
op_assign
id|table1280
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|tableptr
op_assign
id|table1400
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|tableptr
op_assign
id|table1600
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x74
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempbh
op_eq
l_int|0xf6
)paren
op_logical_or
(paren
id|tempbh
op_eq
l_int|0xc7
)paren
)paren
(brace
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x73
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xc8
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xdb
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xde
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
)brace
macro_line|#ifdef NEWCH701x     /* New from 740/LVDS: */    
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x0d
suffix:semicolon
id|i
op_increment
)paren
(brace
macro_line|#else
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x0c
suffix:semicolon
id|i
op_increment
)paren
(brace
macro_line|#endif  
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tableptr
(braket
id|i
)braket
op_lshift
l_int|8
)paren
op_or
id|regtable
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|SiS_ChrontelPowerSequencing
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1e
)paren
suffix:semicolon
id|tempbh
op_or_assign
l_int|0xc0
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x1e
)paren
suffix:semicolon
macro_line|#ifdef NEWCH701x     /* 740/LVDS: */
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0xfb
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x64
)paren
suffix:semicolon
id|tempbh
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x64
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x3f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
macro_line|#endif  /* End 740/LVDS */
)brace
r_void
DECL|function|SiS_ChrontelPowerSequencing
id|SiS_ChrontelPowerSequencing
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|UCHAR
id|regtable
(braket
)braket
op_assign
(brace
l_int|0x67
comma
l_int|0x68
comma
l_int|0x69
comma
l_int|0x6a
comma
l_int|0x6b
)brace
suffix:semicolon
macro_line|#ifdef NEWCH701x  
id|UCHAR
id|table1024
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
id|UCHAR
id|table1400
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x6e
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
macro_line|#else
id|UCHAR
id|table1024
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x02
)brace
suffix:semicolon
id|UCHAR
id|table1400
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x02
)brace
suffix:semicolon
macro_line|#endif  
id|UCHAR
op_star
id|tableptr
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Set up Power up/down timing */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|tableptr
op_assign
id|table1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
)paren
(brace
id|tableptr
op_assign
id|table1400
suffix:semicolon
)brace
r_else
r_return
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|tableptr
(braket
id|i
)braket
op_lshift
l_int|8
)paren
op_or
id|regtable
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_Chrontel701xOn
id|SiS_Chrontel701xOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
macro_line|#ifdef NEWCH701x
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
macro_line|#endif 
r_if
c_cond
(paren
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x01
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* TW: Enable YPrPb (HDTV) */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_IsChScart
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x01
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
id|temp
op_or_assign
l_int|0xc0
suffix:semicolon
multiline_comment|/* TW: Enable SCART + CVBS */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
)brace
macro_line|#ifdef NEWCH701x
id|SiS_ChrontelDoSomething5
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2049
)paren
suffix:semicolon
multiline_comment|/* TW: Enable TV path */
macro_line|#else      
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x2049
)paren
suffix:semicolon
multiline_comment|/* TW: Enable TV path */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IsYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x73
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x60
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x73
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
macro_line|#endif     
)brace
)brace
r_void
DECL|function|SiS_Chrontel701xOff
id|SiS_Chrontel701xOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|2
)paren
(brace
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
multiline_comment|/* TW: Complete power down of LVDS */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfc
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0066
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef NEWCH701x
r_void
DECL|function|SiS_ChrontelDoSomething5
id|SiS_ChrontelDoSomething5
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_int
r_char
id|temp
comma
id|temp1
suffix:semicolon
id|temp1
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp1
op_lshift
l_int|8
)paren
op_or
l_int|0x49
)paren
suffix:semicolon
)brace
macro_line|#endif
r_void
DECL|function|SiS_ChrontelResetDB
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef NEWCH701x
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* 740/LVDS: */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4a
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x3e49
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Reset Chrontel 7019 datapath */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1048
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1848
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_ChrontelDoSomething5
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x49
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xef
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xef
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x5c
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
macro_line|#else /* pre 740/LVDS code */     
multiline_comment|/* TW: Reset Chrontel 7019 datapath */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1048
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1848
)paren
suffix:semicolon
macro_line|#endif     
)brace
r_void
DECL|function|SiS_ChrontelDoSomething4
id|SiS_ChrontelDoSomething4
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef NEWCH701x
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
)paren
(brace
id|SiS_ChrontelDoSomething5
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
macro_line|#else
id|USHORT
id|temp
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
multiline_comment|/* Power up LVDS block */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x49
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|1
)paren
(brace
multiline_comment|/* TV block powered? (0 = yes, 1 = no) */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x70
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
multiline_comment|/* enable VSYNC */
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x47
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x47
)paren
suffix:semicolon
multiline_comment|/* disable VSYNC */
)brace
macro_line|#endif     
)brace
r_void
DECL|function|SiS_ChrontelDoSomething3
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
macro_line|#ifdef NEWCH701x
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|1
)paren
(brace
id|temp
op_increment
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x61
)paren
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x4566
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x16ff
)paren
suffix:semicolon
macro_line|#else
id|USHORT
id|temp
comma
id|temp1
suffix:semicolon
id|temp1
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x61
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
l_int|2
)paren
(brace
id|temp
op_increment
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x61
)paren
suffix:semicolon
id|temp1
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x5f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_WeHaveBacklightCtrl
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x3ff
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x2ff
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|temp1
)paren
(brace
id|SiS_GenericDelay
c_func
(paren
id|SiS_Pr
comma
l_int|0x2ff
)paren
suffix:semicolon
)brace
)brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x03
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x7f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x66
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif     
)brace
r_void
DECL|function|SiS_ChrontelDoSomething2
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
comma
id|tempcl
comma
id|tempch
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|tempcl
op_assign
l_int|3
suffix:semicolon
id|tempch
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x04
)paren
(brace
r_break
suffix:semicolon
)brace
macro_line|#ifdef NEWCH701x
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xac76
)paren
suffix:semicolon
multiline_comment|/* 740/LVDS */
macro_line|#endif       
id|SiS_SetCH701xForLCD
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempcl
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|tempch
op_eq
l_int|3
)paren
(brace
r_break
suffix:semicolon
)brace
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|tempcl
op_assign
l_int|3
suffix:semicolon
id|tempch
op_increment
suffix:semicolon
)brace
id|tempcl
op_decrement
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfb
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x76
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x04
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x76
)paren
suffix:semicolon
macro_line|#ifdef NEWCH701x
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xe078
)paren
suffix:semicolon
macro_line|#else       
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x6078
)paren
suffix:semicolon
macro_line|#endif       
id|SiS_LongDelay
c_func
(paren
id|SiS_Pr
comma
l_int|2
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|0
)paren
(brace
suffix:semicolon
)brace
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0077
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_ChrontelDoSomething1
id|SiS_ChrontelDoSomething1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Set datapath 1 to TV   */
id|temp
op_and_assign
l_int|0xbf
suffix:semicolon
multiline_comment|/* Set datapath 2 to LVDS */
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
macro_line|#ifdef NEWCH701x   /* 740/LVDS: */
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x1c
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0xfb
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x1c
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2d
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x64
)paren
suffix:semicolon
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x64
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_and_assign
l_int|0x3f
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
(paren
id|temp
op_lshift
l_int|8
)paren
op_or
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0x66
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ne
l_int|0x45
)paren
(brace
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Pr
comma
id|temp
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
macro_line|#else  /* pre-740/LVDS: */     
id|SiS_ChrontelResetDB
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_ChrontelDoSomething3
c_func
(paren
id|SiS_Pr
comma
id|temp
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
l_int|0xaf76
)paren
suffix:semicolon
macro_line|#endif  /* End of pre-740/LVDS */
)brace
macro_line|#endif  /* 310/325 series --------------------------------- */
multiline_comment|/* TW: End of Chrontel 701x functions ==================================== */
multiline_comment|/* TW: Generic Read/write routines for Chrontel ========================== */
multiline_comment|/* TW: The Chrontel is connected to the 630/730 via&n; * the 630/730&squot;s DDC/I2C port.&n; *&n; * On 630(S)T chipset, the index changed from 0x11 to 0x0a,&n; * possibly for working around the DDC problems&n; */
r_void
DECL|function|SiS_SetCH70xx
id|SiS_SetCH70xx
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
id|SiS_SetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
r_else
id|SiS_SetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Write to Chrontel 700x */
multiline_comment|/* Parameter is [Data (S15-S8) | Register no (S7-S0)] */
r_void
DECL|function|SiS_SetCH700x
id|SiS_SetCH700x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB (Device Address Byte) */
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 10 attempts to write */
multiline_comment|/* SiS_SetSwitchDDC2(SiS_Pr); */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* TW: Write RAB */
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* TW: (set bit 7, see datasheet) */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write data */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* TW: For 630ST */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0a
suffix:semicolon
multiline_comment|/* TW: Bit 7 = SC;  Bit 6 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB (Device Address Byte) */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 10 attempts to write */
multiline_comment|/* SiS_SetSwitchDDC2(SiS_Pr); */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
multiline_comment|/* TW: Write RAB */
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* TW: (set bit 7, see datasheet) */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write data */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: Write to Chrontel 701x */
multiline_comment|/* Parameter is [Data (S15-S8) | Register no (S7-S0)] */
r_void
DECL|function|SiS_SetCH701x
id|SiS_SetCH701x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x08
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB (Device Address Byte) */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 10 attempts to write */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write RAB */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write data */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:    (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set stop condition */
r_return
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Read from Chrontel 70xx */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH70xx
id|SiS_GetCH70xx
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_eq
l_int|1
)paren
r_return
id|SiS_GetCH700x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
r_else
r_return
id|SiS_GetCH701x
c_func
(paren
id|SiS_Pr
comma
id|tempbx
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Read from Chrontel 700x */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH700x
id|SiS_GetCH700x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB */
)brace
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 20 attempts to read */
multiline_comment|/* SiS_SetSwitchDDC2(SiS_Pr); */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* TW: Write RAB | 0x80 */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Re-start */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* DAB | 0x01 = Read */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: DAB (S0=1=read) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Read byte */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
id|tempah
suffix:semicolon
)brace
multiline_comment|/* TW: For 630ST */
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_ChrontelInit
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0a
suffix:semicolon
multiline_comment|/* TW: Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB (Device Address Byte) */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 20 attempts to read */
multiline_comment|/* SiS_SetSwitchDDC2(SiS_Pr); */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* TW: Write RAB | 0x80 */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Re-start */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* DAB | 0x01 = Read */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: DAB (S0=1=read) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Read byte */
r_if
c_cond
(paren
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Stop condition */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|1
suffix:semicolon
r_return
id|tempah
suffix:semicolon
)brace
)brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: Read from Chrontel 701x */
multiline_comment|/* Parameter is [Register no (S7-S0)] */
id|USHORT
DECL|function|SiS_GetCH701x
id|SiS_GetCH701x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempbx
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
comma
id|i
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Bit 0 = SC;  Bit 1 = SD */
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x08
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Data */
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x04
suffix:semicolon
multiline_comment|/* Bitmask in IndexReg for Clk */
id|SiS_Pr-&gt;SiS_DDC_DataShift
op_assign
l_int|0x00
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xEA
suffix:semicolon
multiline_comment|/* TW: DAB */
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
op_assign
id|tempbx
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* TW: Do only 20 attempts to read */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW: Set start condition */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
suffix:semicolon
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Write DAB (S0=0=write) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_ReadAddr
suffix:semicolon
multiline_comment|/* TW: Write RAB */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/* TW: Re-start */
id|tempah
op_assign
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* DAB | 0x01 = Read */
id|temp
op_assign
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: DAB (S0=1=read) */
r_if
c_cond
(paren
id|temp
)paren
(brace
r_continue
suffix:semicolon
)brace
multiline_comment|/* TW:        (ERROR: no ack) */
id|tempah
op_assign
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|tempah
)paren
suffix:semicolon
multiline_comment|/* TW: Read byte */
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: Stop condition */
r_return
id|tempah
suffix:semicolon
)brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: Our own DDC functions */
id|USHORT
DECL|function|SiS_InitDDCRegs
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
comma
id|USHORT
id|adaptnum
comma
id|USHORT
id|DDCdatatype
comma
id|BOOLEAN
id|checkcr32
)paren
(brace
r_int
r_char
id|ddcdtype
(braket
)braket
op_assign
(brace
l_int|0xa0
comma
l_int|0xa0
comma
l_int|0xa0
comma
l_int|0xa2
comma
l_int|0xa6
)brace
suffix:semicolon
r_int
r_char
id|flag
comma
id|cr32
suffix:semicolon
id|USHORT
id|temp
op_assign
l_int|0
comma
id|myadaptnum
op_assign
id|adaptnum
suffix:semicolon
r_if
c_cond
(paren
id|adaptnum
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_30xBDH
)paren
op_logical_and
(paren
id|adaptnum
op_eq
l_int|1
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
multiline_comment|/* adapternum for SiS bridges: 0 = CRT1, 1 = LCD, 2 = VGA2 */
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* force re-detection! */
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
id|ddcdtype
(braket
id|DDCdatatype
)braket
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_P3c4
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x11
suffix:semicolon
id|flag
op_assign
l_int|0xff
suffix:semicolon
id|cr32
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x20
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
multiline_comment|/* 300 series */
r_if
c_cond
(paren
id|myadaptnum
op_ne
l_int|0
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_Part4Port
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0f
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_301
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|cr32
op_amp
l_int|0x80
)paren
op_logical_and
(paren
id|checkcr32
)paren
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_ge
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|temp
op_assign
l_int|4
op_minus
(paren
id|myadaptnum
op_star
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 310/325/330 series */
multiline_comment|/* here we simplify: 0 = CRT1, 1 = CRT2 (VGA, LCD) */
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|2
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|1
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|SiS_Pr-&gt;SiS_Part4Port
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Index
op_assign
l_int|0x0f
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|cr32
op_amp
l_int|0x80
)paren
op_logical_and
(paren
id|checkcr32
)paren
)paren
(brace
r_if
c_cond
(paren
id|myadaptnum
op_ge
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x08
)paren
)paren
(brace
id|myadaptnum
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cr32
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
)brace
)brace
id|temp
op_assign
id|myadaptnum
suffix:semicolon
r_if
c_cond
(paren
id|myadaptnum
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_LVDS
)paren
(brace
id|flag
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|flag
)paren
(brace
id|temp
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_DDC_Data
op_assign
l_int|0x02
op_lshift
id|temp
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_Clk
op_assign
l_int|0x01
op_lshift
id|temp
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;DDC Port %x Index %x Shift %d&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
id|temp
)paren
suffix:semicolon
macro_line|#endif&t; 
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_WriteDABDDC
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
)paren
)paren
(brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;WriteDAB 1 failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif&t; 
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|SiS_Pr-&gt;SiS_DDC_SecAddr
)paren
)paren
(brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;WriteDAB 2 failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif&t; 
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_PrepareReadDDC
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_or
l_int|0x01
)paren
)paren
)paren
(brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;PrepareReadDDC 1 failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif&t; 
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_PrepareDDC
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_WriteDABDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
id|SiS_PrepareReadDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|SiS_SendACK
id|SiS_SendACK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|yesno
)paren
(brace
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|yesno
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
l_int|0
)paren
suffix:semicolon
)brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_DoProbeDDC
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_int
r_char
id|mask
comma
id|value
suffix:semicolon
id|USHORT
id|temp
comma
id|ret
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|failed
op_assign
id|FALSE
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;DoProbeDDC 1 failed at PrepareDDC&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif&t; 
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|mask
op_assign
l_int|0xf0
suffix:semicolon
id|value
op_assign
l_int|0x20
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
id|temp
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|mask
op_assign
l_int|0xff
suffix:semicolon
id|value
op_assign
l_int|0xff
suffix:semicolon
)brace
r_else
(brace
id|failed
op_assign
id|TRUE
suffix:semicolon
id|ret
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|failed
op_eq
id|FALSE
)paren
(brace
id|temp
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
id|temp
op_and_assign
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|value
)paren
(brace
id|ret
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|ret
op_assign
l_int|0xFFFF
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x30
)paren
(brace
id|ret
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ProbeDDC
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
l_int|0x180
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x02
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_DoProbeDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|flag
op_or_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x1a
)paren
)paren
(brace
id|flag
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|flag
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ReadDDC
id|SiS_ReadDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
comma
id|USHORT
id|DDCdatatype
comma
r_int
r_char
op_star
id|buffer
)paren
(brace
id|USHORT
id|flag
comma
id|length
comma
id|i
suffix:semicolon
r_int
r_char
id|chksum
comma
id|gotcha
suffix:semicolon
r_if
c_cond
(paren
id|DDCdatatype
OG
l_int|4
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|flag
op_assign
l_int|0
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
id|length
op_assign
l_int|127
suffix:semicolon
r_if
c_cond
(paren
id|DDCdatatype
op_ne
l_int|1
)paren
(brace
id|length
op_assign
l_int|255
suffix:semicolon
)brace
id|chksum
op_assign
l_int|0
suffix:semicolon
id|gotcha
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|chksum
op_add_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|gotcha
op_or_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|chksum
op_add_assign
id|buffer
(braket
id|i
)braket
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|gotcha
)paren
(brace
id|flag
op_assign
(paren
id|USHORT
)paren
id|chksum
suffix:semicolon
)brace
r_else
id|flag
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
r_else
(brace
id|flag
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
id|flag
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ReadLCDDDC
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|length
comma
r_int
r_char
op_star
id|buffer
)paren
(brace
id|USHORT
id|i
op_assign
l_int|0
comma
id|flag
op_assign
l_int|0
suffix:semicolon
id|length
op_decrement
suffix:semicolon
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_PrepareDDC
c_func
(paren
id|SiS_Pr
)paren
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
id|buffer
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
)paren
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SendACK
c_func
(paren
id|SiS_Pr
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
id|flag
op_assign
l_int|0xFFFF
suffix:semicolon
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Our private DDC function&n;&n;   It complies somewhat with the corresponding VESA function&n;   in arguments and return values.&n;&n;   Since this is probably called before the mode is changed,&n;   we use our pre-detected pSiS-values instead of SiS_Pr as&n;   regards chipset and video bridge type.&n;&n;   Arguments:&n;       adaptnum: 0=CRT1, 1=LCD, 2=VGA2&n;                 CRT2 DDC is only supported on SiS301, 301B (non-DH version), 302B.&n;       DDCdatatype: 0=Probe, 1=EDID, 2=EDID+VDIF, 3=EDID V2 (P&amp;D), 4=EDID V2 (FPDI-2)&n;       buffer: ptr to 256 data bytes which will be filled with read data.&n;&n;   Returns 0xFFFF if error, otherwise&n;       if DDCdatatype &gt; 0:  Returns 0 if reading OK (included a correct checksum)&n;       if DDCdatatype = 0:  Returns supported DDC modes&n;&n; */
id|USHORT
DECL|function|SiS_HandleDDC
id|SiS_HandleDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
comma
id|USHORT
id|adaptnum
comma
id|USHORT
id|DDCdatatype
comma
r_int
r_char
op_star
id|buffer
)paren
(brace
r_if
c_cond
(paren
id|adaptnum
OG
l_int|2
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|DDCdatatype
OG
l_int|4
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_VIDEOBRIDGE
)paren
)paren
op_logical_and
(paren
id|adaptnum
OG
l_int|0
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
id|adaptnum
comma
id|DDCdatatype
comma
id|TRUE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|DDCdatatype
op_eq
l_int|0
)paren
(brace
r_return
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
r_else
(brace
r_return
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
id|DDCdatatype
comma
id|buffer
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Sense the LCD parameters (CR36, CR37) via DDC */
multiline_comment|/* SiS30x(B) only */
id|USHORT
DECL|function|SiS_SenseLCDDDC
id|SiS_SenseLCDDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
)paren
(brace
id|USHORT
id|DDCdatatype
comma
id|paneltype
comma
id|flag
comma
id|xres
comma
id|yres
suffix:semicolon
id|USHORT
id|index
comma
id|myindex
comma
id|lumsize
comma
id|numcodes
suffix:semicolon
r_int
r_char
id|cr37
op_assign
l_int|0
comma
id|seekcode
suffix:semicolon
id|BOOLEAN
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
r_int
id|retry
comma
id|i
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_30xBDH
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
l_int|1
comma
l_int|0
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Probe supported DA&squot;s */
id|flag
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG   
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;CRT2 DDC capabilities 0x%x&bslash;n&quot;
comma
id|flag
)paren
suffix:semicolon
macro_line|#endif&t;
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
multiline_comment|/* EDID V2 (FP) */
id|DDCdatatype
op_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
multiline_comment|/* EDID V2 (P&amp;D-D Monitor) */
id|DDCdatatype
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EDID V1 */
id|DDCdatatype
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
multiline_comment|/* no DDC support (or no device attached) */
multiline_comment|/* Read the entire EDID */
id|retry
op_assign
l_int|2
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
id|DDCdatatype
comma
id|buffer
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;CRT2: DDC read failed (attempt %d), %s&bslash;n&quot;
comma
(paren
l_int|3
op_minus
id|retry
)paren
comma
(paren
id|retry
op_eq
l_int|1
)paren
ques
c_cond
l_string|&quot;giving up&quot;
suffix:colon
l_string|&quot;retrying&quot;
)paren
suffix:semicolon
id|retry
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|retry
op_eq
l_int|0
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
r_else
r_break
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
(brace
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG   
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_add_assign
l_int|16
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;%02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x %02x&bslash;n&quot;
comma
id|buffer
(braket
id|i
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|1
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|2
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|3
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|4
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|5
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|6
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|7
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|8
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|9
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|10
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|11
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|12
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|13
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|14
)braket
comma
id|buffer
(braket
id|i
op_plus
l_int|15
)braket
)paren
suffix:semicolon
)brace
macro_line|#endif   
multiline_comment|/* Analyze EDID and retrieve LCD panel information */
id|paneltype
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|DDCdatatype
)paren
(brace
r_case
l_int|1
suffix:colon
multiline_comment|/* Analyze EDID V1 */
multiline_comment|/* Catch a few clear cases: */
r_if
c_cond
(paren
op_logical_neg
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Attached display expects analog input (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x14
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_ne
l_int|0x08
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Attached display is not of RGB but of %s type (0x%02x)&bslash;n&quot;
comma
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x00
)paren
ques
c_cond
l_string|&quot;monochrome/greyscale&quot;
suffix:colon
(paren
(paren
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x10
)paren
ques
c_cond
l_string|&quot;non-RGB multicolor&quot;
suffix:colon
l_string|&quot;undefined&quot;
)paren
comma
id|buffer
(braket
l_int|0x18
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Now analyze the first Detailed Timing Block and hope&n;       * that the preferred timing mode is stored there.&n;       */
id|xres
op_assign
id|buffer
(braket
l_int|0x38
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3a
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|yres
op_assign
id|buffer
(braket
l_int|0x3b
)braket
op_or
(paren
(paren
id|buffer
(braket
l_int|0x3d
)braket
op_amp
l_int|0xf0
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
r_switch
c_cond
(paren
id|xres
)paren
(brace
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|600
)paren
(brace
id|paneltype
op_assign
id|Panel310_800x600
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel310_1024x768
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* expand causes error at 640x480, should otherwise be TRUE; */
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|paneltype
op_assign
id|Panel300_1280x960
suffix:semicolon
)brace
r_else
(brace
id|paneltype
op_assign
id|Panel310_1280x960
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|1024
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x1024
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x768
suffix:semicolon
multiline_comment|/* Panel size 1280x768 not supported yet */
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1050
)paren
(brace
id|paneltype
op_assign
id|Panel310_1400x1050
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1200
)paren
(brace
id|paneltype
op_assign
id|Panel310_1600x1200
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x18
)braket
op_amp
l_int|0x02
)paren
(brace
multiline_comment|/* If the preferred timing mode is stored in the first&n;&t;  * detailed timing block, we now can extract the sync&n;&t;  * polarisation information as well. This only works&n;&t;  * if the Flags indicate a digital separate output.&n;&t;  */
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x47
)braket
op_amp
l_int|0x18
)paren
op_eq
l_int|0x18
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
l_int|0x47
)braket
op_amp
l_int|0x06
)paren
op_xor
l_int|0x06
)paren
op_lshift
l_int|5
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* What now? There is no digital separate output timing... */
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;CRT2: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* If the preferred timing mode is *not* stored in the first&n;&t;  * detailed timing block, we need to guess the resolution&n;&t;  * from the supported Established Timings and assume the&n;&t;  * default sync polarity&n;&t;  */
id|paneltype
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x24
)braket
op_amp
l_int|0x01
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x1024
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
id|cr37
op_or_assign
l_int|0x20
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x24
)braket
op_amp
l_int|0x0e
)paren
(brace
id|paneltype
op_assign
id|Panel310_1024x768
suffix:semicolon
id|cr37
op_or_assign
l_int|0xe0
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* Bug at 640x480 */
)brace
r_else
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x23
)braket
op_amp
l_int|0x01
)paren
(brace
id|paneltype
op_assign
id|Panel310_800x600
suffix:semicolon
id|cr37
op_or_assign
l_int|0xe0
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|checkexpand
)paren
(brace
multiline_comment|/* If any of the Established low-res modes is supported, the &n;&t;  * panel can scale automatically. For 800x600 panels, we only &n;&t;  * check the even lower ones.&n;&t;  */
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel310_800x600
)paren
(brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x23
)braket
op_amp
l_int|0xfc
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x23
)braket
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* Analyze EDID V2 */
r_case
l_int|4
suffix:colon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_eq
l_int|0x03
)paren
(brace
id|index
op_assign
l_int|0x42
op_plus
l_int|3
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Display supports TMDS input on primary interface&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x30
)paren
(brace
id|index
op_assign
l_int|0x46
op_plus
l_int|3
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Display supports TMDS input on secondary interface&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Display does not support TMDS video interface (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x41
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|xres
op_assign
id|buffer
(braket
l_int|0x76
)braket
op_or
(paren
id|buffer
(braket
l_int|0x77
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|yres
op_assign
id|buffer
(braket
l_int|0x78
)braket
op_or
(paren
id|buffer
(braket
l_int|0x79
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|xres
)paren
(brace
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|600
)paren
(brace
id|paneltype
op_assign
id|Panel310_800x600
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel310_1024x768
suffix:semicolon
id|checkexpand
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* Bug at 640x480; we do the scaling ourselves */
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|yres
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x960
suffix:semicolon
)brace
r_else
(brace
id|paneltype
op_assign
id|Panel300_1280x960
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|yres
op_eq
l_int|1024
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x1024
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|768
)paren
(brace
id|paneltype
op_assign
id|Panel310_1280x768
suffix:semicolon
multiline_comment|/* Panel size 1280x768 not supported yet */
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1050
)paren
(brace
id|paneltype
op_assign
id|Panel310_1400x1050
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|1200
)paren
(brace
id|paneltype
op_assign
id|Panel310_1600x1200
suffix:semicolon
id|checkexpand
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* Determine if RGB18 or RGB24 */
r_if
c_cond
(paren
id|index
)paren
(brace
r_if
c_cond
(paren
(paren
id|buffer
(braket
id|index
)braket
op_eq
l_int|0x20
)paren
op_logical_or
(paren
id|buffer
(braket
id|index
)braket
op_eq
l_int|0x34
)paren
)paren
(brace
id|cr37
op_or_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|checkexpand
)paren
(brace
multiline_comment|/* TODO - for now, we let the panel scale */
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
multiline_comment|/* Now seek 4-Byte Timing codes and extract sync pol info */
id|index
op_assign
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x20
)paren
(brace
multiline_comment|/* skip Luminance Table (if provided) */
id|lumsize
op_assign
id|buffer
(braket
l_int|0x80
)braket
op_amp
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x80
)braket
op_amp
l_int|0x80
)paren
(brace
id|lumsize
op_mul_assign
l_int|3
suffix:semicolon
)brace
id|lumsize
op_increment
suffix:semicolon
id|index
op_add_assign
id|lumsize
suffix:semicolon
)brace
id|index
op_add_assign
(paren
(paren
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x1c
)paren
op_rshift
l_int|2
)paren
op_star
l_int|8
)paren
suffix:semicolon
multiline_comment|/* skip Frequency Ranges */
id|index
op_add_assign
(paren
(paren
id|buffer
(braket
l_int|0x7e
)braket
op_amp
l_int|0x03
)paren
op_star
l_int|27
)paren
suffix:semicolon
multiline_comment|/* skip Detailed Range Limits */
id|numcodes
op_assign
(paren
id|buffer
(braket
l_int|0x7f
)braket
op_amp
l_int|0xf8
)paren
op_rshift
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|numcodes
)paren
(brace
id|myindex
op_assign
id|index
suffix:semicolon
id|seekcode
op_assign
(paren
id|xres
op_minus
l_int|256
)paren
op_div
l_int|16
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|numcodes
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|buffer
(braket
id|myindex
)braket
op_eq
id|seekcode
)paren
(brace
r_break
suffix:semicolon
)brace
id|myindex
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buffer
(braket
id|myindex
)braket
op_eq
id|seekcode
)paren
(brace
id|cr37
op_or_assign
(paren
(paren
(paren
(paren
id|buffer
(braket
id|myindex
op_plus
l_int|1
)braket
op_amp
l_int|0x0c
)paren
op_xor
l_int|0x0c
)paren
op_lshift
l_int|4
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;CRT2: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_WARNING
comma
l_string|&quot;CRT2: Unable to retrieve Sync polarity information&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* 1280x960 panels are always RGB24, unable to scale and use&n;    * high active sync polarity&n;    */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel310_1280x960
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|paneltype
op_eq
id|Panel300_1280x960
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|paneltype
)paren
(brace
id|cr37
op_and_assign
l_int|0xf1
suffix:semicolon
id|cr37
op_or_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* SiS301 */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
l_int|0xf0
comma
id|paneltype
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
comma
id|cr37
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
l_int|0x08
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG       
id|xf86DrvMsgVerb
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_int|3
comma
l_string|&quot;CRT2: [DDC LCD results: 0x%02x, 0x%02x]&bslash;n&quot;
comma
id|paneltype
comma
id|cr37
)paren
suffix:semicolon
macro_line|#endif&t;
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseVGA2DDC
id|SiS_SenseVGA2DDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
)paren
(brace
id|USHORT
id|DDCdatatype
comma
id|flag
suffix:semicolon
id|BOOLEAN
id|foundcrt
op_assign
id|FALSE
suffix:semicolon
r_int
id|retry
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* if(pSiS-&gt;VBFlags &amp; VB_30xBDH) return 0;  */
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
l_int|2
comma
l_int|0
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Probe supported DA&squot;s */
id|flag
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
multiline_comment|/* EDID V2 (FP) */
id|DDCdatatype
op_assign
l_int|4
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
multiline_comment|/* EDID V2 (P&amp;D-D Monitor) */
id|DDCdatatype
op_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EDID V1 */
id|DDCdatatype
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;Do DDC answer&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
multiline_comment|/* no DDC support (or no device attached) */
)brace
multiline_comment|/* Read the entire EDID */
id|retry
op_assign
l_int|2
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|SiS_ReadDDC
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
id|DDCdatatype
comma
id|buffer
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;CRT2: DDC read failed (attempt %d), %s&bslash;n&quot;
comma
(paren
l_int|3
op_minus
id|retry
)paren
comma
(paren
id|retry
op_eq
l_int|1
)paren
ques
c_cond
l_string|&quot;giving up&quot;
suffix:colon
l_string|&quot;retrying&quot;
)paren
suffix:semicolon
id|retry
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|retry
op_eq
l_int|0
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
r_else
r_break
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
(brace
suffix:semicolon
)brace
multiline_comment|/* Analyze EDID. We don&squot;t have many chances to &n;    * distinguish a flat panel from a CRT...&n;    */
r_switch
c_cond
(paren
id|DDCdatatype
)paren
(brace
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0x14
)braket
op_amp
l_int|0x80
)paren
(brace
multiline_comment|/* Display uses digital input */
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Attached display expects digital input&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|foundcrt
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_ne
l_int|0x01
)paren
op_logical_and
multiline_comment|/* Display does not support analog input */
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0x0f
)paren
op_ne
l_int|0x02
)paren
op_logical_and
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_ne
l_int|0x10
)paren
op_logical_and
(paren
(paren
id|buffer
(braket
l_int|0x41
)braket
op_amp
l_int|0xf0
)paren
op_ne
l_int|0x20
)paren
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;CRT2: Attached display does not support analog input (0x%02x)&bslash;n&quot;
comma
id|buffer
(braket
l_int|0x41
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|foundcrt
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|foundcrt
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x32
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* ----- */
id|USHORT
id|SiS_SenseLCDDDC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISPtr
id|pSiS
)paren
(brace
id|USHORT
id|DDCdatatype
comma
id|paneltype
comma
id|flag
suffix:semicolon
r_int
r_char
id|cr36
op_assign
l_int|0
comma
id|cr37
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|tempal
comma
id|tempah
comma
id|tempbl
comma
id|tempbh
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|tempcx
comma
id|push1
comma
id|push2
comma
id|push3
suffix:semicolon
r_int
r_char
id|addresstable
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x22
comma
l_int|0x30
comma
l_int|0x40
)brace
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|256
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_ne
id|SIS_315_VGA
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301B
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_InitDDCRegs
c_func
(paren
id|SiS_Pr
comma
id|pSiS
comma
l_int|1
comma
l_int|0
comma
id|FALSE
)paren
op_eq
l_int|0xFFFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_ProbeDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x02
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
multiline_comment|/* EDID V1 */
id|DDCdatatype
op_assign
l_int|1
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x3a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa2
suffix:semicolon
multiline_comment|/* EDID V2 (P&amp;D-D Monitor) */
id|DDCdatatype
op_assign
l_int|3
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x76
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa6
suffix:semicolon
multiline_comment|/* EDID V2 (FP) */
id|DDCdatatype
op_assign
l_int|4
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x76
suffix:semicolon
)brace
r_else
r_return
l_int|0xFFFF
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|4
comma
id|buffer
)paren
suffix:semicolon
id|tempbl
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* 3a - 76 */
id|tempbh
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* 3b - 77 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
multiline_comment|/* Read and analyze EDID V1 (res) */
id|tempah
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/* 1024x768 by default */
id|tempbl
op_and_assign
l_int|0xf0
suffix:semicolon
r_if
c_cond
(paren
id|tempbl
op_ne
l_int|0x40
)paren
(brace
id|tempah
op_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* 1280x1024 by default */
r_if
c_cond
(paren
id|tempbl
op_eq
l_int|0x50
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|tempbh
)paren
(brace
id|tempbh
op_assign
id|buffer
(braket
l_int|3
)braket
op_amp
l_int|0xf0
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0x30
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x23
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempbl
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* 0x23 */
id|tempbh
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* 0x24 */
r_if
c_cond
(paren
id|tempbl
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x0a
suffix:semicolon
multiline_comment|/* 1280x768 */
)brace
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0x40
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x23
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempbl
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* 0x23 */
id|tempbh
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* 0x24 */
r_if
c_cond
(paren
id|tempbl
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* 1280x1024 */
)brace
id|tempbh
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0x00
)paren
(brace
r_goto
id|cr36ready
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x07
suffix:semicolon
multiline_comment|/* 1280x960 */
r_if
c_cond
(paren
id|tempbh
op_eq
l_int|0xc0
)paren
(brace
r_goto
id|cr36ready
suffix:semicolon
)brace
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x18
suffix:semicolon
multiline_comment|/* feature support */
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempbl
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
id|tempbh
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
id|tempbl
op_amp
l_int|0x02
)paren
(brace
r_goto
id|cr36ready
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_assign
l_int|0xa0
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x23
suffix:semicolon
multiline_comment|/* Established Timings */
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempbl
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
id|tempbh
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
id|tempah
op_assign
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbh
op_amp
l_int|0x01
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|tempbl
)paren
(brace
id|cr37
op_or_assign
l_int|0x10
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* Read and analyze EDID V2 (res) */
id|tempah
op_assign
l_int|0x02
suffix:semicolon
id|tempbx
op_assign
id|tempbl
op_or
(paren
id|tempbh
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
l_int|1024
)paren
(brace
id|tempah
op_assign
l_int|0x03
suffix:semicolon
)brace
)brace
id|cr36ready
suffix:colon
id|cr36
op_assign
id|tempah
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_DDC_DeviceAddr
op_eq
l_int|0xa0
)paren
(brace
multiline_comment|/* Read and analyze EDID V1 (pol) */
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x47
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempah
op_assign
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x06
suffix:semicolon
id|tempah
op_xor_assign
l_int|0x06
suffix:semicolon
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
id|cr37
op_and_assign
l_int|0x1f
suffix:semicolon
id|cr37
op_or_assign
id|tempah
suffix:semicolon
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x07
)paren
op_eq
l_int|0x07
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* Read and analyze EDID V2 (depth, pol) */
id|push1
op_assign
id|tempah
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x45
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
(paren
id|buffer
(braket
l_int|0
)braket
op_ne
l_int|0x20
)paren
op_logical_and
(paren
id|buffer
(braket
l_int|0
)braket
op_ne
l_int|0x34
)paren
)paren
(brace
multiline_comment|/* RGB18 or 24? */
id|tempah
op_assign
l_int|0x00
suffix:semicolon
)brace
id|cr37
op_and_assign
l_int|0xfe
suffix:semicolon
id|cr37
op_or_assign
id|tempah
suffix:semicolon
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x7e
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|USHORT
)paren
(paren
id|buffer
(braket
l_int|0
)braket
op_or
(paren
id|buffer
(braket
l_int|1
)braket
op_lshift
l_int|8
)paren
)paren
suffix:semicolon
id|push2
op_assign
id|tempax
suffix:semicolon
id|tempax
op_and_assign
l_int|0x0003
suffix:semicolon
id|tempax
op_mul_assign
l_int|0x1b
suffix:semicolon
id|push3
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
(paren
id|USHORT
)paren
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
id|tempax
op_and_assign
l_int|0x001c
suffix:semicolon
id|tempax
op_rshift_assign
l_int|2
suffix:semicolon
id|tempax
op_mul_assign
l_int|8
suffix:semicolon
id|tempbx
op_assign
id|push3
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0
)braket
op_amp
l_int|0x20
)paren
(brace
multiline_comment|/* Luminance table provided? */
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
l_int|0x80
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempax
op_assign
id|buffer
(braket
l_int|0
)braket
op_or
(paren
id|buffer
(braket
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempax
op_and_assign
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0
)braket
op_amp
l_int|0x70
)paren
(brace
id|tempax
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_increment
suffix:semicolon
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
multiline_comment|/* yes -&gt; skip it */
)brace
id|tempcx
op_assign
id|push2
suffix:semicolon
id|tempax
op_assign
id|push1
op_lshift
l_int|8
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_or
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0x00ff
)paren
op_plus
l_int|0x80
)paren
op_amp
l_int|0x00ff
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_amp
l_int|0xf800
)paren
(brace
id|tempal
op_assign
id|addresstable
(braket
(paren
(paren
id|tempax
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
)paren
)braket
suffix:semicolon
id|tempcx
op_and_assign
l_int|0xf8ff
suffix:semicolon
id|tempcx
op_rshift_assign
l_int|11
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|tempcx
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_Pr-&gt;SiS_DDC_SecAddr
op_assign
(paren
id|tempbx
op_amp
l_int|0x00ff
)paren
suffix:semicolon
id|SiS_ReadLCDDDC
c_func
(paren
id|SiS_Pr
comma
l_int|2
comma
id|buffer
)paren
suffix:semicolon
id|tempbx
op_add_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|buffer
(braket
l_int|0
)braket
op_eq
id|tempal
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|tempah
op_assign
id|buffer
(braket
l_int|1
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0c
suffix:semicolon
id|tempah
op_xor_assign
l_int|0x0c
suffix:semicolon
id|tempah
op_lshift_assign
l_int|4
suffix:semicolon
id|tempah
op_or_assign
l_int|0x20
suffix:semicolon
id|cr37
op_and_assign
l_int|0x1f
suffix:semicolon
id|cr37
op_or_assign
id|tempah
suffix:semicolon
r_if
c_cond
(paren
(paren
id|cr36
op_amp
l_int|0x07
)paren
op_eq
l_int|0x07
)paren
(brace
id|cr37
op_and_assign
l_int|0x0e
suffix:semicolon
)brace
)brace
)brace
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;DDC: cr36 = 0x%02x, cr37 = 0x%02x&bslash;n&quot;
comma
id|cr36
comma
id|cr37
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* TW: Generic I2C functions (compliant to i2c library) */
macro_line|#if 0
id|USHORT
id|SiS_I2C_GetByte
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_return
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
id|Bool
id|SiS_I2C_PutByte
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|data
)paren
(brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|data
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
id|Bool
id|SiS_I2C_Address
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|addr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetStart
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Pr
comma
id|addr
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
r_void
id|SiS_I2C_Stop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetStop
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
r_void
DECL|function|SiS_SetCH70xxANDOR
id|SiS_SetCH70xxANDOR
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
comma
id|USHORT
id|tempbh
)paren
(brace
id|USHORT
id|tempal
comma
id|tempah
comma
id|tempbl
suffix:semicolon
id|tempal
op_assign
id|tempax
op_amp
l_int|0x00FF
suffix:semicolon
id|tempah
op_assign
(paren
id|tempax
op_rshift
l_int|8
)paren
op_amp
l_int|0x00FF
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetCH70xx
c_func
(paren
id|SiS_Pr
comma
id|tempal
)paren
suffix:semicolon
id|tempbl
op_assign
(paren
(paren
(paren
id|tempbl
op_amp
id|tempbh
)paren
op_or
id|tempah
)paren
op_lshift
l_int|8
op_or
id|tempal
)paren
suffix:semicolon
id|SiS_SetCH70xx
c_func
(paren
id|SiS_Pr
comma
id|tempbl
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Generic I2C functions for Chrontel --------- */
r_void
DECL|function|SiS_SetSwitchDDC2
id|SiS_SetSwitchDDC2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SiS_DDC2Delay(SiS_Pr,SiS_I2CDELAY); */
id|SiS_WaitRetraceDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* SiS_DDC2Delay(SiS_Pr,SiS_I2CDELAY); */
id|SiS_WaitRetraceDDC
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Set I2C start condition */
multiline_comment|/* TW: This is done by a SD high-to-low transition while SC is high */
id|USHORT
DECL|function|SiS_SetStart
id|SiS_SetStart
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: (SC-&gt;low)  */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* TW: SD-&gt;high */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: SC-&gt;high */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* TW: SD-&gt;low = start condition */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: (SC-&gt;low) */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Set I2C stop condition */
multiline_comment|/* TW: This is done by a SD low-to-high transition while SC is high */
id|USHORT
DECL|function|SiS_SetStop
id|SiS_SetStop
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
r_if
c_cond
(paren
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: (SC-&gt;low) */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* TW: SD-&gt;low   */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: SC-&gt;high  */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* TW: SD-&gt;high = stop condition */
r_if
c_cond
(paren
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
multiline_comment|/* TW: (SC-&gt;high) */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Write 8 bits of data */
id|USHORT
DECL|function|SiS_WriteDDC2Data
id|SiS_WriteDDC2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|flag
comma
id|temp
suffix:semicolon
id|flag
op_assign
l_int|0x80
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: SC-&gt;low */
r_if
c_cond
(paren
id|tempax
op_amp
id|flag
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* TW: Write bit (1) to SD */
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* TW: Write bit (0) to SD */
)brace
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: SC-&gt;high */
id|flag
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_CheckACK
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: Check acknowledge */
r_return
id|temp
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_ReadDDC2Data
id|SiS_ReadDDC2Data
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|tempax
)paren
(brace
id|USHORT
id|i
comma
id|temp
comma
id|getdata
suffix:semicolon
id|getdata
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|getdata
op_lshift_assign
l_int|1
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
(brace
id|getdata
op_or_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_return
id|getdata
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SetSCLKLow
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Clk
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* SetSCLKLow()  */
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SetSCLKHigh
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|temp
comma
id|watchdog
op_assign
l_int|1000
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Clk
comma
id|SiS_Pr-&gt;SiS_DDC_Clk
)paren
suffix:semicolon
multiline_comment|/* SetSCLKHigh()  */
r_do
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
op_logical_neg
(paren
id|temp
op_amp
id|SiS_Pr-&gt;SiS_DDC_Clk
)paren
)paren
op_logical_and
op_decrement
id|watchdog
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|watchdog
)paren
(brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;SetClkHigh failed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif&t;   
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Pr
comma
id|SiS_I2CDELAYSHORT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|SiS_DDC2Delay
id|SiS_DDC2Delay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|delaytime
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|delaytime
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Check I2C acknowledge */
multiline_comment|/* Returns 0 if ack ok, non-0 if ack not ok */
id|USHORT
DECL|function|SiS_CheckACK
id|SiS_CheckACK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|tempah
suffix:semicolon
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: (SC-&gt;low) */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
comma
op_complement
id|SiS_Pr-&gt;SiS_DDC_Data
comma
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
suffix:semicolon
multiline_comment|/* TW: (SD-&gt;high) */
id|SiS_SetSCLKHigh
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: SC-&gt;high = clock impulse for ack */
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_DDC_Port
comma
id|SiS_Pr-&gt;SiS_DDC_Index
)paren
suffix:semicolon
multiline_comment|/* TW: Read SD */
id|SiS_SetSCLKLow
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* TW: SC-&gt;low = end of clock impulse */
r_if
c_cond
(paren
id|tempah
op_amp
id|SiS_Pr-&gt;SiS_DDC_Data
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/* TW: Ack OK if bit = 0 */
r_else
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: End of I2C functions ----------------------- */
multiline_comment|/* =============== SiS 310/325/330 O.E.M. ================= */
macro_line|#ifdef SIS315H
r_static
id|USHORT
DECL|function|GetRAMDACromptr
id|GetRAMDACromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|UCHAR
op_star
id|ROMAddr
)paren
(brace
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x128
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x129
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x12a
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x12b
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x1a8
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x1a9
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x1aa
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x1ab
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDromptr
id|GetLCDromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|UCHAR
op_star
id|ROMAddr
)paren
(brace
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x120
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x121
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x122
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x123
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x1a0
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x1a1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x1a2
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x1a3
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetTVromptr
id|GetTVromptr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|UCHAR
op_star
id|ROMAddr
)paren
(brace
id|USHORT
id|romptr
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x114
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x115
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x11a
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x11b
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x194
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x195
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x19a
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x19b
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_return
id|romptr
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDPtrIndexBIOS
id|GetLCDPtrIndexBIOS
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|index
op_sub_assign
l_int|5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1600x1200
)paren
(brace
id|index
op_sub_assign
l_int|6
suffix:semicolon
)brace
id|index
op_decrement
suffix:semicolon
id|index
op_mul_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|GetLCDPtrIndex
id|GetLCDPtrIndex
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_amp
l_int|0x0F
suffix:semicolon
id|index
op_decrement
suffix:semicolon
id|index
op_mul_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
multiline_comment|/*&n;---------------------------------------------------------&n;       GetTVPtrIndex()&n;          return       0 : NTSC Enhanced/Standard&n;                       1 : NTSC Standard TVSimuMode&n;                       2 : PAL Enhanced/Standard&n;                       3 : PAL Standard TVSimuMode&n;                       4 : HiVision Enhanced/Standard&n;                       5 : HiVision Standard TVSimuMode&n;---------------------------------------------------------&n;*/
r_static
id|USHORT
DECL|function|GetTVPtrIndex
id|GetTVPtrIndex
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
multiline_comment|/* Hivision TV use PAL */
id|index
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|index
op_increment
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetDelayComp
id|SetDelayComp
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|delay
comma
id|index
comma
id|myindex
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
multiline_comment|/* VGA */
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|GetRAMDACromptr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x04
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
id|delay
op_assign
l_int|0x0a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
l_int|0x00
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|delay
op_assign
l_int|0x0c
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
l_int|0x0c
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|delay
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
multiline_comment|/* LCD */
id|index
op_assign
id|GetLCDPtrIndexBIOS
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|myindex
op_assign
id|GetLCDPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
multiline_comment|/* 650+30xLV */
r_if
c_cond
(paren
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
macro_line|#if 0&t;     /* Always use the second pointer on 650; some BIOSes */
multiline_comment|/* still carry old 301 data at the first location    */
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x120
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x121
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
macro_line|#endif&t;&t;
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x122
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x123
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
(paren
id|romptr
op_plus
id|index
)paren
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_650301B
(braket
id|myindex
)braket
suffix:semicolon
macro_line|#if 0&t;     
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_650301B
(braket
id|myindex
)braket
suffix:semicolon
)brace
macro_line|#endif&t;&t;
)brace
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_651301LV
(braket
id|myindex
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_651302LV
(braket
id|myindex
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
multiline_comment|/* 315, 330, 740, 650+301B */
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_ne
id|SiS_Pr-&gt;SiS_Panel1280x1024
)paren
)paren
(brace
id|romptr
op_assign
id|GetLCDromptr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
(paren
id|romptr
op_plus
id|index
)paren
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_301
(braket
id|myindex
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
macro_line|#if 0 &t;      /* This data is (like the one in the BIOS) wrong. */&t;   
r_if
c_cond
(paren
id|IS_SIS650740
)paren
(brace
multiline_comment|/* V */
id|delay
op_assign
id|SiS310_LCDDelayCompensation_650301B
(braket
id|myindex
)braket
suffix:semicolon
)brace
r_else
(brace
macro_line|#endif&t;      
id|delay
op_assign
id|SiS310_LCDDelayCompensation_3xx301B
(braket
id|myindex
)braket
suffix:semicolon
macro_line|#if 0&t;&t; 
)brace
macro_line|#endif&t;      
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_LVDS650
(braket
id|myindex
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_LCDDelayCompensation_LVDS740
(braket
id|myindex
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* TV */
id|index
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsNotM650or651
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
macro_line|#if 0&t;     /* Always use the second pointer on 650; some BIOSes */
multiline_comment|/* still carry old 301 data at the first location    */
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x114
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x115
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
macro_line|#endif&t;     
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x11a
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x11b
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301B
(braket
id|index
)braket
suffix:semicolon
macro_line|#if 0&t;     
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301B
(braket
id|index
)braket
suffix:semicolon
)brace
macro_line|#endif&t;&t;
)brace
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_651301LV
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS302LV
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_651302LV
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|GetTVromptr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|romptr
)paren
(brace
r_return
suffix:semicolon
)brace
id|delay
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_301
(braket
id|index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS740
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_740301B
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
id|delay
op_assign
id|SiS310_TVDelayCompensation_301B
(braket
id|index
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|delay
op_assign
id|SiS310_TVDelayCompensation_LVDS
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
)paren
(brace
id|delay
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0x0F
comma
id|delay
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|IS_SIS650
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
id|temp
op_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|8
)paren
(brace
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
id|delay
op_or_assign
l_int|0xb0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|temp
op_eq
l_int|6
)paren
(brace
id|delay
op_and_assign
l_int|0x0f
suffix:semicolon
id|delay
op_or_assign
l_int|0xc0
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
id|delay
)paren
suffix:semicolon
multiline_comment|/* index 2D D[3:0] */
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2D
comma
l_int|0xF0
comma
id|delay
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SetAntiFlicker
id|SetAntiFlicker
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC, 1: PAL, 2: HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVFlickerIndex
suffix:semicolon
)brace
r_else
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVFlickerIndex
suffix:semicolon
r_if
c_cond
(paren
id|ROMAddr
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x112
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x113
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x192
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x193
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|temp
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS310_TVAntiFlick1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0x8f
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetEdgeEnhance
id|SetEdgeEnhance
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC, 1: PAL, 2: HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVEdgeIndex
suffix:semicolon
)brace
r_else
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVEdgeIndex
suffix:semicolon
r_if
c_cond
(paren
id|ROMAddr
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x124
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x125
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x1a4
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x1a5
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|temp
op_plus
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS310_TVEdge1
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_lshift_assign
l_int|5
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x3A
comma
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[7:5] */
)brace
r_static
r_void
DECL|function|SetYFilter
id|SetYFilter
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|i
comma
id|j
suffix:semicolon
id|UCHAR
id|OutputSelect
op_assign
op_star
id|SiS_Pr-&gt;pSiS_OutputSelect
suffix:semicolon
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0: NTSC, 1: PAL, 2: HiTV */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_StTVYFilterIndex
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_ExtTVYFilterIndex
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|temp
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Hivision TV uses PAL */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVYFilter1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|ROMAddr
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
l_int|0xf3
)braket
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|OutputSelect
op_assign
id|ROMAddr
(braket
l_int|0x11b
)braket
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|EnablePALMN
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_and_assign
(paren
id|EnablePALM
op_or
id|EnablePALN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
id|EnablePALM
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALMFilter2
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALMFilter2
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALMFilter
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|temp
op_eq
id|EnablePALN
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALNFilter2
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALNFilter2
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_PALNFilter
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SetPhaseIncr
id|SetPhaseIncr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|temp1
comma
id|i
comma
id|j
comma
id|resinfo
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|temp1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
multiline_comment|/* if PALM/N not set */
id|temp1
op_and_assign
(paren
id|EnablePALM
op_or
id|EnablePALN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
)brace
r_else
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
)brace
id|temp
op_assign
id|GetTVPtrIndex
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
multiline_comment|/* 0: NTSC Graphics, 1: NTSC Text,    2: PAL Graphics,&n;   * 3: PAL Text,      4: HiTV Graphics 5: HiTV Text&n;   */
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x116
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x117
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x196
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x197
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x11c
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x11d
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x19c
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x19d
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x116
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x117
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x196
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x197
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_lshift
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
id|temp
op_mod
l_int|2
suffix:semicolon
id|temp
op_rshift_assign
l_int|1
suffix:semicolon
multiline_comment|/* 0:NTSC, 1:PAL, 2:HiTV */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS310_TVPhaseIncr1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
multiline_comment|/* TW: 650/301LV: (VB_SIS301LV | VB_SIS302LV)) */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
)paren
op_logical_and
(paren
id|ModeNo
OG
l_int|0x13
)paren
)paren
(brace
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|6
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x31
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x32
comma
l_int|0xf0
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x33
comma
l_int|0xf5
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x34
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|7
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x31
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x32
comma
l_int|0xf0
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x33
comma
l_int|0xf5
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x34
comma
l_int|0x7f
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|resinfo
op_eq
l_int|8
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x31
comma
l_int|0x1e
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x32
comma
l_int|0x8b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x33
comma
l_int|0xfb
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x34
comma
l_int|0x7b
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_OEM310Setting
id|SiS_OEM310Setting
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|SetDelayComp
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* TW: The TV functions are not for LVDS */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|SetAntiFlicker
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetPhaseIncr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetYFilter
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
id|SetEdgeEnhance
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* FinalizeLCD&n; * This finalizes some Part1 registers for the very panel used.&n; * If we have a backup if these registers, we use it; otherwise&n; * we set the register according to most BIOSes. However, this&n; * function looks quite different in every BIOS, so you better&n; * pray that we have a backup...&n; */
r_void
DECL|function|SiS_FinalizeLCD
id|SiS_FinalizeLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempcl
comma
id|tempch
comma
id|tempbl
comma
id|tempbh
comma
id|tempbx
comma
id|tempax
comma
id|temp
suffix:semicolon
id|USHORT
id|resinfo
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301LV302LV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ResInfo
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|resinfo
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_RESINFO
suffix:semicolon
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x2a
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x30
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x34
comma
l_int|0x10
)paren
suffix:semicolon
)brace
id|tempch
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|tempch
op_and_assign
l_int|0xf0
suffix:semicolon
id|tempch
op_rshift_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1f
comma
l_int|0x76
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;Backup
op_eq
id|TRUE
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;Backup_Mode
op_eq
id|ModeNo
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|SiS_Pr-&gt;Backup_14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
id|SiS_Pr-&gt;Backup_15
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
id|SiS_Pr-&gt;Backup_16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
id|SiS_Pr-&gt;Backup_17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|SiS_Pr-&gt;Backup_18
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
id|SiS_Pr-&gt;Backup_19
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
id|SiS_Pr-&gt;Backup_1a
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
id|SiS_Pr-&gt;Backup_1b
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
id|SiS_Pr-&gt;Backup_1c
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
id|SiS_Pr-&gt;Backup_1d
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
(brace
multiline_comment|/* From 1.10.8w */
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
l_int|0x90
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x11
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|0
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|2
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|1
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|3
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
OG
l_int|0x13
)paren
op_logical_and
(paren
id|resinfo
op_eq
l_int|8
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/* 1.10.7u */
macro_line|#if 0&t;       
id|tempbx
op_assign
l_int|806
suffix:semicolon
multiline_comment|/* 0x326 */
multiline_comment|/* other older BIOSes */
id|tempbx
op_decrement
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x03
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0xf8
comma
id|temp
)paren
suffix:semicolon
macro_line|#endif&t;&t;  
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|1
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x70
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xff
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x48
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x12
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
l_int|0x20
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x15
comma
l_int|0x1a
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x16
comma
l_int|0x28
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x17
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x4c
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xdc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x12
)paren
(brace
r_switch
c_cond
(paren
id|tempch
)paren
(brace
r_case
l_int|0
suffix:colon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xdc
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1c
comma
l_int|0x48
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1d
comma
l_int|0x12
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
l_int|0x95
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x48
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1b
comma
l_int|0x95
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_else
(brace
id|tempcl
op_assign
id|tempbh
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|tempcl
op_and_assign
l_int|0x0f
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x70
suffix:semicolon
id|tempbh
op_rshift_assign
l_int|4
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
id|tempbl
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
(paren
id|resinfo
op_eq
l_int|8
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
id|tempbx
op_assign
l_int|770
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|tempbx
OG
l_int|770
)paren
(brace
id|tempbx
op_assign
l_int|770
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
OL
l_int|600
)paren
(brace
id|tempax
op_assign
l_int|768
op_minus
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempax
op_rshift_assign
l_int|4
suffix:semicolon
multiline_comment|/* From 1.10.7w; 1.10.6s: 3;  */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VGAVDE
op_le
l_int|480
)paren
(brace
id|tempax
op_rshift_assign
l_int|4
suffix:semicolon
)brace
multiline_comment|/* From 1.10.7w; 1.10.6s: &lt; 480; &gt;&gt;=1; */
id|tempbx
op_sub_assign
id|tempax
suffix:semicolon
)brace
)brace
)brace
r_else
r_return
suffix:semicolon
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1400x1050
)paren
(brace
)brace
macro_line|#endif
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_lshift_assign
l_int|4
suffix:semicolon
id|temp
op_or_assign
id|tempcl
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#if 0
multiline_comment|/* TW: New and checked from 650/301LV BIOS */
multiline_comment|/* This might clash with newer &quot;FinalizeLCD()&quot; function */
r_void
id|SiS_OEMLCD
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|tempbx
comma
id|tempah
comma
id|tempbl
comma
id|tempbh
comma
id|tempcl
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|tempbh
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x38
suffix:semicolon
id|tempbh
op_rshift_assign
l_int|3
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
id|tempbl
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|1
)paren
(brace
id|tempbx
op_sub_assign
l_int|0x12
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x18
comma
id|tempbx
op_amp
l_int|0x00ff
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_and_assign
l_int|0x07
suffix:semicolon
id|tempah
op_lshift_assign
l_int|3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0xc7
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0f
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|1
)paren
(brace
id|tempah
op_sub_assign
l_int|2
suffix:semicolon
)brace
id|tempah
op_and_assign
l_int|0x0f
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|1
)paren
(brace
id|tempah
op_increment
suffix:semicolon
)brace
id|tempah
op_sub_assign
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x14
comma
id|tempah
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempcl
op_assign
id|tempbh
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
)paren
suffix:semicolon
id|tempbh
op_and_assign
l_int|0x70
suffix:semicolon
id|tempbh
op_rshift_assign
l_int|4
suffix:semicolon
id|tempbl
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
id|tempbl
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_eq
l_int|1
)paren
(brace
id|tempbx
op_sub_assign
l_int|0x1e
suffix:semicolon
id|tempcl
op_and_assign
l_int|0x0f
suffix:semicolon
id|tempcl
op_sub_assign
l_int|4
suffix:semicolon
id|tempcl
op_and_assign
l_int|0x0f
suffix:semicolon
)brace
id|tempbl
op_assign
id|tempbx
op_amp
l_int|0x00ff
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbx
op_rshift
l_int|8
)paren
op_amp
l_int|0x00ff
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x04
comma
id|tempbl
)paren
suffix:semicolon
id|tempbh
op_lshift_assign
l_int|4
suffix:semicolon
id|tempbh
op_or_assign
id|tempcl
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x01
comma
l_int|0x80
comma
id|tempbh
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#endif
multiline_comment|/*  =================  SiS 300 O.E.M. ================== */
macro_line|#ifdef SIS300
macro_line|#if 0   /* Not used */
r_static
id|USHORT
id|GetRevisionID
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|ULONG
id|temp1
suffix:semicolon
macro_line|#ifndef LINUX_XF86
id|ULONG
id|base
suffix:semicolon
macro_line|#endif
id|USHORT
id|temp2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
macro_line|#ifndef LINUX_XF86
id|base
op_assign
l_int|0x80000008
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
macro_line|#else
id|temp1
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x08
)paren
suffix:semicolon
macro_line|#endif
id|temp1
op_and_assign
l_int|0x000000FF
suffix:semicolon
id|temp2
op_assign
(paren
id|USHORT
)paren
(paren
id|temp1
)paren
suffix:semicolon
r_return
id|temp2
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
r_static
id|USHORT
DECL|function|GetOEMLCDPtr
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|UCHAR
op_star
id|ROMAddr
comma
r_int
id|Flag
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|customtable300
(braket
)braket
op_assign
(brace
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
id|UCHAR
id|customtable630
(braket
)braket
op_assign
(brace
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDResInfo
op_minus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDResInfo
op_eq
id|SiS_Pr-&gt;SiS_Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_add_assign
l_int|3
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|Flag
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x255
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x256
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|tempbx
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
id|customtable300
(braket
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0xFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
)brace
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|Flag
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x255
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x256
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|tempbx
op_assign
id|ROMAddr
(braket
id|romptr
op_plus
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|0xff
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempbx
op_assign
id|customtable630
(braket
id|SiS_Pr-&gt;SiS_LCDTypeInfo
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|0xFF
)paren
(brace
r_return
l_int|0xFFFF
suffix:semicolon
)brace
id|tempbx
op_lshift_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
r_return
id|tempbx
suffix:semicolon
)brace
id|tempbx
op_assign
id|SiS_Pr-&gt;SiS_LCDTypeInfo
op_lshift
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempbx
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_increment
suffix:semicolon
)brace
)brace
r_return
id|tempbx
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMLCDDelay
id|SetOEMLCDDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x24b
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x24c
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: The Panel Compensation Delay should be set according to tables&n;   *     here. Unfortunately, various BIOS versions don&squot;t case about&n;   *     a uniform way using eg. ROM byte 0x220, but use different&n;   *     hard coded delays (0x04, 0x20, 0x18) in SetGroup1().&n;   *     Thus we don&squot;t set this if the user select a custom pdc or if&n;   *     we otherwise detected a valid pdc.&n;   */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;pdc
)paren
(brace
r_return
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
comma
l_int|0
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_LCDDelayIndex
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay2
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay3
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x235
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay5
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x249
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x24a
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay4
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMLCDDelay4
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
)brace
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetOEMLCDData
id|SetOEMLCDData
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
macro_line|#if 0  /* TW: Unfinished; VData table missing */
id|USHORT
id|index
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x237
)braket
op_amp
l_int|0x04
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* No rom pointer in BIOS header! */
)brace
id|temp
op_assign
id|GetOEMLCDPtr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|ROMAddr
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_assign
l_int|0xFFFF
)paren
(brace
r_return
suffix:semicolon
)brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|_VB_LCDHIndex
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x14
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x17
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|i
comma
id|SiS300_LCDHData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x1a
comma
l_int|0xf8
comma
(paren
id|SiS300_LCDHData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
op_amp
l_int|0x07
)paren
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|_VB_LCDVIndex
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x18
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x19
comma
l_int|0xF0
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_SiS_Part1Port
comma
l_int|0x1A
comma
l_int|0xC7
comma
(paren
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
l_int|2
)braket
op_amp
l_int|0x38
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x1b
comma
id|j
op_assign
l_int|3
suffix:semicolon
id|i
op_le
l_int|0x1d
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
id|i
comma
id|SiS300_LCDVData
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_static
id|USHORT
DECL|function|GetOEMTVPtr
id|GetOEMTVPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|index
op_add_assign
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|index
op_add_assign
l_int|3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|index
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCHTVOverScan
)paren
(brace
id|index
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|index
op_add_assign
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|index
suffix:semicolon
)brace
r_static
r_void
DECL|function|SetOEMTVDelay
id|SetOEMTVDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x02
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x241
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x242
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVDelayIndex
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
id|SiS300_OEMTVDelay301
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMTVDelayLVDS
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
)brace
id|temp
op_and_assign
l_int|0x3c
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x3C
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetOEMAntiFlicker
id|SetOEMAntiFlicker
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x04
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x243
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x244
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVFlickerIndex
suffix:semicolon
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
id|index
suffix:semicolon
id|temp
op_assign
id|ROMAddr
(braket
id|romptr
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|SiS300_OEMTVFlicker
(braket
id|temp
)braket
(braket
id|index
)braket
suffix:semicolon
)brace
id|temp
op_and_assign
l_int|0x70
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x0A
comma
l_int|0x8F
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* index 0A D[6:4] */
)brace
r_static
r_void
DECL|function|SetOEMPhaseIncr
id|SetOEMPhaseIncr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|i
comma
id|j
comma
id|temp
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x08
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x245
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x246
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVPhaseIndex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Phase2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
(paren
id|index
op_star
l_int|4
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Phase1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|SetOEMYFilter
id|SetOEMYFilter
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|index
comma
id|temp
comma
id|temp1
comma
id|i
comma
id|j
comma
id|romptr
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToSCART
op_or
id|SetCRT2ToHiVisionTV
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ROMAddr
(braket
l_int|0x238
)braket
op_amp
l_int|0x10
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|romptr
op_assign
id|ROMAddr
(braket
l_int|0x247
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x248
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|GetOEMTVPtr
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|VB_TVYFilterIndex
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x01
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
(paren
id|EnablePALM
op_or
id|EnablePALN
)paren
)paren
(brace
id|temp
op_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
id|EnablePALM
)paren
)paren
(brace
id|temp
op_assign
l_int|9
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x48
suffix:semicolon
id|i
op_le
l_int|0x4A
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter2
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|romptr
)paren
(brace
id|romptr
op_add_assign
(paren
id|temp
op_star
l_int|2
)paren
suffix:semicolon
id|romptr
op_assign
id|ROMAddr
(braket
id|romptr
)braket
op_or
(paren
id|ROMAddr
(braket
id|romptr
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|romptr
op_add_assign
(paren
id|index
op_star
l_int|4
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|ROMAddr
(braket
id|romptr
op_plus
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x35
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x38
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
id|i
comma
id|SiS300_Filter1
(braket
id|temp
)braket
(braket
id|index
)braket
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_OEM300Setting
id|SiS_OEM300Setting
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|ModeIdIndex
op_assign
id|SiS_SearchVBModeID
c_func
(paren
id|SiS_Pr
comma
id|ROMAddr
comma
op_amp
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ModeIdIndex
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SetOEMLCDDelay
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SetOEMLCDData
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|SetOEMTVDelay
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SetOEMAntiFlicker
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetOEMPhaseIncr
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|SetOEMYFilter
c_func
(paren
id|SiS_Pr
comma
id|HwDeviceExtension
comma
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
eof
