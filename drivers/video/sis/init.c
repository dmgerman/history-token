multiline_comment|/* Function: Support NT X.0  MM function  */
multiline_comment|/* Version : V 0.80      [ynlai] 04/12/98 */
macro_line|#include &quot;init.h&quot;
macro_line|#ifdef CONFIG_FB_SIS_300
macro_line|#include &quot;300vtbl.h&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
macro_line|#include &quot;310vtbl.h&quot;
macro_line|#endif
id|BOOLEAN
id|SiSInit
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
suffix:semicolon
id|BOOLEAN
id|SiSSetMode
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
suffix:semicolon
macro_line|#if defined(ALLOC_PRAGMA)
macro_line|#pragma alloc_text(PAGE,SiSSetMode)
macro_line|#pragma alloc_text(PAGE,SiSInit)
macro_line|#endif
r_void
id|SiS_SetReg1
(paren
id|USHORT
comma
id|USHORT
comma
id|USHORT
)paren
suffix:semicolon
r_void
id|SiS_SetReg2
(paren
id|USHORT
comma
id|USHORT
comma
id|USHORT
)paren
suffix:semicolon
r_void
id|SiS_SetReg3
(paren
id|USHORT
comma
id|USHORT
)paren
suffix:semicolon
r_void
id|SiS_SetReg4
(paren
id|USHORT
comma
id|ULONG
)paren
suffix:semicolon
id|UCHAR
id|SiS_GetReg1
(paren
id|USHORT
comma
id|USHORT
)paren
suffix:semicolon
id|UCHAR
id|SiS_GetReg2
(paren
id|USHORT
)paren
suffix:semicolon
id|ULONG
id|SiS_GetReg3
(paren
id|USHORT
)paren
suffix:semicolon
r_void
id|SiS_ClearDAC
(paren
id|ULONG
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300
r_void
DECL|function|InitTo300Pointer
id|InitTo300Pointer
(paren
r_void
)paren
(brace
id|SiS_SModeIDTable
op_assign
(paren
id|SiS_StStruct
op_star
)paren
id|SiS300_SModeIDTable
suffix:semicolon
id|SiS_VBModeIDTable
op_assign
(paren
id|SiS_VBModeStruct
op_star
)paren
id|SiS300_VBModeIDTable
suffix:semicolon
multiline_comment|/*add for 300 oem util */
id|SiS_StandTable
op_assign
(paren
id|SiS_StandTableStruct
op_star
)paren
id|SiS300_StandTable
suffix:semicolon
id|SiS_EModeIDTable
op_assign
(paren
id|SiS_ExtStruct
op_star
)paren
id|SiS300_EModeIDTable
suffix:semicolon
id|SiS_RefIndex
op_assign
(paren
id|SiS_Ext2Struct
op_star
)paren
id|SiS300_RefIndex
suffix:semicolon
id|SiS_CRT1Table
op_assign
(paren
id|SiS_CRT1TableStruct
op_star
)paren
id|SiS300_CRT1Table
suffix:semicolon
id|SiS_MCLKData
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS300_MCLKData
suffix:semicolon
id|SiS_ECLKData
op_assign
(paren
id|SiS_ECLKDataStruct
op_star
)paren
id|SiS300_ECLKData
suffix:semicolon
id|SiS_VCLKData
op_assign
(paren
id|SiS_VCLKDataStruct
op_star
)paren
id|SiS300_VCLKData
suffix:semicolon
id|SiS_VBVCLKData
op_assign
(paren
id|SiS_VBVCLKDataStruct
op_star
)paren
id|SiS300_VCLKData
suffix:semicolon
id|SiS_ScreenOffset
op_assign
id|SiS300_ScreenOffset
suffix:semicolon
id|SiS_StResInfo
op_assign
(paren
id|SiS_StResInfoStruct
op_star
)paren
id|SiS300_StResInfo
suffix:semicolon
id|SiS_ModeResInfo
op_assign
(paren
id|SiS_ModeResInfoStruct
op_star
)paren
id|SiS300_ModeResInfo
suffix:semicolon
id|pSiS_OutputSelect
op_assign
op_amp
id|SiS300_OutputSelect
suffix:semicolon
id|pSiS_SoftSetting
op_assign
op_amp
id|SiS300_SoftSetting
suffix:semicolon
id|pSiS_SR07
op_assign
op_amp
id|SiS300_SR07
suffix:semicolon
id|SiS_SR15
op_assign
id|SiS300_SR15
suffix:semicolon
id|SiS_CR40
op_assign
id|SiS300_CR40
suffix:semicolon
id|SiS_CR49
op_assign
id|SiS300_CR49
suffix:semicolon
id|pSiS_SR1F
op_assign
op_amp
id|SiS300_SR1F
suffix:semicolon
id|pSiS_SR21
op_assign
op_amp
id|SiS300_SR21
suffix:semicolon
id|pSiS_SR22
op_assign
op_amp
id|SiS300_SR22
suffix:semicolon
id|pSiS_SR23
op_assign
op_amp
id|SiS300_SR23
suffix:semicolon
id|pSiS_SR24
op_assign
op_amp
id|SiS300_SR24
suffix:semicolon
id|SiS_SR25
op_assign
id|SiS300_SR25
suffix:semicolon
id|pSiS_SR31
op_assign
op_amp
id|SiS300_SR31
suffix:semicolon
id|pSiS_SR32
op_assign
op_amp
id|SiS300_SR32
suffix:semicolon
id|pSiS_SR33
op_assign
op_amp
id|SiS300_SR33
suffix:semicolon
id|pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS300_CRT2Data_1_2
suffix:semicolon
id|pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS300_CRT2Data_4_D
suffix:semicolon
id|pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS300_CRT2Data_4_E
suffix:semicolon
id|pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS300_CRT2Data_4_10
suffix:semicolon
id|pSiS_RGBSenseData
op_assign
op_amp
id|SiS300_RGBSenseData
suffix:semicolon
id|pSiS_VideoSenseData
op_assign
op_amp
id|SiS300_VideoSenseData
suffix:semicolon
id|pSiS_YCSenseData
op_assign
op_amp
id|SiS300_YCSenseData
suffix:semicolon
id|pSiS_RGBSenseData2
op_assign
op_amp
id|SiS300_RGBSenseData2
suffix:semicolon
id|pSiS_VideoSenseData2
op_assign
op_amp
id|SiS300_VideoSenseData2
suffix:semicolon
id|pSiS_YCSenseData2
op_assign
op_amp
id|SiS300_YCSenseData2
suffix:semicolon
id|SiS_NTSCPhase
op_assign
id|SiS300_NTSCPhase
suffix:semicolon
id|SiS_PALPhase
op_assign
id|SiS300_PALPhase
suffix:semicolon
id|SiS_NTSCPhase2
op_assign
id|SiS300_NTSCPhase2
suffix:semicolon
id|SiS_PALPhase2
op_assign
id|SiS300_PALPhase2
suffix:semicolon
id|SiS_PALMPhase
op_assign
id|SiS300_PALMPhase
suffix:semicolon
multiline_comment|/*add for PALMN */
id|SiS_PALNPhase
op_assign
id|SiS300_PALNPhase
suffix:semicolon
id|SiS_StLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_StLCD1024x768Data
suffix:semicolon
id|SiS_ExtLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_ExtLCD1024x768Data
suffix:semicolon
id|SiS_St2LCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_St2LCD1024x768Data
suffix:semicolon
id|SiS_StLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_StLCD1280x1024Data
suffix:semicolon
id|SiS_ExtLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_St2LCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_St2LCD1280x1024Data
suffix:semicolon
id|SiS_NoScaleData
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_NoScaleData
suffix:semicolon
id|SiS_LCD1280x960Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_LCD1280x960Data
suffix:semicolon
id|SiS_StPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_StPALData
suffix:semicolon
id|SiS_ExtPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtPALData
suffix:semicolon
id|SiS_StNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_StNTSCData
suffix:semicolon
id|SiS_ExtNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtNTSCData
suffix:semicolon
id|SiS_St1HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_St1HiTVData
suffix:semicolon
id|SiS_St2HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_St2HiTVData
suffix:semicolon
id|SiS_ExtHiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtHiTVData
suffix:semicolon
id|SiS_NTSCTiming
op_assign
id|SiS300_NTSCTiming
suffix:semicolon
id|SiS_PALTiming
op_assign
id|SiS300_PALTiming
suffix:semicolon
id|SiS_HiTVSt1Timing
op_assign
id|SiS300_HiTVSt1Timing
suffix:semicolon
id|SiS_HiTVSt2Timing
op_assign
id|SiS300_HiTVSt2Timing
suffix:semicolon
id|SiS_HiTVTextTiming
op_assign
id|SiS300_HiTVTextTiming
suffix:semicolon
id|SiS_HiTVGroup3Data
op_assign
id|SiS300_HiTVGroup3Data
suffix:semicolon
id|SiS_HiTVGroup3Simu
op_assign
id|SiS300_HiTVGroup3Simu
suffix:semicolon
id|SiS_HiTVGroup3Text
op_assign
id|SiS300_HiTVGroup3Text
suffix:semicolon
id|SiS_PanelDelayTbl
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS300_PanelDelayTbl
suffix:semicolon
id|SiS_LVDS800x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS800x600Data_1
suffix:semicolon
id|SiS_LVDS800x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS800x600Data_2
suffix:semicolon
id|SiS_LVDS1024x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x768Data_1
suffix:semicolon
id|SiS_LVDS1024x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x768Data_2
suffix:semicolon
id|SiS_LVDS1280x1024Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_LVDS1280x1024Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_LVDS640x480Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS640x480Data_1
suffix:semicolon
id|SiS_CHTVUNTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVUNTSCData
suffix:semicolon
id|SiS_CHTVONTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVONTSCData
suffix:semicolon
id|SiS_CHTVUPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVUPALData
suffix:semicolon
id|SiS_CHTVOPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVOPALData
suffix:semicolon
id|SiS_PanelType00_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType00_1
suffix:semicolon
id|SiS_PanelType01_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType01_1
suffix:semicolon
id|SiS_PanelType02_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType02_1
suffix:semicolon
id|SiS_PanelType03_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType03_1
suffix:semicolon
id|SiS_PanelType04_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType04_1
suffix:semicolon
id|SiS_PanelType05_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType05_1
suffix:semicolon
id|SiS_PanelType06_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType06_1
suffix:semicolon
id|SiS_PanelType07_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType07_1
suffix:semicolon
id|SiS_PanelType08_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType08_1
suffix:semicolon
id|SiS_PanelType09_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType09_1
suffix:semicolon
id|SiS_PanelType0a_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0a_1
suffix:semicolon
id|SiS_PanelType0b_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0b_1
suffix:semicolon
id|SiS_PanelType0c_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0c_1
suffix:semicolon
id|SiS_PanelType0d_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0d_1
suffix:semicolon
id|SiS_PanelType0e_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0e_1
suffix:semicolon
id|SiS_PanelType0f_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0f_1
suffix:semicolon
id|SiS_PanelType00_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType00_2
suffix:semicolon
id|SiS_PanelType01_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType01_2
suffix:semicolon
id|SiS_PanelType02_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType02_2
suffix:semicolon
id|SiS_PanelType03_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType03_2
suffix:semicolon
id|SiS_PanelType04_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType04_2
suffix:semicolon
id|SiS_PanelType05_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType05_2
suffix:semicolon
id|SiS_PanelType06_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType06_2
suffix:semicolon
id|SiS_PanelType07_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType07_2
suffix:semicolon
id|SiS_PanelType08_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType08_2
suffix:semicolon
id|SiS_PanelType09_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType09_2
suffix:semicolon
id|SiS_PanelType0a_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0a_2
suffix:semicolon
id|SiS_PanelType0b_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0b_2
suffix:semicolon
id|SiS_PanelType0c_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0c_2
suffix:semicolon
id|SiS_PanelType0d_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0d_2
suffix:semicolon
id|SiS_PanelType0e_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0e_2
suffix:semicolon
id|SiS_PanelType0f_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0f_2
suffix:semicolon
id|SiS_CHTVUNTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVUNTSCDesData
suffix:semicolon
id|SiS_CHTVONTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVONTSCDesData
suffix:semicolon
id|SiS_CHTVUPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVUPALDesData
suffix:semicolon
id|SiS_CHTVOPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVOPALDesData
suffix:semicolon
id|SiS_LVDSCRT1800x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_LVDSCRT11024x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_LVDSCRT1800x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_LVDSCRT1800x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_LVDSCRT11024x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_LVDSCRT1800x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_CHTVCRT1UNTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_CHTVCRT1ONTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_CHTVCRT1UPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1UPAL
suffix:semicolon
id|SiS_CHTVCRT1OPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1OPAL
suffix:semicolon
id|SiS_CHTVReg_UNTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_UNTSC
suffix:semicolon
id|SiS_CHTVReg_ONTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_ONTSC
suffix:semicolon
id|SiS_CHTVReg_UPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_UPAL
suffix:semicolon
id|SiS_CHTVReg_OPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_OPAL
suffix:semicolon
id|SiS_CHTVVCLKUNTSC
op_assign
id|SiS300_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_CHTVVCLKONTSC
op_assign
id|SiS300_CHTVVCLKONTSC
suffix:semicolon
id|SiS_CHTVVCLKUPAL
op_assign
id|SiS300_CHTVVCLKUPAL
suffix:semicolon
id|SiS_CHTVVCLKOPAL
op_assign
id|SiS300_CHTVVCLKOPAL
suffix:semicolon
multiline_comment|/* 300 customization related */
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_void
DECL|function|InitTo310Pointer
id|InitTo310Pointer
(paren
r_void
)paren
(brace
id|SiS_SModeIDTable
op_assign
(paren
id|SiS_StStruct
op_star
)paren
id|SiS310_SModeIDTable
suffix:semicolon
id|SiS_StandTable
op_assign
(paren
id|SiS_StandTableStruct
op_star
)paren
id|SiS310_StandTable
suffix:semicolon
id|SiS_EModeIDTable
op_assign
(paren
id|SiS_ExtStruct
op_star
)paren
id|SiS310_EModeIDTable
suffix:semicolon
id|SiS_RefIndex
op_assign
(paren
id|SiS_Ext2Struct
op_star
)paren
id|SiS310_RefIndex
suffix:semicolon
id|SiS_CRT1Table
op_assign
(paren
id|SiS_CRT1TableStruct
op_star
)paren
id|SiS310_CRT1Table
suffix:semicolon
id|SiS_MCLKData
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS310_MCLKData
suffix:semicolon
id|SiS_ECLKData
op_assign
(paren
id|SiS_ECLKDataStruct
op_star
)paren
id|SiS310_ECLKData
suffix:semicolon
id|SiS_VCLKData
op_assign
(paren
id|SiS_VCLKDataStruct
op_star
)paren
id|SiS310_VCLKData
suffix:semicolon
id|SiS_VBVCLKData
op_assign
(paren
id|SiS_VBVCLKDataStruct
op_star
)paren
id|SiS310_VBVCLKData
suffix:semicolon
id|SiS_ScreenOffset
op_assign
id|SiS310_ScreenOffset
suffix:semicolon
id|SiS_StResInfo
op_assign
(paren
id|SiS_StResInfoStruct
op_star
)paren
id|SiS310_StResInfo
suffix:semicolon
id|SiS_ModeResInfo
op_assign
(paren
id|SiS_ModeResInfoStruct
op_star
)paren
id|SiS310_ModeResInfo
suffix:semicolon
id|pSiS_OutputSelect
op_assign
op_amp
id|SiS310_OutputSelect
suffix:semicolon
id|pSiS_SoftSetting
op_assign
op_amp
id|SiS310_SoftSetting
suffix:semicolon
id|pSiS_SR07
op_assign
op_amp
id|SiS310_SR07
suffix:semicolon
id|SiS_SR15
op_assign
id|SiS310_SR15
suffix:semicolon
id|SiS_CR40
op_assign
id|SiS310_CR40
suffix:semicolon
id|SiS_CR49
op_assign
id|SiS310_CR49
suffix:semicolon
id|pSiS_SR1F
op_assign
op_amp
id|SiS310_SR1F
suffix:semicolon
id|pSiS_SR21
op_assign
op_amp
id|SiS310_SR21
suffix:semicolon
id|pSiS_SR22
op_assign
op_amp
id|SiS310_SR22
suffix:semicolon
id|pSiS_SR23
op_assign
op_amp
id|SiS310_SR23
suffix:semicolon
id|pSiS_SR24
op_assign
op_amp
id|SiS310_SR24
suffix:semicolon
id|SiS_SR25
op_assign
id|SiS310_SR25
suffix:semicolon
id|pSiS_SR31
op_assign
op_amp
id|SiS310_SR31
suffix:semicolon
id|pSiS_SR32
op_assign
op_amp
id|SiS310_SR32
suffix:semicolon
id|pSiS_SR33
op_assign
op_amp
id|SiS310_SR33
suffix:semicolon
id|pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS310_CRT2Data_1_2
suffix:semicolon
id|pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS310_CRT2Data_4_D
suffix:semicolon
id|pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS310_CRT2Data_4_E
suffix:semicolon
id|pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS310_CRT2Data_4_10
suffix:semicolon
id|pSiS_RGBSenseData
op_assign
op_amp
id|SiS310_RGBSenseData
suffix:semicolon
id|pSiS_VideoSenseData
op_assign
op_amp
id|SiS310_VideoSenseData
suffix:semicolon
id|pSiS_YCSenseData
op_assign
op_amp
id|SiS310_YCSenseData
suffix:semicolon
id|pSiS_RGBSenseData2
op_assign
op_amp
id|SiS310_RGBSenseData2
suffix:semicolon
id|pSiS_VideoSenseData2
op_assign
op_amp
id|SiS310_VideoSenseData2
suffix:semicolon
id|pSiS_YCSenseData2
op_assign
op_amp
id|SiS310_YCSenseData2
suffix:semicolon
id|SiS_NTSCPhase
op_assign
id|SiS310_NTSCPhase
suffix:semicolon
id|SiS_PALPhase
op_assign
id|SiS310_PALPhase
suffix:semicolon
id|SiS_NTSCPhase2
op_assign
id|SiS310_NTSCPhase2
suffix:semicolon
id|SiS_PALPhase2
op_assign
id|SiS310_PALPhase2
suffix:semicolon
id|SiS_PALMPhase
op_assign
id|SiS310_PALMPhase
suffix:semicolon
multiline_comment|/*add for PALMN */
id|SiS_PALNPhase
op_assign
id|SiS310_PALNPhase
suffix:semicolon
id|SiS_StLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_StLCD1024x768Data
suffix:semicolon
id|SiS_ExtLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_ExtLCD1024x768Data
suffix:semicolon
id|SiS_St2LCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_St2LCD1024x768Data
suffix:semicolon
id|SiS_StLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_StLCD1280x1024Data
suffix:semicolon
id|SiS_ExtLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_St2LCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_St2LCD1280x1024Data
suffix:semicolon
id|SiS_NoScaleData
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_NoScaleData
suffix:semicolon
id|SiS_LCD1280x960Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_LCD1280x960Data
suffix:semicolon
id|SiS_StPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_StPALData
suffix:semicolon
id|SiS_ExtPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtPALData
suffix:semicolon
id|SiS_StNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_StNTSCData
suffix:semicolon
id|SiS_ExtNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtNTSCData
suffix:semicolon
id|SiS_St1HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_St1HiTVData
suffix:semicolon
id|SiS_St2HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_St2HiTVData
suffix:semicolon
id|SiS_ExtHiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtHiTVData
suffix:semicolon
id|SiS_NTSCTiming
op_assign
id|SiS310_NTSCTiming
suffix:semicolon
id|SiS_PALTiming
op_assign
id|SiS310_PALTiming
suffix:semicolon
id|SiS_HiTVSt1Timing
op_assign
id|SiS310_HiTVSt1Timing
suffix:semicolon
id|SiS_HiTVSt2Timing
op_assign
id|SiS310_HiTVSt2Timing
suffix:semicolon
id|SiS_HiTVTextTiming
op_assign
id|SiS310_HiTVTextTiming
suffix:semicolon
id|SiS_HiTVGroup3Data
op_assign
id|SiS310_HiTVGroup3Data
suffix:semicolon
id|SiS_HiTVGroup3Simu
op_assign
id|SiS310_HiTVGroup3Simu
suffix:semicolon
id|SiS_HiTVGroup3Text
op_assign
id|SiS310_HiTVGroup3Text
suffix:semicolon
id|SiS_PanelDelayTbl
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS310_PanelDelayTbl
suffix:semicolon
id|SiS_LVDS800x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS800x600Data_1
suffix:semicolon
id|SiS_LVDS800x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS800x600Data_2
suffix:semicolon
id|SiS_LVDS1024x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x768Data_1
suffix:semicolon
id|SiS_LVDS1024x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x768Data_2
suffix:semicolon
id|SiS_LVDS1280x1024Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_LVDS1280x1024Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_LVDS640x480Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS640x480Data_1
suffix:semicolon
id|SiS_CHTVUNTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVUNTSCData
suffix:semicolon
id|SiS_CHTVONTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVONTSCData
suffix:semicolon
id|SiS_CHTVUPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVUPALData
suffix:semicolon
id|SiS_CHTVOPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVOPALData
suffix:semicolon
id|SiS_PanelType00_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType00_1
suffix:semicolon
id|SiS_PanelType01_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType01_1
suffix:semicolon
id|SiS_PanelType02_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType02_1
suffix:semicolon
id|SiS_PanelType03_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType03_1
suffix:semicolon
id|SiS_PanelType04_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType04_1
suffix:semicolon
id|SiS_PanelType05_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType05_1
suffix:semicolon
id|SiS_PanelType06_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType06_1
suffix:semicolon
id|SiS_PanelType07_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType07_1
suffix:semicolon
id|SiS_PanelType08_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType08_1
suffix:semicolon
id|SiS_PanelType09_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType09_1
suffix:semicolon
id|SiS_PanelType0a_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0a_1
suffix:semicolon
id|SiS_PanelType0b_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0b_1
suffix:semicolon
id|SiS_PanelType0c_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0c_1
suffix:semicolon
id|SiS_PanelType0d_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0d_1
suffix:semicolon
id|SiS_PanelType0e_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0e_1
suffix:semicolon
id|SiS_PanelType0f_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0f_1
suffix:semicolon
id|SiS_PanelType00_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType00_2
suffix:semicolon
id|SiS_PanelType01_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType01_2
suffix:semicolon
id|SiS_PanelType02_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType02_2
suffix:semicolon
id|SiS_PanelType03_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType03_2
suffix:semicolon
id|SiS_PanelType04_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType04_2
suffix:semicolon
id|SiS_PanelType05_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType05_2
suffix:semicolon
id|SiS_PanelType06_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType06_2
suffix:semicolon
id|SiS_PanelType07_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType07_2
suffix:semicolon
id|SiS_PanelType08_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType08_2
suffix:semicolon
id|SiS_PanelType09_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType09_2
suffix:semicolon
id|SiS_PanelType0a_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0a_2
suffix:semicolon
id|SiS_PanelType0b_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0b_2
suffix:semicolon
id|SiS_PanelType0c_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0c_2
suffix:semicolon
id|SiS_PanelType0d_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0d_2
suffix:semicolon
id|SiS_PanelType0e_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0e_2
suffix:semicolon
id|SiS_PanelType0f_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0f_2
suffix:semicolon
multiline_comment|/*301b */
id|LVDS1024x768Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1076_1
suffix:semicolon
id|LVDS1280x1024Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1210_1
suffix:semicolon
id|LVDS1280x960Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1296_1
suffix:semicolon
id|LVDS1024x768Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1076_2
suffix:semicolon
id|LVDS1280x1024Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1210_2
suffix:semicolon
id|LVDS1280x960Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1296_2
suffix:semicolon
multiline_comment|/*end 301b */
id|SiS_CHTVUNTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVUNTSCDesData
suffix:semicolon
id|SiS_CHTVONTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVONTSCDesData
suffix:semicolon
id|SiS_CHTVUPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVUPALDesData
suffix:semicolon
id|SiS_CHTVOPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVOPALDesData
suffix:semicolon
id|SiS_LVDSCRT1800x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_LVDSCRT11024x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_LVDSCRT1800x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_LVDSCRT1800x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_LVDSCRT11024x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_LVDSCRT1800x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_CHTVCRT1UNTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_CHTVCRT1ONTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_CHTVCRT1UPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1UPAL
suffix:semicolon
id|SiS_CHTVCRT1OPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1OPAL
suffix:semicolon
id|SiS_CHTVReg_UNTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_UNTSC
suffix:semicolon
id|SiS_CHTVReg_ONTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_ONTSC
suffix:semicolon
id|SiS_CHTVReg_UPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_UPAL
suffix:semicolon
id|SiS_CHTVReg_OPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_OPAL
suffix:semicolon
multiline_comment|/*add for LCDA */
id|SiS_LCDACRT1800x600_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_1
suffix:semicolon
id|SiS_LCDACRT11024x768_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_1
suffix:semicolon
id|SiS_LCDACRT11280x1024_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_1
suffix:semicolon
id|SiS_LCDACRT1800x600_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_1_H
suffix:semicolon
id|SiS_LCDACRT11024x768_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_1_H
suffix:semicolon
id|SiS_LCDACRT11280x1024_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_1_H
suffix:semicolon
id|SiS_LCDACRT1800x600_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_2
suffix:semicolon
id|SiS_LCDACRT11024x768_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_2
suffix:semicolon
id|SiS_LCDACRT11280x1024_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_2
suffix:semicolon
id|SiS_LCDACRT1800x600_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_2_H
suffix:semicolon
id|SiS_LCDACRT11024x768_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_2_H
suffix:semicolon
id|SiS_LCDACRT11280x1024_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_2_H
suffix:semicolon
multiline_comment|/*end for 301b */
id|SiS_CHTVVCLKUNTSC
op_assign
id|SiS310_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_CHTVVCLKONTSC
op_assign
id|SiS310_CHTVVCLKONTSC
suffix:semicolon
id|SiS_CHTVVCLKUPAL
op_assign
id|SiS310_CHTVVCLKUPAL
suffix:semicolon
id|SiS_CHTVVCLKOPAL
op_assign
id|SiS310_CHTVVCLKOPAL
suffix:semicolon
multiline_comment|/* 310 customization related */
)brace
macro_line|#endif
id|BOOLEAN
DECL|function|SiSInit
id|SiSInit
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|ULONG
id|ROMAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
id|UCHAR
id|i
comma
id|temp
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|SR11
comma
id|temp1
suffix:semicolon
id|ULONG
id|base
suffix:semicolon
id|UCHAR
id|SR12
op_assign
l_int|0
comma
id|SR13
op_assign
l_int|0
comma
id|SR14
op_assign
l_int|0
comma
id|SR16
op_assign
l_int|0
comma
id|SR17
op_assign
l_int|0
comma
id|SR18
op_assign
l_int|0
comma
id|SR19
op_assign
l_int|0
comma
id|SR1A
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/* ULONG   j, k;   */
id|UCHAR
id|CR39
op_assign
l_int|0
comma
id|CR3A
op_assign
l_int|0
comma
id|CR3B
op_assign
l_int|0
comma
id|CR3C
op_assign
l_int|0
comma
id|CR3D
op_assign
l_int|0
comma
id|CR3E
op_assign
l_int|0
comma
id|CR3F
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|CR79
op_assign
l_int|0
comma
id|CR7A
op_assign
l_int|0
comma
id|CR7B
op_assign
l_int|0
comma
id|CR7C
op_assign
l_int|0
suffix:semicolon
id|PSIS_DSReg
id|pSR
suffix:semicolon
id|ULONG
id|Temp
suffix:semicolon
macro_line|#endif
id|UCHAR
id|VBIOSVersion
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* if(ROMAddr==0)   return (FALSE);*/
r_if
c_cond
(paren
id|FBAddr
op_eq
l_int|0
)paren
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|BaseAddr
op_eq
l_int|0
)paren
r_return
(paren
id|FALSE
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
(paren
id|USHORT
)paren
(paren
id|BaseAddr
op_plus
l_int|0x12
)paren
comma
l_int|0x67
)paren
suffix:semicolon
multiline_comment|/* 3c2 &lt;- 67 ,ynlai */
macro_line|#ifdef CONFIG_FB_SIS_315
multiline_comment|/*if(HwDeviceExtension-&gt;jChipType &gt; SIS_315H) */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|HwDeviceExtension-&gt;bIntegratedMMEnabled
)paren
r_return
(paren
id|FALSE
)paren
suffix:semicolon
multiline_comment|/* alan  */
)brace
macro_line|#endif
id|SiS_MemoryCopy
(paren
id|VBIOSVersion
comma
id|HwDeviceExtension-&gt;szVBIOSVer
comma
l_int|4
)paren
suffix:semicolon
id|VBIOSVersion
(braket
l_int|4
)braket
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* 09/07/99 modify by domao */
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
multiline_comment|/* 05/02/01 ynlai for 550 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
multiline_comment|/* 09/03/01 chiawen for 650 */
id|InitTo310Pointer
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
id|InitTo300Pointer
(paren
)paren
suffix:semicolon
macro_line|#endif
id|SiS_P3c4
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
id|SiS_P3d4
op_assign
id|BaseAddr
op_plus
l_int|0x24
suffix:semicolon
id|SiS_P3c0
op_assign
id|BaseAddr
op_plus
l_int|0x10
suffix:semicolon
id|SiS_P3ce
op_assign
id|BaseAddr
op_plus
l_int|0x1e
suffix:semicolon
id|SiS_P3c2
op_assign
id|BaseAddr
op_plus
l_int|0x12
suffix:semicolon
id|SiS_P3ca
op_assign
id|BaseAddr
op_plus
l_int|0x1a
suffix:semicolon
id|SiS_P3c6
op_assign
id|BaseAddr
op_plus
l_int|0x16
suffix:semicolon
id|SiS_P3c7
op_assign
id|BaseAddr
op_plus
l_int|0x17
suffix:semicolon
id|SiS_P3c8
op_assign
id|BaseAddr
op_plus
l_int|0x18
suffix:semicolon
id|SiS_P3c9
op_assign
id|BaseAddr
op_plus
l_int|0x19
suffix:semicolon
id|SiS_P3da
op_assign
id|BaseAddr
op_plus
l_int|0x2A
suffix:semicolon
id|SiS_Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
id|SiS_Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|SiS_Part3Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_12
suffix:semicolon
id|SiS_Part4Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
suffix:semicolon
id|SiS_Part5Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
op_plus
l_int|2
suffix:semicolon
id|SiS_Set_LVDS_TRUMPION
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*2/29/00 by Mars Wen for LVDS and Trumpion  */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* 1.Openkey  */
macro_line|#ifdef LINUX_KERNEL
macro_line|#ifdef CONFIG_FB_SIS_300&t;/* add to set SR14 */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000060
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_rshift
(paren
l_int|16
op_plus
l_int|8
op_plus
l_int|4
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x07
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_plus
l_int|1
suffix:semicolon
id|temp1
op_assign
l_int|1
op_lshift
id|temp1
suffix:semicolon
id|SR14
op_assign
id|temp1
op_minus
l_int|1
suffix:semicolon
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x00000020
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|SR14
op_assign
(paren
l_int|0x10000000
)paren
op_or
id|SR14
suffix:semicolon
r_else
id|SR14
op_assign
(paren
l_int|0x01000000
)paren
op_or
id|SR14
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315&t;/* add to set SR14 */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000060
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_rshift
(paren
l_int|16
op_plus
l_int|8
op_plus
l_int|4
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x07
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_plus
l_int|1
suffix:semicolon
id|temp1
op_assign
l_int|1
op_lshift
id|temp1
suffix:semicolon
id|SR14
op_assign
id|temp1
op_minus
l_int|1
suffix:semicolon
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x00000020
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|SR14
op_assign
(paren
l_int|0x10000000
)paren
op_or
id|SR14
suffix:semicolon
r_else
id|SR14
op_assign
(paren
l_int|0x01000000
)paren
op_or
id|SR14
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp
op_rshift
l_int|4
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x07
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
OG
l_int|2
)paren
(brace
id|temp
op_assign
id|temp1
suffix:semicolon
r_switch
c_cond
(paren
id|temp
)paren
(brace
r_case
l_int|3
suffix:colon
id|temp1
op_assign
l_int|0x07
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|temp1
op_assign
l_int|0x0F
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|temp1
op_assign
l_int|0x1F
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|temp1
op_assign
l_int|0x05
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|temp1
op_assign
l_int|0x17
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
r_break
suffix:semicolon
)brace
)brace
id|SR14
op_assign
id|temp1
suffix:semicolon
id|base
op_assign
l_int|0x8000007C
suffix:semicolon
id|OutPortLong
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
(paren
l_int|0x00000020
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
id|SR14
op_assign
(paren
l_int|0x10000000
)paren
op_or
id|SR14
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SR12
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x12
)paren
suffix:semicolon
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SR16
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SR17
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|SR18
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|SR19
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|SR1A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
)brace
r_else
(brace
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
)paren
(brace
id|CR39
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x39
)paren
suffix:semicolon
id|CR3A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3A
)paren
suffix:semicolon
id|CR3B
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3B
)paren
suffix:semicolon
id|CR3C
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3C
)paren
suffix:semicolon
id|CR3D
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3D
)paren
suffix:semicolon
id|CR3E
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3E
)paren
suffix:semicolon
id|CR3F
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3F
)paren
suffix:semicolon
id|CR79
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x79
)paren
suffix:semicolon
id|CR7A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7A
)paren
suffix:semicolon
id|CR7B
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7B
)paren
suffix:semicolon
id|CR7C
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7C
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
id|SR12
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x12
)paren
suffix:semicolon
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SR16
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SR17
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|SR18
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|SR19
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|SR1A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ResetExtReg begin */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
suffix:semicolon
id|i
OL
l_int|0x20
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* 2.Reset Extended register */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x21
suffix:semicolon
id|i
op_le
l_int|0x27
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/*   Reset Extended register */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x3D
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300H
r_for
c_loop
(paren
id|i
op_assign
l_int|0x38
suffix:semicolon
id|i
op_le
l_int|0x3F
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_for
c_loop
(paren
id|i
op_assign
l_int|0x37
suffix:semicolon
id|i
op_le
l_int|0x3F
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x79
suffix:semicolon
id|i
op_le
l_int|0x7C
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* ResetExtReg end */
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x12
comma
id|SR12
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SR16
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SR17
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
comma
id|SR18
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SR19
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
comma
id|SR1A
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x39
comma
id|CR39
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3A
comma
id|CR3A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3B
comma
id|CR3B
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3C
comma
id|CR3C
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3D
comma
id|CR3D
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3E
comma
id|CR3E
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x3F
comma
id|CR3F
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x79
comma
id|CR79
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7A
comma
id|CR7A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7B
comma
id|CR7B
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x7C
comma
id|CR7C
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x12
comma
id|SR12
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SR16
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SR17
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
comma
id|SR18
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SR19
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
comma
id|SR1A
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* detect ExtChip Type */
id|SiS_Set_LVDS_TRUMPION
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*2/29/00 by Mars Wen for LVDS and Trumpion  */
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SR1A
suffix:semicolon
)brace
r_else
macro_line|#endif
(brace
r_if
c_cond
(paren
(paren
op_star
id|pSiS_SoftSetting
op_amp
id|SoftDRAMType
)paren
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
)brace
)brace
id|SiS_RAMType
op_assign
id|temp
op_amp
l_int|0x03
suffix:semicolon
id|SiS_SetMemoryClock
(paren
id|ROMAddr
)paren
suffix:semicolon
multiline_comment|/* SetDefExt1Regs  begin */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
op_star
id|pSiS_SR07
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_540
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_730
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
suffix:semicolon
id|i
OL
l_int|0x1C
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
id|SiS_SR15
(braket
id|i
op_minus
l_int|0x15
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x40
suffix:semicolon
id|i
op_le
l_int|0x44
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|SiS_CR40
(braket
id|i
op_minus
l_int|0x40
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x48
comma
l_int|0x23
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x49
comma
id|SiS_CR49
(braket
l_int|0
)braket
)paren
suffix:semicolon
multiline_comment|/* /SiS_SetReg1(SiS_P3c4,0x25,SiS_SR25[0]);  */
)brace
macro_line|#endif
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
op_star
id|pSiS_SR1F
)paren
suffix:semicolon
multiline_comment|/*SiS_SetReg1(SiS_P3c4,0x20,0x20); */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x20
comma
l_int|0xA0
)paren
suffix:semicolon
multiline_comment|/* alan, 2001/6/26 Frame buffer can read/write */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x23
comma
op_star
id|pSiS_SR23
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x24
comma
op_star
id|pSiS_SR24
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x25
comma
id|SiS_SR25
(braket
l_int|0
)braket
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
l_int|0x84
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x22
comma
l_int|0x00
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SR11
op_assign
l_int|0x0F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
id|SR11
)paren
suffix:semicolon
id|SiS_UnLockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
op_star
id|pSiS_CRT2Data_1_2
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315&t;/* 05/02/01 ynlai  for sis550 */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
multiline_comment|/* 09/03/01 chiawen for 650 */
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x08
)paren
suffix:semicolon
multiline_comment|/* use VB */
macro_line|#endif
id|temp
op_assign
op_star
id|pSiS_SR32
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
)paren
(brace
id|temp
op_assign
id|temp
op_amp
l_int|0xEF
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
id|HwDeviceExtension-&gt;pQueryVGAConfigSpace
(paren
id|HwDeviceExtension
comma
l_int|0x50
comma
l_int|0
comma
op_amp
id|Temp
)paren
suffix:semicolon
multiline_comment|/* Get */
id|Temp
op_rshift_assign
l_int|20
suffix:semicolon
id|Temp
op_and_assign
l_int|0xF
suffix:semicolon
r_if
c_cond
(paren
id|Temp
op_ne
l_int|1
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x25
comma
id|SiS_SR25
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x49
comma
id|SiS_CR49
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x27
comma
l_int|0x1F
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
op_star
id|pSiS_SR31
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
op_star
id|pSiS_SR32
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x33
comma
op_star
id|pSiS_SR33
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1C
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0D
comma
op_star
id|pSiS_CRT2Data_4_D
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0E
comma
op_star
id|pSiS_CRT2Data_4_E
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x10
comma
op_star
id|pSiS_CRT2Data_4_10
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x0F
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
id|SiS_LockCRT2
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x83
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*   SetDefExt1Regs end */
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
multiline_comment|/* 05/02/01 ynlai */
multiline_comment|/* For SiS 300,310 Chip  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;bSkipDramSizing
op_eq
id|TRUE
)paren
(brace
id|SiS_SetDRAMModeRegister
(paren
id|ROMAddr
)paren
suffix:semicolon
id|pSR
op_assign
id|HwDeviceExtension-&gt;pSR
suffix:semicolon
r_if
c_cond
(paren
id|pSR
op_ne
l_int|NULL
)paren
(brace
r_while
c_loop
(paren
id|pSR-&gt;jIdx
op_ne
l_int|0xFF
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|pSR-&gt;jIdx
comma
id|pSR-&gt;jVal
)paren
suffix:semicolon
id|pSR
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
id|SiS_SetDRAMSize_310
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
)paren
(brace
multiline_comment|/* 05/02/01 ynlai For SiS 550 */
multiline_comment|/* SetDRAMConfig begin */
multiline_comment|/*     SiS_SetReg1(SiS_P3c4,0x12,SR12);&n;       SiS_SetReg1(SiS_P3c4,0x13,SR13);&n;       SiS_SetReg1(SiS_P3c4,0x14,SR14);&n;       SiS_SetReg1(SiS_P3c4,0x16,SR16);&n;       SiS_SetReg1(SiS_P3c4,0x17,SR17);&n;       SiS_SetReg1(SiS_P3c4,0x18,SR18);&n;       SiS_SetReg1(SiS_P3c4,0x19,SR19);&n;       SiS_SetReg1(SiS_P3c4,0x1A,SR1A);   */
multiline_comment|/* SetDRAMConfig end */
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
multiline_comment|/* For SiS 300 Chip  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;bSkipDramSizing
op_eq
id|TRUE
)paren
(brace
multiline_comment|/*       SiS_SetDRAMModeRegister(ROMAddr);&n;         temp = (HwDeviceExtension-&gt;pSR)-&gt;jVal;&n;         SiS_SetReg1(SiS_P3c4,0x13,temp);&n;         temp = (HwDeviceExtension-&gt;pSR)-&gt;jVal;&n;         SiS_SetReg1(SiS_P3c4,0x14,temp);   */
)brace
r_else
(brace
macro_line|#ifdef TC
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
l_int|0xFF
comma
l_int|0x04
)paren
suffix:semicolon
macro_line|#else
id|SiS_SetDRAMSize_300
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetDRAMSize_300
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
multiline_comment|/* For SiS 630/540/730 Chip  */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
multiline_comment|/* SetDRAMConfig begin */
multiline_comment|/*     SiS_SetReg1(SiS_P3c4,0x12,SR12);&n;       SiS_SetReg1(SiS_P3c4,0x13,SR13);&n;       SiS_SetReg1(SiS_P3c4,0x14,SR14);&n;       SiS_SetReg1(SiS_P3c4,0x16,SR16);&n;       SiS_SetReg1(SiS_P3c4,0x17,SR17);&n;       SiS_SetReg1(SiS_P3c4,0x18,SR18);&n;       SiS_SetReg1(SiS_P3c4,0x19,SR19);&n;       SiS_SetReg1(SiS_P3c4,0x1A,SR1A);    */
multiline_comment|/* SetDRAMConfig end */
)brace
multiline_comment|/* SetDRAMSize end */
macro_line|#endif
multiline_comment|/*   SetDefExt2Regs begin  */
multiline_comment|/* AGP=1;&n;   temp=(UCHAR)SiS_GetReg1(SiS_P3c4,0x3A);&n;   temp=temp&amp;0x30;&n;   if(temp==0x30) AGP=0;&n;   if(AGP==0) *pSiS_SR21=*pSiS_SR21&amp;0xEF;&n;   SiS_SetReg1(SiS_P3c4,0x21,*pSiS_SR21);&n;   if(AGP==1) *pSiS_SR22=*pSiS_SR22&amp;0x20;&n;   SiS_SetReg1(SiS_P3c4,0x22,*pSiS_SR22);  */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
op_star
id|pSiS_SR21
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x22
comma
op_star
id|pSiS_SR22
)paren
suffix:semicolon
multiline_comment|/*   SetDefExt2Regs end  */
multiline_comment|/* SiS_SetReg3(SiS_P3c6,0xff);&n;   SiS_ClearDAC(SiS_P3c8);        [ynlai] 05/22/01            */
id|SiS_DetectMonitor
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_GetSenseStatus
(paren
id|HwDeviceExtension
comma
id|ROMAddr
)paren
suffix:semicolon
multiline_comment|/* sense CRT2 */
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_Set_LVDS_TRUMPION
id|SiS_Set_LVDS_TRUMPION
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0xE0
)paren
op_rshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
l_int|0xF1
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|0
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|1
)paren
)paren
(brace
multiline_comment|/* for 301 */
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|5
)paren
)paren
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|4
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|5
)paren
)paren
id|SiS_IF_DEF_CH7005
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#else
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
multiline_comment|/* 09/03/01 chiawen for 650 */
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#endif
)brace
multiline_comment|/* ===============  for 300 dram sizing begin  =============== */
macro_line|#ifdef CONFIG_FB_SIS_300
r_void
DECL|function|SiS_SetDRAMSize_300
id|SiS_SetDRAMSize_300
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
multiline_comment|/*ULONG   ROMAddr  = (ULONG)HwDeviceExtension-&gt;pjVirtualRomBase; */
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
multiline_comment|/*USHORT  BaseAddr = (USHORT)HwDeviceExtension-&gt;ulIOAddress; */
id|USHORT
id|SR13
comma
id|SR14
op_assign
l_int|0
comma
id|buswidth
comma
id|Done
suffix:semicolon
id|SHORT
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|data
comma
id|TotalCapacity
comma
id|PhysicalAdrOtherPage
op_assign
l_int|0
suffix:semicolon
id|ULONG
id|Addr
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_int
id|PseudoRankCapacity
comma
id|PseudoTotalCapacity
comma
id|PseudoAdrPinCount
suffix:semicolon
r_int
id|RankCapacity
comma
id|AdrPinCount
comma
id|BankNumHigh
comma
id|BankNumMid
comma
id|MB2Bank
suffix:semicolon
multiline_comment|/*int PageCapacity,PhysicalAdrHigh,PhysicalAdrHalfPage,PhysicalAdrAnotherPage; */
r_int
id|PageCapacity
comma
id|PhysicalAdrHigh
comma
id|PhysicalAdrHalfPage
suffix:semicolon
id|SiSSetMode
(paren
id|HwDeviceExtension
comma
l_int|0x2e
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* Turn OFF Display  */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0xBF
)paren
suffix:semicolon
id|buswidth
op_assign
id|SiS_ChkBUSWidth_300
(paren
id|FBAddr
)paren
suffix:semicolon
id|MB2Bank
op_assign
l_int|16
suffix:semicolon
id|Done
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|6
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
r_break
suffix:semicolon
id|PseudoRankCapacity
op_assign
l_int|1
op_lshift
id|i
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|4
suffix:semicolon
id|j
op_ge
l_int|1
suffix:semicolon
id|j
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
r_break
suffix:semicolon
id|PseudoTotalCapacity
op_assign
id|PseudoRankCapacity
op_star
id|j
suffix:semicolon
id|PseudoAdrPinCount
op_assign
l_int|15
op_minus
id|j
suffix:semicolon
r_if
c_cond
(paren
id|PseudoTotalCapacity
op_le
l_int|64
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
op_le
l_int|16
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
r_break
suffix:semicolon
id|RankCapacity
op_assign
id|buswidth
op_star
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|3
)braket
suffix:semicolon
id|AdrPinCount
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|2
)braket
op_plus
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|RankCapacity
op_eq
id|PseudoRankCapacity
)paren
r_if
c_cond
(paren
id|AdrPinCount
op_le
id|PseudoAdrPinCount
)paren
(brace
r_if
c_cond
(paren
id|j
op_eq
l_int|3
)paren
(brace
multiline_comment|/* Rank No */
id|BankNumHigh
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
l_int|3
op_minus
l_int|1
suffix:semicolon
id|BankNumMid
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
l_int|1
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|BankNumHigh
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
id|j
op_minus
l_int|1
suffix:semicolon
id|BankNumMid
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
id|j
op_div
l_int|2
op_minus
l_int|1
suffix:semicolon
)brace
id|PageCapacity
op_assign
(paren
l_int|1
op_lshift
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|1
)braket
)paren
op_star
id|buswidth
op_star
l_int|4
suffix:semicolon
id|PhysicalAdrHigh
op_assign
id|BankNumHigh
suffix:semicolon
id|PhysicalAdrHalfPage
op_assign
(paren
id|PageCapacity
op_div
l_int|2
op_plus
id|PhysicalAdrHigh
)paren
op_mod
id|PageCapacity
suffix:semicolon
id|PhysicalAdrOtherPage
op_assign
id|PageCapacity
op_star
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|2
)braket
op_plus
id|PhysicalAdrHigh
suffix:semicolon
multiline_comment|/* Write data */
multiline_comment|/*Test */
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
(paren
id|USHORT
)paren
(paren
id|temp
op_amp
l_int|0xFB
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
(paren
id|USHORT
)paren
(paren
id|temp
op_or
l_int|0x04
)paren
)paren
suffix:semicolon
multiline_comment|/*Test */
id|TotalCapacity
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|3
)braket
op_star
id|buswidth
suffix:semicolon
id|SR13
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|4
)paren
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|2
)paren
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|1
)paren
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x00
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|PhysicalAdrHigh
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumMid
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|BankNumMid
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHalfPage
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|PhysicalAdrHalfPage
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrOtherPage
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
id|PhysicalAdrOtherPage
suffix:semicolon
multiline_comment|/* Read data */
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
id|data
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
id|PhysicalAdrHigh
)paren
id|Done
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* if struct */
)brace
multiline_comment|/* for loop (k) */
)brace
multiline_comment|/* if struct */
)brace
multiline_comment|/* for loop (j) */
)brace
multiline_comment|/* for loop (i) */
)brace
id|USHORT
DECL|function|SiS_ChkBUSWidth_300
id|SiS_ChkBUSWidth_300
(paren
id|ULONG
id|FBAddress
)paren
(brace
multiline_comment|/*USHORT  data; */
id|PULONG
id|pVideoMemory
suffix:semicolon
id|pVideoMemory
op_assign
(paren
id|PULONG
)paren
id|FBAddress
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|3
)braket
op_eq
l_int|0xCDEF0123L
)paren
(brace
multiline_comment|/*ChannelA128Bit */
r_return
(paren
l_int|4
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
multiline_comment|/*ChannelB64Bit */
r_return
(paren
l_int|2
)paren
suffix:semicolon
)brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ===============  for 300 dram sizing end    =============== */
multiline_comment|/* ============== alan ====================== */
macro_line|#ifdef CONFIG_FB_SIS_315
id|UCHAR
DECL|function|SiS_Get310DRAMType
id|SiS_Get310DRAMType
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
multiline_comment|/* &n;&t;   index=SiS_GetReg1(SiS_P3c4,0x1A);&n;&t;   index=index&amp;07;&n;&t; */
r_if
c_cond
(paren
op_star
id|pSiS_SoftSetting
op_amp
id|SoftDRAMType
)paren
id|data
op_assign
op_star
id|pSiS_SoftSetting
op_amp
l_int|0x03
suffix:semicolon
r_else
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3a
)paren
op_amp
l_int|0x03
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
r_void
DECL|function|SiS_Delay15us
id|SiS_Delay15us
(paren
id|ULONG
id|ulMicrsoSec
)paren
(brace
)brace
r_void
DECL|function|SiS_SDR_MRS
id|SiS_SDR_MRS
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0x3F
suffix:semicolon
multiline_comment|/*/ SR16 D7=0,D6=0 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/*/ enable mode register set(MRS) low */
id|SiS_Delay15us
(paren
l_int|0x100
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/*/ SR16 D7=1,D6=0 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/*/ enable mode register set(MRS) high */
id|SiS_Delay15us
(paren
l_int|0x100
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DDR_MRS
id|SiS_DDR_MRS
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
multiline_comment|/* SR16 &lt;- 1F,DF,2F,AF */
multiline_comment|/* enable DLL of DDR SD/SGRAM , SR16 D4=1 */
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
id|data
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
op_amp
l_int|0x10
)paren
)paren
(brace
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
)brace
multiline_comment|/* SR16 D7=1,D6=1 */
id|data
op_or_assign
l_int|0xC0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* SR16 D7=1,D6=0,D5=1,D4=0 */
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
id|data
op_or_assign
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
op_amp
l_int|0x10
)paren
)paren
(brace
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
)brace
multiline_comment|/* SR16 D7=1 */
id|data
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDRAMModeRegister
id|SiS_SetDRAMModeRegister
(paren
id|ULONG
id|ROMAddr
)paren
(brace
r_if
c_cond
(paren
id|SiS_Get310DRAMType
(paren
id|ROMAddr
)paren
OL
l_int|2
)paren
(brace
id|SiS_SDR_MRS
(paren
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* SR16 &lt;- 0F,CF,0F,8F */
id|SiS_DDR_MRS
(paren
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_DisableRefresh
id|SiS_DisableRefresh
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF8
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|data
op_or_assign
l_int|0x03
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_EnableRefresh
id|SiS_EnableRefresh
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SiS_SR15
(braket
l_int|2
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* SR17 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SiS_SR15
(braket
l_int|4
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* SR19 */
)brace
r_void
DECL|function|SiS_DisableChannelInterleaving
id|SiS_DisableChannelInterleaving
(paren
r_int
id|index
comma
id|USHORT
id|SiS_DDRDRAM_TYPE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0x1F
suffix:semicolon
r_switch
c_cond
(paren
id|SiS_DDRDRAM_TYPE
(braket
id|index
)braket
(braket
l_int|3
)braket
)paren
(brace
r_case
l_int|64
suffix:colon
id|data
op_or_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|data
op_or_assign
l_int|0x20
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|data
op_or_assign
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|data
op_or_assign
l_int|0x60
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDRAMSizingType
id|SiS_SetDRAMSizingType
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|4
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay 50 ns */
)brace
r_void
DECL|function|SiS_CheckBusWidth_310
id|SiS_CheckBusWidth_310
(paren
id|ULONG
id|ROMAddress
comma
id|ULONG
id|FBAddress
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|PULONG
r_volatile
id|pVideoMemory
suffix:semicolon
id|pVideoMemory
op_assign
(paren
id|PULONG
)paren
id|FBAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Get310DRAMType
(paren
id|ROMAddress
)paren
OL
l_int|2
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x12
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_SDR_MRS
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|128
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xFFFFFFFFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xFFFFFFFFL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|3
)braket
op_ne
l_int|0xCDEF0123L
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|2
)braket
op_ne
l_int|0x89ABCDEFL
)paren
)paren
(brace
multiline_comment|/*ChannelA64Bit */
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
(paren
id|USHORT
)paren
(paren
id|data
op_amp
l_int|0xFD
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_ne
l_int|0x456789ABL
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_ne
l_int|0x01234567L
)paren
)paren
(brace
multiline_comment|/*ChannelB64Bit */
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|1
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
(paren
id|USHORT
)paren
(paren
(paren
id|data
op_amp
l_int|0xFD
)paren
op_or
l_int|0x01
)paren
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* DDR Dual channel */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/* Channel A, 64bit */
multiline_comment|/* should delay */
id|SiS_DDR_MRS
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel A 64bit */
r_return
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel A 32bit */
id|SiS_DataBusWidth
op_assign
l_int|32
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x00
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Channel B, 64bit */
id|SiS_DDR_MRS
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|1
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
multiline_comment|/* Channel B 64 */
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel B 64bit */
r_return
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* error */
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel B 32 */
id|SiS_DataBusWidth
op_assign
l_int|32
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* error */
)brace
)brace
)brace
)brace
r_int
DECL|function|SiS_SetRank
id|SiS_SetRank
(paren
r_int
id|index
comma
id|UCHAR
id|RankNo
comma
id|UCHAR
id|SiS_ChannelAB
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
r_int
id|RankSize
suffix:semicolon
r_if
c_cond
(paren
(paren
id|RankNo
op_eq
l_int|2
)paren
op_logical_and
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_eq
l_int|2
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|RankSize
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|3
)braket
op_div
l_int|2
op_star
id|SiS_DataBusWidth
op_div
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|RankNo
op_star
id|RankSize
op_le
l_int|128
)paren
(brace
id|data
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|RankSize
op_rshift_assign
l_int|1
)paren
OG
l_int|0
)paren
(brace
id|data
op_add_assign
l_int|0x10
suffix:semicolon
)brace
id|data
op_or_assign
(paren
id|RankNo
op_minus
l_int|1
)paren
op_lshift
l_int|2
suffix:semicolon
id|data
op_or_assign
(paren
id|SiS_DataBusWidth
op_div
l_int|64
)paren
op_amp
l_int|2
suffix:semicolon
id|data
op_or_assign
id|SiS_ChannelAB
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_SDR_MRS
(paren
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_SetDDRChannel
id|SiS_SetDDRChannel
(paren
r_int
id|index
comma
id|UCHAR
id|ChannelNo
comma
id|UCHAR
id|SiS_ChannelAB
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
r_int
id|RankSize
suffix:semicolon
id|RankSize
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|3
)braket
op_div
l_int|2
op_star
id|SiS_DataBusWidth
op_div
l_int|32
suffix:semicolon
multiline_comment|/* RankSize = DRAMTYPE_TABLE[index][3]; */
r_if
c_cond
(paren
id|ChannelNo
op_star
id|RankSize
op_le
l_int|128
)paren
(brace
id|data
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|RankSize
op_rshift_assign
l_int|1
)paren
OG
l_int|0
)paren
(brace
id|data
op_add_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ChannelNo
op_eq
l_int|2
)paren
id|data
op_or_assign
l_int|0x0C
suffix:semicolon
id|data
op_or_assign
(paren
id|SiS_DataBusWidth
op_div
l_int|32
)paren
op_amp
l_int|2
suffix:semicolon
id|data
op_or_assign
id|SiS_ChannelAB
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_DDR_MRS
(paren
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckColumn
id|SiS_CheckColumn
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
multiline_comment|/*Increment = 1&lt;&lt;(DRAMTYPE_TABLE[index][2] + SiS_DataBusWidth / 64 + 1); */
id|Increment
op_assign
l_int|1
op_lshift
(paren
l_int|10
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckBanks
id|SiS_CheckBanks
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    FBAddress[Position]=Position; */
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckRank
id|SiS_CheckRank
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|1
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
id|RankNo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    FBAddress[Position]=Position; */
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
multiline_comment|/* *((PULONG)(FBAddress))=Position; */
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
multiline_comment|/*if ( (*(PULONG) (FBAddress )) !=Position) */
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckDDRRank
id|SiS_CheckDDRRank
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|USHORT
id|data
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|1
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
id|RankNo
)paren
suffix:semicolon
id|Increment
op_add_assign
id|Increment
op_div
l_int|2
suffix:semicolon
id|Position
op_assign
l_int|0
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|0
)paren
)paren
op_assign
l_int|0x01234567
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|1
)paren
)paren
op_assign
l_int|0x456789AB
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|2
)paren
)paren
op_assign
l_int|0x55555555
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|3
)paren
)paren
op_assign
l_int|0x55555555
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|4
)paren
)paren
op_assign
l_int|0xAAAAAAAA
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|5
)paren
)paren
op_assign
l_int|0xAAAAAAAA
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
l_int|1
)paren
)paren
op_eq
l_int|0x456789AB
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
l_int|0
)paren
)paren
op_eq
l_int|0x01234567
)paren
r_return
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF3
suffix:semicolon
id|data
op_or_assign
l_int|0x08
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|data
op_add_assign
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
id|data
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckRanks
id|SiS_CheckRanks
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|r
suffix:semicolon
r_for
c_loop
(paren
id|r
op_assign
id|RankNo
suffix:semicolon
id|r
op_ge
l_int|1
suffix:semicolon
id|r
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckRank
(paren
id|r
comma
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckBanks
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckColumn
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckDDRRanks
id|SiS_CheckDDRRanks
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|r
suffix:semicolon
r_for
c_loop
(paren
id|r
op_assign
id|RankNo
suffix:semicolon
id|r
op_ge
l_int|1
suffix:semicolon
id|r
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckDDRRank
(paren
id|r
comma
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckBanks
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckColumn
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_SDRSizing
id|SiS_SDRSizing
(paren
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|UCHAR
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|13
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetDRAMSizingType
(paren
id|i
comma
id|SiS_SDRDRAM_TYPE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|2
suffix:semicolon
id|j
OG
l_int|0
suffix:semicolon
id|j
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_SetRank
(paren
id|i
comma
(paren
id|UCHAR
)paren
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_SDRDRAM_TYPE
)paren
)paren
r_continue
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_CheckRanks
(paren
id|j
comma
id|i
comma
id|SiS_SDRDRAM_TYPE
comma
id|FBAddress
)paren
)paren
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_DDRSizing
id|SiS_DDRSizing
(paren
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|UCHAR
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetDRAMSizingType
(paren
id|i
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
id|SiS_DisableChannelInterleaving
(paren
id|i
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|2
suffix:semicolon
id|j
OG
l_int|0
suffix:semicolon
id|j
op_decrement
)paren
(brace
id|SiS_SetDDRChannel
(paren
id|i
comma
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_SetRank
(paren
id|i
comma
(paren
id|UCHAR
)paren
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_DDRDRAM_TYPE
)paren
)paren
r_continue
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_CheckDDRRanks
(paren
id|j
comma
id|i
comma
id|SiS_DDRDRAM_TYPE
comma
id|FBAddress
)paren
)paren
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;&n; check if read cache pointer is correct&n;&n;*/
r_void
DECL|function|SiS_VerifyMclk
id|SiS_VerifyMclk
(paren
id|ULONG
id|FBAddr
)paren
(brace
id|PUCHAR
id|pVideoMemory
op_assign
(paren
id|PUCHAR
)paren
id|FBAddr
suffix:semicolon
id|UCHAR
id|i
comma
id|j
suffix:semicolon
id|USHORT
id|Temp
comma
id|SR21
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0xaa
suffix:semicolon
multiline_comment|/* alan */
id|pVideoMemory
(braket
l_int|16
)braket
op_assign
l_int|0x55
suffix:semicolon
multiline_comment|/* note: PCI read cache is off */
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_ne
l_int|0xaa
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|16
)braket
op_ne
l_int|0x55
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
comma
id|j
op_add_assign
l_int|16
)paren
(brace
id|SR21
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|Temp
op_assign
id|SR21
op_amp
l_int|0xFB
suffix:semicolon
multiline_comment|/* disable PCI post write buffer empty gating */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3C
)paren
suffix:semicolon
id|Temp
op_assign
id|Temp
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/*MCLK reset */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3C
comma
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3C
)paren
suffix:semicolon
id|Temp
op_assign
id|Temp
op_amp
l_int|0xFE
suffix:semicolon
multiline_comment|/* MCLK normal operation */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3C
comma
id|Temp
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
id|SR21
)paren
suffix:semicolon
id|pVideoMemory
(braket
l_int|16
op_plus
id|j
)braket
op_assign
id|j
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|16
op_plus
id|j
)braket
op_eq
id|j
)paren
(brace
id|pVideoMemory
(braket
id|j
)braket
op_assign
id|j
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
r_int
DECL|function|Is315E
id|Is315E
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x5F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x10
)paren
r_return
l_int|1
suffix:semicolon
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDRAMSize_310
id|SiS_SetDRAMSize_310
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|ULONG
id|ROMAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
multiline_comment|/*USHORT  BaseAddr = (USHORT)HwDeviceExtension-&gt;ulIOAddress; */
id|USHORT
id|data
suffix:semicolon
macro_line|#ifdef SIS301
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x30,0x40);   */
macro_line|#endif
macro_line|#ifdef SIS302
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x30
comma
l_int|0x4D
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x31
comma
l_int|0xc0
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x34
comma
l_int|0x3F
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
macro_line|#endif
id|SiSSetMode
(paren
id|HwDeviceExtension
comma
l_int|0x2e
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
(paren
id|USHORT
)paren
(paren
id|data
op_amp
l_int|0xDF
)paren
)paren
suffix:semicolon
multiline_comment|/* disable read cache */
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* Turn OFF Display */
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
(paren
id|USHORT
)paren
(paren
id|data
op_or
l_int|0x0F
)paren
)paren
suffix:semicolon
multiline_comment|/* assume lowest speed DRAM */
id|SiS_SetDRAMModeRegister
(paren
id|ROMAddr
)paren
suffix:semicolon
id|SiS_DisableRefresh
(paren
)paren
suffix:semicolon
id|SiS_CheckBusWidth_310
(paren
id|ROMAddr
comma
id|FBAddr
)paren
suffix:semicolon
id|SiS_VerifyMclk
(paren
id|FBAddr
)paren
suffix:semicolon
multiline_comment|/* alan 2000/7/3 */
r_if
c_cond
(paren
id|SiS_Get310DRAMType
(paren
id|ROMAddr
)paren
OL
l_int|2
)paren
(brace
id|SiS_SDRSizing
(paren
id|FBAddr
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_DDRSizing
(paren
id|FBAddr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Is315E
(paren
)paren
)paren
(brace
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0x0C
)paren
op_eq
l_int|0x0C
)paren
(brace
multiline_comment|/* dual channel */
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0xF0
)paren
OG
l_int|0x40
)paren
id|data
op_assign
(paren
id|data
op_amp
l_int|0x0F
)paren
op_or
l_int|0x40
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* single channel */
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0xF0
)paren
OG
l_int|0x50
)paren
id|data
op_assign
(paren
id|data
op_amp
l_int|0x0F
)paren
op_or
l_int|0x50
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* restore SR16 */
id|SiS_EnableRefresh
(paren
id|ROMAddr
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
(paren
id|USHORT
)paren
(paren
id|data
op_or
l_int|0x20
)paren
)paren
suffix:semicolon
multiline_comment|/* enable read cache */
)brace
macro_line|#endif
r_void
DECL|function|SiS_SetMemoryClock
id|SiS_SetMemoryClock
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x28
comma
id|SiS_MCLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR28
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x29
comma
id|SiS_MCLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR29
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2A
comma
id|SiS_MCLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR2A
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2E
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR2E
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2F
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR2F
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x30
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR30
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
id|Is315E
(paren
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x28
comma
l_int|0x3B
)paren
suffix:semicolon
multiline_comment|/* 143 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x29
comma
l_int|0x22
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2E
comma
l_int|0x3B
)paren
suffix:semicolon
multiline_comment|/* 143 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2F
comma
l_int|0x22
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
multiline_comment|/*&n;=========================================&n; ======== SiS SetMode Function  ==========&n;=========================================&n;*/
id|BOOLEAN
DECL|function|SiSSetMode
id|SiSSetMode
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
(brace
id|ULONG
id|temp
suffix:semicolon
id|USHORT
id|ModeIdIndex
comma
id|KeepLockReg
suffix:semicolon
id|ULONG
id|ROMAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
multiline_comment|/*ULONG   FBAddr   = (ULONG)HwDeviceExtension-&gt;pjVideoMemoryAddress; */
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
multiline_comment|/* 05/02/01 ynlai for sis550 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
multiline_comment|/* 09/03/01 chiawen for 650 */
id|InitTo310Pointer
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
id|InitTo300Pointer
(paren
)paren
suffix:semicolon
macro_line|#endif
id|SiS_P3c4
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
id|SiS_P3d4
op_assign
id|BaseAddr
op_plus
l_int|0x24
suffix:semicolon
id|SiS_P3c0
op_assign
id|BaseAddr
op_plus
l_int|0x10
suffix:semicolon
id|SiS_P3ce
op_assign
id|BaseAddr
op_plus
l_int|0x1e
suffix:semicolon
id|SiS_P3c2
op_assign
id|BaseAddr
op_plus
l_int|0x12
suffix:semicolon
id|SiS_P3ca
op_assign
id|BaseAddr
op_plus
l_int|0x1a
suffix:semicolon
id|SiS_P3c6
op_assign
id|BaseAddr
op_plus
l_int|0x16
suffix:semicolon
id|SiS_P3c7
op_assign
id|BaseAddr
op_plus
l_int|0x17
suffix:semicolon
id|SiS_P3c8
op_assign
id|BaseAddr
op_plus
l_int|0x18
suffix:semicolon
id|SiS_P3c9
op_assign
id|BaseAddr
op_plus
l_int|0x19
suffix:semicolon
id|SiS_P3da
op_assign
id|BaseAddr
op_plus
l_int|0x2A
suffix:semicolon
id|SiS_Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
id|SiS_Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
id|SiS_Part3Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_12
suffix:semicolon
id|SiS_Part4Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
suffix:semicolon
id|SiS_Part5Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
op_plus
l_int|2
suffix:semicolon
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_HiVision
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_DSTN
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*for 550 dstn */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
multiline_comment|/* 09/03/01 chiawen for 650 */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0E
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|0
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|1
)paren
)paren
(brace
multiline_comment|/* for 301 */
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|5
)paren
)paren
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|4
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|5
)paren
)paren
id|SiS_IF_DEF_CH7005
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH7005
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_amp
l_int|0x80
)paren
(brace
id|ModeNo
op_assign
id|ModeNo
op_amp
l_int|0x7F
suffix:semicolon
id|flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|flag_clearbuffer
op_assign
l_int|1
suffix:semicolon
)brace
id|SiS_PresetScratchregister
(paren
id|SiS_P3d4
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*add for CRT2  */
id|KeepLockReg
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* 1.Openkey */
id|temp
op_assign
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* 2.Get ModeID Table  */
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*301b */
id|SiS_GetVBType
(paren
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/*end 301b */
id|SiS_GetVBInfo301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*add for CRT2 */
id|SiS_GetLCDResInfo301
(paren
id|ROMAddr
comma
id|SiS_P3d4
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/*add for CRT2 */
id|temp
op_assign
id|SiS_CheckMemorySize
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/*3.Check memory size */
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*301b */
id|SiS_SetCRT1Group
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SwitchToCRT2
)paren
)paren
(brace
id|SiS_SetCRT1Group
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*301b */
r_switch
c_cond
(paren
id|HwDeviceExtension-&gt;ujVBChipID
)paren
(brace
multiline_comment|/*karl*/
r_case
id|VB_CHIP_301
suffix:colon
r_case
id|VB_CHIP_301B
suffix:colon
id|SiS_SetCRT2Group301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/*add for CRT2 */
r_break
suffix:semicolon
r_case
id|VB_CHIP_302
suffix:colon
id|SiS_SetCRT2Group301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VB_CHIP_303
suffix:colon
multiline_comment|/*        SetCRT2Group302(BaseAddr,ROMAddr,ModeNo, HwDeviceExtension);                       add for CRT2   */
r_break
suffix:semicolon
r_case
id|VB_CHIP_UNKNOWN
suffix:colon
multiline_comment|/*add for lvds ch7005 */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
(paren
id|ExtChipLVDS
op_or
id|ExtChipTrumpion
op_or
id|ExtChipCH7005
)paren
)paren
(brace
id|SiS_SetCRT2Group301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|KeepLockReg
op_eq
l_int|0xA1
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* 05/02/01 ynlai */
r_else
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x00
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT1Group
id|SiS_SetCRT1Group
(paren
id|ULONG
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|StandTableIndex
comma
id|RefreshRateTableIndex
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x34,ModeNo); */
id|SiS_CRT1Mode
op_assign
id|ModeNo
suffix:semicolon
multiline_comment|/* set CR34-&gt;CRT1 ModeNofor CRT2 FIFO */
id|StandTableIndex
op_assign
id|SiS_GetModePtr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* 4.GetModePtr  */
id|SiS_SetSeqRegs
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
multiline_comment|/* 5.SetSeqRegs  */
id|SiS_SetMiscRegs
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
multiline_comment|/* 6.SetMiscRegs */
id|SiS_SetCRTCRegs
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|StandTableIndex
)paren
suffix:semicolon
multiline_comment|/* 7.SetCRTCRegs */
id|SiS_SetATTRegs
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
multiline_comment|/* 8.SetATTRegs  */
id|SiS_SetGRCRegs
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
multiline_comment|/* 9.SetGRCRegs  */
id|SiS_ClearExt1Regs
(paren
)paren
suffix:semicolon
multiline_comment|/* 10.Clear Ext1Regs */
id|temp
op_assign
op_complement
id|ProgrammingCRT2
suffix:semicolon
multiline_comment|/*       11.GetRatePtr  */
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
id|temp
suffix:semicolon
id|SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
multiline_comment|/*   SiS_SelectCRT2Rate=4; */
)brace
)brace
multiline_comment|/*end 301b */
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* 11.GetRatePtr */
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_SetFlag
op_assign
id|SiS_SetFlag
op_amp
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
id|RefreshRateTableIndex
op_ne
l_int|0xFFFF
)paren
(brace
id|SiS_SetSync
(paren
id|ROMAddr
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
multiline_comment|/* 12.SetSync */
id|SiS_SetCRT1CRTC
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
multiline_comment|/* 13.SetCRT1CRTC  */
id|SiS_SetCRT1Offset
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* 14.SetCRT1Offset */
id|SiS_SetCRT1VCLK
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
multiline_comment|/* 15.SetCRT1VCLK  */
)brace
macro_line|#ifdef CONFIG_FB_SIS_300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
)paren
(brace
id|SiS_SetCRT1FIFO2
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetCRT1FIFO
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SiS_SetCRT1ModeRegs
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
id|SiS_SetVCLKState
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB_SIS_315
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315H
)paren
id|SiS_SetInterlace
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
macro_line|#endif
id|SiS_LoadDAC
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag_clearbuffer
)paren
id|SiS_ClearBuffer
(paren
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
multiline_comment|/*301b */
id|SiS_LongWait
(paren
)paren
suffix:semicolon
id|SiS_DisplayOn
(paren
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_GetVBType
id|SiS_GetVBType
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|2
)paren
id|SiS_VBType
op_assign
id|VB_SIS302B
suffix:semicolon
r_else
(brace
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0xB0
)paren
id|SiS_VBType
op_assign
id|VB_SIS301B
suffix:semicolon
r_else
id|SiS_VBType
op_assign
id|VB_SIS301
suffix:semicolon
id|flag
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x23
)paren
suffix:semicolon
multiline_comment|/*301dlvds */
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x02
)paren
)paren
id|SiS_VBType
op_assign
id|SiS_VBType
op_or
id|VB_NoLCD
suffix:semicolon
)brace
)brace
multiline_comment|/* win2000 MM adapter not support standard mode  */
id|BOOLEAN
DECL|function|SiS_SearchModeID
id|SiS_SearchModeID
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
op_star
id|ModeIdIndex
)paren
(brace
id|PUCHAR
id|VGA_INFO
op_assign
l_string|&quot;&bslash;0x11&quot;
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|5
)paren
id|ModeNo
op_or_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
multiline_comment|/* for (*ModeIdIndex=0;*ModeIdIndex&lt;sizeof(SiS_SModeIDTable)/sizeof(SiS_StStruct);(*ModeIdIndex)++) */
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
id|ModeNo
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#ifdef TC
id|VGA_INFO
op_assign
(paren
id|PUCHAR
)paren
id|MK_FP
(paren
l_int|0
comma
l_int|0x489
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x10
)paren
op_ne
l_int|0
)paren
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|3
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x80
)paren
op_eq
l_int|0
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x10
)paren
op_ne
l_int|0
)paren
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
suffix:semicolon
multiline_comment|/* 400 lines  */
multiline_comment|/* else 350 lines  */
)brace
multiline_comment|/* else 200 lines  */
)brace
)brace
r_else
(brace
multiline_comment|/* for (*ModeIdIndex=0;*ModeIdIndex&lt;sizeof(SiS_EModeIDTable)/sizeof(SiS_ExtStruct);(*ModeIdIndex)++) */
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
id|ModeNo
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/*add for 300 oem util for search VBModeID*/
id|BOOLEAN
DECL|function|SiS_SearchVBModeID
id|SiS_SearchVBModeID
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
singleline_comment|// PUCHAR VGA_INFO;
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|5
)paren
id|ModeNo
op_or_assign
l_int|1
suffix:semicolon
multiline_comment|/* for (ModeIdIndex=0;ModeIdIndex&lt;sizeof(SiS_SModeIDTable)/sizeof(SiS_StStruct);(*ModeIdIndex)++) */
r_for
c_loop
(paren
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
id|ModeNo
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
macro_line|#ifdef TC
id|VGA_INFO
op_assign
(paren
id|PUCHAR
)paren
id|MK_FP
(paren
l_int|0
comma
l_int|0x489
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x10
)paren
op_ne
l_int|0
)paren
(paren
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|3
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x80
)paren
op_eq
l_int|0
)paren
(brace
(paren
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
id|VGA_INFO
op_amp
l_int|0x10
)paren
op_ne
l_int|0
)paren
(paren
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
suffix:semicolon
multiline_comment|/* 400 lines  */
multiline_comment|/* else 350 lines  */
)brace
multiline_comment|/* else 200 lines  */
)brace
macro_line|#endif
r_return
(paren
(paren
id|BOOLEAN
)paren
id|ModeIdIndex
)paren
suffix:semicolon
)brace
multiline_comment|/*end*/
multiline_comment|/* win2000 MM adapter not support standard mode!  */
id|BOOLEAN
DECL|function|SiS_CheckMemorySize
id|SiS_CheckMemorySize
(paren
id|ULONG
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|memorysize
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
multiline_comment|/*  ModeType=modeflag&amp;ModeInfoFlag;                           Get mode type  */
id|memorysize
op_assign
id|modeflag
op_amp
id|MemoryInfoFlag
suffix:semicolon
id|memorysize
op_assign
id|memorysize
OG
id|MemorySizeShift
suffix:semicolon
id|memorysize
op_increment
suffix:semicolon
multiline_comment|/* Get memory size */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* Get DRAM Size    */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
id|temp
op_assign
l_int|1
op_lshift
(paren
(paren
id|temp
op_amp
l_int|0x0F0
)paren
op_rshift
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x0c
)paren
op_eq
l_int|0x08
)paren
(brace
multiline_comment|/* DDR asymetric */
id|temp
op_add_assign
id|temp
op_div
l_int|2
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x0c
)paren
op_ne
l_int|0
)paren
(brace
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* 300, 540 , 630 */
id|temp
op_assign
id|temp
op_amp
l_int|0x3F
suffix:semicolon
id|temp
op_increment
suffix:semicolon
multiline_comment|/*  temp=1 &lt;&lt; ((temp&amp;0x0F0)&gt;&gt;4); */
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
multiline_comment|/* 05/02/01 ynlai for sis550 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
multiline_comment|/* 08/20/01 chiawen for 640/740 */
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
)paren
(brace
multiline_comment|/* 09/03/01 chiawen for 650 */
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
OL
id|memorysize
)paren
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_else
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
id|UCHAR
DECL|function|SiS_GetModePtr
id|SiS_GetModePtr
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_StTableIndex
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_ModeType
op_le
l_int|0x02
)paren
id|index
op_assign
l_int|0x1B
suffix:semicolon
multiline_comment|/* 02 -&gt; ModeEGA  */
r_else
id|index
op_assign
l_int|0x0F
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
multiline_comment|/* Get SiS_StandTable index  */
)brace
r_void
DECL|function|SiS_SetSeqRegs
id|SiS_SetSeqRegs
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|SRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x00
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Set SR0  */
id|SRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SRdata
op_assign
id|SRdata
op_or
l_int|0x01
suffix:semicolon
)brace
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_assign
id|SRdata
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_assign
id|SRdata
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
id|SRdata
op_assign
id|SRdata
op_or
l_int|0x20
suffix:semicolon
multiline_comment|/* screen off  */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|SRdata
)paren
suffix:semicolon
multiline_comment|/* Set SR1 */
r_for
c_loop
(paren
id|i
op_assign
l_int|02
suffix:semicolon
id|i
op_le
l_int|04
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
multiline_comment|/* Get SR2,3,4 from file */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
id|SRdata
)paren
suffix:semicolon
multiline_comment|/* Set SR2 3 4 */
)brace
)brace
r_void
DECL|function|SiS_SetMiscRegs
id|SiS_SetMiscRegs
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|Miscdata
suffix:semicolon
id|Miscdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|MISC
suffix:semicolon
multiline_comment|/* Get Misc from file */
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|Miscdata
op_assign
id|Miscdata
op_or
l_int|0x0C
suffix:semicolon
)brace
)brace
multiline_comment|/*end 301b */
id|SiS_SetReg3
(paren
id|SiS_P3c2
comma
id|Miscdata
)paren
suffix:semicolon
multiline_comment|/* Set Misc(3c2) */
)brace
r_void
DECL|function|SiS_SetCRTCRegs
id|SiS_SetCRTCRegs
(paren
id|ULONG
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|CRTCdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|CRTCdata
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
id|CRTCdata
op_assign
id|CRTCdata
op_amp
l_int|0x7f
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
id|CRTCdata
)paren
suffix:semicolon
multiline_comment|/* Unlock CRTC */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x18
suffix:semicolon
id|i
op_increment
)paren
(brace
id|CRTCdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* Get CRTC from file */
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|CRTCdata
)paren
suffix:semicolon
multiline_comment|/* Set CRTC(3d4) */
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_eq
l_int|0x30
)paren
)paren
(brace
multiline_comment|/* for 630S0 */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToTV
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x18
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_void
DECL|function|SiS_SetATTRegs
id|SiS_SetATTRegs
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|ARdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x13
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ARdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|ATTR
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* Get AR for file  */
multiline_comment|/*301b */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
l_int|0x13
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*end 301b */
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
multiline_comment|/*for LVDS  */
r_if
c_cond
(paren
id|SiS_IF_DEF_CH7005
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
l_int|0x13
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
l_int|0x13
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetReg3
(paren
id|SiS_P3c0
comma
id|i
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetReg3
(paren
id|SiS_P3c0
comma
id|ARdata
)paren
suffix:semicolon
multiline_comment|/* set data   */
)brace
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetReg3
(paren
id|SiS_P3c0
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetReg3
(paren
id|SiS_P3c0
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* set data   */
id|SiS_GetReg2
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* Enable Attribute  */
id|SiS_SetReg3
(paren
id|SiS_P3c0
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetGRCRegs
id|SiS_SetGRCRegs
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|GRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x08
suffix:semicolon
id|i
op_increment
)paren
(brace
id|GRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|GRC
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* Get GR from file */
id|SiS_SetReg1
(paren
id|SiS_P3ce
comma
id|i
comma
id|GRdata
)paren
suffix:semicolon
multiline_comment|/* Set GR(3ce) */
)brace
r_if
c_cond
(paren
id|SiS_ModeType
OG
id|ModeVGA
)paren
(brace
id|GRdata
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3ce
comma
l_int|0x05
)paren
suffix:semicolon
id|GRdata
op_assign
id|GRdata
op_amp
l_int|0xBF
suffix:semicolon
multiline_comment|/* 256 color disable */
id|SiS_SetReg1
(paren
id|SiS_P3ce
comma
l_int|0x05
comma
id|GRdata
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_ClearExt1Regs
id|SiS_ClearExt1Regs
(paren
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|0x0E
suffix:semicolon
id|i
op_increment
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* Clear SR0A-SR0E */
)brace
r_void
DECL|function|SiS_SetSync
id|SiS_SetSync
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|sync
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|sync
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_rshift
l_int|8
suffix:semicolon
multiline_comment|/* di+0x00 */
id|sync
op_assign
id|sync
op_amp
l_int|0xC0
suffix:semicolon
id|temp
op_assign
l_int|0x2F
suffix:semicolon
id|temp
op_assign
id|temp
op_or
id|sync
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c2
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Set Misc(3c2) */
)brace
r_void
DECL|function|SiS_SetCRT1CRTC
id|SiS_SetCRT1CRTC
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
id|UCHAR
id|data
suffix:semicolon
id|USHORT
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
id|SiS_LCDACRT1DataStruct
op_star
id|LCDACRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/*add crt1ptr */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ResInfo */
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
multiline_comment|/* si+Ext_ResInfo */
)brace
id|temp
op_assign
id|SiS_GetLCDACRT1Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/*case 12: LCDACRT1Ptr = SiS_CHTVCRT1UNTSC;               break;&n;&t;&t;&t;   case 13: LCDACRT1Ptr = SiS_CHTVCRT1ONTSC;               break;&n;&t;&t;&t;   case 14: LCDACRT1Ptr = SiS_CHTVCRT1UPAL;                break;&n;&t;&t;&t;   case 15: LCDACRT1Ptr = SiS_CHTVCRT1OPAL;                break; */
)brace
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
multiline_comment|/*unlock cr0-7  */
id|tempah
op_assign
id|tempah
op_amp
l_int|0x7F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x0
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
multiline_comment|/* for(i=0x06,j=5;i&lt;=0x07;i++,j++){&n;   tempah = (LCDACRT1Ptr+ResInfo)-&gt;CR[j];&n;    SiS_SetReg1(SiS_P3d4,i,tempah);&n;  }*/
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|8
suffix:semicolon
id|i
op_le
l_int|0x12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|13
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0E0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x03
)paren
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x14
comma
l_int|0x4F
)paren
suffix:semicolon
multiline_comment|/*end 301b*/
)brace
r_else
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
multiline_comment|/* Get index */
id|index
op_assign
id|index
op_amp
l_int|0x3F
suffix:semicolon
id|data
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0x7F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* Unlock CRTC */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|data
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|j
comma
id|data
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|10
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|data
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|j
comma
id|data
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|data
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
id|j
comma
id|data
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|15
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|data
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
id|j
comma
id|data
)paren
suffix:semicolon
)brace
id|data
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0xE0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x09
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0xDF
suffix:semicolon
multiline_comment|/* clear CR9 D[5] */
id|i
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|i
op_assign
id|i
op_amp
l_int|0x01
suffix:semicolon
id|i
op_assign
id|i
op_lshift
l_int|5
suffix:semicolon
id|data
op_assign
id|data
op_or
id|i
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|i
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_else
id|i
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|i
op_assign
id|i
op_amp
id|DoubleScanMode
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
id|data
op_assign
id|data
op_or
l_int|0x80
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x03
)paren
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x14
comma
l_int|0x4F
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetCRT1Offset
id|SiS_SetCRT1Offset
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|ah
comma
id|al
suffix:semicolon
id|USHORT
id|temp2
comma
id|i
suffix:semicolon
id|USHORT
id|DisplayUnit
suffix:semicolon
multiline_comment|/* Alan */
id|temp
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeInfo
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|temp
op_assign
id|temp
op_rshift
l_int|8
suffix:semicolon
multiline_comment|/* sis310 */
multiline_comment|/* index */
)brace
r_else
(brace
id|temp
op_assign
id|temp
op_rshift
l_int|4
suffix:semicolon
multiline_comment|/* sis300 */
multiline_comment|/* index */
)brace
id|temp
op_assign
id|SiS_ScreenOffset
(braket
id|temp
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_ge
l_int|0x7C
)paren
op_logical_and
(paren
id|ModeNo
op_le
l_int|0x7E
)paren
)paren
(brace
id|temp
op_assign
l_int|0x6B
suffix:semicolon
id|temp2
op_assign
id|ModeNo
op_minus
l_int|0x7C
suffix:semicolon
)brace
r_else
(brace
id|temp2
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|temp2
op_assign
id|temp2
op_amp
id|InterlaceMode
suffix:semicolon
r_if
c_cond
(paren
id|temp2
)paren
id|temp
op_assign
id|temp
op_lshift
l_int|1
suffix:semicolon
id|temp2
op_assign
id|SiS_ModeType
op_minus
id|ModeEGA
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|temp2
)paren
(brace
r_case
l_int|0
suffix:colon
id|temp2
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|temp2
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|temp2
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|temp2
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|temp2
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|temp2
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
)brace
id|temp
op_assign
id|temp
op_star
id|temp2
suffix:semicolon
id|DisplayUnit
op_assign
id|temp
suffix:semicolon
id|temp2
op_assign
id|temp
suffix:semicolon
id|temp
op_assign
id|temp
op_rshift
l_int|8
suffix:semicolon
multiline_comment|/* ah */
id|temp
op_assign
id|temp
op_amp
l_int|0x0F
suffix:semicolon
id|i
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
)paren
suffix:semicolon
id|i
op_assign
id|i
op_amp
l_int|0xF0
suffix:semicolon
id|i
op_assign
id|i
op_or
id|temp
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|i
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|temp2
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* al */
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x13
comma
id|temp
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|temp2
op_assign
id|temp2
op_amp
id|InterlaceMode
suffix:semicolon
r_if
c_cond
(paren
id|temp2
)paren
id|DisplayUnit
op_rshift_assign
l_int|1
suffix:semicolon
id|DisplayUnit
op_assign
id|DisplayUnit
op_lshift
l_int|5
suffix:semicolon
id|ah
op_assign
(paren
id|DisplayUnit
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
id|al
op_assign
id|DisplayUnit
op_amp
l_int|0x00ff
suffix:semicolon
r_if
c_cond
(paren
id|al
op_eq
l_int|0
)paren
id|ah
op_assign
id|ah
op_plus
l_int|1
suffix:semicolon
r_else
id|ah
op_assign
id|ah
op_plus
l_int|2
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x10
comma
id|ah
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT1VCLK
id|SiS_SetCRT1VCLK
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|UCHAR
id|index
comma
id|data
suffix:semicolon
id|USHORT
id|vclkindex
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
)paren
op_amp
l_int|0xCF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
r_else
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301B
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302B
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
id|vclkindex
op_assign
id|SiS_GetVCLK2Ptr
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
)paren
op_amp
l_int|0xCF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_A
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_VBVCLKData
(braket
id|vclkindex
)braket
dot
id|Part4_B
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* for300 series */
r_else
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
multiline_comment|/*if(HwDeviceExtension-&gt;jChipType &lt; SIS_315H) { */
id|index
op_assign
id|index
op_amp
l_int|0x3F
suffix:semicolon
multiline_comment|/*} */
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
)paren
op_amp
l_int|0xCF
suffix:semicolon
multiline_comment|/*SiS_SetReg1(SiS_P3c4,0x31,0x00); */
multiline_comment|/* for300 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
id|data
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2C
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
multiline_comment|/* for300 series */
r_else
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
multiline_comment|/* for310 series */
)brace
)brace
r_void
DECL|function|SiS_IsLowResolution
id|SiS_IsLowResolution
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|USHORT
id|ModeFlag
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0F
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0x7F
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|ModeFlag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeFlag
op_amp
id|HalfDCLK
)paren
op_logical_and
(paren
id|ModeFlag
op_amp
id|DoubleScanMode
)paren
)paren
(brace
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0F
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x80
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x01
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0xF7
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|data
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_SetCRT1ModeRegs
id|SiS_SetCRT1ModeRegs
(paren
id|ULONG
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
comma
id|data3
suffix:semicolon
id|USHORT
id|infoflag
op_assign
l_int|0
comma
id|modeflag
suffix:semicolon
id|USHORT
id|resindex
comma
id|xres
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
multiline_comment|/* si+St_ModeFlag */
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
l_int|0x3F
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
id|data
op_assign
id|infoflag
suffix:semicolon
r_else
id|data
op_assign
l_int|0
suffix:semicolon
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x02
)paren
(brace
id|data2
op_assign
id|data2
op_or
l_int|0x02
suffix:semicolon
id|data3
op_assign
id|SiS_ModeType
op_minus
id|ModeVGA
suffix:semicolon
id|data3
op_assign
id|data3
op_lshift
l_int|2
suffix:semicolon
id|data2
op_assign
id|data2
op_or
id|data3
suffix:semicolon
)brace
)brace
id|data
op_assign
id|data
op_amp
id|InterlaceMode
suffix:semicolon
r_if
c_cond
(paren
id|data
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x06
comma
id|data2
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|resindex
op_assign
id|SiS_GetResInfo
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
multiline_comment|/* xres-&gt;ax */
)brace
id|data
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|1024
)paren
id|data
op_assign
l_int|0x0035
suffix:semicolon
r_if
c_cond
(paren
id|xres
op_eq
l_int|1280
)paren
id|data
op_assign
l_int|0x0048
suffix:semicolon
)brace
id|data2
op_assign
id|data
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x19
comma
l_int|0xFF
comma
id|data2
)paren
suffix:semicolon
id|data2
op_assign
(paren
id|data
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x19
comma
l_int|0xFC
comma
id|data2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xFF
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|LineCompareOff
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xF7
comma
l_int|0x08
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xF7
comma
l_int|0x00
)paren
suffix:semicolon
)brace
)brace
id|data
op_assign
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ne
id|ModeText
)paren
(brace
id|data
op_assign
id|data
op_xor
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ne
id|ModeEGA
)paren
(brace
id|data
op_assign
id|data
op_xor
l_int|0xA0
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
l_int|0x1F
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetVCLKState
id|SiS_SetVCLKState
(paren
id|ULONG
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|VCLK
suffix:semicolon
id|UCHAR
id|index
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|VCLK
op_assign
l_int|0
suffix:semicolon
r_else
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
multiline_comment|/*if(HwDeviceExtension-&gt;jChipType &lt; SIS_315H) { */
id|index
op_assign
id|index
op_amp
l_int|0x3F
suffix:semicolon
multiline_comment|/*} */
id|VCLK
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|data2
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
OG
l_int|150
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x80
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
l_int|0x7B
comma
id|data2
)paren
suffix:semicolon
id|data2
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|150
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x08
suffix:semicolon
multiline_comment|/* VCLK &gt; 150 */
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
l_int|0xF7
comma
id|data2
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310 series */
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0xf3
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|200
)paren
id|data
op_assign
id|data
op_or
l_int|0x0c
suffix:semicolon
multiline_comment|/* VCLK &gt; 200 */
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xE7
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
OL
l_int|200
)paren
id|data
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
id|data
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|0
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|135
)paren
)paren
id|data2
op_assign
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|135
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|160
)paren
)paren
id|data2
op_assign
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|160
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|260
)paren
)paren
id|data2
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
OG
l_int|260
)paren
id|data2
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* disable 24bit palette RAM gamma correction  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
(brace
r_if
c_cond
(paren
(paren
id|VCLK
op_eq
l_int|203
)paren
op_logical_or
(paren
id|VCLK
OL
l_int|234
)paren
)paren
id|data2
op_assign
l_int|0x02
suffix:semicolon
)brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
l_int|0xFC
comma
id|data2
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_LoadDAC
id|SiS_LoadDAC
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
suffix:semicolon
id|USHORT
id|time
comma
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|m
comma
id|n
comma
id|o
suffix:semicolon
id|USHORT
id|si
comma
id|di
comma
id|bx
comma
id|dl
suffix:semicolon
id|USHORT
id|al
comma
id|ah
comma
id|dh
suffix:semicolon
id|USHORT
op_star
id|table
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|data
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_else
id|data
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|data
op_assign
id|data
op_amp
id|DACInfoFlag
suffix:semicolon
id|time
op_assign
l_int|64
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x00
)paren
id|table
op_assign
id|SiS_MDA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x08
)paren
id|table
op_assign
id|SiS_CGA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x10
)paren
id|table
op_assign
id|SiS_EGA_DAC
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x18
)paren
(brace
id|time
op_assign
l_int|256
suffix:semicolon
id|table
op_assign
id|SiS_VGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
id|j
op_assign
l_int|16
suffix:semicolon
r_else
id|j
op_assign
id|time
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c8
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|j
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x01
)paren
id|data2
op_assign
l_int|0x2A
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
id|data2
op_assign
id|data2
op_plus
l_int|0x15
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
id|data2
)paren
suffix:semicolon
id|data
op_assign
id|data
op_rshift
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
id|data
)paren
suffix:semicolon
)brace
id|si
op_assign
l_int|32
suffix:semicolon
r_for
c_loop
(paren
id|m
op_assign
l_int|0
suffix:semicolon
id|m
OL
l_int|9
suffix:semicolon
id|m
op_increment
)paren
(brace
id|di
op_assign
id|si
suffix:semicolon
id|bx
op_assign
id|si
op_plus
l_int|0x04
suffix:semicolon
id|dl
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|5
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|si
op_increment
suffix:semicolon
id|SiS_WriteDAC
(paren
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 5 */
id|si
op_assign
id|si
op_minus
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|3
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|si
op_decrement
suffix:semicolon
id|SiS_WriteDAC
(paren
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|dl
op_increment
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|si
op_assign
id|si
op_plus
l_int|5
suffix:semicolon
)brace
multiline_comment|/* for 9 */
)brace
)brace
r_void
DECL|function|SiS_WriteDAC
id|SiS_WriteDAC
(paren
id|USHORT
id|dl
comma
id|USHORT
id|ah
comma
id|USHORT
id|al
comma
id|USHORT
id|dh
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|bh
comma
id|bl
suffix:semicolon
id|bh
op_assign
id|ah
suffix:semicolon
id|bl
op_assign
id|al
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|temp
suffix:semicolon
)brace
)brace
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|dh
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|bh
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|bl
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_ClearBuffer
id|SiS_ClearBuffer
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
(brace
id|PVOID
id|VideoMemoryAddress
op_assign
(paren
id|PVOID
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|ULONG
id|AdapterMemorySize
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;ulVideoMemorySize
suffix:semicolon
id|PUSHORT
id|pBuffer
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ge
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetMemory
(paren
id|VideoMemoryAddress
comma
id|AdapterMemorySize
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|pBuffer
op_assign
id|VideoMemoryAddress
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
id|pBuffer
(braket
id|i
)braket
op_assign
l_int|0x0000
suffix:semicolon
)brace
)brace
r_else
(brace
id|pBuffer
op_assign
id|VideoMemoryAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeCGA
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
id|pBuffer
(braket
id|i
)braket
op_assign
l_int|0x0720
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
id|pBuffer
(braket
id|i
)braket
op_assign
l_int|0x0000
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_DisplayOn
id|SiS_DisplayOn
(paren
r_void
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DisplayOff
id|SiS_DisplayOff
(paren
r_void
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
multiline_comment|/*  SR CRTC GR */
r_void
DECL|function|SiS_SetReg1
id|SiS_SetReg1
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
(paren
id|port
comma
id|index
)paren
suffix:semicolon
id|OutPortByte
(paren
id|port
op_plus
l_int|1
comma
id|data
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      &n;&t;   mov      ax, index                     &n;&t;   mov      bx, data                      &n;&t;   out      dx, al&n;&t;   mov      ax, bx&n;&t;   inc      dx&n;&t;   out      dx, al&n;&t;   }&n;&t; */
)brace
multiline_comment|/* ========================================== */
multiline_comment|/*  AR(3C0) */
r_void
DECL|function|SiS_SetReg2
id|SiS_SetReg2
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
comma
id|USHORT
id|data
)paren
(brace
id|InPortByte
(paren
id|port
op_plus
l_int|0x3da
op_minus
l_int|0x3c0
)paren
suffix:semicolon
id|OutPortByte
(paren
id|SiS_P3c0
comma
id|index
)paren
suffix:semicolon
id|OutPortByte
(paren
id|SiS_P3c0
comma
id|data
)paren
suffix:semicolon
id|OutPortByte
(paren
id|SiS_P3c0
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      &n;&t;   mov      cx, index                     &n;&t;   mov      bx, data                      &n;&n;&t;   add      dx, 3dah-3c0h&n;&t;   in       al, dx&n;&n;&t;   mov      ax, cx&n;&t;   mov      dx, 3c0h&n;&t;   out      dx, al&n;&t;   mov      ax, bx&n;&t;   out      dx, al&n;&n;&t;   mov      ax, 20h&n;&t;   out      dx, al&n;&t;   }&n;&t; */
)brace
multiline_comment|/* ========================================== */
r_void
DECL|function|SiS_SetReg3
id|SiS_SetReg3
(paren
id|USHORT
id|port
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
(paren
id|port
comma
id|data
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      &n;&t;   mov      ax, data                      &n;&t;   out      dx, al&n;&n;&t;   }&n;&t; */
)brace
multiline_comment|/* ========================================== */
r_void
DECL|function|SiS_SetReg4
id|SiS_SetReg4
(paren
id|USHORT
id|port
comma
id|ULONG
id|data
)paren
(brace
id|OutPortLong
(paren
id|port
comma
id|data
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      ;; port&n;&t;   mov      eax, data                      ;; data&n;&t;   out      dx, eax&n;&n;&t;   }&n;&t; */
)brace
multiline_comment|/* ========================================= */
DECL|function|SiS_GetReg1
id|UCHAR
id|SiS_GetReg1
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
id|OutPortByte
(paren
id|port
comma
id|index
)paren
suffix:semicolon
id|data
op_assign
id|InPortByte
(paren
id|port
op_plus
l_int|1
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      ;; port&n;&t;   mov      ax, index                     ;; index&n;&n;&t;   out      dx, al&n;&t;   mov      ax, bx&n;&t;   inc      dx&n;&t;   xor      eax, eax&n;&t;   in       al, dx&n;&t;   mov      data, al&n;&t;   }&n;&t; */
r_return
(paren
id|data
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
DECL|function|SiS_GetReg2
id|UCHAR
id|SiS_GetReg2
(paren
id|USHORT
id|port
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
id|data
op_assign
id|InPortByte
(paren
id|port
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      ;; port&n;&t;   xor      eax, eax&n;&t;   in       al, dx&n;&t;   mov      data, al&n;&t;   }&n;&t; */
r_return
(paren
id|data
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
DECL|function|SiS_GetReg3
id|ULONG
id|SiS_GetReg3
(paren
id|USHORT
id|port
)paren
(brace
id|ULONG
id|data
suffix:semicolon
id|data
op_assign
id|InPortLong
(paren
id|port
)paren
suffix:semicolon
multiline_comment|/*&n;&t;   _asm&n;&t;   {&n;&t;   mov      dx, port                      ;; port&n;&t;   xor      eax, eax&n;&t;   in       eax, dx&n;&t;   mov      data, eax&n;&t;   }&n;&t; */
r_return
(paren
id|data
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
r_void
DECL|function|SiS_ClearDAC
id|SiS_ClearDAC
(paren
id|ULONG
id|port
)paren
(brace
r_int
id|i
suffix:semicolon
id|OutPortByte
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
id|port
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
op_star
l_int|3
suffix:semicolon
id|i
op_increment
)paren
(brace
id|OutPortByte
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*========================================== */
r_void
DECL|function|SiS_SetInterlace
id|SiS_SetInterlace
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|ULONG
id|Temp
suffix:semicolon
id|USHORT
id|data
comma
id|Temp2
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x01
)paren
suffix:semicolon
id|Temp
op_increment
suffix:semicolon
id|Temp
op_assign
id|Temp
op_star
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|Temp
op_eq
l_int|1024
)paren
id|data
op_assign
l_int|0x0035
suffix:semicolon
r_else
r_if
c_cond
(paren
id|Temp
op_eq
l_int|1280
)paren
id|data
op_assign
l_int|0x0048
suffix:semicolon
r_else
id|data
op_assign
l_int|0x0000
suffix:semicolon
id|Temp2
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|Temp2
op_and_assign
id|InterlaceMode
suffix:semicolon
r_if
c_cond
(paren
id|Temp2
op_eq
l_int|0
)paren
id|data
op_assign
l_int|0x0000
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x19
comma
id|data
)paren
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
(paren
id|SiS_P3d4
comma
l_int|0x1A
)paren
suffix:semicolon
id|Temp2
op_assign
(paren
id|USHORT
)paren
(paren
id|Temp
op_amp
l_int|0xFC
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x1A
comma
(paren
id|USHORT
)paren
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x0f
)paren
suffix:semicolon
id|Temp2
op_assign
(paren
id|USHORT
)paren
id|Temp
op_amp
l_int|0xBF
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x37
)paren
id|Temp2
op_assign
id|Temp2
op_or
l_int|0x40
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x1A
comma
(paren
id|USHORT
)paren
id|Temp2
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT1FIFO
id|SiS_SetCRT1FIFO
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3D
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xfe
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3D
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* diable auto-threshold */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
l_int|0x34
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x09
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3D
)paren
suffix:semicolon
id|data
op_or_assign
l_int|0x01
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3D
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
l_int|0xAE
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x09
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF0
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
id|data
)paren
suffix:semicolon
)brace
)brace
id|USHORT
DECL|function|SiS_CalcDelay
id|SiS_CalcDelay
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|key
)paren
(brace
id|USHORT
id|data
comma
id|data2
comma
id|temp0
comma
id|temp1
suffix:semicolon
id|UCHAR
id|ThLowA
(braket
)braket
op_assign
(brace
l_int|61
comma
l_int|3
comma
l_int|52
comma
l_int|5
comma
l_int|68
comma
l_int|7
comma
l_int|100
comma
l_int|11
comma
l_int|43
comma
l_int|3
comma
l_int|42
comma
l_int|5
comma
l_int|54
comma
l_int|7
comma
l_int|78
comma
l_int|11
comma
l_int|34
comma
l_int|3
comma
l_int|37
comma
l_int|5
comma
l_int|47
comma
l_int|7
comma
l_int|67
comma
l_int|11
)brace
suffix:semicolon
id|UCHAR
id|ThLowB
(braket
)braket
op_assign
(brace
l_int|81
comma
l_int|4
comma
l_int|72
comma
l_int|6
comma
l_int|88
comma
l_int|8
comma
l_int|120
comma
l_int|12
comma
l_int|55
comma
l_int|4
comma
l_int|54
comma
l_int|6
comma
l_int|66
comma
l_int|8
comma
l_int|90
comma
l_int|12
comma
l_int|42
comma
l_int|4
comma
l_int|45
comma
l_int|6
comma
l_int|55
comma
l_int|8
comma
l_int|75
comma
l_int|12
)brace
suffix:semicolon
id|UCHAR
id|ThTiming
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_assign
id|data
op_rshift
l_int|6
suffix:semicolon
id|data2
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_rshift
l_int|4
)paren
op_amp
l_int|0x0C
suffix:semicolon
id|data
op_assign
id|data
op_or
id|data2
suffix:semicolon
id|data
op_assign
id|data
OL
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|key
op_eq
l_int|0
)paren
(brace
id|temp0
op_assign
(paren
id|USHORT
)paren
id|ThLowA
(braket
id|data
)braket
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|ThLowA
(braket
id|data
op_plus
l_int|1
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp0
op_assign
(paren
id|USHORT
)paren
id|ThLowB
(braket
id|data
)braket
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|ThLowB
(braket
id|data
op_plus
l_int|1
)braket
suffix:semicolon
)brace
id|data2
op_assign
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x20
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x40
)paren
id|data2
op_assign
id|data2
op_or
l_int|0x04
suffix:semicolon
id|data
op_assign
id|temp1
op_star
id|ThTiming
(braket
id|data2
)braket
op_plus
id|temp0
suffix:semicolon
r_return
(paren
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetCRT1FIFO2
id|SiS_SetCRT1FIFO2
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|i
comma
id|index
comma
id|data
comma
id|VCLK
comma
id|data2
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|ah
comma
id|bl
comma
id|B
suffix:semicolon
id|ULONG
id|eax
suffix:semicolon
id|USHORT
id|ThresholdLow
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|FQBQData
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x21
comma
l_int|0x41
comma
l_int|0x61
comma
l_int|0x81
comma
l_int|0x31
comma
l_int|0x51
comma
l_int|0x71
comma
l_int|0x91
comma
l_int|0xb1
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0x40
comma
l_int|0x60
comma
l_int|0x80
comma
l_int|0x30
comma
l_int|0x50
comma
l_int|0x70
comma
l_int|0x90
comma
l_int|0xb0
comma
l_int|0xFF
)brace
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_ge
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* for300 serial */
id|index
op_assign
id|index
op_amp
l_int|0x3F
suffix:semicolon
)brace
id|VCLK
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|index
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|index
op_assign
id|index
op_amp
l_int|07
suffix:semicolon
id|MCLK
op_assign
id|SiS_MCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|data2
op_assign
id|SiS_ModeType
op_minus
l_int|0x02
suffix:semicolon
r_switch
c_cond
(paren
id|data2
)paren
(brace
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
)brace
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|B
op_assign
(paren
id|SiS_CalcDelay2
(paren
id|ROMAddr
comma
id|FQBQData
(braket
id|i
)braket
)paren
op_star
id|VCLK
op_star
id|colorth
)paren
suffix:semicolon
id|bl
op_assign
id|B
op_div
(paren
l_int|16
op_star
id|MCLK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|B
op_eq
id|bl
op_star
l_int|16
op_star
id|MCLK
)paren
(brace
id|bl
op_assign
id|bl
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|bl
op_assign
id|bl
op_plus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bl
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|FQBQData
(braket
id|i
op_plus
l_int|1
)braket
op_eq
l_int|0xFF
)paren
(brace
id|ThresholdLow
op_assign
l_int|0x13
suffix:semicolon
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|ThresholdLow
op_assign
id|bl
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|FQBQData
(braket
id|i
)braket
op_ne
l_int|0xFF
)paren
suffix:semicolon
)brace
r_else
(brace
id|ThresholdLow
op_assign
l_int|0x02
suffix:semicolon
)brace
id|data2
op_assign
id|FQBQData
(braket
id|i
)braket
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
suffix:semicolon
id|data2
op_assign
id|data2
op_lshift
l_int|24
suffix:semicolon
id|SiS_SetReg4
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_assign
id|eax
op_amp
l_int|0x0f0ffffff
suffix:semicolon
id|eax
op_assign
id|eax
op_or
id|data2
suffix:semicolon
id|SiS_SetReg4
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
id|ah
op_assign
id|ThresholdLow
suffix:semicolon
id|ah
op_assign
id|ah
op_lshift
l_int|4
suffix:semicolon
id|ah
op_assign
id|ah
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
id|ah
)paren
suffix:semicolon
id|data
op_assign
id|ThresholdLow
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0x10
suffix:semicolon
id|data
op_assign
id|data
op_lshift
l_int|1
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xDF
comma
id|data
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3B
comma
l_int|0x09
)paren
suffix:semicolon
id|data
op_assign
id|ThresholdLow
op_plus
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|data
OG
l_int|0x0f
)paren
id|data
op_assign
l_int|0x0f
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
l_int|0x80
comma
id|data
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_CalcDelay2
id|SiS_CalcDelay2
(paren
id|ULONG
id|ROMAddr
comma
id|UCHAR
id|key
)paren
(brace
id|USHORT
id|data
comma
id|index
suffix:semicolon
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
(brace
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|87
comma
l_int|85
comma
l_int|78
comma
l_int|76
comma
l_int|54
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|79
comma
l_int|77
comma
l_int|70
comma
l_int|68
comma
l_int|48
comma
multiline_comment|/*; 128 bit    BQ=1   */
l_int|80
comma
l_int|72
comma
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|70
comma
l_int|68
comma
l_int|61
comma
l_int|59
comma
l_int|37
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|86
comma
l_int|77
comma
l_int|75
comma
l_int|68
comma
l_int|66
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|68
comma
l_int|66
comma
l_int|59
comma
l_int|57
comma
l_int|37
)brace
suffix:semicolon
multiline_comment|/*; 128 bit    BQ=1   */
id|index
op_assign
(paren
id|key
op_amp
l_int|0xE0
)paren
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|key
op_amp
l_int|0x10
)paren
id|index
op_assign
id|index
op_plus
l_int|6
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|key
op_amp
l_int|0x01
)paren
)paren
id|index
op_assign
id|index
op_plus
l_int|24
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x0080
)paren
id|index
op_assign
id|index
op_plus
l_int|12
suffix:semicolon
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
r_return
(paren
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_CRT2AutoThreshold
id|SiS_CRT2AutoThreshold
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp1
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1
)paren
suffix:semicolon
id|temp1
op_or_assign
l_int|0x40
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part1Port
comma
l_int|0x1
comma
id|temp1
)paren
suffix:semicolon
)brace
multiline_comment|/* =============  ynlai ============== */
r_void
DECL|function|SiS_DetectMonitor
id|SiS_DetectMonitor
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|UCHAR
id|DAC_TEST_PARMS
(braket
)braket
op_assign
(brace
l_int|0x0F
comma
l_int|0x0F
comma
l_int|0x0F
)brace
suffix:semicolon
id|UCHAR
id|DAC_CLR_PARMS
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
id|USHORT
id|SR1F
suffix:semicolon
id|SR1F
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
l_int|0xFF
comma
l_int|0x04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
)paren
(brace
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x30
comma
l_int|0x41
)paren
suffix:semicolon
)brace
)brace
id|SiSSetMode
(paren
id|HwDeviceExtension
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* InitMode */
id|SiS_SetReg3
(paren
id|SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
id|SiS_ClearDAC
(paren
id|SiS_P3c8
)paren
suffix:semicolon
id|SiS_LongWait
(paren
)paren
suffix:semicolon
id|SiS_LongWait
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_TestMonitorType
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_TestMonitorType
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
)paren
(brace
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_TestMonitorType
(paren
id|DAC_CLR_PARMS
(braket
l_int|0
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|1
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
id|SR1F
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_TestMonitorType
id|SiS_TestMonitorType
(paren
id|UCHAR
id|R_DAC
comma
id|UCHAR
id|G_DAC
comma
id|UCHAR
id|B_DAC
)paren
(brace
id|USHORT
id|temp
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|R_DAC
op_star
l_int|0x4d
op_plus
id|G_DAC
op_star
l_int|0x97
op_plus
id|B_DAC
op_star
l_int|0x1c
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|0x80
)paren
id|tempbx
op_assign
id|tempbx
op_plus
l_int|0x100
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|R_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|G_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|B_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c8
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
id|R_DAC
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
id|G_DAC
)paren
suffix:semicolon
id|SiS_SetReg3
(paren
id|SiS_P3c9
comma
id|B_DAC
)paren
suffix:semicolon
id|SiS_LongWait
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg2
(paren
id|SiS_P3c2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x10
)paren
r_return
(paren
l_int|1
)paren
suffix:semicolon
r_else
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* ---- test ----- */
r_void
DECL|function|SiS_GetSenseStatus
id|SiS_GetSenseStatus
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempax
op_assign
l_int|0
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|USHORT
id|P2reg0
op_assign
l_int|0
comma
id|SenseModeNo
op_assign
l_int|0
comma
id|OutputSelect
op_assign
op_star
id|pSiS_OutputSelect
suffix:semicolon
id|USHORT
id|ModeIdIndex
comma
id|i
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_GetPanelID
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|LCDSense
suffix:semicolon
id|temp
op_assign
id|temp
op_or
id|SiS_SenseCHTV
(paren
)paren
suffix:semicolon
id|tempbx
op_assign
op_complement
(paren
id|LCDSense
op_or
id|AVIDEOSense
op_or
id|SVIDEOSense
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
id|tempbx
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* for 301 */
r_if
c_cond
(paren
id|SiS_IF_DEF_HiVision
op_eq
l_int|1
)paren
(brace
multiline_comment|/* for HiVision */
id|tempax
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x01
suffix:semicolon
id|tempax
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempax
op_amp
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xA0
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_BridgeIsOn
(paren
id|BaseAddr
)paren
)paren
(brace
id|P2reg0
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_BridgeIsEnable
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SenseModeNo
op_assign
l_int|0x2e
suffix:semicolon
id|temp
op_assign
id|SiS_SearchModeID
(paren
id|ROMAddr
comma
id|SenseModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_SetFlag
op_assign
l_int|0x00
suffix:semicolon
id|SiS_ModeType
op_assign
id|ModeVGA
suffix:semicolon
id|SiS_VBInfo
op_assign
id|SetCRT2ToRAMDAC
op_or
id|LoadDACFlag
op_or
id|SetInSlaveMode
suffix:semicolon
id|SiS_SetCRT2Group301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|SenseModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_LongWait
(paren
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1c
)paren
suffix:semicolon
id|tempax
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
op_star
id|pSiS_RGBSenseData
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_RGBSenseData2
suffix:semicolon
)brace
multiline_comment|/*end 301b */
id|tempcx
op_assign
l_int|0x0E08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|Monitor2Sense
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
op_star
id|pSiS_YCSenseData
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_YCSenseData2
suffix:semicolon
)brace
multiline_comment|/*301b */
id|tempcx
op_assign
l_int|0x0604
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SVIDEOSense
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|BoardTVType
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData2
suffix:semicolon
)brace
multiline_comment|/*end 301b */
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempax
op_amp
id|SVIDEOSense
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData
suffix:semicolon
multiline_comment|/*301b */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Is301B
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData2
suffix:semicolon
)brace
multiline_comment|/*end 301b */
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_SenseLCD
(paren
id|HwDeviceExtension
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|LCDSense
suffix:semicolon
)brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|SiS_Sense
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
op_complement
l_int|0xDF
comma
id|tempax
)paren
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
id|P2reg0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|P2reg0
op_amp
l_int|0x20
)paren
)paren
(brace
id|SiS_VBInfo
op_assign
id|DisableCRT2Display
suffix:semicolon
id|SiS_SetCRT2Group301
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|SenseModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|BOOLEAN
DECL|function|SiS_Sense
id|SiS_Sense
(paren
id|USHORT
id|Part4Port
comma
id|USHORT
id|tempbx
comma
id|USHORT
id|tempcx
)paren
(brace
id|USHORT
id|temp
comma
id|i
comma
id|tempch
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_Part4Port
comma
l_int|0x10
comma
op_complement
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
id|SiS_LongWait
(paren
)paren
suffix:semicolon
id|tempch
op_assign
(paren
id|tempcx
op_amp
l_int|0x7F00
)paren
op_rshift
l_int|8
suffix:semicolon
multiline_comment|/*   ynlai [05/22/2001]  */
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_Part4Port
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_xor
(paren
l_int|0x0E
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
id|tempch
suffix:semicolon
multiline_comment|/*   ynlai [05/22/2001]  */
r_if
c_cond
(paren
id|temp
OG
l_int|0
)paren
r_return
l_int|1
suffix:semicolon
r_else
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseLCD
id|SiS_SenseLCD
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
multiline_comment|/*  USHORT SoftSetting; */
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetPanelID
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
id|temp
op_assign
id|SiS_GetLCDDDCInfo
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
r_return
(paren
id|temp
)paren
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_GetLCDDDCInfo
id|SiS_GetLCDDDCInfo
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
singleline_comment|//add lcd sense
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;ulCRT2LCDType
op_eq
id|LCD_UNKNOWN
)paren
r_return
l_int|0
suffix:semicolon
r_else
(brace
id|temp
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulCRT2LCDType
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_GetPanelID
id|SiS_GetPanelID
(paren
r_void
)paren
(brace
id|USHORT
id|PanelTypeTable
(braket
l_int|16
)braket
op_assign
(brace
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel800x600
op_or
id|_PanelType00
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType01
comma
id|SyncPP
op_or
id|PanelRGB18Bit
op_or
id|Panel800x600
op_or
id|_PanelType02
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel640x480
op_or
id|_PanelType03
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType04
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType05
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType06
comma
id|SyncNN
op_or
id|PanelRGB24Bit
op_or
id|Panel1024x768
op_or
id|_PanelType07
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel800x600
op_or
id|_PanelType08
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType09
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel800x600
op_or
id|_PanelType0A
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType0B
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType0C
comma
id|SyncNN
op_or
id|PanelRGB24Bit
op_or
id|Panel1024x768
op_or
id|_PanelType0D
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType0E
comma
id|SyncNN
op_or
id|PanelRGB18Bit
op_or
id|Panel1024x768
op_or
id|_PanelType0F
)brace
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
multiline_comment|/*  USHORT return_flag; */
id|tempax
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempax
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x40
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x20
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x01
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
(paren
id|SiS_P3c4
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x80
)paren
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x04
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
id|tempbx
op_lshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|PanelTypeTable
(braket
id|tempbx
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_or
id|LCDSync
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
(paren
id|SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
op_complement
(paren
id|LCDSyncBit
op_or
id|LCDRGB18Bit
)paren
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseCHTV
id|SiS_SenseCHTV
(paren
r_void
)paren
(brace
id|USHORT
id|temp
comma
id|push0e
comma
id|status
suffix:semicolon
id|status
op_assign
l_int|0
suffix:semicolon
id|push0e
op_assign
id|SiS_GetCH7005
(paren
l_int|0x0e
)paren
suffix:semicolon
id|push0e
op_assign
(paren
id|push0e
op_lshift
l_int|8
)paren
op_or
l_int|0x0e
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x0b0e
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x0110
)paren
suffix:semicolon
id|SiS_SetCH7005
(paren
l_int|0x0010
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH7005
(paren
l_int|0x10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
id|status
op_assign
id|status
op_or
id|SVIDEOSense
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
id|status
op_assign
id|status
op_or
id|AVIDEOSense
suffix:semicolon
id|SiS_SetCH7005
(paren
id|push0e
)paren
suffix:semicolon
r_return
(paren
id|status
)paren
suffix:semicolon
)brace
multiline_comment|/*  ==========================================  */
macro_line|#ifdef TC
r_int
DECL|function|INT1AReturnCode
id|INT1AReturnCode
(paren
r_union
id|REGS
id|regs
)paren
(brace
r_if
c_cond
(paren
id|regs.x.cflag
)paren
(brace
multiline_comment|/*printf(&quot;Error to find pci device!&bslash;n&quot;); */
r_return
l_int|1
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|regs.h.ah
)paren
(brace
r_case
l_int|0
suffix:colon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x81
suffix:colon
id|printf
(paren
l_string|&quot;Function not support&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x83
suffix:colon
id|printf
(paren
l_string|&quot;bad vendor id&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x86
suffix:colon
id|printf
(paren
l_string|&quot;device not found&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x87
suffix:colon
id|printf
(paren
l_string|&quot;bad register number&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x88
suffix:colon
id|printf
(paren
l_string|&quot;set failed&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x89
suffix:colon
id|printf
(paren
l_string|&quot;buffer too small&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|FindPCIIOBase
id|FindPCIIOBase
(paren
r_int
id|index
comma
r_int
id|deviceid
)paren
(brace
r_union
id|REGS
id|regs
suffix:semicolon
id|regs.h.ah
op_assign
l_int|0xb1
suffix:semicolon
multiline_comment|/*PCI_FUNCTION_ID */
id|regs.h.al
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/*FIND_PCI_DEVICE */
id|regs.x.cx
op_assign
id|deviceid
suffix:semicolon
id|regs.x.dx
op_assign
l_int|0x1039
suffix:semicolon
id|regs.x.si
op_assign
id|index
suffix:semicolon
multiline_comment|/* find n-th device */
id|int86
(paren
l_int|0x1A
comma
op_amp
id|regs
comma
op_amp
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT1AReturnCode
(paren
id|regs
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* regs.h.bh */
multiline_comment|/* bus number */
multiline_comment|/* regs.h.bl */
multiline_comment|/* device number */
id|regs.h.ah
op_assign
l_int|0xb1
suffix:semicolon
multiline_comment|/*PCI_FUNCTION_ID */
id|regs.h.al
op_assign
l_int|0x09
suffix:semicolon
multiline_comment|/*READ_CONFIG_WORD */
id|regs.x.cx
op_assign
id|deviceid
suffix:semicolon
id|regs.x.dx
op_assign
l_int|0x1039
suffix:semicolon
id|regs.x.di
op_assign
l_int|0x18
suffix:semicolon
multiline_comment|/* register number */
id|int86
(paren
l_int|0x1A
comma
op_amp
id|regs
comma
op_amp
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT1AReturnCode
(paren
id|regs
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|regs.x.cx
suffix:semicolon
)brace
r_void
DECL|function|main
id|main
(paren
r_int
id|argc
comma
r_char
op_star
id|argv
(braket
)braket
)paren
multiline_comment|/* void main() */
(brace
id|SIS_HW_DEVICE_INFO
id|HwDeviceExtension
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|ModeNo
suffix:semicolon
multiline_comment|/*HwDeviceExtension.pjVirtualRomBase =(PUCHAR) MK_FP(0xC000,0); */
multiline_comment|/*HwDeviceExtension.pjVideoMemoryAddress = (PUCHAR)MK_FP(0xA000,0); */
macro_line|#ifdef CONFIG_FB_SIS_300
id|HwDeviceExtension.ulIOAddress
op_assign
(paren
id|FindPCIIOBase
(paren
l_int|0
comma
l_int|0x6300
)paren
op_amp
l_int|0xFF80
)paren
op_plus
l_int|0x30
suffix:semicolon
id|HwDeviceExtension.jChipType
op_assign
id|SIS_630
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FB_SIS_315
singleline_comment|//  HwDeviceExtension.ulIOAddress = (FindPCIIOBase(0,0x5315)&amp;0xFF80) + 0x30;
singleline_comment|//  HwDeviceExtension.jChipType = SIS_550;
id|HwDeviceExtension.ulIOAddress
op_assign
(paren
id|FindPCIIOBase
(paren
l_int|0
comma
l_int|0x325
)paren
op_amp
l_int|0xFF80
)paren
op_plus
l_int|0x30
suffix:semicolon
id|HwDeviceExtension.jChipType
op_assign
id|SIS_315H
suffix:semicolon
macro_line|#endif
id|HwDeviceExtension.ujVBChipID
op_assign
id|VB_CHIP_301
suffix:semicolon
id|strcpy
(paren
id|HwDeviceExtension.szVBIOSVer
comma
l_string|&quot;0.84&quot;
)paren
suffix:semicolon
id|HwDeviceExtension.bSkipDramSizing
op_assign
id|FALSE
suffix:semicolon
id|HwDeviceExtension.ulVideoMemorySize
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_eq
l_int|2
)paren
(brace
id|ModeNo
op_assign
id|atoi
(paren
id|argv
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|ModeNo
op_assign
l_int|0x2e
suffix:semicolon
multiline_comment|/*ModeNo=0x37;  1024x768x 4bpp */
multiline_comment|/*ModeNo=0x38;  1024x768x 8bpp */
multiline_comment|/*ModeNo=0x4A;  1024x768x 16bpp */
multiline_comment|/*ModeNo=0x47;  800x600x 16bpp */
)brace
singleline_comment|// SiSInit(&amp;HwDeviceExtension);
id|SiSSetMode
(paren
op_amp
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
)brace
macro_line|#endif
eof
