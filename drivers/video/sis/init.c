multiline_comment|/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/sis/init.c,v 1.3 2002/24/04 01:16:16 dawes Exp $ */
multiline_comment|/*&n; * Mode switching code (CRT1 section) for SiS 300/540/630/730/315/550/650/740&n; * (Universal module for Linux kernel framebuffer and XFree86 4.x)&n; *&n; * Assembler-To-C translation&n; * Parts Copyright 2002 by Thomas Winischhofer &lt;thomas@winischhofer.net&gt;&n; *&n; * Based on BIOS&n; *     1.10.07 (1.10a) for SiS650/LVDS+CH7019&n; *     1.07.1b for SiS650/301(B/LV)&n; *     2.04.50 (I) and 2.04.5c (II) for SiS630/301(B)&n; *     2.02.3b, 2.03.02 and 2.04.5c for 630/LVDS/LVDS+CH7005&n; *     1.09b for 315/301(B)&n; *&n; * Permission to use, copy, modify, distribute, and sell this software and its&n; * documentation for any purpose is hereby granted without fee, provided that&n; * the above copyright notice appear in all copies and that both that&n; * copyright notice and this permission notice appear in supporting&n; * documentation, and that the name of the copyright holder not be used in&n; * advertising or publicity pertaining to distribution of the software without&n; * specific, written prior permission.  The copyright holder makes no representations&n; * about the suitability of this software for any purpose.  It is provided&n; * &quot;as is&quot; without express or implied warranty.&n; *&n; * THE COPYRIGHT HOLDER DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,&n; * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO&n; * EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY SPECIAL, INDIRECT OR&n; * CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,&n; * DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER&n; * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR&n; * PERFORMANCE OF THIS SOFTWARE.&n; *&n; */
macro_line|#include &quot;init.h&quot;
macro_line|#ifdef SIS300
macro_line|#include &quot;300vtbl.h&quot;
macro_line|#endif
macro_line|#ifdef SIS315H
macro_line|#include &quot;310vtbl.h&quot;
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|BOOLEAN
id|SiSBIOSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
suffix:semicolon
macro_line|#ifdef SISDUALHEAD /* TW: For dual head */
id|BOOLEAN
id|SiSBIOSSetModeCRT1
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
suffix:semicolon
id|BOOLEAN
id|SiSBIOSSetModeCRT2
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
suffix:semicolon
macro_line|#endif /* dual head */
macro_line|#endif /* linux_xf86 */
macro_line|#ifndef LINUX_XF86
id|BOOLEAN
id|SiSInit
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef LINUX_XF86
id|BOOLEAN
id|SiSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|USHORT
id|ModeNo
)paren
suffix:semicolon
macro_line|#else
id|BOOLEAN
id|SiSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(ALLOC_PRAGMA)
macro_line|#pragma alloc_text(PAGE,SiSSetMode)
macro_line|#pragma alloc_text(PAGE,SiSInit)
macro_line|#endif
r_void
id|DelaySeconds
c_func
(paren
r_int
id|seconds
)paren
suffix:semicolon
r_void
id|DebugCode
c_func
(paren
id|UCHAR
id|code
)paren
suffix:semicolon
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: Mode table for X driver */
DECL|variable|ModeIndex_320x480
id|UShort
id|ModeIndex_320x480
(braket
)braket
op_assign
(brace
l_int|0x5A
comma
l_int|0x5B
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
multiline_comment|/* DSTN/FSTN */
DECL|variable|ModeIndex_512x384
id|UShort
id|ModeIndex_512x384
(braket
)braket
op_assign
(brace
l_int|0x52
comma
l_int|0x58
comma
l_int|0x00
comma
l_int|0x5c
)brace
suffix:semicolon
DECL|variable|ModeIndex_640x480
id|UShort
id|ModeIndex_640x480
(braket
)braket
op_assign
(brace
l_int|0x2E
comma
l_int|0x44
comma
l_int|0x00
comma
l_int|0x62
)brace
suffix:semicolon
DECL|variable|ModeIndex_720x480
id|UShort
id|ModeIndex_720x480
(braket
)braket
op_assign
(brace
l_int|0x31
comma
l_int|0x33
comma
l_int|0x00
comma
l_int|0x35
)brace
suffix:semicolon
DECL|variable|ModeIndex_720x576
id|UShort
id|ModeIndex_720x576
(braket
)braket
op_assign
(brace
l_int|0x32
comma
l_int|0x34
comma
l_int|0x00
comma
l_int|0x36
)brace
suffix:semicolon
DECL|variable|ModeIndex_800x480
id|UShort
id|ModeIndex_800x480
(braket
)braket
op_assign
(brace
l_int|0x70
comma
l_int|0x7a
comma
l_int|0x00
comma
l_int|0x76
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
DECL|variable|ModeIndex_800x600
id|UShort
id|ModeIndex_800x600
(braket
)braket
op_assign
(brace
l_int|0x30
comma
l_int|0x47
comma
l_int|0x00
comma
l_int|0x63
)brace
suffix:semicolon
DECL|variable|ModeIndex_1024x768
id|UShort
id|ModeIndex_1024x768
(braket
)braket
op_assign
(brace
l_int|0x38
comma
l_int|0x4A
comma
l_int|0x00
comma
l_int|0x64
)brace
suffix:semicolon
DECL|variable|ModeIndex_1024x576
id|UShort
id|ModeIndex_1024x576
(braket
)braket
op_assign
(brace
l_int|0x71
comma
l_int|0x74
comma
l_int|0x00
comma
l_int|0x77
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
DECL|variable|ModeIndex_1024x600
id|UShort
id|ModeIndex_1024x600
(braket
)braket
op_assign
(brace
l_int|0x20
comma
l_int|0x21
comma
l_int|0x00
comma
l_int|0x22
)brace
suffix:semicolon
multiline_comment|/* 300 series only */
DECL|variable|ModeIndex_1280x1024
id|UShort
id|ModeIndex_1280x1024
(braket
)braket
op_assign
(brace
l_int|0x3A
comma
l_int|0x4D
comma
l_int|0x00
comma
l_int|0x65
)brace
suffix:semicolon
DECL|variable|ModeIndex_300_1280x960
id|UShort
id|ModeIndex_300_1280x960
(braket
)braket
op_assign
(brace
l_int|0x6e
comma
l_int|0x6f
comma
l_int|0x00
comma
l_int|0x7b
)brace
suffix:semicolon
DECL|variable|ModeIndex_310_1280x960
id|UShort
id|ModeIndex_310_1280x960
(braket
)braket
op_assign
(brace
l_int|0x7C
comma
l_int|0x7D
comma
l_int|0x00
comma
l_int|0x7E
)brace
suffix:semicolon
DECL|variable|ModeIndex_1152x768
id|UShort
id|ModeIndex_1152x768
(braket
)braket
op_assign
(brace
l_int|0x23
comma
l_int|0x24
comma
l_int|0x00
comma
l_int|0x25
)brace
suffix:semicolon
multiline_comment|/* 300 series only */
DECL|variable|ModeIndex_1280x768
id|UShort
id|ModeIndex_1280x768
(braket
)braket
op_assign
(brace
l_int|0x23
comma
l_int|0x24
comma
l_int|0x00
comma
l_int|0x25
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
DECL|variable|ModeIndex_1280x720
id|UShort
id|ModeIndex_1280x720
(braket
)braket
op_assign
(brace
l_int|0x79
comma
l_int|0x75
comma
l_int|0x00
comma
l_int|0x78
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
DECL|variable|ModeIndex_1400x1050
id|UShort
id|ModeIndex_1400x1050
(braket
)braket
op_assign
(brace
l_int|0x26
comma
l_int|0x27
comma
l_int|0x00
comma
l_int|0x28
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
DECL|variable|ModeIndex_1600x1200
id|UShort
id|ModeIndex_1600x1200
(braket
)braket
op_assign
(brace
l_int|0x3C
comma
l_int|0x3D
comma
l_int|0x00
comma
l_int|0x66
)brace
suffix:semicolon
DECL|variable|ModeIndex_1920x1440
id|UShort
id|ModeIndex_1920x1440
(braket
)braket
op_assign
(brace
l_int|0x68
comma
l_int|0x69
comma
l_int|0x00
comma
l_int|0x6B
)brace
suffix:semicolon
DECL|variable|ModeIndex_2048x1536
id|UShort
id|ModeIndex_2048x1536
(braket
)braket
op_assign
(brace
l_int|0x6c
comma
l_int|0x6d
comma
l_int|0x00
comma
l_int|0x6e
)brace
suffix:semicolon
multiline_comment|/* 310/325 series only */
macro_line|#endif
r_void
DECL|function|DelaySeconds
id|DelaySeconds
c_func
(paren
r_int
id|seconds
)paren
(brace
r_int
id|i
suffix:semicolon
macro_line|#ifdef WIN2000
r_int
id|j
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|seconds
suffix:semicolon
id|i
op_increment
)paren
(brace
macro_line|#ifdef TC
id|delay
c_func
(paren
l_int|1000
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef WIN2000
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|20000
suffix:semicolon
id|j
op_increment
)paren
id|VideoPortStallExecution
c_func
(paren
l_int|50
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef WINCE_HEADER
macro_line|#endif
macro_line|#ifdef LINUX_KERNEL
macro_line|#endif
)brace
)brace
r_void
DECL|function|DebugCode
id|DebugCode
c_func
(paren
id|UCHAR
id|code
)paren
(brace
id|OutPortByte
(paren
l_int|0x80
comma
id|code
)paren
suffix:semicolon
multiline_comment|/*OutPortByte ( 0x300, code);*/
id|DelaySeconds
c_func
(paren
l_int|0x3
)paren
suffix:semicolon
)brace
macro_line|#ifdef SIS300
r_void
DECL|function|InitTo300Pointer
id|InitTo300Pointer
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|SiS_SModeIDTable
op_assign
(paren
id|SiS_StStruct
op_star
)paren
id|SiS300_SModeIDTable
suffix:semicolon
id|SiS_VBModeIDTable
op_assign
(paren
id|SiS_VBModeStruct
op_star
)paren
id|SiS300_VBModeIDTable
suffix:semicolon
id|SiS_StandTable
op_assign
(paren
id|SiS_StandTableStruct
op_star
)paren
id|SiS300_StandTable
suffix:semicolon
id|SiS_EModeIDTable
op_assign
(paren
id|SiS_ExtStruct
op_star
)paren
id|SiS300_EModeIDTable
suffix:semicolon
id|SiS_RefIndex
op_assign
(paren
id|SiS_Ext2Struct
op_star
)paren
id|SiS300_RefIndex
suffix:semicolon
id|SiS_CRT1Table
op_assign
(paren
id|SiS_CRT1TableStruct
op_star
)paren
id|SiS300_CRT1Table
suffix:semicolon
id|SiS_MCLKData_0
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS300_MCLKData
suffix:semicolon
id|SiS_ECLKData
op_assign
(paren
id|SiS_ECLKDataStruct
op_star
)paren
id|SiS300_ECLKData
suffix:semicolon
id|SiS_VCLKData
op_assign
(paren
id|SiS_VCLKDataStruct
op_star
)paren
id|SiS300_VCLKData
suffix:semicolon
id|SiS_VBVCLKData
op_assign
(paren
id|SiS_VBVCLKDataStruct
op_star
)paren
id|SiS300_VCLKData
suffix:semicolon
id|SiS_ScreenOffset
op_assign
id|SiS300_ScreenOffset
suffix:semicolon
id|SiS_StResInfo
op_assign
(paren
id|SiS_StResInfoStruct
op_star
)paren
id|SiS300_StResInfo
suffix:semicolon
id|SiS_ModeResInfo
op_assign
(paren
id|SiS_ModeResInfoStruct
op_star
)paren
id|SiS300_ModeResInfo
suffix:semicolon
id|pSiS_OutputSelect
op_assign
op_amp
id|SiS300_OutputSelect
suffix:semicolon
id|pSiS_SoftSetting
op_assign
op_amp
id|SiS300_SoftSetting
suffix:semicolon
id|pSiS_SR07
op_assign
op_amp
id|SiS300_SR07
suffix:semicolon
id|SiS_SR15
op_assign
id|SiS300_SR15
suffix:semicolon
id|SiS_CR40
op_assign
id|SiS300_CR40
suffix:semicolon
id|SiS_CR49
op_assign
id|SiS300_CR49
suffix:semicolon
id|pSiS_SR1F
op_assign
op_amp
id|SiS300_SR1F
suffix:semicolon
id|pSiS_SR21
op_assign
op_amp
id|SiS300_SR21
suffix:semicolon
id|pSiS_SR22
op_assign
op_amp
id|SiS300_SR22
suffix:semicolon
id|pSiS_SR23
op_assign
op_amp
id|SiS300_SR23
suffix:semicolon
id|pSiS_SR24
op_assign
op_amp
id|SiS300_SR24
suffix:semicolon
id|SiS_SR25
op_assign
id|SiS300_SR25
suffix:semicolon
id|pSiS_SR31
op_assign
op_amp
id|SiS300_SR31
suffix:semicolon
id|pSiS_SR32
op_assign
op_amp
id|SiS300_SR32
suffix:semicolon
id|pSiS_SR33
op_assign
op_amp
id|SiS300_SR33
suffix:semicolon
id|pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS300_CRT2Data_1_2
suffix:semicolon
id|pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS300_CRT2Data_4_D
suffix:semicolon
id|pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS300_CRT2Data_4_E
suffix:semicolon
id|pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS300_CRT2Data_4_10
suffix:semicolon
id|pSiS_RGBSenseData
op_assign
op_amp
id|SiS300_RGBSenseData
suffix:semicolon
id|pSiS_VideoSenseData
op_assign
op_amp
id|SiS300_VideoSenseData
suffix:semicolon
id|pSiS_YCSenseData
op_assign
op_amp
id|SiS300_YCSenseData
suffix:semicolon
id|pSiS_RGBSenseData2
op_assign
op_amp
id|SiS300_RGBSenseData2
suffix:semicolon
id|pSiS_VideoSenseData2
op_assign
op_amp
id|SiS300_VideoSenseData2
suffix:semicolon
id|pSiS_YCSenseData2
op_assign
op_amp
id|SiS300_YCSenseData2
suffix:semicolon
id|SiS_NTSCPhase
op_assign
id|SiS300_NTSCPhase
suffix:semicolon
id|SiS_PALPhase
op_assign
id|SiS300_PALPhase
suffix:semicolon
id|SiS_NTSCPhase2
op_assign
id|SiS300_NTSCPhase2
suffix:semicolon
id|SiS_PALPhase2
op_assign
id|SiS300_PALPhase2
suffix:semicolon
id|SiS_PALMPhase
op_assign
id|SiS300_PALMPhase
suffix:semicolon
id|SiS_PALNPhase
op_assign
id|SiS300_PALNPhase
suffix:semicolon
id|SiS_PALMPhase2
op_assign
id|SiS300_PALMPhase2
suffix:semicolon
id|SiS_PALNPhase2
op_assign
id|SiS300_PALNPhase2
suffix:semicolon
id|SiS_StLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_StLCD1024x768Data
suffix:semicolon
id|SiS_ExtLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_ExtLCD1024x768Data
suffix:semicolon
id|SiS_St2LCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_St2LCD1024x768Data
suffix:semicolon
id|SiS_StLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_StLCD1280x1024Data
suffix:semicolon
id|SiS_ExtLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_St2LCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_St2LCD1280x1024Data
suffix:semicolon
id|SiS_NoScaleData1024x768
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_NoScaleData1024x768
suffix:semicolon
id|SiS_NoScaleData1280x1024
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_NoScaleData1280x1024
suffix:semicolon
id|SiS_LCD1280x960Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS300_LCD1280x960Data
suffix:semicolon
id|SiS_StPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_StPALData
suffix:semicolon
id|SiS_ExtPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtPALData
suffix:semicolon
id|SiS_StNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_StNTSCData
suffix:semicolon
id|SiS_ExtNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtNTSCData
suffix:semicolon
id|SiS_St1HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_St1HiTVData
suffix:semicolon
id|SiS_St2HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_St2HiTVData
suffix:semicolon
id|SiS_ExtHiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS300_ExtHiTVData
suffix:semicolon
id|SiS_NTSCTiming
op_assign
id|SiS300_NTSCTiming
suffix:semicolon
id|SiS_PALTiming
op_assign
id|SiS300_PALTiming
suffix:semicolon
id|SiS_HiTVSt1Timing
op_assign
id|SiS300_HiTVSt1Timing
suffix:semicolon
id|SiS_HiTVSt2Timing
op_assign
id|SiS300_HiTVSt2Timing
suffix:semicolon
id|SiS_HiTVTextTiming
op_assign
id|SiS300_HiTVTextTiming
suffix:semicolon
id|SiS_HiTVGroup3Data
op_assign
id|SiS300_HiTVGroup3Data
suffix:semicolon
id|SiS_HiTVGroup3Simu
op_assign
id|SiS300_HiTVGroup3Simu
suffix:semicolon
id|SiS_HiTVGroup3Text
op_assign
id|SiS300_HiTVGroup3Text
suffix:semicolon
id|SiS_PanelDelayTbl
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS300_PanelDelayTbl
suffix:semicolon
id|SiS_PanelDelayTblLVDS
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS300_PanelDelayTblLVDS
suffix:semicolon
id|SiS_LVDS800x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS800x600Data_1
suffix:semicolon
id|SiS_LVDS800x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS800x600Data_2
suffix:semicolon
id|SiS_LVDS1024x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x768Data_1
suffix:semicolon
id|SiS_LVDS1024x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x768Data_2
suffix:semicolon
id|SiS_LVDS1280x1024Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_LVDS1280x1024Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_LVDS1280x960Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_LVDS1280x960Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_LVDS640x480Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS640x480Data_1
suffix:semicolon
id|SiS_LVDS1024x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x600Data_1
suffix:semicolon
id|SiS_LVDS1024x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1024x600Data_2
suffix:semicolon
id|SiS_LVDS1152x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1152x768Data_1
suffix:semicolon
id|SiS_LVDS1152x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_LVDS1152x768Data_2
suffix:semicolon
id|SiS_CHTVUNTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVUNTSCData
suffix:semicolon
id|SiS_CHTVONTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVONTSCData
suffix:semicolon
id|SiS_CHTVUPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVUPALData
suffix:semicolon
id|SiS_CHTVOPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS300_CHTVOPALData
suffix:semicolon
id|SiS_PanelType00_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType00_1
suffix:semicolon
id|SiS_PanelType01_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType01_1
suffix:semicolon
id|SiS_PanelType02_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType02_1
suffix:semicolon
id|SiS_PanelType03_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType03_1
suffix:semicolon
id|SiS_PanelType04_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType04_1
suffix:semicolon
id|SiS_PanelType05_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType05_1
suffix:semicolon
id|SiS_PanelType06_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType06_1
suffix:semicolon
id|SiS_PanelType07_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType07_1
suffix:semicolon
id|SiS_PanelType08_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType08_1
suffix:semicolon
id|SiS_PanelType09_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType09_1
suffix:semicolon
id|SiS_PanelType0a_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0a_1
suffix:semicolon
id|SiS_PanelType0b_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0b_1
suffix:semicolon
id|SiS_PanelType0c_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0c_1
suffix:semicolon
id|SiS_PanelType0d_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0d_1
suffix:semicolon
id|SiS_PanelType0e_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0e_1
suffix:semicolon
id|SiS_PanelType0f_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0f_1
suffix:semicolon
id|SiS_PanelType00_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType00_2
suffix:semicolon
id|SiS_PanelType01_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType01_2
suffix:semicolon
id|SiS_PanelType02_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType02_2
suffix:semicolon
id|SiS_PanelType03_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType03_2
suffix:semicolon
id|SiS_PanelType04_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType04_2
suffix:semicolon
id|SiS_PanelType05_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType05_2
suffix:semicolon
id|SiS_PanelType06_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType06_2
suffix:semicolon
id|SiS_PanelType07_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType07_2
suffix:semicolon
id|SiS_PanelType08_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType08_2
suffix:semicolon
id|SiS_PanelType09_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType09_2
suffix:semicolon
id|SiS_PanelType0a_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0a_2
suffix:semicolon
id|SiS_PanelType0b_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0b_2
suffix:semicolon
id|SiS_PanelType0c_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0c_2
suffix:semicolon
id|SiS_PanelType0d_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0d_2
suffix:semicolon
id|SiS_PanelType0e_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0e_2
suffix:semicolon
id|SiS_PanelType0f_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_PanelType0f_2
suffix:semicolon
id|SiS_CHTVUNTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVUNTSCDesData
suffix:semicolon
id|SiS_CHTVONTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVONTSCDesData
suffix:semicolon
id|SiS_CHTVUPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVUPALDesData
suffix:semicolon
id|SiS_CHTVOPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS300_CHTVOPALDesData
suffix:semicolon
id|SiS_LVDSCRT1800x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_LVDSCRT11024x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_LVDSCRT11024x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x600_1
suffix:semicolon
id|SiS_LVDSCRT11152x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11152x768_1
suffix:semicolon
id|SiS_LVDSCRT1800x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11152x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11152x768_1_H
suffix:semicolon
id|SiS_LVDSCRT1800x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_LVDSCRT11024x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_LVDSCRT11024x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x600_2
suffix:semicolon
id|SiS_LVDSCRT11152x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11152x768_2
suffix:semicolon
id|SiS_LVDSCRT1800x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11024x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11152x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_LVDSCRT11152x768_2_H
suffix:semicolon
id|SiS_CHTVCRT1UNTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_CHTVCRT1ONTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_CHTVCRT1UPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1UPAL
suffix:semicolon
id|SiS_CHTVCRT1OPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS300_CHTVCRT1OPAL
suffix:semicolon
id|SiS_CHTVReg_UNTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_UNTSC
suffix:semicolon
id|SiS_CHTVReg_ONTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_ONTSC
suffix:semicolon
id|SiS_CHTVReg_UPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_UPAL
suffix:semicolon
id|SiS_CHTVReg_OPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS300_CHTVReg_OPAL
suffix:semicolon
id|SiS_CHTVVCLKUNTSC
op_assign
id|SiS300_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_CHTVVCLKONTSC
op_assign
id|SiS300_CHTVVCLKONTSC
suffix:semicolon
id|SiS_CHTVVCLKUPAL
op_assign
id|SiS300_CHTVVCLKUPAL
suffix:semicolon
id|SiS_CHTVVCLKOPAL
op_assign
id|SiS300_CHTVVCLKOPAL
suffix:semicolon
id|Panel320x480
op_assign
id|Panel300_320x480
suffix:semicolon
id|Panel640x480
op_assign
id|Panel300_640x480
suffix:semicolon
id|Panel800x600
op_assign
id|Panel300_800x600
suffix:semicolon
id|Panel1024x768
op_assign
id|Panel300_1024x768
suffix:semicolon
id|Panel1280x1024
op_assign
id|Panel300_1280x1024
suffix:semicolon
id|Panel1280x960
op_assign
id|Panel300_1280x960
suffix:semicolon
id|Panel1024x600
op_assign
id|Panel300_1024x600
suffix:semicolon
id|Panel1152x768
op_assign
id|Panel300_1152x768
suffix:semicolon
id|Panel1600x1200
op_assign
l_int|16
suffix:semicolon
multiline_comment|/*Panel300_1600x1200;  OLD */
id|Panel1400x1050
op_assign
l_int|16
suffix:semicolon
multiline_comment|/* TW: Something illegal */
id|Panel1152x864
op_assign
l_int|16
suffix:semicolon
multiline_comment|/* TW: Something illegal */
id|Panel1280x768
op_assign
l_int|16
suffix:semicolon
multiline_comment|/* TW: Something illegal */
id|Panel1024x600
op_assign
l_int|16
suffix:semicolon
multiline_comment|/* TW: Something illegal */
id|PanelMax
op_assign
id|Panel300_320x480
suffix:semicolon
multiline_comment|/* TW: highest value */
id|PanelMinLVDS
op_assign
id|Panel300_800x600
suffix:semicolon
multiline_comment|/* TW: Lowest value LVDS */
id|PanelMin301
op_assign
id|Panel310_1024x768
suffix:semicolon
multiline_comment|/* TW: lowest value 301 */
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_void
DECL|function|InitTo310Pointer
id|InitTo310Pointer
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|SiS_SModeIDTable
op_assign
(paren
id|SiS_StStruct
op_star
)paren
id|SiS310_SModeIDTable
suffix:semicolon
id|SiS_StandTable
op_assign
(paren
id|SiS_StandTableStruct
op_star
)paren
id|SiS310_StandTable
suffix:semicolon
id|SiS_EModeIDTable
op_assign
(paren
id|SiS_ExtStruct
op_star
)paren
id|SiS310_EModeIDTable
suffix:semicolon
id|SiS_RefIndex
op_assign
(paren
id|SiS_Ext2Struct
op_star
)paren
id|SiS310_RefIndex
suffix:semicolon
id|SiS_CRT1Table
op_assign
(paren
id|SiS_CRT1TableStruct
op_star
)paren
id|SiS310_CRT1Table
suffix:semicolon
multiline_comment|/* TW: MCLK is different */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
id|SiS_MCLKData_0
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS310_MCLKData_0_650
suffix:semicolon
multiline_comment|/* 550, 650 */
)brace
r_else
(brace
id|SiS_MCLKData_0
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS310_MCLKData_0_315
suffix:semicolon
multiline_comment|/* 315 */
)brace
id|SiS_MCLKData_1
op_assign
(paren
id|SiS_MCLKDataStruct
op_star
)paren
id|SiS310_MCLKData_1
suffix:semicolon
id|SiS_ECLKData
op_assign
(paren
id|SiS_ECLKDataStruct
op_star
)paren
id|SiS310_ECLKData
suffix:semicolon
id|SiS_VCLKData
op_assign
(paren
id|SiS_VCLKDataStruct
op_star
)paren
id|SiS310_VCLKData
suffix:semicolon
id|SiS_VBVCLKData
op_assign
(paren
id|SiS_VBVCLKDataStruct
op_star
)paren
id|SiS310_VBVCLKData
suffix:semicolon
id|SiS_ScreenOffset
op_assign
id|SiS310_ScreenOffset
suffix:semicolon
id|SiS_StResInfo
op_assign
(paren
id|SiS_StResInfoStruct
op_star
)paren
id|SiS310_StResInfo
suffix:semicolon
id|SiS_ModeResInfo
op_assign
(paren
id|SiS_ModeResInfoStruct
op_star
)paren
id|SiS310_ModeResInfo
suffix:semicolon
id|pSiS_OutputSelect
op_assign
op_amp
id|SiS310_OutputSelect
suffix:semicolon
id|pSiS_SoftSetting
op_assign
op_amp
id|SiS310_SoftSetting
suffix:semicolon
id|pSiS_SR07
op_assign
op_amp
id|SiS310_SR07
suffix:semicolon
id|SiS_SR15
op_assign
id|SiS310_SR15
suffix:semicolon
id|SiS_CR40
op_assign
id|SiS310_CR40
suffix:semicolon
id|SiS_CR49
op_assign
id|SiS310_CR49
suffix:semicolon
id|pSiS_SR1F
op_assign
op_amp
id|SiS310_SR1F
suffix:semicolon
id|pSiS_SR21
op_assign
op_amp
id|SiS310_SR21
suffix:semicolon
id|pSiS_SR22
op_assign
op_amp
id|SiS310_SR22
suffix:semicolon
id|pSiS_SR23
op_assign
op_amp
id|SiS310_SR23
suffix:semicolon
id|pSiS_SR24
op_assign
op_amp
id|SiS310_SR24
suffix:semicolon
id|SiS_SR25
op_assign
id|SiS310_SR25
suffix:semicolon
id|pSiS_SR31
op_assign
op_amp
id|SiS310_SR31
suffix:semicolon
id|pSiS_SR32
op_assign
op_amp
id|SiS310_SR32
suffix:semicolon
id|pSiS_SR33
op_assign
op_amp
id|SiS310_SR33
suffix:semicolon
id|pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS310_CRT2Data_1_2
suffix:semicolon
id|pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS310_CRT2Data_4_D
suffix:semicolon
id|pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS310_CRT2Data_4_E
suffix:semicolon
id|pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS310_CRT2Data_4_10
suffix:semicolon
id|pSiS_RGBSenseData
op_assign
op_amp
id|SiS310_RGBSenseData
suffix:semicolon
id|pSiS_VideoSenseData
op_assign
op_amp
id|SiS310_VideoSenseData
suffix:semicolon
id|pSiS_YCSenseData
op_assign
op_amp
id|SiS310_YCSenseData
suffix:semicolon
id|pSiS_RGBSenseData2
op_assign
op_amp
id|SiS310_RGBSenseData2
suffix:semicolon
id|pSiS_VideoSenseData2
op_assign
op_amp
id|SiS310_VideoSenseData2
suffix:semicolon
id|pSiS_YCSenseData2
op_assign
op_amp
id|SiS310_YCSenseData2
suffix:semicolon
id|SiS_NTSCPhase
op_assign
id|SiS310_NTSCPhase
suffix:semicolon
id|SiS_PALPhase
op_assign
id|SiS310_PALPhase
suffix:semicolon
id|SiS_NTSCPhase2
op_assign
id|SiS310_NTSCPhase2
suffix:semicolon
id|SiS_PALPhase2
op_assign
id|SiS310_PALPhase2
suffix:semicolon
id|SiS_PALMPhase
op_assign
id|SiS310_PALMPhase
suffix:semicolon
id|SiS_PALNPhase
op_assign
id|SiS310_PALNPhase
suffix:semicolon
id|SiS_PALMPhase2
op_assign
id|SiS310_PALMPhase2
suffix:semicolon
id|SiS_PALNPhase2
op_assign
id|SiS310_PALNPhase2
suffix:semicolon
id|SiS_StLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_StLCD1024x768Data
suffix:semicolon
id|SiS_ExtLCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_ExtLCD1024x768Data
suffix:semicolon
id|SiS_St2LCD1024x768Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_St2LCD1024x768Data
suffix:semicolon
id|SiS_StLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_StLCD1280x1024Data
suffix:semicolon
id|SiS_ExtLCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_St2LCD1280x1024Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_St2LCD1280x1024Data
suffix:semicolon
id|SiS_NoScaleData1024x768
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_NoScaleData1024x768
suffix:semicolon
id|SiS_NoScaleData1280x1024
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_NoScaleData1280x1024
suffix:semicolon
id|SiS_LCD1280x960Data
op_assign
(paren
id|SiS_LCDDataStruct
op_star
)paren
id|SiS310_LCD1280x960Data
suffix:semicolon
id|SiS_StPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_StPALData
suffix:semicolon
id|SiS_ExtPALData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtPALData
suffix:semicolon
id|SiS_StNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_StNTSCData
suffix:semicolon
id|SiS_ExtNTSCData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtNTSCData
suffix:semicolon
id|SiS_St1HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_St1HiTVData
suffix:semicolon
id|SiS_St2HiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_St2HiTVData
suffix:semicolon
id|SiS_ExtHiTVData
op_assign
(paren
id|SiS_TVDataStruct
op_star
)paren
id|SiS310_ExtHiTVData
suffix:semicolon
id|SiS_NTSCTiming
op_assign
id|SiS310_NTSCTiming
suffix:semicolon
id|SiS_PALTiming
op_assign
id|SiS310_PALTiming
suffix:semicolon
id|SiS_HiTVSt1Timing
op_assign
id|SiS310_HiTVSt1Timing
suffix:semicolon
id|SiS_HiTVSt2Timing
op_assign
id|SiS310_HiTVSt2Timing
suffix:semicolon
id|SiS_HiTVTextTiming
op_assign
id|SiS310_HiTVTextTiming
suffix:semicolon
id|SiS_HiTVGroup3Data
op_assign
id|SiS310_HiTVGroup3Data
suffix:semicolon
id|SiS_HiTVGroup3Simu
op_assign
id|SiS310_HiTVGroup3Simu
suffix:semicolon
id|SiS_HiTVGroup3Text
op_assign
id|SiS310_HiTVGroup3Text
suffix:semicolon
id|SiS_PanelDelayTbl
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS310_PanelDelayTbl
suffix:semicolon
id|SiS_PanelDelayTblLVDS
op_assign
(paren
id|SiS_PanelDelayTblStruct
op_star
)paren
id|SiS310_PanelDelayTblLVDS
suffix:semicolon
id|SiS_LVDS800x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS800x600Data_1
suffix:semicolon
id|SiS_LVDS800x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS800x600Data_2
suffix:semicolon
id|SiS_LVDS1024x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x768Data_1
suffix:semicolon
id|SiS_LVDS1024x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x768Data_2
suffix:semicolon
id|SiS_LVDS1280x1024Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_LVDS1280x1024Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_LVDS1280x960Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x960Data_1
suffix:semicolon
id|SiS_LVDS1280x960Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1280x960Data_2
suffix:semicolon
id|SiS_LVDS1400x1050Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1400x1050Data_1
suffix:semicolon
id|SiS_LVDS1400x1050Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1400x1050Data_2
suffix:semicolon
id|SiS_LVDS1024x600Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x600Data_1
suffix:semicolon
id|SiS_LVDS1024x600Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1024x600Data_2
suffix:semicolon
id|SiS_LVDS1152x768Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1152x768Data_1
suffix:semicolon
id|SiS_LVDS1152x768Data_2
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS1152x768Data_2
suffix:semicolon
id|SiS_LVDSXXXxXXXData_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDSXXXxXXXData_1
suffix:semicolon
id|SiS_LVDS320x480Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS320x480Data_1
suffix:semicolon
id|SiS_LVDS640x480Data_1
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_LVDS640x480Data_1
suffix:semicolon
id|SiS_CHTVUNTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVUNTSCData
suffix:semicolon
id|SiS_CHTVONTSCData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVONTSCData
suffix:semicolon
id|SiS_CHTVUPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVUPALData
suffix:semicolon
id|SiS_CHTVOPALData
op_assign
(paren
id|SiS_LVDSDataStruct
op_star
)paren
id|SiS310_CHTVOPALData
suffix:semicolon
id|SiS_PanelType00_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType00_1
suffix:semicolon
id|SiS_PanelType01_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType01_1
suffix:semicolon
id|SiS_PanelType02_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType02_1
suffix:semicolon
id|SiS_PanelType03_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType03_1
suffix:semicolon
id|SiS_PanelType04_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType04_1
suffix:semicolon
id|SiS_PanelType05_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType05_1
suffix:semicolon
id|SiS_PanelType06_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType06_1
suffix:semicolon
id|SiS_PanelType07_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType07_1
suffix:semicolon
id|SiS_PanelType08_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType08_1
suffix:semicolon
id|SiS_PanelType09_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType09_1
suffix:semicolon
id|SiS_PanelType0a_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0a_1
suffix:semicolon
id|SiS_PanelType0b_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0b_1
suffix:semicolon
id|SiS_PanelType0c_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0c_1
suffix:semicolon
id|SiS_PanelType0d_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0d_1
suffix:semicolon
id|SiS_PanelType0e_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0e_1
suffix:semicolon
id|SiS_PanelType0f_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0f_1
suffix:semicolon
id|SiS_PanelType00_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType00_2
suffix:semicolon
id|SiS_PanelType01_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType01_2
suffix:semicolon
id|SiS_PanelType02_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType02_2
suffix:semicolon
id|SiS_PanelType03_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType03_2
suffix:semicolon
id|SiS_PanelType04_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType04_2
suffix:semicolon
id|SiS_PanelType05_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType05_2
suffix:semicolon
id|SiS_PanelType06_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType06_2
suffix:semicolon
id|SiS_PanelType07_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType07_2
suffix:semicolon
id|SiS_PanelType08_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType08_2
suffix:semicolon
id|SiS_PanelType09_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType09_2
suffix:semicolon
id|SiS_PanelType0a_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0a_2
suffix:semicolon
id|SiS_PanelType0b_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0b_2
suffix:semicolon
id|SiS_PanelType0c_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0c_2
suffix:semicolon
id|SiS_PanelType0d_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0d_2
suffix:semicolon
id|SiS_PanelType0e_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0e_2
suffix:semicolon
id|SiS_PanelType0f_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType0f_2
suffix:semicolon
id|LVDS1024x768Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1076_1
suffix:semicolon
id|LVDS1280x1024Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1210_1
suffix:semicolon
id|LVDS1280x960Des_1
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1296_1
suffix:semicolon
id|LVDS1024x768Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1076_2
suffix:semicolon
id|LVDS1280x1024Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1210_2
suffix:semicolon
id|LVDS1280x960Des_2
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_PanelType1296_2
suffix:semicolon
multiline_comment|/* TW: New from 650/301LV BIOS */
id|SiS_CRT2Part2_1024x768_1
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1024x768_1
suffix:semicolon
id|SiS_CRT2Part2_1280x1024_1
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1280x1024_1
suffix:semicolon
id|SiS_CRT2Part2_1024x768_2
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1024x768_2
suffix:semicolon
id|SiS_CRT2Part2_1280x1024_2
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1280x1024_2
suffix:semicolon
id|SiS_CRT2Part2_1024x768_3
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1024x768_3
suffix:semicolon
id|SiS_CRT2Part2_1280x1024_3
op_assign
(paren
id|SiS_Part2PortTblStruct
op_star
)paren
id|SiS310_CRT2Part2_1280x1024_3
suffix:semicolon
id|SiS_CHTVUNTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVUNTSCDesData
suffix:semicolon
id|SiS_CHTVONTSCDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVONTSCDesData
suffix:semicolon
id|SiS_CHTVUPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVUPALDesData
suffix:semicolon
id|SiS_CHTVOPALDesData
op_assign
(paren
id|SiS_LVDSDesStruct
op_star
)paren
id|SiS310_CHTVOPALDesData
suffix:semicolon
id|SiS_LVDSCRT1800x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_LVDSCRT11024x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_LVDSCRT11400x1050_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11400x1050_1
suffix:semicolon
id|SiS_LVDSCRT11024x600_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x600_1
suffix:semicolon
id|SiS_LVDSCRT11152x768_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11152x768_1
suffix:semicolon
id|SiS_LVDSCRT1800x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_LVDSCRT11400x1050_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11400x1050_1_H
suffix:semicolon
id|SiS_LVDSCRT11024x600_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x600_1_H
suffix:semicolon
id|SiS_LVDSCRT11152x768_1_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11152x768_1_H
suffix:semicolon
id|SiS_LVDSCRT1800x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_LVDSCRT11024x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_LVDSCRT11400x1050_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11400x1050_2
suffix:semicolon
id|SiS_LVDSCRT11024x600_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x600_2
suffix:semicolon
id|SiS_LVDSCRT11152x768_2
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11152x768_2
suffix:semicolon
id|SiS_LVDSCRT1800x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_LVDSCRT11280x1024_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_LVDSCRT11400x1050_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11400x1050_2_H
suffix:semicolon
id|SiS_LVDSCRT11024x600_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11024x600_2_H
suffix:semicolon
id|SiS_LVDSCRT11152x768_2_H
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT11152x768_2_H
suffix:semicolon
id|SiS_LVDSCRT1XXXxXXX_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1XXXxXXX_1
suffix:semicolon
id|SiS_LVDSCRT1320x480_1
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_LVDSCRT1320x480_1
suffix:semicolon
id|SiS_CHTVCRT1UNTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_CHTVCRT1ONTSC
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_CHTVCRT1UPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1UPAL
suffix:semicolon
id|SiS_CHTVCRT1OPAL
op_assign
(paren
id|SiS_LVDSCRT1DataStruct
op_star
)paren
id|SiS310_CHTVCRT1OPAL
suffix:semicolon
id|SiS_CHTVReg_UNTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_UNTSC
suffix:semicolon
id|SiS_CHTVReg_ONTSC
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_ONTSC
suffix:semicolon
id|SiS_CHTVReg_UPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_UPAL
suffix:semicolon
id|SiS_CHTVReg_OPAL
op_assign
(paren
id|SiS_CHTVRegDataStruct
op_star
)paren
id|SiS310_CHTVReg_OPAL
suffix:semicolon
id|SiS_LCDACRT1800x600_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_1
suffix:semicolon
id|SiS_LCDACRT11024x768_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_1
suffix:semicolon
id|SiS_LCDACRT11280x1024_1
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_1
suffix:semicolon
id|SiS_LCDACRT1800x600_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_1_H
suffix:semicolon
id|SiS_LCDACRT11024x768_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_1_H
suffix:semicolon
id|SiS_LCDACRT11280x1024_1_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_1_H
suffix:semicolon
id|SiS_LCDACRT1800x600_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_2
suffix:semicolon
id|SiS_LCDACRT11024x768_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_2
suffix:semicolon
id|SiS_LCDACRT11280x1024_2
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_2
suffix:semicolon
id|SiS_LCDACRT1800x600_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT1800x600_2_H
suffix:semicolon
id|SiS_LCDACRT11024x768_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11024x768_2_H
suffix:semicolon
id|SiS_LCDACRT11280x1024_2_H
op_assign
(paren
id|SiS_LCDACRT1DataStruct
op_star
)paren
id|SiS310_LCDACRT11280x1024_2_H
suffix:semicolon
id|SiS_CHTVVCLKUNTSC
op_assign
id|SiS310_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_CHTVVCLKONTSC
op_assign
id|SiS310_CHTVVCLKONTSC
suffix:semicolon
id|SiS_CHTVVCLKUPAL
op_assign
id|SiS310_CHTVVCLKUPAL
suffix:semicolon
id|SiS_CHTVVCLKOPAL
op_assign
id|SiS310_CHTVVCLKOPAL
suffix:semicolon
id|Panel320x480
op_assign
id|Panel310_320x480
suffix:semicolon
id|Panel640x480
op_assign
id|Panel310_640x480
suffix:semicolon
id|Panel800x600
op_assign
id|Panel310_800x600
suffix:semicolon
id|Panel1024x768
op_assign
id|Panel310_1024x768
suffix:semicolon
id|Panel1280x1024
op_assign
id|Panel310_1280x1024
suffix:semicolon
id|Panel1280x960
op_assign
id|Panel310_1280x960
suffix:semicolon
id|Panel1600x1200
op_assign
id|Panel310_1600x1200
suffix:semicolon
id|Panel1400x1050
op_assign
id|Panel310_1400x1050
suffix:semicolon
id|Panel1152x768
op_assign
id|Panel310_1152x768
suffix:semicolon
id|Panel1152x864
op_assign
id|Panel310_1152x864
suffix:semicolon
id|Panel1280x768
op_assign
id|Panel310_1280x768
suffix:semicolon
id|Panel1024x600
op_assign
id|Panel310_1024x600
suffix:semicolon
id|PanelMax
op_assign
id|Panel310_320x480
suffix:semicolon
multiline_comment|/* TW: highest value */
id|PanelMinLVDS
op_assign
id|Panel310_800x600
suffix:semicolon
multiline_comment|/* TW: lowest value LVDS */
id|PanelMin301
op_assign
id|Panel310_1024x768
suffix:semicolon
multiline_comment|/* TW: lowest value 301 */
)brace
macro_line|#endif
macro_line|#ifndef LINUX_XF86
multiline_comment|/* -------------- SiSInit -----------------*/
id|BOOLEAN
DECL|function|SiSInit
id|SiSInit
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
id|UCHAR
id|i
comma
id|temp
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|SR11
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|UCHAR
id|temp1
suffix:semicolon
id|ULONG
id|base
suffix:semicolon
macro_line|#endif
id|UCHAR
id|SR13
op_assign
l_int|0
comma
id|SR14
op_assign
l_int|0
comma
id|SR16
op_assign
l_int|0
comma
id|SR17
op_assign
l_int|0
comma
id|SR19
op_assign
l_int|0
comma
id|SR1A
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS300
id|UCHAR
id|SR18
op_assign
l_int|0
comma
id|SR12
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
id|UCHAR
id|CR37
op_assign
l_int|0
comma
id|CR38
op_assign
l_int|0
comma
id|CR79
op_assign
l_int|0
comma
id|CR7A
op_assign
l_int|0
comma
id|CR7B
op_assign
l_int|0
comma
id|CR7C
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|SR1B
op_assign
l_int|0
comma
id|SR15
op_assign
l_int|0
suffix:semicolon
id|PSIS_DSReg
id|pSR
suffix:semicolon
id|ULONG
id|Temp
suffix:semicolon
macro_line|#endif
id|UCHAR
id|VBIOSVersion
(braket
l_int|5
)braket
suffix:semicolon
r_if
c_cond
(paren
id|FBAddr
op_eq
l_int|0
)paren
(brace
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|BaseAddr
op_eq
l_int|0
)paren
(brace
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
id|SiS_SetReg3
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|BaseAddr
op_plus
l_int|0x12
)paren
comma
l_int|0x67
)paren
suffix:semicolon
multiline_comment|/* 3c2 &lt;- 67 ,ynlai */
macro_line|#ifdef SIS315H
multiline_comment|/*if(HwDeviceExtension-&gt;jChipType &gt; SIS_315H)*/
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|HwDeviceExtension-&gt;bIntegratedMMEnabled
)paren
(brace
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
multiline_comment|/* alan  */
)brace
macro_line|#endif
id|SiS_MemoryCopy
c_func
(paren
id|VBIOSVersion
comma
id|HwDeviceExtension-&gt;szVBIOSVer
comma
l_int|4
)paren
suffix:semicolon
id|VBIOSVersion
(braket
l_int|4
)braket
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* 09/07/99 modify by domao */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|InitTo310Pointer
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
id|InitTo300Pointer
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* TW: Set SiS Register globals */
id|SiSRegInit
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/* TW: Determine LVDS/CH70xx/TRUMPION */
id|SiS_Set_LVDS_TRUMPION
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* 1.Openkey - unlock registers */
macro_line|#ifdef LINUX_KERNEL
macro_line|#ifdef SIS300                                         &t;/* Set SR14*/
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000060
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_rshift_assign
(paren
l_int|16
op_plus
l_int|8
op_plus
l_int|4
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0x07
suffix:semicolon
id|temp1
op_increment
suffix:semicolon
id|temp1
op_assign
l_int|1
op_lshift
id|temp1
suffix:semicolon
id|SR14
op_assign
id|temp1
op_minus
l_int|1
suffix:semicolon
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0x00000020
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SR14
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_else
id|SR14
op_or_assign
l_int|0x40
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H                                         /* Set SR14*/
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
(brace
id|base
op_assign
l_int|0x80000060
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_rshift_assign
(paren
l_int|16
op_plus
l_int|8
op_plus
l_int|4
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0x07
suffix:semicolon
id|temp1
op_increment
suffix:semicolon
id|temp1
op_assign
l_int|1
op_lshift
id|temp1
suffix:semicolon
id|SR14
op_assign
id|temp1
op_minus
l_int|1
suffix:semicolon
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0x00000020
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SR14
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_else
id|SR14
op_or_assign
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|base
op_assign
l_int|0x80000064
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_rshift_assign
l_int|4
suffix:semicolon
id|temp1
op_and_assign
l_int|0x07
suffix:semicolon
r_if
c_cond
(paren
id|temp1
OG
l_int|2
)paren
(brace
id|temp
op_assign
id|temp1
suffix:semicolon
r_switch
c_cond
(paren
id|temp
)paren
(brace
r_case
l_int|3
suffix:colon
id|temp1
op_assign
l_int|0x07
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|temp1
op_assign
l_int|0x0F
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|temp1
op_assign
l_int|0x1F
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|temp1
op_assign
l_int|0x05
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|temp1
op_assign
l_int|0x17
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
r_break
suffix:semicolon
)brace
)brace
id|SR14
op_assign
id|temp1
suffix:semicolon
id|base
op_assign
l_int|0x8000007C
suffix:semicolon
id|OutPortLong
c_func
(paren
id|base
comma
l_int|0xcf8
)paren
suffix:semicolon
id|temp1
op_assign
id|InPortLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|temp1
op_and_assign
l_int|0x00000020
suffix:semicolon
r_if
c_cond
(paren
id|temp1
)paren
(brace
id|SR14
op_or_assign
l_int|0x80
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#endif  /* Linux kernel */
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SR12
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x12
)paren
suffix:semicolon
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SR16
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SR17
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|SR18
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|SR19
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|SR1A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|SR19
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|SR19
op_assign
(paren
id|SR19
)paren
op_logical_or
l_int|0x01
suffix:semicolon
multiline_comment|/* TW: ??? || ??? */
r_if
c_cond
(paren
id|SR19
op_eq
l_int|0x00
)paren
(brace
id|SR13
op_assign
l_int|0x22
suffix:semicolon
id|SR14
op_assign
l_int|0x00
suffix:semicolon
id|SR15
op_assign
l_int|0x01
suffix:semicolon
id|SR16
op_assign
l_int|0x00
suffix:semicolon
id|SR17
op_assign
l_int|0x00
suffix:semicolon
id|SR1A
op_assign
l_int|0x00
suffix:semicolon
id|SR1B
op_assign
l_int|0x00
suffix:semicolon
id|CR37
op_assign
l_int|0x00
suffix:semicolon
id|CR38
op_assign
l_int|0x00
suffix:semicolon
id|CR79
op_assign
l_int|0x00
suffix:semicolon
id|CR7A
op_assign
l_int|0x00
suffix:semicolon
id|CR7B
op_assign
l_int|0x00
suffix:semicolon
id|CR7C
op_assign
l_int|0x00
suffix:semicolon
)brace
r_else
(brace
id|SR13
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
suffix:semicolon
id|SR14
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SR15
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|SR16
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SR17
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|SR1A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|SR1B
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1B
)paren
suffix:semicolon
id|CR37
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
multiline_comment|/* TW: Was 0x02 - why? */
id|CR38
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|CR79
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x79
)paren
suffix:semicolon
id|CR7A
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7A
)paren
suffix:semicolon
id|CR7B
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7B
)paren
suffix:semicolon
id|CR7C
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7C
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* ResetExtReg begin: Reset extended registers */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
suffix:semicolon
id|i
OL
l_int|0x20
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* 2.Reset Extended registers */
r_for
c_loop
(paren
id|i
op_assign
l_int|0x21
suffix:semicolon
id|i
op_le
l_int|0x27
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x3D
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x38
suffix:semicolon
id|i
op_le
l_int|0x3F
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x12
suffix:semicolon
id|i
op_le
l_int|0x1B
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x79
suffix:semicolon
id|i
op_le
l_int|0x7C
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* ResetExtReg end */
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x12
comma
id|SR12
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SR16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SR17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x18
comma
id|SR18
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SR19
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
comma
id|SR1A
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
id|SR15
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SR16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SR17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SR19
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
comma
id|SR1A
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1B
comma
id|SR1B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
id|CR37
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x38
comma
id|CR38
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x79
comma
id|CR79
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7A
comma
id|CR7A
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7B
comma
id|CR7B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x7C
comma
id|CR7C
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SR1A
op_amp
l_int|0x03
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
multiline_comment|/* TW: Nothing? */
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|pSiS_SoftSetting
op_amp
id|SoftDRAMType
)paren
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3A
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|pSiS_SoftSetting
op_amp
id|SoftDRAMType
)paren
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x07
suffix:semicolon
)brace
)brace
macro_line|#endif
id|SiS_RAMType
op_assign
id|temp
suffix:semicolon
id|SiS_SetMemoryClock
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* SetDefExt1Regs begin: Set default register contents */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
op_star
id|pSiS_SR07
)paren
suffix:semicolon
multiline_comment|/* DAC speed */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_540
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_630
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ne
id|SIS_730
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
suffix:semicolon
id|i
OL
l_int|0x1C
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
id|SiS_SR15
(braket
id|i
op_minus
l_int|0x15
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x40
suffix:semicolon
id|i
op_le
l_int|0x44
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
id|SiS_CR40
(braket
id|i
op_minus
l_int|0x40
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x48
comma
l_int|0x23
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x49
comma
id|SiS_CR49
(braket
l_int|0
)braket
)paren
suffix:semicolon
multiline_comment|/*  SiS_SetReg1(SiS_P3c4,0x25,SiS_SR25[0]);  */
)brace
macro_line|#endif
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
op_star
id|pSiS_SR1F
)paren
suffix:semicolon
multiline_comment|/* DAC pedestal */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x20
comma
l_int|0xA0
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x23
comma
op_star
id|pSiS_SR23
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x24
comma
op_star
id|pSiS_SR24
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x25
comma
id|SiS_SR25
(braket
l_int|0
)braket
)paren
suffix:semicolon
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
l_int|0x84
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x22
comma
l_int|0x00
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SR11
op_assign
l_int|0x0F
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x11
comma
id|SR11
)paren
suffix:semicolon
multiline_comment|/* Power Management &amp; DDC port */
id|SiS_UnLockCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x02
comma
op_star
id|pSiS_CRT2Data_1_2
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x2E
comma
l_int|0x08
)paren
suffix:semicolon
)brace
multiline_comment|/* use VB */
macro_line|#endif
id|temp
op_assign
op_star
id|pSiS_SR32
suffix:semicolon
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
id|temp
op_and_assign
l_int|0xEF
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
id|temp
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
id|HwDeviceExtension
op_member_access_from_pointer
id|pQueryVGAConfigSpace
c_func
(paren
id|HwDeviceExtension
comma
l_int|0x50
comma
l_int|0
comma
op_amp
id|Temp
)paren
suffix:semicolon
multiline_comment|/* Get */
id|Temp
op_rshift_assign
l_int|20
suffix:semicolon
id|Temp
op_and_assign
l_int|0xF
suffix:semicolon
r_if
c_cond
(paren
id|Temp
op_ne
l_int|1
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x25
comma
id|SiS_SR25
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x49
comma
id|SiS_CR49
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x27
comma
l_int|0x1F
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
op_star
id|pSiS_SR31
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
op_star
id|pSiS_SR32
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x33
comma
op_star
id|pSiS_SR33
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|BaseAddr
)paren
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1C
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x0D
comma
op_star
id|pSiS_CRT2Data_4_D
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x0E
comma
op_star
id|pSiS_CRT2Data_4_E
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x10
comma
op_star
id|pSiS_CRT2Data_4_10
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x0F
comma
l_int|0x3F
)paren
suffix:semicolon
)brace
id|SiS_LockCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x83
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/*   SetDefExt1Regs end */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;bSkipDramSizing
op_eq
id|TRUE
)paren
(brace
id|SiS_SetDRAMModeRegister
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|pSR
op_assign
id|HwDeviceExtension-&gt;pSR
suffix:semicolon
r_if
c_cond
(paren
id|pSR
op_ne
l_int|NULL
)paren
(brace
r_while
c_loop
(paren
id|pSR-&gt;jIdx
op_ne
l_int|0xFF
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|pSR-&gt;jIdx
comma
id|pSR-&gt;jVal
)paren
suffix:semicolon
id|pSR
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
id|SiS_SetDRAMSize_310
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
)paren
(brace
multiline_comment|/* SetDRAMConfig begin */
multiline_comment|/*     SiS_SetReg1(SiS_P3c4,0x12,SR12);&n;       SiS_SetReg1(SiS_P3c4,0x13,SR13);&n;       SiS_SetReg1(SiS_P3c4,0x14,SR14);&n;       SiS_SetReg1(SiS_P3c4,0x16,SR16);&n;       SiS_SetReg1(SiS_P3c4,0x17,SR17);&n;       SiS_SetReg1(SiS_P3c4,0x18,SR18);&n;       SiS_SetReg1(SiS_P3c4,0x19,SR19);&n;       SiS_SetReg1(SiS_P3c4,0x1A,SR1A);   */
multiline_comment|/* SetDRAMConfig end */
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;bSkipDramSizing
op_eq
id|TRUE
)paren
(brace
multiline_comment|/*       &t;SiS_SetDRAMModeRegister(ROMAddr,HwDeviceExtension);&n;         &t;temp = (HwDeviceExtension-&gt;pSR)-&gt;jVal;&n;         &t;SiS_SetReg1(SiS_P3c4,0x13,temp);&n;         &t;temp = (HwDeviceExtension-&gt;pSR)-&gt;jVal;&n;         &t;SiS_SetReg1(SiS_P3c4,0x14,temp);   */
)brace
r_else
(brace
macro_line|#ifdef TC
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
l_int|0xFF
comma
l_int|0x04
)paren
suffix:semicolon
macro_line|#else
id|SiS_SetDRAMSize_300
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetDRAMSize_300
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
multiline_comment|/* SetDRAMConfig begin */
macro_line|#if 0
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x12
comma
id|SR12
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SR16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SR17
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x18
comma
id|SR18
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SR19
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
comma
id|SR1A
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* SetDRAMConfig end */
)brace
multiline_comment|/* SetDRAMSize end */
macro_line|#endif /* SIS300 */
multiline_comment|/*   SetDefExt2Regs begin  */
macro_line|#if 0
id|AGP
op_assign
l_int|1
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x30
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x30
)paren
(brace
id|AGP
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|AGP
op_eq
l_int|0
)paren
(brace
op_star
id|pSiS_SR21
op_assign
op_star
id|pSiS_SR21
op_amp
l_int|0xEF
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
op_star
id|pSiS_SR21
)paren
suffix:semicolon
r_if
c_cond
(paren
id|AGP
op_eq
l_int|1
)paren
(brace
op_star
id|pSiS_SR22
op_assign
op_star
id|pSiS_SR22
op_amp
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x22
comma
op_star
id|pSiS_SR22
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
op_star
id|pSiS_SR21
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x22
comma
op_star
id|pSiS_SR22
)paren
suffix:semicolon
multiline_comment|/*   SetDefExt2Regs end  */
macro_line|#if 0
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
id|SiS_ClearDAC
c_func
(paren
id|SiS_P3c8
)paren
suffix:semicolon
multiline_comment|/* [ynlai] 05/22/01 */
macro_line|#endif
macro_line|#ifdef LINUXBIOS   /* TW: This is not needed for our purposes */
id|SiS_DetectMonitor
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_GetSenseStatus
c_func
(paren
id|HwDeviceExtension
comma
id|ROMAddr
)paren
suffix:semicolon
multiline_comment|/* sense CRT2 */
macro_line|#endif
r_return
id|TRUE
suffix:semicolon
)brace
r_void
DECL|function|SiS_Set_LVDS_TRUMPION
id|SiS_Set_LVDS_TRUMPION
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SiS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
multiline_comment|/* TW: Read POWER_ON_TRAP and copy to CR37 */
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0xE0
)paren
op_rshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
l_int|0xF1
comma
id|temp
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
macro_line|#if 0 /* TW: This is not required */
multiline_comment|/* TW: Read POWER_ON_TRAP and copy to CR37 */
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0xE0
)paren
op_rshift
l_int|4
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
l_int|0xF1
comma
id|temp
)paren
suffix:semicolon
macro_line|#endif
)brace
macro_line|#endif
multiline_comment|/* Set globals SiS_IF_DEF... */
id|SiSSetLVDSetc
c_func
(paren
id|HwDeviceExtension
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* ===============  SiS 300 dram sizing begin  =============== */
macro_line|#ifdef SIS300
r_void
DECL|function|SiS_SetDRAMSize_300
id|SiS_SetDRAMSize_300
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|USHORT
id|SR13
comma
id|SR14
op_assign
l_int|0
comma
id|buswidth
comma
id|Done
suffix:semicolon
id|SHORT
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|data
comma
id|TotalCapacity
comma
id|PhysicalAdrOtherPage
op_assign
l_int|0
suffix:semicolon
id|ULONG
id|Addr
suffix:semicolon
id|UCHAR
id|temp
suffix:semicolon
r_int
id|PseudoRankCapacity
comma
id|PseudoTotalCapacity
comma
id|PseudoAdrPinCount
suffix:semicolon
r_int
id|RankCapacity
comma
id|AdrPinCount
comma
id|BankNumHigh
comma
id|BankNumMid
comma
id|MB2Bank
suffix:semicolon
r_int
id|PageCapacity
comma
id|PhysicalAdrHigh
comma
id|PhysicalAdrHalfPage
suffix:semicolon
id|SiSSetMode
c_func
(paren
id|HwDeviceExtension
comma
l_int|0x2e
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* Turn OFF Display  */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0xBF
)paren
suffix:semicolon
id|buswidth
op_assign
id|SiS_ChkBUSWidth_300
c_func
(paren
id|FBAddr
)paren
suffix:semicolon
id|MB2Bank
op_assign
l_int|16
suffix:semicolon
id|Done
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|6
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
(brace
r_break
suffix:semicolon
)brace
id|PseudoRankCapacity
op_assign
l_int|1
op_lshift
id|i
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|4
suffix:semicolon
id|j
op_ge
l_int|1
suffix:semicolon
id|j
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
(brace
r_break
suffix:semicolon
)brace
id|PseudoTotalCapacity
op_assign
id|PseudoRankCapacity
op_star
id|j
suffix:semicolon
id|PseudoAdrPinCount
op_assign
l_int|15
op_minus
id|j
suffix:semicolon
r_if
c_cond
(paren
id|PseudoTotalCapacity
op_le
l_int|64
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
op_le
l_int|16
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
id|Done
op_eq
l_int|1
)paren
(brace
r_break
suffix:semicolon
)brace
id|RankCapacity
op_assign
id|buswidth
op_star
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|3
)braket
suffix:semicolon
id|AdrPinCount
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|2
)braket
op_plus
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|RankCapacity
op_eq
id|PseudoRankCapacity
)paren
r_if
c_cond
(paren
id|AdrPinCount
op_le
id|PseudoAdrPinCount
)paren
(brace
r_if
c_cond
(paren
id|j
op_eq
l_int|3
)paren
(brace
multiline_comment|/* Rank No */
id|BankNumHigh
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
l_int|3
op_minus
l_int|1
suffix:semicolon
id|BankNumMid
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
l_int|1
op_minus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|BankNumHigh
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
id|j
op_minus
l_int|1
suffix:semicolon
id|BankNumMid
op_assign
id|RankCapacity
op_star
id|MB2Bank
op_star
id|j
op_div
l_int|2
op_minus
l_int|1
suffix:semicolon
)brace
id|PageCapacity
op_assign
(paren
l_int|1
op_lshift
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|1
)braket
)paren
op_star
id|buswidth
op_star
l_int|4
suffix:semicolon
id|PhysicalAdrHigh
op_assign
id|BankNumHigh
suffix:semicolon
id|PhysicalAdrHalfPage
op_assign
(paren
id|PageCapacity
op_div
l_int|2
op_plus
id|PhysicalAdrHigh
)paren
op_mod
id|PageCapacity
suffix:semicolon
id|PhysicalAdrOtherPage
op_assign
id|PageCapacity
op_star
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|2
)braket
op_plus
id|PhysicalAdrHigh
suffix:semicolon
multiline_comment|/* Write data */
multiline_comment|/*Test */
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
(paren
id|USHORT
)paren
(paren
id|temp
op_amp
l_int|0xFB
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
(paren
id|USHORT
)paren
(paren
id|temp
op_or
l_int|0x04
)paren
)paren
suffix:semicolon
multiline_comment|/*Test */
id|TotalCapacity
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|3
)braket
op_star
id|buswidth
suffix:semicolon
id|SR13
op_assign
id|SiS_DRAMType
(braket
id|k
)braket
(braket
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|4
)paren
(brace
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x80
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|2
)paren
(brace
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buswidth
op_eq
l_int|1
)paren
(brace
id|SR14
op_assign
(paren
id|TotalCapacity
op_minus
l_int|1
)paren
op_or
l_int|0x00
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|SR13
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|SR14
)paren
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|PhysicalAdrHigh
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumMid
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|BankNumMid
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHalfPage
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
(paren
id|USHORT
)paren
id|PhysicalAdrHalfPage
suffix:semicolon
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrOtherPage
suffix:semicolon
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
op_assign
id|PhysicalAdrOtherPage
suffix:semicolon
multiline_comment|/* Read data */
id|Addr
op_assign
id|FBAddr
op_plus
(paren
id|BankNumHigh
)paren
op_star
l_int|64
op_star
l_int|1024
op_plus
id|PhysicalAdrHigh
suffix:semicolon
id|data
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|Addr
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
id|PhysicalAdrHigh
)paren
(brace
id|Done
op_assign
l_int|1
suffix:semicolon
)brace
)brace
multiline_comment|/* if struct */
)brace
multiline_comment|/* for loop (k) */
)brace
multiline_comment|/* if struct */
)brace
multiline_comment|/* for loop (j) */
)brace
multiline_comment|/* for loop (i) */
)brace
id|USHORT
DECL|function|SiS_ChkBUSWidth_300
id|SiS_ChkBUSWidth_300
c_func
(paren
id|ULONG
id|FBAddress
)paren
(brace
multiline_comment|/*USHORT  data;*/
id|PULONG
id|pVideoMemory
suffix:semicolon
id|pVideoMemory
op_assign
(paren
id|PULONG
)paren
id|FBAddress
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|3
)braket
op_eq
l_int|0xCDEF0123L
)paren
(brace
multiline_comment|/*ChannelA128Bit */
r_return
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
multiline_comment|/*ChannelB64Bit */
r_return
l_int|2
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ===============  SiS 300 dram sizing end    =============== */
multiline_comment|/* ==============  SiS 310 dram sizing begin ================= */
macro_line|#ifdef SIS315H
multiline_comment|/* TW: Moved Get310DRAMType further down */
r_void
DECL|function|SiS_Delay15us
id|SiS_Delay15us
c_func
(paren
id|ULONG
id|ulMicrsoSec
)paren
(brace
)brace
r_void
DECL|function|SiS_SDR_MRS
id|SiS_SDR_MRS
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
l_int|0x3F
suffix:semicolon
multiline_comment|/* SR16 D7=0,D6=0 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* enable mode register set(MRS) low */
id|SiS_Delay15us
c_func
(paren
l_int|0x100
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* SR16 D7=1,D6=0 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* enable mode register set(MRS) high */
id|SiS_Delay15us
c_func
(paren
l_int|0x100
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DDR_MRS
id|SiS_DDR_MRS
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
multiline_comment|/* SR16 &lt;- 1F,DF,2F,AF */
multiline_comment|/* enable DLL of DDR SD/SGRAM , SR16 D4=1 */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
id|data
op_or_assign
l_int|0x10
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
op_amp
l_int|0x10
)paren
)paren
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
multiline_comment|/* SR16 D7=1,D6=1 */
id|data
op_or_assign
l_int|0xC0
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* SR16 D7=1,D6=0,D5=1,D4=0 */
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
id|data
op_or_assign
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
op_amp
l_int|0x10
)paren
)paren
id|data
op_and_assign
l_int|0x0F
suffix:semicolon
multiline_comment|/* SR16 D7=1 */
id|data
op_or_assign
l_int|0x80
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDRAMModeRegister
id|SiS_SetDRAMModeRegister
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
r_if
c_cond
(paren
id|SiS_Get310DRAMType
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
OL
l_int|2
)paren
id|SiS_SDR_MRS
c_func
(paren
)paren
suffix:semicolon
r_else
multiline_comment|/* SR16 &lt;- 0F,CF,0F,8F */
id|SiS_DDR_MRS
c_func
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DisableRefresh
id|SiS_DisableRefresh
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
)paren
suffix:semicolon
id|data
op_or_assign
l_int|0x03
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_EnableRefresh
id|SiS_EnableRefresh
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|SiS_SR15
(braket
l_int|2
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* SR17 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x19
comma
id|SiS_SR15
(braket
l_int|4
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* SR19 */
)brace
r_void
DECL|function|SiS_DisableChannelInterleaving
id|SiS_DisableChannelInterleaving
c_func
(paren
r_int
id|index
comma
id|USHORT
id|SiS_DDRDRAM_TYPE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0x1F
suffix:semicolon
r_switch
c_cond
(paren
id|SiS_DDRDRAM_TYPE
(braket
id|index
)braket
(braket
l_int|3
)braket
)paren
(brace
r_case
l_int|64
suffix:colon
id|data
op_or_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|data
op_or_assign
l_int|0x20
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|data
op_or_assign
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|data
op_or_assign
l_int|0x60
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetDRAMSizingType
id|SiS_SetDRAMSizingType
c_func
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|4
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay 50 ns */
)brace
r_void
DECL|function|SiS_CheckBusWidth_310
id|SiS_CheckBusWidth_310
c_func
(paren
id|UCHAR
op_star
id|ROMAddress
comma
id|ULONG
id|FBAddress
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|PULONG
r_volatile
id|pVideoMemory
suffix:semicolon
id|pVideoMemory
op_assign
(paren
id|PULONG
)paren
id|FBAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Get310DRAMType
c_func
(paren
id|ROMAddress
comma
id|HwDeviceExtension
)paren
OL
l_int|2
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x12
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_SDR_MRS
c_func
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|128
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xFFFFFFFFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xFFFFFFFFL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|3
)braket
op_ne
l_int|0xCDEF0123L
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|2
)braket
op_ne
l_int|0x89ABCDEFL
)paren
)paren
(brace
multiline_comment|/*ChannelA64Bit */
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
(paren
id|USHORT
)paren
(paren
id|data
op_amp
l_int|0xFD
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_ne
l_int|0x456789ABL
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_ne
l_int|0x01234567L
)paren
)paren
(brace
multiline_comment|/*ChannelB64Bit */
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|1
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
(paren
id|USHORT
)paren
(paren
(paren
id|data
op_amp
l_int|0xFD
)paren
op_or
l_int|0x01
)paren
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* DDR Dual channel */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x02
)paren
suffix:semicolon
multiline_comment|/* Channel A, 64bit */
multiline_comment|/* should delay */
id|SiS_DDR_MRS
c_func
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|0
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel A 64bit */
r_return
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel A 32bit */
id|SiS_DataBusWidth
op_assign
l_int|32
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x00
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Channel B, 64bit */
id|SiS_DDR_MRS
c_func
(paren
)paren
suffix:semicolon
id|SiS_ChannelAB
op_assign
l_int|1
suffix:semicolon
id|SiS_DataBusWidth
op_assign
l_int|64
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0x01234567L
suffix:semicolon
id|pVideoMemory
(braket
l_int|1
)braket
op_assign
l_int|0x456789ABL
suffix:semicolon
id|pVideoMemory
(braket
l_int|2
)braket
op_assign
l_int|0x89ABCDEFL
suffix:semicolon
id|pVideoMemory
(braket
l_int|3
)braket
op_assign
l_int|0xCDEF0123L
suffix:semicolon
id|pVideoMemory
(braket
l_int|4
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|5
)braket
op_assign
l_int|0x55555555L
suffix:semicolon
id|pVideoMemory
(braket
l_int|6
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
id|pVideoMemory
(braket
l_int|7
)braket
op_assign
l_int|0xAAAAAAAAL
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|1
)braket
op_eq
l_int|0x456789ABL
)paren
(brace
multiline_comment|/* Channel B 64 */
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel B 64bit */
r_return
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* error */
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_eq
l_int|0x01234567L
)paren
(brace
multiline_comment|/* Channel B 32 */
id|SiS_DataBusWidth
op_assign
l_int|32
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* error */
)brace
)brace
)brace
)brace
r_int
DECL|function|SiS_SetRank
id|SiS_SetRank
c_func
(paren
r_int
id|index
comma
id|UCHAR
id|RankNo
comma
id|UCHAR
id|SiS_ChannelAB
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
r_int
id|RankSize
suffix:semicolon
r_if
c_cond
(paren
(paren
id|RankNo
op_eq
l_int|2
)paren
op_logical_and
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_eq
l_int|2
)paren
)paren
r_return
l_int|0
suffix:semicolon
id|RankSize
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|3
)braket
op_div
l_int|2
op_star
id|SiS_DataBusWidth
op_div
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|RankNo
op_star
id|RankSize
op_le
l_int|128
)paren
(brace
id|data
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|RankSize
op_rshift_assign
l_int|1
)paren
OG
l_int|0
)paren
(brace
id|data
op_add_assign
l_int|0x10
suffix:semicolon
)brace
id|data
op_or_assign
(paren
id|RankNo
op_minus
l_int|1
)paren
op_lshift
l_int|2
suffix:semicolon
id|data
op_or_assign
(paren
id|SiS_DataBusWidth
op_div
l_int|64
)paren
op_amp
l_int|2
suffix:semicolon
id|data
op_or_assign
id|SiS_ChannelAB
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_SDR_MRS
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_SetDDRChannel
id|SiS_SetDDRChannel
c_func
(paren
r_int
id|index
comma
id|UCHAR
id|ChannelNo
comma
id|UCHAR
id|SiS_ChannelAB
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
)paren
(brace
id|USHORT
id|data
suffix:semicolon
r_int
id|RankSize
suffix:semicolon
id|RankSize
op_assign
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|3
)braket
op_div
l_int|2
op_star
id|SiS_DataBusWidth
op_div
l_int|32
suffix:semicolon
multiline_comment|/* RankSize = DRAMTYPE_TABLE[index][3]; */
r_if
c_cond
(paren
id|ChannelNo
op_star
id|RankSize
op_le
l_int|128
)paren
(brace
id|data
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|RankSize
op_rshift_assign
l_int|1
)paren
OG
l_int|0
)paren
(brace
id|data
op_add_assign
l_int|0x10
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ChannelNo
op_eq
l_int|2
)paren
id|data
op_or_assign
l_int|0x0C
suffix:semicolon
id|data
op_or_assign
(paren
id|SiS_DataBusWidth
op_div
l_int|32
)paren
op_amp
l_int|2
suffix:semicolon
id|data
op_or_assign
id|SiS_ChannelAB
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* should delay */
id|SiS_DDR_MRS
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckColumn
id|SiS_CheckColumn
c_func
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
multiline_comment|/*Increment = 1&lt;&lt;(DRAMTYPE_TABLE[index][2] + SiS_DataBusWidth / 64 + 1); */
id|Increment
op_assign
l_int|1
op_lshift
(paren
l_int|10
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckBanks
id|SiS_CheckBanks
c_func
(paren
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    FBAddress[Position]=Position; */
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckRank
id|SiS_CheckRank
c_func
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|1
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
id|RankNo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    FBAddress[Position]=Position; */
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_assign
id|Position
suffix:semicolon
multiline_comment|/* *((PULONG)(FBAddress))=Position; */
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|Position
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/*    if (FBAddress[Position]!=Position) */
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
)paren
)paren
op_ne
id|Position
)paren
multiline_comment|/*if ( (*(PULONG) (FBAddress )) !=Position) */
r_return
l_int|0
suffix:semicolon
id|Position
op_add_assign
id|Increment
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckDDRRank
id|SiS_CheckDDRRank
c_func
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
id|ULONG
id|Increment
comma
id|Position
suffix:semicolon
id|USHORT
id|data
suffix:semicolon
id|Increment
op_assign
l_int|1
op_lshift
(paren
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|2
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|1
)braket
op_plus
id|DRAMTYPE_TABLE
(braket
id|index
)braket
(braket
l_int|0
)braket
op_plus
id|SiS_DataBusWidth
op_div
l_int|64
op_plus
id|RankNo
)paren
suffix:semicolon
id|Increment
op_add_assign
id|Increment
op_div
l_int|2
suffix:semicolon
id|Position
op_assign
l_int|0
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|0
)paren
)paren
op_assign
l_int|0x01234567
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|1
)paren
)paren
op_assign
l_int|0x456789AB
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|2
)paren
)paren
op_assign
l_int|0x55555555
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|3
)paren
)paren
op_assign
l_int|0x55555555
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|4
)paren
)paren
op_assign
l_int|0xAAAAAAAA
suffix:semicolon
op_star
(paren
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
id|Position
op_plus
l_int|5
)paren
)paren
op_assign
l_int|0xAAAAAAAA
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
l_int|1
)paren
)paren
op_eq
l_int|0x456789AB
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
(paren
id|PULONG
)paren
(paren
id|FBAddress
op_plus
l_int|0
)paren
)paren
op_eq
l_int|0x01234567
)paren
r_return
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xF3
suffix:semicolon
id|data
op_or_assign
l_int|0x08
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
id|data
op_add_assign
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
comma
id|data
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckRanks
id|SiS_CheckRanks
c_func
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|r
suffix:semicolon
r_for
c_loop
(paren
id|r
op_assign
id|RankNo
suffix:semicolon
id|r
op_ge
l_int|1
suffix:semicolon
id|r
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckRank
c_func
(paren
id|r
comma
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckBanks
c_func
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckColumn
c_func
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_CheckDDRRanks
id|SiS_CheckDDRRanks
c_func
(paren
r_int
id|RankNo
comma
r_int
id|index
comma
id|USHORT
id|DRAMTYPE_TABLE
(braket
)braket
(braket
l_int|5
)braket
comma
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|r
suffix:semicolon
r_for
c_loop
(paren
id|r
op_assign
id|RankNo
suffix:semicolon
id|r
op_ge
l_int|1
suffix:semicolon
id|r
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckDDRRank
c_func
(paren
id|r
comma
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckBanks
c_func
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_CheckColumn
c_func
(paren
id|index
comma
id|DRAMTYPE_TABLE
comma
id|FBAddress
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_SDRSizing
id|SiS_SDRSizing
c_func
(paren
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|UCHAR
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|13
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetDRAMSizingType
c_func
(paren
id|i
comma
id|SiS_SDRDRAM_TYPE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|2
suffix:semicolon
id|j
OG
l_int|0
suffix:semicolon
id|j
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_SetRank
c_func
(paren
id|i
comma
(paren
id|UCHAR
)paren
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_SDRDRAM_TYPE
)paren
)paren
r_continue
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_CheckRanks
c_func
(paren
id|j
comma
id|i
comma
id|SiS_SDRDRAM_TYPE
comma
id|FBAddress
)paren
)paren
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|SiS_DDRSizing
id|SiS_DDRSizing
c_func
(paren
id|ULONG
id|FBAddress
)paren
(brace
r_int
id|i
suffix:semicolon
id|UCHAR
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetDRAMSizingType
c_func
(paren
id|i
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
id|SiS_DisableChannelInterleaving
c_func
(paren
id|i
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|2
suffix:semicolon
id|j
OG
l_int|0
suffix:semicolon
id|j
op_decrement
)paren
(brace
id|SiS_SetDDRChannel
c_func
(paren
id|i
comma
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_DDRDRAM_TYPE
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_SetRank
c_func
(paren
id|i
comma
(paren
id|UCHAR
)paren
id|j
comma
id|SiS_ChannelAB
comma
id|SiS_DDRDRAM_TYPE
)paren
)paren
r_continue
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|SiS_CheckDDRRanks
c_func
(paren
id|j
comma
id|i
comma
id|SiS_DDRDRAM_TYPE
comma
id|FBAddress
)paren
)paren
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; check if read cache pointer is correct&n;*/
r_void
DECL|function|SiS_VerifyMclk
id|SiS_VerifyMclk
c_func
(paren
id|ULONG
id|FBAddr
)paren
(brace
id|PUCHAR
id|pVideoMemory
op_assign
(paren
id|PUCHAR
)paren
id|FBAddr
suffix:semicolon
id|UCHAR
id|i
comma
id|j
suffix:semicolon
id|USHORT
id|Temp
comma
id|SR21
suffix:semicolon
id|pVideoMemory
(braket
l_int|0
)braket
op_assign
l_int|0xaa
suffix:semicolon
multiline_comment|/* alan */
id|pVideoMemory
(braket
l_int|16
)braket
op_assign
l_int|0x55
suffix:semicolon
multiline_comment|/* note: PCI read cache is off */
r_if
c_cond
(paren
(paren
id|pVideoMemory
(braket
l_int|0
)braket
op_ne
l_int|0xaa
)paren
op_logical_or
(paren
id|pVideoMemory
(braket
l_int|16
)braket
op_ne
l_int|0x55
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
comma
id|j
op_add_assign
l_int|16
)paren
(brace
id|SR21
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|Temp
op_assign
id|SR21
op_amp
l_int|0xFB
suffix:semicolon
multiline_comment|/* disable PCI post write buffer empty gating */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3C
)paren
suffix:semicolon
id|Temp
op_assign
id|Temp
op_or
l_int|0x01
suffix:semicolon
multiline_comment|/*MCLK reset */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3C
comma
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3C
)paren
suffix:semicolon
id|Temp
op_assign
id|Temp
op_amp
l_int|0xFE
suffix:semicolon
multiline_comment|/* MCLK normal operation */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3C
comma
id|Temp
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
id|SR21
)paren
suffix:semicolon
id|pVideoMemory
(braket
l_int|16
op_plus
id|j
)braket
op_assign
id|j
suffix:semicolon
r_if
c_cond
(paren
id|pVideoMemory
(braket
l_int|16
op_plus
id|j
)braket
op_eq
id|j
)paren
(brace
id|pVideoMemory
(braket
id|j
)braket
op_assign
id|j
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* TW: Is this a 315E? */
r_int
DECL|function|Is315E
id|Is315E
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|data
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x5F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x10
)paren
r_return
l_int|1
suffix:semicolon
r_else
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: For 315 only */
r_void
DECL|function|SiS_SetDRAMSize_310
id|SiS_SetDRAMSize_310
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|ULONG
id|FBAddr
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|USHORT
id|data
suffix:semicolon
macro_line|#ifdef SIS301&t;/* TW: SIS301 ??? */
multiline_comment|/*SiS_SetReg1(SiS_P3d4,0x30,0x40);   */
macro_line|#endif
macro_line|#ifdef SIS302   /* TW: SIS302 ??? */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x30
comma
l_int|0x4D
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x31
comma
l_int|0xc0
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x34
comma
l_int|0x3F
)paren
suffix:semicolon
multiline_comment|/* alan,should change value */
macro_line|#endif
id|SiSSetMode
c_func
(paren
id|HwDeviceExtension
comma
l_int|0x2e
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
(paren
id|USHORT
)paren
(paren
id|data
op_amp
l_int|0xDF
)paren
)paren
suffix:semicolon
multiline_comment|/* disable read cache */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1
)paren
suffix:semicolon
id|data
op_assign
id|data
op_or
l_int|0x20
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* Turn OFF Display */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
(paren
id|USHORT
)paren
(paren
id|data
op_or
l_int|0x0F
)paren
)paren
suffix:semicolon
multiline_comment|/* assume lowest speed DRAM */
id|SiS_SetDRAMModeRegister
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_DisableRefresh
c_func
(paren
)paren
suffix:semicolon
id|SiS_CheckBusWidth_310
c_func
(paren
id|ROMAddr
comma
id|FBAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_VerifyMclk
c_func
(paren
id|FBAddr
)paren
suffix:semicolon
multiline_comment|/* alan 2000/7/3 */
r_if
c_cond
(paren
id|SiS_Get310DRAMType
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
OL
l_int|2
)paren
id|SiS_SDRSizing
c_func
(paren
id|FBAddr
)paren
suffix:semicolon
r_else
id|SiS_DDRSizing
c_func
(paren
id|FBAddr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Is315E
c_func
(paren
)paren
)paren
(brace
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0x0C
)paren
op_eq
l_int|0x0C
)paren
(brace
multiline_comment|/* dual channel */
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0xF0
)paren
OG
l_int|0x40
)paren
id|data
op_assign
(paren
id|data
op_amp
l_int|0x0F
)paren
op_or
l_int|0x40
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* single channel */
r_if
c_cond
(paren
(paren
id|data
op_amp
l_int|0xF0
)paren
OG
l_int|0x50
)paren
id|data
op_assign
(paren
id|data
op_amp
l_int|0x0F
)paren
op_or
l_int|0x50
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
comma
id|SiS_SR15
(braket
l_int|1
)braket
(braket
id|SiS_RAMType
)braket
)paren
suffix:semicolon
multiline_comment|/* restore SR16 */
id|SiS_EnableRefresh
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
(paren
id|USHORT
)paren
(paren
id|data
op_or
l_int|0x20
)paren
)paren
suffix:semicolon
multiline_comment|/* enable read cache */
)brace
macro_line|#endif
r_void
DECL|function|SiS_SetMemoryClock
id|SiS_SetMemoryClock
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x28
comma
id|SiS_MCLKData_0
(braket
id|SiS_RAMType
)braket
dot
id|SR28
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x29
comma
id|SiS_MCLKData_0
(braket
id|SiS_RAMType
)braket
dot
id|SR29
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2A
comma
id|SiS_MCLKData_0
(braket
id|SiS_RAMType
)braket
dot
id|SR2A
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2E
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR2E
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2F
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR2F
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x30
comma
id|SiS_ECLKData
(braket
id|SiS_RAMType
)braket
dot
id|SR30
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|Is315E
c_func
(paren
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x28
comma
l_int|0x3B
)paren
suffix:semicolon
multiline_comment|/* 143 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x29
comma
l_int|0x22
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2E
comma
l_int|0x3B
)paren
suffix:semicolon
multiline_comment|/* 143 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2F
comma
l_int|0x22
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
macro_line|#endif /* ifndef LINUX_XF86 */
macro_line|#ifdef SIS315H
id|UCHAR
DECL|function|SiS_Get310DRAMType
id|SiS_Get310DRAMType
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
r_if
c_cond
(paren
op_star
id|pSiS_SoftSetting
op_amp
id|SoftDRAMType
)paren
(brace
id|data
op_assign
op_star
id|pSiS_SoftSetting
op_amp
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x07
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TW: 315 */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3a
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
)brace
r_return
id|data
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* SiSInit END */
multiline_comment|/* ----------------------------------------- */
DECL|function|SiSRegInit
r_void
id|SiSRegInit
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|SiS_P3c4
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
id|SiS_P3d4
op_assign
id|BaseAddr
op_plus
l_int|0x24
suffix:semicolon
id|SiS_P3c0
op_assign
id|BaseAddr
op_plus
l_int|0x10
suffix:semicolon
id|SiS_P3ce
op_assign
id|BaseAddr
op_plus
l_int|0x1e
suffix:semicolon
id|SiS_P3c2
op_assign
id|BaseAddr
op_plus
l_int|0x12
suffix:semicolon
id|SiS_P3ca
op_assign
id|BaseAddr
op_plus
l_int|0x1a
suffix:semicolon
id|SiS_P3c6
op_assign
id|BaseAddr
op_plus
l_int|0x16
suffix:semicolon
id|SiS_P3c7
op_assign
id|BaseAddr
op_plus
l_int|0x17
suffix:semicolon
id|SiS_P3c8
op_assign
id|BaseAddr
op_plus
l_int|0x18
suffix:semicolon
id|SiS_P3c9
op_assign
id|BaseAddr
op_plus
l_int|0x19
suffix:semicolon
id|SiS_P3da
op_assign
id|BaseAddr
op_plus
l_int|0x2A
suffix:semicolon
id|SiS_Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
multiline_comment|/* Digital video interface registers (LCD) */
id|SiS_Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
multiline_comment|/* 301 TV Encoder registers */
id|SiS_Part3Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_12
suffix:semicolon
multiline_comment|/* 301 Macrovision registers */
id|SiS_Part4Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
suffix:semicolon
multiline_comment|/* 301 VGA2 registers */
id|SiS_Part5Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
op_plus
l_int|2
suffix:semicolon
multiline_comment|/* 301 palette address port registers */
id|SiS_DDC_Port
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
multiline_comment|/* 0x3c4; */
multiline_comment|/* DDC Port ( = P3C4) */
)brace
r_void
DECL|function|SiSInitPCIetc
id|SiSInitPCIetc
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
macro_line|#ifdef LINUX_XF86
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
(brace
multiline_comment|/* TW: Set - PCI LINEAR ADDRESSING ENABLE (0x80)&n;&t;&t;  - PCI IO ENABLE  (0x20)&n;&t;&t;  - MMIO ENABLE (0x1)&n;  &t;*/
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x20
comma
l_int|0xa1
)paren
suffix:semicolon
multiline_comment|/* TW: Enable 2D (0x42) &amp; 3D accelerator (0x18) */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xFF
comma
l_int|0x5A
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
multiline_comment|/* TW: This seems to be done the same way on these chipsets */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x20
comma
l_int|0xa1
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xFF
comma
l_int|0x5A
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_void
DECL|function|SiSSetLVDSetc
id|SiSSetLVDSetc
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
(brace
id|ULONG
id|temp
suffix:semicolon
id|SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_CH70xx
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_HiVision
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_DSTN
op_assign
l_int|0
suffix:semicolon
id|SiS_IF_DEF_FSTN
op_assign
l_int|0
suffix:semicolon
id|SiS_ChrontelInit
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x5a
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x5b
)paren
)paren
(brace
id|SiS_IF_DEF_DSTN
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* for 550 dstn */
id|SiS_IF_DEF_FSTN
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* for fstn */
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0E
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|5
)paren
)paren
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
(brace
id|SiS_IF_DEF_TRUMPION
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|4
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|5
)paren
)paren
(brace
multiline_comment|/* TW: Save power status (and error check) */
id|SiS_Backup70xx
op_assign
id|SiS_GetCH700x
c_func
(paren
l_int|0x0e
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Backup70xx
op_ne
l_int|0xFFFF
)paren
id|SiS_IF_DEF_CH70xx
op_assign
l_int|1
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
multiline_comment|/* TW: CR37 is different on 310 series */
r_if
c_cond
(paren
id|SiS_IF_DEF_FSTN
)paren
multiline_comment|/* fstn: set CR37=0x04 */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
l_int|0x04
)paren
suffix:semicolon
multiline_comment|/* (fake LVDS bridge) */
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0E
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|3
)paren
)paren
(brace
id|SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
(brace
macro_line|#if 0  /* Don&squot;t know how to do this on Chrontel 7019 */
multiline_comment|/* TW: Save power status (and error check) */
id|SiS_Backup70xx
op_assign
id|SiS_GetCH700x
c_func
(paren
l_int|0x0e
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Backup70xx
op_ne
l_int|0xFFFF
)paren
macro_line|#endif
id|SiS_IF_DEF_CH70xx
op_assign
l_int|2
suffix:semicolon
)brace
id|SiS_IF_DEF_HiVision
op_assign
l_int|1
suffix:semicolon
)brace
macro_line|#endif
)brace
r_void
DECL|function|SiSInitPtr
id|SiSInitPtr
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|InitTo310Pointer
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
id|InitTo300Pointer
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n; &t;=========================================&n; &t;======== SiS SetMode Function  ==========&n; &t;=========================================&n;*/
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: This is used for non-Dual-Head mode from X */
id|BOOLEAN
DECL|function|SiSBIOSSetMode
id|SiSBIOSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
(brace
id|UShort
id|ModeNo
op_assign
l_int|0
suffix:semicolon
id|ModeNo
op_assign
id|SiS_CalcModeIndex
c_func
(paren
id|pScrn
comma
id|mode
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
r_return
id|FALSE
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Setting mode 0x%x&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
r_return
id|SiSSetMode
c_func
(paren
id|HwDeviceExtension
comma
id|pScrn
comma
id|ModeNo
)paren
suffix:semicolon
)brace
macro_line|#ifdef SISDUALHEAD
multiline_comment|/* TW: Set CRT1 mode (used for dual head) */
id|BOOLEAN
DECL|function|SiSBIOSSetModeCRT1
id|SiSBIOSSetModeCRT1
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
(brace
id|ULONG
id|temp
suffix:semicolon
id|USHORT
id|ModeIdIndex
suffix:semicolon
macro_line|#ifndef LINUX_XF86
id|USHORT
id|KeepLockReg
suffix:semicolon
macro_line|#endif
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|SISEntPtr
id|pSiSEnt
op_assign
id|pSiS-&gt;entityPrivate
suffix:semicolon
id|UShort
id|ModeNo
op_assign
l_int|0
suffix:semicolon
id|ModeNo
op_assign
id|SiS_CalcModeIndex
c_func
(paren
id|pScrn
comma
id|mode
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
r_return
id|FALSE
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Setting mode 0x%x on CRT1&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
id|SiSInitPtr
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSRegInit
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SiSInitPCIetc
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* TW: We don&squot;t clear the buffer under X */
id|flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* 1.Openkey */
id|SiS_UnLockCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_SearchModeID
c_func
(paren
id|ROMAddr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* 2.Get ModeID Table  */
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Determine VBType (301,301B,301LV,302B,302LV) */
id|SiS_GetVBType
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: Get VB information (connectors, connected devices) */
id|SiS_GetVBInfo301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetHiVision
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_GetLCDResInfo301
c_func
(paren
id|ROMAddr
comma
id|SiS_P3d4
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: I am not sure the flag&squot;s name is correct */
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x08
)paren
(brace
id|SiS_SetFlag
op_or_assign
id|CRT2IsVGA
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Set mode on CRT1 */
id|SiS_SetCRT1Group
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|BaseAddr
)paren
suffix:semicolon
id|pSiSEnt-&gt;CRT1ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|pSiSEnt-&gt;CRT1DMode
op_assign
id|mode
suffix:semicolon
multiline_comment|/* TW: SetPitch: Adapt to virtual size &amp; position */
id|SiS_SetPitchCRT1
c_func
(paren
id|pScrn
comma
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/* We have to reset CRT2 if changing mode on CRT1 */
r_if
c_cond
(paren
id|pSiSEnt-&gt;CRT2ModeNo
op_ne
op_minus
l_int|1
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;(Re-)Setting mode 0x%x on CRT2&bslash;n&quot;
comma
id|pSiSEnt-&gt;CRT2ModeNo
)paren
suffix:semicolon
id|SiSBIOSSetModeCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|pSiSEnt-&gt;pScrn_1
comma
id|pSiSEnt-&gt;CRT2DMode
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3d4
comma
l_int|0x63
comma
l_int|0xbf
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xa0
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x01
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* Backup/Set ModeNo in MMIO */
id|SiS_GetSetModeID
c_func
(paren
id|pScrn
comma
id|ModeNo
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* TW: Set CRT2 mode (used for dual head) */
id|BOOLEAN
DECL|function|SiSBIOSSetModeCRT2
id|SiSBIOSSetModeCRT2
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
(brace
id|ULONG
id|temp
suffix:semicolon
id|USHORT
id|ModeIdIndex
suffix:semicolon
macro_line|#ifndef LINUX_XF86
id|USHORT
id|KeepLockReg
suffix:semicolon
macro_line|#endif
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
id|UShort
id|ModeNo
op_assign
l_int|0
suffix:semicolon
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|SISEntPtr
id|pSiSEnt
op_assign
id|pSiS-&gt;entityPrivate
suffix:semicolon
id|ModeNo
op_assign
id|SiS_CalcModeIndex
c_func
(paren
id|pScrn
comma
id|mode
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
r_return
id|FALSE
suffix:semicolon
id|SiSInitPtr
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSRegInit
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SiSInitPCIetc
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* TW: We don&squot;t clear the buffer under X */
id|flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* TW: Save ModeNo so we can set it from within SetMode for CRT1 */
id|pSiSEnt-&gt;CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|pSiSEnt-&gt;CRT2DMode
op_assign
id|mode
suffix:semicolon
multiline_comment|/* TW: We can&squot;t set CRT2 mode before CRT1 mode is set */
r_if
c_cond
(paren
id|pSiSEnt-&gt;CRT1ModeNo
op_eq
op_minus
l_int|1
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Setting CRT2 mode delayed until after setting CRT1 mode&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Setting mode 0x%x on CRT2&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
multiline_comment|/* 1.Openkey */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/* 2.Get ModeID */
id|temp
op_assign
id|SiS_SearchModeID
c_func
(paren
id|ROMAddr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Determine VBType (301,301B,301LV,302B,302LV) */
id|SiS_GetVBType
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: Get VB information (connectors, connected devices) */
id|SiS_GetVBInfo301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetHiVision
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_GetLCDResInfo301
c_func
(paren
id|ROMAddr
comma
id|SiS_P3d4
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: I am not sure the flag&squot;s name is correct */
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x08
)paren
(brace
id|SiS_SetFlag
op_or_assign
id|CRT2IsVGA
suffix:semicolon
)brace
)brace
multiline_comment|/* Set mode on CRT2 */
r_switch
c_cond
(paren
id|HwDeviceExtension-&gt;ujVBChipID
)paren
(brace
r_case
id|VB_CHIP_301
suffix:colon
r_case
id|VB_CHIP_301B
suffix:colon
r_case
id|VB_CHIP_301LV
suffix:colon
r_case
id|VB_CHIP_302
suffix:colon
r_case
id|VB_CHIP_302B
suffix:colon
r_case
id|VB_CHIP_302LV
suffix:colon
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VB_CHIP_303
suffix:colon
r_break
suffix:semicolon
r_case
id|VB_CHIP_UNKNOWN
suffix:colon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
op_logical_or
id|SiS_IF_DEF_CH70xx
op_eq
l_int|1
op_logical_or
id|SiS_IF_DEF_TRUMPION
op_ne
l_int|0
)paren
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3d4
comma
l_int|0x63
comma
l_int|0xbf
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xa0
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x01
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: SetPitch: Adapt to virtual size &amp; position */
id|SiS_SetPitchCRT2
c_func
(paren
id|pScrn
comma
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/* Backup/Set ModeNo in MMIO - don&squot;t do this for CRT2 */
multiline_comment|/* SiS_GetSetModeID(pScrn,ModeNo); */
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif /* Dualhead */
macro_line|#endif /* Linux_XF86 */
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: We need pScrn for setting the pitch correctly */
id|BOOLEAN
DECL|function|SiSSetMode
id|SiSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|ScrnInfoPtr
id|pScrn
comma
id|USHORT
id|ModeNo
)paren
macro_line|#else
id|BOOLEAN
id|SiSSetMode
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
macro_line|#endif
(brace
id|ULONG
id|temp
suffix:semicolon
id|USHORT
id|ModeIdIndex
comma
id|KeepLockReg
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwDeviceExtension-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
id|SiSInitPtr
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSRegInit
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SiSInitPCIetc
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: We don&squot;t clear the buffer in X */
id|ModeNo
op_or_assign
l_int|0x8000
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_amp
l_int|0x8000
)paren
(brace
id|ModeNo
op_and_assign
l_int|0x007F
suffix:semicolon
id|flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|flag_clearbuffer
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* 1.Openkey */
id|KeepLockReg
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
multiline_comment|/* 2.Get ModeID Table  */
id|temp
op_assign
id|SiS_SearchModeID
c_func
(paren
id|ROMAddr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Determine VBType (301,301B,301LV,302B,302LV) */
id|SiS_GetVBType
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: Get VB information (connectors, connected devices) */
id|SiS_GetVBInfo301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetHiVision
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_GetLCDResInfo301
c_func
(paren
id|ROMAddr
comma
id|SiS_P3d4
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
multiline_comment|/* TW: I am not sure the flag&squot;s name is correct */
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
)paren
op_amp
l_int|0x08
)paren
(brace
id|SiS_SetFlag
op_or_assign
id|CRT2IsVGA
suffix:semicolon
)brace
)brace
multiline_comment|/* 3.Check memory size */
id|temp
op_assign
id|SiS_CheckMemorySize
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* TW: Set mode on CRT1 */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_SetCRT1Group
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SwitchToCRT2
)paren
)paren
(brace
id|SiS_SetCRT1Group
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Set mode on CRT2 */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_switch
c_cond
(paren
id|HwDeviceExtension-&gt;ujVBChipID
)paren
(brace
r_case
id|VB_CHIP_301
suffix:colon
r_case
id|VB_CHIP_301B
suffix:colon
r_case
id|VB_CHIP_301LV
suffix:colon
r_case
id|VB_CHIP_302
suffix:colon
r_case
id|VB_CHIP_302B
suffix:colon
r_case
id|VB_CHIP_302LV
suffix:colon
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VB_CHIP_303
suffix:colon
r_break
suffix:semicolon
r_case
id|VB_CHIP_UNKNOWN
suffix:colon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
op_logical_or
id|SiS_IF_DEF_CH70xx
op_ne
l_int|0
op_logical_or
id|SiS_IF_DEF_TRUMPION
op_ne
l_int|0
)paren
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Inserted from 650/301LV BIOS */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3d4
comma
l_int|0x63
comma
l_int|0xbf
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x15
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x01
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0xa0
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x01
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x64
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#ifdef LINUX_XF86
multiline_comment|/* TW: SetPitch: Adapt to virtual size &amp; position */
r_if
c_cond
(paren
id|pScrn
)paren
(brace
id|SiS_SetPitch
c_func
(paren
id|pScrn
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
multiline_comment|/* Backup/Set ModeNo in MMIO */
id|SiS_GetSetModeID
c_func
(paren
id|pScrn
comma
id|ModeNo
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifndef LINUX_XF86  /* TW: We never lock registers in XF86 */
r_if
c_cond
(paren
id|KeepLockReg
op_eq
l_int|0xA1
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x05
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#endif
r_return
id|TRUE
suffix:semicolon
)brace
r_void
DECL|function|SetEnableDstn
id|SetEnableDstn
c_func
(paren
)paren
multiline_comment|/* TW: Called from sis_main.c */
(brace
id|SiS_IF_DEF_DSTN
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* for 550 dstn */
)brace
r_void
DECL|function|SiS_SetCRT1Group
id|SiS_SetCRT1Group
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|StandTableIndex
comma
id|RefreshRateTableIndex
suffix:semicolon
id|SiS_CRT1Mode
op_assign
id|ModeNo
suffix:semicolon
id|StandTableIndex
op_assign
id|SiS_GetModePtr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_LowModeStuff
c_func
(paren
id|ModeNo
comma
id|HwDeviceExtension
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
)paren
)paren
(brace
id|SiS_DisableBridge
c_func
(paren
id|HwDeviceExtension
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetSeqRegs
c_func
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_SetMiscRegs
c_func
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_SetCRTCRegs
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_SetATTRegs
c_func
(paren
id|ROMAddr
comma
id|StandTableIndex
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetGRCRegs
c_func
(paren
id|ROMAddr
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_ClearExt1Regs
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_ResetCRT1VCLK
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
id|SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;(init: VBType = %x, LVDS=%d, VBInfo=%x)&bslash;n&quot;
comma
id|SiS_VBType
comma
id|SiS_IF_DEF_LVDS
comma
id|SiS_VBInfo
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* TW: Inserted this entire if-section from 650/LVDS and 650/301 BIOS */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Removed 301B301LV302B302LV check here */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtrCRT2
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
multiline_comment|/* TW: Removed 301B301LV302B302LV check here */
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|RefreshRateTableIndex
op_ne
l_int|0xFFFF
)paren
(brace
id|SiS_SetSync
c_func
(paren
id|ROMAddr
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
id|SiS_SetCRT1CRTC
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetCRT1Offset
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetCRT1VCLK
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
)paren
(brace
id|SiS_SetCRT1FIFO_300
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetCRT1FIFO_310
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SiS_SetCRT1ModeRegs
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
macro_line|#if 0  /* TW: Not done in any BIOS */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|RefreshRateTableIndex
op_ne
l_int|0xFFFF
)paren
(brace
id|SiS_SetInterlace
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
macro_line|#endif
id|SiS_LoadDAC
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag_clearbuffer
)paren
(brace
id|SiS_ClearBuffer
c_func
(paren
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef LINUX_XF86
r_void
DECL|function|SiS_SetPitch
id|SiS_SetPitch
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|UShort
id|BaseAddr
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
multiline_comment|/* TW: We need to set pitch for CRT1 if bridge is in SlaveMode, too */
r_if
c_cond
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|DISPTYPE_DISP1
)paren
op_logical_or
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_VIDEOBRIDGE
)paren
op_logical_and
(paren
(paren
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
op_logical_and
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0xa0
)paren
op_eq
l_int|0x20
)paren
op_logical_or
(paren
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
op_logical_and
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x50
)paren
op_eq
l_int|0x10
)paren
)paren
)paren
)paren
(brace
id|SiS_SetPitchCRT1
c_func
(paren
id|pScrn
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
id|DISPTYPE_DISP2
)paren
(brace
id|SiS_SetPitchCRT2
c_func
(paren
id|pScrn
comma
id|BaseAddr
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|SiS_SetPitchCRT1
id|SiS_SetPitchCRT1
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|UShort
id|BaseAddr
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|ULong
id|HDisplay
comma
id|temp
suffix:semicolon
id|HDisplay
op_assign
id|pSiS-&gt;scrnPitch
op_div
l_int|8
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x13
comma
(paren
id|HDisplay
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0E
)paren
op_amp
l_int|0xF0
)paren
op_or
(paren
id|HDisplay
op_rshift
l_int|8
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetPitchCRT2
id|SiS_SetPitchCRT2
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|UShort
id|BaseAddr
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|ULong
id|HDisplay
comma
id|temp
suffix:semicolon
id|HDisplay
op_assign
id|pSiS-&gt;scrnPitch
op_div
l_int|8
suffix:semicolon
multiline_comment|/* Unlock CRT2 */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0xFF
comma
l_int|0x01
)paren
suffix:semicolon
r_else
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x24
comma
l_int|0xFF
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x07
comma
(paren
id|HDisplay
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x09
)paren
op_amp
l_int|0xF0
)paren
op_or
(paren
(paren
id|HDisplay
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part1Port
comma
l_int|0x09
comma
id|temp
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* TW: Checked against 650/301 and 630/301B BIOS */
r_void
DECL|function|SiS_GetVBType
id|SiS_GetVBType
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag
suffix:semicolon
id|SiS_VBType
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_return
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* TW: Illegal values not welcome... */
r_if
c_cond
(paren
id|flag
OG
l_int|10
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|flag
op_ge
l_int|2
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0xB0
)paren
(brace
id|SiS_VBType
op_assign
id|VB_SIS302B
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0xD0
)paren
(brace
id|SiS_VBType
op_assign
id|VB_SIS302LV
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|flag
op_eq
l_int|1
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0xB0
)paren
(brace
id|SiS_VBType
op_assign
id|VB_SIS301B
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|0xD0
)paren
(brace
id|SiS_VBType
op_assign
id|VB_SIS301LV
suffix:semicolon
)brace
)brace
r_else
id|SiS_VBType
op_assign
id|VB_SIS301
suffix:semicolon
)brace
multiline_comment|/* TW: This is checked in 630 BIOS, but not used */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|flag
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x23
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_VBType
op_or_assign
id|VB_NoLCD
suffix:semicolon
)brace
)brace
)brace
)brace
id|BOOLEAN
DECL|function|SiS_SearchModeID
id|SiS_SearchModeID
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
op_star
id|ModeNo
comma
id|USHORT
op_star
id|ModeIdIndex
)paren
(brace
id|UCHAR
id|VGAINFO
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Replaces ds:449 */
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|ModeNo
)paren
op_le
l_int|5
)paren
(brace
(paren
op_star
id|ModeNo
)paren
op_or_assign
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
(paren
op_star
id|ModeNo
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_eq
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|3
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VGAINFO
op_amp
l_int|0x80
)paren
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines  */
multiline_comment|/* else 350 lines  */
)brace
multiline_comment|/* else 200 lines  */
)brace
r_else
(brace
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
(paren
op_star
id|ModeNo
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* For SiS 300 oem util: Search VBModeID */
id|BOOLEAN
DECL|function|SiS_SearchVBModeID
id|SiS_SearchVBModeID
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
op_star
id|ModeNo
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|UCHAR
id|VGAINFO
op_assign
l_int|0x11
suffix:semicolon
multiline_comment|/* TW: Replaces ds:449 */
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|5
)paren
(brace
op_star
id|ModeNo
op_or_assign
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
id|ModeIdIndex
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
op_star
id|ModeNo
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|ModeID
op_eq
l_int|0xFF
)paren
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_ne
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
op_star
id|ModeNo
OG
l_int|0x03
)paren
(brace
r_return
(paren
(paren
id|BOOLEAN
)paren
id|ModeIdIndex
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x80
)paren
(brace
r_return
(paren
(paren
id|BOOLEAN
)paren
id|ModeIdIndex
)paren
suffix:semicolon
)brace
id|ModeIdIndex
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
id|ModeIdIndex
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
r_return
(paren
(paren
id|BOOLEAN
)paren
id|ModeIdIndex
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Checked against 630/301B and 315 BIOS */
id|BOOLEAN
DECL|function|SiS_CheckMemorySize
id|SiS_CheckMemorySize
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|memorysize
comma
id|modeflag
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|memorysize
op_assign
id|modeflag
op_amp
id|MemoryInfoFlag
suffix:semicolon
id|memorysize
op_rshift_assign
id|MemorySizeShift
suffix:semicolon
id|memorysize
op_increment
suffix:semicolon
multiline_comment|/* Get memory size */
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* Get DRAM Size    */
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
multiline_comment|/* 315 */
id|temp
op_assign
l_int|1
op_lshift
(paren
(paren
id|temp
op_amp
l_int|0x0F0
)paren
op_rshift
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x0c
)paren
op_eq
l_int|0x08
)paren
(brace
multiline_comment|/* DDR asymetric */
id|temp
op_add_assign
(paren
id|temp
op_div
l_int|2
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|temp
op_amp
l_int|0x0c
)paren
op_ne
l_int|0
)paren
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 300, 540, 630, 730 */
id|temp
op_and_assign
l_int|0x3F
suffix:semicolon
id|temp
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
OL
id|memorysize
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_else
r_return
id|TRUE
suffix:semicolon
)brace
id|UCHAR
DECL|function|SiS_GetModePtr
id|SiS_GetModePtr
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_StTableIndex
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_ModeType
op_le
l_int|0x02
)paren
(brace
id|index
op_assign
l_int|0x1B
suffix:semicolon
)brace
multiline_comment|/* 02 -&gt; ModeEGA  */
r_else
id|index
op_assign
l_int|0x0F
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07, 1.10a) and 650/301LV BIOS */
r_void
DECL|function|SiS_SetSeqRegs
id|SiS_SetSeqRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|SRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x00
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Set SR0  */
id|SRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
multiline_comment|/* TW: wdr/300: if(SiS_LCDInfo &amp; LCDNonExpanding) { */
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
id|SRdata
op_or_assign
l_int|0x20
suffix:semicolon
multiline_comment|/* screen off  */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
id|SRdata
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|02
suffix:semicolon
id|i
op_le
l_int|04
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
id|SRdata
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Checked against 650/301LV and 65/LVDS 1.10.07 BIOS */
r_void
DECL|function|SiS_SetMiscRegs
id|SiS_SetMiscRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|Miscdata
suffix:semicolon
id|Miscdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|MISC
suffix:semicolon
r_if
c_cond
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|Miscdata
op_or_assign
l_int|0x0C
suffix:semicolon
)brace
)brace
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c2
comma
id|Miscdata
)paren
suffix:semicolon
)brace
multiline_comment|/* Checked against 650/LVDS (1.10.07) and 650/301LV BIOS (630 code still there!) */
r_void
DECL|function|SiS_SetCRTCRegs
id|SiS_SetCRTCRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|CRTCdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
multiline_comment|/* Unlock CRTC */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x18
suffix:semicolon
id|i
op_increment
)paren
(brace
id|CRTCdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
id|CRTCdata
)paren
suffix:semicolon
multiline_comment|/* Set CRTC(3d4) */
)brace
r_if
c_cond
(paren
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwDeviceExtension-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
multiline_comment|/* for 630S0 */
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToTV
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x18
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07), 650/301LV and 630/301B BIOS */
r_void
DECL|function|SiS_SetATTRegs
id|SiS_SetATTRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
id|ARdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x13
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ARdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|ATTR
(braket
id|i
)braket
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
(paren
id|i
op_le
l_int|0x0f
)paren
op_logical_or
(paren
id|i
op_eq
l_int|0x11
)paren
)paren
(brace
r_if
c_cond
(paren
id|ds
suffix:colon
l_int|489
op_amp
l_int|0x08
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|i
op_eq
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_and
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
)paren
(brace
multiline_comment|/* TW: From 650/LVDS 1.10.07, 1.10a */
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
multiline_comment|/* TW: wdr: if(SiS_LCDInfo &amp; LCDNonExpanding) { */
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_GetReg2
c_func
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c0
comma
id|i
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c0
comma
id|ARdata
)paren
suffix:semicolon
multiline_comment|/* set data   */
)brace
id|SiS_GetReg2
c_func
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c0
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c0
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* set data   */
id|SiS_GetReg2
c_func
(paren
id|SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* Enable Attribute  */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c0
comma
l_int|0x20
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07, 1.10a) and 650/301LV BIOS */
r_void
DECL|function|SiS_SetGRCRegs
id|SiS_SetGRCRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|GRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x08
suffix:semicolon
id|i
op_increment
)paren
(brace
id|GRdata
op_assign
id|SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|GRC
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* Get GR from file */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3ce
comma
id|i
comma
id|GRdata
)paren
suffix:semicolon
multiline_comment|/* Set GR(3ce) */
)brace
r_if
c_cond
(paren
id|SiS_ModeType
OG
id|ModeVGA
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3ce
comma
l_int|0x05
comma
l_int|0xBF
)paren
suffix:semicolon
multiline_comment|/* 256 color disable */
)brace
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07, 1.10a), 650/301LV and 630/301B BIOS */
r_void
DECL|function|SiS_ClearExt1Regs
id|SiS_ClearExt1Regs
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|0x0E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
l_int|0x00
)paren
suffix:semicolon
)brace
multiline_comment|/* Clear SR0A-SR0E */
multiline_comment|/* TW: New from 650/LVDS/301LV BIOSes: */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x37
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07) and 650/301LV BIOS */
r_void
DECL|function|SiS_SetSync
id|SiS_SetSync
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|sync
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|sync
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_rshift
l_int|8
suffix:semicolon
id|sync
op_and_assign
l_int|0xC0
suffix:semicolon
id|temp
op_assign
l_int|0x2F
op_or
id|sync
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c2
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* Set Misc(3c2) */
)brace
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07) and 650/301LV BIOS */
r_void
DECL|function|SiS_SetCRT1CRTC
id|SiS_SetCRT1CRTC
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
id|USHORT
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag
comma
id|j
suffix:semicolon
id|USHORT
id|ResInfo
comma
id|DisplayType
suffix:semicolon
id|SiS_LCDACRT1DataStruct
op_star
id|LCDACRT1Ptr
op_assign
l_int|NULL
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
multiline_comment|/*unlock cr0-7  */
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
(paren
id|VB_SIS302B
op_or
id|VB_SIS302LV
)paren
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/* 302B LCDA - TW: Not done in any BIOS version */
id|temp
op_assign
id|SiS_GetLCDACRT1Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
op_amp
id|ResInfo
comma
op_amp
id|DisplayType
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|DisplayType
)paren
(brace
r_case
l_int|0
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_1_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT1800x600_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11024x768_2_H
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
id|LCDACRT1Ptr
op_assign
id|SiS_LCDACRT11280x1024_2_H
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|0
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x00
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
comma
id|j
op_assign
l_int|8
suffix:semicolon
id|i
op_le
l_int|0x12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
comma
id|j
op_assign
l_int|11
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
comma
id|j
op_assign
l_int|13
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
id|j
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0E0
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|LCDACRT1Ptr
op_plus
id|ResInfo
)paren
op_member_access_from_pointer
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x01
suffix:semicolon
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x080
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x03
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x14
comma
l_int|0x4F
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* LVDS, 301, 301B, 301LV, 302LV, (302B non-LCDA) */
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
multiline_comment|/* Get index */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|07
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|j
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|10
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|j
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
id|j
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|15
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
id|j
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0xE0
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
suffix:semicolon
id|tempah
op_and_assign
l_int|0x01
suffix:semicolon
id|tempah
op_lshift_assign
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x09
comma
l_int|0xDF
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x03
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x14
comma
l_int|0x4F
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* TW: Set offset and pitch - partly overruled by SetPitch() in XF86 */
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07), 650/301LV and 315 BIOS */
r_void
DECL|function|SiS_SetCRT1Offset
id|SiS_SetCRT1Offset
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|DisplayUnit
comma
id|infoflag
suffix:semicolon
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|DisplayUnit
op_assign
id|SiS_GetOffset
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|DisplayUnit
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0E
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|DisplayUnit
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x13
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|DisplayUnit
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|DisplayUnit
op_lshift_assign
l_int|5
suffix:semicolon
id|temp
op_assign
(paren
id|DisplayUnit
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|DisplayUnit
op_amp
l_int|0xff
)paren
id|temp
op_increment
suffix:semicolon
id|temp
op_increment
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: New from 650/LVDS 1.10.07, 630/301B and 630/LVDS BIOS */
r_void
DECL|function|SiS_ResetCRT1VCLK
id|SiS_ResetCRT1VCLK
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|index
suffix:semicolon
multiline_comment|/* TW: We only need to do this if Panel Link is to be&n;    *     initialized, thus on 630/LVDS/301B, and 650/LVDS&n;    */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
r_return
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0xCF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|index
op_assign
l_int|1
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2C
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0xcf
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0x10
)paren
suffix:semicolon
)brace
id|index
op_assign
l_int|0
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2C
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
)brace
multiline_comment|/* TW: Checked against 650/LVDS, 650/301LV, 315, 630/301B, 630/LVDS BIOS */
r_void
DECL|function|SiS_SetCRT1VCLK
id|SiS_SetCRT1VCLK
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|index
suffix:semicolon
macro_line|#if 0&t;/* TW: Wrong. 650/301LV uses same table for LCDA and CRT1 */
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
multiline_comment|/* TW: For 302B/302LV LCDA */
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0xCF
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_VBVCLKData
(braket
id|index
)braket
dot
id|Part4_A
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_VBVCLKData
(braket
id|index
)braket
dot
id|Part4_B
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
macro_line|#endif
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
macro_line|#if 0   /* TW: All BIOSes use GetVCLK2Ptr instead */
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0xCF
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x31
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2C
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
)brace
macro_line|#if 0
)brace
macro_line|#endif
)brace
macro_line|#if 0  /* TW: Not used */
r_void
id|SiS_IsLowResolution
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|ModeFlag
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0x7F
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|ModeFlag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeFlag
op_amp
id|HalfDCLK
)paren
op_logical_and
(paren
id|ModeFlag
op_amp
id|DoubleScanMode
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xF7
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/* TW: Checked against 630/LVDS, 650/LVDS and 315 BIOS */
r_void
DECL|function|SiS_SetCRT1ModeRegs
id|SiS_SetCRT1ModeRegs
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
comma
id|data3
suffix:semicolon
id|USHORT
id|infoflag
op_assign
l_int|0
comma
id|modeflag
suffix:semicolon
id|USHORT
id|resindex
comma
id|xres
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|infoflag
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
l_int|0x3F
)paren
suffix:semicolon
multiline_comment|/* DAC pedestal */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|data
op_assign
id|infoflag
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0
suffix:semicolon
id|data2
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x06
)paren
op_amp
l_int|0xC0
suffix:semicolon
multiline_comment|/* TW: Preserve Xv display mode (DCLK/TCLK) ! */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_ModeType
OG
l_int|0x02
)paren
(brace
id|data2
op_or_assign
l_int|0x02
suffix:semicolon
id|data3
op_assign
(paren
id|SiS_ModeType
op_minus
id|ModeVGA
)paren
op_lshift
l_int|2
suffix:semicolon
id|data2
op_or_assign
id|data3
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|data
op_amp
id|InterlaceMode
)paren
(brace
id|data2
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x06
comma
id|data2
)paren
suffix:semicolon
id|resindex
op_assign
id|SiS_GetResInfo
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|xres
op_assign
id|SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
r_else
(brace
id|xres
op_assign
id|SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
id|data
op_assign
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
r_if
c_cond
(paren
id|xres
op_eq
l_int|1024
)paren
(brace
id|data
op_assign
l_int|0x0035
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x0048
suffix:semicolon
)brace
id|data2
op_assign
id|data
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x19
comma
id|data2
)paren
suffix:semicolon
id|data2
op_assign
(paren
id|data
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x1a
comma
l_int|0xFC
comma
id|data2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0x08
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|LineCompareOff
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xB7
comma
l_int|0x08
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xB7
)paren
suffix:semicolon
)brace
multiline_comment|/* 630 BIOS does something for mode 0x12 here */
)brace
r_else
(brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|LineCompareOff
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xB7
comma
l_int|0x08
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xB7
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* TW: 315 BIOS sets SR17 here (0x18bf) */
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
(brace
id|data
op_assign
id|SiS_Get310DRAMType
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|data
op_assign
id|SiS_SR15
(braket
l_int|2
)braket
(braket
id|data
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_eq
id|ModeText
)paren
(brace
id|data
op_and_assign
l_int|0xc7
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
id|SiS_GetOffset
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|data2
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|data2
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|data3
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|data3
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|data3
op_eq
l_int|0
)paren
(brace
id|data3
op_increment
suffix:semicolon
)brace
id|data2
op_div_assign
id|data3
suffix:semicolon
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x50
)paren
(brace
id|data
op_and_assign
l_int|0x0f
suffix:semicolon
id|data
op_or_assign
l_int|0x50
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x17
comma
id|data
)paren
suffix:semicolon
)brace
macro_line|#endif
id|data
op_assign
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ne
id|ModeText
)paren
(brace
id|data
op_assign
id|data
op_xor
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ne
id|ModeEGA
)paren
(brace
id|data
op_assign
id|data
op_xor
l_int|0xA0
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x21
comma
l_int|0x1F
comma
id|data
)paren
suffix:semicolon
id|SiS_SetVCLKState
c_func
(paren
id|ROMAddr
comma
id|HwDeviceExtension
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
multiline_comment|/* TW: New */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x40
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x52
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x52
comma
l_int|0x6c
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
multiline_comment|/* TW: Checked against 315, 650/LVDS, 650/301LV, 630/301B and 630/LVDS BIOS */
r_void
DECL|function|SiS_SetVCLKState
id|SiS_SetVCLKState
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|VCLK
comma
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|VCLK
op_assign
l_int|0
suffix:semicolon
r_else
(brace
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|VCLK
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* 300 series */
id|data2
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
OG
l_int|150
)paren
(brace
id|data2
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
l_int|0x7B
comma
id|data2
)paren
suffix:semicolon
multiline_comment|/* DAC speed */
id|data2
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|150
)paren
(brace
id|data2
op_or_assign
l_int|0x08
suffix:semicolon
)brace
multiline_comment|/* VCLK &gt; 150 */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
l_int|0xF7
comma
id|data2
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 310/325 series */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|data
op_and_assign
l_int|0xf3
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|166
)paren
(brace
id|data
op_or_assign
l_int|0x0c
suffix:semicolon
)brace
multiline_comment|/* TW: Was 200; is 166 in 650 and 315 BIOSes */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x32
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|166
)paren
(brace
multiline_comment|/* TW: Was 200, is 166 in 650 and 315 BIOSes */
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1f
comma
l_int|0xe7
)paren
suffix:semicolon
)brace
macro_line|#if 0 /* Not done in 315 and 650/301LV/LVDS BIOSes: */
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
multiline_comment|/* DAC pedestal */
id|data
op_and_assign
l_int|0xE7
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
OL
l_int|200
)paren
(brace
id|data
op_or_assign
l_int|0x10
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* DAC pedestal */
macro_line|#endif
)brace
id|data2
op_assign
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|135
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|160
)paren
)paren
(brace
id|data2
op_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|160
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|260
)paren
)paren
(brace
id|data2
op_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|260
)paren
(brace
id|data2
op_assign
l_int|0x00
suffix:semicolon
)brace
multiline_comment|/* disable 24bit palette RAM gamma correction  */
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
(brace
r_if
c_cond
(paren
(paren
id|VCLK
op_eq
l_int|203
)paren
op_logical_or
(paren
id|VCLK
OL
l_int|234
)paren
)paren
(brace
id|data2
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
l_int|0xFC
comma
id|data2
)paren
suffix:semicolon
multiline_comment|/* DAC speed */
)brace
r_else
(brace
multiline_comment|/* TW: This is done in 650/LVDS/301LV BIOSes; Not in 315 BIOS */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|13
)paren
(brace
id|data2
op_and_assign
l_int|0xfc
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x07
comma
l_int|0xF8
comma
id|data2
)paren
suffix:semicolon
multiline_comment|/* DAC speed */
)brace
)brace
r_void
DECL|function|SiS_LoadDAC
id|SiS_LoadDAC
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
suffix:semicolon
id|USHORT
id|time
comma
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|m
comma
id|n
comma
id|o
suffix:semicolon
id|USHORT
id|si
comma
id|di
comma
id|bx
comma
id|dl
suffix:semicolon
id|USHORT
id|al
comma
id|ah
comma
id|dh
suffix:semicolon
id|USHORT
op_star
id|table
op_assign
l_int|NULL
suffix:semicolon
macro_line|#if 0
id|USHORT
id|tempah
comma
id|tempch
comma
id|tempcl
comma
id|tempdh
comma
id|tempal
comma
id|tempbx
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
id|data
op_assign
id|SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
r_else
id|data
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
op_logical_neg
(paren
id|ds
suffix:colon
l_int|489
op_amp
l_int|0x08
)paren
)paren
(brace
macro_line|#endif
id|data
op_and_assign
id|DACInfoFlag
suffix:semicolon
id|time
op_assign
l_int|64
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x00
)paren
(brace
id|table
op_assign
id|SiS_MDA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x08
)paren
(brace
id|table
op_assign
id|SiS_CGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x10
)paren
(brace
id|table
op_assign
id|SiS_EGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x18
)paren
(brace
id|time
op_assign
l_int|256
suffix:semicolon
id|table
op_assign
id|SiS_VGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
id|j
op_assign
l_int|16
suffix:semicolon
)brace
r_else
id|j
op_assign
id|time
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|j
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x01
)paren
(brace
id|data2
op_assign
l_int|0x2A
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
(brace
id|data2
op_add_assign
l_int|0x15
suffix:semicolon
)brace
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
id|data2
)paren
suffix:semicolon
id|data
op_rshift_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
id|data
)paren
suffix:semicolon
)brace
)brace
id|si
op_assign
l_int|32
suffix:semicolon
r_for
c_loop
(paren
id|m
op_assign
l_int|0
suffix:semicolon
id|m
OL
l_int|9
suffix:semicolon
id|m
op_increment
)paren
(brace
id|di
op_assign
id|si
suffix:semicolon
id|bx
op_assign
id|si
op_plus
l_int|0x04
suffix:semicolon
id|dl
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|5
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|si
op_increment
suffix:semicolon
id|SiS_WriteDAC
c_func
(paren
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 5 */
id|si
op_assign
id|si
op_minus
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|3
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|si
op_decrement
suffix:semicolon
id|SiS_WriteDAC
c_func
(paren
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|dl
op_increment
suffix:semicolon
)brace
multiline_comment|/* for 3 */
id|si
op_assign
id|si
op_plus
l_int|5
suffix:semicolon
)brace
multiline_comment|/* for 9 */
)brace
macro_line|#if 0
)brace
multiline_comment|/* ds:489 &amp; 0x08 */
macro_line|#endif
macro_line|#if 0
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|ds
suffix:colon
l_int|489
op_amp
l_int|0x08
)paren
)paren
op_logical_and
(paren
id|ds
suffix:colon
l_int|489
op_amp
l_int|0x06
)paren
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
op_minus
l_int|1
comma
id|tempbx
)paren
suffix:semicolon
multiline_comment|/* 7f87 */
id|tempah
op_assign
id|SiS_GetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
)paren
suffix:semicolon
multiline_comment|/* 7f83 */
id|tempch
op_assign
id|SiS_GetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
)paren
suffix:semicolon
id|tempcl
op_assign
id|SiS_GetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
)paren
suffix:semicolon
id|tempdh
op_assign
id|tempah
suffix:semicolon
id|tempal
op_assign
l_int|0x4d
op_star
id|tempdh
suffix:semicolon
multiline_comment|/* 7fb8 */
id|tempbx
op_add_assign
id|tempal
suffix:semicolon
id|tempal
op_assign
l_int|0x97
op_star
id|tempch
suffix:semicolon
id|tempbx
op_add_assign
id|tempal
suffix:semicolon
id|tempal
op_assign
l_int|0x1c
op_star
id|tempcl
suffix:semicolon
id|tempbx
op_add_assign
id|tempal
suffix:semicolon
r_if
c_cond
(paren
(paren
id|tempbx
op_amp
l_int|0x00ff
)paren
OG
l_int|0x80
)paren
(brace
id|tempbx
op_add_assign
l_int|0x100
suffix:semicolon
)brace
id|tempdh
op_assign
(paren
id|tempbx
op_amp
l_int|0x00ff
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempch
op_assign
id|tempdh
suffix:semicolon
id|tempcl
op_assign
id|tempdh
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
comma
(paren
id|tempbx
op_amp
l_int|0xff
)paren
)paren
suffix:semicolon
multiline_comment|/* 7f7c */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
comma
id|tempdh
)paren
suffix:semicolon
multiline_comment|/* 7f92 */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
comma
id|tempch
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
op_plus
l_int|1
comma
id|tempcl
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
r_void
DECL|function|SiS_WriteDAC
id|SiS_WriteDAC
c_func
(paren
id|USHORT
id|dl
comma
id|USHORT
id|ah
comma
id|USHORT
id|al
comma
id|USHORT
id|dh
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|bh
comma
id|bl
suffix:semicolon
id|bh
op_assign
id|ah
suffix:semicolon
id|bl
op_assign
id|al
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|temp
suffix:semicolon
)brace
)brace
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|dh
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|bh
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
(paren
id|USHORT
)paren
id|bl
)paren
suffix:semicolon
)brace
id|ULONG
DECL|function|GetDRAMSize
id|GetDRAMSize
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|ULONG
id|AdapterMemorySize
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|counter
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315H
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
)paren
(brace
id|counter
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
op_amp
l_int|0xF0
suffix:semicolon
id|counter
op_rshift_assign
l_int|4
suffix:semicolon
id|AdapterMemorySize
op_assign
l_int|1
op_lshift
id|counter
suffix:semicolon
id|AdapterMemorySize
op_mul_assign
l_int|1024
op_star
l_int|1024
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_550
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_640
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_740
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_650
)paren
)paren
(brace
id|counter
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
op_amp
l_int|0x3F
suffix:semicolon
id|counter
op_increment
suffix:semicolon
id|AdapterMemorySize
op_assign
id|counter
op_star
l_int|4
suffix:semicolon
id|AdapterMemorySize
op_mul_assign
l_int|1024
op_star
l_int|1024
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_300
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_540
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwDeviceExtension-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|AdapterMemorySize
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|AdapterMemorySize
op_assign
id|AdapterMemorySize
op_amp
l_int|0x3F
suffix:semicolon
id|AdapterMemorySize
op_increment
suffix:semicolon
id|AdapterMemorySize
op_mul_assign
l_int|1024
op_star
l_int|1024
suffix:semicolon
)brace
macro_line|#endif
r_return
id|AdapterMemorySize
suffix:semicolon
)brace
r_void
DECL|function|SiS_ClearBuffer
id|SiS_ClearBuffer
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|ModeNo
)paren
(brace
id|PVOID
id|VideoMemoryAddress
op_assign
(paren
id|PVOID
)paren
id|HwDeviceExtension-&gt;pjVideoMemoryAddress
suffix:semicolon
id|ULONG
id|AdapterMemorySize
op_assign
(paren
id|ULONG
)paren
id|HwDeviceExtension-&gt;ulVideoMemorySize
suffix:semicolon
id|PUSHORT
id|pBuffer
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
op_ge
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|AdapterMemorySize
op_assign
id|GetDRAMSize
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|SiS_SetMemory
c_func
(paren
id|VideoMemoryAddress
comma
id|AdapterMemorySize
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|pBuffer
op_assign
id|VideoMemoryAddress
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pBuffer
(braket
id|i
)braket
op_assign
l_int|0x0000
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|pBuffer
op_assign
id|VideoMemoryAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_ModeType
OL
id|ModeCGA
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pBuffer
(braket
id|i
)braket
op_assign
l_int|0x0720
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetMemory
c_func
(paren
id|VideoMemoryAddress
comma
l_int|0x8000
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|SiS_DisplayOn
id|SiS_DisplayOn
c_func
(paren
r_void
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DisplayOff
id|SiS_DisplayOff
c_func
(paren
r_void
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x01
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
multiline_comment|/*  SR CRTC GR */
r_void
DECL|function|SiS_SetReg1
id|SiS_SetReg1
c_func
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
id|index
)paren
suffix:semicolon
id|OutPortByte
c_func
(paren
id|port
op_plus
l_int|1
comma
id|data
)paren
suffix:semicolon
)brace
multiline_comment|/* ========================================== */
multiline_comment|/*  AR(3C0) */
r_void
DECL|function|SiS_SetReg2
id|SiS_SetReg2
c_func
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
comma
id|USHORT
id|data
)paren
(brace
id|InPortByte
c_func
(paren
id|port
op_plus
l_int|0x3da
op_minus
l_int|0x3c0
)paren
suffix:semicolon
id|OutPortByte
c_func
(paren
id|SiS_P3c0
comma
id|index
)paren
suffix:semicolon
id|OutPortByte
c_func
(paren
id|SiS_P3c0
comma
id|data
)paren
suffix:semicolon
id|OutPortByte
c_func
(paren
id|SiS_P3c0
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetReg3
id|SiS_SetReg3
c_func
(paren
id|USHORT
id|port
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetReg4
id|SiS_SetReg4
c_func
(paren
id|USHORT
id|port
comma
id|ULONG
id|data
)paren
(brace
id|OutPortLong
c_func
(paren
id|port
comma
id|data
)paren
suffix:semicolon
)brace
DECL|function|SiS_GetReg1
id|UCHAR
id|SiS_GetReg1
c_func
(paren
id|USHORT
id|port
comma
id|USHORT
id|index
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
id|OutPortByte
c_func
(paren
id|port
comma
id|index
)paren
suffix:semicolon
id|data
op_assign
id|InPortByte
c_func
(paren
id|port
op_plus
l_int|1
)paren
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
id|UCHAR
DECL|function|SiS_GetReg2
id|SiS_GetReg2
c_func
(paren
id|USHORT
id|port
)paren
(brace
id|UCHAR
id|data
suffix:semicolon
id|data
op_assign
id|InPortByte
c_func
(paren
id|port
)paren
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
id|ULONG
DECL|function|SiS_GetReg3
id|SiS_GetReg3
c_func
(paren
id|USHORT
id|port
)paren
(brace
id|ULONG
id|data
suffix:semicolon
id|data
op_assign
id|InPortLong
c_func
(paren
id|port
)paren
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
r_void
DECL|function|SiS_ClearDAC
id|SiS_ClearDAC
c_func
(paren
id|ULONG
id|port
)paren
(brace
r_int
id|i
suffix:semicolon
id|OutPortByte
c_func
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
id|port
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
op_star
l_int|3
suffix:semicolon
id|i
op_increment
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* ========================================== */
macro_line|#if 0  /* TW: Not done in any BIOS */
r_void
id|SiS_SetInterlace
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|ULONG
id|Temp
suffix:semicolon
id|USHORT
id|data
comma
id|Temp2
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
r_return
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x01
)paren
suffix:semicolon
id|Temp
op_increment
suffix:semicolon
id|Temp
op_lshift_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|Temp
op_eq
l_int|1024
)paren
(brace
id|data
op_assign
l_int|0x0035
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|Temp
op_eq
l_int|1280
)paren
(brace
id|data
op_assign
l_int|0x0048
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x0000
suffix:semicolon
id|Temp2
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|Temp2
op_and_assign
id|InterlaceMode
suffix:semicolon
r_if
c_cond
(paren
id|Temp2
op_eq
l_int|0
)paren
(brace
id|data
op_assign
l_int|0x0000
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x19
comma
id|data
)paren
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x1A
)paren
suffix:semicolon
id|Temp
op_assign
(paren
id|USHORT
)paren
(paren
id|Temp
op_amp
l_int|0xFC
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x1A
comma
(paren
id|USHORT
)paren
id|Temp
)paren
suffix:semicolon
id|Temp
op_assign
(paren
id|ULONG
)paren
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0f
)paren
suffix:semicolon
id|Temp2
op_assign
(paren
id|USHORT
)paren
id|Temp
op_amp
l_int|0xBF
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x37
)paren
(brace
id|Temp2
op_or_assign
l_int|0x40
suffix:semicolon
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x1A
comma
(paren
id|USHORT
)paren
id|Temp2
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* TW: Checked against 650/LVDS (1.10.07), 650/301LV and 315 BIOS */
macro_line|#ifdef SIS315H
r_void
DECL|function|SiS_SetCRT1FIFO_310
id|SiS_SetCRT1FIFO_310
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3D
comma
l_int|0xFE
)paren
suffix:semicolon
multiline_comment|/* disable auto-threshold */
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
)paren
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
l_int|0xAE
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
l_int|0xAE
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#if 0  /* TW: Unused */
id|USHORT
id|SiS_CalcDelay
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|key
)paren
(brace
id|USHORT
id|data
comma
id|data2
comma
id|temp0
comma
id|temp1
suffix:semicolon
id|UCHAR
id|ThLowA
(braket
)braket
op_assign
(brace
l_int|61
comma
l_int|3
comma
l_int|52
comma
l_int|5
comma
l_int|68
comma
l_int|7
comma
l_int|100
comma
l_int|11
comma
l_int|43
comma
l_int|3
comma
l_int|42
comma
l_int|5
comma
l_int|54
comma
l_int|7
comma
l_int|78
comma
l_int|11
comma
l_int|34
comma
l_int|3
comma
l_int|37
comma
l_int|5
comma
l_int|47
comma
l_int|7
comma
l_int|67
comma
l_int|11
)brace
suffix:semicolon
id|UCHAR
id|ThLowB
(braket
)braket
op_assign
(brace
l_int|81
comma
l_int|4
comma
l_int|72
comma
l_int|6
comma
l_int|88
comma
l_int|8
comma
l_int|120
comma
l_int|12
comma
l_int|55
comma
l_int|4
comma
l_int|54
comma
l_int|6
comma
l_int|66
comma
l_int|8
comma
l_int|90
comma
l_int|12
comma
l_int|42
comma
l_int|4
comma
l_int|45
comma
l_int|6
comma
l_int|55
comma
l_int|8
comma
l_int|75
comma
l_int|12
)brace
suffix:semicolon
id|UCHAR
id|ThTiming
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|data
op_assign
id|data
op_rshift
l_int|6
suffix:semicolon
id|data2
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_rshift
l_int|4
)paren
op_amp
l_int|0x0C
suffix:semicolon
id|data
op_assign
id|data
op_or
id|data2
suffix:semicolon
id|data
op_assign
id|data
OL
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|key
op_eq
l_int|0
)paren
(brace
id|temp0
op_assign
(paren
id|USHORT
)paren
id|ThLowA
(braket
id|data
)braket
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|ThLowA
(braket
id|data
op_plus
l_int|1
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp0
op_assign
(paren
id|USHORT
)paren
id|ThLowB
(braket
id|data
)braket
suffix:semicolon
id|temp1
op_assign
(paren
id|USHORT
)paren
id|ThLowB
(braket
id|data
op_plus
l_int|1
)braket
suffix:semicolon
)brace
id|data2
op_assign
l_int|0
suffix:semicolon
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
(brace
id|data2
op_assign
id|data2
op_or
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_amp
l_int|0x20
)paren
(brace
id|data2
op_assign
id|data2
op_or
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_amp
l_int|0x40
)paren
(brace
id|data2
op_assign
id|data2
op_or
l_int|0x04
suffix:semicolon
)brace
id|data
op_assign
id|temp1
op_star
id|ThTiming
(braket
id|data2
)braket
op_plus
id|temp0
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_void
DECL|function|SiS_SetCRT1FIFO_300
id|SiS_SetCRT1FIFO_300
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|i
comma
id|index
comma
id|data
comma
id|VCLK
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
suffix:semicolon
id|ULONG
id|B
comma
id|eax
comma
id|bl
comma
id|data2
suffix:semicolon
id|USHORT
id|ThresholdLow
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|FQBQData
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x21
comma
l_int|0x41
comma
l_int|0x61
comma
l_int|0x81
comma
l_int|0x31
comma
l_int|0x51
comma
l_int|0x71
comma
l_int|0x91
comma
l_int|0xb1
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0x40
comma
l_int|0x60
comma
l_int|0x80
comma
l_int|0x30
comma
l_int|0x50
comma
l_int|0x70
comma
l_int|0x90
comma
l_int|0xb0
comma
l_int|0xFF
)brace
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_ge
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
id|index
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|index
op_and_assign
l_int|0x07
suffix:semicolon
id|MCLK
op_assign
id|SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|data2
op_assign
id|SiS_ModeType
op_minus
id|ModeEGA
suffix:semicolon
r_switch
c_cond
(paren
id|data2
)paren
(brace
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
)brace
r_do
(brace
id|B
op_assign
id|SiS_CalcDelay2
c_func
(paren
id|ROMAddr
comma
id|FQBQData
(braket
id|i
)braket
)paren
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
id|bl
op_assign
id|B
op_div
(paren
id|MCLK
op_star
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|B
op_eq
id|bl
op_star
l_int|16
op_star
id|MCLK
)paren
(brace
id|bl
op_assign
id|bl
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|bl
op_assign
id|bl
op_plus
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bl
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|FQBQData
(braket
id|i
op_plus
l_int|1
)braket
op_eq
l_int|0xFF
)paren
(brace
id|ThresholdLow
op_assign
l_int|0x13
suffix:semicolon
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|ThresholdLow
op_assign
id|bl
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|FQBQData
(braket
id|i
)braket
op_ne
l_int|0xFF
)paren
(brace
suffix:semicolon
)brace
)brace
r_else
(brace
id|ThresholdLow
op_assign
l_int|0x02
suffix:semicolon
)brace
multiline_comment|/* Write foreground and background queue */
id|data2
op_assign
id|FQBQData
(braket
id|i
)braket
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
suffix:semicolon
id|data2
op_lshift_assign
l_int|24
suffix:semicolon
macro_line|#ifndef LINUX_XF86
id|SiS_SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|SiS_SetReg4
c_func
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/* We use pci functions X offers. We use pcitag 0, because&n;   * we want to read/write to the host bridge (which is always&n;   * 00:00.0 on 630, 730 and 540), not the VGA device.&n;   */
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|pciWriteLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
comma
id|eax
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* TODO: write GUI grant timer (PCI config 0xA3) */
multiline_comment|/* Write CRT/CPU threshold low, CRT/Engine threshold high */
id|data
op_assign
(paren
(paren
id|ThresholdLow
op_amp
l_int|0x0f
)paren
op_lshift
l_int|4
)paren
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x08
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
(paren
id|ThresholdLow
op_amp
l_int|0x10
)paren
op_lshift
l_int|1
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xDF
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* What is this? */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3B
comma
l_int|0x09
)paren
suffix:semicolon
multiline_comment|/* Write CRT/CPU threshold high */
id|data
op_assign
id|ThresholdLow
op_plus
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|data
OG
l_int|0x0f
)paren
(brace
id|data
op_assign
l_int|0x0f
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x09
comma
l_int|0x80
comma
id|data
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_CalcDelay2
id|SiS_CalcDelay2
c_func
(paren
id|UCHAR
op_star
id|ROMAddr
comma
id|UCHAR
id|key
)paren
(brace
id|USHORT
id|data
comma
id|index
suffix:semicolon
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
initialization_block
suffix:semicolon
multiline_comment|/*; 128 bit    BQ=1   */
id|index
op_assign
(paren
id|key
op_amp
l_int|0xE0
)paren
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|key
op_amp
l_int|0x10
)paren
(brace
id|index
op_add_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|key
op_amp
l_int|0x01
)paren
)paren
(brace
id|index
op_add_assign
l_int|24
suffix:semicolon
)brace
id|data
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x0080
)paren
(brace
id|index
op_add_assign
l_int|12
suffix:semicolon
)brace
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
r_return
id|data
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* =============== Autodetection ================ */
macro_line|#ifndef LINUX_XF86
multiline_comment|/* (ynlai) */
r_void
DECL|function|SiS_DetectMonitor
id|SiS_DetectMonitor
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
)paren
(brace
id|UCHAR
id|DAC_TEST_PARMS
(braket
)braket
op_assign
initialization_block
suffix:semicolon
id|UCHAR
id|DAC_CLR_PARMS
(braket
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|SR1F
suffix:semicolon
id|SR1F
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
multiline_comment|/* DAC pedestal */
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
l_int|0xFF
comma
l_int|0x04
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|BaseAddr
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* TW: Inserted &quot;==0&quot; */
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x30
comma
l_int|0x41
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*SiSSetMode(HwDeviceExtension,0x03);  */
multiline_comment|/* ynlai InitMode */
id|SiSSetMode
c_func
(paren
id|HwDeviceExtension
comma
l_int|0x2E
)paren
suffix:semicolon
multiline_comment|/* alan */
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c6
comma
l_int|0xff
)paren
suffix:semicolon
id|SiS_ClearDAC
c_func
(paren
id|SiS_P3c8
)paren
suffix:semicolon
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_TestMonitorType
c_func
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_TestMonitorType
c_func
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xDF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_TestMonitorType
c_func
(paren
id|DAC_CLR_PARMS
(braket
l_int|0
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|1
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x1F
comma
id|SR1F
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_TestMonitorType
id|SiS_TestMonitorType
c_func
(paren
id|UCHAR
id|R_DAC
comma
id|UCHAR
id|G_DAC
comma
id|UCHAR
id|B_DAC
)paren
(brace
id|USHORT
id|temp
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|R_DAC
op_star
l_int|0x4d
op_plus
id|G_DAC
op_star
l_int|0x97
op_plus
id|B_DAC
op_star
l_int|0x1c
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|0x80
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|0x100
suffix:semicolon
)brace
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|R_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|G_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|B_DAC
op_assign
(paren
id|UCHAR
)paren
id|tempbx
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c8
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
id|R_DAC
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
id|G_DAC
)paren
suffix:semicolon
id|SiS_SetReg3
c_func
(paren
id|SiS_P3c9
comma
id|B_DAC
)paren
suffix:semicolon
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg2
c_func
(paren
id|SiS_P3c2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x10
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ---- test ----- */
r_void
DECL|function|SiS_GetSenseStatus
id|SiS_GetSenseStatus
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
comma
id|UCHAR
op_star
id|ROMAddr
)paren
(brace
id|USHORT
id|tempax
op_assign
l_int|0
comma
id|tempbx
comma
id|tempcx
comma
id|temp
suffix:semicolon
id|USHORT
id|P2reg0
op_assign
l_int|0
comma
id|SenseModeNo
op_assign
l_int|0
comma
id|OutputSelect
op_assign
op_star
id|pSiS_OutputSelect
suffix:semicolon
id|USHORT
id|ModeIdIndex
comma
id|i
suffix:semicolon
id|USHORT
id|BaseAddr
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulIOAddress
suffix:semicolon
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|SiS_GetPanelID
c_func
(paren
)paren
suffix:semicolon
id|temp
op_assign
id|LCDSense
suffix:semicolon
id|temp
op_assign
id|temp
op_or
id|SiS_SenseCHTV
c_func
(paren
)paren
suffix:semicolon
id|tempbx
op_assign
op_complement
(paren
id|LCDSense
op_or
id|AVIDEOSense
op_or
id|SVIDEOSense
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
id|tempbx
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* for 301 */
r_if
c_cond
(paren
id|SiS_IF_DEF_HiVision
op_eq
l_int|1
)paren
(brace
multiline_comment|/* for HiVision */
id|tempax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_assign
id|tempax
op_amp
l_int|0x01
suffix:semicolon
id|tempax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempax
op_amp
l_int|0x02
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
l_int|0xA0
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_BridgeIsOn
c_func
(paren
id|BaseAddr
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* TW: Inserted &quot;==0&quot; */
id|P2reg0
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_BridgeIsEnable
c_func
(paren
id|BaseAddr
comma
id|HwDeviceExtension
)paren
)paren
(brace
id|SenseModeNo
op_assign
l_int|0x2e
suffix:semicolon
id|temp
op_assign
id|SiS_SearchModeID
c_func
(paren
id|ROMAddr
comma
op_amp
id|SenseModeNo
comma
op_amp
id|ModeIdIndex
)paren
suffix:semicolon
id|SiS_SetFlag
op_assign
l_int|0x00
suffix:semicolon
id|SiS_ModeType
op_assign
id|ModeVGA
suffix:semicolon
id|SiS_VBInfo
op_assign
id|SetCRT2ToRAMDAC
op_or
id|LoadDACFlag
op_or
id|SetInSlaveMode
suffix:semicolon
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|SenseModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg1
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x1c
)paren
suffix:semicolon
id|tempax
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
op_star
id|pSiS_RGBSenseData
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_RGBSenseData2
suffix:semicolon
)brace
id|tempcx
op_assign
l_int|0x0E08
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|Monitor2Sense
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
op_star
id|pSiS_YCSenseData
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_YCSenseData2
suffix:semicolon
)brace
id|tempcx
op_assign
l_int|0x0604
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SVIDEOSense
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|BoardTVType
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData2
suffix:semicolon
)brace
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempax
op_amp
id|SVIDEOSense
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Is301B
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
id|tempbx
op_assign
op_star
id|pSiS_VideoSenseData2
suffix:semicolon
)brace
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_SenseLCD
c_func
(paren
id|HwDeviceExtension
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|LCDSense
suffix:semicolon
)brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|SiS_Sense
c_func
(paren
id|SiS_Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_VBType
op_amp
id|VB_SIS301LV
)paren
op_logical_or
(paren
id|SiS_VBType
op_amp
id|VB_SIS302LV
)paren
)paren
(brace
id|tempax
op_and_assign
l_int|0x00ef
suffix:semicolon
multiline_comment|/* 301lv to disable CRT2*/
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x32
comma
op_complement
l_int|0xDF
comma
id|tempax
)paren
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part2Port
comma
l_int|0x00
comma
id|P2reg0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|P2reg0
op_amp
l_int|0x20
)paren
)paren
(brace
id|SiS_VBInfo
op_assign
id|DisableCRT2Display
suffix:semicolon
id|SiS_SetCRT2Group301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|SenseModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
id|BOOLEAN
DECL|function|SiS_Sense
id|SiS_Sense
c_func
(paren
id|USHORT
id|Part4Port
comma
id|USHORT
id|tempbx
comma
id|USHORT
id|tempcx
)paren
(brace
id|USHORT
id|temp
comma
id|i
comma
id|tempch
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|temp
op_or
(paren
id|tempcx
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x10
comma
op_complement
l_int|0x1F
comma
id|temp
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|10
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_LongWait
c_func
(paren
)paren
suffix:semicolon
)brace
id|tempch
op_assign
(paren
id|tempcx
op_amp
l_int|0x7F00
)paren
op_rshift
l_int|8
suffix:semicolon
multiline_comment|/*   ynlai [05/22/2001]  */
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_Part4Port
comma
l_int|0x03
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_xor
(paren
l_int|0x0E
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
id|tempch
suffix:semicolon
multiline_comment|/*   ynlai [05/22/2001]  */
r_if
c_cond
(paren
id|temp
OG
l_int|0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseLCD
id|SiS_SenseLCD
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetPanelID
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
id|temp
op_assign
id|SiS_GetLCDDDCInfo
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_return
id|temp
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|SiS_GetLCDDDCInfo
id|SiS_GetLCDDDCInfo
c_func
(paren
id|PSIS_HW_DEVICE_INFO
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/*add lcd sense*/
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;ulCRT2LCDType
op_eq
id|LCD_UNKNOWN
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|USHORT
)paren
id|HwDeviceExtension-&gt;ulCRT2LCDType
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|BOOLEAN
DECL|function|SiS_GetPanelID
id|SiS_GetPanelID
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|PanelTypeTable
(braket
l_int|16
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|tempax
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempax
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x40
)paren
(brace
id|tempbx
op_or_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x20
)paren
(brace
id|tempbx
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
id|tempbx
op_or_assign
l_int|0x01
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg1
c_func
(paren
id|SiS_P3c4
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_or_assign
l_int|0x04
suffix:semicolon
)brace
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|PanelTypeTable
(braket
id|tempbx
)braket
suffix:semicolon
id|tempbx
op_or_assign
id|LCDSync
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg1
c_func
(paren
id|SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_P3d4
comma
l_int|0x37
comma
op_complement
(paren
id|LCDSyncBit
op_or
id|LCDRGB18Bit
)paren
comma
id|temp
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_SenseCHTV
id|SiS_SenseCHTV
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|temp
comma
id|push0e
comma
id|status
suffix:semicolon
id|status
op_assign
l_int|0
suffix:semicolon
id|push0e
op_assign
id|SiS_GetCH700x
c_func
(paren
l_int|0x0e
)paren
suffix:semicolon
id|push0e
op_assign
(paren
id|push0e
op_lshift
l_int|8
)paren
op_or
l_int|0x0e
suffix:semicolon
id|SiS_SetCH700x
c_func
(paren
l_int|0x0b0e
)paren
suffix:semicolon
id|SiS_SetCH700x
c_func
(paren
l_int|0x0110
)paren
suffix:semicolon
id|SiS_SetCH700x
c_func
(paren
l_int|0x0010
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetCH700x
c_func
(paren
l_int|0x10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x08
)paren
(brace
id|status
op_or_assign
id|SVIDEOSense
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x02
)paren
(brace
id|status
op_or_assign
id|AVIDEOSense
suffix:semicolon
)brace
id|SiS_SetCH700x
c_func
(paren
id|push0e
)paren
suffix:semicolon
r_return
id|status
suffix:semicolon
)brace
macro_line|#endif /* LINUX_XF86 */
multiline_comment|/*  ================ for TC only =================  */
macro_line|#ifdef TC
r_int
DECL|function|INT1AReturnCode
id|INT1AReturnCode
c_func
(paren
r_union
id|REGS
id|regs
)paren
(brace
r_if
c_cond
(paren
id|regs.x.cflag
)paren
(brace
multiline_comment|/*printf(&quot;Error to find pci device!&bslash;n&quot;); */
r_return
l_int|1
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|regs.h.ah
)paren
(brace
r_case
l_int|0
suffix:colon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x81
suffix:colon
id|printf
c_func
(paren
l_string|&quot;Function not support&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x83
suffix:colon
id|printf
c_func
(paren
l_string|&quot;bad vendor id&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x86
suffix:colon
id|printf
c_func
(paren
l_string|&quot;device not found&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x87
suffix:colon
id|printf
c_func
(paren
l_string|&quot;bad register number&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x88
suffix:colon
id|printf
c_func
(paren
l_string|&quot;set failed&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x89
suffix:colon
id|printf
c_func
(paren
l_string|&quot;buffer too small&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|FindPCIIOBase
id|FindPCIIOBase
c_func
(paren
r_int
id|index
comma
r_int
id|deviceid
)paren
(brace
r_union
id|REGS
id|regs
suffix:semicolon
id|regs.h.ah
op_assign
l_int|0xb1
suffix:semicolon
multiline_comment|/*PCI_FUNCTION_ID */
id|regs.h.al
op_assign
l_int|0x02
suffix:semicolon
multiline_comment|/*FIND_PCI_DEVICE */
id|regs.x.cx
op_assign
id|deviceid
suffix:semicolon
id|regs.x.dx
op_assign
l_int|0x1039
suffix:semicolon
id|regs.x.si
op_assign
id|index
suffix:semicolon
multiline_comment|/* find n-th device */
id|int86
c_func
(paren
l_int|0x1A
comma
op_amp
id|regs
comma
op_amp
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT1AReturnCode
c_func
(paren
id|regs
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* regs.h.bh */
multiline_comment|/* bus number */
multiline_comment|/* regs.h.bl */
multiline_comment|/* device number */
id|regs.h.ah
op_assign
l_int|0xb1
suffix:semicolon
multiline_comment|/*PCI_FUNCTION_ID */
id|regs.h.al
op_assign
l_int|0x09
suffix:semicolon
multiline_comment|/*READ_CONFIG_WORD */
id|regs.x.cx
op_assign
id|deviceid
suffix:semicolon
id|regs.x.dx
op_assign
l_int|0x1039
suffix:semicolon
id|regs.x.di
op_assign
l_int|0x18
suffix:semicolon
multiline_comment|/* register number */
id|int86
c_func
(paren
l_int|0x1A
comma
op_amp
id|regs
comma
op_amp
id|regs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|INT1AReturnCode
c_func
(paren
id|regs
)paren
op_ne
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|regs.x.cx
suffix:semicolon
)brace
r_void
DECL|function|main
id|main
c_func
(paren
r_int
id|argc
comma
r_char
op_star
id|argv
(braket
)braket
)paren
(brace
id|SIS_HW_DEVICE_INFO
id|HwDeviceExtension
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|ModeNo
suffix:semicolon
multiline_comment|/*HwDeviceExtension.pjVirtualRomBase =(PUCHAR) MK_FP(0xC000,0); */
multiline_comment|/*HwDeviceExtension.pjVideoMemoryAddress = (PUCHAR)MK_FP(0xA000,0);*/
macro_line|#ifdef SIS300  
id|HwDeviceExtension.ulIOAddress
op_assign
(paren
id|FindPCIIOBase
c_func
(paren
l_int|0
comma
l_int|0x6300
)paren
op_amp
l_int|0xFF80
)paren
op_plus
l_int|0x30
suffix:semicolon
id|HwDeviceExtension.jChipType
op_assign
id|SIS_630
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H  
singleline_comment|//  HwDeviceExtension.ulIOAddress = (FindPCIIOBase(0,0x5315)&amp;0xFF80) + 0x30;
singleline_comment|//  HwDeviceExtension.jChipType = SIS_550;
id|HwDeviceExtension.ulIOAddress
op_assign
(paren
id|FindPCIIOBase
c_func
(paren
l_int|0
comma
l_int|0x325
)paren
op_amp
l_int|0xFF80
)paren
op_plus
l_int|0x30
suffix:semicolon
id|HwDeviceExtension.jChipType
op_assign
id|SIS_315H
suffix:semicolon
macro_line|#endif
id|HwDeviceExtension.ujVBChipID
op_assign
id|VB_CHIP_301
suffix:semicolon
id|strcpy
c_func
(paren
id|HwDeviceExtension.szVBIOSVer
comma
l_string|&quot;0.84&quot;
)paren
suffix:semicolon
id|HwDeviceExtension.bSkipDramSizing
op_assign
id|FALSE
suffix:semicolon
id|HwDeviceExtension.ulVideoMemorySize
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_eq
l_int|2
)paren
(brace
id|ModeNo
op_assign
id|atoi
c_func
(paren
id|argv
(braket
l_int|1
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|ModeNo
op_assign
l_int|0x2e
suffix:semicolon
multiline_comment|/*ModeNo=0x37; */
multiline_comment|/* 1024x768x 4bpp */
multiline_comment|/*ModeNo=0x38; */
multiline_comment|/* 1024x768x 8bpp */
multiline_comment|/*ModeNo=0x4A; */
multiline_comment|/* 1024x768x 16bpp */
multiline_comment|/*ModeNo=0x47;*/
multiline_comment|/* 800x600x 16bpp */
)brace
multiline_comment|/* SiSInit(&amp;HwDeviceExtension);*/
id|SiSSetMode
c_func
(paren
op_amp
id|HwDeviceExtension
comma
id|ModeNo
)paren
suffix:semicolon
)brace
macro_line|#endif /* TC END */
multiline_comment|/* ================ LINUX XFREE86 ====================== */
macro_line|#ifdef LINUX_XF86
id|USHORT
DECL|function|SiS_CalcModeIndex
id|SiS_CalcModeIndex
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
)paren
(brace
id|UShort
id|i
op_assign
(paren
id|pScrn-&gt;bitsPerPixel
op_plus
l_int|7
)paren
op_div
l_int|8
op_minus
l_int|1
suffix:semicolon
id|UShort
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x600
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1280x960
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x960
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|720
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1920
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1440
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1920x1440
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|2048
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1536
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_2048x1536
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_CheckCalcModeIndex
id|SiS_CheckCalcModeIndex
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
comma
r_int
id|VBFlags
)paren
(brace
id|UShort
id|i
op_assign
(paren
id|pScrn-&gt;bitsPerPixel
op_plus
l_int|7
)paren
op_div
l_int|8
op_minus
l_int|1
suffix:semicolon
id|UShort
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
id|CRT2_LCD
)paren
(brace
r_if
c_cond
(paren
(paren
id|mode-&gt;HDisplay
op_le
id|pSiS-&gt;LCDwidth
)paren
op_logical_and
(paren
id|mode-&gt;VDisplay
op_le
id|pSiS-&gt;LCDheight
)paren
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_LVDS
)paren
(brace
multiline_comment|/* LCD on LVDS */
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x600
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1050
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* LCD on 301(B) */
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x600
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
multiline_comment|/* ? */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|960
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1280x960
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x960
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|i
)braket
suffix:semicolon
)brace
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|VBFlags
op_amp
id|CRT2_TV
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_CHRONTEL
)paren
(brace
multiline_comment|/* TV on Chrontel */
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* TV on 301(B) */
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301B
op_or
id|VB_301LV
op_or
id|VB_302B
op_or
id|VB_302LV
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|VBFlags
op_amp
id|CRT2_VGA
)paren
(brace
multiline_comment|/* CRT2 is VGA2 */
r_switch
c_cond
(paren
id|mode-&gt;HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x768
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|mode-&gt;VDisplay
op_eq
l_int|720
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|i
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* CRT1 only, no CRT2 */
id|ModeIndex
op_assign
id|SiS_CalcModeIndex
c_func
(paren
id|pScrn
comma
id|mode
)paren
suffix:semicolon
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
DECL|macro|MODEID_OFF
mdefine_line|#define MODEID_OFF 0x449
r_int
r_char
DECL|function|SiS_GetSetModeID
id|SiS_GetSetModeID
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
r_int
r_char
id|id
)paren
(brace
r_int
r_char
id|ret
suffix:semicolon
r_int
r_char
op_star
id|base
op_assign
id|xf86MapVidMem
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|VIDMEM_MMIO
comma
l_int|0
comma
l_int|0x2000
)paren
suffix:semicolon
id|ret
op_assign
op_star
(paren
id|base
op_plus
id|MODEID_OFF
)paren
suffix:semicolon
multiline_comment|/* id != 0xff means: set mode */
r_if
c_cond
(paren
id|id
op_ne
l_int|0xff
)paren
op_star
(paren
id|base
op_plus
id|MODEID_OFF
)paren
op_assign
id|id
suffix:semicolon
id|xf86UnMapVidMem
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|base
comma
l_int|0x2000
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
macro_line|#endif
eof
