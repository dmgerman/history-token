multiline_comment|/* $XFree86$ */
multiline_comment|/* $XdotOrg$ */
multiline_comment|/*&n; * Mode initializing code (CRT1 section) for&n; * for SiS 300/305/540/630/730 and&n; *     SiS 315/550/650/M650/651/661FX/M661FX/740/741(GX)/M741/330/660/M660/760/M760&n; * (Universal module for Linux kernel framebuffer and XFree86 4.x)&n; *&n; * Copyright (C) 2001-2004 by Thomas Winischhofer, Vienna, Austria&n; *&n; * If distributed as part of the Linux kernel, the following license terms&n; * apply:&n; *&n; * * This program is free software; you can redistribute it and/or modify&n; * * it under the terms of the GNU General Public License as published by&n; * * the Free Software Foundation; either version 2 of the named License,&n; * * or any later version.&n; * *&n; * * This program is distributed in the hope that it will be useful,&n; * * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the&n; * * GNU General Public License for more details.&n; * *&n; * * You should have received a copy of the GNU General Public License&n; * * along with this program; if not, write to the Free Software&n; * * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA&n; *&n; * Otherwise, the following license terms apply:&n; *&n; * * Redistribution and use in source and binary forms, with or without&n; * * modification, are permitted provided that the following conditions&n; * * are met:&n; * * 1) Redistributions of source code must retain the above copyright&n; * *    notice, this list of conditions and the following disclaimer.&n; * * 2) Redistributions in binary form must reproduce the above copyright&n; * *    notice, this list of conditions and the following disclaimer in the&n; * *    documentation and/or other materials provided with the distribution.&n; * * 3) The name of the author may not be used to endorse or promote products&n; * *    derived from this software without specific prior written permission.&n; * *&n; * * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&squot;&squot; AND ANY EXPRESS OR&n; * * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES&n; * * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.&n; * * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,&n; * * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT&n; * * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,&n; * * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY&n; * * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT&n; * * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF&n; * * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&n; *&n; * Author: &t;Thomas Winischhofer &lt;thomas@winischhofer.net&gt;&n; *&n; * Formerly based on non-functional code-fragements for 300 series by SiS, Inc.&n; * Used by permission.&n; *&n; * TW says: This code looks awful, I know. But please don&squot;t do anything about&n; * this otherwise debugging will be hell.&n; * The code is extremely fragile as regards the different chipsets, different&n; * video bridges and combinations thereof. If anything is changed, extreme&n; * care has to be taken that that change doesn&squot;t break it for other chipsets,&n; * bridges or combinations thereof.&n; * All comments in this file are by me, regardless if they are marked TW or not.&n; *&n; */
macro_line|#include &quot;init.h&quot;
macro_line|#ifdef SIS300
macro_line|#include &quot;300vtbl.h&quot;
macro_line|#endif
macro_line|#ifdef SIS315H
macro_line|#include &quot;310vtbl.h&quot;
macro_line|#endif
macro_line|#if defined(ALLOC_PRAGMA)
macro_line|#pragma alloc_text(PAGE,SiSSetMode)
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*         POINTER INITIALIZATION            */
multiline_comment|/*********************************************/
macro_line|#if defined(SIS300) || defined(SIS315H)
r_static
r_void
DECL|function|InitCommonPointer
id|InitCommonPointer
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|SiS_Pr-&gt;SiS_StResInfo
op_assign
id|SiS_StResInfo
suffix:semicolon
id|SiS_Pr-&gt;SiS_ModeResInfo
op_assign
id|SiS_ModeResInfo
suffix:semicolon
id|SiS_Pr-&gt;SiS_StandTable
op_assign
id|SiS_StandTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_NTSCPhase
op_assign
id|SiS_NTSCPhase
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALPhase
op_assign
id|SiS_PALPhase
suffix:semicolon
id|SiS_Pr-&gt;SiS_NTSCPhase2
op_assign
id|SiS_NTSCPhase2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALPhase2
op_assign
id|SiS_PALPhase2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALMPhase
op_assign
id|SiS_PALMPhase
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALNPhase
op_assign
id|SiS_PALNPhase
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALMPhase2
op_assign
id|SiS_PALMPhase2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALNPhase2
op_assign
id|SiS_PALNPhase2
suffix:semicolon
id|SiS_Pr-&gt;SiS_SpecialPhase
op_assign
id|SiS_SpecialPhase
suffix:semicolon
id|SiS_Pr-&gt;SiS_SpecialPhaseM
op_assign
id|SiS_SpecialPhaseM
suffix:semicolon
id|SiS_Pr-&gt;SiS_SpecialPhaseJ
op_assign
id|SiS_SpecialPhaseJ
suffix:semicolon
id|SiS_Pr-&gt;SiS_NTSCTiming
op_assign
id|SiS_NTSCTiming
suffix:semicolon
id|SiS_Pr-&gt;SiS_PALTiming
op_assign
id|SiS_PALTiming
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVSt1Timing
op_assign
id|SiS_HiTVSt1Timing
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVSt2Timing
op_assign
id|SiS_HiTVSt2Timing
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVExtTiming
op_assign
id|SiS_HiTVExtTiming
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVGroup3Data
op_assign
id|SiS_HiTVGroup3Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVGroup3Simu
op_assign
id|SiS_HiTVGroup3Simu
suffix:semicolon
macro_line|#if 0
id|SiS_Pr-&gt;SiS_HiTVTextTiming
op_assign
id|SiS_HiTVTextTiming
suffix:semicolon
id|SiS_Pr-&gt;SiS_HiTVGroup3Text
op_assign
id|SiS_HiTVGroup3Text
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_StPALData
op_assign
id|SiS_StPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtPALData
op_assign
id|SiS_ExtPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_StNTSCData
op_assign
id|SiS_StNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtNTSCData
op_assign
id|SiS_ExtNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_St1HiTVData
op_assign
id|SiS_StHiTVData
suffix:semicolon
id|SiS_Pr-&gt;SiS_St2HiTVData
op_assign
id|SiS_St2HiTVData
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtHiTVData
op_assign
id|SiS_ExtHiTVData
suffix:semicolon
id|SiS_Pr-&gt;SiS_St525iData
op_assign
id|SiS_StNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_St525pData
op_assign
id|SiS_St525pData
suffix:semicolon
id|SiS_Pr-&gt;SiS_St750pData
op_assign
id|SiS_St750pData
suffix:semicolon
id|SiS_Pr-&gt;SiS_Ext525iData
op_assign
id|SiS_ExtNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_Ext525pData
op_assign
id|SiS_ExtNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_Ext750pData
op_assign
id|SiS_Ext750pData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_OutputSelect
op_assign
op_amp
id|SiS_OutputSelect
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SoftSetting
op_assign
op_amp
id|SiS_SoftSetting
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCD1280x720Data
op_assign
id|SiS_LCD1280x720Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_StLCD1280x768_2Data
op_assign
id|SiS_StLCD1280x768_2Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1280x768_2Data
op_assign
id|SiS_ExtLCD1280x768_2Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCD1280x800Data
op_assign
id|SiS_LCD1280x800Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCD1280x800_2Data
op_assign
id|SiS_LCD1280x800_2Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCD1280x960Data
op_assign
id|SiS_LCD1280x960Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_StLCD1400x1050Data
op_assign
id|SiS_StLCD1400x1050Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1400x1050Data
op_assign
id|SiS_ExtLCD1400x1050Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_LCD1680x1050Data
op_assign
id|SiS_LCD1680x1050Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_StLCD1600x1200Data
op_assign
id|SiS_StLCD1600x1200Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1600x1200Data
op_assign
id|SiS_ExtLCD1600x1200Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_NoScaleData
op_assign
id|SiS_NoScaleData
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS320x480Data_1
op_assign
id|SiS_LVDS320x480Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS800x600Data_1
op_assign
id|SiS_LVDS800x600Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS800x600Data_2
op_assign
id|SiS_LVDS800x600Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_1
op_assign
id|SiS_LVDS1024x768Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1024x768Data_2
op_assign
id|SiS_LVDS1024x768Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_1
op_assign
id|SiS_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x1024Data_2
op_assign
id|SiS_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_1
op_assign
id|SiS_LVDS1400x1050Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1400x1050Data_2
op_assign
id|SiS_LVDS1400x1050Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_1
op_assign
id|SiS_LVDS1600x1200Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1600x1200Data_2
op_assign
id|SiS_LVDS1600x1200Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_1
op_assign
id|SiS_LVDS1280x768Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x768Data_2
op_assign
id|SiS_LVDS1280x768Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_1
op_assign
id|SiS_LVDS1024x600Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1024x600Data_2
op_assign
id|SiS_LVDS1024x600Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_1
op_assign
id|SiS_LVDS1152x768Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1152x768Data_2
op_assign
id|SiS_LVDS1152x768Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSXXXxXXXData_1
op_assign
id|SiS_LVDSXXXxXXXData_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_1
op_assign
id|SiS_LVDS1280x960Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_2
op_assign
id|SiS_LVDS1280x960Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS640x480Data_1
op_assign
id|SiS_LVDS640x480Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_1
op_assign
id|SiS_LVDS1280x1024Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS1280x960Data_2
op_assign
id|SiS_LVDS1280x1024Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS640x480Data_1
op_assign
id|SiS_LVDS640x480Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS640x480Data_2
op_assign
id|SiS_LVDS640x480Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS848x480Data_1
op_assign
id|SiS_LVDS848x480Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDS848x480Data_2
op_assign
id|SiS_LVDS848x480Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSBARCO1024Data_1
op_assign
id|SiS_LVDSBARCO1024Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSBARCO1024Data_2
op_assign
id|SiS_LVDSBARCO1024Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSBARCO1366Data_1
op_assign
id|SiS_LVDSBARCO1366Data_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSBARCO1366Data_2
op_assign
id|SiS_LVDSBARCO1366Data_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1
op_assign
id|SiS_LVDSCRT11280x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1
op_assign
id|SiS_LVDSCRT11024x600_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1
op_assign
id|SiS_LVDSCRT11152x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_1_H
op_assign
id|SiS_LVDSCRT11280x768_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_1_H
op_assign
id|SiS_LVDSCRT11024x600_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_1_H
op_assign
id|SiS_LVDSCRT11152x768_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2
op_assign
id|SiS_LVDSCRT11280x768_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2
op_assign
id|SiS_LVDSCRT11024x600_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2
op_assign
id|SiS_LVDSCRT11152x768_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x768_2_H
op_assign
id|SiS_LVDSCRT11280x768_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x600_2_H
op_assign
id|SiS_LVDSCRT11024x600_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11152x768_2_H
op_assign
id|SiS_LVDSCRT11152x768_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1320x480_1
op_assign
id|SiS_LVDSCRT1320x480_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_1
op_assign
id|SiS_LVDSCRT1640x480_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_1_H
op_assign
id|SiS_LVDSCRT1640x480_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_2
op_assign
id|SiS_LVDSCRT1640x480_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_2_H
op_assign
id|SiS_LVDSCRT1640x480_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_3
op_assign
id|SiS_LVDSCRT1640x480_3
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1640x480_3_H
op_assign
id|SiS_LVDSCRT1640x480_3_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUNTSCData
op_assign
id|SiS_CHTVUNTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVONTSCData
op_assign
id|SiS_CHTVONTSCData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUNTSCDesData
op_assign
id|SiS_CHTVUNTSCDesData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVONTSCDesData
op_assign
id|SiS_CHTVONTSCDesData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALDesData
op_assign
id|SiS_CHTVUPALDesData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVOPALDesData
op_assign
id|SiS_CHTVOPALDesData
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelMinLVDS
op_assign
id|Panel_800x600
suffix:semicolon
multiline_comment|/* lowest value LVDS/LCDA */
id|SiS_Pr-&gt;SiS_PanelMin301
op_assign
id|Panel_1024x768
suffix:semicolon
multiline_comment|/* lowest value 301 */
)brace
macro_line|#endif
macro_line|#ifdef SIS300
r_static
r_void
DECL|function|InitTo300Pointer
id|InitTo300Pointer
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|InitCommonPointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SModeIDTable
op_assign
id|SiS300_SModeIDTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_VBModeIDTable
op_assign
id|SiS300_VBModeIDTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_EModeIDTable
op_assign
id|SiS300_EModeIDTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_RefIndex
op_assign
id|SiS300_RefIndex
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT1Table
op_assign
id|SiS300_CRT1Table
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS300_MCLKData_300
suffix:semicolon
multiline_comment|/* 300 */
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS300_MCLKData_630
suffix:semicolon
multiline_comment|/* 630, 730 */
)brace
id|SiS_Pr-&gt;SiS_VCLKData
op_assign
id|SiS300_VCLKData
suffix:semicolon
id|SiS_Pr-&gt;SiS_VBVCLKData
op_assign
(paren
id|SiS_VBVCLKDataStruct
op_star
)paren
id|SiS300_VCLKData
suffix:semicolon
id|SiS_Pr-&gt;SiS_SR15
op_assign
id|SiS300_SR15
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_Pr-&gt;pSiS_SR07
op_assign
op_amp
id|SiS300_SR07
suffix:semicolon
id|SiS_Pr-&gt;SiS_CR40
op_assign
id|SiS300_CR40
suffix:semicolon
id|SiS_Pr-&gt;SiS_CR49
op_assign
id|SiS300_CR49
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR1F
op_assign
op_amp
id|SiS300_SR1F
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR21
op_assign
op_amp
id|SiS300_SR21
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR22
op_assign
op_amp
id|SiS300_SR22
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR23
op_assign
op_amp
id|SiS300_SR23
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR24
op_assign
op_amp
id|SiS300_SR24
suffix:semicolon
id|SiS_Pr-&gt;SiS_SR25
op_assign
id|SiS300_SR25
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR31
op_assign
op_amp
id|SiS300_SR31
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR32
op_assign
op_amp
id|SiS300_SR32
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR33
op_assign
op_amp
id|SiS300_SR33
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS300_CRT2Data_1_2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS300_CRT2Data_4_D
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS300_CRT2Data_4_E
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS300_CRT2Data_4_10
suffix:semicolon
id|SiS_Pr-&gt;pSiS_RGBSenseData
op_assign
op_amp
id|SiS300_RGBSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_VideoSenseData
op_assign
op_amp
id|SiS300_VideoSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_YCSenseData
op_assign
op_amp
id|SiS300_YCSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_RGBSenseData2
op_assign
op_amp
id|SiS300_RGBSenseData2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_VideoSenseData2
op_assign
op_amp
id|SiS300_VideoSenseData2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_YCSenseData2
op_assign
op_amp
id|SiS300_YCSenseData2
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_PanelDelayTbl
op_assign
id|SiS300_PanelDelayTbl
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
op_assign
id|SiS300_PanelDelayTbl
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
op_assign
id|SiS300_ExtLCD1024x768Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_St2LCD1024x768Data
op_assign
id|SiS300_St2LCD1024x768Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1280x1024Data
op_assign
id|SiS300_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_St2LCD1280x1024Data
op_assign
id|SiS300_St2LCD1280x1024Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
op_assign
id|SiS300_CRT2Part2_1024x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_1
op_assign
id|SiS300_CRT2Part2_1280x1024_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_2
op_assign
id|SiS300_CRT2Part2_1024x768_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_2
op_assign
id|SiS300_CRT2Part2_1280x1024_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_3
op_assign
id|SiS300_CRT2Part2_1024x768_3
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1280x1024_3
op_assign
id|SiS300_CRT2Part2_1280x1024_3
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALData
op_assign
id|SiS300_CHTVUPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVOPALData
op_assign
id|SiS300_CHTVOPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALMData
op_assign
id|SiS_CHTVUNTSCData
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVOPALMData
op_assign
id|SiS_CHTVONTSCData
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVUPALNData
op_assign
id|SiS300_CHTVUPALData
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVOPALNData
op_assign
id|SiS300_CHTVOPALData
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVSOPALData
op_assign
id|SiS300_CHTVSOPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType00_1
op_assign
id|SiS300_PanelType00_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType01_1
op_assign
id|SiS300_PanelType01_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType02_1
op_assign
id|SiS300_PanelType02_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType03_1
op_assign
id|SiS300_PanelType03_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_1
op_assign
id|SiS300_PanelType04_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType05_1
op_assign
id|SiS300_PanelType05_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType06_1
op_assign
id|SiS300_PanelType06_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType07_1
op_assign
id|SiS300_PanelType07_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType08_1
op_assign
id|SiS300_PanelType08_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType09_1
op_assign
id|SiS300_PanelType09_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0a_1
op_assign
id|SiS300_PanelType0a_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0b_1
op_assign
id|SiS300_PanelType0b_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0c_1
op_assign
id|SiS300_PanelType0c_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0d_1
op_assign
id|SiS300_PanelType0d_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0e_1
op_assign
id|SiS300_PanelType0e_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0f_1
op_assign
id|SiS300_PanelType0f_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType00_2
op_assign
id|SiS300_PanelType00_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType01_2
op_assign
id|SiS300_PanelType01_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType02_2
op_assign
id|SiS300_PanelType02_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType03_2
op_assign
id|SiS300_PanelType03_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_2
op_assign
id|SiS300_PanelType04_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType05_2
op_assign
id|SiS300_PanelType05_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType06_2
op_assign
id|SiS300_PanelType06_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType07_2
op_assign
id|SiS300_PanelType07_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType08_2
op_assign
id|SiS300_PanelType08_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType09_2
op_assign
id|SiS300_PanelType09_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0a_2
op_assign
id|SiS300_PanelType0a_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0b_2
op_assign
id|SiS300_PanelType0b_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0c_2
op_assign
id|SiS300_PanelType0c_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0d_2
op_assign
id|SiS300_PanelType0d_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0e_2
op_assign
id|SiS300_PanelType0e_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0f_2
op_assign
id|SiS300_PanelType0f_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelTypeNS_1
op_assign
id|SiS300_PanelTypeNS_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelTypeNS_2
op_assign
id|SiS300_PanelTypeNS_2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
id|SiS_Pr-&gt;SiS_PanelType04_1
op_assign
id|SiS300_PanelType04_1a
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_2
op_assign
id|SiS300_PanelType04_2a
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_CustomT
op_eq
id|CUT_BARCO1024
)paren
(brace
id|SiS_Pr-&gt;SiS_PanelType04_1
op_assign
id|SiS300_PanelType04_1b
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_2
op_assign
id|SiS300_PanelType04_2b
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1
op_assign
id|SiS300_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1_H
op_assign
id|SiS300_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2
op_assign
id|SiS300_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2_H
op_assign
id|SiS300_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
op_assign
id|SiS300_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1_H
op_assign
id|SiS300_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2
op_assign
id|SiS300_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2_H
op_assign
id|SiS300_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1
op_assign
id|SiS300_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1_H
op_assign
id|SiS300_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2
op_assign
id|SiS300_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2_H
op_assign
id|SiS300_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1
op_assign
id|SiS300_LVDSCRT1XXXxXXX_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1_H
op_assign
id|SiS300_LVDSCRT1XXXxXXX_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1UNTSC
op_assign
id|SiS300_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1ONTSC
op_assign
id|SiS300_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1UPAL
op_assign
id|SiS300_CHTVCRT1UPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
op_assign
id|SiS300_CHTVCRT1OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1SOPAL
op_assign
id|SiS300_CHTVCRT1SOPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UNTSC
op_assign
id|SiS300_CHTVReg_UNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_ONTSC
op_assign
id|SiS300_CHTVReg_ONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UPAL
op_assign
id|SiS300_CHTVReg_UPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
op_assign
id|SiS300_CHTVReg_OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UPALM
op_assign
id|SiS300_CHTVReg_UNTSC
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVReg_OPALM
op_assign
id|SiS300_CHTVReg_ONTSC
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVReg_UPALN
op_assign
id|SiS300_CHTVReg_UPAL
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVReg_OPALN
op_assign
id|SiS300_CHTVReg_OPAL
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVReg_SOPAL
op_assign
id|SiS300_CHTVReg_SOPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUNTSC
op_assign
id|SiS300_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKONTSC
op_assign
id|SiS300_CHTVVCLKONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUPAL
op_assign
id|SiS300_CHTVVCLKUPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
op_assign
id|SiS300_CHTVVCLKOPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALM
op_assign
id|SiS300_CHTVVCLKUNTSC
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALM
op_assign
id|SiS300_CHTVVCLKONTSC
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALN
op_assign
id|SiS300_CHTVVCLKUPAL
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALN
op_assign
id|SiS300_CHTVVCLKOPAL
suffix:semicolon
multiline_comment|/* not supported on 300 series */
id|SiS_Pr-&gt;SiS_CHTVVCLKSOPAL
op_assign
id|SiS300_CHTVVCLKSOPAL
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|InitTo310Pointer
id|InitTo310Pointer
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|InitCommonPointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SModeIDTable
op_assign
id|SiS310_SModeIDTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_EModeIDTable
op_assign
id|SiS310_EModeIDTable
suffix:semicolon
id|SiS_Pr-&gt;SiS_RefIndex
op_assign
(paren
id|SiS_Ext2Struct
op_star
)paren
id|SiS310_RefIndex
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT1Table
op_assign
id|SiS310_CRT1Table
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_340
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_340
suffix:semicolon
multiline_comment|/* 340 */
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_761
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_761
suffix:semicolon
multiline_comment|/* 761 - preliminary */
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_760
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_760
suffix:semicolon
multiline_comment|/* 760 */
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_660
suffix:semicolon
multiline_comment|/* 661/741 */
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_330
suffix:semicolon
multiline_comment|/* 330 */
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_650
suffix:semicolon
multiline_comment|/* 550, 650, 740 */
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_MCLKData_0
op_assign
id|SiS310_MCLKData_0_315
suffix:semicolon
multiline_comment|/* 315 */
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_340
)paren
(brace
id|SiS_Pr-&gt;SiS_MCLKData_1
op_assign
id|SiS310_MCLKData_1_340
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_MCLKData_1
op_assign
id|SiS310_MCLKData_1
suffix:semicolon
)brace
id|SiS_Pr-&gt;SiS_VCLKData
op_assign
id|SiS310_VCLKData
suffix:semicolon
id|SiS_Pr-&gt;SiS_VBVCLKData
op_assign
id|SiS310_VBVCLKData
suffix:semicolon
id|SiS_Pr-&gt;SiS_SR15
op_assign
id|SiS310_SR15
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_Pr-&gt;pSiS_SR07
op_assign
op_amp
id|SiS310_SR07
suffix:semicolon
id|SiS_Pr-&gt;SiS_CR40
op_assign
id|SiS310_CR40
suffix:semicolon
id|SiS_Pr-&gt;SiS_CR49
op_assign
id|SiS310_CR49
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR1F
op_assign
op_amp
id|SiS310_SR1F
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR21
op_assign
op_amp
id|SiS310_SR21
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR22
op_assign
op_amp
id|SiS310_SR22
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR23
op_assign
op_amp
id|SiS310_SR23
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR24
op_assign
op_amp
id|SiS310_SR24
suffix:semicolon
id|SiS_Pr-&gt;SiS_SR25
op_assign
id|SiS310_SR25
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR31
op_assign
op_amp
id|SiS310_SR31
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR32
op_assign
op_amp
id|SiS310_SR32
suffix:semicolon
id|SiS_Pr-&gt;pSiS_SR33
op_assign
op_amp
id|SiS310_SR33
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_1_2
op_assign
op_amp
id|SiS310_CRT2Data_1_2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_D
op_assign
op_amp
id|SiS310_CRT2Data_4_D
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_E
op_assign
op_amp
id|SiS310_CRT2Data_4_E
suffix:semicolon
id|SiS_Pr-&gt;pSiS_CRT2Data_4_10
op_assign
op_amp
id|SiS310_CRT2Data_4_10
suffix:semicolon
id|SiS_Pr-&gt;pSiS_RGBSenseData
op_assign
op_amp
id|SiS310_RGBSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_VideoSenseData
op_assign
op_amp
id|SiS310_VideoSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_YCSenseData
op_assign
op_amp
id|SiS310_YCSenseData
suffix:semicolon
id|SiS_Pr-&gt;pSiS_RGBSenseData2
op_assign
op_amp
id|SiS310_RGBSenseData2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_VideoSenseData2
op_assign
op_amp
id|SiS310_VideoSenseData2
suffix:semicolon
id|SiS_Pr-&gt;pSiS_YCSenseData2
op_assign
op_amp
id|SiS310_YCSenseData2
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;SiS_PanelDelayTbl
op_assign
id|SiS310_PanelDelayTbl
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelDelayTblLVDS
op_assign
id|SiS310_PanelDelayTblLVDS
suffix:semicolon
id|SiS_Pr-&gt;SiS_St2LCD1024x768Data
op_assign
id|SiS310_St2LCD1024x768Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1024x768Data
op_assign
id|SiS310_ExtLCD1024x768Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_St2LCD1280x1024Data
op_assign
id|SiS310_St2LCD1280x1024Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_ExtLCD1280x1024Data
op_assign
id|SiS310_ExtLCD1280x1024Data
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT2Part2_1024x768_1
op_assign
id|SiS310_CRT2Part2_1024x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType00_1
op_assign
id|SiS310_PanelType00_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType01_1
op_assign
id|SiS310_PanelType01_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType02_1
op_assign
id|SiS310_PanelType02_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType03_1
op_assign
id|SiS310_PanelType03_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_1
op_assign
id|SiS310_PanelType04_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType05_1
op_assign
id|SiS310_PanelType05_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType06_1
op_assign
id|SiS310_PanelType06_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType07_1
op_assign
id|SiS310_PanelType07_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType08_1
op_assign
id|SiS310_PanelType08_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType09_1
op_assign
id|SiS310_PanelType09_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0a_1
op_assign
id|SiS310_PanelType0a_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0b_1
op_assign
id|SiS310_PanelType0b_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0c_1
op_assign
id|SiS310_PanelType0c_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0d_1
op_assign
id|SiS310_PanelType0d_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0e_1
op_assign
id|SiS310_PanelType0e_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0f_1
op_assign
id|SiS310_PanelType0f_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType00_2
op_assign
id|SiS310_PanelType00_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType01_2
op_assign
id|SiS310_PanelType01_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType02_2
op_assign
id|SiS310_PanelType02_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType03_2
op_assign
id|SiS310_PanelType03_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType04_2
op_assign
id|SiS310_PanelType04_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType05_2
op_assign
id|SiS310_PanelType05_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType06_2
op_assign
id|SiS310_PanelType06_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType07_2
op_assign
id|SiS310_PanelType07_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType08_2
op_assign
id|SiS310_PanelType08_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType09_2
op_assign
id|SiS310_PanelType09_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0a_2
op_assign
id|SiS310_PanelType0a_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0b_2
op_assign
id|SiS310_PanelType0b_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0c_2
op_assign
id|SiS310_PanelType0c_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0d_2
op_assign
id|SiS310_PanelType0d_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0e_2
op_assign
id|SiS310_PanelType0e_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelType0f_2
op_assign
id|SiS310_PanelType0f_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelTypeNS_1
op_assign
id|SiS310_PanelTypeNS_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_PanelTypeNS_2
op_assign
id|SiS310_PanelTypeNS_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALData
op_assign
id|SiS310_CHTVUPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVOPALData
op_assign
id|SiS310_CHTVOPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALMData
op_assign
id|SiS310_CHTVUPALMData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVOPALMData
op_assign
id|SiS310_CHTVOPALMData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVUPALNData
op_assign
id|SiS310_CHTVUPALNData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVOPALNData
op_assign
id|SiS310_CHTVOPALNData
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVSOPALData
op_assign
id|SiS310_CHTVSOPALData
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1
op_assign
id|SiS310_LVDSCRT1800x600_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1
op_assign
id|SiS310_LVDSCRT11024x768_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1
op_assign
id|SiS310_LVDSCRT11280x1024_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1
op_assign
id|SiS310_LVDSCRT11400x1050_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1
op_assign
id|SiS310_LVDSCRT11600x1200_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_1_H
op_assign
id|SiS310_LVDSCRT1800x600_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_1_H
op_assign
id|SiS310_LVDSCRT11024x768_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_1_H
op_assign
id|SiS310_LVDSCRT11280x1024_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_1_H
op_assign
id|SiS310_LVDSCRT11400x1050_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_1_H
op_assign
id|SiS310_LVDSCRT11600x1200_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2
op_assign
id|SiS310_LVDSCRT1800x600_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2
op_assign
id|SiS310_LVDSCRT11024x768_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2
op_assign
id|SiS310_LVDSCRT11280x1024_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2
op_assign
id|SiS310_LVDSCRT11400x1050_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2
op_assign
id|SiS310_LVDSCRT11600x1200_2
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1800x600_2_H
op_assign
id|SiS310_LVDSCRT1800x600_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11024x768_2_H
op_assign
id|SiS310_LVDSCRT11024x768_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11280x1024_2_H
op_assign
id|SiS310_LVDSCRT11280x1024_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11400x1050_2_H
op_assign
id|SiS310_LVDSCRT11400x1050_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT11600x1200_2_H
op_assign
id|SiS310_LVDSCRT11600x1200_2_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1
op_assign
id|SiS310_LVDSCRT1XXXxXXX_1
suffix:semicolon
id|SiS_Pr-&gt;SiS_LVDSCRT1XXXxXXX_1_H
op_assign
id|SiS310_LVDSCRT1XXXxXXX_1_H
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1UNTSC
op_assign
id|SiS310_CHTVCRT1UNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1ONTSC
op_assign
id|SiS310_CHTVCRT1ONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1UPAL
op_assign
id|SiS310_CHTVCRT1UPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1OPAL
op_assign
id|SiS310_CHTVCRT1OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVCRT1SOPAL
op_assign
id|SiS310_CHTVCRT1OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UNTSC
op_assign
id|SiS310_CHTVReg_UNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_ONTSC
op_assign
id|SiS310_CHTVReg_ONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UPAL
op_assign
id|SiS310_CHTVReg_UPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_OPAL
op_assign
id|SiS310_CHTVReg_OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UPALM
op_assign
id|SiS310_CHTVReg_UPALM
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_OPALM
op_assign
id|SiS310_CHTVReg_OPALM
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_UPALN
op_assign
id|SiS310_CHTVReg_UPALN
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_OPALN
op_assign
id|SiS310_CHTVReg_OPALN
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVReg_SOPAL
op_assign
id|SiS310_CHTVReg_OPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUNTSC
op_assign
id|SiS310_CHTVVCLKUNTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKONTSC
op_assign
id|SiS310_CHTVVCLKONTSC
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUPAL
op_assign
id|SiS310_CHTVVCLKUPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKOPAL
op_assign
id|SiS310_CHTVVCLKOPAL
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALM
op_assign
id|SiS310_CHTVVCLKUPALM
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALM
op_assign
id|SiS310_CHTVVCLKOPALM
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKUPALN
op_assign
id|SiS310_CHTVVCLKUPALN
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKOPALN
op_assign
id|SiS310_CHTVVCLKOPALN
suffix:semicolon
id|SiS_Pr-&gt;SiS_CHTVVCLKSOPAL
op_assign
id|SiS310_CHTVVCLKOPAL
suffix:semicolon
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiSInitPtr
id|SiSInitPtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_switch
c_cond
(paren
id|HwInfo-&gt;jChipType
)paren
(brace
macro_line|#ifdef SIS315H
r_case
id|SIS_315H
suffix:colon
r_case
id|SIS_315
suffix:colon
r_case
id|SIS_315PRO
suffix:colon
r_case
id|SIS_550
suffix:colon
r_case
id|SIS_650
suffix:colon
r_case
id|SIS_740
suffix:colon
r_case
id|SIS_330
suffix:colon
r_case
id|SIS_661
suffix:colon
r_case
id|SIS_741
suffix:colon
r_case
id|SIS_660
suffix:colon
r_case
id|SIS_760
suffix:colon
r_case
id|SIS_761
suffix:colon
r_case
id|SIS_340
suffix:colon
id|InitTo310Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS300
r_case
id|SIS_300
suffix:colon
r_case
id|SIS_540
suffix:colon
r_case
id|SIS_630
suffix:colon
r_case
id|SIS_730
suffix:colon
id|InitTo300Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            HELPER: Get ModeID             */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_XF86
id|USHORT
DECL|function|SiS_GetModeID
id|SiS_GetModeID
c_func
(paren
r_int
id|VGAEngine
comma
id|ULONG
id|VBFlags
comma
r_int
id|HDisplay
comma
r_int
id|VDisplay
comma
r_int
id|Depth
comma
id|BOOLEAN
id|FSTN
comma
r_int
id|LCDwidth
comma
r_int
id|LCDheight
)paren
(brace
id|USHORT
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|240
)paren
(brace
r_if
c_cond
(paren
id|FSTN
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240_FSTN
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
id|ModeIndex
op_assign
id|ModeIndex_320x240
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|400
suffix:colon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|CRT1_LCDA
)paren
)paren
op_logical_or
(paren
(paren
id|LCDwidth
op_ge
l_int|800
)paren
op_logical_and
(paren
id|LCDwidth
op_ge
l_int|600
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|300
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_400x300
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|CRT1_LCDA
)paren
)paren
op_logical_or
(paren
(paren
id|LCDwidth
op_ge
l_int|1024
)paren
op_logical_and
(paren
id|LCDwidth
op_ge
l_int|768
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_768x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|848
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_848x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|856
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_856x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|540
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x540
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|864
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x864
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_switch
c_cond
(paren
id|VDisplay
)paren
(brace
r_case
l_int|720
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|Depth
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x800
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x960
(braket
id|Depth
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|Depth
)braket
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1360
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1360x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1360x1024
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1680
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1680x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1920
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1440
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1920x1440
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1080
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1920x1080
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|2048
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1536
)paren
(brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_2048x1536
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_2048x1536
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
macro_line|#endif
id|USHORT
DECL|function|SiS_GetModeID_LCD
id|SiS_GetModeID_LCD
c_func
(paren
r_int
id|VGAEngine
comma
id|ULONG
id|VBFlags
comma
r_int
id|HDisplay
comma
r_int
id|VDisplay
comma
r_int
id|Depth
comma
id|BOOLEAN
id|FSTN
comma
id|USHORT
id|CustomT
comma
r_int
id|LCDwidth
comma
r_int
id|LCDheight
)paren
(brace
id|USHORT
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_LVDS
op_or
id|VB_30xBDH
)paren
)paren
(brace
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|CustomT
op_ne
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|240
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|FSTN
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240_FSTN
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|400
suffix:colon
r_if
c_cond
(paren
id|CustomT
op_ne
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|VB_TRUMPION
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|300
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_400x300
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|CustomT
op_ne
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|VB_TRUMPION
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|LCDwidth
op_ge
l_int|1024
op_logical_and
id|LCDwidth
op_ne
l_int|1152
op_logical_and
id|LCDheight
op_ge
l_int|768
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
r_if
c_cond
(paren
id|CustomT
op_ne
id|CUT_PANEL848
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|848
suffix:colon
r_if
c_cond
(paren
id|CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_848x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
(paren
id|VDisplay
op_eq
l_int|600
)paren
op_logical_and
(paren
id|LCDheight
op_eq
l_int|600
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
(paren
id|VDisplay
op_eq
l_int|768
)paren
op_logical_and
(paren
id|LCDheight
op_eq
l_int|768
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
(paren
id|VDisplay
op_eq
l_int|768
)paren
op_logical_and
(paren
id|LCDheight
op_eq
l_int|768
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1360
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|CustomT
op_eq
id|CUT_BARCO1366
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1360x1024
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|CustomT
op_eq
id|CUT_PANEL848
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1360x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISBRIDGE
)paren
(brace
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|240
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|400
suffix:colon
r_if
c_cond
(paren
id|LCDwidth
op_ge
l_int|800
op_logical_and
id|LCDheight
op_ge
l_int|600
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|300
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_400x300
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|LCDwidth
op_ge
l_int|1024
op_logical_and
id|LCDheight
op_ge
l_int|768
op_logical_and
id|LCDwidth
op_ne
l_int|1152
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_768x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|848
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_848x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|856
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_856x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|540
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x540
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|864
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x864
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_switch
c_cond
(paren
id|VDisplay
)paren
(brace
r_case
l_int|720
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|Depth
)braket
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x800
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x960
(braket
id|Depth
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|Depth
)braket
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1360
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1360x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301C
op_or
id|VB_302LV
op_or
id|VB_302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301C
op_or
id|VB_302LV
op_or
id|VB_302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
macro_line|#ifndef VB_FORBID_CRT2LCD_OVER_1600
r_case
l_int|1680
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301C
op_or
id|VB_302LV
op_or
id|VB_302ELV
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1680x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
macro_line|#endif
)brace
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetModeID_TV
id|SiS_GetModeID_TV
c_func
(paren
r_int
id|VGAEngine
comma
id|ULONG
id|VBFlags
comma
r_int
id|HDisplay
comma
r_int
id|VDisplay
comma
r_int
id|Depth
)paren
(brace
id|USHORT
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_CHRONTEL
)paren
(brace
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VBFlags
op_amp
id|VB_SISTVBRIDGE
)paren
(brace
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|240
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|400
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|300
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_400x300
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
(paren
id|TV_YPBPR750P
op_or
id|TV_YPBPR1080I
)paren
)paren
)paren
op_logical_or
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
(paren
id|TV_YPBPR
op_or
id|TV_PALM
)paren
)paren
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_PAL
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR750P
)paren
)paren
op_logical_or
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
(paren
id|TV_YPBPR
op_or
id|TV_PALM
)paren
)paren
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_PAL
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR750P
)paren
)paren
op_logical_or
(paren
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
(paren
id|TV_YPBPR
op_or
id|TV_PALM
)paren
)paren
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_PAL
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_768x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
op_or
id|VB_301LV
op_or
id|VB_302LV
op_or
id|VB_302ELV
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|720
)paren
(brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
(paren
id|TV_YPBPR1080I
op_or
id|TV_YPBPR750P
)paren
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1024
)paren
(brace
r_if
c_cond
(paren
(paren
id|VBFlags
op_amp
id|TV_HIVISION
)paren
op_logical_or
(paren
(paren
id|VBFlags
op_amp
id|TV_YPBPR
)paren
op_logical_and
(paren
id|VBFlags
op_amp
id|TV_YPBPR1080I
)paren
)paren
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetModeID_VGA2
id|SiS_GetModeID_VGA2
c_func
(paren
r_int
id|VGAEngine
comma
id|ULONG
id|VBFlags
comma
r_int
id|HDisplay
comma
r_int
id|VDisplay
comma
r_int
id|Depth
)paren
(brace
id|USHORT
id|ModeIndex
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|HDisplay
)paren
(brace
r_case
l_int|320
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x200
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|240
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_320x240
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|400
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|300
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_400x300
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|384
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_512x384
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|640
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|400
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_640x400
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|720
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_720x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|768
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_768x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|800
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_800x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|848
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_848x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|856
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|480
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_856x480
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|960
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|540
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x540
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|600
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_960x600
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1024
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|576
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1024x576
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1152
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|864
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x864
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1152x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1280
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_300_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
(brace
id|ModeIndex
op_assign
id|ModeIndex_310_1280x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1024
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x1024
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|720
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x720
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|800
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x800
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|960
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1280x960
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1360
suffix:colon
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|768
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1360x768
(braket
id|Depth
)braket
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1400
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1400x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1600
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1200
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1600x1200
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|1680
suffix:colon
r_if
c_cond
(paren
id|VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
r_if
c_cond
(paren
id|VBFlags
op_amp
(paren
id|VB_301B
op_or
id|VB_301C
op_or
id|VB_302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|VDisplay
op_eq
l_int|1050
)paren
(brace
id|ModeIndex
op_assign
id|ModeIndex_1680x1050
(braket
id|Depth
)braket
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
)brace
r_return
id|ModeIndex
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*          HELPER: SetReg, GetReg           */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_SetReg
id|SiS_SetReg
c_func
(paren
id|SISIOADDRESS
id|port
comma
id|USHORT
id|index
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
id|index
)paren
suffix:semicolon
id|OutPortByte
c_func
(paren
id|port
op_plus
l_int|1
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegByte
id|SiS_SetRegByte
c_func
(paren
id|SISIOADDRESS
id|port
comma
id|USHORT
id|data
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegShort
id|SiS_SetRegShort
c_func
(paren
id|SISIOADDRESS
id|port
comma
id|USHORT
id|data
)paren
(brace
id|OutPortWord
c_func
(paren
id|port
comma
id|data
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegLong
id|SiS_SetRegLong
c_func
(paren
id|SISIOADDRESS
id|port
comma
id|ULONG
id|data
)paren
(brace
id|OutPortLong
c_func
(paren
id|port
comma
id|data
)paren
suffix:semicolon
)brace
id|UCHAR
DECL|function|SiS_GetReg
id|SiS_GetReg
c_func
(paren
id|SISIOADDRESS
id|port
comma
id|USHORT
id|index
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
id|index
)paren
suffix:semicolon
r_return
id|InPortByte
c_func
(paren
id|port
op_plus
l_int|1
)paren
suffix:semicolon
)brace
id|UCHAR
DECL|function|SiS_GetRegByte
id|SiS_GetRegByte
c_func
(paren
id|SISIOADDRESS
id|port
)paren
(brace
r_return
id|InPortByte
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
id|USHORT
DECL|function|SiS_GetRegShort
id|SiS_GetRegShort
c_func
(paren
id|SISIOADDRESS
id|port
)paren
(brace
r_return
id|InPortWord
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
id|ULONG
DECL|function|SiS_GetRegLong
id|SiS_GetRegLong
c_func
(paren
id|SISIOADDRESS
id|port
)paren
(brace
r_return
id|InPortLong
c_func
(paren
id|port
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegANDOR
id|SiS_SetRegANDOR
c_func
(paren
id|SISIOADDRESS
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
(paren
id|DataAND
)paren
)paren
op_or
id|DataOR
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegAND
id|SiS_SetRegAND
c_func
(paren
id|SISIOADDRESS
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_and_assign
id|DataAND
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetRegOR
id|SiS_SetRegOR
c_func
(paren
id|SISIOADDRESS
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
id|temp
op_or_assign
id|DataOR
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|Port
comma
id|Index
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*      HELPER: DisplayOn, DisplayOff        */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_DisplayOn
id|SiS_DisplayOn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x01
comma
l_int|0xDF
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_DisplayOff
id|SiS_DisplayOff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x01
comma
l_int|0x20
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*        HELPER: Init Port Addresses        */
multiline_comment|/*********************************************/
r_void
DECL|function|SiSRegInit
id|SiSRegInit
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISIOADDRESS
id|BaseAddr
)paren
(brace
id|SiS_Pr-&gt;SiS_P3c4
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3d4
op_assign
id|BaseAddr
op_plus
l_int|0x24
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c0
op_assign
id|BaseAddr
op_plus
l_int|0x10
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3ce
op_assign
id|BaseAddr
op_plus
l_int|0x1e
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c2
op_assign
id|BaseAddr
op_plus
l_int|0x12
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3ca
op_assign
id|BaseAddr
op_plus
l_int|0x1a
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c6
op_assign
id|BaseAddr
op_plus
l_int|0x16
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c7
op_assign
id|BaseAddr
op_plus
l_int|0x17
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c8
op_assign
id|BaseAddr
op_plus
l_int|0x18
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3c9
op_assign
id|BaseAddr
op_plus
l_int|0x19
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3cb
op_assign
id|BaseAddr
op_plus
l_int|0x1b
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3cd
op_assign
id|BaseAddr
op_plus
l_int|0x1d
suffix:semicolon
id|SiS_Pr-&gt;SiS_P3da
op_assign
id|BaseAddr
op_plus
l_int|0x2a
suffix:semicolon
id|SiS_Pr-&gt;SiS_Part1Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_04
suffix:semicolon
multiline_comment|/* Digital video interface registers (LCD) */
id|SiS_Pr-&gt;SiS_Part2Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_10
suffix:semicolon
multiline_comment|/* 301 TV Encoder registers */
id|SiS_Pr-&gt;SiS_Part3Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_12
suffix:semicolon
multiline_comment|/* 301 Macrovision registers */
id|SiS_Pr-&gt;SiS_Part4Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
suffix:semicolon
multiline_comment|/* 301 VGA2 (and LCD) registers */
id|SiS_Pr-&gt;SiS_Part5Port
op_assign
id|BaseAddr
op_plus
id|SIS_CRT2_PORT_14
op_plus
l_int|2
suffix:semicolon
multiline_comment|/* 301 palette address port registers */
id|SiS_Pr-&gt;SiS_DDC_Port
op_assign
id|BaseAddr
op_plus
l_int|0x14
suffix:semicolon
multiline_comment|/* DDC Port ( = P3C4, SR11/0A) */
id|SiS_Pr-&gt;SiS_VidCapt
op_assign
id|BaseAddr
op_plus
id|SIS_VIDEO_CAPTURE
suffix:semicolon
id|SiS_Pr-&gt;SiS_VidPlay
op_assign
id|BaseAddr
op_plus
id|SIS_VIDEO_PLAYBACK
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*             HELPER: GetSysFlags           */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_GetSysFlags
id|SiS_GetSysFlags
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_int
r_char
id|cr5f
comma
id|temp1
comma
id|temp2
suffix:semicolon
multiline_comment|/* 661 and newer: NEVER write non-zero to SR11[7:4] */
multiline_comment|/* (SR11 is used for DDC and in enable/disablebridge) */
id|SiS_Pr-&gt;SiS_SensibleSR11
op_assign
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;SiS_MyCR63
op_assign
l_int|0x63
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_330
)paren
(brace
id|SiS_Pr-&gt;SiS_MyCR63
op_assign
l_int|0x53
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|SiS_Pr-&gt;SiS_SensibleSR11
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
multiline_comment|/* You should use the macros, not these flags directly */
id|SiS_Pr-&gt;SiS_SysFlags
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_650
)paren
(brace
id|cr5f
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0xf0
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5c
comma
l_int|0x07
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5c
)paren
op_amp
l_int|0xf8
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5c
comma
l_int|0xf8
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5c
)paren
op_amp
l_int|0xf8
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|temp1
)paren
op_logical_or
(paren
id|temp2
)paren
)paren
(brace
r_switch
c_cond
(paren
id|cr5f
)paren
(brace
r_case
l_int|0x80
suffix:colon
r_case
l_int|0x90
suffix:colon
r_case
l_int|0xc0
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_IsM650
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0xa0
suffix:colon
r_case
l_int|0xb0
suffix:colon
r_case
l_int|0xe0
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_Is651
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
r_switch
c_cond
(paren
id|cr5f
)paren
(brace
r_case
l_int|0x90
suffix:colon
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5c
)paren
op_amp
l_int|0xf8
suffix:semicolon
r_switch
c_cond
(paren
id|temp1
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_IsM652
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x40
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_IsM653
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_IsM650
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|0xb0
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_Is652
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_IsM650
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_760
)paren
(brace
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x78
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x30
)paren
(brace
id|SiS_Pr-&gt;SiS_SysFlags
op_or_assign
id|SF_760LFB
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         HELPER: Init PCI &amp; Engines        */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiSInitPCIetc
id|SiSInitPCIetc
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_switch
c_cond
(paren
id|HwInfo-&gt;jChipType
)paren
(brace
r_case
id|SIS_300
suffix:colon
r_case
id|SIS_540
suffix:colon
r_case
id|SIS_630
suffix:colon
r_case
id|SIS_730
suffix:colon
multiline_comment|/* Set - PCI LINEAR ADDRESSING ENABLE (0x80)&n;       *     - RELOCATED VGA IO  (0x20)&n;       *     - MMIO ENABLE (0x1)&n;       */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x20
comma
l_int|0xa1
)paren
suffix:semicolon
multiline_comment|/*  - Enable 2D (0x40)&n;       *  - Enable 3D (0x02)&n;       *  - Enable 3D Vertex command fetch (0x10) ?&n;       *  - Enable 3D command parser (0x08) ?&n;       */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x5A
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_315H
suffix:colon
r_case
id|SIS_315
suffix:colon
r_case
id|SIS_315PRO
suffix:colon
r_case
id|SIS_650
suffix:colon
r_case
id|SIS_740
suffix:colon
r_case
id|SIS_330
suffix:colon
r_case
id|SIS_661
suffix:colon
r_case
id|SIS_741
suffix:colon
r_case
id|SIS_660
suffix:colon
r_case
id|SIS_760
suffix:colon
r_case
id|SIS_761
suffix:colon
r_case
id|SIS_340
suffix:colon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x20
comma
l_int|0xa1
)paren
suffix:semicolon
multiline_comment|/*  - Enable 2D (0x40)&n;       *  - Enable 3D (0x02)&n;       *  - Enable 3D vertex command fetch (0x10)&n;       *  - Enable 3D command parser (0x08)&n;       *  - Enable 3D G/L transformation engine (0x80)&n;       */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0xDA
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIS_550
suffix:colon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x20
comma
l_int|0xa1
)paren
suffix:semicolon
multiline_comment|/* No 3D engine ! */
multiline_comment|/*  - Enable 2D (0x40)&n;       */
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1E
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*             HELPER: SetLVDSetc            */
multiline_comment|/*********************************************/
r_void
DECL|function|SiSSetLVDSetc
id|SiSSetLVDSetc
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_CONEX
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_ChrontelInit
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Check for SiS30x first */
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|1
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|2
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|HwInfo-&gt;jChipType
)paren
(brace
macro_line|#ifdef SIS300
r_case
id|SIS_540
suffix:colon
r_case
id|SIS_630
suffix:colon
r_case
id|SIS_730
suffix:colon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0E
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|5
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|temp
op_eq
l_int|4
)paren
op_logical_or
(paren
id|temp
op_eq
l_int|5
)paren
)paren
(brace
multiline_comment|/* Save power status (and error check) - UNUSED */
id|SiS_Pr-&gt;SiS_Backup70xx
op_assign
id|SiS_GetCH700x
c_func
(paren
id|SiS_Pr
comma
l_int|0x0e
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_assign
l_int|1
suffix:semicolon
)brace
r_break
suffix:semicolon
macro_line|#endif
macro_line|#ifdef SIS315H
r_case
id|SIS_550
suffix:colon
r_case
id|SIS_650
suffix:colon
r_case
id|SIS_740
suffix:colon
r_case
id|SIS_330
suffix:colon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0x0E
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|3
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_assign
l_int|2
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SIS_661
suffix:colon
r_case
id|SIS_741
suffix:colon
r_case
id|SIS_660
suffix:colon
r_case
id|SIS_760
suffix:colon
r_case
id|SIS_761
suffix:colon
r_case
id|SIS_340
suffix:colon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|temp
op_amp
l_int|0xe0
)paren
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
(paren
id|temp
op_ge
l_int|2
)paren
op_logical_and
(paren
id|temp
op_le
l_int|3
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|3
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|4
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_CONEX
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Not yet supported */
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*          HELPER: Enable DSTN/FSTN         */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_SetEnableDstn
id|SiS_SetEnableDstn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|enable
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_DSTN
op_assign
id|enable
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|SiS_SetEnableFstn
id|SiS_SetEnableFstn
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|enable
)paren
(brace
id|SiS_Pr-&gt;SiS_IF_DEF_FSTN
op_assign
id|enable
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*        HELPER: Determine ROM usage        */
multiline_comment|/*********************************************/
id|BOOLEAN
DECL|function|SiSDetermineROMLayout661
id|SiSDetermineROMLayout661
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romversoffs
comma
id|romvmaj
op_assign
l_int|1
comma
id|romvmin
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_761
)paren
(brace
multiline_comment|/* I very much assume 761 and 340 will use new layout */
r_return
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x1a
)braket
op_eq
l_char|&squot;N&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1b
)braket
op_eq
l_char|&squot;e&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1c
)braket
op_eq
l_char|&squot;w&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1d
)braket
op_eq
l_char|&squot;V&squot;
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
id|romversoffs
op_assign
id|ROMAddr
(braket
l_int|0x16
)braket
op_or
(paren
id|ROMAddr
(braket
l_int|0x17
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|romversoffs
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
id|romversoffs
op_plus
l_int|1
)braket
op_eq
l_char|&squot;.&squot;
)paren
op_logical_or
(paren
id|ROMAddr
(braket
id|romversoffs
op_plus
l_int|4
)braket
op_eq
l_char|&squot;.&squot;
)paren
)paren
(brace
id|romvmaj
op_assign
id|ROMAddr
(braket
id|romversoffs
)braket
op_minus
l_char|&squot;0&squot;
suffix:semicolon
id|romvmin
op_assign
(paren
(paren
id|ROMAddr
(braket
id|romversoffs
op_plus
l_int|2
)braket
op_minus
l_char|&squot;0&squot;
)paren
op_star
l_int|10
)paren
op_plus
(paren
id|ROMAddr
(braket
id|romversoffs
op_plus
l_int|3
)braket
op_minus
l_char|&squot;0&squot;
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|romvmaj
op_ne
l_int|0
)paren
op_logical_or
(paren
id|romvmin
op_ge
l_int|92
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS650740
)paren
(brace
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|0x1a
)braket
op_eq
l_char|&squot;N&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1b
)braket
op_eq
l_char|&squot;e&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1c
)braket
op_eq
l_char|&squot;w&squot;
)paren
op_logical_and
(paren
id|ROMAddr
(braket
l_int|0x1d
)braket
op_eq
l_char|&squot;V&squot;
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiSDetermineROMUsage
id|SiSDetermineROMUsage
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|romptr
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_UseROM
op_assign
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;SiS_ROMNew
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ROMAddr
)paren
op_logical_and
(paren
id|HwInfo-&gt;UseROM
)paren
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
multiline_comment|/* 300: We check if the code starts below 0x220 by&n;&t;  * checking the jmp instruction at the beginning&n;&t;  * of the BIOS image.&n;&t;  */
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
l_int|3
)braket
op_eq
l_int|0xe9
)paren
op_logical_and
(paren
(paren
id|ROMAddr
(braket
l_int|5
)braket
op_lshift
l_int|8
)paren
op_or
id|ROMAddr
(braket
l_int|4
)braket
)paren
OG
l_int|0x21a
)paren
(brace
id|SiS_Pr-&gt;SiS_UseROM
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
multiline_comment|/* Sony&squot;s VAIO BIOS 1.09 follows the standard, so perhaps&n;&t;  * the others do as well&n;&t;  */
id|SiS_Pr-&gt;SiS_UseROM
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 315/330 series stick to the standard(s) */
id|SiS_Pr-&gt;SiS_UseROM
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_ROMNew
op_assign
id|SiSDetermineROMLayout661
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_EMIOffset
op_assign
l_int|14
suffix:semicolon
id|SiS_Pr-&gt;SiS661LCD2TableSize
op_assign
l_int|36
suffix:semicolon
multiline_comment|/* Find out about LCD data table entry size */
r_if
c_cond
(paren
(paren
id|romptr
op_assign
id|SISGETROMW
c_func
(paren
l_int|0x0102
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ROMAddr
(braket
id|romptr
op_plus
(paren
l_int|32
op_star
l_int|16
)paren
)braket
op_eq
l_int|0xff
)paren
(brace
id|SiS_Pr-&gt;SiS661LCD2TableSize
op_assign
l_int|32
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ROMAddr
(braket
id|romptr
op_plus
(paren
l_int|34
op_star
l_int|16
)paren
)braket
op_eq
l_int|0xff
)paren
(brace
id|SiS_Pr-&gt;SiS661LCD2TableSize
op_assign
l_int|34
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ROMAddr
(braket
id|romptr
op_plus
(paren
l_int|36
op_star
l_int|16
)paren
)braket
op_eq
l_int|0xff
)paren
(brace
multiline_comment|/* 0.94 */
id|SiS_Pr-&gt;SiS661LCD2TableSize
op_assign
l_int|36
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|ROMAddr
(braket
id|romptr
op_plus
(paren
l_int|38
op_star
l_int|16
)paren
)braket
op_eq
l_int|0xff
)paren
op_logical_or
multiline_comment|/* 2.00.00 - 2.02.00 */
(paren
id|ROMAddr
(braket
l_int|0x6F
)braket
op_amp
l_int|0x01
)paren
)paren
(brace
multiline_comment|/* 2.03.00+ */
id|SiS_Pr-&gt;SiS661LCD2TableSize
op_assign
l_int|38
suffix:semicolon
id|SiS_Pr-&gt;SiS_EMIOffset
op_assign
l_int|16
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*        HELPER: SET SEGMENT REGISTERS      */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetSegRegLower
id|SiS_SetSegRegLower
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|value
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|value
op_and_assign
l_int|0x00ff
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cb
)paren
op_amp
l_int|0xf0
suffix:semicolon
id|temp
op_or_assign
(paren
id|value
op_rshift
l_int|4
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cb
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cd
)paren
op_amp
l_int|0xf0
suffix:semicolon
id|temp
op_or_assign
(paren
id|value
op_amp
l_int|0x0f
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cd
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetSegRegUpper
id|SiS_SetSegRegUpper
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|value
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|value
op_and_assign
l_int|0x00ff
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cb
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|temp
op_or_assign
(paren
id|value
op_amp
l_int|0xf0
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cb
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cd
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|temp
op_or_assign
(paren
id|value
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3cd
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetSegmentReg
id|SiS_SetSegmentReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|value
)paren
(brace
id|SiS_SetSegRegLower
c_func
(paren
id|SiS_Pr
comma
id|value
)paren
suffix:semicolon
id|SiS_SetSegRegUpper
c_func
(paren
id|SiS_Pr
comma
id|value
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_ResetSegmentReg
id|SiS_ResetSegmentReg
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetSegmentReg
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetSegmentRegOver
id|SiS_SetSegmentRegOver
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|value
)paren
(brace
id|USHORT
id|temp
op_assign
id|value
op_rshift
l_int|8
suffix:semicolon
id|temp
op_and_assign
l_int|0x07
suffix:semicolon
id|temp
op_or_assign
(paren
id|temp
op_lshift
l_int|4
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1d
comma
id|temp
)paren
suffix:semicolon
id|SiS_SetSegmentReg
c_func
(paren
id|SiS_Pr
comma
id|value
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_ResetSegmentRegOver
id|SiS_ResetSegmentRegOver
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
id|SiS_SetSegmentRegOver
c_func
(paren
id|SiS_Pr
comma
l_int|0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_ResetSegmentRegisters
id|SiS_ResetSegmentRegisters
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
(paren
id|IS_SIS65x
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
)paren
(brace
id|SiS_ResetSegmentReg
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_ResetSegmentRegOver
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*             HELPER: GetVBType             */
multiline_comment|/*********************************************/
r_void
DECL|function|SiS_GetVBType
id|SiS_GetVBType
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|flag
op_assign
l_int|0
comma
id|rev
op_assign
l_int|0
comma
id|nolcd
op_assign
l_int|0
comma
id|p4_0f
comma
id|p4_25
comma
id|p4_27
suffix:semicolon
id|SiS_Pr-&gt;SiS_VBType
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CONEX
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
OG
l_int|3
)paren
(brace
r_return
suffix:semicolon
)brace
id|rev
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_ge
l_int|2
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS302B
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|flag
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|rev
op_ge
l_int|0xC0
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS301C
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|rev
op_ge
l_int|0xB0
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS301B
suffix:semicolon
multiline_comment|/* Check if 30xB DH version (no LCD support, use Panel Link instead) */
id|nolcd
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x23
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|nolcd
op_amp
l_int|0x02
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_or_assign
id|VB_NoLCD
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS301
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_SIS301B
op_or
id|VB_SIS301C
op_or
id|VB_SIS302B
)paren
)paren
(brace
r_if
c_cond
(paren
id|rev
op_ge
l_int|0xE0
)paren
(brace
id|flag
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag
op_eq
l_int|0xff
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS302LV
suffix:semicolon
)brace
r_else
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS301C
suffix:semicolon
multiline_comment|/* VB_SIS302ELV; */
)brace
r_else
r_if
c_cond
(paren
id|rev
op_ge
l_int|0xD0
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_assign
id|VB_SIS301LV
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
(paren
id|VB_301C
op_or
id|VB_301LV
op_or
id|VB_302LV
op_or
id|VB_302ELV
)paren
)paren
(brace
id|p4_0f
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0f
)paren
suffix:semicolon
id|p4_25
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x25
)paren
suffix:semicolon
id|p4_27
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0f
comma
l_int|0x7f
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x25
comma
l_int|0x08
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
l_int|0xfd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x26
)paren
op_amp
l_int|0x08
)paren
(brace
id|SiS_Pr-&gt;SiS_VBType
op_or_assign
id|VB_UMC
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x27
comma
id|p4_27
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x25
comma
id|p4_25
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0f
comma
id|p4_0f
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: Check RAM size          */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_KERNEL
r_static
id|BOOLEAN
DECL|function|SiS_CheckMemorySize
id|SiS_CheckMemorySize
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|AdapterMemSize
op_assign
id|HwInfo-&gt;ulVideoMemorySize
op_div
(paren
l_int|1024
op_star
l_int|1024
)paren
suffix:semicolon
id|USHORT
id|memorysize
comma
id|modeflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
)brace
id|memorysize
op_assign
id|modeflag
op_amp
id|MemoryInfoFlag
suffix:semicolon
id|memorysize
op_rshift_assign
id|MemorySizeShift
suffix:semicolon
multiline_comment|/* Get required memory size */
id|memorysize
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|AdapterMemSize
OL
id|memorysize
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: Get DRAM type           */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS315H
r_static
id|UCHAR
DECL|function|SiS_Get310DRAMType
id|SiS_Get310DRAMType
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|data
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
id|SiS_Pr-&gt;pSiS_SoftSetting
)paren
op_amp
id|SoftDRAMType
)paren
(brace
id|data
op_assign
(paren
op_star
id|SiS_Pr-&gt;pSiS_SoftSetting
)paren
op_amp
l_int|0x03
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_340
)paren
(brace
multiline_comment|/* TODO */
id|data
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|data
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x78
)paren
op_amp
l_int|0x07
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|data
op_assign
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x78
)paren
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS550650740
)paren
(brace
id|data
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x13
)paren
op_amp
l_int|0x07
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 315, 330 */
id|data
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3a
)paren
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
r_if
c_cond
(paren
id|data
OG
l_int|1
)paren
(brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x5f
)paren
op_amp
l_int|0x30
suffix:semicolon
r_switch
c_cond
(paren
id|temp
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|data
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|data
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x20
suffix:colon
id|data
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x30
suffix:colon
id|data
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|data
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
id|data
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_GetMCLK
id|SiS_GetMCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|index
suffix:semicolon
id|index
op_assign
id|SiS_Get310DRAMType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_return
(paren
id|USHORT
)paren
(paren
id|SISGETROMW
c_func
(paren
(paren
l_int|0x90
op_plus
(paren
id|index
op_star
l_int|5
)paren
op_plus
l_int|3
)paren
)paren
)paren
suffix:semicolon
)brace
r_return
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|index
op_ge
l_int|4
)paren
(brace
id|index
op_sub_assign
l_int|4
suffix:semicolon
r_return
id|SiS_Pr-&gt;SiS_MCLKData_1
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
r_else
(brace
r_return
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: ClearBuffer             */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_KERNEL
r_static
r_void
DECL|function|SiS_ClearBuffer
id|SiS_ClearBuffer
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
)paren
(brace
id|UCHAR
id|SISIOMEMTYPE
op_star
id|VideoMemoryAddress
op_assign
id|HwInfo-&gt;pjVideoMemoryAddress
suffix:semicolon
id|ULONG
id|AdapterMemorySize
op_assign
id|HwInfo-&gt;ulVideoMemorySize
suffix:semicolon
id|USHORT
id|SISIOMEMTYPE
op_star
id|pBuffer
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ge
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetMemory
c_func
(paren
id|VideoMemoryAddress
comma
id|AdapterMemorySize
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|pBuffer
op_assign
(paren
id|USHORT
id|SISIOMEMTYPE
op_star
)paren
id|VideoMemoryAddress
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|writew
c_func
(paren
l_int|0x0000
comma
op_amp
id|pBuffer
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OL
id|ModeCGA
)paren
(brace
id|pBuffer
op_assign
(paren
id|USHORT
id|SISIOMEMTYPE
op_star
)paren
id|VideoMemoryAddress
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x4000
suffix:semicolon
id|i
op_increment
)paren
(brace
id|writew
c_func
(paren
l_int|0x0720
comma
op_amp
id|pBuffer
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|SiS_SetMemory
c_func
(paren
id|VideoMemoryAddress
comma
l_int|0x8000
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: SearchModeID            */
multiline_comment|/*********************************************/
id|BOOLEAN
DECL|function|SiS_SearchModeID
id|SiS_SearchModeID
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
op_star
id|ModeNo
comma
id|USHORT
op_star
id|ModeIdIndex
)paren
(brace
id|UCHAR
id|VGAINFO
op_assign
id|SiS_Pr-&gt;SiS_VGAINFO
suffix:semicolon
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
id|ModeNo
)paren
op_le
l_int|0x05
)paren
(brace
(paren
op_star
id|ModeNo
)paren
op_or_assign
l_int|0x01
suffix:semicolon
)brace
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
(paren
op_star
id|ModeNo
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|St_ModeID
op_eq
l_int|0xFF
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_eq
l_int|0x07
)paren
(brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines */
multiline_comment|/* else 350 lines */
)brace
r_if
c_cond
(paren
op_star
id|ModeNo
op_le
l_int|0x03
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VGAINFO
op_amp
l_int|0x80
)paren
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAINFO
op_amp
l_int|0x10
)paren
(brace
(paren
op_star
id|ModeIdIndex
)paren
op_increment
suffix:semicolon
)brace
multiline_comment|/* 400 lines  */
multiline_comment|/* else 350 lines  */
)brace
multiline_comment|/* else 200 lines  */
)brace
r_else
(brace
r_for
c_loop
(paren
op_star
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
(paren
op_star
id|ModeIdIndex
)paren
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
(paren
op_star
id|ModeNo
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
op_star
id|ModeIdIndex
)braket
dot
id|Ext_ModeID
op_eq
l_int|0xFF
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            HELPER: GetModePtr             */
multiline_comment|/*********************************************/
id|UCHAR
DECL|function|SiS_GetModePtr
id|SiS_GetModePtr
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_StTableIndex
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeEGA
)paren
(brace
id|index
op_assign
l_int|0x1B
suffix:semicolon
)brace
r_else
id|index
op_assign
l_int|0x0F
suffix:semicolon
)brace
r_return
id|index
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: LowModeTests            */
multiline_comment|/*********************************************/
r_static
id|BOOLEAN
DECL|function|SiS_DoLowModeTest
id|SiS_DoLowModeTest
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
comma
id|temp2
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeNo
op_ne
l_int|0x03
)paren
op_logical_and
(paren
id|ModeNo
op_ne
l_int|0x10
)paren
op_logical_and
(paren
id|ModeNo
op_ne
l_int|0x12
)paren
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x80
)paren
suffix:semicolon
id|temp1
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
l_int|0x55
)paren
suffix:semicolon
id|temp2
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x00
comma
id|temp1
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
)paren
(brace
r_if
c_cond
(paren
id|temp2
op_eq
l_int|0x55
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_else
r_return
id|TRUE
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|temp2
op_ne
l_int|0x55
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0x01
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_SetLowModeTest
id|SiS_SetLowModeTest
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|SiS_DoLowModeTest
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|LowModeTests
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*            HELPER: ENABLE CRT1            */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetupCR5x
id|SiS_SetupCR5x
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS650
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x51
comma
l_int|0x1f
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_SIS651
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x51
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x56
comma
l_int|0xe7
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|IS_SIS661741660760
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x61
comma
l_int|0xf7
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x51
comma
l_int|0x1f
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x56
comma
l_int|0xe7
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x3a
comma
l_int|0xef
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_HandleCRT1
id|SiS_HandleCRT1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
)paren
(brace
multiline_comment|/* Enable CRT1 gating */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|SiS_Pr-&gt;SiS_MyCR63
comma
l_int|0xbf
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x15
)paren
op_amp
l_int|0x01
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x15
)paren
op_amp
l_int|0x0a
)paren
op_logical_or
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
op_amp
l_int|0x01
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|SiS_Pr-&gt;SiS_MyCR63
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*           HELPER: GetColorDepth           */
multiline_comment|/*********************************************/
id|USHORT
DECL|function|SiS_GetColorDepth
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|ColorDepth
(braket
l_int|6
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|4
comma
l_int|4
comma
l_int|6
comma
l_int|8
)brace
suffix:semicolon
id|SHORT
id|index
suffix:semicolon
id|USHORT
id|modeflag
suffix:semicolon
multiline_comment|/* Do NOT check UseCustomMode, will skrew up FIFO */
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0xfe
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|index
op_assign
(paren
id|modeflag
op_amp
id|ModeTypeMask
)paren
op_minus
id|ModeEGA
suffix:semicolon
r_if
c_cond
(paren
id|index
OL
l_int|0
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|ColorDepth
(braket
id|index
)braket
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*             HELPER: GetOffset             */
multiline_comment|/*********************************************/
id|USHORT
DECL|function|SiS_GetOffset
id|SiS_GetOffset
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|xres
comma
id|temp
comma
id|colordepth
comma
id|infoflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;CHDisplay
suffix:semicolon
)brace
r_else
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|XRes
suffix:semicolon
)brace
id|colordepth
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
id|temp
op_assign
id|xres
op_div
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|temp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|temp
op_mul_assign
id|colordepth
suffix:semicolon
r_if
c_cond
(paren
id|xres
op_mod
l_int|16
)paren
(brace
id|colordepth
op_rshift_assign
l_int|1
suffix:semicolon
id|temp
op_add_assign
id|colordepth
suffix:semicolon
)brace
r_return
id|temp
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                   SEQ                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetSeqRegs
id|SiS_SetSeqRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|StandTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|SRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x00
comma
l_int|0x03
)paren
suffix:semicolon
multiline_comment|/* Set SR0  */
id|SRdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToTV
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SRdata
op_or_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* 8 dot clock  */
)brace
)brace
)brace
id|SRdata
op_or_assign
l_int|0x20
suffix:semicolon
multiline_comment|/* screen off  */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x01
comma
id|SRdata
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
op_le
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SRdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|SR
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|i
comma
id|SRdata
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  MISC                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetMiscRegs
id|SiS_SetMiscRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|StandTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|Miscdata
suffix:semicolon
id|Miscdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|MISC
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|Miscdata
op_or_assign
l_int|0x0C
suffix:semicolon
)brace
)brace
)brace
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c2
comma
id|Miscdata
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  CRTC                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRTCRegs
id|SiS_SetCRTCRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|CRTCdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
multiline_comment|/* Unlock CRTC */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x18
suffix:semicolon
id|i
op_increment
)paren
(brace
id|CRTCdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|CRTCdata
)paren
suffix:semicolon
multiline_comment|/* Set CRTC(3d4) */
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|SiS_SetupCR5x
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x13
suffix:semicolon
id|i
op_le
l_int|0x14
suffix:semicolon
id|i
op_increment
)paren
(brace
id|CRTCdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|CRTC
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|i
comma
id|CRTCdata
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
op_logical_and
(paren
id|HwInfo-&gt;jChipRevision
op_ge
l_int|0x30
)paren
)paren
(brace
multiline_comment|/* for 630S0 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SetCRT2ToTV
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x18
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                   ATT                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetATTRegs
id|SiS_SetATTRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|StandTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|ARdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x13
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ARdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|ATTR
(braket
id|i
)braket
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
(paren
id|i
op_le
l_int|0x0f
)paren
op_logical_or
(paren
id|i
op_eq
l_int|0x11
)paren
)paren
(brace
r_if
c_cond
(paren
id|ds
suffix:colon
l_int|489
op_amp
l_int|0x08
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
id|i
op_eq
l_int|0x13
)paren
(brace
multiline_comment|/* Pixel shift. If screen on LCD or TV is shifted left or right,&n;          * this might be the cause.&n;          */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetCRT2ToTV
op_or
id|SetCRT2ToLCD
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|IS_SIS550650740660
)paren
(brace
multiline_comment|/* 315, 330 don&squot;t do this */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301B302B
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|ARdata
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c0
comma
id|i
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c0
comma
id|ARdata
)paren
suffix:semicolon
multiline_comment|/* set data   */
)brace
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
multiline_comment|/* reset 3da  */
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c0
comma
l_int|0x14
)paren
suffix:semicolon
multiline_comment|/* set index  */
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c0
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* set data   */
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c0
comma
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* Enable Attribute  */
id|SiS_GetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3da
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                   GRC                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetGRCRegs
id|SiS_SetGRCRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|StandTableIndex
)paren
(brace
id|UCHAR
id|GRdata
suffix:semicolon
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x08
suffix:semicolon
id|i
op_increment
)paren
(brace
id|GRdata
op_assign
id|SiS_Pr-&gt;SiS_StandTable
(braket
id|StandTableIndex
)braket
dot
id|GRC
(braket
id|i
)braket
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3ce
comma
id|i
comma
id|GRdata
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
multiline_comment|/* 256 color disable */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3ce
comma
l_int|0x05
comma
l_int|0xBF
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*          CLEAR EXTENDED REGISTERS         */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_ClearExt1Regs
id|SiS_ClearExt1Regs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|0x0E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|i
comma
l_int|0x00
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x37
comma
l_int|0xFE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_eq
l_int|0x06
op_logical_or
id|ModeNo
op_ge
l_int|0x0e
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0e
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                 RESET VCLK                */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_ResetCRT1VCLK
id|SiS_ResetCRT1VCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|0
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0xCF
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x20
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_Pr-&gt;SiS_VCLKData
(braket
l_int|1
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_Pr-&gt;SiS_VCLKData
(braket
l_int|1
)braket
dot
id|SR2C
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0xcf
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x10
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2B
comma
id|SiS_Pr-&gt;SiS_VCLKData
(braket
l_int|0
)braket
dot
id|SR2B
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2C
comma
id|SiS_Pr-&gt;SiS_VCLKData
(braket
l_int|0
)braket
dot
id|SR2C
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  SYNC                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT1Sync
id|SiS_SetCRT1Sync
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|sync
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|sync
op_assign
id|SiS_Pr-&gt;CInfoFlag
op_rshift
l_int|8
suffix:semicolon
)brace
r_else
(brace
id|sync
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_rshift
l_int|8
suffix:semicolon
)brace
id|sync
op_and_assign
l_int|0xC0
suffix:semicolon
id|sync
op_or_assign
l_int|0x2f
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c2
comma
id|sync
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  CRTC/2                   */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT1CRTC
id|SiS_SetCRT1CRTC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
id|index
suffix:semicolon
id|USHORT
id|temp
comma
id|i
comma
id|j
comma
id|modeflag
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
multiline_comment|/* unlock cr0-7 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|7
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|10
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|15
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_amp
l_int|0xE0
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x09
comma
l_int|0x5F
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|7
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|10
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|15
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|j
comma
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
op_amp
l_int|0xE0
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
)paren
op_amp
l_int|0x01
)paren
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|temp
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x09
comma
l_int|0x5F
comma
id|temp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeVGA
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x14
comma
l_int|0x4F
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*               OFFSET &amp; PITCH              */
multiline_comment|/*********************************************/
multiline_comment|/*  (partly overruled by SetPitch() in XF86) */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT1Offset
id|SiS_SetCRT1Offset
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|temp
comma
id|DisplayUnit
comma
id|infoflag
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
)brace
r_else
(brace
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
)brace
id|DisplayUnit
op_assign
id|SiS_GetOffset
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|DisplayUnit
op_rshift
l_int|8
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
l_int|0xF0
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
id|DisplayUnit
op_amp
l_int|0xFF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x13
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|DisplayUnit
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|DisplayUnit
op_lshift_assign
l_int|5
suffix:semicolon
id|temp
op_assign
(paren
id|DisplayUnit
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|DisplayUnit
op_amp
l_int|0xff
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
id|temp
op_increment
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x10
comma
id|temp
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  VCLK                     */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT1VCLK
id|SiS_SetCRT1VCLK
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|index
op_assign
l_int|0
comma
id|clka
comma
id|clkb
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|clka
op_assign
id|SiS_Pr-&gt;CSR2B
suffix:semicolon
id|clkb
op_assign
id|SiS_Pr-&gt;CSR2C
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|clka
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|index
)braket
dot
id|Part4_A
suffix:semicolon
id|clkb
op_assign
id|SiS_Pr-&gt;SiS_VBVCLKData
(braket
id|index
)braket
dot
id|Part4_B
suffix:semicolon
)brace
r_else
(brace
id|clka
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2B
suffix:semicolon
id|clkb
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|SR2C
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0xCF
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2B
comma
id|clka
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2C
comma
id|clkb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x2D
comma
l_int|0x80
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                  FIFO                     */
multiline_comment|/*********************************************/
macro_line|#ifdef SIS300
r_static
id|USHORT
DECL|function|SiS_DoCalcDelay
id|SiS_DoCalcDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|MCLK
comma
id|USHORT
id|VCLK
comma
id|USHORT
id|colordepth
comma
id|USHORT
id|key
)paren
(brace
r_const
id|UCHAR
id|ThLowA
(braket
)braket
op_assign
(brace
l_int|61
comma
l_int|3
comma
l_int|52
comma
l_int|5
comma
l_int|68
comma
l_int|7
comma
l_int|100
comma
l_int|11
comma
l_int|43
comma
l_int|3
comma
l_int|42
comma
l_int|5
comma
l_int|54
comma
l_int|7
comma
l_int|78
comma
l_int|11
comma
l_int|34
comma
l_int|3
comma
l_int|37
comma
l_int|5
comma
l_int|47
comma
l_int|7
comma
l_int|67
comma
l_int|11
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThLowB
(braket
)braket
op_assign
(brace
l_int|81
comma
l_int|4
comma
l_int|72
comma
l_int|6
comma
l_int|88
comma
l_int|8
comma
l_int|120
comma
l_int|12
comma
l_int|55
comma
l_int|4
comma
l_int|54
comma
l_int|6
comma
l_int|66
comma
l_int|8
comma
l_int|90
comma
l_int|12
comma
l_int|42
comma
l_int|4
comma
l_int|45
comma
l_int|6
comma
l_int|55
comma
l_int|8
comma
l_int|75
comma
l_int|12
)brace
suffix:semicolon
r_const
id|UCHAR
id|ThTiming
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
id|USHORT
id|tempah
comma
id|tempal
comma
id|tempcl
comma
id|tempbx
comma
id|temp
suffix:semicolon
id|ULONG
id|longtemp
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0x62
suffix:semicolon
id|tempah
op_rshift_assign
l_int|1
suffix:semicolon
id|tempal
op_assign
id|tempah
suffix:semicolon
id|tempah
op_rshift_assign
l_int|3
suffix:semicolon
id|tempal
op_or_assign
id|tempah
suffix:semicolon
id|tempal
op_and_assign
l_int|0x07
suffix:semicolon
id|tempcl
op_assign
id|ThTiming
(braket
id|tempal
)braket
suffix:semicolon
id|tempbx
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|tempbx
op_rshift_assign
l_int|6
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
id|tempah
op_rshift_assign
l_int|4
suffix:semicolon
id|tempah
op_and_assign
l_int|0x0c
suffix:semicolon
id|tempbx
op_or_assign
id|tempah
suffix:semicolon
id|tempbx
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|key
op_eq
l_int|0
)paren
(brace
id|tempal
op_assign
id|ThLowA
(braket
id|tempbx
op_plus
l_int|1
)braket
suffix:semicolon
id|tempal
op_mul_assign
id|tempcl
suffix:semicolon
id|tempal
op_add_assign
id|ThLowA
(braket
id|tempbx
)braket
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|ThLowB
(braket
id|tempbx
op_plus
l_int|1
)braket
suffix:semicolon
id|tempal
op_mul_assign
id|tempcl
suffix:semicolon
id|tempal
op_add_assign
id|ThLowB
(braket
id|tempbx
)braket
suffix:semicolon
)brace
id|longtemp
op_assign
id|tempal
op_star
id|VCLK
op_star
id|colordepth
suffix:semicolon
id|temp
op_assign
id|longtemp
op_mod
(paren
id|MCLK
op_star
l_int|16
)paren
suffix:semicolon
id|longtemp
op_div_assign
(paren
id|MCLK
op_star
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
)paren
(brace
id|longtemp
op_increment
suffix:semicolon
)brace
r_return
(paren
id|USHORT
)paren
id|longtemp
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_CalcDelay
id|SiS_CalcDelay
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|VCLK
comma
id|USHORT
id|colordepth
comma
id|USHORT
id|MCLK
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
suffix:semicolon
id|tempbx
op_assign
id|SiS_DoCalcDelay
c_func
(paren
id|SiS_Pr
comma
id|MCLK
comma
id|VCLK
comma
id|colordepth
comma
l_int|0
)paren
suffix:semicolon
id|tempax
op_assign
id|SiS_DoCalcDelay
c_func
(paren
id|SiS_Pr
comma
id|MCLK
comma
id|VCLK
comma
id|colordepth
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempax
OL
l_int|4
)paren
(brace
id|tempax
op_assign
l_int|4
suffix:semicolon
)brace
id|tempax
op_sub_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OL
id|tempax
)paren
(brace
id|tempbx
op_assign
id|tempax
suffix:semicolon
)brace
r_return
id|tempbx
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetCRT1FIFO_300
id|SiS_SetCRT1FIFO_300
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|ThresholdLow
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|index
comma
id|VCLK
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|tempah
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
)brace
r_switch
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_minus
id|ModeEGA
)paren
(brace
multiline_comment|/* Get half colordepth */
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
)brace
id|index
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
id|index
op_and_assign
l_int|0x07
suffix:semicolon
id|MCLK
op_assign
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|tempah
op_and_assign
l_int|0xc3
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
comma
l_int|0x3c
comma
id|tempah
)paren
suffix:semicolon
r_do
(brace
id|ThresholdLow
op_assign
id|SiS_CalcDelay
c_func
(paren
id|SiS_Pr
comma
id|VCLK
comma
id|colorth
comma
id|MCLK
)paren
suffix:semicolon
id|ThresholdLow
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ThresholdLow
OL
l_int|0x13
)paren
(brace
r_break
suffix:semicolon
)brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
comma
l_int|0xfc
)paren
suffix:semicolon
id|ThresholdLow
op_assign
l_int|0x13
suffix:semicolon
id|tempah
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|tempah
op_rshift_assign
l_int|6
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
id|tempah
op_decrement
suffix:semicolon
id|tempah
op_lshift_assign
l_int|6
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x16
comma
l_int|0x3f
comma
id|tempah
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|0
)paren
(brace
suffix:semicolon
)brace
)brace
r_else
id|ThresholdLow
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* Write CRT/CPU threshold low, CRT/Engine threshold high */
id|temp
op_assign
(paren
id|ThresholdLow
op_lshift
l_int|4
)paren
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x08
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|ThresholdLow
op_amp
l_int|0x10
)paren
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|temp
op_or_assign
l_int|0x40
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0f
comma
l_int|0x9f
comma
id|temp
)paren
suffix:semicolon
multiline_comment|/* What is this? */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3B
comma
l_int|0x09
)paren
suffix:semicolon
multiline_comment|/* Write CRT/CPU threshold high */
id|temp
op_assign
id|ThresholdLow
op_plus
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|temp
OG
l_int|0x0f
)paren
(brace
id|temp
op_assign
l_int|0x0f
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x09
comma
id|temp
)paren
suffix:semicolon
)brace
r_static
id|USHORT
DECL|function|SiS_CalcDelay2
id|SiS_CalcDelay2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|UCHAR
id|key
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|data
comma
id|index
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor
(braket
)braket
op_assign
(brace
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|87
comma
l_int|85
comma
l_int|78
comma
l_int|76
comma
l_int|54
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|97
comma
l_int|88
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|79
comma
l_int|77
comma
l_int|70
comma
l_int|68
comma
l_int|48
comma
multiline_comment|/*; 128 bit    BQ=1   */
l_int|80
comma
l_int|72
comma
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|00
comma
multiline_comment|/*; 64  bit    BQ=2   */
l_int|00
comma
l_int|70
comma
l_int|68
comma
l_int|61
comma
l_int|59
comma
l_int|37
comma
multiline_comment|/*; 64  bit    BQ=1   */
l_int|86
comma
l_int|77
comma
l_int|75
comma
l_int|68
comma
l_int|66
comma
l_int|00
comma
multiline_comment|/*; 128 bit    BQ=2   */
l_int|00
comma
l_int|68
comma
l_int|66
comma
l_int|59
comma
l_int|57
comma
l_int|37
multiline_comment|/*; 128 bit    BQ=1   */
)brace
suffix:semicolon
r_const
id|UCHAR
id|LatencyFactor730
(braket
)braket
op_assign
(brace
l_int|69
comma
l_int|63
comma
l_int|61
comma
l_int|86
comma
l_int|79
comma
l_int|77
comma
l_int|103
comma
l_int|96
comma
l_int|94
comma
l_int|120
comma
l_int|113
comma
l_int|111
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* --- Table ends with this entry, data below */
l_int|137
comma
l_int|130
comma
l_int|128
comma
multiline_comment|/* to avoid using illegal values              */
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
l_int|137
comma
l_int|130
comma
l_int|128
comma
)brace
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|index
op_assign
(paren
(paren
id|key
op_amp
l_int|0x0f
)paren
op_star
l_int|3
)paren
op_plus
(paren
(paren
id|key
op_amp
l_int|0xC0
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
id|data
op_assign
id|LatencyFactor730
(braket
id|index
)braket
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
(paren
id|key
op_amp
l_int|0xE0
)paren
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|key
op_amp
l_int|0x10
)paren
(brace
id|index
op_add_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|key
op_amp
l_int|0x01
)paren
)paren
(brace
id|index
op_add_assign
l_int|24
suffix:semicolon
)brace
id|data
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x14
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x0080
)paren
(brace
id|index
op_add_assign
l_int|12
suffix:semicolon
)brace
id|data
op_assign
id|LatencyFactor
(braket
id|index
)braket
suffix:semicolon
)brace
r_return
id|data
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetCRT1FIFO_630
id|SiS_SetCRT1FIFO_630
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|i
comma
id|index
comma
id|data
comma
id|VCLK
comma
id|MCLK
comma
id|colorth
op_assign
l_int|0
suffix:semicolon
id|ULONG
id|B
comma
id|eax
comma
id|bl
comma
id|data2
suffix:semicolon
id|USHORT
id|ThresholdLow
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|FQBQData
(braket
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x21
comma
l_int|0x41
comma
l_int|0x61
comma
l_int|0x81
comma
l_int|0x31
comma
l_int|0x51
comma
l_int|0x71
comma
l_int|0x91
comma
l_int|0xb1
comma
l_int|0x00
comma
l_int|0x20
comma
l_int|0x40
comma
l_int|0x60
comma
l_int|0x80
comma
l_int|0x30
comma
l_int|0x50
comma
l_int|0x70
comma
l_int|0x90
comma
l_int|0xb0
comma
l_int|0xFF
)brace
suffix:semicolon
id|UCHAR
id|FQBQData730
(braket
)braket
op_assign
(brace
l_int|0x34
comma
l_int|0x74
comma
l_int|0xb4
comma
l_int|0x23
comma
l_int|0x63
comma
l_int|0xa3
comma
l_int|0x12
comma
l_int|0x52
comma
l_int|0x92
comma
l_int|0x01
comma
l_int|0x41
comma
l_int|0x81
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0x80
comma
l_int|0xff
)brace
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
id|index
op_and_assign
l_int|0x3F
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get VCLK  */
)brace
id|index
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1A
)paren
suffix:semicolon
id|index
op_and_assign
l_int|0x07
suffix:semicolon
id|MCLK
op_assign
id|SiS_Pr-&gt;SiS_MCLKData_0
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
multiline_comment|/* Get MCLK  */
id|data2
op_assign
id|SiS_Pr-&gt;SiS_ModeType
op_minus
id|ModeEGA
suffix:semicolon
multiline_comment|/* Get half colordepth */
r_switch
c_cond
(paren
id|data2
)paren
(brace
r_case
l_int|0
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|colorth
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|colorth
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|colorth
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|colorth
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
r_do
(brace
id|B
op_assign
id|SiS_CalcDelay2
c_func
(paren
id|SiS_Pr
comma
id|FQBQData730
(braket
id|i
)braket
comma
id|HwInfo
)paren
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
id|bl
op_assign
id|B
op_div
(paren
id|MCLK
op_star
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|B
op_eq
id|bl
op_star
l_int|16
op_star
id|MCLK
)paren
(brace
id|bl
op_assign
id|bl
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|bl
op_assign
id|bl
op_plus
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bl
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|FQBQData730
(braket
id|i
op_plus
l_int|1
)braket
op_eq
l_int|0xFF
)paren
(brace
id|ThresholdLow
op_assign
l_int|0x13
suffix:semicolon
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|ThresholdLow
op_assign
id|bl
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|FQBQData730
(braket
id|i
)braket
op_ne
l_int|0xFF
)paren
(brace
suffix:semicolon
)brace
)brace
r_else
(brace
r_do
(brace
id|B
op_assign
id|SiS_CalcDelay2
c_func
(paren
id|SiS_Pr
comma
id|FQBQData
(braket
id|i
)braket
comma
id|HwInfo
)paren
op_star
id|VCLK
op_star
id|colorth
suffix:semicolon
id|bl
op_assign
id|B
op_div
(paren
id|MCLK
op_star
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|B
op_eq
id|bl
op_star
l_int|16
op_star
id|MCLK
)paren
(brace
id|bl
op_assign
id|bl
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|bl
op_assign
id|bl
op_plus
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bl
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|FQBQData
(braket
id|i
op_plus
l_int|1
)braket
op_eq
l_int|0xFF
)paren
(brace
id|ThresholdLow
op_assign
l_int|0x13
suffix:semicolon
r_break
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|ThresholdLow
op_assign
id|bl
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|FQBQData
(braket
id|i
)braket
op_ne
l_int|0xFF
)paren
(brace
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
)brace
r_else
(brace
id|i
op_assign
l_int|9
suffix:semicolon
)brace
id|ThresholdLow
op_assign
l_int|0x02
suffix:semicolon
)brace
multiline_comment|/* Write foreground and background queue */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
(brace
id|data2
op_assign
id|FQBQData730
(braket
id|i
)braket
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_amp
l_int|0xC0
)paren
op_rshift
l_int|5
suffix:semicolon
id|data2
op_lshift_assign
l_int|8
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xfffff9ff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|SiS_SetRegLong
c_func
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/* We use pci functions X offers. We use pcitag 0, because&n;      * we want to read/write to the host bridge (which is always&n;      * 00:00.0 on 630, 730 and 540), not the VGA device.&n;      */
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xfffff9ff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|pciWriteLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
comma
id|eax
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Write GUI grant timer (PCI config 0xA3) */
id|data2
op_assign
id|FQBQData730
(braket
id|i
)braket
op_lshift
l_int|8
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_amp
l_int|0x0f00
)paren
op_or
(paren
(paren
id|data2
op_amp
l_int|0x3000
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|data2
op_lshift_assign
l_int|20
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0x00ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|SiS_SetRegLong
c_func
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0x00ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|pciWriteLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
comma
id|eax
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|data2
op_assign
id|FQBQData
(braket
id|i
)braket
suffix:semicolon
id|data2
op_assign
(paren
id|data2
op_amp
l_int|0xf0
)paren
op_rshift
l_int|4
suffix:semicolon
id|data2
op_lshift_assign
l_int|24
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|SiS_SetRegLong
c_func
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|pciWriteLong
c_func
(paren
l_int|0x00000000
comma
l_int|0x50
comma
id|eax
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Write GUI grant timer (PCI config 0xA3) */
id|data2
op_assign
id|FQBQData
(braket
id|i
)braket
suffix:semicolon
id|data2
op_and_assign
l_int|0x0f
suffix:semicolon
id|data2
op_lshift_assign
l_int|24
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|SiS_SetRegLong
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|eax
op_assign
id|SiS_GetRegLong
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|SiS_SetRegLong
c_func
(paren
l_int|0xcfc
comma
id|eax
)paren
suffix:semicolon
macro_line|#else
id|eax
op_assign
id|pciReadLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
)paren
suffix:semicolon
id|eax
op_and_assign
l_int|0xf0ffffff
suffix:semicolon
id|eax
op_or_assign
id|data2
suffix:semicolon
id|pciWriteLong
c_func
(paren
l_int|0x00000000
comma
l_int|0xA0
comma
id|eax
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/* Write CRT/CPU threshold low, CRT/Engine threshold high */
id|data
op_assign
(paren
(paren
id|ThresholdLow
op_amp
l_int|0x0f
)paren
op_lshift
l_int|4
)paren
op_or
l_int|0x0f
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x08
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
(paren
id|ThresholdLow
op_amp
l_int|0x10
)paren
op_lshift
l_int|1
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xDF
comma
id|data
)paren
suffix:semicolon
multiline_comment|/* What is this? */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3B
comma
l_int|0x09
)paren
suffix:semicolon
multiline_comment|/* Write CRT/CPU threshold high (gap = 3) */
id|data
op_assign
id|ThresholdLow
op_plus
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|data
OG
l_int|0x0f
)paren
(brace
id|data
op_assign
l_int|0x0f
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x09
comma
l_int|0x80
comma
id|data
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_static
r_void
DECL|function|SiS_SetCRT1FIFO_310
id|SiS_SetCRT1FIFO_310
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|USHORT
id|modeflag
suffix:semicolon
multiline_comment|/* disable auto-threshold */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3D
comma
l_int|0xFE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x08
comma
l_int|0xAE
)paren
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x09
comma
l_int|0xF0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x08
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x08
comma
l_int|0x34
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x3D
comma
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*              MODE REGISTERS               */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetVCLKState
id|SiS_SetVCLKState
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|RefreshRateTableIndex
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
op_assign
l_int|0
comma
id|VCLK
op_assign
l_int|0
comma
id|index
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|VCLK
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
)brace
r_else
(brace
id|index
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|VCLK
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|index
)braket
dot
id|CLOCK
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|VCLK
OG
l_int|150
)paren
(brace
id|data
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x07
comma
l_int|0x7B
comma
id|data
)paren
suffix:semicolon
id|data
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|150
)paren
(brace
id|data
op_or_assign
l_int|0x08
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xF7
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|166
)paren
(brace
id|data
op_or_assign
l_int|0x0c
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0xf3
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|166
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1f
comma
l_int|0xe7
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* DAC speed */
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x07
comma
l_int|0xE8
comma
l_int|0x10
)paren
suffix:semicolon
)brace
r_else
(brace
id|data
op_assign
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|135
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|160
)paren
)paren
(brace
id|data
op_assign
l_int|0x02
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|VCLK
op_ge
l_int|160
)paren
op_logical_and
(paren
id|VCLK
OL
l_int|260
)paren
)paren
(brace
id|data
op_assign
l_int|0x01
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VCLK
op_ge
l_int|260
)paren
(brace
id|data
op_assign
l_int|0x00
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_540
)paren
(brace
r_if
c_cond
(paren
(paren
id|VCLK
op_eq
l_int|203
)paren
op_logical_or
(paren
id|VCLK
OL
l_int|234
)paren
)paren
(brace
id|data
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x07
comma
l_int|0xFC
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OG
id|SIS_315PRO
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|data
op_and_assign
l_int|0xfc
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x07
comma
l_int|0xF8
comma
id|data
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|SiS_SetCRT1ModeRegs
id|SiS_SetCRT1ModeRegs
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
comma
id|USHORT
id|RefreshRateTableIndex
)paren
(brace
id|USHORT
id|data
comma
id|infoflag
op_assign
l_int|0
comma
id|modeflag
suffix:semicolon
id|USHORT
id|resindex
comma
id|xres
suffix:semicolon
macro_line|#ifdef SIS315H
id|USHORT
id|data2
comma
id|data3
suffix:semicolon
id|ULONG
id|longdata
suffix:semicolon
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
id|infoflag
op_assign
id|SiS_Pr-&gt;CInfoFlag
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;CHDisplay
suffix:semicolon
)brace
r_else
(brace
id|resindex
op_assign
id|SiS_GetResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
id|infoflag
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;SiS_ModeResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
id|xres
op_assign
id|SiS_Pr-&gt;SiS_StResInfo
(braket
id|resindex
)braket
dot
id|HTotal
suffix:semicolon
)brace
)brace
multiline_comment|/* Disable DPMS */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1F
comma
l_int|0x3F
)paren
suffix:semicolon
id|data
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
OG
id|ModeEGA
)paren
(brace
id|data
op_or_assign
l_int|0x02
suffix:semicolon
id|data
op_or_assign
(paren
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_minus
id|ModeVGA
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|data
op_or_assign
l_int|0x20
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x06
comma
l_int|0xC0
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ne
id|SIS_300
)paren
(brace
id|data
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
r_if
c_cond
(paren
id|xres
op_le
l_int|800
)paren
(brace
id|data
op_assign
l_int|0x0020
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|xres
op_le
l_int|1024
)paren
(brace
id|data
op_assign
l_int|0x0035
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x0048
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x19
comma
(paren
id|data
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x1a
comma
l_int|0xFC
comma
(paren
id|data
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x01
comma
l_int|0x08
)paren
suffix:semicolon
)brace
id|data
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|LineCompareOff
)paren
(brace
id|data
op_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xF7
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0F
comma
l_int|0xB7
comma
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0F
comma
l_int|0x40
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x31
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_315PRO
)paren
(brace
id|data
op_assign
id|SiS_Get310DRAMType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|data
op_assign
id|SiS_Pr-&gt;SiS_SR15
(braket
l_int|2
)braket
(braket
id|data
)braket
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_eq
id|ModeText
)paren
(brace
id|data
op_and_assign
l_int|0xc7
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
id|SiS_GetOffset
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|data2
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|infoflag
op_amp
id|InterlaceMode
)paren
(brace
id|data2
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|data3
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|data3
)paren
(brace
id|data3
op_increment
suffix:semicolon
)brace
id|data2
op_div_assign
id|data3
suffix:semicolon
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x50
)paren
(brace
id|data
op_and_assign
l_int|0x0f
suffix:semicolon
id|data
op_or_assign
l_int|0x50
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
comma
id|data
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
op_logical_or
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_760
)paren
op_logical_and
(paren
id|SiS_Pr-&gt;SiS_SysFlags
op_amp
id|SF_760LFB
)paren
)paren
)paren
(brace
id|data
op_assign
id|SiS_Get310DRAMType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
id|data
op_assign
id|SiS_Pr-&gt;SiS_SR15
(braket
l_int|2
)braket
(braket
id|data
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|data
op_assign
id|ROMAddr
(braket
l_int|0xf6
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
id|data
op_assign
id|ROMAddr
(braket
l_int|0x100
op_plus
id|data
)braket
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0xba
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_le
id|ModeEGA
)paren
(brace
id|data
op_and_assign
l_int|0xc7
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|data2
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
)brace
r_else
(brace
id|data2
op_assign
id|SiS_GetVCLK2Ptr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|data2
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|data2
)braket
dot
id|CLOCK
suffix:semicolon
)brace
id|data3
op_assign
id|SiS_GetColorDepth
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|data3
)paren
(brace
id|data2
op_mul_assign
id|data3
suffix:semicolon
)brace
id|longdata
op_assign
id|SiS_GetMCLK
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
op_star
l_int|1024
suffix:semicolon
id|data2
op_assign
id|longdata
op_div
id|data2
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_330
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ne
id|Mode16Bpp
)paren
(brace
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x19c
)paren
id|data
op_assign
l_int|0xba
suffix:semicolon
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x140
)paren
(brace
id|data
op_assign
l_int|0x7a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x101
)paren
(brace
id|data
op_assign
l_int|0x3a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xf5
)paren
(brace
id|data
op_assign
l_int|0x32
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xe2
)paren
(brace
id|data
op_assign
l_int|0x2a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xc4
)paren
(brace
id|data
op_assign
l_int|0x22
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xac
)paren
(brace
id|data
op_assign
l_int|0x1a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x9e
)paren
(brace
id|data
op_assign
l_int|0x12
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x8e
)paren
(brace
id|data
op_assign
l_int|0x0a
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x02
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x127
)paren
(brace
id|data
op_assign
l_int|0xba
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x7a
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* 760+LFB */
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x190
)paren
id|data
op_assign
l_int|0xba
suffix:semicolon
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xff
)paren
(brace
id|data
op_assign
l_int|0x7a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xd3
)paren
(brace
id|data
op_assign
l_int|0x3a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0xa9
)paren
(brace
id|data
op_assign
l_int|0x1a
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|data2
op_ge
l_int|0x93
)paren
(brace
id|data
op_assign
l_int|0x0a
suffix:semicolon
)brace
r_else
id|data
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x17
comma
id|data
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_340
)paren
(brace
multiline_comment|/* TODO */
)brace
macro_line|#endif
id|data
op_assign
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ne
id|ModeText
)paren
(brace
id|data
op_xor_assign
l_int|0x60
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ModeType
op_ne
id|ModeEGA
)paren
(brace
id|data
op_xor_assign
l_int|0xA0
suffix:semicolon
)brace
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x21
comma
l_int|0x1F
comma
id|data
)paren
suffix:semicolon
id|SiS_SetVCLKState
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|RefreshRateTableIndex
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
op_amp
l_int|0x40
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x52
comma
l_int|0x2c
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x52
comma
l_int|0x6c
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
multiline_comment|/*********************************************/
multiline_comment|/*                 LOAD DAC                  */
multiline_comment|/*********************************************/
macro_line|#if 0
r_static
r_void
id|SiS_ClearDAC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|ULONG
id|port
)paren
(brace
r_int
id|i
suffix:semicolon
id|OutPortByte
c_func
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
id|port
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
l_int|256
op_star
l_int|3
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|OutPortByte
c_func
(paren
id|port
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|SiS_WriteDAC
id|SiS_WriteDAC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|SISIOADDRESS
id|DACData
comma
id|USHORT
id|shiftflag
comma
id|USHORT
id|dl
comma
id|USHORT
id|ah
comma
id|USHORT
id|al
comma
id|USHORT
id|dh
)paren
(brace
id|USHORT
id|temp
comma
id|bh
comma
id|bl
suffix:semicolon
id|bh
op_assign
id|ah
suffix:semicolon
id|bl
op_assign
id|al
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|temp
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|shiftflag
)paren
(brace
id|dh
op_lshift_assign
l_int|2
suffix:semicolon
id|bh
op_lshift_assign
l_int|2
suffix:semicolon
id|bl
op_lshift_assign
l_int|2
suffix:semicolon
)brace
id|SiS_SetRegByte
c_func
(paren
id|DACData
comma
(paren
id|USHORT
)paren
id|dh
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|DACData
comma
(paren
id|USHORT
)paren
id|bh
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|DACData
comma
(paren
id|USHORT
)paren
id|bl
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_LoadDAC
id|SiS_LoadDAC
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|data
comma
id|data2
suffix:semicolon
id|USHORT
id|time
comma
id|i
comma
id|j
comma
id|k
comma
id|m
comma
id|n
comma
id|o
suffix:semicolon
id|USHORT
id|si
comma
id|di
comma
id|bx
comma
id|dl
comma
id|al
comma
id|ah
comma
id|dh
suffix:semicolon
id|USHORT
id|shiftflag
suffix:semicolon
id|SISIOADDRESS
id|DACAddr
comma
id|DACData
suffix:semicolon
r_const
id|USHORT
op_star
id|table
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|data
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|data
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|data
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
)brace
id|data
op_and_assign
id|DACInfoFlag
suffix:semicolon
id|time
op_assign
l_int|64
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x00
)paren
(brace
id|table
op_assign
id|SiS_MDA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x08
)paren
(brace
id|table
op_assign
id|SiS_CGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x10
)paren
(brace
id|table
op_assign
id|SiS_EGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x18
)paren
(brace
id|time
op_assign
l_int|256
suffix:semicolon
id|table
op_assign
id|SiS_VGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
id|j
op_assign
l_int|16
suffix:semicolon
)brace
r_else
id|j
op_assign
id|time
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCD
)paren
op_logical_and
multiline_comment|/* 301B-DH LCD */
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_NoLCD
)paren
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
op_logical_or
multiline_comment|/* LCDA */
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|ProgrammingCRT2
)paren
)paren
)paren
(brace
multiline_comment|/* Programming CRT1 */
id|DACAddr
op_assign
id|SiS_Pr-&gt;SiS_P3c8
suffix:semicolon
id|DACData
op_assign
id|SiS_Pr-&gt;SiS_P3c9
suffix:semicolon
id|shiftflag
op_assign
l_int|0
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
)brace
r_else
(brace
id|shiftflag
op_assign
l_int|1
suffix:semicolon
id|DACAddr
op_assign
id|SiS_Pr-&gt;SiS_Part5Port
suffix:semicolon
id|DACData
op_assign
id|SiS_Pr-&gt;SiS_Part5Port
op_plus
l_int|1
suffix:semicolon
)brace
id|SiS_SetRegByte
c_func
(paren
id|DACAddr
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|j
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x01
)paren
(brace
id|data2
op_assign
l_int|0x2A
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
(brace
id|data2
op_add_assign
l_int|0x15
suffix:semicolon
)brace
r_if
c_cond
(paren
id|shiftflag
)paren
(brace
id|data2
op_lshift_assign
l_int|2
suffix:semicolon
)brace
id|SiS_SetRegByte
c_func
(paren
id|DACData
comma
id|data2
)paren
suffix:semicolon
id|data
op_rshift_assign
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|shiftflag
)paren
(brace
id|data
op_lshift_assign
l_int|2
suffix:semicolon
)brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|SiS_SetRegByte
c_func
(paren
id|DACData
comma
id|data
)paren
suffix:semicolon
)brace
)brace
id|si
op_assign
l_int|32
suffix:semicolon
r_for
c_loop
(paren
id|m
op_assign
l_int|0
suffix:semicolon
id|m
OL
l_int|9
suffix:semicolon
id|m
op_increment
)paren
(brace
id|di
op_assign
id|si
suffix:semicolon
id|bx
op_assign
id|si
op_plus
l_int|4
suffix:semicolon
id|dl
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|5
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|si
op_increment
suffix:semicolon
id|SiS_WriteDAC
c_func
(paren
id|SiS_Pr
comma
id|DACData
comma
id|shiftflag
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
id|si
op_sub_assign
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|3
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|si
op_decrement
suffix:semicolon
id|SiS_WriteDAC
c_func
(paren
id|SiS_Pr
comma
id|DACData
comma
id|shiftflag
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
id|dl
op_increment
suffix:semicolon
)brace
multiline_comment|/* for n &lt; 3 */
id|si
op_add_assign
l_int|5
suffix:semicolon
)brace
multiline_comment|/* for m &lt; 9 */
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         SET CRT1 REGISTER GROUP           */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_SetCRT1Group
id|SiS_SetCRT1Group
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|StandTableIndex
comma
id|RefreshRateTableIndex
suffix:semicolon
id|SiS_Pr-&gt;SiS_CRT1Mode
op_assign
id|ModeNo
suffix:semicolon
id|StandTableIndex
op_assign
id|SiS_GetModePtr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_SetFlag
op_amp
id|LowModeTests
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchCRT2
)paren
)paren
(brace
id|SiS_DisableBridge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
)brace
id|SiS_ResetSegmentRegisters
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetSeqRegs
c_func
(paren
id|SiS_Pr
comma
id|StandTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetMiscRegs
c_func
(paren
id|SiS_Pr
comma
id|StandTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCRTCRegs
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_SetATTRegs
c_func
(paren
id|SiS_Pr
comma
id|StandTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetGRCRegs
c_func
(paren
id|SiS_Pr
comma
id|StandTableIndex
)paren
suffix:semicolon
id|SiS_ClearExt1Regs
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
id|SiS_ResetCRT1VCLK
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_SelectCRT2Rate
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
macro_line|#ifdef LINUX_XF86
id|xf86DrvMsgVerb
c_func
(paren
l_int|0
comma
id|X_PROBED
comma
l_int|4
comma
l_string|&quot;(init: VBType=0x%04x, VBInfo=0x%04x)&bslash;n&quot;
comma
id|SiS_Pr-&gt;SiS_VBType
comma
id|SiS_Pr-&gt;SiS_VBInfo
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetSimuScanMode
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_or_assign
id|ProgrammingCRT2
suffix:semicolon
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_GetRatePtr
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_SetFlag
op_and_assign
op_complement
id|ProgrammingCRT2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|RefreshRateTableIndex
op_ne
l_int|0xFFFF
)paren
(brace
id|SiS_SetCRT1Sync
c_func
(paren
id|SiS_Pr
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
id|SiS_SetCRT1CRTC
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCRT1Offset
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetCRT1VCLK
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#ifdef SIS300
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_300
)paren
(brace
id|SiS_SetCRT1FIFO_300
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_540
)paren
)paren
(brace
id|SiS_SetCRT1FIFO_630
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetCRT1FIFO_310
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
)brace
macro_line|#endif
id|SiS_SetCRT1ModeRegs
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|RefreshRateTableIndex
)paren
suffix:semicolon
id|SiS_LoadDAC
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_flag_clearbuffer
)paren
(brace
id|SiS_ClearBuffer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
)paren
(brace
id|SiS_WaitRetrace1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*       HELPER: VIDEO BRIDGE PROG CLK       */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_ResetVB
id|SiS_ResetVB
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
id|UCHAR
op_star
id|ROMAddr
op_assign
id|HwInfo-&gt;pjVirtualRomBase
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
multiline_comment|/* VB programming clock */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_UseROM
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_330
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
id|VB310Data_1_2_Offset
)braket
op_or
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x80
)braket
op_or
l_int|0x40
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x7e
)braket
op_or
l_int|0x40
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
id|temp
op_assign
id|ROMAddr
(braket
l_int|0x80
)braket
op_or
l_int|0x40
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x02
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         HELPER: SET VIDEO REGISTERS       */
multiline_comment|/*********************************************/
r_static
r_void
DECL|function|SiS_StrangeStuff
id|SiS_StrangeStuff
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_if
c_cond
(paren
(paren
id|IS_SIS651
)paren
op_logical_or
(paren
id|IS_SISM650
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_VidCapt
comma
l_int|0x3f
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* Fiddle with capture regs */
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_VidCapt
comma
l_int|0x00
comma
l_int|0x00
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_VidPlay
comma
l_int|0x00
comma
l_int|0x86
)paren
suffix:semicolon
multiline_comment|/* (BIOS does NOT unlock) */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_VidPlay
comma
l_int|0x30
comma
l_int|0xfe
)paren
suffix:semicolon
multiline_comment|/* Fiddle with video regs */
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_VidPlay
comma
l_int|0x3f
comma
l_int|0xef
)paren
suffix:semicolon
)brace
multiline_comment|/* !!! This does not support modes &lt; 0x13 !!! */
)brace
multiline_comment|/*********************************************/
multiline_comment|/*         XFree86: SET SCREEN PITCH         */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_XF86
r_static
r_void
DECL|function|SiS_SetPitchCRT1
id|SiS_SetPitchCRT1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|ScrnInfoPtr
id|pScrn
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|UShort
id|HDisplay
op_assign
id|pSiS-&gt;scrnPitch
op_rshift
l_int|3
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x13
comma
(paren
id|HDisplay
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
l_int|0xF0
comma
(paren
id|HDisplay
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetPitchCRT2
id|SiS_SetPitchCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|ScrnInfoPtr
id|pScrn
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|UShort
id|HDisplay
op_assign
id|pSiS-&gt;scrnPitch2
op_rshift
l_int|3
suffix:semicolon
multiline_comment|/* Unlock CRT2 */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x2F
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x24
comma
l_int|0x01
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x07
comma
(paren
id|HDisplay
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x09
comma
l_int|0xF0
comma
(paren
id|HDisplay
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|SiS_SetPitch
id|SiS_SetPitch
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|ScrnInfoPtr
id|pScrn
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|BOOLEAN
id|isslavemode
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|VB_VIDEOBRIDGE
)paren
op_logical_and
(paren
(paren
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
op_logical_and
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0xa0
)paren
op_eq
l_int|0x20
)paren
op_logical_or
(paren
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
op_logical_and
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x00
)paren
op_amp
l_int|0x50
)paren
op_eq
l_int|0x10
)paren
)paren
)paren
(brace
id|isslavemode
op_assign
id|TRUE
suffix:semicolon
)brace
multiline_comment|/* We need to set pitch for CRT1 if bridge is in slave mode, too */
r_if
c_cond
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|DISPTYPE_DISP1
)paren
op_logical_or
(paren
id|isslavemode
)paren
)paren
(brace
id|SiS_SetPitchCRT1
c_func
(paren
id|SiS_Pr
comma
id|pScrn
)paren
suffix:semicolon
)brace
multiline_comment|/* We must not set the pitch for CRT2 if bridge is in slave mode */
r_if
c_cond
(paren
(paren
id|pSiS-&gt;VBFlags
op_amp
id|DISPTYPE_DISP2
)paren
op_logical_and
(paren
op_logical_neg
id|isslavemode
)paren
)paren
(brace
id|SiS_SetPitchCRT2
c_func
(paren
id|SiS_Pr
comma
id|pScrn
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/*********************************************/
multiline_comment|/*                 SiSSetMode()              */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_XF86
multiline_comment|/* We need pScrn for setting the pitch correctly */
id|BOOLEAN
DECL|function|SiSSetMode
id|SiSSetMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|ScrnInfoPtr
id|pScrn
comma
id|USHORT
id|ModeNo
comma
id|BOOLEAN
id|dosetpitch
)paren
macro_line|#else
id|BOOLEAN
id|SiSSetMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|USHORT
id|ModeNo
)paren
macro_line|#endif
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|SISIOADDRESS
id|BaseAddr
op_assign
id|HwInfo-&gt;ulIOAddress
suffix:semicolon
r_int
r_char
id|backupreg
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
id|USHORT
id|KeepLockReg
suffix:semicolon
id|ULONG
id|temp
suffix:semicolon
id|SiS_Pr-&gt;UseCustomMode
op_assign
id|FALSE
suffix:semicolon
id|SiS_Pr-&gt;CRT1UsesCustomMode
op_assign
id|FALSE
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|ModeNo
op_assign
l_int|0xfe
suffix:semicolon
)brace
id|SiSInitPtr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSRegInit
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_GetSysFlags
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#if defined(LINUX_XF86) &amp;&amp; (defined(i386) || defined(__i386) || defined(__i386__) || defined(__AMD64__))
r_if
c_cond
(paren
id|pScrn
)paren
(brace
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
id|SiS_GetSetBIOSScratch
c_func
(paren
id|pScrn
comma
l_int|0x489
comma
l_int|0xff
)paren
suffix:semicolon
)brace
r_else
macro_line|#endif
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
l_int|0x11
suffix:semicolon
id|SiSInitPCIetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSDetermineROMUsage
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_Pr-&gt;SiS_flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
macro_line|#ifdef LINUX_KERNEL
r_if
c_cond
(paren
op_logical_neg
(paren
id|ModeNo
op_amp
l_int|0x80
)paren
)paren
(brace
id|SiS_Pr-&gt;SiS_flag_clearbuffer
op_assign
l_int|1
suffix:semicolon
)brace
macro_line|#endif
id|ModeNo
op_and_assign
l_int|0x7f
suffix:semicolon
)brace
macro_line|#ifdef LINUX_KERNEL
id|KeepLockReg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
)paren
suffix:semicolon
macro_line|#endif
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
(brace
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_GetVBType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* Init/restore some VB registers */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_ResetVB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x0c
)paren
suffix:semicolon
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
)brace
r_else
(brace
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Get VB information (connectors, connected devices) */
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
)paren
suffix:semicolon
id|SiS_SetYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetTVMode
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_GetLCDResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetLowModeTest
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#ifdef LINUX_KERNEL
multiline_comment|/* 3. Check memory size (Kernel framebuffer driver only) */
id|temp
op_assign
id|SiS_CheckMemorySize
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|temp
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetupCR5x
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;CRT1UsesCustomMode
op_assign
id|TRUE
suffix:semicolon
id|SiS_Pr-&gt;CSRClock_CRT1
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
id|SiS_Pr-&gt;CModeFlag_CRT1
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;CRT1UsesCustomMode
op_assign
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Set mode on CRT1 */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SetCRT2ToLCDA
)paren
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SwitchCRT2
)paren
)paren
)paren
(brace
id|SiS_SetCRT1Group
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
)brace
multiline_comment|/* Set mode on CRT2 */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchCRT2
op_or
id|SetCRT2ToLCDA
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_ne
l_int|0
)paren
)paren
(brace
id|SiS_SetCRT2Group
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
)brace
)brace
id|SiS_HandleCRT1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_StrangeStuff
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
id|backupreg
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|IS_SIS650
)paren
op_logical_and
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
op_amp
l_int|0xfc
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|ModeNo
op_eq
l_int|0x03
)paren
op_logical_or
(paren
id|ModeNo
op_eq
l_int|0x10
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x51
comma
l_int|0x80
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x56
comma
l_int|0x08
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
l_int|0xfc
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|backupreg
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef LINUX_XF86
r_if
c_cond
(paren
id|pScrn
)paren
(brace
multiline_comment|/* SetPitch: Adapt to virtual size &amp; position */
r_if
c_cond
(paren
(paren
id|ModeNo
OG
l_int|0x13
)paren
op_logical_and
(paren
id|dosetpitch
)paren
)paren
(brace
id|SiS_SetPitch
c_func
(paren
id|SiS_Pr
comma
id|pScrn
)paren
suffix:semicolon
)brace
multiline_comment|/* Backup/Set ModeNo in BIOS scratch area */
id|SiS_GetSetModeID
c_func
(paren
id|pScrn
comma
id|ModeNo
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef LINUX_KERNEL  /* We never lock registers in XF86 */
r_if
c_cond
(paren
id|KeepLockReg
op_eq
l_int|0xA1
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
)brace
r_else
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x00
)paren
suffix:semicolon
macro_line|#endif
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*          XFree86: SiSBIOSSetMode()        */
multiline_comment|/*           for non-Dual-Head mode          */
multiline_comment|/*********************************************/
macro_line|#ifdef LINUX_XF86
id|BOOLEAN
DECL|function|SiSBIOSSetMode
id|SiSBIOSSetMode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
comma
id|BOOLEAN
id|IsCustom
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|UShort
id|ModeNo
op_assign
l_int|0
suffix:semicolon
id|SiS_Pr-&gt;UseCustomMode
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|IsCustom
)paren
op_logical_and
(paren
id|SiS_CheckBuildCustomMode
c_func
(paren
id|pScrn
comma
id|mode
comma
id|pSiS-&gt;VBFlags
)paren
)paren
)paren
(brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting custom mode %dx%d&bslash;n&quot;
comma
id|SiS_Pr-&gt;CHDisplay
comma
(paren
id|mode-&gt;Flags
op_amp
id|V_INTERLACE
ques
c_cond
id|SiS_Pr-&gt;CVDisplay
op_star
l_int|2
suffix:colon
(paren
id|mode-&gt;Flags
op_amp
id|V_DBLSCAN
ques
c_cond
id|SiS_Pr-&gt;CVDisplay
op_div
l_int|2
suffix:colon
id|SiS_Pr-&gt;CVDisplay
)paren
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Don&squot;t need vbflags here; checks done earlier */
id|ModeNo
op_assign
id|SiS_GetModeNumber
c_func
(paren
id|pScrn
comma
id|mode
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting standard mode 0x%x&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_return
id|SiSSetMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|pScrn
comma
id|ModeNo
comma
id|TRUE
)paren
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*       XFree86: SiSBIOSSetModeCRT2()       */
multiline_comment|/*           for Dual-Head modes             */
multiline_comment|/*********************************************/
id|BOOLEAN
DECL|function|SiSBIOSSetModeCRT2
id|SiSBIOSSetModeCRT2
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
comma
id|BOOLEAN
id|IsCustom
)paren
(brace
id|USHORT
id|ModeIdIndex
suffix:semicolon
id|SISIOADDRESS
id|BaseAddr
op_assign
id|HwInfo-&gt;ulIOAddress
suffix:semicolon
id|UShort
id|ModeNo
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|backupreg
op_assign
l_int|0
suffix:semicolon
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
macro_line|#ifdef SISDUALHEAD
id|SISEntPtr
id|pSiSEnt
op_assign
id|pSiS-&gt;entityPrivate
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;UseCustomMode
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* Remember: Custom modes for CRT2 are ONLY supported&n;    *     -) on the 30x/B/C, and&n;    *     -) if CRT2 is LCD or VGA, or CRT1 is LCDA&n;    */
r_if
c_cond
(paren
(paren
id|IsCustom
)paren
op_logical_and
(paren
id|SiS_CheckBuildCustomMode
c_func
(paren
id|pScrn
comma
id|mode
comma
id|pSiS-&gt;VBFlags
)paren
)paren
)paren
(brace
id|ModeNo
op_assign
l_int|0xfe
suffix:semicolon
)brace
r_else
(brace
id|ModeNo
op_assign
id|SiS_GetModeNumber
c_func
(paren
id|pScrn
comma
id|mode
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
id|SiSRegInit
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiSInitPtr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_GetSysFlags
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#if (defined(i386) || defined(__i386) || defined(__i386__) || defined(__AMD64__))
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
id|SiS_GetSetBIOSScratch
c_func
(paren
id|pScrn
comma
l_int|0x489
comma
l_int|0xff
)paren
suffix:semicolon
macro_line|#else
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
l_int|0x11
suffix:semicolon
macro_line|#endif
id|SiSInitPCIetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSDetermineROMUsage
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* Save mode info so we can set it from within SetMode for CRT1 */
macro_line|#ifdef SISDUALHEAD
r_if
c_cond
(paren
id|pSiS-&gt;DualHeadMode
)paren
(brace
id|pSiSEnt-&gt;CRT2ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|pSiSEnt-&gt;CRT2DMode
op_assign
id|mode
suffix:semicolon
id|pSiSEnt-&gt;CRT2IsCustom
op_assign
id|IsCustom
suffix:semicolon
id|pSiSEnt-&gt;CRT2CR30
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
id|pSiSEnt-&gt;CRT2CR31
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|pSiSEnt-&gt;CRT2CR35
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|pSiSEnt-&gt;CRT2CR38
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
macro_line|#if 0
multiline_comment|/* We can&squot;t set CRT2 mode before CRT1 mode is set */
r_if
c_cond
(paren
id|pSiSEnt-&gt;CRT1ModeNo
op_eq
op_minus
l_int|1
)paren
(brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting CRT2 mode delayed until after setting CRT1 mode&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
id|pSiSEnt-&gt;CRT2ModeSet
op_assign
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* We don&squot;t clear the buffer in X */
id|SiS_Pr-&gt;SiS_flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|USHORT
id|temptemp
op_assign
id|SiS_Pr-&gt;CVDisplay
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|DoubleScanMode
)paren
(brace
id|temptemp
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;CInfoFlag
op_amp
id|InterlaceMode
)paren
(brace
id|temptemp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting custom mode %dx%d on CRT2&bslash;n&quot;
comma
id|SiS_Pr-&gt;CHDisplay
comma
id|temptemp
)paren
suffix:semicolon
)brace
r_else
(brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting standard mode 0x%x on CRT2&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
(brace
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
)brace
id|SiS_GetVBType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_ResetVB
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x32
comma
l_int|0x10
)paren
suffix:semicolon
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part2Port
comma
l_int|0x00
comma
l_int|0x0c
)paren
suffix:semicolon
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
)brace
r_else
(brace
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Get VB information (connectors, connected devices) */
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* If this is a custom mode, we don&squot;t check the modeflag for CRT2Mode */
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
)brace
id|SiS_SetYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetTVMode
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_GetLCDResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetLowModeTest
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* Set mode on CRT2 */
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_CH70xx
op_ne
l_int|0
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_TRUMPION
op_ne
l_int|0
)paren
)paren
(brace
id|SiS_SetCRT2Group
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|SiS_StrangeStuff
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_IsDualEdge
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_Part1Port
comma
l_int|0x13
comma
l_int|0xfb
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;SiS_ROMNew
)paren
(brace
r_if
c_cond
(paren
id|SiS_IsVAMode
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
)paren
(brace
id|SiS_SetRegOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0x01
)paren
suffix:semicolon
)brace
r_else
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
l_int|0xFE
)paren
suffix:semicolon
)brace
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
id|backupreg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
l_int|0xfc
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|backupreg
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* SetPitch: Adapt to virtual size &amp; position */
id|SiS_SetPitchCRT2
c_func
(paren
id|SiS_Pr
comma
id|pScrn
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
multiline_comment|/*********************************************/
multiline_comment|/*       XFree86: SiSBIOSSetModeCRT1()       */
multiline_comment|/*           for Dual-Head modes             */
multiline_comment|/*********************************************/
id|BOOLEAN
DECL|function|SiSBIOSSetModeCRT1
id|SiSBIOSSetModeCRT1
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
comma
id|BOOLEAN
id|IsCustom
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
id|SISIOADDRESS
id|BaseAddr
op_assign
id|HwInfo-&gt;ulIOAddress
suffix:semicolon
id|USHORT
id|ModeIdIndex
comma
id|ModeNo
op_assign
l_int|0
suffix:semicolon
id|UCHAR
id|backupreg
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef SISDUALHEAD
id|SISEntPtr
id|pSiSEnt
op_assign
id|pSiS-&gt;entityPrivate
suffix:semicolon
id|UCHAR
id|backupcr30
comma
id|backupcr31
comma
id|backupcr38
comma
id|backupcr35
comma
id|backupp40d
op_assign
l_int|0
suffix:semicolon
id|BOOLEAN
id|backupcustom
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;UseCustomMode
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|IsCustom
)paren
op_logical_and
(paren
id|SiS_CheckBuildCustomMode
c_func
(paren
id|pScrn
comma
id|mode
comma
id|pSiS-&gt;VBFlags
)paren
)paren
)paren
(brace
id|USHORT
id|temptemp
op_assign
id|SiS_Pr-&gt;CVDisplay
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;CModeFlag
op_amp
id|DoubleScanMode
)paren
(brace
id|temptemp
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;CInfoFlag
op_amp
id|InterlaceMode
)paren
(brace
id|temptemp
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting custom mode %dx%d on CRT1&bslash;n&quot;
comma
id|SiS_Pr-&gt;CHDisplay
comma
id|temptemp
)paren
suffix:semicolon
id|ModeNo
op_assign
l_int|0xfe
suffix:semicolon
)brace
r_else
(brace
id|ModeNo
op_assign
id|SiS_GetModeNumber
c_func
(paren
id|pScrn
comma
id|mode
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ModeNo
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;Setting standard mode 0x%x on CRT1&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|SiSInitPtr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSRegInit
c_func
(paren
id|SiS_Pr
comma
id|BaseAddr
)paren
suffix:semicolon
id|SiS_GetSysFlags
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#if (defined(i386) || defined(__i386) || defined(__i386__) || defined(__AMD64__))
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
id|SiS_GetSetBIOSScratch
c_func
(paren
id|pScrn
comma
l_int|0x489
comma
l_int|0xff
)paren
suffix:semicolon
macro_line|#else
id|SiS_Pr-&gt;SiS_VGAINFO
op_assign
l_int|0x11
suffix:semicolon
macro_line|#endif
id|SiSInitPCIetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSSetLVDSetc
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiSDetermineROMUsage
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
multiline_comment|/* We don&squot;t clear the buffer in X */
id|SiS_Pr-&gt;SiS_flag_clearbuffer
op_assign
l_int|0
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x05
comma
l_int|0x86
)paren
suffix:semicolon
id|SiS_UnLockCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
(brace
id|ModeIdIndex
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Determine VBType */
id|SiS_GetVBType
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
)brace
r_else
(brace
id|backupreg
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Get VB information (connectors, connected devices) */
multiline_comment|/* (We don&squot;t care if the current mode is a CRT2 mode) */
id|SiS_GetVBInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
comma
l_int|0
)paren
suffix:semicolon
id|SiS_SetYPbPr
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetTVMode
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_GetLCDResInfo
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|ModeIdIndex
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_SetLowModeTest
c_func
(paren
id|SiS_Pr
comma
id|ModeNo
comma
id|HwInfo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetupCR5x
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
)brace
multiline_comment|/* Set mode on CRT1 */
id|SiS_SetCRT1Group
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
comma
id|ModeIdIndex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetCRT2Group
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|ModeNo
)paren
suffix:semicolon
)brace
multiline_comment|/* SetPitch: Adapt to virtual size &amp; position */
id|SiS_SetPitchCRT1
c_func
(paren
id|SiS_Pr
comma
id|pScrn
)paren
suffix:semicolon
macro_line|#ifdef SISDUALHEAD
r_if
c_cond
(paren
id|pSiS-&gt;DualHeadMode
)paren
(brace
id|pSiSEnt-&gt;CRT1ModeNo
op_assign
id|ModeNo
suffix:semicolon
id|pSiSEnt-&gt;CRT1DMode
op_assign
id|mode
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|SiS_Pr-&gt;CRT1UsesCustomMode
op_assign
id|TRUE
suffix:semicolon
id|SiS_Pr-&gt;CSRClock_CRT1
op_assign
id|SiS_Pr-&gt;CSRClock
suffix:semicolon
id|SiS_Pr-&gt;CModeFlag_CRT1
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|SiS_Pr-&gt;CRT1UsesCustomMode
op_assign
id|FALSE
suffix:semicolon
)brace
multiline_comment|/* Reset CRT2 if changing mode on CRT1 */
macro_line|#ifdef SISDUALHEAD
r_if
c_cond
(paren
id|pSiS-&gt;DualHeadMode
)paren
(brace
r_if
c_cond
(paren
id|pSiSEnt-&gt;CRT2ModeNo
op_ne
op_minus
l_int|1
)paren
(brace
id|xf86DrvMsgVerb
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_int|3
comma
l_string|&quot;(Re-)Setting mode for CRT2&bslash;n&quot;
)paren
suffix:semicolon
id|backupcustom
op_assign
id|SiS_Pr-&gt;UseCustomMode
suffix:semicolon
id|backupcr30
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
)paren
suffix:semicolon
id|backupcr31
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|backupcr35
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|backupcr38
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
multiline_comment|/* Backup LUT-enable */
r_if
c_cond
(paren
id|pSiSEnt-&gt;CRT2ModeSet
)paren
(brace
id|backupp40d
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0d
)paren
op_amp
l_int|0x08
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBInfo
op_amp
id|SetCRT2ToLCDA
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
comma
id|pSiSEnt-&gt;CRT2CR30
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
id|pSiSEnt-&gt;CRT2CR31
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|pSiSEnt-&gt;CRT2CR35
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
id|pSiSEnt-&gt;CRT2CR38
)paren
suffix:semicolon
)brace
id|SiSBIOSSetModeCRT2
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
comma
id|pSiSEnt-&gt;pScrn_1
comma
id|pSiSEnt-&gt;CRT2DMode
comma
id|pSiSEnt-&gt;CRT2IsCustom
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x30
comma
id|backupcr30
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x31
comma
id|backupcr31
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|backupcr35
)paren
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
id|backupcr38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_Part4Port
comma
l_int|0x0d
comma
op_complement
l_int|0x08
comma
id|backupp40d
)paren
suffix:semicolon
)brace
id|SiS_Pr-&gt;UseCustomMode
op_assign
id|backupcustom
suffix:semicolon
)brace
)brace
macro_line|#endif
multiline_comment|/* Warning: From here, the custom mode entries in SiS_Pr are&n;    * possibly overwritten&n;    */
id|SiS_HandleCRT1
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_StrangeStuff
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
id|SiS_DisplayOn
c_func
(paren
id|SiS_Pr
)paren
suffix:semicolon
id|SiS_SetRegByte
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SIS301BLV302BLV
)paren
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_315H
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x38
comma
id|backupreg
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_630
)paren
op_logical_or
(paren
id|HwInfo-&gt;jChipType
op_eq
id|SIS_730
)paren
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x35
comma
id|backupreg
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Backup/Set ModeNo in BIOS scratch area */
id|SiS_GetSetModeID
c_func
(paren
id|pScrn
comma
id|ModeNo
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif /* Linux_XF86 */
macro_line|#ifdef LINUX_XF86
id|BOOLEAN
DECL|function|SiS_GetPanelID
id|SiS_GetPanelID
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
)paren
(brace
r_const
id|USHORT
id|PanelTypeTable300
(braket
l_int|16
)braket
op_assign
(brace
l_int|0xc101
comma
l_int|0xc117
comma
l_int|0x0121
comma
l_int|0xc135
comma
l_int|0xc142
comma
l_int|0xc152
comma
l_int|0xc162
comma
l_int|0xc072
comma
l_int|0xc181
comma
l_int|0xc192
comma
l_int|0xc1a1
comma
l_int|0xc1b6
comma
l_int|0xc1c2
comma
l_int|0xc0d2
comma
l_int|0xc1e2
comma
l_int|0xc1f2
)brace
suffix:semicolon
r_const
id|USHORT
id|PanelTypeTable31030x
(braket
l_int|16
)braket
op_assign
(brace
l_int|0xc102
comma
l_int|0xc112
comma
l_int|0x0122
comma
l_int|0xc132
comma
l_int|0xc142
comma
l_int|0xc152
comma
l_int|0xc169
comma
l_int|0xc179
comma
l_int|0x0189
comma
l_int|0xc192
comma
l_int|0xc1a2
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
)brace
suffix:semicolon
r_const
id|USHORT
id|PanelTypeTable310LVDS
(braket
l_int|16
)braket
op_assign
(brace
l_int|0xc111
comma
l_int|0xc122
comma
l_int|0xc133
comma
l_int|0xc144
comma
l_int|0xc155
comma
l_int|0xc166
comma
l_int|0xc177
comma
l_int|0xc188
comma
l_int|0xc199
comma
l_int|0xc0aa
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
comma
l_int|0x0000
)brace
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempbx
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|tempax
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempax
op_amp
l_int|0x10
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x40
)paren
(brace
id|tempbx
op_or_assign
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x20
)paren
(brace
id|tempbx
op_or_assign
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x01
)paren
(brace
id|tempbx
op_or_assign
l_int|0x01
suffix:semicolon
)brace
id|temp
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_or_assign
l_int|0x04
suffix:semicolon
)brace
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
id|PanelTypeTable300
(braket
id|tempbx
)braket
suffix:semicolon
id|tempbx
op_or_assign
id|LCDSync
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
comma
op_complement
(paren
id|LCDSyncBit
op_or
id|LCDRGB18Bit
)paren
comma
id|temp
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
op_ge
id|SIS_661
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_GetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x1a
)paren
suffix:semicolon
id|tempax
op_and_assign
l_int|0x1e
suffix:semicolon
id|tempax
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|tempax
op_eq
l_int|0
)paren
(brace
multiline_comment|/* TODO: Include HUGE detection routine&n;&t;            (Probably not worth bothering)&n;&t;    */
r_return
l_int|0
suffix:semicolon
)brace
id|temp
op_assign
id|tempax
op_amp
l_int|0xff
suffix:semicolon
id|tempax
op_decrement
suffix:semicolon
id|tempbx
op_assign
id|PanelTypeTable310LVDS
(braket
id|tempax
)braket
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
id|PanelTypeTable31030x
(braket
id|tempax
)braket
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xff
suffix:semicolon
)brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x36
comma
id|temp
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xff00
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp
op_assign
id|tempbx
op_amp
l_int|0xc1
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x37
comma
op_complement
(paren
id|LCDSyncBit
op_or
id|LCDRGB18Bit
)paren
comma
id|temp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_VBType
op_amp
id|VB_SISVB
)paren
(brace
id|temp
op_assign
id|tempbx
op_amp
l_int|0x04
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x39
comma
l_int|0xfb
comma
id|temp
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifndef GETBITSTR
DECL|macro|BITMASK
mdefine_line|#define BITMASK(h,l)    &t;(((unsigned)(1U &lt;&lt; ((h)-(l)+1))-1)&lt;&lt;(l))
DECL|macro|GENMASK
mdefine_line|#define GENMASK(mask)   &t;BITMASK(1?mask,0?mask)
DECL|macro|GETBITS
mdefine_line|#define GETBITS(var,mask)   &t;(((var) &amp; GENMASK(mask)) &gt;&gt; (0?mask))
DECL|macro|GETBITSTR
mdefine_line|#define GETBITSTR(val,from,to)  ((GETBITS(val,from)) &lt;&lt; (0?to))
macro_line|#endif
r_static
r_void
DECL|function|SiS_CalcCRRegisters
id|SiS_CalcCRRegisters
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
r_int
id|depth
)paren
(brace
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|0
)braket
op_assign
(paren
(paren
id|SiS_Pr-&gt;CHTotal
op_rshift
l_int|3
)paren
op_minus
l_int|5
)paren
op_amp
l_int|0xff
suffix:semicolon
multiline_comment|/* CR0 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|1
)braket
op_assign
(paren
id|SiS_Pr-&gt;CHDisplay
op_rshift
l_int|3
)paren
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* CR1 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|2
)braket
op_assign
(paren
id|SiS_Pr-&gt;CHBlankStart
op_rshift
l_int|3
)paren
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* CR2 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|3
)braket
op_assign
(paren
(paren
(paren
id|SiS_Pr-&gt;CHBlankEnd
op_rshift
l_int|3
)paren
op_minus
l_int|1
)paren
op_amp
l_int|0x1F
)paren
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* CR3 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|4
)braket
op_assign
(paren
id|SiS_Pr-&gt;CHSyncStart
op_rshift
l_int|3
)paren
op_plus
l_int|3
suffix:semicolon
multiline_comment|/* CR4 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|5
)braket
op_assign
(paren
(paren
(paren
(paren
id|SiS_Pr-&gt;CHBlankEnd
op_rshift
l_int|3
)paren
op_minus
l_int|1
)paren
op_amp
l_int|0x20
)paren
op_lshift
l_int|2
)paren
op_or
multiline_comment|/* CR5 */
(paren
(paren
(paren
id|SiS_Pr-&gt;CHSyncEnd
op_rshift
l_int|3
)paren
op_plus
l_int|3
)paren
op_amp
l_int|0x1F
)paren
suffix:semicolon
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|6
)braket
op_assign
(paren
id|SiS_Pr-&gt;CVTotal
op_minus
l_int|2
)paren
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* CR6 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|7
)braket
op_assign
(paren
(paren
(paren
id|SiS_Pr-&gt;CVTotal
op_minus
l_int|2
)paren
op_amp
l_int|0x100
)paren
op_rshift
l_int|8
)paren
multiline_comment|/* CR7 */
op_or
(paren
(paren
(paren
id|SiS_Pr-&gt;CVDisplay
op_minus
l_int|1
)paren
op_amp
l_int|0x100
)paren
op_rshift
l_int|7
)paren
op_or
(paren
(paren
id|SiS_Pr-&gt;CVSyncStart
op_amp
l_int|0x100
)paren
op_rshift
l_int|6
)paren
op_or
(paren
(paren
(paren
id|SiS_Pr-&gt;CVBlankStart
op_minus
l_int|1
)paren
op_amp
l_int|0x100
)paren
op_rshift
l_int|5
)paren
op_or
l_int|0x10
op_or
(paren
(paren
(paren
id|SiS_Pr-&gt;CVTotal
op_minus
l_int|2
)paren
op_amp
l_int|0x200
)paren
op_rshift
l_int|4
)paren
op_or
(paren
(paren
(paren
id|SiS_Pr-&gt;CVDisplay
op_minus
l_int|1
)paren
op_amp
l_int|0x200
)paren
op_rshift
l_int|3
)paren
op_or
(paren
(paren
id|SiS_Pr-&gt;CVSyncStart
op_amp
l_int|0x200
)paren
op_rshift
l_int|2
)paren
suffix:semicolon
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_assign
(paren
(paren
(paren
(paren
id|SiS_Pr-&gt;CVBlankStart
op_minus
l_int|1
)paren
op_amp
l_int|0x200
)paren
op_rshift
l_int|4
)paren
op_rshift
l_int|5
)paren
suffix:semicolon
multiline_comment|/* CR9 */
r_if
c_cond
(paren
id|depth
op_ne
l_int|8
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;CHDisplay
op_ge
l_int|1600
)paren
(brace
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_or_assign
l_int|0x60
suffix:semicolon
)brace
multiline_comment|/* SRE */
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;CHDisplay
op_ge
l_int|640
)paren
(brace
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_or_assign
l_int|0x40
suffix:semicolon
)brace
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|mode-&gt;VScan
op_ge
l_int|32
)paren
id|regp-&gt;CRTC
(braket
l_int|9
)braket
op_or_assign
l_int|0x1F
suffix:semicolon
r_else
r_if
c_cond
(paren
id|mode-&gt;VScan
OG
l_int|1
)paren
id|regp-&gt;CRTC
(braket
l_int|9
)braket
op_or_assign
id|mode-&gt;VScan
op_minus
l_int|1
suffix:semicolon
macro_line|#endif
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|8
)braket
op_assign
(paren
id|SiS_Pr-&gt;CVSyncStart
)paren
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* CR10 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|9
)braket
op_assign
(paren
(paren
id|SiS_Pr-&gt;CVSyncEnd
)paren
op_amp
l_int|0x0F
)paren
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* CR11 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|10
)braket
op_assign
(paren
id|SiS_Pr-&gt;CVDisplay
op_minus
l_int|1
)paren
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* CR12 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|11
)braket
op_assign
(paren
id|SiS_Pr-&gt;CVBlankStart
op_minus
l_int|1
)paren
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* CR15 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|12
)braket
op_assign
(paren
id|SiS_Pr-&gt;CVBlankEnd
op_minus
l_int|1
)paren
op_amp
l_int|0xFF
suffix:semicolon
multiline_comment|/* CR16 */
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|13
)braket
op_assign
multiline_comment|/* SRA */
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVTotal
op_minus
l_int|2
)paren
comma
l_int|10
suffix:colon
l_int|10
comma
l_int|0
suffix:colon
l_int|0
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVDisplay
op_minus
l_int|1
)paren
comma
l_int|10
suffix:colon
l_int|10
comma
l_int|1
suffix:colon
l_int|1
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVBlankStart
op_minus
l_int|1
)paren
comma
l_int|10
suffix:colon
l_int|10
comma
l_int|2
suffix:colon
l_int|2
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVSyncStart
)paren
comma
l_int|10
suffix:colon
l_int|10
comma
l_int|3
suffix:colon
l_int|3
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVBlankEnd
op_minus
l_int|1
)paren
comma
l_int|8
suffix:colon
l_int|8
comma
l_int|4
suffix:colon
l_int|4
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CVSyncEnd
)paren
comma
l_int|4
suffix:colon
l_int|4
comma
l_int|5
suffix:colon
l_int|5
)paren
suffix:semicolon
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|14
)braket
op_assign
multiline_comment|/* SRB */
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHTotal
op_rshift
l_int|3
)paren
op_minus
l_int|5
comma
l_int|9
suffix:colon
l_int|8
comma
l_int|1
suffix:colon
l_int|0
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHDisplay
op_rshift
l_int|3
)paren
op_minus
l_int|1
comma
l_int|9
suffix:colon
l_int|8
comma
l_int|3
suffix:colon
l_int|2
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHBlankStart
op_rshift
l_int|3
)paren
op_minus
l_int|1
comma
l_int|9
suffix:colon
l_int|8
comma
l_int|5
suffix:colon
l_int|4
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHSyncStart
op_rshift
l_int|3
)paren
op_plus
l_int|3
comma
l_int|9
suffix:colon
l_int|8
comma
l_int|7
suffix:colon
l_int|6
)paren
suffix:semicolon
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|15
)braket
op_assign
multiline_comment|/* SRC */
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHBlankEnd
op_rshift
l_int|3
)paren
op_minus
l_int|1
comma
l_int|7
suffix:colon
l_int|6
comma
l_int|1
suffix:colon
l_int|0
)paren
op_or
id|GETBITSTR
c_func
(paren
(paren
id|SiS_Pr-&gt;CHSyncEnd
op_rshift
l_int|3
)paren
op_plus
l_int|3
comma
l_int|5
suffix:colon
l_int|5
comma
l_int|2
suffix:colon
l_int|2
)paren
suffix:semicolon
)brace
r_void
DECL|function|SiS_CalcLCDACRT1Timing
id|SiS_CalcLCDACRT1Timing
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|USHORT
id|ModeNo
comma
id|USHORT
id|ModeIdIndex
)paren
(brace
id|USHORT
id|modeflag
comma
id|tempax
comma
id|tempbx
comma
id|VGAHDE
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
multiline_comment|/* 1:1 data: use data set by setcrt1crtc() */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|LCDPass11
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_SModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|St_ModeFlag
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SiS_Pr-&gt;UseCustomMode
)paren
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;CModeFlag
suffix:semicolon
)brace
r_else
(brace
id|modeflag
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|Ext_ModeFlag
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|VGAHDE
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|SiS_Pr-&gt;CHDisplay
op_assign
id|VGAHDE
suffix:semicolon
id|SiS_Pr-&gt;CHBlankStart
op_assign
id|VGAHDE
suffix:semicolon
id|SiS_Pr-&gt;CVDisplay
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|SiS_Pr-&gt;CVBlankStart
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelHT
op_minus
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAHDE
suffix:semicolon
multiline_comment|/* not /2 ! */
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
)brace
id|tempbx
op_add_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_sub_assign
id|VGAHDE
suffix:semicolon
)brace
id|SiS_Pr-&gt;CHTotal
op_assign
id|SiS_Pr-&gt;CHBlankEnd
op_assign
id|tempbx
suffix:semicolon
id|tempax
op_assign
id|VGAHDE
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;CHTotal
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelXRes
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_rshift_assign
l_int|1
suffix:semicolon
)brace
id|tempax
op_add_assign
(paren
(paren
id|tempbx
op_minus
id|tempax
)paren
op_rshift
l_int|1
)paren
suffix:semicolon
)brace
id|tempax
op_add_assign
id|SiS_Pr-&gt;PanelHRS
suffix:semicolon
id|SiS_Pr-&gt;CHSyncStart
op_assign
id|tempax
suffix:semicolon
id|tempax
op_add_assign
id|SiS_Pr-&gt;PanelHRE
suffix:semicolon
id|SiS_Pr-&gt;CHSyncEnd
op_assign
id|tempax
suffix:semicolon
id|tempbx
op_assign
id|SiS_Pr-&gt;PanelVT
op_minus
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempax
op_assign
id|SiS_Pr-&gt;PanelYRes
suffix:semicolon
)brace
id|SiS_Pr-&gt;CVTotal
op_assign
id|SiS_Pr-&gt;CVBlankEnd
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempax
op_assign
id|SiS_Pr-&gt;SiS_VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_LCDInfo
op_amp
id|DontExpandLCD
)paren
(brace
id|tempax
op_add_assign
(paren
id|SiS_Pr-&gt;PanelYRes
op_minus
id|tempax
)paren
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempax
op_add_assign
id|SiS_Pr-&gt;PanelVRS
suffix:semicolon
id|SiS_Pr-&gt;CVSyncStart
op_assign
id|tempax
suffix:semicolon
id|tempax
op_add_assign
id|SiS_Pr-&gt;PanelVRE
suffix:semicolon
id|SiS_Pr-&gt;CVSyncEnd
op_assign
id|tempax
suffix:semicolon
id|SiS_CalcCRRegisters
c_func
(paren
id|SiS_Pr
comma
l_int|8
)paren
suffix:semicolon
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_and_assign
op_complement
l_int|0xE0
suffix:semicolon
id|SiS_SetRegAND
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x11
comma
l_int|0x7f
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|7
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|10
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|12
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|15
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SiS_SetReg
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
id|j
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|tempax
op_assign
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_amp
l_int|0xE0
suffix:semicolon
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3c4
comma
l_int|0x0E
comma
l_int|0x1F
comma
id|tempax
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|modeflag
op_amp
id|DoubleScanMode
)paren
(brace
id|tempax
op_or_assign
l_int|0x80
suffix:semicolon
)brace
id|SiS_SetRegANDOR
c_func
(paren
id|SiS_Pr-&gt;SiS_P3d4
comma
l_int|0x09
comma
l_int|0x5F
comma
id|tempax
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;%d %d %d %d  %d %d %d %d  (%d %d %d %d)&bslash;n&quot;
comma
id|SiS_Pr-&gt;CHDisplay
comma
id|SiS_Pr-&gt;CHSyncStart
comma
id|SiS_Pr-&gt;CHSyncEnd
comma
id|SiS_Pr-&gt;CHTotal
comma
id|SiS_Pr-&gt;CVDisplay
comma
id|SiS_Pr-&gt;CVSyncStart
comma
id|SiS_Pr-&gt;CVSyncEnd
comma
id|SiS_Pr-&gt;CVTotal
comma
id|SiS_Pr-&gt;CHBlankStart
comma
id|SiS_Pr-&gt;CHBlankEnd
comma
id|SiS_Pr-&gt;CVBlankStart
comma
id|SiS_Pr-&gt;CVBlankEnd
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot; {{0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,&bslash;n&quot;
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|0
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|1
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|2
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|3
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|4
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|5
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|6
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;   0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,&bslash;n&quot;
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|8
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|9
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|10
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|11
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|12
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|13
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|14
)braket
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;   0x%02x}},&bslash;n&quot;
comma
id|SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
)paren
suffix:semicolon
macro_line|#endif
)brace
macro_line|#ifdef LINUX_XF86
r_void
DECL|function|SiS_MakeClockRegs
id|SiS_MakeClockRegs
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
r_int
id|clock
comma
id|UCHAR
op_star
id|p2b
comma
id|UCHAR
op_star
id|p2c
)paren
(brace
r_int
id|out_n
comma
id|out_dn
comma
id|out_div
comma
id|out_sbit
comma
id|out_scale
suffix:semicolon
r_int
r_int
id|vclk
(braket
l_int|5
)braket
suffix:semicolon
DECL|macro|Midx
mdefine_line|#define Midx         0
DECL|macro|Nidx
mdefine_line|#define Nidx         1
DECL|macro|VLDidx
mdefine_line|#define VLDidx       2
DECL|macro|Pidx
mdefine_line|#define Pidx         3
DECL|macro|PSNidx
mdefine_line|#define PSNidx       4
r_if
c_cond
(paren
id|SiS_compute_vclk
c_func
(paren
id|clock
comma
op_amp
id|out_n
comma
op_amp
id|out_dn
comma
op_amp
id|out_div
comma
op_amp
id|out_sbit
comma
op_amp
id|out_scale
)paren
)paren
(brace
(paren
op_star
id|p2b
)paren
op_assign
(paren
id|out_div
op_eq
l_int|2
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x00
suffix:semicolon
(paren
op_star
id|p2b
)paren
op_or_assign
(paren
(paren
id|out_n
op_minus
l_int|1
)paren
op_amp
l_int|0x7f
)paren
suffix:semicolon
(paren
op_star
id|p2c
)paren
op_assign
(paren
id|out_dn
op_minus
l_int|1
)paren
op_amp
l_int|0x1f
suffix:semicolon
(paren
op_star
id|p2c
)paren
op_or_assign
(paren
(paren
(paren
id|out_scale
op_minus
l_int|1
)paren
op_amp
l_int|3
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
(paren
op_star
id|p2c
)paren
op_or_assign
(paren
(paren
id|out_sbit
op_amp
l_int|0x01
)paren
op_lshift
l_int|7
)paren
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;Clock %d: n %d dn %d div %d sb %d sc %d&bslash;n&quot;
comma
id|clock
comma
id|out_n
comma
id|out_dn
comma
id|out_div
comma
id|out_sbit
comma
id|out_scale
)paren
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|SiSCalcClock
c_func
(paren
id|pScrn
comma
id|clock
comma
l_int|2
comma
id|vclk
)paren
suffix:semicolon
(paren
op_star
id|p2b
)paren
op_assign
(paren
id|vclk
(braket
id|VLDidx
)braket
op_eq
l_int|2
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x00
suffix:semicolon
(paren
op_star
id|p2b
)paren
op_or_assign
(paren
id|vclk
(braket
id|Midx
)braket
op_minus
l_int|1
)paren
op_amp
l_int|0x7f
suffix:semicolon
(paren
op_star
id|p2c
)paren
op_assign
(paren
id|vclk
(braket
id|Nidx
)braket
op_minus
l_int|1
)paren
op_amp
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
id|vclk
(braket
id|Pidx
)braket
op_le
l_int|4
)paren
(brace
multiline_comment|/* postscale 1,2,3,4 */
(paren
op_star
id|p2c
)paren
op_or_assign
(paren
(paren
id|vclk
(braket
id|Pidx
)braket
op_minus
l_int|1
)paren
op_amp
l_int|3
)paren
op_lshift
l_int|5
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* postscale 6,8 */
(paren
op_star
id|p2c
)paren
op_or_assign
(paren
(paren
(paren
id|vclk
(braket
id|Pidx
)braket
op_div
l_int|2
)paren
op_minus
l_int|1
)paren
op_amp
l_int|3
)paren
op_lshift
l_int|5
suffix:semicolon
(paren
op_star
id|p2c
)paren
op_or_assign
l_int|0x80
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;Clock %d: n %d dn %d div %d sc %d&bslash;n&quot;
comma
id|clock
comma
id|vclk
(braket
id|Midx
)braket
comma
id|vclk
(braket
id|Nidx
)braket
comma
id|vclk
(braket
id|VLDidx
)braket
comma
id|vclk
(braket
id|Pidx
)braket
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
macro_line|#endif
multiline_comment|/* ================ XFREE86/X.ORG ================= */
multiline_comment|/* Helper functions */
macro_line|#ifdef LINUX_XF86
id|USHORT
DECL|function|SiS_CheckBuildCustomMode
id|SiS_CheckBuildCustomMode
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|DisplayModePtr
id|mode
comma
r_int
id|VBFlags
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
r_int
id|depth
op_assign
id|pSiS-&gt;CurrentLayout.bitsPerPixel
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_assign
l_int|0
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CDClock
op_assign
id|mode-&gt;Clock
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CHDisplay
op_assign
id|mode-&gt;HDisplay
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CHSyncStart
op_assign
id|mode-&gt;HSyncStart
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CHSyncEnd
op_assign
id|mode-&gt;HSyncEnd
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CHTotal
op_assign
id|mode-&gt;HTotal
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVDisplay
op_assign
id|mode-&gt;VDisplay
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncStart
op_assign
id|mode-&gt;VSyncStart
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncEnd
op_assign
id|mode-&gt;VSyncEnd
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVTotal
op_assign
id|mode-&gt;VTotal
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_assign
id|mode-&gt;Flags
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_INTERLACE
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CVDisplay
op_rshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncStart
op_rshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncEnd
op_rshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVTotal
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_DBLSCAN
)paren
(brace
multiline_comment|/* pSiS-&gt;SiS_Pr-&gt;CDClock &lt;&lt;= 1; */
id|pSiS-&gt;SiS_Pr-&gt;CVDisplay
op_lshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncStart
op_lshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVSyncEnd
op_lshift_assign
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVTotal
op_lshift_assign
l_int|1
suffix:semicolon
)brace
id|pSiS-&gt;SiS_Pr-&gt;CHBlankStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CHDisplay
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CHBlankEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CHTotal
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVBlankStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CVSyncStart
op_minus
l_int|1
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CVBlankEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CVTotal
suffix:semicolon
id|SiS_MakeClockRegs
c_func
(paren
id|pScrn
comma
id|pSiS-&gt;SiS_Pr-&gt;CDClock
comma
op_amp
id|pSiS-&gt;SiS_Pr-&gt;CSR2B
comma
op_amp
id|pSiS-&gt;SiS_Pr-&gt;CSR2C
)paren
suffix:semicolon
id|pSiS-&gt;SiS_Pr-&gt;CSRClock
op_assign
(paren
id|pSiS-&gt;SiS_Pr-&gt;CDClock
op_div
l_int|1000
)paren
op_plus
l_int|1
suffix:semicolon
id|SiS_CalcCRRegisters
c_func
(paren
id|pSiS-&gt;SiS_Pr
comma
id|depth
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|depth
)paren
(brace
r_case
l_int|8
suffix:colon
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
l_int|0x223b
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
l_int|0x227d
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
l_int|0x22ff
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_DBLSCAN
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
id|DoubleScanMode
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pSiS-&gt;SiS_Pr-&gt;CVDisplay
op_ge
l_int|1024
)paren
op_logical_or
(paren
id|pSiS-&gt;SiS_Pr-&gt;CVTotal
op_ge
l_int|1024
)paren
op_logical_or
(paren
id|pSiS-&gt;SiS_Pr-&gt;CHDisplay
op_ge
l_int|1024
)paren
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
id|LineCompareOff
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_CLKDIV2
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
op_or_assign
id|HalfDCLK
suffix:semicolon
)brace
id|pSiS-&gt;SiS_Pr-&gt;CInfoFlag
op_assign
l_int|0x0007
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_NHSYNC
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CInfoFlag
op_or_assign
l_int|0x4000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_NVSYNC
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CInfoFlag
op_or_assign
l_int|0x8000
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CFlags
op_amp
id|V_INTERLACE
)paren
(brace
id|pSiS-&gt;SiS_Pr-&gt;CInfoFlag
op_or_assign
id|InterlaceMode
suffix:semicolon
)brace
id|pSiS-&gt;SiS_Pr-&gt;UseCustomMode
op_assign
id|TRUE
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Custom mode %dx%d:&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CHDisplay
comma
id|pSiS-&gt;SiS_Pr-&gt;CVDisplay
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Modeflag %04x, Infoflag %04x&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CModeFlag
comma
id|pSiS-&gt;SiS_Pr-&gt;CInfoFlag
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot; {{0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|0
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|1
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|2
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|3
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|4
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|5
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|6
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;  0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,0x%02x,&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|8
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|9
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|10
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|11
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|12
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|13
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|14
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;  0x%02x}},&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CCRT1CRTC
(braket
l_int|16
)braket
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Clock: 0x%02x, 0x%02x, %d&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CSR2B
comma
id|pSiS-&gt;SiS_Pr-&gt;CSR2C
comma
id|pSiS-&gt;SiS_Pr-&gt;CSRClock
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|SiS_FindPanelFromDB
id|SiS_FindPanelFromDB
c_func
(paren
id|SISPtr
id|pSiS
comma
id|USHORT
id|panelvendor
comma
id|USHORT
id|panelproduct
comma
r_int
op_star
id|maxx
comma
r_int
op_star
id|maxy
comma
r_int
op_star
id|prefx
comma
r_int
op_star
id|prefy
)paren
(brace
r_int
id|i
comma
id|j
suffix:semicolon
id|BOOLEAN
id|done
op_assign
id|FALSE
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
id|done
)paren
op_logical_and
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|vendor
)paren
op_logical_and
id|panelvendor
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|vendor
op_eq
id|panelvendor
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|productnum
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|product
(braket
id|j
)braket
op_eq
id|panelproduct
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxx
op_logical_and
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxy
)paren
(brace
(paren
op_star
id|maxx
)paren
op_assign
(paren
r_int
)paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxx
suffix:semicolon
(paren
op_star
id|maxy
)paren
op_assign
(paren
r_int
)paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxy
suffix:semicolon
(paren
op_star
id|prefx
)paren
op_assign
(paren
r_int
)paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|prefx
suffix:semicolon
(paren
op_star
id|prefy
)paren
op_assign
(paren
r_int
)paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|prefy
suffix:semicolon
id|done
op_assign
id|TRUE
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
id|pSiS-&gt;pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Identified %s, correcting max X res %d, max Y res %d&bslash;n&quot;
comma
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|plasmaname
comma
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxx
comma
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|maxy
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
id|i
op_increment
suffix:semicolon
)brace
r_return
(paren
id|done
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Build a list of supported modes:&n; * Built-in modes for which we have all data are M_T_DEFAULT,&n; * modes derived from DDC or database data are M_T_BUILTIN&n; */
id|DisplayModePtr
DECL|function|SiSBuildBuiltInModeList
id|SiSBuildBuiltInModeList
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
id|BOOLEAN
id|includelcdmodes
comma
id|BOOLEAN
id|isfordvi
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
r_int
r_int
id|VRE
comma
id|VBE
comma
id|VRS
comma
id|VBS
comma
id|VDE
comma
id|VT
suffix:semicolon
r_int
r_int
id|HRE
comma
id|HBE
comma
id|HRS
comma
id|HBS
comma
id|HDE
comma
id|HT
suffix:semicolon
r_int
r_char
id|sr_data
comma
id|cr_data
comma
id|cr_data2
comma
id|cr_data3
suffix:semicolon
r_int
r_char
id|sr2b
comma
id|sr2c
suffix:semicolon
r_float
id|num
comma
id|denum
comma
id|postscalar
comma
id|divider
suffix:semicolon
r_int
id|A
comma
id|B
comma
id|C
comma
id|D
comma
id|E
comma
id|F
comma
id|temp
comma
id|i
comma
id|j
comma
id|k
comma
id|l
comma
id|index
comma
id|vclkindex
suffix:semicolon
id|DisplayModePtr
r_new
op_assign
l_int|NULL
comma
id|current
op_assign
l_int|NULL
comma
id|first
op_assign
l_int|NULL
suffix:semicolon
id|BOOLEAN
id|done
op_assign
id|FALSE
suffix:semicolon
macro_line|#if 0
id|DisplayModePtr
id|backup
op_assign
l_int|NULL
suffix:semicolon
macro_line|#endif
id|pSiS-&gt;backupmodelist
op_assign
l_int|NULL
suffix:semicolon
id|pSiS-&gt;AddedPlasmaModes
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* Initialize our pointers */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
macro_line|#ifdef SIS300
id|InitTo300Pointer
c_func
(paren
id|pSiS-&gt;SiS_Pr
comma
op_amp
id|pSiS-&gt;sishw_ext
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|NULL
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
macro_line|#ifdef SIS315H
id|InitTo310Pointer
c_func
(paren
id|pSiS-&gt;SiS_Pr
comma
op_amp
id|pSiS-&gt;sishw_ext
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|NULL
suffix:semicolon
macro_line|#endif
)brace
r_else
r_return
l_int|NULL
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_InfoFlag
op_ne
l_int|0xFFFF
)paren
(brace
id|index
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
multiline_comment|/* 0x5a (320x240) is a pure FTSN mode, not DSTN! */
r_if
c_cond
(paren
(paren
op_logical_neg
id|pSiS-&gt;FSTN
)paren
op_logical_and
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|ModeID
op_eq
l_int|0x5a
)paren
)paren
(brace
id|i
op_increment
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pSiS-&gt;FSTN
)paren
op_logical_and
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|XRes
op_eq
l_int|320
)paren
op_logical_and
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|YRes
op_eq
l_int|240
)paren
op_logical_and
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|ModeID
op_ne
l_int|0x5a
)paren
)paren
(brace
id|i
op_increment
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_assign
id|xalloc
c_func
(paren
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
)paren
)paren
(brace
r_return
id|first
suffix:semicolon
)brace
id|memset
c_func
(paren
r_new
comma
l_int|0
comma
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_member_access_from_pointer
id|name
op_assign
id|xalloc
c_func
(paren
l_int|10
)paren
)paren
)paren
(brace
id|xfree
c_func
(paren
r_new
)paren
suffix:semicolon
r_return
id|first
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|first
)paren
(brace
id|first
op_assign
r_new
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current
)paren
(brace
id|current-&gt;next
op_assign
r_new
suffix:semicolon
r_new
op_member_access_from_pointer
id|prev
op_assign
id|current
suffix:semicolon
)brace
id|current
op_assign
r_new
suffix:semicolon
id|sprintf
c_func
(paren
id|current-&gt;name
comma
l_string|&quot;%dx%d&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|XRes
comma
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|YRes
)paren
suffix:semicolon
id|current-&gt;status
op_assign
id|MODE_OK
suffix:semicolon
id|current-&gt;type
op_assign
id|M_T_DEFAULT
suffix:semicolon
id|vclkindex
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
id|vclkindex
op_and_assign
l_int|0x3F
suffix:semicolon
)brace
id|sr2b
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2B
suffix:semicolon
id|sr2c
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_VCLKData
(braket
id|vclkindex
)braket
dot
id|SR2C
suffix:semicolon
id|divider
op_assign
(paren
id|sr2b
op_amp
l_int|0x80
)paren
ques
c_cond
l_float|2.0
suffix:colon
l_float|1.0
suffix:semicolon
id|postscalar
op_assign
(paren
id|sr2c
op_amp
l_int|0x80
)paren
ques
c_cond
(paren
(paren
(paren
(paren
id|sr2c
op_rshift
l_int|5
)paren
op_amp
l_int|0x03
)paren
op_eq
l_int|0x02
)paren
ques
c_cond
l_float|6.0
suffix:colon
l_float|8.0
)paren
suffix:colon
(paren
(paren
(paren
id|sr2c
op_rshift
l_int|5
)paren
op_amp
l_int|0x03
)paren
op_plus
l_float|1.0
)paren
suffix:semicolon
id|num
op_assign
(paren
id|sr2b
op_amp
l_int|0x7f
)paren
op_plus
l_float|1.0
suffix:semicolon
id|denum
op_assign
(paren
id|sr2c
op_amp
l_int|0x1f
)paren
op_plus
l_float|1.0
suffix:semicolon
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;------------&bslash;n&quot;
)paren
suffix:semicolon
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;sr2b: %x sr2c %x div %f ps %f num %f denum %f&bslash;n&quot;
comma
id|sr2b
comma
id|sr2c
comma
id|divider
comma
id|postscalar
comma
id|num
comma
id|denum
)paren
suffix:semicolon
macro_line|#endif
id|current-&gt;Clock
op_assign
(paren
r_int
)paren
(paren
l_int|14318
op_star
(paren
id|divider
op_div
id|postscalar
)paren
op_star
(paren
id|num
op_div
id|denum
)paren
)paren
suffix:semicolon
id|sr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|14
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISSR, 0x0b, sr_data); */
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x00, cr_data); */
multiline_comment|/* Horizontal total */
id|HT
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|A
op_assign
id|HT
op_plus
l_int|5
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x01, cr_data); */
multiline_comment|/* Horizontal display enable end */
id|HDE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x0C
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
id|E
op_assign
id|HDE
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* 0x80 0x64 */
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x04, cr_data); */
multiline_comment|/* Horizontal retrace (=sync) start */
id|HRS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|F
op_assign
id|HRS
op_minus
id|E
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* 0x06 0x06 */
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x02, cr_data); */
multiline_comment|/* Horizontal blank start */
id|HBS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x30
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|sr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISSR, 0x0c, sr_data); */
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x03, cr_data);  */
id|cr_data2
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x05, cr_data2); */
multiline_comment|/* Horizontal blank end */
id|HBE
op_assign
(paren
id|cr_data
op_amp
l_int|0x1f
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x80
)paren
op_rshift
l_int|2
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x03
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
multiline_comment|/* Horizontal retrace (=sync) end */
id|HRE
op_assign
(paren
id|cr_data2
op_amp
l_int|0x1f
)paren
op_or
(paren
(paren
id|sr_data
op_amp
l_int|0x04
)paren
op_lshift
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|HBE
op_minus
(paren
(paren
id|E
op_minus
l_int|1
)paren
op_amp
l_int|255
)paren
suffix:semicolon
id|B
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|256
)paren
suffix:semicolon
id|temp
op_assign
id|HRE
op_minus
(paren
(paren
id|E
op_plus
id|F
op_plus
l_int|3
)paren
op_amp
l_int|63
)paren
suffix:semicolon
id|C
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|64
)paren
suffix:semicolon
multiline_comment|/* 0x0b 0x0b */
id|D
op_assign
id|B
op_minus
id|F
op_minus
id|C
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|XRes
op_eq
l_int|320
)paren
op_logical_and
(paren
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|YRes
op_eq
l_int|200
)paren
op_logical_or
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|YRes
op_eq
l_int|240
)paren
)paren
)paren
(brace
multiline_comment|/* Terrible hack, but correct CRTC data for&n;&t;  * these modes only produces a black screen...&n;&t;  * (HRE is 0, leading into a too large C and&n;&t;  * a negative D. The CRT controller does not&n;&t;  * seem to like correcting HRE to 50&n;&t;  */
id|current-&gt;HDisplay
op_assign
l_int|320
suffix:semicolon
id|current-&gt;HSyncStart
op_assign
l_int|328
suffix:semicolon
id|current-&gt;HSyncEnd
op_assign
l_int|376
suffix:semicolon
id|current-&gt;HTotal
op_assign
l_int|400
suffix:semicolon
)brace
r_else
(brace
id|current-&gt;HDisplay
op_assign
(paren
id|E
op_star
l_int|8
)paren
suffix:semicolon
id|current-&gt;HSyncStart
op_assign
(paren
id|E
op_star
l_int|8
)paren
op_plus
(paren
id|F
op_star
l_int|8
)paren
suffix:semicolon
id|current-&gt;HSyncEnd
op_assign
(paren
id|E
op_star
l_int|8
)paren
op_plus
(paren
id|F
op_star
l_int|8
)paren
op_plus
(paren
id|C
op_star
l_int|8
)paren
suffix:semicolon
id|current-&gt;HTotal
op_assign
(paren
id|E
op_star
l_int|8
)paren
op_plus
(paren
id|F
op_star
l_int|8
)paren
op_plus
(paren
id|C
op_star
l_int|8
)paren
op_plus
(paren
id|D
op_star
l_int|8
)paren
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;H: A %d B %d C %d D %d E %d F %d  HT %d HDE %d HRS %d HBS %d HBE %d HRE %d&bslash;n&quot;
comma
id|A
comma
id|B
comma
id|C
comma
id|D
comma
id|E
comma
id|F
comma
id|HT
comma
id|HDE
comma
id|HRS
comma
id|HBS
comma
id|HBE
comma
id|HRE
)paren
suffix:semicolon
macro_line|#endif
id|sr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISSR, 0x0A, sr_data); */
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x06, cr_data); */
id|cr_data2
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x07, cr_data2);  */
multiline_comment|/* Vertical total */
id|VT
op_assign
(paren
id|cr_data
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x01
)paren
op_lshift
l_int|8
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x20
)paren
op_lshift
l_int|4
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x01
)paren
op_lshift
l_int|10
)paren
suffix:semicolon
id|A
op_assign
id|VT
op_plus
l_int|2
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|10
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x12, cr_data);  */
multiline_comment|/* Vertical display enable end */
id|VDE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x02
)paren
op_lshift
l_int|7
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x40
)paren
op_lshift
l_int|3
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x02
)paren
op_lshift
l_int|9
)paren
suffix:semicolon
id|E
op_assign
id|VDE
op_plus
l_int|1
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|8
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x10, cr_data); */
multiline_comment|/* Vertical retrace (=sync) start */
id|VRS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x04
)paren
op_lshift
l_int|6
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x80
)paren
op_lshift
l_int|2
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x08
)paren
op_lshift
l_int|7
)paren
suffix:semicolon
id|F
op_assign
id|VRS
op_plus
l_int|1
op_minus
id|E
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|11
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x15, cr_data);  */
id|cr_data3
op_assign
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|5
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x09, cr_data3);  */
multiline_comment|/* Vertical blank start */
id|VBS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x08
)paren
op_lshift
l_int|5
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data3
op_amp
l_int|0x20
)paren
op_lshift
l_int|4
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x04
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|12
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x16, cr_data); */
multiline_comment|/* Vertical blank end */
id|VBE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x10
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|temp
op_assign
id|VBE
op_minus
(paren
(paren
id|E
op_minus
l_int|1
)paren
op_amp
l_int|511
)paren
suffix:semicolon
id|B
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|512
)paren
suffix:semicolon
id|cr_data
op_assign
id|pSiS-&gt;SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|9
)braket
suffix:semicolon
multiline_comment|/* inSISIDXREG(SISCR, 0x11, cr_data); */
multiline_comment|/* Vertical retrace (=sync) end */
id|VRE
op_assign
(paren
id|cr_data
op_amp
l_int|0x0f
)paren
op_or
(paren
(paren
id|sr_data
op_amp
l_int|0x20
)paren
op_rshift
l_int|1
)paren
suffix:semicolon
id|temp
op_assign
id|VRE
op_minus
(paren
(paren
id|E
op_plus
id|F
op_minus
l_int|1
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|C
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|32
)paren
suffix:semicolon
id|D
op_assign
id|B
op_minus
id|F
op_minus
id|C
suffix:semicolon
id|current-&gt;VDisplay
op_assign
id|VDE
op_plus
l_int|1
suffix:semicolon
id|current-&gt;VSyncStart
op_assign
id|VRS
op_plus
l_int|1
suffix:semicolon
id|current-&gt;VSyncEnd
op_assign
(paren
(paren
id|VRS
op_amp
op_complement
l_int|0x1f
)paren
op_or
id|VRE
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|VRE
op_le
(paren
id|VRS
op_amp
l_int|0x1f
)paren
)paren
(brace
id|current-&gt;VSyncEnd
op_add_assign
l_int|32
suffix:semicolon
)brace
id|current-&gt;VTotal
op_assign
id|E
op_plus
id|D
op_plus
id|C
op_plus
id|F
suffix:semicolon
macro_line|#if 0
id|current-&gt;VDisplay
op_assign
id|E
suffix:semicolon
id|current-&gt;VSyncStart
op_assign
id|E
op_plus
id|D
suffix:semicolon
id|current-&gt;VSyncEnd
op_assign
id|E
op_plus
id|D
op_plus
id|C
suffix:semicolon
id|current-&gt;VTotal
op_assign
id|E
op_plus
id|D
op_plus
id|C
op_plus
id|F
suffix:semicolon
macro_line|#endif
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;V: A %d B %d C %d D %d E %d F %d  VT %d VDE %d VRS %d VBS %d VBE %d VRE %d&bslash;n&quot;
comma
id|A
comma
id|B
comma
id|C
comma
id|D
comma
id|E
comma
id|F
comma
id|VT
comma
id|VDE
comma
id|VRS
comma
id|VBS
comma
id|VBE
comma
id|VRE
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x4000
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_NHSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_PHSYNC
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x8000
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_NVSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_PVSYNC
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x0080
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_INTERLACE
suffix:semicolon
)brace
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeID
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeID
op_eq
id|pSiS-&gt;SiS_Pr-&gt;SiS_RefIndex
(braket
id|i
)braket
dot
id|ModeID
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeFlag
op_amp
id|DoubleScanMode
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_DBLSCAN
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|j
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current-&gt;Flags
op_amp
id|V_INTERLACE
)paren
(brace
id|current-&gt;VDisplay
op_lshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VSyncStart
op_lshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VSyncEnd
op_lshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VTotal
op_lshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VTotal
op_or_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current-&gt;Flags
op_amp
id|V_DBLSCAN
)paren
(brace
id|current-&gt;Clock
op_rshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VDisplay
op_rshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VSyncStart
op_rshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VSyncEnd
op_rshift_assign
l_int|1
suffix:semicolon
id|current-&gt;VTotal
op_rshift_assign
l_int|1
suffix:semicolon
)brace
macro_line|#ifdef TWDEBUG
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_INFO
comma
l_string|&quot;Built-in: %s %.2f %d %d %d %d %d %d %d %d&bslash;n&quot;
comma
id|current-&gt;name
comma
(paren
r_float
)paren
id|current-&gt;Clock
op_div
l_int|1000
comma
id|current-&gt;HDisplay
comma
id|current-&gt;HSyncStart
comma
id|current-&gt;HSyncEnd
comma
id|current-&gt;HTotal
comma
id|current-&gt;VDisplay
comma
id|current-&gt;VSyncStart
comma
id|current-&gt;VSyncEnd
comma
id|current-&gt;VTotal
)paren
suffix:semicolon
macro_line|#else
(paren
r_void
)paren
id|VBS
suffix:semicolon
(paren
r_void
)paren
id|HBS
suffix:semicolon
(paren
r_void
)paren
id|A
suffix:semicolon
macro_line|#endif
id|i
op_increment
suffix:semicolon
)brace
multiline_comment|/* Add non-standard LCD modes for panel&squot;s detailed timings */
r_if
c_cond
(paren
op_logical_neg
id|includelcdmodes
)paren
(brace
r_return
id|first
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_Vendor
)paren
(brace
id|xf86DrvMsg
c_func
(paren
l_int|0
comma
id|X_INFO
comma
l_string|&quot;Checking database for vendor %x, product %x&bslash;n&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CP_Vendor
comma
id|pSiS-&gt;SiS_Pr-&gt;CP_Product
)paren
suffix:semicolon
)brace
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
op_logical_neg
id|done
)paren
op_logical_and
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|vendor
)paren
op_logical_and
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_Vendor
)paren
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|vendor
op_eq
id|pSiS-&gt;SiS_Pr-&gt;CP_Vendor
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|productnum
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|product
(braket
id|j
)braket
op_eq
id|pSiS-&gt;SiS_Pr-&gt;CP_Product
)paren
(brace
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;Identified %s panel, adding specific modes&bslash;n&quot;
comma
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|plasmaname
)paren
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|modenum
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
id|isfordvi
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|plasmamodes
(braket
id|k
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|plasmamodes
(braket
id|k
)braket
op_amp
l_int|0x40
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
id|l
op_assign
id|SiS_PlasmaTable
(braket
id|i
)braket
dot
id|plasmamodes
(braket
id|k
)braket
op_amp
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;VBFlags
op_amp
(paren
id|VB_301
op_or
id|VB_301B
op_or
id|VB_302B
op_or
id|VB_301LV
)paren
)paren
(brace
r_if
c_cond
(paren
id|isfordvi
)paren
(brace
r_if
c_cond
(paren
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|VDisplay
OG
l_int|1024
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_assign
id|xalloc
c_func
(paren
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
)paren
)paren
(brace
r_return
id|first
suffix:semicolon
)brace
id|memset
c_func
(paren
r_new
comma
l_int|0
comma
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_member_access_from_pointer
id|name
op_assign
id|xalloc
c_func
(paren
l_int|12
)paren
)paren
)paren
(brace
id|xfree
c_func
(paren
r_new
)paren
suffix:semicolon
r_return
id|first
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|first
)paren
(brace
id|first
op_assign
r_new
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current
)paren
(brace
id|current-&gt;next
op_assign
r_new
suffix:semicolon
r_new
op_member_access_from_pointer
id|prev
op_assign
id|current
suffix:semicolon
)brace
id|current
op_assign
r_new
suffix:semicolon
id|pSiS-&gt;AddedPlasmaModes
op_assign
id|TRUE
suffix:semicolon
id|strcpy
c_func
(paren
id|current-&gt;name
comma
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|name
)paren
suffix:semicolon
multiline_comment|/* sprintf(current-&gt;name, &quot;%dx%d&quot;, SiS_PlasmaMode[l].HDisplay,&n;                                                  SiS_PlasmaMode[l].VDisplay); */
id|current-&gt;status
op_assign
id|MODE_OK
suffix:semicolon
id|current-&gt;type
op_assign
id|M_T_BUILTIN
suffix:semicolon
id|current-&gt;Clock
op_assign
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|clock
suffix:semicolon
id|current-&gt;SynthClock
op_assign
id|current-&gt;Clock
suffix:semicolon
id|current-&gt;HDisplay
op_assign
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|HDisplay
suffix:semicolon
id|current-&gt;HSyncStart
op_assign
id|current-&gt;HDisplay
op_plus
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|HFrontPorch
suffix:semicolon
id|current-&gt;HSyncEnd
op_assign
id|current-&gt;HSyncStart
op_plus
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|HSyncWidth
suffix:semicolon
id|current-&gt;HTotal
op_assign
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|HTotal
suffix:semicolon
id|current-&gt;VDisplay
op_assign
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|VDisplay
suffix:semicolon
id|current-&gt;VSyncStart
op_assign
id|current-&gt;VDisplay
op_plus
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|VFrontPorch
suffix:semicolon
id|current-&gt;VSyncEnd
op_assign
id|current-&gt;VSyncStart
op_plus
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|VSyncWidth
suffix:semicolon
id|current-&gt;VTotal
op_assign
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|VTotal
suffix:semicolon
id|current-&gt;CrtcHDisplay
op_assign
id|current-&gt;HDisplay
suffix:semicolon
id|current-&gt;CrtcHBlankStart
op_assign
id|current-&gt;HSyncStart
suffix:semicolon
id|current-&gt;CrtcHSyncStart
op_assign
id|current-&gt;HSyncStart
suffix:semicolon
id|current-&gt;CrtcHSyncEnd
op_assign
id|current-&gt;HSyncEnd
suffix:semicolon
id|current-&gt;CrtcHBlankEnd
op_assign
id|current-&gt;HSyncEnd
suffix:semicolon
id|current-&gt;CrtcHTotal
op_assign
id|current-&gt;HTotal
suffix:semicolon
id|current-&gt;CrtcVDisplay
op_assign
id|current-&gt;VDisplay
suffix:semicolon
id|current-&gt;CrtcVBlankStart
op_assign
id|current-&gt;VSyncStart
suffix:semicolon
id|current-&gt;CrtcVSyncStart
op_assign
id|current-&gt;VSyncStart
suffix:semicolon
id|current-&gt;CrtcVSyncEnd
op_assign
id|current-&gt;VSyncEnd
suffix:semicolon
id|current-&gt;CrtcVBlankEnd
op_assign
id|current-&gt;VSyncEnd
suffix:semicolon
id|current-&gt;CrtcVTotal
op_assign
id|current-&gt;VTotal
suffix:semicolon
r_if
c_cond
(paren
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|SyncFlags
op_amp
id|SIS_PL_HSYNCP
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_PHSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_NHSYNC
suffix:semicolon
r_if
c_cond
(paren
id|SiS_PlasmaMode
(braket
id|l
)braket
dot
id|SyncFlags
op_amp
id|SIS_PL_VSYNCP
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_PVSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_NVSYNC
suffix:semicolon
r_if
c_cond
(paren
id|current-&gt;HDisplay
OG
id|pSiS-&gt;LCDwidth
)paren
(brace
id|pSiS-&gt;LCDwidth
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_MaxX
op_assign
id|current-&gt;HDisplay
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current-&gt;VDisplay
OG
id|pSiS-&gt;LCDheight
)paren
(brace
id|pSiS-&gt;LCDheight
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_MaxY
op_assign
id|current-&gt;VDisplay
suffix:semicolon
)brace
id|xf86DrvMsg
c_func
(paren
id|pScrn-&gt;scrnIndex
comma
id|X_PROBED
comma
l_string|&quot;&bslash;tAdding &bslash;&quot;%s&bslash;&quot; to list of built-in modes&bslash;n&quot;
comma
id|current-&gt;name
)paren
suffix:semicolon
)brace
id|done
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
id|i
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_HaveCustomData
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_DataValid
(braket
id|i
)braket
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_assign
id|xalloc
c_func
(paren
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
)paren
)paren
(brace
r_return
id|first
suffix:semicolon
)brace
id|memset
c_func
(paren
r_new
comma
l_int|0
comma
r_sizeof
(paren
id|DisplayModeRec
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
r_new
op_member_access_from_pointer
id|name
op_assign
id|xalloc
c_func
(paren
l_int|10
)paren
)paren
)paren
(brace
id|xfree
c_func
(paren
r_new
)paren
suffix:semicolon
r_return
id|first
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|first
)paren
(brace
id|first
op_assign
r_new
suffix:semicolon
)brace
r_if
c_cond
(paren
id|current
)paren
(brace
id|current-&gt;next
op_assign
r_new
suffix:semicolon
r_new
op_member_access_from_pointer
id|prev
op_assign
id|current
suffix:semicolon
)brace
id|current
op_assign
r_new
suffix:semicolon
id|sprintf
c_func
(paren
id|current-&gt;name
comma
l_string|&quot;%dx%d&quot;
comma
id|pSiS-&gt;SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
comma
id|pSiS-&gt;SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
)paren
suffix:semicolon
id|current-&gt;status
op_assign
id|MODE_OK
suffix:semicolon
id|current-&gt;type
op_assign
id|M_T_BUILTIN
suffix:semicolon
id|current-&gt;Clock
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_Clock
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;SynthClock
op_assign
id|current-&gt;Clock
suffix:semicolon
id|current-&gt;HDisplay
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HDisplay
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;HSyncStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HSyncStart
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;HSyncEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HSyncEnd
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;HTotal
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HTotal
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;VDisplay
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VDisplay
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;VSyncStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VSyncStart
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;VSyncEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VSyncEnd
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;VTotal
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VTotal
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;CrtcHDisplay
op_assign
id|current-&gt;HDisplay
suffix:semicolon
id|current-&gt;CrtcHBlankStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HBlankStart
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;CrtcHSyncStart
op_assign
id|current-&gt;HSyncStart
suffix:semicolon
id|current-&gt;CrtcHSyncEnd
op_assign
id|current-&gt;HSyncEnd
suffix:semicolon
id|current-&gt;CrtcHBlankEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_HBlankEnd
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;CrtcHTotal
op_assign
id|current-&gt;HTotal
suffix:semicolon
id|current-&gt;CrtcVDisplay
op_assign
id|current-&gt;VDisplay
suffix:semicolon
id|current-&gt;CrtcVBlankStart
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VBlankStart
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;CrtcVSyncStart
op_assign
id|current-&gt;VSyncStart
suffix:semicolon
id|current-&gt;CrtcVSyncEnd
op_assign
id|current-&gt;VSyncEnd
suffix:semicolon
id|current-&gt;CrtcVBlankEnd
op_assign
id|pSiS-&gt;SiS_Pr-&gt;CP_VBlankEnd
(braket
id|i
)braket
suffix:semicolon
id|current-&gt;CrtcVTotal
op_assign
id|current-&gt;VTotal
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_SyncValid
(braket
id|i
)braket
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_HSync_P
(braket
id|i
)braket
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_PHSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_NHSYNC
suffix:semicolon
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;CP_VSync_P
(braket
id|i
)braket
)paren
(brace
id|current-&gt;Flags
op_or_assign
id|V_PVSYNC
suffix:semicolon
)brace
r_else
id|current-&gt;Flags
op_or_assign
id|V_NVSYNC
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* No sync data? Use positive sync... */
id|current-&gt;Flags
op_or_assign
id|V_PHSYNC
suffix:semicolon
id|current-&gt;Flags
op_or_assign
id|V_PVSYNC
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
id|first
suffix:semicolon
)brace
multiline_comment|/* Translate a mode number into the VESA pendant */
r_int
DECL|function|SiSTranslateToVESA
id|SiSTranslateToVESA
c_func
(paren
id|ScrnInfoPtr
id|pScrn
comma
r_int
id|modenumber
)paren
(brace
id|SISPtr
id|pSiS
op_assign
id|SISPTR
c_func
(paren
id|pScrn
)paren
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Initialize our pointers */
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_300_VGA
)paren
(brace
macro_line|#ifdef SIS300
id|InitTo300Pointer
c_func
(paren
id|pSiS-&gt;SiS_Pr
comma
op_amp
id|pSiS-&gt;sishw_ext
)paren
suffix:semicolon
macro_line|#else
r_return
op_minus
l_int|1
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
id|pSiS-&gt;VGAEngine
op_eq
id|SIS_315_VGA
)paren
(brace
macro_line|#ifdef SIS315H
id|InitTo310Pointer
c_func
(paren
id|pSiS-&gt;SiS_Pr
comma
op_amp
id|pSiS-&gt;sishw_ext
)paren
suffix:semicolon
macro_line|#else
r_return
op_minus
l_int|1
suffix:semicolon
macro_line|#endif
)brace
r_else
r_return
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|modenumber
op_le
l_int|0x13
)paren
(brace
r_return
id|modenumber
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
r_if
c_cond
(paren
id|pSiS-&gt;ROM661New
)paren
(brace
r_while
c_loop
(paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_ModeID
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_ModeID
op_eq
id|modenumber
)paren
(brace
r_return
(paren
r_int
)paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_VESAID
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
macro_line|#endif
r_while
c_loop
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|i
)braket
dot
id|Ext_ModeID
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|i
)braket
dot
id|Ext_ModeID
op_eq
id|modenumber
)paren
(brace
r_return
(paren
r_int
)paren
id|pSiS-&gt;SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|i
)braket
dot
id|Ext_VESAID
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
macro_line|#ifdef SIS315H
)brace
macro_line|#endif
r_return
op_minus
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Translate a new BIOS mode number into the driver&squot;s pendant */
r_int
DECL|function|SiSTranslateToOldMode
id|SiSTranslateToOldMode
c_func
(paren
r_int
id|modenumber
)paren
(brace
macro_line|#ifdef SIS315H
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_ModeID
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_ModeID
op_eq
id|modenumber
)paren
(brace
r_if
c_cond
(paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_MyModeID
)paren
(brace
r_return
(paren
r_int
)paren
id|SiS_EModeIDTable661
(braket
id|i
)braket
dot
id|Ext_MyModeID
suffix:semicolon
)brace
r_else
r_return
id|modenumber
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
macro_line|#endif
r_return
id|modenumber
suffix:semicolon
)brace
macro_line|#endif  /* Xfree86 */
macro_line|#ifdef LINUX_KERNEL
r_int
DECL|function|sisfb_mode_rate_to_dclock
id|sisfb_mode_rate_to_dclock
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
r_int
r_char
id|modeno
comma
r_int
r_char
id|rateindex
)paren
(brace
id|USHORT
id|ModeNo
op_assign
id|modeno
suffix:semicolon
id|USHORT
id|ModeIdIndex
op_assign
l_int|0
comma
id|ClockIndex
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
op_assign
l_int|0
suffix:semicolon
r_int
id|Clock
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|InitTo300Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|65
op_star
l_int|1000
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
id|InitTo310Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|65
op_star
l_int|1000
suffix:semicolon
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;Could not find mode %x&bslash;n&quot;
comma
id|ModeNo
)paren
suffix:semicolon
r_return
l_int|65
op_star
l_int|1000
suffix:semicolon
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|RefreshRateTableIndex
op_add_assign
(paren
id|rateindex
op_minus
l_int|1
)paren
suffix:semicolon
id|ClockIndex
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRTVCLK
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
id|ClockIndex
op_and_assign
l_int|0x3F
suffix:semicolon
)brace
id|Clock
op_assign
id|SiS_Pr-&gt;SiS_VCLKData
(braket
id|ClockIndex
)braket
dot
id|CLOCK
op_star
l_int|1000
suffix:semicolon
r_return
id|Clock
suffix:semicolon
)brace
id|BOOLEAN
DECL|function|sisfb_gettotalfrommode
id|sisfb_gettotalfrommode
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
r_int
r_char
id|modeno
comma
r_int
op_star
id|htotal
comma
r_int
op_star
id|vtotal
comma
r_int
r_char
id|rateindex
)paren
(brace
id|USHORT
id|ModeNo
op_assign
id|modeno
suffix:semicolon
id|USHORT
id|ModeIdIndex
op_assign
l_int|0
comma
id|CRT1Index
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|sr_data
comma
id|cr_data
comma
id|cr_data2
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|InitTo300Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
id|FALSE
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
id|InitTo310Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
id|FALSE
suffix:semicolon
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|RefreshRateTableIndex
op_add_assign
(paren
id|rateindex
op_minus
l_int|1
)paren
suffix:semicolon
id|CRT1Index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|sr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
op_star
id|htotal
op_assign
(paren
(paren
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
)paren
op_plus
l_int|5
)paren
op_star
l_int|8
suffix:semicolon
id|sr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|cr_data2
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|CRT1Index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
op_star
id|vtotal
op_assign
(paren
(paren
id|cr_data
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x01
)paren
op_lshift
l_int|8
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x20
)paren
op_lshift
l_int|4
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x01
)paren
op_lshift
l_int|10
)paren
)paren
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_amp
id|InterlaceMode
)paren
(brace
op_star
id|vtotal
op_mul_assign
l_int|2
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
r_int
DECL|function|sisfb_mode_rate_to_ddata
id|sisfb_mode_rate_to_ddata
c_func
(paren
id|SiS_Private
op_star
id|SiS_Pr
comma
id|PSIS_HW_INFO
id|HwInfo
comma
r_int
r_char
id|modeno
comma
r_int
r_char
id|rateindex
comma
r_struct
id|fb_var_screeninfo
op_star
id|var
)paren
(brace
id|USHORT
id|ModeNo
op_assign
id|modeno
suffix:semicolon
id|USHORT
id|ModeIdIndex
op_assign
l_int|0
comma
id|index
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|RefreshRateTableIndex
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|VRE
comma
id|VBE
comma
id|VRS
comma
id|VBS
comma
id|VDE
comma
id|VT
suffix:semicolon
r_int
r_int
id|HRE
comma
id|HBE
comma
id|HRS
comma
id|HBS
comma
id|HDE
comma
id|HT
suffix:semicolon
r_int
r_char
id|sr_data
comma
id|cr_data
comma
id|cr_data2
comma
id|cr_data3
suffix:semicolon
r_int
id|A
comma
id|B
comma
id|C
comma
id|D
comma
id|E
comma
id|F
comma
id|temp
comma
id|j
suffix:semicolon
r_if
c_cond
(paren
id|HwInfo-&gt;jChipType
OL
id|SIS_315H
)paren
(brace
macro_line|#ifdef SIS300
id|InitTo300Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|0
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
macro_line|#ifdef SIS315H
id|InitTo310Pointer
c_func
(paren
id|SiS_Pr
comma
id|HwInfo
)paren
suffix:semicolon
macro_line|#else
r_return
l_int|0
suffix:semicolon
macro_line|#endif
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SiS_SearchModeID
c_func
(paren
id|SiS_Pr
comma
op_amp
id|ModeNo
comma
op_amp
id|ModeIdIndex
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|RefreshRateTableIndex
op_assign
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|ModeIdIndex
)braket
dot
id|REFindex
suffix:semicolon
id|RefreshRateTableIndex
op_add_assign
(paren
id|rateindex
op_minus
l_int|1
)paren
suffix:semicolon
id|index
op_assign
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_CRT1CRTC
suffix:semicolon
id|sr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|14
)braket
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* Horizontal total */
id|HT
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|A
op_assign
id|HT
op_plus
l_int|5
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* Horizontal display enable end */
id|HDE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x0C
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
id|E
op_assign
id|HDE
op_plus
l_int|1
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|4
)braket
suffix:semicolon
multiline_comment|/* Horizontal retrace (=sync) start */
id|HRS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0xC0
)paren
op_lshift
l_int|2
)paren
suffix:semicolon
id|F
op_assign
id|HRS
op_minus
id|E
op_minus
l_int|3
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* Horizontal blank start */
id|HBS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x30
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|sr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|15
)braket
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|3
)braket
suffix:semicolon
id|cr_data2
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|5
)braket
suffix:semicolon
multiline_comment|/* Horizontal blank end */
id|HBE
op_assign
(paren
id|cr_data
op_amp
l_int|0x1f
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x80
)paren
op_rshift
l_int|2
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x03
)paren
op_lshift
l_int|6
)paren
suffix:semicolon
multiline_comment|/* Horizontal retrace (=sync) end */
id|HRE
op_assign
(paren
id|cr_data2
op_amp
l_int|0x1f
)paren
op_or
(paren
(paren
id|sr_data
op_amp
l_int|0x04
)paren
op_lshift
l_int|3
)paren
suffix:semicolon
id|temp
op_assign
id|HBE
op_minus
(paren
(paren
id|E
op_minus
l_int|1
)paren
op_amp
l_int|255
)paren
suffix:semicolon
id|B
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|256
)paren
suffix:semicolon
id|temp
op_assign
id|HRE
op_minus
(paren
(paren
id|E
op_plus
id|F
op_plus
l_int|3
)paren
op_amp
l_int|63
)paren
suffix:semicolon
id|C
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|64
)paren
suffix:semicolon
id|D
op_assign
id|B
op_minus
id|F
op_minus
id|C
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|XRes
op_eq
l_int|320
)paren
op_logical_and
(paren
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|YRes
op_eq
l_int|200
)paren
op_logical_or
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|YRes
op_eq
l_int|240
)paren
)paren
)paren
(brace
multiline_comment|/* Terrible hack, but the correct CRTC data for&n;&t;  * these modes only produces a black screen...&n;&t;  */
id|var-&gt;left_margin
op_assign
(paren
l_int|400
op_minus
l_int|376
)paren
suffix:semicolon
id|var-&gt;right_margin
op_assign
(paren
l_int|328
op_minus
l_int|320
)paren
suffix:semicolon
id|var-&gt;hsync_len
op_assign
(paren
l_int|376
op_minus
l_int|328
)paren
suffix:semicolon
)brace
r_else
(brace
id|var-&gt;left_margin
op_assign
id|D
op_star
l_int|8
suffix:semicolon
id|var-&gt;right_margin
op_assign
id|F
op_star
l_int|8
suffix:semicolon
id|var-&gt;hsync_len
op_assign
id|C
op_star
l_int|8
suffix:semicolon
)brace
id|sr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|13
)braket
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|6
)braket
suffix:semicolon
id|cr_data2
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|7
)braket
suffix:semicolon
multiline_comment|/* Vertical total */
id|VT
op_assign
(paren
id|cr_data
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x01
)paren
op_lshift
l_int|8
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x20
)paren
op_lshift
l_int|4
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x01
)paren
op_lshift
l_int|10
)paren
suffix:semicolon
id|A
op_assign
id|VT
op_plus
l_int|2
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|10
)braket
suffix:semicolon
multiline_comment|/* Vertical display enable end */
id|VDE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x02
)paren
op_lshift
l_int|7
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x40
)paren
op_lshift
l_int|3
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x02
)paren
op_lshift
l_int|9
)paren
suffix:semicolon
id|E
op_assign
id|VDE
op_plus
l_int|1
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|8
)braket
suffix:semicolon
multiline_comment|/* Vertical retrace (=sync) start */
id|VRS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x04
)paren
op_lshift
l_int|6
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x80
)paren
op_lshift
l_int|2
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x08
)paren
op_lshift
l_int|7
)paren
suffix:semicolon
id|F
op_assign
id|VRS
op_plus
l_int|1
op_minus
id|E
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|11
)braket
suffix:semicolon
id|cr_data3
op_assign
(paren
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|16
)braket
op_amp
l_int|0x01
)paren
op_lshift
l_int|5
suffix:semicolon
multiline_comment|/* Vertical blank start */
id|VBS
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data2
op_amp
l_int|0x08
)paren
op_lshift
l_int|5
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|cr_data3
op_amp
l_int|0x20
)paren
op_lshift
l_int|4
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x04
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|12
)braket
suffix:semicolon
multiline_comment|/* Vertical blank end */
id|VBE
op_assign
(paren
id|cr_data
op_amp
l_int|0xff
)paren
op_or
(paren
(paren
r_int
r_int
)paren
(paren
id|sr_data
op_amp
l_int|0x10
)paren
op_lshift
l_int|4
)paren
suffix:semicolon
id|temp
op_assign
id|VBE
op_minus
(paren
(paren
id|E
op_minus
l_int|1
)paren
op_amp
l_int|511
)paren
suffix:semicolon
id|B
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|512
)paren
suffix:semicolon
id|cr_data
op_assign
id|SiS_Pr-&gt;SiS_CRT1Table
(braket
id|index
)braket
dot
id|CR
(braket
l_int|9
)braket
suffix:semicolon
multiline_comment|/* Vertical retrace (=sync) end */
id|VRE
op_assign
(paren
id|cr_data
op_amp
l_int|0x0f
)paren
op_or
(paren
(paren
id|sr_data
op_amp
l_int|0x20
)paren
op_rshift
l_int|1
)paren
suffix:semicolon
id|temp
op_assign
id|VRE
op_minus
(paren
(paren
id|E
op_plus
id|F
op_minus
l_int|1
)paren
op_amp
l_int|31
)paren
suffix:semicolon
id|C
op_assign
(paren
id|temp
OG
l_int|0
)paren
ques
c_cond
id|temp
suffix:colon
(paren
id|temp
op_plus
l_int|32
)paren
suffix:semicolon
id|D
op_assign
id|B
op_minus
id|F
op_minus
id|C
suffix:semicolon
id|var-&gt;upper_margin
op_assign
id|D
suffix:semicolon
id|var-&gt;lower_margin
op_assign
id|F
suffix:semicolon
id|var-&gt;vsync_len
op_assign
id|C
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x8000
)paren
(brace
id|var-&gt;sync
op_and_assign
op_complement
id|FB_SYNC_VERT_HIGH_ACT
suffix:semicolon
)brace
r_else
id|var-&gt;sync
op_or_assign
id|FB_SYNC_VERT_HIGH_ACT
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x4000
)paren
(brace
id|var-&gt;sync
op_and_assign
op_complement
id|FB_SYNC_HOR_HIGH_ACT
suffix:semicolon
)brace
r_else
id|var-&gt;sync
op_or_assign
id|FB_SYNC_HOR_HIGH_ACT
suffix:semicolon
id|var-&gt;vmode
op_assign
id|FB_VMODE_NONINTERLACED
suffix:semicolon
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|Ext_InfoFlag
op_amp
l_int|0x0080
)paren
(brace
id|var-&gt;vmode
op_assign
id|FB_VMODE_INTERLACED
suffix:semicolon
)brace
r_else
(brace
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeID
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeID
op_eq
id|SiS_Pr-&gt;SiS_RefIndex
(braket
id|RefreshRateTableIndex
)braket
dot
id|ModeID
)paren
(brace
r_if
c_cond
(paren
id|SiS_Pr-&gt;SiS_EModeIDTable
(braket
id|j
)braket
dot
id|Ext_ModeFlag
op_amp
id|DoubleScanMode
)paren
(brace
id|var-&gt;vmode
op_assign
id|FB_VMODE_DOUBLE
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|j
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|var-&gt;vmode
op_amp
id|FB_VMODE_MASK
)paren
op_eq
id|FB_VMODE_INTERLACED
)paren
(brace
macro_line|#if 0  /* Do this? */
id|var-&gt;upper_margin
op_lshift_assign
l_int|1
suffix:semicolon
id|var-&gt;lower_margin
op_lshift_assign
l_int|1
suffix:semicolon
id|var-&gt;vsync_len
op_lshift_assign
l_int|1
suffix:semicolon
macro_line|#endif
)brace
r_else
r_if
c_cond
(paren
(paren
id|var-&gt;vmode
op_amp
id|FB_VMODE_MASK
)paren
op_eq
id|FB_VMODE_DOUBLE
)paren
(brace
id|var-&gt;upper_margin
op_rshift_assign
l_int|1
suffix:semicolon
id|var-&gt;lower_margin
op_rshift_assign
l_int|1
suffix:semicolon
id|var-&gt;vsync_len
op_rshift_assign
l_int|1
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
eof
