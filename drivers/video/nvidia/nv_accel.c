multiline_comment|/*&n; * linux/drivers/video/nvidia/nv_accel.c - nVidia Hardware Acceleration&n; *&n; * Copyright 2004 Antonino Daplas &lt;adaplas@pol.net&gt;&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file COPYING in the main directory of this archive&n; * for more details.&n; *&n; */
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &quot;nv_type.h&quot;
macro_line|#include &quot;nv_proto.h&quot;
macro_line|#include &quot;nv_dma.h&quot;
macro_line|#include &quot;nv_local.h&quot;
multiline_comment|/* There is a HW race condition with videoram command buffers.&n;   You can&squot;t jump to the location of your put offset.  We write put&n;   at the jump offset + SKIPS dwords with noop padding in between&n;   to solve this problem */
DECL|macro|SKIPS
mdefine_line|#define SKIPS  8
DECL|variable|NVCopyROP
r_static
r_const
r_int
id|NVCopyROP
(braket
l_int|16
)braket
op_assign
(brace
l_int|0xCC
comma
multiline_comment|/* copy   */
l_int|0x55
multiline_comment|/* invert */
)brace
suffix:semicolon
DECL|variable|NVCopyROP_PM
r_static
r_const
r_int
id|NVCopyROP_PM
(braket
l_int|16
)braket
op_assign
(brace
l_int|0xCA
comma
multiline_comment|/* copy  */
l_int|0x5A
comma
multiline_comment|/* invert */
)brace
suffix:semicolon
DECL|function|NVFlush
r_static
r_inline
r_void
id|NVFlush
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
)paren
(brace
r_int
id|count
op_assign
l_int|1000000000
suffix:semicolon
r_while
c_loop
(paren
op_decrement
id|count
op_logical_and
id|READ_GET
c_func
(paren
id|par
)paren
op_ne
id|par-&gt;dmaPut
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|count
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;nvidiafb: DMA Flush lockup&bslash;n&quot;
)paren
suffix:semicolon
id|par-&gt;lockup
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|NVSync
r_static
r_inline
r_void
id|NVSync
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
)paren
(brace
r_int
id|count
op_assign
l_int|1000000000
suffix:semicolon
r_while
c_loop
(paren
op_decrement
id|count
op_logical_and
id|NV_RD32
c_func
(paren
id|par-&gt;PGRAPH
comma
l_int|0x0700
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|count
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;nvidiafb: DMA Sync lockup&bslash;n&quot;
)paren
suffix:semicolon
id|par-&gt;lockup
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|NVDmaKickoff
r_static
r_void
id|NVDmaKickoff
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
)paren
(brace
r_if
c_cond
(paren
id|par-&gt;dmaCurrent
op_ne
id|par-&gt;dmaPut
)paren
(brace
id|par-&gt;dmaPut
op_assign
id|par-&gt;dmaCurrent
suffix:semicolon
id|WRITE_PUT
c_func
(paren
id|par
comma
id|par-&gt;dmaPut
)paren
suffix:semicolon
)brace
)brace
DECL|function|NVDmaWait
r_static
r_void
id|NVDmaWait
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
comma
r_int
id|size
)paren
(brace
r_int
id|dmaGet
suffix:semicolon
r_int
id|count
op_assign
l_int|1000000000
comma
id|cnt
suffix:semicolon
id|size
op_increment
suffix:semicolon
r_while
c_loop
(paren
id|par-&gt;dmaFree
OL
id|size
op_logical_and
op_decrement
id|count
op_logical_and
op_logical_neg
id|par-&gt;lockup
)paren
(brace
id|dmaGet
op_assign
id|READ_GET
c_func
(paren
id|par
)paren
suffix:semicolon
r_if
c_cond
(paren
id|par-&gt;dmaPut
op_ge
id|dmaGet
)paren
(brace
id|par-&gt;dmaFree
op_assign
id|par-&gt;dmaMax
op_minus
id|par-&gt;dmaCurrent
suffix:semicolon
r_if
c_cond
(paren
id|par-&gt;dmaFree
OL
id|size
)paren
(brace
id|NVDmaNext
c_func
(paren
id|par
comma
l_int|0x20000000
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dmaGet
op_le
id|SKIPS
)paren
(brace
r_if
c_cond
(paren
id|par-&gt;dmaPut
op_le
id|SKIPS
)paren
id|WRITE_PUT
c_func
(paren
id|par
comma
id|SKIPS
op_plus
l_int|1
)paren
suffix:semicolon
id|cnt
op_assign
l_int|1000000000
suffix:semicolon
r_do
(brace
id|dmaGet
op_assign
id|READ_GET
c_func
(paren
id|par
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
op_decrement
id|cnt
op_logical_and
id|dmaGet
op_le
id|SKIPS
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cnt
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;DMA Get lockup&bslash;n&quot;
)paren
suffix:semicolon
id|par-&gt;lockup
op_assign
l_int|1
suffix:semicolon
)brace
)brace
id|WRITE_PUT
c_func
(paren
id|par
comma
id|SKIPS
)paren
suffix:semicolon
id|par-&gt;dmaCurrent
op_assign
id|par-&gt;dmaPut
op_assign
id|SKIPS
suffix:semicolon
id|par-&gt;dmaFree
op_assign
id|dmaGet
op_minus
(paren
id|SKIPS
op_plus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
id|par-&gt;dmaFree
op_assign
id|dmaGet
op_minus
id|par-&gt;dmaCurrent
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|count
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;DMA Wait Lockup&bslash;n&quot;
)paren
suffix:semicolon
id|par-&gt;lockup
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|NVSetPattern
r_static
r_void
id|NVSetPattern
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
comma
id|u32
id|clr0
comma
id|u32
id|clr1
comma
id|u32
id|pat0
comma
id|u32
id|pat1
)paren
(brace
id|NVDmaStart
c_func
(paren
id|par
comma
id|PATTERN_COLOR_0
comma
l_int|4
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|clr0
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|clr1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|pat0
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|pat1
)paren
suffix:semicolon
)brace
DECL|function|NVSetRopSolid
r_static
r_void
id|NVSetRopSolid
c_func
(paren
r_struct
id|nvidia_par
op_star
id|par
comma
id|u32
id|rop
comma
id|u32
id|planemask
)paren
(brace
r_if
c_cond
(paren
id|planemask
op_ne
op_complement
l_int|0
)paren
(brace
id|NVSetPattern
c_func
(paren
id|par
comma
l_int|0
comma
id|planemask
comma
op_complement
l_int|0
comma
op_complement
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|par-&gt;currentRop
op_ne
(paren
id|rop
op_plus
l_int|32
)paren
)paren
(brace
id|NVDmaStart
c_func
(paren
id|par
comma
id|ROP_SET
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|NVCopyROP_PM
(braket
id|rop
)braket
)paren
suffix:semicolon
id|par-&gt;currentRop
op_assign
id|rop
op_plus
l_int|32
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|par-&gt;currentRop
op_ne
id|rop
)paren
(brace
r_if
c_cond
(paren
id|par-&gt;currentRop
op_ge
l_int|16
)paren
id|NVSetPattern
c_func
(paren
id|par
comma
op_complement
l_int|0
comma
op_complement
l_int|0
comma
op_complement
l_int|0
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|ROP_SET
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|NVCopyROP
(braket
id|rop
)braket
)paren
suffix:semicolon
id|par-&gt;currentRop
op_assign
id|rop
suffix:semicolon
)brace
)brace
DECL|function|NVSetClippingRectangle
r_static
r_void
id|NVSetClippingRectangle
c_func
(paren
r_struct
id|fb_info
op_star
id|info
comma
r_int
id|x1
comma
r_int
id|y1
comma
r_int
id|x2
comma
r_int
id|y2
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
r_int
id|h
op_assign
id|y2
op_minus
id|y1
op_plus
l_int|1
suffix:semicolon
r_int
id|w
op_assign
id|x2
op_minus
id|x1
op_plus
l_int|1
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|CLIP_POINT
comma
l_int|2
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|y1
op_lshift
l_int|16
)paren
op_or
id|x1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|h
op_lshift
l_int|16
)paren
op_or
id|w
)paren
suffix:semicolon
)brace
DECL|function|NVResetGraphics
r_void
id|NVResetGraphics
c_func
(paren
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
id|u32
id|surfaceFormat
comma
id|patternFormat
comma
id|rectFormat
comma
id|lineFormat
suffix:semicolon
r_int
id|pitch
comma
id|i
suffix:semicolon
id|pitch
op_assign
id|info-&gt;fix.line_length
suffix:semicolon
id|par-&gt;dmaBase
op_assign
(paren
id|u32
id|__iomem
op_star
)paren
(paren
op_amp
id|par-&gt;FbStart
(braket
id|par-&gt;FbUsableSize
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|SKIPS
suffix:semicolon
id|i
op_increment
)paren
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
id|i
)braket
comma
l_int|0
comma
l_int|0x00000000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x0
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x00040000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x1
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000010
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x2
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x00042000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x3
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000011
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x4
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x00044000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x5
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000012
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x6
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x00046000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x7
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000013
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x8
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x00048000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0x9
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000014
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xA
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x0004A000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xB
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000015
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xC
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x0004C000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xD
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000016
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xE
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x0004E000
)paren
suffix:semicolon
id|NV_WR32
c_func
(paren
op_amp
id|par-&gt;dmaBase
(braket
l_int|0xF
op_plus
id|SKIPS
)braket
comma
l_int|0
comma
l_int|0x80000017
)paren
suffix:semicolon
id|par-&gt;dmaPut
op_assign
l_int|0
suffix:semicolon
id|par-&gt;dmaCurrent
op_assign
l_int|16
op_plus
id|SKIPS
suffix:semicolon
id|par-&gt;dmaMax
op_assign
l_int|8191
suffix:semicolon
id|par-&gt;dmaFree
op_assign
id|par-&gt;dmaMax
op_minus
id|par-&gt;dmaCurrent
suffix:semicolon
r_switch
c_cond
(paren
id|info-&gt;var.bits_per_pixel
)paren
(brace
r_case
l_int|32
suffix:colon
r_case
l_int|24
suffix:colon
id|surfaceFormat
op_assign
id|SURFACE_FORMAT_DEPTH24
suffix:semicolon
id|patternFormat
op_assign
id|PATTERN_FORMAT_DEPTH24
suffix:semicolon
id|rectFormat
op_assign
id|RECT_FORMAT_DEPTH24
suffix:semicolon
id|lineFormat
op_assign
id|LINE_FORMAT_DEPTH24
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
id|surfaceFormat
op_assign
id|SURFACE_FORMAT_DEPTH16
suffix:semicolon
id|patternFormat
op_assign
id|PATTERN_FORMAT_DEPTH16
suffix:semicolon
id|rectFormat
op_assign
id|RECT_FORMAT_DEPTH16
suffix:semicolon
id|lineFormat
op_assign
id|LINE_FORMAT_DEPTH16
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|surfaceFormat
op_assign
id|SURFACE_FORMAT_DEPTH8
suffix:semicolon
id|patternFormat
op_assign
id|PATTERN_FORMAT_DEPTH8
suffix:semicolon
id|rectFormat
op_assign
id|RECT_FORMAT_DEPTH8
suffix:semicolon
id|lineFormat
op_assign
id|LINE_FORMAT_DEPTH8
suffix:semicolon
r_break
suffix:semicolon
)brace
id|NVDmaStart
c_func
(paren
id|par
comma
id|SURFACE_FORMAT
comma
l_int|4
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|surfaceFormat
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|pitch
op_or
(paren
id|pitch
op_lshift
l_int|16
)paren
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
l_int|0
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
l_int|0
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|PATTERN_FORMAT
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|patternFormat
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|RECT_FORMAT
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|rectFormat
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|LINE_FORMAT
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|lineFormat
)paren
suffix:semicolon
id|par-&gt;currentRop
op_assign
op_complement
l_int|0
suffix:semicolon
multiline_comment|/* set to something invalid */
id|NVSetRopSolid
c_func
(paren
id|par
comma
id|ROP_COPY
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|NVSetClippingRectangle
c_func
(paren
id|info
comma
l_int|0
comma
l_int|0
comma
id|info-&gt;var.xres_virtual
comma
id|info-&gt;var.yres_virtual
)paren
suffix:semicolon
id|NVDmaKickoff
c_func
(paren
id|par
)paren
suffix:semicolon
)brace
DECL|variable|byte_rev
id|u8
id|byte_rev
(braket
l_int|256
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x80
comma
l_int|0x40
comma
l_int|0xc0
comma
l_int|0x20
comma
l_int|0xa0
comma
l_int|0x60
comma
l_int|0xe0
comma
l_int|0x10
comma
l_int|0x90
comma
l_int|0x50
comma
l_int|0xd0
comma
l_int|0x30
comma
l_int|0xb0
comma
l_int|0x70
comma
l_int|0xf0
comma
l_int|0x08
comma
l_int|0x88
comma
l_int|0x48
comma
l_int|0xc8
comma
l_int|0x28
comma
l_int|0xa8
comma
l_int|0x68
comma
l_int|0xe8
comma
l_int|0x18
comma
l_int|0x98
comma
l_int|0x58
comma
l_int|0xd8
comma
l_int|0x38
comma
l_int|0xb8
comma
l_int|0x78
comma
l_int|0xf8
comma
l_int|0x04
comma
l_int|0x84
comma
l_int|0x44
comma
l_int|0xc4
comma
l_int|0x24
comma
l_int|0xa4
comma
l_int|0x64
comma
l_int|0xe4
comma
l_int|0x14
comma
l_int|0x94
comma
l_int|0x54
comma
l_int|0xd4
comma
l_int|0x34
comma
l_int|0xb4
comma
l_int|0x74
comma
l_int|0xf4
comma
l_int|0x0c
comma
l_int|0x8c
comma
l_int|0x4c
comma
l_int|0xcc
comma
l_int|0x2c
comma
l_int|0xac
comma
l_int|0x6c
comma
l_int|0xec
comma
l_int|0x1c
comma
l_int|0x9c
comma
l_int|0x5c
comma
l_int|0xdc
comma
l_int|0x3c
comma
l_int|0xbc
comma
l_int|0x7c
comma
l_int|0xfc
comma
l_int|0x02
comma
l_int|0x82
comma
l_int|0x42
comma
l_int|0xc2
comma
l_int|0x22
comma
l_int|0xa2
comma
l_int|0x62
comma
l_int|0xe2
comma
l_int|0x12
comma
l_int|0x92
comma
l_int|0x52
comma
l_int|0xd2
comma
l_int|0x32
comma
l_int|0xb2
comma
l_int|0x72
comma
l_int|0xf2
comma
l_int|0x0a
comma
l_int|0x8a
comma
l_int|0x4a
comma
l_int|0xca
comma
l_int|0x2a
comma
l_int|0xaa
comma
l_int|0x6a
comma
l_int|0xea
comma
l_int|0x1a
comma
l_int|0x9a
comma
l_int|0x5a
comma
l_int|0xda
comma
l_int|0x3a
comma
l_int|0xba
comma
l_int|0x7a
comma
l_int|0xfa
comma
l_int|0x06
comma
l_int|0x86
comma
l_int|0x46
comma
l_int|0xc6
comma
l_int|0x26
comma
l_int|0xa6
comma
l_int|0x66
comma
l_int|0xe6
comma
l_int|0x16
comma
l_int|0x96
comma
l_int|0x56
comma
l_int|0xd6
comma
l_int|0x36
comma
l_int|0xb6
comma
l_int|0x76
comma
l_int|0xf6
comma
l_int|0x0e
comma
l_int|0x8e
comma
l_int|0x4e
comma
l_int|0xce
comma
l_int|0x2e
comma
l_int|0xae
comma
l_int|0x6e
comma
l_int|0xee
comma
l_int|0x1e
comma
l_int|0x9e
comma
l_int|0x5e
comma
l_int|0xde
comma
l_int|0x3e
comma
l_int|0xbe
comma
l_int|0x7e
comma
l_int|0xfe
comma
l_int|0x01
comma
l_int|0x81
comma
l_int|0x41
comma
l_int|0xc1
comma
l_int|0x21
comma
l_int|0xa1
comma
l_int|0x61
comma
l_int|0xe1
comma
l_int|0x11
comma
l_int|0x91
comma
l_int|0x51
comma
l_int|0xd1
comma
l_int|0x31
comma
l_int|0xb1
comma
l_int|0x71
comma
l_int|0xf1
comma
l_int|0x09
comma
l_int|0x89
comma
l_int|0x49
comma
l_int|0xc9
comma
l_int|0x29
comma
l_int|0xa9
comma
l_int|0x69
comma
l_int|0xe9
comma
l_int|0x19
comma
l_int|0x99
comma
l_int|0x59
comma
l_int|0xd9
comma
l_int|0x39
comma
l_int|0xb9
comma
l_int|0x79
comma
l_int|0xf9
comma
l_int|0x05
comma
l_int|0x85
comma
l_int|0x45
comma
l_int|0xc5
comma
l_int|0x25
comma
l_int|0xa5
comma
l_int|0x65
comma
l_int|0xe5
comma
l_int|0x15
comma
l_int|0x95
comma
l_int|0x55
comma
l_int|0xd5
comma
l_int|0x35
comma
l_int|0xb5
comma
l_int|0x75
comma
l_int|0xf5
comma
l_int|0x0d
comma
l_int|0x8d
comma
l_int|0x4d
comma
l_int|0xcd
comma
l_int|0x2d
comma
l_int|0xad
comma
l_int|0x6d
comma
l_int|0xed
comma
l_int|0x1d
comma
l_int|0x9d
comma
l_int|0x5d
comma
l_int|0xdd
comma
l_int|0x3d
comma
l_int|0xbd
comma
l_int|0x7d
comma
l_int|0xfd
comma
l_int|0x03
comma
l_int|0x83
comma
l_int|0x43
comma
l_int|0xc3
comma
l_int|0x23
comma
l_int|0xa3
comma
l_int|0x63
comma
l_int|0xe3
comma
l_int|0x13
comma
l_int|0x93
comma
l_int|0x53
comma
l_int|0xd3
comma
l_int|0x33
comma
l_int|0xb3
comma
l_int|0x73
comma
l_int|0xf3
comma
l_int|0x0b
comma
l_int|0x8b
comma
l_int|0x4b
comma
l_int|0xcb
comma
l_int|0x2b
comma
l_int|0xab
comma
l_int|0x6b
comma
l_int|0xeb
comma
l_int|0x1b
comma
l_int|0x9b
comma
l_int|0x5b
comma
l_int|0xdb
comma
l_int|0x3b
comma
l_int|0xbb
comma
l_int|0x7b
comma
l_int|0xfb
comma
l_int|0x07
comma
l_int|0x87
comma
l_int|0x47
comma
l_int|0xc7
comma
l_int|0x27
comma
l_int|0xa7
comma
l_int|0x67
comma
l_int|0xe7
comma
l_int|0x17
comma
l_int|0x97
comma
l_int|0x57
comma
l_int|0xd7
comma
l_int|0x37
comma
l_int|0xb7
comma
l_int|0x77
comma
l_int|0xf7
comma
l_int|0x0f
comma
l_int|0x8f
comma
l_int|0x4f
comma
l_int|0xcf
comma
l_int|0x2f
comma
l_int|0xaf
comma
l_int|0x6f
comma
l_int|0xef
comma
l_int|0x1f
comma
l_int|0x9f
comma
l_int|0x5f
comma
l_int|0xdf
comma
l_int|0x3f
comma
l_int|0xbf
comma
l_int|0x7f
comma
l_int|0xff
comma
)brace
suffix:semicolon
DECL|function|nvidiafb_sync
r_int
id|nvidiafb_sync
c_func
(paren
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|par-&gt;lockup
)paren
id|NVFlush
c_func
(paren
id|par
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|par-&gt;lockup
)paren
id|NVSync
c_func
(paren
id|par
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|nvidiafb_copyarea
r_void
id|nvidiafb_copyarea
c_func
(paren
r_struct
id|fb_info
op_star
id|info
comma
r_const
r_struct
id|fb_copyarea
op_star
id|region
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
r_if
c_cond
(paren
id|par-&gt;lockup
)paren
r_return
id|cfb_copyarea
c_func
(paren
id|info
comma
id|region
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|BLIT_POINT_SRC
comma
l_int|3
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|region-&gt;sy
op_lshift
l_int|16
)paren
op_or
id|region-&gt;sx
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|region-&gt;dy
op_lshift
l_int|16
)paren
op_or
id|region-&gt;dx
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|region-&gt;height
op_lshift
l_int|16
)paren
op_or
id|region-&gt;width
)paren
suffix:semicolon
id|NVDmaKickoff
c_func
(paren
id|par
)paren
suffix:semicolon
)brace
DECL|function|nvidiafb_fillrect
r_void
id|nvidiafb_fillrect
c_func
(paren
r_struct
id|fb_info
op_star
id|info
comma
r_const
r_struct
id|fb_fillrect
op_star
id|rect
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
id|u32
id|color
suffix:semicolon
r_if
c_cond
(paren
id|par-&gt;lockup
)paren
r_return
id|cfb_fillrect
c_func
(paren
id|info
comma
id|rect
)paren
suffix:semicolon
r_if
c_cond
(paren
id|info-&gt;var.bits_per_pixel
op_eq
l_int|8
)paren
id|color
op_assign
id|rect-&gt;color
suffix:semicolon
r_else
id|color
op_assign
(paren
(paren
id|u32
op_star
)paren
id|info-&gt;pseudo_palette
)paren
(braket
id|rect-&gt;color
)braket
suffix:semicolon
r_if
c_cond
(paren
id|rect-&gt;rop
op_ne
id|ROP_COPY
)paren
id|NVSetRopSolid
c_func
(paren
id|par
comma
id|rect-&gt;rop
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|RECT_SOLID_COLOR
comma
l_int|1
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|color
)paren
suffix:semicolon
id|NVDmaStart
c_func
(paren
id|par
comma
id|RECT_SOLID_RECTS
c_func
(paren
l_int|0
)paren
comma
l_int|2
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|rect-&gt;dx
op_lshift
l_int|16
)paren
op_or
id|rect-&gt;dy
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|rect-&gt;width
op_lshift
l_int|16
)paren
op_or
id|rect-&gt;height
)paren
suffix:semicolon
id|NVDmaKickoff
c_func
(paren
id|par
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rect-&gt;rop
op_ne
id|ROP_COPY
)paren
id|NVSetRopSolid
c_func
(paren
id|par
comma
id|ROP_COPY
comma
op_complement
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|nvidiafb_mono_color_expand
r_static
r_void
id|nvidiafb_mono_color_expand
c_func
(paren
r_struct
id|fb_info
op_star
id|info
comma
r_const
r_struct
id|fb_image
op_star
id|image
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
id|u32
id|fg
comma
id|bg
comma
id|mask
op_assign
op_complement
(paren
op_complement
l_int|0
op_rshift
(paren
l_int|32
op_minus
id|info-&gt;var.bits_per_pixel
)paren
)paren
suffix:semicolon
id|u32
id|dsize
comma
id|width
comma
op_star
id|data
op_assign
(paren
id|u32
op_star
)paren
id|image-&gt;data
comma
id|tmp
suffix:semicolon
r_int
id|i
comma
id|j
comma
id|k
op_assign
l_int|0
suffix:semicolon
id|width
op_assign
(paren
id|image-&gt;width
op_plus
l_int|31
)paren
op_amp
op_complement
l_int|31
suffix:semicolon
id|dsize
op_assign
id|width
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
id|info-&gt;var.bits_per_pixel
op_eq
l_int|8
)paren
(brace
id|fg
op_assign
id|image-&gt;fg_color
op_or
id|mask
suffix:semicolon
id|bg
op_assign
id|image-&gt;bg_color
op_or
id|mask
suffix:semicolon
)brace
r_else
(brace
id|fg
op_assign
(paren
(paren
id|u32
op_star
)paren
id|info-&gt;pseudo_palette
)paren
(braket
id|image-&gt;fg_color
)braket
op_or
id|mask
suffix:semicolon
id|bg
op_assign
(paren
(paren
id|u32
op_star
)paren
id|info-&gt;pseudo_palette
)paren
(braket
id|image-&gt;bg_color
)braket
op_or
id|mask
suffix:semicolon
)brace
id|NVDmaStart
c_func
(paren
id|par
comma
id|RECT_EXPAND_TWO_COLOR_CLIP
comma
l_int|7
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|image-&gt;dy
op_lshift
l_int|16
)paren
op_or
(paren
id|image-&gt;dx
op_amp
l_int|0xffff
)paren
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
(paren
id|image-&gt;dy
op_plus
id|image-&gt;height
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
id|image-&gt;dx
op_plus
id|image-&gt;width
)paren
op_amp
l_int|0xffff
)paren
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|bg
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|fg
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|image-&gt;height
op_lshift
l_int|16
)paren
op_or
id|width
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|image-&gt;height
op_lshift
l_int|16
)paren
op_or
id|width
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
(paren
id|image-&gt;dy
op_lshift
l_int|16
)paren
op_or
(paren
id|image-&gt;dx
op_amp
l_int|0xffff
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|image-&gt;height
suffix:semicolon
id|i
op_decrement
suffix:semicolon
)paren
(brace
id|NVDmaStart
c_func
(paren
id|par
comma
id|RECT_EXPAND_TWO_COLOR_DATA
c_func
(paren
l_int|0
)paren
comma
id|dsize
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
id|dsize
suffix:semicolon
id|j
op_decrement
suffix:semicolon
)paren
(brace
id|tmp
op_assign
id|data
(braket
id|k
op_increment
)braket
suffix:semicolon
id|reverse_order
c_func
(paren
op_amp
id|tmp
)paren
suffix:semicolon
id|NVDmaNext
c_func
(paren
id|par
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
id|NVDmaKickoff
c_func
(paren
id|par
)paren
suffix:semicolon
)brace
DECL|function|nvidiafb_imageblit
r_void
id|nvidiafb_imageblit
c_func
(paren
r_struct
id|fb_info
op_star
id|info
comma
r_const
r_struct
id|fb_image
op_star
id|image
)paren
(brace
r_struct
id|nvidia_par
op_star
id|par
op_assign
id|info-&gt;par
suffix:semicolon
r_if
c_cond
(paren
id|image-&gt;depth
op_eq
l_int|1
op_logical_and
op_logical_neg
id|par-&gt;lockup
)paren
id|nvidiafb_mono_color_expand
c_func
(paren
id|info
comma
id|image
)paren
suffix:semicolon
r_else
id|cfb_imageblit
c_func
(paren
id|info
comma
id|image
)paren
suffix:semicolon
)brace
eof
