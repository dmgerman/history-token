multiline_comment|/*&n; *  linux/drivers/video/console/tileblit.c -- Tile Blitting Operation&n; *&n; *      Copyright (C) 2004 Antonino Daplas &lt;adaplas @pol.net&gt;&n; *&n; *  This file is subject to the terms and conditions of the GNU General Public&n; *  License.  See the file COPYING in the main directory of this archive for&n; *  more details.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/vt_kern.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;asm/types.h&gt;
macro_line|#include &quot;fbcon.h&quot;
DECL|function|tile_bmove
r_static
r_void
id|tile_bmove
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_int
id|sy
comma
r_int
id|sx
comma
r_int
id|dy
comma
r_int
id|dx
comma
r_int
id|height
comma
r_int
id|width
)paren
(brace
r_struct
id|fb_tilearea
id|area
suffix:semicolon
id|area.sx
op_assign
id|sx
suffix:semicolon
id|area.sy
op_assign
id|sy
suffix:semicolon
id|area.dx
op_assign
id|dx
suffix:semicolon
id|area.dy
op_assign
id|dy
suffix:semicolon
id|area.height
op_assign
id|height
suffix:semicolon
id|area.width
op_assign
id|width
suffix:semicolon
id|info-&gt;tileops
op_member_access_from_pointer
id|fb_tilecopy
c_func
(paren
id|info
comma
op_amp
id|area
)paren
suffix:semicolon
)brace
DECL|function|tile_clear
r_static
r_void
id|tile_clear
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_int
id|sy
comma
r_int
id|sx
comma
r_int
id|height
comma
r_int
id|width
)paren
(brace
r_struct
id|fb_tilerect
id|rect
suffix:semicolon
r_int
id|bgshift
op_assign
(paren
id|vc-&gt;vc_hi_font_mask
)paren
ques
c_cond
l_int|13
suffix:colon
l_int|12
suffix:semicolon
r_int
id|fgshift
op_assign
(paren
id|vc-&gt;vc_hi_font_mask
)paren
ques
c_cond
l_int|9
suffix:colon
l_int|8
suffix:semicolon
id|rect.index
op_assign
id|vc-&gt;vc_video_erase_char
op_amp
(paren
(paren
id|vc-&gt;vc_hi_font_mask
)paren
ques
c_cond
l_int|0x1ff
suffix:colon
l_int|0xff
)paren
suffix:semicolon
id|rect.fg
op_assign
id|attr_fgcol_ec
c_func
(paren
id|fgshift
comma
id|vc
)paren
suffix:semicolon
id|rect.bg
op_assign
id|attr_bgcol_ec
c_func
(paren
id|bgshift
comma
id|vc
)paren
suffix:semicolon
id|rect.sx
op_assign
id|sx
suffix:semicolon
id|rect.sy
op_assign
id|sy
suffix:semicolon
id|rect.width
op_assign
id|width
suffix:semicolon
id|rect.height
op_assign
id|height
suffix:semicolon
id|rect.rop
op_assign
id|ROP_COPY
suffix:semicolon
id|info-&gt;tileops
op_member_access_from_pointer
id|fb_tilefill
c_func
(paren
id|info
comma
op_amp
id|rect
)paren
suffix:semicolon
)brace
DECL|function|tile_putcs
r_static
r_void
id|tile_putcs
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_const
r_int
r_int
op_star
id|s
comma
r_int
id|count
comma
r_int
id|yy
comma
r_int
id|xx
comma
r_int
id|fg
comma
r_int
id|bg
)paren
(brace
r_struct
id|fb_tileblit
id|blit
suffix:semicolon
r_int
r_int
id|charmask
op_assign
id|vc-&gt;vc_hi_font_mask
ques
c_cond
l_int|0x1ff
suffix:colon
l_int|0xff
suffix:semicolon
r_int
id|size
op_assign
r_sizeof
(paren
id|u32
)paren
op_star
id|count
comma
id|i
suffix:semicolon
id|blit.sx
op_assign
id|xx
suffix:semicolon
id|blit.sy
op_assign
id|yy
suffix:semicolon
id|blit.width
op_assign
id|count
suffix:semicolon
id|blit.height
op_assign
l_int|1
suffix:semicolon
id|blit.fg
op_assign
id|fg
suffix:semicolon
id|blit.bg
op_assign
id|bg
suffix:semicolon
id|blit.length
op_assign
id|count
suffix:semicolon
id|blit.indices
op_assign
(paren
id|u32
op_star
)paren
id|fb_get_buffer_offset
c_func
(paren
id|info
comma
op_amp
id|info-&gt;pixmap
comma
id|size
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
)paren
id|blit.indices
(braket
id|i
)braket
op_assign
(paren
id|u32
)paren
(paren
id|scr_readw
c_func
(paren
id|s
op_increment
)paren
op_amp
id|charmask
)paren
suffix:semicolon
id|info-&gt;tileops
op_member_access_from_pointer
id|fb_tileblit
c_func
(paren
id|info
comma
op_amp
id|blit
)paren
suffix:semicolon
)brace
DECL|function|tile_clear_margins
r_static
r_void
id|tile_clear_margins
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_int
id|bottom_only
)paren
(brace
r_return
suffix:semicolon
)brace
DECL|function|tile_cursor
r_static
r_void
id|tile_cursor
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_struct
id|display
op_star
id|p
comma
r_int
id|mode
comma
r_int
id|fg
comma
r_int
id|bg
)paren
(brace
r_struct
id|fb_tilecursor
id|cursor
suffix:semicolon
r_int
id|use_sw
op_assign
(paren
id|vc-&gt;vc_cursor_type
op_amp
l_int|0x01
)paren
suffix:semicolon
id|cursor.sx
op_assign
id|vc-&gt;vc_x
suffix:semicolon
id|cursor.sy
op_assign
id|vc-&gt;vc_y
suffix:semicolon
id|cursor.mode
op_assign
(paren
id|mode
op_eq
id|CM_ERASE
op_logical_or
id|use_sw
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
id|cursor.fg
op_assign
id|fg
suffix:semicolon
id|cursor.bg
op_assign
id|bg
suffix:semicolon
r_switch
c_cond
(paren
id|vc-&gt;vc_cursor_type
op_amp
l_int|0x0f
)paren
(brace
r_case
id|CUR_NONE
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_NONE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUR_UNDERLINE
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_UNDERLINE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUR_LOWER_THIRD
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_LOWER_THIRD
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUR_LOWER_HALF
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_LOWER_HALF
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUR_TWO_THIRDS
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_TWO_THIRDS
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CUR_BLOCK
suffix:colon
r_default
suffix:colon
id|cursor.shape
op_assign
id|FB_TILE_CURSOR_BLOCK
suffix:semicolon
r_break
suffix:semicolon
)brace
id|info-&gt;tileops
op_member_access_from_pointer
id|fb_tilecursor
c_func
(paren
id|info
comma
op_amp
id|cursor
)paren
suffix:semicolon
)brace
DECL|function|fbcon_set_tileops
r_void
id|fbcon_set_tileops
c_func
(paren
r_struct
id|vc_data
op_star
id|vc
comma
r_struct
id|fb_info
op_star
id|info
comma
r_struct
id|display
op_star
id|p
comma
r_struct
id|fbcon_ops
op_star
id|ops
)paren
(brace
r_struct
id|fb_tilemap
id|map
suffix:semicolon
id|ops-&gt;bmove
op_assign
id|tile_bmove
suffix:semicolon
id|ops-&gt;clear
op_assign
id|tile_clear
suffix:semicolon
id|ops-&gt;putcs
op_assign
id|tile_putcs
suffix:semicolon
id|ops-&gt;clear_margins
op_assign
id|tile_clear_margins
suffix:semicolon
id|ops-&gt;cursor
op_assign
id|tile_cursor
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
id|map.width
op_assign
id|vc-&gt;vc_font.width
suffix:semicolon
id|map.height
op_assign
id|vc-&gt;vc_font.height
suffix:semicolon
id|map.depth
op_assign
l_int|1
suffix:semicolon
id|map.length
op_assign
(paren
id|p-&gt;userfont
)paren
ques
c_cond
id|FNTCHARCNT
c_func
(paren
id|p-&gt;fontdata
)paren
suffix:colon
l_int|256
suffix:semicolon
id|map.data
op_assign
id|p-&gt;fontdata
suffix:semicolon
id|info-&gt;tileops
op_member_access_from_pointer
id|fb_settile
c_func
(paren
id|info
comma
op_amp
id|map
)paren
suffix:semicolon
)brace
)brace
DECL|variable|fbcon_set_tileops
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_set_tileops
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Antonino Daplas &lt;adaplas@pol.net&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Tile Blitting Operation&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
eof
