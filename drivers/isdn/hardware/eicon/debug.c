macro_line|#include &quot;platform.h&quot;
macro_line|#include &quot;pc.h&quot;
macro_line|#include &quot;di_defs.h&quot;
macro_line|#include &quot;debug_if.h&quot;
macro_line|#include &quot;divasync.h&quot;
macro_line|#include &quot;kst_ifc.h&quot;
macro_line|#include &quot;maintidi.h&quot;
macro_line|#include &quot;man_defs.h&quot;
multiline_comment|/*&n;  LOCALS&n;  */
DECL|macro|DBG_MAGIC
mdefine_line|#define DBG_MAGIC (0x47114711L)
r_static
r_void
id|DI_register
(paren
r_void
op_star
id|arg
)paren
suffix:semicolon
r_static
r_void
id|DI_deregister
(paren
id|pDbgHandle
id|hDbg
)paren
suffix:semicolon
r_static
r_void
id|DI_format
(paren
r_int
id|do_lock
comma
id|word
id|id
comma
r_int
id|type
comma
r_char
op_star
id|format
comma
id|va_list
id|argument_list
)paren
suffix:semicolon
r_static
r_void
id|DI_format_locked
(paren
id|word
id|id
comma
r_int
id|type
comma
r_char
op_star
id|format
comma
id|va_list
id|argument_list
)paren
suffix:semicolon
DECL|function|DI_format_old
r_static
r_void
id|DI_format_old
(paren
id|word
id|id
comma
r_char
op_star
id|format
comma
id|va_list
id|ap
)paren
(brace
)brace
DECL|function|DiProcessEventLog
r_static
r_void
id|DiProcessEventLog
(paren
r_int
r_int
id|id
comma
r_int
r_int
id|msgID
comma
id|va_list
id|ap
)paren
(brace
)brace
r_static
r_void
id|single_p
(paren
id|byte
op_star
id|P
comma
id|word
op_star
id|PLength
comma
id|byte
id|Id
)paren
suffix:semicolon
r_static
r_void
id|diva_maint_xdi_cb
(paren
id|ENTITY
op_star
id|e
)paren
suffix:semicolon
r_static
id|word
id|SuperTraceCreateReadReq
(paren
id|byte
op_star
id|P
comma
r_const
r_char
op_star
id|path
)paren
suffix:semicolon
r_static
r_int
id|diva_mnt_cmp_nmbr
(paren
r_const
r_char
op_star
id|nmbr
)paren
suffix:semicolon
r_static
r_void
id|diva_free_dma_descriptor
(paren
id|IDI_CALL
id|request
comma
r_int
id|nr
)paren
suffix:semicolon
r_static
r_int
id|diva_get_dma_descriptor
(paren
id|IDI_CALL
id|request
comma
id|dword
op_star
id|dma_magic
)paren
suffix:semicolon
r_void
id|diva_mnt_internal_dprintf
(paren
id|dword
id|drv_id
comma
id|dword
id|type
comma
r_char
op_star
id|p
comma
dot
dot
dot
)paren
suffix:semicolon
DECL|variable|MaxDumpSize
r_static
id|dword
id|MaxDumpSize
op_assign
l_int|256
suffix:semicolon
DECL|variable|MaxXlogSize
r_static
id|dword
id|MaxXlogSize
op_assign
l_int|2
op_plus
l_int|128
suffix:semicolon
DECL|variable|TraceFilter
r_static
r_char
id|TraceFilter
(braket
id|DIVA_MAX_SELECTIVE_FILTER_LENGTH
op_plus
l_int|1
)braket
suffix:semicolon
DECL|variable|TraceFilterIdent
r_static
r_int
id|TraceFilterIdent
op_assign
op_minus
l_int|1
suffix:semicolon
DECL|variable|TraceFilterChannel
r_static
r_int
id|TraceFilterChannel
op_assign
op_minus
l_int|1
suffix:semicolon
DECL|struct|_diva_maint_client
r_typedef
r_struct
id|_diva_maint_client
(brace
DECL|member|sec
id|dword
id|sec
suffix:semicolon
DECL|member|usec
id|dword
id|usec
suffix:semicolon
DECL|member|hDbg
id|pDbgHandle
id|hDbg
suffix:semicolon
DECL|member|drvName
r_char
id|drvName
(braket
l_int|128
)braket
suffix:semicolon
DECL|member|dbgMask
id|dword
id|dbgMask
suffix:semicolon
DECL|member|last_dbgMask
id|dword
id|last_dbgMask
suffix:semicolon
DECL|member|request
id|IDI_CALL
id|request
suffix:semicolon
DECL|member|Dbg
id|_DbgHandle_
id|Dbg
suffix:semicolon
DECL|member|logical
r_int
id|logical
suffix:semicolon
DECL|member|channels
r_int
id|channels
suffix:semicolon
DECL|member|pIdiLib
id|diva_strace_library_interface_t
op_star
id|pIdiLib
suffix:semicolon
DECL|member|XData
id|BUFFERS
id|XData
suffix:semicolon
DECL|member|xbuffer
r_char
id|xbuffer
(braket
l_int|2048
op_plus
l_int|512
)braket
suffix:semicolon
DECL|member|pmem
id|byte
op_star
id|pmem
suffix:semicolon
DECL|member|request_pending
r_int
id|request_pending
suffix:semicolon
DECL|member|dma_handle
r_int
id|dma_handle
suffix:semicolon
DECL|typedef|diva_maint_client_t
)brace
id|diva_maint_client_t
suffix:semicolon
DECL|variable|clients
r_static
id|diva_maint_client_t
id|clients
(braket
id|MAX_DESCRIPTORS
)braket
suffix:semicolon
r_static
r_void
id|diva_change_management_debug_mask
(paren
id|diva_maint_client_t
op_star
id|pC
comma
id|dword
id|old_mask
)paren
suffix:semicolon
r_static
r_void
id|diva_maint_error
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
r_int
id|error
comma
r_const
r_char
op_star
id|file
comma
r_int
id|line
)paren
suffix:semicolon
r_static
r_void
id|diva_maint_state_change_notify
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
id|diva_trace_line_state_t
op_star
id|channel
comma
r_int
id|notify_subject
)paren
suffix:semicolon
r_static
r_void
id|diva_maint_trace_notify
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
r_void
op_star
id|xlog_buffer
comma
r_int
id|length
)paren
suffix:semicolon
DECL|struct|MSG_QUEUE
r_typedef
r_struct
id|MSG_QUEUE
(brace
DECL|member|Size
id|dword
id|Size
suffix:semicolon
multiline_comment|/* total size of queue (constant)&t;*/
DECL|member|Base
id|byte
op_star
id|Base
suffix:semicolon
multiline_comment|/* lowest address (constant)&t;&t;*/
DECL|member|High
id|byte
op_star
id|High
suffix:semicolon
multiline_comment|/* Base + Size (constant)&t;&t;*/
DECL|member|Head
id|byte
op_star
id|Head
suffix:semicolon
multiline_comment|/* first message in queue (if any)&t;*/
DECL|member|Tail
id|byte
op_star
id|Tail
suffix:semicolon
multiline_comment|/* first free position&t;&t;&t;*/
DECL|member|Wrap
id|byte
op_star
id|Wrap
suffix:semicolon
multiline_comment|/* current wraparound position &t;&t;*/
DECL|member|Count
id|dword
id|Count
suffix:semicolon
multiline_comment|/* current no of bytes in queue&t;&t;*/
DECL|typedef|MSG_QUEUE
)brace
id|MSG_QUEUE
suffix:semicolon
DECL|struct|MSG_HEAD
r_typedef
r_struct
id|MSG_HEAD
(brace
DECL|member|Size
r_volatile
id|dword
id|Size
suffix:semicolon
multiline_comment|/* size of data following MSG_HEAD&t;*/
DECL|macro|MSG_INCOMPLETE
mdefine_line|#define&t;MSG_INCOMPLETE&t;0x8000&t;/* ored to Size until queueCompleteMsg &t;*/
DECL|typedef|MSG_HEAD
)brace
id|MSG_HEAD
suffix:semicolon
DECL|macro|queueCompleteMsg
mdefine_line|#define queueCompleteMsg(p) do{ ((MSG_HEAD *)p - 1)-&gt;Size &amp;= ~MSG_INCOMPLETE; }while(0)
DECL|macro|queueCount
mdefine_line|#define queueCount(q)&t;((q)-&gt;Count)
DECL|macro|MSG_NEED
mdefine_line|#define MSG_NEED(size) &bslash;&n;&t;( (sizeof(MSG_HEAD) + size + sizeof(dword) - 1) &amp; ~(sizeof(dword) - 1) )
DECL|function|queueInit
r_static
r_void
id|queueInit
(paren
id|MSG_QUEUE
op_star
id|Q
comma
id|byte
op_star
id|Buffer
comma
id|dword
id|sizeBuffer
)paren
(brace
id|Q-&gt;Size
op_assign
id|sizeBuffer
suffix:semicolon
id|Q-&gt;Base
op_assign
id|Q-&gt;Head
op_assign
id|Q-&gt;Tail
op_assign
id|Buffer
suffix:semicolon
id|Q-&gt;High
op_assign
id|Buffer
op_plus
id|sizeBuffer
suffix:semicolon
id|Q-&gt;Wrap
op_assign
l_int|NULL
suffix:semicolon
id|Q-&gt;Count
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|queueAllocMsg
r_static
id|byte
op_star
id|queueAllocMsg
(paren
id|MSG_QUEUE
op_star
id|Q
comma
id|word
id|size
)paren
(brace
multiline_comment|/* Allocate &squot;size&squot; bytes at tail of queue which will be filled later&n;   * directly with callers own message header info and/or message.&n;   * An &squot;alloced&squot; message is marked incomplete by oring the &squot;Size&squot; field&n;   * with MSG_INCOMPLETE.&n;   * This must be reset via queueCompleteMsg() after the message is filled.&n;   * As long as a message is marked incomplete queuePeekMsg() will return&n;   * a &squot;queue empty&squot; condition when it reaches such a message.  */
id|MSG_HEAD
op_star
id|Msg
suffix:semicolon
id|word
id|need
op_assign
id|MSG_NEED
c_func
(paren
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Q-&gt;Tail
op_eq
id|Q-&gt;Head
)paren
(brace
r_if
c_cond
(paren
id|Q-&gt;Wrap
op_logical_or
id|need
OG
id|Q-&gt;Size
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
multiline_comment|/* full */
)brace
r_goto
id|alloc
suffix:semicolon
multiline_comment|/* empty */
)brace
r_if
c_cond
(paren
id|Q-&gt;Tail
OG
id|Q-&gt;Head
)paren
(brace
r_if
c_cond
(paren
id|Q-&gt;Tail
op_plus
id|need
op_le
id|Q-&gt;High
)paren
r_goto
id|alloc
suffix:semicolon
multiline_comment|/* append */
r_if
c_cond
(paren
id|Q-&gt;Base
op_plus
id|need
OG
id|Q-&gt;Head
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
multiline_comment|/* too much */
)brace
multiline_comment|/* wraparound the queue (but not the message) */
id|Q-&gt;Wrap
op_assign
id|Q-&gt;Tail
suffix:semicolon
id|Q-&gt;Tail
op_assign
id|Q-&gt;Base
suffix:semicolon
r_goto
id|alloc
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Q-&gt;Tail
op_plus
id|need
OG
id|Q-&gt;Head
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
multiline_comment|/* too much */
)brace
id|alloc
suffix:colon
id|Msg
op_assign
(paren
id|MSG_HEAD
op_star
)paren
id|Q-&gt;Tail
suffix:semicolon
id|Msg-&gt;Size
op_assign
id|size
op_or
id|MSG_INCOMPLETE
suffix:semicolon
id|Q-&gt;Tail
op_add_assign
id|need
suffix:semicolon
id|Q-&gt;Count
op_add_assign
id|size
suffix:semicolon
r_return
(paren
(paren
id|byte
op_star
)paren
(paren
id|Msg
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
DECL|function|queueFreeMsg
r_static
r_void
id|queueFreeMsg
(paren
id|MSG_QUEUE
op_star
id|Q
)paren
(brace
multiline_comment|/* Free the message at head of queue */
id|word
id|size
op_assign
(paren
(paren
id|MSG_HEAD
op_star
)paren
id|Q-&gt;Head
)paren
op_member_access_from_pointer
id|Size
op_amp
op_complement
id|MSG_INCOMPLETE
suffix:semicolon
id|Q-&gt;Head
op_add_assign
id|MSG_NEED
c_func
(paren
id|size
)paren
suffix:semicolon
id|Q-&gt;Count
op_sub_assign
id|size
suffix:semicolon
r_if
c_cond
(paren
id|Q-&gt;Wrap
)paren
(brace
r_if
c_cond
(paren
id|Q-&gt;Head
op_ge
id|Q-&gt;Wrap
)paren
(brace
id|Q-&gt;Head
op_assign
id|Q-&gt;Base
suffix:semicolon
id|Q-&gt;Wrap
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|Q-&gt;Head
op_ge
id|Q-&gt;Tail
)paren
(brace
id|Q-&gt;Head
op_assign
id|Q-&gt;Tail
op_assign
id|Q-&gt;Base
suffix:semicolon
)brace
)brace
DECL|function|queuePeekMsg
r_static
id|byte
op_star
id|queuePeekMsg
(paren
id|MSG_QUEUE
op_star
id|Q
comma
id|word
op_star
id|size
)paren
(brace
multiline_comment|/* Show the first valid message in queue BUT DON&squot;T free the message.&n;   * After looking on the message contents it can be freed queueFreeMsg()&n;   * or simply remain in message queue.  */
id|MSG_HEAD
op_star
id|Msg
op_assign
(paren
id|MSG_HEAD
op_star
)paren
id|Q-&gt;Head
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|byte
op_star
)paren
id|Msg
op_eq
id|Q-&gt;Tail
op_logical_and
op_logical_neg
id|Q-&gt;Wrap
)paren
op_logical_or
(paren
id|Msg-&gt;Size
op_amp
id|MSG_INCOMPLETE
)paren
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
r_else
(brace
op_star
id|size
op_assign
id|Msg-&gt;Size
suffix:semicolon
r_return
(paren
(paren
id|byte
op_star
)paren
(paren
id|Msg
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;  Message queue header&n;  */
DECL|variable|dbg_queue
r_static
id|MSG_QUEUE
op_star
id|dbg_queue
suffix:semicolon
DECL|variable|dbg_base
r_static
id|byte
op_star
id|dbg_base
suffix:semicolon
DECL|variable|external_dbg_queue
r_static
r_int
id|external_dbg_queue
suffix:semicolon
DECL|variable|dbg_q_lock
r_static
id|diva_os_spin_lock_t
id|dbg_q_lock
suffix:semicolon
DECL|variable|dbg_adapter_lock
r_static
id|diva_os_spin_lock_t
id|dbg_adapter_lock
suffix:semicolon
DECL|variable|dbg_q_busy
r_static
r_int
id|dbg_q_busy
suffix:semicolon
DECL|variable|dbg_sequence
r_static
r_volatile
id|dword
id|dbg_sequence
suffix:semicolon
DECL|variable|start_sec
r_static
id|dword
id|start_sec
suffix:semicolon
DECL|variable|start_usec
r_static
id|dword
id|start_usec
suffix:semicolon
multiline_comment|/*&n;&t;INTERFACE:&n;    Initialize run time queue structures.&n;    base:    base of the message queue&n;    length:  length of the message queue&n;    do_init: perfor queue reset&n;&n;    return:  zero on success, -1 on error&n;  */
DECL|function|diva_maint_init
r_int
id|diva_maint_init
(paren
id|byte
op_star
id|base
comma
r_int
r_int
id|length
comma
r_int
id|do_init
)paren
(brace
r_if
c_cond
(paren
id|dbg_queue
op_logical_or
(paren
op_logical_neg
id|base
)paren
op_logical_or
(paren
id|length
OL
(paren
l_int|4096
op_star
l_int|4
)paren
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|TraceFilter
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|TraceFilterIdent
op_assign
op_minus
l_int|1
suffix:semicolon
id|TraceFilterChannel
op_assign
op_minus
l_int|1
suffix:semicolon
id|dbg_base
op_assign
id|base
suffix:semicolon
id|diva_os_get_time
(paren
op_amp
id|start_sec
comma
op_amp
id|start_usec
)paren
suffix:semicolon
op_star
(paren
id|dword
op_star
)paren
id|base
op_assign
(paren
id|dword
)paren
id|DBG_MAGIC
suffix:semicolon
multiline_comment|/* Store Magic */
id|base
op_add_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
id|length
op_sub_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
op_star
(paren
id|dword
op_star
)paren
id|base
op_assign
l_int|2048
suffix:semicolon
multiline_comment|/* Extension Field Length */
id|base
op_add_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
id|length
op_sub_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
id|strcpy
(paren
id|base
comma
l_string|&quot;KERNEL MODE BUFFER&bslash;n&quot;
)paren
suffix:semicolon
id|base
op_add_assign
l_int|2048
suffix:semicolon
id|length
op_sub_assign
l_int|2048
suffix:semicolon
op_star
(paren
id|dword
op_star
)paren
id|base
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Terminate extension */
id|base
op_add_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
id|length
op_sub_assign
r_sizeof
(paren
id|dword
)paren
suffix:semicolon
op_star
(paren
r_void
op_star
op_star
)paren
id|base
op_assign
(paren
r_void
op_star
)paren
(paren
id|base
op_plus
r_sizeof
(paren
r_void
op_star
)paren
)paren
suffix:semicolon
multiline_comment|/* Store Base  */
id|base
op_add_assign
r_sizeof
(paren
r_void
op_star
)paren
suffix:semicolon
id|length
op_sub_assign
r_sizeof
(paren
r_void
op_star
)paren
suffix:semicolon
id|dbg_queue
op_assign
(paren
id|MSG_QUEUE
op_star
)paren
id|base
suffix:semicolon
id|queueInit
(paren
id|dbg_queue
comma
id|base
op_plus
r_sizeof
(paren
id|MSG_QUEUE
)paren
comma
id|length
op_minus
r_sizeof
(paren
id|MSG_QUEUE
)paren
op_minus
l_int|512
)paren
suffix:semicolon
id|external_dbg_queue
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|do_init
)paren
(brace
id|external_dbg_queue
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* memory was located on the external device */
)brace
r_if
c_cond
(paren
id|diva_os_initialize_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
l_string|&quot;dbg_init&quot;
)paren
)paren
(brace
id|dbg_queue
op_assign
l_int|NULL
suffix:semicolon
id|dbg_base
op_assign
l_int|NULL
suffix:semicolon
id|external_dbg_queue
op_assign
l_int|0
suffix:semicolon
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|diva_os_initialize_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
l_string|&quot;dbg_init&quot;
)paren
)paren
(brace
id|diva_os_destroy_spin_lock
c_func
(paren
op_amp
id|dbg_q_lock
comma
l_string|&quot;dbg_init&quot;
)paren
suffix:semicolon
id|dbg_queue
op_assign
l_int|NULL
suffix:semicolon
id|dbg_base
op_assign
l_int|NULL
suffix:semicolon
id|external_dbg_queue
op_assign
l_int|0
suffix:semicolon
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  INTERFACE:&n;    Finit at unload time&n;    return address of internal queue or zero if queue&n;    was external&n;  */
DECL|function|diva_maint_finit
r_void
op_star
id|diva_maint_finit
(paren
r_void
)paren
(brace
r_void
op_star
id|ret
op_assign
(paren
r_void
op_star
)paren
id|dbg_base
suffix:semicolon
r_int
id|i
suffix:semicolon
id|dbg_queue
op_assign
l_int|NULL
suffix:semicolon
id|dbg_base
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
(brace
id|diva_os_destroy_spin_lock
c_func
(paren
op_amp
id|dbg_q_lock
comma
l_string|&quot;dbg_finit&quot;
)paren
suffix:semicolon
id|diva_os_destroy_spin_lock
c_func
(paren
op_amp
id|dbg_adapter_lock
comma
l_string|&quot;dbg_finit&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|external_dbg_queue
)paren
(brace
id|ret
op_assign
l_int|NULL
suffix:semicolon
)brace
id|external_dbg_queue
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|pmem
)paren
(brace
id|diva_os_free
(paren
l_int|0
comma
id|clients
(braket
id|i
)braket
dot
id|pmem
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
id|ret
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  INTERFACE:&n;    Return amount of messages in debug queue&n;  */
DECL|function|diva_dbg_q_length
id|dword
id|diva_dbg_q_length
(paren
r_void
)paren
(brace
r_return
(paren
id|dbg_queue
ques
c_cond
id|queueCount
c_func
(paren
id|dbg_queue
)paren
suffix:colon
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  INTERFACE:&n;    Lock message queue and return the pointer to the first&n;    entry.&n;  */
DECL|function|diva_maint_get_message
id|diva_dbg_entry_head_t
op_star
id|diva_maint_get_message
(paren
id|word
op_star
id|size
comma
id|diva_os_spin_lock_magic_t
op_star
id|old_irql
)paren
(brace
id|diva_dbg_entry_head_t
op_star
id|pmsg
op_assign
l_int|NULL
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
id|old_irql
comma
l_string|&quot;read&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dbg_q_busy
)paren
(brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
id|old_irql
comma
l_string|&quot;read_busy&quot;
)paren
suffix:semicolon
r_return
l_int|NULL
suffix:semicolon
)brace
id|dbg_q_busy
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
id|size
)paren
)paren
)paren
(brace
id|dbg_q_busy
op_assign
l_int|0
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
id|old_irql
comma
l_string|&quot;read_empty&quot;
)paren
suffix:semicolon
)brace
r_return
(paren
id|pmsg
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  INTERFACE:&n;    acknowledge last message and unlock queue&n;  */
DECL|function|diva_maint_ack_message
r_void
id|diva_maint_ack_message
(paren
r_int
id|do_release
comma
id|diva_os_spin_lock_magic_t
op_star
id|old_irql
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|dbg_q_busy
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|do_release
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
id|dbg_q_busy
op_assign
l_int|0
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
id|old_irql
comma
l_string|&quot;read_ack&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  INTERFACE:&n;    PRT COMP function used to register&n;    with MAINT adapter or log in compatibility&n;    mode in case older driver version is connected too&n;  */
DECL|function|diva_maint_prtComp
r_void
id|diva_maint_prtComp
(paren
r_char
op_star
id|format
comma
dot
dot
dot
)paren
(brace
r_void
op_star
id|hDbg
suffix:semicolon
id|va_list
id|ap
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|format
)paren
r_return
suffix:semicolon
id|va_start
c_func
(paren
id|ap
comma
id|format
)paren
suffix:semicolon
multiline_comment|/*&n;    register to new log driver functions&n;   */
r_if
c_cond
(paren
(paren
id|format
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
op_logical_and
(paren
(paren
r_int
r_char
)paren
id|format
(braket
l_int|1
)braket
op_eq
l_int|255
)paren
)paren
(brace
id|hDbg
op_assign
id|va_arg
c_func
(paren
id|ap
comma
r_void
op_star
)paren
suffix:semicolon
multiline_comment|/* ptr to DbgHandle */
id|DI_register
(paren
id|hDbg
)paren
suffix:semicolon
)brace
id|va_end
(paren
id|ap
)paren
suffix:semicolon
)brace
DECL|function|DI_register
r_static
r_void
id|DI_register
(paren
r_void
op_star
id|arg
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
suffix:semicolon
id|dword
id|sec
comma
id|usec
suffix:semicolon
id|pDbgHandle
id|hDbg
suffix:semicolon
r_int
id|id
comma
id|free_id
op_assign
op_minus
l_int|1
comma
id|best_id
op_assign
l_int|0
suffix:semicolon
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
id|hDbg
op_assign
(paren
id|pDbgHandle
)paren
id|arg
suffix:semicolon
multiline_comment|/*&n;    Check for bad args, specially for the old obsolete debug handle&n;    */
r_if
c_cond
(paren
(paren
id|hDbg
op_eq
l_int|NULL
)paren
op_logical_or
(paren
(paren
id|hDbg-&gt;id
op_eq
l_int|0
)paren
op_logical_and
(paren
(paren
(paren
id|_OldDbgHandle_
op_star
)paren
id|hDbg
)paren
op_member_access_from_pointer
id|id
op_eq
op_minus
l_int|1
)paren
)paren
op_logical_or
(paren
id|hDbg-&gt;Registered
op_ne
l_int|0
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|id
op_assign
l_int|1
suffix:semicolon
id|id
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|id
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
op_eq
id|hDbg
)paren
(brace
multiline_comment|/*&n;        driver already registered&n;        */
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
multiline_comment|/* slot is busy */
r_continue
suffix:semicolon
)brace
id|free_id
op_assign
id|id
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|clients
(braket
id|id
)braket
dot
id|drvName
comma
id|hDbg-&gt;drvName
)paren
)paren
(brace
multiline_comment|/*&n;        This driver was already registered with this name&n;        and slot is still free - reuse it&n;        */
id|best_id
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
multiline_comment|/* slot is busy */
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|free_id
op_ne
op_minus
l_int|1
)paren
(brace
id|diva_dbg_entry_head_t
op_star
id|pmsg
op_assign
l_int|NULL
suffix:semicolon
r_int
id|len
suffix:semicolon
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
id|word
id|size
suffix:semicolon
multiline_comment|/*&n;      Register new driver with id == free_id&n;      */
id|clients
(braket
id|free_id
)braket
dot
id|hDbg
op_assign
id|hDbg
suffix:semicolon
id|clients
(braket
id|free_id
)braket
dot
id|sec
op_assign
id|sec
suffix:semicolon
id|clients
(braket
id|free_id
)braket
dot
id|usec
op_assign
id|usec
suffix:semicolon
id|strcpy
(paren
id|clients
(braket
id|free_id
)braket
dot
id|drvName
comma
id|hDbg-&gt;drvName
)paren
suffix:semicolon
id|clients
(braket
id|free_id
)braket
dot
id|dbgMask
op_assign
id|hDbg-&gt;dbgMask
suffix:semicolon
r_if
c_cond
(paren
id|best_id
)paren
(brace
id|hDbg-&gt;dbgMask
op_or_assign
id|clients
(braket
id|free_id
)braket
dot
id|last_dbgMask
suffix:semicolon
)brace
r_else
(brace
id|clients
(braket
id|free_id
)braket
dot
id|last_dbgMask
op_assign
l_int|0
suffix:semicolon
)brace
id|hDbg-&gt;Registered
op_assign
id|DBG_HANDLE_REG_NEW
suffix:semicolon
id|hDbg-&gt;id
op_assign
(paren
id|byte
)paren
id|free_id
suffix:semicolon
id|hDbg-&gt;dbg_end
op_assign
id|DI_deregister
suffix:semicolon
id|hDbg-&gt;dbg_prt
op_assign
id|DI_format_locked
suffix:semicolon
id|hDbg-&gt;dbg_ev
op_assign
id|DiProcessEventLog
suffix:semicolon
id|hDbg-&gt;dbg_irq
op_assign
id|DI_format_locked
suffix:semicolon
r_if
c_cond
(paren
id|hDbg-&gt;Version
OG
l_int|0
)paren
(brace
id|hDbg-&gt;dbg_old
op_assign
id|DI_format_old
suffix:semicolon
)brace
id|hDbg-&gt;next
op_assign
(paren
id|pDbgHandle
)paren
id|DBG_MAGIC
suffix:semicolon
multiline_comment|/*&n;      Log driver register, MAINT driver ID is &squot;0&squot;&n;      */
id|len
op_assign
id|sprintf
(paren
id|tmp
comma
l_string|&quot;DIMAINT - drv # %d = &squot;%s&squot; registered&quot;
comma
id|free_id
comma
id|hDbg-&gt;drvName
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
(paren
id|len
op_plus
l_int|1
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_STRING
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|DLI_REG
suffix:semicolon
id|pmsg-&gt;drv_id
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* id 0 - DIMAINT */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|len
op_plus
l_int|1
suffix:semicolon
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|tmp
comma
id|len
op_plus
l_int|1
)paren
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
)brace
DECL|function|DI_deregister
r_static
r_void
id|DI_deregister
(paren
id|pDbgHandle
id|hDbg
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
id|dword
id|sec
comma
id|usec
suffix:semicolon
r_int
id|i
suffix:semicolon
id|word
id|size
suffix:semicolon
id|byte
op_star
id|pmem
op_assign
l_int|NULL
suffix:semicolon
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;read&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_eq
id|hDbg
)paren
(brace
id|diva_dbg_entry_head_t
op_star
id|pmsg
suffix:semicolon
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
r_int
id|len
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_assign
l_int|NULL
suffix:semicolon
id|hDbg-&gt;id
op_assign
op_minus
l_int|1
suffix:semicolon
id|hDbg-&gt;dbgMask
op_assign
l_int|0
suffix:semicolon
id|hDbg-&gt;dbg_end
op_assign
l_int|NULL
suffix:semicolon
id|hDbg-&gt;dbg_prt
op_assign
l_int|NULL
suffix:semicolon
id|hDbg-&gt;dbg_irq
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|hDbg-&gt;Version
OG
l_int|0
)paren
id|hDbg-&gt;dbg_old
op_assign
l_int|NULL
suffix:semicolon
id|hDbg-&gt;Registered
op_assign
l_int|0
suffix:semicolon
id|hDbg-&gt;next
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
)paren
(brace
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryFinit
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_assign
l_int|NULL
suffix:semicolon
id|pmem
op_assign
id|clients
(braket
id|i
)braket
dot
id|pmem
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pmem
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/*&n;        Log driver register, MAINT driver ID is &squot;0&squot;&n;        */
id|len
op_assign
id|sprintf
(paren
id|tmp
comma
l_string|&quot;DIMAINT - drv # %d = &squot;%s&squot; de-registered&quot;
comma
id|i
comma
id|hDbg-&gt;drvName
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
(paren
id|len
op_plus
l_int|1
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_STRING
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|DLI_REG
suffix:semicolon
id|pmsg-&gt;drv_id
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* id 0 - DIMAINT */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|len
op_plus
l_int|1
suffix:semicolon
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|tmp
comma
id|len
op_plus
l_int|1
)paren
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read_ack&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;read_ack&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pmem
)paren
(brace
id|diva_os_free
(paren
l_int|0
comma
id|pmem
)paren
suffix:semicolon
)brace
)brace
DECL|function|DI_format_locked
r_static
r_void
id|DI_format_locked
(paren
r_int
r_int
id|id
comma
r_int
id|type
comma
r_char
op_star
id|format
comma
id|va_list
id|argument_list
)paren
(brace
id|DI_format
(paren
l_int|1
comma
id|id
comma
id|type
comma
id|format
comma
id|argument_list
)paren
suffix:semicolon
)brace
DECL|function|DI_format
r_static
r_void
id|DI_format
(paren
r_int
id|do_lock
comma
r_int
r_int
id|id
comma
r_int
id|type
comma
r_char
op_star
id|format
comma
id|va_list
id|ap
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
suffix:semicolon
id|dword
id|sec
comma
id|usec
suffix:semicolon
id|diva_dbg_entry_head_t
op_star
id|pmsg
op_assign
l_int|NULL
suffix:semicolon
id|dword
id|length
suffix:semicolon
id|word
id|size
suffix:semicolon
r_static
r_char
id|fmtBuf
(braket
id|MSG_FRAME_MAX_SIZE
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
op_plus
l_int|1
)braket
suffix:semicolon
r_char
op_star
id|data
suffix:semicolon
r_int
r_int
id|code
suffix:semicolon
r_if
c_cond
(paren
id|diva_os_in_irq
c_func
(paren
)paren
)paren
(brace
id|dbg_sequence
op_increment
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_logical_neg
id|format
)paren
op_logical_or
(paren
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_ne
l_int|0
)paren
op_logical_and
(paren
(paren
id|TraceFilterIdent
OL
l_int|0
)paren
op_logical_or
(paren
id|TraceFilterChannel
OL
l_int|0
)paren
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
r_if
c_cond
(paren
id|do_lock
)paren
(brace
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;format&quot;
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|DLI_MXLOG
suffix:colon
r_case
id|DLI_BLK
suffix:colon
r_case
id|DLI_SEND
suffix:colon
r_case
id|DLI_RECV
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|length
op_assign
id|va_arg
c_func
(paren
id|ap
comma
r_int
r_int
)paren
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|length
OG
id|MaxDumpSize
)paren
(brace
id|length
op_assign
id|MaxDumpSize
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
id|length
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|format
comma
id|length
)paren
suffix:semicolon
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_BINARY
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|type
suffix:semicolon
multiline_comment|/* DLI_XXX */
id|pmsg-&gt;drv_id
op_assign
id|id
suffix:semicolon
multiline_comment|/* driver MAINT id */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|length
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DLI_XLOG
suffix:colon
(brace
id|byte
op_star
id|p
suffix:semicolon
id|data
op_assign
id|va_arg
c_func
(paren
id|ap
comma
r_char
op_star
)paren
suffix:semicolon
id|code
op_assign
(paren
r_int
r_int
)paren
id|va_arg
c_func
(paren
id|ap
comma
r_int
r_int
)paren
suffix:semicolon
id|length
op_assign
(paren
r_int
r_int
)paren
id|va_arg
c_func
(paren
id|ap
comma
r_int
r_int
)paren
suffix:semicolon
r_if
c_cond
(paren
id|length
OG
id|MaxXlogSize
)paren
id|length
op_assign
id|MaxXlogSize
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
id|length
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
op_plus
l_int|2
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|p
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pmsg
(braket
l_int|1
)braket
suffix:semicolon
id|p
(braket
l_int|0
)braket
op_assign
(paren
r_char
)paren
(paren
id|code
)paren
suffix:semicolon
id|p
(braket
l_int|1
)braket
op_assign
(paren
r_char
)paren
(paren
id|code
op_rshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|data
op_logical_and
id|length
)paren
(brace
id|memcpy
(paren
op_amp
id|p
(braket
l_int|2
)braket
comma
op_amp
id|data
(braket
l_int|0
)braket
comma
id|length
)paren
suffix:semicolon
)brace
id|length
op_add_assign
l_int|2
suffix:semicolon
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_BINARY
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|type
suffix:semicolon
multiline_comment|/* DLI_XXX */
id|pmsg-&gt;drv_id
op_assign
id|id
suffix:semicolon
multiline_comment|/* driver MAINT id */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|length
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|DLI_LOG
suffix:colon
r_case
id|DLI_FTL
suffix:colon
r_case
id|DLI_ERR
suffix:colon
r_case
id|DLI_TRC
suffix:colon
r_case
id|DLI_REG
suffix:colon
r_case
id|DLI_MEM
suffix:colon
r_case
id|DLI_SPL
suffix:colon
r_case
id|DLI_IRP
suffix:colon
r_case
id|DLI_TIM
suffix:colon
r_case
id|DLI_TAPI
suffix:colon
r_case
id|DLI_NDIS
suffix:colon
r_case
id|DLI_CONN
suffix:colon
r_case
id|DLI_STAT
suffix:colon
r_case
id|DLI_PRV0
suffix:colon
r_case
id|DLI_PRV1
suffix:colon
r_case
id|DLI_PRV2
suffix:colon
r_case
id|DLI_PRV3
suffix:colon
r_if
c_cond
(paren
(paren
id|length
op_assign
(paren
r_int
r_int
)paren
id|vsprintf
(paren
op_amp
id|fmtBuf
(braket
l_int|0
)braket
comma
id|format
comma
id|ap
)paren
)paren
OG
l_int|0
)paren
(brace
id|length
op_add_assign
(paren
r_sizeof
(paren
op_star
id|pmsg
)paren
op_plus
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
id|length
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_STRING
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|type
suffix:semicolon
multiline_comment|/* DLI_XXX */
id|pmsg-&gt;drv_id
op_assign
id|id
suffix:semicolon
multiline_comment|/* driver MAINT id */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|length
op_minus
r_sizeof
(paren
op_star
id|pmsg
)paren
suffix:semicolon
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|fmtBuf
comma
id|pmsg-&gt;data_length
)paren
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
multiline_comment|/* switch type */
r_if
c_cond
(paren
id|queueCount
c_func
(paren
id|dbg_queue
)paren
)paren
(brace
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|do_lock
)paren
(brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;format&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;  Write driver ID and driver revision to callers buffer&n;  */
DECL|function|diva_get_driver_info
r_int
id|diva_get_driver_info
(paren
id|dword
id|id
comma
id|byte
op_star
id|data
comma
r_int
id|data_length
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
suffix:semicolon
id|byte
op_star
id|p
op_assign
id|data
suffix:semicolon
r_int
id|to_copy
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|data
op_logical_or
op_logical_neg
id|id
op_logical_or
(paren
id|data_length
OL
l_int|17
)paren
op_logical_or
(paren
id|id
op_ge
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;driver info&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
op_star
id|p
op_increment
op_assign
l_int|1
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
id|clients
(braket
id|id
)braket
dot
id|sec
suffix:semicolon
multiline_comment|/* save seconds */
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|sec
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|sec
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|sec
op_rshift
l_int|24
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|usec
op_div
l_int|1000
)paren
suffix:semicolon
multiline_comment|/* save mseconds */
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
(paren
id|clients
(braket
id|id
)braket
dot
id|usec
op_div
l_int|1000
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
(paren
id|clients
(braket
id|id
)braket
dot
id|usec
op_div
l_int|1000
)paren
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
(paren
id|byte
)paren
(paren
(paren
id|clients
(braket
id|id
)braket
dot
id|usec
op_div
l_int|1000
)paren
op_rshift
l_int|24
)paren
suffix:semicolon
id|data_length
op_sub_assign
l_int|9
suffix:semicolon
r_if
c_cond
(paren
(paren
id|to_copy
op_assign
id|MIN
c_func
(paren
id|strlen
c_func
(paren
id|clients
(braket
id|id
)braket
dot
id|drvName
)paren
comma
id|data_length
op_minus
l_int|1
)paren
)paren
)paren
(brace
id|memcpy
(paren
id|p
comma
id|clients
(braket
id|id
)braket
dot
id|drvName
comma
id|to_copy
)paren
suffix:semicolon
id|p
op_add_assign
id|to_copy
suffix:semicolon
id|data_length
op_sub_assign
id|to_copy
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data_length
op_ge
l_int|4
)paren
op_logical_and
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;drvTag
(braket
l_int|0
)braket
)paren
(brace
op_star
id|p
op_increment
op_assign
l_char|&squot;(&squot;
suffix:semicolon
id|data_length
op_sub_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|to_copy
op_assign
id|MIN
c_func
(paren
id|strlen
c_func
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;drvTag
)paren
comma
id|data_length
op_minus
l_int|2
)paren
)paren
)paren
(brace
id|memcpy
(paren
id|p
comma
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;drvTag
comma
id|to_copy
)paren
suffix:semicolon
id|p
op_add_assign
id|to_copy
suffix:semicolon
id|data_length
op_sub_assign
id|to_copy
suffix:semicolon
r_if
c_cond
(paren
id|data_length
op_ge
l_int|2
)paren
(brace
op_star
id|p
op_increment
op_assign
l_char|&squot;)&squot;
suffix:semicolon
id|data_length
op_decrement
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;driver info&quot;
)paren
suffix:semicolon
r_return
(paren
id|p
op_minus
id|data
)paren
suffix:semicolon
)brace
DECL|function|diva_get_driver_dbg_mask
r_int
id|diva_get_driver_dbg_mask
(paren
id|dword
id|id
comma
id|byte
op_star
id|data
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
suffix:semicolon
r_int
id|ret
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|data
op_logical_or
op_logical_neg
id|id
op_logical_or
(paren
id|id
op_ge
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;driver info&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
id|ret
op_assign
l_int|4
suffix:semicolon
op_star
id|data
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
)paren
suffix:semicolon
op_star
id|data
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
id|data
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
id|data
op_increment
op_assign
(paren
id|byte
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
op_rshift
l_int|24
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;driver info&quot;
)paren
suffix:semicolon
r_return
(paren
id|ret
)paren
suffix:semicolon
)brace
DECL|function|diva_set_driver_dbg_mask
r_int
id|diva_set_driver_dbg_mask
(paren
id|dword
id|id
comma
id|dword
id|mask
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
r_int
id|ret
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|id
op_logical_or
(paren
id|id
op_ge
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
id|dword
id|old_mask
op_assign
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
suffix:semicolon
id|mask
op_and_assign
l_int|0x7fffffff
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
op_assign
id|mask
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|last_dbgMask
op_assign
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg-&gt;dbgMask
op_or
id|clients
(braket
id|id
)braket
dot
id|dbgMask
)paren
suffix:semicolon
id|ret
op_assign
l_int|4
suffix:semicolon
id|diva_change_management_debug_mask
(paren
op_amp
id|clients
(braket
id|id
)braket
comma
id|old_mask
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|request_pending
)paren
(brace
id|clients
(braket
id|id
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|request
)paren
)paren
(paren
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;hLib
)paren
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
r_return
(paren
id|ret
)paren
suffix:semicolon
)brace
DECL|function|diva_get_idi_adapter_info
r_static
r_int
id|diva_get_idi_adapter_info
(paren
id|IDI_CALL
id|request
comma
id|dword
op_star
id|serial
comma
id|dword
op_star
id|logical
)paren
(brace
id|IDI_SYNC_REQ
id|sync_req
suffix:semicolon
id|sync_req.xdi_logical_adapter_number.Req
op_assign
l_int|0
suffix:semicolon
id|sync_req.xdi_logical_adapter_number.Rc
op_assign
id|IDI_SYNC_REQ_XDI_GET_LOGICAL_ADAPTER_NUMBER
suffix:semicolon
(paren
op_star
id|request
)paren
(paren
(paren
id|ENTITY
op_star
)paren
op_amp
id|sync_req
)paren
suffix:semicolon
op_star
id|logical
op_assign
id|sync_req.xdi_logical_adapter_number.info.logical_adapter_number
suffix:semicolon
id|sync_req.GetSerial.Req
op_assign
l_int|0
suffix:semicolon
id|sync_req.GetSerial.Rc
op_assign
id|IDI_SYNC_REQ_GET_SERIAL
suffix:semicolon
id|sync_req.GetSerial.serial
op_assign
l_int|0
suffix:semicolon
(paren
op_star
id|request
)paren
(paren
(paren
id|ENTITY
op_star
)paren
op_amp
id|sync_req
)paren
suffix:semicolon
op_star
id|serial
op_assign
id|sync_req.GetSerial.serial
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  Register XDI adapter as MAINT compatible driver&n;  */
DECL|function|diva_mnt_add_xdi_adapter
r_void
id|diva_mnt_add_xdi_adapter
(paren
r_const
id|DESCRIPTOR
op_star
id|d
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
id|dword
id|sec
comma
id|usec
comma
id|logical
comma
id|serial
comma
id|org_mask
suffix:semicolon
r_int
id|id
comma
id|best_id
op_assign
l_int|0
comma
id|free_id
op_assign
op_minus
l_int|1
suffix:semicolon
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
id|diva_dbg_entry_head_t
op_star
id|pmsg
op_assign
l_int|NULL
suffix:semicolon
r_int
id|len
suffix:semicolon
id|word
id|size
suffix:semicolon
id|byte
op_star
id|pmem
suffix:semicolon
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
id|diva_get_idi_adapter_info
(paren
id|d-&gt;request
comma
op_amp
id|serial
comma
op_amp
id|logical
)paren
suffix:semicolon
r_if
c_cond
(paren
id|serial
op_amp
l_int|0xff000000
)paren
(brace
id|sprintf
(paren
id|tmp
comma
l_string|&quot;ADAPTER:%d SN:%u-%d&quot;
comma
(paren
r_int
)paren
id|logical
comma
id|serial
op_amp
l_int|0x00ffffff
comma
(paren
id|byte
)paren
(paren
(paren
(paren
id|serial
op_amp
l_int|0xff000000
)paren
op_rshift
l_int|24
)paren
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|sprintf
(paren
id|tmp
comma
l_string|&quot;ADAPTER:%d SN:%u&quot;
comma
(paren
r_int
)paren
id|logical
comma
id|serial
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|pmem
op_assign
id|diva_os_malloc
(paren
l_int|0
comma
id|DivaSTraceGetMemotyRequirement
(paren
id|d-&gt;channels
)paren
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|memset
(paren
id|pmem
comma
l_int|0x00
comma
id|DivaSTraceGetMemotyRequirement
(paren
id|d-&gt;channels
)paren
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|id
op_assign
l_int|1
suffix:semicolon
id|id
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|id
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|request
op_eq
id|d-&gt;request
)paren
)paren
(brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|hDbg
)paren
(brace
multiline_comment|/* slot is busy */
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|free_id
OL
l_int|0
)paren
(brace
id|free_id
op_assign
id|id
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|clients
(braket
id|id
)braket
dot
id|drvName
comma
id|tmp
)paren
)paren
(brace
multiline_comment|/*&n;        This driver was already registered with this name&n;        and slot is still free - reuse it&n;        */
id|free_id
op_assign
id|id
suffix:semicolon
id|best_id
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|free_id
OL
l_int|0
)paren
(brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_free
(paren
l_int|0
comma
id|pmem
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|id
op_assign
id|free_id
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|request
op_assign
id|d-&gt;request
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|hDbg
op_assign
op_amp
id|clients
(braket
id|id
)braket
dot
id|Dbg
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|sec
op_assign
id|sec
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|usec
op_assign
id|usec
suffix:semicolon
id|strcpy
(paren
id|clients
(braket
id|id
)braket
dot
id|drvName
comma
id|tmp
)paren
suffix:semicolon
id|strcpy
(paren
id|clients
(braket
id|id
)braket
dot
id|Dbg.drvName
comma
id|tmp
)paren
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.drvTag
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|logical
op_assign
(paren
r_int
)paren
id|logical
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|channels
op_assign
(paren
r_int
)paren
id|d-&gt;channels
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|dma_handle
op_assign
op_minus
l_int|1
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbgMask
op_assign
l_int|0
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|dbgMask
op_assign
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbgMask
suffix:semicolon
r_if
c_cond
(paren
id|id
)paren
(brace
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbgMask
op_or_assign
id|clients
(braket
id|free_id
)braket
dot
id|last_dbgMask
suffix:semicolon
)brace
r_else
(brace
id|clients
(braket
id|id
)braket
dot
id|last_dbgMask
op_assign
l_int|0
suffix:semicolon
)brace
id|clients
(braket
id|id
)braket
dot
id|Dbg.Registered
op_assign
id|DBG_HANDLE_REG_NEW
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.id
op_assign
(paren
id|byte
)paren
id|id
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbg_end
op_assign
id|DI_deregister
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbg_prt
op_assign
id|DI_format_locked
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbg_ev
op_assign
id|DiProcessEventLog
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbg_irq
op_assign
id|DI_format_locked
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.next
op_assign
(paren
id|pDbgHandle
)paren
id|DBG_MAGIC
suffix:semicolon
(brace
id|diva_trace_library_user_interface_t
id|diva_maint_user_ifc
op_assign
(brace
op_amp
id|clients
(braket
id|id
)braket
comma
id|diva_maint_state_change_notify
comma
id|diva_maint_trace_notify
comma
id|diva_maint_error
)brace
suffix:semicolon
multiline_comment|/*&n;      Attach to adapter management interface&n;      */
r_if
c_cond
(paren
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
op_assign
id|DivaSTraceLibraryCreateInstance
(paren
(paren
r_int
)paren
id|logical
comma
op_amp
id|diva_maint_user_ifc
comma
id|pmem
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryStart
)paren
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;hLib
)paren
)paren
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
l_int|0
comma
id|DLI_ERR
comma
l_string|&quot;Adapter(%d) Start failed&quot;
comma
(paren
r_int
)paren
id|logical
)paren
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryFinit
)paren
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
r_else
(brace
id|diva_mnt_internal_dprintf
(paren
l_int|0
comma
id|DLI_ERR
comma
l_string|&quot;A(%d) management init failed&quot;
comma
(paren
r_int
)paren
id|logical
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
)paren
(brace
id|clients
(braket
id|id
)braket
dot
id|request
op_assign
l_int|NULL
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|hDbg
op_assign
l_int|NULL
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_os_free
(paren
l_int|0
comma
id|pmem
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/*&n;    Log driver register, MAINT driver ID is &squot;0&squot;&n;    */
id|len
op_assign
id|sprintf
(paren
id|tmp
comma
l_string|&quot;DIMAINT - drv # %d = &squot;%s&squot; registered&quot;
comma
id|id
comma
id|clients
(braket
id|id
)braket
dot
id|Dbg.drvName
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
(paren
id|len
op_plus
l_int|1
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_STRING
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|DLI_REG
suffix:semicolon
id|pmsg-&gt;drv_id
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* id 0 - DIMAINT */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|len
op_plus
l_int|1
suffix:semicolon
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|tmp
comma
id|len
op_plus
l_int|1
)paren
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
id|org_mask
op_assign
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbgMask
suffix:semicolon
id|clients
(braket
id|id
)braket
dot
id|Dbg.dbgMask
op_assign
l_int|0
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|id
)braket
dot
id|request_pending
)paren
(brace
id|clients
(braket
id|id
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|request
)paren
)paren
(paren
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib-&gt;hLib
)paren
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;register&quot;
)paren
suffix:semicolon
id|diva_set_driver_dbg_mask
(paren
id|id
comma
id|org_mask
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  De-Register XDI adapter&n;  */
DECL|function|diva_mnt_remove_xdi_adapter
r_void
id|diva_mnt_remove_xdi_adapter
(paren
r_const
id|DESCRIPTOR
op_star
id|d
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
id|dword
id|sec
comma
id|usec
suffix:semicolon
r_int
id|i
suffix:semicolon
id|word
id|size
suffix:semicolon
id|byte
op_star
id|pmem
op_assign
l_int|NULL
suffix:semicolon
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;read&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
(paren
id|clients
(braket
id|i
)braket
dot
id|request
op_eq
id|d-&gt;request
)paren
)paren
(brace
id|diva_dbg_entry_head_t
op_star
id|pmsg
suffix:semicolon
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
r_int
id|len
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
)paren
(brace
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryFinit
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_assign
l_int|NULL
suffix:semicolon
id|pmem
op_assign
id|clients
(braket
id|i
)braket
dot
id|pmem
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pmem
op_assign
l_int|NULL
suffix:semicolon
)brace
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_assign
l_int|NULL
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_ge
l_int|0
)paren
(brace
multiline_comment|/*&n;          Free DMA handle&n;          */
id|diva_free_dma_descriptor
(paren
id|clients
(braket
id|i
)braket
dot
id|request
comma
id|clients
(braket
id|i
)braket
dot
id|dma_handle
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|clients
(braket
id|i
)braket
dot
id|request
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/*&n;        Log driver register, MAINT driver ID is &squot;0&squot;&n;        */
id|len
op_assign
id|sprintf
(paren
id|tmp
comma
l_string|&quot;DIMAINT - drv # %d = &squot;%s&squot; de-registered&quot;
comma
id|i
comma
id|clients
(braket
id|i
)braket
dot
id|Dbg.drvName
)paren
suffix:semicolon
id|memset
(paren
op_amp
id|clients
(braket
id|i
)braket
dot
id|Dbg
comma
l_int|0x00
comma
r_sizeof
(paren
id|clients
(braket
id|i
)braket
dot
id|Dbg
)paren
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
(paren
id|len
op_plus
l_int|1
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_STRING
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|DLI_REG
suffix:semicolon
id|pmsg-&gt;drv_id
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* id 0 - DIMAINT */
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|len
op_plus
l_int|1
suffix:semicolon
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|tmp
comma
id|len
op_plus
l_int|1
)paren
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read_ack&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;read_ack&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pmem
)paren
(brace
id|diva_os_free
(paren
l_int|0
comma
id|pmem
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* ----------------------------------------------------------------&n;     Low level interface for management interface client&n;   ---------------------------------------------------------------- */
multiline_comment|/*&n;  Return handle to client structure&n;  */
DECL|function|SuperTraceOpenAdapter
r_void
op_star
id|SuperTraceOpenAdapter
(paren
r_int
id|AdapterNumber
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request
op_logical_and
(paren
id|clients
(braket
id|i
)braket
dot
id|logical
op_eq
id|AdapterNumber
)paren
)paren
(brace
r_return
(paren
op_amp
id|clients
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|SuperTraceCloseAdapter
r_int
id|SuperTraceCloseAdapter
(paren
r_void
op_star
id|AdapterHandle
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceReadRequest
r_int
id|SuperTraceReadRequest
(paren
r_void
op_star
id|AdapterHandle
comma
r_const
r_char
op_star
id|name
comma
id|byte
op_star
id|data
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|byte
op_star
id|xdata
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
r_char
id|tmp
op_assign
l_int|0
suffix:semicolon
id|word
id|length
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|name
comma
l_string|&quot;&bslash;&bslash;&quot;
)paren
)paren
(brace
multiline_comment|/* Read ROOT */
id|name
op_assign
op_amp
id|tmp
suffix:semicolon
)brace
id|length
op_assign
id|SuperTraceCreateReadReq
(paren
id|xdata
comma
id|name
)paren
suffix:semicolon
id|single_p
(paren
id|xdata
comma
op_amp
id|length
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* End Of Message */
id|e-&gt;Req
op_assign
id|MAN_READ
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
id|length
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
id|xdata
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceGetNumberOfChannels
r_int
id|SuperTraceGetNumberOfChannels
(paren
r_void
op_star
id|AdapterHandle
)paren
(brace
r_if
c_cond
(paren
id|AdapterHandle
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_return
(paren
id|pC-&gt;channels
)paren
suffix:semicolon
)brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceASSIGN
r_int
id|SuperTraceASSIGN
(paren
r_void
op_star
id|AdapterHandle
comma
id|byte
op_star
id|data
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|IDI_SYNC_REQ
op_star
id|preq
suffix:semicolon
r_char
id|buffer
(braket
(paren
(paren
r_sizeof
(paren
id|preq-&gt;xdi_extended_features
)paren
op_plus
l_int|4
)paren
OG
r_sizeof
(paren
id|ENTITY
)paren
)paren
ques
c_cond
(paren
r_sizeof
(paren
id|preq-&gt;xdi_extended_features
)paren
op_plus
l_int|4
)paren
suffix:colon
r_sizeof
(paren
id|ENTITY
)paren
)braket
suffix:semicolon
r_char
id|features
(braket
l_int|4
)braket
suffix:semicolon
id|word
id|assign_data_length
op_assign
l_int|1
suffix:semicolon
id|features
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|preq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
id|preq-&gt;xdi_extended_features.Req
op_assign
l_int|0
suffix:semicolon
id|preq-&gt;xdi_extended_features.Rc
op_assign
id|IDI_SYNC_REQ_XDI_GET_EXTENDED_FEATURES
suffix:semicolon
id|preq-&gt;xdi_extended_features.info.buffer_length_in_bytes
op_assign
r_sizeof
(paren
id|features
)paren
suffix:semicolon
id|preq-&gt;xdi_extended_features.info.features
op_assign
op_amp
id|features
(braket
l_int|0
)braket
suffix:semicolon
(paren
op_star
(paren
id|pC-&gt;request
)paren
)paren
(paren
(paren
id|ENTITY
op_star
)paren
id|preq
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURES_VALID
)paren
op_logical_and
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURE_MANAGEMENT_DMA
)paren
)paren
(brace
id|dword
id|rx_dma_magic
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pC-&gt;dma_handle
op_assign
id|diva_get_dma_descriptor
(paren
id|pC-&gt;request
comma
op_amp
id|rx_dma_magic
)paren
)paren
op_ge
l_int|0
)paren
(brace
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
op_assign
id|LLI
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|1
)braket
op_assign
l_int|8
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|2
)braket
op_assign
l_int|0x40
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
id|pC-&gt;dma_handle
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|4
)braket
op_assign
(paren
id|byte
)paren
id|rx_dma_magic
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|5
)braket
op_assign
(paren
id|byte
)paren
(paren
id|rx_dma_magic
op_rshift
l_int|8
)paren
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|6
)braket
op_assign
(paren
id|byte
)paren
(paren
id|rx_dma_magic
op_rshift
l_int|16
)paren
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|7
)braket
op_assign
(paren
id|byte
)paren
(paren
id|rx_dma_magic
op_rshift
l_int|24
)paren
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|8
)braket
op_assign
(paren
id|byte
)paren
id|DIVA_MAX_MANAGEMENT_TRANSFER_SIZE
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|9
)braket
op_assign
(paren
id|byte
)paren
(paren
id|DIVA_MAX_MANAGEMENT_TRANSFER_SIZE
op_rshift
l_int|8
)paren
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|10
)braket
op_assign
l_int|0
suffix:semicolon
id|assign_data_length
op_assign
l_int|11
suffix:semicolon
)brace
)brace
r_else
(brace
id|pC-&gt;dma_handle
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|e-&gt;Id
op_assign
id|MAN_ID
suffix:semicolon
id|e-&gt;callback
op_assign
id|diva_maint_xdi_cb
suffix:semicolon
id|e-&gt;XNum
op_assign
l_int|1
suffix:semicolon
id|e-&gt;X
op_assign
op_amp
id|pC-&gt;XData
suffix:semicolon
id|e-&gt;Req
op_assign
id|ASSIGN
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
id|assign_data_length
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceREMOVE
r_int
id|SuperTraceREMOVE
(paren
r_void
op_star
id|AdapterHandle
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|e-&gt;XNum
op_assign
l_int|1
suffix:semicolon
id|e-&gt;X
op_assign
op_amp
id|pC-&gt;XData
suffix:semicolon
id|e-&gt;Req
op_assign
id|REMOVE
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
l_int|1
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceTraceOnRequest
r_int
id|SuperTraceTraceOnRequest
c_func
(paren
r_void
op_star
id|hAdapter
comma
r_const
r_char
op_star
id|name
comma
id|byte
op_star
id|data
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|hAdapter
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|byte
op_star
id|xdata
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
r_char
id|tmp
op_assign
l_int|0
suffix:semicolon
id|word
id|length
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|name
comma
l_string|&quot;&bslash;&bslash;&quot;
)paren
)paren
(brace
multiline_comment|/* Read ROOT */
id|name
op_assign
op_amp
id|tmp
suffix:semicolon
)brace
id|length
op_assign
id|SuperTraceCreateReadReq
(paren
id|xdata
comma
id|name
)paren
suffix:semicolon
id|single_p
(paren
id|xdata
comma
op_amp
id|length
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* End Of Message */
id|e-&gt;Req
op_assign
id|MAN_EVENT_ON
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
id|length
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
id|xdata
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceWriteVar
r_int
id|SuperTraceWriteVar
(paren
r_void
op_star
id|AdapterHandle
comma
id|byte
op_star
id|data
comma
r_const
r_char
op_star
id|name
comma
r_void
op_star
id|var
comma
id|byte
id|type
comma
id|byte
id|var_length
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|diva_man_var_header_t
op_star
id|pVar
op_assign
(paren
id|diva_man_var_header_t
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
id|word
id|length
op_assign
id|SuperTraceCreateReadReq
(paren
(paren
id|byte
op_star
)paren
id|pVar
comma
id|name
)paren
suffix:semicolon
id|memcpy
(paren
op_amp
id|pC-&gt;xbuffer
(braket
id|length
)braket
comma
id|var
comma
id|var_length
)paren
suffix:semicolon
id|length
op_add_assign
id|var_length
suffix:semicolon
id|pVar-&gt;length
op_add_assign
id|var_length
suffix:semicolon
id|pVar-&gt;value_length
op_assign
id|var_length
suffix:semicolon
id|pVar-&gt;type
op_assign
id|type
suffix:semicolon
id|single_p
(paren
(paren
id|byte
op_star
)paren
id|pVar
comma
op_amp
id|length
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* End Of Message */
id|e-&gt;Req
op_assign
id|MAN_WRITE
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
id|length
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
id|pVar
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceExecuteRequest
r_int
id|SuperTraceExecuteRequest
(paren
r_void
op_star
id|AdapterHandle
comma
r_const
r_char
op_star
id|name
comma
id|byte
op_star
id|data
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|AdapterHandle
suffix:semicolon
r_if
c_cond
(paren
id|pC
op_logical_and
id|pC-&gt;pIdiLib
op_logical_and
id|pC-&gt;request
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|pC-&gt;pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|byte
op_star
id|xdata
op_assign
(paren
id|byte
op_star
)paren
op_amp
id|pC-&gt;xbuffer
(braket
l_int|0
)braket
suffix:semicolon
id|word
id|length
suffix:semicolon
id|length
op_assign
id|SuperTraceCreateReadReq
(paren
id|xdata
comma
id|name
)paren
suffix:semicolon
id|single_p
(paren
id|xdata
comma
op_amp
id|length
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* End Of Message */
id|e-&gt;Req
op_assign
id|MAN_EXECUTE
suffix:semicolon
id|e-&gt;ReqCh
op_assign
l_int|0
suffix:semicolon
id|e-&gt;X-&gt;PLength
op_assign
id|length
suffix:semicolon
id|e-&gt;X-&gt;P
op_assign
(paren
id|byte
op_star
)paren
id|xdata
suffix:semicolon
id|pC-&gt;request_pending
op_assign
l_int|1
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|SuperTraceCreateReadReq
r_static
id|word
id|SuperTraceCreateReadReq
(paren
id|byte
op_star
id|P
comma
r_const
r_char
op_star
id|path
)paren
(brace
id|byte
id|var_length
suffix:semicolon
id|byte
op_star
id|plen
suffix:semicolon
id|var_length
op_assign
(paren
id|byte
)paren
id|strlen
(paren
id|path
)paren
suffix:semicolon
op_star
id|P
op_increment
op_assign
id|ESC
suffix:semicolon
id|plen
op_assign
id|P
op_increment
suffix:semicolon
op_star
id|P
op_increment
op_assign
l_int|0x80
suffix:semicolon
multiline_comment|/* MAN_IE */
op_star
id|P
op_increment
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Type */
op_star
id|P
op_increment
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Attribute */
op_star
id|P
op_increment
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Status */
op_star
id|P
op_increment
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/* Variable Length */
op_star
id|P
op_increment
op_assign
id|var_length
suffix:semicolon
id|memcpy
(paren
id|P
comma
id|path
comma
id|var_length
)paren
suffix:semicolon
id|P
op_add_assign
id|var_length
suffix:semicolon
op_star
id|plen
op_assign
id|var_length
op_plus
l_int|0x06
suffix:semicolon
r_return
(paren
(paren
id|word
)paren
(paren
id|var_length
op_plus
l_int|0x08
)paren
)paren
suffix:semicolon
)brace
DECL|function|single_p
r_static
r_void
id|single_p
(paren
id|byte
op_star
id|P
comma
id|word
op_star
id|PLength
comma
id|byte
id|Id
)paren
(brace
id|P
(braket
(paren
op_star
id|PLength
)paren
op_increment
)braket
op_assign
id|Id
suffix:semicolon
)brace
DECL|function|diva_maint_xdi_cb
r_static
r_void
id|diva_maint_xdi_cb
(paren
id|ENTITY
op_star
id|e
)paren
(brace
id|diva_strace_context_t
op_star
id|pLib
op_assign
id|DIVAS_CONTAINING_RECORD
c_func
(paren
id|e
comma
id|diva_strace_context_t
comma
id|e
)paren
suffix:semicolon
id|diva_maint_client_t
op_star
id|pC
suffix:semicolon
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;xdi_cb&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;xdi_cb&quot;
)paren
suffix:semicolon
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|pLib-&gt;hAdapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|e-&gt;complete
op_eq
l_int|255
)paren
op_logical_or
(paren
id|pC-&gt;dma_handle
OL
l_int|0
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
(paren
id|pLib-&gt;instance.DivaSTraceMessageInput
)paren
)paren
(paren
op_amp
id|pLib-&gt;instance
)paren
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
l_int|0
comma
id|DLI_ERR
comma
l_string|&quot;Trace internal library error&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/*&n;      Process combined management interface indication&n;      */
r_if
c_cond
(paren
(paren
op_star
(paren
id|pLib-&gt;instance.DivaSTraceMessageInput
)paren
)paren
(paren
op_amp
id|pLib-&gt;instance
)paren
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
l_int|0
comma
id|DLI_ERR
comma
l_string|&quot;Trace internal library error (DMA mode)&quot;
)paren
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;xdi_cb&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pC-&gt;request_pending
)paren
(brace
id|pC-&gt;request_pending
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|pC-&gt;request
)paren
)paren
(paren
id|e
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;xdi_cb&quot;
)paren
suffix:semicolon
)brace
DECL|function|diva_maint_error
r_static
r_void
id|diva_maint_error
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
r_int
id|error
comma
r_const
r_char
op_star
id|file
comma
r_int
id|line
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
l_int|0
comma
id|DLI_ERR
comma
l_string|&quot;Trace library error(%d) A(%d) %s %d&quot;
comma
id|error
comma
id|Adapter
comma
id|file
comma
id|line
)paren
suffix:semicolon
)brace
DECL|function|print_ie
r_static
r_void
id|print_ie
(paren
id|diva_trace_ie_t
op_star
id|ie
comma
r_char
op_star
id|buffer
comma
r_int
id|length
)paren
(brace
r_int
id|i
suffix:semicolon
id|buffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|length
OG
l_int|32
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
(paren
(paren
id|i
OL
id|ie-&gt;length
)paren
op_logical_and
(paren
id|length
OG
l_int|3
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|sprintf
(paren
id|buffer
comma
l_string|&quot;%02x&quot;
comma
id|ie-&gt;data
(braket
id|i
)braket
)paren
suffix:semicolon
id|buffer
op_add_assign
l_int|2
suffix:semicolon
id|length
op_sub_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|i
OL
(paren
id|ie-&gt;length
op_minus
l_int|1
)paren
)paren
(brace
id|strcpy
(paren
id|buffer
comma
l_string|&quot; &quot;
)paren
suffix:semicolon
id|buffer
op_increment
suffix:semicolon
id|length
op_decrement
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|function|diva_maint_state_change_notify
r_static
r_void
id|diva_maint_state_change_notify
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
id|diva_trace_line_state_t
op_star
id|channel
comma
r_int
id|notify_subject
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|user_context
suffix:semicolon
id|diva_trace_fax_state_t
op_star
id|fax
op_assign
op_amp
id|channel-&gt;fax
suffix:semicolon
id|diva_trace_modem_state_t
op_star
id|modem
op_assign
op_amp
id|channel-&gt;modem
suffix:semicolon
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pC-&gt;hDbg
)paren
(brace
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|notify_subject
)paren
(brace
r_case
id|DIVA_SUPER_TRACE_NOTIFY_LINE_CHANGE
suffix:colon
(brace
r_int
id|view
op_assign
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
suffix:semicolon
multiline_comment|/*&n;        Process selective Trace&n;        */
r_if
c_cond
(paren
id|channel-&gt;Line
(braket
l_int|0
)braket
op_eq
l_char|&squot;I&squot;
op_logical_and
id|channel-&gt;Line
(braket
l_int|1
)braket
op_eq
l_char|&squot;d&squot;
op_logical_and
id|channel-&gt;Line
(braket
l_int|2
)braket
op_eq
l_char|&squot;l&squot;
op_logical_and
id|channel-&gt;Line
(braket
l_int|3
)braket
op_eq
l_char|&squot;e&squot;
)paren
(brace
r_if
c_cond
(paren
(paren
id|TraceFilterIdent
op_eq
id|pC-&gt;hDbg-&gt;id
)paren
op_logical_and
(paren
id|TraceFilterChannel
op_eq
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
)paren
)paren
(brace
(paren
op_star
(paren
id|hLib-&gt;DivaSTraceSetBChannel
)paren
)paren
(paren
id|hLib
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
comma
l_int|0
)paren
suffix:semicolon
(paren
op_star
(paren
id|hLib-&gt;DivaSTraceSetAudioTap
)paren
)paren
(paren
id|hLib
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
comma
l_int|0
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Selective Trace OFF for Ch=%d&quot;
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
)paren
suffix:semicolon
id|TraceFilterIdent
op_assign
op_minus
l_int|1
suffix:semicolon
id|TraceFilterChannel
op_assign
op_minus
l_int|1
suffix:semicolon
id|view
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_logical_and
(paren
id|TraceFilterIdent
OL
l_int|0
)paren
op_logical_and
op_logical_neg
(paren
id|diva_mnt_cmp_nmbr
(paren
op_amp
id|channel-&gt;RemoteAddress
(braket
l_int|0
)braket
)paren
op_logical_and
id|diva_mnt_cmp_nmbr
(paren
op_amp
id|channel-&gt;LocalAddress
(braket
l_int|0
)braket
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_BCHANNEL
)paren
op_ne
l_int|0
)paren
(brace
multiline_comment|/* Activate B-channel trace */
(paren
op_star
(paren
id|hLib-&gt;DivaSTraceSetBChannel
)paren
)paren
(paren
id|hLib
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
comma
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_AUDIO
)paren
op_ne
l_int|0
)paren
(brace
multiline_comment|/* Activate AudioTap Trace */
(paren
op_star
(paren
id|hLib-&gt;DivaSTraceSetAudioTap
)paren
)paren
(paren
id|hLib
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
comma
l_int|1
)paren
suffix:semicolon
)brace
id|TraceFilterIdent
op_assign
id|pC-&gt;hDbg-&gt;id
suffix:semicolon
id|TraceFilterChannel
op_assign
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
suffix:semicolon
r_if
c_cond
(paren
id|TraceFilterIdent
op_ge
l_int|0
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Selective Trace ON for Ch=%d&quot;
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
)paren
suffix:semicolon
id|view
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|view
op_logical_and
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_LINE_EVENTS
)paren
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Ch     = %d&quot;
comma
(paren
r_int
)paren
id|channel-&gt;ChannelNumber
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Status = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;Line
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Layer1 = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;Framing
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Layer2 = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;Layer2
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Layer3 = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;Layer3
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L RAddr  = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;RemoteAddress
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L RSAddr = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;RemoteSubAddress
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L LAddr  = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;LocalAddress
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L LSAddr = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;LocalSubAddress
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|print_ie
c_func
(paren
op_amp
id|channel-&gt;call_BC
comma
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L BC     = &lt;%s&gt;&quot;
comma
id|tmp
)paren
suffix:semicolon
id|print_ie
c_func
(paren
op_amp
id|channel-&gt;call_HLC
comma
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L HLC    = &lt;%s&gt;&quot;
comma
id|tmp
)paren
suffix:semicolon
id|print_ie
c_func
(paren
op_amp
id|channel-&gt;call_LLC
comma
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L LLC    = &lt;%s&gt;&quot;
comma
id|tmp
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L CR     = 0x%x&quot;
comma
id|channel-&gt;CallReference
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Disc   = 0x%x&quot;
comma
id|channel-&gt;LastDisconnecCause
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;L Owner  = &lt;%s&gt;&quot;
comma
op_amp
id|channel-&gt;UserID
(braket
l_int|0
)braket
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_NOTIFY_MODEM_CHANGE
suffix:colon
r_if
c_cond
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_MDM_PROGRESS
)paren
(brace
(brace
r_int
id|ch
op_assign
id|TraceFilterChannel
suffix:semicolon
r_int
id|id
op_assign
id|TraceFilterIdent
suffix:semicolon
r_if
c_cond
(paren
(paren
id|id
op_ge
l_int|0
)paren
op_logical_and
(paren
id|ch
op_ge
l_int|0
)paren
op_logical_and
(paren
id|id
OL
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|Dbg.id
op_eq
(paren
id|byte
)paren
id|id
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
op_eq
id|hLib
)paren
)paren
(brace
r_if
c_cond
(paren
id|ch
op_ne
(paren
r_int
)paren
id|modem-&gt;ChannelNumber
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_ne
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Ch    = %lu&quot;
comma
(paren
r_int
)paren
id|modem-&gt;ChannelNumber
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Event = %lu&quot;
comma
id|modem-&gt;Event
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Norm  = %lu&quot;
comma
id|modem-&gt;Norm
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Opts. = 0x%08x&quot;
comma
id|modem-&gt;Options
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Tx    = %lu Bps&quot;
comma
id|modem-&gt;TxSpeed
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Rx    = %lu Bps&quot;
comma
id|modem-&gt;RxSpeed
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM RT    = %lu mSec&quot;
comma
id|modem-&gt;RoundtripMsec
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Sr    = %lu&quot;
comma
id|modem-&gt;SymbolRate
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Rxl   = %d dBm&quot;
comma
id|modem-&gt;RxLeveldBm
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM El    = %d dBm&quot;
comma
id|modem-&gt;EchoLeveldBm
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM SNR   = %lu dB&quot;
comma
id|modem-&gt;SNRdb
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM MAE   = %lu&quot;
comma
id|modem-&gt;MAE
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM LRet  = %lu&quot;
comma
id|modem-&gt;LocalRetrains
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM RRet  = %lu&quot;
comma
id|modem-&gt;RemoteRetrains
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM LRes  = %lu&quot;
comma
id|modem-&gt;LocalResyncs
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM RRes  = %lu&quot;
comma
id|modem-&gt;RemoteResyncs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|modem-&gt;Event
op_eq
l_int|3
)paren
(brace
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;MDM Disc  =  %lu&quot;
comma
id|modem-&gt;DiscReason
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|modem-&gt;Event
op_eq
l_int|3
)paren
op_logical_and
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_MDM_STATISTICS
)paren
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetModemStatistics
)paren
)paren
(paren
id|pC-&gt;pIdiLib
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_NOTIFY_FAX_CHANGE
suffix:colon
r_if
c_cond
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_FAX_PROGRESS
)paren
(brace
(brace
r_int
id|ch
op_assign
id|TraceFilterChannel
suffix:semicolon
r_int
id|id
op_assign
id|TraceFilterIdent
suffix:semicolon
r_if
c_cond
(paren
(paren
id|id
op_ge
l_int|0
)paren
op_logical_and
(paren
id|ch
op_ge
l_int|0
)paren
op_logical_and
(paren
id|id
OL
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|Dbg.id
op_eq
(paren
id|byte
)paren
id|id
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
op_eq
id|hLib
)paren
)paren
(brace
r_if
c_cond
(paren
id|ch
op_ne
(paren
r_int
)paren
id|fax-&gt;ChannelNumber
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_ne
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Ch    = %lu&quot;
comma
(paren
r_int
)paren
id|fax-&gt;ChannelNumber
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Event = %lu&quot;
comma
id|fax-&gt;Event
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Pages = %lu&quot;
comma
id|fax-&gt;Page_Counter
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Feat. = 0x%08x&quot;
comma
id|fax-&gt;Features
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX ID    = &lt;%s&gt;&quot;
comma
op_amp
id|fax-&gt;Station_ID
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Saddr = &lt;%s&gt;&quot;
comma
op_amp
id|fax-&gt;Subaddress
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Pwd   = &lt;%s&gt;&quot;
comma
op_amp
id|fax-&gt;Password
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Speed = %lu&quot;
comma
id|fax-&gt;Speed
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Res.  = 0x%08x&quot;
comma
id|fax-&gt;Resolution
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Width = %lu&quot;
comma
id|fax-&gt;Paper_Width
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Length= %lu&quot;
comma
id|fax-&gt;Paper_Length
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX SLT   = %lu&quot;
comma
id|fax-&gt;Scanline_Time
)paren
suffix:semicolon
r_if
c_cond
(paren
id|fax-&gt;Event
op_eq
l_int|3
)paren
(brace
id|diva_mnt_internal_dprintf
c_func
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;FAX Disc  = %lu&quot;
comma
id|fax-&gt;Disc_Reason
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|fax-&gt;Event
op_eq
l_int|3
)paren
op_logical_and
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_FAX_STATISTICS
)paren
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceGetFaxStatistics
)paren
)paren
(paren
id|pC-&gt;pIdiLib
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_INTERFACE_CHANGE
suffix:colon
r_if
c_cond
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_EVENTS
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;Layer 1 -&gt; [%s]&quot;
comma
id|channel-&gt;pInterface-&gt;Layer1
)paren
suffix:semicolon
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_STAT
comma
l_string|&quot;Layer 2 -&gt; [%s]&quot;
comma
id|channel-&gt;pInterface-&gt;Layer2
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_NOTIFY_STAT_CHANGE
suffix:colon
r_if
c_cond
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_STATISTICS
)paren
(brace
multiline_comment|/*&n;          Incoming Statistics&n;          */
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Calls
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Calls                     =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Calls
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Connected
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Connected                 =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Connected
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.User_Busy
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Busy                      =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.User_Busy
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Call_Rejected
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Rejected                  =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Call_Rejected
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Wrong_Number
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Wrong Nr                  =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Wrong_Number
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Incompatible_Dst
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Incomp. Dest              =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Incompatible_Dst
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Out_of_Order
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Out of Order              =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Out_of_Order
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;inc.Ignored
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Inc Ignored                   =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;inc.Ignored
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;          Outgoing Statistics&n;          */
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.Calls
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Calls                    =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.Calls
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.Connected
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Connected                =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.Connected
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.User_Busy
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Busy                     =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.User_Busy
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.No_Answer
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg No Answer                =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.No_Answer
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.Wrong_Number
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Wrong Nr                 =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.Wrong_Number
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.Call_Rejected
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Rejected                 =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.Call_Rejected
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;outg.Other_Failures
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;Outg Other Failures           =%lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;outg.Other_Failures
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_NOTIFY_MDM_STAT_CHANGE
suffix:colon
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Normal
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Normal        = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Normal
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Unspecified
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Unsp.         = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Unspecified
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Busy_Tone
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Busy Tone     = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Busy_Tone
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Congestion
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Congestion    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Congestion
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Carr_Wait
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Carrier Wait  = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Carr_Wait
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Trn_Timeout
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Trn. T.o.     = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Trn_Timeout
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Incompat
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Incompatible  = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Incompat
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Frame_Rej
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc Frame Reject  = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_Frame_Rej
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_V42bis
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;MDM Disc V.42bis       = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;mdm.Disc_V42bis
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DIVA_SUPER_TRACE_NOTIFY_FAX_STAT_CHANGE
suffix:colon
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Normal
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Normal        = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Normal
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Not_Ident
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Not Ident.    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Not_Ident
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Response
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc No Response   = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Response
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Retries
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Max Retries   = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Retries
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unexp_Msg
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Unexp. Msg.        = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unexp_Msg
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Polling
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc No Polling    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Polling
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Training
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Training      = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Training
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unexpected
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Unexpected    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unexpected
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Application
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Application   = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Application
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Incompat
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Incompatible  = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Incompat
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Command
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc No Command    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_No_Command
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Long_Msg
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Long Msg.     = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Long_Msg
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Supervisor
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Supervisor    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Supervisor
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_SUB_SEP_PWD
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc SUP SEP PWD   = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_SUB_SEP_PWD
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Invalid_Msg
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Invalid Msg.  = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Invalid_Msg
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Page_Coding
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Page Coding   = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Page_Coding
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_App_Timeout
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Appl. T.o.    = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_App_Timeout
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unspecified
)paren
(brace
id|diva_mnt_internal_dprintf
(paren
id|pC-&gt;hDbg-&gt;id
comma
id|DLI_LOG
comma
l_string|&quot;FAX Disc Unspec.       = %lu&quot;
comma
id|channel-&gt;pInterfaceStat-&gt;fax.Disc_Unspecified
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;  Receive trace information from the Management Interface and store it in the&n;  internal trace buffer with MSG_TYPE_MLOG as is, without any filtering.&n;  Event Filtering and formatting is done in  Management Interface self.&n;  */
DECL|function|diva_maint_trace_notify
r_static
r_void
id|diva_maint_trace_notify
(paren
r_void
op_star
id|user_context
comma
id|diva_strace_library_interface_t
op_star
id|hLib
comma
r_int
id|Adapter
comma
r_void
op_star
id|xlog_buffer
comma
r_int
id|length
)paren
(brace
id|diva_maint_client_t
op_star
id|pC
op_assign
(paren
id|diva_maint_client_t
op_star
)paren
id|user_context
suffix:semicolon
id|diva_dbg_entry_head_t
op_star
id|pmsg
suffix:semicolon
id|word
id|size
suffix:semicolon
id|dword
id|sec
comma
id|usec
suffix:semicolon
r_int
id|ch
op_assign
id|TraceFilterChannel
suffix:semicolon
r_int
id|id
op_assign
id|TraceFilterIdent
suffix:semicolon
multiline_comment|/*&n;    Selective trace&n;    */
r_if
c_cond
(paren
(paren
id|id
op_ge
l_int|0
)paren
op_logical_and
(paren
id|ch
op_ge
l_int|0
)paren
op_logical_and
(paren
id|id
OL
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|Dbg.id
op_eq
(paren
id|byte
)paren
id|id
)paren
op_logical_and
(paren
id|clients
(braket
id|id
)braket
dot
id|pIdiLib
op_eq
id|hLib
)paren
)paren
(brace
r_const
r_char
op_star
id|p
op_assign
l_int|0
suffix:semicolon
r_int
id|ch_value
op_assign
op_minus
l_int|1
suffix:semicolon
id|MI_XLOG_HDR
op_star
id|TrcData
op_assign
(paren
id|MI_XLOG_HDR
op_star
)paren
id|xlog_buffer
suffix:semicolon
r_if
c_cond
(paren
id|Adapter
op_ne
id|clients
(braket
id|id
)braket
dot
id|logical
)paren
(brace
r_return
suffix:semicolon
multiline_comment|/* Ignore all trace messages from other adapters */
)brace
r_if
c_cond
(paren
id|TrcData-&gt;code
op_eq
l_int|24
)paren
(brace
id|p
op_assign
(paren
r_char
op_star
)paren
op_amp
id|TrcData-&gt;code
suffix:semicolon
id|p
op_add_assign
l_int|2
suffix:semicolon
)brace
multiline_comment|/*&n;      All L1 messages start as [dsp,ch], so we can filter this information&n;      and filter out all messages that use different channel&n;      */
r_if
c_cond
(paren
id|p
op_logical_and
id|p
(braket
l_int|0
)braket
op_eq
l_char|&squot;[&squot;
)paren
(brace
r_if
c_cond
(paren
id|p
(braket
l_int|2
)braket
op_eq
l_char|&squot;,&squot;
)paren
(brace
id|p
op_add_assign
l_int|3
suffix:semicolon
id|ch_value
op_assign
op_star
id|p
op_minus
l_char|&squot;0&squot;
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|p
(braket
l_int|3
)braket
op_eq
l_char|&squot;,&squot;
)paren
(brace
id|p
op_add_assign
l_int|4
suffix:semicolon
id|ch_value
op_assign
op_star
id|p
op_minus
l_char|&squot;0&squot;
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_value
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|p
(braket
l_int|2
)braket
op_eq
l_char|&squot;]&squot;
)paren
(brace
id|ch_value
op_assign
id|ch_value
op_star
l_int|10
op_plus
id|p
(braket
l_int|1
)braket
op_minus
l_char|&squot;0&squot;
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_value
op_ne
id|ch
)paren
(brace
r_return
suffix:semicolon
multiline_comment|/* Ignore other channels */
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_ne
l_int|0
)paren
(brace
r_return
suffix:semicolon
multiline_comment|/* Ignore trace if trace filter is activated, but idle */
)brace
id|diva_os_get_time
(paren
op_amp
id|sec
comma
op_amp
id|usec
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queueAllocMsg
(paren
id|dbg_queue
comma
(paren
id|word
)paren
id|length
op_plus
r_sizeof
(paren
op_star
id|pmsg
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pmsg
op_assign
(paren
id|diva_dbg_entry_head_t
op_star
)paren
id|queuePeekMsg
(paren
id|dbg_queue
comma
op_amp
id|size
)paren
)paren
)paren
(brace
id|queueFreeMsg
(paren
id|dbg_queue
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pmsg
)paren
(brace
id|memcpy
(paren
op_amp
id|pmsg
(braket
l_int|1
)braket
comma
id|xlog_buffer
comma
id|length
)paren
suffix:semicolon
id|pmsg-&gt;sequence
op_assign
id|dbg_sequence
op_increment
suffix:semicolon
id|pmsg-&gt;time_sec
op_assign
id|sec
suffix:semicolon
id|pmsg-&gt;time_usec
op_assign
id|usec
suffix:semicolon
id|pmsg-&gt;facility
op_assign
id|MSG_TYPE_MLOG
suffix:semicolon
id|pmsg-&gt;dli
op_assign
id|pC-&gt;logical
suffix:semicolon
id|pmsg-&gt;drv_id
op_assign
id|pC-&gt;hDbg-&gt;id
suffix:semicolon
id|pmsg-&gt;di_cpu
op_assign
l_int|0
suffix:semicolon
id|pmsg-&gt;data_length
op_assign
id|length
suffix:semicolon
id|queueCompleteMsg
(paren
id|pmsg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|queueCount
c_func
(paren
id|dbg_queue
)paren
)paren
(brace
id|diva_maint_wakeup_read
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n;  Convert MAINT trace mask to management interface trace mask/work/facility and&n;  issue command to management interface&n;  */
DECL|function|diva_change_management_debug_mask
r_static
r_void
id|diva_change_management_debug_mask
(paren
id|diva_maint_client_t
op_star
id|pC
comma
id|dword
id|old_mask
)paren
(brace
r_if
c_cond
(paren
id|pC-&gt;request
op_logical_and
id|pC-&gt;hDbg
op_logical_and
id|pC-&gt;pIdiLib
)paren
(brace
id|dword
id|changed
op_assign
id|pC-&gt;hDbg-&gt;dbgMask
op_xor
id|old_mask
suffix:semicolon
r_if
c_cond
(paren
id|changed
op_amp
id|DIVA_MGT_DBG_TRACE
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceSetInfo
)paren
)paren
(paren
id|pC-&gt;pIdiLib
comma
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_TRACE
)paren
op_ne
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|changed
op_amp
id|DIVA_MGT_DBG_DCHAN
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceSetDChannel
)paren
)paren
(paren
id|pC-&gt;pIdiLib
comma
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_DCHAN
)paren
op_ne
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|TraceFilter
(braket
l_int|0
)braket
)paren
(brace
r_if
c_cond
(paren
id|changed
op_amp
id|DIVA_MGT_DBG_IFC_BCHANNEL
)paren
(brace
r_int
id|i
comma
id|state
op_assign
(paren
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_BCHANNEL
)paren
op_ne
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|pC-&gt;channels
suffix:semicolon
id|i
op_increment
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceSetBChannel
)paren
)paren
(paren
id|pC-&gt;pIdiLib
comma
id|i
op_plus
l_int|1
comma
id|state
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|changed
op_amp
id|DIVA_MGT_DBG_IFC_AUDIO
)paren
(brace
r_int
id|i
comma
id|state
op_assign
(paren
(paren
id|pC-&gt;hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_AUDIO
)paren
op_ne
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|pC-&gt;channels
suffix:semicolon
id|i
op_increment
)paren
(brace
(paren
op_star
(paren
id|pC-&gt;pIdiLib-&gt;DivaSTraceSetAudioTap
)paren
)paren
(paren
id|pC-&gt;pIdiLib
comma
id|i
op_plus
l_int|1
comma
id|state
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
DECL|function|diva_mnt_internal_dprintf
r_void
id|diva_mnt_internal_dprintf
(paren
id|dword
id|drv_id
comma
id|dword
id|type
comma
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
(brace
id|va_list
id|ap
suffix:semicolon
id|va_start
c_func
(paren
id|ap
comma
id|fmt
)paren
suffix:semicolon
id|DI_format
(paren
l_int|0
comma
(paren
id|word
)paren
id|drv_id
comma
(paren
r_int
)paren
id|type
comma
id|fmt
comma
id|ap
)paren
suffix:semicolon
id|va_end
c_func
(paren
id|ap
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  Shutdown all adapters before driver removal&n;  */
DECL|function|diva_mnt_shutdown_xdi_adapters
r_int
id|diva_mnt_shutdown_xdi_adapters
(paren
r_void
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
r_int
id|i
comma
id|fret
op_assign
l_int|0
suffix:semicolon
id|byte
op_star
id|pmem
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pmem
op_assign
l_int|NULL
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;unload&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;unload&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request
)paren
(brace
r_if
c_cond
(paren
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryStop
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
)paren
op_eq
l_int|1
)paren
(brace
multiline_comment|/*&n;          Adapter removal complete&n;          */
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
)paren
(brace
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceLibraryFinit
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_assign
l_int|NULL
suffix:semicolon
id|pmem
op_assign
id|clients
(braket
id|i
)braket
dot
id|pmem
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|pmem
op_assign
l_int|NULL
suffix:semicolon
)brace
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_assign
l_int|NULL
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_ge
l_int|0
)paren
(brace
multiline_comment|/*&n;            Free DMA handle&n;            */
id|diva_free_dma_descriptor
(paren
id|clients
(braket
id|i
)braket
dot
id|request
comma
id|clients
(braket
id|i
)braket
dot
id|dma_handle
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|clients
(braket
id|i
)braket
dot
id|request
op_assign
l_int|NULL
suffix:semicolon
)brace
r_else
(brace
id|fret
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;unload&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request_pending
)paren
(brace
id|clients
(braket
id|i
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|request
)paren
)paren
(paren
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_ge
l_int|0
)paren
(brace
id|diva_free_dma_descriptor
(paren
id|clients
(braket
id|i
)braket
dot
id|request
comma
id|clients
(braket
id|i
)braket
dot
id|dma_handle
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|dma_handle
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;unload&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pmem
)paren
(brace
id|diva_os_free
(paren
l_int|0
comma
id|pmem
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
id|fret
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  Set/Read the trace filter used for selective tracing.&n;  Affects B- and Audio Tap trace mask at run time&n;  */
DECL|function|diva_set_trace_filter
r_int
id|diva_set_trace_filter
(paren
r_int
id|filter_length
comma
r_const
r_char
op_star
id|filter
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
comma
id|old_irql1
suffix:semicolon
r_int
id|i
comma
id|ch
comma
id|on
comma
id|client_b_on
comma
id|client_atap_on
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;write_filter&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|filter_length
op_le
id|DIVA_MAX_SELECTIVE_FILTER_LENGTH
)paren
(brace
id|memcpy
(paren
op_amp
id|TraceFilter
(braket
l_int|0
)braket
comma
id|filter
comma
id|filter_length
)paren
suffix:semicolon
r_if
c_cond
(paren
id|TraceFilter
(braket
id|filter_length
)braket
)paren
(brace
id|TraceFilter
(braket
id|filter_length
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_eq
l_char|&squot;*&squot;
)paren
(brace
id|TraceFilter
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
id|filter_length
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|TraceFilterIdent
op_assign
op_minus
l_int|1
suffix:semicolon
id|TraceFilterChannel
op_assign
op_minus
l_int|1
suffix:semicolon
id|on
op_assign
(paren
id|TraceFilter
(braket
l_int|0
)braket
op_eq
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request
)paren
(brace
id|client_b_on
op_assign
id|on
op_logical_and
(paren
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_BCHANNEL
)paren
op_ne
l_int|0
)paren
suffix:semicolon
id|client_atap_on
op_assign
id|on
op_logical_and
(paren
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg-&gt;dbgMask
op_amp
id|DIVA_MGT_DBG_IFC_AUDIO
)paren
op_ne
l_int|0
)paren
suffix:semicolon
r_for
c_loop
(paren
id|ch
op_assign
l_int|0
suffix:semicolon
id|ch
OL
id|clients
(braket
id|i
)braket
dot
id|channels
suffix:semicolon
id|ch
op_increment
)paren
(brace
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceSetBChannel
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
comma
id|ch
op_plus
l_int|1
comma
id|client_b_on
)paren
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceSetAudioTap
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
comma
id|ch
op_plus
l_int|1
comma
id|client_atap_on
)paren
suffix:semicolon
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|clients
)paren
op_div
r_sizeof
(paren
id|clients
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|clients
(braket
id|i
)braket
dot
id|hDbg
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|pIdiLib
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request
op_logical_and
id|clients
(braket
id|i
)braket
dot
id|request_pending
)paren
(brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;write_filter&quot;
)paren
suffix:semicolon
id|clients
(braket
id|i
)braket
dot
id|request_pending
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|request
)paren
)paren
(paren
(paren
id|ENTITY
op_star
)paren
(paren
op_star
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;DivaSTraceGetHandle
)paren
)paren
(paren
id|clients
(braket
id|i
)braket
dot
id|pIdiLib-&gt;hLib
)paren
)paren
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;write_filter&quot;
)paren
suffix:semicolon
)brace
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;write_filter&quot;
)paren
suffix:semicolon
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_adapter_lock
comma
op_amp
id|old_irql1
comma
l_string|&quot;dbg mask&quot;
)paren
suffix:semicolon
r_return
(paren
id|filter_length
)paren
suffix:semicolon
)brace
DECL|function|diva_get_trace_filter
r_int
id|diva_get_trace_filter
(paren
r_int
id|max_length
comma
r_char
op_star
id|filter
)paren
(brace
id|diva_os_spin_lock_magic_t
id|old_irql
suffix:semicolon
r_int
id|len
suffix:semicolon
id|diva_os_enter_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read_filter&quot;
)paren
suffix:semicolon
id|len
op_assign
id|strlen
(paren
op_amp
id|TraceFilter
(braket
l_int|0
)braket
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|max_length
op_ge
id|len
)paren
(brace
id|memcpy
(paren
id|filter
comma
op_amp
id|TraceFilter
(braket
l_int|0
)braket
comma
id|len
)paren
suffix:semicolon
)brace
id|diva_os_leave_spin_lock
(paren
op_amp
id|dbg_q_lock
comma
op_amp
id|old_irql
comma
l_string|&quot;read_filter&quot;
)paren
suffix:semicolon
r_return
(paren
id|len
)paren
suffix:semicolon
)brace
DECL|function|diva_dbg_cmp_key
r_static
r_int
id|diva_dbg_cmp_key
(paren
r_const
r_char
op_star
id|ref
comma
r_const
r_char
op_star
id|key
)paren
(brace
r_while
c_loop
(paren
op_star
id|key
op_logical_and
(paren
op_star
id|ref
op_increment
op_eq
op_star
id|key
op_increment
)paren
)paren
suffix:semicolon
r_return
(paren
op_logical_neg
op_star
id|key
op_logical_and
op_logical_neg
op_star
id|ref
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;  In case trace filter starts with &quot;C&quot; character then&n;  all following characters are interpreted as command.&n;  Followings commands are available:&n;  - single, trace single call at time, independent from CPN/CiPN&n;  */
DECL|function|diva_mnt_cmp_nmbr
r_static
r_int
id|diva_mnt_cmp_nmbr
(paren
r_const
r_char
op_star
id|nmbr
)paren
(brace
r_const
r_char
op_star
id|ref
op_assign
op_amp
id|TraceFilter
(braket
l_int|0
)braket
suffix:semicolon
r_int
id|ref_len
op_assign
id|strlen
c_func
(paren
op_amp
id|TraceFilter
(braket
l_int|0
)braket
)paren
comma
id|nmbr_len
op_assign
id|strlen
c_func
(paren
id|nmbr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ref
(braket
l_int|0
)braket
op_eq
l_char|&squot;C&squot;
)paren
(brace
r_if
c_cond
(paren
id|diva_dbg_cmp_key
(paren
op_amp
id|ref
(braket
l_int|1
)braket
comma
l_string|&quot;single&quot;
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|ref_len
op_logical_or
(paren
id|ref_len
OG
id|nmbr_len
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|nmbr
op_assign
id|nmbr
op_plus
id|nmbr_len
op_minus
l_int|1
suffix:semicolon
id|ref
op_assign
id|ref
op_plus
id|ref_len
op_minus
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|ref_len
op_decrement
)paren
(brace
r_if
c_cond
(paren
op_star
id|nmbr
op_decrement
op_ne
op_star
id|ref
op_decrement
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|diva_get_dma_descriptor
r_static
r_int
id|diva_get_dma_descriptor
(paren
id|IDI_CALL
id|request
comma
id|dword
op_star
id|dma_magic
)paren
(brace
id|ENTITY
id|e
suffix:semicolon
id|IDI_SYNC_REQ
op_star
id|pReq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|e
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|pReq-&gt;xdi_dma_descriptor_operation.Req
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.Rc
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_OPERATION
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_ALLOC
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_assign
op_minus
l_int|1
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_address
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
op_assign
l_int|0
suffix:semicolon
(paren
op_star
id|request
)paren
(paren
(paren
id|ENTITY
op_star
)paren
id|pReq
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_logical_and
(paren
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_ge
l_int|0
)paren
op_logical_and
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
)paren
(brace
op_star
id|dma_magic
op_assign
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
suffix:semicolon
r_return
(paren
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
)paren
suffix:semicolon
)brace
r_else
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
DECL|function|diva_free_dma_descriptor
r_static
r_void
id|diva_free_dma_descriptor
(paren
id|IDI_CALL
id|request
comma
r_int
id|nr
)paren
(brace
id|ENTITY
id|e
suffix:semicolon
id|IDI_SYNC_REQ
op_star
id|pReq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|e
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request
op_logical_or
(paren
id|nr
OL
l_int|0
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|pReq-&gt;xdi_dma_descriptor_operation.Req
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.Rc
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_OPERATION
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_FREE
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_assign
id|nr
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_address
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
op_assign
l_int|0
suffix:semicolon
(paren
op_star
id|request
)paren
(paren
(paren
id|ENTITY
op_star
)paren
id|pReq
)paren
suffix:semicolon
)brace
eof
