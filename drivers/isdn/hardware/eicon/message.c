multiline_comment|/*&n; *&n;  Copyright (c) Eicon Networks, 2002.&n; *&n;  This source file is supplied for the use with&n;  Eicon Networks range of DIVA Server Adapters.&n; *&n;  Eicon File Revision :    2.1&n; *&n;  This program is free software; you can redistribute it and/or modify&n;  it under the terms of the GNU General Public License as published by&n;  the Free Software Foundation; either version 2, or (at your option)&n;  any later version.&n; *&n;  This program is distributed in the hope that it will be useful,&n;  but WITHOUT ANY WARRANTY OF ANY KIND WHATSOEVER INCLUDING ANY&n;  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&n;  See the GNU General Public License for more details.&n; *&n;  You should have received a copy of the GNU General Public License&n;  along with this program; if not, write to the Free Software&n;  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; *&n; */
macro_line|#include &quot;platform.h&quot;
macro_line|#include &quot;di_defs.h&quot;
macro_line|#include &quot;pc.h&quot;
macro_line|#include &quot;capi20.h&quot;
macro_line|#include &quot;divacapi.h&quot;
macro_line|#include &quot;mdm_msg.h&quot;
macro_line|#include &quot;divasync.h&quot;
DECL|macro|FILE_
mdefine_line|#define FILE_ &quot;MESSAGE.C&quot;
DECL|macro|dprintf
mdefine_line|#define dprintf
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* This is options supported for all adapters that are server by    */
multiline_comment|/* XDI driver. Allo it is not necessary to ask it from every adapter*/
multiline_comment|/* and it is not necessary to save it separate for every adapter    */
multiline_comment|/* Macrose defined here have only local meaning                     */
multiline_comment|/*------------------------------------------------------------------*/
DECL|variable|diva_xdi_extended_features
r_static
id|dword
id|diva_xdi_extended_features
op_assign
l_int|0
suffix:semicolon
DECL|macro|DIVA_CAPI_USE_CMA
mdefine_line|#define DIVA_CAPI_USE_CMA                 0x00000001
DECL|macro|DIVA_CAPI_XDI_PROVIDES_SDRAM_BAR
mdefine_line|#define DIVA_CAPI_XDI_PROVIDES_SDRAM_BAR  0x00000002
DECL|macro|DIVA_CAPI_XDI_PROVIDES_NO_CANCEL
mdefine_line|#define DIVA_CAPI_XDI_PROVIDES_NO_CANCEL  0x00000004
DECL|macro|DIVA_CAPI_XDI_PROVIDES_RX_DMA
mdefine_line|#define DIVA_CAPI_XDI_PROVIDES_RX_DMA     0x00000008
multiline_comment|/*&n;  CAPI can request to process all return codes self only if:&n;  protocol code supports this &amp;&amp; xdi supports this&n; */
DECL|macro|DIVA_CAPI_SUPPORTS_NO_CANCEL
mdefine_line|#define DIVA_CAPI_SUPPORTS_NO_CANCEL(__a__)   (((__a__)-&gt;manufacturer_features&amp;MANUFACTURER_FEATURE_XONOFF_FLOW_CONTROL)&amp;&amp;    ((__a__)-&gt;manufacturer_features &amp; MANUFACTURER_FEATURE_OK_FC_LABEL) &amp;&amp;     (diva_xdi_extended_features   &amp; DIVA_CAPI_XDI_PROVIDES_NO_CANCEL))
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* local function prototypes                                        */
multiline_comment|/*------------------------------------------------------------------*/
r_static
r_void
id|group_optimization
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|set_group_ind_mask
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|clear_group_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
suffix:semicolon
r_static
id|byte
id|test_group_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
suffix:semicolon
r_void
id|AutomaticLaw
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
)paren
suffix:semicolon
id|word
id|CapiRelease
c_func
(paren
id|word
)paren
suffix:semicolon
id|word
id|CapiRegister
c_func
(paren
id|word
)paren
suffix:semicolon
id|word
id|api_put
c_func
(paren
id|APPL
op_star
comma
id|CAPI_MSG
op_star
)paren
suffix:semicolon
r_static
id|word
id|api_parse
c_func
(paren
id|byte
op_star
comma
id|word
comma
id|byte
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
r_void
id|api_save_msg
c_func
(paren
id|API_PARSE
op_star
id|in
comma
id|byte
op_star
id|format
comma
id|API_SAVE
op_star
id|out
)paren
suffix:semicolon
r_static
r_void
id|api_load_msg
c_func
(paren
id|API_SAVE
op_star
id|in
comma
id|API_PARSE
op_star
id|out
)paren
suffix:semicolon
id|word
id|api_remove_start
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|api_remove_complete
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|plci_remove
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
r_void
id|diva_get_extended_adapter_features
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
suffix:semicolon
r_static
r_void
id|diva_ask_for_xdi_sdram_bar
(paren
id|DIVA_CAPI_ADAPTER
op_star
comma
id|IDI_SYNC_REQ
op_star
)paren
suffix:semicolon
r_void
id|callback
c_func
(paren
id|ENTITY
op_star
)paren
suffix:semicolon
r_static
r_void
id|control_rc
c_func
(paren
id|PLCI
op_star
comma
id|byte
comma
id|byte
comma
id|byte
comma
id|byte
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|data_rc
c_func
(paren
id|PLCI
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|data_ack
c_func
(paren
id|PLCI
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|sig_ind
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
r_void
id|SendInfo
c_func
(paren
id|PLCI
op_star
comma
id|dword
comma
id|byte
op_star
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|SendSetupInfo
c_func
(paren
id|APPL
op_star
comma
id|PLCI
op_star
comma
id|dword
comma
id|byte
op_star
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|SendSSExtInd
c_func
(paren
id|APPL
op_star
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
)paren
suffix:semicolon
r_static
r_void
id|VSwitchReqInd
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
)paren
suffix:semicolon
r_static
r_void
id|nl_ind
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_a_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|disconnect_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|disconnect_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|listen_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|info_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|info_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|alert_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|facility_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|facility_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_b3_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_b3_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_b3_a_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|disconnect_b3_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|disconnect_b3_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|data_b3_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|data_b3_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|reset_b3_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|reset_b3_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|connect_b3_t90_a_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|select_b_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|manufacturer_req
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|byte
id|manufacturer_res
c_func
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|word
id|get_plci
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
)paren
suffix:semicolon
r_static
r_void
id|add_p
c_func
(paren
id|PLCI
op_star
comma
id|byte
comma
id|byte
op_star
)paren
suffix:semicolon
r_static
r_void
id|add_s
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|API_PARSE
op_star
id|p
)paren
suffix:semicolon
r_static
r_void
id|add_ss
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|API_PARSE
op_star
id|p
)paren
suffix:semicolon
r_static
r_void
id|add_ie
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|byte
op_star
id|p
comma
id|word
id|p_length
)paren
suffix:semicolon
r_static
r_void
id|add_d
c_func
(paren
id|PLCI
op_star
comma
id|word
comma
id|byte
op_star
)paren
suffix:semicolon
r_static
r_void
id|add_ai
c_func
(paren
id|PLCI
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|word
id|add_b1
c_func
(paren
id|PLCI
op_star
comma
id|API_PARSE
op_star
comma
id|word
comma
id|word
)paren
suffix:semicolon
r_static
id|word
id|add_b23
c_func
(paren
id|PLCI
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
id|word
id|add_modem_b23
(paren
id|PLCI
op_star
id|plci
comma
id|API_PARSE
op_star
id|bp_parms
)paren
suffix:semicolon
r_static
r_void
id|sig_req
c_func
(paren
id|PLCI
op_star
comma
id|byte
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|nl_req_ncci
c_func
(paren
id|PLCI
op_star
comma
id|byte
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|send_req
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
r_void
id|send_data
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
id|word
id|plci_remove_check
c_func
(paren
id|PLCI
op_star
)paren
suffix:semicolon
r_static
r_void
id|listen_check
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
)paren
suffix:semicolon
r_static
id|byte
id|AddInfo
c_func
(paren
id|byte
op_star
op_star
comma
id|byte
op_star
op_star
comma
id|byte
op_star
comma
id|byte
op_star
)paren
suffix:semicolon
r_static
id|byte
id|getChannel
c_func
(paren
id|API_PARSE
op_star
)paren
suffix:semicolon
r_static
r_void
id|IndParse
c_func
(paren
id|PLCI
op_star
comma
id|word
op_star
comma
id|byte
op_star
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
id|byte
id|ie_compare
c_func
(paren
id|byte
op_star
comma
id|byte
op_star
)paren
suffix:semicolon
r_static
id|word
id|find_cip
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
comma
id|byte
op_star
comma
id|byte
op_star
)paren
suffix:semicolon
r_static
id|word
id|CPN_filter_ok
c_func
(paren
id|byte
op_star
id|cpn
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|word
)paren
suffix:semicolon
multiline_comment|/*&n;  XON protocol helpers&n;  */
r_static
r_void
id|channel_flow_control_remove
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|channel_x_off
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
comma
id|byte
id|flag
)paren
suffix:semicolon
r_static
r_void
id|channel_x_on
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
suffix:semicolon
r_static
r_void
id|channel_request_xon
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
suffix:semicolon
r_static
r_void
id|channel_xmit_xon
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_int
id|channel_can_xon
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
suffix:semicolon
r_static
r_void
id|channel_xmit_extended_xon
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
id|byte
id|SendMultiIE
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
comma
id|byte
id|ie_type
comma
id|dword
id|info_mask
comma
id|byte
id|setupParse
)paren
suffix:semicolon
r_static
id|word
id|AdvCodecSupport
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|byte
)paren
suffix:semicolon
r_static
r_void
id|CodecIdCheck
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
)paren
suffix:semicolon
r_static
r_void
id|SetVoiceChannel
c_func
(paren
id|PLCI
op_star
comma
id|byte
op_star
comma
id|DIVA_CAPI_ADAPTER
op_star
)paren
suffix:semicolon
r_static
r_void
id|VoiceChannelOff
c_func
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|adv_voice_write_coefs
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|write_command
)paren
suffix:semicolon
r_static
r_void
id|adv_voice_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
id|word
id|get_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|b1_resource
)paren
suffix:semicolon
r_static
id|byte
id|add_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|b1_resource
comma
id|word
id|b1_facilities
)paren
suffix:semicolon
r_static
r_void
id|adjust_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|new_b1_resource
comma
id|word
id|new_b1_facilities
)paren
suffix:semicolon
r_static
id|word
id|adjust_b_process
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|adjust_b1_resource
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|API_SAVE
op_star
id|bp_msg
comma
id|word
id|b1_facilities
comma
id|word
id|internal_command
)paren
suffix:semicolon
r_static
r_void
id|adjust_b_restore
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|reset_b3_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|select_b_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|fax_connect_ack_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|fax_edata_ack_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|fax_connect_info_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|fax_adjust_b23_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|fax_disconnect_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|hold_save_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|retrieve_restore_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|init_b1_config
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|clear_b1_config
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|dtmf_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
id|byte
id|dtmf_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
suffix:semicolon
r_static
r_void
id|dtmf_confirmation
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|dtmf_indication
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
suffix:semicolon
r_static
r_void
id|dtmf_parameter_write
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|mixer_set_bchannel_id_esc
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|bchannel_id
)paren
suffix:semicolon
r_static
r_void
id|mixer_set_bchannel_id
(paren
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|chi
)paren
suffix:semicolon
r_static
r_void
id|mixer_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|mixer_notify_update
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|others
)paren
suffix:semicolon
r_static
r_void
id|mixer_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
id|byte
id|mixer_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
suffix:semicolon
r_static
r_void
id|mixer_indication_coefs_set
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|mixer_indication_xconnect_from
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
suffix:semicolon
r_static
r_void
id|mixer_indication_xconnect_to
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
suffix:semicolon
r_static
r_void
id|mixer_remove
(paren
id|PLCI
op_star
id|plci
)paren
suffix:semicolon
r_static
r_void
id|ec_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
id|byte
id|ec_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
suffix:semicolon
r_static
r_void
id|ec_indication
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
suffix:semicolon
r_static
r_void
id|rtp_connect_b3_req_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_void
id|rtp_connect_b3_res_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
suffix:semicolon
r_static
r_int
id|diva_get_dma_descriptor
(paren
id|PLCI
op_star
id|plci
comma
id|dword
op_star
id|dma_magic
)paren
suffix:semicolon
r_static
r_void
id|diva_free_dma_descriptor
(paren
id|PLCI
op_star
id|plci
comma
r_int
id|nr
)paren
suffix:semicolon
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* external function prototypes                                     */
multiline_comment|/*------------------------------------------------------------------*/
r_extern
id|byte
id|MapController
(paren
id|byte
)paren
suffix:semicolon
r_extern
id|byte
id|UnMapController
(paren
id|byte
)paren
suffix:semicolon
DECL|macro|MapId
mdefine_line|#define MapId(Id) (((Id) &amp; 0xffffff00L) | MapController ((byte)(Id)))
DECL|macro|UnMapId
mdefine_line|#define UnMapId(Id) (((Id) &amp; 0xffffff00L) | UnMapController ((byte)(Id)))
r_void
id|sendf
c_func
(paren
id|APPL
op_star
comma
id|word
comma
id|dword
comma
id|word
comma
id|byte
op_star
comma
dot
dot
dot
)paren
suffix:semicolon
r_void
op_star
id|TransmitBufferSet
c_func
(paren
id|APPL
op_star
id|appl
comma
id|dword
id|ref
)paren
suffix:semicolon
r_void
op_star
id|TransmitBufferGet
c_func
(paren
id|APPL
op_star
id|appl
comma
r_void
op_star
id|p
)paren
suffix:semicolon
r_void
id|TransmitBufferFree
c_func
(paren
id|APPL
op_star
id|appl
comma
r_void
op_star
id|p
)paren
suffix:semicolon
r_void
op_star
id|ReceiveBufferGet
c_func
(paren
id|APPL
op_star
id|appl
comma
r_int
id|Num
)paren
suffix:semicolon
r_int
id|fax_head_line_time
(paren
r_char
op_star
id|buffer
)paren
suffix:semicolon
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Global data definitions                                          */
multiline_comment|/*------------------------------------------------------------------*/
r_extern
id|byte
id|max_adapter
suffix:semicolon
r_extern
id|byte
id|max_appl
suffix:semicolon
r_extern
id|DIVA_CAPI_ADAPTER
op_star
id|adapter
suffix:semicolon
r_extern
id|APPL
op_star
id|application
suffix:semicolon
DECL|variable|remove_started
r_static
id|byte
id|remove_started
op_assign
id|FALSE
suffix:semicolon
DECL|variable|dummy_plci
r_static
id|PLCI
id|dummy_plci
suffix:semicolon
DECL|struct|_ftable
r_static
r_struct
id|_ftable
(brace
DECL|member|command
id|word
id|command
suffix:semicolon
DECL|member|format
id|byte
op_star
id|format
suffix:semicolon
DECL|member|function
id|byte
(paren
op_star
id|function
)paren
(paren
id|dword
comma
id|word
comma
id|DIVA_CAPI_ADAPTER
op_star
comma
id|PLCI
op_star
comma
id|APPL
op_star
comma
id|API_PARSE
op_star
)paren
suffix:semicolon
DECL|variable|ftable
)brace
id|ftable
(braket
)braket
op_assign
(brace
(brace
id|_DATA_B3_R
comma
l_string|&quot;dwww&quot;
comma
id|data_b3_req
)brace
comma
(brace
id|_DATA_B3_I
op_or
id|RESPONSE
comma
l_string|&quot;w&quot;
comma
id|data_b3_res
)brace
comma
(brace
id|_INFO_R
comma
l_string|&quot;ss&quot;
comma
id|info_req
)brace
comma
(brace
id|_INFO_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|info_res
)brace
comma
(brace
id|_CONNECT_R
comma
l_string|&quot;wsssssssss&quot;
comma
id|connect_req
)brace
comma
(brace
id|_CONNECT_I
op_or
id|RESPONSE
comma
l_string|&quot;wsssss&quot;
comma
id|connect_res
)brace
comma
(brace
id|_CONNECT_ACTIVE_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|connect_a_res
)brace
comma
(brace
id|_DISCONNECT_R
comma
l_string|&quot;s&quot;
comma
id|disconnect_req
)brace
comma
(brace
id|_DISCONNECT_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|disconnect_res
)brace
comma
(brace
id|_LISTEN_R
comma
l_string|&quot;dddss&quot;
comma
id|listen_req
)brace
comma
(brace
id|_ALERT_R
comma
l_string|&quot;s&quot;
comma
id|alert_req
)brace
comma
(brace
id|_FACILITY_R
comma
l_string|&quot;ws&quot;
comma
id|facility_req
)brace
comma
(brace
id|_FACILITY_I
op_or
id|RESPONSE
comma
l_string|&quot;ws&quot;
comma
id|facility_res
)brace
comma
(brace
id|_CONNECT_B3_R
comma
l_string|&quot;s&quot;
comma
id|connect_b3_req
)brace
comma
(brace
id|_CONNECT_B3_I
op_or
id|RESPONSE
comma
l_string|&quot;ws&quot;
comma
id|connect_b3_res
)brace
comma
(brace
id|_CONNECT_B3_ACTIVE_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|connect_b3_a_res
)brace
comma
(brace
id|_DISCONNECT_B3_R
comma
l_string|&quot;s&quot;
comma
id|disconnect_b3_req
)brace
comma
(brace
id|_DISCONNECT_B3_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|disconnect_b3_res
)brace
comma
(brace
id|_RESET_B3_R
comma
l_string|&quot;s&quot;
comma
id|reset_b3_req
)brace
comma
(brace
id|_RESET_B3_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|reset_b3_res
)brace
comma
(brace
id|_CONNECT_B3_T90_ACTIVE_I
op_or
id|RESPONSE
comma
l_string|&quot;ws&quot;
comma
id|connect_b3_t90_a_res
)brace
comma
(brace
id|_CONNECT_B3_T90_ACTIVE_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|connect_b3_t90_a_res
)brace
comma
(brace
id|_SELECT_B_REQ
comma
l_string|&quot;s&quot;
comma
id|select_b_req
)brace
comma
(brace
id|_MANUFACTURER_R
comma
l_string|&quot;dws&quot;
comma
id|manufacturer_req
)brace
comma
(brace
id|_MANUFACTURER_I
op_or
id|RESPONSE
comma
l_string|&quot;dws&quot;
comma
id|manufacturer_res
)brace
comma
(brace
id|_MANUFACTURER_I
op_or
id|RESPONSE
comma
l_string|&quot;&quot;
comma
id|manufacturer_res
)brace
)brace
suffix:semicolon
DECL|variable|cip_bc
r_static
id|byte
op_star
id|cip_bc
(braket
l_int|29
)braket
(braket
l_int|2
)braket
op_assign
(brace
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 0 */
(brace
l_string|&quot;&bslash;x03&bslash;x80&bslash;x90&bslash;xa3&quot;
comma
l_string|&quot;&bslash;x03&bslash;x80&bslash;x90&bslash;xa2&quot;
)brace
comma
multiline_comment|/* 1 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 2 */
(brace
l_string|&quot;&bslash;x02&bslash;x89&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x89&bslash;x90&quot;
)brace
comma
multiline_comment|/* 3 */
(brace
l_string|&quot;&bslash;x03&bslash;x90&bslash;x90&bslash;xa3&quot;
comma
l_string|&quot;&bslash;x03&bslash;x90&bslash;x90&bslash;xa2&quot;
)brace
comma
multiline_comment|/* 4 */
(brace
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
comma
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
)brace
comma
multiline_comment|/* 5 */
(brace
l_string|&quot;&bslash;x02&bslash;x98&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x98&bslash;x90&quot;
)brace
comma
multiline_comment|/* 6 */
(brace
l_string|&quot;&bslash;x04&bslash;x88&bslash;xc0&bslash;xc6&bslash;xe6&quot;
comma
l_string|&quot;&bslash;x04&bslash;x88&bslash;xc0&bslash;xc6&bslash;xe6&quot;
)brace
comma
multiline_comment|/* 7 */
(brace
l_string|&quot;&bslash;x04&bslash;x88&bslash;x90&bslash;x21&bslash;x8f&quot;
comma
l_string|&quot;&bslash;x04&bslash;x88&bslash;x90&bslash;x21&bslash;x8f&quot;
)brace
comma
multiline_comment|/* 8 */
(brace
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
comma
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
)brace
comma
multiline_comment|/* 9 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 10 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 11 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 12 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 13 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 14 */
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)brace
comma
multiline_comment|/* 15 */
(brace
l_string|&quot;&bslash;x03&bslash;x80&bslash;x90&bslash;xa3&quot;
comma
l_string|&quot;&bslash;x03&bslash;x80&bslash;x90&bslash;xa2&quot;
)brace
comma
multiline_comment|/* 16 */
(brace
l_string|&quot;&bslash;x03&bslash;x90&bslash;x90&bslash;xa3&quot;
comma
l_string|&quot;&bslash;x03&bslash;x90&bslash;x90&bslash;xa2&quot;
)brace
comma
multiline_comment|/* 17 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 18 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 19 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 20 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 21 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 22 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 23 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 24 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
comma
multiline_comment|/* 25 */
(brace
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
comma
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
)brace
comma
multiline_comment|/* 26 */
(brace
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
comma
l_string|&quot;&bslash;x03&bslash;x91&bslash;x90&bslash;xa5&quot;
)brace
comma
multiline_comment|/* 27 */
(brace
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
comma
l_string|&quot;&bslash;x02&bslash;x88&bslash;x90&quot;
)brace
multiline_comment|/* 28 */
)brace
suffix:semicolon
DECL|variable|cip_hlc
r_static
id|byte
op_star
id|cip_hlc
(braket
l_int|29
)braket
op_assign
(brace
l_string|&quot;&quot;
comma
multiline_comment|/* 0 */
l_string|&quot;&quot;
comma
multiline_comment|/* 1 */
l_string|&quot;&quot;
comma
multiline_comment|/* 2 */
l_string|&quot;&quot;
comma
multiline_comment|/* 3 */
l_string|&quot;&quot;
comma
multiline_comment|/* 4 */
l_string|&quot;&quot;
comma
multiline_comment|/* 5 */
l_string|&quot;&quot;
comma
multiline_comment|/* 6 */
l_string|&quot;&quot;
comma
multiline_comment|/* 7 */
l_string|&quot;&quot;
comma
multiline_comment|/* 8 */
l_string|&quot;&quot;
comma
multiline_comment|/* 9 */
l_string|&quot;&quot;
comma
multiline_comment|/* 10 */
l_string|&quot;&quot;
comma
multiline_comment|/* 11 */
l_string|&quot;&quot;
comma
multiline_comment|/* 12 */
l_string|&quot;&quot;
comma
multiline_comment|/* 13 */
l_string|&quot;&quot;
comma
multiline_comment|/* 14 */
l_string|&quot;&quot;
comma
multiline_comment|/* 15 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;x81&quot;
comma
multiline_comment|/* 16 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;x84&quot;
comma
multiline_comment|/* 17 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xa1&quot;
comma
multiline_comment|/* 18 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xa4&quot;
comma
multiline_comment|/* 19 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xa8&quot;
comma
multiline_comment|/* 20 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xb1&quot;
comma
multiline_comment|/* 21 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xb2&quot;
comma
multiline_comment|/* 22 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xb5&quot;
comma
multiline_comment|/* 23 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xb8&quot;
comma
multiline_comment|/* 24 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;xc1&quot;
comma
multiline_comment|/* 25 */
l_string|&quot;&bslash;x02&bslash;x91&bslash;x81&quot;
comma
multiline_comment|/* 26 */
l_string|&quot;&bslash;x03&bslash;x91&bslash;xe0&bslash;x01&quot;
comma
multiline_comment|/* 27 */
l_string|&quot;&bslash;x03&bslash;x91&bslash;xe0&bslash;x02&quot;
multiline_comment|/* 28 */
)brace
suffix:semicolon
multiline_comment|/*------------------------------------------------------------------*/
DECL|macro|V120_HEADER_LENGTH
mdefine_line|#define V120_HEADER_LENGTH 1
DECL|macro|V120_HEADER_EXTEND_BIT
mdefine_line|#define V120_HEADER_EXTEND_BIT  0x80
DECL|macro|V120_HEADER_BREAK_BIT
mdefine_line|#define V120_HEADER_BREAK_BIT   0x40
DECL|macro|V120_HEADER_C1_BIT
mdefine_line|#define V120_HEADER_C1_BIT      0x04
DECL|macro|V120_HEADER_C2_BIT
mdefine_line|#define V120_HEADER_C2_BIT      0x08
DECL|macro|V120_HEADER_FLUSH_COND
mdefine_line|#define V120_HEADER_FLUSH_COND  (V120_HEADER_BREAK_BIT | V120_HEADER_C1_BIT | V120_HEADER_C2_BIT)
DECL|variable|v120_default_header
r_static
id|byte
id|v120_default_header
(braket
)braket
op_assign
(brace
l_int|0x83
multiline_comment|/*  Ext, BR , res, res, C2 , C1 , B  , F   */
)brace
suffix:semicolon
DECL|variable|v120_break_header
r_static
id|byte
id|v120_break_header
(braket
)braket
op_assign
(brace
l_int|0xc3
op_or
id|V120_HEADER_BREAK_BIT
multiline_comment|/*  Ext, BR , res, res, C2 , C1 , B  , F   */
)brace
suffix:semicolon
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* API_PUT function                                                 */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|api_put
id|word
id|api_put
c_func
(paren
id|APPL
op_star
id|appl
comma
id|CAPI_MSG
op_star
id|msg
)paren
(brace
id|word
id|i
comma
id|j
comma
id|k
comma
id|l
comma
id|n
suffix:semicolon
id|word
id|ret
suffix:semicolon
id|byte
id|c
suffix:semicolon
id|byte
id|controller
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|CAPI_MSG
op_star
id|m
suffix:semicolon
id|API_PARSE
id|msg_parms
(braket
id|MAX_MSG_PARMS
op_plus
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
id|msg-&gt;header.length
template_param
id|MAX_MSG_SIZE
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;bad len&quot;
)paren
)paren
suffix:semicolon
r_return
id|_BAD_MSG
suffix:semicolon
)brace
id|controller
op_assign
(paren
id|byte
)paren
(paren
(paren
id|msg-&gt;header.controller
op_amp
l_int|0x7f
)paren
op_minus
l_int|1
)paren
suffix:semicolon
multiline_comment|/* controller starts with 0 up to (max_adapter - 1) */
r_if
c_cond
(paren
id|controller
op_ge
id|max_adapter
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;invalid ctrl&quot;
)paren
)paren
suffix:semicolon
r_return
id|_BAD_MSG
suffix:semicolon
)brace
id|a
op_assign
op_amp
id|adapter
(braket
id|controller
)braket
suffix:semicolon
id|plci
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|msg-&gt;header.plci
op_ne
l_int|0
)paren
op_logical_and
(paren
id|msg-&gt;header.plci
op_le
id|a-&gt;max_plci
)paren
op_logical_and
op_logical_neg
id|a-&gt;adapter_disabled
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;plci=%x&quot;
comma
id|msg-&gt;header.plci
)paren
)paren
suffix:semicolon
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|msg-&gt;header.plci
op_minus
l_int|1
)braket
suffix:semicolon
id|ncci
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|msg-&gt;header.ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Id
op_logical_and
(paren
id|plci-&gt;appl
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
op_logical_or
(paren
id|msg-&gt;header.command
op_eq
(paren
id|_DISCONNECT_I
op_or
id|RESPONSE
)paren
)paren
)paren
op_logical_and
(paren
(paren
id|ncci
op_eq
l_int|0
)paren
op_logical_or
(paren
id|msg-&gt;header.command
op_eq
(paren
id|_DISCONNECT_B3_I
op_or
id|RESPONSE
)paren
)paren
op_logical_or
(paren
(paren
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
op_logical_and
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
)paren
)paren
)paren
(brace
id|i
op_assign
id|plci-&gt;msg_in_read_pos
suffix:semicolon
id|j
op_assign
id|plci-&gt;msg_in_write_pos
suffix:semicolon
r_if
c_cond
(paren
id|j
op_ge
id|i
)paren
(brace
r_if
c_cond
(paren
id|j
op_plus
id|msg-&gt;header.length
op_plus
id|MSG_IN_OVERHEAD
op_le
id|MSG_IN_QUEUE_SIZE
)paren
id|i
op_add_assign
id|MSG_IN_QUEUE_SIZE
op_minus
id|j
suffix:semicolon
r_else
id|j
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|n
op_assign
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
op_member_access_from_pointer
id|header.length
op_plus
id|MSG_IN_OVERHEAD
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
suffix:semicolon
r_if
c_cond
(paren
id|i
OG
id|MSG_IN_QUEUE_SIZE
op_minus
id|n
)paren
id|i
op_assign
id|MSG_IN_QUEUE_SIZE
op_minus
id|n
op_plus
l_int|1
suffix:semicolon
id|i
op_sub_assign
id|j
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_le
(paren
(paren
id|msg-&gt;header.length
op_plus
id|MSG_IN_OVERHEAD
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;Q-FULL1(msg) - len=%d write=%d read=%d wrap=%d free=%d&quot;
comma
id|msg-&gt;header.length
comma
id|plci-&gt;msg_in_write_pos
comma
id|plci-&gt;msg_in_read_pos
comma
id|plci-&gt;msg_in_wrap_pos
comma
id|i
)paren
)paren
suffix:semicolon
r_return
id|_QUEUE_FULL
suffix:semicolon
)brace
id|c
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
(paren
id|byte
op_star
)paren
id|msg
)paren
OL
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
op_logical_or
(paren
(paren
(paren
id|byte
op_star
)paren
id|msg
)paren
op_ge
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
op_plus
r_sizeof
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;msg_in_write_pos
op_ne
id|plci-&gt;msg_in_read_pos
)paren
id|c
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|msg-&gt;header.command
op_eq
id|_DATA_B3_R
)paren
(brace
r_if
c_cond
(paren
id|msg-&gt;header.length
OL
l_int|20
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;DATA_B3 REQ wrong length %d&quot;
comma
id|msg-&gt;header.length
)paren
)paren
suffix:semicolon
r_return
id|_BAD_MSG
suffix:semicolon
)brace
id|ncci_ptr
op_assign
op_amp
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|n
op_assign
id|ncci_ptr-&gt;data_pending
suffix:semicolon
id|l
op_assign
id|ncci_ptr-&gt;data_ack_pending
suffix:semicolon
id|k
op_assign
id|plci-&gt;msg_in_read_pos
suffix:semicolon
r_while
c_loop
(paren
id|k
op_ne
id|plci-&gt;msg_in_write_pos
)paren
(brace
r_if
c_cond
(paren
id|k
op_eq
id|plci-&gt;msg_in_wrap_pos
)paren
id|k
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|k
)braket
)paren
)paren
op_member_access_from_pointer
id|header.command
op_eq
id|_DATA_B3_R
)paren
op_logical_and
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|k
)braket
)paren
)paren
op_member_access_from_pointer
id|header.ncci
op_eq
id|ncci
)paren
)paren
(brace
id|n
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|k
)braket
)paren
)paren
op_member_access_from_pointer
id|info.data_b3_req.Flags
op_amp
l_int|0x0004
)paren
id|l
op_increment
suffix:semicolon
)brace
id|k
op_add_assign
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|k
)braket
)paren
)paren
op_member_access_from_pointer
id|header.length
op_plus
id|MSG_IN_OVERHEAD
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|n
op_ge
id|MAX_DATA_B3
)paren
op_logical_or
(paren
id|l
op_ge
id|MAX_DATA_ACK
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;Q-FULL2(data) - pending=%d/%d ack_pending=%d/%d&quot;
comma
id|ncci_ptr-&gt;data_pending
comma
id|n
comma
id|ncci_ptr-&gt;data_ack_pending
comma
id|l
)paren
)paren
suffix:semicolon
r_return
id|_QUEUE_FULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;req_in
op_logical_or
id|plci-&gt;internal_command
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
(paren
id|byte
op_star
)paren
id|msg
)paren
op_ge
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
op_logical_and
(paren
(paren
(paren
id|byte
op_star
)paren
id|msg
)paren
OL
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
op_plus
r_sizeof
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;Q-FULL3(requeue)&quot;
)paren
)paren
suffix:semicolon
r_return
id|_QUEUE_FULL
suffix:semicolon
)brace
id|c
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;req_in
op_logical_or
id|plci-&gt;internal_command
)paren
id|c
op_assign
id|TRUE
suffix:semicolon
r_else
(brace
id|plci-&gt;command
op_assign
id|msg-&gt;header.command
suffix:semicolon
id|plci-&gt;number
op_assign
id|msg-&gt;header.number
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|c
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;enqueue msg(0x%04x,0x%x,0x%x) - len=%d write=%d read=%d wrap=%d free=%d&quot;
comma
id|msg-&gt;header.command
comma
id|plci-&gt;req_in
comma
id|plci-&gt;internal_command
comma
id|msg-&gt;header.length
comma
id|plci-&gt;msg_in_write_pos
comma
id|plci-&gt;msg_in_read_pos
comma
id|plci-&gt;msg_in_wrap_pos
comma
id|i
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|j
op_eq
l_int|0
)paren
id|plci-&gt;msg_in_wrap_pos
op_assign
id|plci-&gt;msg_in_write_pos
suffix:semicolon
id|m
op_assign
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|msg-&gt;header.length
suffix:semicolon
id|i
op_increment
)paren
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
op_increment
)braket
op_assign
(paren
(paren
id|byte
op_star
)paren
id|msg
)paren
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|m-&gt;header.command
op_eq
id|_DATA_B3_R
)paren
(brace
id|m-&gt;info.data_b3_req.Data
op_assign
(paren
id|dword
)paren
(paren
id|TransmitBufferSet
(paren
id|appl
comma
id|m-&gt;info.data_b3_req.Data
)paren
)paren
suffix:semicolon
)brace
id|j
op_assign
(paren
id|j
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
suffix:semicolon
op_star
(paren
(paren
id|APPL
op_star
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
)braket
)paren
)paren
op_assign
id|appl
suffix:semicolon
id|plci-&gt;msg_in_write_pos
op_assign
id|j
op_plus
id|MSG_IN_OVERHEAD
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
id|plci
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;com=%x&quot;
comma
id|msg-&gt;header.command
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|MAX_MSG_PARMS
op_plus
l_int|1
suffix:semicolon
id|j
op_increment
)paren
(brace
id|msg_parms
(braket
id|j
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|ret
op_assign
id|_BAD_MSG
suffix:semicolon
id|i
OL
(paren
r_sizeof
(paren
id|ftable
)paren
op_div
r_sizeof
(paren
r_struct
id|_ftable
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ftable
(braket
id|i
)braket
dot
id|command
op_eq
id|msg-&gt;header.command
)paren
(brace
multiline_comment|/* break loop if the message is correct, otherwise continue scan  */
multiline_comment|/* (for example: CONNECT_B3_T90_ACT_RES has two specifications)   */
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
id|msg-&gt;info.b
comma
(paren
id|word
)paren
(paren
id|msg-&gt;header.length
op_minus
l_int|12
)paren
comma
id|ftable
(braket
id|i
)braket
dot
id|format
comma
id|msg_parms
)paren
)paren
(brace
id|ret
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|MAX_MSG_PARMS
op_plus
l_int|1
suffix:semicolon
id|j
op_increment
)paren
(brace
id|msg_parms
(braket
id|j
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|ret
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;BAD_MSG&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|ret
suffix:semicolon
)brace
id|c
op_assign
id|ftable
(braket
id|i
)braket
dot
id|function
c_func
(paren
id|GET_DWORD
c_func
(paren
op_amp
id|msg-&gt;header.controller
)paren
comma
id|msg-&gt;header.number
comma
id|a
comma
id|plci
comma
id|appl
comma
id|msg_parms
)paren
suffix:semicolon
id|channel_xmit_extended_xon
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
l_int|1
)paren
(brace
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
l_int|2
op_logical_and
id|plci
)paren
(brace
id|plci-&gt;req_in
op_assign
id|plci-&gt;req_in_start
op_assign
id|plci-&gt;req_out
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci
op_logical_and
op_logical_neg
id|plci-&gt;req_in
)paren
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* api_parse function, check the format of api messages             */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|api_parse
id|word
id|api_parse
c_func
(paren
id|byte
op_star
id|msg
comma
id|word
id|length
comma
id|byte
op_star
id|format
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|i
suffix:semicolon
id|word
id|p
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|p
op_assign
l_int|0
suffix:semicolon
id|format
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|parms
)paren
(brace
id|parms
(braket
id|i
)braket
dot
id|info
op_assign
op_amp
id|msg
(braket
id|p
)braket
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|format
(braket
id|i
)braket
)paren
(brace
r_case
l_char|&squot;b&squot;
suffix:colon
id|p
op_add_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;w&squot;
suffix:colon
id|p
op_add_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;d&squot;
suffix:colon
id|p
op_add_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;s&squot;
suffix:colon
r_if
c_cond
(paren
id|msg
(braket
id|p
)braket
op_eq
l_int|0xff
)paren
(brace
id|parms
(braket
id|i
)braket
dot
id|info
op_add_assign
l_int|2
suffix:semicolon
id|parms
(braket
id|i
)braket
dot
id|length
op_assign
id|msg
(braket
id|p
op_plus
l_int|1
)braket
op_plus
(paren
id|msg
(braket
id|p
op_plus
l_int|2
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|p
op_add_assign
(paren
id|parms
(braket
id|i
)braket
dot
id|length
op_plus
l_int|3
)paren
suffix:semicolon
)brace
r_else
(brace
id|parms
(braket
id|i
)braket
dot
id|length
op_assign
id|msg
(braket
id|p
)braket
suffix:semicolon
id|p
op_add_assign
(paren
id|parms
(braket
id|i
)braket
dot
id|length
op_plus
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p
OG
id|length
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|parms
)paren
(brace
id|parms
(braket
id|i
)braket
dot
id|info
op_assign
l_int|NULL
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|api_save_msg
r_void
id|api_save_msg
c_func
(paren
id|API_PARSE
op_star
id|in
comma
id|byte
op_star
id|format
comma
id|API_SAVE
op_star
id|out
)paren
(brace
id|word
id|i
comma
id|j
comma
id|n
op_assign
l_int|0
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|p
op_assign
id|out-&gt;info
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|format
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|i
op_increment
)paren
(brace
id|out-&gt;parms
(braket
id|i
)braket
dot
id|info
op_assign
id|p
suffix:semicolon
id|out-&gt;parms
(braket
id|i
)braket
dot
id|length
op_assign
id|in
(braket
id|i
)braket
dot
id|length
suffix:semicolon
r_switch
c_cond
(paren
id|format
(braket
id|i
)braket
)paren
(brace
r_case
l_char|&squot;b&squot;
suffix:colon
id|n
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;w&squot;
suffix:colon
id|n
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;d&squot;
suffix:colon
id|n
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_char|&squot;s&squot;
suffix:colon
id|n
op_assign
id|in
(braket
id|i
)braket
dot
id|length
op_plus
l_int|1
suffix:semicolon
r_break
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
id|in
(braket
id|i
)braket
dot
id|info
(braket
id|j
)braket
suffix:semicolon
)brace
id|out-&gt;parms
(braket
id|i
)braket
dot
id|info
op_assign
l_int|NULL
suffix:semicolon
id|out-&gt;parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|api_load_msg
r_void
id|api_load_msg
c_func
(paren
id|API_SAVE
op_star
id|in
comma
id|API_PARSE
op_star
id|out
)paren
(brace
id|word
id|i
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|out
(braket
id|i
)braket
dot
id|info
op_assign
id|in-&gt;parms
(braket
id|i
)braket
dot
id|info
suffix:semicolon
id|out
(braket
id|i
)braket
dot
id|length
op_assign
id|in-&gt;parms
(braket
id|i
)braket
dot
id|length
suffix:semicolon
)brace
r_while
c_loop
(paren
id|in-&gt;parms
(braket
id|i
op_increment
)braket
dot
id|info
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* CAPI remove function                                             */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|api_remove_start
id|word
id|api_remove_start
c_func
(paren
r_void
)paren
(brace
id|word
id|i
suffix:semicolon
id|word
id|j
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|remove_started
)paren
(brace
id|remove_started
op_assign
id|TRUE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_adapter
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter
(braket
id|i
)braket
dot
id|request
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|adapter
(braket
id|i
)braket
dot
id|max_plci
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter
(braket
id|i
)braket
dot
id|plci
(braket
id|j
)braket
dot
id|Sig.Id
)paren
(brace
id|plci_remove
c_func
(paren
op_amp
id|adapter
(braket
id|i
)braket
dot
id|plci
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_adapter
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter
(braket
id|i
)braket
dot
id|request
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|adapter
(braket
id|i
)braket
dot
id|max_plci
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter
(braket
id|i
)braket
dot
id|plci
(braket
id|j
)braket
dot
id|Sig.Id
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|api_remove_complete
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* internal command queue                                           */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|init_internal_command_queue
r_static
r_void
id|init_internal_command_queue
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;%s,%d: init_internal_command_queue&quot;
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_INTERNAL_COMMAND_LEVELS
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;internal_command_queue
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
DECL|function|start_internal_command
r_static
r_void
id|start_internal_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|t_std_internal_command
id|command_function
)paren
(brace
id|word
id|i
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: start_internal_command&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
l_int|0
)paren
(brace
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_assign
id|command_function
suffix:semicolon
(paren
op_star
id|command_function
)paren
(paren
id|Id
comma
id|plci
comma
id|OK
)paren
suffix:semicolon
)brace
r_else
(brace
id|i
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|plci-&gt;internal_command_queue
(braket
id|i
)braket
op_ne
l_int|0
)paren
id|i
op_increment
suffix:semicolon
id|plci-&gt;internal_command_queue
(braket
id|i
)braket
op_assign
id|command_function
suffix:semicolon
)brace
)brace
DECL|function|next_internal_command
r_static
r_void
id|next_internal_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: next_internal_command&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|1
)braket
op_ne
l_int|0
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_INTERNAL_COMMAND_LEVELS
op_minus
l_int|1
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;internal_command_queue
(braket
id|i
)braket
op_assign
id|plci-&gt;internal_command_queue
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;internal_command_queue
(braket
id|MAX_INTERNAL_COMMAND_LEVELS
op_minus
l_int|1
)braket
op_assign
l_int|NULL
suffix:semicolon
(paren
op_star
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
)paren
(paren
id|Id
comma
id|plci
comma
id|OK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_ne
l_int|0
)paren
r_return
suffix:semicolon
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* NCCI allocate/remove function                                    */
multiline_comment|/*------------------------------------------------------------------*/
DECL|variable|ncci_mapping_bug
r_static
id|dword
id|ncci_mapping_bug
op_assign
l_int|0
suffix:semicolon
DECL|function|get_ncci
r_static
id|word
id|get_ncci
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
comma
id|word
id|force_ncci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|ncci
comma
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ch
op_logical_or
id|a-&gt;ch_ncci
(braket
id|ch
)braket
)paren
(brace
id|ncci_mapping_bug
op_increment
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping exists %ld %02x %02x %02x-%02x&quot;
comma
id|ncci_mapping_bug
comma
id|ch
comma
id|force_ncci
comma
id|a-&gt;ncci_ch
(braket
id|a-&gt;ch_ncci
(braket
id|ch
)braket
)braket
comma
id|a-&gt;ch_ncci
(braket
id|ch
)braket
)paren
)paren
suffix:semicolon
id|ncci
op_assign
id|ch
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|force_ncci
)paren
id|ncci
op_assign
id|force_ncci
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
(paren
id|ch
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
op_logical_and
op_logical_neg
id|a-&gt;ncci_ch
(braket
id|ch
)braket
)paren
id|ncci
op_assign
id|ch
suffix:semicolon
r_else
(brace
id|ncci
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
(paren
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
op_logical_and
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
id|ncci
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ncci
op_eq
id|MAX_NCCI
op_plus
l_int|1
)paren
(brace
id|ncci_mapping_bug
op_increment
suffix:semicolon
id|i
op_assign
l_int|1
suffix:semicolon
r_do
(brace
id|j
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
(paren
id|j
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
op_logical_and
(paren
id|a-&gt;ncci_ch
(braket
id|j
)braket
op_ne
id|i
)paren
)paren
id|j
op_increment
suffix:semicolon
id|k
op_assign
id|j
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
(brace
r_do
(brace
id|j
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|j
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
op_logical_and
(paren
id|a-&gt;ncci_ch
(braket
id|j
)braket
op_ne
id|i
)paren
)paren
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
(paren
id|i
OL
id|MAX_NL_CHANNEL
op_plus
l_int|1
)paren
op_logical_and
(paren
id|j
OL
id|MAX_NCCI
op_plus
l_int|1
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
OL
id|MAX_NL_CHANNEL
op_plus
l_int|1
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping overflow %ld %02x %02x %02x-%02x-%02x&quot;
comma
id|ncci_mapping_bug
comma
id|ch
comma
id|force_ncci
comma
id|i
comma
id|k
comma
id|j
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping overflow %ld %02x %02x&quot;
comma
id|ncci_mapping_bug
comma
id|ch
comma
id|force_ncci
)paren
)paren
suffix:semicolon
)brace
id|ncci
op_assign
id|ch
suffix:semicolon
)brace
)brace
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_assign
id|plci-&gt;Id
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|IDLE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;ncci_ring_list
)paren
id|plci-&gt;ncci_ring_list
op_assign
id|ncci
suffix:semicolon
r_else
id|a-&gt;ncci_next
(braket
id|ncci
)braket
op_assign
id|a-&gt;ncci_next
(braket
id|plci-&gt;ncci_ring_list
)braket
suffix:semicolon
id|a-&gt;ncci_next
(braket
id|plci-&gt;ncci_ring_list
)braket
op_assign
(paren
id|byte
)paren
id|ncci
suffix:semicolon
)brace
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
op_assign
id|ch
suffix:semicolon
id|a-&gt;ch_ncci
(braket
id|ch
)braket
op_assign
(paren
id|byte
)paren
id|ncci
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping established %ld %02x %02x %02x-%02x&quot;
comma
id|ncci_mapping_bug
comma
id|ch
comma
id|force_ncci
comma
id|ch
comma
id|ncci
)paren
)paren
suffix:semicolon
)brace
r_return
(paren
id|ncci
)paren
suffix:semicolon
)brace
DECL|function|ncci_free_receive_buffers
r_static
r_void
id|ncci_free_receive_buffers
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|ncci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|APPL
op_star
id|appl
suffix:semicolon
id|word
id|i
comma
id|ncci_code
suffix:semicolon
id|dword
id|Id
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|word
)paren
(paren
id|plci-&gt;Id
)paren
)paren
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|ncci
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
id|ncci_mapping_bug
op_increment
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping appl expected %ld %08lx&quot;
comma
id|ncci_mapping_bug
comma
id|Id
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|appl
op_assign
id|plci-&gt;appl
suffix:semicolon
id|ncci_code
op_assign
id|ncci
op_or
(paren
(paren
(paren
id|word
)paren
id|a-&gt;Id
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|appl-&gt;MaxBuffer
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|appl-&gt;DataNCCI
(braket
id|i
)braket
op_eq
id|ncci_code
)paren
op_logical_and
(paren
(paren
(paren
id|byte
)paren
(paren
id|appl-&gt;DataFlags
(braket
id|i
)braket
op_rshift
l_int|8
)paren
)paren
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
id|appl-&gt;DataNCCI
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|ncci
op_assign
l_int|1
suffix:semicolon
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
suffix:semicolon
id|ncci
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
id|ncci_mapping_bug
op_increment
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping no appl %ld %08lx&quot;
comma
id|ncci_mapping_bug
comma
id|Id
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|appl
op_assign
id|plci-&gt;appl
suffix:semicolon
id|ncci_code
op_assign
id|ncci
op_or
(paren
(paren
(paren
id|word
)paren
id|a-&gt;Id
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|appl-&gt;MaxBuffer
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|appl-&gt;DataNCCI
(braket
id|i
)braket
op_eq
id|ncci_code
)paren
op_logical_and
(paren
(paren
(paren
id|byte
)paren
(paren
id|appl-&gt;DataFlags
(braket
id|i
)braket
op_rshift
l_int|8
)paren
)paren
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
id|appl-&gt;DataNCCI
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
DECL|function|cleanup_ncci_data
r_static
r_void
id|cleanup_ncci_data
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|ncci
)paren
(brace
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
r_if
c_cond
(paren
id|ncci
op_logical_and
(paren
id|plci-&gt;adapter-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
id|ncci_ptr
op_assign
op_amp
(paren
id|plci-&gt;adapter-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
(brace
r_while
c_loop
(paren
id|ncci_ptr-&gt;data_pending
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;data_sent
op_logical_or
(paren
id|ncci_ptr-&gt;DBuffer
(braket
id|ncci_ptr-&gt;data_out
)braket
dot
id|P
op_ne
id|plci-&gt;data_sent_ptr
)paren
)paren
id|TransmitBufferFree
(paren
id|plci-&gt;appl
comma
id|ncci_ptr-&gt;DBuffer
(braket
id|ncci_ptr-&gt;data_out
)braket
dot
id|P
)paren
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_out
)paren
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_out
op_eq
id|MAX_DATA_B3
)paren
id|ncci_ptr-&gt;data_out
op_assign
l_int|0
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_pending
)paren
op_decrement
suffix:semicolon
)brace
)brace
id|ncci_ptr-&gt;data_out
op_assign
l_int|0
suffix:semicolon
id|ncci_ptr-&gt;data_pending
op_assign
l_int|0
suffix:semicolon
id|ncci_ptr-&gt;data_ack_out
op_assign
l_int|0
suffix:semicolon
id|ncci_ptr-&gt;data_ack_pending
op_assign
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|ncci_remove
r_static
r_void
id|ncci_remove
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|ncci
comma
id|byte
id|preserve_ncci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|dword
id|Id
suffix:semicolon
id|word
id|i
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|word
)paren
(paren
id|plci-&gt;Id
)paren
)paren
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|preserve_ncci
)paren
id|ncci_free_receive_buffers
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ncci
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_ne
id|plci-&gt;Id
)paren
(brace
id|ncci_mapping_bug
op_increment
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping doesn&squot;t exist %ld %08lx %02x&quot;
comma
id|ncci_mapping_bug
comma
id|Id
comma
id|preserve_ncci
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping released %ld %08lx %02x %02x-%02x&quot;
comma
id|ncci_mapping_bug
comma
id|Id
comma
id|preserve_ncci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
comma
id|ncci
)paren
)paren
suffix:semicolon
id|a-&gt;ch_ncci
(braket
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|preserve_ncci
)paren
(brace
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|IDLE
suffix:semicolon
id|i
op_assign
id|plci-&gt;ncci_ring_list
suffix:semicolon
r_while
c_loop
(paren
(paren
id|i
op_ne
l_int|0
)paren
op_logical_and
(paren
id|a-&gt;ncci_next
(braket
id|i
)braket
op_ne
id|plci-&gt;ncci_ring_list
)paren
op_logical_and
(paren
id|a-&gt;ncci_next
(braket
id|i
)braket
op_ne
id|ncci
)paren
)paren
id|i
op_assign
id|a-&gt;ncci_next
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_ne
l_int|0
)paren
op_logical_and
(paren
id|a-&gt;ncci_next
(braket
id|i
)braket
op_eq
id|ncci
)paren
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
id|ncci
)paren
id|plci-&gt;ncci_ring_list
op_assign
l_int|0
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;ncci_ring_list
op_eq
id|ncci
)paren
id|plci-&gt;ncci_ring_list
op_assign
id|i
suffix:semicolon
id|a-&gt;ncci_next
(braket
id|i
)braket
op_assign
id|a-&gt;ncci_next
(braket
id|ncci
)braket
suffix:semicolon
)brace
id|a-&gt;ncci_next
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|ncci
op_assign
l_int|1
suffix:semicolon
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
suffix:semicolon
id|ncci
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
(brace
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCCI mapping released %ld %08lx %02x %02x-%02x&quot;
comma
id|ncci_mapping_bug
comma
id|Id
comma
id|preserve_ncci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
comma
id|ncci
)paren
)paren
suffix:semicolon
id|a-&gt;ch_ncci
(braket
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|preserve_ncci
)paren
(brace
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|IDLE
suffix:semicolon
id|a-&gt;ncci_next
(braket
id|ncci
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|preserve_ncci
)paren
id|plci-&gt;ncci_ring_list
op_assign
l_int|0
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* PLCI remove function                                             */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|plci_free_msg_in_queue
r_static
r_void
id|plci_free_msg_in_queue
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
(brace
id|i
op_assign
id|plci-&gt;msg_in_read_pos
suffix:semicolon
r_while
c_loop
(paren
id|i
op_ne
id|plci-&gt;msg_in_write_pos
)paren
(brace
r_if
c_cond
(paren
id|i
op_eq
id|plci-&gt;msg_in_wrap_pos
)paren
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|i
)braket
)paren
)paren
op_member_access_from_pointer
id|header.command
op_eq
id|_DATA_B3_R
)paren
(brace
id|TransmitBufferFree
(paren
id|plci-&gt;appl
comma
(paren
id|byte
op_star
)paren
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|i
)braket
)paren
)paren
op_member_access_from_pointer
id|info.data_b3_req.Data
)paren
)paren
suffix:semicolon
)brace
id|i
op_add_assign
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|i
)braket
)paren
)paren
op_member_access_from_pointer
id|header.length
op_plus
id|MSG_IN_OVERHEAD
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
suffix:semicolon
)brace
)brace
id|plci-&gt;msg_in_write_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_read_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_wrap_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
)brace
DECL|function|plci_remove
r_static
r_void
id|plci_remove
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;plci_remove(no plci)&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|init_internal_command_queue
(paren
id|plci
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;plci_remove(%x,tel=%x)&quot;
comma
id|plci-&gt;Id
comma
id|plci-&gt;tel
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_remove_check
c_func
(paren
id|plci
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_eq
l_int|0xff
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;D-channel X.25 plci-&gt;NL.Id:%0x&quot;
comma
id|plci-&gt;NL.Id
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;sig_remove_id
op_logical_and
(paren
id|plci-&gt;Sig.Id
op_logical_or
(paren
id|plci-&gt;req_in
op_ne
id|plci-&gt;req_out
)paren
op_logical_or
(paren
id|plci-&gt;nl_req
op_logical_or
id|plci-&gt;sig_req
)paren
)paren
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
id|ncci_remove
(paren
id|plci
comma
l_int|0
comma
id|FALSE
)paren
suffix:semicolon
id|plci_free_msg_in_queue
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;channels
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;appl
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
)paren
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Application Group function helpers                               */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|set_group_ind_mask
r_static
r_void
id|set_group_ind_mask
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|C_IND_MASK_DWORDS
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;group_optimization_mask_table
(braket
id|i
)braket
op_assign
l_int|0xffffffffL
suffix:semicolon
)brace
DECL|function|clear_group_ind_mask_bit
r_static
r_void
id|clear_group_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
(brace
id|plci-&gt;group_optimization_mask_table
(braket
id|b
op_rshift
l_int|5
)braket
op_and_assign
op_complement
(paren
l_int|1L
op_lshift
(paren
id|b
op_amp
l_int|0x1f
)paren
)paren
suffix:semicolon
)brace
DECL|function|test_group_ind_mask_bit
r_static
id|byte
id|test_group_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
(brace
r_return
(paren
(paren
id|plci-&gt;group_optimization_mask_table
(braket
id|b
op_rshift
l_int|5
)braket
op_amp
(paren
l_int|1L
op_lshift
(paren
id|b
op_amp
l_int|0x1f
)paren
)paren
)paren
op_ne
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* c_ind_mask operations for arbitrary MAX_APPL                     */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|clear_c_ind_mask
r_static
r_void
id|clear_c_ind_mask
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|C_IND_MASK_DWORDS
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;c_ind_mask_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|c_ind_mask_empty
r_static
id|byte
id|c_ind_mask_empty
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|i
OL
id|C_IND_MASK_DWORDS
)paren
op_logical_and
(paren
id|plci-&gt;c_ind_mask_table
(braket
id|i
)braket
op_eq
l_int|0
)paren
)paren
id|i
op_increment
suffix:semicolon
r_return
(paren
id|i
op_eq
id|C_IND_MASK_DWORDS
)paren
suffix:semicolon
)brace
DECL|function|set_c_ind_mask_bit
r_static
r_void
id|set_c_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
(brace
id|plci-&gt;c_ind_mask_table
(braket
id|b
op_rshift
l_int|5
)braket
op_or_assign
(paren
l_int|1L
op_lshift
(paren
id|b
op_amp
l_int|0x1f
)paren
)paren
suffix:semicolon
)brace
DECL|function|clear_c_ind_mask_bit
r_static
r_void
id|clear_c_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
(brace
id|plci-&gt;c_ind_mask_table
(braket
id|b
op_rshift
l_int|5
)braket
op_and_assign
op_complement
(paren
l_int|1L
op_lshift
(paren
id|b
op_amp
l_int|0x1f
)paren
)paren
suffix:semicolon
)brace
DECL|function|test_c_ind_mask_bit
r_static
id|byte
id|test_c_ind_mask_bit
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|b
)paren
(brace
r_return
(paren
(paren
id|plci-&gt;c_ind_mask_table
(braket
id|b
op_rshift
l_int|5
)braket
op_amp
(paren
l_int|1L
op_lshift
(paren
id|b
op_amp
l_int|0x1f
)paren
)paren
)paren
op_ne
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|dump_c_ind_mask
r_static
r_void
id|dump_c_ind_mask
(paren
id|PLCI
op_star
id|plci
)paren
(brace
r_static
r_char
id|hex_digit_table
(braket
l_int|0x10
)braket
op_assign
(brace
l_char|&squot;0&squot;
comma
l_char|&squot;1&squot;
comma
l_char|&squot;2&squot;
comma
l_char|&squot;3&squot;
comma
l_char|&squot;4&squot;
comma
l_char|&squot;5&squot;
comma
l_char|&squot;6&squot;
comma
l_char|&squot;7&squot;
comma
l_char|&squot;8&squot;
comma
l_char|&squot;9&squot;
comma
l_char|&squot;a&squot;
comma
l_char|&squot;b&squot;
comma
l_char|&squot;c&squot;
comma
l_char|&squot;d&squot;
comma
l_char|&squot;e&squot;
comma
l_char|&squot;f&squot;
)brace
suffix:semicolon
id|word
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|dword
id|d
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_char
id|buf
(braket
l_int|40
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|C_IND_MASK_DWORDS
suffix:semicolon
id|i
op_add_assign
l_int|4
)paren
(brace
id|p
op_assign
id|buf
op_plus
l_int|36
suffix:semicolon
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|4
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_plus
id|j
OL
id|C_IND_MASK_DWORDS
)paren
(brace
id|d
op_assign
id|plci-&gt;c_ind_mask_table
(braket
id|i
op_plus
id|j
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|8
suffix:semicolon
id|k
op_increment
)paren
(brace
op_star
(paren
op_decrement
id|p
)paren
op_assign
id|hex_digit_table
(braket
id|d
op_amp
l_int|0xf
)braket
suffix:semicolon
id|d
op_rshift_assign
l_int|4
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|i
op_ne
l_int|0
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|8
suffix:semicolon
id|k
op_increment
)paren
op_star
(paren
op_decrement
id|p
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
)brace
op_star
(paren
op_decrement
id|p
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;c_ind_mask =%s&quot;
comma
(paren
r_char
op_star
)paren
id|p
)paren
)paren
suffix:semicolon
)brace
)brace
DECL|macro|dump_plcis
mdefine_line|#define dump_plcis(a)
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* translation function for each message                            */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|connect_req
id|byte
id|connect_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ch
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|Info
suffix:semicolon
id|word
id|CIP
suffix:semicolon
id|byte
id|LinkLayer
suffix:semicolon
id|API_PARSE
op_star
id|ai
suffix:semicolon
id|API_PARSE
op_star
id|bp
suffix:semicolon
id|API_PARSE
id|ai_parms
(braket
l_int|5
)braket
suffix:semicolon
id|word
id|channel
op_assign
l_int|0
suffix:semicolon
id|dword
id|ch_mask
suffix:semicolon
id|byte
id|m
suffix:semicolon
r_static
id|byte
id|esc_chi
(braket
l_int|35
)braket
op_assign
(brace
l_int|0x02
comma
l_int|0x18
comma
l_int|0x01
)brace
suffix:semicolon
r_static
id|byte
id|lli
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x00
)brace
suffix:semicolon
id|byte
id|noCh
op_assign
l_int|0
suffix:semicolon
id|word
id|dir
op_assign
l_int|0
suffix:semicolon
id|byte
op_star
id|p_chi
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ai_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_req(%d)&quot;
comma
id|parms-&gt;length
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_if
c_cond
(paren
id|a
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;adapter_disabled
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;adapter disabled&quot;
)paren
)paren
suffix:semicolon
id|Id
op_assign
(paren
(paren
id|word
)paren
l_int|1
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|_L1_ERROR
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|Info
op_assign
l_int|0
suffix:semicolon
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|plci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
multiline_comment|/* check &squot;external controller&squot; bit for codec support */
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|plci-&gt;Id
op_assign
l_int|0
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_return
l_int|2
suffix:semicolon
)brace
)brace
id|ai
op_assign
op_amp
id|parms
(braket
l_int|9
)braket
suffix:semicolon
id|bp
op_assign
op_amp
id|parms
(braket
l_int|5
)braket
suffix:semicolon
id|ch
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|bp-&gt;length
)paren
(brace
id|LinkLayer
op_assign
id|bp-&gt;info
(braket
l_int|3
)braket
suffix:semicolon
)brace
r_else
id|LinkLayer
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ai-&gt;length
)paren
(brace
id|ch
op_assign
l_int|0xffff
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
op_amp
id|ai-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|ai-&gt;length
comma
l_string|&quot;ssss&quot;
comma
id|ai_parms
)paren
)paren
(brace
id|ch
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
)paren
(brace
id|ch
op_assign
id|GET_WORD
c_func
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
op_plus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ch
OG
l_int|4
)paren
(brace
id|ch
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* safety -&gt; ignore ChannelID */
r_if
c_cond
(paren
id|ch
op_eq
l_int|4
)paren
multiline_comment|/* explizit CHI in message */
(brace
multiline_comment|/* check length of B-CH struct */
r_if
c_cond
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
)paren
(braket
l_int|3
)braket
op_ge
l_int|1
)paren
(brace
r_if
c_cond
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
)paren
(braket
l_int|4
)braket
op_eq
id|CHI
)paren
(brace
id|p_chi
op_assign
op_amp
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
)paren
(braket
l_int|5
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|p_chi
op_assign
op_amp
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
)paren
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p_chi
(braket
l_int|0
)braket
OG
l_int|35
)paren
multiline_comment|/* check length of channel ID */
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
r_else
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch
op_eq
l_int|3
op_logical_and
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
op_ge
l_int|7
op_logical_and
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
op_le
l_int|36
)paren
(brace
id|dir
op_assign
id|GET_WORD
c_func
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
op_plus
l_int|3
)paren
suffix:semicolon
id|ch_mask
op_assign
l_int|0
suffix:semicolon
id|m
op_assign
l_int|0x3f
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_plus
l_int|5
op_le
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
(braket
id|i
op_plus
l_int|5
)braket
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
(braket
id|i
op_plus
l_int|5
)braket
op_or
id|m
)paren
op_ne
l_int|0xff
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ch_mask
op_eq
l_int|0
)paren
id|channel
op_assign
id|i
suffix:semicolon
id|ch_mask
op_or_assign
l_int|1L
op_lshift
id|i
suffix:semicolon
)brace
)brace
id|m
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_mask
op_eq
l_int|0
)paren
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_if
c_cond
(paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
op_eq
l_int|36
)paren
op_logical_or
(paren
id|ch_mask
op_ne
(paren
(paren
id|dword
)paren
(paren
l_int|1L
op_lshift
id|channel
)paren
)paren
)paren
)paren
(brace
id|esc_chi
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
op_minus
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_plus
l_int|5
op_le
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|esc_chi
(braket
id|i
op_plus
l_int|3
)braket
op_assign
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
(braket
id|i
op_plus
l_int|5
)braket
suffix:semicolon
)brace
)brace
r_else
id|esc_chi
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|esc_chi
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
id|channel
suffix:semicolon
id|plci-&gt;b_channel
op_assign
(paren
id|byte
)paren
id|channel
suffix:semicolon
multiline_comment|/* not correct for ETSI ch 17..31 */
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
id|esc_chi
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|LOCAL_CONNECT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_FORCE_OUTG_NL
suffix:semicolon
)brace
multiline_comment|/* dir 0=DTE, 1=DCE */
)brace
)brace
)brace
)brace
r_else
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ch=%x,dir=%x,p_ch=%d&quot;
comma
id|ch
comma
id|dir
comma
id|channel
)paren
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
id|_CONNECT_R
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
multiline_comment|/* x.31 or D-ch free SAPI in LinkLayer? */
r_if
c_cond
(paren
id|ch
op_eq
l_int|1
op_logical_and
id|LinkLayer
op_ne
l_int|3
op_logical_and
id|LinkLayer
op_ne
l_int|12
)paren
(brace
id|noCh
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ch
op_eq
l_int|0
op_logical_or
id|ch
op_eq
l_int|2
op_logical_or
id|noCh
op_logical_or
id|ch
op_eq
l_int|3
op_logical_or
id|ch
op_eq
l_int|4
)paren
op_logical_and
op_logical_neg
id|Info
)paren
(brace
multiline_comment|/* B-channel used for B3 connections (ch==0), or no B channel    */
multiline_comment|/* is used (ch==2) or perm. connection (3) is used  do a CALL    */
r_if
c_cond
(paren
id|noCh
)paren
(brace
id|Info
op_assign
id|add_b1
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
comma
l_int|2
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* no resource    */
r_else
id|Info
op_assign
id|add_b1
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|OAD
comma
op_amp
id|parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|OSA
comma
op_amp
id|parms
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|BC
comma
op_amp
id|parms
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|LLC
comma
op_amp
id|parms
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|HLC
comma
op_amp
id|parms
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|CIP
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
OL
l_int|29
)paren
(brace
id|add_p
c_func
(paren
id|plci
comma
id|BC
comma
id|cip_bc
(braket
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)braket
(braket
id|a-&gt;u_law
)braket
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|HLC
comma
id|cip_hlc
(braket
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)braket
)paren
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ch
op_eq
l_int|1
)paren
(brace
multiline_comment|/* D-Channel used for B3 connections */
id|plci-&gt;Sig.Id
op_assign
l_int|0xff
suffix:semicolon
id|Info
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
op_logical_and
id|ch
op_ne
l_int|2
op_logical_and
op_logical_neg
id|noCh
)paren
(brace
id|Info
op_assign
id|add_b23
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;tel
op_logical_and
op_logical_neg
id|plci-&gt;adv_nl
)paren
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|ASSIGN
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_if
c_cond
(paren
id|ch
op_eq
l_int|0
op_logical_or
id|ch
op_eq
l_int|2
op_logical_or
id|ch
op_eq
l_int|3
op_logical_or
id|noCh
op_logical_or
id|ch
op_eq
l_int|4
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
(brace
id|api_save_msg
c_func
(paren
id|parms
comma
l_string|&quot;wsssssssss&quot;
comma
op_amp
id|plci-&gt;saved_msg
)paren
suffix:semicolon
id|plci-&gt;spoofed_msg
op_assign
id|CALL_REQ
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Spoof&quot;
)paren
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch
op_eq
l_int|4
)paren
(brace
id|add_p
c_func
(paren
id|plci
comma
id|CHI
comma
id|p_chi
)paren
suffix:semicolon
)brace
id|add_s
c_func
(paren
id|plci
comma
id|CPN
comma
op_amp
id|parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|DSA
comma
op_amp
id|parms
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|noCh
)paren
(brace
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
l_string|&quot;&bslash;x02&bslash;x18&bslash;xfd&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* D-channel, no B-L3 */
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|9
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;command
op_assign
id|PERM_LIST_REQ
suffix:semicolon
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|LISTEN_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
id|plci-&gt;Id
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
l_int|2
suffix:semicolon
)brace
DECL|function|connect_res
id|byte
id|connect_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|i
comma
id|Info
suffix:semicolon
id|word
id|Reject
suffix:semicolon
r_static
id|byte
id|cau_t
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0x90
comma
l_int|0x91
comma
l_int|0xac
comma
l_int|0x9d
comma
l_int|0x86
comma
l_int|0xd8
comma
l_int|0x9b
)brace
suffix:semicolon
r_static
id|byte
id|esc_t
(braket
)braket
op_assign
(brace
l_int|0x03
comma
l_int|0x08
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
id|API_PARSE
op_star
id|ai
suffix:semicolon
id|API_PARSE
id|ai_parms
(braket
l_int|5
)braket
suffix:semicolon
id|word
id|ch
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_res(no plci)&quot;
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
multiline_comment|/* no plci, no send */
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_res(State=0x%x)&quot;
comma
id|plci-&gt;State
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ai_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|ai
op_assign
op_amp
id|parms
(braket
l_int|5
)braket
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ai-&gt;length=%d&quot;
comma
id|ai-&gt;length
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ai-&gt;length
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
op_amp
id|ai-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|ai-&gt;length
comma
l_string|&quot;ssss&quot;
comma
id|ai_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ai_parms[0].length=%d/0x%x&quot;
comma
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
comma
id|GET_WORD
c_func
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
op_plus
l_int|1
)paren
)paren
)paren
suffix:semicolon
id|ch
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|length
)paren
(brace
id|ch
op_assign
id|GET_WORD
c_func
(paren
id|ai_parms
(braket
l_int|0
)braket
dot
id|info
op_plus
l_int|1
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;BCH-I=0x%x&quot;
comma
id|ch
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_CONNECTED_ALERT
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Connected Alert Call_Res&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
id|add_s
c_func
(paren
id|plci
comma
id|CONN_NR
comma
op_amp
id|parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|LLC
comma
op_amp
id|parms
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_CON_ACCEPT
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_RES
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
(brace
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|appl-&gt;Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|dump_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
id|Reject
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Reject=0x%x&quot;
comma
id|Reject
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Reject
)paren
(brace
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|Reject
op_amp
l_int|0xff00
)paren
op_eq
l_int|0x3400
)paren
(brace
id|esc_t
(braket
l_int|2
)braket
op_assign
(paren
(paren
id|byte
)paren
(paren
id|Reject
op_amp
l_int|0x00ff
)paren
)paren
op_or
l_int|0x80
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
id|esc_t
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REJECT
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|Reject
op_eq
l_int|1
op_logical_or
id|Reject
OG
l_int|9
)paren
(brace
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|esc_t
(braket
l_int|2
)braket
op_assign
id|cau_t
(braket
(paren
id|Reject
op_amp
l_int|0x000f
)paren
)braket
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
id|esc_t
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REJECT
comma
l_int|0
)paren
suffix:semicolon
)brace
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|_OTHER_APPL_CONNECTED
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_res(error from AdvCodecSupport)&quot;
)paren
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
op_logical_and
id|a-&gt;AdvCodecPLCI
)paren
(brace
id|Info
op_assign
id|add_b23
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_res(error from add_b23)&quot;
)paren
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adv_nl
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|ASSIGN
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|plci-&gt;tel
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ch
op_ne
l_int|2
)paren
(brace
id|Info
op_assign
id|add_b23
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_res(error from add_b23 2)&quot;
)paren
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|ASSIGN
comma
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
(brace
id|api_save_msg
c_func
(paren
id|parms
comma
l_string|&quot;wsssss&quot;
comma
op_amp
id|plci-&gt;saved_msg
)paren
suffix:semicolon
id|plci-&gt;spoofed_msg
op_assign
id|CALL_RES
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Spoof&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|add_b1
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|1
)braket
comma
id|ch
comma
id|plci-&gt;B1_facilities
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
id|add_s
c_func
(paren
id|plci
comma
id|CONN_NR
comma
op_amp
id|parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|LLC
comma
op_amp
id|parms
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_CON_ACCEPT
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_RES
comma
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|_OTHER_APPL_CONNECTED
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|connect_a_res
id|byte
id|connect_a_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_a_res&quot;
)paren
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|disconnect_req
id|byte
id|disconnect_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|i
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;disconnect_req&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
(brace
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|appl-&gt;Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_logical_and
id|plci-&gt;appl
)paren
(brace
id|Info
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|INC_DIS_PENDING
)paren
(brace
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|msg
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|mixer_remove
(paren
id|plci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_DIS_PENDING
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|appl
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|disconnect_res
id|byte
id|disconnect_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;disconnect_res&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
multiline_comment|/* clear ind mask bit, just in case of collsion of          */
multiline_comment|/* DISCONNECT_IND and CONNECT_RES                           */
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|appl-&gt;Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|ncci_free_receive_buffers
(paren
id|plci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_remove_check
c_func
(paren
id|plci
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|SUSPENDING
)paren
(brace
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|SUSPENDING
)paren
(brace
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;chs=%d&quot;
comma
id|plci-&gt;channels
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;channels
)paren
(brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|listen_req
id|byte
id|listen_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|Info
suffix:semicolon
id|byte
id|i
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;listen_req(Appl=0x%x)&quot;
comma
id|appl-&gt;Id
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_if
c_cond
(paren
id|a
)paren
(brace
id|Info
op_assign
l_int|0
suffix:semicolon
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
id|GET_DWORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|a-&gt;CIP_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
id|GET_DWORD
c_func
(paren
id|parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CIP_MASK=0x%lx&quot;
comma
id|GET_DWORD
c_func
(paren
id|parms
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect provides */
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_or_assign
l_int|0x10
suffix:semicolon
multiline_comment|/* call progression infos    */
)brace
multiline_comment|/* check if external controller listen and switch listen on or off*/
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
op_logical_and
id|GET_DWORD
c_func
(paren
id|parms
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|ON_BOARD_CODEC
)paren
(brace
id|dummy_plci.State
op_assign
id|IDLE
suffix:semicolon
id|a-&gt;codec_listen
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
op_amp
id|dummy_plci
suffix:semicolon
id|a-&gt;TelOAD
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|parms
(braket
l_int|3
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|parms
(braket
l_int|3
)braket
dot
id|length
op_ge
id|i
op_logical_and
id|i
OL
l_int|22
suffix:semicolon
id|i
op_increment
)paren
(brace
id|a-&gt;TelOAD
(braket
id|i
)braket
op_assign
id|parms
(braket
l_int|3
)braket
dot
id|info
(braket
id|i
)braket
suffix:semicolon
)brace
id|a-&gt;TelOAD
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;TelOSA
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|parms
(braket
l_int|4
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|parms
(braket
l_int|4
)braket
dot
id|length
op_ge
id|i
op_logical_and
id|i
OL
l_int|22
suffix:semicolon
id|i
op_increment
)paren
(brace
id|a-&gt;TelOSA
(braket
id|i
)braket
op_assign
id|parms
(braket
l_int|4
)braket
dot
id|info
(braket
id|i
)braket
suffix:semicolon
)brace
id|a-&gt;TelOSA
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|Info
op_assign
l_int|0x2002
suffix:semicolon
multiline_comment|/* wrong controller, codec not supported */
)brace
r_else
(brace
multiline_comment|/* clear listen */
id|a-&gt;codec_listen
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
(paren
id|PLCI
op_star
)paren
l_int|0
suffix:semicolon
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_LISTEN_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a
)paren
id|listen_check
c_func
(paren
id|a
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|info_req
id|byte
id|info_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|i
suffix:semicolon
id|API_PARSE
op_star
id|ai
suffix:semicolon
id|PLCI
op_star
id|rc_plci
op_assign
l_int|NULL
suffix:semicolon
id|API_PARSE
id|ai_parms
(braket
l_int|5
)braket
suffix:semicolon
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;info_req&quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ai_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|ai
op_assign
op_amp
id|msg
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ai-&gt;length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|ai-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|ai-&gt;length
comma
l_string|&quot;ssss&quot;
comma
id|ai_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;AddInfo wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|a
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
op_logical_and
id|plci
)paren
(brace
multiline_comment|/* no fac, with CPN, or KEY */
id|rc_plci
op_assign
id|plci
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ai_parms
(braket
l_int|3
)braket
dot
id|length
op_logical_and
id|plci-&gt;State
op_logical_and
(paren
id|msg
(braket
l_int|0
)braket
dot
id|length
op_logical_or
id|ai_parms
(braket
l_int|1
)braket
dot
id|length
)paren
)paren
(brace
multiline_comment|/* overlap sending option */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;OvlSnd&quot;
)paren
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|CPN
comma
op_amp
id|msg
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|KEY
comma
op_amp
id|ai_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|INFO_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;State
op_logical_and
id|ai_parms
(braket
l_int|2
)braket
dot
id|length
)paren
(brace
multiline_comment|/* User_Info option */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;UUI&quot;
)paren
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|UUI
comma
op_amp
id|ai_parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|USER_DATA
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;State
op_logical_and
id|ai_parms
(braket
l_int|3
)braket
dot
id|length
)paren
(brace
multiline_comment|/* Facility option */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;FAC&quot;
)paren
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|CPN
comma
op_amp
id|msg
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|msg
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|FACILITY_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
(paren
id|ai_parms
(braket
l_int|1
)braket
dot
id|length
op_logical_or
id|ai_parms
(braket
l_int|2
)braket
dot
id|length
op_logical_or
id|ai_parms
(braket
l_int|3
)braket
dot
id|length
)paren
op_logical_and
op_logical_neg
id|Info
)paren
(brace
multiline_comment|/* NCR_Facility option -&gt; send UUI and Keypad too */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCR_FAC&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rc_plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|appl-&gt;NullCREnable
op_assign
id|TRUE
suffix:semicolon
id|rc_plci-&gt;internal_command
op_assign
id|C_NCR_FAC_REQ
suffix:semicolon
id|rc_plci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|add_p
c_func
(paren
id|rc_plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rc_plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rc_plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rc_plci
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|add_s
c_func
(paren
id|rc_plci
comma
id|CPN
comma
op_amp
id|msg
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|rc_plci
comma
op_amp
id|msg
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rc_plci
comma
id|NCR_FACILITY
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rc_plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
multiline_comment|/* for application controlled supplementary services    */
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|rc_plci
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|send_req
c_func
(paren
id|rc_plci
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* appl is not assigned to a PLCI or error condition */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;localInfoCon&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|info_res
id|byte
id|info_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;info_res&quot;
)paren
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|alert_req
id|byte
id|alert_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
suffix:semicolon
id|byte
id|ret
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;alert_req&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|ret
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
id|Info
op_assign
id|_ALERT_IGNORED
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|INC_CON_ALERT
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
)paren
(brace
id|Info
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_CON_ALERT
suffix:semicolon
id|add_ai
c_func
(paren
id|plci
comma
op_amp
id|msg
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_ALERT
comma
l_int|0
)paren
suffix:semicolon
id|ret
op_assign
l_int|1
suffix:semicolon
)brace
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_ALERT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|facility_req
id|byte
id|facility_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|word
id|i
op_assign
l_int|0
suffix:semicolon
id|word
id|selector
suffix:semicolon
id|word
id|SSreq
suffix:semicolon
r_int
id|relatedPLCIvalue
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|relatedadapter
suffix:semicolon
id|byte
op_star
id|SSparms
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
id|RCparms
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x00&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
id|byte
id|SSstruct
(braket
)braket
op_assign
l_string|&quot;&bslash;x09&bslash;x00&bslash;x00&bslash;x06&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&quot;
suffix:semicolon
id|API_PARSE
op_star
id|parms
suffix:semicolon
id|API_PARSE
id|ss_parms
(braket
l_int|11
)braket
suffix:semicolon
id|PLCI
op_star
id|rplci
suffix:semicolon
id|byte
id|cai
(braket
l_int|15
)braket
suffix:semicolon
id|dword
id|d
suffix:semicolon
id|API_PARSE
id|dummy
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;facility_req&quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|9
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ss_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|parms
op_assign
op_amp
id|msg
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;wrong Ctrl&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
)brace
id|selector
op_assign
id|GET_WORD
c_func
(paren
id|msg
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_switch
c_cond
(paren
id|selector
)paren
(brace
r_case
id|SELECTOR_HANDSET
suffix:colon
id|Info
op_assign
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
id|HOOK_SUPPORT
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SELECTOR_SU_SERV
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|msg
(braket
l_int|1
)braket
dot
id|length
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|SSreq
op_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|RCparms
(braket
l_int|1
)braket
comma
id|SSreq
)paren
suffix:semicolon
id|SSparms
op_assign
id|RCparms
suffix:semicolon
r_switch
c_cond
(paren
id|SSreq
)paren
(brace
r_case
id|S_GET_SUPPORTED_SERVICES
suffix:colon
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_DWORD
c_func
(paren
op_amp
id|SSstruct
(braket
l_int|6
)braket
comma
id|MASK_TERMINAL_PORTABILITY
)paren
suffix:semicolon
id|SSparms
op_assign
(paren
id|byte
op_star
)paren
id|SSstruct
suffix:semicolon
r_break
suffix:semicolon
)brace
id|rplci-&gt;internal_command
op_assign
id|GETSERV_REQ_PEND
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SUPPORTED
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_LISTEN
suffix:colon
r_if
c_cond
(paren
id|parms-&gt;length
op_eq
l_int|7
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbd&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|a-&gt;Notification_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
id|GET_DWORD
c_func
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Notification_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|SMASK_MWI
)paren
multiline_comment|/* MWI active? */
(brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
r_break
suffix:semicolon
)brace
id|rplci-&gt;internal_command
op_assign
id|GET_MWI_STATE
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|MWI_POLL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|S_HOLD
suffix:colon
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;ws&quot;
comma
id|ss_parms
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|plci-&gt;State
op_logical_and
id|plci-&gt;SuppState
op_eq
id|IDLE
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|HOLD_REQUEST
suffix:semicolon
id|plci-&gt;command
op_assign
id|C_HOLD_REQ
suffix:semicolon
id|add_s
c_func
(paren
id|plci
comma
id|CAI
comma
op_amp
id|ss_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_HOLD
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
r_case
id|S_RETRIEVE
suffix:colon
r_if
c_cond
(paren
id|plci
op_logical_and
id|plci-&gt;State
op_logical_and
id|plci-&gt;SuppState
op_eq
id|CALL_HELD
)paren
(brace
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
)brace
)brace
r_else
id|plci-&gt;tel
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;SuppState
op_assign
id|RETRIEVE_REQUEST
suffix:semicolon
id|plci-&gt;command
op_assign
id|C_RETRIEVE_REQ
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
(brace
id|plci-&gt;spoofed_msg
op_assign
id|CALL_RETRIEVE
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Spoof&quot;
)paren
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_RETRIEVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_else
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
r_case
id|S_SUSPEND
suffix:colon
r_if
c_cond
(paren
id|parms-&gt;length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbs&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci
op_logical_and
id|plci-&gt;State
)paren
(brace
id|add_s
c_func
(paren
id|plci
comma
id|CAI
comma
op_amp
id|ss_parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
id|SUSPEND_REQ
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|SUSPEND
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|SUSPENDING
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
r_case
id|S_RESUME
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
)brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|rplci-&gt;tel
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
multiline_comment|/* check &squot;external controller&squot; bit for codec support */
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|rplci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|rplci-&gt;Id
op_assign
l_int|0
suffix:semicolon
id|Info
op_assign
l_int|0x300A
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|parms-&gt;length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbs&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|rplci-&gt;Id
op_assign
l_int|0
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|dummy.length
op_assign
l_int|0
suffix:semicolon
id|dummy.info
op_assign
l_string|&quot;&bslash;x00&quot;
suffix:semicolon
id|add_b1
c_func
(paren
id|rplci
comma
op_amp
id|dummy
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|rplci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|rplci
comma
id|CAI
comma
op_amp
id|ss_parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|rplci-&gt;command
op_assign
id|RESUME_REQ
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|RESUME
comma
l_int|0
)paren
suffix:semicolon
id|rplci-&gt;State
op_assign
id|RESUMING
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CONF_BEGIN
suffix:colon
multiline_comment|/* Request */
r_case
id|S_CONF_DROP
suffix:colon
r_case
id|S_CONF_ISOLATE
suffix:colon
r_case
id|S_CONF_REATTACH
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbd&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci
op_logical_and
id|plci-&gt;State
op_logical_and
(paren
(paren
id|plci-&gt;SuppState
op_eq
id|IDLE
)paren
op_logical_or
(paren
id|plci-&gt;SuppState
op_eq
id|CALL_HELD
)paren
)paren
)paren
(brace
id|d
op_assign
id|GET_DWORD
c_func
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d
op_ge
l_int|0x80
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;ptyState
op_assign
(paren
id|byte
)paren
id|SSreq
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
r_switch
c_cond
(paren
id|SSreq
)paren
(brace
r_case
id|S_CONF_BEGIN
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CONF_BEGIN
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|CONF_BEGIN_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CONF_DROP
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CONF_DROP
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|CONF_DROP_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CONF_ISOLATE
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CONF_ISOLATE
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|CONF_ISOLATE_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CONF_REATTACH
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CONF_REATTACH
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|CONF_REATTACH_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
)brace
id|cai
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
multiline_comment|/* Conference Size resp. PartyId */
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
r_case
id|S_ECT
suffix:colon
r_case
id|S_3PTY_BEGIN
suffix:colon
r_case
id|S_3PTY_END
suffix:colon
r_case
id|S_CONF_ADD
suffix:colon
r_if
c_cond
(paren
id|parms-&gt;length
op_eq
l_int|7
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbd&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|parms-&gt;length
op_eq
l_int|8
)paren
multiline_comment|/* workaround for the T-View-S */
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbdb&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|msg
(braket
l_int|1
)braket
dot
id|length
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
id|relatedPLCIvalue
op_assign
id|GET_DWORD
c_func
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
id|relatedPLCIvalue
op_and_assign
l_int|0x0000FFFF
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;PTY/ECT/addCONF,relPLCI=%lx&quot;
comma
id|relatedPLCIvalue
)paren
)paren
suffix:semicolon
multiline_comment|/* controller starts with 0 up to (max_adapter - 1) */
r_if
c_cond
(paren
(paren
(paren
id|relatedPLCIvalue
op_amp
l_int|0x7f
)paren
op_eq
l_int|0
)paren
op_logical_or
(paren
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|relatedPLCIvalue
op_amp
l_int|0x7f
)paren
)paren
op_eq
l_int|0
)paren
op_logical_or
(paren
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|relatedPLCIvalue
op_amp
l_int|0x7f
)paren
)paren
OG
id|max_adapter
)paren
)paren
(brace
r_if
c_cond
(paren
id|SSreq
op_eq
id|S_3PTY_END
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;wrong Controller use 2nd PLCI=PLCI&quot;
)paren
)paren
suffix:semicolon
id|rplci
op_assign
id|plci
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|relatedadapter
op_assign
op_amp
id|adapter
(braket
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|relatedPLCIvalue
op_amp
l_int|0x7f
)paren
)paren
op_minus
l_int|1
)braket
suffix:semicolon
id|relatedPLCIvalue
op_rshift_assign
l_int|8
suffix:semicolon
multiline_comment|/* find PLCI PTR*/
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|rplci
op_assign
l_int|NULL
suffix:semicolon
id|i
OL
id|relatedadapter-&gt;max_plci
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|relatedadapter-&gt;plci
(braket
id|i
)braket
dot
id|Id
op_eq
(paren
id|byte
)paren
id|relatedPLCIvalue
)paren
(brace
id|rplci
op_assign
op_amp
id|relatedadapter-&gt;plci
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|rplci
op_logical_or
op_logical_neg
id|relatedPLCIvalue
)paren
(brace
r_if
c_cond
(paren
id|SSreq
op_eq
id|S_3PTY_END
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;use 2nd PLCI=PLCI&quot;
)paren
)paren
suffix:semicolon
id|rplci
op_assign
id|plci
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n;            dbug(1,dprintf(&quot;rplci:%x&quot;,rplci));&n;            dbug(1,dprintf(&quot;plci:%x&quot;,plci));&n;            dbug(1,dprintf(&quot;rplci-&gt;ptyState:%x&quot;,rplci-&gt;ptyState));&n;            dbug(1,dprintf(&quot;plci-&gt;ptyState:%x&quot;,plci-&gt;ptyState));&n;            dbug(1,dprintf(&quot;SSreq:%x&quot;,SSreq));&n;            dbug(1,dprintf(&quot;rplci-&gt;internal_command:%x&quot;,rplci-&gt;internal_command));&n;            dbug(1,dprintf(&quot;rplci-&gt;appl:%x&quot;,rplci-&gt;appl));&n;            dbug(1,dprintf(&quot;rplci-&gt;Id:%x&quot;,rplci-&gt;Id));&n;*/
multiline_comment|/* send PTY/ECT req, cannot check all states because of US stuff */
r_if
c_cond
(paren
op_logical_neg
id|rplci-&gt;internal_command
op_logical_and
id|rplci-&gt;appl
)paren
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;relatedPTYPLCI
op_assign
id|plci
suffix:semicolon
id|plci-&gt;relatedPTYPLCI
op_assign
id|rplci
suffix:semicolon
id|rplci-&gt;ptyState
op_assign
(paren
id|byte
)paren
id|SSreq
suffix:semicolon
r_if
c_cond
(paren
id|SSreq
op_eq
id|S_ECT
)paren
(brace
id|rplci-&gt;internal_command
op_assign
id|ECT_REQ_PEND
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|ECT_EXECUTE
suffix:semicolon
id|rplci-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;vsprot
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;vsprotdialect
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprotdialect
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|SSreq
op_eq
id|S_CONF_ADD
)paren
(brace
id|rplci-&gt;internal_command
op_assign
id|CONF_ADD_REQ_PEND
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|CONF_ADD
suffix:semicolon
)brace
r_else
(brace
id|rplci-&gt;internal_command
op_assign
id|PTY_REQ_PEND
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|SSreq
op_minus
l_int|3
)paren
suffix:semicolon
)brace
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_ne
id|rplci
)paren
multiline_comment|/* explicit invocation */
(brace
id|cai
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
id|plci-&gt;Sig.Id
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;explicit invocation&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;implicit invocation&quot;
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;Wrong line&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
l_int|0x3010
suffix:semicolon
multiline_comment|/* wrong state           */
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|S_CALL_DEFLECTION
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbwss&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* reuse unused screening indicator */
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|CD_REQ_PEND
suffix:semicolon
id|appl-&gt;CDEnable
op_assign
id|TRUE
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|CALL_DEFLECTION
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CPN
comma
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CALL_FORWARDING_START
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbdwwsss&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* reuse unused screening indicator */
id|rplci-&gt;internal_command
op_assign
id|CF_START_PEND
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|appl-&gt;S_Handle
op_assign
id|GET_DWORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
l_int|0x70
op_or
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* Function */
id|cai
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* Basic Service */
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|OAD
comma
id|ss_parms
(braket
l_int|5
)braket
dot
id|info
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CPN
comma
id|ss_parms
(braket
l_int|6
)braket
dot
id|info
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_INTERROGATE_DIVERSION
suffix:colon
r_case
id|S_INTERROGATE_NUMBERS
suffix:colon
r_case
id|S_CALL_FORWARDING_STOP
suffix:colon
r_case
id|S_CCBS_REQUEST
suffix:colon
r_case
id|S_CCBS_DEACTIVATE
suffix:colon
r_case
id|S_CCBS_INTERROGATE
suffix:colon
r_switch
c_cond
(paren
id|SSreq
)paren
(brace
r_case
id|S_INTERROGATE_NUMBERS
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbd&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|S_CCBS_REQUEST
suffix:colon
r_case
id|S_CCBS_DEACTIVATE
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbdw&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|S_CCBS_INTERROGATE
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbdws&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbdwws&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Info
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|SSreq
)paren
(brace
r_case
id|S_INTERROGATE_DIVERSION
suffix:colon
multiline_comment|/* use cai with S_SERVICE below */
id|cai
(braket
l_int|1
)braket
op_assign
l_int|0x60
op_or
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* Function */
id|rplci-&gt;internal_command
op_assign
id|INTERR_DIVERSION_REQ_PEND
suffix:semicolon
multiline_comment|/* move to rplci if assigned */
r_break
suffix:semicolon
r_case
id|S_INTERROGATE_NUMBERS
suffix:colon
multiline_comment|/* use cai with S_SERVICE below */
id|cai
(braket
l_int|1
)braket
op_assign
id|DIVERSION_INTERROGATE_NUM
suffix:semicolon
multiline_comment|/* Function */
id|rplci-&gt;internal_command
op_assign
id|INTERR_NUMBERS_REQ_PEND
suffix:semicolon
multiline_comment|/* move to rplci if assigned */
r_break
suffix:semicolon
r_case
id|S_CALL_FORWARDING_STOP
suffix:colon
id|rplci-&gt;internal_command
op_assign
id|CF_STOP_PEND
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
l_int|0x80
op_or
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* Function */
r_break
suffix:semicolon
r_case
id|S_CCBS_REQUEST
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CCBS_REQUEST
suffix:semicolon
id|rplci-&gt;internal_command
op_assign
id|CCBS_REQUEST_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CCBS_DEACTIVATE
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CCBS_DEACTIVATE
suffix:semicolon
id|rplci-&gt;internal_command
op_assign
id|CCBS_DEACTIVATE_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CCBS_INTERROGATE
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
id|CCBS_INTERROGATE
suffix:semicolon
id|rplci-&gt;internal_command
op_assign
id|CCBS_INTERROGATE_REQ_PEND
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|cai
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
)brace
id|appl-&gt;S_Handle
op_assign
id|GET_DWORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|SSreq
)paren
(brace
r_case
id|S_INTERROGATE_NUMBERS
suffix:colon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CCBS_REQUEST
suffix:colon
r_case
id|S_CCBS_DEACTIVATE
suffix:colon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|3
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|2
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_CCBS_INTERROGATE
suffix:colon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|3
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|2
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|OAD
comma
id|ss_parms
(braket
l_int|4
)braket
dot
id|info
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* Basic Service */
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|OAD
comma
id|ss_parms
(braket
l_int|5
)braket
dot
id|info
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_MWI_ACTIVATE
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbwdwwwssss&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;cr_enquiry
op_assign
id|TRUE
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|rplci
op_assign
id|plci
suffix:semicolon
id|rplci-&gt;cr_enquiry
op_assign
id|FALSE
suffix:semicolon
)brace
id|rplci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;internal_command
op_assign
id|MWI_ACTIVATE_REQ_PEND
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|13
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|ACTIVATION_MWI
suffix:semicolon
multiline_comment|/* Function */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|2
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Basic Service */
id|PUT_DWORD
c_func
(paren
op_amp
id|cai
(braket
l_int|4
)braket
comma
id|GET_DWORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Number of Messages */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|8
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Message Status */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|10
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Message Reference */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|12
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Invocation Mode */
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CPN
comma
id|ss_parms
(braket
l_int|7
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Receiving User Number */
id|add_p
c_func
(paren
id|rplci
comma
id|OAD
comma
id|ss_parms
(braket
l_int|8
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Controlling User Number */
id|add_p
c_func
(paren
id|rplci
comma
id|OSA
comma
id|ss_parms
(braket
l_int|9
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Controlling User Provided Number */
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
id|ss_parms
(braket
l_int|10
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Time */
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_case
id|S_MWI_DEACTIVATE
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|parms-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|parms-&gt;length
comma
l_string|&quot;wbwwss&quot;
comma
id|ss_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;format wrong&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|rplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;cr_enquiry
op_assign
id|TRUE
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|rplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|rplci
op_assign
id|plci
suffix:semicolon
id|rplci-&gt;cr_enquiry
op_assign
id|FALSE
suffix:semicolon
)brace
id|rplci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|rplci-&gt;internal_command
op_assign
id|MWI_DEACTIVATE_REQ_PEND
suffix:semicolon
id|rplci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|rplci-&gt;number
op_assign
id|Number
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|DEACTIVATION_MWI
suffix:semicolon
multiline_comment|/* Function */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|2
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Basic Service */
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|4
)braket
comma
id|GET_WORD
c_func
(paren
op_amp
(paren
id|ss_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
)paren
)paren
suffix:semicolon
multiline_comment|/* Invocation Mode */
id|add_p
c_func
(paren
id|rplci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|rplci
comma
id|CPN
comma
id|ss_parms
(braket
l_int|4
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Receiving User Number */
id|add_p
c_func
(paren
id|rplci
comma
id|OAD
comma
id|ss_parms
(braket
l_int|5
)braket
dot
id|info
)paren
suffix:semicolon
multiline_comment|/* Controlling User Number */
id|sig_req
c_func
(paren
id|rplci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|rplci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
r_default
suffix:colon
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
multiline_comment|/* case SELECTOR_SU_SERV: end */
r_case
id|SELECTOR_DTMF
suffix:colon
r_return
(paren
id|dtmf_request
(paren
id|Id
comma
id|Number
comma
id|a
comma
id|plci
comma
id|appl
comma
id|msg
)paren
)paren
suffix:semicolon
r_case
id|SELECTOR_LINE_INTERCONNECT
suffix:colon
r_return
(paren
id|mixer_request
(paren
id|Id
comma
id|Number
comma
id|a
comma
id|plci
comma
id|appl
comma
id|msg
)paren
)paren
suffix:semicolon
r_case
id|PRIV_SELECTOR_ECHO_CANCELLER
suffix:colon
id|appl-&gt;appl_flags
op_or_assign
id|APPL_FLAG_PRIV_EC_SPEC
suffix:semicolon
r_return
(paren
id|ec_request
(paren
id|Id
comma
id|Number
comma
id|a
comma
id|plci
comma
id|appl
comma
id|msg
)paren
)paren
suffix:semicolon
r_case
id|SELECTOR_ECHO_CANCELLER
suffix:colon
id|appl-&gt;appl_flags
op_and_assign
op_complement
id|APPL_FLAG_PRIV_EC_SPEC
suffix:semicolon
r_return
(paren
id|ec_request
(paren
id|Id
comma
id|Number
comma
id|a
comma
id|plci
comma
id|appl
comma
id|msg
)paren
)paren
suffix:semicolon
r_case
id|SELECTOR_V42BIS
suffix:colon
r_default
suffix:colon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* end of switch(selector) */
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;SendFacRc&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
id|selector
comma
id|SSparms
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|facility_res
id|byte
id|facility_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;facility_res&quot;
)paren
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|connect_b3_req
id|byte
id|connect_b3_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|byte
id|req
suffix:semicolon
id|byte
id|len
suffix:semicolon
id|word
id|w
suffix:semicolon
id|word
id|fax_control_bits
comma
id|fax_feature_bits
comma
id|fax_info_change
suffix:semicolon
id|API_PARSE
op_star
id|ncpi
suffix:semicolon
id|byte
id|pvc
(braket
l_int|2
)braket
suffix:semicolon
id|API_PARSE
id|fax_parms
(braket
l_int|9
)braket
suffix:semicolon
id|word
id|i
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_b3_req&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|IDLE
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|OUTG_DIS_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;SuppState
op_ne
id|IDLE
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* local reply if assign unsuccessfull&n;         or B3 protocol allows only one layer 3 connection&n;           and already connected&n;             or B2 protocol not any LAPD&n;               and connect_b3_req contradicts originate/answer direction */
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
(paren
(paren
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_T90NL
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_ISO8208
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_X25_DCE
)paren
)paren
op_logical_and
(paren
(paren
id|plci-&gt;channels
op_ne
l_int|0
)paren
op_logical_or
(paren
(paren
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_SDLC
)paren
op_logical_and
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_LAPD
)paren
op_logical_and
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_LAPD_FREE_SAPI_SEL
)paren
)paren
op_logical_and
(paren
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_ANSWER
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_FORCE_OUTG_NL
)paren
)paren
)paren
)paren
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;B3 already connected=%d or no NL.Id=0x%x, dir=%d sstate=0x%x&quot;
comma
id|plci-&gt;channels
comma
id|plci-&gt;NL.Id
comma
id|plci-&gt;call_dir
comma
id|plci-&gt;SuppState
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
id|plci-&gt;requested_options_conn
op_assign
l_int|0
suffix:semicolon
id|req
op_assign
id|N_CONNECT
suffix:semicolon
id|ncpi
op_assign
op_amp
id|parms
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|2
op_logical_or
id|plci-&gt;B3_prot
op_eq
l_int|3
)paren
(brace
r_if
c_cond
(paren
id|ncpi-&gt;length
OG
l_int|2
)paren
(brace
multiline_comment|/* check for PVC */
r_if
c_cond
(paren
id|ncpi-&gt;info
(braket
l_int|2
)braket
op_logical_or
id|ncpi-&gt;info
(braket
l_int|3
)braket
)paren
(brace
id|pvc
(braket
l_int|0
)braket
op_assign
id|ncpi-&gt;info
(braket
l_int|3
)braket
suffix:semicolon
id|pvc
(braket
l_int|1
)braket
op_assign
id|ncpi-&gt;info
(braket
l_int|2
)braket
suffix:semicolon
id|add_d
c_func
(paren
id|plci
comma
l_int|2
comma
id|pvc
)paren
suffix:semicolon
id|req
op_assign
id|N_RESET
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ncpi-&gt;info
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
(brace
id|req
op_assign
id|N_CONNECT
op_or
id|N_D_BIT
suffix:semicolon
)brace
id|add_d
c_func
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|ncpi-&gt;length
op_minus
l_int|3
)paren
comma
op_amp
id|ncpi-&gt;info
(braket
l_int|4
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|fax_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|control_bits_low
)paren
suffix:semicolon
id|fax_feature_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|feature_bits_low
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|fax_control_bits
op_amp
id|T30_CONTROL_BIT_MORE_DOCUMENTS
)paren
op_logical_or
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_MORE_DOCUMENTS
)paren
)paren
(brace
id|len
op_assign
(paren
id|byte
)paren
(paren
op_amp
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|universal_6
)paren
)paren
suffix:semicolon
id|fax_info_change
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|ncpi-&gt;length
op_ge
l_int|4
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|w
op_amp
l_int|0x0001
)paren
op_ne
(paren
(paren
id|word
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|resolution
op_amp
l_int|0x0001
)paren
)paren
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|resolution
op_assign
(paren
id|byte
)paren
(paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|resolution
op_amp
op_complement
id|T30_RESOLUTION_R8_0770_OR_200
)paren
op_or
(paren
(paren
id|w
op_amp
l_int|0x0001
)paren
ques
c_cond
id|T30_RESOLUTION_R8_0770_OR_200
suffix:colon
l_int|0
)paren
)paren
suffix:semicolon
id|fax_info_change
op_assign
id|TRUE
suffix:semicolon
)brace
id|fax_control_bits
op_and_assign
op_complement
(paren
id|T30_CONTROL_BIT_REQUEST_POLLING
op_or
id|T30_CONTROL_BIT_MORE_DOCUMENTS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_amp
l_int|0x0002
)paren
multiline_comment|/* Fax-polling request */
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_REQUEST_POLLING
suffix:semicolon
r_if
c_cond
(paren
(paren
id|w
op_amp
l_int|0x0004
)paren
multiline_comment|/* Request to send / poll another document */
op_logical_and
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_MORE_DOCUMENTS
)paren
)paren
(brace
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_MORE_DOCUMENTS
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ncpi-&gt;length
op_ge
l_int|6
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|5
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|byte
)paren
id|w
)paren
op_ne
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|data_format
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|data_format
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
id|fax_info_change
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|a-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|5
)braket
)paren
op_amp
l_int|0x8000
)paren
)paren
multiline_comment|/* Private SEP/SUB/PWD enable */
(brace
id|plci-&gt;requested_options_conn
op_or_assign
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|a-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|5
)braket
)paren
op_amp
l_int|0x4000
)paren
)paren
multiline_comment|/* Private non-standard facilities enable */
(brace
id|plci-&gt;requested_options_conn
op_or_assign
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
suffix:semicolon
)brace
id|fax_control_bits
op_and_assign
op_complement
(paren
id|T30_CONTROL_BIT_ACCEPT_SUBADDRESS
op_or
id|T30_CONTROL_BIT_ACCEPT_SEL_POLLING
op_or
id|T30_CONTROL_BIT_ACCEPT_PASSWORD
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|1
)braket
comma
id|ncpi-&gt;length
comma
l_string|&quot;wwwwsss&quot;
comma
id|fax_parms
)paren
)paren
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
)paren
(brace
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_ACCEPT_SUBADDRESS
op_or
id|T30_CONTROL_BIT_ACCEPT_PASSWORD
suffix:semicolon
r_if
c_cond
(paren
id|fax_control_bits
op_amp
id|T30_CONTROL_BIT_ACCEPT_POLLING
)paren
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_ACCEPT_SEL_POLLING
suffix:semicolon
)brace
id|w
op_assign
id|fax_parms
(braket
l_int|4
)braket
dot
id|length
suffix:semicolon
r_if
c_cond
(paren
id|w
OG
l_int|20
)paren
id|w
op_assign
l_int|20
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|station_id_len
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|w
suffix:semicolon
id|i
op_increment
)paren
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|station_id
(braket
id|i
)braket
op_assign
id|fax_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
l_int|0
suffix:semicolon
id|len
op_assign
(paren
id|byte
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
suffix:semicolon
id|w
op_assign
id|fax_parms
(braket
l_int|5
)braket
dot
id|length
suffix:semicolon
r_if
c_cond
(paren
id|w
OG
l_int|20
)paren
id|w
op_assign
l_int|20
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|w
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|fax_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
id|w
op_assign
id|fax_parms
(braket
l_int|6
)braket
dot
id|length
suffix:semicolon
r_if
c_cond
(paren
id|w
OG
l_int|20
)paren
id|w
op_assign
l_int|20
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|w
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|fax_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|1
)braket
comma
id|ncpi-&gt;length
comma
l_string|&quot;wwwwssss&quot;
comma
id|fax_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;non-standard facilities info missing or wrong format&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
)braket
op_ge
l_int|2
)paren
)paren
id|plci-&gt;nsf_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
(paren
id|byte
)paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|len
op_assign
(paren
id|byte
)paren
(paren
op_amp
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|universal_6
)paren
)paren
suffix:semicolon
)brace
id|fax_info_change
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|fax_control_bits
op_ne
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|control_bits_low
)paren
)paren
(brace
id|PUT_WORD
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|control_bits_low
comma
id|fax_control_bits
)paren
suffix:semicolon
id|fax_info_change
op_assign
id|TRUE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|Info
op_eq
id|GOOD
)paren
(brace
id|plci-&gt;fax_connect_info_length
op_assign
id|len
suffix:semicolon
r_if
c_cond
(paren
id|fax_info_change
)paren
(brace
r_if
c_cond
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_MORE_DOCUMENTS
)paren
(brace
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_connect_info_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_adjust_b23_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_RTP
)paren
(brace
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
op_assign
id|ncpi-&gt;length
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;internal_req_buffer
(braket
l_int|1
)braket
op_assign
id|UDATA_REQUEST_RTP_RECONFIGURE
suffix:semicolon
r_for
c_loop
(paren
id|w
op_assign
l_int|0
suffix:semicolon
id|w
OL
id|ncpi-&gt;length
suffix:semicolon
id|w
op_increment
)paren
id|plci-&gt;internal_req_buffer
(braket
l_int|2
op_plus
id|w
)braket
op_assign
id|ncpi-&gt;info
(braket
l_int|1
op_plus
id|w
)braket
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|rtp_connect_b3_req_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|req
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_else
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|connect_b3_res
id|byte
id|connect_b3_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ncci
suffix:semicolon
id|API_PARSE
op_star
id|ncpi
suffix:semicolon
id|byte
id|req
suffix:semicolon
id|word
id|w
suffix:semicolon
id|API_PARSE
id|fax_parms
(braket
l_int|9
)braket
suffix:semicolon
id|word
id|i
suffix:semicolon
id|byte
id|len
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_b3_res&quot;
)paren
)paren
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_CON_PENDING
)paren
(brace
r_if
c_cond
(paren
id|GET_WORD
(paren
op_amp
id|parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|0
)braket
)paren
op_ne
l_int|0
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_REJ_PENDING
suffix:semicolon
id|channel_request_xon
(paren
id|plci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_DISC
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
id|req
op_assign
id|N_CONNECT_ACK
suffix:semicolon
id|ncpi
op_assign
op_amp
id|parms
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|7
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
)paren
op_logical_and
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_ENABLE_NSF
)paren
op_logical_and
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_NEGOTIATE_RESP
)paren
)paren
(brace
id|len
op_assign
(paren
(paren
id|byte
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
OL
id|len
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|station_id_len
op_assign
l_int|0
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|1
)braket
comma
id|ncpi-&gt;length
comma
l_string|&quot;wwwwssss&quot;
comma
id|fax_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;non-standard facilities info missing or wrong format&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
op_le
id|len
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|len
op_add_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
op_le
id|len
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|len
op_add_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
)braket
op_ge
l_int|2
)paren
)paren
id|plci-&gt;nsf_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
(paren
id|byte
)paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
id|plci-&gt;fax_connect_info_length
op_assign
id|len
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|code
op_assign
l_int|0
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_connect_ack_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|req
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_RTP
)paren
(brace
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
op_assign
id|ncpi-&gt;length
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;internal_req_buffer
(braket
l_int|1
)braket
op_assign
id|UDATA_REQUEST_RTP_RECONFIGURE
suffix:semicolon
r_for
c_loop
(paren
id|w
op_assign
l_int|0
suffix:semicolon
id|w
OL
id|ncpi-&gt;length
suffix:semicolon
id|w
op_increment
)paren
id|plci-&gt;internal_req_buffer
(braket
l_int|2
op_plus
id|w
)braket
op_assign
id|ncpi-&gt;info
(braket
l_int|1
op_plus
id|w
)braket
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|rtp_connect_b3_res_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|ncpi-&gt;length
OG
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|ncpi-&gt;info
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
(brace
id|req
op_assign
id|N_CONNECT_ACK
op_or
id|N_D_BIT
suffix:semicolon
)brace
id|add_d
c_func
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|ncpi-&gt;length
op_minus
l_int|3
)paren
comma
op_amp
id|ncpi-&gt;info
(braket
l_int|4
)braket
)paren
suffix:semicolon
)brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|req
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_restore
)paren
(brace
id|plci-&gt;adjust_b_restore
op_assign
id|FALSE
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|adjust_b_restore
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|connect_b3_a_res
id|byte
id|connect_b3_a_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ncci
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_b3_a_res(ncci=0x%x)&quot;
comma
id|ncci
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
op_logical_and
(paren
id|plci-&gt;State
op_ne
id|IDLE
)paren
op_logical_and
(paren
id|plci-&gt;State
op_ne
id|INC_DIS_PENDING
)paren
op_logical_and
(paren
id|plci-&gt;State
op_ne
id|OUTG_DIS_PENDING
)paren
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|CONNECTED
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|INC_CON_CONNECTED_ALERT
)paren
(brace
id|plci-&gt;State
op_assign
id|CONNECTED
suffix:semicolon
)brace
id|channel_request_xon
(paren
id|plci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|disconnect_b3_req
id|byte
id|disconnect_b3_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|API_PARSE
op_star
id|ncpi
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;disconnect_b3_req&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|OUTG_CON_PENDING
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_CON_PENDING
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
id|channel_request_xon
(paren
id|plci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
dot
id|data_pending
op_logical_and
(paren
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_TRANSPARENT
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_T30
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_T30_WITH_EXTENSIONS
)paren
)paren
)paren
(brace
id|plci-&gt;send_disc
op_assign
(paren
id|byte
)paren
id|ncci
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_else
(brace
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|2
op_logical_or
id|plci-&gt;B3_prot
op_eq
l_int|3
)paren
(brace
id|ncpi
op_assign
op_amp
id|parms
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ncpi-&gt;length
OG
l_int|3
)paren
(brace
id|add_d
c_func
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|ncpi-&gt;length
op_minus
l_int|3
)paren
comma
(paren
id|byte
op_star
)paren
op_amp
(paren
id|ncpi-&gt;info
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
)brace
)brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_DISC
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|disconnect_b3_res
id|byte
id|disconnect_b3_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ncci
suffix:semicolon
id|word
id|i
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;disconnect_b3_res(ncci=0x%x&quot;
comma
id|ncci
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
id|plci-&gt;requested_options_conn
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;fax_connect_info_length
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_state
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_T90NL
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_ISO8208
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_X25_DCE
)paren
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_LAPD
)paren
op_logical_and
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_LAPD_FREE_SAPI_SEL
)paren
)paren
)paren
(brace
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_FORCE_OUTG_NL
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_CHANNELS_PER_PLCI
op_logical_and
id|plci-&gt;inc_dis_ncci_table
(braket
id|i
)braket
op_ne
(paren
id|byte
)paren
id|ncci
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
OL
id|MAX_CHANNELS_PER_PLCI
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
(brace
id|plci-&gt;channels
op_decrement
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|i
OL
id|MAX_CHANNELS_PER_PLCI
op_minus
l_int|1
suffix:semicolon
id|i
op_increment
)paren
(brace
id|plci-&gt;inc_dis_ncci_table
(braket
id|i
)braket
op_assign
id|plci-&gt;inc_dis_ncci_table
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
)brace
id|plci-&gt;inc_dis_ncci_table
(braket
id|MAX_CHANNELS_PER_PLCI
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|ncci_free_receive_buffers
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|IDLE
op_logical_or
id|plci-&gt;State
op_eq
id|SUSPENDING
)paren
op_logical_and
op_logical_neg
id|plci-&gt;channels
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|SUSPENDING
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|3
comma
l_string|&quot;&bslash;x03&bslash;x04&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
)paren
op_logical_and
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_DIS_PENDING
)paren
)paren
(brace
id|ncci_free_receive_buffers
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_EDATA
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
id|plci-&gt;adapter-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|IDLE
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_disconnect_command
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|data_b3_req
id|byte
id|data_b3_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|DATA_B3_DESC
op_star
id|data
suffix:semicolon
id|word
id|Info
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|word
id|i
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;data_b3_req&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ncci=0x%x, plci=0x%x&quot;
comma
id|ncci
comma
id|plci
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
)paren
(brace
multiline_comment|/* queue data */
id|ncci_ptr
op_assign
op_amp
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|i
op_assign
id|ncci_ptr-&gt;data_out
op_plus
id|ncci_ptr-&gt;data_pending
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
id|MAX_DATA_B3
)paren
id|i
op_sub_assign
id|MAX_DATA_B3
suffix:semicolon
id|data
op_assign
op_amp
(paren
id|ncci_ptr-&gt;DBuffer
(braket
id|i
)braket
)paren
suffix:semicolon
id|data-&gt;Number
op_assign
id|Number
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
(paren
id|byte
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
op_ge
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
op_logical_and
(paren
(paren
(paren
id|byte
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
OL
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
op_plus
r_sizeof
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
(brace
id|data-&gt;P
op_assign
(paren
id|byte
op_star
)paren
(paren
op_star
(paren
(paren
id|dword
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
)brace
r_else
id|data-&gt;P
op_assign
id|TransmitBufferSet
c_func
(paren
id|appl
comma
op_star
(paren
id|dword
op_star
)paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|data-&gt;Length
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|data-&gt;Handle
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
id|data-&gt;Flags
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|3
)braket
dot
id|info
)paren
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_pending
)paren
op_increment
suffix:semicolon
multiline_comment|/* check for delivery confirmation */
r_if
c_cond
(paren
id|data-&gt;Flags
op_amp
l_int|0x0004
)paren
(brace
id|i
op_assign
id|ncci_ptr-&gt;data_ack_out
op_plus
id|ncci_ptr-&gt;data_ack_pending
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
id|MAX_DATA_ACK
)paren
id|i
op_sub_assign
id|MAX_DATA_ACK
suffix:semicolon
id|ncci_ptr-&gt;DataAck
(braket
id|i
)braket
dot
id|Number
op_assign
id|data-&gt;Number
suffix:semicolon
id|ncci_ptr-&gt;DataAck
(braket
id|i
)braket
dot
id|Handle
op_assign
id|data-&gt;Handle
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_ack_pending
)paren
op_increment
suffix:semicolon
)brace
id|send_data
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|appl
)paren
(brace
r_if
c_cond
(paren
id|plci
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
(paren
id|byte
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
op_ge
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
op_logical_and
(paren
(paren
(paren
id|byte
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
OL
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
op_plus
r_sizeof
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
)paren
(brace
id|TransmitBufferFree
(paren
id|appl
comma
(paren
id|byte
op_star
)paren
(paren
op_star
(paren
(paren
id|dword
op_star
)paren
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
)paren
suffix:semicolon
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_DATA_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;ww&quot;
comma
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|2
)braket
dot
id|info
)paren
comma
id|Info
)paren
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|data_b3_res
id|byte
id|data_b3_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|n
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|word
id|NCCIcode
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;data_b3_res&quot;
)paren
)paren
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
id|n
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;free(%d)&quot;
comma
id|n
)paren
)paren
suffix:semicolon
id|NCCIcode
op_assign
id|ncci
op_or
(paren
(paren
(paren
id|word
)paren
id|a-&gt;Id
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n
OL
id|appl-&gt;MaxBuffer
op_logical_and
id|appl-&gt;DataNCCI
(braket
id|n
)braket
op_eq
id|NCCIcode
op_logical_and
(paren
id|byte
)paren
(paren
id|appl-&gt;DataFlags
(braket
id|n
)braket
op_rshift
l_int|8
)paren
op_eq
id|plci-&gt;Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;found&quot;
)paren
)paren
suffix:semicolon
id|appl-&gt;DataNCCI
(braket
id|n
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|channel_can_xon
(paren
id|plci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
)paren
(brace
id|channel_request_xon
(paren
id|plci
comma
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)paren
suffix:semicolon
)brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|appl-&gt;DataFlags
(braket
id|n
)braket
op_amp
l_int|4
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_DATA_ACK
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|reset_b3_req
id|byte
id|reset_b3_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;reset_b3_req&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;B3_prot
)paren
(brace
r_case
id|B3_ISO8208
suffix:colon
r_case
id|B3_X25_DCE
suffix:colon
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_RESET
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|B3_TRANSPARENT
suffix:colon
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
(brace
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|reset_b3_command
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* reset_b3 must result in a reset_b3_con &amp; reset_b3_Ind */
id|sendf
c_func
(paren
id|appl
comma
id|_RESET_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|reset_b3_res
id|byte
id|reset_b3_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ncci
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;reset_b3_res&quot;
)paren
)paren
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;B3_prot
)paren
(brace
r_case
id|B3_ISO8208
suffix:colon
r_case
id|B3_X25_DCE
suffix:colon
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_RES_PENDING
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|CONNECTED
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_RESET_ACK
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|connect_b3_t90_a_res
id|byte
id|connect_b3_t90_a_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|ncci
suffix:semicolon
id|API_PARSE
op_star
id|ncpi
suffix:semicolon
id|byte
id|req
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;connect_b3_t90_a_res&quot;
)paren
)paren
suffix:semicolon
id|ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_logical_and
id|ncci
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|CONNECTED
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_CON_PENDING
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|CONNECTED
suffix:semicolon
id|req
op_assign
id|N_CONNECT_ACK
suffix:semicolon
multiline_comment|/* parms[0]==0 for CAPI original message definition! */
r_if
c_cond
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
(brace
id|ncpi
op_assign
op_amp
id|parms
(braket
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ncpi-&gt;length
OG
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|ncpi-&gt;info
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
(brace
id|req
op_assign
id|N_CONNECT_ACK
op_or
id|N_D_BIT
suffix:semicolon
)brace
id|add_d
c_func
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|ncpi-&gt;length
op_minus
l_int|3
)paren
comma
op_amp
id|ncpi-&gt;info
(braket
l_int|4
)braket
)paren
suffix:semicolon
)brace
)brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|req
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|select_b_req
id|byte
id|select_b_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|word
id|i
suffix:semicolon
id|byte
id|tel
suffix:semicolon
id|API_PARSE
id|bp_parms
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci
op_logical_or
op_logical_neg
id|msg
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;select_b_req[%d],PLCI=0x%x,Tel=0x%x,NL=0x%x,appl=0x%x,sstate=0x%x&quot;
comma
id|msg-&gt;length
comma
id|plci-&gt;Id
comma
id|plci-&gt;tel
comma
id|plci-&gt;NL.Id
comma
id|plci-&gt;appl
comma
id|plci-&gt;SuppState
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;PlciState=0x%x&quot;
comma
id|plci-&gt;State
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
(brace
id|bp_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* check if no channel is open, no B3 connected only */
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|IDLE
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|OUTG_DIS_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;SuppState
op_ne
id|IDLE
)paren
op_logical_or
id|plci-&gt;channels
op_logical_or
id|plci-&gt;nl_remove_id
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
multiline_comment|/* check message format and fill bp_parms pointer */
r_else
r_if
c_cond
(paren
id|msg-&gt;length
op_logical_and
id|api_parse
c_func
(paren
op_amp
id|msg-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|msg-&gt;length
comma
l_string|&quot;wwwsss&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
)paren
multiline_comment|/* send alert tone inband to the network, */
(brace
multiline_comment|/* e.g. Qsig or RBS or Cornet-N or xess PRI */
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_SELECT_B_REQ
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0x2002
)paren
suffix:semicolon
multiline_comment|/* wrong controller */
r_return
l_int|0
suffix:semicolon
)brace
id|plci-&gt;State
op_assign
id|INC_CON_CONNECTED_ALERT
suffix:semicolon
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|appl-&gt;Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|dump_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* disconnect the other appls */
(brace
multiline_comment|/* its quasi a connect        */
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|_OTHER_APPL_CONNECTED
)paren
suffix:semicolon
)brace
)brace
)brace
id|api_save_msg
c_func
(paren
id|msg
comma
l_string|&quot;s&quot;
comma
op_amp
id|plci-&gt;saved_msg
)paren
suffix:semicolon
id|tel
op_assign
id|plci-&gt;tel
suffix:semicolon
r_if
c_cond
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
(brace
r_if
c_cond
(paren
id|tel
)paren
multiline_comment|/* external controller in use by this PLCI */
(brace
r_if
c_cond
(paren
id|a-&gt;AdvSignalAppl
op_logical_and
id|a-&gt;AdvSignalAppl
op_ne
id|appl
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ext_Ctrl in use 1&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
)brace
r_else
multiline_comment|/* external controller NOT in use by this PLCI ? */
(brace
r_if
c_cond
(paren
id|a-&gt;AdvSignalPLCI
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ext_Ctrl in use 2&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
multiline_comment|/* activate the codec */
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ext_Ctrl start&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Error in codec procedures&quot;
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
multiline_comment|/* wait until codec is active */
(brace
id|plci-&gt;spoofed_msg
op_assign
id|AWAITING_SELECT_B
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
multiline_comment|/* lock other commands */
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;continue if codec loaded&quot;
)paren
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
multiline_comment|/* external controller bit is OFF */
(brace
r_if
c_cond
(paren
id|tel
)paren
multiline_comment|/* external controller in use, need to switch off */
(brace
r_if
c_cond
(paren
id|a-&gt;AdvSignalAppl
op_eq
id|appl
)paren
(brace
id|CodecIdCheck
c_func
(paren
id|a
comma
id|plci
)paren
suffix:semicolon
id|plci-&gt;tel
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adv_nl
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ext_Ctrl disable&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ext_Ctrl not requested&quot;
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_OUT
)paren
id|plci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_IN
)paren
id|plci-&gt;call_dir
op_assign
id|CALL_DIR_IN
op_or
id|CALL_DIR_ANSWER
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|select_b_command
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_SELECT_B_REQ
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|manufacturer_req
id|byte
id|manufacturer_req
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|parms
)paren
(brace
id|word
id|command
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|API_PARSE
op_star
id|m
suffix:semicolon
id|API_PARSE
id|m_parms
(braket
l_int|5
)braket
suffix:semicolon
id|word
id|codec
suffix:semicolon
id|byte
id|req
suffix:semicolon
id|byte
id|ch
suffix:semicolon
id|byte
id|dir
suffix:semicolon
r_static
id|byte
id|chi
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x00
)brace
suffix:semicolon
r_static
id|byte
id|lli
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x00
)brace
suffix:semicolon
r_static
id|byte
id|codec_cai
(braket
l_int|2
)braket
op_assign
(brace
l_int|0x01
comma
l_int|0x01
)brace
suffix:semicolon
r_static
id|byte
id|null_msg
op_assign
(brace
l_int|0
)brace
suffix:semicolon
r_static
id|API_PARSE
id|null_parms
op_assign
(brace
l_int|0
comma
op_amp
id|null_msg
)brace
suffix:semicolon
id|PLCI
op_star
id|v_plci
suffix:semicolon
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;manufacturer_req&quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|m_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_DWORD
c_func
(paren
id|parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_ne
id|_DI_MANU_ID
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
id|command
op_assign
id|GET_WORD
c_func
(paren
id|parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|m
op_assign
op_amp
id|parms
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
r_switch
c_cond
(paren
id|command
)paren
(brace
r_case
id|_DI_ASSIGN_PLCI
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|m-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|m-&gt;length
comma
l_string|&quot;wbbs&quot;
comma
id|m_parms
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|codec
op_assign
id|GET_WORD
c_func
(paren
id|m_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|ch
op_assign
id|m_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dir
op_assign
id|m_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;appl
op_assign
id|appl
suffix:semicolon
id|plci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|plci-&gt;m_command
op_assign
id|command
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
id|plci-&gt;State
op_assign
id|LOCAL_CONNECT
suffix:semicolon
id|Id
op_assign
(paren
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|plci-&gt;adapter-&gt;Id
op_or
l_int|0x80
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ManCMD,plci=0x%x&quot;
comma
id|Id
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ch
op_eq
l_int|1
op_logical_or
id|ch
op_eq
l_int|2
)paren
op_logical_and
(paren
id|dir
op_le
l_int|2
)paren
)paren
(brace
id|chi
(braket
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
l_int|0x80
op_or
id|ch
)paren
suffix:semicolon
id|lli
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
r_switch
c_cond
(paren
id|codec
)paren
(brace
r_case
l_int|0
suffix:colon
id|Info
op_assign
id|add_b1
c_func
(paren
id|plci
comma
op_amp
id|m_parms
(braket
l_int|3
)braket
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|codec_cai
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* manual &squot;swich on&squot; to the codec support without signalling */
multiline_comment|/* first &squot;assign plci&squot; with this function, then use */
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|AdvCodecSupport
c_func
(paren
id|a
comma
id|plci
comma
id|appl
comma
l_int|0
)paren
)paren
(brace
id|Info
op_assign
id|_RESOURCE_ERROR
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
id|add_b1
c_func
(paren
id|plci
comma
op_amp
id|null_parms
comma
l_int|0
comma
id|B1_FACILITY_LOCAL
)paren
suffix:semicolon
id|lli
(braket
l_int|1
)braket
op_assign
l_int|0x10
suffix:semicolon
multiline_comment|/* local call codec stream */
)brace
r_break
suffix:semicolon
)brace
id|plci-&gt;State
op_assign
id|LOCAL_CONNECT
suffix:semicolon
id|plci-&gt;manufacturer
op_assign
id|TRUE
suffix:semicolon
id|plci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|plci-&gt;m_command
op_assign
id|command
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CHI
comma
id|chi
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|codec
)paren
(brace
id|Info
op_assign
id|add_b23
c_func
(paren
id|plci
comma
op_amp
id|m_parms
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|ASSIGN
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|Info
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;dir=0x%x,spoof=0x%x&quot;
comma
id|dir
comma
id|plci-&gt;spoofed_msg
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
(brace
id|api_save_msg
(paren
id|m_parms
comma
l_string|&quot;wbbs&quot;
comma
op_amp
id|plci-&gt;saved_msg
)paren
suffix:semicolon
id|plci-&gt;spoofed_msg
op_assign
id|AWAITING_MANUF_CON
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
multiline_comment|/* reject other req meanwhile */
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|dir
op_eq
l_int|1
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|LISTEN_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_MANUFACTURER_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;dww&quot;
comma
id|_DI_MANU_ID
comma
id|command
comma
id|Info
)paren
suffix:semicolon
r_return
l_int|2
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
id|Info
op_assign
id|_OUT_OF_PLCI
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_DI_IDI_CTRL
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|m-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|m-&gt;length
comma
l_string|&quot;bs&quot;
comma
id|m_parms
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|req
op_assign
id|m_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|plci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|plci-&gt;m_command
op_assign
id|command
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|CALL_REQ
)paren
(brace
id|plci-&gt;b_channel
op_assign
id|getChannel
c_func
(paren
op_amp
id|m_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|mixer_set_bchannel_id_esc
(paren
id|plci
comma
id|plci-&gt;b_channel
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;spoofed_msg
op_eq
id|SPOOFING_REQUIRED
)paren
(brace
id|plci-&gt;spoofed_msg
op_assign
id|CALL_REQ
op_or
id|AWAITING_MANUF_CON
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|BLOCK_PLCI
suffix:semicolon
multiline_comment|/* reject other req meanwhile */
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|req
op_eq
id|LAW_REQ
)paren
(brace
id|plci-&gt;cr_enquiry
op_assign
id|TRUE
suffix:semicolon
)brace
id|add_ss
c_func
(paren
id|plci
comma
id|FTY
comma
op_amp
id|m_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|req
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|HANGUP
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
(brace
r_for
c_loop
(paren
id|ncci
op_assign
l_int|1
suffix:semicolon
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
suffix:semicolon
id|ncci
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
op_logical_and
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_DISC
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
)brace
)brace
)brace
id|mixer_remove
(paren
id|plci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|_DI_SIG_CTRL
suffix:colon
multiline_comment|/* signalling control for loop activation B-channel */
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|m-&gt;length
)paren
(brace
id|plci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
id|add_ss
c_func
(paren
id|plci
comma
id|FTY
comma
id|m
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|SIG_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_DI_RXT_CTRL
suffix:colon
multiline_comment|/* activation control for receiver/transmitter B-channel */
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|m-&gt;length
)paren
(brace
id|plci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|plci-&gt;number
op_assign
id|Number
suffix:semicolon
id|add_ss
c_func
(paren
id|plci
comma
id|FTY
comma
id|m
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|DSP_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_DI_ADV_CODEC
suffix:colon
r_case
id|_DI_DSP_CTRL
suffix:colon
multiline_comment|/* TEL_CTRL commands to support non standard adjustments: */
multiline_comment|/* Ring on/off, Handset micro volume, external micro vol. */
multiline_comment|/* handset+external speaker volume, receiver+transm. gain,*/
multiline_comment|/* handsfree on (hookinfo off), set mixer command         */
r_if
c_cond
(paren
id|command
op_eq
id|_DI_ADV_CODEC
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;AdvCodecPLCI
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|v_plci
op_assign
id|a-&gt;AdvCodecPLCI
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci
op_logical_and
(paren
id|m-&gt;length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|m-&gt;info
(braket
l_int|1
)braket
op_eq
l_int|0x1c
)paren
op_logical_and
(paren
id|m-&gt;info
(braket
l_int|2
)braket
op_ge
l_int|1
)paren
)paren
(brace
r_if
c_cond
(paren
id|m-&gt;info
(braket
l_int|3
)braket
op_eq
id|DSP_CTRL_OLD_SET_MIXER_COEFFICIENTS
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_ne
id|ADV_VOICE
)paren
op_logical_or
(paren
id|plci
op_ne
id|a-&gt;AdvSignalPLCI
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|a-&gt;adv_voice_coef_length
op_assign
id|m-&gt;info
(braket
l_int|2
)braket
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;adv_voice_coef_length
OG
id|m-&gt;length
op_minus
l_int|3
)paren
id|a-&gt;adv_voice_coef_length
op_assign
(paren
id|byte
)paren
(paren
id|m-&gt;length
op_minus
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;adv_voice_coef_length
OG
id|ADV_VOICE_COEF_BUFFER_SIZE
)paren
id|a-&gt;adv_voice_coef_length
op_assign
id|ADV_VOICE_COEF_BUFFER_SIZE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|a-&gt;adv_voice_coef_length
suffix:semicolon
id|i
op_increment
)paren
id|a-&gt;adv_voice_coef_buffer
(braket
id|i
)braket
op_assign
id|m-&gt;info
(braket
l_int|4
op_plus
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_VOICE
)paren
id|adv_voice_write_coefs
(paren
id|plci
comma
id|ADV_VOICE_WRITE_UPDATE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|m-&gt;info
(braket
l_int|3
)braket
op_eq
id|DSP_CTRL_SET_DTMF_PARAMETERS
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DTMF_PARAMETERS
)paren
)paren
(brace
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;dtmf_parameter_length
op_assign
id|m-&gt;info
(braket
l_int|2
)braket
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;dtmf_parameter_length
OG
id|m-&gt;length
op_minus
l_int|3
)paren
id|plci-&gt;dtmf_parameter_length
op_assign
(paren
id|byte
)paren
(paren
id|m-&gt;length
op_minus
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;dtmf_parameter_length
OG
id|DTMF_PARAMETER_BUFFER_SIZE
)paren
id|plci-&gt;dtmf_parameter_length
op_assign
id|DTMF_PARAMETER_BUFFER_SIZE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|plci-&gt;dtmf_parameter_length
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;dtmf_parameter_buffer
(braket
id|i
)braket
op_assign
id|m-&gt;info
(braket
l_int|4
op_plus
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_DTMFR
)paren
id|dtmf_parameter_write
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|v_plci
op_assign
id|plci
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|v_plci
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|m-&gt;length
)paren
(brace
id|add_ss
c_func
(paren
id|v_plci
comma
id|FTY
comma
id|m
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|v_plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|v_plci
)paren
suffix:semicolon
)brace
r_else
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_DI_OPTIONS_REQUEST
suffix:colon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|m-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|m-&gt;length
comma
l_string|&quot;d&quot;
comma
id|m_parms
)paren
)paren
(brace
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_DWORD
(paren
id|m_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
op_complement
id|a-&gt;man_profile.private_options
)paren
(brace
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
id|a-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_assign
id|GET_DWORD
(paren
id|m_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_MANUFACTURER_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;dww&quot;
comma
id|_DI_MANU_ID
comma
id|command
comma
id|Info
)paren
suffix:semicolon
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|manufacturer_res
id|byte
id|manufacturer_res
c_func
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|indication
suffix:semicolon
id|API_PARSE
id|m_parms
(braket
l_int|3
)braket
suffix:semicolon
id|API_PARSE
op_star
id|ncpi
suffix:semicolon
id|API_PARSE
id|fax_parms
(braket
l_int|9
)braket
suffix:semicolon
id|word
id|i
suffix:semicolon
id|byte
id|len
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;manufacturer_res&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|msg
(braket
l_int|0
)braket
dot
id|length
op_eq
l_int|0
)paren
op_logical_or
(paren
id|msg
(braket
l_int|1
)braket
dot
id|length
op_eq
l_int|0
)paren
op_logical_or
(paren
id|GET_DWORD
c_func
(paren
id|msg
(braket
l_int|0
)braket
dot
id|info
)paren
op_ne
id|_DI_MANU_ID
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|indication
op_assign
id|GET_WORD
c_func
(paren
id|msg
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|indication
)paren
(brace
r_case
id|_DI_NEGOTIATE_B3
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;B3_prot
op_ne
l_int|4
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
l_int|5
)paren
)paren
op_logical_or
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_NEGOTIATE_B3_SENT
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;wrong state for NEGOTIATE_B3 parameters&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|2
)braket
dot
id|length
comma
l_string|&quot;ws&quot;
comma
id|m_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;wrong format in NEGOTIATE_B3 parameters&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|ncpi
op_assign
op_amp
id|m_parms
(braket
l_int|1
)braket
suffix:semicolon
id|len
op_assign
(paren
(paren
id|byte
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
OL
id|len
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|station_id_len
op_assign
l_int|0
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|ncpi-&gt;info
(braket
l_int|1
)braket
comma
id|ncpi-&gt;length
comma
l_string|&quot;wwwwssss&quot;
comma
id|fax_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;non-standard facilities info missing or wrong format&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
op_le
id|len
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|len
op_add_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
op_le
id|len
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|len
op_add_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
)braket
op_ge
l_int|2
)paren
)paren
id|plci-&gt;nsf_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
(paren
id|byte
)paren
(paren
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|fax_parms
(braket
l_int|7
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|fax_parms
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
id|plci-&gt;fax_connect_info_length
op_assign
id|len
suffix:semicolon
id|plci-&gt;fax_edata_ack_length
op_assign
id|plci-&gt;fax_connect_info_length
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_edata_ack_command
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* IDI callback function                                            */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|callback
r_void
id|callback
c_func
(paren
id|ENTITY
op_star
id|e
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|APPL
op_star
id|appl
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|CAPI_MSG
op_star
id|m
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|byte
id|rc
suffix:semicolon
id|byte
id|ch
suffix:semicolon
id|byte
id|req
suffix:semicolon
id|byte
id|global_req
suffix:semicolon
r_int
id|no_cancel_rc
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;%x:CB(%x:Req=%x,Rc=%x,Ind=%x)&quot;
comma
(paren
id|e-&gt;user
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
op_amp
l_int|0x7fff
comma
id|e-&gt;Id
comma
id|e-&gt;Req
comma
id|e-&gt;Rc
comma
id|e-&gt;Ind
)paren
)paren
suffix:semicolon
id|a
op_assign
op_amp
(paren
id|adapter
(braket
(paren
id|byte
)paren
id|e-&gt;user
(braket
l_int|0
)braket
)braket
)paren
suffix:semicolon
id|plci
op_assign
op_amp
(paren
id|a-&gt;plci
(braket
id|e-&gt;user
(braket
l_int|1
)braket
)braket
)paren
suffix:semicolon
id|no_cancel_rc
op_assign
id|DIVA_CAPI_SUPPORTS_NO_CANCEL
c_func
(paren
id|a
)paren
suffix:semicolon
multiline_comment|/*&n;     If new protocol code and new XDI is used then CAPI should work&n;     fully in accordance with IDI cpec an look on callback field instead&n;     of Rc field for return codes.&n;   */
r_if
c_cond
(paren
(paren
(paren
id|e-&gt;complete
op_eq
l_int|0xff
)paren
op_logical_and
id|no_cancel_rc
)paren
op_logical_or
(paren
id|e-&gt;Rc
op_logical_and
op_logical_neg
id|no_cancel_rc
)paren
)paren
(brace
id|rc
op_assign
id|e-&gt;Rc
suffix:semicolon
id|ch
op_assign
id|e-&gt;RcCh
suffix:semicolon
id|req
op_assign
id|e-&gt;Req
suffix:semicolon
id|e-&gt;Rc
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;user
(braket
l_int|0
)braket
op_amp
l_int|0x8000
)paren
(brace
multiline_comment|/*&n;         If REMOVE request was sent then we have to wait until&n;         return code with Id set to zero arrives.&n;         All other return codes should be ignored.&n;         */
r_if
c_cond
(paren
id|req
op_eq
id|REMOVE
)paren
(brace
r_if
c_cond
(paren
id|e-&gt;Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;cancel RC in REMOVE state&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|channel_flow_control_remove
(paren
id|plci
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;FlowControlIdTable
(braket
id|i
)braket
op_eq
id|plci-&gt;nl_remove_id
)paren
id|a-&gt;FlowControlIdTable
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|plci-&gt;nl_remove_id
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
OG
l_int|0
)paren
(brace
id|diva_free_dma_descriptor
(paren
id|plci
comma
id|plci-&gt;rx_dma_descriptor
op_minus
l_int|1
)paren
suffix:semicolon
id|plci-&gt;rx_dma_descriptor
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|rc
op_eq
id|OK_FC
)paren
(brace
id|a-&gt;FlowControlIdTable
(braket
id|ch
)braket
op_assign
id|e-&gt;Id
suffix:semicolon
id|a-&gt;FlowControlSkipTable
(braket
id|ch
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_or_assign
id|N_OK_FC_PENDING
suffix:semicolon
id|a-&gt;ch_flow_plci
(braket
id|ch
)braket
op_assign
id|plci-&gt;Id
suffix:semicolon
id|plci-&gt;nl_req
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*&n;          Cancel return codes self, if feature was requested&n;          */
r_if
c_cond
(paren
id|no_cancel_rc
op_logical_and
(paren
id|a-&gt;FlowControlIdTable
(braket
id|ch
)braket
op_eq
id|e-&gt;Id
)paren
op_logical_and
id|e-&gt;Id
)paren
(brace
id|a-&gt;FlowControlIdTable
(braket
id|ch
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|rc
op_eq
id|OK
)paren
op_logical_and
id|a-&gt;FlowControlSkipTable
(braket
id|ch
)braket
)paren
(brace
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
(paren
l_string|&quot;XDI CAPI: RC cancelled Id:0x02, Ch:%02x&quot;
comma
id|e-&gt;Id
comma
id|ch
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_amp
id|N_OK_FC_PENDING
)paren
(brace
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_and_assign
op_complement
id|N_OK_FC_PENDING
suffix:semicolon
r_if
c_cond
(paren
id|ch
op_eq
id|e-&gt;ReqCh
)paren
id|plci-&gt;nl_req
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|plci-&gt;nl_req
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;nl_req
)paren
id|control_rc
(paren
id|plci
comma
l_int|0
comma
id|rc
comma
id|ch
comma
l_int|0
comma
id|TRUE
)paren
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|req
op_eq
id|N_XON
)paren
(brace
id|channel_x_on
(paren
id|plci
comma
id|ch
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
id|control_rc
(paren
id|plci
comma
id|req
comma
id|rc
comma
id|ch
comma
l_int|0
comma
id|TRUE
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;nl_global_req
)paren
(brace
id|global_req
op_assign
id|plci-&gt;nl_global_req
suffix:semicolon
id|plci-&gt;nl_global_req
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
(brace
id|e-&gt;Id
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
OG
l_int|0
)paren
(brace
id|diva_free_dma_descriptor
(paren
id|plci
comma
id|plci-&gt;rx_dma_descriptor
op_minus
l_int|1
)paren
suffix:semicolon
id|plci-&gt;rx_dma_descriptor
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|control_rc
(paren
id|plci
comma
l_int|0
comma
id|rc
comma
id|ch
comma
id|global_req
comma
id|TRUE
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;data_sent
)paren
(brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;data_sent
op_assign
id|FALSE
suffix:semicolon
id|plci-&gt;NL.XNum
op_assign
l_int|1
suffix:semicolon
id|data_rc
(paren
id|plci
comma
id|ch
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
id|control_rc
(paren
id|plci
comma
id|req
comma
id|rc
comma
id|ch
comma
l_int|0
comma
id|TRUE
)paren
suffix:semicolon
)brace
r_else
(brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|control_rc
(paren
id|plci
comma
id|req
comma
id|rc
comma
id|ch
comma
l_int|0
comma
id|TRUE
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
multiline_comment|/*&n;         If REMOVE request was sent then we have to wait until&n;         return code with Id set to zero arrives.&n;         All other return codes should be ignored.&n;         */
r_if
c_cond
(paren
id|req
op_eq
id|REMOVE
)paren
(brace
r_if
c_cond
(paren
id|e-&gt;Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;cancel RC in REMOVE state&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;sig_remove_id
op_assign
l_int|0
suffix:semicolon
)brace
id|plci-&gt;sig_req
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;sig_global_req
)paren
(brace
id|global_req
op_assign
id|plci-&gt;sig_global_req
suffix:semicolon
id|plci-&gt;sig_global_req
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
id|e-&gt;Id
op_assign
l_int|0
suffix:semicolon
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|control_rc
(paren
id|plci
comma
l_int|0
comma
id|rc
comma
id|ch
comma
id|global_req
comma
id|FALSE
)paren
suffix:semicolon
)brace
r_else
(brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
id|control_rc
(paren
id|plci
comma
id|req
comma
id|rc
comma
id|ch
comma
l_int|0
comma
id|FALSE
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;      Again: in accordance with IDI spec Rc and Ind can&squot;t be delivered in the&n;      same callback. Also if new XDI and protocol code used then jump&n;      direct to finish.&n;      */
r_if
c_cond
(paren
id|no_cancel_rc
)paren
(brace
id|channel_xmit_xon
c_func
(paren
id|plci
)paren
suffix:semicolon
r_goto
id|capi_callback_suffix
suffix:semicolon
)brace
)brace
id|channel_xmit_xon
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e-&gt;Ind
)paren
(brace
r_if
c_cond
(paren
id|e-&gt;user
(braket
l_int|0
)braket
op_amp
l_int|0x8000
)paren
(brace
id|byte
id|Ind
op_assign
id|e-&gt;Ind
op_amp
l_int|0x0f
suffix:semicolon
id|byte
id|Ch
op_assign
id|e-&gt;IndCh
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|Ind
op_eq
id|N_DISC
)paren
op_logical_or
(paren
id|Ind
op_eq
id|N_DISC_ACK
)paren
)paren
op_logical_and
(paren
id|a-&gt;ch_flow_plci
(braket
id|Ch
)braket
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ch_flow_control
(braket
id|Ch
)braket
op_amp
id|N_RX_FLOW_CONTROL_MASK
)paren
(brace
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
(paren
l_string|&quot;XDI CAPI: I: pending N-XON Ch:%02x&quot;
comma
id|Ch
)paren
)paren
suffix:semicolon
)brace
id|a-&gt;ch_flow_control
(braket
id|Ch
)braket
op_and_assign
op_complement
id|N_RX_FLOW_CONTROL_MASK
suffix:semicolon
)brace
id|nl_ind
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|e-&gt;RNR
op_ne
l_int|1
)paren
op_logical_and
(paren
id|a-&gt;ch_flow_plci
(braket
id|Ch
)braket
op_eq
id|plci-&gt;Id
)paren
op_logical_and
(paren
id|a-&gt;ch_flow_control
(braket
id|Ch
)braket
op_amp
id|N_RX_FLOW_CONTROL_MASK
)paren
)paren
(brace
id|a-&gt;ch_flow_control
(braket
id|Ch
)braket
op_and_assign
op_complement
id|N_RX_FLOW_CONTROL_MASK
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
(paren
l_string|&quot;XDI CAPI: I: remove faked N-XON Ch:%02x&quot;
comma
id|Ch
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|sig_ind
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
id|e-&gt;Ind
op_assign
l_int|0
suffix:semicolon
)brace
id|capi_callback_suffix
suffix:colon
r_while
c_loop
(paren
op_logical_neg
id|plci-&gt;req_in
op_logical_and
op_logical_neg
id|plci-&gt;internal_command
op_logical_and
(paren
id|plci-&gt;msg_in_write_pos
op_ne
id|plci-&gt;msg_in_read_pos
)paren
)paren
(brace
id|j
op_assign
(paren
id|plci-&gt;msg_in_read_pos
op_eq
id|plci-&gt;msg_in_wrap_pos
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci-&gt;msg_in_read_pos
suffix:semicolon
id|i
op_assign
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
)braket
)paren
)paren
op_member_access_from_pointer
id|header.length
op_plus
l_int|3
)paren
op_amp
l_int|0xfffc
suffix:semicolon
id|m
op_assign
(paren
id|CAPI_MSG
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
)braket
)paren
suffix:semicolon
id|appl
op_assign
op_star
(paren
(paren
id|APPL
op_star
op_star
)paren
(paren
op_amp
(paren
(paren
id|byte
op_star
)paren
(paren
id|plci-&gt;msg_in_queue
)paren
)paren
(braket
id|j
op_plus
id|i
)braket
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;dequeue msg(0x%04x) - write=%d read=%d wrap=%d&quot;
comma
id|m-&gt;header.command
comma
id|plci-&gt;msg_in_write_pos
comma
id|plci-&gt;msg_in_read_pos
comma
id|plci-&gt;msg_in_wrap_pos
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;msg_in_read_pos
op_eq
id|plci-&gt;msg_in_wrap_pos
)paren
(brace
id|plci-&gt;msg_in_wrap_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_read_pos
op_assign
id|i
op_plus
id|MSG_IN_OVERHEAD
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;msg_in_read_pos
op_assign
id|j
op_plus
id|i
op_plus
id|MSG_IN_OVERHEAD
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;msg_in_read_pos
op_eq
id|plci-&gt;msg_in_write_pos
)paren
(brace
id|plci-&gt;msg_in_write_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_read_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;msg_in_read_pos
op_eq
id|plci-&gt;msg_in_wrap_pos
)paren
(brace
id|plci-&gt;msg_in_read_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_wrap_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
)brace
id|i
op_assign
id|api_put
(paren
id|appl
comma
id|m
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|m-&gt;header.command
op_eq
id|_DATA_B3_R
)paren
id|TransmitBufferFree
(paren
id|appl
comma
(paren
id|byte
op_star
)paren
(paren
id|m-&gt;info.data_b3_req.Data
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Error 0x%04x from msg(0x%04x)&quot;
comma
id|i
comma
id|m-&gt;header.command
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;li_notify_update
)paren
(brace
id|plci-&gt;li_notify_update
op_assign
id|FALSE
suffix:semicolon
id|mixer_notify_update
(paren
id|plci
comma
id|FALSE
)paren
suffix:semicolon
)brace
)brace
id|send_data
c_func
(paren
id|plci
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
DECL|function|control_rc
r_void
id|control_rc
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|req
comma
id|byte
id|rc
comma
id|byte
id|ch
comma
id|byte
id|global_req
comma
id|byte
id|nl_rc
)paren
(brace
id|dword
id|Id
suffix:semicolon
id|dword
id|rId
suffix:semicolon
id|word
id|Number
suffix:semicolon
id|word
id|Info
op_assign
l_int|0
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|APPL
op_star
id|appl
suffix:semicolon
id|PLCI
op_star
id|rplci
suffix:semicolon
id|byte
id|SSparms
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x00&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
id|byte
id|SSstruct
(braket
)braket
op_assign
l_string|&quot;&bslash;x09&bslash;x00&bslash;x00&bslash;x06&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&quot;
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;A: control_rc, no plci %02x:%02x:%02x:%02x:%02x&quot;
comma
id|req
comma
id|rc
comma
id|ch
comma
id|global_req
comma
id|nl_rc
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;req0_in/out=%d/%d&quot;
comma
id|plci-&gt;req_in
comma
id|plci-&gt;req_out
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;req_in
op_ne
id|plci-&gt;req_out
)paren
(brace
r_if
c_cond
(paren
id|nl_rc
op_logical_or
(paren
id|global_req
op_ne
id|ASSIGN
)paren
op_logical_or
(paren
id|rc
op_eq
id|ASSIGN_OK
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;req_1return&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* cancel outstanding request on the PLCI after SIG ASSIGN failure */
)brace
id|plci-&gt;req_in
op_assign
id|plci-&gt;req_in_start
op_assign
id|plci-&gt;req_out
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;control_rc&quot;
)paren
)paren
suffix:semicolon
id|appl
op_assign
id|plci-&gt;appl
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|ncci
op_assign
id|a-&gt;ch_ncci
(braket
id|ch
)braket
suffix:semicolon
r_if
c_cond
(paren
id|appl
)paren
(brace
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
(paren
id|ncci
ques
c_cond
id|ncci
suffix:colon
id|ch
)paren
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
op_logical_and
id|plci-&gt;SuppState
op_ne
id|CALL_HELD
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|Number
op_assign
id|plci-&gt;number
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Contr_RC-Id=%08lx,plci=%x,tel=%x, entity=0x%x, command=0x%x, int_command=0x%x&quot;
comma
id|Id
comma
id|plci-&gt;Id
comma
id|plci-&gt;tel
comma
id|plci-&gt;Sig.Id
comma
id|plci-&gt;command
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;channels=0x%x&quot;
comma
id|plci-&gt;channels
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_remove_check
c_func
(paren
id|plci
)paren
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|REMOVE
op_logical_and
id|rc
op_eq
id|ASSIGN_OK
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;command
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;command
)paren
(brace
r_case
id|C_HOLD_REQ
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;HoldRC=0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
id|SSparms
(braket
l_int|1
)braket
op_assign
(paren
id|byte
)paren
id|S_HOLD
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|IDLE
suffix:semicolon
id|Info
op_assign
l_int|0x2001
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|C_RETRIEVE_REQ
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RetrieveRC=0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
id|SSparms
(braket
l_int|1
)braket
op_assign
(paren
id|byte
)paren
id|S_RETRIEVE
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|CALL_HELD
suffix:semicolon
id|Info
op_assign
l_int|0x2001
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_INFO_R
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;InfoRC=0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_CONNECT_R
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Connect_R=0x%x/0x%x/0x%x/0x%x&quot;
comma
id|req
comma
id|rc
comma
id|global_req
comma
id|nl_rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_ne
l_int|0xff
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|global_req
op_eq
id|ASSIGN
)paren
op_logical_and
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
)paren
op_logical_or
(paren
op_logical_neg
id|nl_rc
op_logical_and
(paren
id|req
op_eq
id|CALL_REQ
)paren
op_logical_and
(paren
id|rc
op_ne
id|OK
)paren
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No more IDs/Call_Req failed&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffL
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|LOCAL_CONNECT
)paren
(brace
id|plci-&gt;State
op_assign
id|OUTG_CON_PENDING
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
multiline_comment|/* D-ch activation */
(brace
r_if
c_cond
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No more IDs/X.25 Call_Req failed&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffL
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;sss&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_ACT_PENDING
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|_CONNECT_I
op_or
id|RESPONSE
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|INC_DIS_PENDING
)paren
id|plci-&gt;State
op_assign
id|INC_CON_ACCEPT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_DISCONNECT_R
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_ne
l_int|0xff
)paren
(brace
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SUSPEND_REQ
suffix:colon
r_break
suffix:semicolon
r_case
id|RESUME_REQ
suffix:colon
r_break
suffix:semicolon
r_case
id|_CONNECT_B3_R
suffix:colon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|ncci
op_assign
id|get_ncci
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
id|Id
op_assign
(paren
id|Id
op_amp
l_int|0xffff
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;channels
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|N_RESET
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_CON_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|_CONNECT_B3_I
op_or
id|RESPONSE
suffix:colon
r_break
suffix:semicolon
r_case
id|_RESET_B3_R
suffix:colon
multiline_comment|/*        sendf(appl,_RESET_B3_R|CONFIRM,Id,Number,&quot;w&quot;,0);*/
r_break
suffix:semicolon
r_case
id|_DISCONNECT_B3_R
suffix:colon
id|sendf
c_func
(paren
id|appl
comma
id|_DISCONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_MANUFACTURER_R
suffix:colon
r_break
suffix:semicolon
r_case
id|PERM_LIST_REQ
suffix:colon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;internal_command
)paren
(brace
r_case
id|BLOCK_PLCI
suffix:colon
r_return
suffix:semicolon
r_case
id|GET_MWI_STATE
suffix:colon
r_if
c_cond
(paren
id|rc
op_eq
id|OK
)paren
multiline_comment|/* command supported, wait for indication */
(brace
r_return
suffix:semicolon
)brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Get Supported Services */
r_case
id|GETSERV_REQ_PEND
suffix:colon
r_if
c_cond
(paren
id|rc
op_eq
id|OK
)paren
multiline_comment|/* command supported, wait for indication */
(brace
r_break
suffix:semicolon
)brace
id|PUT_DWORD
c_func
(paren
op_amp
id|SSstruct
(braket
l_int|6
)braket
comma
id|MASK_TERMINAL_PORTABILITY
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
l_int|0
comma
l_int|3
comma
id|SSstruct
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|INTERR_DIVERSION_REQ_PEND
suffix:colon
multiline_comment|/* Interrogate Parameters        */
r_case
id|INTERR_NUMBERS_REQ_PEND
suffix:colon
r_case
id|CF_START_PEND
suffix:colon
multiline_comment|/* Call Forwarding Start pending */
r_case
id|CF_STOP_PEND
suffix:colon
multiline_comment|/* Call Forwarding Stop pending  */
r_case
id|CCBS_REQUEST_REQ_PEND
suffix:colon
r_case
id|CCBS_DEACTIVATE_REQ_PEND
suffix:colon
r_case
id|CCBS_INTERROGATE_REQ_PEND
suffix:colon
r_switch
c_cond
(paren
id|plci-&gt;internal_command
)paren
(brace
r_case
id|INTERR_DIVERSION_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_INTERROGATE_DIVERSION
suffix:semicolon
r_break
suffix:semicolon
r_case
id|INTERR_NUMBERS_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_INTERROGATE_NUMBERS
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CF_START_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CALL_FORWARDING_START
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CF_STOP_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CALL_FORWARDING_STOP
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_REQUEST_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CCBS_REQUEST
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_DEACTIVATE_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CCBS_DEACTIVATE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_INTERROGATE_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CCBS_INTERROGATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|global_req
op_eq
id|ASSIGN
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;AssignDiversion_RC=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rc
op_eq
id|ISDN_GUARD_REJ
)paren
(brace
id|Info
op_assign
id|_CAPI_GUARD_ERROR
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
id|_SUPPLEMENTARY_SERVICE_NOT_SUPPORTED
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0x7
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
)paren
(brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
multiline_comment|/* 3pty conference pending */
r_case
id|PTY_REQ_PEND
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
)paren
(brace
r_break
suffix:semicolon
)brace
id|rplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|plci-&gt;ptyState
suffix:semicolon
id|rId
op_assign
(paren
(paren
id|word
)paren
id|rplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|rplci-&gt;adapter-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|rplci-&gt;tel
)paren
(brace
id|rId
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|rplci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|rId
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Explicit Call Transfer pending */
r_case
id|ECT_REQ_PEND
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ECT_RC=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
)paren
(brace
r_break
suffix:semicolon
)brace
id|rplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_ECT
suffix:semicolon
id|rId
op_assign
(paren
(paren
id|word
)paren
id|rplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|rplci-&gt;adapter-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|rplci-&gt;tel
)paren
(brace
id|rId
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|rplci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|rId
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|_MANUFACTURER_R
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;_Manufacturer_R=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|global_req
op_eq
id|ASSIGN
)paren
op_logical_and
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No more IDs&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_MANUFACTURER_R
op_or
id|CONFIRM
comma
id|Id
comma
id|Number
comma
l_string|&quot;dww&quot;
comma
id|_DI_MANU_ID
comma
id|_MANUFACTURER_R
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
multiline_comment|/* after codec init, internal codec commands pending */
)brace
r_break
suffix:semicolon
r_case
id|_CONNECT_R
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;_Connect_R=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|global_req
op_eq
id|ASSIGN
)paren
op_logical_and
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No more IDs&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffL
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
multiline_comment|/* after codec init, internal codec commands pending */
)brace
r_break
suffix:semicolon
r_case
id|PERM_COD_HOOK
suffix:colon
multiline_comment|/* finished with Hook_Ind */
r_return
suffix:semicolon
r_case
id|PERM_COD_CALL
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec Connect_Pending A, Rc = 0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|PERM_COD_CONN_PEND
suffix:semicolon
r_return
suffix:semicolon
r_case
id|PERM_COD_ASSIGN
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec Assign A, Rc = 0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
(brace
r_break
suffix:semicolon
)brace
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|PERM_COD_CALL
suffix:semicolon
r_return
suffix:semicolon
multiline_comment|/* Null Call Reference Request pending */
r_case
id|C_NCR_FAC_REQ
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCR_FAC=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|global_req
op_eq
id|ASSIGN
)paren
(brace
r_if
c_cond
(paren
id|rc
op_eq
id|ASSIGN_OK
)paren
(brace
r_return
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xf
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_WRONG_STATE
)paren
suffix:semicolon
id|appl-&gt;NullCREnable
op_assign
id|FALSE
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|req
op_eq
id|NCR_FACILITY
)paren
(brace
r_if
c_cond
(paren
id|rc
op_eq
id|OK
)paren
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xf
comma
id|Number
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xf
comma
id|Number
comma
l_string|&quot;w&quot;
comma
id|_WRONG_STATE
)paren
suffix:semicolon
id|appl-&gt;NullCREnable
op_assign
id|FALSE
suffix:semicolon
)brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|HOOK_ON_REQ
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|N_DISC
comma
(paren
id|byte
)paren
id|ncci
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|HOOK_OFF_REQ
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
)paren
r_break
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|OUTG_CON_PENDING
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MWI_ACTIVATE_REQ_PEND
suffix:colon
r_case
id|MWI_DEACTIVATE_REQ_PEND
suffix:colon
r_if
c_cond
(paren
id|global_req
op_eq
id|ASSIGN
op_logical_and
id|rc
op_eq
id|ASSIGN_OK
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MWI_REQ assigned&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
r_if
c_cond
(paren
id|rc
op_eq
id|WRONG_IE
)paren
(brace
id|Info
op_assign
l_int|0x2007
suffix:semicolon
multiline_comment|/* Illegal message parameter coding */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MWI_REQ invalid parameter&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|Info
op_assign
l_int|0x300B
suffix:semicolon
multiline_comment|/* not supported */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MWI_REQ not supported&quot;
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* 0x3010: Request not allowed in this state */
id|PUT_WORD
c_func
(paren
op_amp
id|SSparms
(braket
l_int|4
)braket
comma
l_int|0x300E
)paren
suffix:semicolon
multiline_comment|/* SS not supported */
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
id|MWI_ACTIVATE_REQ_PEND
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SSparms
(braket
l_int|1
)braket
comma
id|S_MWI_ACTIVATE
)paren
suffix:semicolon
)brace
r_else
id|PUT_WORD
c_func
(paren
op_amp
id|SSparms
(braket
l_int|1
)braket
comma
id|S_MWI_DEACTIVATE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;cr_enquiry
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xf
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CONF_BEGIN_REQ_PEND
suffix:colon
r_case
id|CONF_ADD_REQ_PEND
suffix:colon
r_case
id|CONF_SPLIT_REQ_PEND
suffix:colon
r_case
id|CONF_DROP_REQ_PEND
suffix:colon
r_case
id|CONF_ISOLATE_REQ_PEND
suffix:colon
r_case
id|CONF_REATTACH_REQ_PEND
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CONF_RC=0x%x/0x%x&quot;
comma
id|req
comma
id|rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;internal_command
op_eq
id|CONF_ADD_REQ_PEND
)paren
op_logical_and
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
id|rplci
op_assign
id|plci
suffix:semicolon
id|rId
op_assign
id|Id
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;internal_command
)paren
(brace
r_case
id|CONF_BEGIN_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_BEGIN
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ADD_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_ADD
suffix:semicolon
id|rplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
id|rId
op_assign
(paren
(paren
id|word
)paren
id|rplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|rplci-&gt;adapter-&gt;Id
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_SPLIT_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_SPLIT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_DROP_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_DROP
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ISOLATE_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_ISOLATE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_REATTACH_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CONF_REATTACH
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|rplci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|rId
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VSWITCH_REQ_PEND
suffix:colon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;relatedPTYPLCI
)paren
(brace
id|plci-&gt;relatedPTYPLCI-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;relatedPTYPLCI-&gt;vsprot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;relatedPTYPLCI-&gt;vsprotdialect
op_assign
l_int|0
suffix:semicolon
)brace
id|plci-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprotdialect
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;relatedPTYPLCI
op_logical_and
id|plci-&gt;vswitchstate
op_eq
l_int|1
op_logical_and
id|plci-&gt;relatedPTYPLCI-&gt;vswitchstate
op_eq
l_int|3
)paren
(brace
multiline_comment|/* join complete */
id|plci-&gt;vswitchstate
op_assign
l_int|3
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
multiline_comment|/* Call Deflection Request pending (SSCT) */
r_case
id|CD_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CALL_DEFLECTION
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
id|plci-&gt;appl-&gt;CDEnable
op_assign
l_int|0
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RTP_CONNECT_B3_REQ_COMMAND_2
suffix:colon
r_if
c_cond
(paren
id|rc
op_eq
id|OK
)paren
(brace
id|ncci
op_assign
id|get_ncci
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
id|Id
op_assign
(paren
id|Id
op_amp
l_int|0xffff
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;channels
op_increment
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|OUTG_CON_PENDING
suffix:semicolon
)brace
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
(brace
(paren
op_star
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
)paren
(paren
id|Id
comma
id|plci
comma
id|rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
multiline_comment|/* appl==0 */
(brace
id|Id
op_assign
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|plci-&gt;adapter-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|plci-&gt;internal_command
)paren
(brace
r_case
id|BLOCK_PLCI
suffix:colon
r_return
suffix:semicolon
r_case
id|START_L1_SIG_ASSIGN_PEND
suffix:colon
r_case
id|REM_L1_SIG_ASSIGN_PEND
suffix:colon
r_if
c_cond
(paren
id|global_req
op_eq
id|ASSIGN
)paren
(brace
r_break
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***L1 Req rem PLCI&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
multiline_comment|/* Call Deflection Request pending, just no appl ptr assigned */
r_case
id|CD_REQ_PEND
suffix:colon
id|SSparms
(braket
l_int|1
)braket
op_assign
id|S_CALL_DEFLECTION
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|OK
)paren
(brace
id|Info
op_assign
l_int|0x300E
suffix:semicolon
multiline_comment|/* not supported */
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|CDEnable
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|application
(braket
id|i
)braket
dot
id|Id
)paren
(brace
id|application
(braket
id|i
)braket
dot
id|CDEnable
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|word
)paren
l_int|3
comma
id|SSparms
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
)paren
(brace
id|application
(braket
id|i
)braket
dot
id|CDEnable
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PERM_COD_HOOK
suffix:colon
multiline_comment|/* finished with Hook_Ind */
r_return
suffix:semicolon
r_case
id|PERM_COD_CALL
suffix:colon
id|plci-&gt;internal_command
op_assign
id|PERM_COD_CONN_PEND
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec Connect_Pending, Rc = 0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|PERM_COD_ASSIGN
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec Assign, Rc = 0x%x&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rc
op_ne
id|ASSIGN_OK
)paren
(brace
r_break
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|PERM_COD_CALL
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|LISTEN_SIG_ASSIGN_PEND
suffix:colon
r_if
c_cond
(paren
id|rc
op_eq
id|ASSIGN_OK
)paren
(brace
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ListenCheck, new SIG_ID = 0x%x&quot;
comma
id|plci-&gt;Sig.Id
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
l_string|&quot;&bslash;x02&bslash;x18&bslash;x00&quot;
)paren
suffix:semicolon
multiline_comment|/* support call waiting */
id|sig_req
c_func
(paren
id|plci
comma
id|INDICATE_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ListenCheck failed (assignRc=0x%x)&quot;
comma
id|rc
)paren
)paren
suffix:semicolon
id|a-&gt;listen_active
op_decrement
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|USELAW_REQ
suffix:colon
r_if
c_cond
(paren
id|global_req
op_eq
id|ASSIGN
)paren
(brace
r_if
c_cond
(paren
id|rc
op_eq
id|ASSIGN_OK
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|LAW_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Auto-Law assigned&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Auto-Law assign failed&quot;
)paren
)paren
suffix:semicolon
id|a-&gt;automatic_law
op_assign
l_int|3
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|a-&gt;automatic_lawPLCI
op_assign
l_int|NULL
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|req
op_eq
id|LAW_REQ
op_logical_and
id|rc
op_eq
id|OK
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Auto-Law initiated&quot;
)paren
)paren
suffix:semicolon
id|a-&gt;automatic_law
op_assign
l_int|2
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Auto-Law not supported&quot;
)paren
)paren
suffix:semicolon
id|a-&gt;automatic_law
op_assign
l_int|3
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|a-&gt;automatic_lawPLCI
op_assign
l_int|NULL
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|plci_remove_check
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
DECL|function|data_rc
r_void
id|data_rc
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
(brace
id|dword
id|Id
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|DATA_B3_DESC
op_star
id|data
suffix:semicolon
id|word
id|ncci
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
(brace
id|TransmitBufferFree
(paren
id|plci-&gt;appl
comma
id|plci-&gt;data_sent_ptr
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|ncci
op_assign
id|a-&gt;ch_ncci
(braket
id|ch
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ncci
op_logical_and
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
id|ncci_ptr
op_assign
op_amp
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;data_out=%d, data_pending=%d&quot;
comma
id|ncci_ptr-&gt;data_out
comma
id|ncci_ptr-&gt;data_pending
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_pending
)paren
(brace
id|data
op_assign
op_amp
(paren
id|ncci_ptr-&gt;DBuffer
(braket
id|ncci_ptr-&gt;data_out
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|data-&gt;Flags
op_amp
l_int|4
)paren
op_logical_and
id|a-&gt;ncci_state
(braket
id|ncci
)braket
)paren
(brace
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DATA_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|data-&gt;Number
comma
l_string|&quot;ww&quot;
comma
id|data-&gt;Handle
comma
l_int|0
)paren
suffix:semicolon
)brace
(paren
id|ncci_ptr-&gt;data_out
)paren
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_out
op_eq
id|MAX_DATA_B3
)paren
id|ncci_ptr-&gt;data_out
op_assign
l_int|0
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_pending
)paren
op_decrement
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|function|data_ack
r_void
id|data_ack
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
(brace
id|dword
id|Id
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|ncci
op_assign
id|a-&gt;ch_ncci
(braket
id|ch
)braket
suffix:semicolon
id|ncci_ptr
op_assign
op_amp
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_ack_pending
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_logical_and
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
)paren
(brace
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DATA_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|ncci_ptr-&gt;DataAck
(braket
id|ncci_ptr-&gt;data_ack_out
)braket
dot
id|Number
comma
l_string|&quot;ww&quot;
comma
id|ncci_ptr-&gt;DataAck
(braket
id|ncci_ptr-&gt;data_ack_out
)braket
dot
id|Handle
comma
l_int|0
)paren
suffix:semicolon
)brace
(paren
id|ncci_ptr-&gt;data_ack_out
)paren
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_ack_out
op_eq
id|MAX_DATA_ACK
)paren
id|ncci_ptr-&gt;data_ack_out
op_assign
l_int|0
suffix:semicolon
(paren
id|ncci_ptr-&gt;data_ack_pending
)paren
op_decrement
suffix:semicolon
)brace
)brace
DECL|function|sig_ind
r_void
id|sig_ind
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dword
id|x_Id
suffix:semicolon
id|dword
id|Id
suffix:semicolon
id|dword
id|rId
suffix:semicolon
id|word
id|Number
op_assign
l_int|0
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|cip
suffix:semicolon
id|dword
id|cip_mask
suffix:semicolon
id|byte
op_star
id|ie
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|API_PARSE
id|saved_parms
(braket
id|MAX_MSG_PARMS
op_plus
l_int|1
)braket
suffix:semicolon
DECL|macro|MAXPARMSIDS
mdefine_line|#define MAXPARMSIDS 31
id|byte
op_star
id|parms
(braket
id|MAXPARMSIDS
)braket
suffix:semicolon
id|byte
op_star
id|add_i
(braket
l_int|4
)braket
suffix:semicolon
id|byte
op_star
id|multi_fac_parms
(braket
id|MAX_MULTI_IE
)braket
suffix:semicolon
id|byte
op_star
id|multi_pi_parms
(braket
id|MAX_MULTI_IE
)braket
suffix:semicolon
id|byte
op_star
id|multi_ssext_parms
(braket
id|MAX_MULTI_IE
)braket
suffix:semicolon
id|byte
op_star
id|multi_CiPN_parms
(braket
id|MAX_MULTI_IE
)braket
suffix:semicolon
id|byte
op_star
id|multi_vswitch_parms
(braket
id|MAX_MULTI_IE
)braket
suffix:semicolon
id|byte
id|ai_len
suffix:semicolon
id|byte
op_star
id|esc_chi
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
op_star
id|esc_law
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
op_star
id|pty_cai
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
op_star
id|esc_cr
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
op_star
id|esc_profile
op_assign
l_string|&quot;&quot;
suffix:semicolon
id|byte
id|facility
(braket
l_int|256
)braket
suffix:semicolon
id|PLCI
op_star
id|tplci
op_assign
l_int|NULL
suffix:semicolon
id|byte
id|chi
(braket
)braket
op_assign
l_string|&quot;&bslash;x02&bslash;x18&bslash;x01&quot;
suffix:semicolon
id|byte
id|voice_cai
(braket
)braket
op_assign
l_string|&quot;&bslash;x06&bslash;x14&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x08&quot;
suffix:semicolon
id|byte
id|resume_cau
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x05&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
multiline_comment|/* ESC_MSGTYPE must be the last but one message, a new IE has to be */
multiline_comment|/* included before the ESC_MSGTYPE and MAXPARMSIDS has to be incremented */
multiline_comment|/* SMSG is situated at the end because its 0 (for compatibility reasons */
multiline_comment|/* (see Info_Mask Bit 4, first IE. then the message type)           */
id|word
id|parms_id
(braket
)braket
op_assign
(brace
id|MAXPARMSIDS
comma
id|CPN
comma
l_int|0xff
comma
id|DSA
comma
id|OSA
comma
id|BC
comma
id|LLC
comma
id|HLC
comma
id|ESC_CAUSE
comma
id|DSP
comma
id|DT
comma
id|CHA
comma
id|UUI
comma
id|CONG_RR
comma
id|CONG_RNR
comma
id|ESC_CHI
comma
id|KEY
comma
id|CHI
comma
id|CAU
comma
id|ESC_LAW
comma
id|RDN
comma
id|RDX
comma
id|CONN_NR
comma
id|RIN
comma
id|NI
comma
id|CAI
comma
id|ESC_CR
comma
id|CST
comma
id|ESC_PROFILE
comma
l_int|0xff
comma
id|ESC_MSGTYPE
comma
id|SMSG
)brace
suffix:semicolon
multiline_comment|/* 14 FTY repl by ESC_CHI */
multiline_comment|/* 18 PI  repl by ESC_LAW */
multiline_comment|/* removed OAD changed to 0xff for future use, OAD is multiIE now */
id|word
id|multi_fac_id
(braket
)braket
op_assign
(brace
l_int|1
comma
id|FTY
)brace
suffix:semicolon
id|word
id|multi_pi_id
(braket
)braket
op_assign
(brace
l_int|1
comma
id|PI
)brace
suffix:semicolon
id|word
id|multi_CiPN_id
(braket
)braket
op_assign
(brace
l_int|1
comma
id|OAD
)brace
suffix:semicolon
id|word
id|multi_ssext_id
(braket
)braket
op_assign
(brace
l_int|1
comma
id|ESC_SSEXT
)brace
suffix:semicolon
id|word
id|multi_vswitch_id
(braket
)braket
op_assign
(brace
l_int|1
comma
id|ESC_VSWITCH
)brace
suffix:semicolon
id|byte
op_star
id|cau
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|byte
id|SS_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x02&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
multiline_comment|/* Hold_Ind struct*/
id|byte
id|CF_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x09&bslash;x02&bslash;x00&bslash;x06&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&quot;
suffix:semicolon
id|byte
id|Interr_Err_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x0a&bslash;x02&bslash;x00&bslash;x07&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x00&quot;
suffix:semicolon
id|byte
id|CONF_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x09&bslash;x16&bslash;x00&bslash;x06&bslash;x00&bslash;x00&bslash;0x00&bslash;0x00&bslash;0x00&bslash;0x00&quot;
suffix:semicolon
id|byte
id|force_mt_info
op_assign
id|FALSE
suffix:semicolon
id|byte
id|dir
suffix:semicolon
id|dword
id|d
suffix:semicolon
id|word
id|w
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|Id
op_assign
(paren
(paren
id|word
)paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x0000
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;sig_remove_id
)paren
(brace
id|plci-&gt;Sig.RNR
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* discard */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;SIG discard while remove pending&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;tel
op_logical_and
id|plci-&gt;SuppState
op_ne
id|CALL_HELD
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;SigInd-Id=%08lx,plci=%x,tel=%x,state=0x%x,channels=%d,Discflowcl=%d&quot;
comma
id|Id
comma
id|plci-&gt;Id
comma
id|plci-&gt;tel
comma
id|plci-&gt;State
comma
id|plci-&gt;channels
comma
id|plci-&gt;hangup_flow_ctrl_timer
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Sig.Ind
op_eq
id|CALL_HOLD_ACK
op_logical_and
id|plci-&gt;channels
)paren
(brace
id|plci-&gt;Sig.RNR
op_assign
l_int|1
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Ind
op_eq
id|HANGUP
op_logical_and
id|plci-&gt;channels
)paren
(brace
id|plci-&gt;Sig.RNR
op_assign
l_int|1
suffix:semicolon
id|plci-&gt;hangup_flow_ctrl_timer
op_increment
suffix:semicolon
multiline_comment|/* recover the network layer after timeout */
r_if
c_cond
(paren
id|plci-&gt;hangup_flow_ctrl_timer
op_eq
l_int|100
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Exceptional disc&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;Sig.RNR
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;hangup_flow_ctrl_timer
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|ncci
op_assign
l_int|1
suffix:semicolon
id|ncci
OL
id|MAX_NCCI
op_plus
l_int|1
suffix:semicolon
id|ncci
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
op_eq
id|plci-&gt;Id
)paren
(brace
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
(brace
id|plci-&gt;channels
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_B3_I
comma
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
op_or
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|0
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* do first parse the info with no OAD in, because OAD will be converted */
multiline_comment|/* first the multiple facility IE, then mult. progress ind.              */
multiline_comment|/* then the parameters for the info_ind + conn_ind                       */
id|IndParse
c_func
(paren
id|plci
comma
id|multi_fac_id
comma
id|multi_fac_parms
comma
id|MAX_MULTI_IE
)paren
suffix:semicolon
id|IndParse
c_func
(paren
id|plci
comma
id|multi_pi_id
comma
id|multi_pi_parms
comma
id|MAX_MULTI_IE
)paren
suffix:semicolon
id|IndParse
c_func
(paren
id|plci
comma
id|multi_ssext_id
comma
id|multi_ssext_parms
comma
id|MAX_MULTI_IE
)paren
suffix:semicolon
id|IndParse
c_func
(paren
id|plci
comma
id|multi_vswitch_id
comma
id|multi_vswitch_parms
comma
id|MAX_MULTI_IE
)paren
suffix:semicolon
id|IndParse
c_func
(paren
id|plci
comma
id|parms_id
comma
id|parms
comma
l_int|0
)paren
suffix:semicolon
id|IndParse
c_func
(paren
id|plci
comma
id|multi_CiPN_id
comma
id|multi_CiPN_parms
comma
id|MAX_MULTI_IE
)paren
suffix:semicolon
id|esc_chi
op_assign
id|parms
(braket
l_int|14
)braket
suffix:semicolon
id|esc_law
op_assign
id|parms
(braket
l_int|18
)braket
suffix:semicolon
id|pty_cai
op_assign
id|parms
(braket
l_int|24
)braket
suffix:semicolon
id|esc_cr
op_assign
id|parms
(braket
l_int|25
)braket
suffix:semicolon
id|esc_profile
op_assign
id|parms
(braket
l_int|27
)braket
suffix:semicolon
r_if
c_cond
(paren
id|esc_cr
(braket
l_int|0
)braket
op_logical_and
id|plci
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;cr_enquiry
op_logical_and
id|plci-&gt;appl
)paren
(brace
id|plci-&gt;cr_enquiry
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* d = MANU_ID            */
multiline_comment|/* w = m_command          */
multiline_comment|/* b = total length       */
multiline_comment|/* b = indication type    */
multiline_comment|/* b = length of all IEs  */
multiline_comment|/* b = IE1                */
multiline_comment|/* S = IE1 length + cont. */
multiline_comment|/* b = IE2                */
multiline_comment|/* S = IE2 lenght + cont. */
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_MANUFACTURER_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwbbbbSbS&quot;
comma
id|_DI_MANU_ID
comma
id|plci-&gt;m_command
comma
l_int|2
op_plus
l_int|1
op_plus
l_int|1
op_plus
id|esc_cr
(braket
l_int|0
)braket
op_plus
l_int|1
op_plus
l_int|1
op_plus
id|esc_law
(braket
l_int|0
)braket
comma
id|plci-&gt;Sig.Ind
comma
l_int|1
op_plus
l_int|1
op_plus
id|esc_cr
(braket
l_int|0
)braket
op_plus
l_int|1
op_plus
l_int|1
op_plus
id|esc_law
(braket
l_int|0
)braket
comma
id|ESC
comma
id|esc_cr
comma
id|ESC
comma
id|esc_law
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* create the additional info structure                                  */
id|add_i
(braket
l_int|1
)braket
op_assign
id|parms
(braket
l_int|15
)braket
suffix:semicolon
multiline_comment|/* KEY of additional info */
id|add_i
(braket
l_int|2
)braket
op_assign
id|parms
(braket
l_int|11
)braket
suffix:semicolon
multiline_comment|/* UUI of additional info */
id|ai_len
op_assign
id|AddInfo
c_func
(paren
id|add_i
comma
id|multi_fac_parms
comma
id|esc_chi
comma
id|facility
)paren
suffix:semicolon
multiline_comment|/* the ESC_LAW indicates if u-Law or a-Law is actually used by the card  */
multiline_comment|/* indication returns by the card if requested by the function           */
multiline_comment|/* AutomaticLaw() after driver init                                      */
r_if
c_cond
(paren
id|a-&gt;automatic_law
OL
l_int|4
)paren
(brace
r_if
c_cond
(paren
id|esc_law
(braket
l_int|0
)braket
)paren
(brace
r_if
c_cond
(paren
id|esc_law
(braket
l_int|2
)braket
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;u-Law selected&quot;
)paren
)paren
suffix:semicolon
id|a-&gt;u_law
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;a-Law selected&quot;
)paren
)paren
suffix:semicolon
id|a-&gt;u_law
op_assign
l_int|0
suffix:semicolon
)brace
id|a-&gt;automatic_law
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|plci
op_eq
id|a-&gt;automatic_lawPLCI
)paren
(brace
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|a-&gt;automatic_lawPLCI
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|esc_profile
(braket
l_int|0
)braket
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] CardProfile: %lx %lx %lx %lx %lx&quot;
comma
id|UnMapController
(paren
id|a-&gt;Id
)paren
comma
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|6
)braket
)paren
comma
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|10
)braket
)paren
comma
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|14
)braket
)paren
comma
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|18
)braket
)paren
comma
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|46
)braket
)paren
)paren
)paren
suffix:semicolon
id|a-&gt;profile.Global_Options
op_and_assign
l_int|0x000000ffL
suffix:semicolon
id|a-&gt;profile.B1_Protocols
op_and_assign
l_int|0x000003ffL
suffix:semicolon
id|a-&gt;profile.B2_Protocols
op_and_assign
l_int|0x00001fdfL
suffix:semicolon
id|a-&gt;profile.B3_Protocols
op_and_assign
l_int|0x000000b7L
suffix:semicolon
id|a-&gt;profile.Global_Options
op_and_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|6
)braket
)paren
op_or
id|GL_BCHANNEL_OPERATION_SUPPORTED
suffix:semicolon
id|a-&gt;profile.B1_Protocols
op_and_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|a-&gt;profile.B2_Protocols
op_and_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|14
)braket
)paren
suffix:semicolon
id|a-&gt;profile.B3_Protocols
op_and_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|18
)braket
)paren
suffix:semicolon
id|a-&gt;manufacturer_features
op_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|46
)braket
)paren
suffix:semicolon
id|a-&gt;man_profile.private_options
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_ECHO_CANCELLER
)paren
(brace
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_ECHO_CANCELLER
suffix:semicolon
id|a-&gt;profile.Global_Options
op_or_assign
id|GL_ECHO_CANCELLER_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_RTP
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_RTP
suffix:semicolon
id|a-&gt;man_profile.rtp_primary_payloads
op_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|50
)braket
)paren
suffix:semicolon
id|a-&gt;man_profile.rtp_additional_payloads
op_assign
id|GET_DWORD
(paren
op_amp
id|esc_profile
(braket
l_int|54
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_T38
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_T38
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_SUB_SEP_PWD
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_V18
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_V18
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DTMF_TONE
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_PIAFS
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_PIAFS
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_FAX_PAPER_FORMATS
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_VOWN
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_VOWN
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_NONSTANDARD
)paren
id|a-&gt;man_profile.private_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
suffix:semicolon
)brace
r_else
(brace
id|a-&gt;profile.Global_Options
op_and_assign
l_int|0x0000007fL
suffix:semicolon
id|a-&gt;profile.B1_Protocols
op_and_assign
l_int|0x000003dfL
suffix:semicolon
id|a-&gt;profile.B2_Protocols
op_and_assign
l_int|0x00001adfL
suffix:semicolon
id|a-&gt;profile.B3_Protocols
op_and_assign
l_int|0x000000b7L
suffix:semicolon
id|a-&gt;manufacturer_features
op_and_assign
id|MANUFACTURER_FEATURE_HARDDTMF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
(paren
id|MANUFACTURER_FEATURE_HARDDTMF
op_or
id|MANUFACTURER_FEATURE_SOFTDTMF_SEND
op_or
id|MANUFACTURER_FEATURE_SOFTDTMF_RECEIVE
)paren
)paren
(brace
id|a-&gt;profile.Global_Options
op_or_assign
id|GL_DTMF_SUPPORTED
suffix:semicolon
)brace
id|a-&gt;manufacturer_features
op_and_assign
op_complement
id|MANUFACTURER_FEATURE_OOB_CHANNEL
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] Profile: %lx %lx %lx %lx %lx&quot;
comma
id|UnMapController
(paren
id|a-&gt;Id
)paren
comma
id|a-&gt;profile.Global_Options
comma
id|a-&gt;profile.B1_Protocols
comma
id|a-&gt;profile.B2_Protocols
comma
id|a-&gt;profile.B3_Protocols
comma
id|a-&gt;manufacturer_features
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/* codec plci for the handset/hook state support is just an internal id  */
r_if
c_cond
(paren
id|plci
op_ne
id|a-&gt;AdvCodecPLCI
)paren
(brace
id|force_mt_info
op_assign
id|SendMultiIE
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_fac_parms
comma
id|FTY
comma
l_int|0x20
comma
l_int|0
)paren
suffix:semicolon
id|force_mt_info
op_or_assign
id|SendMultiIE
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_pi_parms
comma
id|PI
comma
l_int|0x210
comma
l_int|0
)paren
suffix:semicolon
id|SendSSExtInd
c_func
(paren
l_int|NULL
comma
id|plci
comma
id|Id
comma
id|multi_ssext_parms
)paren
suffix:semicolon
id|SendInfo
c_func
(paren
id|plci
comma
id|Id
comma
id|parms
comma
id|force_mt_info
)paren
suffix:semicolon
id|VSwitchReqInd
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_vswitch_parms
)paren
suffix:semicolon
)brace
multiline_comment|/* switch the codec to the b-channel                                     */
r_if
c_cond
(paren
id|esc_chi
(braket
l_int|0
)braket
op_logical_and
id|plci
op_logical_and
op_logical_neg
id|plci-&gt;SuppState
)paren
(brace
id|plci-&gt;b_channel
op_assign
id|esc_chi
(braket
id|esc_chi
(braket
l_int|0
)braket
)braket
op_amp
l_int|0x1f
suffix:semicolon
id|mixer_set_bchannel_id_esc
(paren
id|plci
comma
id|plci-&gt;b_channel
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;storeChannel=0x%x&quot;
comma
id|plci-&gt;b_channel
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
op_logical_and
id|plci-&gt;appl
)paren
(brace
id|SetVoiceChannel
c_func
(paren
id|a-&gt;AdvCodecPLCI
comma
id|esc_chi
comma
id|a
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
(brace
id|Number
op_assign
id|plci-&gt;appl-&gt;Number
op_increment
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|plci-&gt;Sig.Ind
)paren
(brace
multiline_comment|/* Response to Get_Supported_Services request */
r_case
id|S_SUPPORTED
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;S_Supported&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|0
)braket
op_eq
l_int|4
)paren
(brace
id|PUT_DWORD
c_func
(paren
op_amp
id|CF_Ind
(braket
l_int|6
)braket
comma
id|GET_DWORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_DWORD
c_func
(paren
op_amp
id|CF_Ind
(braket
l_int|6
)braket
comma
id|MASK_TERMINAL_PORTABILITY
op_or
id|MASK_HOLD_RETRIEVE
)paren
suffix:semicolon
)brace
id|PUT_WORD
(paren
op_amp
id|CF_Ind
(braket
l_int|1
)braket
comma
l_int|0
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|CF_Ind
(braket
l_int|4
)braket
comma
l_int|0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0x7
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
l_int|0
comma
l_int|3
comma
id|CF_Ind
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* Supplementary Service rejected */
r_case
id|S_SERVICE_REJ
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;S_Reject=0x%x&quot;
comma
id|pty_cai
(braket
l_int|5
)braket
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pty_cai
(braket
l_int|0
)braket
)paren
(brace
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|ECT_EXECUTE
suffix:colon
r_case
id|THREE_PTY_END
suffix:colon
r_case
id|THREE_PTY_BEGIN
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
)paren
(brace
r_break
suffix:semicolon
)brace
id|tplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
id|rId
op_assign
(paren
(paren
id|word
)paren
id|tplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|tplci-&gt;adapter-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|tplci-&gt;tel
)paren
(brace
id|rId
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
op_eq
id|ECT_EXECUTE
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_ECT
)paren
suffix:semicolon
id|plci-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;relatedPTYPLCI-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|pty_cai
(braket
l_int|5
)braket
op_plus
l_int|3
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x3600
op_or
(paren
id|word
)paren
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x300E
)paren
suffix:semicolon
)brace
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_FACILITY_I
comma
id|rId
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CALL_DEFLECTION
suffix:colon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x3600
op_or
(paren
id|word
)paren
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x300E
)paren
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|pty_cai
(braket
l_int|5
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|CDEnable
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
id|application
(braket
id|i
)braket
dot
id|CDEnable
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|DEACTIVATION_DIVERSION
suffix:colon
r_case
id|ACTIVATION_DIVERSION
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFU
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFB
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFNR
suffix:colon
r_case
id|DIVERSION_INTERROGATE_NUM
suffix:colon
r_case
id|CCBS_REQUEST
suffix:colon
r_case
id|CCBS_DEACTIVATE
suffix:colon
r_case
id|CCBS_INTERROGATE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|4
)braket
comma
l_int|0x3600
op_or
(paren
id|word
)paren
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|4
)braket
comma
l_int|0x300E
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|DEACTIVATION_DIVERSION
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Deact_Div&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0x9
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x6
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_CALL_FORWARDING_STOP
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACTIVATION_DIVERSION
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Act_Div&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0x9
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x6
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_CALL_FORWARDING_START
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DIVERSION_INTERROGATE_CFU
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFB
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFNR
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Interr_Div&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0xa
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x7
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_INTERROGATE_DIVERSION
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DIVERSION_INTERROGATE_NUM
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Interr_Num&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0xa
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x7
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_INTERROGATE_NUMBERS
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_REQUEST
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Request&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0xd
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0xa
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_REQUEST
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_DEACTIVATE
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Deactivate&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0x9
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x6
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_DEACTIVATE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_INTERROGATE
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Interrogate&quot;
)paren
)paren
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|0
)braket
op_assign
l_int|0xb
suffix:semicolon
id|Interr_Err_Ind
(braket
l_int|3
)braket
op_assign
l_int|0x8
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_INTERROGATE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|PUT_DWORD
c_func
(paren
op_amp
id|Interr_Err_Ind
(braket
l_int|6
)braket
comma
id|plci-&gt;appl-&gt;S_Handle
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0x7
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|Interr_Err_Ind
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACTIVATION_MWI
suffix:colon
r_case
id|DEACTIVATION_MWI
suffix:colon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
op_eq
id|ACTIVATION_MWI
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_MWI_ACTIVATE
)paren
suffix:semicolon
)brace
r_else
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_MWI_DEACTIVATE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x3600
op_or
(paren
id|word
)paren
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
l_int|0x300E
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;cr_enquiry
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xf
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CONF_ADD
suffix:colon
multiline_comment|/* ERROR */
r_case
id|CONF_BEGIN
suffix:colon
r_case
id|CONF_DROP
suffix:colon
r_case
id|CONF_ISOLATE
suffix:colon
r_case
id|CONF_REATTACH
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|9
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|6
suffix:semicolon
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|CONF_BEGIN
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_BEGIN
)paren
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_DROP
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_DROP
)paren
suffix:semicolon
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ISOLATE
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_ISOLATE
)paren
suffix:semicolon
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_REATTACH
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_REATTACH
)paren
suffix:semicolon
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ADD
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_ADD
)paren
suffix:semicolon
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|tplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
r_if
c_cond
(paren
id|tplci
)paren
(brace
id|tplci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
)brace
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|2
)braket
op_ne
l_int|0xff
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|4
)braket
comma
l_int|0x3600
op_or
(paren
id|word
)paren
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|4
)braket
comma
l_int|0x3303
)paren
suffix:semicolon
multiline_comment|/* Time-out: network did not respond&n;                                            within the required time */
)brace
id|PUT_DWORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|6
)braket
comma
l_int|0x0
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|CONF_Ind
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
multiline_comment|/* Supplementary Service indicates success */
r_case
id|S_SERVICE
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Service_Ind&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|CF_Ind
(braket
l_int|4
)braket
comma
l_int|0
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|THREE_PTY_END
suffix:colon
r_case
id|THREE_PTY_BEGIN
suffix:colon
r_case
id|ECT_EXECUTE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
)paren
(brace
r_break
suffix:semicolon
)brace
id|tplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
id|rId
op_assign
(paren
(paren
id|word
)paren
id|tplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|tplci-&gt;adapter-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|tplci-&gt;tel
)paren
(brace
id|rId
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
op_eq
id|ECT_EXECUTE
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_ECT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;vswitchstate
op_ne
l_int|3
)paren
(brace
id|plci-&gt;ptyState
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ECT OK&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_FACILITY_I
comma
id|rId
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_else
(brace
r_switch
c_cond
(paren
id|plci-&gt;ptyState
)paren
(brace
r_case
id|S_3PTY_BEGIN
suffix:colon
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;3PTY ON&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|S_3PTY_END
suffix:colon
id|plci-&gt;ptyState
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;3PTY OFF&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|pty_cai
(braket
l_int|5
)braket
op_plus
l_int|3
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_FACILITY_I
comma
id|rId
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CALL_DEFLECTION
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|pty_cai
(braket
l_int|5
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|CDEnable
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
id|application
(braket
id|i
)braket
dot
id|CDEnable
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|DEACTIVATION_DIVERSION
suffix:colon
r_case
id|ACTIVATION_DIVERSION
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_break
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|CF_Ind
(braket
l_int|1
)braket
comma
id|pty_cai
(braket
l_int|5
)braket
op_plus
l_int|2
)paren
suffix:semicolon
id|PUT_DWORD
c_func
(paren
op_amp
id|CF_Ind
(braket
l_int|6
)braket
comma
id|plci-&gt;appl-&gt;S_Handle
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0x7
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|CF_Ind
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DIVERSION_INTERROGATE_CFU
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFB
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFNR
suffix:colon
r_case
id|DIVERSION_INTERROGATE_NUM
suffix:colon
r_case
id|CCBS_REQUEST
suffix:colon
r_case
id|CCBS_DEACTIVATE
suffix:colon
r_case
id|CCBS_INTERROGATE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|DIVERSION_INTERROGATE_CFU
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFB
suffix:colon
r_case
id|DIVERSION_INTERROGATE_CFNR
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Interr_Div&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
comma
id|S_INTERROGATE_DIVERSION
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|3
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_break
suffix:semicolon
r_case
id|DIVERSION_INTERROGATE_NUM
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Interr_Num&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
comma
id|S_INTERROGATE_NUMBERS
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|3
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_break
suffix:semicolon
r_case
id|CCBS_REQUEST
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Request&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
comma
id|S_CCBS_REQUEST
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|3
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_break
suffix:semicolon
r_case
id|CCBS_DEACTIVATE
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Deactivate&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
comma
id|S_CCBS_DEACTIVATE
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|3
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_break
suffix:semicolon
r_case
id|CCBS_INTERROGATE
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CCBS Interrogate&quot;
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|1
)braket
comma
id|S_CCBS_INTERROGATE
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|3
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|3
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_break
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|4
)braket
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Supplementary Service Reason */
id|PUT_DWORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|6
)braket
comma
id|plci-&gt;appl-&gt;S_Handle
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0x7
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
l_int|3
comma
id|pty_cai
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACTIVATION_MWI
suffix:colon
r_case
id|DEACTIVATION_MWI
suffix:colon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
op_eq
id|ACTIVATION_MWI
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_MWI_ACTIVATE
)paren
suffix:semicolon
)brace
r_else
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_MWI_DEACTIVATE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;cr_enquiry
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xf
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|MWI_INDICATION
suffix:colon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|0
)braket
op_ge
l_int|0x12
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|pty_cai
(braket
l_int|3
)braket
comma
id|S_MWI_INDICATE
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|2
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|2
suffix:semicolon
multiline_comment|/* len Parameter */
id|pty_cai
(braket
l_int|5
)braket
op_assign
id|pty_cai
(braket
l_int|0
)braket
op_minus
l_int|5
suffix:semicolon
multiline_comment|/* Supplementary Service-specific parameter len */
r_if
c_cond
(paren
id|plci-&gt;appl
op_logical_and
(paren
id|a-&gt;Notification_Mask
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|SMASK_MWI
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
id|GET_MWI_STATE
)paren
multiline_comment|/* result on Message Waiting Listen */
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xf
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
l_int|3
comma
op_amp
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
l_int|3
comma
op_amp
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;Notification_Mask
(braket
id|i
)braket
op_amp
id|SMASK_MWI
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0x7
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
l_int|3
comma
op_amp
id|pty_cai
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|pty_cai
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|pty_cai
(braket
l_int|0
)braket
)paren
(brace
multiline_comment|/* acknowledge */
id|facility
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* returncode */
)brace
r_else
id|facility
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* reject */
id|facility
(braket
l_int|2
)braket
op_assign
l_int|0xff
suffix:semicolon
multiline_comment|/* returncode */
)brace
id|facility
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|facility
(braket
l_int|1
)braket
op_assign
id|MWI_RESPONSE
suffix:semicolon
multiline_comment|/* Function */
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|facility
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
id|multi_ssext_parms
(braket
l_int|0
)braket
)paren
suffix:semicolon
multiline_comment|/* remembered parameter -&gt; only one possible */
id|sig_req
c_func
(paren
id|plci
comma
id|S_SERVICE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ADD
suffix:colon
multiline_comment|/* OK */
r_case
id|CONF_BEGIN
suffix:colon
r_case
id|CONF_DROP
suffix:colon
r_case
id|CONF_ISOLATE
suffix:colon
r_case
id|CONF_REATTACH
suffix:colon
r_case
id|CONF_PARTYDISC
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|9
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|6
suffix:semicolon
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|CONF_BEGIN
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_BEGIN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pty_cai
(braket
l_int|0
)braket
op_eq
l_int|6
)paren
(brace
id|d
op_assign
id|pty_cai
(braket
l_int|6
)braket
suffix:semicolon
id|PUT_DWORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|6
)braket
comma
id|d
)paren
suffix:semicolon
multiline_comment|/* PartyID */
)brace
r_else
(brace
id|PUT_DWORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|6
)braket
comma
l_int|0x0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CONF_ISOLATE
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_ISOLATE
)paren
suffix:semicolon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_REATTACH
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_REATTACH
)paren
suffix:semicolon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_DROP
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_DROP
)paren
suffix:semicolon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONF_ADD
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_ADD
)paren
suffix:semicolon
id|d
op_assign
id|pty_cai
(braket
l_int|6
)braket
suffix:semicolon
id|PUT_DWORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|6
)braket
comma
id|d
)paren
suffix:semicolon
multiline_comment|/* PartyID */
id|tplci
op_assign
id|plci-&gt;relatedPTYPLCI
suffix:semicolon
r_if
c_cond
(paren
id|tplci
)paren
(brace
id|tplci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CONF_PARTYDISC
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CONF_PARTYDISC
)paren
suffix:semicolon
id|d
op_assign
id|pty_cai
(braket
l_int|6
)braket
suffix:semicolon
id|PUT_DWORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|4
)braket
comma
id|d
)paren
suffix:semicolon
multiline_comment|/* PartyID */
r_break
suffix:semicolon
)brace
id|plci-&gt;ptyState
op_assign
id|CONNECTED
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|CONF_Ind
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_INFO_RETAIN
suffix:colon
r_case
id|CCBS_ERASECALLLINKAGEID
suffix:colon
r_case
id|CCBS_STOP_ALERTING
suffix:colon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
r_switch
c_cond
(paren
id|pty_cai
(braket
l_int|5
)braket
)paren
(brace
r_case
id|CCBS_INFO_RETAIN
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_INFO_RETAIN
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_STOP_ALERTING
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_STOP_ALERTING
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CCBS_ERASECALLLINKAGEID
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|1
)braket
comma
id|S_CCBS_ERASECALLLINKAGEID
)paren
suffix:semicolon
id|CONF_Ind
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|CONF_Ind
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|CONF_Ind
(braket
l_int|6
)braket
op_assign
l_int|0
suffix:semicolon
id|CONF_Ind
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
id|w
op_assign
id|pty_cai
(braket
l_int|6
)braket
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|CONF_Ind
(braket
l_int|4
)braket
comma
id|w
)paren
suffix:semicolon
multiline_comment|/* PartyID */
r_if
c_cond
(paren
id|plci-&gt;appl
op_logical_and
(paren
id|a-&gt;Notification_Mask
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|SMASK_CCBS
)paren
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|CONF_Ind
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|a-&gt;Notification_Mask
(braket
id|i
)braket
op_amp
id|SMASK_CCBS
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0x7
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|CONF_Ind
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CALL_HOLD_REJ
suffix:colon
id|cau
op_assign
id|parms
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
)paren
(brace
id|i
op_assign
id|_L3_CAUSE
op_or
id|cau
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|0
)paren
(brace
id|i
op_assign
l_int|0x3603
suffix:semicolon
)brace
)brace
r_else
(brace
id|i
op_assign
l_int|0x3603
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_HOLD
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;SuppState
op_eq
id|HOLD_REQUEST
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|IDLE
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CALL_HOLD_ACK
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;SuppState
op_eq
id|HOLD_REQUEST
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|CALL_HELD
suffix:semicolon
id|CodecIdCheck
c_func
(paren
id|a
comma
id|plci
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|hold_save_command
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CALL_RETRIEVE_REJ
suffix:colon
id|cau
op_assign
id|parms
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
)paren
(brace
id|i
op_assign
id|_L3_CAUSE
op_or
id|cau
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|0
)paren
(brace
id|i
op_assign
l_int|0x3603
suffix:semicolon
)brace
)brace
r_else
(brace
id|i
op_assign
l_int|0x3603
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_RETRIEVE
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|4
)braket
comma
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;SuppState
op_eq
id|RETRIEVE_REQUEST
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|CALL_HELD
suffix:semicolon
id|CodecIdCheck
c_func
(paren
id|a
comma
id|plci
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CALL_RETRIEVE_ACK
suffix:colon
id|PUT_WORD
c_func
(paren
op_amp
id|SS_Ind
(braket
l_int|1
)braket
comma
id|S_RETRIEVE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;SuppState
op_eq
id|RETRIEVE_REQUEST
)paren
(brace
id|plci-&gt;SuppState
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_FORCE_OUTG_NL
suffix:semicolon
id|plci-&gt;b_channel
op_assign
id|esc_chi
(braket
id|esc_chi
(braket
l_int|0
)braket
)braket
op_amp
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|mixer_set_bchannel_id_esc
(paren
id|plci
comma
id|plci-&gt;b_channel
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RetrChannel=0x%x&quot;
comma
id|plci-&gt;b_channel
)paren
)paren
suffix:semicolon
id|SetVoiceChannel
c_func
(paren
id|a-&gt;AdvCodecPLCI
comma
id|esc_chi
comma
id|a
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_TRANSPARENT
op_logical_and
id|plci-&gt;B3_prot
op_eq
id|B3_TRANSPARENT
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Get B-ch&quot;
)paren
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|retrieve_restore_command
)paren
suffix:semicolon
)brace
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
r_else
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|retrieve_restore_command
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|INDICATE_IND
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|LISTENING
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|cip
op_assign
id|find_cip
c_func
(paren
id|a
comma
id|parms
(braket
l_int|4
)braket
comma
id|parms
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|cip_mask
op_assign
l_int|1L
op_lshift
id|cip
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;cip=%d,cip_mask=%lx&quot;
comma
id|cip
comma
id|cip_mask
)paren
)paren
suffix:semicolon
id|clear_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|remove_started
op_logical_and
op_logical_neg
id|a-&gt;adapter_disabled
)paren
(brace
id|set_c_ind_mask_bit
(paren
id|plci
comma
id|MAX_APPL
)paren
suffix:semicolon
id|group_optimization
c_func
(paren
id|a
comma
id|plci
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
op_logical_and
(paren
id|a-&gt;CIP_Mask
(braket
id|i
)braket
op_amp
l_int|1
op_logical_or
id|a-&gt;CIP_Mask
(braket
id|i
)braket
op_amp
id|cip_mask
)paren
op_logical_and
id|CPN_filter_ok
c_func
(paren
id|parms
(braket
l_int|0
)braket
comma
id|a
comma
id|i
)paren
op_logical_and
id|test_group_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;storedcip_mask[%d]=0x%lx&quot;
comma
id|i
comma
id|a-&gt;CIP_Mask
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
id|set_c_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
suffix:semicolon
id|dump_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_CON_PENDING
suffix:semicolon
id|plci-&gt;call_dir
op_assign
(paren
id|plci-&gt;call_dir
op_amp
op_complement
(paren
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
)paren
)paren
op_or
id|CALL_DIR_IN
op_or
id|CALL_DIR_ANSWER
suffix:semicolon
r_if
c_cond
(paren
id|esc_chi
(braket
l_int|0
)braket
)paren
(brace
id|plci-&gt;b_channel
op_assign
id|esc_chi
(braket
id|esc_chi
(braket
l_int|0
)braket
)braket
op_amp
l_int|0x1f
suffix:semicolon
id|mixer_set_bchannel_id_esc
(paren
id|plci
comma
id|plci-&gt;b_channel
)paren
suffix:semicolon
)brace
multiline_comment|/* if a listen on the ext controller is done, check if hook states */
multiline_comment|/* are supported or if just a on board codec must be activated     */
r_if
c_cond
(paren
id|a-&gt;codec_listen
(braket
id|i
)braket
op_logical_and
op_logical_neg
id|a-&gt;AdvSignalPLCI
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|HANDSET
)paren
(brace
id|plci-&gt;tel
op_assign
id|ADV_VOICE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|ON_BOARD_CODEC
)paren
(brace
id|plci-&gt;tel
op_assign
id|CODEC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|a-&gt;codec_listen
(braket
id|i
)braket
op_assign
id|plci
suffix:semicolon
)brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_CONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wSSSSSSSbSSSSS&quot;
comma
id|cip
comma
multiline_comment|/* CIP                 */
id|parms
(braket
l_int|0
)braket
comma
multiline_comment|/* CalledPartyNumber   */
id|multi_CiPN_parms
(braket
l_int|0
)braket
comma
multiline_comment|/* CallingPartyNumber  */
id|parms
(braket
l_int|2
)braket
comma
multiline_comment|/* CalledPartySubad    */
id|parms
(braket
l_int|3
)braket
comma
multiline_comment|/* CallingPartySubad   */
id|parms
(braket
l_int|4
)braket
comma
multiline_comment|/* BearerCapability    */
id|parms
(braket
l_int|5
)braket
comma
multiline_comment|/* LowLC               */
id|parms
(braket
l_int|6
)braket
comma
multiline_comment|/* HighLC              */
id|ai_len
comma
multiline_comment|/* nested struct add_i */
id|add_i
(braket
l_int|0
)braket
comma
multiline_comment|/* B channel info    */
id|add_i
(braket
l_int|1
)braket
comma
multiline_comment|/* keypad facility   */
id|add_i
(braket
l_int|2
)braket
comma
multiline_comment|/* user user data    */
id|add_i
(braket
l_int|3
)braket
comma
multiline_comment|/* nested facility   */
id|multi_CiPN_parms
(braket
l_int|1
)braket
multiline_comment|/* second CiPN(SCR)   */
)paren
suffix:semicolon
id|SendSSExtInd
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|plci
comma
id|Id
comma
id|multi_ssext_parms
)paren
suffix:semicolon
id|SendSetupInfo
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|plci
comma
id|Id
comma
id|parms
comma
id|SendMultiIE
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_pi_parms
comma
id|PI
comma
l_int|0x210
comma
id|TRUE
)paren
)paren
suffix:semicolon
)brace
)brace
id|clear_c_ind_mask_bit
(paren
id|plci
comma
id|MAX_APPL
)paren
suffix:semicolon
id|dump_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
id|plci-&gt;notifiedcall
op_assign
l_int|0
suffix:semicolon
id|a-&gt;listen_active
op_decrement
suffix:semicolon
id|listen_check
c_func
(paren
id|a
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CALL_PEND_NOTIFY
suffix:colon
id|plci-&gt;notifiedcall
op_assign
l_int|1
suffix:semicolon
id|listen_check
c_func
(paren
id|a
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CALL_IND
suffix:colon
r_case
id|CALL_CON
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|ADVANCED_VOICE_SIG
op_logical_or
id|plci-&gt;State
op_eq
id|ADVANCED_VOICE_NOSIG
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
id|PERM_COD_CONN_PEND
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|ADVANCED_VOICE_NOSIG
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec OK&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;AdvSignalPLCI
)paren
(brace
id|tplci
op_assign
id|a-&gt;AdvSignalPLCI
suffix:semicolon
r_if
c_cond
(paren
id|tplci-&gt;spoofed_msg
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Spoofed Msg(0x%x)&quot;
comma
id|tplci-&gt;spoofed_msg
)paren
)paren
suffix:semicolon
id|tplci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|tplci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|x_Id
op_assign
(paren
(paren
id|word
)paren
id|tplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|tplci-&gt;adapter-&gt;Id
op_or
l_int|0x80
suffix:semicolon
r_switch
c_cond
(paren
id|tplci-&gt;spoofed_msg
)paren
(brace
r_case
id|CALL_RES
suffix:colon
id|tplci-&gt;command
op_assign
id|_CONNECT_I
op_or
id|RESPONSE
suffix:semicolon
id|api_load_msg
(paren
op_amp
id|tplci-&gt;saved_msg
comma
id|saved_parms
)paren
suffix:semicolon
id|add_b1
c_func
(paren
id|tplci
comma
op_amp
id|saved_parms
(braket
l_int|1
)braket
comma
l_int|0
comma
id|tplci-&gt;B1_facilities
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tplci-&gt;adapter-&gt;Info_Mask
(braket
id|tplci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|tplci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
id|add_s
c_func
(paren
id|tplci
comma
id|CONN_NR
comma
op_amp
id|saved_parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|tplci
comma
id|LLC
comma
op_amp
id|saved_parms
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|tplci
comma
op_amp
id|saved_parms
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|tplci-&gt;State
op_assign
id|INC_CON_ACCEPT
suffix:semicolon
id|sig_req
c_func
(paren
id|tplci
comma
id|CALL_RES
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AWAITING_SELECT_B
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Select_B continue&quot;
)paren
)paren
suffix:semicolon
id|start_internal_command
(paren
id|x_Id
comma
id|tplci
comma
id|select_b_command
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AWAITING_MANUF_CON
suffix:colon
multiline_comment|/* Get_Plci per Manufacturer_Req to ext controller */
r_if
c_cond
(paren
op_logical_neg
id|tplci-&gt;Sig.Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No SigID!&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_MANUFACTURER_R
op_or
id|CONFIRM
comma
id|x_Id
comma
id|tplci-&gt;number
comma
l_string|&quot;dww&quot;
comma
id|_DI_MANU_ID
comma
id|_MANUFACTURER_R
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tplci-&gt;command
op_assign
id|_MANUFACTURER_R
suffix:semicolon
id|api_load_msg
(paren
op_amp
id|tplci-&gt;saved_msg
comma
id|saved_parms
)paren
suffix:semicolon
id|dir
op_assign
id|saved_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|dir
op_eq
l_int|1
)paren
(brace
id|sig_req
c_func
(paren
id|tplci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
id|sig_req
c_func
(paren
id|tplci
comma
id|LISTEN_REQ
comma
l_int|0
)paren
suffix:semicolon
)brace
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_MANUFACTURER_R
op_or
id|CONFIRM
comma
id|x_Id
comma
id|tplci-&gt;number
comma
l_string|&quot;dww&quot;
comma
id|_DI_MANU_ID
comma
id|_MANUFACTURER_R
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
(paren
id|CALL_REQ
op_or
id|AWAITING_MANUF_CON
)paren
suffix:colon
id|sig_req
c_func
(paren
id|tplci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CALL_REQ
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|tplci-&gt;Sig.Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No SigID!&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_CONNECT_R
op_or
id|CONFIRM
comma
id|tplci-&gt;adapter-&gt;Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|_OUT_OF_PLCI
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tplci-&gt;command
op_assign
id|_CONNECT_R
suffix:semicolon
id|api_load_msg
(paren
op_amp
id|tplci-&gt;saved_msg
comma
id|saved_parms
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|tplci
comma
id|CPN
comma
op_amp
id|saved_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|add_s
c_func
(paren
id|tplci
comma
id|DSA
comma
op_amp
id|saved_parms
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|add_ai
c_func
(paren
id|tplci
comma
op_amp
id|saved_parms
(braket
l_int|9
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|tplci
comma
id|CALL_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CALL_RETRIEVE
suffix:colon
id|tplci-&gt;command
op_assign
id|C_RETRIEVE_REQ
suffix:semicolon
id|sig_req
c_func
(paren
id|tplci
comma
id|CALL_RETRIEVE
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|tplci-&gt;spoofed_msg
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tplci-&gt;internal_command
op_eq
l_int|0
)paren
id|next_internal_command
(paren
id|x_Id
comma
id|tplci
)paren
suffix:semicolon
)brace
)brace
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;***Codec Hook Init Req&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|PERM_COD_HOOK
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|FTY
comma
l_string|&quot;&bslash;x01&bslash;x09&quot;
)paren
suffix:semicolon
multiline_comment|/* Get Hook State*/
id|sig_req
c_func
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;command
op_ne
id|_MANUFACTURER_R
multiline_comment|/* old style permanent connect */
op_logical_and
id|plci-&gt;State
op_ne
id|INC_ACT_PENDING
)paren
(brace
id|mixer_set_bchannel_id_esc
(paren
id|plci
comma
id|plci-&gt;b_channel
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
op_logical_and
id|plci-&gt;SuppState
op_eq
id|IDLE
)paren
multiline_comment|/* with permanent codec switch on immediately */
(brace
id|chi
(braket
l_int|2
)braket
op_assign
id|plci-&gt;b_channel
suffix:semicolon
id|SetVoiceChannel
c_func
(paren
id|a-&gt;AdvCodecPLCI
comma
id|chi
comma
id|a
)paren
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;Sss&quot;
comma
id|parms
(braket
l_int|21
)braket
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|INC_ACT_PENDING
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|TEL_CTRL
suffix:colon
id|Number
op_assign
l_int|0
suffix:semicolon
id|ie
op_assign
id|multi_fac_parms
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* inspect the facility hook indications */
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|ADVANCED_VOICE_SIG
op_logical_and
id|ie
(braket
l_int|0
)braket
)paren
(brace
r_switch
c_cond
(paren
id|ie
(braket
l_int|1
)braket
op_amp
l_int|0x91
)paren
(brace
r_case
l_int|0x80
suffix:colon
multiline_comment|/* hook off */
r_case
l_int|0x81
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
id|PERM_COD_HOOK
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;init:hook_off&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;hook_state
op_assign
id|ie
(braket
l_int|1
)braket
suffix:semicolon
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
multiline_comment|/* ignore doubled hook indications */
(brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;hook_state
)paren
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x80
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ignore hook&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;hook_state
op_assign
id|ie
(braket
l_int|1
)braket
op_amp
l_int|0x91
suffix:semicolon
)brace
multiline_comment|/* check for incoming call pending */
multiline_comment|/* and signal &squot;+&squot;.Appl must decide */
multiline_comment|/* with connect_res if call must   */
multiline_comment|/* accepted or not                 */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|tplci
op_assign
l_int|NULL
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;codec_listen
(braket
id|i
)braket
op_logical_and
(paren
id|a-&gt;codec_listen
(braket
id|i
)braket
op_member_access_from_pointer
id|State
op_eq
id|INC_CON_PENDING
op_logical_or
id|a-&gt;codec_listen
(braket
id|i
)braket
op_member_access_from_pointer
id|State
op_eq
id|INC_CON_ALERT
)paren
)paren
(brace
id|tplci
op_assign
id|a-&gt;codec_listen
(braket
id|i
)braket
suffix:semicolon
id|tplci-&gt;appl
op_assign
op_amp
id|application
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
multiline_comment|/* no incoming call, do outgoing call */
multiline_comment|/* and signal &squot;+&squot; if outg. setup   */
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;AdvSignalPLCI
op_logical_and
op_logical_neg
id|tplci
)paren
(brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|a-&gt;AdvSignalPLCI
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|tplci
op_assign
id|a-&gt;AdvSignalPLCI
suffix:semicolon
id|tplci-&gt;tel
op_assign
id|ADV_VOICE
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|voice_cai
(braket
l_int|5
)braket
comma
id|a-&gt;AdvSignalAppl-&gt;MaxDataLength
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;Info_Mask
(braket
id|a-&gt;AdvSignalAppl-&gt;Id
op_minus
l_int|1
)braket
op_amp
l_int|0x200
)paren
(brace
multiline_comment|/* early B3 connect (CIP mask bit 9) no release after a disc */
id|add_p
c_func
(paren
id|tplci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|tplci
comma
id|CAI
comma
id|voice_cai
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|tplci
comma
id|OAD
comma
id|a-&gt;TelOAD
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|tplci
comma
id|OSA
comma
id|a-&gt;TelOSA
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|tplci
comma
id|SHIFT
op_or
l_int|6
comma
l_int|NULL
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|tplci
comma
id|SIN
comma
l_string|&quot;&bslash;x02&bslash;x01&bslash;x00&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|tplci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|tplci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|a-&gt;AdvSignalPLCI-&gt;internal_command
op_assign
id|HOOK_OFF_REQ
suffix:semicolon
id|a-&gt;AdvSignalPLCI-&gt;command
op_assign
l_int|0
suffix:semicolon
id|tplci-&gt;appl
op_assign
id|a-&gt;AdvSignalAppl
suffix:semicolon
id|tplci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
id|send_req
c_func
(paren
id|tplci
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|tplci
)paren
(brace
r_break
suffix:semicolon
)brace
id|Id
op_assign
(paren
(paren
id|word
)paren
id|tplci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
id|sendf
c_func
(paren
id|tplci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|0
comma
l_string|&quot;&bslash;x01+&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x90
suffix:colon
multiline_comment|/* hook on  */
r_case
l_int|0x91
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;internal_command
op_eq
id|PERM_COD_HOOK
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;init:hook_on&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;hook_state
op_assign
id|ie
(braket
l_int|1
)braket
op_amp
l_int|0x91
suffix:semicolon
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
multiline_comment|/* ignore doubled hook indications */
(brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;hook_state
)paren
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x90
)paren
(brace
r_break
suffix:semicolon
)brace
id|plci-&gt;hook_state
op_assign
id|ie
(braket
l_int|1
)braket
op_amp
l_int|0x91
suffix:semicolon
)brace
multiline_comment|/* hangup the adv. voice call and signal &squot;-&squot; to the appl */
r_if
c_cond
(paren
id|a-&gt;AdvSignalPLCI
)paren
(brace
id|Id
op_assign
(paren
(paren
id|word
)paren
id|a-&gt;AdvSignalPLCI-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|a-&gt;AdvSignalAppl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|0
comma
l_string|&quot;&bslash;x01-&quot;
)paren
suffix:semicolon
id|a-&gt;AdvSignalPLCI-&gt;internal_command
op_assign
id|HOOK_ON_REQ
suffix:semicolon
id|a-&gt;AdvSignalPLCI-&gt;command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|a-&gt;AdvSignalPLCI
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|a-&gt;AdvSignalPLCI
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|RESUME
suffix:colon
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|resume_cau
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|3
comma
id|resume_cau
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SUSPEND
suffix:colon
id|clear_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|mixer_remove
(paren
id|plci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;sig_remove_id
)paren
(brace
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
)brace
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;channels
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|3
comma
l_string|&quot;&bslash;x05&bslash;x04&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SUSPEND_REJ
suffix:colon
r_break
suffix:semicolon
r_case
id|HANGUP
suffix:colon
id|plci-&gt;hangup_flow_ctrl_timer
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;manufacturer
op_logical_and
id|plci-&gt;State
op_eq
id|LOCAL_CONNECT
)paren
(brace
r_break
suffix:semicolon
)brace
id|cau
op_assign
id|parms
(braket
l_int|7
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
)paren
(brace
id|i
op_assign
id|_L3_CAUSE
op_or
id|cau
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|0
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|8
)paren
(brace
id|i
op_assign
id|_L1_ERROR
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|9
op_logical_or
id|cau
(braket
l_int|2
)braket
op_eq
l_int|10
)paren
(brace
id|i
op_assign
id|_L2_ERROR
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cau
(braket
l_int|2
)braket
op_eq
l_int|5
)paren
(brace
id|i
op_assign
id|_CAPI_GUARD_ERROR
suffix:semicolon
)brace
)brace
r_else
(brace
id|i
op_assign
id|_L3_ERROR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
)paren
(brace
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|i
)braket
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|clear_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|LISTENING
)paren
(brace
id|plci-&gt;notifiedcall
op_assign
l_int|0
suffix:semicolon
id|a-&gt;listen_active
op_decrement
suffix:semicolon
)brace
id|plci-&gt;State
op_assign
id|INC_DIS_PENDING
suffix:semicolon
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|mixer_remove
(paren
id|plci
)paren
suffix:semicolon
id|nl_req_ncci
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;sig_remove_id
)paren
(brace
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|REMOVE
comma
l_int|0
)paren
suffix:semicolon
)brace
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* collision of DISCONNECT or CONNECT_RES with HANGUP can   */
multiline_comment|/* result in a second HANGUP! Don&squot;t generate another        */
multiline_comment|/* DISCONNECT                                               */
r_if
c_cond
(paren
id|plci-&gt;State
op_ne
id|IDLE
op_logical_and
id|plci-&gt;State
op_ne
id|INC_DIS_PENDING
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|RESUMING
)paren
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|resume_cau
(braket
l_int|4
)braket
comma
id|i
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|3
comma
id|resume_cau
)paren
suffix:semicolon
)brace
id|plci-&gt;State
op_assign
id|INC_DIS_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
id|i
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|SSEXT_IND
suffix:colon
id|SendSSExtInd
c_func
(paren
l_int|NULL
comma
id|plci
comma
id|Id
comma
id|multi_ssext_parms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VSWITCH_REQ
suffix:colon
id|VSwitchReqInd
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_vswitch_parms
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VSWITCH_IND
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;relatedPTYPLCI
op_logical_and
id|plci-&gt;vswitchstate
op_eq
l_int|3
op_logical_and
id|plci-&gt;relatedPTYPLCI-&gt;vswitchstate
op_eq
l_int|3
op_logical_and
id|parms
(braket
id|MAXPARMSIDS
op_minus
l_int|1
)braket
(braket
l_int|0
)braket
)paren
(brace
id|add_p
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|SMSG
comma
id|parms
(braket
id|MAXPARMSIDS
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|VSWITCH_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
)paren
suffix:semicolon
)brace
r_else
id|VSwitchReqInd
c_func
(paren
id|plci
comma
id|Id
comma
id|multi_vswitch_parms
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|SendSetupInfo
r_static
r_void
id|SendSetupInfo
c_func
(paren
id|APPL
op_star
id|appl
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
comma
id|byte
id|Info_Sent_Flag
)paren
(brace
id|word
id|i
suffix:semicolon
id|byte
op_star
id|ie
suffix:semicolon
id|word
id|Info_Number
suffix:semicolon
id|byte
op_star
id|Info_Element
suffix:semicolon
id|word
id|Info_Mask
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;SetupInfo&quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAXPARMSIDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ie
op_assign
id|parms
(braket
id|i
)braket
suffix:semicolon
id|Info_Number
op_assign
l_int|0
suffix:semicolon
id|Info_Element
op_assign
id|ie
suffix:semicolon
r_if
c_cond
(paren
id|ie
(braket
l_int|0
)braket
)paren
(brace
r_switch
c_cond
(paren
id|i
)paren
(brace
r_case
l_int|0
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CPN &quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0070
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x80
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
multiline_comment|/* display      */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;display(%d)&quot;
comma
id|i
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0028
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x04
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
multiline_comment|/* Channel Id */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CHI&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0018
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x100
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
id|mixer_set_bchannel_id
(paren
id|plci
comma
id|Info_Element
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
multiline_comment|/* Redirected Number */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RDN&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0074
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x400
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|20
suffix:colon
multiline_comment|/* Redirected Number extended */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RDX&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0073
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x400
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
multiline_comment|/* Redirecing Number  */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RIN&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0076
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x400
suffix:semicolon
id|Info_Sent_Flag
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|Info_Number
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|i
op_eq
id|MAXPARMSIDS
op_minus
l_int|2
)paren
(brace
multiline_comment|/* to indicate the message type &quot;Setup&quot; */
id|Info_Number
op_assign
l_int|0x8000
op_or
l_int|5
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x10
suffix:semicolon
id|Info_Element
op_assign
l_string|&quot;&quot;
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Info_Sent_Flag
op_logical_and
id|Info_Number
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|Info_Mask
)paren
(brace
id|sendf
c_func
(paren
id|appl
comma
id|_INFO_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|function|SendInfo
r_void
id|SendInfo
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
comma
id|byte
id|iesent
)paren
(brace
id|word
id|i
suffix:semicolon
id|word
id|j
suffix:semicolon
id|word
id|k
suffix:semicolon
id|byte
op_star
id|ie
suffix:semicolon
id|word
id|Info_Number
suffix:semicolon
id|byte
op_star
id|Info_Element
suffix:semicolon
id|word
id|Info_Mask
op_assign
l_int|0
suffix:semicolon
r_static
id|byte
id|charges
(braket
l_int|5
)braket
op_assign
(brace
l_int|4
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
id|byte
id|cause
(braket
)braket
op_assign
(brace
l_int|0x02
comma
l_int|0x80
comma
l_int|0x00
)brace
suffix:semicolon
id|APPL
op_star
id|appl
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;InfoParse &quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
op_logical_and
op_logical_neg
id|plci-&gt;State
op_logical_and
id|plci-&gt;Sig.Ind
op_ne
id|NCR_FACILITY
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NoParse &quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|cause
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAXPARMSIDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ie
op_assign
id|parms
(braket
id|i
)braket
suffix:semicolon
id|Info_Number
op_assign
l_int|0
suffix:semicolon
id|Info_Element
op_assign
id|ie
suffix:semicolon
r_if
c_cond
(paren
id|ie
(braket
l_int|0
)braket
)paren
(brace
r_switch
c_cond
(paren
id|i
)paren
(brace
r_case
l_int|0
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CPN &quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0070
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x80
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
multiline_comment|/* ESC_CAU */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;cau(0x%x)&quot;
comma
id|ie
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0008
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x00
suffix:semicolon
id|cause
(braket
l_int|2
)braket
op_assign
id|ie
(braket
l_int|2
)braket
suffix:semicolon
id|Info_Element
op_assign
l_int|NULL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
multiline_comment|/* display      */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;display(%d)&quot;
comma
id|i
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0028
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x04
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
multiline_comment|/* Date display */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;date(%d)&quot;
comma
id|i
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0029
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x02
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|10
suffix:colon
multiline_comment|/* charges */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|4
suffix:semicolon
id|j
op_increment
)paren
(brace
id|charges
(braket
l_int|1
op_plus
id|j
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|ie
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|ie
(braket
l_int|1
op_plus
id|j
)braket
op_amp
l_int|0x80
)paren
suffix:semicolon
id|j
op_increment
)paren
(brace
suffix:semicolon
)brace
r_for
c_loop
(paren
id|k
op_assign
l_int|1
comma
id|j
op_increment
suffix:semicolon
id|j
OL
id|ie
(braket
l_int|0
)braket
op_logical_and
id|k
op_le
l_int|4
suffix:semicolon
id|j
op_increment
comma
id|k
op_increment
)paren
(brace
id|charges
(braket
id|k
)braket
op_assign
id|ie
(braket
l_int|1
op_plus
id|j
)braket
suffix:semicolon
)brace
id|Info_Number
op_assign
l_int|0x4000
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x40
suffix:semicolon
id|Info_Element
op_assign
id|charges
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|11
suffix:colon
multiline_comment|/* user user info */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;uui&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x007E
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x08
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
multiline_comment|/* congestion receiver ready */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;clRDY&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x00B0
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x08
suffix:semicolon
id|Info_Element
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|13
suffix:colon
multiline_comment|/* congestion receiver not ready */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;clNRDY&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x00BF
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x08
suffix:semicolon
id|Info_Element
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|15
suffix:colon
multiline_comment|/* Keypad Facility */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;KEY&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x002C
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x20
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
multiline_comment|/* Channel Id */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CHI&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0018
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x100
suffix:semicolon
id|mixer_set_bchannel_id
(paren
id|plci
comma
id|Info_Element
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|17
suffix:colon
multiline_comment|/* if no 1tr6 cause, send full cause, else esc_cause */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;q9cau(0x%x)&quot;
comma
id|ie
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cause
(braket
l_int|2
)braket
op_logical_or
id|cause
(braket
l_int|2
)braket
OL
l_int|0x80
)paren
(brace
r_break
suffix:semicolon
)brace
multiline_comment|/* eg. layer 1 error */
id|Info_Number
op_assign
l_int|0x0008
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|cause
(braket
l_int|2
)braket
op_ne
id|ie
(braket
l_int|2
)braket
)paren
(brace
id|Info_Element
op_assign
id|cause
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|19
suffix:colon
multiline_comment|/* Redirected Number */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RDN&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0074
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x400
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|22
suffix:colon
multiline_comment|/* Redirecing Number  */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;RIN&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x0076
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x400
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|23
suffix:colon
multiline_comment|/* Notification Indicator  */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NI&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
(paren
id|word
)paren
id|NI
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x210
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|26
suffix:colon
multiline_comment|/* Call State  */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CST&quot;
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
(paren
id|word
)paren
id|CST
suffix:semicolon
id|Info_Mask
op_assign
l_int|0x01
suffix:semicolon
multiline_comment|/* do with cause i.e. for now */
r_break
suffix:semicolon
r_case
id|MAXPARMSIDS
op_minus
l_int|2
suffix:colon
multiline_comment|/* Escape Message Type, must be the last indication */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ESC/MT[0x%x]&quot;
comma
id|ie
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
l_int|0x8000
op_or
id|ie
(braket
l_int|3
)braket
suffix:semicolon
r_if
c_cond
(paren
id|iesent
)paren
(brace
id|Info_Mask
op_assign
l_int|0xffff
suffix:semicolon
)brace
r_else
id|Info_Mask
op_assign
l_int|0x10
suffix:semicolon
id|Info_Element
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|Info_Number
op_assign
l_int|0
suffix:semicolon
id|Info_Mask
op_assign
l_int|0
suffix:semicolon
id|Info_Element
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Ind
op_eq
id|NCR_FACILITY
)paren
multiline_comment|/* check controller broadcast */
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|max_appl
suffix:semicolon
id|j
op_increment
)paren
(brace
id|appl
op_assign
op_amp
id|application
(braket
id|j
)braket
suffix:semicolon
r_if
c_cond
(paren
id|Info_Number
op_logical_and
id|appl-&gt;Id
op_logical_and
id|plci-&gt;adapter-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|Info_Mask
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NCR_Ind&quot;
)paren
)paren
suffix:semicolon
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|j
)braket
comma
id|_INFO_I
comma
id|Id
op_amp
l_int|0x0f
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
multiline_comment|/* overlap receiving broadcast */
r_if
c_cond
(paren
id|Info_Number
op_eq
id|CPN
op_logical_or
id|Info_Number
op_eq
id|KEY
op_logical_or
id|Info_Number
op_eq
id|NI
op_logical_or
id|Info_Number
op_eq
id|DSP
op_logical_or
id|Info_Number
op_eq
id|UUI
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|max_appl
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|j
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Ovl_Ind&quot;
)paren
)paren
suffix:semicolon
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|j
)braket
comma
id|_INFO_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/* all other signalling states */
r_else
r_if
c_cond
(paren
id|Info_Number
op_logical_and
id|plci-&gt;adapter-&gt;Info_Mask
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|Info_Mask
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Std_Ind&quot;
)paren
)paren
suffix:semicolon
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_INFO_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|SendMultiIE
id|byte
id|SendMultiIE
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
comma
id|byte
id|ie_type
comma
id|dword
id|info_mask
comma
id|byte
id|setupParse
)paren
(brace
id|word
id|i
suffix:semicolon
id|word
id|j
suffix:semicolon
id|byte
op_star
id|ie
suffix:semicolon
id|word
id|Info_Number
suffix:semicolon
id|byte
op_star
id|Info_Element
suffix:semicolon
id|APPL
op_star
id|appl
suffix:semicolon
id|word
id|Info_Mask
op_assign
l_int|0
suffix:semicolon
id|byte
id|iesent
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
op_logical_and
op_logical_neg
id|plci-&gt;State
op_logical_and
id|plci-&gt;Sig.Ind
op_ne
id|NCR_FACILITY
op_logical_and
op_logical_neg
id|setupParse
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NoM-IEParse &quot;
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;M-IEParse &quot;
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_MULTI_IE
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ie
op_assign
id|parms
(braket
id|i
)braket
suffix:semicolon
id|Info_Number
op_assign
l_int|0
suffix:semicolon
id|Info_Element
op_assign
id|ie
suffix:semicolon
r_if
c_cond
(paren
id|ie
(braket
l_int|0
)braket
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;[Ind0x%x]:IE=0x%x&quot;
comma
id|plci-&gt;Sig.Ind
comma
id|ie_type
)paren
)paren
suffix:semicolon
id|Info_Number
op_assign
(paren
id|word
)paren
id|ie_type
suffix:semicolon
id|Info_Mask
op_assign
(paren
id|word
)paren
id|info_mask
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Ind
op_eq
id|NCR_FACILITY
)paren
multiline_comment|/* check controller broadcast */
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|max_appl
suffix:semicolon
id|j
op_increment
)paren
(brace
id|appl
op_assign
op_amp
id|application
(braket
id|j
)braket
suffix:semicolon
r_if
c_cond
(paren
id|Info_Number
op_logical_and
id|appl-&gt;Id
op_logical_and
id|plci-&gt;adapter-&gt;Info_Mask
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|Info_Mask
)paren
(brace
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Mlt_NCR_Ind&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|j
)braket
comma
id|_INFO_I
comma
id|Id
op_amp
l_int|0x0f
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
op_logical_and
id|Info_Number
)paren
(brace
multiline_comment|/* overlap receiving broadcast */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|max_appl
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
id|j
)paren
)paren
(brace
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Mlt_Ovl_Ind&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
op_amp
id|application
(braket
id|j
)braket
comma
id|_INFO_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* all other signalling states */
r_else
r_if
c_cond
(paren
id|Info_Number
op_logical_and
id|plci-&gt;adapter-&gt;Info_Mask
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
id|Info_Mask
)paren
(brace
id|iesent
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Mlt_Std_Ind&quot;
)paren
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_INFO_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|Info_Number
comma
id|Info_Element
)paren
suffix:semicolon
)brace
)brace
r_return
id|iesent
suffix:semicolon
)brace
DECL|function|SendSSExtInd
r_static
r_void
id|SendSSExtInd
c_func
(paren
id|APPL
op_star
id|appl
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
)paren
(brace
id|word
id|i
suffix:semicolon
multiline_comment|/* Format of multi_ssext_parms[i][]:&n;   0 byte length&n;   1 byte SSEXTIE&n;   2 byte SSEXT_REQ/SSEXT_IND&n;   3 byte length&n;   4 word SSExtCommand&n;   6... Params&n;   */
r_if
c_cond
(paren
id|plci
op_logical_and
id|plci-&gt;State
op_logical_and
id|plci-&gt;Sig.Ind
op_ne
id|NCR_FACILITY
)paren
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_MULTI_IE
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
OL
l_int|6
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|2
)braket
op_eq
id|SSEXT_REQ
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|appl
)paren
(brace
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* kill it */
id|sendf
c_func
(paren
id|appl
comma
id|_MANUFACTURER_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwS&quot;
comma
id|_DI_MANU_ID
comma
id|_DI_SSEXT_CTRL
comma
op_amp
id|parms
(braket
id|i
)braket
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;appl
)paren
(brace
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* kill it */
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_MANUFACTURER_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwS&quot;
comma
id|_DI_MANU_ID
comma
id|_DI_SSEXT_CTRL
comma
op_amp
id|parms
(braket
id|i
)braket
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
suffix:semicolon
DECL|function|nl_ind
r_void
id|nl_ind
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|byte
id|ch
suffix:semicolon
id|word
id|ncci
suffix:semicolon
id|dword
id|Id
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|NCCIcode
suffix:semicolon
id|APPL
op_star
id|APPLptr
suffix:semicolon
id|word
id|count
suffix:semicolon
id|word
id|Num
suffix:semicolon
id|word
id|i
comma
id|ncpi_state
suffix:semicolon
id|byte
id|len
comma
id|ncci_state
suffix:semicolon
id|word
id|msg
suffix:semicolon
id|word
id|info
op_assign
l_int|0
suffix:semicolon
id|word
id|fax_feature_bits
suffix:semicolon
id|byte
id|fax_send_edata_ack
suffix:semicolon
r_static
id|byte
id|v120_header_buffer
(braket
l_int|2
op_plus
l_int|3
)braket
suffix:semicolon
r_static
id|word
id|fax_info
(braket
)braket
op_assign
(brace
l_int|0
comma
multiline_comment|/* T30_SUCCESS                        */
id|_FAX_NO_CONNECTION
comma
multiline_comment|/* T30_ERR_NO_DIS_RECEIVED            */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_TIMEOUT_NO_RESPONSE        */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_RESPONSE          */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_TOO_MANY_REPEATS           */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_UNEXPECTED_MESSAGE         */
id|_FAX_REMOTE_ABORT
comma
multiline_comment|/* T30_ERR_UNEXPECTED_DCN             */
id|_FAX_LOCAL_ABORT
comma
multiline_comment|/* T30_ERR_DTC_UNSUPPORTED            */
id|_FAX_TRAINING_ERROR
comma
multiline_comment|/* T30_ERR_ALL_RATES_FAILED           */
id|_FAX_TRAINING_ERROR
comma
multiline_comment|/* T30_ERR_TOO_MANY_TRAINS            */
id|_FAX_PARAMETER_ERROR
comma
multiline_comment|/* T30_ERR_RECEIVE_CORRUPTED          */
id|_FAX_REMOTE_ABORT
comma
multiline_comment|/* T30_ERR_UNEXPECTED_DISC            */
id|_FAX_LOCAL_ABORT
comma
multiline_comment|/* T30_ERR_APPLICATION_DISC           */
id|_FAX_REMOTE_REJECT
comma
multiline_comment|/* T30_ERR_INCOMPATIBLE_DIS           */
id|_FAX_LOCAL_ABORT
comma
multiline_comment|/* T30_ERR_INCOMPATIBLE_DCS           */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_TIMEOUT_NO_COMMAND         */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_COMMAND           */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_TIMEOUT_COMMAND_TOO_LONG   */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_TIMEOUT_RESPONSE_TOO_LONG  */
id|_FAX_NO_CONNECTION
comma
multiline_comment|/* T30_ERR_NOT_IDENTIFIED             */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_SUPERVISORY_TIMEOUT        */
id|_FAX_PARAMETER_ERROR
comma
multiline_comment|/* T30_ERR_TOO_LONG_SCAN_LINE         */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_PAGE_AFTER_MPS    */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_PAGE_AFTER_CFR    */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_DCS_AFTER_FTT     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_DCS_AFTER_EOM     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_DCS_AFTER_MPS     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_DCN_AFTER_MCF     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_DCN_AFTER_RTN     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_CFR               */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_MCF_AFTER_EOP     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_MCF_AFTER_EOM     */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_RETRY_NO_MCF_AFTER_MPS     */
l_int|0x331d
comma
multiline_comment|/* T30_ERR_SUB_SEP_UNSUPPORTED        */
l_int|0x331e
comma
multiline_comment|/* T30_ERR_PWD_UNSUPPORTED            */
l_int|0x331f
comma
multiline_comment|/* T30_ERR_SUB_SEP_PWD_UNSUPPORTED    */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_INVALID_COMMAND_FRAME      */
id|_FAX_PARAMETER_ERROR
comma
multiline_comment|/* T30_ERR_UNSUPPORTED_PAGE_CODING    */
id|_FAX_PARAMETER_ERROR
comma
multiline_comment|/* T30_ERR_INVALID_PAGE_CODING        */
id|_FAX_REMOTE_REJECT
comma
multiline_comment|/* T30_ERR_INCOMPATIBLE_PAGE_CONFIG   */
id|_FAX_LOCAL_ABORT
comma
multiline_comment|/* T30_ERR_TIMEOUT_FROM_APPLICATION   */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_V34FAX_NO_REACTION_ON_MARK */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_V34FAX_TRAINING_TIMEOUT    */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_V34FAX_UNEXPECTED_V21      */
id|_FAX_PROTOCOL_ERROR
comma
multiline_comment|/* T30_ERR_V34FAX_PRIMARY_CTS_ON      */
id|_FAX_LOCAL_ABORT
comma
multiline_comment|/* T30_ERR_V34FAX_TURNAROUND_POLLING  */
id|_FAX_LOCAL_ABORT
multiline_comment|/* T30_ERR_V34FAX_V8_INCOMPATIBILITY  */
)brace
suffix:semicolon
id|byte
id|dtmf_code_buffer
(braket
id|CAPIDTMF_RECV_DIGIT_BUFFER_SIZE
op_plus
l_int|1
)braket
suffix:semicolon
r_static
id|word
id|rtp_info
(braket
)braket
op_assign
(brace
id|GOOD
comma
multiline_comment|/* RTP_SUCCESS                       */
l_int|0x3600
multiline_comment|/* RTP_ERR_SSRC_OR_PAYLOAD_CHANGE    */
)brace
suffix:semicolon
r_static
id|dword
id|udata_forwarding_table
(braket
l_int|0x100
op_div
r_sizeof
(paren
id|dword
)paren
)braket
op_assign
(brace
l_int|0x0020301e
comma
l_int|0x00000000
comma
l_int|0x00000000
comma
l_int|0x00000000
comma
l_int|0x00000000
comma
l_int|0x00000000
comma
l_int|0x00000000
comma
l_int|0x00000000
)brace
suffix:semicolon
id|ch
op_assign
id|plci-&gt;NL.IndCh
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|ncci
op_assign
id|a-&gt;ch_ncci
(braket
id|ch
)braket
suffix:semicolon
id|Id
op_assign
(paren
(paren
(paren
id|dword
)paren
(paren
id|ncci
ques
c_cond
id|ncci
suffix:colon
id|ch
)paren
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|word
)paren
id|plci-&gt;Id
)paren
op_lshift
l_int|8
)paren
op_or
id|a-&gt;Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
id|Id
op_or_assign
id|EXT_CONTROLLER
suffix:semicolon
)brace
id|APPLptr
op_assign
id|plci-&gt;appl
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NL_IND-Id(NL:0x%x)=0x%08lx,plci=%x,tel=%x,state=0x%x,ch=0x%x,chs=%d,Ind=%x&quot;
comma
id|plci-&gt;NL.Id
comma
id|Id
comma
id|plci-&gt;Id
comma
id|plci-&gt;tel
comma
id|plci-&gt;State
comma
id|ch
comma
id|plci-&gt;channels
comma
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
)paren
suffix:semicolon
multiline_comment|/* in the case if no connect_active_Ind was sent to the appl we wait for */
r_if
c_cond
(paren
id|plci-&gt;nl_remove_id
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* discard */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;NL discard while remove pending&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_CONNECT
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_DIS_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|OUTG_DIS_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|IDLE
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* discard */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;discard n_connect&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;State
OL
id|INC_ACT_PENDING
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* flow control */
id|channel_x_off
(paren
id|plci
comma
id|ch
comma
id|N_XON_CONNECT_IND
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|APPLptr
)paren
multiline_comment|/* no application or invalid data */
(brace
multiline_comment|/* while reloading the DSP        */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;discard1&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_UDATA
)paren
op_logical_and
(paren
(paren
(paren
id|plci-&gt;B2_prot
op_ne
id|B2_SDLC
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B1_resource
op_eq
l_int|17
)paren
op_logical_or
(paren
id|plci-&gt;B1_resource
op_eq
l_int|18
)paren
)paren
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
l_int|7
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|7
)paren
)paren
)paren
(brace
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|ncpi_state
op_assign
id|plci-&gt;ncpi_state
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.complete
op_eq
l_int|1
)paren
(brace
id|byte
op_star
id|data
op_assign
op_amp
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.RBuffer-&gt;length
op_ge
l_int|12
)paren
op_logical_and
(paren
(paren
op_star
id|data
op_eq
id|DSP_UDATA_INDICATION_DCD_ON
)paren
op_logical_or
(paren
op_star
id|data
op_eq
id|DSP_UDATA_INDICATION_CTS_ON
)paren
)paren
)paren
(brace
id|word
id|conn_opt
comma
id|ncpi_opt
op_assign
l_int|0x00
suffix:semicolon
multiline_comment|/*      HexDump (&quot;MDM N_UDATA:&quot;, plci-&gt;NL.RBuffer-&gt;length, data); */
r_if
c_cond
(paren
op_star
id|data
op_eq
id|DSP_UDATA_INDICATION_DCD_ON
)paren
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_MDM_DCD_ON_RECEIVED
suffix:semicolon
r_if
c_cond
(paren
op_star
id|data
op_eq
id|DSP_UDATA_INDICATION_CTS_ON
)paren
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_MDM_CTS_ON_RECEIVED
suffix:semicolon
id|data
op_increment
suffix:semicolon
multiline_comment|/* indication code */
id|data
op_add_assign
l_int|2
suffix:semicolon
multiline_comment|/* timestamp */
r_if
c_cond
(paren
(paren
op_star
id|data
op_eq
id|DSP_CONNECTED_NORM_V18
)paren
op_logical_or
(paren
op_star
id|data
op_eq
id|DSP_CONNECTED_NORM_VOWN
)paren
)paren
id|ncpi_state
op_and_assign
op_complement
(paren
id|NCPI_MDM_DCD_ON_RECEIVED
op_or
id|NCPI_MDM_CTS_ON_RECEIVED
)paren
suffix:semicolon
id|data
op_increment
suffix:semicolon
multiline_comment|/* connected norm */
id|conn_opt
op_assign
id|GET_WORD
c_func
(paren
id|data
)paren
suffix:semicolon
id|data
op_add_assign
l_int|2
suffix:semicolon
multiline_comment|/* connected options */
id|PUT_WORD
(paren
op_amp
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|1
)braket
)paren
comma
(paren
id|word
)paren
(paren
id|GET_DWORD
c_func
(paren
id|data
)paren
op_amp
l_int|0x0000FFFF
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|conn_opt
op_amp
id|DSP_CONNECTED_OPTION_MASK_V42
)paren
(brace
id|ncpi_opt
op_or_assign
id|MDM_NCPI_ECM_V42
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|conn_opt
op_amp
id|DSP_CONNECTED_OPTION_MASK_MNP
)paren
(brace
id|ncpi_opt
op_or_assign
id|MDM_NCPI_ECM_MNP
suffix:semicolon
)brace
r_else
(brace
id|ncpi_opt
op_or_assign
id|MDM_NCPI_TRANSPARENT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|conn_opt
op_amp
id|DSP_CONNECTED_OPTION_MASK_COMPRESSION
)paren
(brace
id|ncpi_opt
op_or_assign
id|MDM_NCPI_COMPRESSED
suffix:semicolon
)brace
id|PUT_WORD
(paren
op_amp
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|3
)braket
)paren
comma
id|ncpi_opt
)paren
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
l_int|4
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_VALID_CONNECT_B3_IND
op_or
id|NCPI_VALID_CONNECT_B3_ACT
op_or
id|NCPI_VALID_DISC_B3_IND
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|7
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|OUTG_CON_PENDING
)paren
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_V18
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_VOWN
)paren
)paren
)paren
op_logical_or
op_logical_neg
(paren
id|ncpi_state
op_amp
id|NCPI_MDM_DCD_ON_RECEIVED
)paren
op_logical_or
op_logical_neg
(paren
id|ncpi_state
op_amp
id|NCPI_MDM_CTS_ON_RECEIVED
)paren
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;NL.complete
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_UDATA
)paren
op_logical_and
op_logical_neg
(paren
id|udata_forwarding_table
(braket
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
(braket
l_int|0
)braket
op_rshift
l_int|5
)braket
op_amp
(paren
l_int|1L
op_lshift
(paren
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
(braket
l_int|0
)braket
op_amp
l_int|0x1f
)paren
)paren
)paren
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
(braket
l_int|0
)braket
)paren
(brace
r_case
id|DTMF_UDATA_INDICATION_FAX_CALLING_TONE
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;dtmf_rec_active
op_amp
id|DTMF_LISTEN_ACTIVE_FLAG
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
id|SELECTOR_DTMF
comma
l_string|&quot;&bslash;x01X&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DTMF_UDATA_INDICATION_ANSWER_TONE
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;dtmf_rec_active
op_amp
id|DTMF_LISTEN_ACTIVE_FLAG
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
id|SELECTOR_DTMF
comma
l_string|&quot;&bslash;x01Y&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DTMF_UDATA_INDICATION_DIGITS_RECEIVED
suffix:colon
id|dtmf_indication
(paren
id|Id
comma
id|plci
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DTMF_UDATA_INDICATION_DIGITS_SENT
suffix:colon
id|dtmf_confirmation
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UDATA_INDICATION_MIXER_TAP_DATA
suffix:colon
id|capidtmf_recv_process_block
(paren
op_amp
(paren
id|plci-&gt;capidtmf_state
)paren
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
op_plus
l_int|1
comma
(paren
id|word
)paren
(paren
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|i
op_assign
id|capidtmf_indication
(paren
op_amp
(paren
id|plci-&gt;capidtmf_state
)paren
comma
id|dtmf_code_buffer
op_plus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ne
l_int|0
)paren
(brace
id|dtmf_code_buffer
(braket
l_int|0
)braket
op_assign
id|DTMF_UDATA_INDICATION_DIGITS_RECEIVED
suffix:semicolon
id|dtmf_indication
(paren
id|Id
comma
id|plci
comma
id|dtmf_code_buffer
comma
(paren
id|word
)paren
(paren
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|UDATA_INDICATION_MIXER_COEFS_SET
suffix:colon
id|mixer_indication_coefs_set
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UDATA_INDICATION_XCONNECT_FROM
suffix:colon
id|mixer_indication_xconnect_from
(paren
id|Id
comma
id|plci
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UDATA_INDICATION_XCONNECT_TO
suffix:colon
id|mixer_indication_xconnect_to
(paren
id|Id
comma
id|plci
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LEC_UDATA_INDICATION_DISABLE_DETECT
suffix:colon
id|ec_indication
(paren
id|Id
comma
id|plci
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_ne
l_int|0
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC_V42BIS
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_BIT_TRANSPARENT
)paren
)paren
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DATA_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwww&quot;
comma
id|plci-&gt;RData
(braket
l_int|1
)braket
dot
id|P
comma
(paren
id|plci-&gt;NL.RNum
OL
l_int|2
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci-&gt;RData
(braket
l_int|1
)braket
dot
id|PLength
comma
id|plci-&gt;RNum
comma
id|plci-&gt;RFlags
)paren
suffix:semicolon
)brace
r_else
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DATA_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwww&quot;
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
comma
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
comma
id|plci-&gt;RNum
comma
id|plci-&gt;RFlags
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
id|fax_feature_bits
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_CONNECT
op_logical_or
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_CONNECT_ACK
op_logical_or
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC
op_logical_or
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_EDATA
op_logical_or
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC_ACK
)paren
(brace
id|info
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;B3_prot
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/*XPARENT*/
r_case
l_int|1
suffix:colon
multiline_comment|/*T.90 NL*/
r_break
suffix:semicolon
multiline_comment|/* no network control protocol info - jfr */
r_case
l_int|2
suffix:colon
multiline_comment|/*ISO8202*/
r_case
l_int|3
suffix:colon
multiline_comment|/*X25 DCE*/
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|plci-&gt;NL.RLength
suffix:semicolon
id|i
op_increment
)paren
(brace
id|plci-&gt;ncpi_buffer
(braket
l_int|4
op_plus
id|i
)braket
op_assign
id|plci-&gt;NL.RBuffer-&gt;P
(braket
id|i
)braket
suffix:semicolon
)brace
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|i
op_plus
l_int|3
)paren
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;NL.Ind
op_amp
id|N_D_BIT
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
multiline_comment|/*T.30 - FAX*/
r_case
l_int|5
suffix:colon
multiline_comment|/*T.30 - FAX*/
r_if
c_cond
(paren
id|plci-&gt;NL.RLength
op_ge
r_sizeof
(paren
id|T30_INFO
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;FaxStatus %04x&quot;
comma
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
)paren
)paren
suffix:semicolon
id|len
op_assign
l_int|9
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|1
)braket
)paren
comma
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|rate_div_2400
op_star
l_int|2400
)paren
suffix:semicolon
id|fax_feature_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|feature_bits_low
)paren
suffix:semicolon
id|i
op_assign
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|resolution
op_amp
id|T30_RESOLUTION_R8_0770_OR_200
)paren
ques
c_cond
l_int|0x0001
suffix:colon
l_int|0x0000
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_ECM
)paren
)paren
id|i
op_or_assign
l_int|0x8000
suffix:semicolon
multiline_comment|/* This is not an ECM connection */
r_if
c_cond
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_T6_CODING
)paren
id|i
op_or_assign
l_int|0x4000
suffix:semicolon
multiline_comment|/* This is a connection with MMR compression */
r_if
c_cond
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_2D_CODING
)paren
id|i
op_or_assign
l_int|0x2000
suffix:semicolon
multiline_comment|/* This is a connection with MR compression */
r_if
c_cond
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_MORE_DOCUMENTS
)paren
id|i
op_or_assign
l_int|0x0004
suffix:semicolon
multiline_comment|/* More documents */
r_if
c_cond
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_POLLING
)paren
id|i
op_or_assign
l_int|0x0002
suffix:semicolon
multiline_comment|/* Fax-polling indication */
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;FAX Options %04x %04x&quot;
comma
id|fax_feature_bits
comma
id|i
)paren
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|3
)braket
)paren
comma
id|i
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|5
)braket
)paren
comma
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|data_format
)paren
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|7
)braket
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|pages_low
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|8
)braket
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|pages_high
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|station_id_len
)paren
(brace
id|plci-&gt;ncpi_buffer
(braket
id|len
)braket
op_assign
l_int|20
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;ncpi_buffer
(braket
op_increment
id|len
)braket
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|station_id
(braket
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC
)paren
op_logical_or
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC_ACK
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
OL
r_sizeof
(paren
id|fax_info
)paren
op_div
r_sizeof
(paren
id|fax_info
(braket
l_int|0
)braket
)paren
)paren
id|info
op_assign
id|fax_info
(braket
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
)braket
suffix:semicolon
r_else
id|info
op_assign
id|_FAX_PROTOCOL_ERROR
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
)paren
(brace
id|i
op_assign
(paren
(paren
id|word
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
)paren
op_plus
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|head_line_len
suffix:semicolon
r_while
c_loop
(paren
id|i
OL
id|plci-&gt;NL.RBuffer-&gt;length
)paren
id|plci-&gt;ncpi_buffer
(braket
op_increment
id|len
)braket
op_assign
id|plci-&gt;NL.RBuffer-&gt;P
(braket
id|i
op_increment
)braket
suffix:semicolon
)brace
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
id|len
suffix:semicolon
id|fax_feature_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|feature_bits_low
)paren
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|feature_bits_low
comma
id|fax_feature_bits
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_VALID_CONNECT_B3_IND
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_CONNECT_ACK
)paren
op_logical_or
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_CONNECT
)paren
op_logical_and
(paren
id|fax_feature_bits
op_amp
id|T30_FEATURE_BIT_POLLING
)paren
)paren
op_logical_or
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_EDATA
)paren
op_logical_and
(paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
op_eq
id|EDATA_T30_TRAIN_OK
)paren
op_logical_or
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
op_eq
id|EDATA_T30_DIS
)paren
op_logical_or
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
op_eq
id|EDATA_T30_DTC
)paren
)paren
)paren
)paren
(brace
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_VALID_CONNECT_B3_ACT
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC
)paren
op_logical_or
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC_ACK
)paren
op_logical_or
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_EDATA
)paren
op_logical_and
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
op_eq
id|EDATA_T30_EOP_CAPI
)paren
)paren
)paren
(brace
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_VALID_CONNECT_B3_ACT
op_or
id|NCPI_VALID_DISC_B3_IND
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|B3_RTP
suffix:colon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC
)paren
op_logical_or
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_DISC_ACK
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;NL.RLength
op_ne
l_int|0
)paren
(brace
id|info
op_assign
id|rtp_info
(braket
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
)braket
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
id|plci-&gt;NL.RLength
op_minus
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|plci-&gt;NL.RLength
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;ncpi_buffer
(braket
id|i
)braket
op_assign
id|plci-&gt;NL.RBuffer-&gt;P
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
(brace
r_case
id|N_EDATA
suffix:colon
r_if
c_cond
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;EDATA ncci=0x%x state=%d code=%02x&quot;
comma
id|ncci
comma
id|a-&gt;ncci_state
(braket
id|ncci
)braket
comma
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
)paren
)paren
suffix:semicolon
id|fax_send_edata_ack
op_assign
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|operating_mode
op_eq
id|T30_OPERATING_MODE_CAPI_NEG
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_ENABLE_NSF
)paren
op_logical_and
(paren
id|plci-&gt;nsf_control_bits
op_amp
(paren
id|T30_NSF_CONTROL_BIT_NEGOTIATE_IND
op_or
id|T30_NSF_CONTROL_BIT_NEGOTIATE_RESP
)paren
)paren
op_logical_and
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
op_eq
id|EDATA_T30_DIS
)paren
op_logical_and
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|OUTG_CON_PENDING
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_NEGOTIATE_B3_SENT
)paren
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|code
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_MANUFACTURER_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;dwbS&quot;
comma
id|_DI_MANU_ID
comma
id|_DI_NEGOTIATE_B3
comma
(paren
id|byte
)paren
(paren
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_NEGOTIATE_B3_SENT
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_NEGOTIATE_RESP
)paren
id|fax_send_edata_ack
op_assign
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
(brace
r_switch
c_cond
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
)paren
(brace
r_case
id|EDATA_T30_DIS
suffix:colon
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|OUTG_CON_PENDING
)paren
op_logical_and
op_logical_neg
(paren
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|control_bits_low
)paren
op_amp
id|T30_CONTROL_BIT_REQUEST_POLLING
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|EDATA_T30_TRAIN_OK
suffix:colon
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|EDATA_T30_EOP_CAPI
suffix:colon
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|GOOD
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_DIS_PENDING
suffix:semicolon
id|plci-&gt;ncpi_state
op_assign
l_int|0
suffix:semicolon
id|fax_send_edata_ack
op_assign
id|FALSE
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
r_switch
c_cond
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
)paren
(brace
r_case
id|EDATA_T30_TRAIN_OK
suffix:colon
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|fax_send_edata_ack
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
(paren
id|plci-&gt;fax_connect_info_buffer
)paren
)paren
op_member_access_from_pointer
id|code
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;NL.RBuffer-&gt;P
)paren
op_member_access_from_pointer
id|code
suffix:semicolon
id|plci-&gt;fax_edata_ack_length
op_assign
l_int|1
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|fax_edata_ack_command
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;EDATA ncci=0x%x state=%d&quot;
comma
id|ncci
comma
id|a-&gt;ncci_state
(braket
id|ncci
)braket
)paren
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|N_CONNECT
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;ch_ncci
(braket
id|ch
)braket
)paren
(brace
id|ncci
op_assign
id|get_ncci
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
id|Id
op_assign
(paren
id|Id
op_amp
l_int|0xffff
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
id|ncci
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;N_CONNECT: ch=%d state=%d plci=%lx plci_Id=%lx plci_State=%d&quot;
comma
id|ch
comma
id|a-&gt;ncci_state
(braket
id|ncci
)braket
comma
id|a-&gt;ncci_plci
(braket
id|ncci
)braket
comma
id|plci-&gt;Id
comma
id|plci-&gt;State
)paren
)paren
suffix:semicolon
id|msg
op_assign
id|_CONNECT_B3_I
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|IDLE
)paren
id|plci-&gt;channels
op_increment
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|1
)paren
id|msg
op_assign
id|_CONNECT_B3_T90_ACTIVE_I
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_CON_PENDING
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|N_CONNECT_ACK
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;N_connect_Ack&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_logical_and
(paren
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_2
)paren
op_logical_or
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_3
)paren
op_logical_or
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_4
)paren
)paren
)paren
(brace
(paren
op_star
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
)paren
(paren
id|Id
comma
id|plci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;internal_command
)paren
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|msg
op_assign
id|_CONNECT_B3_ACTIVE_I
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_ne
id|OUTG_CON_PENDING
)paren
id|msg
op_assign
id|_CONNECT_B3_T90_ACTIVE_I
suffix:semicolon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|7
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|OUTG_CON_PENDING
)paren
op_logical_and
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
)brace
r_else
(brace
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_ACT_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|msg
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_restore
)paren
(brace
id|plci-&gt;adjust_b_restore
op_assign
id|FALSE
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|adjust_b_restore
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|N_DISC
suffix:colon
r_case
id|N_DISC_ACK
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_logical_and
(paren
(paren
id|plci-&gt;internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_1
)paren
op_logical_or
(paren
id|plci-&gt;internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_2
)paren
op_logical_or
(paren
id|plci-&gt;internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_3
)paren
)paren
)paren
(brace
(paren
op_star
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
)paren
(paren
id|Id
comma
id|plci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;internal_command
)paren
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
id|ncci_state
op_assign
id|a-&gt;ncci_state
(braket
id|ncci
)braket
suffix:semicolon
id|ncci_remove
(paren
id|plci
comma
id|ncci
comma
id|FALSE
)paren
suffix:semicolon
multiline_comment|/* with N_DISC or N_DISC_ACK the IDI frees the respective   */
multiline_comment|/* channel, so we cannot store the state in ncci_state! The */
multiline_comment|/* information which channel we received a N_DISC is thus   */
multiline_comment|/* stored in the inc_dis_ncci_table buffer.                 */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;inc_dis_ncci_table
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
id|plci-&gt;inc_dis_ncci_table
(braket
id|i
)braket
op_assign
(paren
id|byte
)paren
id|ncci
suffix:semicolon
multiline_comment|/* need a connect_b3_ind before a disconnect_b3_ind with FAX */
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;channels
op_logical_and
(paren
id|plci-&gt;B1_resource
op_eq
l_int|16
)paren
op_logical_and
(paren
id|plci-&gt;State
op_le
id|CONNECTED
)paren
)paren
(brace
id|len
op_assign
l_int|9
suffix:semicolon
id|i
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|rate_div_2400
op_star
l_int|2400
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;ncpi_buffer
(braket
l_int|1
)braket
comma
id|i
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;ncpi_buffer
(braket
l_int|3
)braket
comma
l_int|0
)paren
suffix:semicolon
id|i
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|data_format
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;ncpi_buffer
(braket
l_int|5
)braket
comma
id|i
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;ncpi_buffer
(braket
l_int|7
)braket
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
id|len
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|a-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
)paren
(brace
id|plci-&gt;ncpi_buffer
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
id|len
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
)brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|info
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
multiline_comment|/* disc here */
)brace
r_else
r_if
c_cond
(paren
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_or
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
)paren
op_logical_and
(paren
(paren
id|ncci_state
op_eq
id|INC_DIS_PENDING
)paren
op_logical_or
(paren
id|ncci_state
op_eq
id|IDLE
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ncci_state
op_eq
id|IDLE
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
id|plci-&gt;channels
op_decrement
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;State
op_eq
id|IDLE
op_logical_or
id|plci-&gt;State
op_eq
id|SUSPENDING
)paren
op_logical_and
op_logical_neg
id|plci-&gt;channels
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|SUSPENDING
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|word
)paren
l_int|3
comma
l_string|&quot;&bslash;x03&bslash;x04&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;w&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;channels
)paren
(brace
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_DISCONNECT_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|info
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ncci_state
op_eq
id|OUTG_REJ_PENDING
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_T90NL
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_ISO8208
)paren
op_logical_and
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_X25_DCE
)paren
)paren
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|N_RESET
suffix:colon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|INC_RES_PENDING
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_RESET_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|N_RESET_ACK
suffix:colon
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_assign
id|CONNECTED
suffix:semicolon
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_RESET_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|N_UDATA
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|udata_forwarding_table
(braket
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
op_rshift
l_int|5
)braket
op_amp
(paren
l_int|1L
op_lshift
(paren
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
op_amp
l_int|0x1f
)paren
)paren
)paren
)paren
(brace
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_ind_buffer
op_plus
(paren
op_minus
(paren
(paren
r_int
)paren
(paren
id|plci-&gt;internal_ind_buffer
)paren
)paren
op_amp
l_int|3
)paren
suffix:semicolon
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|INTERNAL_IND_BUFFER_SIZE
suffix:semicolon
id|plci-&gt;NL.R
op_assign
id|plci-&gt;RData
suffix:semicolon
id|plci-&gt;NL.RNum
op_assign
l_int|1
suffix:semicolon
r_return
suffix:semicolon
)brace
r_case
id|N_BDATA
suffix:colon
r_case
id|N_DATA
suffix:colon
r_if
c_cond
(paren
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_ne
id|CONNECTED
)paren
op_logical_and
(paren
id|plci-&gt;B2_prot
op_eq
l_int|1
)paren
)paren
multiline_comment|/* transparent */
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|IDLE
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_DIS_PENDING
)paren
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_ne
id|CONNECTED
)paren
op_logical_and
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_ne
id|OUTG_DIS_PENDING
)paren
op_logical_and
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_ne
id|OUTG_REJ_PENDING
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;flow control&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;NL.RNR
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* flow control  */
id|channel_x_off
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|NCCIcode
op_assign
id|ncci
op_or
(paren
(paren
(paren
id|word
)paren
id|a-&gt;Id
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* count all buffers within the Application pool    */
multiline_comment|/* belonging to the same NCCI. If this is below the */
multiline_comment|/* number of buffers available per NCCI we accept   */
multiline_comment|/* this packet, otherwise we reject it              */
id|count
op_assign
l_int|0
suffix:semicolon
id|Num
op_assign
l_int|0xffff
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|APPLptr-&gt;MaxBuffer
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|NCCIcode
op_eq
id|APPLptr-&gt;DataNCCI
(braket
id|i
)braket
)paren
(brace
id|count
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|APPLptr-&gt;DataNCCI
(braket
id|i
)braket
op_logical_and
id|Num
op_eq
l_int|0xffff
)paren
(brace
id|Num
op_assign
id|i
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|count
op_ge
id|APPLptr-&gt;MaxNCCIData
op_logical_or
id|Num
op_eq
l_int|0xffff
)paren
(brace
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;Flow-Control&quot;
)paren
)paren
suffix:semicolon
id|plci-&gt;NL.RNR
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_increment
(paren
id|APPLptr-&gt;NCCIDataFlowCtrlTimer
)paren
op_ge
(paren
id|word
)paren
(paren
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_OOB_CHANNEL
)paren
ques
c_cond
l_int|40
suffix:colon
l_int|2000
)paren
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;DiscardData&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|channel_x_off
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_else
(brace
id|APPLptr-&gt;NCCIDataFlowCtrlTimer
op_assign
l_int|0
suffix:semicolon
)brace
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|ReceiveBufferGet
c_func
(paren
id|APPLptr
comma
id|Num
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
)paren
(brace
id|plci-&gt;NL.RNR
op_assign
l_int|1
suffix:semicolon
id|channel_x_off
(paren
id|plci
comma
id|ch
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|APPLptr-&gt;DataNCCI
(braket
id|Num
)braket
op_assign
id|NCCIcode
suffix:semicolon
id|APPLptr-&gt;DataFlags
(braket
id|Num
)braket
op_assign
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
(paren
id|plci-&gt;NL.Ind
op_rshift
l_int|4
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;Buffer(%d), Max = %d&quot;
comma
id|Num
comma
id|APPLptr-&gt;MaxBuffer
)paren
)paren
suffix:semicolon
id|plci-&gt;RNum
op_assign
id|Num
suffix:semicolon
id|plci-&gt;RFlags
op_assign
id|plci-&gt;NL.Ind
op_rshift
l_int|4
suffix:semicolon
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|APPLptr-&gt;MaxDataLength
suffix:semicolon
id|plci-&gt;NL.R
op_assign
id|plci-&gt;RData
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.RLength
op_ne
l_int|0
)paren
op_logical_and
(paren
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC_V42BIS
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_BIT_TRANSPARENT
)paren
)paren
)paren
(brace
id|plci-&gt;RData
(braket
l_int|1
)braket
dot
id|P
op_assign
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
suffix:semicolon
id|plci-&gt;RData
(braket
l_int|1
)braket
dot
id|PLength
op_assign
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
suffix:semicolon
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|v120_header_buffer
op_plus
(paren
op_minus
(paren
(paren
r_int
)paren
id|v120_header_buffer
)paren
op_amp
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
op_amp
id|V120_HEADER_EXTEND_BIT
)paren
op_logical_or
(paren
id|plci-&gt;NL.RLength
op_eq
l_int|1
)paren
)paren
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|1
suffix:semicolon
r_else
id|plci-&gt;RData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
op_amp
id|V120_HEADER_BREAK_BIT
)paren
id|plci-&gt;RFlags
op_or_assign
l_int|0x0010
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;NL.RBuffer-&gt;P
(braket
l_int|0
)braket
op_amp
(paren
id|V120_HEADER_C1_BIT
op_or
id|V120_HEADER_C2_BIT
)paren
)paren
id|plci-&gt;RFlags
op_or_assign
l_int|0x8000
suffix:semicolon
id|plci-&gt;NL.RNum
op_assign
l_int|2
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_UDATA
)paren
(brace
id|plci-&gt;RFlags
op_or_assign
l_int|0x0010
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_RTP
)paren
op_logical_and
(paren
(paren
id|plci-&gt;NL.Ind
op_amp
l_int|0x0f
)paren
op_eq
id|N_BDATA
)paren
)paren
id|plci-&gt;RFlags
op_or_assign
l_int|0x0001
suffix:semicolon
id|plci-&gt;NL.RNum
op_assign
l_int|1
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|N_DATA_ACK
suffix:colon
id|data_ack
(paren
id|plci
comma
id|ch
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|plci-&gt;NL.RNR
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* find a free PLCI                                                 */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|get_plci
id|word
id|get_plci
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
id|word
id|i
comma
id|j
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|dump_plcis
(paren
id|a
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|a-&gt;max_plci
op_logical_and
id|a-&gt;plci
(braket
id|i
)braket
dot
id|Id
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_eq
id|a-&gt;max_plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;get_plci: out of PLCIs&quot;
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|i
)braket
suffix:semicolon
id|plci-&gt;Id
op_assign
(paren
id|byte
)paren
(paren
id|i
op_plus
l_int|1
)paren
suffix:semicolon
id|plci-&gt;Sig.Id
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Id
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;sig_req
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;nl_req
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;appl
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;relatedPTYPLCI
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;SuppState
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;channels
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;tel
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;B1_resource
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;B2_prot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;m_command
op_assign
l_int|0
suffix:semicolon
id|init_internal_command_queue
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;number
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;req_in_start
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;req_in
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;req_out
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;msg_in_write_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_read_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;msg_in_wrap_pos
op_assign
id|MSG_IN_QUEUE_SIZE
suffix:semicolon
id|plci-&gt;data_sent
op_assign
id|FALSE
suffix:semicolon
id|plci-&gt;send_disc
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;sig_global_req
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;sig_remove_id
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;nl_global_req
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;nl_remove_id
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adv_nl
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;manufacturer
op_assign
id|FALSE
suffix:semicolon
id|plci-&gt;call_dir
op_assign
id|CALL_DIR_OUT
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
id|plci-&gt;spoofed_msg
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ptyState
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;cr_enquiry
op_assign
id|FALSE
suffix:semicolon
id|plci-&gt;hangup_flow_ctrl_timer
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncci_ring_list
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|MAX_CHANNELS_PER_PLCI
suffix:semicolon
id|j
op_increment
)paren
(brace
id|plci-&gt;inc_dis_ncci_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|clear_c_ind_mask
(paren
id|plci
)paren
suffix:semicolon
id|set_group_ind_mask
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;fax_connect_info_length
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;nsf_control_bits
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ncpi_state
op_assign
l_int|0x00
suffix:semicolon
id|plci-&gt;ncpi_buffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;requested_options_conn
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;requested_options
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;notifiedcall
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vswitchstate
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprot
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;vsprotdialect
op_assign
l_int|0
suffix:semicolon
id|init_b1_config
(paren
id|plci
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;get_plci(%x)&quot;
comma
id|plci-&gt;Id
)paren
)paren
suffix:semicolon
r_return
id|i
op_plus
l_int|1
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put a parameter in the parameter buffer                          */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_p
r_static
r_void
id|add_p
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|byte
op_star
id|p
)paren
(brace
id|word
id|p_length
suffix:semicolon
id|p_length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
id|p_length
op_assign
id|p
(braket
l_int|0
)braket
suffix:semicolon
)brace
id|add_ie
c_func
(paren
id|plci
comma
id|code
comma
id|p
comma
id|p_length
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put a structure in the parameter buffer                          */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_s
r_static
r_void
id|add_s
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|API_PARSE
op_star
id|p
)paren
(brace
r_if
c_cond
(paren
id|p
)paren
(brace
id|add_ie
c_func
(paren
id|plci
comma
id|code
comma
id|p-&gt;info
comma
(paren
id|word
)paren
id|p-&gt;length
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put multiple structures in the parameter buffer                  */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_ss
r_static
r_void
id|add_ss
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|API_PARSE
op_star
id|p
)paren
(brace
id|byte
id|i
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;add_ss(%x,len=%d)&quot;
comma
id|code
comma
id|p-&gt;length
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
(paren
id|byte
)paren
id|p-&gt;length
suffix:semicolon
id|i
op_add_assign
id|p-&gt;info
(braket
id|i
)braket
op_plus
l_int|2
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;add_ss_ie(%x,len=%d)&quot;
comma
id|p-&gt;info
(braket
id|i
op_minus
l_int|1
)braket
comma
id|p-&gt;info
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
id|add_ie
c_func
(paren
id|plci
comma
id|p-&gt;info
(braket
id|i
op_minus
l_int|1
)braket
comma
(paren
id|byte
op_star
)paren
op_amp
(paren
id|p-&gt;info
(braket
id|i
)braket
)paren
comma
(paren
id|word
)paren
id|p-&gt;info
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* return the channel number sent by the application in a esc_chi   */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|getChannel
r_static
id|byte
id|getChannel
c_func
(paren
id|API_PARSE
op_star
id|p
)paren
(brace
id|byte
id|i
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
(paren
id|byte
)paren
id|p-&gt;length
suffix:semicolon
id|i
op_add_assign
id|p-&gt;info
(braket
id|i
)braket
op_plus
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;info
(braket
id|i
)braket
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;info
(braket
id|i
op_minus
l_int|1
)braket
op_eq
id|ESC
op_logical_and
id|p-&gt;info
(braket
id|i
op_plus
l_int|1
)braket
op_eq
id|CHI
)paren
(brace
r_return
(paren
id|p-&gt;info
(braket
id|i
op_plus
l_int|2
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put an information element in the parameter buffer               */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_ie
r_static
r_void
id|add_ie
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|code
comma
id|byte
op_star
id|p
comma
id|word
id|p_length
)paren
(brace
id|word
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|code
op_amp
l_int|0x80
)paren
op_logical_and
op_logical_neg
id|p_length
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;req_in
op_eq
id|plci-&gt;req_in_start
)paren
(brace
id|plci-&gt;req_in
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;req_in
op_decrement
suffix:semicolon
)brace
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|code
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
(brace
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
(paren
id|byte
)paren
id|p_length
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|p_length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|p
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
)brace
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put a unstructured data into the buffer                          */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_d
r_void
id|add_d
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|length
comma
id|byte
op_star
id|p
)paren
(brace
id|word
id|i
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;req_in
op_eq
id|plci-&gt;req_in_start
)paren
(brace
id|plci-&gt;req_in
op_add_assign
l_int|2
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;req_in
op_decrement
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|p
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put parameters from the Additional Info parameter in the         */
multiline_comment|/* parameter buffer                                                 */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_ai
r_void
id|add_ai
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|API_PARSE
op_star
id|ai
)paren
(brace
id|word
id|i
suffix:semicolon
id|API_PARSE
id|ai_parms
(braket
l_int|5
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ai_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|ai-&gt;length
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|ai-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|ai-&gt;length
comma
l_string|&quot;ssss&quot;
comma
id|ai_parms
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|add_s
(paren
id|plci
comma
id|KEY
comma
op_amp
id|ai_parms
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|add_s
(paren
id|plci
comma
id|UUI
comma
op_amp
id|ai_parms
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|add_ss
c_func
(paren
id|plci
comma
id|FTY
comma
op_amp
id|ai_parms
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put parameter for b1 protocol in the parameter buffer            */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_b1
id|word
id|add_b1
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|API_PARSE
op_star
id|bp
comma
id|word
id|b_channel_info
comma
id|word
id|b1_facilities
)paren
(brace
id|API_PARSE
id|bp_parms
(braket
l_int|8
)braket
suffix:semicolon
id|API_PARSE
id|mdm_cfg
(braket
l_int|9
)braket
suffix:semicolon
id|API_PARSE
id|global_config
(braket
l_int|2
)braket
suffix:semicolon
id|byte
id|cai
(braket
l_int|256
)braket
suffix:semicolon
id|byte
id|resource
(braket
)braket
op_assign
(brace
l_int|5
comma
l_int|9
comma
l_int|13
comma
l_int|12
comma
l_int|16
comma
l_int|39
comma
l_int|9
comma
l_int|17
comma
l_int|17
comma
l_int|18
)brace
suffix:semicolon
id|byte
id|voice_cai
(braket
)braket
op_assign
l_string|&quot;&bslash;x06&bslash;x14&bslash;x00&bslash;x00&bslash;x00&bslash;x00&bslash;x08&quot;
suffix:semicolon
id|word
id|i
suffix:semicolon
id|API_PARSE
id|mdm_cfg_v18
(braket
l_int|4
)braket
suffix:semicolon
id|word
id|j
comma
id|n
comma
id|w
suffix:semicolon
id|dword
id|d
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|bp_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|global_config
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;add_b1&quot;
)paren
)paren
suffix:semicolon
id|api_save_msg
c_func
(paren
id|bp
comma
l_string|&quot;s&quot;
comma
op_amp
id|plci-&gt;B_protocol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b_channel_info
op_eq
l_int|2
)paren
(brace
id|plci-&gt;B1_resource
op_assign
l_int|0
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
id|b1_facilities
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x00&quot;
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Cai=1,0 (no resource)&quot;
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|CODEC_PERMANENT
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|CODEC
)paren
(brace
id|plci-&gt;B1_resource
op_assign
l_int|1
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
id|b1_facilities
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x01&quot;
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Cai=1,1 (Codec)&quot;
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
(brace
id|plci-&gt;B1_resource
op_assign
id|add_b1_facilities
(paren
id|plci
comma
l_int|9
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_or
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_or
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|voice_cai
(braket
l_int|1
)braket
op_assign
id|plci-&gt;B1_resource
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|voice_cai
(braket
l_int|5
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|voice_cai
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Cai=1,0x%x (AdvVoice)&quot;
comma
id|voice_cai
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|plci-&gt;call_dir
op_and_assign
op_complement
(paren
id|CALL_DIR_ORIGINATE
op_or
id|CALL_DIR_ANSWER
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_OUT
)paren
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_ORIGINATE
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_IN
)paren
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_ANSWER
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bp-&gt;length
)paren
(brace
id|plci-&gt;B1_resource
op_assign
l_int|0x5
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
id|b1_facilities
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x05&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b_prot_len=%d&quot;
comma
(paren
id|word
)paren
id|bp-&gt;length
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bp-&gt;length
OG
l_int|256
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwsssb&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwsss&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b-form.!&quot;
)paren
)paren
suffix:semicolon
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwssss&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b-form.!&quot;
)paren
)paren
suffix:semicolon
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
comma
l_string|&quot;w&quot;
comma
id|global_config
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
c_func
(paren
id|global_config
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
(brace
r_case
l_int|1
suffix:colon
id|plci-&gt;call_dir
op_assign
(paren
id|plci-&gt;call_dir
op_amp
op_complement
id|CALL_DIR_ANSWER
)paren
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|plci-&gt;call_dir
op_assign
(paren
id|plci-&gt;call_dir
op_amp
op_complement
id|CALL_DIR_ORIGINATE
)paren
op_or
id|CALL_DIR_ANSWER
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;call_dir=%04x&quot;
comma
id|plci-&gt;call_dir
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_RTP
)paren
op_logical_and
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_RTP
)paren
)paren
)paren
(brace
id|plci-&gt;B1_resource
op_assign
id|add_b1_facilities
(paren
id|plci
comma
l_int|31
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|plci-&gt;B1_resource
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|4
)braket
op_assign
l_int|0
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|5
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|cai
(braket
l_int|7
op_plus
id|i
)braket
op_assign
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|6
op_plus
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_PIAFS
)paren
op_logical_and
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_PIAFS
)paren
)paren
)paren
(brace
id|plci-&gt;B1_resource
op_assign
id|add_b1_facilities
(paren
id|plci
comma
l_int|35
multiline_comment|/* PIAFS HARDWARE FACILITY */
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|plci-&gt;B1_resource
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|4
)braket
op_assign
l_int|0
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|5
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|6
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_ge
l_int|32
)paren
op_logical_or
(paren
op_logical_neg
(paren
(paren
l_int|1L
op_lshift
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
op_amp
id|plci-&gt;adapter-&gt;profile.B1_Protocols
)paren
op_logical_and
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_ne
l_int|3
)paren
op_logical_or
op_logical_neg
(paren
(paren
l_int|1L
op_lshift
id|B1_HDLC
)paren
op_amp
id|plci-&gt;adapter-&gt;profile.B1_Protocols
)paren
op_logical_or
(paren
(paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
op_ne
l_int|0
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
op_ne
l_int|0
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
op_ne
l_int|56000
)paren
)paren
)paren
)paren
)paren
(brace
r_return
id|_B1_NOT_SUPPORTED
suffix:semicolon
)brace
id|plci-&gt;B1_resource
op_assign
id|add_b1_facilities
(paren
id|plci
comma
id|resource
(braket
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)braket
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|adjust_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|b1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|0
)braket
op_assign
l_int|6
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
id|plci-&gt;B1_resource
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|2
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|cai
)paren
suffix:semicolon
id|i
op_increment
)paren
id|cai
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_ALL_NEGOTIATE
)paren
op_logical_or
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_ASYNC
)paren
op_logical_or
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_SYNC_HDLC
)paren
)paren
(brace
multiline_comment|/* B1 - modem */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|7
suffix:semicolon
id|i
op_increment
)paren
id|mdm_cfg
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
comma
l_string|&quot;wwwwww&quot;
comma
id|mdm_cfg
)paren
)paren
(brace
r_return
(paren
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
)brace
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Bit rate for adaptation */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM Max Bit Rate:&lt;%d&gt;&quot;
comma
id|GET_WORD
c_func
(paren
id|mdm_cfg
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|cai
(braket
l_int|13
)braket
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Min Tx speed */
id|PUT_WORD
(paren
op_amp
id|cai
(braket
l_int|15
)braket
comma
id|GET_WORD
c_func
(paren
id|mdm_cfg
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
suffix:semicolon
multiline_comment|/* Max Tx speed */
id|PUT_WORD
(paren
op_amp
id|cai
(braket
l_int|17
)braket
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Min Rx speed */
id|PUT_WORD
(paren
op_amp
id|cai
(braket
l_int|19
)braket
comma
id|GET_WORD
c_func
(paren
id|mdm_cfg
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
suffix:semicolon
multiline_comment|/* Max Rx speed */
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Async framing parameters */
r_switch
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|2
)braket
dot
id|info
)paren
)paren
(brace
multiline_comment|/* Parity     */
r_case
l_int|1
suffix:colon
multiline_comment|/* odd parity */
id|cai
(braket
l_int|3
)braket
op_or_assign
(paren
id|DSP_CAI_ASYNC_PARITY_ENABLE
op_or
id|DSP_CAI_ASYNC_PARITY_ODD
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: odd parity&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* even parity */
id|cai
(braket
l_int|3
)braket
op_or_assign
(paren
id|DSP_CAI_ASYNC_PARITY_ENABLE
op_or
id|DSP_CAI_ASYNC_PARITY_EVEN
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: even parity&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: no parity&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|3
)braket
dot
id|info
)paren
)paren
(brace
multiline_comment|/* stop bits   */
r_case
l_int|1
suffix:colon
multiline_comment|/* 2 stop bits */
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_TWO_STOP_BITS
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 2 stop bits&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 1 stop bit&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
(brace
multiline_comment|/* char length */
r_case
l_int|5
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_5
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 5 bits&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_6
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 6 bits&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_7
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 7 bits&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 8 bits&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|cai
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Line taking options */
id|cai
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Modulation negotiation options */
id|cai
(braket
l_int|9
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Modulation options */
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_ORIGINATE
)paren
op_ne
l_int|0
)paren
op_xor
(paren
(paren
id|plci-&gt;call_dir
op_amp
id|CALL_DIR_OUT
)paren
op_ne
l_int|0
)paren
)paren
(brace
id|cai
(braket
l_int|9
)braket
op_or_assign
id|DSP_CAI_MODEM_REVERSE_DIRECTION
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: Reverse direction&quot;
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|4
)braket
dot
id|info
)paren
op_amp
id|MDM_CAPI_DISABLE_RETRAIN
)paren
(brace
id|cai
(braket
l_int|9
)braket
op_or_assign
id|DSP_CAI_MODEM_DISABLE_RETRAIN
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: Disable retrain&quot;
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|4
)braket
dot
id|info
)paren
op_amp
id|MDM_CAPI_DISABLE_RING_TONE
)paren
(brace
id|cai
(braket
l_int|7
)braket
op_or_assign
id|DSP_CAI_MODEM_DISABLE_CALLING_TONE
op_or
id|DSP_CAI_MODEM_DISABLE_ANSWER_TONE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: Disable ring tone&quot;
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|4
)braket
dot
id|info
)paren
op_amp
id|MDM_CAPI_GUARD_1800
)paren
(brace
id|cai
(braket
l_int|8
)braket
op_or_assign
id|DSP_CAI_MODEM_GUARD_TONE_1800HZ
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 1800 guard tone&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|4
)braket
dot
id|info
)paren
op_amp
id|MDM_CAPI_GUARD_550
)paren
(brace
id|cai
(braket
l_int|8
)braket
op_or_assign
id|DSP_CAI_MODEM_GUARD_TONE_550HZ
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: 550 guard tone&quot;
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|5
)braket
dot
id|info
)paren
op_amp
l_int|0x00ff
)paren
op_eq
id|MDM_CAPI_NEG_V100
)paren
(brace
id|cai
(braket
l_int|8
)braket
op_or_assign
id|DSP_CAI_MODEM_NEGOTIATE_V100
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: V100&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|5
)braket
dot
id|info
)paren
op_amp
l_int|0x00ff
)paren
op_eq
id|MDM_CAPI_NEG_MOD_CLASS
)paren
(brace
id|cai
(braket
l_int|8
)braket
op_or_assign
id|DSP_CAI_MODEM_NEGOTIATE_IN_CLASS
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: IN CLASS&quot;
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|GET_WORD
(paren
id|mdm_cfg
(braket
l_int|5
)braket
dot
id|info
)paren
op_amp
l_int|0x00ff
)paren
op_eq
id|MDM_CAPI_NEG_DISABLED
)paren
(brace
id|cai
(braket
l_int|8
)braket
op_or_assign
id|DSP_CAI_MODEM_NEGOTIATE_DISABLED
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM: DISABLED&quot;
)paren
)paren
suffix:semicolon
)brace
id|cai
(braket
l_int|0
)braket
op_assign
l_int|20
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_V18
)paren
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
id|mdm_cfg
(braket
l_int|5
)braket
dot
id|info
)paren
op_amp
l_int|0x8000
)paren
)paren
multiline_comment|/* Private V.18 enable */
(brace
id|plci-&gt;requested_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_V18
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|mdm_cfg
(braket
l_int|5
)braket
dot
id|info
)paren
op_amp
l_int|0x4000
)paren
multiline_comment|/* Private VOWN enable */
id|plci-&gt;requested_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_VOWN
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_V18
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_VOWN
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
comma
l_string|&quot;wwwwwws&quot;
comma
id|mdm_cfg
)paren
)paren
(brace
id|i
op_assign
l_int|27
suffix:semicolon
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|4
)paren
(brace
id|d
op_assign
id|GET_DWORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|cai
(braket
l_int|7
)braket
op_or_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
multiline_comment|/* line taking options */
id|cai
(braket
l_int|9
)braket
op_or_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* modulation options */
id|cai
(braket
op_increment
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|16
)paren
suffix:semicolon
multiline_comment|/* vown modulation options */
id|cai
(braket
op_increment
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|24
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|8
)paren
(brace
id|d
op_assign
id|GET_DWORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|cai
(braket
l_int|10
)braket
op_or_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
multiline_comment|/* disabled modulations mask */
id|cai
(braket
l_int|11
)braket
op_or_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|12
)paren
(brace
id|d
op_assign
id|GET_DWORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|9
)braket
)paren
suffix:semicolon
id|cai
(braket
l_int|12
)braket
op_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
multiline_comment|/* enabled modulations mask */
id|cai
(braket
op_increment
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* vown enabled modulations */
id|cai
(braket
op_increment
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|16
)paren
suffix:semicolon
id|cai
(braket
op_increment
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|24
)paren
suffix:semicolon
id|cai
(braket
op_increment
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|14
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|13
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_ne
l_int|0
)paren
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|13
)braket
comma
id|w
)paren
suffix:semicolon
multiline_comment|/* min tx speed */
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|16
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|15
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_ne
l_int|0
)paren
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|15
)braket
comma
id|w
)paren
suffix:semicolon
multiline_comment|/* max tx speed */
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|18
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|17
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_ne
l_int|0
)paren
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|17
)braket
comma
id|w
)paren
suffix:semicolon
multiline_comment|/* min rx speed */
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|20
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|19
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_ne
l_int|0
)paren
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|19
)braket
comma
id|w
)paren
suffix:semicolon
multiline_comment|/* max rx speed */
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|22
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|21
)braket
)paren
suffix:semicolon
id|cai
(braket
l_int|23
)braket
op_assign
(paren
id|byte
)paren
(paren
op_minus
(paren
(paren
r_int
)paren
id|w
)paren
)paren
suffix:semicolon
multiline_comment|/* transmit level */
r_if
c_cond
(paren
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|length
op_ge
l_int|24
)paren
(brace
id|w
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|cai
(braket
l_int|22
)braket
op_or_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
multiline_comment|/* info options mask */
id|cai
(braket
l_int|21
)braket
op_or_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* disabled symbol rates */
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
)brace
id|cai
(braket
l_int|27
)braket
op_assign
id|i
op_minus
l_int|27
suffix:semicolon
id|i
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
comma
l_string|&quot;wwwwwwss&quot;
comma
id|mdm_cfg
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|api_parse
c_func
(paren
op_amp
id|mdm_cfg
(braket
l_int|7
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|mdm_cfg
(braket
l_int|7
)braket
dot
id|length
comma
l_string|&quot;sss&quot;
comma
id|mdm_cfg_v18
)paren
)paren
(brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
id|cai
(braket
id|i
)braket
op_assign
(paren
id|byte
)paren
(paren
id|mdm_cfg_v18
(braket
id|n
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|1
suffix:semicolon
id|j
OL
(paren
(paren
id|word
)paren
(paren
id|cai
(braket
id|i
)braket
op_plus
l_int|1
)paren
)paren
suffix:semicolon
id|j
op_increment
)paren
id|cai
(braket
id|i
op_plus
id|j
)braket
op_assign
id|mdm_cfg_v18
(braket
id|n
)braket
dot
id|info
(braket
id|j
)braket
suffix:semicolon
id|i
op_add_assign
id|cai
(braket
id|i
)braket
op_plus
l_int|1
suffix:semicolon
)brace
)brace
)brace
id|cai
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|i
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
l_int|2
op_logical_or
multiline_comment|/* V.110 async */
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
l_int|3
)paren
multiline_comment|/* V.110 sync */
(brace
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;V.110,%d&quot;
comma
id|GET_WORD
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|GET_WORD
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
(brace
multiline_comment|/* Rate */
r_case
l_int|0
suffix:colon
r_case
l_int|56000
suffix:colon
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
l_int|3
)paren
(brace
multiline_comment|/* V.110 sync 56k */
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;56k sync HSCX&quot;
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
l_int|8
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
l_int|2
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;56k async DSP&quot;
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|9
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|50
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|75
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|110
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|150
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|200
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|300
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|600
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1200
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2400
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4800
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7200
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9600
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12000
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|13
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24000
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|14400
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|19200
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|28800
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|38400
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|48000
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|76
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* 75/1200     */
r_case
l_int|1201
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|14
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* 1200/75     */
r_case
l_int|56001
suffix:colon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* V.110 56000 */
r_default
suffix:colon
r_return
id|_B1_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|cai
(braket
l_int|1
)braket
op_eq
l_int|13
)paren
multiline_comment|/* v.110 async */
(brace
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|3
)braket
dot
id|length
op_ge
l_int|8
)paren
(brace
r_switch
c_cond
(paren
id|GET_WORD
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|3
)braket
)paren
)paren
(brace
multiline_comment|/* char length */
r_case
l_int|5
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_CHAR_LENGTH_7
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|5
)braket
)paren
)paren
(brace
multiline_comment|/* Parity     */
r_case
l_int|1
suffix:colon
multiline_comment|/* odd parity */
id|cai
(braket
l_int|3
)braket
op_or_assign
(paren
id|DSP_CAI_ASYNC_PARITY_ENABLE
op_or
id|DSP_CAI_ASYNC_PARITY_ODD
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* even parity */
id|cai
(braket
l_int|3
)braket
op_or_assign
(paren
id|DSP_CAI_ASYNC_PARITY_ENABLE
op_or
id|DSP_CAI_ASYNC_PARITY_EVEN
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
(paren
op_amp
id|bp_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|7
)braket
)paren
)paren
(brace
multiline_comment|/* stop bits   */
r_case
l_int|1
suffix:colon
multiline_comment|/* 2 stop bits */
id|cai
(braket
l_int|3
)braket
op_or_assign
id|DSP_CAI_ASYNC_TWO_STOP_BITS
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
r_if
c_cond
(paren
id|cai
(braket
l_int|1
)braket
op_eq
l_int|8
op_logical_or
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
l_int|3
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;V.110 default 56k sync&quot;
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|1
)braket
op_assign
l_int|8
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|cai
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;V.110 default 9600 async&quot;
)paren
)paren
suffix:semicolon
id|cai
(braket
l_int|2
)braket
op_assign
l_int|5
suffix:semicolon
)brace
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|cai
(braket
l_int|5
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CAI[%d]=%x,%x,%x,%x,%x,%x&quot;
comma
id|cai
(braket
l_int|0
)braket
comma
id|cai
(braket
l_int|1
)braket
comma
id|cai
(braket
l_int|2
)braket
comma
id|cai
(braket
l_int|3
)braket
comma
id|cai
(braket
l_int|4
)braket
comma
id|cai
(braket
l_int|5
)braket
comma
id|cai
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
multiline_comment|/* HexDump (&quot;CAI&quot;, sizeof(cai), &amp;cai[0]); */
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
id|cai
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* put parameter for b2 and B3  protocol in the parameter buffer    */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|add_b23
id|word
id|add_b23
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|API_PARSE
op_star
id|bp
)paren
(brace
id|word
id|i
comma
id|fax_control_bits
suffix:semicolon
id|byte
id|pos
comma
id|len
suffix:semicolon
id|byte
id|SAPI
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* default SAPI 16 for x.31 */
id|API_PARSE
id|bp_parms
(braket
l_int|8
)braket
suffix:semicolon
id|API_PARSE
op_star
id|b1_config
suffix:semicolon
id|API_PARSE
op_star
id|b2_config
suffix:semicolon
id|API_PARSE
id|b2_config_parms
(braket
l_int|8
)braket
suffix:semicolon
id|API_PARSE
op_star
id|b3_config
suffix:semicolon
id|API_PARSE
id|b3_config_parms
(braket
l_int|6
)braket
suffix:semicolon
id|API_PARSE
id|global_config
(braket
l_int|2
)braket
suffix:semicolon
r_static
id|byte
id|llc
(braket
l_int|3
)braket
op_assign
(brace
l_int|2
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
id|byte
id|dlc
(braket
l_int|20
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
id|byte
id|nlc
(braket
l_int|256
)braket
suffix:semicolon
r_static
id|byte
id|lli
(braket
l_int|12
)braket
op_assign
(brace
l_int|1
comma
l_int|1
)brace
suffix:semicolon
r_const
id|byte
id|llc2_out
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|2
comma
l_int|4
comma
l_int|6
comma
l_int|2
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|X75_V42BIS
comma
id|V120_L2
comma
id|V120_V42BIS
comma
id|V120_L2
comma
l_int|6
)brace
suffix:semicolon
r_const
id|byte
id|llc2_in
(braket
)braket
op_assign
(brace
l_int|1
comma
l_int|3
comma
l_int|4
comma
l_int|6
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|X75_V42BIS
comma
id|V120_L2
comma
id|V120_V42BIS
comma
id|V120_L2
comma
l_int|6
)brace
suffix:semicolon
r_const
id|byte
id|llc3
(braket
)braket
op_assign
(brace
l_int|4
comma
l_int|3
comma
l_int|2
comma
l_int|2
comma
l_int|6
comma
l_int|6
comma
l_int|0
)brace
suffix:semicolon
r_const
id|byte
id|header
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|2
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|bp_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
(brace
id|b2_config_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|b3_config_parms
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
id|lli
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
id|lli
(braket
l_int|1
)braket
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XONOFF_FLOW_CONTROL
)paren
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_OOB_CHANNEL
)paren
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|lli
(braket
l_int|1
)braket
op_amp
l_int|0x02
)paren
op_logical_and
(paren
id|diva_xdi_extended_features
op_amp
id|DIVA_CAPI_USE_CMA
)paren
)paren
(brace
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
op_le
l_int|0
)paren
(brace
id|plci-&gt;rx_dma_descriptor
op_assign
id|diva_get_dma_descriptor
c_func
(paren
id|plci
comma
op_amp
id|plci-&gt;rx_dma_magic
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
op_ge
l_int|0
)paren
id|plci-&gt;rx_dma_descriptor
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
OG
l_int|0
)paren
(brace
id|lli
(braket
l_int|0
)braket
op_assign
l_int|6
suffix:semicolon
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x40
suffix:semicolon
id|lli
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_descriptor
op_minus
l_int|1
)paren
suffix:semicolon
id|lli
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
id|plci-&gt;rx_dma_magic
suffix:semicolon
id|lli
(braket
l_int|4
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|8
)paren
suffix:semicolon
id|lli
(braket
l_int|5
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|16
)paren
suffix:semicolon
id|lli
(braket
l_int|6
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|24
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|DIVA_CAPI_SUPPORTS_NO_CANCEL
c_func
(paren
id|plci-&gt;adapter
)paren
)paren
(brace
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;add_b23&quot;
)paren
)paren
suffix:semicolon
id|api_save_msg
c_func
(paren
id|bp
comma
l_string|&quot;s&quot;
comma
op_amp
id|plci-&gt;B_protocol
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bp-&gt;length
op_logical_and
id|plci-&gt;tel
)paren
(brace
id|plci-&gt;adv_nl
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Default adv.Nl&quot;
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|plci-&gt;B2_prot
op_assign
l_int|1
multiline_comment|/*XPARENT*/
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
l_int|0
multiline_comment|/*XPARENT*/
suffix:semicolon
id|llc
(braket
l_int|1
)braket
op_assign
l_int|2
suffix:semicolon
id|llc
(braket
l_int|2
)braket
op_assign
l_int|4
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLC
comma
id|llc
)paren
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|bp-&gt;length
)paren
multiline_comment|/*default*/
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ret default&quot;
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|plci-&gt;B2_prot
op_assign
l_int|0
multiline_comment|/*X.75   */
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
l_int|0
multiline_comment|/*XPARENT*/
suffix:semicolon
id|llc
(braket
l_int|1
)braket
op_assign
l_int|1
suffix:semicolon
id|llc
(braket
l_int|2
)braket
op_assign
l_int|4
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLC
comma
id|llc
)paren
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b_prot_len=%d&quot;
comma
(paren
id|word
)paren
id|bp-&gt;length
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|word
)paren
id|bp-&gt;length
OG
l_int|256
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwsssb&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwsss&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b-form.!&quot;
)paren
)paren
suffix:semicolon
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp-&gt;length
comma
l_string|&quot;wwwssss&quot;
comma
id|bp_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b-form.!&quot;
)paren
)paren
suffix:semicolon
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
multiline_comment|/* transparent B on advanced voice */
(brace
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ne
l_int|1
op_logical_or
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
op_ne
l_int|0
)paren
(brace
r_return
id|_B2_NOT_SUPPORTED
suffix:semicolon
)brace
id|plci-&gt;adv_nl
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;tel
)paren
(brace
r_return
id|_B2_NOT_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_eq
id|B2_RTP
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
op_eq
id|B3_RTP
)paren
op_logical_and
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_RTP
)paren
)paren
)paren
(brace
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|plci-&gt;B2_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
id|llc
(braket
l_int|1
)braket
op_assign
(paren
id|plci-&gt;call_dir
op_amp
(paren
id|CALL_DIR_ORIGINATE
op_or
id|CALL_DIR_FORCE_OUTG_NL
)paren
)paren
ques
c_cond
l_int|14
suffix:colon
l_int|13
suffix:semicolon
id|llc
(braket
l_int|2
)braket
op_assign
l_int|4
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLC
comma
id|llc
)paren
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|dlc
(braket
l_int|3
)braket
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* Addr A */
id|dlc
(braket
l_int|4
)braket
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* Addr B */
id|dlc
(braket
l_int|5
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* modulo mode */
id|dlc
(braket
l_int|6
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* window size */
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Lo  */
id|dlc
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Hi  */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|bp_parms
(braket
l_int|4
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|dlc
(braket
l_int|9
op_plus
id|i
)braket
op_assign
id|bp_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
l_int|8
op_plus
id|bp_parms
(braket
l_int|4
)braket
dot
id|length
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|bp_parms
(braket
l_int|5
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|nlc
(braket
l_int|1
op_plus
id|i
)braket
op_assign
id|bp_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
id|nlc
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|bp_parms
(braket
l_int|5
)braket
dot
id|length
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|NLC
comma
id|nlc
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ge
l_int|32
)paren
op_logical_or
(paren
op_logical_neg
(paren
(paren
l_int|1L
op_lshift
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
op_amp
id|plci-&gt;adapter-&gt;profile.B2_Protocols
)paren
op_logical_and
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ne
id|B2_PIAFS
)paren
op_logical_or
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_PIAFS
)paren
)paren
)paren
)paren
)paren
(brace
r_return
id|_B2_NOT_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
op_ge
l_int|32
)paren
op_logical_or
op_logical_neg
(paren
(paren
l_int|1L
op_lshift
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
)paren
op_amp
id|plci-&gt;adapter-&gt;profile.B3_Protocols
)paren
)paren
(brace
r_return
id|_B3_NOT_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ne
id|B2_SDLC
)paren
op_logical_and
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_ALL_NEGOTIATE
)paren
op_logical_or
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_ASYNC
)paren
op_logical_or
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_SYNC_HDLC
)paren
)paren
)paren
(brace
r_return
(paren
id|add_modem_b23
(paren
id|plci
comma
id|bp_parms
)paren
)paren
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|plci-&gt;B2_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B2_prot
op_eq
l_int|12
)paren
(brace
id|SAPI
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* default SAPI D-channel */
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|bp_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|6
)braket
dot
id|length
comma
l_string|&quot;w&quot;
comma
id|global_config
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|GET_WORD
c_func
(paren
id|global_config
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
(brace
r_case
l_int|1
suffix:colon
id|plci-&gt;call_dir
op_assign
(paren
id|plci-&gt;call_dir
op_amp
op_complement
id|CALL_DIR_ANSWER
)paren
op_or
id|CALL_DIR_ORIGINATE
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|plci-&gt;call_dir
op_assign
(paren
id|plci-&gt;call_dir
op_amp
op_complement
id|CALL_DIR_ORIGINATE
)paren
op_or
id|CALL_DIR_ANSWER
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;call_dir=%04x&quot;
comma
id|plci-&gt;call_dir
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_PIAFS
)paren
id|llc
(braket
l_int|1
)braket
op_assign
id|PIAFS_CRC
suffix:semicolon
r_else
multiline_comment|/* IMPLEMENT_PIAFS */
(brace
id|llc
(braket
l_int|1
)braket
op_assign
(paren
id|plci-&gt;call_dir
op_amp
(paren
id|CALL_DIR_ORIGINATE
op_or
id|CALL_DIR_FORCE_OUTG_NL
)paren
)paren
ques
c_cond
id|llc2_out
(braket
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
)braket
suffix:colon
id|llc2_in
(braket
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
)braket
suffix:semicolon
)brace
id|llc
(braket
l_int|2
)braket
op_assign
id|llc3
(braket
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
)braket
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLC
comma
id|llc
)paren
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
op_plus
id|header
(braket
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
)braket
)paren
suffix:semicolon
id|b1_config
op_assign
op_amp
id|bp_parms
(braket
l_int|3
)braket
suffix:semicolon
id|nlc
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
op_logical_or
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|T30_INFO
)paren
suffix:semicolon
id|i
op_increment
)paren
id|nlc
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|nlc
(braket
l_int|0
)braket
op_assign
r_sizeof
(paren
id|T30_INFO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|operating_mode
op_assign
id|T30_OPERATING_MODE_CAPI
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|rate_div_2400
op_assign
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|b1_config-&gt;length
op_ge
l_int|2
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|rate_div_2400
op_assign
(paren
id|byte
)paren
(paren
id|GET_WORD
c_func
(paren
op_amp
id|b1_config-&gt;info
(braket
l_int|1
)braket
)paren
op_div
l_int|2400
)paren
suffix:semicolon
)brace
)brace
id|b2_config
op_assign
op_amp
id|bp_parms
(braket
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|PIAFS_CRC
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_TRANSPARENT
)paren
(brace
r_return
id|_B_STACK_NOT_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
id|b2_config-&gt;length
op_logical_and
id|api_parse
c_func
(paren
op_amp
id|b2_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b2_config-&gt;length
comma
l_string|&quot;bwww&quot;
comma
id|b2_config_parms
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|dlc
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Addr A */
id|dlc
(braket
l_int|4
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Addr B */
id|dlc
(braket
l_int|5
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* modulo mode */
id|dlc
(braket
l_int|6
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* window size */
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|7
)paren
(brace
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|7
suffix:semicolon
id|dlc
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
id|dlc
(braket
l_int|9
)braket
op_assign
id|b2_config_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* PIAFS protocol Speed configuration */
id|dlc
(braket
l_int|10
)braket
op_assign
id|b2_config_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* V.42bis P0 */
id|dlc
(braket
l_int|11
)braket
op_assign
id|b2_config_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* V.42bis P0 */
id|dlc
(braket
l_int|12
)braket
op_assign
id|b2_config_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* V.42bis P1 */
id|dlc
(braket
l_int|13
)braket
op_assign
id|b2_config_parms
(braket
l_int|2
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* V.42bis P1 */
id|dlc
(braket
l_int|14
)braket
op_assign
id|b2_config_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* V.42bis P2 */
id|dlc
(braket
l_int|15
)braket
op_assign
id|b2_config_parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
multiline_comment|/* V.42bis P2 */
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|8
)paren
(brace
multiline_comment|/* PIAFS control abilities */
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|10
suffix:semicolon
id|dlc
(braket
l_int|16
)braket
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* Length of PIAFS extention */
id|dlc
(braket
l_int|17
)braket
op_assign
id|PIAFS_UDATA_ABILITIES
suffix:semicolon
multiline_comment|/* control (UDATA) ability */
id|dlc
(braket
l_int|18
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
multiline_comment|/* value */
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|18
suffix:semicolon
)brace
)brace
r_else
multiline_comment|/* default values, 64K, variable, no compression */
(brace
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|7
suffix:semicolon
id|dlc
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
id|dlc
(braket
l_int|9
)braket
op_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* PIAFS protocol Speed configuration */
id|dlc
(braket
l_int|10
)braket
op_assign
l_int|0x03
suffix:semicolon
multiline_comment|/* V.42bis P0 */
id|dlc
(braket
l_int|11
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* V.42bis P0 */
id|dlc
(braket
l_int|12
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* V.42bis P1 */
id|dlc
(braket
l_int|13
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* V.42bis P1 */
id|dlc
(braket
l_int|14
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* V.42bis P2 */
id|dlc
(braket
l_int|15
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* V.42bis P2 */
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|15
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|V120_L2
)paren
op_logical_or
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|V120_V42BIS
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_ne
id|B3_TRANSPARENT
)paren
r_return
id|_B_STACK_NOT_SUPPORTED
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|6
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
comma
id|GET_WORD
(paren
op_amp
id|dlc
(braket
l_int|1
)braket
)paren
op_plus
l_int|2
)paren
suffix:semicolon
id|dlc
(braket
l_int|3
)braket
op_assign
l_int|0x08
suffix:semicolon
id|dlc
(braket
l_int|4
)braket
op_assign
l_int|0x01
suffix:semicolon
id|dlc
(braket
l_int|5
)braket
op_assign
l_int|127
suffix:semicolon
id|dlc
(braket
l_int|6
)braket
op_assign
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|V120_V42BIS
)paren
op_logical_and
id|api_parse
c_func
(paren
op_amp
id|b2_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b2_config-&gt;length
comma
l_string|&quot;bbbbwww&quot;
comma
id|b2_config_parms
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
id|dlc
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
(paren
(paren
id|b2_config-&gt;info
(braket
l_int|2
)braket
op_lshift
l_int|3
)paren
op_or
(paren
(paren
id|b2_config-&gt;info
(braket
l_int|1
)braket
op_rshift
l_int|5
)paren
op_amp
l_int|0x04
)paren
)paren
suffix:semicolon
id|dlc
(braket
l_int|4
)braket
op_assign
(paren
id|byte
)paren
(paren
(paren
id|b2_config-&gt;info
(braket
l_int|1
)braket
op_lshift
l_int|1
)paren
op_or
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_ne
l_int|128
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;1D-dlc= %x %x %x %x %x&quot;
comma
id|dlc
(braket
l_int|0
)braket
comma
id|dlc
(braket
l_int|1
)braket
comma
id|dlc
(braket
l_int|2
)braket
comma
id|dlc
(braket
l_int|3
)braket
comma
id|dlc
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
r_return
id|_B2_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|dlc
(braket
l_int|5
)braket
op_assign
(paren
id|byte
)paren
(paren
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_minus
l_int|1
)paren
suffix:semicolon
id|dlc
(braket
l_int|6
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|V120_V42BIS
)paren
(brace
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|10
)paren
(brace
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|6
suffix:semicolon
id|dlc
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
id|dlc
(braket
l_int|9
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|10
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|11
)braket
op_assign
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|12
)braket
op_assign
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|13
)braket
op_assign
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|14
)braket
op_assign
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|14
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[4].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[5].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[6].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dlc
(braket
l_int|6
)braket
op_assign
l_int|14
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|b2_config-&gt;length
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;B2-Config&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|X75_V42BIS
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|b2_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b2_config-&gt;length
comma
l_string|&quot;bbbbwww&quot;
comma
id|b2_config_parms
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|b2_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b2_config-&gt;length
comma
l_string|&quot;bbbbs&quot;
comma
id|b2_config_parms
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
)brace
multiline_comment|/* if B2 Protocol is LAPD, b2_config structure is different */
r_if
c_cond
(paren
id|llc
(braket
l_int|1
)braket
op_eq
l_int|6
)paren
(brace
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|1
)paren
(brace
id|dlc
(braket
l_int|2
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|1
)braket
suffix:semicolon
)brace
multiline_comment|/* TEI */
r_else
id|dlc
(braket
l_int|2
)braket
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
(paren
id|b2_config-&gt;length
op_ge
l_int|2
)paren
op_logical_and
(paren
id|plci-&gt;B2_prot
op_eq
l_int|12
)paren
)paren
(brace
id|SAPI
op_assign
id|b2_config-&gt;info
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* SAPI */
)brace
id|dlc
(braket
l_int|1
)braket
op_assign
id|SAPI
suffix:semicolon
r_if
c_cond
(paren
(paren
id|b2_config-&gt;length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_eq
l_int|128
)paren
)paren
(brace
id|dlc
(braket
l_int|3
)braket
op_assign
l_int|127
suffix:semicolon
multiline_comment|/* Mode */
)brace
r_else
(brace
id|dlc
(braket
l_int|3
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* Mode */
)brace
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|4
)paren
(brace
id|dlc
(braket
l_int|4
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|4
)braket
suffix:semicolon
)brace
multiline_comment|/* Window */
r_else
id|dlc
(braket
l_int|4
)braket
op_assign
l_int|1
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;D-dlc[%d]=%x,%x,%x,%x&quot;
comma
id|dlc
(braket
l_int|0
)braket
comma
id|dlc
(braket
l_int|1
)braket
comma
id|dlc
(braket
l_int|2
)braket
comma
id|dlc
(braket
l_int|3
)braket
comma
id|dlc
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;length
OG
l_int|5
)paren
(brace
r_return
id|_B2_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
)brace
r_else
(brace
id|dlc
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|length
op_plus
l_int|6
)paren
suffix:semicolon
id|dlc
(braket
l_int|3
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|4
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_ne
l_int|8
op_logical_and
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_ne
l_int|128
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;1D-dlc= %x %x %x %x %x&quot;
comma
id|dlc
(braket
l_int|0
)braket
comma
id|dlc
(braket
l_int|1
)braket
comma
id|dlc
(braket
l_int|2
)braket
comma
id|dlc
(braket
l_int|3
)braket
comma
id|dlc
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
r_return
id|_B2_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|dlc
(braket
l_int|5
)braket
op_assign
(paren
id|byte
)paren
(paren
id|b2_config-&gt;info
(braket
l_int|3
)braket
op_minus
l_int|1
)paren
suffix:semicolon
id|dlc
(braket
l_int|6
)braket
op_assign
id|b2_config-&gt;info
(braket
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|dlc
(braket
l_int|6
)braket
OG
id|dlc
(braket
l_int|5
)braket
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;2D-dlc= %x %x %x %x %x %x %x&quot;
comma
id|dlc
(braket
l_int|0
)braket
comma
id|dlc
(braket
l_int|1
)braket
comma
id|dlc
(braket
l_int|2
)braket
comma
id|dlc
(braket
l_int|3
)braket
comma
id|dlc
(braket
l_int|4
)braket
comma
id|dlc
(braket
l_int|5
)braket
comma
id|dlc
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
r_return
id|_B2_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
r_if
c_cond
(paren
id|llc
(braket
l_int|1
)braket
op_eq
id|X75_V42BIS
)paren
(brace
r_if
c_cond
(paren
id|b2_config-&gt;length
op_ge
l_int|10
)paren
(brace
id|dlc
(braket
l_int|7
)braket
op_assign
l_int|6
suffix:semicolon
id|dlc
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
id|dlc
(braket
l_int|9
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|10
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|11
)braket
op_assign
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|12
)braket
op_assign
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|13
)braket
op_assign
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|0
)braket
suffix:semicolon
id|dlc
(braket
l_int|14
)braket
op_assign
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
suffix:semicolon
id|dlc
(braket
l_int|0
)braket
op_assign
l_int|14
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[4].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[5].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|5
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;b2_config_parms[6].info[0] [1]:  %x %x&quot;
comma
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|0
)braket
comma
id|b2_config_parms
(braket
l_int|6
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dlc
(braket
l_int|6
)braket
op_assign
l_int|14
suffix:semicolon
)brace
)brace
r_else
(brace
id|PUT_WORD
c_func
(paren
op_amp
id|dlc
(braket
l_int|7
)braket
comma
(paren
id|word
)paren
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dlc
(braket
l_int|11
op_plus
id|i
)braket
op_assign
id|b2_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
id|b3_config
op_assign
op_amp
id|bp_parms
(braket
l_int|5
)braket
suffix:semicolon
r_if
c_cond
(paren
id|b3_config-&gt;length
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
op_logical_or
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|b3_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b3_config-&gt;length
comma
l_string|&quot;wwss&quot;
comma
id|b3_config_parms
)paren
)paren
(brace
r_return
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
id|i
op_assign
id|GET_WORD
c_func
(paren
(paren
id|byte
op_star
)paren
(paren
id|b3_config_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|resolution
op_assign
(paren
id|byte
)paren
(paren
(paren
(paren
id|i
op_amp
l_int|0x0001
)paren
op_logical_or
(paren
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
op_logical_and
(paren
(paren
(paren
id|byte
)paren
(paren
id|GET_WORD
c_func
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
)paren
op_ne
l_int|5
)paren
)paren
)paren
ques
c_cond
id|T30_RESOLUTION_R8_0770_OR_200
suffix:colon
l_int|0
)paren
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|data_format
op_assign
(paren
id|byte
)paren
(paren
id|GET_WORD
c_func
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|1
)braket
dot
id|info
)paren
)paren
suffix:semicolon
id|fax_control_bits
op_assign
id|T30_CONTROL_BIT_ALL_FEATURES
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|rate_div_2400
op_ne
l_int|0
)paren
op_logical_and
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|rate_div_2400
op_le
l_int|6
)paren
)paren
id|fax_control_bits
op_and_assign
op_complement
id|T30_CONTROL_BIT_ENABLE_V34FAX
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_FAX_PAPER_FORMATS
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_PAPER_FORMATS
)paren
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|resolution
op_or_assign
id|T30_RESOLUTION_R8_1540
op_or
id|T30_RESOLUTION_R16_1540_OR_400
op_or
id|T30_RESOLUTION_300_300
op_or
id|T30_RESOLUTION_INCH_BASED
op_or
id|T30_RESOLUTION_METRIC_BASED
suffix:semicolon
)brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|recording_properties
op_assign
id|T30_RECORDING_WIDTH_ISO_A3
op_or
(paren
id|T30_RECORDING_LENGTH_UNLIMITED
op_lshift
l_int|2
)paren
op_or
(paren
id|T30_MIN_SCANLINE_TIME_00_00_00
op_lshift
l_int|4
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_if
c_cond
(paren
id|i
op_amp
l_int|0x0002
)paren
multiline_comment|/* Accept incoming fax-polling requests */
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_ACCEPT_POLLING
suffix:semicolon
r_if
c_cond
(paren
id|i
op_amp
l_int|0x2000
)paren
multiline_comment|/* Do not use MR compression */
id|fax_control_bits
op_and_assign
op_complement
id|T30_CONTROL_BIT_ENABLE_2D_CODING
suffix:semicolon
r_if
c_cond
(paren
id|i
op_amp
l_int|0x4000
)paren
multiline_comment|/* Do not use MMR compression */
id|fax_control_bits
op_and_assign
op_complement
id|T30_CONTROL_BIT_ENABLE_T6_CODING
suffix:semicolon
r_if
c_cond
(paren
id|i
op_amp
l_int|0x8000
)paren
multiline_comment|/* Do not use ECM */
id|fax_control_bits
op_and_assign
op_complement
id|T30_CONTROL_BIT_ENABLE_ECM
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;fax_connect_info_length
op_ne
l_int|0
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|resolution
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|resolution
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|data_format
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|data_format
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|recording_properties
op_assign
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|recording_properties
suffix:semicolon
id|fax_control_bits
op_or_assign
id|GET_WORD
c_func
(paren
op_amp
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|control_bits_low
)paren
op_amp
(paren
id|T30_CONTROL_BIT_REQUEST_POLLING
op_or
id|T30_CONTROL_BIT_MORE_DOCUMENTS
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* copy station id to NLC */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|20
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
OL
id|b3_config_parms
(braket
l_int|2
)braket
dot
id|length
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
id|i
)braket
op_assign
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|2
)braket
dot
id|info
)paren
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
r_else
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
id|i
)braket
op_assign
l_char|&squot; &squot;
suffix:semicolon
)brace
)brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id_len
op_assign
l_int|20
suffix:semicolon
multiline_comment|/* copy head line to NLC */
r_if
c_cond
(paren
id|b3_config_parms
(braket
l_int|3
)braket
dot
id|length
)paren
(brace
id|pos
op_assign
(paren
id|byte
)paren
(paren
id|fax_head_line_time
(paren
op_amp
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
)braket
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pos
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|CAPI_MAX_DATE_TIME_LENGTH
op_plus
l_int|2
op_plus
id|b3_config_parms
(braket
l_int|3
)braket
dot
id|length
OG
id|CAPI_MAX_HEAD_LINE_SPACE
)paren
id|pos
op_assign
l_int|0
suffix:semicolon
r_else
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
l_char|&squot; &squot;
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
l_char|&squot; &squot;
suffix:semicolon
id|len
op_assign
(paren
id|byte
)paren
id|b3_config_parms
(braket
l_int|2
)braket
dot
id|length
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
l_int|20
)paren
id|len
op_assign
l_int|20
suffix:semicolon
r_if
c_cond
(paren
id|CAPI_MAX_DATE_TIME_LENGTH
op_plus
l_int|2
op_plus
id|len
op_plus
l_int|2
op_plus
id|b3_config_parms
(braket
l_int|3
)braket
dot
id|length
op_le
id|CAPI_MAX_HEAD_LINE_SPACE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|len
suffix:semicolon
id|i
op_increment
)paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|2
)braket
dot
id|info
)paren
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
l_char|&squot; &squot;
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
l_char|&squot; &squot;
suffix:semicolon
)brace
)brace
)brace
id|len
op_assign
(paren
id|byte
)paren
id|b3_config_parms
(braket
l_int|3
)braket
dot
id|length
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
id|CAPI_MAX_HEAD_LINE_SPACE
op_minus
id|pos
)paren
id|len
op_assign
(paren
id|byte
)paren
(paren
id|CAPI_MAX_HEAD_LINE_SPACE
op_minus
id|pos
)paren
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
(paren
id|byte
)paren
(paren
id|pos
op_plus
id|len
)paren
suffix:semicolon
id|nlc
(braket
l_int|0
)braket
op_add_assign
(paren
id|byte
)paren
(paren
id|pos
op_plus
id|len
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|len
suffix:semicolon
id|i
op_increment
)paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|station_id
(braket
l_int|20
op_plus
id|pos
op_increment
)braket
op_assign
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|3
)braket
dot
id|info
)paren
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
r_else
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;nsf_control_bits
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|5
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_amp
l_int|0x8000
)paren
)paren
multiline_comment|/* Private SUB/SEP/PWD enable */
(brace
id|plci-&gt;requested_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;adapter-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
(paren
id|byte
op_star
)paren
id|b3_config_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_amp
l_int|0x4000
)paren
)paren
multiline_comment|/* Private non-standard facilities enable */
(brace
id|plci-&gt;requested_options
op_or_assign
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
op_or
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_SUB_SEP_PWD
)paren
)paren
(brace
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_ACCEPT_SUBADDRESS
op_or
id|T30_CONTROL_BIT_ACCEPT_PASSWORD
suffix:semicolon
r_if
c_cond
(paren
id|fax_control_bits
op_amp
id|T30_CONTROL_BIT_ACCEPT_POLLING
)paren
id|fax_control_bits
op_or_assign
id|T30_CONTROL_BIT_ACCEPT_SEL_POLLING
suffix:semicolon
)brace
id|len
op_assign
id|nlc
(braket
l_int|0
)braket
suffix:semicolon
id|pos
op_assign
(paren
(paren
id|byte
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pos
OL
id|plci-&gt;fax_connect_info_length
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
)braket
suffix:semicolon
id|i
op_ne
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|nlc
(braket
op_increment
id|len
)braket
op_assign
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
op_increment
)braket
suffix:semicolon
)brace
r_else
id|nlc
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|pos
OL
id|plci-&gt;fax_connect_info_length
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
)braket
suffix:semicolon
id|i
op_ne
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|nlc
(braket
op_increment
id|len
)braket
op_assign
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
op_increment
)braket
suffix:semicolon
)brace
r_else
id|nlc
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_FAX_NONSTANDARD
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pos
OL
id|plci-&gt;fax_connect_info_length
)paren
op_logical_and
(paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
)braket
op_ne
l_int|0
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
)braket
op_ge
l_int|3
)paren
op_logical_and
(paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
op_plus
l_int|1
)braket
op_ge
l_int|2
)paren
)paren
id|plci-&gt;nsf_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
op_plus
l_int|2
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
op_plus
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
)braket
suffix:semicolon
id|i
op_ne
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
id|nlc
(braket
op_increment
id|len
)braket
op_assign
id|plci-&gt;fax_connect_info_buffer
(braket
id|pos
op_increment
)braket
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|api_parse
c_func
(paren
op_amp
id|b3_config-&gt;info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|b3_config-&gt;length
comma
l_string|&quot;wwsss&quot;
comma
id|b3_config_parms
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;non-standard facilities info missing or wrong format&quot;
)paren
)paren
suffix:semicolon
id|nlc
(braket
op_increment
id|len
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|length
op_ge
l_int|3
)paren
op_logical_and
(paren
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
op_ge
l_int|2
)paren
)paren
id|plci-&gt;nsf_control_bits
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|nlc
(braket
op_increment
id|len
)braket
op_assign
(paren
id|byte
)paren
(paren
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|length
suffix:semicolon
id|i
op_increment
)paren
id|nlc
(braket
op_increment
id|len
)braket
op_assign
id|b3_config_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
)brace
)brace
id|nlc
(braket
l_int|0
)braket
op_assign
id|len
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_ENABLE_NSF
)paren
op_logical_and
(paren
id|plci-&gt;nsf_control_bits
op_amp
id|T30_NSF_CONTROL_BIT_NEGOTIATE_RESP
)paren
)paren
(brace
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|operating_mode
op_assign
id|T30_OPERATING_MODE_CAPI_NEG
suffix:semicolon
)brace
)brace
)brace
id|PUT_WORD
c_func
(paren
op_amp
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|control_bits_low
)paren
comma
id|fax_control_bits
)paren
suffix:semicolon
id|len
op_assign
(paren
(paren
id|byte
)paren
(paren
(paren
(paren
id|T30_INFO
op_star
)paren
l_int|0
)paren
op_member_access_from_pointer
id|station_id
op_plus
l_int|20
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|len
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|i
)braket
op_assign
id|nlc
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
(paren
(paren
id|T30_INFO
op_star
)paren
id|plci-&gt;fax_connect_info_buffer
)paren
op_member_access_from_pointer
id|head_line_len
op_assign
l_int|0
suffix:semicolon
id|i
op_add_assign
(paren
(paren
id|T30_INFO
op_star
)paren
op_amp
id|nlc
(braket
l_int|1
)braket
)paren
op_member_access_from_pointer
id|head_line_len
suffix:semicolon
r_while
c_loop
(paren
id|i
OL
id|nlc
(braket
l_int|0
)braket
)paren
id|plci-&gt;fax_connect_info_buffer
(braket
id|len
op_increment
)braket
op_assign
id|nlc
(braket
op_increment
id|i
)braket
suffix:semicolon
id|plci-&gt;fax_connect_info_length
op_assign
id|len
suffix:semicolon
)brace
r_else
(brace
id|nlc
(braket
l_int|0
)braket
op_assign
l_int|14
suffix:semicolon
r_if
c_cond
(paren
id|b3_config-&gt;length
op_ne
l_int|16
)paren
(brace
r_return
id|_B3_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|12
suffix:semicolon
id|i
op_increment
)paren
(brace
id|nlc
(braket
l_int|1
op_plus
id|i
)braket
op_assign
id|b3_config-&gt;info
(braket
l_int|1
op_plus
id|i
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
op_amp
id|b3_config-&gt;info
(braket
l_int|13
)braket
)paren
op_ne
l_int|8
op_logical_and
id|GET_WORD
c_func
(paren
op_amp
id|b3_config-&gt;info
(braket
l_int|13
)braket
)paren
op_ne
l_int|128
)paren
(brace
r_return
id|_B3_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|nlc
(braket
l_int|13
)braket
op_assign
id|b3_config-&gt;info
(braket
l_int|13
)braket
suffix:semicolon
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
op_amp
id|b3_config-&gt;info
(braket
l_int|15
)braket
)paren
op_ge
id|nlc
(braket
l_int|13
)braket
)paren
(brace
r_return
id|_B3_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|nlc
(braket
l_int|14
)braket
op_assign
id|b3_config-&gt;info
(braket
l_int|15
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
op_logical_or
id|plci-&gt;B3_prot
op_eq
l_int|5
multiline_comment|/*T.30 - FAX*/
)paren
r_return
id|_B3_PARM_NOT_SUPPORTED
suffix:semicolon
)brace
id|add_p
c_func
(paren
id|plci
comma
id|NLC
comma
id|nlc
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*----------------------------------------------------------------*/
multiline_comment|/*      make the same as add_b23, but only for the modem related  */
multiline_comment|/*      L2 and L3 B-Chan protocol.                                */
multiline_comment|/*                                                                */
multiline_comment|/*      Enabled L2 and L3 Configurations:                         */
multiline_comment|/*        If L1 == Modem all negotiation                          */
multiline_comment|/*          only L2 == Modem with full negotiation is allowed     */
multiline_comment|/*        If L1 == Modem async or sync                            */
multiline_comment|/*          only L2 == Transparent is allowed                     */
multiline_comment|/*        L3 == Modem or L3 == Transparent are allowed            */
multiline_comment|/*      B2 Configuration for modem:                               */
multiline_comment|/*          word : enable/disable compression, bitoptions         */
multiline_comment|/*      B3 Configuration for modem:                               */
multiline_comment|/*          empty                                                 */
multiline_comment|/*----------------------------------------------------------------*/
DECL|function|add_modem_b23
r_static
id|word
id|add_modem_b23
(paren
id|PLCI
op_star
id|plci
comma
id|API_PARSE
op_star
id|bp_parms
)paren
(brace
r_static
id|byte
id|lli
(braket
l_int|12
)braket
op_assign
(brace
l_int|1
comma
l_int|1
)brace
suffix:semicolon
r_static
id|byte
id|llc
(braket
l_int|3
)braket
op_assign
(brace
l_int|2
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
id|byte
id|dlc
(braket
l_int|16
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
id|API_PARSE
id|mdm_config
(braket
l_int|2
)braket
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|b2_config
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|mdm_config
(braket
id|i
)braket
dot
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|dlc
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dlc
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|B1_MODEM_ALL_NEGOTIATE
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ne
id|B2_MODEM_EC_COMPRESSION
)paren
)paren
op_logical_or
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_ne
id|B1_MODEM_ALL_NEGOTIATE
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_ne
id|B2_TRANSPARENT
)paren
)paren
)paren
(brace
r_return
(paren
id|_B_STACK_NOT_SUPPORTED
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
op_ne
id|B3_MODEM
)paren
op_logical_and
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
op_ne
id|B3_TRANSPARENT
)paren
)paren
(brace
r_return
(paren
id|_B_STACK_NOT_SUPPORTED
)paren
suffix:semicolon
)brace
id|plci-&gt;B2_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;B3_prot
op_assign
(paren
id|byte
)paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_eq
id|B2_MODEM_EC_COMPRESSION
)paren
op_logical_and
id|bp_parms
(braket
l_int|4
)braket
dot
id|length
)paren
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|bp_parms
(braket
l_int|4
)braket
dot
id|info
(braket
l_int|1
)braket
comma
(paren
id|word
)paren
id|bp_parms
(braket
l_int|4
)braket
dot
id|length
comma
l_string|&quot;w&quot;
comma
id|mdm_config
)paren
)paren
(brace
r_return
(paren
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
)brace
id|b2_config
op_assign
id|GET_WORD
c_func
(paren
id|mdm_config
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
)brace
multiline_comment|/* OK, L2 is modem */
id|lli
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
id|lli
(braket
l_int|1
)braket
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XONOFF_FLOW_CONTROL
)paren
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_OOB_CHANNEL
)paren
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
(paren
id|lli
(braket
l_int|1
)braket
op_amp
l_int|0x02
)paren
op_logical_and
(paren
id|diva_xdi_extended_features
op_amp
id|DIVA_CAPI_USE_CMA
)paren
)paren
(brace
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
op_le
l_int|0
)paren
(brace
id|plci-&gt;rx_dma_descriptor
op_assign
id|diva_get_dma_descriptor
c_func
(paren
id|plci
comma
op_amp
id|plci-&gt;rx_dma_magic
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
op_ge
l_int|0
)paren
id|plci-&gt;rx_dma_descriptor
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;rx_dma_descriptor
OG
l_int|0
)paren
(brace
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x40
suffix:semicolon
id|lli
(braket
l_int|0
)braket
op_assign
l_int|6
suffix:semicolon
id|lli
(braket
l_int|2
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_descriptor
op_minus
l_int|1
)paren
suffix:semicolon
id|lli
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
id|plci-&gt;rx_dma_magic
suffix:semicolon
id|lli
(braket
l_int|4
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|8
)paren
suffix:semicolon
id|lli
(braket
l_int|5
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|16
)paren
suffix:semicolon
id|lli
(braket
l_int|6
)braket
op_assign
(paren
id|byte
)paren
(paren
id|plci-&gt;rx_dma_magic
op_rshift
l_int|24
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|DIVA_CAPI_SUPPORTS_NO_CANCEL
c_func
(paren
id|plci-&gt;adapter
)paren
)paren
(brace
id|lli
(braket
l_int|1
)braket
op_or_assign
l_int|0x20
suffix:semicolon
)brace
id|llc
(braket
l_int|1
)braket
op_assign
(paren
id|plci-&gt;call_dir
op_amp
(paren
id|CALL_DIR_ORIGINATE
op_or
id|CALL_DIR_FORCE_OUTG_NL
)paren
)paren
ques
c_cond
multiline_comment|/*V42*/
l_int|10
suffix:colon
multiline_comment|/*V42_IN*/
l_int|9
suffix:semicolon
id|llc
(braket
l_int|2
)braket
op_assign
l_int|4
suffix:semicolon
multiline_comment|/* pass L3 always transparent */
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
id|lli
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLC
comma
id|llc
)paren
suffix:semicolon
id|i
op_assign
l_int|1
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|dlc
(braket
id|i
)braket
comma
id|plci-&gt;appl-&gt;MaxDataLength
)paren
suffix:semicolon
id|i
op_add_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|GET_WORD
c_func
(paren
id|bp_parms
(braket
l_int|1
)braket
dot
id|info
)paren
op_eq
id|B2_MODEM_EC_COMPRESSION
)paren
(brace
r_if
c_cond
(paren
id|bp_parms
(braket
l_int|4
)braket
dot
id|length
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;MDM b2_config=%02x&quot;
comma
id|b2_config
)paren
)paren
suffix:semicolon
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* Addr A */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* Addr B */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* modulo mode */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* window size */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Lo  */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Hi  */
r_if
c_cond
(paren
id|b2_config
op_amp
id|MDM_B2_DISABLE_V42bis
)paren
(brace
id|dlc
(braket
id|i
)braket
op_or_assign
id|DLC_MODEMPROT_DISABLE_V42_V42BIS
suffix:semicolon
)brace
r_if
c_cond
(paren
id|b2_config
op_amp
id|MDM_B2_DISABLE_MNP
)paren
(brace
id|dlc
(braket
id|i
)braket
op_or_assign
id|DLC_MODEMPROT_DISABLE_MNP_MNP5
suffix:semicolon
)brace
r_if
c_cond
(paren
id|b2_config
op_amp
id|MDM_B2_DISABLE_TRANS
)paren
(brace
id|dlc
(braket
id|i
)braket
op_or_assign
id|DLC_MODEMPROT_REQUIRE_PROTOCOL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|b2_config
op_amp
id|MDM_B2_DISABLE_V42
)paren
(brace
id|dlc
(braket
id|i
)braket
op_or_assign
id|DLC_MODEMPROT_DISABLE_V42_DETECT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|b2_config
op_amp
id|MDM_B2_DISABLE_COMP
)paren
(brace
id|dlc
(braket
id|i
)braket
op_or_assign
id|DLC_MODEMPROT_DISABLE_COMPRESSION
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* Addr A */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* Addr B */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* modulo mode */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* window size */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Lo  */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XID len Hi  */
id|dlc
(braket
id|i
op_increment
)braket
op_assign
id|DLC_MODEMPROT_DISABLE_V42_V42BIS
op_or
id|DLC_MODEMPROT_DISABLE_MNP_MNP5
op_or
id|DLC_MODEMPROT_DISABLE_V42_DETECT
op_or
id|DLC_MODEMPROT_DISABLE_COMPRESSION
suffix:semicolon
)brace
id|dlc
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|i
op_minus
l_int|1
)paren
suffix:semicolon
multiline_comment|/* HexDump (&quot;DLC&quot;, sizeof(dlc), &amp;dlc[0]); */
id|add_p
c_func
(paren
id|plci
comma
id|DLC
comma
id|dlc
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* send a request for the signaling entity                          */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|sig_req
r_void
id|sig_req
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|req
comma
id|byte
id|Id
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;adapter_disabled
)paren
(brace
r_return
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;sig_req(%x)&quot;
comma
id|req
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|REMOVE
)paren
id|plci-&gt;sig_remove_id
op_assign
id|plci-&gt;Sig.Id
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;req_in
op_eq
id|plci-&gt;req_in_start
)paren
(brace
id|plci-&gt;req_in
op_add_assign
l_int|2
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in_start
)braket
comma
id|plci-&gt;req_in
op_minus
id|plci-&gt;req_in_start
op_minus
l_int|2
)paren
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|Id
suffix:semicolon
multiline_comment|/* sig/nl flag */
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|req
suffix:semicolon
multiline_comment|/* request */
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* channel */
id|plci-&gt;req_in_start
op_assign
id|plci-&gt;req_in
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* send a request for the network layer entity                      */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|nl_req_ncci
r_void
id|nl_req_ncci
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|req
comma
id|byte
id|ncci
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;adapter_disabled
)paren
(brace
r_return
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;nl_req %02x %02x %02x&quot;
comma
id|plci-&gt;Id
comma
id|req
comma
id|ncci
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|req
op_eq
id|REMOVE
)paren
(brace
id|plci-&gt;nl_remove_id
op_assign
id|plci-&gt;NL.Id
suffix:semicolon
id|ncci_remove
(paren
id|plci
comma
l_int|0
comma
(paren
id|byte
)paren
(paren
id|ncci
op_ne
l_int|0
)paren
)paren
suffix:semicolon
id|ncci
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;req_in
op_eq
id|plci-&gt;req_in_start
)paren
(brace
id|plci-&gt;req_in
op_add_assign
l_int|2
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|PUT_WORD
c_func
(paren
op_amp
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in_start
)braket
comma
id|plci-&gt;req_in
op_minus
id|plci-&gt;req_in_start
op_minus
l_int|2
)paren
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* sig/nl flag */
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|req
suffix:semicolon
multiline_comment|/* request */
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_in
op_increment
)braket
op_assign
id|plci-&gt;adapter-&gt;ncci_ch
(braket
id|ncci
)braket
suffix:semicolon
multiline_comment|/* channel */
id|plci-&gt;req_in_start
op_assign
id|plci-&gt;req_in
suffix:semicolon
)brace
DECL|function|send_req
r_void
id|send_req
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|ENTITY
op_star
id|e
suffix:semicolon
id|word
id|l
suffix:semicolon
multiline_comment|/*  word i; */
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;adapter_disabled
)paren
(brace
r_return
suffix:semicolon
)brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
multiline_comment|/* if nothing to do, return */
r_if
c_cond
(paren
id|plci-&gt;req_in
op_eq
id|plci-&gt;req_out
)paren
(brace
r_return
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;send_req(in=%d,out=%d)&quot;
comma
id|plci-&gt;req_in
comma
id|plci-&gt;req_out
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;nl_req
op_logical_or
id|plci-&gt;sig_req
)paren
(brace
r_return
suffix:semicolon
)brace
id|l
op_assign
id|GET_WORD
c_func
(paren
op_amp
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
)braket
)paren
suffix:semicolon
id|plci-&gt;req_out
op_add_assign
l_int|2
suffix:semicolon
id|plci-&gt;XData
(braket
l_int|0
)braket
dot
id|P
op_assign
op_amp
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
)braket
suffix:semicolon
id|plci-&gt;req_out
op_add_assign
id|l
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
)braket
op_eq
l_int|1
)paren
(brace
id|e
op_assign
op_amp
id|plci-&gt;NL
suffix:semicolon
id|plci-&gt;req_out
op_increment
suffix:semicolon
id|e-&gt;Req
op_assign
id|plci-&gt;nl_req
op_assign
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_increment
)braket
suffix:semicolon
id|e-&gt;ReqCh
op_assign
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_increment
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|e-&gt;Id
op_amp
l_int|0x1f
)paren
)paren
(brace
id|e-&gt;Id
op_assign
id|NL_ID
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_minus
l_int|4
)braket
op_assign
id|CAI
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_minus
l_int|3
)braket
op_assign
l_int|1
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_minus
l_int|2
)braket
op_assign
(paren
id|plci-&gt;Sig.Id
op_eq
l_int|0xff
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci-&gt;Sig.Id
suffix:semicolon
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|l
op_add_assign
l_int|3
suffix:semicolon
id|plci-&gt;nl_global_req
op_assign
id|plci-&gt;nl_req
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;%x:NLREQ(%x:%x:%x)&quot;
comma
id|plci-&gt;adapter-&gt;Id
comma
id|e-&gt;Id
comma
id|e-&gt;Req
comma
id|e-&gt;ReqCh
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|e
op_assign
op_amp
id|plci-&gt;Sig
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
)braket
)paren
(brace
id|e-&gt;Id
op_assign
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
)braket
suffix:semicolon
)brace
id|plci-&gt;req_out
op_increment
suffix:semicolon
id|e-&gt;Req
op_assign
id|plci-&gt;sig_req
op_assign
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_increment
)braket
suffix:semicolon
id|e-&gt;ReqCh
op_assign
id|plci-&gt;RBuffer
(braket
id|plci-&gt;req_out
op_increment
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|e-&gt;Id
op_amp
l_int|0x1f
)paren
)paren
(brace
id|plci-&gt;sig_global_req
op_assign
id|plci-&gt;sig_req
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;%x:SIGREQ(%x:%x:%x)&quot;
comma
id|plci-&gt;adapter-&gt;Id
comma
id|e-&gt;Id
comma
id|e-&gt;Req
comma
id|e-&gt;ReqCh
)paren
)paren
suffix:semicolon
)brace
id|plci-&gt;XData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|l
suffix:semicolon
id|e-&gt;X
op_assign
id|plci-&gt;XData
suffix:semicolon
id|plci-&gt;adapter
op_member_access_from_pointer
id|request
c_func
(paren
id|e
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;send_ok&quot;
)paren
)paren
suffix:semicolon
)brace
DECL|function|send_data
r_void
id|send_data
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|DATA_B3_DESC
op_star
id|data
suffix:semicolon
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|word
id|ncci
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;nl_req
op_logical_and
id|plci-&gt;ncci_ring_list
)paren
(brace
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|ncci
op_assign
id|plci-&gt;ncci_ring_list
suffix:semicolon
r_do
(brace
id|ncci
op_assign
id|a-&gt;ncci_next
(braket
id|ncci
)braket
suffix:semicolon
id|ncci_ptr
op_assign
op_amp
(paren
id|a-&gt;ncci
(braket
id|ncci
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
op_logical_and
(paren
id|a-&gt;ch_flow_control
(braket
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
)braket
op_amp
id|N_OK_FC_PENDING
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|ncci_ptr-&gt;data_pending
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|CONNECTED
)paren
op_logical_or
(paren
id|a-&gt;ncci_state
(braket
id|ncci
)braket
op_eq
id|INC_ACT_PENDING
)paren
op_logical_or
(paren
id|plci-&gt;send_disc
op_eq
id|ncci
)paren
)paren
(brace
id|data
op_assign
op_amp
(paren
id|ncci_ptr-&gt;DBuffer
(braket
id|ncci_ptr-&gt;data_out
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_ASYNC_V42BIS
)paren
op_logical_or
(paren
id|plci-&gt;B2_prot
op_eq
id|B2_V120_BIT_TRANSPARENT
)paren
)paren
(brace
id|plci-&gt;NData
(braket
l_int|1
)braket
dot
id|P
op_assign
id|TransmitBufferGet
(paren
id|plci-&gt;appl
comma
id|data-&gt;P
)paren
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|1
)braket
dot
id|PLength
op_assign
id|data-&gt;Length
suffix:semicolon
r_if
c_cond
(paren
id|data-&gt;Flags
op_amp
l_int|0x10
)paren
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|v120_break_header
suffix:semicolon
r_else
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|v120_default_header
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|1
suffix:semicolon
id|plci-&gt;NL.XNum
op_assign
l_int|2
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
(paren
(paren
id|data-&gt;Flags
op_amp
l_int|0x07
)paren
op_lshift
l_int|4
op_or
id|N_DATA
)paren
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|TransmitBufferGet
(paren
id|plci-&gt;appl
comma
id|data-&gt;P
)paren
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|data-&gt;Length
suffix:semicolon
r_if
c_cond
(paren
id|data-&gt;Flags
op_amp
l_int|0x10
)paren
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|plci-&gt;B3_prot
op_eq
id|B3_RTP
)paren
op_logical_and
(paren
id|data-&gt;Flags
op_amp
l_int|0x01
)paren
)paren
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_BDATA
suffix:semicolon
r_else
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
(paren
(paren
id|data-&gt;Flags
op_amp
l_int|0x07
)paren
op_lshift
l_int|4
op_or
id|N_DATA
)paren
suffix:semicolon
)brace
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;%x:DREQ(%x:%x)&quot;
comma
id|a-&gt;Id
comma
id|plci-&gt;NL.Id
comma
id|plci-&gt;NL.Req
)paren
)paren
suffix:semicolon
id|plci-&gt;data_sent
op_assign
id|TRUE
suffix:semicolon
id|plci-&gt;data_sent_ptr
op_assign
id|data-&gt;P
suffix:semicolon
id|a
op_member_access_from_pointer
id|request
c_func
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
r_else
(brace
id|cleanup_ncci_data
(paren
id|plci
comma
id|ncci
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci-&gt;send_disc
op_eq
id|ncci
)paren
(brace
multiline_comment|/* dprintf(&quot;N_DISC&quot;); */
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
id|a-&gt;ncci_ch
(braket
id|ncci
)braket
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
id|N_DISC
suffix:semicolon
id|a
op_member_access_from_pointer
id|request
c_func
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
id|_DISCONNECT_B3_R
suffix:semicolon
id|plci-&gt;send_disc
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_while
c_loop
(paren
op_logical_neg
id|plci-&gt;nl_req
op_logical_and
(paren
id|ncci
op_ne
id|plci-&gt;ncci_ring_list
)paren
)paren
suffix:semicolon
id|plci-&gt;ncci_ring_list
op_assign
id|ncci
suffix:semicolon
)brace
)brace
DECL|function|listen_check
r_void
id|listen_check
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
id|word
id|i
comma
id|j
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|byte
id|activnotifiedcalls
op_assign
l_int|0
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;listen_check(%d,%d)&quot;
comma
id|a-&gt;listen_active
comma
id|a-&gt;max_listen
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|remove_started
op_logical_and
op_logical_neg
id|a-&gt;adapter_disabled
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|a-&gt;max_plci
suffix:semicolon
id|i
op_increment
)paren
(brace
id|plci
op_assign
op_amp
(paren
id|a-&gt;plci
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;notifiedcall
)paren
(brace
id|activnotifiedcalls
op_increment
suffix:semicolon
)brace
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;listen_check(%d)&quot;
comma
id|activnotifiedcalls
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|a-&gt;listen_active
suffix:semicolon
id|i
OL
(paren
(paren
id|word
)paren
(paren
id|a-&gt;max_listen
op_plus
id|activnotifiedcalls
)paren
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|a-&gt;listen_active
op_increment
suffix:semicolon
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;State
op_assign
id|LISTENING
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|OAD
comma
l_string|&quot;&bslash;x01&bslash;xfd&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|KEY
comma
l_string|&quot;&bslash;x04&bslash;x43&bslash;x41&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;xc0&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;xc4&quot;
)paren
suffix:semicolon
multiline_comment|/* support Dummy CR FAC + MWI + SpoofNotify */
id|add_p
c_func
(paren
id|plci
comma
id|SHIFT
op_or
l_int|6
comma
l_int|NULL
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|SIN
comma
l_string|&quot;&bslash;x02&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|LISTEN_SIG_ASSIGN_PEND
suffix:semicolon
multiline_comment|/* do indicate_req if OK  */
id|sig_req
c_func
(paren
id|plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* functions for all parameters sent in INDs                        */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|IndParse
r_void
id|IndParse
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|word
op_star
id|parms_id
comma
id|byte
op_star
op_star
id|parms
comma
id|byte
id|multiIEsize
)paren
(brace
id|word
id|ploc
suffix:semicolon
multiline_comment|/* points to current location within packet */
id|byte
id|w
suffix:semicolon
id|byte
id|wlen
suffix:semicolon
id|byte
id|codeset
comma
id|lock
suffix:semicolon
id|byte
op_star
id|in
suffix:semicolon
id|word
id|i
suffix:semicolon
id|word
id|code
suffix:semicolon
id|word
id|mIEindex
op_assign
l_int|0
suffix:semicolon
id|ploc
op_assign
l_int|0
suffix:semicolon
id|codeset
op_assign
l_int|0
suffix:semicolon
id|lock
op_assign
l_int|0
suffix:semicolon
id|in
op_assign
id|plci-&gt;Sig.RBuffer-&gt;P
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|parms_id
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* multiIE parms_id contains just the 1st */
(brace
multiline_comment|/* element but parms array is larger      */
id|parms
(braket
id|i
)braket
op_assign
(paren
id|byte
op_star
)paren
l_string|&quot;&quot;
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|multiIEsize
suffix:semicolon
id|i
op_increment
)paren
(brace
id|parms
(braket
id|i
)braket
op_assign
(paren
id|byte
op_star
)paren
l_string|&quot;&quot;
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ploc
OL
id|plci-&gt;Sig.RBuffer-&gt;length
op_minus
l_int|1
)paren
(brace
multiline_comment|/* read information element id and length                   */
id|w
op_assign
id|in
(braket
id|ploc
)braket
suffix:semicolon
r_if
c_cond
(paren
id|w
op_amp
l_int|0x80
)paren
(brace
multiline_comment|/*    w &amp;=0xf0; removed, cannot detect congestion levels */
multiline_comment|/*    upper 4 bit masked with w==SHIFT now               */
id|wlen
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|wlen
op_assign
(paren
id|byte
)paren
(paren
id|in
(braket
id|ploc
op_plus
l_int|1
)braket
op_plus
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/* check if length valid (not exceeding end of packet)      */
r_if
c_cond
(paren
(paren
id|ploc
op_plus
id|wlen
)paren
OG
l_int|270
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|lock
op_amp
l_int|0x80
)paren
(brace
id|lock
op_and_assign
l_int|0x7f
suffix:semicolon
)brace
r_else
id|codeset
op_assign
id|lock
suffix:semicolon
r_if
c_cond
(paren
(paren
id|w
op_amp
l_int|0xf0
)paren
op_eq
id|SHIFT
)paren
(brace
id|codeset
op_assign
id|in
(braket
id|ploc
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|codeset
op_amp
l_int|0x08
)paren
)paren
(brace
id|lock
op_assign
(paren
id|byte
)paren
(paren
id|codeset
op_amp
l_int|7
)paren
suffix:semicolon
)brace
id|codeset
op_and_assign
l_int|7
suffix:semicolon
id|lock
op_or_assign
l_int|0x80
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|w
op_eq
id|ESC
op_logical_and
id|wlen
op_ge
l_int|3
)paren
(brace
id|code
op_assign
id|in
(braket
id|ploc
op_plus
l_int|2
)braket
op_or
l_int|0x800
suffix:semicolon
)brace
r_else
id|code
op_assign
id|w
suffix:semicolon
id|code
op_or_assign
(paren
id|codeset
op_lshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|parms_id
(braket
l_int|0
)braket
op_plus
l_int|1
op_logical_and
id|parms_id
(braket
id|i
)braket
op_ne
id|code
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
OL
id|parms_id
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|multiIEsize
)paren
(brace
multiline_comment|/* with multiIEs use next field index,          */
id|mIEindex
op_assign
id|i
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* with normal IEs use same index like parms_id */
)brace
id|parms
(braket
id|mIEindex
)braket
op_assign
op_amp
id|in
(braket
id|ploc
op_plus
l_int|1
)braket
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;mIE[%d]=0x%x&quot;
comma
op_star
id|parms
(braket
id|mIEindex
)braket
comma
id|in
(braket
id|ploc
)braket
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|parms_id
(braket
id|i
)braket
op_eq
id|OAD
op_logical_or
id|parms_id
(braket
id|i
)braket
op_eq
id|CONN_NR
op_logical_or
id|parms_id
(braket
id|i
)braket
op_eq
id|CAD
)paren
(brace
r_if
c_cond
(paren
id|in
(braket
id|ploc
op_plus
l_int|2
)braket
op_amp
l_int|0x80
)paren
(brace
id|in
(braket
id|ploc
op_plus
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|in
(braket
id|ploc
op_plus
l_int|1
)braket
op_plus
l_int|1
)paren
suffix:semicolon
id|in
(braket
id|ploc
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|in
(braket
id|ploc
op_plus
l_int|2
)braket
op_amp
l_int|0x7f
)paren
suffix:semicolon
id|in
(braket
id|ploc
op_plus
l_int|2
)braket
op_assign
l_int|0x80
suffix:semicolon
id|parms
(braket
id|mIEindex
)braket
op_assign
op_amp
id|in
(braket
id|ploc
)braket
suffix:semicolon
)brace
)brace
id|mIEindex
op_increment
suffix:semicolon
multiline_comment|/* effects multiIEs only */
)brace
)brace
id|ploc
op_add_assign
(paren
id|wlen
op_plus
l_int|1
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* try to match a cip from received BC and HLC                      */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|ie_compare
id|byte
id|ie_compare
c_func
(paren
id|byte
op_star
id|ie1
comma
id|byte
op_star
id|ie2
)paren
(brace
id|word
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ie1
op_logical_or
op_logical_neg
id|ie2
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|ie1
(braket
l_int|0
)braket
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
id|word
)paren
(paren
id|ie1
(braket
l_int|0
)braket
op_plus
l_int|1
)paren
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|ie1
(braket
id|i
)braket
op_ne
id|ie2
(braket
id|i
)braket
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
r_return
id|TRUE
suffix:semicolon
)brace
DECL|function|find_cip
id|word
id|find_cip
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|byte
op_star
id|bc
comma
id|byte
op_star
id|hlc
)paren
(brace
id|word
id|i
suffix:semicolon
id|word
id|j
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|9
suffix:semicolon
id|i
op_logical_and
op_logical_neg
id|ie_compare
c_func
(paren
id|bc
comma
id|cip_bc
(braket
id|i
)braket
(braket
id|a-&gt;u_law
)braket
)paren
suffix:semicolon
id|i
op_decrement
)paren
(brace
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|16
suffix:semicolon
id|j
OL
l_int|29
op_logical_and
(paren
op_logical_neg
id|ie_compare
c_func
(paren
id|bc
comma
id|cip_bc
(braket
id|j
)braket
(braket
id|a-&gt;u_law
)braket
)paren
op_logical_or
op_logical_neg
id|ie_compare
c_func
(paren
id|hlc
comma
id|cip_hlc
(braket
id|j
)braket
)paren
)paren
suffix:semicolon
id|j
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
op_eq
l_int|29
)paren
(brace
r_return
id|i
suffix:semicolon
)brace
r_return
id|j
suffix:semicolon
)brace
DECL|function|AddInfo
r_static
id|byte
id|AddInfo
c_func
(paren
id|byte
op_star
op_star
id|add_i
comma
id|byte
op_star
op_star
id|fty_i
comma
id|byte
op_star
id|esc_chi
comma
id|byte
op_star
id|facility
)paren
(brace
id|byte
id|i
suffix:semicolon
id|byte
id|j
suffix:semicolon
id|byte
id|k
suffix:semicolon
id|byte
id|flen
suffix:semicolon
id|byte
id|len
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* facility is a nested structure */
multiline_comment|/* FTY can be more than once      */
r_if
c_cond
(paren
id|esc_chi
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|esc_chi
(braket
id|esc_chi
(braket
l_int|0
)braket
)braket
)paren
op_amp
l_int|0x7f
)paren
(brace
id|add_i
(braket
l_int|0
)braket
op_assign
(paren
id|byte
op_star
)paren
l_string|&quot;&bslash;x02&bslash;x02&bslash;x00&quot;
suffix:semicolon
multiline_comment|/* use neither b nor d channel */
)brace
r_else
(brace
id|add_i
(braket
l_int|0
)braket
op_assign
(paren
id|byte
op_star
)paren
l_string|&quot;&quot;
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|fty_i
(braket
l_int|0
)braket
(braket
l_int|0
)braket
)paren
(brace
id|add_i
(braket
l_int|3
)braket
op_assign
(paren
id|byte
op_star
)paren
l_string|&quot;&quot;
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* facility array found  */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|MAX_MULTI_IE
op_logical_and
id|fty_i
(braket
id|i
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;AddIFac[%d]&quot;
comma
id|fty_i
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|fty_i
(braket
id|i
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|len
op_add_assign
l_int|2
suffix:semicolon
id|flen
op_assign
id|fty_i
(braket
id|i
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|facility
(braket
id|j
op_increment
)braket
op_assign
l_int|0x1c
suffix:semicolon
multiline_comment|/* copy fac IE */
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
op_le
id|flen
suffix:semicolon
id|k
op_increment
comma
id|j
op_increment
)paren
(brace
id|facility
(braket
id|j
)braket
op_assign
id|fty_i
(braket
id|i
)braket
(braket
id|k
)braket
suffix:semicolon
multiline_comment|/*      dbug(1,dprintf(&quot;%x &quot;,facility[j])); */
)brace
)brace
id|facility
(braket
l_int|0
)braket
op_assign
id|len
suffix:semicolon
id|add_i
(braket
l_int|3
)braket
op_assign
id|facility
suffix:semicolon
)brace
multiline_comment|/*  dbug(1,dprintf(&quot;FacArrLen=%d &quot;,len)); */
id|len
op_assign
id|add_i
(braket
l_int|0
)braket
(braket
l_int|0
)braket
op_plus
id|add_i
(braket
l_int|1
)braket
(braket
l_int|0
)braket
op_plus
id|add_i
(braket
l_int|2
)braket
(braket
l_int|0
)braket
op_plus
id|add_i
(braket
l_int|3
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|len
op_add_assign
l_int|4
suffix:semicolon
multiline_comment|/* calculate length of all */
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* voice and codec features                                         */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|SetVoiceChannel
r_void
id|SetVoiceChannel
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|chi
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
id|byte
id|voice_chi
(braket
)braket
op_assign
l_string|&quot;&bslash;x02&bslash;x18&bslash;x01&quot;
suffix:semicolon
id|byte
id|channel
suffix:semicolon
id|channel
op_assign
id|chi
(braket
id|chi
(braket
l_int|0
)braket
)braket
op_amp
l_int|0x3
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ExtDevON(Ch=0x%x)&quot;
comma
id|channel
)paren
)paren
suffix:semicolon
id|voice_chi
(braket
l_int|2
)braket
op_assign
(paren
id|channel
)paren
ques
c_cond
id|channel
suffix:colon
l_int|1
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|FTY
comma
l_string|&quot;&bslash;x02&bslash;x01&bslash;x07&quot;
)paren
suffix:semicolon
multiline_comment|/* B On, default on 1 */
id|add_p
c_func
(paren
id|plci
comma
id|ESC
comma
id|voice_chi
)paren
suffix:semicolon
multiline_comment|/* Channel */
id|sig_req
c_func
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;AdvSignalPLCI
)paren
(brace
id|adv_voice_write_coefs
(paren
id|a-&gt;AdvSignalPLCI
comma
id|ADV_VOICE_WRITE_ACTIVATION
)paren
suffix:semicolon
)brace
)brace
DECL|function|VoiceChannelOff
r_void
id|VoiceChannelOff
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;ExtDevOFF&quot;
)paren
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|FTY
comma
l_string|&quot;&bslash;x02&bslash;x01&bslash;x08&quot;
)paren
suffix:semicolon
multiline_comment|/* B Off */
id|sig_req
c_func
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;AdvSignalPLCI
)paren
(brace
id|adv_voice_clear_config
(paren
id|plci-&gt;adapter-&gt;AdvSignalPLCI
)paren
suffix:semicolon
)brace
)brace
DECL|function|AdvCodecSupport
id|word
id|AdvCodecSupport
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|byte
id|hook_listen
)paren
(brace
id|word
id|j
suffix:semicolon
id|PLCI
op_star
id|splci
suffix:semicolon
multiline_comment|/* check if hardware supports handset with hook states (adv.codec) */
multiline_comment|/* or if just a on board codec is supported                        */
multiline_comment|/* the advanced codec plci is just for internal use                */
multiline_comment|/* diva Pro with on-board codec:                                   */
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|HANDSET
)paren
(brace
multiline_comment|/* new call, but hook states are already signalled */
r_if
c_cond
(paren
id|a-&gt;AdvCodecFLAG
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;AdvSignalAppl
op_ne
id|appl
op_logical_or
id|a-&gt;AdvSignalPLCI
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;AdvSigPlci=0x%x&quot;
comma
id|a-&gt;AdvSignalPLCI
)paren
)paren
suffix:semicolon
r_return
l_int|0x2001
suffix:semicolon
multiline_comment|/* codec in use by another application */
)brace
r_if
c_cond
(paren
id|plci
op_ne
l_int|0
)paren
(brace
id|a-&gt;AdvSignalPLCI
op_assign
id|plci
suffix:semicolon
id|plci-&gt;tel
op_assign
id|ADV_VOICE
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
multiline_comment|/* adv codec still used */
)brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|splci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|splci-&gt;tel
op_assign
id|CODEC_PERMANENT
suffix:semicolon
multiline_comment|/* hook_listen indicates if a facility_req with handset/hook support */
multiline_comment|/* was sent. Otherwise if just a call on an external device was made */
multiline_comment|/* the codec will be used but the hook info will be discarded (just  */
multiline_comment|/* the external controller is in use                                 */
r_if
c_cond
(paren
id|hook_listen
)paren
(brace
id|splci-&gt;State
op_assign
id|ADVANCED_VOICE_SIG
suffix:semicolon
)brace
r_else
(brace
id|splci-&gt;State
op_assign
id|ADVANCED_VOICE_NOSIG
suffix:semicolon
r_if
c_cond
(paren
id|plci
)paren
(brace
id|plci-&gt;spoofed_msg
op_assign
id|SPOOFING_REQUIRED
suffix:semicolon
)brace
multiline_comment|/* indicate D-ch connect if  */
)brace
multiline_comment|/* codec is connected OK     */
r_if
c_cond
(paren
id|plci
op_ne
l_int|0
)paren
(brace
id|a-&gt;AdvSignalPLCI
op_assign
id|plci
suffix:semicolon
id|plci-&gt;tel
op_assign
id|ADV_VOICE
suffix:semicolon
)brace
id|a-&gt;AdvSignalAppl
op_assign
id|appl
suffix:semicolon
id|a-&gt;AdvCodecFLAG
op_assign
id|TRUE
suffix:semicolon
id|a-&gt;AdvCodecPLCI
op_assign
id|splci
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x15&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|LLI
comma
l_string|&quot;&bslash;x01&bslash;x00&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|ESC
comma
l_string|&quot;&bslash;x02&bslash;x18&bslash;x00&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|splci-&gt;internal_command
op_assign
id|PERM_COD_ASSIGN
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Codec Assign&quot;
)paren
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|splci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|splci
)paren
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0x2001
suffix:semicolon
multiline_comment|/* wrong state, no more plcis */
)brace
)brace
r_else
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|ON_BOARD_CODEC
)paren
(brace
r_if
c_cond
(paren
id|hook_listen
)paren
(brace
r_return
l_int|0x300B
suffix:semicolon
)brace
multiline_comment|/* Facility not supported */
multiline_comment|/* no hook with SCOM      */
r_if
c_cond
(paren
id|plci
op_ne
l_int|0
)paren
(brace
id|plci-&gt;tel
op_assign
id|CODEC
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;S/SCOM codec&quot;
)paren
)paren
suffix:semicolon
multiline_comment|/* first time we use the scom-s codec we must shut down the internal   */
multiline_comment|/* handset application of the card. This can be done by an assign with */
multiline_comment|/* a cai with the 0x80 bit set. Assign return code is &squot;out of resource&squot;*/
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;scom_appl_disable
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|splci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|splci
comma
id|ASSIGN
comma
l_int|0xC0
)paren
suffix:semicolon
multiline_comment|/* 0xc0 is the TEL_ID */
id|send_req
c_func
(paren
id|splci
)paren
suffix:semicolon
id|a-&gt;scom_appl_disable
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0x2001
suffix:semicolon
multiline_comment|/* wrong state, no more plcis */
)brace
)brace
)brace
r_else
r_return
l_int|0x300B
suffix:semicolon
multiline_comment|/* Facility not supported */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|CodecIdCheck
r_void
id|CodecIdCheck
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;CodecIdCheck&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;AdvSignalPLCI
op_eq
id|plci
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;PLCI owns codec&quot;
)paren
)paren
suffix:semicolon
id|VoiceChannelOff
c_func
(paren
id|a-&gt;AdvCodecPLCI
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;AdvCodecPLCI-&gt;State
op_eq
id|ADVANCED_VOICE_NOSIG
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;remove temp codec PLCI&quot;
)paren
)paren
suffix:semicolon
id|plci_remove
c_func
(paren
id|a-&gt;AdvCodecPLCI
)paren
suffix:semicolon
id|a-&gt;AdvCodecFLAG
op_assign
l_int|0
suffix:semicolon
id|a-&gt;AdvCodecPLCI
op_assign
l_int|NULL
suffix:semicolon
id|a-&gt;AdvSignalAppl
op_assign
l_int|NULL
suffix:semicolon
)brace
id|a-&gt;AdvSignalPLCI
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/* -------------------------------------------------------------------&n;    Ask for physical address of card on PCI bus&n;   ------------------------------------------------------------------- */
DECL|function|diva_ask_for_xdi_sdram_bar
r_static
r_void
id|diva_ask_for_xdi_sdram_bar
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|IDI_SYNC_REQ
op_star
id|preq
)paren
(brace
id|a-&gt;sdram_bar
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|diva_xdi_extended_features
op_amp
id|DIVA_CAPI_XDI_PROVIDES_SDRAM_BAR
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
id|preq
suffix:semicolon
id|e-&gt;user
(braket
l_int|0
)braket
op_assign
id|a-&gt;Id
op_minus
l_int|1
suffix:semicolon
id|preq-&gt;xdi_sdram_bar.info.bar
op_assign
l_int|0
suffix:semicolon
id|preq-&gt;xdi_sdram_bar.Req
op_assign
l_int|0
suffix:semicolon
id|preq-&gt;xdi_sdram_bar.Rc
op_assign
id|IDI_SYNC_REQ_XDI_GET_ADAPTER_SDRAM_BAR
suffix:semicolon
(paren
op_star
(paren
id|a-&gt;request
)paren
)paren
(paren
id|e
)paren
suffix:semicolon
id|a-&gt;sdram_bar
op_assign
id|preq-&gt;xdi_sdram_bar.info.bar
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;A(%d) SDRAM BAR = %08x&quot;
comma
id|a-&gt;Id
comma
id|a-&gt;sdram_bar
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* -------------------------------------------------------------------&n;     Ask XDI about extended features&n;   ------------------------------------------------------------------- */
DECL|function|diva_get_extended_adapter_features
r_static
r_void
id|diva_get_extended_adapter_features
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
id|IDI_SYNC_REQ
op_star
id|preq
suffix:semicolon
r_char
id|buffer
(braket
(paren
(paren
r_sizeof
(paren
id|preq-&gt;xdi_extended_features
)paren
op_plus
l_int|4
)paren
OG
r_sizeof
(paren
id|ENTITY
)paren
)paren
ques
c_cond
(paren
r_sizeof
(paren
id|preq-&gt;xdi_extended_features
)paren
op_plus
l_int|4
)paren
suffix:colon
r_sizeof
(paren
id|ENTITY
)paren
)braket
suffix:semicolon
r_char
id|features
(braket
l_int|4
)braket
suffix:semicolon
id|preq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|buffer
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|diva_xdi_extended_features
)paren
(brace
id|ENTITY
op_star
id|e
op_assign
(paren
id|ENTITY
op_star
)paren
id|preq
suffix:semicolon
id|diva_xdi_extended_features
op_or_assign
l_int|0x80000000
suffix:semicolon
id|e-&gt;user
(braket
l_int|0
)braket
op_assign
id|a-&gt;Id
op_minus
l_int|1
suffix:semicolon
id|preq-&gt;xdi_extended_features.Req
op_assign
l_int|0
suffix:semicolon
id|preq-&gt;xdi_extended_features.Rc
op_assign
id|IDI_SYNC_REQ_XDI_GET_EXTENDED_FEATURES
suffix:semicolon
id|preq-&gt;xdi_extended_features.info.buffer_length_in_bytes
op_assign
r_sizeof
(paren
id|features
)paren
suffix:semicolon
id|preq-&gt;xdi_extended_features.info.features
op_assign
op_amp
id|features
(braket
l_int|0
)braket
suffix:semicolon
(paren
op_star
(paren
id|a-&gt;request
)paren
)paren
(paren
id|e
)paren
suffix:semicolon
r_if
c_cond
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURES_VALID
)paren
(brace
multiline_comment|/*&n;         Check features located in the byte &squot;0&squot;&n;         */
r_if
c_cond
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURE_CMA
)paren
(brace
id|diva_xdi_extended_features
op_or_assign
id|DIVA_CAPI_USE_CMA
suffix:semicolon
)brace
r_if
c_cond
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURE_RX_DMA
)paren
(brace
id|diva_xdi_extended_features
op_or_assign
id|DIVA_CAPI_XDI_PROVIDES_RX_DMA
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;XDI provides RxDMA&quot;
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURE_SDRAM_BAR
)paren
(brace
id|diva_xdi_extended_features
op_or_assign
id|DIVA_CAPI_XDI_PROVIDES_SDRAM_BAR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|features
(braket
l_int|0
)braket
op_amp
id|DIVA_XDI_EXTENDED_FEATURE_NO_CANCEL_RC
)paren
(brace
id|diva_xdi_extended_features
op_or_assign
id|DIVA_CAPI_XDI_PROVIDES_NO_CANCEL
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;XDI provides NO_CANCEL_RC feature&quot;
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
id|diva_ask_for_xdi_sdram_bar
(paren
id|a
comma
id|preq
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* automatic law                                                    */
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* called from OS specific part after init time to get the Law              */
multiline_comment|/* a-law (Euro) and u-law (us,japan) use different BCs in the Setup message */
DECL|function|AutomaticLaw
r_void
id|AutomaticLaw
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
id|word
id|j
suffix:semicolon
id|PLCI
op_star
id|splci
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;automatic_law
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|diva_get_extended_adapter_features
(paren
id|a
)paren
suffix:semicolon
id|splci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|a-&gt;automatic_lawPLCI
op_assign
id|splci
suffix:semicolon
id|a-&gt;automatic_law
op_assign
l_int|1
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|splci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|splci-&gt;internal_command
op_assign
id|USELAW_REQ
suffix:semicolon
id|splci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|splci-&gt;number
op_assign
l_int|0
suffix:semicolon
id|sig_req
c_func
(paren
id|splci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|splci
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* called from OS specific part if an application sends an Capi20Release */
DECL|function|CapiRelease
id|word
id|CapiRelease
c_func
(paren
id|word
id|Id
)paren
(brace
id|word
id|i
comma
id|j
comma
id|appls_found
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|APPL
op_star
id|this
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|Id
)paren
(brace
id|dbug
c_func
(paren
l_int|0
comma
id|dprintf
c_func
(paren
l_string|&quot;A: CapiRelease(Id==0)&quot;
)paren
)paren
suffix:semicolon
r_return
(paren
id|_WRONG_APPL_ID
)paren
suffix:semicolon
)brace
id|this
op_assign
op_amp
id|application
(braket
id|Id
op_minus
l_int|1
)braket
suffix:semicolon
multiline_comment|/* get application pointer */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|appls_found
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
)paren
multiline_comment|/* an application has been found        */
(brace
id|appls_found
op_increment
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_adapter
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* scan all adapters...    */
(brace
id|a
op_assign
op_amp
id|adapter
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;request
)paren
(brace
id|a-&gt;Info_Mask
(braket
id|Id
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;CIP_Mask
(braket
id|Id
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;Notification_Mask
(braket
id|Id
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;codec_listen
(braket
id|Id
op_minus
l_int|1
)braket
op_assign
l_int|NULL
suffix:semicolon
id|a-&gt;requested_options_table
(braket
id|Id
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|a-&gt;max_plci
suffix:semicolon
id|j
op_increment
)paren
multiline_comment|/* and all PLCIs connected */
(brace
multiline_comment|/* with this application   */
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
)braket
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Id
)paren
multiline_comment|/* if plci owns no application */
(brace
multiline_comment|/* it may be not jet connected */
r_if
c_cond
(paren
id|plci-&gt;State
op_eq
id|INC_CON_PENDING
op_logical_or
id|plci-&gt;State
op_eq
id|INC_CON_ALERT
)paren
(brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|Id
op_minus
l_int|1
)paren
)paren
)paren
(brace
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
id|sig_req
c_func
(paren
id|plci
comma
id|HANGUP
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|OUTG_DIS_PENDING
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|Id
op_minus
l_int|1
)paren
)paren
)paren
(brace
id|clear_c_ind_mask_bit
(paren
id|plci
comma
(paren
id|word
)paren
(paren
id|Id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;appl
)paren
(brace
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;appl
op_eq
id|this
)paren
(brace
id|plci-&gt;appl
op_assign
l_int|NULL
suffix:semicolon
id|plci_remove
c_func
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
)brace
)brace
)brace
id|listen_check
c_func
(paren
id|a
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;flag_dynamic_l1_down
)paren
(brace
r_if
c_cond
(paren
id|appls_found
op_eq
l_int|1
)paren
multiline_comment|/* last application does a capi release */
(brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
(brace
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|OAD
comma
l_string|&quot;&bslash;x01&bslash;xfd&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|SHIFT
op_or
l_int|6
comma
l_int|NULL
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|SIN
comma
l_string|&quot;&bslash;x02&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|REM_L1_SIG_ASSIGN_PEND
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|FTY
comma
l_string|&quot;&bslash;x02&bslash;xff&bslash;x06&quot;
)paren
suffix:semicolon
multiline_comment|/* l1 down */
id|sig_req
c_func
(paren
id|plci
comma
id|SIG_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|a-&gt;AdvSignalAppl
op_eq
id|this
)paren
(brace
id|this-&gt;NullCREnable
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;AdvCodecPLCI
)paren
(brace
id|plci_remove
c_func
(paren
id|a-&gt;AdvCodecPLCI
)paren
suffix:semicolon
id|a-&gt;AdvCodecPLCI-&gt;tel
op_assign
l_int|0
suffix:semicolon
id|a-&gt;AdvCodecPLCI-&gt;adv_nl
op_assign
l_int|0
suffix:semicolon
)brace
id|a-&gt;AdvSignalAppl
op_assign
l_int|NULL
suffix:semicolon
id|a-&gt;AdvSignalPLCI
op_assign
l_int|NULL
suffix:semicolon
id|a-&gt;AdvCodecFLAG
op_assign
l_int|0
suffix:semicolon
id|a-&gt;AdvCodecPLCI
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
)brace
id|this-&gt;Id
op_assign
l_int|0
suffix:semicolon
r_return
id|GOOD
suffix:semicolon
)brace
DECL|function|plci_remove_check
r_static
id|word
id|plci_remove_check
c_func
(paren
id|PLCI
op_star
id|plci
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;NL.Id
op_logical_and
id|c_ind_mask_empty
(paren
id|plci
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;Sig.Id
op_eq
l_int|0xff
)paren
(brace
id|plci-&gt;Sig.Id
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;Sig.Id
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;plci_remove_complete(%x)&quot;
comma
id|plci-&gt;Id
)paren
)paren
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;tel=0x%x,Sig=0x%x&quot;
comma
id|plci-&gt;tel
comma
id|plci-&gt;Sig.Id
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;Id
)paren
(brace
id|CodecIdCheck
c_func
(paren
id|plci-&gt;adapter
comma
id|plci
)paren
suffix:semicolon
id|clear_b1_config
(paren
id|plci
)paren
suffix:semicolon
id|ncci_remove
(paren
id|plci
comma
l_int|0
comma
id|FALSE
)paren
suffix:semicolon
id|plci_free_msg_in_queue
(paren
id|plci
)paren
suffix:semicolon
id|channel_flow_control_remove
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;Id
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;State
op_assign
id|IDLE
suffix:semicolon
id|plci-&gt;channels
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;appl
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;notifiedcall
op_assign
l_int|0
suffix:semicolon
)brace
id|listen_check
c_func
(paren
id|plci-&gt;adapter
)paren
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|plci_nl_busy
r_static
id|byte
id|plci_nl_busy
(paren
id|PLCI
op_star
id|plci
)paren
(brace
multiline_comment|/* only applicable for non-multiplexed protocols */
r_return
(paren
id|plci-&gt;nl_req
op_logical_or
(paren
id|plci-&gt;ncci_ring_list
op_logical_and
id|plci-&gt;adapter-&gt;ncci_ch
(braket
id|plci-&gt;ncci_ring_list
)braket
op_logical_and
(paren
id|plci-&gt;adapter-&gt;ch_flow_control
(braket
id|plci-&gt;adapter-&gt;ncci_ch
(braket
id|plci-&gt;ncci_ring_list
)braket
)braket
op_amp
id|N_OK_FC_PENDING
)paren
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* DTMF facilities                                                  */
multiline_comment|/*------------------------------------------------------------------*/
r_static
r_struct
(brace
DECL|member|send_mask
id|byte
id|send_mask
suffix:semicolon
DECL|member|listen_mask
id|byte
id|listen_mask
suffix:semicolon
DECL|member|character
id|byte
id|character
suffix:semicolon
DECL|member|code
id|byte
id|code
suffix:semicolon
DECL|variable|dtmf_digit_map
)brace
id|dtmf_digit_map
(braket
)braket
op_assign
(brace
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x23
comma
id|DTMF_DIGIT_TONE_CODE_HASHMARK
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x2a
comma
id|DTMF_DIGIT_TONE_CODE_STAR
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x30
comma
id|DTMF_DIGIT_TONE_CODE_0
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x31
comma
id|DTMF_DIGIT_TONE_CODE_1
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x32
comma
id|DTMF_DIGIT_TONE_CODE_2
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x33
comma
id|DTMF_DIGIT_TONE_CODE_3
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x34
comma
id|DTMF_DIGIT_TONE_CODE_4
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x35
comma
id|DTMF_DIGIT_TONE_CODE_5
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x36
comma
id|DTMF_DIGIT_TONE_CODE_6
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x37
comma
id|DTMF_DIGIT_TONE_CODE_7
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x38
comma
id|DTMF_DIGIT_TONE_CODE_8
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x39
comma
id|DTMF_DIGIT_TONE_CODE_9
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x41
comma
id|DTMF_DIGIT_TONE_CODE_A
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x42
comma
id|DTMF_DIGIT_TONE_CODE_B
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x43
comma
id|DTMF_DIGIT_TONE_CODE_C
)brace
comma
(brace
l_int|0x01
comma
l_int|0x01
comma
l_int|0x44
comma
id|DTMF_DIGIT_TONE_CODE_D
)brace
comma
(brace
l_int|0x01
comma
l_int|0x00
comma
l_int|0x61
comma
id|DTMF_DIGIT_TONE_CODE_A
)brace
comma
(brace
l_int|0x01
comma
l_int|0x00
comma
l_int|0x62
comma
id|DTMF_DIGIT_TONE_CODE_B
)brace
comma
(brace
l_int|0x01
comma
l_int|0x00
comma
l_int|0x63
comma
id|DTMF_DIGIT_TONE_CODE_C
)brace
comma
(brace
l_int|0x01
comma
l_int|0x00
comma
l_int|0x64
comma
id|DTMF_DIGIT_TONE_CODE_D
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x80
comma
id|DTMF_SIGNAL_NO_TONE
)brace
comma
(brace
l_int|0x00
comma
l_int|0x04
comma
l_int|0x81
comma
id|DTMF_SIGNAL_UNIDENTIFIED_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x82
comma
id|DTMF_SIGNAL_DIAL_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x83
comma
id|DTMF_SIGNAL_PABX_INTERNAL_DIAL_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x84
comma
id|DTMF_SIGNAL_SPECIAL_DIAL_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x85
comma
id|DTMF_SIGNAL_SECOND_DIAL_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x86
comma
id|DTMF_SIGNAL_RINGING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x87
comma
id|DTMF_SIGNAL_SPECIAL_RINGING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x88
comma
id|DTMF_SIGNAL_BUSY_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x89
comma
id|DTMF_SIGNAL_CONGESTION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8a
comma
id|DTMF_SIGNAL_SPECIAL_INFORMATION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8b
comma
id|DTMF_SIGNAL_COMFORT_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8c
comma
id|DTMF_SIGNAL_HOLD_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8d
comma
id|DTMF_SIGNAL_RECORD_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8e
comma
id|DTMF_SIGNAL_CALLER_WAITING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x8f
comma
id|DTMF_SIGNAL_CALL_WAITING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x90
comma
id|DTMF_SIGNAL_PAY_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x91
comma
id|DTMF_SIGNAL_POSITIVE_INDICATION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x92
comma
id|DTMF_SIGNAL_NEGATIVE_INDICATION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x93
comma
id|DTMF_SIGNAL_WARNING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x94
comma
id|DTMF_SIGNAL_INTRUSION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x95
comma
id|DTMF_SIGNAL_CALLING_CARD_SERVICE_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x96
comma
id|DTMF_SIGNAL_PAYPHONE_RECOGNITION_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x97
comma
id|DTMF_SIGNAL_CPE_ALERTING_SIGNAL
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0x98
comma
id|DTMF_SIGNAL_OFF_HOOK_WARNING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xbf
comma
id|DTMF_SIGNAL_INTERCEPT_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc0
comma
id|DTMF_SIGNAL_MODEM_CALLING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc1
comma
id|DTMF_SIGNAL_FAX_CALLING_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc2
comma
id|DTMF_SIGNAL_ANSWER_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc3
comma
id|DTMF_SIGNAL_REVERSED_ANSWER_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc4
comma
id|DTMF_SIGNAL_ANSAM_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc5
comma
id|DTMF_SIGNAL_REVERSED_ANSAM_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc6
comma
id|DTMF_SIGNAL_BELL103_ANSWER_TONE
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc7
comma
id|DTMF_SIGNAL_FAX_FLAGS
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xc8
comma
id|DTMF_SIGNAL_G2_FAX_GROUP_ID
)brace
comma
(brace
l_int|0x00
comma
l_int|0x04
comma
l_int|0xc9
comma
id|DTMF_SIGNAL_HUMAN_SPEECH
)brace
comma
(brace
l_int|0x04
comma
l_int|0x04
comma
l_int|0xca
comma
id|DTMF_SIGNAL_ANSWERING_MACHINE_390
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf1
comma
id|DTMF_MF_DIGIT_TONE_CODE_1
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf2
comma
id|DTMF_MF_DIGIT_TONE_CODE_2
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf3
comma
id|DTMF_MF_DIGIT_TONE_CODE_3
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf4
comma
id|DTMF_MF_DIGIT_TONE_CODE_4
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf5
comma
id|DTMF_MF_DIGIT_TONE_CODE_5
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf6
comma
id|DTMF_MF_DIGIT_TONE_CODE_6
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf7
comma
id|DTMF_MF_DIGIT_TONE_CODE_7
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf8
comma
id|DTMF_MF_DIGIT_TONE_CODE_8
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xf9
comma
id|DTMF_MF_DIGIT_TONE_CODE_9
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xfa
comma
id|DTMF_MF_DIGIT_TONE_CODE_0
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xfb
comma
id|DTMF_MF_DIGIT_TONE_CODE_K1
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xfc
comma
id|DTMF_MF_DIGIT_TONE_CODE_K2
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xfd
comma
id|DTMF_MF_DIGIT_TONE_CODE_KP
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xfe
comma
id|DTMF_MF_DIGIT_TONE_CODE_S1
)brace
comma
(brace
l_int|0x02
comma
l_int|0x02
comma
l_int|0xff
comma
id|DTMF_MF_DIGIT_TONE_CODE_ST
)brace
comma
)brace
suffix:semicolon
DECL|macro|DTMF_DIGIT_MAP_ENTRIES
mdefine_line|#define DTMF_DIGIT_MAP_ENTRIES (sizeof(dtmf_digit_map) / sizeof(dtmf_digit_map[0]))
DECL|function|dtmf_enable_receiver
r_static
r_void
id|dtmf_enable_receiver
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|enable_mask
)paren
(brace
id|word
id|min_digit_duration
comma
id|min_gap_duration
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_enable_receiver %02x&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|enable_mask
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|enable_mask
op_ne
l_int|0
)paren
(brace
id|min_digit_duration
op_assign
(paren
id|plci-&gt;dtmf_rec_pulse_ms
op_eq
l_int|0
)paren
ques
c_cond
l_int|40
suffix:colon
id|plci-&gt;dtmf_rec_pulse_ms
suffix:semicolon
id|min_gap_duration
op_assign
(paren
id|plci-&gt;dtmf_rec_pause_ms
op_eq
l_int|0
)paren
ques
c_cond
l_int|40
suffix:colon
id|plci-&gt;dtmf_rec_pause_ms
suffix:semicolon
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
op_assign
id|DTMF_UDATA_REQUEST_ENABLE_RECEIVER
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;internal_req_buffer
(braket
l_int|1
)braket
comma
id|min_digit_duration
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;internal_req_buffer
(braket
l_int|3
)braket
comma
id|min_gap_duration
)paren
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|5
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;internal_req_buffer
(braket
l_int|5
)braket
comma
id|INTERNAL_IND_BUFFER_SIZE
)paren
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_add_assign
l_int|2
suffix:semicolon
id|capidtmf_recv_enable
(paren
op_amp
(paren
id|plci-&gt;capidtmf_state
)paren
comma
id|min_digit_duration
comma
id|min_gap_duration
)paren
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
op_assign
id|DTMF_UDATA_REQUEST_DISABLE_RECEIVER
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|1
suffix:semicolon
id|capidtmf_recv_disable
(paren
op_amp
(paren
id|plci-&gt;capidtmf_state
)paren
)paren
suffix:semicolon
)brace
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
DECL|function|dtmf_send_digits
r_static
r_void
id|dtmf_send_digits
(paren
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|digit_buffer
comma
id|word
id|digit_count
)paren
(brace
id|word
id|w
comma
id|i
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_send_digits %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|digit_count
)paren
)paren
suffix:semicolon
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
op_assign
id|DTMF_UDATA_REQUEST_SEND_DIGITS
suffix:semicolon
id|w
op_assign
(paren
id|plci-&gt;dtmf_send_pulse_ms
op_eq
l_int|0
)paren
ques
c_cond
l_int|40
suffix:colon
id|plci-&gt;dtmf_send_pulse_ms
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;internal_req_buffer
(braket
l_int|1
)braket
comma
id|w
)paren
suffix:semicolon
id|w
op_assign
(paren
id|plci-&gt;dtmf_send_pause_ms
op_eq
l_int|0
)paren
ques
c_cond
l_int|40
suffix:colon
id|plci-&gt;dtmf_send_pause_ms
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|plci-&gt;internal_req_buffer
(braket
l_int|3
)braket
comma
id|w
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|digit_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|w
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|w
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
op_logical_and
(paren
id|digit_buffer
(braket
id|i
)braket
op_ne
id|dtmf_digit_map
(braket
id|w
)braket
dot
id|character
)paren
)paren
(brace
id|w
op_increment
suffix:semicolon
)brace
id|plci-&gt;internal_req_buffer
(braket
l_int|5
op_plus
id|i
)braket
op_assign
(paren
id|w
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
ques
c_cond
id|dtmf_digit_map
(braket
id|w
)braket
dot
id|code
suffix:colon
id|DTMF_DIGIT_TONE_CODE_STAR
suffix:semicolon
)brace
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|5
op_plus
id|digit_count
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
DECL|function|dtmf_rec_clear_config
r_static
r_void
id|dtmf_rec_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_rec_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;dtmf_rec_active
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_rec_pulse_ms
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_rec_pause_ms
op_assign
l_int|0
suffix:semicolon
id|capidtmf_init
(paren
op_amp
(paren
id|plci-&gt;capidtmf_state
)paren
comma
id|plci-&gt;adapter-&gt;u_law
)paren
suffix:semicolon
)brace
DECL|function|dtmf_send_clear_config
r_static
r_void
id|dtmf_send_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_send_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;dtmf_send_requests
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_send_pulse_ms
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_send_pause_ms
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|dtmf_prepare_switch
r_static
r_void
id|dtmf_prepare_switch
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_prepare_switch&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_while
c_loop
(paren
id|plci-&gt;dtmf_send_requests
op_ne
l_int|0
)paren
id|dtmf_confirmation
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
DECL|function|dtmf_save_config
r_static
id|word
id|dtmf_save_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_save_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|dtmf_restore_config
r_static
id|word
id|dtmf_restore_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_restore_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_DTMFR
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_RESTORE_DTMF_1
suffix:colon
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dtmf_enable_receiver
(paren
id|plci
comma
id|plci-&gt;dtmf_rec_active
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_DTMF_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Reenable DTMF receiver failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
DECL|function|dtmf_command
r_static
r_void
id|dtmf_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|internal_command
comma
id|Info
suffix:semicolon
id|byte
id|mask
suffix:semicolon
id|byte
id|result
(braket
l_int|4
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_command %02x %04x %04x %d %d %d %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
comma
id|plci-&gt;dtmf_cmd
comma
id|plci-&gt;dtmf_rec_pulse_ms
comma
id|plci-&gt;dtmf_rec_pause_ms
comma
id|plci-&gt;dtmf_send_pulse_ms
comma
id|plci-&gt;dtmf_send_pause_ms
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_SUCCESS
)paren
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
id|mask
op_assign
l_int|0x01
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;dtmf_cmd
)paren
(brace
r_case
id|DTMF_LISTEN_TONE_START
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_LISTEN_MF_START
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_LISTEN_START
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_or
id|B1_FACILITY_DTMFR
)paren
comma
id|DTMF_COMMAND_1
)paren
suffix:semicolon
r_case
id|DTMF_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Load DTMF failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_case
id|DTMF_COMMAND_2
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|DTMF_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|DTMF_COMMAND_3
suffix:semicolon
id|dtmf_enable_receiver
(paren
id|plci
comma
(paren
id|byte
)paren
(paren
id|plci-&gt;dtmf_rec_active
op_or
id|mask
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|DTMF_COMMAND_3
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Enable DTMF receiver failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;tone_last_indication_code
op_assign
id|DTMF_SIGNAL_NO_TONE
suffix:semicolon
id|plci-&gt;dtmf_rec_active
op_or_assign
id|mask
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DTMF_LISTEN_TONE_STOP
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_LISTEN_MF_STOP
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_LISTEN_STOP
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;dtmf_rec_active
op_and_assign
op_complement
id|mask
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;dtmf_rec_active
)paren
r_break
suffix:semicolon
multiline_comment|/*&n;    case DTMF_COMMAND_1:&n;      if (plci-&gt;dtmf_rec_active)&n;      {&n;        if (plci_nl_busy (plci))&n;        {&n;          plci-&gt;internal_command = DTMF_COMMAND_1;&n;          return;&n;        }&n;        plci-&gt;dtmf_rec_active &amp;= ~mask;&n;        plci-&gt;internal_command = DTMF_COMMAND_2;&n;        dtmf_enable_receiver (plci, FALSE);&n;        return;&n;      }&n;      Rc = OK;&n;    case DTMF_COMMAND_2:&n;      if ((Rc != OK) &amp;&amp; (Rc != OK_FC))&n;      {&n;        dbug (1, dprintf (&quot;[%06lx] %s,%d: Disable DTMF receiver failed %02x&quot;,&n;          UnMapId (Id), (char far *)(FILE_), __LINE__, Rc));&n;        Info = _FACILITY_NOT_SUPPORTED;&n;        break;&n;      }&n;*/
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_amp
op_complement
(paren
id|B1_FACILITY_DTMFX
op_or
id|B1_FACILITY_DTMFR
)paren
)paren
comma
id|DTMF_COMMAND_3
)paren
suffix:semicolon
r_case
id|DTMF_COMMAND_3
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Unload DTMF failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|DTMF_SEND_TONE
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_SEND_MF
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_DIGITS_SEND
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_or
(paren
(paren
id|plci-&gt;dtmf_parameter_length
op_ne
l_int|0
)paren
ques
c_cond
id|B1_FACILITY_DTMFX
op_or
id|B1_FACILITY_DTMFR
suffix:colon
id|B1_FACILITY_DTMFX
)paren
)paren
comma
id|DTMF_COMMAND_1
)paren
suffix:semicolon
r_case
id|DTMF_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Load DTMF failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_case
id|DTMF_COMMAND_2
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|DTMF_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;dtmf_msg_number_queue
(braket
(paren
id|plci-&gt;dtmf_send_requests
)paren
op_increment
)braket
op_assign
id|plci-&gt;number
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|DTMF_COMMAND_3
suffix:semicolon
id|dtmf_send_digits
(paren
id|plci
comma
op_amp
id|plci-&gt;saved_msg.parms
(braket
l_int|3
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|plci-&gt;saved_msg.parms
(braket
l_int|3
)braket
dot
id|length
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|DTMF_COMMAND_3
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Send DTMF digits failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;dtmf_send_requests
op_ne
l_int|0
)paren
(paren
id|plci-&gt;dtmf_send_requests
)paren
op_decrement
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
id|SELECTOR_DTMF
comma
id|result
)paren
suffix:semicolon
)brace
DECL|function|dtmf_request
r_static
id|byte
id|dtmf_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|byte
id|mask
suffix:semicolon
id|API_PARSE
id|dtmf_parms
(braket
l_int|5
)braket
suffix:semicolon
id|byte
id|result
(braket
l_int|40
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_request&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_SUCCESS
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;profile.Global_Options
op_amp
id|GL_DTMF_SUPPORTED
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Facility not supported&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;w&quot;
comma
id|dtmf_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|DTMF_GET_SUPPORTED_DETECT_CODES
)paren
op_logical_or
(paren
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|DTMF_GET_SUPPORTED_SEND_CODES
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|a-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: DTMF unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_UNKNOWN_REQUEST
)paren
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
id|result
(braket
l_int|4
op_plus
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|DTMF_GET_SUPPORTED_DETECT_CODES
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DTMF_DIGIT_MAP_ENTRIES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|listen_mask
op_ne
l_int|0
)paren
id|result
(braket
l_int|4
op_plus
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|character
op_rshift
l_int|3
)paren
)braket
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|character
op_amp
l_int|0x7
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DTMF_DIGIT_MAP_ENTRIES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|send_mask
op_ne
l_int|0
)paren
id|result
(braket
l_int|4
op_plus
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|character
op_rshift
l_int|3
)paren
)braket
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|dtmf_digit_map
(braket
id|i
)braket
dot
id|character
op_amp
l_int|0x7
)paren
)paren
suffix:semicolon
)brace
)brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|3
op_plus
l_int|32
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|32
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|plci
op_eq
l_int|NULL
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong PLCI&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;State
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong state&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_cmd
op_assign
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|mask
op_assign
l_int|0x01
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;dtmf_cmd
)paren
(brace
r_case
id|DTMF_LISTEN_TONE_START
suffix:colon
r_case
id|DTMF_LISTEN_TONE_STOP
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_LISTEN_MF_START
suffix:colon
r_case
id|DTMF_LISTEN_MF_STOP
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: DTMF unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_UNKNOWN_REQUEST
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|DTMF_LISTEN_START
suffix:colon
r_case
id|DTMF_LISTEN_STOP
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_HARDDTMF
)paren
op_logical_and
op_logical_neg
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_RECEIVE
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Facility not supported&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mask
op_amp
id|DTMF_LISTEN_ACTIVE_FLAG
)paren
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;wwws&quot;
comma
id|dtmf_parms
)paren
)paren
(brace
id|plci-&gt;dtmf_rec_pulse_ms
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;dtmf_rec_pause_ms
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;dtmf_rec_pulse_ms
op_assign
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;dtmf_rec_pause_ms
op_assign
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
)brace
)brace
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|dtmf_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|DTMF_SEND_TONE
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_case
id|DTMF_SEND_MF
suffix:colon
id|mask
op_lshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
op_or
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|appl-&gt;Id
op_minus
l_int|1
)braket
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: DTMF unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_UNKNOWN_REQUEST
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|DTMF_DIGITS_SEND
suffix:colon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;wwws&quot;
comma
id|dtmf_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mask
op_amp
id|DTMF_LISTEN_ACTIVE_FLAG
)paren
(brace
id|plci-&gt;dtmf_send_pulse_ms
op_assign
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;dtmf_send_pause_ms
op_assign
id|GET_WORD
(paren
id|dtmf_parms
(braket
l_int|2
)braket
dot
id|info
)paren
suffix:semicolon
)brace
id|i
op_assign
l_int|0
suffix:semicolon
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|i
OL
id|dtmf_parms
(braket
l_int|3
)braket
dot
id|length
)paren
op_logical_and
(paren
id|j
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
)paren
(brace
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|j
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
op_logical_and
(paren
(paren
id|dtmf_parms
(braket
l_int|3
)braket
dot
id|info
(braket
id|i
op_plus
l_int|1
)braket
op_ne
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|character
)paren
op_logical_or
(paren
(paren
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|send_mask
op_amp
id|mask
)paren
op_eq
l_int|0
)paren
)paren
)paren
(brace
id|j
op_increment
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
op_eq
id|DTMF_DIGIT_MAP_ENTRIES
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Incorrect DTMF digit %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|dtmf_parms
(braket
l_int|3
)braket
dot
id|info
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_INCORRECT_DIGIT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;dtmf_send_requests
op_ge
r_sizeof
(paren
id|plci-&gt;dtmf_msg_number_queue
)paren
op_div
r_sizeof
(paren
id|plci-&gt;dtmf_msg_number_queue
(braket
l_int|0
)braket
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: DTMF request overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|api_save_msg
(paren
id|dtmf_parms
comma
l_string|&quot;wwws&quot;
comma
op_amp
id|plci-&gt;saved_msg
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|dtmf_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_default
suffix:colon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: DTMF unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;dtmf_cmd
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_UNKNOWN_REQUEST
)paren
suffix:semicolon
)brace
)brace
)brace
id|sendf
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
id|SELECTOR_DTMF
comma
id|result
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
DECL|function|dtmf_confirmation
r_static
r_void
id|dtmf_confirmation
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|i
suffix:semicolon
id|byte
id|result
(braket
l_int|4
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_confirmation&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|DTMF_SUCCESS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;dtmf_send_requests
op_ne
l_int|0
)paren
(brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|plci-&gt;dtmf_msg_number_queue
(braket
l_int|0
)braket
comma
l_string|&quot;wws&quot;
comma
id|GOOD
comma
id|SELECTOR_DTMF
comma
id|result
)paren
suffix:semicolon
(paren
id|plci-&gt;dtmf_send_requests
)paren
op_decrement
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|plci-&gt;dtmf_send_requests
suffix:semicolon
id|i
op_increment
)paren
id|plci-&gt;dtmf_msg_number_queue
(braket
id|i
)braket
op_assign
id|plci-&gt;dtmf_msg_number_queue
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
)brace
)brace
DECL|function|dtmf_indication
r_static
r_void
id|dtmf_indication
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
(brace
id|word
id|i
comma
id|j
comma
id|n
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_indication&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|n
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_increment
)paren
(brace
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|j
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
op_logical_and
(paren
(paren
id|msg
(braket
id|i
)braket
op_ne
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|code
)paren
op_logical_or
(paren
(paren
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|listen_mask
op_amp
id|plci-&gt;dtmf_rec_active
)paren
op_eq
l_int|0
)paren
)paren
)paren
(brace
id|j
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
OL
id|DTMF_DIGIT_MAP_ENTRIES
)paren
(brace
r_if
c_cond
(paren
(paren
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|listen_mask
op_amp
id|DTMF_TONE_LISTEN_ACTIVE_FLAG
)paren
op_logical_and
(paren
id|plci-&gt;tone_last_indication_code
op_eq
id|DTMF_SIGNAL_NO_TONE
)paren
op_logical_and
(paren
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|character
op_ne
id|DTMF_SIGNAL_UNIDENTIFIED_TONE
)paren
)paren
(brace
r_if
c_cond
(paren
id|n
op_plus
l_int|1
op_eq
id|i
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
id|length
suffix:semicolon
id|i
OG
id|n
op_plus
l_int|1
suffix:semicolon
id|i
op_decrement
)paren
id|msg
(braket
id|i
)braket
op_assign
id|msg
(braket
id|i
op_minus
l_int|1
)braket
suffix:semicolon
id|length
op_increment
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|msg
(braket
op_increment
id|n
)braket
op_assign
id|DTMF_SIGNAL_UNIDENTIFIED_TONE
suffix:semicolon
)brace
id|plci-&gt;tone_last_indication_code
op_assign
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|character
suffix:semicolon
id|msg
(braket
op_increment
id|n
)braket
op_assign
id|dtmf_digit_map
(braket
id|j
)braket
dot
id|character
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|n
op_ne
l_int|0
)paren
(brace
id|msg
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
id|n
suffix:semicolon
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;wS&quot;
comma
id|SELECTOR_DTMF
comma
id|msg
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* DTMF parameters                                                  */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|dtmf_parameter_write
r_static
r_void
id|dtmf_parameter_write
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
suffix:semicolon
id|byte
id|parameter_buffer
(braket
id|DTMF_PARAMETER_BUFFER_SIZE
op_plus
l_int|2
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_parameter_write&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|parameter_buffer
(braket
l_int|0
)braket
op_assign
id|plci-&gt;dtmf_parameter_length
op_plus
l_int|1
suffix:semicolon
id|parameter_buffer
(braket
l_int|1
)braket
op_assign
id|DSP_CTRL_SET_DTMF_PARAMETERS
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|plci-&gt;dtmf_parameter_length
suffix:semicolon
id|i
op_increment
)paren
id|parameter_buffer
(braket
l_int|2
op_plus
id|i
)braket
op_assign
id|plci-&gt;dtmf_parameter_buffer
(braket
id|i
)braket
suffix:semicolon
id|add_p
(paren
id|plci
comma
id|FTY
comma
id|parameter_buffer
)paren
suffix:semicolon
id|sig_req
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
)brace
DECL|function|dtmf_parameter_clear_config
r_static
r_void
id|dtmf_parameter_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_parameter_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;dtmf_parameter_length
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|dtmf_parameter_prepare_switch
r_static
r_void
id|dtmf_parameter_prepare_switch
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_parameter_prepare_switch&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
)brace
DECL|function|dtmf_parameter_save_config
r_static
id|word
id|dtmf_parameter_save_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_parameter_save_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|dtmf_parameter_restore_config
r_static
id|word
id|dtmf_parameter_restore_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: dtmf_parameter_restore_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_DTMFR
)paren
op_logical_and
(paren
id|plci-&gt;dtmf_parameter_length
op_ne
l_int|0
)paren
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_RESTORE_DTMF_PARAMETER_1
suffix:colon
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_PARAMETER_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dtmf_parameter_write
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_PARAMETER_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_DTMF_PARAMETER_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Restore DTMF parameters failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Line interconnect facilities                                     */
multiline_comment|/*------------------------------------------------------------------*/
DECL|variable|li_config_table
id|LI_CONFIG
op_star
id|li_config_table
suffix:semicolon
DECL|variable|li_total_channels
id|word
id|li_total_channels
suffix:semicolon
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* translate a CHI information element to a channel number          */
multiline_comment|/* returns 0xff - any channel                                       */
multiline_comment|/*         0xfe - chi wrong coding                                  */
multiline_comment|/*         0xfd - D-channel                                         */
multiline_comment|/*         0x00 - no channel                                        */
multiline_comment|/*         else channel number / PRI: timeslot                      */
multiline_comment|/* if channels is provided we accept more than one channel.         */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|chi_to_channel
r_static
id|byte
id|chi_to_channel
(paren
id|byte
op_star
id|chi
comma
id|dword
op_star
id|pchannelmap
)paren
(brace
r_int
id|p
suffix:semicolon
r_int
id|i
suffix:semicolon
id|dword
id|map
suffix:semicolon
id|byte
id|excl
suffix:semicolon
id|byte
id|ofs
suffix:semicolon
id|byte
id|ch
suffix:semicolon
r_if
c_cond
(paren
id|pchannelmap
)paren
op_star
id|pchannelmap
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|chi
(braket
l_int|0
)braket
)paren
(brace
r_return
l_int|0xff
suffix:semicolon
)brace
id|excl
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|chi
(braket
l_int|1
)braket
op_amp
l_int|0x20
)paren
(brace
r_if
c_cond
(paren
id|chi
(braket
l_int|0
)braket
op_eq
l_int|1
op_logical_and
id|chi
(braket
l_int|1
)braket
op_eq
l_int|0xac
)paren
(brace
r_return
l_int|0xfd
suffix:semicolon
)brace
multiline_comment|/* exclusive d-channel */
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|chi
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_eq
id|chi
(braket
l_int|0
)braket
op_logical_or
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|chi
(braket
l_int|1
)braket
op_or
l_int|0xc8
)paren
op_ne
l_int|0xe9
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
r_if
c_cond
(paren
id|chi
(braket
l_int|1
)braket
op_amp
l_int|0x08
)paren
(brace
id|excl
op_assign
l_int|0x40
suffix:semicolon
)brace
multiline_comment|/* int. id present */
r_if
c_cond
(paren
id|chi
(braket
l_int|1
)braket
op_amp
l_int|0x40
)paren
(brace
id|p
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|p
suffix:semicolon
id|i
OL
id|chi
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_eq
id|chi
(braket
l_int|0
)braket
op_logical_or
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
)brace
multiline_comment|/* coding standard, Number/Map, Channel Type */
id|p
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|p
suffix:semicolon
id|i
OL
id|chi
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_eq
id|chi
(braket
l_int|0
)braket
op_logical_or
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|chi
(braket
id|p
)braket
op_or
l_int|0xd0
)paren
op_ne
l_int|0xd3
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
multiline_comment|/* Number/Map */
r_if
c_cond
(paren
id|chi
(braket
id|p
)braket
op_amp
l_int|0x10
)paren
(brace
multiline_comment|/* map */
r_if
c_cond
(paren
(paren
id|chi
(braket
l_int|0
)braket
op_minus
id|p
)paren
op_eq
l_int|4
)paren
(brace
id|ofs
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|chi
(braket
l_int|0
)braket
op_minus
id|p
)paren
op_eq
l_int|3
)paren
(brace
id|ofs
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0xfe
suffix:semicolon
id|ch
op_assign
l_int|0
suffix:semicolon
id|map
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
op_logical_and
id|p
OL
id|chi
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|p
op_increment
suffix:semicolon
id|ch
op_add_assign
l_int|8
suffix:semicolon
id|map
op_lshift_assign
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|chi
(braket
id|p
)braket
)paren
(brace
r_for
c_loop
(paren
id|ch
op_assign
l_int|0
suffix:semicolon
op_logical_neg
(paren
id|chi
(braket
id|p
)braket
op_amp
(paren
l_int|1
op_lshift
id|ch
)paren
)paren
suffix:semicolon
id|ch
op_increment
)paren
suffix:semicolon
id|map
op_or_assign
id|chi
(braket
id|p
)braket
suffix:semicolon
)brace
)brace
id|ch
op_add_assign
id|ofs
suffix:semicolon
id|map
op_lshift_assign
id|ofs
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* number */
id|p
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
id|ch
op_assign
id|chi
(braket
id|p
)braket
op_amp
l_int|0x3f
suffix:semicolon
r_if
c_cond
(paren
id|pchannelmap
)paren
(brace
r_if
c_cond
(paren
(paren
id|byte
)paren
(paren
id|chi
(braket
l_int|0
)braket
op_minus
id|p
)paren
OG
l_int|30
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
id|map
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|p
suffix:semicolon
id|i
op_le
id|chi
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x7f
)paren
OG
l_int|31
)paren
r_return
l_int|0xfe
suffix:semicolon
id|map
op_or_assign
(paren
l_int|1L
op_lshift
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x7f
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|p
op_ne
id|chi
(braket
l_int|0
)braket
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch
OG
l_int|31
)paren
r_return
l_int|0xfe
suffix:semicolon
id|map
op_assign
(paren
l_int|1L
op_lshift
id|ch
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|chi
(braket
id|p
)braket
op_amp
l_int|0x40
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pchannelmap
)paren
op_star
id|pchannelmap
op_assign
id|map
suffix:semicolon
r_else
r_if
c_cond
(paren
id|map
op_ne
(paren
(paren
id|dword
)paren
(paren
l_int|1L
op_lshift
id|ch
)paren
)paren
)paren
r_return
l_int|0xfe
suffix:semicolon
r_return
(paren
id|byte
)paren
(paren
id|excl
op_or
id|ch
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* not PRI */
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|chi
(braket
l_int|0
)braket
op_logical_and
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
op_ne
id|chi
(braket
l_int|0
)braket
op_logical_or
op_logical_neg
(paren
id|chi
(braket
id|i
)braket
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0xfe
suffix:semicolon
)brace
r_if
c_cond
(paren
id|chi
(braket
l_int|1
)braket
op_amp
l_int|0x08
)paren
(brace
id|excl
op_assign
l_int|0x40
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|chi
(braket
l_int|1
)braket
op_or
l_int|0x98
)paren
(brace
r_case
l_int|0x98
suffix:colon
r_return
l_int|0
suffix:semicolon
r_case
l_int|0x99
suffix:colon
r_if
c_cond
(paren
id|pchannelmap
)paren
op_star
id|pchannelmap
op_assign
l_int|2
suffix:semicolon
r_return
id|excl
op_or
l_int|1
suffix:semicolon
r_case
l_int|0x9a
suffix:colon
r_if
c_cond
(paren
id|pchannelmap
)paren
op_star
id|pchannelmap
op_assign
l_int|4
suffix:semicolon
r_return
id|excl
op_or
l_int|2
suffix:semicolon
r_case
l_int|0x9b
suffix:colon
r_return
l_int|0xff
suffix:semicolon
r_case
l_int|0x9c
suffix:colon
r_return
l_int|0xfd
suffix:semicolon
multiline_comment|/* d-ch */
r_default
suffix:colon
r_return
l_int|0xfe
suffix:semicolon
)brace
)brace
)brace
DECL|function|mixer_set_bchannel_id_esc
r_static
r_void
id|mixer_set_bchannel_id_esc
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|bchannel_id
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|PLCI
op_star
id|splci
suffix:semicolon
id|byte
id|old_id
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|old_id
op_assign
id|plci-&gt;li_bchannel_id
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;li_pri
)paren
(brace
r_if
c_cond
(paren
(paren
id|old_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
(paren
id|bchannel_id
op_amp
l_int|0x1f
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
(paren
id|bchannel_id
op_amp
l_int|0x03
)paren
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|bchannel_id
op_amp
l_int|0x03
)paren
op_eq
l_int|2
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|old_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
id|bchannel_id
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;AdvSignalPLCI
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI
op_ne
id|plci
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI-&gt;tel
op_eq
id|ADV_VOICE
)paren
)paren
(brace
id|splci
op_assign
id|a-&gt;AdvSignalPLCI
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|splci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|splci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|splci
)paren
)paren
(brace
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|splci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
)brace
id|splci-&gt;li_bchannel_id
op_assign
l_int|3
op_minus
id|plci-&gt;li_bchannel_id
suffix:semicolon
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
)braket
dot
id|plci
op_assign
id|splci
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_set_bchannel_id_esc %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|splci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|splci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|splci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|old_id
op_eq
l_int|0
)paren
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
)brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_set_bchannel_id_esc %d %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|bchannel_id
comma
id|plci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
DECL|function|mixer_set_bchannel_id
r_static
r_void
id|mixer_set_bchannel_id
(paren
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|chi
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|PLCI
op_star
id|splci
suffix:semicolon
id|byte
id|ch
comma
id|old_id
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|old_id
op_assign
id|plci-&gt;li_bchannel_id
suffix:semicolon
id|ch
op_assign
id|chi_to_channel
(paren
id|chi
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ch
op_amp
l_int|0x80
)paren
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;li_pri
)paren
(brace
r_if
c_cond
(paren
(paren
id|old_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
(paren
id|ch
op_amp
l_int|0x1f
)paren
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
(paren
id|ch
op_amp
l_int|0x1f
)paren
op_eq
l_int|1
)paren
op_logical_or
(paren
(paren
id|ch
op_amp
l_int|0x1f
)paren
op_eq
l_int|2
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|old_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|old_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
id|ch
op_amp
l_int|0x1f
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;AdvSignalPLCI
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI
op_ne
id|plci
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI-&gt;tel
op_eq
id|ADV_VOICE
)paren
)paren
(brace
id|splci
op_assign
id|a-&gt;AdvSignalPLCI
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|splci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|splci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|splci
)paren
)paren
(brace
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|splci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
)brace
id|splci-&gt;li_bchannel_id
op_assign
l_int|3
op_minus
id|plci-&gt;li_bchannel_id
suffix:semicolon
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
)braket
dot
id|plci
op_assign
id|splci
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_set_bchannel_id %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|splci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|splci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|splci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
(paren
id|old_id
op_eq
l_int|0
)paren
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
)brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_set_bchannel_id %02x %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|ch
comma
id|plci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
DECL|macro|MIXER_MAX_DUMP_CHANNELS
mdefine_line|#define MIXER_MAX_DUMP_CHANNELS 34
DECL|function|mixer_calculate_coefs
r_static
r_void
id|mixer_calculate_coefs
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
)paren
(brace
r_static
r_char
id|hex_digit_table
(braket
l_int|0x10
)braket
op_assign
(brace
l_char|&squot;0&squot;
comma
l_char|&squot;1&squot;
comma
l_char|&squot;2&squot;
comma
l_char|&squot;3&squot;
comma
l_char|&squot;4&squot;
comma
l_char|&squot;5&squot;
comma
l_char|&squot;6&squot;
comma
l_char|&squot;7&squot;
comma
l_char|&squot;8&squot;
comma
l_char|&squot;9&squot;
comma
l_char|&squot;a&squot;
comma
l_char|&squot;b&squot;
comma
l_char|&squot;c&squot;
comma
l_char|&squot;d&squot;
comma
l_char|&squot;e&squot;
comma
l_char|&squot;f&squot;
)brace
suffix:semicolon
id|word
id|n
comma
id|i
comma
id|j
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_char
id|hex_line
(braket
l_int|2
op_star
id|MIXER_MAX_DUMP_CHANNELS
op_plus
id|MIXER_MAX_DUMP_CHANNELS
op_div
l_int|8
op_plus
l_int|4
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_calculate_coefs&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_and_assign
id|LI_CHANNEL_ADDRESSES_SET
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_ne
l_int|0
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_INVOLVED
suffix:semicolon
r_else
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
)paren
op_ne
l_int|0
)paren
op_logical_or
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
)paren
op_ne
l_int|0
)paren
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_INVOLVED
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
op_ne
l_int|0
)paren
op_logical_or
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
op_ne
l_int|0
)paren
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_CONFERENCE
suffix:semicolon
)brace
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_and_assign
op_complement
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_CH
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|li_total_channels
suffix:semicolon
id|n
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|n
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|n
)braket
op_amp
id|li_config_table
(braket
id|n
)braket
dot
id|coef_table
(braket
id|j
)braket
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_and_assign
op_complement
id|LI_COEF_CH_CH
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|LI_COEF_CH_CH
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_CH_CH
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_CH
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_MONITOR
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_PC
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_MIX
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_PC_CH
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_PCCONNECT
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_PC_PC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MONITOR
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_PC
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MIX
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MIX
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_PC_CH
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_LOOP
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
(brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|li_total_channels
suffix:semicolon
id|n
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|n
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
(brace
id|li_config_table
(braket
id|n
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_CH
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MIX
)paren
(brace
id|li_config_table
(braket
id|n
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_PC_CH
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|n
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MONITOR
)paren
id|li_config_table
(braket
id|n
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_PC
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|li_config_table
(braket
id|n
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MONITOR
)paren
id|li_config_table
(braket
id|n
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_CH_PC
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
(paren
id|LI_CHFLAG_MONITOR
op_or
id|LI_CHFLAG_MIX
op_or
id|LI_CHFLAG_LOOP
)paren
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_ACTIVE
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MONITOR
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_RX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_amp
id|LI_CHFLAG_MIX
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_TX_DATA
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_PCCONNECT
op_or
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_MONITOR
)paren
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_PCCONNECT
op_or
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
)paren
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_ACTIVE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
(paren
id|LI_FLAG_PCCONNECT
op_or
id|LI_FLAG_MONITOR
)paren
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_RX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
(paren
id|LI_FLAG_PCCONNECT
op_or
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_TX_DATA
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_ACTIVE
)paren
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_PC_CH
op_or
id|LI_COEF_CH_PC
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_TX_DATA
op_or
id|LI_CHANNEL_RX_DATA
suffix:semicolon
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
id|j
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
(paren
id|j
OL
id|li_total_channels
)paren
op_logical_and
op_logical_neg
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_ANNOUNCEMENT
)paren
)paren
id|j
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|li_total_channels
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_and_assign
op_complement
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_PC_CH
)paren
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_ANNOUNCEMENT
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_or_assign
id|LI_COEF_PC_CH
suffix:semicolon
)brace
)brace
)brace
)brace
id|n
op_assign
id|li_total_channels
suffix:semicolon
r_if
c_cond
(paren
id|n
OG
id|MIXER_MAX_DUMP_CHANNELS
)paren
id|n
op_assign
id|MIXER_MAX_DUMP_CHANNELS
suffix:semicolon
id|p
op_assign
id|hex_line
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_amp
l_int|0x7
)paren
op_eq
l_int|0
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|curchnl
op_rshift
l_int|4
)braket
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|curchnl
op_amp
l_int|0xf
)braket
suffix:semicolon
)brace
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] CURRENT %s&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
id|hex_line
)paren
)paren
suffix:semicolon
id|p
op_assign
id|hex_line
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_amp
l_int|0x7
)paren
op_eq
l_int|0
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_rshift
l_int|4
)braket
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
l_int|0xf
)braket
suffix:semicolon
)brace
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] CHANNEL %s&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
id|hex_line
)paren
)paren
suffix:semicolon
id|p
op_assign
id|hex_line
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_amp
l_int|0x7
)paren
op_eq
l_int|0
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|chflags
op_rshift
l_int|4
)braket
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|j
)braket
dot
id|chflags
op_amp
l_int|0xf
)braket
suffix:semicolon
)brace
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] CHFLAG  %s&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
id|hex_line
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|n
suffix:semicolon
id|i
op_increment
)paren
(brace
id|p
op_assign
id|hex_line
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_amp
l_int|0x7
)paren
op_eq
l_int|0
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_rshift
l_int|4
)braket
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
l_int|0xf
)braket
suffix:semicolon
)brace
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] FLAG[%02x]%s&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
id|i
comma
(paren
r_char
op_star
)paren
id|hex_line
)paren
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|n
suffix:semicolon
id|i
op_increment
)paren
(brace
id|p
op_assign
id|hex_line
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|n
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|j
op_amp
l_int|0x7
)paren
op_eq
l_int|0
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
l_char|&squot; &squot;
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)braket
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|hex_digit_table
(braket
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)braket
suffix:semicolon
)brace
op_star
id|p
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] COEF[%02x]%s&quot;
comma
(paren
id|dword
)paren
(paren
id|UnMapController
(paren
id|a-&gt;Id
)paren
)paren
comma
id|i
comma
(paren
r_char
op_star
)paren
id|hex_line
)paren
)paren
suffix:semicolon
)brace
)brace
r_static
r_struct
(brace
DECL|member|mask
id|byte
id|mask
suffix:semicolon
DECL|member|line_flags
id|byte
id|line_flags
suffix:semicolon
DECL|variable|mixer_write_prog_pri
)brace
id|mixer_write_prog_pri
(braket
)braket
op_assign
(brace
(brace
id|LI_COEF_CH_CH
comma
l_int|0
)brace
comma
(brace
id|LI_COEF_CH_PC
comma
id|MIXER_COEF_LINE_TO_PC_FLAG
)brace
comma
(brace
id|LI_COEF_PC_CH
comma
id|MIXER_COEF_LINE_FROM_PC_FLAG
)brace
comma
(brace
id|LI_COEF_PC_PC
comma
id|MIXER_COEF_LINE_TO_PC_FLAG
op_or
id|MIXER_COEF_LINE_FROM_PC_FLAG
)brace
)brace
suffix:semicolon
r_static
r_struct
(brace
DECL|member|from_ch
id|byte
id|from_ch
suffix:semicolon
DECL|member|to_ch
id|byte
id|to_ch
suffix:semicolon
DECL|member|mask
id|byte
id|mask
suffix:semicolon
DECL|member|xconnect_override
id|byte
id|xconnect_override
suffix:semicolon
DECL|variable|mixer_write_prog_bri
)brace
id|mixer_write_prog_bri
(braket
)braket
op_assign
(brace
(brace
l_int|0
comma
l_int|0
comma
id|LI_COEF_CH_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* B      to B      */
(brace
l_int|1
comma
l_int|0
comma
id|LI_COEF_CH_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt B  to B      */
(brace
l_int|0
comma
l_int|0
comma
id|LI_COEF_PC_CH
comma
l_int|0x80
)brace
comma
multiline_comment|/* PC     to B      */
(brace
l_int|1
comma
l_int|0
comma
id|LI_COEF_PC_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt PC to B      */
(brace
l_int|2
comma
l_int|0
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* IC     to B      */
(brace
l_int|3
comma
l_int|0
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to B      */
(brace
l_int|0
comma
l_int|0
comma
id|LI_COEF_CH_PC
comma
l_int|0x80
)brace
comma
multiline_comment|/* B      to PC     */
(brace
l_int|1
comma
l_int|0
comma
id|LI_COEF_CH_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt B  to PC     */
(brace
l_int|0
comma
l_int|0
comma
id|LI_COEF_PC_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* PC     to PC     */
(brace
l_int|1
comma
l_int|0
comma
id|LI_COEF_PC_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt PC to PC     */
(brace
l_int|2
comma
l_int|0
comma
id|LI_COEF_CH_PC
comma
l_int|0x00
)brace
comma
multiline_comment|/* IC     to PC     */
(brace
l_int|3
comma
l_int|0
comma
id|LI_COEF_CH_PC
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to PC     */
(brace
l_int|0
comma
l_int|2
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* B      to IC     */
(brace
l_int|1
comma
l_int|2
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt B  to IC     */
(brace
l_int|0
comma
l_int|2
comma
id|LI_COEF_PC_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* PC     to IC     */
(brace
l_int|1
comma
l_int|2
comma
id|LI_COEF_PC_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt PC to IC     */
(brace
l_int|2
comma
l_int|2
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* IC     to IC     */
(brace
l_int|3
comma
l_int|2
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to IC     */
(brace
l_int|1
comma
l_int|1
comma
id|LI_COEF_CH_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt B  to Alt B  */
(brace
l_int|0
comma
l_int|1
comma
id|LI_COEF_CH_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* B      to Alt B  */
(brace
l_int|1
comma
l_int|1
comma
id|LI_COEF_PC_CH
comma
l_int|0x80
)brace
comma
multiline_comment|/* Alt PC to Alt B  */
(brace
l_int|0
comma
l_int|1
comma
id|LI_COEF_PC_CH
comma
l_int|0x01
)brace
comma
multiline_comment|/* PC     to Alt B  */
(brace
l_int|3
comma
l_int|1
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to Alt B  */
(brace
l_int|2
comma
l_int|1
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* IC     to Alt B  */
(brace
l_int|1
comma
l_int|1
comma
id|LI_COEF_CH_PC
comma
l_int|0x80
)brace
comma
multiline_comment|/* Alt B  to Alt PC */
(brace
l_int|0
comma
l_int|1
comma
id|LI_COEF_CH_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* B      to Alt PC */
(brace
l_int|1
comma
l_int|1
comma
id|LI_COEF_PC_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* Alt PC to Alt PC */
(brace
l_int|0
comma
l_int|1
comma
id|LI_COEF_PC_PC
comma
l_int|0x01
)brace
comma
multiline_comment|/* PC     to Alt PC */
(brace
l_int|3
comma
l_int|1
comma
id|LI_COEF_CH_PC
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to Alt PC */
(brace
l_int|2
comma
l_int|1
comma
id|LI_COEF_CH_PC
comma
l_int|0x00
)brace
comma
multiline_comment|/* IC     to Alt PC */
(brace
l_int|1
comma
l_int|3
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt B  to Alt IC */
(brace
l_int|0
comma
l_int|3
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* B      to Alt IC */
(brace
l_int|1
comma
l_int|3
comma
id|LI_COEF_PC_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt PC to Alt IC */
(brace
l_int|0
comma
l_int|3
comma
id|LI_COEF_PC_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* PC     to Alt IC */
(brace
l_int|3
comma
l_int|3
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
comma
multiline_comment|/* Alt IC to Alt IC */
(brace
l_int|2
comma
l_int|3
comma
id|LI_COEF_CH_CH
comma
l_int|0x00
)brace
multiline_comment|/* IC     to Alt IC */
)brace
suffix:semicolon
DECL|variable|mixer_swapped_index_bri
r_static
id|byte
id|mixer_swapped_index_bri
(braket
)braket
op_assign
(brace
l_int|18
comma
multiline_comment|/* B      to B      */
l_int|19
comma
multiline_comment|/* Alt B  to B      */
l_int|20
comma
multiline_comment|/* PC     to B      */
l_int|21
comma
multiline_comment|/* Alt PC to B      */
l_int|22
comma
multiline_comment|/* IC     to B      */
l_int|23
comma
multiline_comment|/* Alt IC to B      */
l_int|24
comma
multiline_comment|/* B      to PC     */
l_int|25
comma
multiline_comment|/* Alt B  to PC     */
l_int|26
comma
multiline_comment|/* PC     to PC     */
l_int|27
comma
multiline_comment|/* Alt PC to PC     */
l_int|28
comma
multiline_comment|/* IC     to PC     */
l_int|29
comma
multiline_comment|/* Alt IC to PC     */
l_int|30
comma
multiline_comment|/* B      to IC     */
l_int|31
comma
multiline_comment|/* Alt B  to IC     */
l_int|32
comma
multiline_comment|/* PC     to IC     */
l_int|33
comma
multiline_comment|/* Alt PC to IC     */
l_int|34
comma
multiline_comment|/* IC     to IC     */
l_int|35
comma
multiline_comment|/* Alt IC to IC     */
l_int|0
comma
multiline_comment|/* Alt B  to Alt B  */
l_int|1
comma
multiline_comment|/* B      to Alt B  */
l_int|2
comma
multiline_comment|/* Alt PC to Alt B  */
l_int|3
comma
multiline_comment|/* PC     to Alt B  */
l_int|4
comma
multiline_comment|/* Alt IC to Alt B  */
l_int|5
comma
multiline_comment|/* IC     to Alt B  */
l_int|6
comma
multiline_comment|/* Alt B  to Alt PC */
l_int|7
comma
multiline_comment|/* B      to Alt PC */
l_int|8
comma
multiline_comment|/* Alt PC to Alt PC */
l_int|9
comma
multiline_comment|/* PC     to Alt PC */
l_int|10
comma
multiline_comment|/* Alt IC to Alt PC */
l_int|11
comma
multiline_comment|/* IC     to Alt PC */
l_int|12
comma
multiline_comment|/* Alt B  to Alt IC */
l_int|13
comma
multiline_comment|/* B      to Alt IC */
l_int|14
comma
multiline_comment|/* Alt PC to Alt IC */
l_int|15
comma
multiline_comment|/* PC     to Alt IC */
l_int|16
comma
multiline_comment|/* Alt IC to Alt IC */
l_int|17
multiline_comment|/* IC     to Alt IC */
)brace
suffix:semicolon
r_static
r_struct
(brace
DECL|member|mask
id|byte
id|mask
suffix:semicolon
DECL|member|from_pc
id|byte
id|from_pc
suffix:semicolon
DECL|member|to_pc
id|byte
id|to_pc
suffix:semicolon
DECL|variable|xconnect_write_prog
)brace
id|xconnect_write_prog
(braket
)braket
op_assign
(brace
(brace
id|LI_COEF_CH_CH
comma
id|FALSE
comma
id|FALSE
)brace
comma
(brace
id|LI_COEF_CH_PC
comma
id|FALSE
comma
id|TRUE
)brace
comma
(brace
id|LI_COEF_PC_CH
comma
id|TRUE
comma
id|FALSE
)brace
comma
(brace
id|LI_COEF_PC_PC
comma
id|TRUE
comma
id|TRUE
)brace
)brace
suffix:semicolon
DECL|function|xconnect_query_addresses
r_static
r_void
id|xconnect_query_addresses
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|w
comma
id|ch
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: xconnect_query_addresses&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;li_pri
op_logical_and
(paren
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_ne
id|plci
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] %s,%d: Channel id wiped out&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|p
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|ch
op_assign
(paren
id|a-&gt;li_pri
)paren
ques
c_cond
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
suffix:colon
l_int|0
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_XCONNECT_FROM
suffix:semicolon
id|w
op_assign
id|ch
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
id|w
op_assign
id|ch
op_or
id|XCONNECT_CHANNEL_PORT_PC
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|p
op_minus
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
DECL|function|xconnect_write_coefs
r_static
r_void
id|xconnect_write_coefs
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|internal_command
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: xconnect_write_coefs %04x&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|internal_command
)paren
)paren
suffix:semicolon
id|plci-&gt;li_write_command
op_assign
id|internal_command
suffix:semicolon
id|plci-&gt;li_write_channel
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|xconnect_write_coefs_process
r_static
id|byte
id|xconnect_write_coefs_process
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|w
comma
id|n
comma
id|i
comma
id|j
comma
id|r
comma
id|s
comma
id|to_ch
suffix:semicolon
id|dword
id|d
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
r_struct
id|xconnect_transfer_address_s
op_star
id|transfer_address
suffix:semicolon
id|byte
id|ch_map
(braket
id|MIXER_CHANNELS_BRI
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] %s,%d: xconnect_write_coefs_process %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;li_write_channel
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_ne
id|plci
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] %s,%d: Channel id wiped out&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|j
op_assign
id|plci-&gt;li_write_channel
suffix:semicolon
id|p
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
r_if
c_cond
(paren
id|j
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI write coefs failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
(brace
id|r
op_assign
l_int|0
suffix:semicolon
id|s
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|li_total_channels
)paren
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_ADDRESSES_SET
)paren
(brace
id|s
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.low
op_or
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_PC
)paren
)paren
op_amp
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|send_pc.card_address.low
op_or
id|li_config_table
(braket
id|i
)braket
dot
id|send_pc.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_PC_CH
)paren
)paren
suffix:semicolon
)brace
id|r
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|j
OL
id|li_total_channels
)paren
op_logical_and
(paren
(paren
id|r
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_ADDRESSES_SET
)paren
)paren
op_logical_or
(paren
op_logical_neg
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_pri
op_logical_and
(paren
id|j
op_ge
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
)paren
op_logical_or
(paren
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.low
op_ne
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.low
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.high
op_ne
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.high
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DMACONNECT
)paren
op_logical_or
op_logical_neg
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DMACONNECT
)paren
)paren
)paren
op_logical_or
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_base
op_ne
id|a-&gt;li_base
)paren
op_logical_and
op_logical_neg
(paren
id|r
op_amp
id|s
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
)paren
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
)paren
)paren
)paren
)paren
)paren
)paren
(brace
id|j
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|li_total_channels
)paren
id|r
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|j
OL
id|li_total_channels
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;li_write_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
r_return
(paren
id|TRUE
)paren
suffix:semicolon
id|to_ch
op_assign
(paren
id|a-&gt;li_pri
)paren
ques
c_cond
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
suffix:colon
l_int|0
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_XCONNECT_TO
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_base
op_ne
id|a-&gt;li_base
)paren
(brace
id|r
op_and_assign
id|s
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
)paren
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
)paren
)paren
suffix:semicolon
)brace
id|n
op_assign
l_int|0
suffix:semicolon
r_do
(brace
r_if
c_cond
(paren
id|r
op_amp
id|xconnect_write_prog
(braket
id|n
)braket
dot
id|mask
)paren
(brace
r_if
c_cond
(paren
id|xconnect_write_prog
(braket
id|n
)braket
dot
id|from_pc
)paren
id|transfer_address
op_assign
op_amp
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc
)paren
suffix:semicolon
r_else
id|transfer_address
op_assign
op_amp
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b
)paren
suffix:semicolon
id|d
op_assign
id|transfer_address-&gt;card_address.low
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|24
)paren
suffix:semicolon
id|d
op_assign
id|transfer_address-&gt;card_address.high
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|24
)paren
suffix:semicolon
id|d
op_assign
id|transfer_address-&gt;offset
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|d
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|8
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|16
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|d
op_rshift
l_int|24
)paren
suffix:semicolon
id|w
op_assign
id|xconnect_write_prog
(braket
id|n
)braket
dot
id|to_pc
ques
c_cond
id|to_ch
op_or
id|XCONNECT_CHANNEL_PORT_PC
suffix:colon
id|to_ch
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|xconnect_write_prog
(braket
id|n
)braket
dot
id|mask
)paren
op_eq
l_int|0
)paren
ques
c_cond
l_int|0x01
suffix:colon
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;u_law
ques
c_cond
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;u_law
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x86
)paren
suffix:colon
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;u_law
ques
c_cond
l_int|0x7a
suffix:colon
l_int|0x80
)paren
)paren
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_xor_assign
id|xconnect_write_prog
(braket
id|n
)braket
dot
id|mask
op_lshift
l_int|4
suffix:semicolon
)brace
id|n
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|n
OL
r_sizeof
(paren
id|xconnect_write_prog
)paren
op_div
r_sizeof
(paren
id|xconnect_write_prog
(braket
l_int|0
)braket
)paren
)paren
op_logical_and
(paren
(paren
id|p
op_minus
id|plci-&gt;internal_req_buffer
)paren
op_plus
l_int|16
OL
id|INTERNAL_REQ_BUFFER_SIZE
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|n
op_eq
r_sizeof
(paren
id|xconnect_write_prog
)paren
op_div
r_sizeof
(paren
id|xconnect_write_prog
(braket
l_int|0
)braket
)paren
)paren
(brace
r_do
(brace
id|j
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|li_total_channels
)paren
id|r
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|j
OL
id|li_total_channels
)paren
op_logical_and
(paren
(paren
id|r
op_eq
l_int|0
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_ADDRESSES_SET
)paren
)paren
op_logical_or
(paren
op_logical_neg
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_pri
op_logical_and
(paren
id|j
op_ge
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
)paren
op_logical_or
(paren
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.low
op_ne
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.low
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.high
op_ne
id|li_config_table
(braket
id|i
)braket
dot
id|send_b.card_address.high
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DMACONNECT
)paren
op_logical_or
op_logical_neg
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_DMACONNECT
)paren
)paren
)paren
op_logical_or
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|adapter-&gt;li_base
op_ne
id|a-&gt;li_base
)paren
op_logical_and
op_logical_neg
(paren
id|r
op_amp
id|s
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_b.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
)paren
op_amp
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.low
op_or
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc.card_address.high
)paren
ques
c_cond
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
op_or
id|LI_COEF_PC_CH
op_or
id|LI_COEF_PC_PC
)paren
suffix:colon
(paren
id|LI_COEF_CH_CH
op_or
id|LI_COEF_CH_PC
)paren
)paren
)paren
)paren
)paren
)paren
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
(paren
id|j
OL
id|li_total_channels
)paren
op_logical_and
(paren
(paren
id|p
op_minus
id|plci-&gt;internal_req_buffer
)paren
op_plus
l_int|16
OL
id|INTERNAL_REQ_BUFFER_SIZE
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|j
op_eq
id|li_total_channels
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;li_write_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
r_return
(paren
id|TRUE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;li_pri
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_SET_MIXER_COEFS_PRI_SYNC
suffix:semicolon
id|w
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_TX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_TX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_RX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_RX_DATA
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
)brace
r_else
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_SET_MIXER_COEFS_BRI
suffix:semicolon
id|w
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_le
id|a-&gt;adv_voice_coef_length
)paren
)paren
(brace
id|w
op_assign
id|GET_WORD
(paren
id|a-&gt;adv_voice_coef_buffer
op_plus
id|ADV_VOICE_NEW_COEF_BASE
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_TX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_TX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_RX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_RX_DATA
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
r_sizeof
(paren
id|ch_map
)paren
suffix:semicolon
id|j
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|2
)paren
(brace
id|ch_map
(braket
id|j
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
l_int|1
)paren
suffix:semicolon
id|ch_map
(braket
id|j
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
id|j
suffix:semicolon
)brace
r_else
(brace
id|ch_map
(braket
id|j
)braket
op_assign
(paren
id|byte
)paren
id|j
suffix:semicolon
id|ch_map
(braket
id|j
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
r_sizeof
(paren
id|mixer_write_prog_bri
)paren
op_div
r_sizeof
(paren
id|mixer_write_prog_bri
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|n
op_increment
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|to_ch
)braket
suffix:semicolon
id|j
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|from_ch
)braket
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
op_star
id|p
op_assign
(paren
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|xconnect_override
op_ne
l_int|0
)paren
ques
c_cond
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|xconnect_override
suffix:colon
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x01
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_ge
id|a-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
op_logical_or
(paren
id|j
op_ge
id|a-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
)paren
(brace
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_xor_assign
(paren
id|w
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
op_lshift
l_int|4
suffix:semicolon
)brace
)brace
r_else
(brace
op_star
id|p
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;AdvSignalPLCI
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI-&gt;tel
op_eq
id|ADV_VOICE
)paren
)paren
(brace
id|w
op_assign
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
ques
c_cond
id|n
suffix:colon
id|mixer_swapped_index_bri
(braket
id|n
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|w
OL
id|a-&gt;adv_voice_coef_length
)paren
op_star
id|p
op_assign
id|a-&gt;adv_voice_coef_buffer
(braket
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|w
)braket
suffix:semicolon
)brace
)brace
id|p
op_increment
suffix:semicolon
)brace
)brace
id|j
op_assign
id|li_total_channels
op_plus
l_int|1
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|j
op_le
id|li_total_channels
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;li_write_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
r_return
(paren
id|TRUE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|j
OL
id|a-&gt;li_base
)paren
id|j
op_assign
id|a-&gt;li_base
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;li_pri
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_SET_MIXER_COEFS_PRI_SYNC
suffix:semicolon
id|w
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_TX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_TX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_RX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_RX_DATA
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
r_sizeof
(paren
id|mixer_write_prog_pri
)paren
op_div
r_sizeof
(paren
id|mixer_write_prog_pri
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|n
op_increment
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
op_or
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|line_flags
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
id|a-&gt;li_base
suffix:semicolon
id|j
OL
id|a-&gt;li_base
op_plus
id|MIXER_CHANNELS_PRI
suffix:semicolon
id|j
op_increment
)paren
(brace
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_amp
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x01
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_xor_assign
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
op_lshift
l_int|4
suffix:semicolon
)brace
r_else
op_star
(paren
id|p
op_increment
)paren
op_assign
l_int|0x00
suffix:semicolon
)brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
op_or
id|MIXER_COEF_LINE_ROW_FLAG
op_or
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|line_flags
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
id|a-&gt;li_base
suffix:semicolon
id|j
OL
id|a-&gt;li_base
op_plus
id|MIXER_CHANNELS_PRI
suffix:semicolon
id|j
op_increment
)paren
(brace
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_amp
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_amp
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x01
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_xor_assign
id|mixer_write_prog_pri
(braket
id|n
)braket
dot
id|mask
op_lshift
l_int|4
suffix:semicolon
)brace
r_else
op_star
(paren
id|p
op_increment
)paren
op_assign
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
id|UDATA_REQUEST_SET_MIXER_COEFS_BRI
suffix:semicolon
id|w
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_le
id|a-&gt;adv_voice_coef_length
)paren
)paren
(brace
id|w
op_assign
id|GET_WORD
(paren
id|a-&gt;adv_voice_coef_buffer
op_plus
id|ADV_VOICE_NEW_COEF_BASE
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_TX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_TX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_RX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_RX_DATA
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
r_sizeof
(paren
id|ch_map
)paren
suffix:semicolon
id|j
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|2
)paren
(brace
id|ch_map
(braket
id|j
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
l_int|1
)paren
suffix:semicolon
id|ch_map
(braket
id|j
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
id|j
suffix:semicolon
)brace
r_else
(brace
id|ch_map
(braket
id|j
)braket
op_assign
(paren
id|byte
)paren
id|j
suffix:semicolon
id|ch_map
(braket
id|j
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
r_sizeof
(paren
id|mixer_write_prog_bri
)paren
op_div
r_sizeof
(paren
id|mixer_write_prog_bri
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|n
op_increment
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|to_ch
)braket
suffix:semicolon
id|j
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|from_ch
)braket
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
op_star
id|p
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x01
)paren
suffix:semicolon
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_xor_assign
(paren
id|w
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
op_lshift
l_int|4
suffix:semicolon
)brace
r_else
(brace
op_star
id|p
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;AdvSignalPLCI
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|a-&gt;AdvSignalPLCI-&gt;tel
op_eq
id|ADV_VOICE
)paren
)paren
(brace
id|w
op_assign
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
ques
c_cond
id|n
suffix:colon
id|mixer_swapped_index_bri
(braket
id|n
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|w
OL
id|a-&gt;adv_voice_coef_length
)paren
op_star
id|p
op_assign
id|a-&gt;adv_voice_coef_buffer
(braket
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|w
)braket
suffix:semicolon
)brace
)brace
id|p
op_increment
suffix:semicolon
)brace
)brace
id|j
op_assign
id|li_total_channels
op_plus
l_int|1
suffix:semicolon
)brace
)brace
id|plci-&gt;li_write_channel
op_assign
id|j
suffix:semicolon
r_if
c_cond
(paren
id|p
op_ne
id|plci-&gt;internal_req_buffer
)paren
(brace
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|p
op_minus
id|plci-&gt;internal_req_buffer
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
DECL|function|mixer_notify_update
r_static
r_void
id|mixer_notify_update
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|others
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
comma
id|w
suffix:semicolon
id|PLCI
op_star
id|notify_plci
suffix:semicolon
id|byte
id|msg
(braket
r_sizeof
(paren
id|CAPI_MSG_HEADER
)paren
op_plus
l_int|6
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_notify_update %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|others
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|GL_LINE_INTERCONNECT_SUPPORTED
)paren
(brace
r_if
c_cond
(paren
id|others
)paren
id|plci-&gt;li_notify_update
op_assign
id|TRUE
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|notify_plci
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|others
)paren
(brace
r_while
c_loop
(paren
(paren
id|i
OL
id|li_total_channels
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
)paren
id|i
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|i
OL
id|li_total_channels
)paren
id|notify_plci
op_assign
id|li_config_table
(braket
id|i
op_increment
)braket
dot
id|plci
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|notify_plci
op_assign
id|plci
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|notify_plci
op_ne
l_int|NULL
)paren
op_logical_and
op_logical_neg
id|notify_plci-&gt;li_notify_update
op_logical_and
(paren
id|notify_plci-&gt;appl
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|notify_plci-&gt;State
)paren
op_logical_and
id|notify_plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|notify_plci-&gt;nl_remove_id
)paren
(brace
id|notify_plci-&gt;li_notify_update
op_assign
id|TRUE
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.length
op_assign
l_int|18
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.appl_id
op_assign
id|notify_plci-&gt;appl-&gt;Id
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.command
op_assign
id|_FACILITY_R
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.number
op_assign
l_int|0
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.controller
op_assign
id|notify_plci-&gt;adapter-&gt;Id
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.plci
op_assign
id|notify_plci-&gt;Id
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|header.ncci
op_assign
l_int|0
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|info.facility_req.Selector
op_assign
id|SELECTOR_LINE_INTERCONNECT
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|info.facility_req.structs
(braket
l_int|0
)braket
op_assign
l_int|3
suffix:semicolon
id|PUT_WORD
(paren
op_amp
(paren
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|info.facility_req.structs
(braket
l_int|1
)braket
)paren
comma
id|LI_REQ_SILENT_UPDATE
)paren
suffix:semicolon
(paren
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
op_member_access_from_pointer
id|info.facility_req.structs
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|w
op_assign
id|api_put
(paren
id|notify_plci-&gt;appl
comma
(paren
id|CAPI_MSG
op_star
)paren
id|msg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|w
op_ne
id|_QUEUE_FULL
)paren
(brace
r_if
c_cond
(paren
id|w
op_ne
l_int|0
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Interconnect notify failed %06x %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
(paren
id|dword
)paren
(paren
(paren
id|notify_plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|notify_plci-&gt;adapter-&gt;Id
)paren
)paren
comma
id|w
)paren
)paren
suffix:semicolon
)brace
id|notify_plci-&gt;li_notify_update
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
)brace
r_while
c_loop
(paren
id|others
op_logical_and
(paren
id|notify_plci
op_ne
l_int|NULL
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|others
)paren
id|plci-&gt;li_notify_update
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
DECL|function|mixer_clear_config
r_static
r_void
id|mixer_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;li_notify_update
op_assign
id|FALSE
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_plci_b_read_pos
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_plci_b_req_pos
op_assign
l_int|0
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_CH_PC_SET
op_or
id|LI_COEF_PC_CH_SET
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
)brace
DECL|function|mixer_prepare_switch
r_static
r_void
id|mixer_prepare_switch
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_prepare_switch&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_do
(brace
id|mixer_indication_coefs_set
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|plci-&gt;li_plci_b_read_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
suffix:semicolon
)brace
DECL|function|mixer_save_config
r_static
id|word
id|mixer_save_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_save_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_and_assign
l_int|0xf
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_and_assign
l_int|0xf
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_CH_PC_SET
op_or
id|LI_COEF_PC_CH_SET
suffix:semicolon
)brace
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|mixer_restore_config
r_static
id|word
id|mixer_restore_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_restore_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_RESTORE_MIXER_1
suffix:colon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|xconnect_query_addresses
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_5
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_MIXER_2
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_3
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_4
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
op_logical_and
(paren
id|Rc
op_ne
l_int|0
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B query addresses failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Rc
op_eq
id|OK
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_2
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_3
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_4
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_5
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|Rc
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_2
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_3
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_5
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_ne
id|ADJUST_B_RESTORE_MIXER_5
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|ADJUST_B_RESTORE_MIXER_5
suffix:colon
id|xconnect_write_coefs
(paren
id|plci
comma
id|plci-&gt;adjust_b_command
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_6
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_MIXER_6
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|xconnect_write_coefs_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Write mixer coefs failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_7
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_MIXER_7
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
DECL|function|mixer_command
r_static
r_void
id|mixer_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
comma
id|internal_command
comma
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_command %02x %04x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
comma
id|plci-&gt;li_cmd
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;li_cmd
)paren
(brace
r_case
id|LI_REQ_CONNECT
suffix:colon
r_case
id|LI_REQ_DISCONNECT
suffix:colon
r_case
id|LI_REQ_SILENT_UPDATE
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_or
id|B1_FACILITY_MIXER
)paren
comma
id|MIXER_COMMAND_1
)paren
suffix:semicolon
)brace
r_case
id|MIXER_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Load mixer failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
id|plci-&gt;li_plci_b_req_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
op_logical_or
(paren
(paren
id|get_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
)paren
op_amp
id|B1_FACILITY_MIXER
)paren
op_logical_and
(paren
id|add_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_amp
op_complement
id|B1_FACILITY_MIXER
)paren
)paren
op_eq
id|plci-&gt;B1_resource
)paren
)paren
)paren
(brace
id|xconnect_write_coefs
(paren
id|plci
comma
id|MIXER_COMMAND_2
)paren
suffix:semicolon
)brace
r_else
(brace
r_do
(brace
id|mixer_indication_coefs_set
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|plci-&gt;li_plci_b_read_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
suffix:semicolon
)brace
r_case
id|MIXER_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
op_logical_or
(paren
(paren
id|get_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
)paren
op_amp
id|B1_FACILITY_MIXER
)paren
op_logical_and
(paren
id|add_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_amp
op_complement
id|B1_FACILITY_MIXER
)paren
)paren
op_eq
id|plci-&gt;B1_resource
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|xconnect_write_coefs_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Write mixer coefs failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;li_plci_b_write_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
(brace
r_do
(brace
id|plci-&gt;li_plci_b_write_pos
op_assign
(paren
id|plci-&gt;li_plci_b_write_pos
op_eq
l_int|0
)paren
ques
c_cond
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
suffix:colon
id|plci-&gt;li_plci_b_write_pos
op_minus
l_int|1
suffix:semicolon
id|i
op_assign
(paren
id|plci-&gt;li_plci_b_write_pos
op_eq
l_int|0
)paren
ques
c_cond
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
suffix:colon
id|plci-&gt;li_plci_b_write_pos
op_minus
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|plci-&gt;li_plci_b_write_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_amp
id|LI_PLCI_B_LAST_FLAG
)paren
)paren
suffix:semicolon
)brace
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
)paren
(brace
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_amp
op_complement
id|B1_FACILITY_MIXER
)paren
comma
id|MIXER_COMMAND_3
)paren
suffix:semicolon
)brace
r_case
id|MIXER_COMMAND_3
suffix:colon
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;li_channel_bits
op_amp
id|LI_CHANNEL_INVOLVED
)paren
)paren
(brace
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Unload mixer failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_ne
id|plci
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06x] %s,%d: Channel id wiped out %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
(paren
r_int
)paren
(paren
id|plci-&gt;li_bchannel_id
)paren
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
id|plci-&gt;li_channel_bits
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
id|plci-&gt;li_channel_bits
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
id|plci-&gt;li_channel_bits
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|function|li_update_connect
r_static
r_void
id|li_update_connect
(paren
id|dword
id|Id
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|plci_b_id
comma
id|byte
id|connect
comma
id|dword
id|li_flags
)paren
(brace
id|word
id|i
comma
id|ch_a
comma
id|ch_a_v
comma
id|ch_a_s
comma
id|ch_b
comma
id|ch_b_v
comma
id|ch_b_s
suffix:semicolon
id|PLCI
op_star
id|plci_b
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a_b
suffix:semicolon
id|a_b
op_assign
op_amp
(paren
id|adapter
(braket
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|plci_b
op_assign
op_amp
(paren
id|a_b-&gt;plci
(braket
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|ch_a
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
)paren
(brace
id|ch_a_v
op_assign
id|ch_a
op_plus
id|MIXER_IC_CHANNEL_BASE
suffix:semicolon
id|ch_a_s
op_assign
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
ques
c_cond
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:colon
id|ch_a_v
suffix:semicolon
)brace
r_else
(brace
id|ch_a_v
op_assign
id|ch_a
suffix:semicolon
id|ch_a_s
op_assign
id|ch_a
suffix:semicolon
)brace
id|ch_b
op_assign
id|a_b-&gt;li_base
op_plus
(paren
id|plci_b-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a_b-&gt;li_pri
op_logical_and
(paren
id|plci_b-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci_b
op_eq
id|a_b-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|plci_b_id
op_amp
id|EXT_CONTROLLER
)paren
)paren
(brace
id|ch_b_v
op_assign
id|ch_b
op_plus
id|MIXER_IC_CHANNEL_BASE
suffix:semicolon
id|ch_b_s
op_assign
(paren
id|a_b-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
ques
c_cond
id|a_b-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci_b-&gt;li_bchannel_id
)paren
suffix:colon
id|ch_b_v
suffix:semicolon
)brace
r_else
(brace
id|ch_b_v
op_assign
id|ch_b
suffix:semicolon
id|ch_b_s
op_assign
id|ch_b
suffix:semicolon
)brace
r_if
c_cond
(paren
id|connect
)paren
(brace
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
suffix:semicolon
)brace
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_ANNOUNCEMENT
op_or
id|LI_FLAG_MIX
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ch_a_v
op_eq
id|ch_b_v
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
id|ch_a_v
)paren
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|i
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
id|ch_a_s
)paren
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|i
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
id|ch_a_v
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_amp
id|LI_FLAG_CONFERENCE
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
id|ch_a_s
)paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_and_assign
op_complement
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_CONFERENCE_A_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_CONFERENCE_B_A
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_MONITOR_A
)paren
(brace
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_MONITOR_B
)paren
(brace
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_a
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_ANNOUNCEMENT_A
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_ANNOUNCEMENT
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_ANNOUNCEMENT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_ANNOUNCEMENT_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_ANNOUNCEMENT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_ANNOUNCEMENT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_MIX_A
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI_FLAG_MIX_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_a_v
op_ne
id|ch_a_s
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_b_v
op_ne
id|ch_b_s
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
DECL|function|li2_update_connect
r_static
r_void
id|li2_update_connect
(paren
id|dword
id|Id
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|plci_b_id
comma
id|byte
id|connect
comma
id|dword
id|li_flags
)paren
(brace
id|word
id|ch_a
comma
id|ch_a_v
comma
id|ch_a_s
comma
id|ch_b
comma
id|ch_b_v
comma
id|ch_b_s
suffix:semicolon
id|PLCI
op_star
id|plci_b
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a_b
suffix:semicolon
id|a_b
op_assign
op_amp
(paren
id|adapter
(braket
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|plci_b
op_assign
op_amp
(paren
id|a_b-&gt;plci
(braket
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|ch_a
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|Id
op_amp
id|EXT_CONTROLLER
)paren
)paren
(brace
id|ch_a_v
op_assign
id|ch_a
op_plus
id|MIXER_IC_CHANNEL_BASE
suffix:semicolon
id|ch_a_s
op_assign
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
ques
c_cond
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:colon
id|ch_a_v
suffix:semicolon
)brace
r_else
(brace
id|ch_a_v
op_assign
id|ch_a
suffix:semicolon
id|ch_a_s
op_assign
id|ch_a
suffix:semicolon
)brace
id|ch_b
op_assign
id|a_b-&gt;li_base
op_plus
(paren
id|plci_b-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a_b-&gt;li_pri
op_logical_and
(paren
id|plci_b-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci_b
op_eq
id|a_b-&gt;AdvSignalPLCI
)paren
op_logical_and
(paren
id|plci_b_id
op_amp
id|EXT_CONTROLLER
)paren
)paren
(brace
id|ch_b_v
op_assign
id|ch_b
op_plus
id|MIXER_IC_CHANNEL_BASE
suffix:semicolon
id|ch_b_s
op_assign
(paren
id|a_b-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
ques
c_cond
id|a_b-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci_b-&gt;li_bchannel_id
)paren
suffix:colon
id|ch_b_v
suffix:semicolon
)brace
r_else
(brace
id|ch_b_v
op_assign
id|ch_b
suffix:semicolon
id|ch_b_s
op_assign
id|ch_b
suffix:semicolon
)brace
r_if
c_cond
(paren
id|connect
)paren
(brace
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_and_assign
op_complement
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_and_assign
op_complement
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_and_assign
op_complement
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_and_assign
op_complement
id|LI_FLAG_PCCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b
)braket
dot
id|chflags
op_and_assign
op_complement
(paren
id|LI_CHFLAG_MONITOR
op_or
id|LI_CHFLAG_MIX
op_or
id|LI_CHFLAG_LOOP
)paren
suffix:semicolon
)brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_and_assign
op_complement
(paren
id|LI_FLAG_INTERCONNECT
op_or
id|LI_FLAG_CONFERENCE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_INTERCONNECT_A_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_INTERCONNECT_B_A
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_MONITOR_B
)paren
(brace
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_MONITOR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_MIX_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_or_assign
id|LI_FLAG_MIX
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_MONITOR_X
)paren
id|li_config_table
(braket
id|ch_b
)braket
dot
id|chflags
op_or_assign
id|LI_CHFLAG_MONITOR
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_MIX_X
)paren
id|li_config_table
(braket
id|ch_b
)braket
dot
id|chflags
op_or_assign
id|LI_CHFLAG_MIX
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_LOOP_B
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_INTERCONNECT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_LOOP_PC
)paren
id|li_config_table
(braket
id|ch_b
)braket
dot
id|flag_table
(braket
id|ch_b
)braket
op_or_assign
id|LI_FLAG_PCCONNECT
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_LOOP_X
)paren
id|li_config_table
(braket
id|ch_b
)braket
dot
id|chflags
op_or_assign
id|LI_CHFLAG_LOOP
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_PCCONNECT_A_B
)paren
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_PCCONNECT
suffix:semicolon
r_if
c_cond
(paren
id|li_flags
op_amp
id|LI2_FLAG_PCCONNECT_B_A
)paren
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_PCCONNECT
suffix:semicolon
r_if
c_cond
(paren
id|ch_a_v
op_ne
id|ch_a_s
)paren
(brace
id|li_config_table
(braket
id|ch_a_v
)braket
dot
id|flag_table
(braket
id|ch_a_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_a_s
)braket
dot
id|flag_table
(braket
id|ch_a_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ch_b_v
op_ne
id|ch_b_s
)paren
(brace
id|li_config_table
(braket
id|ch_b_v
)braket
dot
id|flag_table
(braket
id|ch_b_s
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|ch_b_s
)braket
dot
id|flag_table
(braket
id|ch_b_v
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
)brace
DECL|function|li_check_main_plci
r_static
id|word
id|li_check_main_plci
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
r_if
c_cond
(paren
id|plci
op_eq
l_int|NULL
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong PLCI&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;State
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
op_logical_or
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong state&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|_WRONG_STATE
)paren
suffix:semicolon
)brace
id|li_config_table
(braket
id|plci-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|li_check_plci_b
r_static
id|PLCI
op_star
id|li_check_plci_b
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|plci_b_id
comma
id|word
id|plci_b_write_pos
comma
id|byte
op_star
id|p_result
)paren
(brace
id|byte
id|ctlr_b
suffix:semicolon
id|PLCI
op_star
id|plci_b
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;li_plci_b_read_pos
OG
id|plci_b_write_pos
)paren
ques
c_cond
id|plci-&gt;li_plci_b_read_pos
suffix:colon
id|LI_PLCI_B_QUEUE_ENTRIES
op_plus
id|plci-&gt;li_plci_b_read_pos
)paren
op_minus
id|plci_b_write_pos
op_minus
l_int|1
OL
l_int|2
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI request overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_REQUEST_NOT_ALLOWED_IN_THIS_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
id|ctlr_b
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
op_ne
l_int|0
)paren
(brace
id|ctlr_b
op_assign
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ctlr_b
OG
id|max_adapter
)paren
op_logical_or
(paren
(paren
id|ctlr_b
op_ne
l_int|0
)paren
op_logical_and
(paren
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|request
op_eq
l_int|NULL
)paren
)paren
)paren
id|ctlr_b
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ctlr_b
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
OG
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|max_plci
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI invalid second PLCI %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
id|plci_b
op_assign
op_amp
(paren
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|plci
(braket
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci_b-&gt;State
op_logical_or
op_logical_neg
id|plci_b-&gt;NL.Id
op_logical_or
id|plci_b-&gt;nl_remove_id
op_logical_or
(paren
id|plci_b-&gt;li_bchannel_id
op_eq
l_int|0
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI peer in wrong state %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_REQUEST_NOT_ALLOWED_IN_THIS_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
id|li_config_table
(braket
id|plci_b-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci_b-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
id|plci_b
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
op_complement
id|EXT_CONTROLLER
)paren
)paren
op_ne
(paren
(paren
id|byte
)paren
(paren
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
op_amp
op_complement
id|EXT_CONTROLLER
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
op_logical_or
op_logical_neg
(paren
id|plci_b-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI not on same ctrl %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|get_b1_facilities
(paren
id|plci_b
comma
id|add_b1_facilities
(paren
id|plci_b
comma
id|plci_b-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|plci_b-&gt;B1_facilities
op_or
id|B1_FACILITY_MIXER
)paren
)paren
)paren
op_amp
id|B1_FACILITY_MIXER
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Interconnect peer cannot mix %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b-&gt;B1_resource
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_REQUEST_NOT_ALLOWED_IN_THIS_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_return
(paren
id|plci_b
)paren
suffix:semicolon
)brace
DECL|function|li2_check_plci_b
r_static
id|PLCI
op_star
id|li2_check_plci_b
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|dword
id|plci_b_id
comma
id|word
id|plci_b_write_pos
comma
id|byte
op_star
id|p_result
)paren
(brace
id|byte
id|ctlr_b
suffix:semicolon
id|PLCI
op_star
id|plci_b
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;li_plci_b_read_pos
OG
id|plci_b_write_pos
)paren
ques
c_cond
id|plci-&gt;li_plci_b_read_pos
suffix:colon
id|LI_PLCI_B_QUEUE_ENTRIES
op_plus
id|plci-&gt;li_plci_b_read_pos
)paren
op_minus
id|plci_b_write_pos
op_minus
l_int|1
OL
l_int|2
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI request overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
id|ctlr_b
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
op_ne
l_int|0
)paren
(brace
id|ctlr_b
op_assign
id|MapController
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
l_int|0x7f
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ctlr_b
OG
id|max_adapter
)paren
op_logical_or
(paren
(paren
id|ctlr_b
op_ne
l_int|0
)paren
op_logical_and
(paren
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|request
op_eq
l_int|NULL
)paren
)paren
)paren
id|ctlr_b
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ctlr_b
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
OG
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|max_plci
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI invalid second PLCI %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
id|plci_b
op_assign
op_amp
(paren
id|adapter
(braket
id|ctlr_b
op_minus
l_int|1
)braket
dot
id|plci
(braket
(paren
(paren
id|plci_b_id
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_minus
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci_b-&gt;State
op_logical_or
op_logical_neg
id|plci_b-&gt;NL.Id
op_logical_or
id|plci_b-&gt;nl_remove_id
op_logical_or
(paren
id|plci_b-&gt;li_bchannel_id
op_eq
l_int|0
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|plci_b-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci_b-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_ne
id|plci_b
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI peer in wrong state %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|byte
)paren
(paren
id|plci_b_id
op_amp
op_complement
id|EXT_CONTROLLER
)paren
)paren
op_ne
(paren
(paren
id|byte
)paren
(paren
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
op_amp
op_complement
id|EXT_CONTROLLER
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
op_logical_or
op_logical_neg
(paren
id|plci_b-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI not on same ctrl %08lx&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b_id
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_IDENTIFIER
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|get_b1_facilities
(paren
id|plci_b
comma
id|add_b1_facilities
(paren
id|plci_b
comma
id|plci_b-&gt;B1_resource
comma
(paren
id|word
)paren
(paren
id|plci_b-&gt;B1_facilities
op_or
id|B1_FACILITY_MIXER
)paren
)paren
)paren
op_amp
id|B1_FACILITY_MIXER
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Interconnect peer cannot mix %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci_b-&gt;B1_resource
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
id|p_result
comma
id|_WRONG_STATE
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_return
(paren
id|plci_b
)paren
suffix:semicolon
)brace
DECL|function|mixer_request
r_static
id|byte
id|mixer_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|i
suffix:semicolon
id|dword
id|d
comma
id|li_flags
comma
id|plci_b_id
suffix:semicolon
id|PLCI
op_star
id|plci_b
suffix:semicolon
id|API_PARSE
id|li_parms
(braket
l_int|3
)braket
suffix:semicolon
id|API_PARSE
id|li_req_parms
(braket
l_int|3
)braket
suffix:semicolon
id|API_PARSE
id|li_participant_struct
(braket
l_int|2
)braket
suffix:semicolon
id|API_PARSE
id|li_participant_parms
(braket
l_int|3
)braket
suffix:semicolon
id|word
id|participant_parms_pos
suffix:semicolon
id|byte
id|result_buffer
(braket
l_int|32
)braket
suffix:semicolon
id|byte
op_star
id|result
suffix:semicolon
id|word
id|result_pos
suffix:semicolon
id|word
id|plci_b_write_pos
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_request&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|result
op_assign
id|result_buffer
suffix:semicolon
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;profile.Global_Options
op_amp
id|GL_LINE_INTERCONNECT_SUPPORTED
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Facility not supported&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;ws&quot;
comma
id|li_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
(brace
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|3
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|1
)braket
comma
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
(brace
r_case
id|LI_GET_SUPPORTED_SERVICES
suffix:colon
r_if
c_cond
(paren
id|appl-&gt;appl_flags
op_amp
id|APPL_FLAG_OLD_LI_SPEC
)paren
(brace
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|17
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|14
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
id|d
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_CH_CH
)paren
id|d
op_or_assign
id|LI_CONFERENCING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_CH_PC
)paren
id|d
op_or_assign
id|LI_MONITORING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_PC_CH
)paren
id|d
op_or_assign
id|LI_ANNOUNCEMENTS_SUPPORTED
op_or
id|LI_MIXING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
id|d
op_or_assign
id|LI_CROSS_CONTROLLER_SUPPORTED
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|6
)braket
comma
id|d
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
(brace
id|d
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;li_pri
op_logical_or
(paren
id|i
OL
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
)paren
)paren
(brace
id|d
op_increment
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|d
op_assign
id|a-&gt;li_pri
ques
c_cond
id|a-&gt;li_channels
suffix:colon
id|MIXER_BCHANNELS_BRI
suffix:semicolon
)brace
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|10
)braket
comma
id|d
op_div
l_int|2
)paren
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|14
)braket
comma
id|d
)paren
suffix:semicolon
)brace
r_else
(brace
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|25
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|22
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
id|d
op_assign
id|LI2_ASYMMETRIC_SUPPORTED
op_or
id|LI2_B_LOOPING_SUPPORTED
op_or
id|LI2_X_LOOPING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_CH_PC
)paren
id|d
op_or_assign
id|LI2_MONITORING_SUPPORTED
op_or
id|LI2_REMOTE_MONITORING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_PC_CH
)paren
id|d
op_or_assign
id|LI2_MIXING_SUPPORTED
op_or
id|LI2_REMOTE_MIXING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_MIXER_PC_PC
)paren
id|d
op_or_assign
id|LI2_PC_LOOPING_SUPPORTED
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
id|d
op_or_assign
id|LI2_CROSS_CONTROLLER_SUPPORTED
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|6
)braket
comma
id|d
)paren
suffix:semicolon
id|d
op_assign
id|a-&gt;li_pri
ques
c_cond
id|a-&gt;li_channels
suffix:colon
id|MIXER_BCHANNELS_BRI
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|10
)braket
comma
id|d
op_div
l_int|2
)paren
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|14
)braket
comma
id|d
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
(brace
id|d
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|li_total_channels
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XCONNECT
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;li_pri
op_logical_or
(paren
id|i
OL
id|li_config_table
(braket
id|i
)braket
dot
id|adapter-&gt;li_base
op_plus
id|MIXER_BCHANNELS_BRI
)paren
)paren
)paren
(brace
id|d
op_increment
suffix:semicolon
)brace
)brace
)brace
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|18
)braket
comma
id|d
op_div
l_int|2
)paren
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|22
)braket
comma
id|d
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|LI_REQ_CONNECT
suffix:colon
r_if
c_cond
(paren
id|li_parms
(braket
l_int|1
)braket
dot
id|length
op_eq
l_int|8
)paren
(brace
id|appl-&gt;appl_flags
op_or_assign
id|APPL_FLAG_OLD_LI_SPEC
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_parms
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;dd&quot;
comma
id|li_req_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b_id
op_assign
id|GET_DWORD
(paren
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
l_int|0xffff
suffix:semicolon
id|li_flags
op_assign
id|GET_DWORD
(paren
id|li_req_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|Info
op_assign
id|li_check_main_plci
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|9
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|6
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|plci_b_id
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|8
)braket
comma
id|GOOD
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
r_break
suffix:semicolon
id|result
op_assign
id|plci-&gt;saved_msg.info
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|result_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
id|result
(braket
id|i
)braket
op_assign
id|result_buffer
(braket
id|i
)braket
suffix:semicolon
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
id|plci_b
op_assign
id|li_check_plci_b
(paren
id|Id
comma
id|plci
comma
id|plci_b_id
comma
id|plci_b_write_pos
comma
op_amp
id|result
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_b
op_eq
l_int|NULL
)paren
r_break
suffix:semicolon
id|li_update_connect
(paren
id|Id
comma
id|a
comma
id|plci
comma
id|plci_b_id
comma
id|TRUE
comma
id|li_flags
)paren
suffix:semicolon
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|plci_b_id
op_or
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
)brace
r_else
(brace
id|appl-&gt;appl_flags
op_and_assign
op_complement
id|APPL_FLAG_OLD_LI_SPEC
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_parms
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;ds&quot;
comma
id|li_req_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|li_flags
op_assign
id|GET_DWORD
(paren
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
op_complement
(paren
id|LI2_FLAG_INTERCONNECT_A_B
op_or
id|LI2_FLAG_INTERCONNECT_B_A
)paren
suffix:semicolon
id|Info
op_assign
id|li_check_main_plci
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|Info
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|6
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
r_break
suffix:semicolon
id|result
op_assign
id|plci-&gt;saved_msg.info
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|result_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
id|result
(braket
id|i
)braket
op_assign
id|result_buffer
(braket
id|i
)braket
suffix:semicolon
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
id|participant_parms_pos
op_assign
l_int|0
suffix:semicolon
id|result_pos
op_assign
l_int|7
suffix:semicolon
id|li2_update_connect
(paren
id|Id
comma
id|a
comma
id|plci
comma
id|UnMapId
(paren
id|Id
)paren
comma
id|TRUE
comma
id|li_flags
)paren
suffix:semicolon
r_while
c_loop
(paren
id|participant_parms_pos
OL
id|li_req_parms
(braket
l_int|1
)braket
dot
id|length
)paren
(brace
id|result
(braket
id|result_pos
)braket
op_assign
l_int|6
suffix:semicolon
id|result_pos
op_add_assign
l_int|7
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|6
)braket
comma
l_int|0
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|GOOD
)paren
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_req_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
op_plus
id|participant_parms_pos
)braket
comma
(paren
id|word
)paren
(paren
id|li_parms
(braket
l_int|1
)braket
dot
id|length
op_minus
id|participant_parms_pos
)paren
comma
l_string|&quot;s&quot;
comma
id|li_participant_struct
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|length
comma
l_string|&quot;dd&quot;
comma
id|li_participant_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b_id
op_assign
id|GET_DWORD
(paren
id|li_participant_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
l_int|0xffff
suffix:semicolon
id|li_flags
op_assign
id|GET_DWORD
(paren
id|li_participant_parms
(braket
l_int|1
)braket
dot
id|info
)paren
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|6
)braket
comma
id|plci_b_id
)paren
suffix:semicolon
r_if
c_cond
(paren
r_sizeof
(paren
id|result
)paren
op_minus
id|result_pos
OL
l_int|7
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI result overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_STATE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b
op_assign
id|li2_check_plci_b
(paren
id|Id
comma
id|plci
comma
id|plci_b_id
comma
id|plci_b_write_pos
comma
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_b
op_ne
l_int|NULL
)paren
(brace
id|li2_update_connect
(paren
id|Id
comma
id|a
comma
id|plci
comma
id|plci_b_id
comma
id|TRUE
comma
id|li_flags
)paren
suffix:semicolon
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|plci_b_id
op_or
(paren
(paren
id|li_flags
op_amp
(paren
id|LI2_FLAG_INTERCONNECT_A_B
op_or
id|LI2_FLAG_INTERCONNECT_B_A
op_or
id|LI2_FLAG_PCCONNECT_A_B
op_or
id|LI2_FLAG_PCCONNECT_B_A
)paren
)paren
ques
c_cond
l_int|0
suffix:colon
id|LI_PLCI_B_DISC_FLAG
)paren
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
)brace
id|participant_parms_pos
op_assign
(paren
id|word
)paren
(paren
(paren
op_amp
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
op_plus
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|length
)braket
)paren
op_minus
(paren
op_amp
id|li_req_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
)brace
id|result
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|1
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|4
)paren
suffix:semicolon
id|result
(braket
l_int|6
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|7
)paren
suffix:semicolon
id|i
op_assign
(paren
id|plci_b_write_pos
op_eq
l_int|0
)paren
ques
c_cond
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
suffix:colon
id|plci_b_write_pos
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci_b_write_pos
op_eq
id|plci-&gt;li_plci_b_read_pos
)paren
op_logical_or
(paren
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_amp
id|LI_PLCI_B_LAST_FLAG
)paren
)paren
(brace
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|LI_PLCI_B_SKIP_FLAG
op_or
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
)brace
r_else
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_or_assign
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
)brace
id|mixer_calculate_coefs
(paren
id|a
)paren
suffix:semicolon
id|plci-&gt;li_channel_bits
op_assign
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|channel
suffix:semicolon
id|mixer_notify_update
(paren
id|plci
comma
id|TRUE
)paren
suffix:semicolon
id|sendf
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|Number
comma
l_string|&quot;wwS&quot;
comma
id|Info
comma
id|SELECTOR_LINE_INTERCONNECT
comma
id|result
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_cmd
op_assign
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|mixer_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|LI_REQ_DISCONNECT
suffix:colon
r_if
c_cond
(paren
id|li_parms
(braket
l_int|1
)braket
dot
id|length
op_eq
l_int|4
)paren
(brace
id|appl-&gt;appl_flags
op_or_assign
id|APPL_FLAG_OLD_LI_SPEC
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_parms
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;d&quot;
comma
id|li_req_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b_id
op_assign
id|GET_DWORD
(paren
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
l_int|0xffff
suffix:semicolon
id|Info
op_assign
id|li_check_main_plci
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|9
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|6
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|GET_DWORD
(paren
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|8
)braket
comma
id|GOOD
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
r_break
suffix:semicolon
id|result
op_assign
id|plci-&gt;saved_msg.info
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|result_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
id|result
(braket
id|i
)braket
op_assign
id|result_buffer
(braket
id|i
)braket
suffix:semicolon
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
id|plci_b
op_assign
id|li_check_plci_b
(paren
id|Id
comma
id|plci
comma
id|plci_b_id
comma
id|plci_b_write_pos
comma
op_amp
id|result
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_b
op_eq
l_int|NULL
)paren
r_break
suffix:semicolon
id|li_update_connect
(paren
id|Id
comma
id|a
comma
id|plci
comma
id|plci_b_id
comma
id|FALSE
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|plci_b_id
op_or
id|LI_PLCI_B_DISC_FLAG
op_or
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
)brace
r_else
(brace
id|appl-&gt;appl_flags
op_and_assign
op_complement
id|APPL_FLAG_OLD_LI_SPEC
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_parms
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;s&quot;
comma
id|li_req_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
r_break
suffix:semicolon
)brace
id|Info
op_assign
id|li_check_main_plci
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|result_buffer
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result_buffer
(braket
l_int|4
)braket
comma
id|Info
)paren
suffix:semicolon
id|result_buffer
(braket
l_int|6
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
r_break
suffix:semicolon
id|result
op_assign
id|plci-&gt;saved_msg.info
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|result_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_increment
)paren
id|result
(braket
id|i
)braket
op_assign
id|result_buffer
(braket
id|i
)braket
suffix:semicolon
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
id|participant_parms_pos
op_assign
l_int|0
suffix:semicolon
id|result_pos
op_assign
l_int|7
suffix:semicolon
r_while
c_loop
(paren
id|participant_parms_pos
OL
id|li_req_parms
(braket
l_int|0
)braket
dot
id|length
)paren
(brace
id|result
(braket
id|result_pos
)braket
op_assign
l_int|6
suffix:semicolon
id|result_pos
op_add_assign
l_int|7
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|6
)braket
comma
l_int|0
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|GOOD
)paren
suffix:semicolon
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
op_plus
id|participant_parms_pos
)braket
comma
(paren
id|word
)paren
(paren
id|li_parms
(braket
l_int|1
)braket
dot
id|length
op_minus
id|participant_parms_pos
)paren
comma
l_string|&quot;s&quot;
comma
id|li_participant_struct
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|length
comma
l_string|&quot;d&quot;
comma
id|li_participant_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_MESSAGE_FORMAT
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b_id
op_assign
id|GET_DWORD
(paren
id|li_participant_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_amp
l_int|0xffff
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|6
)braket
comma
id|plci_b_id
)paren
suffix:semicolon
r_if
c_cond
(paren
r_sizeof
(paren
id|result
)paren
op_minus
id|result_pos
OL
l_int|7
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI result overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
comma
id|_WRONG_STATE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci_b
op_assign
id|li2_check_plci_b
(paren
id|Id
comma
id|plci
comma
id|plci_b_id
comma
id|plci_b_write_pos
comma
op_amp
id|result
(braket
id|result_pos
op_minus
l_int|2
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci_b
op_ne
l_int|NULL
)paren
(brace
id|li2_update_connect
(paren
id|Id
comma
id|a
comma
id|plci
comma
id|plci_b_id
comma
id|FALSE
comma
l_int|0
)paren
suffix:semicolon
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|plci_b_id
op_or
id|LI_PLCI_B_DISC_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
)brace
id|participant_parms_pos
op_assign
(paren
id|word
)paren
(paren
(paren
op_amp
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
op_plus
id|li_participant_struct
(braket
l_int|0
)braket
dot
id|length
)braket
)paren
op_minus
(paren
op_amp
id|li_req_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
)brace
id|result
(braket
l_int|0
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|1
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|4
)paren
suffix:semicolon
id|result
(braket
l_int|6
)braket
op_assign
(paren
id|byte
)paren
(paren
id|result_pos
op_minus
l_int|7
)paren
suffix:semicolon
id|i
op_assign
(paren
id|plci_b_write_pos
op_eq
l_int|0
)paren
ques
c_cond
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
suffix:colon
id|plci_b_write_pos
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci_b_write_pos
op_eq
id|plci-&gt;li_plci_b_read_pos
)paren
op_logical_or
(paren
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_amp
id|LI_PLCI_B_LAST_FLAG
)paren
)paren
(brace
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|LI_PLCI_B_SKIP_FLAG
op_or
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
)brace
r_else
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_or_assign
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
)brace
id|mixer_calculate_coefs
(paren
id|a
)paren
suffix:semicolon
id|plci-&gt;li_channel_bits
op_assign
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|channel
suffix:semicolon
id|mixer_notify_update
(paren
id|plci
comma
id|TRUE
)paren
suffix:semicolon
id|sendf
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|Number
comma
l_string|&quot;wwS&quot;
comma
id|Info
comma
id|SELECTOR_LINE_INTERCONNECT
comma
id|result
)paren
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_cmd
op_assign
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|mixer_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|LI_REQ_SILENT_UPDATE
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci
op_logical_or
op_logical_neg
id|plci-&gt;State
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
op_logical_or
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|plci-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_ne
id|plci
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong state&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;li_plci_b_read_pos
OG
id|plci_b_write_pos
)paren
ques
c_cond
id|plci-&gt;li_plci_b_read_pos
suffix:colon
id|LI_PLCI_B_QUEUE_ENTRIES
op_plus
id|plci-&gt;li_plci_b_read_pos
)paren
op_minus
id|plci_b_write_pos
op_minus
l_int|1
OL
l_int|2
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI request overrun&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
id|i
op_assign
(paren
id|plci_b_write_pos
op_eq
l_int|0
)paren
ques
c_cond
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
suffix:colon
id|plci_b_write_pos
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci_b_write_pos
op_eq
id|plci-&gt;li_plci_b_read_pos
)paren
op_logical_or
(paren
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_amp
id|LI_PLCI_B_LAST_FLAG
)paren
)paren
(brace
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|LI_PLCI_B_SKIP_FLAG
op_or
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
)brace
r_else
id|plci-&gt;li_plci_b_queue
(braket
id|i
)braket
op_or_assign
id|LI_PLCI_B_LAST_FLAG
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
id|plci-&gt;li_channel_bits
op_assign
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|channel
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_cmd
op_assign
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|mixer_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_default
suffix:colon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|GET_WORD
(paren
id|li_parms
(braket
l_int|0
)braket
dot
id|info
)paren
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
)brace
)brace
id|sendf
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|Number
comma
l_string|&quot;wwS&quot;
comma
id|Info
comma
id|SELECTOR_LINE_INTERCONNECT
comma
id|result
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
DECL|function|mixer_indication_coefs_set
r_static
r_void
id|mixer_indication_coefs_set
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dword
id|d
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|byte
id|result
(braket
l_int|12
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_indication_coefs_set&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;li_plci_b_read_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
(brace
r_do
(brace
id|d
op_assign
id|plci-&gt;li_plci_b_queue
(braket
id|plci-&gt;li_plci_b_read_pos
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|d
op_amp
id|LI_PLCI_B_SKIP_FLAG
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_OLD_LI_SPEC
)paren
(brace
r_if
c_cond
(paren
id|d
op_amp
id|LI_PLCI_B_DISC_FLAG
)paren
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|LI_IND_DISCONNECT
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|_LI_USER_INITIATED
)paren
suffix:semicolon
)brace
r_else
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|LI_IND_CONNECT_ACTIVE
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|d
op_amp
op_complement
id|LI_PLCI_B_FLAG_MASK
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|d
op_amp
id|LI_PLCI_B_DISC_FLAG
)paren
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|9
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|LI_IND_DISCONNECT
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|6
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|d
op_amp
op_complement
id|LI_PLCI_B_FLAG_MASK
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|8
)braket
comma
id|_LI_USER_INITIATED
)paren
suffix:semicolon
)brace
r_else
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|7
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|LI_IND_CONNECT_ACTIVE
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|4
suffix:semicolon
id|PUT_DWORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|d
op_amp
op_complement
id|LI_PLCI_B_FLAG_MASK
)paren
suffix:semicolon
)brace
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
id|SELECTOR_LINE_INTERCONNECT
comma
id|result
)paren
suffix:semicolon
)brace
id|plci-&gt;li_plci_b_read_pos
op_assign
(paren
id|plci-&gt;li_plci_b_read_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci-&gt;li_plci_b_read_pos
op_plus
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
(paren
id|d
op_amp
id|LI_PLCI_B_LAST_FLAG
)paren
op_logical_and
(paren
id|plci-&gt;li_plci_b_read_pos
op_ne
id|plci-&gt;li_plci_b_req_pos
)paren
)paren
suffix:semicolon
)brace
)brace
DECL|function|mixer_indication_xconnect_from
r_static
r_void
id|mixer_indication_xconnect_from
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
(brace
id|word
id|i
comma
id|j
comma
id|ch
suffix:semicolon
r_struct
id|xconnect_transfer_address_s
id|s
comma
op_star
id|p
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_indication_xconnect_from %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
(paren
r_int
)paren
id|length
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|i
op_assign
l_int|1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_add_assign
l_int|16
)paren
(brace
id|s.card_address.low
op_assign
id|msg
(braket
id|i
)braket
op_or
(paren
id|msg
(braket
id|i
op_plus
l_int|1
)braket
op_lshift
l_int|8
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|2
)braket
)paren
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|3
)braket
)paren
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
id|s.card_address.high
op_assign
id|msg
(braket
id|i
op_plus
l_int|4
)braket
op_or
(paren
id|msg
(braket
id|i
op_plus
l_int|5
)braket
op_lshift
l_int|8
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|6
)braket
)paren
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|7
)braket
)paren
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
id|s.offset
op_assign
id|msg
(braket
id|i
op_plus
l_int|8
)braket
op_or
(paren
id|msg
(braket
id|i
op_plus
l_int|9
)braket
op_lshift
l_int|8
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|10
)braket
)paren
)paren
op_lshift
l_int|16
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|msg
(braket
id|i
op_plus
l_int|11
)braket
)paren
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
id|ch
op_assign
id|msg
(braket
id|i
op_plus
l_int|12
)braket
op_or
(paren
id|msg
(braket
id|i
op_plus
l_int|13
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|j
op_assign
id|ch
op_amp
id|XCONNECT_CHANNEL_NUMBER_MASK
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|2
)paren
)paren
id|j
op_assign
l_int|1
op_minus
id|j
suffix:semicolon
id|j
op_add_assign
id|a-&gt;li_base
suffix:semicolon
r_if
c_cond
(paren
id|ch
op_amp
id|XCONNECT_CHANNEL_PORT_PC
)paren
id|p
op_assign
op_amp
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_pc
)paren
suffix:semicolon
r_else
id|p
op_assign
op_amp
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|send_b
)paren
suffix:semicolon
id|p-&gt;card_address.low
op_assign
id|s.card_address.low
suffix:semicolon
id|p-&gt;card_address.high
op_assign
id|s.card_address.high
suffix:semicolon
id|p-&gt;offset
op_assign
id|s.offset
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_or_assign
id|LI_CHANNEL_ADDRESSES_SET
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
op_logical_and
(paren
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_2
)paren
op_logical_or
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_3
)paren
op_logical_or
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_RESTORE_MIXER_4
)paren
)paren
)paren
(brace
(paren
op_star
(paren
id|plci-&gt;internal_command_queue
(braket
l_int|0
)braket
)paren
)paren
(paren
id|Id
comma
id|plci
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;internal_command
)paren
id|next_internal_command
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
id|mixer_notify_update
(paren
id|plci
comma
id|TRUE
)paren
suffix:semicolon
)brace
DECL|function|mixer_indication_xconnect_to
r_static
r_void
id|mixer_indication_xconnect_to
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_indication_xconnect_to %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
(paren
r_int
)paren
id|length
)paren
)paren
suffix:semicolon
)brace
DECL|function|mixer_notify_source_removed
r_static
id|byte
id|mixer_notify_source_removed
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|plci_b_id
)paren
(brace
id|word
id|plci_b_write_pos
suffix:semicolon
id|plci_b_write_pos
op_assign
id|plci-&gt;li_plci_b_write_pos
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;li_plci_b_read_pos
OG
id|plci_b_write_pos
)paren
ques
c_cond
id|plci-&gt;li_plci_b_read_pos
suffix:colon
id|LI_PLCI_B_QUEUE_ENTRIES
op_plus
id|plci-&gt;li_plci_b_read_pos
)paren
op_minus
id|plci_b_write_pos
op_minus
l_int|1
OL
l_int|1
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: LI request overrun&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
id|plci-&gt;li_plci_b_queue
(braket
id|plci_b_write_pos
)braket
op_assign
id|plci_b_id
op_or
id|LI_PLCI_B_DISC_FLAG
suffix:semicolon
id|plci_b_write_pos
op_assign
(paren
id|plci_b_write_pos
op_eq
id|LI_PLCI_B_QUEUE_ENTRIES
op_minus
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|plci_b_write_pos
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;li_plci_b_write_pos
op_assign
id|plci_b_write_pos
suffix:semicolon
r_return
(paren
id|TRUE
)paren
suffix:semicolon
)brace
DECL|function|mixer_remove
r_static
r_void
id|mixer_remove
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|PLCI
op_star
id|notify_plci
suffix:semicolon
id|dword
id|plci_b_id
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: mixer_remove&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|plci_b_id
op_assign
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;profile.Global_Options
op_amp
id|GL_LINE_INTERCONNECT_SUPPORTED
)paren
(brace
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_or
id|li_config_table
(braket
id|i
)braket
dot
id|channel
)paren
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
op_logical_or
(paren
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_amp
id|LI_FLAG_INTERCONNECT
)paren
)paren
(brace
id|notify_plci
op_assign
id|li_config_table
(braket
id|j
)braket
dot
id|plci
suffix:semicolon
r_if
c_cond
(paren
(paren
id|notify_plci
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|notify_plci
op_ne
id|plci
)paren
op_logical_and
(paren
id|notify_plci-&gt;appl
op_ne
l_int|NULL
)paren
op_logical_and
op_logical_neg
(paren
id|notify_plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_OLD_LI_SPEC
)paren
op_logical_and
(paren
id|notify_plci-&gt;State
)paren
op_logical_and
id|notify_plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|notify_plci-&gt;nl_remove_id
)paren
(brace
id|mixer_notify_source_removed
(paren
id|notify_plci
comma
id|plci_b_id
)paren
suffix:semicolon
)brace
)brace
)brace
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|mixer_calculate_coefs
(paren
id|a
)paren
suffix:semicolon
id|mixer_notify_update
(paren
id|plci
comma
id|TRUE
)paren
suffix:semicolon
)brace
id|li_config_table
(braket
id|i
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Echo canceller facilities                                        */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|ec_write_parameters
r_static
r_void
id|ec_write_parameters
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|w
suffix:semicolon
id|byte
id|parameter_buffer
(braket
l_int|6
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_write_parameters&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|parameter_buffer
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|parameter_buffer
(braket
l_int|1
)braket
op_assign
id|DSP_CTRL_SET_LEC_PARAMETERS
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|parameter_buffer
(braket
l_int|2
)braket
comma
id|plci-&gt;ec_idi_options
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
id|LEC_RESET_COEFFICIENTS
suffix:semicolon
id|w
op_assign
(paren
id|plci-&gt;ec_tail_length
op_eq
l_int|0
)paren
ques
c_cond
l_int|128
suffix:colon
id|plci-&gt;ec_tail_length
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|parameter_buffer
(braket
l_int|4
)braket
comma
id|w
)paren
suffix:semicolon
id|add_p
(paren
id|plci
comma
id|FTY
comma
id|parameter_buffer
)paren
suffix:semicolon
id|sig_req
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
)brace
DECL|function|ec_clear_config
r_static
r_void
id|ec_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_assign
id|LEC_ENABLE_ECHO_CANCELLER
op_or
id|LEC_MANUAL_DISABLE
op_or
id|LEC_ENABLE_NONLINEAR_PROCESSING
suffix:semicolon
id|plci-&gt;ec_tail_length
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|ec_prepare_switch
r_static
r_void
id|ec_prepare_switch
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_prepare_switch&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
)brace
DECL|function|ec_save_config
r_static
id|word
id|ec_save_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_save_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|ec_restore_config
r_static
id|word
id|ec_restore_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_restore_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_EC
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_RESTORE_EC_1
suffix:colon
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_EC_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|ec_write_parameters
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_EC_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_EC_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Restore EC failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
DECL|function|ec_command
r_static
r_void
id|ec_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|internal_command
comma
id|Info
suffix:semicolon
id|byte
id|result
(braket
l_int|8
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_command %02x %04x %04x %04x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
comma
id|plci-&gt;ec_cmd
comma
id|plci-&gt;ec_idi_options
comma
id|plci-&gt;ec_tail_length
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_SUCCESS
)paren
suffix:semicolon
)brace
r_else
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|plci-&gt;ec_cmd
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
)brace
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;ec_cmd
)paren
(brace
r_case
id|EC_ENABLE_OPERATION
suffix:colon
r_case
id|EC_FREEZE_COEFFICIENTS
suffix:colon
r_case
id|EC_RESUME_COEFFICIENT_UPDATE
suffix:colon
r_case
id|EC_RESET_COEFFICIENTS
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_or
id|B1_FACILITY_EC
)paren
comma
id|EC_COMMAND_1
)paren
suffix:semicolon
r_case
id|EC_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Load EC failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_case
id|EC_COMMAND_2
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|EC_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|EC_COMMAND_3
suffix:semicolon
id|ec_write_parameters
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|EC_COMMAND_3
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Enable EC failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|EC_DISABLE_OPERATION
suffix:colon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
(brace
)brace
r_case
id|EC_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_EC
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|EC_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|EC_COMMAND_2
suffix:semicolon
id|ec_write_parameters
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|EC_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Disable EC failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
id|adjust_b1_resource
(paren
id|Id
comma
id|plci
comma
l_int|NULL
comma
(paren
id|word
)paren
(paren
id|plci-&gt;B1_facilities
op_amp
op_complement
id|B1_FACILITY_EC
)paren
comma
id|EC_COMMAND_3
)paren
suffix:semicolon
r_case
id|EC_COMMAND_3
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Unload EC failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|plci-&gt;number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
ques
c_cond
id|PRIV_SELECTOR_ECHO_CANCELLER
suffix:colon
id|SELECTOR_ECHO_CANCELLER
comma
id|result
)paren
suffix:semicolon
)brace
DECL|function|ec_request
r_static
id|byte
id|ec_request
(paren
id|dword
id|Id
comma
id|word
id|Number
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
comma
id|APPL
op_star
id|appl
comma
id|API_PARSE
op_star
id|msg
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|opt
suffix:semicolon
id|API_PARSE
id|ec_parms
(braket
l_int|3
)braket
suffix:semicolon
id|byte
id|result
(braket
l_int|16
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_request&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;man_profile.private_options
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_ECHO_CANCELLER
)paren
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Facility not supported&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_FACILITY_NOT_SUPPORTED
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;w&quot;
comma
id|ec_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|plci
op_eq
l_int|NULL
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong PLCI&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;State
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong state&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ec_cmd
op_assign
id|GET_WORD
(paren
id|ec_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
(paren
id|LEC_MANUAL_DISABLE
op_or
id|LEC_RESET_COEFFICIENTS
)paren
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_SUCCESS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|1
)braket
dot
id|length
op_ge
l_int|4
)paren
(brace
id|opt
op_assign
id|GET_WORD
(paren
op_amp
id|ec_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
(paren
id|LEC_ENABLE_NONLINEAR_PROCESSING
op_or
id|LEC_ENABLE_2100HZ_DETECTOR
op_or
id|LEC_REQUIRE_2100HZ_REVERSALS
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|opt
op_amp
id|EC_DISABLE_NON_LINEAR_PROCESSING
)paren
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_ENABLE_NONLINEAR_PROCESSING
suffix:semicolon
r_if
c_cond
(paren
id|opt
op_amp
id|EC_DETECT_DISABLE_TONE
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_ENABLE_2100HZ_DETECTOR
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|opt
op_amp
id|EC_DO_NOT_REQUIRE_REVERSALS
)paren
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_REQUIRE_2100HZ_REVERSALS
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|1
)braket
dot
id|length
op_ge
l_int|6
)paren
(brace
id|plci-&gt;ec_tail_length
op_assign
id|GET_WORD
(paren
op_amp
id|ec_parms
(braket
l_int|0
)braket
dot
id|info
(braket
l_int|4
)braket
)paren
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|plci-&gt;ec_cmd
)paren
(brace
r_case
id|EC_ENABLE_OPERATION
suffix:colon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
id|LEC_FREEZE_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|EC_DISABLE_OPERATION
suffix:colon
id|plci-&gt;ec_idi_options
op_assign
id|LEC_ENABLE_ECHO_CANCELLER
op_or
id|LEC_MANUAL_DISABLE
op_or
id|LEC_ENABLE_NONLINEAR_PROCESSING
op_or
id|LEC_RESET_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|EC_FREEZE_COEFFICIENTS
suffix:colon
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_FREEZE_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|EC_RESUME_COEFFICIENT_UPDATE
suffix:colon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
id|LEC_FREEZE_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|EC_RESET_COEFFICIENTS
suffix:colon
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_RESET_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_default
suffix:colon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: EC unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;ec_cmd
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_UNSUPPORTED_OPERATION
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|api_parse
(paren
op_amp
id|msg
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
comma
id|msg
(braket
l_int|1
)braket
dot
id|length
comma
l_string|&quot;ws&quot;
comma
id|ec_parms
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong message format&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_MESSAGE_FORMAT
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|GET_WORD
(paren
id|ec_parms
(braket
l_int|0
)braket
dot
id|info
)paren
op_eq
id|EC_GET_SUPPORTED_SERVICES
)paren
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|11
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_GET_SUPPORTED_SERVICES
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|8
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|6
)braket
comma
l_int|0x0007
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|8
)braket
comma
id|LEC_MAX_SUPPORTED_TAIL_LENGTH
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|10
)braket
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|plci
op_eq
l_int|NULL
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong PLCI&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_IDENTIFIER
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;State
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Wrong state&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;ec_cmd
op_assign
id|GET_WORD
(paren
id|ec_parms
(braket
l_int|0
)braket
dot
id|info
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
(paren
id|LEC_MANUAL_DISABLE
op_or
id|LEC_RESET_COEFFICIENTS
)paren
suffix:semicolon
id|result
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|plci-&gt;ec_cmd
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|GOOD
)paren
suffix:semicolon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
(paren
id|LEC_ENABLE_NONLINEAR_PROCESSING
op_or
id|LEC_ENABLE_2100HZ_DETECTOR
op_or
id|LEC_REQUIRE_2100HZ_REVERSALS
)paren
suffix:semicolon
id|plci-&gt;ec_tail_length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ec_parms
(braket
l_int|1
)braket
dot
id|length
op_ge
l_int|2
)paren
(brace
id|opt
op_assign
id|GET_WORD
(paren
op_amp
id|ec_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|opt
op_amp
id|EC_ENABLE_NON_LINEAR_PROCESSING
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_ENABLE_NONLINEAR_PROCESSING
suffix:semicolon
r_if
c_cond
(paren
id|opt
op_amp
id|EC_DETECT_DISABLE_TONE
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_ENABLE_2100HZ_DETECTOR
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|opt
op_amp
id|EC_DO_NOT_REQUIRE_REVERSALS
)paren
)paren
id|plci-&gt;ec_idi_options
op_or_assign
id|LEC_REQUIRE_2100HZ_REVERSALS
suffix:semicolon
r_if
c_cond
(paren
id|ec_parms
(braket
l_int|1
)braket
dot
id|length
op_ge
l_int|4
)paren
(brace
id|plci-&gt;ec_tail_length
op_assign
id|GET_WORD
(paren
op_amp
id|ec_parms
(braket
l_int|1
)braket
dot
id|info
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|plci-&gt;ec_cmd
)paren
(brace
r_case
id|EC_ENABLE_OPERATION
suffix:colon
id|plci-&gt;ec_idi_options
op_and_assign
op_complement
id|LEC_FREEZE_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_case
id|EC_DISABLE_OPERATION
suffix:colon
id|plci-&gt;ec_idi_options
op_assign
id|LEC_ENABLE_ECHO_CANCELLER
op_or
id|LEC_MANUAL_DISABLE
op_or
id|LEC_ENABLE_NONLINEAR_PROCESSING
op_or
id|LEC_RESET_COEFFICIENTS
suffix:semicolon
id|start_internal_command
(paren
id|Id
comma
id|plci
comma
id|ec_command
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
r_default
suffix:colon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: EC unknown request %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;ec_cmd
)paren
)paren
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|_FACILITY_SPECIFIC_FUNCTION_NOT_SUPP
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|sendf
(paren
id|appl
comma
id|_FACILITY_R
op_or
id|CONFIRM
comma
id|Id
op_amp
l_int|0xffffL
comma
id|Number
comma
l_string|&quot;wws&quot;
comma
id|Info
comma
(paren
id|appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
ques
c_cond
id|PRIV_SELECTOR_ECHO_CANCELLER
suffix:colon
id|SELECTOR_ECHO_CANCELLER
comma
id|result
)paren
suffix:semicolon
r_return
(paren
id|FALSE
)paren
suffix:semicolon
)brace
DECL|function|ec_indication
r_static
r_void
id|ec_indication
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
op_star
id|msg
comma
id|word
id|length
)paren
(brace
id|byte
id|result
(braket
l_int|8
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: ec_indication&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;ec_idi_options
op_amp
id|LEC_MANUAL_DISABLE
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
l_int|0
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|msg
(braket
l_int|1
)braket
)paren
(brace
r_case
id|LEC_DISABLE_TYPE_CONTIGNUOUS_2100HZ
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_BYPASS_DUE_TO_CONTINUOUS_2100HZ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LEC_DISABLE_TYPE_REVERSED_2100HZ
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_BYPASS_DUE_TO_REVERSED_2100HZ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LEC_DISABLE_RELEASED
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_BYPASS_RELEASED
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|result
(braket
l_int|0
)braket
op_assign
l_int|5
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|1
)braket
comma
id|EC_BYPASS_INDICATION
)paren
suffix:semicolon
id|result
(braket
l_int|3
)braket
op_assign
l_int|2
suffix:semicolon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
l_int|0
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|msg
(braket
l_int|1
)braket
)paren
(brace
r_case
id|LEC_DISABLE_TYPE_CONTIGNUOUS_2100HZ
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|EC_BYPASS_DUE_TO_CONTINUOUS_2100HZ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LEC_DISABLE_TYPE_REVERSED_2100HZ
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|EC_BYPASS_DUE_TO_REVERSED_2100HZ
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LEC_DISABLE_RELEASED
suffix:colon
id|PUT_WORD
(paren
op_amp
id|result
(braket
l_int|4
)braket
comma
id|EC_BYPASS_RELEASED
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
(paren
id|plci-&gt;appl-&gt;appl_flags
op_amp
id|APPL_FLAG_PRIV_EC_SPEC
)paren
ques
c_cond
id|PRIV_SELECTOR_ECHO_CANCELLER
suffix:colon
id|SELECTOR_ECHO_CANCELLER
comma
id|result
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Advanced voice                                                   */
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|adv_voice_write_coefs
r_static
r_void
id|adv_voice_write_coefs
(paren
id|PLCI
op_star
id|plci
comma
id|word
id|write_command
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|word
id|w
comma
id|n
comma
id|j
comma
id|k
suffix:semicolon
id|byte
id|ch_map
(braket
id|MIXER_CHANNELS_BRI
)braket
suffix:semicolon
id|byte
id|coef_buffer
(braket
id|ADV_VOICE_COEF_BUFFER_SIZE
op_plus
l_int|2
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_write_coefs %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|write_command
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|p
op_assign
id|coef_buffer
op_plus
l_int|1
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
id|DSP_CTRL_OLD_SET_MIXER_COEFFICIENTS
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|i
op_plus
r_sizeof
(paren
id|word
)paren
op_le
id|a-&gt;adv_voice_coef_length
)paren
(brace
id|PUT_WORD
(paren
id|p
comma
id|GET_WORD
(paren
id|a-&gt;adv_voice_coef_buffer
op_plus
id|i
)paren
)paren
suffix:semicolon
id|p
op_add_assign
l_int|2
suffix:semicolon
id|i
op_add_assign
l_int|2
suffix:semicolon
)brace
r_while
c_loop
(paren
id|i
OL
id|ADV_VOICE_OLD_COEF_COUNT
op_star
r_sizeof
(paren
id|word
)paren
)paren
(brace
id|PUT_WORD
(paren
id|p
comma
l_int|0x8000
)paren
suffix:semicolon
id|p
op_add_assign
l_int|2
suffix:semicolon
id|i
op_add_assign
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_eq
l_int|0
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|a-&gt;li_base
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
l_int|1
)braket
dot
id|plci
op_ne
l_int|NULL
)paren
)paren
(brace
id|plci-&gt;li_bchannel_id
op_assign
l_int|1
suffix:semicolon
id|li_config_table
(braket
id|a-&gt;li_base
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_set_bchannel_id %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|li_config_table
(braket
id|a-&gt;li_base
)braket
dot
id|plci
op_ne
l_int|NULL
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
l_int|1
)braket
dot
id|plci
op_eq
l_int|NULL
)paren
)paren
(brace
id|plci-&gt;li_bchannel_id
op_assign
l_int|2
suffix:semicolon
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
l_int|1
)braket
dot
id|plci
op_assign
id|plci
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_set_bchannel_id %d&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|write_command
)paren
(brace
r_case
id|ADV_VOICE_WRITE_ACTIVATION
suffix:colon
id|j
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|k
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
)paren
(brace
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_MONITOR
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
(brace
id|li_config_table
(braket
id|k
)braket
dot
id|flag_table
(braket
id|i
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_MIX
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|k
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
op_or
id|LI_FLAG_MONITOR
suffix:semicolon
id|li_config_table
(braket
id|k
)braket
dot
id|flag_table
(braket
id|j
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|k
)braket
op_or_assign
id|LI_FLAG_CONFERENCE
suffix:semicolon
)brace
id|mixer_calculate_coefs
(paren
id|a
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
id|li_config_table
(braket
id|i
)braket
dot
id|channel
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|curchnl
op_assign
id|li_config_table
(braket
id|j
)braket
dot
id|channel
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
id|li_config_table
(braket
id|k
)braket
dot
id|curchnl
op_assign
id|li_config_table
(braket
id|k
)braket
dot
id|channel
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ADV_VOICE_WRITE_DEACTIVATION
suffix:colon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|k
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|k
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|k
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
(brace
id|k
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|k
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|k
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|mixer_calculate_coefs
(paren
id|a
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
(brace
id|w
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_le
id|a-&gt;adv_voice_coef_length
)paren
id|w
op_assign
id|GET_WORD
(paren
id|a-&gt;adv_voice_coef_buffer
op_plus
id|ADV_VOICE_NEW_COEF_BASE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_TX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_TX_DATA
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_RX_DATA
)paren
id|w
op_or_assign
id|MIXER_FEATURE_ENABLE_RX_DATA
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
id|w
suffix:semicolon
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|byte
)paren
(paren
id|w
op_rshift
l_int|8
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
r_sizeof
(paren
id|ch_map
)paren
suffix:semicolon
id|j
op_add_assign
l_int|2
)paren
(brace
id|ch_map
(braket
id|j
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|ch_map
(braket
id|j
op_plus
l_int|1
)braket
op_assign
(paren
id|byte
)paren
(paren
id|j
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
r_sizeof
(paren
id|mixer_write_prog_bri
)paren
op_div
r_sizeof
(paren
id|mixer_write_prog_bri
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|n
op_increment
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|to_ch
)braket
suffix:semicolon
id|j
op_assign
id|a-&gt;li_base
op_plus
id|ch_map
(braket
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|from_ch
)braket
suffix:semicolon
r_if
c_cond
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_amp
id|li_config_table
(braket
id|j
)braket
dot
id|channel
op_amp
id|LI_CHANNEL_INVOLVED
)paren
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
ques
c_cond
l_int|0x80
suffix:colon
l_int|0x01
)paren
suffix:semicolon
id|w
op_assign
(paren
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_amp
l_int|0xf
)paren
op_xor
(paren
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_rshift
l_int|4
)paren
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_xor_assign
(paren
id|w
op_amp
id|mixer_write_prog_bri
(braket
id|n
)braket
dot
id|mask
)paren
op_lshift
l_int|4
suffix:semicolon
)brace
r_else
(brace
op_star
(paren
id|p
op_increment
)paren
op_assign
(paren
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|n
OL
id|a-&gt;adv_voice_coef_length
)paren
ques
c_cond
id|a-&gt;adv_voice_coef_buffer
(braket
id|ADV_VOICE_NEW_COEF_BASE
op_plus
r_sizeof
(paren
id|word
)paren
op_plus
id|n
)braket
suffix:colon
l_int|0x00
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
id|ADV_VOICE_NEW_COEF_BASE
suffix:semicolon
id|i
OL
id|a-&gt;adv_voice_coef_length
suffix:semicolon
id|i
op_increment
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
id|a-&gt;adv_voice_coef_buffer
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
id|ADV_VOICE_NEW_COEF_BASE
suffix:semicolon
id|i
OL
id|a-&gt;adv_voice_coef_length
suffix:semicolon
id|i
op_increment
)paren
op_star
(paren
id|p
op_increment
)paren
op_assign
id|a-&gt;adv_voice_coef_buffer
(braket
id|i
)braket
suffix:semicolon
)brace
id|coef_buffer
(braket
l_int|0
)braket
op_assign
(paren
id|p
op_minus
id|coef_buffer
)paren
op_minus
l_int|1
suffix:semicolon
id|add_p
(paren
id|plci
comma
id|FTY
comma
id|coef_buffer
)paren
suffix:semicolon
id|sig_req
(paren
id|plci
comma
id|TEL_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
)brace
DECL|function|adv_voice_clear_config
r_static
r_void
id|adv_voice_clear_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|i
comma
id|j
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_clear_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
)paren
(brace
id|a-&gt;adv_voice_coef_length
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;li_pri
op_logical_and
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|i
)braket
op_or_assign
id|LI_COEF_CH_PC_SET
op_or
id|LI_COEF_PC_CH_SET
suffix:semicolon
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SLAVE_CODEC
)paren
(brace
id|i
op_assign
id|a-&gt;li_base
op_plus
id|MIXER_IC_CHANNEL_BASE
op_plus
(paren
l_int|2
op_minus
id|plci-&gt;li_bchannel_id
)paren
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|curchnl
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|channel
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|chflags
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|li_total_channels
suffix:semicolon
id|j
op_increment
)paren
(brace
id|li_config_table
(braket
id|i
)braket
dot
id|flag_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|flag_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|i
)braket
dot
id|coef_table
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
id|li_config_table
(braket
id|j
)braket
dot
id|coef_table
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
DECL|function|adv_voice_prepare_switch
r_static
r_void
id|adv_voice_prepare_switch
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_prepare_switch&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
)brace
DECL|function|adv_voice_save_config
r_static
id|word
id|adv_voice_save_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_save_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
r_return
(paren
id|GOOD
)paren
suffix:semicolon
)brace
DECL|function|adv_voice_restore_config
r_static
id|word
id|adv_voice_restore_config
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|Info
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adv_voice_restore_config %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;B1_facilities
op_amp
id|B1_FACILITY_VOICE
)paren
op_logical_and
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|a-&gt;AdvSignalPLCI
)paren
)paren
(brace
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_RESTORE_VOICE_1
suffix:colon
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_VOICE_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|adv_voice_write_coefs
(paren
id|plci
comma
id|ADV_VOICE_WRITE_UPDATE
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_VOICE_2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_VOICE_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Restore voice config failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* B1 resource switching                                            */
multiline_comment|/*------------------------------------------------------------------*/
DECL|variable|b1_facilities_table
r_static
id|byte
id|b1_facilities_table
(braket
)braket
op_assign
(brace
l_int|0x00
comma
multiline_comment|/* 0  No bchannel resources      */
l_int|0x00
comma
multiline_comment|/* 1  Codec (automatic law)      */
l_int|0x00
comma
multiline_comment|/* 2  Codec (A-law)              */
l_int|0x00
comma
multiline_comment|/* 3  Codec (y-law)              */
l_int|0x00
comma
multiline_comment|/* 4  HDLC for X.21              */
l_int|0x00
comma
multiline_comment|/* 5  HDLC                       */
l_int|0x00
comma
multiline_comment|/* 6  External Device 0          */
l_int|0x00
comma
multiline_comment|/* 7  External Device 1          */
l_int|0x00
comma
multiline_comment|/* 8  HDLC 56k                   */
l_int|0x00
comma
multiline_comment|/* 9  Transparent                */
l_int|0x00
comma
multiline_comment|/* 10 Loopback to network        */
l_int|0x00
comma
multiline_comment|/* 11 Test pattern to net        */
l_int|0x00
comma
multiline_comment|/* 12 Rate adaptation sync       */
l_int|0x00
comma
multiline_comment|/* 13 Rate adaptation async      */
l_int|0x00
comma
multiline_comment|/* 14 R-Interface                */
l_int|0x00
comma
multiline_comment|/* 15 HDLC 128k leased line      */
l_int|0x00
comma
multiline_comment|/* 16 FAX                        */
l_int|0x00
comma
multiline_comment|/* 17 Modem async                */
l_int|0x00
comma
multiline_comment|/* 18 Modem sync HDLC            */
l_int|0x00
comma
multiline_comment|/* 19 V.110 async HDLC           */
l_int|0x12
comma
multiline_comment|/* 20 Adv voice (Trans,mixer)    */
l_int|0x00
comma
multiline_comment|/* 21 Codec connected to IC      */
l_int|0x0c
comma
multiline_comment|/* 22 Trans,DTMF                 */
l_int|0x1e
comma
multiline_comment|/* 23 Trans,DTMF+mixer           */
l_int|0x1f
comma
multiline_comment|/* 24 Trans,DTMF+mixer+local     */
l_int|0x13
comma
multiline_comment|/* 25 Trans,mixer+local          */
l_int|0x12
comma
multiline_comment|/* 26 HDLC,mixer                 */
l_int|0x12
comma
multiline_comment|/* 27 HDLC 56k,mixer             */
l_int|0x2c
comma
multiline_comment|/* 28 Trans,LEC+DTMF             */
l_int|0x3e
comma
multiline_comment|/* 29 Trans,LEC+DTMF+mixer       */
l_int|0x3f
comma
multiline_comment|/* 30 Trans,LEC+DTMF+mixer+local */
l_int|0x2c
comma
multiline_comment|/* 31 RTP,LEC+DTMF               */
l_int|0x3e
comma
multiline_comment|/* 32 RTP,LEC+DTMF+mixer         */
l_int|0x3f
comma
multiline_comment|/* 33 RTP,LEC+DTMF+mixer+local   */
l_int|0x00
comma
multiline_comment|/* 34 Signaling task             */
l_int|0x00
comma
multiline_comment|/* 35 PIAFS                      */
l_int|0x0c
comma
multiline_comment|/* 36 Trans,DTMF+TONE            */
l_int|0x1e
comma
multiline_comment|/* 37 Trans,DTMF+TONE+mixer      */
l_int|0x1f
multiline_comment|/* 38 Trans,DTMF+TONE+mixer+local*/
)brace
suffix:semicolon
DECL|function|get_b1_facilities
r_static
id|word
id|get_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|b1_resource
)paren
(brace
id|word
id|b1_facilities
suffix:semicolon
id|b1_facilities
op_assign
id|b1_facilities_table
(braket
id|b1_resource
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|b1_resource
op_eq
l_int|9
)paren
op_logical_or
(paren
id|b1_resource
op_eq
l_int|20
)paren
op_logical_or
(paren
id|b1_resource
op_eq
l_int|25
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
op_logical_or
(paren
id|plci-&gt;appl
op_logical_and
(paren
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_SEND
)paren
id|b1_facilities
op_or_assign
id|B1_FACILITY_DTMFX
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_RECEIVE
)paren
id|b1_facilities
op_or_assign
id|B1_FACILITY_DTMFR
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|b1_resource
op_eq
l_int|17
)paren
op_logical_or
(paren
id|b1_resource
op_eq
l_int|18
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
(paren
id|MANUFACTURER_FEATURE_V18
op_or
id|MANUFACTURER_FEATURE_VOWN
)paren
)paren
id|b1_facilities
op_or_assign
id|B1_FACILITY_DTMFX
op_or
id|B1_FACILITY_DTMFR
suffix:semicolon
)brace
multiline_comment|/*&n;  dbug (1, dprintf (&quot;[%06lx] %s,%d: get_b1_facilities %d %04x&quot;,&n;    (dword)((plci-&gt;Id &lt;&lt; 8) | UnMapController (plci-&gt;adapter-&gt;Id)),&n;    (char far *)(FILE_), __LINE__, b1_resource, b1_facilites));&n;*/
r_return
(paren
id|b1_facilities
)paren
suffix:semicolon
)brace
DECL|function|add_b1_facilities
r_static
id|byte
id|add_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|b1_resource
comma
id|word
id|b1_facilities
)paren
(brace
id|byte
id|b
suffix:semicolon
r_switch
c_cond
(paren
id|b1_resource
)paren
(brace
r_case
l_int|5
suffix:colon
r_case
l_int|26
suffix:colon
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|26
suffix:semicolon
r_else
id|b
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
r_case
l_int|27
suffix:colon
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|27
suffix:semicolon
r_else
id|b
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|9
suffix:colon
r_case
l_int|20
suffix:colon
r_case
l_int|22
suffix:colon
r_case
l_int|23
suffix:colon
r_case
l_int|24
suffix:colon
r_case
l_int|25
suffix:colon
r_case
l_int|28
suffix:colon
r_case
l_int|29
suffix:colon
r_case
l_int|30
suffix:colon
r_case
l_int|36
suffix:colon
r_case
l_int|37
suffix:colon
r_case
l_int|38
suffix:colon
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_EC
)paren
(brace
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_LOCAL
)paren
id|b
op_assign
l_int|30
suffix:semicolon
r_else
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|29
suffix:semicolon
r_else
id|b
op_assign
l_int|28
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_DTMFX
op_or
id|B1_FACILITY_DTMFR
op_or
id|B1_FACILITY_MIXER
)paren
)paren
op_logical_and
(paren
(paren
(paren
id|plci-&gt;requested_options_conn
op_or
id|plci-&gt;requested_options
)paren
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
op_logical_or
(paren
id|plci-&gt;appl
op_logical_and
(paren
id|plci-&gt;adapter-&gt;requested_options_table
(braket
id|plci-&gt;appl-&gt;Id
op_minus
l_int|1
)braket
op_amp
(paren
l_int|1L
op_lshift
id|PRIVATE_DTMF_TONE
)paren
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_LOCAL
)paren
id|b
op_assign
l_int|38
suffix:semicolon
r_else
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|37
suffix:semicolon
r_else
id|b
op_assign
l_int|36
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_HARDDTMF
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_RECEIVE
)paren
)paren
op_logical_or
(paren
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_DTMFR
)paren
op_logical_and
(paren
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
op_logical_or
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_RECEIVE
)paren
)paren
)paren
op_logical_or
(paren
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_DTMFX
)paren
op_logical_and
(paren
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
op_logical_or
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_SOFTDTMF_SEND
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_LOCAL
)paren
id|b
op_assign
l_int|24
suffix:semicolon
r_else
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|23
suffix:semicolon
r_else
id|b
op_assign
l_int|22
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_LOCAL
)paren
id|b
op_assign
l_int|25
suffix:semicolon
r_else
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|20
suffix:semicolon
r_else
id|b
op_assign
l_int|9
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|31
suffix:colon
r_case
l_int|32
suffix:colon
r_case
l_int|33
suffix:colon
r_if
c_cond
(paren
id|b1_facilities
op_amp
id|B1_FACILITY_LOCAL
)paren
id|b
op_assign
l_int|33
suffix:semicolon
r_else
r_if
c_cond
(paren
id|b1_facilities
op_amp
(paren
id|B1_FACILITY_MIXER
op_or
id|B1_FACILITY_VOICE
)paren
)paren
id|b
op_assign
l_int|32
suffix:semicolon
r_else
id|b
op_assign
l_int|31
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|b
op_assign
id|b1_resource
suffix:semicolon
)brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: add_b1_facilities %d %04x %d %04x&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|b1_resource
comma
id|b1_facilities
comma
id|b
comma
id|get_b1_facilities
(paren
id|plci
comma
id|b
)paren
)paren
)paren
suffix:semicolon
r_return
(paren
id|b
)paren
suffix:semicolon
)brace
DECL|function|adjust_b1_facilities
r_static
r_void
id|adjust_b1_facilities
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|new_b1_resource
comma
id|word
id|new_b1_facilities
)paren
(brace
id|word
id|removed_facilities
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adjust_b1_facilities %d %04x %04x&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|new_b1_resource
comma
id|new_b1_facilities
comma
id|new_b1_facilities
op_amp
id|get_b1_facilities
(paren
id|plci
comma
id|new_b1_resource
)paren
)paren
)paren
suffix:semicolon
id|new_b1_facilities
op_and_assign
id|get_b1_facilities
(paren
id|plci
comma
id|new_b1_resource
)paren
suffix:semicolon
id|removed_facilities
op_assign
id|plci-&gt;B1_facilities
op_amp
op_complement
id|new_b1_facilities
suffix:semicolon
r_if
c_cond
(paren
id|removed_facilities
op_amp
id|B1_FACILITY_EC
)paren
id|ec_clear_config
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|removed_facilities
op_amp
id|B1_FACILITY_DTMFR
)paren
(brace
id|dtmf_rec_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_parameter_clear_config
(paren
id|plci
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|removed_facilities
op_amp
id|B1_FACILITY_DTMFX
)paren
id|dtmf_send_clear_config
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|removed_facilities
op_amp
id|B1_FACILITY_MIXER
)paren
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
id|removed_facilities
op_amp
id|B1_FACILITY_VOICE
)paren
id|adv_voice_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;B1_facilities
op_assign
id|new_b1_facilities
suffix:semicolon
)brace
DECL|function|adjust_b_clear
r_static
r_void
id|adjust_b_clear
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adjust_b_clear&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;adjust_b_restore
op_assign
id|FALSE
suffix:semicolon
)brace
DECL|function|adjust_b_process
r_static
id|word
id|adjust_b_process
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|byte
id|b1_resource
suffix:semicolon
id|NCCI
op_star
id|ncci_ptr
suffix:semicolon
id|API_PARSE
id|bp
(braket
l_int|2
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adjust_b_process %02x %d&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;adjust_b_state
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
r_switch
c_cond
(paren
id|plci-&gt;adjust_b_state
)paren
(brace
r_case
id|ADJUST_B_START
suffix:colon
r_if
c_cond
(paren
(paren
id|plci-&gt;adjust_b_parms_msg
op_eq
l_int|NULL
)paren
op_logical_and
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SWITCH_L1
)paren
op_logical_and
(paren
(paren
id|plci-&gt;adjust_b_mode
op_amp
op_complement
(paren
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_SWITCH_L1
op_or
id|ADJUST_B_MODE_NO_RESOURCE
op_or
id|ADJUST_B_MODE_RESTORE
)paren
)paren
op_eq
l_int|0
)paren
)paren
(brace
id|b1_resource
op_assign
(paren
id|plci-&gt;adjust_b_mode
op_eq
id|ADJUST_B_MODE_NO_RESOURCE
)paren
ques
c_cond
l_int|0
suffix:colon
id|add_b1_facilities
(paren
id|plci
comma
id|plci-&gt;B1_resource
comma
id|plci-&gt;adjust_b_facilities
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b1_resource
op_eq
id|plci-&gt;B1_resource
)paren
(brace
id|adjust_b1_facilities
(paren
id|plci
comma
id|b1_resource
comma
id|plci-&gt;adjust_b_facilities
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_facilities
op_amp
op_complement
id|get_b1_facilities
(paren
id|plci
comma
id|b1_resource
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B nonsupported facilities %d %d %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;B1_resource
comma
id|b1_resource
comma
id|plci-&gt;adjust_b_facilities
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|mixer_prepare_switch
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|dtmf_prepare_switch
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|dtmf_parameter_prepare_switch
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|ec_prepare_switch
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
id|adv_voice_prepare_switch
(paren
id|Id
comma
id|plci
)paren
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SAVE_MIXER_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SAVE_MIXER_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|Info
op_assign
id|mixer_save_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SAVE_DTMF_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SAVE_DTMF_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|Info
op_assign
id|dtmf_save_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_REMOVE_L23_1
suffix:semicolon
r_case
id|ADJUST_B_REMOVE_L23_1
suffix:colon
r_if
c_cond
(paren
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_REMOVE_L23
)paren
op_logical_and
id|plci-&gt;NL.Id
op_logical_and
op_logical_neg
id|plci-&gt;nl_remove_id
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_ncci
op_ne
l_int|0
)paren
(brace
id|ncci_ptr
op_assign
op_amp
(paren
id|plci-&gt;adapter-&gt;ncci
(braket
id|plci-&gt;adjust_b_ncci
)braket
)paren
suffix:semicolon
r_while
c_loop
(paren
id|ncci_ptr-&gt;data_pending
)paren
(brace
id|plci-&gt;data_sent_ptr
op_assign
id|ncci_ptr-&gt;DBuffer
(braket
id|ncci_ptr-&gt;data_out
)braket
dot
id|P
suffix:semicolon
id|data_rc
(paren
id|plci
comma
id|plci-&gt;adapter-&gt;ncci_ch
(braket
id|plci-&gt;adjust_b_ncci
)braket
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|ncci_ptr-&gt;data_ack_pending
)paren
id|data_ack
(paren
id|plci
comma
id|plci-&gt;adapter-&gt;ncci_ch
(braket
id|plci-&gt;adjust_b_ncci
)braket
)paren
suffix:semicolon
)brace
id|nl_req_ncci
(paren
id|plci
comma
id|REMOVE
comma
(paren
id|byte
)paren
(paren
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_CONNECT
)paren
ques
c_cond
id|plci-&gt;adjust_b_ncci
suffix:colon
l_int|0
)paren
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_REMOVE_L23_2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_REMOVE_L23_2
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_REMOVE_L23_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B remove failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_REMOVE_L23
)paren
(brace
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SAVE_EC_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SAVE_EC_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|Info
op_assign
id|ec_save_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SAVE_DTMF_PARAMETER_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SAVE_DTMF_PARAMETER_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|Info
op_assign
id|dtmf_parameter_save_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SAVE_VOICE_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SAVE_VOICE_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SAVE
)paren
(brace
id|Info
op_assign
id|adv_voice_save_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SWITCH_L1_1
suffix:semicolon
r_case
id|ADJUST_B_SWITCH_L1_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_SWITCH_L1
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;sig_req
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_parms_msg
op_ne
l_int|NULL
)paren
id|api_load_msg
(paren
id|plci-&gt;adjust_b_parms_msg
comma
id|bp
)paren
suffix:semicolon
r_else
id|api_load_msg
(paren
op_amp
id|plci-&gt;B_protocol
comma
id|bp
)paren
suffix:semicolon
id|Info
op_assign
id|add_b1
(paren
id|plci
comma
id|bp
comma
(paren
id|word
)paren
(paren
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_NO_RESOURCE
)paren
ques
c_cond
l_int|2
suffix:colon
l_int|0
)paren
comma
id|plci-&gt;adjust_b_facilities
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B invalid L1 parameters %d %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;B1_resource
comma
id|plci-&gt;adjust_b_facilities
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
id|sig_req
(paren
id|plci
comma
id|RESOURCES
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SWITCH_L1_2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_SWITCH_L1_2
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_SWITCH_L1_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B switch failed %02x %d %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;B1_resource
comma
id|plci-&gt;adjust_b_facilities
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_VOICE_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_VOICE_1
suffix:colon
r_case
id|ADJUST_B_RESTORE_VOICE_2
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_RESTORE
)paren
(brace
id|Info
op_assign
id|adv_voice_restore_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_PARAMETER_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_DTMF_PARAMETER_1
suffix:colon
r_case
id|ADJUST_B_RESTORE_DTMF_PARAMETER_2
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_RESTORE
)paren
(brace
id|Info
op_assign
id|dtmf_parameter_restore_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_EC_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_EC_1
suffix:colon
r_case
id|ADJUST_B_RESTORE_EC_2
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_RESTORE
)paren
(brace
id|Info
op_assign
id|ec_restore_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_ASSIGN_L23_1
suffix:semicolon
r_case
id|ADJUST_B_ASSIGN_L23_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_ASSIGN_L23
)paren
(brace
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_CONNECT
)paren
id|plci-&gt;call_dir
op_or_assign
id|CALL_DIR_FORCE_OUTG_NL
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_parms_msg
op_ne
l_int|NULL
)paren
id|api_load_msg
(paren
id|plci-&gt;adjust_b_parms_msg
comma
id|bp
)paren
suffix:semicolon
r_else
id|api_load_msg
(paren
op_amp
id|plci-&gt;B_protocol
comma
id|bp
)paren
suffix:semicolon
id|Info
op_assign
id|add_b23
(paren
id|plci
comma
id|bp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B invalid L23 parameters %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Info
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|ASSIGN
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_ASSIGN_L23_2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_ASSIGN_L23_2
suffix:semicolon
id|Rc
op_assign
id|ASSIGN_OK
suffix:semicolon
r_case
id|ADJUST_B_ASSIGN_L23_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
op_logical_and
(paren
id|Rc
op_ne
id|ASSIGN_OK
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B assign failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_ASSIGN_L23
)paren
(brace
r_if
c_cond
(paren
id|Rc
op_ne
id|ASSIGN_OK
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_USER_CONNECT
)paren
(brace
id|plci-&gt;adjust_b_restore
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_CONNECT_1
suffix:semicolon
r_case
id|ADJUST_B_CONNECT_1
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_CONNECT
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
r_break
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|N_CONNECT
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_CONNECT_2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_CONNECT_2
suffix:colon
r_case
id|ADJUST_B_CONNECT_3
suffix:colon
r_case
id|ADJUST_B_CONNECT_4
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
op_logical_and
(paren
id|Rc
op_ne
l_int|0
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B connect failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Rc
op_eq
id|OK
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_CONNECT
)paren
(brace
id|get_ncci
(paren
id|plci
comma
(paren
id|byte
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
comma
id|plci-&gt;adjust_b_ncci
)paren
suffix:semicolon
id|Id
op_assign
(paren
id|Id
op_amp
l_int|0xffff
)paren
op_or
(paren
(paren
(paren
id|dword
)paren
(paren
id|plci-&gt;adjust_b_ncci
)paren
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_2
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_CONNECT_3
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_4
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|Rc
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_2
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_CONNECT_4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_eq
id|ADJUST_B_CONNECT_3
)paren
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_DTMF_1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;adjust_b_state
op_ne
id|ADJUST_B_RESTORE_DTMF_1
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|plci-&gt;adjust_b_command
suffix:semicolon
r_break
suffix:semicolon
)brace
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_DTMF_1
suffix:colon
r_case
id|ADJUST_B_RESTORE_DTMF_2
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_RESTORE
)paren
(brace
id|Info
op_assign
id|dtmf_restore_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_RESTORE_MIXER_1
suffix:semicolon
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_MIXER_1
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_2
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_3
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_4
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_5
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_6
suffix:colon
r_case
id|ADJUST_B_RESTORE_MIXER_7
suffix:colon
r_if
c_cond
(paren
id|plci-&gt;adjust_b_mode
op_amp
id|ADJUST_B_MODE_RESTORE
)paren
(brace
id|Info
op_assign
id|mixer_restore_config
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|Info
op_ne
id|GOOD
)paren
op_logical_or
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_END
suffix:semicolon
r_case
id|ADJUST_B_END
suffix:colon
r_break
suffix:semicolon
)brace
r_return
(paren
id|Info
)paren
suffix:semicolon
)brace
DECL|function|adjust_b1_resource
r_static
r_void
id|adjust_b1_resource
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|API_SAVE
op_star
id|bp_msg
comma
id|word
id|b1_facilities
comma
id|word
id|internal_command
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adjust_b1_resource %d %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;B1_resource
comma
id|b1_facilities
)paren
)paren
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
id|bp_msg
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|b1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|internal_command
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|bp_msg
op_eq
l_int|NULL
)paren
op_logical_and
(paren
id|plci-&gt;B1_resource
op_eq
l_int|0
)paren
)paren
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_NO_RESOURCE
op_or
id|ADJUST_B_MODE_SWITCH_L1
suffix:semicolon
r_else
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_SWITCH_L1
op_or
id|ADJUST_B_MODE_RESTORE
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B1 resource %d %04x...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|plci-&gt;B1_resource
comma
id|b1_facilities
)paren
)paren
suffix:semicolon
)brace
DECL|function|adjust_b_restore
r_static
r_void
id|adjust_b_restore
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: adjust_b_restore %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;req_in
op_ne
l_int|0
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|ADJUST_B_RESTORE_1
suffix:semicolon
r_break
suffix:semicolon
)brace
id|Rc
op_assign
id|OK
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_1
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B enqueued failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
)brace
id|plci-&gt;adjust_b_parms_msg
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|ADJUST_B_RESTORE_2
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_RESTORE
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B restore...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|ADJUST_B_RESTORE_2
suffix:colon
r_if
c_cond
(paren
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Adjust B restore failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_break
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|reset_b3_command
r_static
r_void
id|reset_b3_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: reset_b3_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|RESET_B3_COMMAND_1
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_REMOVE_L23
op_or
id|ADJUST_B_MODE_ASSIGN_L23
op_or
id|ADJUST_B_MODE_CONNECT
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Reset B3...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|RESET_B3_COMMAND_1
suffix:colon
id|Info
op_assign
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Reset failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*  sendf (plci-&gt;appl, _RESET_B3_R | CONFIRM, Id, plci-&gt;number, &quot;w&quot;, Info);*/
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_RESET_B3_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
)brace
DECL|function|select_b_command
r_static
r_void
id|select_b_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|byte
id|esc_chi
(braket
l_int|3
)braket
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: select_b_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
op_amp
id|plci-&gt;saved_msg
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
op_logical_and
(paren
id|plci
op_eq
id|plci-&gt;adapter-&gt;AdvSignalPLCI
)paren
)paren
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
op_or
id|B1_FACILITY_VOICE
suffix:semicolon
r_else
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
op_amp
op_complement
id|B1_FACILITY_VOICE
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|SELECT_B_COMMAND_1
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;saved_msg.parms
(braket
l_int|0
)braket
dot
id|length
op_eq
l_int|0
)paren
(brace
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_REMOVE_L23
op_or
id|ADJUST_B_MODE_SWITCH_L1
op_or
id|ADJUST_B_MODE_NO_RESOURCE
suffix:semicolon
)brace
r_else
(brace
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_REMOVE_L23
op_or
id|ADJUST_B_MODE_SWITCH_L1
op_or
id|ADJUST_B_MODE_ASSIGN_L23
op_or
id|ADJUST_B_MODE_USER_CONNECT
op_or
id|ADJUST_B_MODE_RESTORE
suffix:semicolon
)brace
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Select B protocol...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|SELECT_B_COMMAND_1
suffix:colon
id|Info
op_assign
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: Select B protocol failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;tel
op_eq
id|ADV_VOICE
)paren
(brace
id|esc_chi
(braket
l_int|0
)braket
op_assign
l_int|0x02
suffix:semicolon
id|esc_chi
(braket
l_int|1
)braket
op_assign
l_int|0x18
suffix:semicolon
id|esc_chi
(braket
l_int|2
)braket
op_assign
id|plci-&gt;b_channel
suffix:semicolon
id|SetVoiceChannel
(paren
id|plci-&gt;adapter-&gt;AdvCodecPLCI
comma
id|esc_chi
comma
id|plci-&gt;adapter
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_SELECT_B_REQ
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
)brace
DECL|function|fax_connect_ack_command
r_static
r_void
id|fax_connect_ack_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: fax_connect_ack_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_case
id|FAX_CONNECT_ACK_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_CONNECT_ACK_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|FAX_CONNECT_ACK_COMMAND_2
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;fax_connect_info_buffer
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|plci-&gt;fax_connect_info_length
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_CONNECT_ACK
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|FAX_CONNECT_ACK_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX issue CONNECT ACK failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_VALID_CONNECT_B3_ACT
)paren
op_logical_and
op_logical_neg
(paren
id|plci-&gt;ncpi_state
op_amp
id|NCPI_CONNECT_B3_ACT_SENT
)paren
)paren
(brace
r_if
c_cond
(paren
id|plci-&gt;B3_prot
op_eq
l_int|4
)paren
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_else
id|sendf
c_func
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;S&quot;
comma
id|plci-&gt;ncpi_buffer
)paren
suffix:semicolon
id|plci-&gt;ncpi_state
op_or_assign
id|NCPI_CONNECT_B3_ACT_SENT
suffix:semicolon
)brace
)brace
DECL|function|fax_edata_ack_command
r_static
r_void
id|fax_edata_ack_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: fax_edata_ack_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_case
id|FAX_EDATA_ACK_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_EDATA_ACK_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|FAX_EDATA_ACK_COMMAND_2
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;fax_connect_info_buffer
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|plci-&gt;fax_edata_ack_length
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_EDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|FAX_EDATA_ACK_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX issue EDATA ACK failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
DECL|function|fax_connect_info_command
r_static
r_void
id|fax_connect_info_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: fax_connect_info_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_case
id|FAX_CONNECT_INFO_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_CONNECT_INFO_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|FAX_CONNECT_INFO_COMMAND_2
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;fax_connect_info_buffer
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|plci-&gt;fax_connect_info_length
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_EDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|FAX_CONNECT_INFO_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX setting connect info failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_CONNECT_INFO_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;command
op_assign
id|_CONNECT_B3_R
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|N_CONNECT
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
)brace
DECL|function|fax_adjust_b23_command
r_static
r_void
id|fax_adjust_b23_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: fax_adjust_b23_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|FAX_ADJUST_B23_COMMAND_1
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_REMOVE_L23
op_or
id|ADJUST_B_MODE_ASSIGN_L23
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX adjust B23...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|FAX_ADJUST_B23_COMMAND_1
suffix:colon
id|Info
op_assign
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX adjust failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
r_case
id|FAX_ADJUST_B23_COMMAND_2
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_ADJUST_B23_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;command
op_assign
id|_CONNECT_B3_R
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|N_CONNECT
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
)brace
DECL|function|fax_disconnect_command
r_static
r_void
id|fax_disconnect_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: fax_disconnect_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|FAX_DISCONNECT_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
r_case
id|FAX_DISCONNECT_COMMAND_1
suffix:colon
r_case
id|FAX_DISCONNECT_COMMAND_2
suffix:colon
r_case
id|FAX_DISCONNECT_COMMAND_3
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
op_logical_and
(paren
id|Rc
op_ne
l_int|0
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: FAX disconnect EDATA failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|Rc
op_eq
id|OK
)paren
(brace
r_if
c_cond
(paren
(paren
id|internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_1
)paren
op_logical_or
(paren
id|internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_2
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|FAX_DISCONNECT_COMMAND_2
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|Rc
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|internal_command
op_eq
id|FAX_DISCONNECT_COMMAND_1
)paren
id|plci-&gt;internal_command
op_assign
id|FAX_DISCONNECT_COMMAND_3
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
)brace
DECL|function|rtp_connect_b3_req_command
r_static
r_void
id|rtp_connect_b3_req_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: rtp_connect_b3_req_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_case
id|RTP_CONNECT_B3_REQ_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_REQ_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_REQ_COMMAND_2
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|N_CONNECT
comma
l_int|0
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|RTP_CONNECT_B3_REQ_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: RTP setting connect info failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_REQ_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_REQ_COMMAND_3
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RTP_CONNECT_B3_REQ_COMMAND_3
suffix:colon
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_R
op_or
id|CONFIRM
comma
id|Id
comma
id|plci-&gt;number
comma
l_string|&quot;w&quot;
comma
id|Info
)paren
suffix:semicolon
)brace
DECL|function|rtp_connect_b3_res_command
r_static
r_void
id|rtp_connect_b3_res_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: rtp_connect_b3_res_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
r_case
id|RTP_CONNECT_B3_RES_COMMAND_1
suffix:colon
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_RES_COMMAND_1
suffix:semicolon
r_return
suffix:semicolon
)brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_RES_COMMAND_2
suffix:semicolon
id|nl_req_ncci
(paren
id|plci
comma
id|N_CONNECT_ACK
comma
(paren
id|byte
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
)paren
suffix:semicolon
id|send_req
(paren
id|plci
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|RTP_CONNECT_B3_RES_COMMAND_2
suffix:colon
r_if
c_cond
(paren
(paren
id|Rc
op_ne
id|OK
)paren
op_logical_and
(paren
id|Rc
op_ne
id|OK_FC
)paren
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: RTP setting connect resp info failed %02x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|_WRONG_STATE
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci_nl_busy
(paren
id|plci
)paren
)paren
(brace
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_RES_COMMAND_2
suffix:semicolon
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_CONNECT_B3_ACTIVE_I
comma
id|Id
comma
l_int|0
comma
l_string|&quot;s&quot;
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|RTP_CONNECT_B3_RES_COMMAND_3
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
id|plci-&gt;internal_req_buffer
(braket
l_int|0
)braket
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
id|plci-&gt;internal_req_buffer
op_plus
l_int|1
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_UDATA
suffix:semicolon
id|plci-&gt;adapter-&gt;request
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
r_return
suffix:semicolon
r_case
id|RTP_CONNECT_B3_RES_COMMAND_3
suffix:colon
r_return
suffix:semicolon
)brace
)brace
DECL|function|hold_save_command
r_static
r_void
id|hold_save_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|byte
id|SS_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x02&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
multiline_comment|/* Hold_Ind struct*/
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: hold_save_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;NL.Id
)paren
r_break
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|HOLD_SAVE_COMMAND_1
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_SAVE
op_or
id|ADJUST_B_MODE_REMOVE_L23
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: HOLD save...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|HOLD_SAVE_COMMAND_1
suffix:colon
id|Info
op_assign
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: HOLD save failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
DECL|function|retrieve_restore_command
r_static
r_void
id|retrieve_restore_command
(paren
id|dword
id|Id
comma
id|PLCI
op_star
id|plci
comma
id|byte
id|Rc
)paren
(brace
id|byte
id|SS_Ind
(braket
)braket
op_assign
l_string|&quot;&bslash;x05&bslash;x03&bslash;x00&bslash;x02&bslash;x00&bslash;x00&quot;
suffix:semicolon
multiline_comment|/* Retrieve_Ind struct*/
id|word
id|Info
suffix:semicolon
id|word
id|internal_command
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: retrieve_restore_command %02x %04x&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
comma
id|Rc
comma
id|plci-&gt;internal_command
)paren
)paren
suffix:semicolon
id|Info
op_assign
id|GOOD
suffix:semicolon
id|internal_command
op_assign
id|plci-&gt;internal_command
suffix:semicolon
id|plci-&gt;internal_command
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|internal_command
)paren
(brace
r_default
suffix:colon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adjust_b_parms_msg
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;adjust_b_facilities
op_assign
id|plci-&gt;B1_facilities
suffix:semicolon
id|plci-&gt;adjust_b_command
op_assign
id|RETRIEVE_RESTORE_COMMAND_1
suffix:semicolon
id|plci-&gt;adjust_b_ncci
op_assign
(paren
id|word
)paren
(paren
id|Id
op_rshift
l_int|16
)paren
suffix:semicolon
id|plci-&gt;adjust_b_mode
op_assign
id|ADJUST_B_MODE_ASSIGN_L23
op_or
id|ADJUST_B_MODE_USER_CONNECT
op_or
id|ADJUST_B_MODE_RESTORE
suffix:semicolon
id|plci-&gt;adjust_b_state
op_assign
id|ADJUST_B_START
suffix:semicolon
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: RETRIEVE restore...&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_case
id|RETRIEVE_RESTORE_COMMAND_1
suffix:colon
id|Info
op_assign
id|adjust_b_process
(paren
id|Id
comma
id|plci
comma
id|Rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|Info
op_ne
id|GOOD
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: RETRIEVE restore failed&quot;
comma
id|UnMapId
(paren
id|Id
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|plci-&gt;internal_command
)paren
r_return
suffix:semicolon
)brace
id|sendf
(paren
id|plci-&gt;appl
comma
id|_FACILITY_I
comma
id|Id
op_amp
l_int|0xffffL
comma
l_int|0
comma
l_string|&quot;ws&quot;
comma
l_int|3
comma
id|SS_Ind
)paren
suffix:semicolon
)brace
DECL|function|init_b1_config
r_static
r_void
id|init_b1_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: init_b1_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|plci-&gt;B1_resource
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;B1_facilities
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
l_int|0
suffix:semicolon
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|ec_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_rec_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_send_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_parameter_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|adv_voice_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|adjust_b_clear
(paren
id|plci
)paren
suffix:semicolon
)brace
DECL|function|clear_b1_config
r_static
r_void
id|clear_b1_config
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|dbug
(paren
l_int|1
comma
id|dprintf
(paren
l_string|&quot;[%06lx] %s,%d: clear_b1_config&quot;
comma
(paren
id|dword
)paren
(paren
(paren
id|plci-&gt;Id
op_lshift
l_int|8
)paren
op_or
id|UnMapController
(paren
id|plci-&gt;adapter-&gt;Id
)paren
)paren
comma
(paren
r_char
op_star
)paren
(paren
id|FILE_
)paren
comma
id|__LINE__
)paren
)paren
suffix:semicolon
id|adv_voice_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|adjust_b_clear
(paren
id|plci
)paren
suffix:semicolon
id|ec_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_rec_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_send_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|dtmf_parameter_clear_config
(paren
id|plci
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|plci-&gt;li_bchannel_id
op_ne
l_int|0
)paren
op_logical_and
(paren
id|li_config_table
(braket
id|plci-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_eq
id|plci
)paren
)paren
(brace
id|mixer_clear_config
(paren
id|plci
)paren
suffix:semicolon
id|li_config_table
(braket
id|plci-&gt;adapter-&gt;li_base
op_plus
(paren
id|plci-&gt;li_bchannel_id
op_minus
l_int|1
)paren
)braket
dot
id|plci
op_assign
l_int|NULL
suffix:semicolon
id|plci-&gt;li_bchannel_id
op_assign
l_int|0
suffix:semicolon
)brace
id|plci-&gt;B1_resource
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;B1_facilities
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* -----------------------------------------------------------------&n;                XON protocol local helpers&n;   ----------------------------------------------------------------- */
DECL|function|channel_flow_control_remove
r_static
r_void
id|channel_flow_control_remove
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|word
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|MAX_NL_CHANNEL
op_plus
l_int|1
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;ch_flow_plci
(braket
id|i
)braket
op_eq
id|plci-&gt;Id
)paren
(brace
id|a-&gt;ch_flow_plci
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|a-&gt;ch_flow_control
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
DECL|function|channel_x_on
r_static
r_void
id|channel_x_on
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_amp
id|N_XON_SENT
)paren
(brace
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_and_assign
op_complement
id|N_XON_SENT
suffix:semicolon
)brace
)brace
DECL|function|channel_x_off
r_static
r_void
id|channel_x_off
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
comma
id|byte
id|flag
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
(paren
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_amp
id|N_RX_FLOW_CONTROL_MASK
)paren
op_eq
l_int|0
)paren
(brace
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_or_assign
(paren
id|N_CH_XOFF
op_or
id|flag
)paren
suffix:semicolon
id|a-&gt;ch_flow_plci
(braket
id|ch
)braket
op_assign
id|plci-&gt;Id
suffix:semicolon
id|a-&gt;ch_flow_control_pending
op_increment
suffix:semicolon
)brace
)brace
DECL|function|channel_request_xon
r_static
r_void
id|channel_request_xon
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_amp
id|N_CH_XOFF
)paren
(brace
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_or_assign
id|N_XON_REQ
suffix:semicolon
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_and_assign
op_complement
id|N_CH_XOFF
suffix:semicolon
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_and_assign
op_complement
id|N_XON_CONNECT_IND
suffix:semicolon
)brace
)brace
DECL|function|channel_xmit_extended_xon
r_static
r_void
id|channel_xmit_extended_xon
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
r_int
id|max_ch
op_assign
r_sizeof
(paren
id|a-&gt;ch_flow_control
)paren
op_div
r_sizeof
(paren
id|a-&gt;ch_flow_control
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_int
id|i
comma
id|one_requested
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
op_logical_neg
id|plci
)paren
op_logical_or
(paren
op_logical_neg
id|plci-&gt;Id
)paren
op_logical_or
(paren
(paren
id|a
op_assign
id|plci-&gt;adapter
)paren
op_eq
l_int|0
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_ch
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ch_flow_control
(braket
id|i
)braket
op_amp
id|N_CH_XOFF
)paren
op_logical_and
(paren
id|a-&gt;ch_flow_control
(braket
id|i
)braket
op_amp
id|N_XON_CONNECT_IND
)paren
op_logical_and
(paren
id|plci-&gt;Id
op_eq
id|a-&gt;ch_flow_plci
(braket
id|i
)braket
)paren
)paren
(brace
id|channel_request_xon
(paren
id|plci
comma
(paren
id|byte
)paren
id|i
)paren
suffix:semicolon
id|one_requested
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|one_requested
)paren
(brace
id|channel_xmit_xon
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;  Try to xmit next X_ON&n;  */
DECL|function|find_channel_with_pending_x_on
r_static
r_int
id|find_channel_with_pending_x_on
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
)paren
(brace
r_int
id|max_ch
op_assign
r_sizeof
(paren
id|a-&gt;ch_flow_control
)paren
op_div
r_sizeof
(paren
id|a-&gt;ch_flow_control
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|plci-&gt;adapter-&gt;manufacturer_features
op_amp
id|MANUFACTURER_FEATURE_XONOFF_FLOW_CONTROL
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|a-&gt;last_flow_control_ch
op_ge
id|max_ch
)paren
(brace
id|a-&gt;last_flow_control_ch
op_assign
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
id|a-&gt;last_flow_control_ch
suffix:semicolon
id|i
OL
id|max_ch
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ch_flow_control
(braket
id|i
)braket
op_amp
id|N_XON_REQ
)paren
op_logical_and
(paren
id|plci-&gt;Id
op_eq
id|a-&gt;ch_flow_plci
(braket
id|i
)braket
)paren
)paren
(brace
id|a-&gt;last_flow_control_ch
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
r_return
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|a-&gt;last_flow_control_ch
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|a-&gt;ch_flow_control
(braket
id|i
)braket
op_amp
id|N_XON_REQ
)paren
op_logical_and
(paren
id|plci-&gt;Id
op_eq
id|a-&gt;ch_flow_plci
(braket
id|i
)braket
)paren
)paren
(brace
id|a-&gt;last_flow_control_ch
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
r_return
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|channel_xmit_xon
r_static
r_void
id|channel_xmit_xon
(paren
id|PLCI
op_star
id|plci
)paren
(brace
id|DIVA_CAPI_ADAPTER
op_star
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
id|byte
id|ch
suffix:semicolon
r_if
c_cond
(paren
id|plci-&gt;nl_req
op_logical_or
op_logical_neg
id|plci-&gt;NL.Id
op_logical_or
id|plci-&gt;nl_remove_id
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ch
op_assign
(paren
id|byte
)paren
id|find_channel_with_pending_x_on
(paren
id|a
comma
id|plci
)paren
)paren
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_and_assign
op_complement
id|N_XON_REQ
suffix:semicolon
id|a-&gt;ch_flow_control
(braket
id|ch
)braket
op_or_assign
id|N_XON_SENT
suffix:semicolon
id|plci-&gt;NL.Req
op_assign
id|plci-&gt;nl_req
op_assign
(paren
id|byte
)paren
id|N_XON
suffix:semicolon
id|plci-&gt;NL.ReqCh
op_assign
id|ch
suffix:semicolon
id|plci-&gt;NL.X
op_assign
id|plci-&gt;NData
suffix:semicolon
id|plci-&gt;NL.XNum
op_assign
l_int|1
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|P
op_assign
op_amp
id|plci-&gt;RBuffer
(braket
l_int|0
)braket
suffix:semicolon
id|plci-&gt;NData
(braket
l_int|0
)braket
dot
id|PLength
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;adapter
op_member_access_from_pointer
id|request
c_func
(paren
op_amp
id|plci-&gt;NL
)paren
suffix:semicolon
)brace
DECL|function|channel_can_xon
r_static
r_int
id|channel_can_xon
(paren
id|PLCI
op_star
id|plci
comma
id|byte
id|ch
)paren
(brace
id|APPL
op_star
id|APPLptr
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
id|word
id|NCCIcode
suffix:semicolon
id|dword
id|count
suffix:semicolon
id|word
id|Num
suffix:semicolon
id|word
id|i
suffix:semicolon
id|APPLptr
op_assign
id|plci-&gt;appl
suffix:semicolon
id|a
op_assign
id|plci-&gt;adapter
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|APPLptr
)paren
r_return
(paren
l_int|0
)paren
suffix:semicolon
id|NCCIcode
op_assign
id|a-&gt;ch_ncci
(braket
id|ch
)braket
op_or
(paren
(paren
(paren
id|word
)paren
id|a-&gt;Id
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* count all buffers within the Application pool    */
multiline_comment|/* belonging to the same NCCI. XON if a first is    */
multiline_comment|/* used.                                            */
id|count
op_assign
l_int|0
suffix:semicolon
id|Num
op_assign
l_int|0xffff
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|APPLptr-&gt;MaxBuffer
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|NCCIcode
op_eq
id|APPLptr-&gt;DataNCCI
(braket
id|i
)braket
)paren
(brace
id|count
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|APPLptr-&gt;DataNCCI
(braket
id|i
)braket
op_logical_and
id|Num
op_eq
l_int|0xffff
)paren
(brace
id|Num
op_assign
id|i
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|count
OG
l_int|2
)paren
op_logical_or
(paren
id|Num
op_eq
l_int|0xffff
)paren
)paren
(brace
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|CPN_filter_ok
r_static
id|word
id|CPN_filter_ok
c_func
(paren
id|byte
op_star
id|cpn
comma
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|word
id|offset
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/**********************************************************************************/
multiline_comment|/* function groups the listening applications according to the CIP mask and the   */
multiline_comment|/* Info_Mask. Each group gets just one Connect_Ind. Some application manufacturer */
multiline_comment|/* are not multi-instance capable, so they start e.g. 30 applications what causes */
multiline_comment|/* big problems on application level (one call, 30 Connect_Ind, ect). The         */
multiline_comment|/* function must be enabled by setting &quot;a-&gt;group_optimization_enabled&quot; from the   */
multiline_comment|/* OS specific part (per adapter).                                                */
multiline_comment|/**********************************************************************************/
DECL|function|group_optimization
r_static
r_void
id|group_optimization
c_func
(paren
id|DIVA_CAPI_ADAPTER
op_star
id|a
comma
id|PLCI
op_star
id|plci
)paren
(brace
id|word
id|i
comma
id|j
comma
id|k
comma
id|busy
comma
id|group_found
suffix:semicolon
id|dword
id|info_mask_group
(braket
id|MAX_CIP_TYPES
)braket
suffix:semicolon
id|dword
id|cip_mask_group
(braket
id|MAX_CIP_TYPES
)braket
suffix:semicolon
id|word
id|appl_number_group_type
(braket
id|MAX_APPL
)braket
suffix:semicolon
id|PLCI
op_star
id|auxplci
suffix:semicolon
id|set_group_ind_mask
(paren
id|plci
)paren
suffix:semicolon
multiline_comment|/* all APPLs within this inc. call are allowed to dial in */
r_if
c_cond
(paren
op_logical_neg
id|a-&gt;group_optimization_enabled
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;No group optimization&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Group optimization = 0x%x...&quot;
comma
id|a-&gt;group_optimization_enabled
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_CIP_TYPES
suffix:semicolon
id|i
op_increment
)paren
(brace
id|info_mask_group
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|cip_mask_group
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_APPL
suffix:semicolon
id|i
op_increment
)paren
(brace
id|appl_number_group_type
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* check if any multi instance capable application is present */
(brace
multiline_comment|/* group_optimization set to 1 means not to optimize multi-instance capable applications (default) */
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
op_logical_and
(paren
id|application
(braket
id|i
)braket
dot
id|MaxNCCI
)paren
OG
l_int|1
op_logical_and
(paren
id|a-&gt;CIP_Mask
(braket
id|i
)braket
)paren
op_logical_and
(paren
id|a-&gt;group_optimization_enabled
op_eq
l_int|1
)paren
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Multi-Instance capable, no optimization required&quot;
)paren
)paren
suffix:semicolon
r_return
suffix:semicolon
multiline_comment|/* allow good application unfiltered access */
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* Build CIP Groups */
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
op_logical_and
id|a-&gt;CIP_Mask
(braket
id|i
)braket
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
comma
id|busy
op_assign
id|FALSE
suffix:semicolon
id|k
OL
id|a-&gt;max_plci
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;plci
(braket
id|k
)braket
dot
id|Id
)paren
(brace
id|auxplci
op_assign
op_amp
id|a-&gt;plci
(braket
id|k
)braket
suffix:semicolon
r_if
c_cond
(paren
id|auxplci-&gt;appl
op_eq
op_amp
id|application
(braket
id|i
)braket
)paren
multiline_comment|/* application has a busy PLCI */
(brace
id|busy
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Appl 0x%x is busy&quot;
comma
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|test_c_ind_mask_bit
(paren
id|auxplci
comma
id|i
)paren
)paren
multiline_comment|/* application has an incoming call pending */
(brace
id|busy
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Appl 0x%x has inc. call pending&quot;
comma
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
comma
id|group_found
op_assign
l_int|0
suffix:semicolon
id|j
op_le
(paren
id|MAX_CIP_TYPES
)paren
op_logical_and
op_logical_neg
id|busy
op_logical_and
op_logical_neg
id|group_found
suffix:semicolon
id|j
op_increment
)paren
multiline_comment|/* build groups with free applications only */
(brace
r_if
c_cond
(paren
id|j
op_eq
id|MAX_CIP_TYPES
)paren
multiline_comment|/* all groups are in use but group still not found */
(brace
multiline_comment|/* the MAX_CIP_TYPES group enables all calls because of field overflow */
id|appl_number_group_type
(braket
id|i
)braket
op_assign
id|MAX_CIP_TYPES
suffix:semicolon
id|group_found
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Field overflow appl 0x%x&quot;
comma
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|info_mask_group
(braket
id|j
)braket
op_eq
id|a-&gt;CIP_Mask
(braket
id|i
)braket
)paren
op_logical_and
(paren
id|cip_mask_group
(braket
id|j
)braket
op_eq
id|a-&gt;Info_Mask
(braket
id|i
)braket
)paren
)paren
(brace
multiline_comment|/* is group already present ?                  */
id|appl_number_group_type
(braket
id|i
)braket
op_assign
id|j
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* store the group number for each application */
id|group_found
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Group 0x%x found with appl 0x%x, CIP=0x%lx&quot;
comma
id|appl_number_group_type
(braket
id|i
)braket
comma
id|i
op_plus
l_int|1
comma
id|info_mask_group
(braket
id|j
)braket
)paren
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|info_mask_group
(braket
id|j
)braket
)paren
(brace
multiline_comment|/* establish a new group                       */
id|appl_number_group_type
(braket
id|i
)braket
op_assign
id|j
op_or
l_int|0x80
suffix:semicolon
multiline_comment|/* store the group number for each application */
id|info_mask_group
(braket
id|j
)braket
op_assign
id|a-&gt;CIP_Mask
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* store the new CIP mask for the new group    */
id|cip_mask_group
(braket
id|j
)braket
op_assign
id|a-&gt;Info_Mask
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* store the new Info_Mask for this new group  */
id|group_found
op_assign
id|TRUE
suffix:semicolon
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;New Group 0x%x established with appl 0x%x, CIP=0x%lx&quot;
comma
id|appl_number_group_type
(braket
id|i
)braket
comma
id|i
op_plus
l_int|1
comma
id|info_mask_group
(braket
id|j
)braket
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* Build group_optimization_mask_table */
(brace
r_if
c_cond
(paren
id|appl_number_group_type
(braket
id|i
)braket
)paren
multiline_comment|/* application is free, has listens and is member of a group */
(brace
r_if
c_cond
(paren
id|appl_number_group_type
(braket
id|i
)braket
op_eq
id|MAX_CIP_TYPES
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;OverflowGroup 0x%x, valid appl = 0x%x, call enabled&quot;
comma
id|appl_number_group_type
(braket
id|i
)braket
comma
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Group 0x%x, valid appl = 0x%x&quot;
comma
id|appl_number_group_type
(braket
id|i
)braket
comma
id|i
op_plus
l_int|1
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
id|j
OL
id|max_appl
suffix:semicolon
id|j
op_increment
)paren
multiline_comment|/* search other group members and mark them as busy        */
(brace
r_if
c_cond
(paren
id|appl_number_group_type
(braket
id|i
)braket
op_eq
id|appl_number_group_type
(braket
id|j
)braket
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;Appl 0x%x is member of group 0x%x, no call&quot;
comma
id|j
op_plus
l_int|1
comma
id|appl_number_group_type
(braket
id|j
)braket
)paren
)paren
suffix:semicolon
id|clear_group_ind_mask_bit
(paren
id|plci
comma
id|j
)paren
suffix:semicolon
multiline_comment|/* disable call on other group members */
id|appl_number_group_type
(braket
id|j
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* remove disabled group member from group list */
)brace
)brace
)brace
)brace
r_else
multiline_comment|/* application should not get a call */
(brace
id|clear_group_ind_mask_bit
(paren
id|plci
comma
id|i
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/* OS notifies the driver about a application Capi_Register */
DECL|function|CapiRegister
id|word
id|CapiRegister
c_func
(paren
id|word
id|id
)paren
(brace
id|word
id|i
comma
id|j
comma
id|appls_found
suffix:semicolon
id|PLCI
op_star
id|plci
suffix:semicolon
id|DIVA_CAPI_ADAPTER
op_star
id|a
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|appls_found
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_appl
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|application
(braket
id|i
)braket
dot
id|Id
op_logical_and
(paren
id|application
(braket
id|i
)braket
dot
id|Id
op_ne
id|id
)paren
)paren
(brace
id|appls_found
op_increment
suffix:semicolon
multiline_comment|/* an application has been found */
)brace
)brace
r_if
c_cond
(paren
id|appls_found
)paren
(brace
r_return
id|TRUE
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|max_adapter
suffix:semicolon
id|i
op_increment
)paren
multiline_comment|/* scan all adapters...    */
(brace
id|a
op_assign
op_amp
id|adapter
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|a-&gt;request
)paren
(brace
r_if
c_cond
(paren
id|a-&gt;flag_dynamic_l1_down
)paren
multiline_comment|/* remove adapter from L1 tristate (Huntgroup) */
(brace
r_if
c_cond
(paren
op_logical_neg
id|appls_found
)paren
multiline_comment|/* first application does a capi register   */
(brace
r_if
c_cond
(paren
(paren
id|j
op_assign
id|get_plci
c_func
(paren
id|a
)paren
)paren
)paren
multiline_comment|/* activate L1 of all adapters */
(brace
id|plci
op_assign
op_amp
id|a-&gt;plci
(braket
id|j
op_minus
l_int|1
)braket
suffix:semicolon
id|plci-&gt;command
op_assign
l_int|0
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|OAD
comma
l_string|&quot;&bslash;x01&bslash;xfd&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|CAI
comma
l_string|&quot;&bslash;x01&bslash;x80&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|UID
comma
l_string|&quot;&bslash;x06&bslash;x43&bslash;x61&bslash;x70&bslash;x69&bslash;x32&bslash;x30&quot;
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|SHIFT
op_or
l_int|6
comma
l_int|NULL
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|SIN
comma
l_string|&quot;&bslash;x02&bslash;x00&bslash;x00&quot;
)paren
suffix:semicolon
id|plci-&gt;internal_command
op_assign
id|START_L1_SIG_ASSIGN_PEND
suffix:semicolon
id|sig_req
c_func
(paren
id|plci
comma
id|ASSIGN
comma
id|DSIG_ID
)paren
suffix:semicolon
id|add_p
c_func
(paren
id|plci
comma
id|FTY
comma
l_string|&quot;&bslash;x02&bslash;xff&bslash;x07&quot;
)paren
suffix:semicolon
multiline_comment|/* l1 start */
id|sig_req
c_func
(paren
id|plci
comma
id|SIG_CTRL
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
multiline_comment|/*------------------------------------------------------------------*/
multiline_comment|/* Functions for virtual Switching e.g. Transfer by join, Conference */
DECL|function|VSwitchReqInd
r_static
r_void
id|VSwitchReqInd
c_func
(paren
id|PLCI
op_star
id|plci
comma
id|dword
id|Id
comma
id|byte
op_star
op_star
id|parms
)paren
(brace
id|word
id|i
suffix:semicolon
multiline_comment|/* Format of vswitch_t:&n; 0 byte length&n; 1 byte VSWITCHIE&n; 2 byte VSWITCH_REQ/VSWITCH_IND&n; 3 byte reserved&n; 4 word VSwitchcommand&n; 6 word returnerror&n; 8... Params&n; */
r_if
c_cond
(paren
op_logical_neg
id|plci
op_logical_or
op_logical_neg
id|plci-&gt;appl
op_logical_or
op_logical_neg
id|plci-&gt;State
op_logical_or
id|plci-&gt;Sig.Ind
op_eq
id|NCR_FACILITY
)paren
(brace
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_MULTI_IE
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
OL
l_int|7
)paren
(brace
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* kill it */
r_continue
suffix:semicolon
)brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;VSwitchReqInd(%d)&quot;
comma
id|parms
(braket
id|i
)braket
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|4
)braket
)paren
(brace
r_case
id|VSJOIN
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|plci-&gt;relatedPTYPLCI
op_logical_or
(paren
id|plci-&gt;ptyState
op_ne
id|S_ECT
op_logical_and
id|plci-&gt;relatedPTYPLCI-&gt;ptyState
op_ne
id|S_ECT
)paren
)paren
(brace
multiline_comment|/* Error */
r_break
suffix:semicolon
)brace
multiline_comment|/* remember all necessary informations */
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
op_ne
l_int|11
op_logical_or
id|parms
(braket
id|i
)braket
(braket
l_int|8
)braket
op_ne
l_int|3
)paren
multiline_comment|/* Length Test */
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|2
)braket
op_eq
id|VSWITCH_IND
op_logical_and
id|parms
(braket
id|i
)braket
(braket
l_int|9
)braket
op_eq
l_int|1
)paren
(brace
multiline_comment|/* first indication after ECT-Request on Consultation Call */
id|plci-&gt;vswitchstate
op_assign
id|parms
(braket
id|i
)braket
(braket
l_int|9
)braket
suffix:semicolon
id|parms
(braket
id|i
)braket
(braket
l_int|9
)braket
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* State */
multiline_comment|/* now ask first Call to join */
)brace
r_else
r_if
c_cond
(paren
id|parms
(braket
id|i
)braket
(braket
l_int|2
)braket
op_eq
id|VSWITCH_REQ
op_logical_and
id|parms
(braket
id|i
)braket
(braket
l_int|9
)braket
op_eq
l_int|3
)paren
(brace
multiline_comment|/* Answer of VSWITCH_REQ from first Call */
id|plci-&gt;vswitchstate
op_assign
id|parms
(braket
id|i
)braket
(braket
l_int|9
)braket
suffix:semicolon
multiline_comment|/* tell consultation call to join&n;    and the protocol capabilities of the first call */
)brace
r_else
(brace
multiline_comment|/* Error */
r_break
suffix:semicolon
)brace
id|plci-&gt;vsprot
op_assign
id|parms
(braket
id|i
)braket
(braket
l_int|10
)braket
suffix:semicolon
multiline_comment|/* protocol */
id|plci-&gt;vsprotdialect
op_assign
id|parms
(braket
id|i
)braket
(braket
l_int|11
)braket
suffix:semicolon
multiline_comment|/* protocoldialect */
multiline_comment|/* send join request to related PLCI */
id|parms
(braket
id|i
)braket
(braket
l_int|1
)braket
op_assign
id|VSWITCHIE
suffix:semicolon
id|parms
(braket
id|i
)braket
(braket
l_int|2
)braket
op_assign
id|VSWITCH_REQ
suffix:semicolon
id|plci-&gt;relatedPTYPLCI-&gt;command
op_assign
l_int|0
suffix:semicolon
id|plci-&gt;relatedPTYPLCI-&gt;internal_command
op_assign
id|VSWITCH_REQ_PEND
suffix:semicolon
id|add_p
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|ESC
comma
op_amp
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|VSWITCH_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|VSTRANSPORT
suffix:colon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|plci-&gt;relatedPTYPLCI
op_logical_and
id|plci-&gt;vswitchstate
op_eq
l_int|3
op_logical_and
id|plci-&gt;relatedPTYPLCI-&gt;vswitchstate
op_eq
l_int|3
)paren
(brace
id|add_p
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|ESC
comma
op_amp
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|sig_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
comma
id|VSWITCH_REQ
comma
l_int|0
)paren
suffix:semicolon
id|send_req
c_func
(paren
id|plci-&gt;relatedPTYPLCI
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|parms
(braket
id|i
)braket
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* kill it */
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
DECL|function|diva_get_dma_descriptor
r_static
r_int
id|diva_get_dma_descriptor
(paren
id|PLCI
op_star
id|plci
comma
id|dword
op_star
id|dma_magic
)paren
(brace
id|ENTITY
id|e
suffix:semicolon
id|IDI_SYNC_REQ
op_star
id|pReq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|e
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|diva_xdi_extended_features
op_amp
id|DIVA_CAPI_XDI_PROVIDES_RX_DMA
)paren
)paren
(brace
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|pReq-&gt;xdi_dma_descriptor_operation.Req
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.Rc
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_OPERATION
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_ALLOC
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_assign
op_minus
l_int|1
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_address
op_assign
l_int|NULL
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
op_assign
l_int|0
suffix:semicolon
id|e.user
(braket
l_int|0
)braket
op_assign
id|plci-&gt;adapter-&gt;Id
op_minus
l_int|1
suffix:semicolon
id|plci-&gt;adapter
op_member_access_from_pointer
id|request
c_func
(paren
(paren
id|ENTITY
op_star
)paren
id|pReq
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_logical_and
(paren
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_ge
l_int|0
)paren
op_logical_and
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
)paren
(brace
op_star
id|dma_magic
op_assign
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
suffix:semicolon
id|dbug
c_func
(paren
l_int|3
comma
id|dprintf
c_func
(paren
l_string|&quot;dma_alloc, a:%d (%d-%08x)&quot;
comma
id|plci-&gt;adapter-&gt;Id
comma
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
comma
op_star
id|dma_magic
)paren
)paren
suffix:semicolon
r_return
(paren
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;dma_alloc failed&quot;
)paren
)paren
suffix:semicolon
r_return
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
DECL|function|diva_free_dma_descriptor
r_static
r_void
id|diva_free_dma_descriptor
(paren
id|PLCI
op_star
id|plci
comma
r_int
id|nr
)paren
(brace
id|ENTITY
id|e
suffix:semicolon
id|IDI_SYNC_REQ
op_star
id|pReq
op_assign
(paren
id|IDI_SYNC_REQ
op_star
)paren
op_amp
id|e
suffix:semicolon
r_if
c_cond
(paren
id|nr
OL
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
id|pReq-&gt;xdi_dma_descriptor_operation.Req
op_assign
l_int|0
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.Rc
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_OPERATION
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
op_assign
id|IDI_SYNC_REQ_DMA_DESCRIPTOR_FREE
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_number
op_assign
id|nr
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_address
op_assign
l_int|NULL
suffix:semicolon
id|pReq-&gt;xdi_dma_descriptor_operation.info.descriptor_magic
op_assign
l_int|0
suffix:semicolon
id|e.user
(braket
l_int|0
)braket
op_assign
id|plci-&gt;adapter-&gt;Id
op_minus
l_int|1
suffix:semicolon
id|plci-&gt;adapter
op_member_access_from_pointer
id|request
c_func
(paren
(paren
id|ENTITY
op_star
)paren
id|pReq
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pReq-&gt;xdi_dma_descriptor_operation.info.operation
)paren
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;dma_free(%d)&quot;
comma
id|nr
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|dbug
c_func
(paren
l_int|1
comma
id|dprintf
c_func
(paren
l_string|&quot;dma_free failed (%d)&quot;
comma
id|nr
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*------------------------------------------------------------------*/
eof
