multiline_comment|/*&n; * Driver for AVM Fritz!classic (ISA) ISDN card&n; *&n; * Author       Kai Germaschewski&n; * Copyright    2001 by Kai Germaschewski  &lt;kai.germaschewski@gmx.de&gt;&n; *              2001 by Karsten Keil       &lt;keil@isdn4linux.de&gt;&n; * &n; * based upon Karsten Keil&squot;s original avm_a1.c driver&n; *&n; * This software may be used and distributed according to the terms&n; * of the GNU General Public License, incorporated herein by reference.&n; *&n; */
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/isapnp.h&gt;
macro_line|#include &lt;linux/kmod.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/skbuff.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &quot;hisax_fcclassic.h&quot;
singleline_comment|// debugging cruft
DECL|macro|__debug_variable
mdefine_line|#define __debug_variable debug
macro_line|#include &quot;hisax_debug.h&quot;
macro_line|#ifdef CONFIG_HISAX_DEBUG
DECL|variable|debug
r_static
r_int
id|debug
op_assign
l_int|0
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|debug
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
macro_line|#endif
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Kai Germaschewski &lt;kai.germaschewski@gmx.de&gt;/Karsten Keil &lt;kkeil@suse.de&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;AVM Fritz!Card classic ISDN driver&quot;
)paren
suffix:semicolon
DECL|variable|protocol
r_static
r_int
id|protocol
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* EURO-ISDN Default */
id|MODULE_PARM
c_func
(paren
id|protocol
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
singleline_comment|// ----------------------------------------------------------------------
DECL|macro|AVM_A1_STAT_ISAC
mdefine_line|#define&t; AVM_A1_STAT_ISAC&t;0x01
DECL|macro|AVM_A1_STAT_HSCX
mdefine_line|#define&t; AVM_A1_STAT_HSCX&t;0x02
DECL|macro|AVM_A1_STAT_TIMER
mdefine_line|#define&t; AVM_A1_STAT_TIMER&t;0x04
singleline_comment|// ----------------------------------------------------------------------
r_static
r_int
r_char
DECL|function|fcclassic_read_isac
id|fcclassic_read_isac
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
r_char
id|offset
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|isac-&gt;priv
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|adapter-&gt;isac_base
op_plus
id|offset
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|0x1000
comma
l_string|&quot; port %#x, value %#x&quot;
comma
id|offset
comma
id|val
)paren
suffix:semicolon
r_return
id|val
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_write_isac
id|fcclassic_write_isac
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
r_char
id|offset
comma
r_int
r_char
id|value
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|isac-&gt;priv
suffix:semicolon
id|DBG
c_func
(paren
l_int|0x1000
comma
l_string|&quot; port %#x, value %#x&quot;
comma
id|offset
comma
id|value
)paren
suffix:semicolon
id|outb
c_func
(paren
id|value
comma
id|adapter-&gt;isac_base
op_plus
id|offset
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_read_isac_fifo
id|fcclassic_read_isac_fifo
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
r_char
op_star
id|data
comma
r_int
id|size
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|isac-&gt;priv
suffix:semicolon
id|insb
c_func
(paren
id|adapter-&gt;isac_fifo
comma
id|data
comma
id|size
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_write_isac_fifo
id|fcclassic_write_isac_fifo
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
r_char
op_star
id|data
comma
r_int
id|size
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|isac-&gt;priv
suffix:semicolon
id|outsb
c_func
(paren
id|adapter-&gt;isac_fifo
comma
id|data
comma
id|size
)paren
suffix:semicolon
)brace
r_static
id|u8
DECL|function|fcclassic_read_hscx
id|fcclassic_read_hscx
c_func
(paren
r_struct
id|hscx
op_star
id|hscx
comma
id|u8
id|offset
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|hscx-&gt;priv
suffix:semicolon
r_return
id|inb
c_func
(paren
id|adapter-&gt;hscx_base
(braket
id|hscx-&gt;channel
)braket
op_plus
id|offset
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_write_hscx
id|fcclassic_write_hscx
c_func
(paren
r_struct
id|hscx
op_star
id|hscx
comma
id|u8
id|offset
comma
id|u8
id|value
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|hscx-&gt;priv
suffix:semicolon
id|outb
c_func
(paren
id|value
comma
id|adapter-&gt;hscx_base
(braket
id|hscx-&gt;channel
)braket
op_plus
id|offset
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_read_hscx_fifo
id|fcclassic_read_hscx_fifo
c_func
(paren
r_struct
id|hscx
op_star
id|hscx
comma
r_int
r_char
op_star
id|data
comma
r_int
id|size
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|hscx-&gt;priv
suffix:semicolon
id|insb
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
id|hscx-&gt;channel
)braket
comma
id|data
comma
id|size
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|fcclassic_write_hscx_fifo
id|fcclassic_write_hscx_fifo
c_func
(paren
r_struct
id|hscx
op_star
id|hscx
comma
r_int
r_char
op_star
id|data
comma
r_int
id|size
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|hscx-&gt;priv
suffix:semicolon
id|outsb
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
id|hscx-&gt;channel
)braket
comma
id|data
comma
id|size
)paren
suffix:semicolon
)brace
singleline_comment|// ----------------------------------------------------------------------
r_static
r_void
DECL|function|fcclassic_irq
id|fcclassic_irq
c_func
(paren
r_int
id|intno
comma
r_void
op_star
id|dev
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|dev
suffix:semicolon
r_int
r_char
id|sval
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|sval
op_assign
id|inb
c_func
(paren
id|adapter-&gt;cfg_reg
)paren
op_amp
l_int|0xf
)paren
op_ne
l_int|0x7
)paren
(brace
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;sval %#x&quot;
comma
id|sval
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|sval
op_amp
id|AVM_A1_STAT_TIMER
)paren
)paren
(brace
id|outb
c_func
(paren
l_int|0x1e
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|sval
op_amp
id|AVM_A1_STAT_HSCX
)paren
)paren
(brace
id|hscx_irq
c_func
(paren
id|adapter-&gt;hscx
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|sval
op_amp
id|AVM_A1_STAT_ISAC
)paren
)paren
(brace
id|isac_irq
c_func
(paren
op_amp
id|adapter-&gt;isac
)paren
suffix:semicolon
)brace
)brace
)brace
singleline_comment|// ----------------------------------------------------------------------
r_static
r_int
id|__init
DECL|function|fcclassic_setup
id|fcclassic_setup
c_func
(paren
r_struct
id|fritz_adapter
op_star
id|adapter
)paren
(brace
id|u32
id|val
op_assign
l_int|0
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|DBG
c_func
(paren
l_int|1
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|isac_init
c_func
(paren
op_amp
id|adapter-&gt;isac
)paren
suffix:semicolon
singleline_comment|// FIXME is this okay now
id|adapter-&gt;cfg_reg
op_assign
id|adapter-&gt;io
op_plus
l_int|0x1800
suffix:semicolon
id|adapter-&gt;isac_base
op_assign
id|adapter-&gt;io
op_plus
l_int|0x1400
op_minus
l_int|0x20
suffix:semicolon
id|adapter-&gt;isac_fifo
op_assign
id|adapter-&gt;io
op_plus
l_int|0x1000
suffix:semicolon
id|adapter-&gt;hscx_base
(braket
l_int|0
)braket
op_assign
id|adapter-&gt;io
op_plus
l_int|0x0400
op_minus
l_int|0x20
suffix:semicolon
id|adapter-&gt;hscx_fifo
(braket
l_int|0
)braket
op_assign
id|adapter-&gt;io
suffix:semicolon
id|adapter-&gt;hscx_base
(braket
l_int|1
)braket
op_assign
id|adapter-&gt;io
op_plus
l_int|0x0c00
op_minus
l_int|0x20
suffix:semicolon
id|adapter-&gt;hscx_fifo
(braket
l_int|1
)braket
op_assign
id|adapter-&gt;io
op_plus
l_int|0x0800
suffix:semicolon
id|retval
op_assign
op_minus
id|EBUSY
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;cfg_reg
comma
l_int|8
comma
l_string|&quot;fcclassic cfg&quot;
)paren
)paren
r_goto
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;isac_base
op_plus
l_int|0x20
comma
l_int|32
comma
l_string|&quot;fcclassic isac&quot;
)paren
)paren
r_goto
id|err_cfg_reg
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;isac_fifo
comma
l_int|1
comma
l_string|&quot;fcclassic isac fifo&quot;
)paren
)paren
r_goto
id|err_isac_base
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|0
)braket
op_plus
l_int|0x20
comma
l_int|32
comma
l_string|&quot;fcclassic hscx&quot;
)paren
)paren
r_goto
id|err_isac_fifo
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|0
)braket
comma
l_int|1
comma
l_string|&quot;fcclassic hscx fifo&quot;
)paren
)paren
r_goto
id|err_hscx_base_0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|1
)braket
op_plus
l_int|0x20
comma
l_int|32
comma
l_string|&quot;fcclassic hscx&quot;
)paren
)paren
r_goto
id|err_hscx_fifo_0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|1
)braket
comma
l_int|1
comma
l_string|&quot;fcclassic hscx fifo&quot;
)paren
)paren
r_goto
id|err_hscx_base_1
suffix:semicolon
id|retval
op_assign
id|request_irq
c_func
(paren
id|adapter-&gt;irq
comma
id|fcclassic_irq
comma
l_int|0
comma
l_string|&quot;fcclassic&quot;
comma
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_goto
id|err_hscx_fifo_1
suffix:semicolon
singleline_comment|// Reset
id|outb
c_func
(paren
l_int|0x00
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|200
op_star
id|HZ
op_div
l_int|1000
)paren
suffix:semicolon
singleline_comment|// 200 msec
id|outb
c_func
(paren
l_int|0x01
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|200
op_star
id|HZ
op_div
l_int|1000
)paren
suffix:semicolon
singleline_comment|// 200 msec
id|outb
c_func
(paren
l_int|0x00
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|200
op_star
id|HZ
op_div
l_int|1000
)paren
suffix:semicolon
singleline_comment|// 200 msec
id|val
op_assign
id|adapter-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
id|val
op_eq
l_int|9
)paren
id|val
op_assign
l_int|2
suffix:semicolon
id|outb
c_func
(paren
id|val
comma
id|adapter-&gt;cfg_reg
op_plus
l_int|1
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|200
op_star
id|HZ
op_div
l_int|1000
)paren
suffix:semicolon
singleline_comment|// 200 msec
id|outb
c_func
(paren
l_int|0x00
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
id|schedule_timeout
c_func
(paren
l_int|200
op_star
id|HZ
op_div
l_int|1000
)paren
suffix:semicolon
singleline_comment|// 200 msec
id|val
op_assign
id|inb
c_func
(paren
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;AVM A1: Byte at %x is %x&bslash;n&quot;
comma
id|adapter-&gt;cfg_reg
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|adapter-&gt;cfg_reg
op_plus
l_int|3
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;AVM A1: Byte at %x is %x&bslash;n&quot;
comma
id|adapter-&gt;cfg_reg
op_plus
l_int|3
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|adapter-&gt;cfg_reg
op_plus
l_int|2
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;AVM A1: Byte at %x is %x&bslash;n&quot;
comma
id|adapter-&gt;cfg_reg
op_plus
l_int|2
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|inb
c_func
(paren
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;AVM A1: Byte at %x is %x&bslash;n&quot;
comma
id|adapter-&gt;cfg_reg
comma
id|val
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x16
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0x1e
comma
id|adapter-&gt;cfg_reg
)paren
suffix:semicolon
id|adapter-&gt;isac.priv
op_assign
id|adapter
suffix:semicolon
id|adapter-&gt;isac.read_isac
op_assign
op_amp
id|fcclassic_read_isac
suffix:semicolon
id|adapter-&gt;isac.write_isac
op_assign
op_amp
id|fcclassic_write_isac
suffix:semicolon
id|adapter-&gt;isac.read_isac_fifo
op_assign
op_amp
id|fcclassic_read_isac_fifo
suffix:semicolon
id|adapter-&gt;isac.write_isac_fifo
op_assign
op_amp
id|fcclassic_write_isac_fifo
suffix:semicolon
id|isac_setup
c_func
(paren
op_amp
id|adapter-&gt;isac
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|hscx_init
c_func
(paren
op_amp
id|adapter-&gt;hscx
(braket
id|i
)braket
)paren
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|priv
op_assign
id|adapter
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|read_hscx
op_assign
op_amp
id|fcclassic_read_hscx
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|write_hscx
op_assign
op_amp
id|fcclassic_write_hscx
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|read_hscx_fifo
op_assign
op_amp
id|fcclassic_read_hscx_fifo
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|write_hscx_fifo
op_assign
op_amp
id|fcclassic_write_hscx_fifo
suffix:semicolon
id|hscx_setup
c_func
(paren
op_amp
id|adapter-&gt;hscx
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
id|err_hscx_fifo_1
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|1
)braket
comma
l_int|1
)paren
suffix:semicolon
id|err_hscx_base_1
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|1
)braket
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|err_hscx_fifo_0
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|0
)braket
comma
l_int|1
)paren
suffix:semicolon
id|err_hscx_base_0
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|0
)braket
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|err_isac_fifo
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;isac_fifo
comma
l_int|1
)paren
suffix:semicolon
id|err_isac_base
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;isac_base
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|err_cfg_reg
suffix:colon
id|release_region
c_func
(paren
id|adapter-&gt;cfg_reg
comma
l_int|8
)paren
suffix:semicolon
id|err
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|fcclassic_release
r_static
r_void
id|__exit
id|fcclassic_release
c_func
(paren
r_struct
id|fritz_adapter
op_star
id|adapter
)paren
(brace
id|DBG
c_func
(paren
l_int|1
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
singleline_comment|//&t;outb(0, adapter-&gt;io + AVM_STATUS0);
id|free_irq
c_func
(paren
id|adapter-&gt;irq
comma
id|adapter
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|1
)braket
comma
l_int|1
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|1
)braket
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_fifo
(braket
l_int|0
)braket
comma
l_int|1
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;hscx_base
(braket
l_int|0
)braket
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;isac_fifo
comma
l_int|1
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;isac_base
op_plus
l_int|0x20
comma
l_int|32
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|adapter-&gt;cfg_reg
comma
l_int|8
)paren
suffix:semicolon
)brace
singleline_comment|// ----------------------------------------------------------------------
r_static
r_struct
id|fritz_adapter
op_star
id|__init
DECL|function|new_adapter
id|new_adapter
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
suffix:semicolon
r_struct
id|hisax_b_if
op_star
id|b_if
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|i
suffix:semicolon
id|adapter
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|fritz_adapter
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|adapter
)paren
r_return
l_int|NULL
suffix:semicolon
id|memset
c_func
(paren
id|adapter
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|fritz_adapter
)paren
)paren
suffix:semicolon
id|SET_MODULE_OWNER
c_func
(paren
op_amp
id|adapter-&gt;isac.hisax_d_if
)paren
suffix:semicolon
id|adapter-&gt;isac.hisax_d_if.ifc.priv
op_assign
op_amp
id|adapter-&gt;isac
suffix:semicolon
id|adapter-&gt;isac.hisax_d_if.ifc.l2l1
op_assign
id|isac_d_l2l1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
singleline_comment|//&t;&t;adapter-&gt;hscx[i].adapter = adapter;
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|channel
op_assign
id|i
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|b_if.ifc.priv
op_assign
op_amp
id|adapter-&gt;hscx
(braket
id|i
)braket
suffix:semicolon
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|b_if.ifc.l2l1
op_assign
id|hscx_b_l2l1
suffix:semicolon
)brace
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
id|adapter
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
id|b_if
(braket
id|i
)braket
op_assign
op_amp
id|adapter-&gt;hscx
(braket
id|i
)braket
dot
id|b_if
suffix:semicolon
id|hisax_register
c_func
(paren
op_amp
id|adapter-&gt;isac.hisax_d_if
comma
id|b_if
comma
l_string|&quot;fcclassic&quot;
comma
id|protocol
)paren
suffix:semicolon
r_return
id|adapter
suffix:semicolon
)brace
r_static
r_void
DECL|function|delete_adapter
id|delete_adapter
c_func
(paren
r_struct
id|fritz_adapter
op_star
id|adapter
)paren
(brace
id|hisax_unregister
c_func
(paren
op_amp
id|adapter-&gt;isac.hisax_d_if
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_static
r_int
id|__init
DECL|function|fcclassic_probe
id|fcclassic_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|isapnp_device_id
op_star
id|ent
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|retval
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|adapter
op_assign
id|new_adapter
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|adapter
)paren
r_goto
id|err
suffix:semicolon
id|adapter-&gt;io
op_assign
id|pdev-&gt;resource
(braket
l_int|0
)braket
dot
id|start
suffix:semicolon
id|adapter-&gt;irq
op_assign
id|pdev-&gt;irq_resource
(braket
l_int|0
)braket
dot
id|start
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;hisax_fcclassic: found Fritz!Card classic at IO %#x irq %d&bslash;n&quot;
comma
id|adapter-&gt;io
comma
id|adapter-&gt;irq
)paren
suffix:semicolon
id|retval
op_assign
id|fcclassic_setup
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_goto
id|err_free
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_free
suffix:colon
id|delete_adapter
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|err
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
r_static
r_int
id|__exit
DECL|function|fcclassic_remove
id|fcclassic_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|fritz_adapter
op_star
id|adapter
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|fcclassic_release
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|delete_adapter
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|isa_dev
r_static
r_struct
id|pci_dev
id|isa_dev
(braket
l_int|4
)braket
suffix:semicolon
r_static
r_int
id|__init
DECL|function|hisax_fcclassic_init
id|hisax_fcclassic_init
c_func
(paren
r_void
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;hisax_fcclassic: Fritz!Card classic ISDN driver v0.0.1&bslash;n&quot;
)paren
suffix:semicolon
id|isa_dev
(braket
l_int|0
)braket
dot
id|resource
(braket
l_int|0
)braket
dot
id|start
op_assign
l_int|0x300
suffix:semicolon
id|isa_dev
(braket
l_int|0
)braket
dot
id|irq_resource
(braket
l_int|0
)braket
dot
id|start
op_assign
l_int|7
suffix:semicolon
id|fcclassic_probe
c_func
(paren
id|isa_dev
comma
l_int|NULL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
id|__exit
DECL|function|hisax_fcclassic_exit
id|hisax_fcclassic_exit
c_func
(paren
r_void
)paren
(brace
id|fcclassic_remove
c_func
(paren
id|isa_dev
)paren
suffix:semicolon
)brace
DECL|variable|hisax_fcclassic_init
id|module_init
c_func
(paren
id|hisax_fcclassic_init
)paren
suffix:semicolon
DECL|variable|hisax_fcclassic_exit
id|module_exit
c_func
(paren
id|hisax_fcclassic_exit
)paren
suffix:semicolon
eof
