multiline_comment|/*&n; * Driver for ISAC-S and ISAC-SX &n; * ISDN Subscriber Access Controller for Terminals&n; *&n; * Author       Kai Germaschewski&n; * Copyright    2001 by Kai Germaschewski  &lt;kai.germaschewski@gmx.de&gt;&n; *              2001 by Karsten Keil       &lt;keil@isdn4linux.de&gt;&n; * &n; * based upon Karsten Keil&squot;s original isac.c driver&n; *&n; * This software may be used and distributed according to the terms&n; * of the GNU General Public License, incorporated herein by reference.&n; *&n; * Thanks to Wizard Computersysteme GmbH, Bremervoerde and&n; *           SoHaNet Technology GmbH, Berlin&n; * for supporting the development of this driver&n; */
multiline_comment|/* TODO:&n; * specifically handle level vs edge triggered?&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &quot;hisax_isac.h&quot;
singleline_comment|// debugging cruft
DECL|macro|__debug_variable
mdefine_line|#define __debug_variable debug
macro_line|#include &quot;hisax_debug.h&quot;
macro_line|#ifdef CONFIG_HISAX_DEBUG
DECL|variable|debug
r_static
r_int
id|debug
op_assign
l_int|1
suffix:semicolon
id|module_param
c_func
(paren
id|debug
comma
r_int
comma
l_int|0
)paren
suffix:semicolon
DECL|variable|ISACVer
r_static
r_char
op_star
id|ISACVer
(braket
)braket
op_assign
(brace
l_string|&quot;2086/2186 V1.1&quot;
comma
l_string|&quot;2085 B1&quot;
comma
l_string|&quot;2085 B2&quot;
comma
l_string|&quot;2085 V2.3&quot;
)brace
suffix:semicolon
macro_line|#endif
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Kai Germaschewski &lt;kai.germaschewski@gmx.de&gt;/Karsten Keil &lt;kkeil@suse.de&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;ISAC/ISAC-SX driver&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|macro|DBG_WARN
mdefine_line|#define DBG_WARN      0x0001
DECL|macro|DBG_IRQ
mdefine_line|#define DBG_IRQ       0x0002
DECL|macro|DBG_L1M
mdefine_line|#define DBG_L1M       0x0004
DECL|macro|DBG_PR
mdefine_line|#define DBG_PR        0x0008
DECL|macro|DBG_RFIFO
mdefine_line|#define DBG_RFIFO     0x0100
DECL|macro|DBG_RPACKET
mdefine_line|#define DBG_RPACKET   0x0200
DECL|macro|DBG_XFIFO
mdefine_line|#define DBG_XFIFO     0x1000
DECL|macro|DBG_XPACKET
mdefine_line|#define DBG_XPACKET   0x2000
singleline_comment|// we need to distinguish ISAC-S and ISAC-SX
DECL|macro|TYPE_ISAC
mdefine_line|#define TYPE_ISAC        0x00
DECL|macro|TYPE_ISACSX
mdefine_line|#define TYPE_ISACSX      0x01
singleline_comment|// registers etc.
DECL|macro|ISAC_MASK
mdefine_line|#define ISAC_MASK        0x20
DECL|macro|ISAC_ISTA
mdefine_line|#define ISAC_ISTA        0x20
DECL|macro|ISAC_ISTA_EXI
mdefine_line|#define ISAC_ISTA_EXI    0x01
DECL|macro|ISAC_ISTA_SIN
mdefine_line|#define ISAC_ISTA_SIN    0x02
DECL|macro|ISAC_ISTA_CISQ
mdefine_line|#define ISAC_ISTA_CISQ   0x04
DECL|macro|ISAC_ISTA_XPR
mdefine_line|#define ISAC_ISTA_XPR    0x10
DECL|macro|ISAC_ISTA_RSC
mdefine_line|#define ISAC_ISTA_RSC    0x20
DECL|macro|ISAC_ISTA_RPF
mdefine_line|#define ISAC_ISTA_RPF    0x40
DECL|macro|ISAC_ISTA_RME
mdefine_line|#define ISAC_ISTA_RME    0x80
DECL|macro|ISAC_STAR
mdefine_line|#define ISAC_STAR        0x21
DECL|macro|ISAC_CMDR
mdefine_line|#define ISAC_CMDR        0x21
DECL|macro|ISAC_CMDR_XRES
mdefine_line|#define ISAC_CMDR_XRES   0x01
DECL|macro|ISAC_CMDR_XME
mdefine_line|#define ISAC_CMDR_XME    0x02
DECL|macro|ISAC_CMDR_XTF
mdefine_line|#define ISAC_CMDR_XTF    0x08
DECL|macro|ISAC_CMDR_RRES
mdefine_line|#define ISAC_CMDR_RRES   0x40
DECL|macro|ISAC_CMDR_RMC
mdefine_line|#define ISAC_CMDR_RMC    0x80
DECL|macro|ISAC_EXIR
mdefine_line|#define ISAC_EXIR        0x24
DECL|macro|ISAC_EXIR_MOS
mdefine_line|#define ISAC_EXIR_MOS    0x04
DECL|macro|ISAC_EXIR_XDU
mdefine_line|#define ISAC_EXIR_XDU    0x40
DECL|macro|ISAC_EXIR_XMR
mdefine_line|#define ISAC_EXIR_XMR    0x80
DECL|macro|ISAC_ADF2
mdefine_line|#define ISAC_ADF2        0x39
DECL|macro|ISAC_SPCR
mdefine_line|#define ISAC_SPCR        0x30
DECL|macro|ISAC_ADF1
mdefine_line|#define ISAC_ADF1        0x38
DECL|macro|ISAC_CIR0
mdefine_line|#define ISAC_CIR0        0x31
DECL|macro|ISAC_CIX0
mdefine_line|#define ISAC_CIX0        0x31
DECL|macro|ISAC_CIR0_CIC0
mdefine_line|#define ISAC_CIR0_CIC0   0x02
DECL|macro|ISAC_CIR0_CIC1
mdefine_line|#define ISAC_CIR0_CIC1   0x01
DECL|macro|ISAC_CIR1
mdefine_line|#define ISAC_CIR1        0x33
DECL|macro|ISAC_CIX1
mdefine_line|#define ISAC_CIX1        0x33
DECL|macro|ISAC_STCR
mdefine_line|#define ISAC_STCR        0x37
DECL|macro|ISAC_MODE
mdefine_line|#define ISAC_MODE        0x22
DECL|macro|ISAC_RSTA
mdefine_line|#define ISAC_RSTA        0x27
DECL|macro|ISAC_RSTA_RDO
mdefine_line|#define ISAC_RSTA_RDO    0x40
DECL|macro|ISAC_RSTA_CRC
mdefine_line|#define ISAC_RSTA_CRC    0x20
DECL|macro|ISAC_RSTA_RAB
mdefine_line|#define ISAC_RSTA_RAB    0x10
DECL|macro|ISAC_RBCL
mdefine_line|#define ISAC_RBCL 0x25
DECL|macro|ISAC_RBCH
mdefine_line|#define ISAC_RBCH 0x2A
DECL|macro|ISAC_TIMR
mdefine_line|#define ISAC_TIMR 0x23
DECL|macro|ISAC_SQXR
mdefine_line|#define ISAC_SQXR 0x3b
DECL|macro|ISAC_MOSR
mdefine_line|#define ISAC_MOSR 0x3a
DECL|macro|ISAC_MOCR
mdefine_line|#define ISAC_MOCR 0x3a
DECL|macro|ISAC_MOR0
mdefine_line|#define ISAC_MOR0 0x32
DECL|macro|ISAC_MOX0
mdefine_line|#define ISAC_MOX0 0x32
DECL|macro|ISAC_MOR1
mdefine_line|#define ISAC_MOR1 0x34
DECL|macro|ISAC_MOX1
mdefine_line|#define ISAC_MOX1 0x34
DECL|macro|ISAC_RBCH_XAC
mdefine_line|#define ISAC_RBCH_XAC 0x80
DECL|macro|ISAC_CMD_TIM
mdefine_line|#define ISAC_CMD_TIM    0x0
DECL|macro|ISAC_CMD_RES
mdefine_line|#define ISAC_CMD_RES    0x1
DECL|macro|ISAC_CMD_SSP
mdefine_line|#define ISAC_CMD_SSP    0x2
DECL|macro|ISAC_CMD_SCP
mdefine_line|#define ISAC_CMD_SCP    0x3
DECL|macro|ISAC_CMD_AR8
mdefine_line|#define ISAC_CMD_AR8    0x8
DECL|macro|ISAC_CMD_AR10
mdefine_line|#define ISAC_CMD_AR10   0x9
DECL|macro|ISAC_CMD_ARL
mdefine_line|#define ISAC_CMD_ARL    0xa
DECL|macro|ISAC_CMD_DI
mdefine_line|#define ISAC_CMD_DI     0xf
DECL|macro|ISACSX_MASK
mdefine_line|#define ISACSX_MASK       0x60
DECL|macro|ISACSX_ISTA
mdefine_line|#define ISACSX_ISTA       0x60
DECL|macro|ISACSX_ISTA_ICD
mdefine_line|#define ISACSX_ISTA_ICD   0x01
DECL|macro|ISACSX_ISTA_CIC
mdefine_line|#define ISACSX_ISTA_CIC   0x10
DECL|macro|ISACSX_MASKD
mdefine_line|#define ISACSX_MASKD      0x20
DECL|macro|ISACSX_ISTAD
mdefine_line|#define ISACSX_ISTAD      0x20
DECL|macro|ISACSX_ISTAD_XDU
mdefine_line|#define ISACSX_ISTAD_XDU  0x04
DECL|macro|ISACSX_ISTAD_XMR
mdefine_line|#define ISACSX_ISTAD_XMR  0x08
DECL|macro|ISACSX_ISTAD_XPR
mdefine_line|#define ISACSX_ISTAD_XPR  0x10
DECL|macro|ISACSX_ISTAD_RFO
mdefine_line|#define ISACSX_ISTAD_RFO  0x20
DECL|macro|ISACSX_ISTAD_RPF
mdefine_line|#define ISACSX_ISTAD_RPF  0x40
DECL|macro|ISACSX_ISTAD_RME
mdefine_line|#define ISACSX_ISTAD_RME  0x80
DECL|macro|ISACSX_CMDRD
mdefine_line|#define ISACSX_CMDRD      0x21
DECL|macro|ISACSX_CMDRD_XRES
mdefine_line|#define ISACSX_CMDRD_XRES 0x01
DECL|macro|ISACSX_CMDRD_XME
mdefine_line|#define ISACSX_CMDRD_XME  0x02
DECL|macro|ISACSX_CMDRD_XTF
mdefine_line|#define ISACSX_CMDRD_XTF  0x08
DECL|macro|ISACSX_CMDRD_RRES
mdefine_line|#define ISACSX_CMDRD_RRES 0x40
DECL|macro|ISACSX_CMDRD_RMC
mdefine_line|#define ISACSX_CMDRD_RMC  0x80
DECL|macro|ISACSX_MODED
mdefine_line|#define ISACSX_MODED      0x22
DECL|macro|ISACSX_RBCLD
mdefine_line|#define ISACSX_RBCLD      0x26
DECL|macro|ISACSX_RSTAD
mdefine_line|#define ISACSX_RSTAD      0x28
DECL|macro|ISACSX_RSTAD_RAB
mdefine_line|#define ISACSX_RSTAD_RAB  0x10
DECL|macro|ISACSX_RSTAD_CRC
mdefine_line|#define ISACSX_RSTAD_CRC  0x20
DECL|macro|ISACSX_RSTAD_RDO
mdefine_line|#define ISACSX_RSTAD_RDO  0x40
DECL|macro|ISACSX_RSTAD_VFR
mdefine_line|#define ISACSX_RSTAD_VFR  0x80
DECL|macro|ISACSX_CIR0
mdefine_line|#define ISACSX_CIR0       0x2e
DECL|macro|ISACSX_CIR0_CIC0
mdefine_line|#define ISACSX_CIR0_CIC0  0x08
DECL|macro|ISACSX_CIX0
mdefine_line|#define ISACSX_CIX0       0x2e
DECL|macro|ISACSX_TR_CONF0
mdefine_line|#define ISACSX_TR_CONF0   0x30
DECL|macro|ISACSX_TR_CONF2
mdefine_line|#define ISACSX_TR_CONF2   0x32
DECL|variable|l1fsm
r_static
r_struct
id|Fsm
id|l1fsm
suffix:semicolon
r_enum
(brace
DECL|enumerator|ST_L1_RESET
id|ST_L1_RESET
comma
DECL|enumerator|ST_L1_F3_PDOWN
id|ST_L1_F3_PDOWN
comma
DECL|enumerator|ST_L1_F3_PUP
id|ST_L1_F3_PUP
comma
DECL|enumerator|ST_L1_F3_PEND_DEACT
id|ST_L1_F3_PEND_DEACT
comma
DECL|enumerator|ST_L1_F4
id|ST_L1_F4
comma
DECL|enumerator|ST_L1_F5
id|ST_L1_F5
comma
DECL|enumerator|ST_L1_F6
id|ST_L1_F6
comma
DECL|enumerator|ST_L1_F7
id|ST_L1_F7
comma
DECL|enumerator|ST_L1_F8
id|ST_L1_F8
comma
)brace
suffix:semicolon
DECL|macro|L1_STATE_COUNT
mdefine_line|#define L1_STATE_COUNT (ST_L1_F8+1)
DECL|variable|strL1State
r_static
r_char
op_star
id|strL1State
(braket
)braket
op_assign
(brace
l_string|&quot;ST_L1_RESET&quot;
comma
l_string|&quot;ST_L1_F3_PDOWN&quot;
comma
l_string|&quot;ST_L1_F3_PUP&quot;
comma
l_string|&quot;ST_L1_F3_PEND_DEACT&quot;
comma
l_string|&quot;ST_L1_F4&quot;
comma
l_string|&quot;ST_L1_F5&quot;
comma
l_string|&quot;ST_L1_F6&quot;
comma
l_string|&quot;ST_L1_F7&quot;
comma
l_string|&quot;ST_L1_F8&quot;
comma
)brace
suffix:semicolon
r_enum
(brace
DECL|enumerator|EV_PH_DR
id|EV_PH_DR
comma
singleline_comment|// 0000
DECL|enumerator|EV_PH_RES
id|EV_PH_RES
comma
singleline_comment|// 0001
DECL|enumerator|EV_PH_TMA
id|EV_PH_TMA
comma
singleline_comment|// 0010
DECL|enumerator|EV_PH_SLD
id|EV_PH_SLD
comma
singleline_comment|// 0011
DECL|enumerator|EV_PH_RSY
id|EV_PH_RSY
comma
singleline_comment|// 0100
DECL|enumerator|EV_PH_DR6
id|EV_PH_DR6
comma
singleline_comment|// 0101
DECL|enumerator|EV_PH_EI
id|EV_PH_EI
comma
singleline_comment|// 0110
DECL|enumerator|EV_PH_PU
id|EV_PH_PU
comma
singleline_comment|// 0111
DECL|enumerator|EV_PH_AR
id|EV_PH_AR
comma
singleline_comment|// 1000
DECL|enumerator|EV_PH_9
id|EV_PH_9
comma
singleline_comment|// 1001
DECL|enumerator|EV_PH_ARL
id|EV_PH_ARL
comma
singleline_comment|// 1010
DECL|enumerator|EV_PH_CVR
id|EV_PH_CVR
comma
singleline_comment|// 1011
DECL|enumerator|EV_PH_AI8
id|EV_PH_AI8
comma
singleline_comment|// 1100
DECL|enumerator|EV_PH_AI10
id|EV_PH_AI10
comma
singleline_comment|// 1101
DECL|enumerator|EV_PH_AIL
id|EV_PH_AIL
comma
singleline_comment|// 1110
DECL|enumerator|EV_PH_DC
id|EV_PH_DC
comma
singleline_comment|// 1111
DECL|enumerator|EV_PH_ACTIVATE_REQ
id|EV_PH_ACTIVATE_REQ
comma
DECL|enumerator|EV_PH_DEACTIVATE_REQ
id|EV_PH_DEACTIVATE_REQ
comma
DECL|enumerator|EV_TIMER3
id|EV_TIMER3
comma
)brace
suffix:semicolon
DECL|macro|L1_EVENT_COUNT
mdefine_line|#define L1_EVENT_COUNT (EV_TIMER3 + 1)
DECL|variable|strL1Event
r_static
r_char
op_star
id|strL1Event
(braket
)braket
op_assign
(brace
l_string|&quot;EV_PH_DR&quot;
comma
singleline_comment|// 0000
l_string|&quot;EV_PH_RES&quot;
comma
singleline_comment|// 0001
l_string|&quot;EV_PH_TMA&quot;
comma
singleline_comment|// 0010
l_string|&quot;EV_PH_SLD&quot;
comma
singleline_comment|// 0011
l_string|&quot;EV_PH_RSY&quot;
comma
singleline_comment|// 0100
l_string|&quot;EV_PH_DR6&quot;
comma
singleline_comment|// 0101
l_string|&quot;EV_PH_EI&quot;
comma
singleline_comment|// 0110
l_string|&quot;EV_PH_PU&quot;
comma
singleline_comment|// 0111
l_string|&quot;EV_PH_AR&quot;
comma
singleline_comment|// 1000
l_string|&quot;EV_PH_9&quot;
comma
singleline_comment|// 1001
l_string|&quot;EV_PH_ARL&quot;
comma
singleline_comment|// 1010
l_string|&quot;EV_PH_CVR&quot;
comma
singleline_comment|// 1011
l_string|&quot;EV_PH_AI8&quot;
comma
singleline_comment|// 1100
l_string|&quot;EV_PH_AI10&quot;
comma
singleline_comment|// 1101
l_string|&quot;EV_PH_AIL&quot;
comma
singleline_comment|// 1110
l_string|&quot;EV_PH_DC&quot;
comma
singleline_comment|// 1111
l_string|&quot;EV_PH_ACTIVATE_REQ&quot;
comma
l_string|&quot;EV_PH_DEACTIVATE_REQ&quot;
comma
l_string|&quot;EV_TIMER3&quot;
comma
)brace
suffix:semicolon
DECL|function|D_L1L2
r_static
r_inline
r_void
id|D_L1L2
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|hisax_if
op_star
id|ifc
op_assign
(paren
r_struct
id|hisax_if
op_star
)paren
op_amp
id|isac-&gt;hisax_d_if
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_PR
comma
l_string|&quot;pr %#x&quot;
comma
id|pr
)paren
suffix:semicolon
id|ifc
op_member_access_from_pointer
id|l1l2
c_func
(paren
id|ifc
comma
id|pr
comma
id|arg
)paren
suffix:semicolon
)brace
DECL|function|ph_command
r_static
r_void
id|ph_command
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
r_int
id|command
)paren
(brace
id|DBG
c_func
(paren
id|DBG_L1M
comma
l_string|&quot;ph_command %#x&quot;
comma
id|command
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|isac-&gt;type
)paren
(brace
r_case
id|TYPE_ISAC
suffix:colon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CIX0
comma
(paren
id|command
op_lshift
l_int|2
)paren
op_or
l_int|3
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TYPE_ISACSX
suffix:colon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_CIX0
comma
(paren
id|command
op_lshift
l_int|4
)paren
op_or
(paren
l_int|7
op_lshift
l_int|1
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
singleline_comment|// ----------------------------------------------------------------------
DECL|function|l1_di
r_static
r_void
id|l1_di
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_RESET
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_DI
)paren
suffix:semicolon
)brace
DECL|function|l1_di_deact_ind
r_static
r_void
id|l1_di_deact_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_RESET
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DEACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_DI
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f3pdown
r_static
r_void
id|l1_go_f3pdown
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3_PDOWN
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f3pend_deact_ind
r_static
r_void
id|l1_go_f3pend_deact_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3_PEND_DEACT
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DEACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_DI
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f3pend
r_static
r_void
id|l1_go_f3pend
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3_PEND_DEACT
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_DI
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f4
r_static
r_void
id|l1_go_f4
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F4
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f5
r_static
r_void
id|l1_go_f5
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F5
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f6
r_static
r_void
id|l1_go_f6
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F6
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f6_deact_ind
r_static
r_void
id|l1_go_f6_deact_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F6
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DEACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f7_act_ind
r_static
r_void
id|l1_go_f7_act_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmDelTimer
c_func
(paren
op_amp
id|isac-&gt;timer
comma
l_int|0
)paren
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F7
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_AR8
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_ACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f8
r_static
r_void
id|l1_go_f8
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F8
)paren
suffix:semicolon
)brace
DECL|function|l1_go_f8_deact_ind
r_static
r_void
id|l1_go_f8_deact_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F8
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DEACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|l1_ar8
r_static
r_void
id|l1_ar8
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmRestartTimer
c_func
(paren
op_amp
id|isac-&gt;timer
comma
id|TIMER3_VALUE
comma
id|EV_TIMER3
comma
l_int|NULL
comma
l_int|2
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_AR8
)paren
suffix:semicolon
)brace
DECL|function|l1_timer3
r_static
r_void
id|l1_timer3
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_DI
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DEACTIVATE
op_or
id|INDICATION
comma
l_int|NULL
)paren
suffix:semicolon
)brace
singleline_comment|// state machines according to data sheet PSB 2186 / 3186
DECL|variable|__initdata
r_static
r_struct
id|FsmNode
id|L1FnList
(braket
)braket
id|__initdata
op_assign
(brace
(brace
id|ST_L1_RESET
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_RESET
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_RESET
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
(brace
id|ST_L1_RESET
comma
id|EV_PH_AR
comma
id|l1_go_f6
)brace
comma
(brace
id|ST_L1_RESET
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_AR
comma
id|l1_go_f6
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_RSY
comma
id|l1_go_f5
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_PU
comma
id|l1_go_f4
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_PH_ACTIVATE_REQ
comma
id|l1_ar8
)brace
comma
(brace
id|ST_L1_F3_PDOWN
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_RSY
comma
id|l1_go_f5
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_AR
comma
id|l1_go_f6
)brace
comma
(brace
id|ST_L1_F3_PEND_DEACT
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_PH_RSY
comma
id|l1_go_f5
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_AR
comma
id|l1_go_f6
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_DR
comma
id|l1_go_f3pend
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_RSY
comma
id|l1_go_f8
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_DR6
comma
id|l1_go_f3pend
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_PH_RES
comma
id|l1_di_deact_ind
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_PH_EI
comma
id|l1_di_deact_ind
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_PH_AR
comma
id|l1_go_f6_deact_ind
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_PH_RSY
comma
id|l1_go_f8_deact_ind
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_PH_DR
comma
id|l1_go_f3pend_deact_ind
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_RES
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_EI
comma
id|l1_di
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_AR
comma
id|l1_go_f6
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_DR
comma
id|l1_go_f3pend
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_AI8
comma
id|l1_go_f7_act_ind
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_PH_DC
comma
id|l1_go_f3pdown
)brace
comma
)brace
suffix:semicolon
DECL|function|l1m_debug
r_static
r_void
id|l1m_debug
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
(brace
id|va_list
id|args
suffix:semicolon
r_char
id|buf
(braket
l_int|256
)braket
suffix:semicolon
id|va_start
c_func
(paren
id|args
comma
id|fmt
)paren
suffix:semicolon
id|vsprintf
c_func
(paren
id|buf
comma
id|fmt
comma
id|args
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_L1M
comma
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
id|va_end
c_func
(paren
id|args
)paren
suffix:semicolon
)brace
DECL|function|isac_version
r_static
r_void
id|isac_version
c_func
(paren
r_struct
id|isac
op_star
id|cs
)paren
(brace
r_int
id|val
suffix:semicolon
id|val
op_assign
id|cs
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|cs
comma
id|ISAC_RBCH
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|1
comma
l_string|&quot;ISAC version (%x): %s&quot;
comma
id|val
comma
id|ISACVer
(braket
(paren
id|val
op_rshift
l_int|5
)paren
op_amp
l_int|3
)braket
)paren
suffix:semicolon
)brace
DECL|function|isac_empty_fifo
r_static
r_void
id|isac_empty_fifo
c_func
(paren
r_struct
id|isac
op_star
id|isac
comma
r_int
id|count
)paren
(brace
singleline_comment|// this also works for isacsx, since
singleline_comment|// CMDR(D) register works the same
id|u_char
op_star
id|ptr
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;count %d&quot;
comma
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|isac-&gt;rcvidx
op_plus
id|count
)paren
op_ge
id|MAX_DFRAME_LEN_L1
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;overrun %d&quot;
comma
id|isac-&gt;rcvidx
op_plus
id|count
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CMDR
comma
id|ISAC_CMDR_RMC
)paren
suffix:semicolon
id|isac-&gt;rcvidx
op_assign
l_int|0
suffix:semicolon
r_return
suffix:semicolon
)brace
id|ptr
op_assign
id|isac-&gt;rcvbuf
op_plus
id|isac-&gt;rcvidx
suffix:semicolon
id|isac-&gt;rcvidx
op_add_assign
id|count
suffix:semicolon
id|isac
op_member_access_from_pointer
id|read_isac_fifo
c_func
(paren
id|isac
comma
id|ptr
comma
id|count
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CMDR
comma
id|ISAC_CMDR_RMC
)paren
suffix:semicolon
id|DBG_PACKET
c_func
(paren
id|DBG_RFIFO
comma
id|ptr
comma
id|count
)paren
suffix:semicolon
)brace
DECL|function|isac_fill_fifo
r_static
r_void
id|isac_fill_fifo
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
singleline_comment|// this also works for isacsx, since
singleline_comment|// CMDR(D) register works the same
r_int
id|count
suffix:semicolon
r_int
r_char
id|cmd
suffix:semicolon
id|u_char
op_star
id|ptr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|isac-&gt;tx_skb
)paren
id|BUG
c_func
(paren
)paren
suffix:semicolon
id|count
op_assign
id|isac-&gt;tx_skb-&gt;len
suffix:semicolon
r_if
c_cond
(paren
id|count
op_le
l_int|0
)paren
id|BUG
c_func
(paren
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;count %d&quot;
comma
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
OG
l_int|0x20
)paren
(brace
id|count
op_assign
l_int|0x20
suffix:semicolon
id|cmd
op_assign
id|ISAC_CMDR_XTF
suffix:semicolon
)brace
r_else
(brace
id|cmd
op_assign
id|ISAC_CMDR_XTF
op_or
id|ISAC_CMDR_XME
suffix:semicolon
)brace
id|ptr
op_assign
id|isac-&gt;tx_skb-&gt;data
suffix:semicolon
id|skb_pull
c_func
(paren
id|isac-&gt;tx_skb
comma
id|count
)paren
suffix:semicolon
id|isac-&gt;tx_cnt
op_add_assign
id|count
suffix:semicolon
id|DBG_PACKET
c_func
(paren
id|DBG_XFIFO
comma
id|ptr
comma
id|count
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac_fifo
c_func
(paren
id|isac
comma
id|ptr
comma
id|count
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CMDR
comma
id|cmd
)paren
suffix:semicolon
)brace
DECL|function|isac_retransmit
r_static
r_void
id|isac_retransmit
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|isac-&gt;tx_skb
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;no skb&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|skb_push
c_func
(paren
id|isac-&gt;tx_skb
comma
id|isac-&gt;tx_cnt
)paren
suffix:semicolon
id|isac-&gt;tx_cnt
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|isac_cisq_interrupt
r_static
r_inline
r_void
id|isac_cisq_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_CIR0
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;CIR0 %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_CIR0_CIC0
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;CODR0 %#x&quot;
comma
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|0xf
)paren
suffix:semicolon
id|FsmEvent
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|0xf
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_CIR0_CIC1
)paren
(brace
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_CIR1
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISAC CIR1 %#x&quot;
comma
id|val
)paren
suffix:semicolon
)brace
)brace
DECL|function|isac_rme_interrupt
r_static
r_inline
r_void
id|isac_rme_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
r_int
id|count
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_RSTA
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
(paren
id|ISAC_RSTA_RDO
op_or
id|ISAC_RSTA_CRC
op_or
id|ISAC_RSTA_RAB
)paren
)paren
op_ne
id|ISAC_RSTA_CRC
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;RSTA %#x, dropped&quot;
comma
id|val
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CMDR
comma
id|ISAC_CMDR_RMC
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|count
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_RBCL
)paren
op_amp
l_int|0x1f
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;RBCL %#x&quot;
comma
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
l_int|0
)paren
id|count
op_assign
l_int|0x20
suffix:semicolon
id|isac_empty_fifo
c_func
(paren
id|isac
comma
id|count
)paren
suffix:semicolon
id|count
op_assign
id|isac-&gt;rcvidx
suffix:semicolon
r_if
c_cond
(paren
id|count
OL
l_int|1
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;count %d &lt; 1&quot;
comma
id|count
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|skb
op_assign
id|alloc_skb
c_func
(paren
id|count
comma
id|GFP_ATOMIC
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|skb
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;no memory, dropping&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|skb_put
c_func
(paren
id|skb
comma
id|count
)paren
comma
id|isac-&gt;rcvbuf
comma
id|count
)paren
suffix:semicolon
id|DBG_SKB
c_func
(paren
id|DBG_RPACKET
comma
id|skb
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DATA
op_or
id|INDICATION
comma
id|skb
)paren
suffix:semicolon
id|out
suffix:colon
id|isac-&gt;rcvidx
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|isac_xpr_interrupt
r_static
r_inline
r_void
id|isac_xpr_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|isac-&gt;tx_skb
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|isac-&gt;tx_skb-&gt;len
OG
l_int|0
)paren
(brace
id|isac_fill_fifo
c_func
(paren
id|isac
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|dev_kfree_skb_irq
c_func
(paren
id|isac-&gt;tx_skb
)paren
suffix:semicolon
id|isac-&gt;tx_cnt
op_assign
l_int|0
suffix:semicolon
id|isac-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DATA
op_or
id|CONFIRM
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|isac_exi_interrupt
r_static
r_inline
r_void
id|isac_exi_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_EXIR
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;EXIR %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_EXIR_XMR
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISAC XMR&quot;
)paren
suffix:semicolon
id|isac_retransmit
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_EXIR_XDU
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISAC XDU&quot;
)paren
suffix:semicolon
id|isac_retransmit
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_EXIR_MOS
)paren
(brace
multiline_comment|/* MOS */
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;MOS&quot;
)paren
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_MOSR
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC MOSR %#x&quot;
comma
id|val
)paren
suffix:semicolon
)brace
)brace
DECL|function|isac_irq
r_void
id|isac_irq
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_ISTA
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTA %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_EXI
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;EXI&quot;
)paren
suffix:semicolon
id|isac_exi_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_XPR
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;XPR&quot;
)paren
suffix:semicolon
id|isac_xpr_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_RME
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;RME&quot;
)paren
suffix:semicolon
id|isac_rme_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_RPF
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;RPF&quot;
)paren
suffix:semicolon
id|isac_empty_fifo
c_func
(paren
id|isac
comma
l_int|0x20
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_CISQ
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;CISQ&quot;
)paren
suffix:semicolon
id|isac_cisq_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_RSC
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;RSC&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISAC_ISTA_SIN
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;SIN&quot;
)paren
suffix:semicolon
)brace
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MASK
comma
l_int|0xff
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MASK
comma
l_int|0x00
)paren
suffix:semicolon
)brace
singleline_comment|// ======================================================================
DECL|function|isacsx_cic_interrupt
r_static
r_inline
r_void
id|isacsx_cic_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISACSX_CIR0
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;CIR0 %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_CIR0_CIC0
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;CODR0 %#x&quot;
comma
id|val
op_rshift
l_int|4
)paren
suffix:semicolon
id|FsmEvent
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
id|val
op_rshift
l_int|4
comma
l_int|NULL
)paren
suffix:semicolon
)brace
)brace
DECL|function|isacsx_rme_interrupt
r_static
r_inline
r_void
id|isacsx_rme_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
id|count
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISACSX_RSTAD
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|val
op_amp
(paren
id|ISACSX_RSTAD_VFR
op_or
id|ISACSX_RSTAD_RDO
op_or
id|ISACSX_RSTAD_CRC
op_or
id|ISACSX_RSTAD_RAB
)paren
)paren
op_ne
(paren
id|ISACSX_RSTAD_VFR
op_or
id|ISACSX_RSTAD_CRC
)paren
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;RSTAD %#x, dropped&quot;
comma
id|val
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_CMDRD
comma
id|ISACSX_CMDRD_RMC
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|count
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISACSX_RBCLD
)paren
op_amp
l_int|0x1f
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;RBCLD %#x&quot;
comma
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
l_int|0
)paren
id|count
op_assign
l_int|0x20
suffix:semicolon
id|isac_empty_fifo
c_func
(paren
id|isac
comma
id|count
)paren
suffix:semicolon
singleline_comment|// strip trailing status byte
id|count
op_assign
id|isac-&gt;rcvidx
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|count
OL
l_int|1
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;count %d &lt; 1&quot;
comma
id|count
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|skb
op_assign
id|dev_alloc_skb
c_func
(paren
id|count
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|skb
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;no memory, dropping&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|skb_put
c_func
(paren
id|skb
comma
id|count
)paren
comma
id|isac-&gt;rcvbuf
comma
id|count
)paren
suffix:semicolon
id|DBG_SKB
c_func
(paren
id|DBG_RPACKET
comma
id|skb
)paren
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DATA
op_or
id|INDICATION
comma
id|skb
)paren
suffix:semicolon
id|out
suffix:colon
id|isac-&gt;rcvidx
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|isacsx_xpr_interrupt
r_static
r_inline
r_void
id|isacsx_xpr_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|isac-&gt;tx_skb
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|isac-&gt;tx_skb-&gt;len
OG
l_int|0
)paren
(brace
id|isac_fill_fifo
c_func
(paren
id|isac
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|dev_kfree_skb_irq
c_func
(paren
id|isac-&gt;tx_skb
)paren
suffix:semicolon
id|isac-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
id|isac-&gt;tx_cnt
op_assign
l_int|0
suffix:semicolon
id|D_L1L2
c_func
(paren
id|isac
comma
id|PH_DATA
op_or
id|CONFIRM
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|isacsx_icd_interrupt
r_static
r_inline
r_void
id|isacsx_icd_interrupt
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISACSX_ISTAD
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTAD %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_XDU
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISTAD XDU&quot;
)paren
suffix:semicolon
id|isac_retransmit
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_XMR
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISTAD XMR&quot;
)paren
suffix:semicolon
id|isac_retransmit
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_XPR
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTAD XPR&quot;
)paren
suffix:semicolon
id|isacsx_xpr_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_RFO
)paren
(brace
id|DBG
c_func
(paren
id|DBG_WARN
comma
l_string|&quot;ISTAD RFO&quot;
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_CMDRD
comma
id|ISACSX_CMDRD_RMC
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_RME
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTAD RME&quot;
)paren
suffix:semicolon
id|isacsx_rme_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTAD_RPF
)paren
(brace
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTAD RPF&quot;
)paren
suffix:semicolon
id|isac_empty_fifo
c_func
(paren
id|isac
comma
l_int|0x20
)paren
suffix:semicolon
)brace
)brace
DECL|function|isacsx_irq
r_void
id|isacsx_irq
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
r_char
id|val
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISACSX_ISTA
)paren
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_IRQ
comma
l_string|&quot;ISTA %#x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTA_ICD
)paren
id|isacsx_icd_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
id|ISACSX_ISTA_CIC
)paren
id|isacsx_cic_interrupt
c_func
(paren
id|isac
)paren
suffix:semicolon
)brace
DECL|function|isac_init
r_void
id|isac_init
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
id|isac-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
id|isac-&gt;l1m.fsm
op_assign
op_amp
id|l1fsm
suffix:semicolon
id|isac-&gt;l1m.state
op_assign
id|ST_L1_RESET
suffix:semicolon
macro_line|#ifdef CONFIG_HISAX_DEBUG
id|isac-&gt;l1m.debug
op_assign
l_int|1
suffix:semicolon
macro_line|#else
id|isac-&gt;l1m.debug
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
id|isac-&gt;l1m.userdata
op_assign
id|isac
suffix:semicolon
id|isac-&gt;l1m.printdebug
op_assign
id|l1m_debug
suffix:semicolon
id|FsmInitTimer
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
op_amp
id|isac-&gt;timer
)paren
suffix:semicolon
)brace
DECL|function|isac_setup
r_void
id|isac_setup
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
r_int
id|val
comma
id|eval
suffix:semicolon
id|isac-&gt;type
op_assign
id|TYPE_ISAC
suffix:semicolon
id|isac_version
c_func
(paren
id|isac
)paren
suffix:semicolon
id|ph_command
c_func
(paren
id|isac
comma
id|ISAC_CMD_RES
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MASK
comma
l_int|0xff
)paren
suffix:semicolon
id|isac-&gt;mocr
op_assign
l_int|0xaa
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|ISAC_IOM1
comma
op_amp
id|isac-&gt;flags
)paren
)paren
(brace
multiline_comment|/* IOM 1 Mode */
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_ADF2
comma
l_int|0x0
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_SPCR
comma
l_int|0xa
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_ADF1
comma
l_int|0x2
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_STCR
comma
l_int|0x70
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MODE
comma
l_int|0xc9
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* IOM 2 Mode */
r_if
c_cond
(paren
op_logical_neg
id|isac-&gt;adf2
)paren
id|isac-&gt;adf2
op_assign
l_int|0x80
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_ADF2
comma
id|isac-&gt;adf2
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_SQXR
comma
l_int|0x2f
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_SPCR
comma
l_int|0x00
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_STCR
comma
l_int|0x70
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MODE
comma
l_int|0xc9
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_TIMR
comma
l_int|0x00
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_ADF1
comma
l_int|0x00
)paren
suffix:semicolon
)brace
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_STAR
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC STAR %x&quot;
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_MODE
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC MODE %x&quot;
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_ADF2
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC ADF2 %x&quot;
comma
id|val
)paren
suffix:semicolon
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_ISTA
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC ISTA %x&quot;
comma
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|val
op_amp
l_int|0x01
)paren
(brace
id|eval
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_EXIR
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC EXIR %x&quot;
comma
id|eval
)paren
suffix:semicolon
)brace
id|val
op_assign
id|isac
op_member_access_from_pointer
id|read_isac
c_func
(paren
id|isac
comma
id|ISAC_CIR0
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_int|2
comma
l_string|&quot;ISAC CIR0 %x&quot;
comma
id|val
)paren
suffix:semicolon
id|FsmEvent
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
(paren
id|val
op_rshift
l_int|2
)paren
op_amp
l_int|0xf
comma
l_int|NULL
)paren
suffix:semicolon
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_MASK
comma
l_int|0x0
)paren
suffix:semicolon
singleline_comment|// RESET Receiver and Transmitter
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISAC_CMDR
comma
id|ISAC_CMDR_XRES
op_or
id|ISAC_CMDR_RRES
)paren
suffix:semicolon
)brace
DECL|function|isacsx_setup
r_void
id|isacsx_setup
c_func
(paren
r_struct
id|isac
op_star
id|isac
)paren
(brace
id|isac-&gt;type
op_assign
id|TYPE_ISACSX
suffix:semicolon
singleline_comment|// clear LDD
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_TR_CONF0
comma
l_int|0x00
)paren
suffix:semicolon
singleline_comment|// enable transmitter
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_TR_CONF2
comma
l_int|0x00
)paren
suffix:semicolon
singleline_comment|// transparent mode 0, RAC, stop/go
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_MODED
comma
l_int|0xc9
)paren
suffix:semicolon
singleline_comment|// all HDLC IRQ unmasked
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_MASKD
comma
l_int|0x03
)paren
suffix:semicolon
singleline_comment|// unmask ICD, CID IRQs
id|isac
op_member_access_from_pointer
id|write_isac
c_func
(paren
id|isac
comma
id|ISACSX_MASK
comma
op_complement
(paren
id|ISACSX_ISTA_ICD
op_or
id|ISACSX_ISTA_CIC
)paren
)paren
suffix:semicolon
)brace
DECL|function|isac_d_l2l1
r_void
id|isac_d_l2l1
c_func
(paren
r_struct
id|hisax_if
op_star
id|hisax_d_if
comma
r_int
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|isac
op_star
id|isac
op_assign
id|hisax_d_if-&gt;priv
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
op_assign
id|arg
suffix:semicolon
id|DBG
c_func
(paren
id|DBG_PR
comma
l_string|&quot;pr %#x&quot;
comma
id|pr
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|pr
)paren
(brace
r_case
id|PH_ACTIVATE
op_or
id|REQUEST
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
id|EV_PH_ACTIVATE_REQ
comma
l_int|NULL
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_DEACTIVATE
op_or
id|REQUEST
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|isac-&gt;l1m
comma
id|EV_PH_DEACTIVATE_REQ
comma
l_int|NULL
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_DATA
op_or
id|REQUEST
suffix:colon
id|DBG
c_func
(paren
id|DBG_PR
comma
l_string|&quot;PH_DATA REQUEST len %d&quot;
comma
id|skb-&gt;len
)paren
suffix:semicolon
id|DBG_SKB
c_func
(paren
id|DBG_XPACKET
comma
id|skb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|isac-&gt;l1m.state
op_ne
id|ST_L1_F7
)paren
(brace
id|DBG
c_func
(paren
l_int|1
comma
l_string|&quot;L1 wrong state %d&bslash;n&quot;
comma
id|isac-&gt;l1m.state
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|isac-&gt;tx_skb
)paren
id|BUG
c_func
(paren
)paren
suffix:semicolon
id|isac-&gt;tx_skb
op_assign
id|skb
suffix:semicolon
id|isac_fill_fifo
c_func
(paren
id|isac
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|hisax_isac_init
r_static
r_int
id|__init
id|hisax_isac_init
c_func
(paren
r_void
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;hisax_isac: ISAC-S/ISAC-SX ISDN driver v0.1.0&bslash;n&quot;
)paren
suffix:semicolon
id|l1fsm.state_count
op_assign
id|L1_STATE_COUNT
suffix:semicolon
id|l1fsm.event_count
op_assign
id|L1_EVENT_COUNT
suffix:semicolon
id|l1fsm.strState
op_assign
id|strL1State
suffix:semicolon
id|l1fsm.strEvent
op_assign
id|strL1Event
suffix:semicolon
r_return
id|FsmNew
c_func
(paren
op_amp
id|l1fsm
comma
id|L1FnList
comma
id|ARRAY_SIZE
c_func
(paren
id|L1FnList
)paren
)paren
suffix:semicolon
)brace
DECL|function|hisax_isac_exit
r_static
r_void
id|__exit
id|hisax_isac_exit
c_func
(paren
r_void
)paren
(brace
id|FsmFree
c_func
(paren
op_amp
id|l1fsm
)paren
suffix:semicolon
)brace
DECL|variable|isac_init
id|EXPORT_SYMBOL
c_func
(paren
id|isac_init
)paren
suffix:semicolon
DECL|variable|isac_d_l2l1
id|EXPORT_SYMBOL
c_func
(paren
id|isac_d_l2l1
)paren
suffix:semicolon
DECL|variable|isacsx_setup
id|EXPORT_SYMBOL
c_func
(paren
id|isacsx_setup
)paren
suffix:semicolon
DECL|variable|isacsx_irq
id|EXPORT_SYMBOL
c_func
(paren
id|isacsx_irq
)paren
suffix:semicolon
DECL|variable|isac_setup
id|EXPORT_SYMBOL
c_func
(paren
id|isac_setup
)paren
suffix:semicolon
DECL|variable|isac_irq
id|EXPORT_SYMBOL
c_func
(paren
id|isac_irq
)paren
suffix:semicolon
DECL|variable|hisax_isac_init
id|module_init
c_func
(paren
id|hisax_isac_init
)paren
suffix:semicolon
DECL|variable|hisax_isac_exit
id|module_exit
c_func
(paren
id|hisax_isac_exit
)paren
suffix:semicolon
eof
