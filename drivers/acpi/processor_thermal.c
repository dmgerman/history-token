multiline_comment|/*&n; * processor_thermal.c - Passive cooling submodule of the ACPI processor driver&n; *&n; *  Copyright (C) 2001, 2002 Andy Grover &lt;andrew.grover@intel.com&gt;&n; *  Copyright (C) 2001, 2002 Paul Diefenbaugh &lt;paul.s.diefenbaugh@intel.com&gt;&n; *  Copyright (C) 2004       Dominik Brodowski &lt;linux@brodo.de&gt;&n; *  Copyright (C) 2004  Anil S Keshavamurthy &lt;anil.s.keshavamurthy@intel.com&gt;&n; *  &t;&t;&t;- Added processor hotplug support&n; *&n; * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&n; *&n; *  This program is free software; you can redistribute it and/or modify&n; *  it under the terms of the GNU General Public License as published by&n; *  the Free Software Foundation; either version 2 of the License, or (at&n; *  your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful, but&n; *  WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU&n; *  General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License along&n; *  with this program; if not, write to the Free Software Foundation, Inc.,&n; *  59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.&n; *&n; * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/cpufreq.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/seq_file.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;acpi/acpi_bus.h&gt;
macro_line|#include &lt;acpi/processor.h&gt;
macro_line|#include &lt;acpi/acpi_drivers.h&gt;
DECL|macro|ACPI_PROCESSOR_COMPONENT
mdefine_line|#define ACPI_PROCESSOR_COMPONENT        0x01000000
DECL|macro|ACPI_PROCESSOR_CLASS
mdefine_line|#define ACPI_PROCESSOR_CLASS            &quot;processor&quot;
DECL|macro|ACPI_PROCESSOR_DRIVER_NAME
mdefine_line|#define ACPI_PROCESSOR_DRIVER_NAME      &quot;ACPI Processor Driver&quot;
DECL|macro|_COMPONENT
mdefine_line|#define _COMPONENT              ACPI_PROCESSOR_COMPONENT
id|ACPI_MODULE_NAME
(paren
l_string|&quot;acpi_processor&quot;
)paren
multiline_comment|/* --------------------------------------------------------------------------&n;                                 Limit Interface&n;   -------------------------------------------------------------------------- */
r_static
r_int
DECL|function|acpi_processor_apply_limit
id|acpi_processor_apply_limit
(paren
r_struct
id|acpi_processor
op_star
id|pr
)paren
(brace
r_int
id|result
op_assign
l_int|0
suffix:semicolon
id|u16
id|px
op_assign
l_int|0
suffix:semicolon
id|u16
id|tx
op_assign
l_int|0
suffix:semicolon
id|ACPI_FUNCTION_TRACE
c_func
(paren
l_string|&quot;acpi_processor_apply_limit&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
)paren
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr-&gt;flags.limit
)paren
id|return_VALUE
c_func
(paren
op_minus
id|ENODEV
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
(brace
r_if
c_cond
(paren
id|pr-&gt;limit.user.tx
OG
id|tx
)paren
id|tx
op_assign
id|pr-&gt;limit.user.tx
suffix:semicolon
r_if
c_cond
(paren
id|pr-&gt;limit.thermal.tx
OG
id|tx
)paren
id|tx
op_assign
id|pr-&gt;limit.thermal.tx
suffix:semicolon
id|result
op_assign
id|acpi_processor_set_throttling
c_func
(paren
id|pr
comma
id|tx
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
r_goto
id|end
suffix:semicolon
)brace
id|pr-&gt;limit.state.px
op_assign
id|px
suffix:semicolon
id|pr-&gt;limit.state.tx
op_assign
id|tx
suffix:semicolon
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;Processor [%d] limit set to (P%d:T%d)&bslash;n&quot;
comma
id|pr-&gt;id
comma
id|pr-&gt;limit.state.px
comma
id|pr-&gt;limit.state.tx
)paren
)paren
suffix:semicolon
id|end
suffix:colon
r_if
c_cond
(paren
id|result
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Unable to set limit&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
id|result
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_CPU_FREQ
multiline_comment|/* If a passive cooling situation is detected, primarily CPUfreq is used, as it&n; * offers (in most cases) voltage scaling in addition to frequency scaling, and&n; * thus a cubic (instead of linear) reduction of energy. Also, we allow for&n; * _any_ cpufreq driver and not only the acpi-cpufreq driver.&n; */
DECL|variable|cpufreq_thermal_reduction_pctg
r_static
r_int
r_int
id|cpufreq_thermal_reduction_pctg
(braket
id|NR_CPUS
)braket
suffix:semicolon
DECL|variable|acpi_thermal_cpufreq_is_init
r_static
r_int
r_int
id|acpi_thermal_cpufreq_is_init
op_assign
l_int|0
suffix:semicolon
DECL|function|cpu_has_cpufreq
r_static
r_int
id|cpu_has_cpufreq
c_func
(paren
r_int
r_int
id|cpu
)paren
(brace
r_struct
id|cpufreq_policy
id|policy
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|acpi_thermal_cpufreq_is_init
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cpufreq_get_policy
c_func
(paren
op_amp
id|policy
comma
id|cpu
)paren
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|acpi_thermal_cpufreq_increase
r_static
r_int
id|acpi_thermal_cpufreq_increase
c_func
(paren
r_int
r_int
id|cpu
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|cpu_has_cpufreq
c_func
(paren
id|cpu
)paren
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
id|cpufreq_thermal_reduction_pctg
(braket
id|cpu
)braket
OL
l_int|60
)paren
(brace
id|cpufreq_thermal_reduction_pctg
(braket
id|cpu
)braket
op_add_assign
l_int|20
suffix:semicolon
id|cpufreq_update_policy
c_func
(paren
id|cpu
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
op_minus
id|ERANGE
suffix:semicolon
)brace
DECL|function|acpi_thermal_cpufreq_decrease
r_static
r_int
id|acpi_thermal_cpufreq_decrease
c_func
(paren
r_int
r_int
id|cpu
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|cpu_has_cpufreq
c_func
(paren
id|cpu
)paren
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
id|cpufreq_thermal_reduction_pctg
(braket
id|cpu
)braket
op_ge
l_int|20
)paren
(brace
id|cpufreq_thermal_reduction_pctg
(braket
id|cpu
)braket
op_sub_assign
l_int|20
suffix:semicolon
id|cpufreq_update_policy
c_func
(paren
id|cpu
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
op_minus
id|ERANGE
suffix:semicolon
)brace
DECL|function|acpi_thermal_cpufreq_notifier
r_static
r_int
id|acpi_thermal_cpufreq_notifier
c_func
(paren
r_struct
id|notifier_block
op_star
id|nb
comma
r_int
r_int
id|event
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|cpufreq_policy
op_star
id|policy
op_assign
id|data
suffix:semicolon
r_int
r_int
id|max_freq
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|event
op_ne
id|CPUFREQ_ADJUST
)paren
r_goto
id|out
suffix:semicolon
id|max_freq
op_assign
(paren
id|policy-&gt;cpuinfo.max_freq
op_star
(paren
l_int|100
op_minus
id|cpufreq_thermal_reduction_pctg
(braket
id|policy-&gt;cpu
)braket
)paren
)paren
op_div
l_int|100
suffix:semicolon
id|cpufreq_verify_within_limits
c_func
(paren
id|policy
comma
l_int|0
comma
id|max_freq
)paren
suffix:semicolon
id|out
suffix:colon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|acpi_thermal_cpufreq_notifier_block
r_static
r_struct
id|notifier_block
id|acpi_thermal_cpufreq_notifier_block
op_assign
(brace
dot
id|notifier_call
op_assign
id|acpi_thermal_cpufreq_notifier
comma
)brace
suffix:semicolon
DECL|function|acpi_thermal_cpufreq_init
r_void
id|acpi_thermal_cpufreq_init
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|NR_CPUS
suffix:semicolon
id|i
op_increment
)paren
id|cpufreq_thermal_reduction_pctg
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|i
op_assign
id|cpufreq_register_notifier
c_func
(paren
op_amp
id|acpi_thermal_cpufreq_notifier_block
comma
id|CPUFREQ_POLICY_NOTIFIER
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i
)paren
id|acpi_thermal_cpufreq_is_init
op_assign
l_int|1
suffix:semicolon
)brace
DECL|function|acpi_thermal_cpufreq_exit
r_void
id|acpi_thermal_cpufreq_exit
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|acpi_thermal_cpufreq_is_init
)paren
id|cpufreq_unregister_notifier
c_func
(paren
op_amp
id|acpi_thermal_cpufreq_notifier_block
comma
id|CPUFREQ_POLICY_NOTIFIER
)paren
suffix:semicolon
id|acpi_thermal_cpufreq_is_init
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#else /* ! CONFIG_CPU_FREQ */
DECL|function|acpi_thermal_cpufreq_increase
r_static
r_int
id|acpi_thermal_cpufreq_increase
c_func
(paren
r_int
r_int
id|cpu
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
DECL|function|acpi_thermal_cpufreq_decrease
r_static
r_int
id|acpi_thermal_cpufreq_decrease
c_func
(paren
r_int
r_int
id|cpu
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
macro_line|#endif
r_int
DECL|function|acpi_processor_set_thermal_limit
id|acpi_processor_set_thermal_limit
(paren
id|acpi_handle
id|handle
comma
r_int
id|type
)paren
(brace
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_struct
id|acpi_processor
op_star
id|pr
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|acpi_device
op_star
id|device
op_assign
l_int|NULL
suffix:semicolon
r_int
id|tx
op_assign
l_int|0
suffix:semicolon
id|ACPI_FUNCTION_TRACE
c_func
(paren
l_string|&quot;acpi_processor_set_thermal_limit&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|type
OL
id|ACPI_PROCESSOR_LIMIT_NONE
)paren
op_logical_or
(paren
id|type
OG
id|ACPI_PROCESSOR_LIMIT_DECREMENT
)paren
)paren
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
id|result
op_assign
id|acpi_bus_get_device
c_func
(paren
id|handle
comma
op_amp
id|device
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
id|return_VALUE
c_func
(paren
id|result
)paren
suffix:semicolon
id|pr
op_assign
(paren
r_struct
id|acpi_processor
op_star
)paren
id|acpi_driver_data
c_func
(paren
id|device
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
)paren
id|return_VALUE
c_func
(paren
op_minus
id|ENODEV
)paren
suffix:semicolon
multiline_comment|/* Thermal limits are always relative to the current Px/Tx state. */
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
id|pr-&gt;limit.thermal.tx
op_assign
id|pr-&gt;throttling.state
suffix:semicolon
multiline_comment|/*&n;&t; * Our default policy is to only use throttling at the lowest&n;&t; * performance state.&n;&t; */
id|tx
op_assign
id|pr-&gt;limit.thermal.tx
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|ACPI_PROCESSOR_LIMIT_NONE
suffix:colon
r_do
(brace
id|result
op_assign
id|acpi_thermal_cpufreq_decrease
c_func
(paren
id|pr-&gt;id
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
id|result
)paren
suffix:semicolon
id|tx
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACPI_PROCESSOR_LIMIT_INCREMENT
suffix:colon
multiline_comment|/* if going up: P-states first, T-states later */
id|result
op_assign
id|acpi_thermal_cpufreq_increase
c_func
(paren
id|pr-&gt;id
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
r_goto
id|end
suffix:semicolon
r_else
r_if
c_cond
(paren
id|result
op_eq
op_minus
id|ERANGE
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;At maximum performance state&bslash;n&quot;
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
(brace
r_if
c_cond
(paren
id|tx
op_eq
(paren
id|pr-&gt;throttling.state_count
op_minus
l_int|1
)paren
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;At maximum throttling state&bslash;n&quot;
)paren
)paren
suffix:semicolon
r_else
id|tx
op_increment
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACPI_PROCESSOR_LIMIT_DECREMENT
suffix:colon
multiline_comment|/* if going down: T-states first, P-states later */
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
(brace
r_if
c_cond
(paren
id|tx
op_eq
l_int|0
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;At minimum throttling state&bslash;n&quot;
)paren
)paren
suffix:semicolon
r_else
(brace
id|tx
op_decrement
suffix:semicolon
r_goto
id|end
suffix:semicolon
)brace
)brace
id|result
op_assign
id|acpi_thermal_cpufreq_decrease
c_func
(paren
id|pr-&gt;id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
op_eq
op_minus
id|ERANGE
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;At minimum performance state&bslash;n&quot;
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|end
suffix:colon
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
(brace
id|pr-&gt;limit.thermal.px
op_assign
l_int|0
suffix:semicolon
id|pr-&gt;limit.thermal.tx
op_assign
id|tx
suffix:semicolon
id|result
op_assign
id|acpi_processor_apply_limit
c_func
(paren
id|pr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Unable to set thermal limit&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_INFO
comma
l_string|&quot;Thermal limit now (P%d:T%d)&bslash;n&quot;
comma
id|pr-&gt;limit.thermal.px
comma
id|pr-&gt;limit.thermal.tx
)paren
)paren
suffix:semicolon
)brace
r_else
id|result
op_assign
l_int|0
suffix:semicolon
id|return_VALUE
c_func
(paren
id|result
)paren
suffix:semicolon
)brace
r_int
DECL|function|acpi_processor_get_limit_info
id|acpi_processor_get_limit_info
(paren
r_struct
id|acpi_processor
op_star
id|pr
)paren
(brace
id|ACPI_FUNCTION_TRACE
c_func
(paren
l_string|&quot;acpi_processor_get_limit_info&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
)paren
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
id|pr-&gt;flags.limit
op_assign
l_int|1
suffix:semicolon
id|return_VALUE
c_func
(paren
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* /proc interface */
DECL|function|acpi_processor_limit_seq_show
r_static
r_int
id|acpi_processor_limit_seq_show
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|offset
)paren
(brace
r_struct
id|acpi_processor
op_star
id|pr
op_assign
(paren
r_struct
id|acpi_processor
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
id|ACPI_FUNCTION_TRACE
c_func
(paren
l_string|&quot;acpi_processor_limit_seq_show&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
)paren
r_goto
id|end
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr-&gt;flags.limit
)paren
(brace
id|seq_puts
c_func
(paren
id|seq
comma
l_string|&quot;&lt;not supported&gt;&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|end
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;active limit:            P%d:T%d&bslash;n&quot;
l_string|&quot;user limit:              P%d:T%d&bslash;n&quot;
l_string|&quot;thermal limit:           P%d:T%d&bslash;n&quot;
comma
id|pr-&gt;limit.state.px
comma
id|pr-&gt;limit.state.tx
comma
id|pr-&gt;limit.user.px
comma
id|pr-&gt;limit.user.tx
comma
id|pr-&gt;limit.thermal.px
comma
id|pr-&gt;limit.thermal.tx
)paren
suffix:semicolon
id|end
suffix:colon
id|return_VALUE
c_func
(paren
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|acpi_processor_limit_open_fs
r_int
id|acpi_processor_limit_open_fs
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|acpi_processor_limit_seq_show
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
DECL|function|acpi_processor_write_limit
id|ssize_t
id|acpi_processor_write_limit
(paren
r_struct
id|file
op_star
id|file
comma
r_const
r_char
id|__user
op_star
id|buffer
comma
r_int
id|count
comma
id|loff_t
op_star
id|data
)paren
(brace
r_int
id|result
op_assign
l_int|0
suffix:semicolon
r_struct
id|seq_file
op_star
id|m
op_assign
(paren
r_struct
id|seq_file
op_star
)paren
id|file-&gt;private_data
suffix:semicolon
r_struct
id|acpi_processor
op_star
id|pr
op_assign
(paren
r_struct
id|acpi_processor
op_star
)paren
id|m
op_member_access_from_pointer
r_private
suffix:semicolon
r_char
id|limit_string
(braket
l_int|25
)braket
op_assign
(brace
l_char|&squot;&bslash;0&squot;
)brace
suffix:semicolon
r_int
id|px
op_assign
l_int|0
suffix:semicolon
r_int
id|tx
op_assign
l_int|0
suffix:semicolon
id|ACPI_FUNCTION_TRACE
c_func
(paren
l_string|&quot;acpi_processor_write_limit&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
op_logical_or
(paren
id|count
OG
r_sizeof
(paren
id|limit_string
)paren
op_minus
l_int|1
)paren
)paren
(brace
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Invalid argument&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|limit_string
comma
id|buffer
comma
id|count
)paren
)paren
(brace
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Invalid data&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
op_minus
id|EFAULT
)paren
suffix:semicolon
)brace
id|limit_string
(braket
id|count
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_if
c_cond
(paren
id|sscanf
c_func
(paren
id|limit_string
comma
l_string|&quot;%d:%d&quot;
comma
op_amp
id|px
comma
op_amp
id|tx
)paren
op_ne
l_int|2
)paren
(brace
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Invalid data format&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pr-&gt;flags.throttling
)paren
(brace
r_if
c_cond
(paren
(paren
id|tx
OL
l_int|0
)paren
op_logical_or
(paren
id|tx
OG
(paren
id|pr-&gt;throttling.state_count
op_minus
l_int|1
)paren
)paren
)paren
(brace
id|ACPI_DEBUG_PRINT
c_func
(paren
(paren
id|ACPI_DB_ERROR
comma
l_string|&quot;Invalid tx&bslash;n&quot;
)paren
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
op_minus
id|EINVAL
)paren
suffix:semicolon
)brace
id|pr-&gt;limit.user.tx
op_assign
id|tx
suffix:semicolon
)brace
id|result
op_assign
id|acpi_processor_apply_limit
c_func
(paren
id|pr
)paren
suffix:semicolon
id|return_VALUE
c_func
(paren
id|count
)paren
suffix:semicolon
)brace
DECL|variable|acpi_processor_limit_fops
r_struct
id|file_operations
id|acpi_processor_limit_fops
op_assign
(brace
dot
id|open
op_assign
id|acpi_processor_limit_open_fs
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
eof
