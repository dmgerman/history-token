multiline_comment|/*******************************************************************************&n; *&n; * Module Name: dbdisply - debug display commands&n; *              $Revision: 75 $&n; *&n; ******************************************************************************/
multiline_comment|/*&n; *  Copyright (C) 2000 - 2002, R. Byron Moore&n; *&n; *  This program is free software; you can redistribute it and/or modify&n; *  it under the terms of the GNU General Public License as published by&n; *  the Free Software Foundation; either version 2 of the License, or&n; *  (at your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful,&n; *  but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *  GNU General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License&n; *  along with this program; if not, write to the Free Software&n; *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA&n; */
macro_line|#include &quot;acpi.h&quot;
macro_line|#include &quot;amlcode.h&quot;
macro_line|#include &quot;acdispat.h&quot;
macro_line|#include &quot;acnamesp.h&quot;
macro_line|#include &quot;acparser.h&quot;
macro_line|#include &quot;acinterp.h&quot;
macro_line|#include &quot;acdebug.h&quot;
macro_line|#ifdef ENABLE_DEBUGGER
DECL|macro|_COMPONENT
mdefine_line|#define _COMPONENT          ACPI_DEBUGGER
id|ACPI_MODULE_NAME
(paren
l_string|&quot;dbdisply&quot;
)paren
multiline_comment|/******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_get_pointer&n; *&n; * PARAMETERS:  Target          - Pointer to string to be converted&n; *&n; * RETURN:      Converted pointer&n; *&n; * DESCRIPTION: Convert an ascii pointer value to a real value&n; *&n; *****************************************************************************/
r_void
op_star
DECL|function|acpi_db_get_pointer
id|acpi_db_get_pointer
(paren
r_void
op_star
id|target
)paren
(brace
r_void
op_star
id|obj_ptr
suffix:semicolon
macro_line|#if ACPI_MACHINE_WIDTH == 16
macro_line|#include &lt;stdio.h&gt;
multiline_comment|/* Have to handle 16-bit pointers of the form segment:offset */
r_if
c_cond
(paren
op_logical_neg
id|sscanf
(paren
id|target
comma
l_string|&quot;%p&quot;
comma
op_amp
id|obj_ptr
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Invalid pointer: %s&bslash;n&quot;
comma
id|target
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
macro_line|#else
multiline_comment|/* Simple flat pointer */
id|obj_ptr
op_assign
id|ACPI_TO_POINTER
(paren
id|ACPI_STRTOUL
(paren
id|target
comma
l_int|NULL
comma
l_int|16
)paren
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
id|obj_ptr
)paren
suffix:semicolon
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_dump_parser_descriptor&n; *&n; * PARAMETERS:  Op              - A parser Op descriptor&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display a formatted parser object&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_dump_parser_descriptor
id|acpi_db_dump_parser_descriptor
(paren
id|acpi_parse_object
op_star
id|op
)paren
(brace
r_const
id|acpi_opcode_info
op_star
id|info
suffix:semicolon
id|info
op_assign
id|acpi_ps_get_opcode_info
(paren
id|op-&gt;common.aml_opcode
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Parser Op Descriptor:&bslash;n&quot;
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%20.20s : %4.4X&bslash;n&quot;
comma
l_string|&quot;Opcode&quot;
comma
id|op-&gt;common.aml_opcode
)paren
suffix:semicolon
id|ACPI_DEBUG_ONLY_MEMBERS
(paren
id|acpi_os_printf
(paren
l_string|&quot;%20.20s : %s&bslash;n&quot;
comma
l_string|&quot;Opcode Name&quot;
comma
id|info-&gt;name
)paren
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%20.20s : %p&bslash;n&quot;
comma
l_string|&quot;Value/Arg_list&quot;
comma
id|op-&gt;common.value.arg
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%20.20s : %p&bslash;n&quot;
comma
l_string|&quot;Parent&quot;
comma
id|op-&gt;common.parent
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%20.20s : %p&bslash;n&quot;
comma
l_string|&quot;Next_op&quot;
comma
id|op-&gt;common.next
)paren
suffix:semicolon
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_decode_and_display_object&n; *&n; * PARAMETERS:  Target          - String with object to be displayed.  Names&n; *                                and hex pointers are supported.&n; *              Output_type     - Byte, Word, Dword, or Qword (B|W|D|Q)&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display a formatted ACPI object&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_decode_and_display_object
id|acpi_db_decode_and_display_object
(paren
id|NATIVE_CHAR
op_star
id|target
comma
id|NATIVE_CHAR
op_star
id|output_type
)paren
(brace
r_void
op_star
id|obj_ptr
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|acpi_operand_object
op_star
id|obj_desc
suffix:semicolon
id|u32
id|display
op_assign
id|DB_BYTE_DISPLAY
suffix:semicolon
id|NATIVE_CHAR
id|buffer
(braket
l_int|80
)braket
suffix:semicolon
id|acpi_buffer
id|ret_buf
suffix:semicolon
id|acpi_status
id|status
suffix:semicolon
id|u32
id|size
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|target
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* Decode the output type */
r_if
c_cond
(paren
id|output_type
)paren
(brace
id|ACPI_STRUPR
(paren
id|output_type
)paren
suffix:semicolon
r_if
c_cond
(paren
id|output_type
(braket
l_int|0
)braket
op_eq
l_char|&squot;W&squot;
)paren
(brace
id|display
op_assign
id|DB_WORD_DISPLAY
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|output_type
(braket
l_int|0
)braket
op_eq
l_char|&squot;D&squot;
)paren
(brace
id|display
op_assign
id|DB_DWORD_DISPLAY
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|output_type
(braket
l_int|0
)braket
op_eq
l_char|&squot;Q&squot;
)paren
(brace
id|display
op_assign
id|DB_QWORD_DISPLAY
suffix:semicolon
)brace
)brace
id|ret_buf.length
op_assign
r_sizeof
(paren
id|buffer
)paren
suffix:semicolon
id|ret_buf.pointer
op_assign
id|buffer
suffix:semicolon
multiline_comment|/* Differentiate between a number and a name */
r_if
c_cond
(paren
(paren
id|target
(braket
l_int|0
)braket
op_ge
l_int|0x30
)paren
op_logical_and
(paren
id|target
(braket
l_int|0
)braket
op_le
l_int|0x39
)paren
)paren
(brace
id|obj_ptr
op_assign
id|acpi_db_get_pointer
(paren
id|target
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|obj_ptr
comma
l_int|16
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Address %p is invalid in this address space&bslash;n&quot;
comma
id|obj_ptr
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* Decode the object type */
r_switch
c_cond
(paren
id|ACPI_GET_DESCRIPTOR_TYPE
(paren
id|obj_ptr
)paren
)paren
(brace
r_case
id|ACPI_DESC_TYPE_NAMED
suffix:colon
multiline_comment|/* This is a namespace Node */
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|obj_ptr
comma
r_sizeof
(paren
id|acpi_namespace_node
)paren
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Cannot read entire Named object at address %p&bslash;n&quot;
comma
id|obj_ptr
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|node
op_assign
id|obj_ptr
suffix:semicolon
r_goto
id|dump_nte
suffix:semicolon
r_case
id|ACPI_DESC_TYPE_OPERAND
suffix:colon
multiline_comment|/* This is a ACPI OPERAND OBJECT */
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|obj_ptr
comma
r_sizeof
(paren
id|acpi_operand_object
)paren
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Cannot read entire ACPI object at address %p&bslash;n&quot;
comma
id|obj_ptr
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|acpi_ut_dump_buffer
(paren
id|obj_ptr
comma
r_sizeof
(paren
id|acpi_operand_object
)paren
comma
id|display
comma
id|ACPI_UINT32_MAX
)paren
suffix:semicolon
id|acpi_ex_dump_object_descriptor
(paren
id|obj_ptr
comma
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACPI_DESC_TYPE_PARSER
suffix:colon
multiline_comment|/* This is a Parser Op object */
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|obj_ptr
comma
r_sizeof
(paren
id|acpi_parse_object
)paren
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Cannot read entire Parser object at address %p&bslash;n&quot;
comma
id|obj_ptr
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|acpi_ut_dump_buffer
(paren
id|obj_ptr
comma
r_sizeof
(paren
id|acpi_parse_object
)paren
comma
id|display
comma
id|ACPI_UINT32_MAX
)paren
suffix:semicolon
id|acpi_db_dump_parser_descriptor
(paren
(paren
id|acpi_parse_object
op_star
)paren
id|obj_ptr
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* Is not a recognizeable object */
id|size
op_assign
l_int|16
suffix:semicolon
r_if
c_cond
(paren
id|acpi_os_readable
(paren
id|obj_ptr
comma
l_int|64
)paren
)paren
(brace
id|size
op_assign
l_int|64
suffix:semicolon
)brace
multiline_comment|/* Just dump some memory */
id|acpi_ut_dump_buffer
(paren
id|obj_ptr
comma
id|size
comma
id|display
comma
id|ACPI_UINT32_MAX
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/* The parameter is a name string that must be resolved to a Named obj */
id|node
op_assign
id|acpi_db_local_ns_lookup
(paren
id|target
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|node
)paren
(brace
r_return
suffix:semicolon
)brace
id|dump_nte
suffix:colon
multiline_comment|/* Now dump the Named obj */
id|status
op_assign
id|acpi_get_name
(paren
id|node
comma
id|ACPI_FULL_PATHNAME
comma
op_amp
id|ret_buf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ACPI_FAILURE
(paren
id|status
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Could not convert name to pathname&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|acpi_os_printf
(paren
l_string|&quot;Object (%p) Pathname: %s&bslash;n&quot;
comma
id|node
comma
id|ret_buf.pointer
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|node
comma
r_sizeof
(paren
id|acpi_namespace_node
)paren
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Invalid Named object at address %p&bslash;n&quot;
comma
id|node
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|acpi_ut_dump_buffer
(paren
(paren
r_void
op_star
)paren
id|node
comma
r_sizeof
(paren
id|acpi_namespace_node
)paren
comma
id|display
comma
id|ACPI_UINT32_MAX
)paren
suffix:semicolon
id|acpi_ex_dump_node
(paren
id|node
comma
l_int|1
)paren
suffix:semicolon
id|obj_desc
op_assign
id|acpi_ns_get_attached_object
(paren
id|node
)paren
suffix:semicolon
r_if
c_cond
(paren
id|obj_desc
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;&bslash;nAttached Object (%p):&bslash;n&quot;
comma
id|obj_desc
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|acpi_os_readable
(paren
id|obj_desc
comma
r_sizeof
(paren
id|acpi_operand_object
)paren
)paren
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;Invalid internal ACPI Object at address %p&bslash;n&quot;
comma
id|obj_desc
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|acpi_ut_dump_buffer
(paren
(paren
r_void
op_star
)paren
id|obj_desc
comma
r_sizeof
(paren
id|acpi_operand_object
)paren
comma
id|display
comma
id|ACPI_UINT32_MAX
)paren
suffix:semicolon
id|acpi_ex_dump_object_descriptor
(paren
id|obj_desc
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_decode_internal_object&n; *&n; * PARAMETERS:  Obj_desc        - Object to be displayed&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Short display of an internal object.  Numbers and Strings.&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_decode_internal_object
id|acpi_db_decode_internal_object
(paren
id|acpi_operand_object
op_star
id|obj_desc
)paren
(brace
id|u32
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|obj_desc
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot; Uninitialized&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot; %s&quot;
comma
id|acpi_ut_get_object_type_name
(paren
id|obj_desc
)paren
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ACPI_GET_OBJECT_TYPE
(paren
id|obj_desc
)paren
)paren
(brace
r_case
id|ACPI_TYPE_INTEGER
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot; %8.8X%8.8X&quot;
comma
id|ACPI_HIDWORD
(paren
id|obj_desc-&gt;integer.value
)paren
comma
id|ACPI_LODWORD
(paren
id|obj_desc-&gt;integer.value
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACPI_TYPE_STRING
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;(%d) &bslash;&quot;%.24s&quot;
comma
id|obj_desc-&gt;string.length
comma
id|obj_desc-&gt;string.pointer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|obj_desc-&gt;string.length
OG
l_int|24
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;...&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|acpi_os_printf
(paren
l_string|&quot;&bslash;&quot;&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACPI_TYPE_BUFFER
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;(%d)&quot;
comma
id|obj_desc-&gt;buffer.length
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
(paren
id|i
OL
l_int|8
)paren
op_logical_and
(paren
id|i
OL
id|obj_desc-&gt;buffer.length
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot; %2.2X&quot;
comma
id|obj_desc-&gt;buffer.pointer
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* No additional display for other types */
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_internal_object&n; *&n; * PARAMETERS:  Obj_desc        - Object to be displayed&n; *              Walk_state      - Current walk state&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Short display of an internal object&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_internal_object
id|acpi_db_display_internal_object
(paren
id|acpi_operand_object
op_star
id|obj_desc
comma
id|acpi_walk_state
op_star
id|walk_state
)paren
(brace
id|u8
id|type
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%p &quot;
comma
id|obj_desc
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|obj_desc
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;&lt;Null_obj&gt;&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* Decode the object type */
r_switch
c_cond
(paren
id|ACPI_GET_DESCRIPTOR_TYPE
(paren
id|obj_desc
)paren
)paren
(brace
r_case
id|ACPI_DESC_TYPE_PARSER
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;&lt;Parser&gt; &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ACPI_DESC_TYPE_NAMED
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;&lt;Node&gt;          Name %4.4s Type-%s&quot;
comma
(paren
(paren
id|acpi_namespace_node
op_star
)paren
id|obj_desc
)paren
op_member_access_from_pointer
id|name.ascii
comma
id|acpi_ut_get_type_name
(paren
(paren
(paren
id|acpi_namespace_node
op_star
)paren
id|obj_desc
)paren
op_member_access_from_pointer
id|type
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|acpi_namespace_node
op_star
)paren
id|obj_desc
)paren
op_member_access_from_pointer
id|flags
op_amp
id|ANOBJ_METHOD_ARG
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot; [Method Arg]&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|acpi_namespace_node
op_star
)paren
id|obj_desc
)paren
op_member_access_from_pointer
id|flags
op_amp
id|ANOBJ_METHOD_LOCAL
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot; [Method Local]&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACPI_DESC_TYPE_OPERAND
suffix:colon
id|type
op_assign
id|ACPI_GET_OBJECT_TYPE
(paren
id|obj_desc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|type
OG
id|INTERNAL_TYPE_MAX
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot; Type %hX [Invalid Type]&quot;
comma
id|type
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* Decode the ACPI object type */
r_switch
c_cond
(paren
id|ACPI_GET_OBJECT_TYPE
(paren
id|obj_desc
)paren
)paren
(brace
r_case
id|INTERNAL_TYPE_REFERENCE
suffix:colon
r_switch
c_cond
(paren
id|obj_desc-&gt;reference.opcode
)paren
(brace
r_case
id|AML_LOCAL_OP
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;[Local%d] &quot;
comma
id|obj_desc-&gt;reference.offset
)paren
suffix:semicolon
r_if
c_cond
(paren
id|walk_state
)paren
(brace
id|obj_desc
op_assign
id|walk_state-&gt;local_variables
(braket
id|obj_desc-&gt;reference.offset
)braket
dot
id|object
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%p&quot;
comma
id|obj_desc
)paren
suffix:semicolon
id|acpi_db_decode_internal_object
(paren
id|obj_desc
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|AML_ARG_OP
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;[Arg%d] &quot;
comma
id|obj_desc-&gt;reference.offset
)paren
suffix:semicolon
r_if
c_cond
(paren
id|walk_state
)paren
(brace
id|obj_desc
op_assign
id|walk_state-&gt;arguments
(braket
id|obj_desc-&gt;reference.offset
)braket
dot
id|object
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%p&quot;
comma
id|obj_desc
)paren
suffix:semicolon
id|acpi_db_decode_internal_object
(paren
id|obj_desc
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|AML_DEBUG_OP
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;[Debug] &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AML_INDEX_OP
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;[Index]         &quot;
)paren
suffix:semicolon
id|acpi_db_decode_internal_object
(paren
id|obj_desc-&gt;reference.object
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;Unknown Reference opcode %X&bslash;n&quot;
comma
id|obj_desc-&gt;reference.opcode
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;&lt;Obj&gt; &quot;
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;         &quot;
)paren
suffix:semicolon
id|acpi_db_decode_internal_object
(paren
id|obj_desc
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|acpi_os_printf
(paren
l_string|&quot;&lt;Not a valid ACPI Object Descriptor&gt; &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_method_info&n; *&n; * PARAMETERS:  Start_op        - Root of the control method parse tree&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display information about the current method&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_method_info
id|acpi_db_display_method_info
(paren
id|acpi_parse_object
op_star
id|start_op
)paren
(brace
id|acpi_walk_state
op_star
id|walk_state
suffix:semicolon
id|acpi_operand_object
op_star
id|obj_desc
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|acpi_parse_object
op_star
id|root_op
suffix:semicolon
id|acpi_parse_object
op_star
id|op
suffix:semicolon
r_const
id|acpi_opcode_info
op_star
id|op_info
suffix:semicolon
id|u32
id|num_ops
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_operands
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_operators
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_remaining_ops
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_remaining_operands
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_remaining_operators
op_assign
l_int|0
suffix:semicolon
id|u32
id|num_args
suffix:semicolon
id|u32
id|concurrency
suffix:semicolon
id|u8
id|count_remaining
op_assign
id|FALSE
suffix:semicolon
id|walk_state
op_assign
id|acpi_ds_get_current_walk_state
(paren
id|acpi_gbl_current_walk_list
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|walk_state
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;There is no method currently executing&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|obj_desc
op_assign
id|walk_state-&gt;method_desc
suffix:semicolon
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
id|num_args
op_assign
id|obj_desc-&gt;method.param_count
suffix:semicolon
id|concurrency
op_assign
id|obj_desc-&gt;method.concurrency
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Currently executing control method is [%4.4s]&bslash;n&quot;
comma
id|node-&gt;name.ascii
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;%X arguments, max concurrency = %X&bslash;n&quot;
comma
id|num_args
comma
id|concurrency
)paren
suffix:semicolon
id|root_op
op_assign
id|start_op
suffix:semicolon
r_while
c_loop
(paren
id|root_op-&gt;common.parent
)paren
(brace
id|root_op
op_assign
id|root_op-&gt;common.parent
suffix:semicolon
)brace
id|op
op_assign
id|root_op
suffix:semicolon
r_while
c_loop
(paren
id|op
)paren
(brace
r_if
c_cond
(paren
id|op
op_eq
id|start_op
)paren
(brace
id|count_remaining
op_assign
id|TRUE
suffix:semicolon
)brace
id|num_ops
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|count_remaining
)paren
(brace
id|num_remaining_ops
op_increment
suffix:semicolon
)brace
multiline_comment|/* Decode the opcode */
id|op_info
op_assign
id|acpi_ps_get_opcode_info
(paren
id|op-&gt;common.aml_opcode
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|op_info
op_member_access_from_pointer
r_class
)paren
(brace
r_case
id|AML_CLASS_ARGUMENT
suffix:colon
r_if
c_cond
(paren
id|count_remaining
)paren
(brace
id|num_remaining_operands
op_increment
suffix:semicolon
)brace
id|num_operands
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AML_CLASS_UNKNOWN
suffix:colon
multiline_comment|/* Bad opcode or ASCII character */
r_continue
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|count_remaining
)paren
(brace
id|num_remaining_operators
op_increment
suffix:semicolon
)brace
id|num_operators
op_increment
suffix:semicolon
r_break
suffix:semicolon
)brace
id|op
op_assign
id|acpi_ps_get_depth_next
(paren
id|start_op
comma
id|op
)paren
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot;Method contains:     %X AML Opcodes - %X Operators, %X Operands&bslash;n&quot;
comma
id|num_ops
comma
id|num_operators
comma
id|num_operands
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Remaining to execute: %X AML Opcodes - %X Operators, %X Operands&bslash;n&quot;
comma
id|num_remaining_ops
comma
id|num_remaining_operators
comma
id|num_remaining_operands
)paren
suffix:semicolon
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_locals&n; *&n; * PARAMETERS:  None&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display all locals for the currently running control method&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_locals
id|acpi_db_display_locals
(paren
r_void
)paren
(brace
id|u32
id|i
suffix:semicolon
id|acpi_walk_state
op_star
id|walk_state
suffix:semicolon
id|acpi_operand_object
op_star
id|obj_desc
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|walk_state
op_assign
id|acpi_ds_get_current_walk_state
(paren
id|acpi_gbl_current_walk_list
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|walk_state
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;There is no method currently executing&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|obj_desc
op_assign
id|walk_state-&gt;method_desc
suffix:semicolon
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Local Variables for method [%4.4s]:&bslash;n&quot;
comma
id|node-&gt;name.ascii
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MTH_NUM_LOCALS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|obj_desc
op_assign
id|walk_state-&gt;local_variables
(braket
id|i
)braket
dot
id|object
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Local%d: &quot;
comma
id|i
)paren
suffix:semicolon
id|acpi_db_display_internal_object
(paren
id|obj_desc
comma
id|walk_state
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_arguments&n; *&n; * PARAMETERS:  None&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display all arguments for the currently running control method&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_arguments
id|acpi_db_display_arguments
(paren
r_void
)paren
(brace
id|u32
id|i
suffix:semicolon
id|acpi_walk_state
op_star
id|walk_state
suffix:semicolon
id|acpi_operand_object
op_star
id|obj_desc
suffix:semicolon
id|u32
id|num_args
suffix:semicolon
id|u32
id|concurrency
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|walk_state
op_assign
id|acpi_ds_get_current_walk_state
(paren
id|acpi_gbl_current_walk_list
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|walk_state
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;There is no method currently executing&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|obj_desc
op_assign
id|walk_state-&gt;method_desc
suffix:semicolon
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
id|num_args
op_assign
id|obj_desc-&gt;method.param_count
suffix:semicolon
id|concurrency
op_assign
id|obj_desc-&gt;method.concurrency
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Method [%4.4s] has %X arguments, max concurrency = %X&bslash;n&quot;
comma
id|node-&gt;name.ascii
comma
id|num_args
comma
id|concurrency
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num_args
suffix:semicolon
id|i
op_increment
)paren
(brace
id|obj_desc
op_assign
id|walk_state-&gt;arguments
(braket
id|i
)braket
dot
id|object
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Arg%d: &quot;
comma
id|i
)paren
suffix:semicolon
id|acpi_db_display_internal_object
(paren
id|obj_desc
comma
id|walk_state
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_results&n; *&n; * PARAMETERS:  None&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display current contents of a method result stack&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_results
id|acpi_db_display_results
(paren
r_void
)paren
(brace
id|u32
id|i
suffix:semicolon
id|acpi_walk_state
op_star
id|walk_state
suffix:semicolon
id|acpi_operand_object
op_star
id|obj_desc
suffix:semicolon
id|u32
id|num_results
op_assign
l_int|0
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|walk_state
op_assign
id|acpi_ds_get_current_walk_state
(paren
id|acpi_gbl_current_walk_list
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|walk_state
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;There is no method currently executing&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|obj_desc
op_assign
id|walk_state-&gt;method_desc
suffix:semicolon
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
r_if
c_cond
(paren
id|walk_state-&gt;results
)paren
(brace
id|num_results
op_assign
id|walk_state-&gt;results-&gt;results.num_results
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot;Method [%4.4s] has %X stacked result objects&bslash;n&quot;
comma
id|node-&gt;name.ascii
comma
id|num_results
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num_results
suffix:semicolon
id|i
op_increment
)paren
(brace
id|obj_desc
op_assign
id|walk_state-&gt;results-&gt;results.obj_desc
(braket
id|i
)braket
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Result%d: &quot;
comma
id|i
)paren
suffix:semicolon
id|acpi_db_display_internal_object
(paren
id|obj_desc
comma
id|walk_state
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_calling_tree&n; *&n; * PARAMETERS:  None&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display current calling tree of nested control methods&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_calling_tree
id|acpi_db_display_calling_tree
(paren
r_void
)paren
(brace
id|acpi_walk_state
op_star
id|walk_state
suffix:semicolon
id|acpi_namespace_node
op_star
id|node
suffix:semicolon
id|walk_state
op_assign
id|acpi_ds_get_current_walk_state
(paren
id|acpi_gbl_current_walk_list
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|walk_state
)paren
(brace
id|acpi_os_printf
(paren
l_string|&quot;There is no method currently executing&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;Current Control Method Call Tree&bslash;n&quot;
)paren
suffix:semicolon
r_while
c_loop
(paren
id|walk_state
)paren
(brace
id|node
op_assign
id|walk_state-&gt;method_node
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;  [%4.4s]&bslash;n&quot;
comma
id|node-&gt;name.ascii
)paren
suffix:semicolon
id|walk_state
op_assign
id|walk_state-&gt;next
suffix:semicolon
)brace
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_result_object&n; *&n; * PARAMETERS:  Obj_desc        - Object to be displayed&n; *              Walk_state      - Current walk state&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display the result of an AML opcode&n; *&n; * Note: Curently only displays the result object if we are single stepping.&n; * However, this output may be useful in other contexts and could be enabled&n; * to do so if needed.&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_result_object
id|acpi_db_display_result_object
(paren
id|acpi_operand_object
op_star
id|obj_desc
comma
id|acpi_walk_state
op_star
id|walk_state
)paren
(brace
multiline_comment|/* Only display if single stepping */
r_if
c_cond
(paren
op_logical_neg
id|acpi_gbl_cm_single_step
)paren
(brace
r_return
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot;Result_obj: &quot;
)paren
suffix:semicolon
id|acpi_db_display_internal_object
(paren
id|obj_desc
comma
id|walk_state
)paren
suffix:semicolon
id|acpi_os_printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*******************************************************************************&n; *&n; * FUNCTION:    Acpi_db_display_argument_object&n; *&n; * PARAMETERS:  Obj_desc        - Object to be displayed&n; *              Walk_state      - Current walk state&n; *&n; * RETURN:      None&n; *&n; * DESCRIPTION: Display the result of an AML opcode&n; *&n; ******************************************************************************/
r_void
DECL|function|acpi_db_display_argument_object
id|acpi_db_display_argument_object
(paren
id|acpi_operand_object
op_star
id|obj_desc
comma
id|acpi_walk_state
op_star
id|walk_state
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|acpi_gbl_cm_single_step
)paren
(brace
r_return
suffix:semicolon
)brace
id|acpi_os_printf
(paren
l_string|&quot;Arg_obj: &quot;
)paren
suffix:semicolon
id|acpi_db_display_internal_object
(paren
id|obj_desc
comma
id|walk_state
)paren
suffix:semicolon
)brace
macro_line|#endif /* ENABLE_DEBUGGER */
eof
