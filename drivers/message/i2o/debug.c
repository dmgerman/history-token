macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/i2o.h&gt;
r_extern
r_struct
id|i2o_driver
op_star
op_star
id|i2o_drivers
suffix:semicolon
r_extern
r_int
r_int
id|i2o_max_drivers
suffix:semicolon
r_static
r_void
id|i2o_report_util_cmd
c_func
(paren
id|u8
id|cmd
)paren
suffix:semicolon
r_static
r_void
id|i2o_report_exec_cmd
c_func
(paren
id|u8
id|cmd
)paren
suffix:semicolon
r_static
r_void
id|i2o_report_fail_status
c_func
(paren
id|u8
id|req_status
comma
id|u32
op_star
id|msg
)paren
suffix:semicolon
r_static
r_void
id|i2o_report_common_status
c_func
(paren
id|u8
id|req_status
)paren
suffix:semicolon
r_static
r_void
id|i2o_report_common_dsc
c_func
(paren
id|u16
id|detailed_status
)paren
suffix:semicolon
multiline_comment|/*&n; * Used for error reporting/debugging purposes.&n; * Report Cmd name, Request status, Detailed Status.&n; */
DECL|function|i2o_report_status
r_void
id|i2o_report_status
c_func
(paren
r_const
r_char
op_star
id|severity
comma
r_const
r_char
op_star
id|str
comma
r_struct
id|i2o_message
op_star
id|m
)paren
(brace
id|u32
op_star
id|msg
op_assign
(paren
id|u32
op_star
)paren
id|m
suffix:semicolon
id|u8
id|cmd
op_assign
(paren
id|msg
(braket
l_int|1
)braket
op_rshift
l_int|24
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|u8
id|req_status
op_assign
(paren
id|msg
(braket
l_int|4
)braket
op_rshift
l_int|24
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|u16
id|detailed_status
op_assign
id|msg
(braket
l_int|4
)braket
op_amp
l_int|0xFFFF
suffix:semicolon
singleline_comment|//struct i2o_driver *h = i2o_drivers[msg[2] &amp; (i2o_max_drivers-1)];
r_if
c_cond
(paren
id|cmd
op_eq
id|I2O_CMD_UTIL_EVT_REGISTER
)paren
r_return
suffix:semicolon
singleline_comment|// No status in this reply
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;%s%s: &quot;
comma
id|severity
comma
id|str
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
OL
l_int|0x1F
)paren
singleline_comment|// Utility cmd
id|i2o_report_util_cmd
c_func
(paren
id|cmd
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|cmd
op_ge
l_int|0xA0
op_logical_and
id|cmd
op_le
l_int|0xEF
)paren
singleline_comment|// Executive cmd
id|i2o_report_exec_cmd
c_func
(paren
id|cmd
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Cmd = %0#2x, &quot;
comma
id|cmd
)paren
suffix:semicolon
singleline_comment|// Other cmds
r_if
c_cond
(paren
id|msg
(braket
l_int|0
)braket
op_amp
id|MSG_FAIL
)paren
(brace
id|i2o_report_fail_status
c_func
(paren
id|req_status
comma
id|msg
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|i2o_report_common_status
c_func
(paren
id|req_status
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cmd
OL
l_int|0x1F
op_logical_or
(paren
id|cmd
op_ge
l_int|0xA0
op_logical_and
id|cmd
op_le
l_int|0xEF
)paren
)paren
id|i2o_report_common_dsc
c_func
(paren
id|detailed_status
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot; / DetailedStatus = %0#4x.&bslash;n&quot;
comma
id|detailed_status
)paren
suffix:semicolon
)brace
multiline_comment|/* Used to dump a message to syslog during debugging */
DECL|function|i2o_dump_message
r_void
id|i2o_dump_message
c_func
(paren
r_struct
id|i2o_message
op_star
id|m
)paren
(brace
macro_line|#ifdef DEBUG
id|u32
op_star
id|msg
op_assign
(paren
id|u32
op_star
)paren
id|m
suffix:semicolon
r_int
id|i
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Dumping I2O message size %d @ %p&bslash;n&quot;
comma
id|msg
(braket
l_int|0
)braket
op_rshift
l_int|16
op_amp
l_int|0xffff
comma
id|msg
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
(paren
(paren
id|msg
(braket
l_int|0
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|i
op_increment
)paren
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;  msg[%d] = %0#10x&bslash;n&quot;
comma
id|i
comma
id|msg
(braket
id|i
)braket
)paren
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n; * Used for error reporting/debugging purposes.&n; * Following fail status are common to all classes.&n; * The preserved message must be handled in the reply handler.&n; */
DECL|function|i2o_report_fail_status
r_static
r_void
id|i2o_report_fail_status
c_func
(paren
id|u8
id|req_status
comma
id|u32
op_star
id|msg
)paren
(brace
r_static
r_char
op_star
id|FAIL_STATUS
(braket
)braket
op_assign
(brace
l_string|&quot;0x80&quot;
comma
multiline_comment|/* not used */
l_string|&quot;SERVICE_SUSPENDED&quot;
comma
multiline_comment|/* 0x81 */
l_string|&quot;SERVICE_TERMINATED&quot;
comma
multiline_comment|/* 0x82 */
l_string|&quot;CONGESTION&quot;
comma
l_string|&quot;FAILURE&quot;
comma
l_string|&quot;STATE_ERROR&quot;
comma
l_string|&quot;TIME_OUT&quot;
comma
l_string|&quot;ROUTING_FAILURE&quot;
comma
l_string|&quot;INVALID_VERSION&quot;
comma
l_string|&quot;INVALID_OFFSET&quot;
comma
l_string|&quot;INVALID_MSG_FLAGS&quot;
comma
l_string|&quot;FRAME_TOO_SMALL&quot;
comma
l_string|&quot;FRAME_TOO_LARGE&quot;
comma
l_string|&quot;INVALID_TARGET_ID&quot;
comma
l_string|&quot;INVALID_INITIATOR_ID&quot;
comma
l_string|&quot;INVALID_INITIATOR_CONTEX&quot;
comma
multiline_comment|/* 0x8F */
l_string|&quot;UNKNOWN_FAILURE&quot;
multiline_comment|/* 0xFF */
)brace
suffix:semicolon
r_if
c_cond
(paren
id|req_status
op_eq
id|I2O_FSC_TRANSPORT_UNKNOWN_FAILURE
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;TRANSPORT_UNKNOWN_FAILURE (%0#2x)&bslash;n.&quot;
comma
id|req_status
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;TRANSPORT_%s.&bslash;n&quot;
comma
id|FAIL_STATUS
(braket
id|req_status
op_amp
l_int|0x0F
)braket
)paren
suffix:semicolon
multiline_comment|/* Dump some details */
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;  InitiatorId = %d, TargetId = %d&bslash;n&quot;
comma
(paren
id|msg
(braket
l_int|1
)braket
op_rshift
l_int|12
)paren
op_amp
l_int|0xFFF
comma
id|msg
(braket
l_int|1
)braket
op_amp
l_int|0xFFF
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;  LowestVersion = 0x%02X, HighestVersion = 0x%02X&bslash;n&quot;
comma
(paren
id|msg
(braket
l_int|4
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
comma
id|msg
(braket
l_int|4
)braket
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;  FailingHostUnit = 0x%04X,  FailingIOP = 0x%03X&bslash;n&quot;
comma
id|msg
(braket
l_int|5
)braket
op_rshift
l_int|16
comma
id|msg
(braket
l_int|5
)braket
op_amp
l_int|0xFFF
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;  Severity:  0x%02X &quot;
comma
(paren
id|msg
(braket
l_int|4
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|0xFF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|4
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|16
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;(FormatError), &quot;
l_string|&quot;this msg can never be delivered/processed.&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|4
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|17
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;(PathError), &quot;
l_string|&quot;this msg can no longer be delivered/processed.&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|4
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|18
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;(PathState), &quot;
l_string|&quot;the system state does not allow delivery.&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|msg
(braket
l_int|4
)braket
op_amp
(paren
l_int|1
op_lshift
l_int|19
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;(Congestion), resources temporarily not available;&quot;
l_string|&quot;do not retry immediately.&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Used for error reporting/debugging purposes.&n; * Following reply status are common to all classes.&n; */
DECL|function|i2o_report_common_status
r_static
r_void
id|i2o_report_common_status
c_func
(paren
id|u8
id|req_status
)paren
(brace
r_static
r_char
op_star
id|REPLY_STATUS
(braket
)braket
op_assign
(brace
l_string|&quot;SUCCESS&quot;
comma
l_string|&quot;ABORT_DIRTY&quot;
comma
l_string|&quot;ABORT_NO_DATA_TRANSFER&quot;
comma
l_string|&quot;ABORT_PARTIAL_TRANSFER&quot;
comma
l_string|&quot;ERROR_DIRTY&quot;
comma
l_string|&quot;ERROR_NO_DATA_TRANSFER&quot;
comma
l_string|&quot;ERROR_PARTIAL_TRANSFER&quot;
comma
l_string|&quot;PROCESS_ABORT_DIRTY&quot;
comma
l_string|&quot;PROCESS_ABORT_NO_DATA_TRANSFER&quot;
comma
l_string|&quot;PROCESS_ABORT_PARTIAL_TRANSFER&quot;
comma
l_string|&quot;TRANSACTION_ERROR&quot;
comma
l_string|&quot;PROGRESS_REPORT&quot;
)brace
suffix:semicolon
r_if
c_cond
(paren
id|req_status
op_ge
id|ARRAY_SIZE
c_func
(paren
id|REPLY_STATUS
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;RequestStatus = %0#2x&quot;
comma
id|req_status
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;%s&quot;
comma
id|REPLY_STATUS
(braket
id|req_status
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Used for error reporting/debugging purposes.&n; * Following detailed status are valid  for executive class,&n; * utility class, DDM class and for transaction error replies.&n; */
DECL|function|i2o_report_common_dsc
r_static
r_void
id|i2o_report_common_dsc
c_func
(paren
id|u16
id|detailed_status
)paren
(brace
r_static
r_char
op_star
id|COMMON_DSC
(braket
)braket
op_assign
(brace
l_string|&quot;SUCCESS&quot;
comma
l_string|&quot;0x01&quot;
comma
singleline_comment|// not used
l_string|&quot;BAD_KEY&quot;
comma
l_string|&quot;TCL_ERROR&quot;
comma
l_string|&quot;REPLY_BUFFER_FULL&quot;
comma
l_string|&quot;NO_SUCH_PAGE&quot;
comma
l_string|&quot;INSUFFICIENT_RESOURCE_SOFT&quot;
comma
l_string|&quot;INSUFFICIENT_RESOURCE_HARD&quot;
comma
l_string|&quot;0x08&quot;
comma
singleline_comment|// not used
l_string|&quot;CHAIN_BUFFER_TOO_LARGE&quot;
comma
l_string|&quot;UNSUPPORTED_FUNCTION&quot;
comma
l_string|&quot;DEVICE_LOCKED&quot;
comma
l_string|&quot;DEVICE_RESET&quot;
comma
l_string|&quot;INAPPROPRIATE_FUNCTION&quot;
comma
l_string|&quot;INVALID_INITIATOR_ADDRESS&quot;
comma
l_string|&quot;INVALID_MESSAGE_FLAGS&quot;
comma
l_string|&quot;INVALID_OFFSET&quot;
comma
l_string|&quot;INVALID_PARAMETER&quot;
comma
l_string|&quot;INVALID_REQUEST&quot;
comma
l_string|&quot;INVALID_TARGET_ADDRESS&quot;
comma
l_string|&quot;MESSAGE_TOO_LARGE&quot;
comma
l_string|&quot;MESSAGE_TOO_SMALL&quot;
comma
l_string|&quot;MISSING_PARAMETER&quot;
comma
l_string|&quot;TIMEOUT&quot;
comma
l_string|&quot;UNKNOWN_ERROR&quot;
comma
l_string|&quot;UNKNOWN_FUNCTION&quot;
comma
l_string|&quot;UNSUPPORTED_VERSION&quot;
comma
l_string|&quot;DEVICE_BUSY&quot;
comma
l_string|&quot;DEVICE_NOT_AVAILABLE&quot;
)brace
suffix:semicolon
r_if
c_cond
(paren
id|detailed_status
OG
id|I2O_DSC_DEVICE_NOT_AVAILABLE
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot; / DetailedStatus = %0#4x.&bslash;n&quot;
comma
id|detailed_status
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot; / %s.&bslash;n&quot;
comma
id|COMMON_DSC
(braket
id|detailed_status
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Used for error reporting/debugging purposes&n; */
DECL|function|i2o_report_util_cmd
r_static
r_void
id|i2o_report_util_cmd
c_func
(paren
id|u8
id|cmd
)paren
(brace
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|I2O_CMD_UTIL_NOP
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_NOP, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_ABORT
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_ABORT, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_CLAIM
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_CLAIM, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_CLAIM_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_CONFIG_DIALOG
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_CONFIG_DIALOG, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_DEVICE_RESERVE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_DEVICE_RESERVE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_DEVICE_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_DEVICE_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_EVT_ACK
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_EVENT_ACKNOWLEDGE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_EVT_REGISTER
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_EVENT_REGISTER, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_LOCK
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_LOCK, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_LOCK_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_LOCK_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_PARAMS_GET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_PARAMS_GET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_PARAMS_SET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_PARAMS_SET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_UTIL_REPLY_FAULT_NOTIFY
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;UTIL_REPLY_FAULT_NOTIFY, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Cmd = %0#2x, &quot;
comma
id|cmd
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Used for error reporting/debugging purposes&n; */
DECL|function|i2o_report_exec_cmd
r_static
r_void
id|i2o_report_exec_cmd
c_func
(paren
id|u8
id|cmd
)paren
(brace
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|I2O_CMD_ADAPTER_ASSIGN
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_ADAPTER_ASSIGN, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_ADAPTER_READ
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_ADAPTER_READ, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_ADAPTER_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_ADAPTER_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_BIOS_INFO_SET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_BIOS_INFO_SET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_BOOT_DEVICE_SET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_BOOT_DEVICE_SET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_CONFIG_VALIDATE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_CONFIG_VALIDATE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_CONN_SETUP
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_CONN_SETUP, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DDM_DESTROY
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DDM_DESTROY, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DDM_ENABLE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DDM_ENABLE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DDM_QUIESCE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DDM_QUIESCE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DDM_RESET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DDM_RESET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DDM_SUSPEND
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DDM_SUSPEND, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DEVICE_ASSIGN
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DEVICE_ASSIGN, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_DEVICE_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_DEVICE_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_HRT_GET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_HRT_GET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_ADAPTER_CLEAR
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_IOP_CLEAR, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_ADAPTER_CONNECT
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_IOP_CONNECT, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_ADAPTER_RESET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_IOP_RESET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_LCT_NOTIFY
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_LCT_NOTIFY, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_OUTBOUND_INIT
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_OUTBOUND_INIT, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_PATH_ENABLE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_PATH_ENABLE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_PATH_QUIESCE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_PATH_QUIESCE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_PATH_RESET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_PATH_RESET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_STATIC_MF_CREATE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_STATIC_MF_CREATE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_STATIC_MF_RELEASE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_STATIC_MF_RELEASE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_STATUS_GET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_STATUS_GET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SW_DOWNLOAD
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SW_DOWNLOAD, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SW_UPLOAD
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SW_UPLOAD, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SW_REMOVE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SW_REMOVE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SYS_ENABLE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SYS_ENABLE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SYS_MODIFY
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SYS_MODIFY, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SYS_QUIESCE
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SYS_QUIESCE, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CMD_SYS_TAB_SET
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EXEC_SYS_TAB_SET, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Cmd = %#02x, &quot;
comma
id|cmd
)paren
suffix:semicolon
)brace
)brace
DECL|function|i2o_debug_state
r_void
id|i2o_debug_state
c_func
(paren
r_struct
id|i2o_controller
op_star
id|c
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: State = &quot;
comma
id|c-&gt;name
)paren
suffix:semicolon
r_switch
c_cond
(paren
(paren
(paren
id|i2o_status_block
op_star
)paren
id|c-&gt;status_block.virt
)paren
op_member_access_from_pointer
id|iop_state
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;INIT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;RESET&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HOLD&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;READY&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x08
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;OPERATIONAL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;FAILED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x11
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;FAULTED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;%x (unknown !!)&bslash;n&quot;
comma
(paren
(paren
id|i2o_status_block
op_star
)paren
id|c-&gt;status_block.virt
)paren
op_member_access_from_pointer
id|iop_state
)paren
suffix:semicolon
)brace
)brace
suffix:semicolon
DECL|function|i2o_dump_hrt
r_void
id|i2o_dump_hrt
c_func
(paren
r_struct
id|i2o_controller
op_star
id|c
)paren
(brace
id|u32
op_star
id|rows
op_assign
(paren
id|u32
op_star
)paren
id|c-&gt;hrt.virt
suffix:semicolon
id|u8
op_star
id|p
op_assign
(paren
id|u8
op_star
)paren
id|c-&gt;hrt.virt
suffix:semicolon
id|u8
op_star
id|d
suffix:semicolon
r_int
id|count
suffix:semicolon
r_int
id|length
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|state
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|3
)braket
op_ne
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: HRT table for controller is too new a version.&bslash;n&quot;
comma
id|c-&gt;name
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|count
op_assign
id|p
(braket
l_int|0
)braket
op_or
(paren
id|p
(braket
l_int|1
)braket
op_lshift
l_int|8
)paren
suffix:semicolon
id|length
op_assign
id|p
(braket
l_int|2
)braket
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: HRT has %d entries of %d bytes each.&bslash;n&quot;
comma
id|c-&gt;name
comma
id|count
comma
id|length
op_lshift
l_int|2
)paren
suffix:semicolon
id|rows
op_add_assign
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Adapter %08X: &quot;
comma
id|rows
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|p
op_assign
(paren
id|u8
op_star
)paren
(paren
id|rows
op_plus
l_int|1
)paren
suffix:semicolon
id|d
op_assign
(paren
id|u8
op_star
)paren
(paren
id|rows
op_plus
l_int|2
)paren
suffix:semicolon
id|state
op_assign
id|p
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|p
(braket
l_int|0
)braket
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;TID %04X:[&quot;
comma
id|state
op_amp
l_int|0xFFF
)paren
suffix:semicolon
id|state
op_rshift_assign
l_int|12
suffix:semicolon
r_if
c_cond
(paren
id|state
op_amp
(paren
l_int|1
op_lshift
l_int|0
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;H&quot;
)paren
suffix:semicolon
multiline_comment|/* Hidden */
r_if
c_cond
(paren
id|state
op_amp
(paren
l_int|1
op_lshift
l_int|2
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;P&quot;
)paren
suffix:semicolon
multiline_comment|/* Present */
r_if
c_cond
(paren
id|state
op_amp
(paren
l_int|1
op_lshift
l_int|1
)paren
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;C&quot;
)paren
suffix:semicolon
multiline_comment|/* Controlled */
)brace
r_if
c_cond
(paren
id|state
OG
l_int|9
)paren
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;*&quot;
)paren
suffix:semicolon
multiline_comment|/* Hard */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;]:&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|p
(braket
l_int|3
)braket
op_amp
l_int|0xFFFF
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/* Adapter private bus - easy */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Local bus %d: I/O at 0x%04X Mem 0x%08X&quot;
comma
id|p
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|d
(braket
l_int|0
)braket
comma
op_star
(paren
id|u32
op_star
)paren
(paren
id|d
op_plus
l_int|4
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
multiline_comment|/* ISA bus */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;ISA %d: CSN %d I/O at 0x%04X Mem 0x%08X&quot;
comma
id|p
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|d
(braket
l_int|0
)braket
comma
op_star
(paren
id|u32
op_star
)paren
(paren
id|d
op_plus
l_int|4
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* EISA bus */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;EISA %d: Slot %d I/O at 0x%04X Mem 0x%08X&quot;
comma
id|p
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|3
)braket
comma
id|d
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|d
(braket
l_int|0
)braket
comma
op_star
(paren
id|u32
op_star
)paren
(paren
id|d
op_plus
l_int|4
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* MCA bus */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;MCA %d: Slot %d I/O at 0x%04X Mem 0x%08X&quot;
comma
id|p
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|3
)braket
comma
id|d
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|d
(braket
l_int|0
)braket
comma
op_star
(paren
id|u32
op_star
)paren
(paren
id|d
op_plus
l_int|4
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
multiline_comment|/* PCI bus */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;PCI %d: Bus %d Device %d Function %d&quot;
comma
id|p
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|2
)braket
comma
id|d
(braket
l_int|1
)braket
comma
id|d
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x80
suffix:colon
multiline_comment|/* Other */
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;Unsupported bus type.&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|rows
op_add_assign
id|length
suffix:semicolon
)brace
)brace
DECL|variable|i2o_dump_message
id|EXPORT_SYMBOL
c_func
(paren
id|i2o_dump_message
)paren
suffix:semicolon
eof
