multiline_comment|/*&n; *&t;procfs handler for Linux I2O subsystem&n; *&n; *&t;(c) Copyright 1999&t;Deepak Saxena&n; *&n; *&t;Originally written by Deepak Saxena(deepak@plexity.net)&n; *&n; *&t;This program is free software; you can redistribute it and/or modify it&n; *&t;under the terms of the GNU General Public License as published by the&n; *&t;Free Software Foundation; either version 2 of the License, or (at your&n; *&t;option) any later version.&n; *&n; *&t;This is an initial test release. The code is based on the design of the&n; *&t;ide procfs system (drivers/block/ide-proc.c). Some code taken from&n; *&t;i2o-core module by Alan Cox.&n; *&n; *&t;DISCLAIMER: This code is still under development/test and may cause&n; *&t;your system to behave unpredictably.  Use at your own discretion.&n; *&n; *&n; *&t;Fixes/additions:&n; *&t;&t;Juha Siev&#xfffd;nen (Juha.Sievanen@cs.Helsinki.FI),&n; *&t;&t;Auvo H&#xfffd;kkinen (Auvo.Hakkinen@cs.Helsinki.FI)&n; *&t;&t;University of Helsinki, Department of Computer Science&n; *&t;&t;&t;LAN entries&n; *&t;&t;Markus Lidel &lt;Markus.Lidel@shadowconnect.com&gt;&n; *&t;&t;&t;Changes for new I2O API&n; */
DECL|macro|OSM_NAME
mdefine_line|#define OSM_NAME&t;&quot;proc-osm&quot;
DECL|macro|OSM_VERSION
mdefine_line|#define OSM_VERSION&t;&quot;$Rev$&quot;
DECL|macro|OSM_DESCRIPTION
mdefine_line|#define OSM_DESCRIPTION&t;&quot;I2O ProcFS OSM&quot;
DECL|macro|I2O_MAX_MODULES
mdefine_line|#define I2O_MAX_MODULES 4
singleline_comment|// FIXME!
DECL|macro|FMT_U64_HEX
mdefine_line|#define FMT_U64_HEX &quot;0x%08x%08x&quot;
DECL|macro|U64_VAL
mdefine_line|#define U64_VAL(pu64) *((u32*)(pu64)+1), *((u32*)(pu64))
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/i2o.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/seq_file.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/spinlock.h&gt;
macro_line|#include &lt;linux/workqueue.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
multiline_comment|/* Structure used to define /proc entries */
DECL|struct|_i2o_proc_entry_t
r_typedef
r_struct
id|_i2o_proc_entry_t
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
multiline_comment|/* entry name */
DECL|member|mode
id|mode_t
id|mode
suffix:semicolon
multiline_comment|/* mode */
DECL|member|fops
r_struct
id|file_operations
op_star
id|fops
suffix:semicolon
multiline_comment|/* open function */
DECL|typedef|i2o_proc_entry
)brace
id|i2o_proc_entry
suffix:semicolon
multiline_comment|/* global I2O /proc/i2o entry */
DECL|variable|i2o_proc_dir_root
r_static
r_struct
id|proc_dir_entry
op_star
id|i2o_proc_dir_root
suffix:semicolon
multiline_comment|/* proc OSM driver struct */
DECL|variable|i2o_proc_driver
r_static
r_struct
id|i2o_driver
id|i2o_proc_driver
op_assign
(brace
dot
id|name
op_assign
id|OSM_NAME
comma
)brace
suffix:semicolon
DECL|function|print_serial_number
r_static
r_int
id|print_serial_number
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
id|u8
op_star
id|serialno
comma
r_int
id|max_len
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* 19990419 -sralston&n;&t; *      The I2O v1.5 (and v2.0 so far) &quot;official specification&quot;&n;&t; *      got serial numbers WRONG!&n;&t; *      Apparently, and despite what Section 3.4.4 says and&n;&t; *      Figure 3-35 shows (pg 3-39 in the pdf doc),&n;&t; *      the convention / consensus seems to be:&n;&t; *        + First byte is SNFormat&n;&t; *        + Second byte is SNLen (but only if SNFormat==7 (?))&n;&t; *        + (v2.0) SCSI+BS may use IEEE Registered (64 or 128 bit) format&n;&t; */
r_switch
c_cond
(paren
id|serialno
(braket
l_int|0
)braket
)paren
(brace
r_case
id|I2O_SNFORMAT_BINARY
suffix:colon
multiline_comment|/* Binary */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;0x&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%02X&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_ASCII
suffix:colon
multiline_comment|/* ASCII */
r_if
c_cond
(paren
id|serialno
(braket
l_int|1
)braket
OL
l_char|&squot; &squot;
)paren
(brace
multiline_comment|/* printable or SNLen? */
multiline_comment|/* sanity */
id|max_len
op_assign
(paren
id|max_len
OL
id|serialno
(braket
l_int|1
)braket
)paren
ques
c_cond
id|max_len
suffix:colon
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|serialno
(braket
l_int|1
op_plus
id|max_len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
multiline_comment|/* just print it */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%s&quot;
comma
op_amp
id|serialno
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* print chars for specified length */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%c&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNICODE
suffix:colon
multiline_comment|/* UNICODE */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;UNICODE Format.  Can&squot;t Display&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_LAN48_MAC
suffix:colon
multiline_comment|/* LAN-48 MAC Address */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LAN-48 MAC address @ %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_WAN
suffix:colon
multiline_comment|/* WAN MAC Address */
multiline_comment|/* FIXME: Figure out what a WAN access address looks like?? */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;WAN Access Address&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* plus new in v2.0 */
r_case
id|I2O_SNFORMAT_LAN64_MAC
suffix:colon
multiline_comment|/* LAN-64 MAC Address */
multiline_comment|/* FIXME: Figure out what a LAN-64 address really looks like?? */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LAN-64 MAC address @ [?:%02X:%02X:?] %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|8
)braket
comma
id|serialno
(braket
l_int|9
)braket
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_DDM
suffix:colon
multiline_comment|/* I2O DDM */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;DDM: Tid=%03Xh, Rsvd=%04Xh, OrgId=%04Xh&quot;
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|4
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_IEEE_REG64
suffix:colon
multiline_comment|/* IEEE Registered (64-bit) */
r_case
id|I2O_SNFORMAT_IEEE_REG128
suffix:colon
multiline_comment|/* IEEE Registered (128-bit) */
multiline_comment|/* FIXME: Figure if this is even close?? */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;IEEE NodeName(hi,lo)=(%08Xh:%08Xh), PortName(hi,lo)=(%08Xh:%08Xh)&bslash;n&quot;
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|10
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|14
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNKNOWN
suffix:colon
multiline_comment|/* Unknown 0    */
r_case
id|I2O_SNFORMAT_UNKNOWN2
suffix:colon
multiline_comment|/* Unknown 0xff */
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown data format (0x%02x)&quot;
comma
id|serialno
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; *&t;i2o_get_class_name - &t;do i2o class name lookup&n; *&t;@class: class number&n; *&n; *&t;Return a descriptive string for an i2o class&n; */
DECL|function|i2o_get_class_name
r_static
r_const
r_char
op_star
id|i2o_get_class_name
c_func
(paren
r_int
r_class
)paren
(brace
r_int
id|idx
op_assign
l_int|16
suffix:semicolon
r_static
r_char
op_star
id|i2o_class_name
(braket
)braket
op_assign
(brace
l_string|&quot;Executive&quot;
comma
l_string|&quot;Device Driver Module&quot;
comma
l_string|&quot;Block Device&quot;
comma
l_string|&quot;Tape Device&quot;
comma
l_string|&quot;LAN Interface&quot;
comma
l_string|&quot;WAN Interface&quot;
comma
l_string|&quot;Fibre Channel Port&quot;
comma
l_string|&quot;Fibre Channel Device&quot;
comma
l_string|&quot;SCSI Device&quot;
comma
l_string|&quot;ATE Port&quot;
comma
l_string|&quot;ATE Device&quot;
comma
l_string|&quot;Floppy Controller&quot;
comma
l_string|&quot;Floppy Device&quot;
comma
l_string|&quot;Secondary Bus Port&quot;
comma
l_string|&quot;Peer Transport Agent&quot;
comma
l_string|&quot;Peer Transport&quot;
comma
l_string|&quot;Unknown&quot;
)brace
suffix:semicolon
r_switch
c_cond
(paren
r_class
op_amp
l_int|0xfff
)paren
(brace
r_case
id|I2O_CLASS_EXECUTIVE
suffix:colon
id|idx
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_DDM
suffix:colon
id|idx
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
id|idx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_SEQUENTIAL_STORAGE
suffix:colon
id|idx
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
id|idx
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_WAN
suffix:colon
id|idx
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_FIBRE_CHANNEL_PORT
suffix:colon
id|idx
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_FIBRE_CHANNEL_PERIPHERAL
suffix:colon
id|idx
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
id|idx
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_ATE_PORT
suffix:colon
id|idx
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_ATE_PERIPHERAL
suffix:colon
id|idx
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_FLOPPY_CONTROLLER
suffix:colon
id|idx
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_FLOPPY_DEVICE
suffix:colon
id|idx
op_assign
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_BUS_ADAPTER_PORT
suffix:colon
id|idx
op_assign
l_int|13
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_PEER_TRANSPORT_AGENT
suffix:colon
id|idx
op_assign
l_int|14
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_PEER_TRANSPORT
suffix:colon
id|idx
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|i2o_class_name
(braket
id|idx
)braket
suffix:semicolon
)brace
DECL|macro|SCSI_TABLE_SIZE
mdefine_line|#define SCSI_TABLE_SIZE&t;13
DECL|variable|scsi_devices
r_static
r_char
op_star
id|scsi_devices
(braket
)braket
op_assign
(brace
l_string|&quot;Direct-Access Read/Write&quot;
comma
l_string|&quot;Sequential-Access Storage&quot;
comma
l_string|&quot;Printer&quot;
comma
l_string|&quot;Processor&quot;
comma
l_string|&quot;WORM Device&quot;
comma
l_string|&quot;CD-ROM Device&quot;
comma
l_string|&quot;Scanner Device&quot;
comma
l_string|&quot;Optical Memory Device&quot;
comma
l_string|&quot;Medium Changer Device&quot;
comma
l_string|&quot;Communications Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Array Controller Device&quot;
)brace
suffix:semicolon
DECL|function|chtostr
r_static
r_char
op_star
id|chtostr
c_func
(paren
id|u8
op_star
id|chars
comma
r_int
id|n
)paren
(brace
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
id|tmp
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
id|strncat
c_func
(paren
id|tmp
comma
(paren
r_char
op_star
)paren
id|chars
comma
id|n
)paren
suffix:semicolon
)brace
DECL|function|i2o_report_query_status
r_static
r_int
id|i2o_report_query_status
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_int
id|block_status
comma
r_char
op_star
id|group
)paren
(brace
r_switch
c_cond
(paren
id|block_status
)paren
(brace
r_case
op_minus
id|ETIMEDOUT
suffix:colon
r_return
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Timeout reading group %s.&bslash;n&quot;
comma
id|group
)paren
suffix:semicolon
r_case
op_minus
id|ENOMEM
suffix:colon
r_return
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;No free memory to read the table.&bslash;n&quot;
)paren
suffix:semicolon
r_case
op_minus
id|I2O_PARAMS_STATUS_INVALID_GROUP_ID
suffix:colon
r_return
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Group %s not supported.&bslash;n&quot;
comma
id|group
)paren
suffix:semicolon
r_default
suffix:colon
r_return
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Error reading group %s. BlockStatus 0x%02X&bslash;n&quot;
comma
id|group
comma
op_minus
id|block_status
)paren
suffix:semicolon
)brace
)brace
DECL|variable|bus_strings
r_static
r_char
op_star
id|bus_strings
(braket
)braket
op_assign
(brace
l_string|&quot;Local Bus&quot;
comma
l_string|&quot;ISA&quot;
comma
l_string|&quot;EISA&quot;
comma
l_string|&quot;MCA&quot;
comma
l_string|&quot;PCI&quot;
comma
l_string|&quot;PCMCIA&quot;
comma
l_string|&quot;NUBUS&quot;
comma
l_string|&quot;CARDBUS&quot;
)brace
suffix:semicolon
DECL|function|i2o_seq_show_hrt
r_static
r_int
id|i2o_seq_show_hrt
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
id|i2o_hrt
op_star
id|hrt
op_assign
(paren
id|i2o_hrt
op_star
)paren
id|c-&gt;hrt.virt
suffix:semicolon
id|u32
id|bus
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|hrt-&gt;hrt_version
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HRT table for controller is too new a version.&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HRT has %d entries of %d bytes each.&bslash;n&quot;
comma
id|hrt-&gt;num_entries
comma
id|hrt-&gt;entry_len
op_lshift
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|hrt-&gt;num_entries
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Entry %d:&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   Adapter ID: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|adapter_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   Controlling tid: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
op_ne
l_int|0x80
)paren
(brace
id|bus
op_assign
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   %s Information&bslash;n&quot;
comma
id|bus_strings
(braket
id|bus
)braket
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|bus
)paren
(brace
r_case
id|I2O_BUS_LOCAL
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus
dot
id|LbBaseIOPort
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; MemoryBase: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus
dot
id|LbBaseMemoryAddress
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_ISA
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus
dot
id|IsaBaseIOPort
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus
dot
id|IsaBaseMemoryAddress
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; CSN: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.CSN
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_EISA
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus
dot
id|EisaBaseIOPort
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus
dot
id|EisaBaseMemoryAddress
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus
dot
id|EisaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_MCA
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus
dot
id|McaBaseIOPort
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus
dot
id|McaBaseMemoryAddress
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus
dot
id|McaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_PCI
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;     Bus: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus
dot
id|PciBusNumber
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Dev: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus
dot
id|PciDeviceNumber
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Func: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus
dot
id|PciFunctionNumber
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Vendor: %0#6x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus
dot
id|PciVendorID
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; Device: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus
dot
id|PciDeviceID
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;      Unsupported Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   Unknown Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_seq_show_lct
r_static
r_int
id|i2o_seq_show_lct
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
id|i2o_lct
op_star
id|lct
op_assign
(paren
id|i2o_lct
op_star
)paren
id|c-&gt;lct
suffix:semicolon
r_int
id|entries
suffix:semicolon
r_int
id|i
suffix:semicolon
DECL|macro|BUS_TABLE_SIZE
mdefine_line|#define BUS_TABLE_SIZE 3
r_static
r_char
op_star
id|bus_ports
(braket
)braket
op_assign
(brace
l_string|&quot;Generic Bus&quot;
comma
l_string|&quot;SCSI Bus&quot;
comma
l_string|&quot;Fibre Channel Bus&quot;
)brace
suffix:semicolon
id|entries
op_assign
(paren
id|lct-&gt;table_size
op_minus
l_int|3
)paren
op_div
l_int|9
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LCT contains %d %s&bslash;n&quot;
comma
id|entries
comma
id|entries
op_eq
l_int|1
ques
c_cond
l_string|&quot;entry&quot;
suffix:colon
l_string|&quot;entries&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|lct-&gt;boot_tid
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Boot Device @ ID %d&bslash;n&quot;
comma
id|lct-&gt;boot_tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Current Change Indicator: %#10x&bslash;n&quot;
comma
id|lct-&gt;change_ind
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|entries
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Entry %d&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Class, SubClass  : %s&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
)paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; *      Classes which we&squot;ll print subclass info for&n;&t;&t; */
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
op_amp
l_int|0xFFF
)paren
(brace
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Direct-Access Read/Write&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, WORM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, CD-ROM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x07
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Optical Memory Device&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Unknown (0x%02x)&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
op_amp
l_int|0xFF
)paren
(brace
r_case
l_int|0x30
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Ethernet&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x40
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, 100base VG&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x50
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, IEEE 802.5/Token-Ring&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x60
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, ANSI X3T9.5 FDDI&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x70
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Fibre Channel&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Unknown Sub-Class (0x%02x)&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
op_amp
l_int|0xFF
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|SCSI_TABLE_SIZE
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, %s&quot;
comma
id|scsi_devices
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Unknown Device Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_BUS_ADAPTER_PORT
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|BUS_TABLE_SIZE
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, %s&quot;
comma
id|bus_ports
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;, Unknown Bus Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Local TID        : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  User TID         : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|user_tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Parent TID       : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Identity Tag     : 0x%x%x%x%x%x%x%x%x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|0
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|1
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|2
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|3
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|4
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|5
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|6
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Change Indicator : %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|change_ind
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  Event Capab Mask : %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|device_flags
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_seq_show_status
r_static
r_int
id|i2o_seq_show_status
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_char
id|prodstr
(braket
l_int|25
)braket
suffix:semicolon
r_int
id|version
suffix:semicolon
id|i2o_status_block
op_star
id|sb
op_assign
id|c-&gt;status_block.virt
suffix:semicolon
id|i2o_status_get
c_func
(paren
id|c
)paren
suffix:semicolon
singleline_comment|// reread the status block
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Organization ID        : %0#6x&bslash;n&quot;
comma
id|sb-&gt;org_id
)paren
suffix:semicolon
id|version
op_assign
id|sb-&gt;i2o_version
suffix:semicolon
multiline_comment|/* FIXME for Spec 2.0&n;&t;if (version == 0x02) {&n;&t;&t;seq_printf(seq, &quot;Lowest I2O version supported: &quot;);&n;&t;&t;switch(workspace[2]) {&n;&t;&t;&t;case 0x00:&n;&t;&t;&t;&t;seq_printf(seq, &quot;1.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x01:&n;&t;&t;&t;&t;seq_printf(seq, &quot;1.5&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x02:&n;&t;&t;&t;&t;seq_printf(seq, &quot;2.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;}&n;&n;&t;&t;seq_printf(seq, &quot;Highest I2O version supported: &quot;);&n;&t;&t;switch(workspace[3]) {&n;&t;&t;&t;case 0x00:&n;&t;&t;&t;&t;seq_printf(seq, &quot;1.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x01:&n;&t;&t;&t;&t;seq_printf(seq, &quot;1.5&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x02:&n;&t;&t;&t;&t;seq_printf(seq, &quot;2.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;}&n;&t;}&n;*/
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;IOP ID                 : %0#5x&bslash;n&quot;
comma
id|sb-&gt;iop_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Host Unit ID           : %0#6x&bslash;n&quot;
comma
id|sb-&gt;host_unit_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Segment Number         : %0#5x&bslash;n&quot;
comma
id|sb-&gt;segment_number
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;I2O version            : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;1.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;1.5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;2.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown version&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;IOP State              : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sb-&gt;iop_state
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;INIT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;RESET&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HOLD&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;READY&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x08
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;OPERATIONAL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;FAILED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x11
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;FAULTED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Messenger Type         : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sb-&gt;msg_type
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Memory mapped&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Memory mapped only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Remote only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Memory mapped and remote&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Inbound Frame Size     : %d bytes&bslash;n&quot;
comma
id|sb-&gt;inbound_frame_size
op_lshift
l_int|2
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Max Inbound Frames     : %d&bslash;n&quot;
comma
id|sb-&gt;max_inbound_frames
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Current Inbound Frames : %d&bslash;n&quot;
comma
id|sb-&gt;cur_inbound_frames
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Max Outbound Frames    : %d&bslash;n&quot;
comma
id|sb-&gt;max_outbound_frames
)paren
suffix:semicolon
multiline_comment|/* Spec doesn&squot;t say if NULL terminated or not... */
id|memcpy
c_func
(paren
id|prodstr
comma
id|sb-&gt;product_id
comma
l_int|24
)paren
suffix:semicolon
id|prodstr
(braket
l_int|24
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Product ID             : %s&bslash;n&quot;
comma
id|prodstr
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Expected LCT Size      : %d bytes&bslash;n&quot;
comma
id|sb-&gt;expected_lct_size
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;IOP Capabilities&bslash;n&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    Context Field Size Support : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sb-&gt;iop_capabilities
op_amp
l_int|0x0000003
)paren
(brace
r_case
l_int|0
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports only 32-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports only 64-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports 32-bit and 64-bit context fields, &quot;
l_string|&quot;but not concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports 32-bit and 64-bit context fields &quot;
l_string|&quot;concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;0x%08x&bslash;n&quot;
comma
id|sb-&gt;iop_capabilities
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    Current Context Field Size : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sb-&gt;iop_capabilities
op_amp
l_int|0x0000000C
)paren
(brace
r_case
l_int|0
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;not configured&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports only 32-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports only 64-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Supports both 32-bit or 64-bit context fields &quot;
l_string|&quot;concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    Inbound Peer Support       : %s&bslash;n&quot;
comma
(paren
id|sb
op_member_access_from_pointer
id|iop_capabilities
op_amp
l_int|0x00000010
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    Outbound Peer Support      : %s&bslash;n&quot;
comma
(paren
id|sb
op_member_access_from_pointer
id|iop_capabilities
op_amp
l_int|0x00000020
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    Peer to Peer Support       : %s&bslash;n&quot;
comma
(paren
id|sb
op_member_access_from_pointer
id|iop_capabilities
op_amp
l_int|0x00000040
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Desired private memory size   : %d kB&bslash;n&quot;
comma
id|sb-&gt;desired_mem_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Allocated private memory size : %d kB&bslash;n&quot;
comma
id|sb-&gt;current_mem_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Private memory base address   : %0#10x&bslash;n&quot;
comma
id|sb-&gt;current_mem_base
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Desired private I/O size      : %d kB&bslash;n&quot;
comma
id|sb-&gt;desired_io_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Allocated private I/O size    : %d kB&bslash;n&quot;
comma
id|sb-&gt;current_io_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Private I/O base address      : %0#10x&bslash;n&quot;
comma
id|sb-&gt;current_io_base
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_seq_show_hw
r_static
r_int
id|i2o_seq_show_hw
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|5
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|u32
id|hwcap
suffix:semicolon
r_static
r_char
op_star
id|cpu_table
(braket
)braket
op_assign
(brace
l_string|&quot;Intel 80960 series&quot;
comma
l_string|&quot;AMD2900 series&quot;
comma
l_string|&quot;Motorola 68000 series&quot;
comma
l_string|&quot;ARM series&quot;
comma
l_string|&quot;MIPS series&quot;
comma
l_string|&quot;Sparc series&quot;
comma
l_string|&quot;PowerPC series&quot;
comma
l_string|&quot;Intel x86 series&quot;
)brace
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|c-&gt;exec
comma
l_int|0x0000
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0x0000 IOP Hardware&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;I2O Vendor ID    : %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Product ID       : %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;CPU              : &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|16
)braket
OG
l_int|8
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|cpu_table
(braket
id|work8
(braket
l_int|16
)braket
)braket
)paren
suffix:semicolon
multiline_comment|/* Anyone using ProcessorVersion? */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;RAM              : %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Non-Volatile Mem : %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|hwcap
op_assign
id|work32
(braket
l_int|3
)braket
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Capabilities : 0x%08x&bslash;n&quot;
comma
id|hwcap
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   [%s] Self booting&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   [%s] Upgradable IRTOS&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   [%s] Supports downloading DDMs&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   [%s] Supports installing DDMs&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000008
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;   [%s] Battery-backed RAM&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000010
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Executive group 0003h - Executing DDM List (table) */
DECL|function|i2o_seq_show_ddm_table
r_static
r_int
id|i2o_seq_show_ddm_table
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_exec_execute_ddm_table
(brace
id|u16
id|ddm_tid
suffix:semicolon
id|u8
id|module_type
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
id|u16
id|i2o_vendor_id
suffix:semicolon
id|u16
id|module_id
suffix:semicolon
id|u8
id|module_name_version
(braket
l_int|28
)braket
suffix:semicolon
id|u32
id|data_size
suffix:semicolon
id|u32
id|code_size
suffix:semicolon
)brace
id|i2o_exec_execute_ddm_table
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_exec_execute_ddm_table
id|ddm_table
(braket
id|I2O_MAX_MODULES
)braket
suffix:semicolon
)brace
op_star
id|result
suffix:semicolon
id|i2o_exec_execute_ddm_table
id|ddm_table
suffix:semicolon
id|result
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|result
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|c-&gt;exec
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0x0003
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
id|result
comma
r_sizeof
(paren
op_star
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0x0003 Executing DDM List&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Tid   Module_type     Vendor Mod_id  Module_name             Vrs  Data_size Code_size&bslash;n&quot;
)paren
suffix:semicolon
id|ddm_table
op_assign
id|result-&gt;ddm_table
(braket
l_int|0
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result-&gt;row_count
suffix:semicolon
id|ddm_table
op_assign
id|result-&gt;ddm_table
(braket
op_increment
id|i
)braket
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;0x%03x &quot;
comma
id|ddm_table.ddm_tid
op_amp
l_int|0xFFF
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ddm_table.module_type
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Downloaded DDM  &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x22
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Embedded DDM    &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;                &quot;
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-#7x&quot;
comma
id|ddm_table.i2o_vendor_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-#8x&quot;
comma
id|ddm_table.module_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-29s&quot;
comma
id|chtostr
c_func
(paren
id|ddm_table.module_name_version
comma
l_int|28
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%9d  &quot;
comma
id|ddm_table.data_size
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%8d&quot;
comma
id|ddm_table.code_size
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|out
suffix:colon
id|kfree
c_func
(paren
id|result
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Executive group 0004h - Driver Store (scalar) */
DECL|function|i2o_seq_show_driver_store
r_static
r_int
id|i2o_seq_show_driver_store
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
id|u32
id|work32
(braket
l_int|8
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|c-&gt;exec
comma
l_int|0x0004
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0x0004 Driver Store&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Module limit  : %d&bslash;n&quot;
l_string|&quot;Module count  : %d&bslash;n&quot;
l_string|&quot;Current space : %d kB&bslash;n&quot;
l_string|&quot;Free space    : %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
comma
id|work32
(braket
l_int|1
)braket
comma
id|work32
(braket
l_int|2
)braket
op_rshift
l_int|10
comma
id|work32
(braket
l_int|3
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Executive group 0005h - Driver Store Table (table) */
DECL|function|i2o_seq_show_drivers_stored
r_static
r_int
id|i2o_seq_show_drivers_stored
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_typedef
r_struct
id|_i2o_driver_store
(brace
id|u16
id|stored_ddm_index
suffix:semicolon
id|u8
id|module_type
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
id|u16
id|i2o_vendor_id
suffix:semicolon
id|u16
id|module_id
suffix:semicolon
id|u8
id|module_name_version
(braket
l_int|28
)braket
suffix:semicolon
id|u8
id|date
(braket
l_int|8
)braket
suffix:semicolon
id|u32
id|module_size
suffix:semicolon
id|u32
id|mpb_size
suffix:semicolon
id|u32
id|module_flags
suffix:semicolon
)brace
id|i2o_driver_store_table
suffix:semicolon
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_driver_store_table
id|dst
(braket
id|I2O_MAX_MODULES
)braket
suffix:semicolon
)brace
id|i2o_driver_result_table
suffix:semicolon
id|i2o_driver_result_table
op_star
id|result
suffix:semicolon
id|i2o_driver_store_table
op_star
id|dst
suffix:semicolon
id|result
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
id|i2o_driver_result_table
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|c-&gt;exec
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0x0005
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
id|result
comma
r_sizeof
(paren
op_star
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0x0005 DRIVER STORE TABLE&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|result
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  Module_type     Vendor Mod_id  Module_name             Vrs&quot;
l_string|&quot;Date     Mod_size Par_size Flags&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|dst
op_assign
op_amp
id|result-&gt;dst
(braket
l_int|0
)braket
suffix:semicolon
id|i
OL
id|result-&gt;row_count
suffix:semicolon
id|dst
op_assign
op_amp
id|result-&gt;dst
(braket
op_increment
id|i
)braket
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-3d&quot;
comma
id|dst-&gt;stored_ddm_index
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dst-&gt;module_type
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Downloaded DDM  &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x22
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Embedded DDM    &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;                &quot;
)paren
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-#7x&quot;
comma
id|dst-&gt;i2o_vendor_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-#8x&quot;
comma
id|dst-&gt;module_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-29s&quot;
comma
id|chtostr
c_func
(paren
id|dst-&gt;module_name_version
comma
l_int|28
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-9s&quot;
comma
id|chtostr
c_func
(paren
id|dst-&gt;date
comma
l_int|8
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%8d &quot;
comma
id|dst-&gt;module_size
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%8d &quot;
comma
id|dst-&gt;mpb_size
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;0x%04x&quot;
comma
id|dst-&gt;module_flags
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|result
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F000h - Params Descriptor (table) */
DECL|function|i2o_seq_show_groups
r_static
r_int
id|i2o_seq_show_groups
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u8
id|properties
suffix:semicolon
r_typedef
r_struct
id|_i2o_group_info
(brace
id|u16
id|group_number
suffix:semicolon
id|u16
id|field_count
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u8
id|properties
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
)brace
id|i2o_group_info
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_group_info
id|group
(braket
l_int|256
)braket
suffix:semicolon
)brace
op_star
id|result
suffix:semicolon
id|result
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|result
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF000
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
id|result
comma
r_sizeof
(paren
op_star
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF000 Params Descriptor&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  Group   FieldCount RowCount Type   Add Del Clear&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result-&gt;row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-3d&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;0x%04X &quot;
comma
id|result-&gt;group
(braket
id|i
)braket
dot
id|group_number
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%10d &quot;
comma
id|result-&gt;group
(braket
id|i
)braket
dot
id|field_count
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%8d &quot;
comma
id|result-&gt;group
(braket
id|i
)braket
dot
id|row_count
)paren
suffix:semicolon
id|properties
op_assign
id|result-&gt;group
(braket
id|i
)braket
dot
id|properties
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x1
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Table  &quot;
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Scalar &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x2
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; + &quot;
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot; - &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x4
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  + &quot;
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  - &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x8
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  + &quot;
)paren
suffix:semicolon
r_else
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;  - &quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result-&gt;more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|out
suffix:colon
id|kfree
c_func
(paren
id|result
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F001h - Physical Device Table (table) */
DECL|function|i2o_seq_show_phys_device
r_static
r_int
id|i2o_seq_show_phys_device
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u32
id|adapter_id
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF001
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF001 Physical Device Table&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  AdapterId&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#7x&bslash;n&quot;
comma
id|result.adapter_id
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F002h - Claimed Table (table) */
DECL|function|i2o_seq_show_claimed
r_static
r_int
id|i2o_seq_show_claimed
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u16
id|claimed_tid
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF002
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF002 Claimed Table&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  ClaimedTid&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#7x&bslash;n&quot;
comma
id|result.claimed_tid
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F003h - User Table (table) */
DECL|function|i2o_seq_show_users
r_static
r_int
id|i2o_seq_show_users
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_user_table
(brace
id|u16
id|instance
suffix:semicolon
id|u16
id|user_tid
suffix:semicolon
id|u8
id|claim_type
suffix:semicolon
id|u8
id|reserved1
suffix:semicolon
id|u16
id|reserved2
suffix:semicolon
)brace
id|i2o_user_table
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_user_table
id|user
(braket
l_int|64
)braket
suffix:semicolon
)brace
op_star
id|result
suffix:semicolon
id|result
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|result
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF003
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
id|result
comma
r_sizeof
(paren
op_star
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF003 User Table&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  Instance UserTid ClaimType&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result-&gt;row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-3d&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#8x &quot;
comma
id|result-&gt;user
(braket
id|i
)braket
dot
id|instance
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#7x &quot;
comma
id|result-&gt;user
(braket
id|i
)braket
dot
id|user_tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#9x&bslash;n&quot;
comma
id|result-&gt;user
(braket
id|i
)braket
dot
id|claim_type
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result-&gt;more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|out
suffix:colon
id|kfree
c_func
(paren
id|result
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F005h - Private message extensions (table) (optional) */
DECL|function|i2o_seq_show_priv_msgs
r_static
r_int
id|i2o_seq_show_priv_msgs
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_private
(brace
id|u16
id|ext_instance
suffix:semicolon
id|u16
id|organization_id
suffix:semicolon
id|u16
id|x_function_code
suffix:semicolon
)brace
id|i2o_private
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_private
id|extension
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF000
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF005 Private Message Extensions (optional)&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Instance#  OrgId  FunctionCode&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%0#9x &quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|ext_instance
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%0#6x &quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|organization_id
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%0#6x&quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|x_function_code
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F006h - Authorized User Table (table) */
DECL|function|i2o_seq_show_authorized_users
r_static
r_int
id|i2o_seq_show_authorized_users
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u32
id|alternate_tid
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_table_get
c_func
(paren
id|d
comma
id|I2O_PARAMS_TABLE_GET
comma
l_int|0xF006
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF006 Autohorized User Table&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;#  AlternateTid&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%#7x &quot;
comma
id|result.alternate_tid
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F100h - Device Identity (scalar) */
DECL|function|i2o_seq_show_dev_identity
r_static
r_int
id|i2o_seq_show_dev_identity
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|128
)braket
suffix:semicolon
singleline_comment|// allow for &quot;stuff&quot; + up to 256 byte (max) serial number
singleline_comment|// == (allow) 512d bytes (max)
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|d
comma
l_int|0xF100
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF100 Device Identity&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Device Class  : %s&bslash;n&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|work16
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Owner TID     : %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Parent TID    : %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Vendor info   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|2
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Product info  : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|6
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Description   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|10
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Product rev.  : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|14
)paren
comma
l_int|8
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Serial number : &quot;
)paren
suffix:semicolon
id|print_serial_number
c_func
(paren
id|seq
comma
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|16
)paren
comma
multiline_comment|/* allow for SNLen plus&n;&t;&t;&t;     * possible trailing &squot;&bslash;0&squot;&n;&t;&t;&t;     */
r_sizeof
(paren
id|work32
)paren
op_minus
(paren
l_int|16
op_star
r_sizeof
(paren
id|u32
)paren
)paren
op_minus
l_int|2
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_seq_show_dev_name
r_static
r_int
id|i2o_seq_show_dev_name
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|d-&gt;device.bus_id
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F101h - DDM Identity (scalar) */
DECL|function|i2o_seq_show_ddm_identity
r_static
r_int
id|i2o_seq_show_ddm_identity
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u16
id|ddm_tid
suffix:semicolon
id|u8
id|module_name
(braket
l_int|24
)braket
suffix:semicolon
id|u8
id|module_rev
(braket
l_int|8
)braket
suffix:semicolon
id|u8
id|sn_format
suffix:semicolon
id|u8
id|serial_number
(braket
l_int|12
)braket
suffix:semicolon
id|u8
id|pad
(braket
l_int|256
)braket
suffix:semicolon
singleline_comment|// allow up to 256 byte (max) serial number
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|d
comma
l_int|0xF101
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF101 DDM Identity&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Registering DDM TID : 0x%03x&bslash;n&quot;
comma
id|result.ddm_tid
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Module name         : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.module_name
comma
l_int|24
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Module revision     : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.module_rev
comma
l_int|8
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Serial number       : &quot;
)paren
suffix:semicolon
id|print_serial_number
c_func
(paren
id|seq
comma
id|result.serial_number
comma
r_sizeof
(paren
id|result
)paren
op_minus
l_int|36
)paren
suffix:semicolon
multiline_comment|/* allow for SNLen plus possible trailing &squot;&bslash;0&squot; */
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F102h - User Information (scalar) */
DECL|function|i2o_seq_show_uinfo
r_static
r_int
id|i2o_seq_show_uinfo
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u8
id|device_name
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|service_name
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|physical_location
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|instance_number
(braket
l_int|4
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|d
comma
l_int|0xF102
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF102 User Information&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Device name     : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.device_name
comma
l_int|64
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Service name    : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.service_name
comma
l_int|64
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Physical name   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.physical_location
comma
l_int|64
)paren
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Instance number : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.instance_number
comma
l_int|4
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F103h - SGL Operating Limits (scalar) */
DECL|function|i2o_seq_show_sgl_limits
r_static
r_int
id|i2o_seq_show_sgl_limits
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|12
)braket
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|d
comma
l_int|0xF103
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF103 SGL Operating Limits&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL chain size        : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Max SGL chain size    : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL chain size target : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL frag count        : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Max SGL frag count    : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL frag count target : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|8
)braket
)paren
suffix:semicolon
multiline_comment|/* FIXME&n;&t;if (d-&gt;i2oversion == 0x02)&n;&t;{&n;*/
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL data alignment    : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL addr limit        : %d&bslash;n&quot;
comma
id|work8
(braket
l_int|20
)braket
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;SGL addr sizes supported : &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x01
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;32 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x02
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;64 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x04
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;96 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x08
)paren
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;128 bit &quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/*&n;&t;}&n;*/
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Generic group F200h - Sensors (scalar) */
DECL|function|i2o_seq_show_sensors
r_static
r_int
id|i2o_seq_show_sensors
c_func
(paren
r_struct
id|seq_file
op_star
id|seq
comma
r_void
op_star
id|v
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|seq
op_member_access_from_pointer
r_private
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u16
id|sensor_instance
suffix:semicolon
id|u8
id|component
suffix:semicolon
id|u16
id|component_instance
suffix:semicolon
id|u8
id|sensor_class
suffix:semicolon
id|u8
id|sensor_type
suffix:semicolon
id|u8
id|scaling_exponent
suffix:semicolon
id|u32
id|actual_reading
suffix:semicolon
id|u32
id|minimum_reading
suffix:semicolon
id|u32
id|low2lowcat_treshold
suffix:semicolon
id|u32
id|lowcat2low_treshold
suffix:semicolon
id|u32
id|lowwarn2low_treshold
suffix:semicolon
id|u32
id|low2lowwarn_treshold
suffix:semicolon
id|u32
id|norm2lowwarn_treshold
suffix:semicolon
id|u32
id|lowwarn2norm_treshold
suffix:semicolon
id|u32
id|nominal_reading
suffix:semicolon
id|u32
id|hiwarn2norm_treshold
suffix:semicolon
id|u32
id|norm2hiwarn_treshold
suffix:semicolon
id|u32
id|high2hiwarn_treshold
suffix:semicolon
id|u32
id|hiwarn2high_treshold
suffix:semicolon
id|u32
id|hicat2high_treshold
suffix:semicolon
id|u32
id|hi2hicat_treshold
suffix:semicolon
id|u32
id|maximum_reading
suffix:semicolon
id|u8
id|sensor_state
suffix:semicolon
id|u16
id|event_enable
suffix:semicolon
)brace
id|result
suffix:semicolon
id|token
op_assign
id|i2o_parm_field_get
c_func
(paren
id|d
comma
l_int|0xF200
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|i2o_report_query_status
c_func
(paren
id|seq
comma
id|token
comma
l_string|&quot;0xF200 Sensors (optional)&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Sensor instance       : %d&bslash;n&quot;
comma
id|result.sensor_instance
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Component             : %d = &quot;
comma
id|result.component
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.component
)paren
(brace
r_case
l_int|0
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Other&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Planar logic Board&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;CPU&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Chassis&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Power Supply&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Storage&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;External&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Component instance    : %d&bslash;n&quot;
comma
id|result.component_instance
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Sensor class          : %s&bslash;n&quot;
comma
id|result.sensor_class
ques
c_cond
l_string|&quot;Analog&quot;
suffix:colon
l_string|&quot;Digital&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Sensor type           : %d = &quot;
comma
id|result.sensor_type
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.sensor_type
)paren
(brace
r_case
l_int|0
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Other&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Thermal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;DC voltage (DC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;AC voltage (AC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;DC current (DC amps)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;AC current (AC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Door open&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Fan operational&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Scaling exponent      : %d&bslash;n&quot;
comma
id|result.scaling_exponent
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Actual reading        : %d&bslash;n&quot;
comma
id|result.actual_reading
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Minimum reading       : %d&bslash;n&quot;
comma
id|result.minimum_reading
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Low2LowCat treshold   : %d&bslash;n&quot;
comma
id|result.low2lowcat_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LowCat2Low treshold   : %d&bslash;n&quot;
comma
id|result.lowcat2low_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LowWarn2Low treshold  : %d&bslash;n&quot;
comma
id|result.lowwarn2low_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Low2LowWarn treshold  : %d&bslash;n&quot;
comma
id|result.low2lowwarn_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Norm2LowWarn treshold : %d&bslash;n&quot;
comma
id|result.norm2lowwarn_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;LowWarn2Norm treshold : %d&bslash;n&quot;
comma
id|result.lowwarn2norm_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Nominal reading       : %d&bslash;n&quot;
comma
id|result.nominal_reading
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HiWarn2Norm treshold  : %d&bslash;n&quot;
comma
id|result.hiwarn2norm_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Norm2HiWarn treshold  : %d&bslash;n&quot;
comma
id|result.norm2hiwarn_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;High2HiWarn treshold  : %d&bslash;n&quot;
comma
id|result.high2hiwarn_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HiWarn2High treshold  : %d&bslash;n&quot;
comma
id|result.hiwarn2high_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;HiCat2High treshold   : %d&bslash;n&quot;
comma
id|result.hicat2high_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;High2HiCat treshold   : %d&bslash;n&quot;
comma
id|result.hi2hicat_treshold
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Maximum reading       : %d&bslash;n&quot;
comma
id|result.maximum_reading
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Sensor state          : %d = &quot;
comma
id|result.sensor_state
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.sensor_state
)paren
(brace
r_case
l_int|0
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Normal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Abnormal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Low Catastrophic (LoCat)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Low (Low)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Low Warning (LoWarn)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;High Warning (HiWarn)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;High (High)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;High Catastrophic (HiCat)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;Event_enable : 0x%02X&bslash;n&quot;
comma
id|result.event_enable
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] Operational state change. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x01
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] Low catastrophic. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x02
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] Low reading. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x04
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] Low warning. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x08
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] Change back to normal from out of range state. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x10
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] High warning. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x20
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] High reading. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x40
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|seq_printf
c_func
(paren
id|seq
comma
l_string|&quot;    [%s] High catastrophic. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x80
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_seq_open_hrt
r_static
r_int
id|i2o_seq_open_hrt
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_hrt
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_lct
r_static
r_int
id|i2o_seq_open_lct
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_lct
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_status
r_static
r_int
id|i2o_seq_open_status
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_status
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_hw
r_static
r_int
id|i2o_seq_open_hw
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_hw
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_ddm_table
r_static
r_int
id|i2o_seq_open_ddm_table
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_ddm_table
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_driver_store
r_static
r_int
id|i2o_seq_open_driver_store
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_driver_store
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_drivers_stored
r_static
r_int
id|i2o_seq_open_drivers_stored
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_drivers_stored
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_groups
r_static
r_int
id|i2o_seq_open_groups
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_groups
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_phys_device
r_static
r_int
id|i2o_seq_open_phys_device
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_phys_device
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_claimed
r_static
r_int
id|i2o_seq_open_claimed
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_claimed
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_users
r_static
r_int
id|i2o_seq_open_users
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_users
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_priv_msgs
r_static
r_int
id|i2o_seq_open_priv_msgs
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_priv_msgs
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_authorized_users
r_static
r_int
id|i2o_seq_open_authorized_users
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_authorized_users
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_dev_identity
r_static
r_int
id|i2o_seq_open_dev_identity
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_dev_identity
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_ddm_identity
r_static
r_int
id|i2o_seq_open_ddm_identity
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_ddm_identity
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_uinfo
r_static
r_int
id|i2o_seq_open_uinfo
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_uinfo
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_sgl_limits
r_static
r_int
id|i2o_seq_open_sgl_limits
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_sgl_limits
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_sensors
r_static
r_int
id|i2o_seq_open_sensors
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_sensors
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|function|i2o_seq_open_dev_name
r_static
r_int
id|i2o_seq_open_dev_name
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_return
id|single_open
c_func
(paren
id|file
comma
id|i2o_seq_show_dev_name
comma
id|PDE
c_func
(paren
id|inode
)paren
op_member_access_from_pointer
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_lct
r_static
r_struct
id|file_operations
id|i2o_seq_fops_lct
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_lct
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_hrt
r_static
r_struct
id|file_operations
id|i2o_seq_fops_hrt
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_hrt
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_status
r_static
r_struct
id|file_operations
id|i2o_seq_fops_status
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_status
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_hw
r_static
r_struct
id|file_operations
id|i2o_seq_fops_hw
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_hw
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_ddm_table
r_static
r_struct
id|file_operations
id|i2o_seq_fops_ddm_table
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_ddm_table
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_driver_store
r_static
r_struct
id|file_operations
id|i2o_seq_fops_driver_store
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_driver_store
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_drivers_stored
r_static
r_struct
id|file_operations
id|i2o_seq_fops_drivers_stored
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_drivers_stored
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_groups
r_static
r_struct
id|file_operations
id|i2o_seq_fops_groups
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_groups
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_phys_device
r_static
r_struct
id|file_operations
id|i2o_seq_fops_phys_device
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_phys_device
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_claimed
r_static
r_struct
id|file_operations
id|i2o_seq_fops_claimed
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_claimed
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_users
r_static
r_struct
id|file_operations
id|i2o_seq_fops_users
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_users
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_priv_msgs
r_static
r_struct
id|file_operations
id|i2o_seq_fops_priv_msgs
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_priv_msgs
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_authorized_users
r_static
r_struct
id|file_operations
id|i2o_seq_fops_authorized_users
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_authorized_users
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_dev_name
r_static
r_struct
id|file_operations
id|i2o_seq_fops_dev_name
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_dev_name
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_dev_identity
r_static
r_struct
id|file_operations
id|i2o_seq_fops_dev_identity
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_dev_identity
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_ddm_identity
r_static
r_struct
id|file_operations
id|i2o_seq_fops_ddm_identity
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_ddm_identity
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_uinfo
r_static
r_struct
id|file_operations
id|i2o_seq_fops_uinfo
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_uinfo
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_sgl_limits
r_static
r_struct
id|file_operations
id|i2o_seq_fops_sgl_limits
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_sgl_limits
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
DECL|variable|i2o_seq_fops_sensors
r_static
r_struct
id|file_operations
id|i2o_seq_fops_sensors
op_assign
(brace
dot
id|open
op_assign
id|i2o_seq_open_sensors
comma
dot
id|read
op_assign
id|seq_read
comma
dot
id|llseek
op_assign
id|seq_lseek
comma
dot
id|release
op_assign
id|single_release
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * IOP specific entries...write field just in case someone&n; * ever wants one.&n; */
DECL|variable|i2o_proc_generic_iop_entries
r_static
id|i2o_proc_entry
id|i2o_proc_generic_iop_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;hrt&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_hrt
)brace
comma
(brace
l_string|&quot;lct&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_lct
)brace
comma
(brace
l_string|&quot;status&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_status
)brace
comma
(brace
l_string|&quot;hw&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_hw
)brace
comma
(brace
l_string|&quot;ddm_table&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_ddm_table
)brace
comma
(brace
l_string|&quot;driver_store&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_driver_store
)brace
comma
(brace
l_string|&quot;drivers_stored&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_drivers_stored
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Device specific entries&n; */
DECL|variable|generic_dev_entries
r_static
id|i2o_proc_entry
id|generic_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;groups&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_groups
)brace
comma
(brace
l_string|&quot;phys_dev&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_phys_device
)brace
comma
(brace
l_string|&quot;claimed&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_claimed
)brace
comma
(brace
l_string|&quot;users&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_users
)brace
comma
(brace
l_string|&quot;priv_msgs&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_priv_msgs
)brace
comma
(brace
l_string|&quot;authorized_users&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_authorized_users
)brace
comma
(brace
l_string|&quot;dev_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_dev_identity
)brace
comma
(brace
l_string|&quot;ddm_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_ddm_identity
)brace
comma
(brace
l_string|&quot;user_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_uinfo
)brace
comma
(brace
l_string|&quot;sgl_limits&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_sgl_limits
)brace
comma
(brace
l_string|&quot;sensors&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_sensors
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; *  Storage unit specific entries (SCSI Periph, BS) with device names&n; */
DECL|variable|rbs_dev_entries
r_static
id|i2o_proc_entry
id|rbs_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;dev_name&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
op_amp
id|i2o_seq_fops_dev_name
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;i2o_proc_create_entries - Creates proc dir entries&n; *&t;@dir: proc dir entry under which the entries should be placed&n; *&t;@i2o_pe: pointer to the entries which should be added&n; *&t;@data: pointer to I2O controller or device&n; *&n; *&t;Create proc dir entries for a I2O controller or I2O device.&n; *&n; *&t;Returns 0 on success or negative error code on failure.&n; */
DECL|function|i2o_proc_create_entries
r_static
r_int
id|i2o_proc_create_entries
c_func
(paren
r_struct
id|proc_dir_entry
op_star
id|dir
comma
id|i2o_proc_entry
op_star
id|i2o_pe
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|tmp
suffix:semicolon
r_while
c_loop
(paren
id|i2o_pe-&gt;name
)paren
(brace
id|tmp
op_assign
id|create_proc_entry
c_func
(paren
id|i2o_pe-&gt;name
comma
id|i2o_pe-&gt;mode
comma
id|dir
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tmp
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|tmp-&gt;data
op_assign
id|data
suffix:semicolon
id|tmp-&gt;proc_fops
op_assign
id|i2o_pe-&gt;fops
suffix:semicolon
id|i2o_pe
op_increment
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; *&t;i2o_proc_subdir_remove - Remove child entries from a proc entry&n; *&t;@dir: proc dir entry from which the childs should be removed&n; *&n; *&t;Iterate over each i2o proc entry under dir and remove it. If the child&n; *&t;also has entries, remove them too.&n; */
DECL|function|i2o_proc_subdir_remove
r_static
r_void
id|i2o_proc_subdir_remove
c_func
(paren
r_struct
id|proc_dir_entry
op_star
id|dir
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|pe
comma
op_star
id|tmp
suffix:semicolon
id|pe
op_assign
id|dir-&gt;subdir
suffix:semicolon
r_while
c_loop
(paren
id|pe
)paren
(brace
id|tmp
op_assign
id|pe-&gt;next
suffix:semicolon
id|i2o_proc_subdir_remove
c_func
(paren
id|pe
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|pe-&gt;name
comma
id|dir
)paren
suffix:semicolon
id|pe
op_assign
id|tmp
suffix:semicolon
)brace
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;i2o_proc_device_add - Add an I2O device to the proc dir&n; *&t;@dir: proc dir entry to which the device should be added&n; *&t;@dev: I2O device which should be added&n; *&n; *&t;Add an I2O device to the proc dir entry dir and create the entries for&n; *&t;the device depending on the class of the I2O device.&n; */
DECL|function|i2o_proc_device_add
r_static
r_void
id|i2o_proc_device_add
c_func
(paren
r_struct
id|proc_dir_entry
op_star
id|dir
comma
r_struct
id|i2o_device
op_star
id|dev
)paren
(brace
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
r_struct
id|proc_dir_entry
op_star
id|devdir
suffix:semicolon
id|i2o_proc_entry
op_star
id|i2o_pe
op_assign
l_int|NULL
suffix:semicolon
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;%03x&quot;
comma
id|dev-&gt;lct_data.tid
)paren
suffix:semicolon
id|osm_debug
c_func
(paren
l_string|&quot;adding device /proc/i2o/%s/%s&bslash;n&quot;
comma
id|dev-&gt;iop-&gt;name
comma
id|buff
)paren
suffix:semicolon
id|devdir
op_assign
id|proc_mkdir
c_func
(paren
id|buff
comma
id|dir
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|devdir
)paren
(brace
id|osm_warn
c_func
(paren
l_string|&quot;Could not allocate procdir!&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|devdir-&gt;data
op_assign
id|dev
suffix:semicolon
id|i2o_proc_create_entries
c_func
(paren
id|devdir
comma
id|generic_dev_entries
comma
id|dev
)paren
suffix:semicolon
multiline_comment|/* Inform core that we want updates about this device&squot;s status */
r_switch
c_cond
(paren
id|dev-&gt;lct_data.class_id
)paren
(brace
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
id|i2o_pe
op_assign
id|rbs_dev_entries
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i2o_pe
)paren
id|i2o_proc_create_entries
c_func
(paren
id|devdir
comma
id|i2o_pe
comma
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; *&t;i2o_proc_iop_add - Add an I2O controller to the i2o proc tree&n; *&t;@dir: parent proc dir entry&n; *&t;@c: I2O controller which should be added&n; *&n; *&t;Add the entries to the parent proc dir entry. Also each device is added&n; *&t;to the controllers proc dir entry.&n; *&n; *&t;Returns 0 on success or negative error code on failure.&n; */
DECL|function|i2o_proc_iop_add
r_static
r_int
id|i2o_proc_iop_add
c_func
(paren
r_struct
id|proc_dir_entry
op_star
id|dir
comma
r_struct
id|i2o_controller
op_star
id|c
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|iopdir
suffix:semicolon
r_struct
id|i2o_device
op_star
id|dev
suffix:semicolon
id|osm_debug
c_func
(paren
l_string|&quot;adding IOP /proc/i2o/%s&bslash;n&quot;
comma
id|c-&gt;name
)paren
suffix:semicolon
id|iopdir
op_assign
id|proc_mkdir
c_func
(paren
id|c-&gt;name
comma
id|dir
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|iopdir
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|iopdir-&gt;data
op_assign
id|c
suffix:semicolon
id|i2o_proc_create_entries
c_func
(paren
id|iopdir
comma
id|i2o_proc_generic_iop_entries
comma
id|c
)paren
suffix:semicolon
id|list_for_each_entry
c_func
(paren
id|dev
comma
op_amp
id|c-&gt;devices
comma
id|list
)paren
id|i2o_proc_device_add
c_func
(paren
id|iopdir
comma
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; *&t;i2o_proc_iop_remove - Removes an I2O controller from the i2o proc tree&n; *&t;@dir: parent proc dir entry&n; *&t;@c: I2O controller which should be removed&n; *&n; *&t;Iterate over each i2o proc entry and search controller c. If it is found&n; *&t;remove it from the tree.&n; */
DECL|function|i2o_proc_iop_remove
r_static
r_void
id|i2o_proc_iop_remove
c_func
(paren
r_struct
id|proc_dir_entry
op_star
id|dir
comma
r_struct
id|i2o_controller
op_star
id|c
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|pe
comma
op_star
id|tmp
suffix:semicolon
id|pe
op_assign
id|dir-&gt;subdir
suffix:semicolon
r_while
c_loop
(paren
id|pe
)paren
(brace
id|tmp
op_assign
id|pe-&gt;next
suffix:semicolon
r_if
c_cond
(paren
id|pe-&gt;data
op_eq
id|c
)paren
(brace
id|i2o_proc_subdir_remove
c_func
(paren
id|pe
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|pe-&gt;name
comma
id|dir
)paren
suffix:semicolon
)brace
id|osm_debug
c_func
(paren
l_string|&quot;removing IOP /proc/i2o/%s&bslash;n&quot;
comma
id|c-&gt;name
)paren
suffix:semicolon
id|pe
op_assign
id|tmp
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; *&t;i2o_proc_fs_create - Create the i2o proc fs.&n; *&n; *&t;Iterate over each I2O controller and create the entries for it.&n; *&n; *&t;Returns 0 on success or negative error code on failure.&n; */
DECL|function|i2o_proc_fs_create
r_static
r_int
id|__init
id|i2o_proc_fs_create
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
suffix:semicolon
id|i2o_proc_dir_root
op_assign
id|proc_mkdir
c_func
(paren
l_string|&quot;i2o&quot;
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2o_proc_dir_root
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|i2o_proc_dir_root-&gt;owner
op_assign
id|THIS_MODULE
suffix:semicolon
id|list_for_each_entry
c_func
(paren
id|c
comma
op_amp
id|i2o_controllers
comma
id|list
)paren
id|i2o_proc_iop_add
c_func
(paren
id|i2o_proc_dir_root
comma
id|c
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;i2o_proc_fs_destroy - Cleanup the all i2o proc entries&n; *&n; *&t;Iterate over each I2O controller and remove the entries for it.&n; *&n; *&t;Returns 0 on success or negative error code on failure.&n; */
DECL|function|i2o_proc_fs_destroy
r_static
r_int
id|__exit
id|i2o_proc_fs_destroy
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
suffix:semicolon
id|list_for_each_entry
c_func
(paren
id|c
comma
op_amp
id|i2o_controllers
comma
id|list
)paren
id|i2o_proc_iop_remove
c_func
(paren
id|i2o_proc_dir_root
comma
id|c
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
l_string|&quot;i2o&quot;
comma
l_int|NULL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;i2o_proc_init - Init function for procfs&n; *&n; *&t;Registers Proc OSM and creates procfs entries.&n; *&n; *&t;Returns 0 on success or negative error code on failure.&n; */
DECL|function|i2o_proc_init
r_static
r_int
id|__init
id|i2o_proc_init
c_func
(paren
r_void
)paren
(brace
r_int
id|rc
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
id|OSM_DESCRIPTION
l_string|&quot; v&quot;
id|OSM_VERSION
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|rc
op_assign
id|i2o_driver_register
c_func
(paren
op_amp
id|i2o_proc_driver
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
)paren
r_return
id|rc
suffix:semicolon
id|rc
op_assign
id|i2o_proc_fs_create
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|rc
)paren
(brace
id|i2o_driver_unregister
c_func
(paren
op_amp
id|i2o_proc_driver
)paren
suffix:semicolon
r_return
id|rc
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/**&n; *&t;i2o_proc_exit - Exit function for procfs&n; *&n; *&t;Unregisters Proc OSM and removes procfs entries.&n; */
DECL|function|i2o_proc_exit
r_static
r_void
id|__exit
id|i2o_proc_exit
c_func
(paren
r_void
)paren
(brace
id|i2o_driver_unregister
c_func
(paren
op_amp
id|i2o_proc_driver
)paren
suffix:semicolon
id|i2o_proc_fs_destroy
c_func
(paren
)paren
suffix:semicolon
)brace
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Deepak Saxena&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|OSM_DESCRIPTION
id|MODULE_DESCRIPTION
c_func
(paren
id|OSM_DESCRIPTION
)paren
suffix:semicolon
DECL|variable|OSM_VERSION
id|MODULE_VERSION
c_func
(paren
id|OSM_VERSION
)paren
suffix:semicolon
DECL|variable|i2o_proc_init
id|module_init
c_func
(paren
id|i2o_proc_init
)paren
suffix:semicolon
DECL|variable|i2o_proc_exit
id|module_exit
c_func
(paren
id|i2o_proc_exit
)paren
suffix:semicolon
eof
