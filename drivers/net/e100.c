multiline_comment|/*******************************************************************************&n;&n;  &n;  Copyright(c) 1999 - 2004 Intel Corporation. All rights reserved.&n;  &n;  This program is free software; you can redistribute it and/or modify it &n;  under the terms of the GNU General Public License as published by the Free &n;  Software Foundation; either version 2 of the License, or (at your option) &n;  any later version.&n;  &n;  This program is distributed in the hope that it will be useful, but WITHOUT &n;  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or &n;  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for &n;  more details.&n;  &n;  You should have received a copy of the GNU General Public License along with&n;  this program; if not, write to the Free Software Foundation, Inc., 59 &n;  Temple Place - Suite 330, Boston, MA  02111-1307, USA.&n;  &n;  The full GNU General Public License is included in this distribution in the&n;  file called LICENSE.&n;  &n;  Contact Information:&n;  Linux NICS &lt;linux.nics@intel.com&gt;&n;  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497&n;&n;*******************************************************************************/
multiline_comment|/*&n; *&t;e100.c: Intel(R) PRO/100 ethernet driver&n; *&n; *&t;(Re)written 2003 by scott.feldman@intel.com.  Based loosely on&n; *&t;original e100 driver, but better described as a munging of&n; *&t;e100, e1000, eepro100, tg3, 8139cp, and other drivers.&n; *&n; *&t;References:&n; *&t;&t;Intel 8255x 10/100 Mbps Ethernet Controller Family,&n; *&t;&t;Open Source Software Developers Manual,&n; *&t;&t;http://sourceforge.net/projects/e1000&n; *&n; *&n; *&t;                      Theory of Operation&n; *&n; *&t;I.   General&n; *&n; *&t;The driver supports Intel(R) 10/100 Mbps PCI Fast Ethernet&n; *&t;controller family, which includes the 82557, 82558, 82559, 82550,&n; *&t;82551, and 82562 devices.  82558 and greater controllers&n; *&t;integrate the Intel 82555 PHY.  The controllers are used in&n; *&t;server and client network interface cards, as well as in&n; *&t;LAN-On-Motherboard (LOM), CardBus, MiniPCI, and ICHx&n; *&t;configurations.  8255x supports a 32-bit linear addressing&n; *&t;mode and operates at 33Mhz PCI clock rate.&n; *&n; *&t;II.  Driver Operation&n; *&n; *&t;Memory-mapped mode is used exclusively to access the device&squot;s&n; *&t;shared-memory structure, the Control/Status Registers (CSR). All&n; *&t;setup, configuration, and control of the device, including queuing&n; *&t;of Tx, Rx, and configuration commands is through the CSR.&n; *&t;cmd_lock serializes accesses to the CSR command register.  cb_lock&n; *&t;protects the shared Command Block List (CBL).&n; *&n; *&t;8255x is highly MII-compliant and all access to the PHY go&n; *&t;through the Management Data Interface (MDI).  Consequently, the&n; *&t;driver leverages the mii.c library shared with other MII-compliant&n; *&t;devices.&n; *&n; *&t;Big- and Little-Endian byte order as well as 32- and 64-bit&n; *&t;archs are supported.  Weak-ordered memory and non-cache-coherent&n; *&t;archs are supported.&n; *&n; *&t;III. Transmit&n; *&n; *&t;A Tx skb is mapped and hangs off of a TCB.  TCBs are linked&n; *&t;together in a fixed-size ring (CBL) thus forming the flexible mode&n; *&t;memory structure.  A TCB marked with the suspend-bit indicates&n; *&t;the end of the ring.  The last TCB processed suspends the&n; *&t;controller, and the controller can be restarted by issue a CU&n; *&t;resume command to continue from the suspend point, or a CU start&n; *&t;command to start at a given position in the ring.&n; *&n; *&t;Non-Tx commands (config, multicast setup, etc) are linked&n; *&t;into the CBL ring along with Tx commands.  The common structure&n; *&t;used for both Tx and non-Tx commands is the Command Block (CB).&n; *&n; *&t;cb_to_use is the next CB to use for queuing a command; cb_to_clean&n; *&t;is the next CB to check for completion; cb_to_send is the first&n; *&t;CB to start on in case of a previous failure to resume.  CB clean&n; *&t;up happens in interrupt context in response to a CU interrupt.&n; *&t;cbs_avail keeps track of number of free CB resources available.&n; *&n; * &t;Hardware padding of short packets to minimum packet size is&n; * &t;enabled.  82557 pads with 7Eh, while the later controllers pad&n; * &t;with 00h.&n; *&n; *&t;IV.  Recieve&n; *&n; *&t;The Receive Frame Area (RFA) comprises a ring of Receive Frame&n; *&t;Descriptors (RFD) + data buffer, thus forming the simplified mode&n; *&t;memory structure.  Rx skbs are allocated to contain both the RFD&n; *&t;and the data buffer, but the RFD is pulled off before the skb is&n; *&t;indicated.  The data buffer is aligned such that encapsulated&n; *&t;protocol headers are u32-aligned.  Since the RFD is part of the&n; *&t;mapped shared memory, and completion status is contained within&n; *&t;the RFD, the RFD must be dma_sync&squot;ed to maintain a consistent&n; *&t;view from software and hardware.&n; *&n; *&t;Under typical operation, the  receive unit (RU) is start once,&n; *&t;and the controller happily fills RFDs as frames arrive.  If&n; *&t;replacement RFDs cannot be allocated, or the RU goes non-active,&n; *&t;the RU must be restarted.  Frame arrival generates an interrupt,&n; *&t;and Rx indication and re-allocation happen in the same context,&n; *&t;therefore no locking is required.  A software-generated interrupt&n; *&t;is generated from the watchdog to recover from a failed allocation&n; *&t;senario where all Rx resources have been indicated and none re-&n; *&t;placed.&n; *&n; *&t;V.   Miscellaneous&n; *&n; * &t;VLAN offloading of tagging, stripping and filtering is not&n; * &t;supported, but driver will accommodate the extra 4-byte VLAN tag&n; * &t;for processing by upper layers.  Tx/Rx Checksum offloading is not&n; * &t;supported.  Tx Scatter/Gather is not supported.  Jumbo Frames is&n; * &t;not supported (hardware limitation).&n; *&n; * &t;MagicPacket(tm) WoL support is enabled/disabled via ethtool.&n; *&n; * &t;Thanks to JC (jchapman@katalix.com) for helping with&n; * &t;testing/troubleshooting the development driver.&n; *&n; * &t;TODO:&n; * &t;o several entry points race with dev-&gt;close&n; * &t;o check for tx-no-resources/stop Q races with tx clean/wake Q&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/moduleparam.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &lt;linux/etherdevice.h&gt;
macro_line|#include &lt;linux/mii.h&gt;
macro_line|#include &lt;linux/if_vlan.h&gt;
macro_line|#include &lt;linux/skbuff.h&gt;
macro_line|#include &lt;linux/ethtool.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;asm/unaligned.h&gt;
DECL|macro|DRV_NAME
mdefine_line|#define DRV_NAME&t;&t;&quot;e100&quot;
DECL|macro|DRV_EXT
mdefine_line|#define DRV_EXT&t;&t;&quot;-NAPI&quot;
DECL|macro|DRV_VERSION
mdefine_line|#define DRV_VERSION&t;&t;&quot;3.2.3-k2&quot;DRV_EXT
DECL|macro|DRV_DESCRIPTION
mdefine_line|#define DRV_DESCRIPTION&t;&t;&quot;Intel(R) PRO/100 Network Driver&quot;
DECL|macro|DRV_COPYRIGHT
mdefine_line|#define DRV_COPYRIGHT&t;&t;&quot;Copyright(c) 1999-2004 Intel Corporation&quot;
DECL|macro|PFX
mdefine_line|#define PFX&t;&t;&t;DRV_NAME &quot;: &quot;
DECL|macro|E100_WATCHDOG_PERIOD
mdefine_line|#define E100_WATCHDOG_PERIOD&t;(2 * HZ)
DECL|macro|E100_NAPI_WEIGHT
mdefine_line|#define E100_NAPI_WEIGHT&t;16
DECL|variable|DRV_DESCRIPTION
id|MODULE_DESCRIPTION
c_func
(paren
id|DRV_DESCRIPTION
)paren
suffix:semicolon
DECL|variable|DRV_COPYRIGHT
id|MODULE_AUTHOR
c_func
(paren
id|DRV_COPYRIGHT
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|DRV_VERSION
id|MODULE_VERSION
c_func
(paren
id|DRV_VERSION
)paren
suffix:semicolon
DECL|variable|debug
r_static
r_int
id|debug
op_assign
l_int|3
suffix:semicolon
id|module_param
c_func
(paren
id|debug
comma
r_int
comma
l_int|0
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|debug
comma
l_string|&quot;Debug level (0=none,...,16=all)&quot;
)paren
suffix:semicolon
DECL|macro|DPRINTK
mdefine_line|#define DPRINTK(nlevel, klevel, fmt, args...) &bslash;&n;&t;(void)((NETIF_MSG_##nlevel &amp; nic-&gt;msg_enable) &amp;&amp; &bslash;&n;&t;printk(KERN_##klevel PFX &quot;%s: %s: &quot; fmt, nic-&gt;netdev-&gt;name, &bslash;&n;&t;&t;__FUNCTION__ , ## args))
DECL|macro|INTEL_8255X_ETHERNET_DEVICE
mdefine_line|#define INTEL_8255X_ETHERNET_DEVICE(device_id, ich) {&bslash;&n;&t;PCI_VENDOR_ID_INTEL, device_id, PCI_ANY_ID, PCI_ANY_ID, &bslash;&n;&t;PCI_CLASS_NETWORK_ETHERNET &lt;&lt; 8, 0xFFFF00, ich }
DECL|variable|e100_id_table
r_static
r_struct
id|pci_device_id
id|e100_id_table
(braket
)braket
op_assign
(brace
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1029
comma
l_int|0
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1030
comma
l_int|0
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1031
comma
l_int|3
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1032
comma
l_int|3
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1033
comma
l_int|3
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1034
comma
l_int|3
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1038
comma
l_int|3
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1039
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x103A
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x103B
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x103C
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x103D
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x103E
comma
l_int|4
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1050
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1051
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1052
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1053
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1054
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1055
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1056
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1057
comma
l_int|5
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1059
comma
l_int|0
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1064
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1065
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1066
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1067
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1068
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1069
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x106A
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x106B
comma
l_int|6
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1209
comma
l_int|0
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x1229
comma
l_int|0
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x2449
comma
l_int|2
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x2459
comma
l_int|2
)paren
comma
id|INTEL_8255X_ETHERNET_DEVICE
c_func
(paren
l_int|0x245D
comma
l_int|2
)paren
comma
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|e100_id_table
)paren
suffix:semicolon
DECL|enum|mac
r_enum
id|mac
(brace
DECL|enumerator|mac_82557_D100_A
id|mac_82557_D100_A
op_assign
l_int|0
comma
DECL|enumerator|mac_82557_D100_B
id|mac_82557_D100_B
op_assign
l_int|1
comma
DECL|enumerator|mac_82557_D100_C
id|mac_82557_D100_C
op_assign
l_int|2
comma
DECL|enumerator|mac_82558_D101_A4
id|mac_82558_D101_A4
op_assign
l_int|4
comma
DECL|enumerator|mac_82558_D101_B0
id|mac_82558_D101_B0
op_assign
l_int|5
comma
DECL|enumerator|mac_82559_D101M
id|mac_82559_D101M
op_assign
l_int|8
comma
DECL|enumerator|mac_82559_D101S
id|mac_82559_D101S
op_assign
l_int|9
comma
DECL|enumerator|mac_82550_D102
id|mac_82550_D102
op_assign
l_int|12
comma
DECL|enumerator|mac_82550_D102_C
id|mac_82550_D102_C
op_assign
l_int|13
comma
DECL|enumerator|mac_82551_E
id|mac_82551_E
op_assign
l_int|14
comma
DECL|enumerator|mac_82551_F
id|mac_82551_F
op_assign
l_int|15
comma
DECL|enumerator|mac_82551_10
id|mac_82551_10
op_assign
l_int|16
comma
DECL|enumerator|mac_unknown
id|mac_unknown
op_assign
l_int|0xFF
comma
)brace
suffix:semicolon
DECL|enum|phy
r_enum
id|phy
(brace
DECL|enumerator|phy_100a
id|phy_100a
op_assign
l_int|0x000003E0
comma
DECL|enumerator|phy_100c
id|phy_100c
op_assign
l_int|0x035002A8
comma
DECL|enumerator|phy_82555_tx
id|phy_82555_tx
op_assign
l_int|0x015002A8
comma
DECL|enumerator|phy_nsc_tx
id|phy_nsc_tx
op_assign
l_int|0x5C002000
comma
DECL|enumerator|phy_82562_et
id|phy_82562_et
op_assign
l_int|0x033002A8
comma
DECL|enumerator|phy_82562_em
id|phy_82562_em
op_assign
l_int|0x032002A8
comma
DECL|enumerator|phy_82562_ek
id|phy_82562_ek
op_assign
l_int|0x031002A8
comma
DECL|enumerator|phy_82562_eh
id|phy_82562_eh
op_assign
l_int|0x017002A8
comma
DECL|enumerator|phy_unknown
id|phy_unknown
op_assign
l_int|0xFFFFFFFF
comma
)brace
suffix:semicolon
multiline_comment|/* CSR (Control/Status Registers) */
DECL|struct|csr
r_struct
id|csr
(brace
r_struct
(brace
DECL|member|status
id|u8
id|status
suffix:semicolon
DECL|member|stat_ack
id|u8
id|stat_ack
suffix:semicolon
DECL|member|cmd_lo
id|u8
id|cmd_lo
suffix:semicolon
DECL|member|cmd_hi
id|u8
id|cmd_hi
suffix:semicolon
DECL|member|gen_ptr
id|u32
id|gen_ptr
suffix:semicolon
DECL|member|scb
)brace
id|scb
suffix:semicolon
DECL|member|port
id|u32
id|port
suffix:semicolon
DECL|member|flash_ctrl
id|u16
id|flash_ctrl
suffix:semicolon
DECL|member|eeprom_ctrl_lo
id|u8
id|eeprom_ctrl_lo
suffix:semicolon
DECL|member|eeprom_ctrl_hi
id|u8
id|eeprom_ctrl_hi
suffix:semicolon
DECL|member|mdi_ctrl
id|u32
id|mdi_ctrl
suffix:semicolon
DECL|member|rx_dma_count
id|u32
id|rx_dma_count
suffix:semicolon
)brace
suffix:semicolon
DECL|enum|scb_status
r_enum
id|scb_status
(brace
DECL|enumerator|rus_ready
id|rus_ready
op_assign
l_int|0x10
comma
DECL|enumerator|rus_mask
id|rus_mask
op_assign
l_int|0x3C
comma
)brace
suffix:semicolon
DECL|enum|scb_stat_ack
r_enum
id|scb_stat_ack
(brace
DECL|enumerator|stat_ack_not_ours
id|stat_ack_not_ours
op_assign
l_int|0x00
comma
DECL|enumerator|stat_ack_sw_gen
id|stat_ack_sw_gen
op_assign
l_int|0x04
comma
DECL|enumerator|stat_ack_rnr
id|stat_ack_rnr
op_assign
l_int|0x10
comma
DECL|enumerator|stat_ack_cu_idle
id|stat_ack_cu_idle
op_assign
l_int|0x20
comma
DECL|enumerator|stat_ack_frame_rx
id|stat_ack_frame_rx
op_assign
l_int|0x40
comma
DECL|enumerator|stat_ack_cu_cmd_done
id|stat_ack_cu_cmd_done
op_assign
l_int|0x80
comma
DECL|enumerator|stat_ack_not_present
id|stat_ack_not_present
op_assign
l_int|0xFF
comma
DECL|enumerator|stat_ack_rx
id|stat_ack_rx
op_assign
(paren
id|stat_ack_sw_gen
op_or
id|stat_ack_rnr
op_or
id|stat_ack_frame_rx
)paren
comma
DECL|enumerator|stat_ack_tx
id|stat_ack_tx
op_assign
(paren
id|stat_ack_cu_idle
op_or
id|stat_ack_cu_cmd_done
)paren
comma
)brace
suffix:semicolon
DECL|enum|scb_cmd_hi
r_enum
id|scb_cmd_hi
(brace
DECL|enumerator|irq_mask_none
id|irq_mask_none
op_assign
l_int|0x00
comma
DECL|enumerator|irq_mask_all
id|irq_mask_all
op_assign
l_int|0x01
comma
DECL|enumerator|irq_sw_gen
id|irq_sw_gen
op_assign
l_int|0x02
comma
)brace
suffix:semicolon
DECL|enum|scb_cmd_lo
r_enum
id|scb_cmd_lo
(brace
DECL|enumerator|cuc_nop
id|cuc_nop
op_assign
l_int|0x00
comma
DECL|enumerator|ruc_start
id|ruc_start
op_assign
l_int|0x01
comma
DECL|enumerator|ruc_load_base
id|ruc_load_base
op_assign
l_int|0x06
comma
DECL|enumerator|cuc_start
id|cuc_start
op_assign
l_int|0x10
comma
DECL|enumerator|cuc_resume
id|cuc_resume
op_assign
l_int|0x20
comma
DECL|enumerator|cuc_dump_addr
id|cuc_dump_addr
op_assign
l_int|0x40
comma
DECL|enumerator|cuc_dump_stats
id|cuc_dump_stats
op_assign
l_int|0x50
comma
DECL|enumerator|cuc_load_base
id|cuc_load_base
op_assign
l_int|0x60
comma
DECL|enumerator|cuc_dump_reset
id|cuc_dump_reset
op_assign
l_int|0x70
comma
)brace
suffix:semicolon
DECL|enum|cuc_dump
r_enum
id|cuc_dump
(brace
DECL|enumerator|cuc_dump_complete
id|cuc_dump_complete
op_assign
l_int|0x0000A005
comma
DECL|enumerator|cuc_dump_reset_complete
id|cuc_dump_reset_complete
op_assign
l_int|0x0000A007
comma
)brace
suffix:semicolon
DECL|enum|port
r_enum
id|port
(brace
DECL|enumerator|software_reset
id|software_reset
op_assign
l_int|0x0000
comma
DECL|enumerator|selftest
id|selftest
op_assign
l_int|0x0001
comma
DECL|enumerator|selective_reset
id|selective_reset
op_assign
l_int|0x0002
comma
)brace
suffix:semicolon
DECL|enum|eeprom_ctrl_lo
r_enum
id|eeprom_ctrl_lo
(brace
DECL|enumerator|eesk
id|eesk
op_assign
l_int|0x01
comma
DECL|enumerator|eecs
id|eecs
op_assign
l_int|0x02
comma
DECL|enumerator|eedi
id|eedi
op_assign
l_int|0x04
comma
DECL|enumerator|eedo
id|eedo
op_assign
l_int|0x08
comma
)brace
suffix:semicolon
DECL|enum|mdi_ctrl
r_enum
id|mdi_ctrl
(brace
DECL|enumerator|mdi_write
id|mdi_write
op_assign
l_int|0x04000000
comma
DECL|enumerator|mdi_read
id|mdi_read
op_assign
l_int|0x08000000
comma
DECL|enumerator|mdi_ready
id|mdi_ready
op_assign
l_int|0x10000000
comma
)brace
suffix:semicolon
DECL|enum|eeprom_op
r_enum
id|eeprom_op
(brace
DECL|enumerator|op_write
id|op_write
op_assign
l_int|0x05
comma
DECL|enumerator|op_read
id|op_read
op_assign
l_int|0x06
comma
DECL|enumerator|op_ewds
id|op_ewds
op_assign
l_int|0x10
comma
DECL|enumerator|op_ewen
id|op_ewen
op_assign
l_int|0x13
comma
)brace
suffix:semicolon
DECL|enum|eeprom_offsets
r_enum
id|eeprom_offsets
(brace
DECL|enumerator|eeprom_cnfg_mdix
id|eeprom_cnfg_mdix
op_assign
l_int|0x03
comma
DECL|enumerator|eeprom_id
id|eeprom_id
op_assign
l_int|0x0A
comma
DECL|enumerator|eeprom_config_asf
id|eeprom_config_asf
op_assign
l_int|0x0D
comma
DECL|enumerator|eeprom_smbus_addr
id|eeprom_smbus_addr
op_assign
l_int|0x90
comma
)brace
suffix:semicolon
DECL|enum|eeprom_cnfg_mdix
r_enum
id|eeprom_cnfg_mdix
(brace
DECL|enumerator|eeprom_mdix_enabled
id|eeprom_mdix_enabled
op_assign
l_int|0x0080
comma
)brace
suffix:semicolon
DECL|enum|eeprom_id
r_enum
id|eeprom_id
(brace
DECL|enumerator|eeprom_id_wol
id|eeprom_id_wol
op_assign
l_int|0x0020
comma
)brace
suffix:semicolon
DECL|enum|eeprom_config_asf
r_enum
id|eeprom_config_asf
(brace
DECL|enumerator|eeprom_asf
id|eeprom_asf
op_assign
l_int|0x8000
comma
DECL|enumerator|eeprom_gcl
id|eeprom_gcl
op_assign
l_int|0x4000
comma
)brace
suffix:semicolon
DECL|enum|cb_status
r_enum
id|cb_status
(brace
DECL|enumerator|cb_complete
id|cb_complete
op_assign
l_int|0x8000
comma
DECL|enumerator|cb_ok
id|cb_ok
op_assign
l_int|0x2000
comma
)brace
suffix:semicolon
DECL|enum|cb_command
r_enum
id|cb_command
(brace
DECL|enumerator|cb_nop
id|cb_nop
op_assign
l_int|0x0000
comma
DECL|enumerator|cb_iaaddr
id|cb_iaaddr
op_assign
l_int|0x0001
comma
DECL|enumerator|cb_config
id|cb_config
op_assign
l_int|0x0002
comma
DECL|enumerator|cb_multi
id|cb_multi
op_assign
l_int|0x0003
comma
DECL|enumerator|cb_tx
id|cb_tx
op_assign
l_int|0x0004
comma
DECL|enumerator|cb_ucode
id|cb_ucode
op_assign
l_int|0x0005
comma
DECL|enumerator|cb_dump
id|cb_dump
op_assign
l_int|0x0006
comma
DECL|enumerator|cb_tx_sf
id|cb_tx_sf
op_assign
l_int|0x0008
comma
DECL|enumerator|cb_cid
id|cb_cid
op_assign
l_int|0x1f00
comma
DECL|enumerator|cb_i
id|cb_i
op_assign
l_int|0x2000
comma
DECL|enumerator|cb_s
id|cb_s
op_assign
l_int|0x4000
comma
DECL|enumerator|cb_el
id|cb_el
op_assign
l_int|0x8000
comma
)brace
suffix:semicolon
DECL|struct|rfd
r_struct
id|rfd
(brace
DECL|member|status
id|u16
id|status
suffix:semicolon
DECL|member|command
id|u16
id|command
suffix:semicolon
DECL|member|link
id|u32
id|link
suffix:semicolon
DECL|member|rbd
id|u32
id|rbd
suffix:semicolon
DECL|member|actual_size
id|u16
id|actual_size
suffix:semicolon
DECL|member|size
id|u16
id|size
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|rx
r_struct
id|rx
(brace
DECL|member|next
DECL|member|prev
r_struct
id|rx
op_star
id|next
comma
op_star
id|prev
suffix:semicolon
DECL|member|skb
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
DECL|member|dma_addr
id|dma_addr_t
id|dma_addr
suffix:semicolon
)brace
suffix:semicolon
macro_line|#if defined(__BIG_ENDIAN_BITFIELD)
DECL|macro|X
mdefine_line|#define X(a,b)&t;b,a
macro_line|#else
DECL|macro|X
mdefine_line|#define X(a,b)&t;a,b
macro_line|#endif
DECL|struct|config
r_struct
id|config
(brace
multiline_comment|/*0*/
id|u8
id|X
c_func
(paren
id|byte_count
suffix:colon
l_int|6
comma
id|pad0
suffix:colon
l_int|2
)paren
suffix:semicolon
DECL|member|pad1
multiline_comment|/*1*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|rx_fifo_limit
suffix:colon
l_int|4
comma
id|tx_fifo_limit
suffix:colon
l_int|3
)paren
comma
id|pad1
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|adaptive_ifs
multiline_comment|/*2*/
id|u8
id|adaptive_ifs
suffix:semicolon
multiline_comment|/*3*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|mwi_enable
suffix:colon
l_int|1
comma
id|type_enable
suffix:colon
l_int|1
)paren
comma
id|read_align_enable
suffix:colon
l_int|1
)paren
comma
DECL|member|term_write_cache_line
DECL|member|pad3
id|term_write_cache_line
suffix:colon
l_int|1
)paren
comma
id|pad3
suffix:colon
l_int|4
)paren
suffix:semicolon
multiline_comment|/*4*/
id|u8
id|X
c_func
(paren
id|rx_dma_max_count
suffix:colon
l_int|7
comma
id|pad4
suffix:colon
l_int|1
)paren
suffix:semicolon
multiline_comment|/*5*/
id|u8
id|X
c_func
(paren
id|tx_dma_max_count
suffix:colon
l_int|7
comma
id|dma_max_count_enable
suffix:colon
l_int|1
)paren
suffix:semicolon
multiline_comment|/*6*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|late_scb_update
suffix:colon
l_int|1
comma
id|direct_rx_dma
suffix:colon
l_int|1
)paren
comma
id|tno_intr
suffix:colon
l_int|1
)paren
comma
id|cna_intr
suffix:colon
l_int|1
)paren
comma
id|standard_tcb
suffix:colon
l_int|1
)paren
comma
id|standard_stat_counter
suffix:colon
l_int|1
)paren
comma
DECL|member|rx_discard_overruns
DECL|member|rx_save_bad_frames
id|rx_discard_overruns
suffix:colon
l_int|1
)paren
comma
id|rx_save_bad_frames
suffix:colon
l_int|1
)paren
suffix:semicolon
multiline_comment|/*7*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|rx_discard_short_frames
suffix:colon
l_int|1
comma
id|tx_underrun_retry
suffix:colon
l_int|2
)paren
comma
DECL|member|tx_two_frames_in_fifo
id|pad7
suffix:colon
l_int|2
)paren
comma
id|rx_extended_rfd
suffix:colon
l_int|1
)paren
comma
id|tx_two_frames_in_fifo
suffix:colon
l_int|1
)paren
comma
DECL|member|tx_dynamic_tbd
id|tx_dynamic_tbd
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|csma_disabled
multiline_comment|/*8*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|mii_mode
suffix:colon
l_int|1
comma
id|pad8
suffix:colon
l_int|6
)paren
comma
id|csma_disabled
suffix:colon
l_int|1
)paren
suffix:semicolon
multiline_comment|/*9*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|rx_tcpudp_checksum
suffix:colon
l_int|1
comma
id|pad9
suffix:colon
l_int|3
)paren
comma
id|vlan_arp_tco
suffix:colon
l_int|1
)paren
comma
DECL|member|arp_wake
DECL|member|mcmatch_wake
id|link_status_wake
suffix:colon
l_int|1
)paren
comma
id|arp_wake
suffix:colon
l_int|1
)paren
comma
id|mcmatch_wake
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|preamble_length
multiline_comment|/*10*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|pad10
suffix:colon
l_int|3
comma
id|no_source_addr_insertion
suffix:colon
l_int|1
)paren
comma
id|preamble_length
suffix:colon
l_int|2
)paren
comma
DECL|member|loopback
id|loopback
suffix:colon
l_int|2
)paren
suffix:semicolon
multiline_comment|/*11*/
id|u8
id|X
c_func
(paren
id|linear_priority
suffix:colon
l_int|3
comma
id|pad11
suffix:colon
l_int|5
)paren
suffix:semicolon
DECL|member|ifs
multiline_comment|/*12*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|linear_priority_mode
suffix:colon
l_int|1
comma
id|pad12
suffix:colon
l_int|3
)paren
comma
id|ifs
suffix:colon
l_int|4
)paren
suffix:semicolon
DECL|member|ip_addr_lo
multiline_comment|/*13*/
id|u8
id|ip_addr_lo
suffix:semicolon
DECL|member|ip_addr_hi
multiline_comment|/*14*/
id|u8
id|ip_addr_hi
suffix:semicolon
multiline_comment|/*15*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|promiscuous_mode
suffix:colon
l_int|1
comma
id|broadcast_disabled
suffix:colon
l_int|1
)paren
comma
id|wait_after_win
suffix:colon
l_int|1
)paren
comma
id|pad15_1
suffix:colon
l_int|1
)paren
comma
id|ignore_ul_bit
suffix:colon
l_int|1
)paren
comma
id|crc_16_bit
suffix:colon
l_int|1
)paren
comma
DECL|member|pad15_2
DECL|member|crs_or_cdt
id|pad15_2
suffix:colon
l_int|1
)paren
comma
id|crs_or_cdt
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|fc_delay_lo
multiline_comment|/*16*/
id|u8
id|fc_delay_lo
suffix:semicolon
DECL|member|fc_delay_hi
multiline_comment|/*17*/
id|u8
id|fc_delay_hi
suffix:semicolon
multiline_comment|/*18*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|rx_stripping
suffix:colon
l_int|1
comma
id|tx_padding
suffix:colon
l_int|1
)paren
comma
id|rx_crc_transfer
suffix:colon
l_int|1
)paren
comma
DECL|member|fc_priority_threshold
DECL|member|pad18
id|rx_long_ok
suffix:colon
l_int|1
)paren
comma
id|fc_priority_threshold
suffix:colon
l_int|3
)paren
comma
id|pad18
suffix:colon
l_int|1
)paren
suffix:semicolon
multiline_comment|/*19*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|addr_wake
suffix:colon
l_int|1
comma
id|magic_packet_disable
suffix:colon
l_int|1
)paren
comma
id|fc_disable
suffix:colon
l_int|1
)paren
comma
id|fc_restop
suffix:colon
l_int|1
)paren
comma
id|fc_restart
suffix:colon
l_int|1
)paren
comma
id|fc_reject
suffix:colon
l_int|1
)paren
comma
DECL|member|full_duplex_force
DECL|member|full_duplex_pin
id|full_duplex_force
suffix:colon
l_int|1
)paren
comma
id|full_duplex_pin
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|multi_ia
DECL|member|pad20_2
multiline_comment|/*20*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|X
c_func
(paren
id|pad20_1
suffix:colon
l_int|5
comma
id|fc_priority_location
suffix:colon
l_int|1
)paren
comma
id|multi_ia
suffix:colon
l_int|1
)paren
comma
id|pad20_2
suffix:colon
l_int|1
)paren
suffix:semicolon
DECL|member|pad21_2
multiline_comment|/*21*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|pad21_1
suffix:colon
l_int|3
comma
id|multicast_all
suffix:colon
l_int|1
)paren
comma
id|pad21_2
suffix:colon
l_int|4
)paren
suffix:semicolon
DECL|member|pad22
multiline_comment|/*22*/
id|u8
id|X
c_func
(paren
id|X
c_func
(paren
id|rx_d102_mode
suffix:colon
l_int|1
comma
id|rx_vlan_drop
suffix:colon
l_int|1
)paren
comma
id|pad22
suffix:colon
l_int|6
)paren
suffix:semicolon
DECL|member|pad_d102
id|u8
id|pad_d102
(braket
l_int|9
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|E100_MAX_MULTICAST_ADDRS
mdefine_line|#define E100_MAX_MULTICAST_ADDRS&t;64
DECL|struct|multi
r_struct
id|multi
(brace
DECL|member|count
id|u16
id|count
suffix:semicolon
DECL|member|addr
id|u8
id|addr
(braket
id|E100_MAX_MULTICAST_ADDRS
op_star
id|ETH_ALEN
op_plus
l_int|2
multiline_comment|/*pad*/
)braket
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* Important: keep total struct u32-aligned */
DECL|macro|UCODE_SIZE
mdefine_line|#define UCODE_SIZE&t;&t;&t;134
DECL|struct|cb
r_struct
id|cb
(brace
DECL|member|status
id|u16
id|status
suffix:semicolon
DECL|member|command
id|u16
id|command
suffix:semicolon
DECL|member|link
id|u32
id|link
suffix:semicolon
r_union
(brace
DECL|member|iaaddr
id|u8
id|iaaddr
(braket
id|ETH_ALEN
)braket
suffix:semicolon
DECL|member|ucode
id|u32
id|ucode
(braket
id|UCODE_SIZE
)braket
suffix:semicolon
DECL|member|config
r_struct
id|config
id|config
suffix:semicolon
DECL|member|multi
r_struct
id|multi
id|multi
suffix:semicolon
r_struct
(brace
DECL|member|tbd_array
id|u32
id|tbd_array
suffix:semicolon
DECL|member|tcb_byte_count
id|u16
id|tcb_byte_count
suffix:semicolon
DECL|member|threshold
id|u8
id|threshold
suffix:semicolon
DECL|member|tbd_count
id|u8
id|tbd_count
suffix:semicolon
r_struct
(brace
DECL|member|buf_addr
id|u32
id|buf_addr
suffix:semicolon
DECL|member|size
id|u16
id|size
suffix:semicolon
DECL|member|eol
id|u16
id|eol
suffix:semicolon
DECL|member|tbd
)brace
id|tbd
suffix:semicolon
DECL|member|tcb
)brace
id|tcb
suffix:semicolon
DECL|member|dump_buffer_addr
id|u32
id|dump_buffer_addr
suffix:semicolon
DECL|member|u
)brace
id|u
suffix:semicolon
DECL|member|next
DECL|member|prev
r_struct
id|cb
op_star
id|next
comma
op_star
id|prev
suffix:semicolon
DECL|member|dma_addr
id|dma_addr_t
id|dma_addr
suffix:semicolon
DECL|member|skb
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
)brace
suffix:semicolon
DECL|enum|loopback
r_enum
id|loopback
(brace
DECL|enumerator|lb_none
DECL|enumerator|lb_mac
DECL|enumerator|lb_phy
id|lb_none
op_assign
l_int|0
comma
id|lb_mac
op_assign
l_int|1
comma
id|lb_phy
op_assign
l_int|3
comma
)brace
suffix:semicolon
DECL|struct|stats
r_struct
id|stats
(brace
DECL|member|tx_good_frames
DECL|member|tx_max_collisions
DECL|member|tx_late_collisions
id|u32
id|tx_good_frames
comma
id|tx_max_collisions
comma
id|tx_late_collisions
comma
DECL|member|tx_underruns
DECL|member|tx_lost_crs
DECL|member|tx_deferred
DECL|member|tx_single_collisions
id|tx_underruns
comma
id|tx_lost_crs
comma
id|tx_deferred
comma
id|tx_single_collisions
comma
DECL|member|tx_multiple_collisions
DECL|member|tx_total_collisions
id|tx_multiple_collisions
comma
id|tx_total_collisions
suffix:semicolon
DECL|member|rx_good_frames
DECL|member|rx_crc_errors
DECL|member|rx_alignment_errors
id|u32
id|rx_good_frames
comma
id|rx_crc_errors
comma
id|rx_alignment_errors
comma
DECL|member|rx_resource_errors
DECL|member|rx_overrun_errors
DECL|member|rx_cdt_errors
id|rx_resource_errors
comma
id|rx_overrun_errors
comma
id|rx_cdt_errors
comma
DECL|member|rx_short_frame_errors
id|rx_short_frame_errors
suffix:semicolon
DECL|member|fc_xmt_pause
DECL|member|fc_rcv_pause
DECL|member|fc_rcv_unsupported
id|u32
id|fc_xmt_pause
comma
id|fc_rcv_pause
comma
id|fc_rcv_unsupported
suffix:semicolon
DECL|member|xmt_tco_frames
DECL|member|rcv_tco_frames
id|u16
id|xmt_tco_frames
comma
id|rcv_tco_frames
suffix:semicolon
DECL|member|complete
id|u32
id|complete
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|mem
r_struct
id|mem
(brace
r_struct
(brace
DECL|member|signature
id|u32
id|signature
suffix:semicolon
DECL|member|result
id|u32
id|result
suffix:semicolon
DECL|member|selftest
)brace
id|selftest
suffix:semicolon
DECL|member|stats
r_struct
id|stats
id|stats
suffix:semicolon
DECL|member|dump_buf
id|u8
id|dump_buf
(braket
l_int|596
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|param_range
r_struct
id|param_range
(brace
DECL|member|min
id|u32
id|min
suffix:semicolon
DECL|member|max
id|u32
id|max
suffix:semicolon
DECL|member|count
id|u32
id|count
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|params
r_struct
id|params
(brace
DECL|member|rfds
r_struct
id|param_range
id|rfds
suffix:semicolon
DECL|member|cbs
r_struct
id|param_range
id|cbs
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|nic
r_struct
id|nic
(brace
multiline_comment|/* Begin: frequently used values: keep adjacent for cache effect */
DECL|member|____cacheline_aligned
id|u32
id|msg_enable
id|____cacheline_aligned
suffix:semicolon
DECL|member|netdev
r_struct
id|net_device
op_star
id|netdev
suffix:semicolon
DECL|member|pdev
r_struct
id|pci_dev
op_star
id|pdev
suffix:semicolon
DECL|member|____cacheline_aligned
r_struct
id|rx
op_star
id|rxs
id|____cacheline_aligned
suffix:semicolon
DECL|member|rx_to_use
r_struct
id|rx
op_star
id|rx_to_use
suffix:semicolon
DECL|member|rx_to_clean
r_struct
id|rx
op_star
id|rx_to_clean
suffix:semicolon
DECL|member|blank_rfd
r_struct
id|rfd
id|blank_rfd
suffix:semicolon
DECL|member|ru_running
r_int
id|ru_running
suffix:semicolon
DECL|member|____cacheline_aligned
id|spinlock_t
id|cb_lock
id|____cacheline_aligned
suffix:semicolon
DECL|member|cmd_lock
id|spinlock_t
id|cmd_lock
suffix:semicolon
DECL|member|csr
r_struct
id|csr
id|__iomem
op_star
id|csr
suffix:semicolon
DECL|member|cuc_cmd
r_enum
id|scb_cmd_lo
id|cuc_cmd
suffix:semicolon
DECL|member|cbs_avail
r_int
r_int
id|cbs_avail
suffix:semicolon
DECL|member|cbs
r_struct
id|cb
op_star
id|cbs
suffix:semicolon
DECL|member|cb_to_use
r_struct
id|cb
op_star
id|cb_to_use
suffix:semicolon
DECL|member|cb_to_send
r_struct
id|cb
op_star
id|cb_to_send
suffix:semicolon
DECL|member|cb_to_clean
r_struct
id|cb
op_star
id|cb_to_clean
suffix:semicolon
DECL|member|tx_command
id|u16
id|tx_command
suffix:semicolon
multiline_comment|/* End: frequently used values: keep adjacent for cache effect */
r_enum
(brace
DECL|enumerator|ich
id|ich
op_assign
(paren
l_int|1
op_lshift
l_int|0
)paren
comma
DECL|enumerator|promiscuous
id|promiscuous
op_assign
(paren
l_int|1
op_lshift
l_int|1
)paren
comma
DECL|enumerator|multicast_all
id|multicast_all
op_assign
(paren
l_int|1
op_lshift
l_int|2
)paren
comma
DECL|enumerator|wol_magic
id|wol_magic
op_assign
(paren
l_int|1
op_lshift
l_int|3
)paren
comma
DECL|enumerator|ich_10h_workaround
id|ich_10h_workaround
op_assign
(paren
l_int|1
op_lshift
l_int|4
)paren
comma
DECL|member|____cacheline_aligned
)brace
id|flags
id|____cacheline_aligned
suffix:semicolon
DECL|member|mac
r_enum
id|mac
id|mac
suffix:semicolon
DECL|member|phy
r_enum
id|phy
id|phy
suffix:semicolon
DECL|member|params
r_struct
id|params
id|params
suffix:semicolon
DECL|member|net_stats
r_struct
id|net_device_stats
id|net_stats
suffix:semicolon
DECL|member|watchdog
r_struct
id|timer_list
id|watchdog
suffix:semicolon
DECL|member|blink_timer
r_struct
id|timer_list
id|blink_timer
suffix:semicolon
DECL|member|mii
r_struct
id|mii_if_info
id|mii
suffix:semicolon
DECL|member|loopback
r_enum
id|loopback
id|loopback
suffix:semicolon
DECL|member|mem
r_struct
id|mem
op_star
id|mem
suffix:semicolon
DECL|member|dma_addr
id|dma_addr_t
id|dma_addr
suffix:semicolon
DECL|member|cbs_dma_addr
id|dma_addr_t
id|cbs_dma_addr
suffix:semicolon
DECL|member|adaptive_ifs
id|u8
id|adaptive_ifs
suffix:semicolon
DECL|member|tx_threshold
id|u8
id|tx_threshold
suffix:semicolon
DECL|member|tx_frames
id|u32
id|tx_frames
suffix:semicolon
DECL|member|tx_collisions
id|u32
id|tx_collisions
suffix:semicolon
DECL|member|tx_deferred
id|u32
id|tx_deferred
suffix:semicolon
DECL|member|tx_single_collisions
id|u32
id|tx_single_collisions
suffix:semicolon
DECL|member|tx_multiple_collisions
id|u32
id|tx_multiple_collisions
suffix:semicolon
DECL|member|tx_fc_pause
id|u32
id|tx_fc_pause
suffix:semicolon
DECL|member|tx_tco_frames
id|u32
id|tx_tco_frames
suffix:semicolon
DECL|member|rx_fc_pause
id|u32
id|rx_fc_pause
suffix:semicolon
DECL|member|rx_fc_unsupported
id|u32
id|rx_fc_unsupported
suffix:semicolon
DECL|member|rx_tco_frames
id|u32
id|rx_tco_frames
suffix:semicolon
DECL|member|rx_over_length_errors
id|u32
id|rx_over_length_errors
suffix:semicolon
DECL|member|rev_id
id|u8
id|rev_id
suffix:semicolon
DECL|member|leds
id|u16
id|leds
suffix:semicolon
DECL|member|eeprom_wc
id|u16
id|eeprom_wc
suffix:semicolon
DECL|member|eeprom
id|u16
id|eeprom
(braket
l_int|256
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|function|e100_write_flush
r_static
r_inline
r_void
id|e100_write_flush
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
multiline_comment|/* Flush previous PCI writes through intermediate bridges&n;&t; * by doing a benign read */
(paren
r_void
)paren
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.status
)paren
suffix:semicolon
)brace
DECL|function|e100_enable_irq
r_static
r_inline
r_void
id|e100_enable_irq
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|irq_mask_none
comma
op_amp
id|nic-&gt;csr-&gt;scb.cmd_hi
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
DECL|function|e100_disable_irq
r_static
r_inline
r_void
id|e100_disable_irq
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|irq_mask_all
comma
op_amp
id|nic-&gt;csr-&gt;scb.cmd_hi
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
DECL|function|e100_hw_reset
r_static
r_void
id|e100_hw_reset
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
multiline_comment|/* Put CU and RU into idle with a selective reset to get&n;&t; * device off of PCI bus */
id|writel
c_func
(paren
id|selective_reset
comma
op_amp
id|nic-&gt;csr-&gt;port
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|20
)paren
suffix:semicolon
multiline_comment|/* Now fully reset device */
id|writel
c_func
(paren
id|software_reset
comma
op_amp
id|nic-&gt;csr-&gt;port
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|20
)paren
suffix:semicolon
multiline_comment|/* Mask off our interrupt line - it&squot;s unmasked after reset */
id|e100_disable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
DECL|function|e100_self_test
r_static
r_int
id|e100_self_test
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
id|u32
id|dma_addr
op_assign
id|nic-&gt;dma_addr
op_plus
m_offsetof
(paren
r_struct
id|mem
comma
id|selftest
)paren
suffix:semicolon
multiline_comment|/* Passing the self-test is a pretty good indication&n;&t; * that the device can DMA to/from host memory */
id|nic-&gt;mem-&gt;selftest.signature
op_assign
l_int|0
suffix:semicolon
id|nic-&gt;mem-&gt;selftest.result
op_assign
l_int|0xFFFFFFFF
suffix:semicolon
id|writel
c_func
(paren
id|selftest
op_or
id|dma_addr
comma
op_amp
id|nic-&gt;csr-&gt;port
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
multiline_comment|/* Wait 10 msec for self-test to complete */
id|msleep
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Interrupts are enabled after self-test */
id|e100_disable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
multiline_comment|/* Check results of self-test */
r_if
c_cond
(paren
id|nic-&gt;mem-&gt;selftest.result
op_ne
l_int|0
)paren
(brace
id|DPRINTK
c_func
(paren
id|HW
comma
id|ERR
comma
l_string|&quot;Self-test failed: result=0x%08X&bslash;n&quot;
comma
id|nic-&gt;mem-&gt;selftest.result
)paren
suffix:semicolon
r_return
op_minus
id|ETIMEDOUT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nic-&gt;mem-&gt;selftest.signature
op_eq
l_int|0
)paren
(brace
id|DPRINTK
c_func
(paren
id|HW
comma
id|ERR
comma
l_string|&quot;Self-test failed: timed out&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ETIMEDOUT
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_eeprom_write
r_static
r_void
id|e100_eeprom_write
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
id|u16
id|addr_len
comma
id|u16
id|addr
comma
id|u16
id|data
)paren
(brace
id|u32
id|cmd_addr_data
(braket
l_int|3
)braket
suffix:semicolon
id|u8
id|ctrl
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
multiline_comment|/* Three cmds: write/erase enable, write data, write/erase disable */
id|cmd_addr_data
(braket
l_int|0
)braket
op_assign
id|op_ewen
op_lshift
(paren
id|addr_len
op_minus
l_int|2
)paren
suffix:semicolon
id|cmd_addr_data
(braket
l_int|1
)braket
op_assign
(paren
(paren
(paren
id|op_write
op_lshift
id|addr_len
)paren
op_or
id|addr
)paren
op_lshift
l_int|16
)paren
op_or
id|cpu_to_le16
c_func
(paren
id|data
)paren
suffix:semicolon
id|cmd_addr_data
(braket
l_int|2
)braket
op_assign
id|op_ewds
op_lshift
(paren
id|addr_len
op_minus
l_int|2
)paren
suffix:semicolon
multiline_comment|/* Bit-bang cmds to write word to eeprom */
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|3
suffix:semicolon
id|j
op_increment
)paren
(brace
multiline_comment|/* Chip select */
id|writeb
c_func
(paren
id|eecs
op_or
id|eesk
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|31
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
id|ctrl
op_assign
(paren
id|cmd_addr_data
(braket
id|j
)braket
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
ques
c_cond
id|eecs
op_or
id|eedi
suffix:colon
id|eecs
suffix:semicolon
id|writeb
c_func
(paren
id|ctrl
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|ctrl
op_or
id|eesk
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
)brace
multiline_comment|/* Wait 10 msec for cmd to complete */
id|msleep
c_func
(paren
l_int|10
)paren
suffix:semicolon
multiline_comment|/* Chip deselect */
id|writeb
c_func
(paren
l_int|0
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
)brace
)brace
suffix:semicolon
multiline_comment|/* General technique stolen from the eepro100 driver - very clever */
DECL|function|e100_eeprom_read
r_static
id|u16
id|e100_eeprom_read
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
id|u16
op_star
id|addr_len
comma
id|u16
id|addr
)paren
(brace
id|u32
id|cmd_addr_data
suffix:semicolon
id|u16
id|data
op_assign
l_int|0
suffix:semicolon
id|u8
id|ctrl
suffix:semicolon
r_int
id|i
suffix:semicolon
id|cmd_addr_data
op_assign
(paren
(paren
id|op_read
op_lshift
op_star
id|addr_len
)paren
op_or
id|addr
)paren
op_lshift
l_int|16
suffix:semicolon
multiline_comment|/* Chip select */
id|writeb
c_func
(paren
id|eecs
op_or
id|eesk
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
multiline_comment|/* Bit-bang to read word from eeprom */
r_for
c_loop
(paren
id|i
op_assign
l_int|31
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
id|ctrl
op_assign
(paren
id|cmd_addr_data
op_amp
(paren
l_int|1
op_lshift
id|i
)paren
)paren
ques
c_cond
id|eecs
op_or
id|eedi
suffix:colon
id|eecs
suffix:semicolon
id|writeb
c_func
(paren
id|ctrl
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|ctrl
op_or
id|eesk
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
multiline_comment|/* Eeprom drives a dummy zero to EEDO after receiving&n;&t;&t; * complete address.  Use this to adjust addr_len. */
id|ctrl
op_assign
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ctrl
op_amp
id|eedo
)paren
op_logical_and
id|i
OG
l_int|16
)paren
(brace
op_star
id|addr_len
op_sub_assign
(paren
id|i
op_minus
l_int|16
)paren
suffix:semicolon
id|i
op_assign
l_int|17
suffix:semicolon
)brace
id|data
op_assign
(paren
id|data
op_lshift
l_int|1
)paren
op_or
(paren
id|ctrl
op_amp
id|eedo
ques
c_cond
l_int|1
suffix:colon
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* Chip deselect */
id|writeb
c_func
(paren
l_int|0
comma
op_amp
id|nic-&gt;csr-&gt;eeprom_ctrl_lo
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|4
)paren
suffix:semicolon
r_return
id|le16_to_cpu
c_func
(paren
id|data
)paren
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* Load entire EEPROM image into driver cache and validate checksum */
DECL|function|e100_eeprom_load
r_static
r_int
id|e100_eeprom_load
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
id|u16
id|addr
comma
id|addr_len
op_assign
l_int|8
comma
id|checksum
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Try reading with an 8-bit addr len to discover actual addr len */
id|e100_eeprom_read
c_func
(paren
id|nic
comma
op_amp
id|addr_len
comma
l_int|0
)paren
suffix:semicolon
id|nic-&gt;eeprom_wc
op_assign
l_int|1
op_lshift
id|addr_len
suffix:semicolon
r_for
c_loop
(paren
id|addr
op_assign
l_int|0
suffix:semicolon
id|addr
OL
id|nic-&gt;eeprom_wc
suffix:semicolon
id|addr
op_increment
)paren
(brace
id|nic-&gt;eeprom
(braket
id|addr
)braket
op_assign
id|e100_eeprom_read
c_func
(paren
id|nic
comma
op_amp
id|addr_len
comma
id|addr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|addr
OL
id|nic-&gt;eeprom_wc
op_minus
l_int|1
)paren
(brace
id|checksum
op_add_assign
id|cpu_to_le16
c_func
(paren
id|nic-&gt;eeprom
(braket
id|addr
)braket
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* The checksum, stored in the last word, is calculated such that&n;&t; * the sum of words should be 0xBABA */
id|checksum
op_assign
id|le16_to_cpu
c_func
(paren
l_int|0xBABA
op_minus
id|checksum
)paren
suffix:semicolon
r_if
c_cond
(paren
id|checksum
op_ne
id|nic-&gt;eeprom
(braket
id|nic-&gt;eeprom_wc
op_minus
l_int|1
)braket
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;EEPROM corrupted&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Save (portion of) driver EEPROM cache to device and update checksum */
DECL|function|e100_eeprom_save
r_static
r_int
id|e100_eeprom_save
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
id|u16
id|start
comma
id|u16
id|count
)paren
(brace
id|u16
id|addr
comma
id|addr_len
op_assign
l_int|8
comma
id|checksum
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Try reading with an 8-bit addr len to discover actual addr len */
id|e100_eeprom_read
c_func
(paren
id|nic
comma
op_amp
id|addr_len
comma
l_int|0
)paren
suffix:semicolon
id|nic-&gt;eeprom_wc
op_assign
l_int|1
op_lshift
id|addr_len
suffix:semicolon
r_if
c_cond
(paren
id|start
op_plus
id|count
op_ge
id|nic-&gt;eeprom_wc
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_for
c_loop
(paren
id|addr
op_assign
id|start
suffix:semicolon
id|addr
OL
id|start
op_plus
id|count
suffix:semicolon
id|addr
op_increment
)paren
(brace
id|e100_eeprom_write
c_func
(paren
id|nic
comma
id|addr_len
comma
id|addr
comma
id|nic-&gt;eeprom
(braket
id|addr
)braket
)paren
suffix:semicolon
)brace
multiline_comment|/* The checksum, stored in the last word, is calculated such that&n;&t; * the sum of words should be 0xBABA */
r_for
c_loop
(paren
id|addr
op_assign
l_int|0
suffix:semicolon
id|addr
OL
id|nic-&gt;eeprom_wc
op_minus
l_int|1
suffix:semicolon
id|addr
op_increment
)paren
(brace
id|checksum
op_add_assign
id|cpu_to_le16
c_func
(paren
id|nic-&gt;eeprom
(braket
id|addr
)braket
)paren
suffix:semicolon
)brace
id|nic-&gt;eeprom
(braket
id|nic-&gt;eeprom_wc
op_minus
l_int|1
)braket
op_assign
id|le16_to_cpu
c_func
(paren
l_int|0xBABA
op_minus
id|checksum
)paren
suffix:semicolon
id|e100_eeprom_write
c_func
(paren
id|nic
comma
id|addr_len
comma
id|nic-&gt;eeprom_wc
op_minus
l_int|1
comma
id|nic-&gt;eeprom
(braket
id|nic-&gt;eeprom_wc
op_minus
l_int|1
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|macro|E100_WAIT_SCB_TIMEOUT
mdefine_line|#define E100_WAIT_SCB_TIMEOUT 40
DECL|function|e100_exec_cmd
r_static
r_inline
r_int
id|e100_exec_cmd
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
id|u8
id|cmd
comma
id|dma_addr_t
id|dma_addr
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
multiline_comment|/* Previous command is accepted when SCB clears */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E100_WAIT_SCB_TIMEOUT
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|likely
c_func
(paren
op_logical_neg
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.cmd_lo
)paren
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
id|cpu_relax
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|i
OG
(paren
id|E100_WAIT_SCB_TIMEOUT
op_rshift
l_int|1
)paren
)paren
)paren
(brace
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|i
op_eq
id|E100_WAIT_SCB_TIMEOUT
)paren
)paren
(brace
id|err
op_assign
op_minus
id|EAGAIN
suffix:semicolon
r_goto
id|err_unlock
suffix:semicolon
)brace
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|cmd
op_ne
id|cuc_resume
)paren
)paren
(brace
id|writel
c_func
(paren
id|dma_addr
comma
op_amp
id|nic-&gt;csr-&gt;scb.gen_ptr
)paren
suffix:semicolon
)brace
id|writeb
c_func
(paren
id|cmd
comma
op_amp
id|nic-&gt;csr-&gt;scb.cmd_lo
)paren
suffix:semicolon
id|err_unlock
suffix:colon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|e100_exec_cb
r_static
r_inline
r_int
id|e100_exec_cb
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|sk_buff
op_star
id|skb
comma
r_void
(paren
op_star
id|cb_prepare
)paren
(paren
r_struct
id|nic
op_star
comma
r_struct
id|cb
op_star
comma
r_struct
id|sk_buff
op_star
)paren
)paren
(brace
r_struct
id|cb
op_star
id|cb
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|nic-&gt;cb_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|nic-&gt;cbs_avail
)paren
)paren
(brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|err_unlock
suffix:semicolon
)brace
id|cb
op_assign
id|nic-&gt;cb_to_use
suffix:semicolon
id|nic-&gt;cb_to_use
op_assign
id|cb-&gt;next
suffix:semicolon
id|nic-&gt;cbs_avail
op_decrement
suffix:semicolon
id|cb-&gt;skb
op_assign
id|skb
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|nic-&gt;cbs_avail
)paren
)paren
(brace
id|err
op_assign
op_minus
id|ENOSPC
suffix:semicolon
)brace
id|cb_prepare
c_func
(paren
id|nic
comma
id|cb
comma
id|skb
)paren
suffix:semicolon
multiline_comment|/* Order is important otherwise we&squot;ll be in a race with h/w:&n;&t; * set S-bit in current first, then clear S-bit in previous. */
id|cb-&gt;command
op_or_assign
id|cpu_to_le16
c_func
(paren
id|cb_s
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|cb-&gt;prev-&gt;command
op_and_assign
id|cpu_to_le16
c_func
(paren
op_complement
id|cb_s
)paren
suffix:semicolon
r_while
c_loop
(paren
id|nic-&gt;cb_to_send
op_ne
id|nic-&gt;cb_to_use
)paren
(brace
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|nic-&gt;cuc_cmd
comma
id|nic-&gt;cb_to_send-&gt;dma_addr
)paren
)paren
)paren
(brace
multiline_comment|/* Ok, here&squot;s where things get sticky.  It&squot;s&n;&t;&t;&t; * possible that we can&squot;t schedule the command&n;&t;&t;&t; * because the controller is too busy, so&n;&t;&t;&t; * let&squot;s just queue the command and try again&n;&t;&t;&t; * when another command is scheduled. */
r_break
suffix:semicolon
)brace
r_else
(brace
id|nic-&gt;cuc_cmd
op_assign
id|cuc_resume
suffix:semicolon
id|nic-&gt;cb_to_send
op_assign
id|nic-&gt;cb_to_send-&gt;next
suffix:semicolon
)brace
)brace
id|err_unlock
suffix:colon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|nic-&gt;cb_lock
comma
id|flags
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|mdio_ctrl
r_static
id|u16
id|mdio_ctrl
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
id|u32
id|addr
comma
id|u32
id|dir
comma
id|u32
id|reg
comma
id|u16
id|data
)paren
(brace
id|u32
id|data_out
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
id|writel
c_func
(paren
(paren
id|reg
op_lshift
l_int|16
)paren
op_or
(paren
id|addr
op_lshift
l_int|21
)paren
op_or
id|dir
op_or
id|data
comma
op_amp
id|nic-&gt;csr-&gt;mdi_ctrl
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|100
suffix:semicolon
id|i
op_increment
)paren
(brace
id|udelay
c_func
(paren
l_int|20
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|data_out
op_assign
id|readl
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;mdi_ctrl
)paren
)paren
op_amp
id|mdi_ready
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;%s:addr=%d, reg=%d, data_in=0x%04X, data_out=0x%04X&bslash;n&quot;
comma
id|dir
op_eq
id|mdi_read
ques
c_cond
l_string|&quot;READ&quot;
suffix:colon
l_string|&quot;WRITE&quot;
comma
id|addr
comma
id|reg
comma
id|data
comma
id|data_out
)paren
suffix:semicolon
r_return
(paren
id|u16
)paren
id|data_out
suffix:semicolon
)brace
DECL|function|mdio_read
r_static
r_int
id|mdio_read
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|addr
comma
r_int
id|reg
)paren
(brace
r_return
id|mdio_ctrl
c_func
(paren
id|netdev_priv
c_func
(paren
id|netdev
)paren
comma
id|addr
comma
id|mdi_read
comma
id|reg
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|mdio_write
r_static
r_void
id|mdio_write
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|addr
comma
r_int
id|reg
comma
r_int
id|data
)paren
(brace
id|mdio_ctrl
c_func
(paren
id|netdev_priv
c_func
(paren
id|netdev
)paren
comma
id|addr
comma
id|mdi_write
comma
id|reg
comma
id|data
)paren
suffix:semicolon
)brace
DECL|function|e100_get_defaults
r_static
r_void
id|e100_get_defaults
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|param_range
id|rfds
op_assign
(brace
dot
id|min
op_assign
l_int|64
comma
dot
id|max
op_assign
l_int|256
comma
dot
id|count
op_assign
l_int|64
)brace
suffix:semicolon
r_struct
id|param_range
id|cbs
op_assign
(brace
dot
id|min
op_assign
l_int|64
comma
dot
id|max
op_assign
l_int|256
comma
dot
id|count
op_assign
l_int|64
)brace
suffix:semicolon
id|pci_read_config_byte
c_func
(paren
id|nic-&gt;pdev
comma
id|PCI_REVISION_ID
comma
op_amp
id|nic-&gt;rev_id
)paren
suffix:semicolon
multiline_comment|/* MAC type is encoded as rev ID; exception: ICH is treated as 82559 */
id|nic-&gt;mac
op_assign
(paren
id|nic-&gt;flags
op_amp
id|ich
)paren
ques
c_cond
id|mac_82559_D101M
suffix:colon
id|nic-&gt;rev_id
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mac
op_eq
id|mac_unknown
)paren
(brace
id|nic-&gt;mac
op_assign
id|mac_82557_D100_A
suffix:semicolon
)brace
id|nic-&gt;params.rfds
op_assign
id|rfds
suffix:semicolon
id|nic-&gt;params.cbs
op_assign
id|cbs
suffix:semicolon
multiline_comment|/* Quadwords to DMA into FIFO before starting frame transmit */
id|nic-&gt;tx_threshold
op_assign
l_int|0xE0
suffix:semicolon
id|nic-&gt;tx_command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_tx
op_or
id|cb_i
op_or
id|cb_tx_sf
op_or
(paren
(paren
id|nic-&gt;mac
op_ge
id|mac_82558_D101_A4
)paren
ques
c_cond
id|cb_cid
suffix:colon
l_int|0
)paren
)paren
suffix:semicolon
multiline_comment|/* Template for a freshly allocated RFD */
id|nic-&gt;blank_rfd.command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_el
)paren
suffix:semicolon
id|nic-&gt;blank_rfd.rbd
op_assign
l_int|0xFFFFFFFF
suffix:semicolon
id|nic-&gt;blank_rfd.size
op_assign
id|cpu_to_le16
c_func
(paren
id|VLAN_ETH_FRAME_LEN
)paren
suffix:semicolon
multiline_comment|/* MII setup */
id|nic-&gt;mii.phy_id_mask
op_assign
l_int|0x1F
suffix:semicolon
id|nic-&gt;mii.reg_num_mask
op_assign
l_int|0x1F
suffix:semicolon
id|nic-&gt;mii.dev
op_assign
id|nic-&gt;netdev
suffix:semicolon
id|nic-&gt;mii.mdio_read
op_assign
id|mdio_read
suffix:semicolon
id|nic-&gt;mii.mdio_write
op_assign
id|mdio_write
suffix:semicolon
)brace
DECL|function|e100_configure
r_static
r_void
id|e100_configure
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_struct
id|config
op_star
id|config
op_assign
op_amp
id|cb-&gt;u.config
suffix:semicolon
id|u8
op_star
id|c
op_assign
(paren
id|u8
op_star
)paren
id|config
suffix:semicolon
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_config
)paren
suffix:semicolon
id|memset
c_func
(paren
id|config
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|config
)paren
)paren
suffix:semicolon
id|config-&gt;byte_count
op_assign
l_int|0x16
suffix:semicolon
multiline_comment|/* bytes in this struct */
id|config-&gt;rx_fifo_limit
op_assign
l_int|0x8
suffix:semicolon
multiline_comment|/* bytes in FIFO before DMA */
id|config-&gt;direct_rx_dma
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* reserved */
id|config-&gt;standard_tcb
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=standard, 0=extended */
id|config-&gt;standard_stat_counter
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=standard, 0=extended */
id|config-&gt;rx_discard_short_frames
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=discard, 0=pass */
id|config-&gt;tx_underrun_retry
op_assign
l_int|0x3
suffix:semicolon
multiline_comment|/* # of underrun retries */
id|config-&gt;mii_mode
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=MII mode, 0=503 mode */
id|config-&gt;pad10
op_assign
l_int|0x6
suffix:semicolon
id|config-&gt;no_source_addr_insertion
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=no, 0=yes */
id|config-&gt;preamble_length
op_assign
l_int|0x2
suffix:semicolon
multiline_comment|/* 0=1, 1=3, 2=7, 3=15 bytes */
id|config-&gt;ifs
op_assign
l_int|0x6
suffix:semicolon
multiline_comment|/* x16 = inter frame spacing */
id|config-&gt;ip_addr_hi
op_assign
l_int|0xF2
suffix:semicolon
multiline_comment|/* ARP IP filter - not used */
id|config-&gt;pad15_1
op_assign
l_int|0x1
suffix:semicolon
id|config-&gt;pad15_2
op_assign
l_int|0x1
suffix:semicolon
id|config-&gt;crs_or_cdt
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* 0=CRS only, 1=CRS or CDT */
id|config-&gt;fc_delay_hi
op_assign
l_int|0x40
suffix:semicolon
multiline_comment|/* time delay for fc frame */
id|config-&gt;tx_padding
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=pad short frames */
id|config-&gt;fc_priority_threshold
op_assign
l_int|0x7
suffix:semicolon
multiline_comment|/* 7=priority fc disabled */
id|config-&gt;pad18
op_assign
l_int|0x1
suffix:semicolon
id|config-&gt;full_duplex_pin
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=examine FDX# pin */
id|config-&gt;pad20_1
op_assign
l_int|0x1F
suffix:semicolon
id|config-&gt;fc_priority_location
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=byte#31, 0=byte#19 */
id|config-&gt;pad21_1
op_assign
l_int|0x5
suffix:semicolon
id|config-&gt;adaptive_ifs
op_assign
id|nic-&gt;adaptive_ifs
suffix:semicolon
id|config-&gt;loopback
op_assign
id|nic-&gt;loopback
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mii.force_media
op_logical_and
id|nic-&gt;mii.full_duplex
)paren
(brace
id|config-&gt;full_duplex_force
op_assign
l_int|0x1
suffix:semicolon
)brace
multiline_comment|/* 1=force, 0=auto */
r_if
c_cond
(paren
id|nic-&gt;flags
op_amp
id|promiscuous
op_logical_or
id|nic-&gt;loopback
)paren
(brace
id|config-&gt;rx_save_bad_frames
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=save, 0=discard */
id|config-&gt;rx_discard_short_frames
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* 1=discard, 0=save */
id|config-&gt;promiscuous_mode
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=on, 0=off */
)brace
r_if
c_cond
(paren
id|nic-&gt;flags
op_amp
id|multicast_all
)paren
(brace
id|config-&gt;multicast_all
op_assign
l_int|0x1
suffix:semicolon
)brace
multiline_comment|/* 1=accept, 0=no */
r_if
c_cond
(paren
op_logical_neg
(paren
id|nic-&gt;flags
op_amp
id|wol_magic
)paren
)paren
(brace
id|config-&gt;magic_packet_disable
op_assign
l_int|0x1
suffix:semicolon
)brace
multiline_comment|/* 1=off, 0=on */
r_if
c_cond
(paren
id|nic-&gt;mac
op_ge
id|mac_82558_D101_A4
)paren
(brace
id|config-&gt;fc_disable
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=Tx fc off, 0=Tx fc on */
id|config-&gt;mwi_enable
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=enable, 0=disable */
id|config-&gt;standard_tcb
op_assign
l_int|0x0
suffix:semicolon
multiline_comment|/* 1=standard, 0=extended */
id|config-&gt;rx_long_ok
op_assign
l_int|0x1
suffix:semicolon
multiline_comment|/* 1=VLANs ok, 0=standard */
r_if
c_cond
(paren
id|nic-&gt;mac
op_ge
id|mac_82559_D101M
)paren
(brace
id|config-&gt;tno_intr
op_assign
l_int|0x1
suffix:semicolon
)brace
multiline_comment|/* TCO stats enable */
r_else
id|config-&gt;standard_stat_counter
op_assign
l_int|0x0
suffix:semicolon
)brace
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;[00-07]=%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|c
(braket
l_int|0
)braket
comma
id|c
(braket
l_int|1
)braket
comma
id|c
(braket
l_int|2
)braket
comma
id|c
(braket
l_int|3
)braket
comma
id|c
(braket
l_int|4
)braket
comma
id|c
(braket
l_int|5
)braket
comma
id|c
(braket
l_int|6
)braket
comma
id|c
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;[08-15]=%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|c
(braket
l_int|8
)braket
comma
id|c
(braket
l_int|9
)braket
comma
id|c
(braket
l_int|10
)braket
comma
id|c
(braket
l_int|11
)braket
comma
id|c
(braket
l_int|12
)braket
comma
id|c
(braket
l_int|13
)braket
comma
id|c
(braket
l_int|14
)braket
comma
id|c
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;[16-23]=%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|c
(braket
l_int|16
)braket
comma
id|c
(braket
l_int|17
)braket
comma
id|c
(braket
l_int|18
)braket
comma
id|c
(braket
l_int|19
)braket
comma
id|c
(braket
l_int|20
)braket
comma
id|c
(braket
l_int|21
)braket
comma
id|c
(braket
l_int|22
)braket
comma
id|c
(braket
l_int|23
)braket
)paren
suffix:semicolon
)brace
DECL|function|e100_load_ucode
r_static
r_void
id|e100_load_ucode
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_int
id|i
suffix:semicolon
r_static
r_const
id|u32
id|ucode
(braket
id|UCODE_SIZE
)braket
op_assign
(brace
multiline_comment|/* NFS packets are misinterpreted as TCO packets and&n;&t;&t; * incorrectly routed to the BMC over SMBus.  This&n;&t;&t; * microcode patch checks the fragmented IP bit in the&n;&t;&t; * NFS/UDP header to distinguish between NFS and TCO. */
l_int|0x0EF70E36
comma
l_int|0x1FFF1FFF
comma
l_int|0x1FFF1FFF
comma
l_int|0x1FFF1FFF
comma
l_int|0x1FFF1FFF
comma
l_int|0x1FFF1FFF
comma
l_int|0x00906E41
comma
l_int|0x00800E3C
comma
l_int|0x00E00E39
comma
l_int|0x00000000
comma
l_int|0x00906EFD
comma
l_int|0x00900EFD
comma
l_int|0x00E00EF8
comma
)brace
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mac
op_eq
id|mac_82551_F
op_logical_or
id|nic-&gt;mac
op_eq
id|mac_82551_10
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|UCODE_SIZE
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cb-&gt;u.ucode
(braket
id|i
)braket
op_assign
id|cpu_to_le32
c_func
(paren
id|ucode
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_ucode
)paren
suffix:semicolon
)brace
r_else
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_nop
)paren
suffix:semicolon
)brace
DECL|function|e100_setup_iaaddr
r_static
r_void
id|e100_setup_iaaddr
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_iaaddr
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|cb-&gt;u.iaaddr
comma
id|nic-&gt;netdev-&gt;dev_addr
comma
id|ETH_ALEN
)paren
suffix:semicolon
)brace
DECL|function|e100_dump
r_static
r_void
id|e100_dump
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_dump
)paren
suffix:semicolon
id|cb-&gt;u.dump_buffer_addr
op_assign
id|cpu_to_le32
c_func
(paren
id|nic-&gt;dma_addr
op_plus
m_offsetof
(paren
r_struct
id|mem
comma
id|dump_buf
)paren
)paren
suffix:semicolon
)brace
DECL|macro|NCONFIG_AUTO_SWITCH
mdefine_line|#define NCONFIG_AUTO_SWITCH&t;0x0080
DECL|macro|MII_NSC_CONG
mdefine_line|#define MII_NSC_CONG&t;&t;MII_RESV1
DECL|macro|NSC_CONG_ENABLE
mdefine_line|#define NSC_CONG_ENABLE&t;&t;0x0100
DECL|macro|NSC_CONG_TXREADY
mdefine_line|#define NSC_CONG_TXREADY&t;0x0400
DECL|macro|ADVERTISE_FC_SUPPORTED
mdefine_line|#define ADVERTISE_FC_SUPPORTED&t;0x0400
DECL|function|e100_phy_init
r_static
r_int
id|e100_phy_init
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|nic-&gt;netdev
suffix:semicolon
id|u32
id|addr
suffix:semicolon
id|u16
id|bmcr
comma
id|stat
comma
id|id_lo
comma
id|id_hi
comma
id|cong
suffix:semicolon
multiline_comment|/* Discover phy addr by searching addrs in order {1,0,2,..., 31} */
r_for
c_loop
(paren
id|addr
op_assign
l_int|0
suffix:semicolon
id|addr
OL
l_int|32
suffix:semicolon
id|addr
op_increment
)paren
(brace
id|nic-&gt;mii.phy_id
op_assign
(paren
id|addr
op_eq
l_int|0
)paren
ques
c_cond
l_int|1
suffix:colon
(paren
id|addr
op_eq
l_int|1
)paren
ques
c_cond
l_int|0
suffix:colon
id|addr
suffix:semicolon
id|bmcr
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMCR
)paren
suffix:semicolon
id|stat
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMSR
)paren
suffix:semicolon
id|stat
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMSR
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|bmcr
op_eq
l_int|0xFFFF
)paren
op_logical_or
(paren
(paren
id|stat
op_eq
l_int|0
)paren
op_logical_and
(paren
id|bmcr
op_eq
l_int|0
)paren
)paren
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;phy_addr = %d&bslash;n&quot;
comma
id|nic-&gt;mii.phy_id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|addr
op_eq
l_int|32
)paren
(brace
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
multiline_comment|/* Selected the phy and isolate the rest */
r_for
c_loop
(paren
id|addr
op_assign
l_int|0
suffix:semicolon
id|addr
OL
l_int|32
suffix:semicolon
id|addr
op_increment
)paren
(brace
r_if
c_cond
(paren
id|addr
op_ne
id|nic-&gt;mii.phy_id
)paren
(brace
id|mdio_write
c_func
(paren
id|netdev
comma
id|addr
comma
id|MII_BMCR
comma
id|BMCR_ISOLATE
)paren
suffix:semicolon
)brace
r_else
(brace
id|bmcr
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|addr
comma
id|MII_BMCR
)paren
suffix:semicolon
id|mdio_write
c_func
(paren
id|netdev
comma
id|addr
comma
id|MII_BMCR
comma
id|bmcr
op_amp
op_complement
id|BMCR_ISOLATE
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Get phy ID */
id|id_lo
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_PHYSID1
)paren
suffix:semicolon
id|id_hi
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_PHYSID2
)paren
suffix:semicolon
id|nic-&gt;phy
op_assign
(paren
id|u32
)paren
id|id_hi
op_lshift
l_int|16
op_or
(paren
id|u32
)paren
id|id_lo
suffix:semicolon
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;phy ID = 0x%08X&bslash;n&quot;
comma
id|nic-&gt;phy
)paren
suffix:semicolon
multiline_comment|/* Handle National tx phys */
DECL|macro|NCS_PHY_MODEL_MASK
mdefine_line|#define NCS_PHY_MODEL_MASK&t;0xFFF0FFFF
r_if
c_cond
(paren
(paren
id|nic-&gt;phy
op_amp
id|NCS_PHY_MODEL_MASK
)paren
op_eq
id|phy_nsc_tx
)paren
(brace
multiline_comment|/* Disable congestion control */
id|cong
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_NSC_CONG
)paren
suffix:semicolon
id|cong
op_or_assign
id|NSC_CONG_TXREADY
suffix:semicolon
id|cong
op_and_assign
op_complement
id|NSC_CONG_ENABLE
suffix:semicolon
id|mdio_write
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_NSC_CONG
comma
id|cong
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|nic-&gt;mac
op_ge
id|mac_82550_D102
)paren
op_logical_or
(paren
(paren
id|nic-&gt;flags
op_amp
id|ich
)paren
op_logical_and
(paren
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_TPISTATUS
)paren
op_amp
l_int|0x8000
)paren
op_logical_and
(paren
id|nic-&gt;eeprom
(braket
id|eeprom_cnfg_mdix
)braket
op_amp
id|eeprom_mdix_enabled
)paren
)paren
)paren
(brace
multiline_comment|/* enable/disable MDI/MDI-X auto-switching */
id|mdio_write
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_NCONFIG
comma
id|nic-&gt;mii.force_media
ques
c_cond
l_int|0
suffix:colon
id|NCONFIG_AUTO_SWITCH
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_hw_init
r_static
r_int
id|e100_hw_init
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_int
id|err
suffix:semicolon
id|e100_hw_reset
c_func
(paren
id|nic
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|HW
comma
id|ERR
comma
l_string|&quot;e100_hw_init&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|in_interrupt
c_func
(paren
)paren
op_logical_and
(paren
id|err
op_assign
id|e100_self_test
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_phy_init
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|cuc_load_base
comma
l_int|0
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|ruc_load_base
comma
l_int|0
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_load_ucode
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_configure
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_setup_iaaddr
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|cuc_dump_addr
comma
id|nic-&gt;dma_addr
op_plus
m_offsetof
(paren
r_struct
id|mem
comma
id|stats
)paren
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|cuc_dump_reset
comma
l_int|0
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|e100_disable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_multi
r_static
r_void
id|e100_multi
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|nic-&gt;netdev
suffix:semicolon
r_struct
id|dev_mc_list
op_star
id|list
op_assign
id|netdev-&gt;mc_list
suffix:semicolon
id|u16
id|i
comma
id|count
op_assign
id|min
c_func
(paren
id|netdev-&gt;mc_count
comma
id|E100_MAX_MULTICAST_ADDRS
)paren
suffix:semicolon
id|cb-&gt;command
op_assign
id|cpu_to_le16
c_func
(paren
id|cb_multi
)paren
suffix:semicolon
id|cb-&gt;u.multi.count
op_assign
id|cpu_to_le16
c_func
(paren
id|count
op_star
id|ETH_ALEN
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|list
op_logical_and
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
comma
id|list
op_assign
id|list-&gt;next
)paren
(brace
id|memcpy
c_func
(paren
op_amp
id|cb-&gt;u.multi.addr
(braket
id|i
op_star
id|ETH_ALEN
)braket
comma
op_amp
id|list-&gt;dmi_addr
comma
id|ETH_ALEN
)paren
suffix:semicolon
)brace
)brace
DECL|function|e100_set_multicast_list
r_static
r_void
id|e100_set_multicast_list
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|HW
comma
id|DEBUG
comma
l_string|&quot;mc_count=%d, flags=0x%04X&bslash;n&quot;
comma
id|netdev-&gt;mc_count
comma
id|netdev-&gt;flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_PROMISC
)paren
(brace
id|nic-&gt;flags
op_or_assign
id|promiscuous
suffix:semicolon
)brace
r_else
id|nic-&gt;flags
op_and_assign
op_complement
id|promiscuous
suffix:semicolon
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_ALLMULTI
op_logical_or
id|netdev-&gt;mc_count
OG
id|E100_MAX_MULTICAST_ADDRS
)paren
(brace
id|nic-&gt;flags
op_or_assign
id|multicast_all
suffix:semicolon
)brace
r_else
id|nic-&gt;flags
op_and_assign
op_complement
id|multicast_all
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_configure
)paren
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_multi
)paren
suffix:semicolon
)brace
DECL|function|e100_update_stats
r_static
r_void
id|e100_update_stats
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|net_device_stats
op_star
id|ns
op_assign
op_amp
id|nic-&gt;net_stats
suffix:semicolon
r_struct
id|stats
op_star
id|s
op_assign
op_amp
id|nic-&gt;mem-&gt;stats
suffix:semicolon
id|u32
op_star
id|complete
op_assign
(paren
id|nic-&gt;mac
OL
id|mac_82558_D101_A4
)paren
ques
c_cond
op_amp
id|s-&gt;fc_xmt_pause
suffix:colon
(paren
id|nic-&gt;mac
OL
id|mac_82559_D101M
)paren
ques
c_cond
(paren
id|u32
op_star
)paren
op_amp
id|s-&gt;xmt_tco_frames
suffix:colon
op_amp
id|s-&gt;complete
suffix:semicolon
multiline_comment|/* Device&squot;s stats reporting may take several microseconds to&n;&t; * complete, so where always waiting for results of the&n;&t; * previous command. */
r_if
c_cond
(paren
op_star
id|complete
op_eq
id|le32_to_cpu
c_func
(paren
id|cuc_dump_reset_complete
)paren
)paren
(brace
op_star
id|complete
op_assign
l_int|0
suffix:semicolon
id|nic-&gt;tx_frames
op_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_good_frames
)paren
suffix:semicolon
id|nic-&gt;tx_collisions
op_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_total_collisions
)paren
suffix:semicolon
id|ns-&gt;tx_aborted_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_max_collisions
)paren
suffix:semicolon
id|ns-&gt;tx_window_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_late_collisions
)paren
suffix:semicolon
id|ns-&gt;tx_carrier_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_lost_crs
)paren
suffix:semicolon
id|ns-&gt;tx_fifo_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_underruns
)paren
suffix:semicolon
id|ns-&gt;collisions
op_add_assign
id|nic-&gt;tx_collisions
suffix:semicolon
id|ns-&gt;tx_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_max_collisions
)paren
op_plus
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_lost_crs
)paren
suffix:semicolon
id|ns-&gt;rx_dropped
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_resource_errors
)paren
suffix:semicolon
id|ns-&gt;rx_length_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_short_frame_errors
)paren
op_plus
id|nic-&gt;rx_over_length_errors
suffix:semicolon
id|ns-&gt;rx_crc_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_crc_errors
)paren
suffix:semicolon
id|ns-&gt;rx_frame_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_alignment_errors
)paren
suffix:semicolon
id|ns-&gt;rx_over_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_overrun_errors
)paren
suffix:semicolon
id|ns-&gt;rx_fifo_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_overrun_errors
)paren
suffix:semicolon
id|ns-&gt;rx_errors
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_crc_errors
)paren
op_plus
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_alignment_errors
)paren
op_plus
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_short_frame_errors
)paren
op_plus
id|le32_to_cpu
c_func
(paren
id|s-&gt;rx_cdt_errors
)paren
suffix:semicolon
id|nic-&gt;tx_deferred
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_deferred
)paren
suffix:semicolon
id|nic-&gt;tx_single_collisions
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_single_collisions
)paren
suffix:semicolon
id|nic-&gt;tx_multiple_collisions
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;tx_multiple_collisions
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mac
op_ge
id|mac_82558_D101_A4
)paren
(brace
id|nic-&gt;tx_fc_pause
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;fc_xmt_pause
)paren
suffix:semicolon
id|nic-&gt;rx_fc_pause
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;fc_rcv_pause
)paren
suffix:semicolon
id|nic-&gt;rx_fc_unsupported
op_add_assign
id|le32_to_cpu
c_func
(paren
id|s-&gt;fc_rcv_unsupported
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mac
op_ge
id|mac_82559_D101M
)paren
(brace
id|nic-&gt;tx_tco_frames
op_add_assign
id|le16_to_cpu
c_func
(paren
id|s-&gt;xmt_tco_frames
)paren
suffix:semicolon
id|nic-&gt;rx_tco_frames
op_add_assign
id|le16_to_cpu
c_func
(paren
id|s-&gt;rcv_tco_frames
)paren
suffix:semicolon
)brace
)brace
)brace
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|cuc_dump_reset
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|e100_adjust_adaptive_ifs
r_static
r_void
id|e100_adjust_adaptive_ifs
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_int
id|speed
comma
r_int
id|duplex
)paren
(brace
multiline_comment|/* Adjust inter-frame-spacing (IFS) between two transmits if&n;&t; * we&squot;re getting collisions on a half-duplex connection. */
r_if
c_cond
(paren
id|duplex
op_eq
id|DUPLEX_HALF
)paren
(brace
id|u32
id|prev
op_assign
id|nic-&gt;adaptive_ifs
suffix:semicolon
id|u32
id|min_frames
op_assign
(paren
id|speed
op_eq
id|SPEED_100
)paren
ques
c_cond
l_int|1000
suffix:colon
l_int|100
suffix:semicolon
r_if
c_cond
(paren
(paren
id|nic-&gt;tx_frames
op_div
l_int|32
OL
id|nic-&gt;tx_collisions
)paren
op_logical_and
(paren
id|nic-&gt;tx_frames
OG
id|min_frames
)paren
)paren
(brace
r_if
c_cond
(paren
id|nic-&gt;adaptive_ifs
OL
l_int|60
)paren
(brace
id|nic-&gt;adaptive_ifs
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|nic-&gt;tx_frames
OL
id|min_frames
)paren
(brace
r_if
c_cond
(paren
id|nic-&gt;adaptive_ifs
op_ge
l_int|5
)paren
(brace
id|nic-&gt;adaptive_ifs
op_sub_assign
l_int|5
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|nic-&gt;adaptive_ifs
op_ne
id|prev
)paren
(brace
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_configure
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|e100_watchdog
r_static
r_void
id|e100_watchdog
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
(paren
r_struct
id|nic
op_star
)paren
id|data
suffix:semicolon
r_struct
id|ethtool_cmd
id|cmd
suffix:semicolon
id|DPRINTK
c_func
(paren
id|TIMER
comma
id|DEBUG
comma
l_string|&quot;right now = %ld&bslash;n&quot;
comma
id|jiffies
)paren
suffix:semicolon
multiline_comment|/* mii library handles link maintenance tasks */
id|mii_ethtool_gset
c_func
(paren
op_amp
id|nic-&gt;mii
comma
op_amp
id|cmd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mii_link_ok
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
op_logical_and
op_logical_neg
id|netif_carrier_ok
c_func
(paren
id|nic-&gt;netdev
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|LINK
comma
id|INFO
comma
l_string|&quot;link up, %sMbps, %s-duplex&bslash;n&quot;
comma
id|cmd.speed
op_eq
id|SPEED_100
ques
c_cond
l_string|&quot;100&quot;
suffix:colon
l_string|&quot;10&quot;
comma
id|cmd.duplex
op_eq
id|DUPLEX_FULL
ques
c_cond
l_string|&quot;full&quot;
suffix:colon
l_string|&quot;half&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|mii_link_ok
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
op_logical_and
id|netif_carrier_ok
c_func
(paren
id|nic-&gt;netdev
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|LINK
comma
id|INFO
comma
l_string|&quot;link down&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|mii_check_link
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
suffix:semicolon
multiline_comment|/* Software generated interrupt to recover from (rare) Rx&n;&t;* allocation failure.&n;&t;* Unfortunately have to use a spinlock to not re-enable interrupts&n;&t;* accidentally, due to hardware that shares a register between the&n;&t;* interrupt mask bit and the SW Interrupt generation bit */
id|spin_lock_irq
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.cmd_hi
)paren
op_or
id|irq_sw_gen
comma
op_amp
id|nic-&gt;csr-&gt;scb.cmd_hi
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
)paren
suffix:semicolon
id|e100_write_flush
c_func
(paren
id|nic
)paren
suffix:semicolon
id|e100_update_stats
c_func
(paren
id|nic
)paren
suffix:semicolon
id|e100_adjust_adaptive_ifs
c_func
(paren
id|nic
comma
id|cmd.speed
comma
id|cmd.duplex
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;mac
op_le
id|mac_82557_D100_C
)paren
(brace
multiline_comment|/* Issue a multicast command to workaround a 557 lock up */
id|e100_set_multicast_list
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nic-&gt;flags
op_amp
id|ich
op_logical_and
id|cmd.speed
op_eq
id|SPEED_10
op_logical_and
id|cmd.duplex
op_eq
id|DUPLEX_HALF
)paren
(brace
multiline_comment|/* Need SW workaround for ICH[x] 10Mbps/half duplex Tx hang. */
id|nic-&gt;flags
op_or_assign
id|ich_10h_workaround
suffix:semicolon
)brace
r_else
id|nic-&gt;flags
op_and_assign
op_complement
id|ich_10h_workaround
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|nic-&gt;watchdog
comma
id|jiffies
op_plus
id|E100_WATCHDOG_PERIOD
)paren
suffix:semicolon
)brace
DECL|function|e100_xmit_prepare
r_static
r_inline
r_void
id|e100_xmit_prepare
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|cb
op_star
id|cb
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
id|cb-&gt;command
op_assign
id|nic-&gt;tx_command
suffix:semicolon
id|cb-&gt;u.tcb.tbd_array
op_assign
id|cb-&gt;dma_addr
op_plus
m_offsetof
(paren
r_struct
id|cb
comma
id|u.tcb.tbd
)paren
suffix:semicolon
id|cb-&gt;u.tcb.tcb_byte_count
op_assign
l_int|0
suffix:semicolon
id|cb-&gt;u.tcb.threshold
op_assign
id|nic-&gt;tx_threshold
suffix:semicolon
id|cb-&gt;u.tcb.tbd_count
op_assign
l_int|1
suffix:semicolon
id|cb-&gt;u.tcb.tbd.buf_addr
op_assign
id|cpu_to_le32
c_func
(paren
id|pci_map_single
c_func
(paren
id|nic-&gt;pdev
comma
id|skb-&gt;data
comma
id|skb-&gt;len
comma
id|PCI_DMA_TODEVICE
)paren
)paren
suffix:semicolon
id|cb-&gt;u.tcb.tbd.size
op_assign
id|cpu_to_le16
c_func
(paren
id|skb-&gt;len
)paren
suffix:semicolon
)brace
DECL|function|e100_xmit_frame
r_static
r_int
id|e100_xmit_frame
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;flags
op_amp
id|ich_10h_workaround
)paren
(brace
multiline_comment|/* SW workaround for ICH[x] 10Mbps/half duplex Tx hang.&n;&t;&t;   Issue a NOP command followed by a 1us delay before&n;&t;&t;   issuing the Tx command. */
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|cuc_nop
comma
l_int|0
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|err
op_assign
id|e100_exec_cb
c_func
(paren
id|nic
comma
id|skb
comma
id|e100_xmit_prepare
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|err
)paren
(brace
r_case
op_minus
id|ENOSPC
suffix:colon
multiline_comment|/* We queued the skb, but now we&squot;re out of space. */
id|DPRINTK
c_func
(paren
id|TX_ERR
comma
id|DEBUG
comma
l_string|&quot;No space for CB&bslash;n&quot;
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
op_minus
id|ENOMEM
suffix:colon
multiline_comment|/* This is a hard error - log it. */
id|DPRINTK
c_func
(paren
id|TX_ERR
comma
id|DEBUG
comma
l_string|&quot;Out of Tx resources, returning skb&bslash;n&quot;
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|netdev-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_tx_clean
r_static
r_inline
r_int
id|e100_tx_clean
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|cb
op_star
id|cb
suffix:semicolon
r_int
id|tx_cleaned
op_assign
l_int|0
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|nic-&gt;cb_lock
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|TX_DONE
comma
id|DEBUG
comma
l_string|&quot;cb-&gt;status = 0x%04X&bslash;n&quot;
comma
id|nic-&gt;cb_to_clean-&gt;status
)paren
suffix:semicolon
multiline_comment|/* Clean CBs marked complete */
r_for
c_loop
(paren
id|cb
op_assign
id|nic-&gt;cb_to_clean
suffix:semicolon
id|cb-&gt;status
op_amp
id|cpu_to_le16
c_func
(paren
id|cb_complete
)paren
suffix:semicolon
id|cb
op_assign
id|nic-&gt;cb_to_clean
op_assign
id|cb-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|likely
c_func
(paren
id|cb-&gt;skb
op_ne
l_int|NULL
)paren
)paren
(brace
id|nic-&gt;net_stats.tx_packets
op_increment
suffix:semicolon
id|nic-&gt;net_stats.tx_bytes
op_add_assign
id|cb-&gt;skb-&gt;len
suffix:semicolon
id|pci_unmap_single
c_func
(paren
id|nic-&gt;pdev
comma
id|le32_to_cpu
c_func
(paren
id|cb-&gt;u.tcb.tbd.buf_addr
)paren
comma
id|le16_to_cpu
c_func
(paren
id|cb-&gt;u.tcb.tbd.size
)paren
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|dev_kfree_skb_any
c_func
(paren
id|cb-&gt;skb
)paren
suffix:semicolon
id|cb-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
id|tx_cleaned
op_assign
l_int|1
suffix:semicolon
)brace
id|cb-&gt;status
op_assign
l_int|0
suffix:semicolon
id|nic-&gt;cbs_avail
op_increment
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|nic-&gt;cb_lock
)paren
suffix:semicolon
multiline_comment|/* Recover from running out of Tx resources in xmit_frame */
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|tx_cleaned
op_logical_and
id|netif_queue_stopped
c_func
(paren
id|nic-&gt;netdev
)paren
)paren
)paren
(brace
id|netif_wake_queue
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
)brace
r_return
id|tx_cleaned
suffix:semicolon
)brace
DECL|function|e100_clean_cbs
r_static
r_void
id|e100_clean_cbs
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_if
c_cond
(paren
id|nic-&gt;cbs
)paren
(brace
r_while
c_loop
(paren
id|nic-&gt;cbs_avail
op_ne
id|nic-&gt;params.cbs.count
)paren
(brace
r_struct
id|cb
op_star
id|cb
op_assign
id|nic-&gt;cb_to_clean
suffix:semicolon
r_if
c_cond
(paren
id|cb-&gt;skb
)paren
(brace
id|pci_unmap_single
c_func
(paren
id|nic-&gt;pdev
comma
id|le32_to_cpu
c_func
(paren
id|cb-&gt;u.tcb.tbd.buf_addr
)paren
comma
id|le16_to_cpu
c_func
(paren
id|cb-&gt;u.tcb.tbd.size
)paren
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|cb-&gt;skb
)paren
suffix:semicolon
)brace
id|nic-&gt;cb_to_clean
op_assign
id|nic-&gt;cb_to_clean-&gt;next
suffix:semicolon
id|nic-&gt;cbs_avail
op_increment
suffix:semicolon
)brace
id|pci_free_consistent
c_func
(paren
id|nic-&gt;pdev
comma
r_sizeof
(paren
r_struct
id|cb
)paren
op_star
id|nic-&gt;params.cbs.count
comma
id|nic-&gt;cbs
comma
id|nic-&gt;cbs_dma_addr
)paren
suffix:semicolon
id|nic-&gt;cbs
op_assign
l_int|NULL
suffix:semicolon
id|nic-&gt;cbs_avail
op_assign
l_int|0
suffix:semicolon
)brace
id|nic-&gt;cuc_cmd
op_assign
id|cuc_start
suffix:semicolon
id|nic-&gt;cb_to_use
op_assign
id|nic-&gt;cb_to_send
op_assign
id|nic-&gt;cb_to_clean
op_assign
id|nic-&gt;cbs
suffix:semicolon
)brace
DECL|function|e100_alloc_cbs
r_static
r_int
id|e100_alloc_cbs
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|cb
op_star
id|cb
suffix:semicolon
r_int
r_int
id|i
comma
id|count
op_assign
id|nic-&gt;params.cbs.count
suffix:semicolon
id|nic-&gt;cuc_cmd
op_assign
id|cuc_start
suffix:semicolon
id|nic-&gt;cb_to_use
op_assign
id|nic-&gt;cb_to_send
op_assign
id|nic-&gt;cb_to_clean
op_assign
l_int|NULL
suffix:semicolon
id|nic-&gt;cbs_avail
op_assign
l_int|0
suffix:semicolon
id|nic-&gt;cbs
op_assign
id|pci_alloc_consistent
c_func
(paren
id|nic-&gt;pdev
comma
r_sizeof
(paren
r_struct
id|cb
)paren
op_star
id|count
comma
op_amp
id|nic-&gt;cbs_dma_addr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|nic-&gt;cbs
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
r_for
c_loop
(paren
id|cb
op_assign
id|nic-&gt;cbs
comma
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|cb
op_increment
comma
id|i
op_increment
)paren
(brace
id|cb-&gt;next
op_assign
(paren
id|i
op_plus
l_int|1
OL
id|count
)paren
ques
c_cond
id|cb
op_plus
l_int|1
suffix:colon
id|nic-&gt;cbs
suffix:semicolon
id|cb-&gt;prev
op_assign
(paren
id|i
op_eq
l_int|0
)paren
ques
c_cond
id|nic-&gt;cbs
op_plus
id|count
op_minus
l_int|1
suffix:colon
id|cb
op_minus
l_int|1
suffix:semicolon
id|cb-&gt;dma_addr
op_assign
id|nic-&gt;cbs_dma_addr
op_plus
id|i
op_star
r_sizeof
(paren
r_struct
id|cb
)paren
suffix:semicolon
id|cb-&gt;link
op_assign
id|cpu_to_le32
c_func
(paren
id|nic-&gt;cbs_dma_addr
op_plus
(paren
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|count
)paren
op_star
r_sizeof
(paren
r_struct
id|cb
)paren
)paren
suffix:semicolon
id|cb-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
)brace
id|nic-&gt;cb_to_use
op_assign
id|nic-&gt;cb_to_send
op_assign
id|nic-&gt;cb_to_clean
op_assign
id|nic-&gt;cbs
suffix:semicolon
id|nic-&gt;cbs_avail
op_assign
id|count
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_start_receiver
r_static
r_inline
r_void
id|e100_start_receiver
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
multiline_comment|/* (Re)start RU if suspended or idle and RFA is non-NULL */
r_if
c_cond
(paren
op_logical_neg
id|nic-&gt;ru_running
op_logical_and
id|nic-&gt;rx_to_clean-&gt;skb
)paren
(brace
id|e100_exec_cmd
c_func
(paren
id|nic
comma
id|ruc_start
comma
id|nic-&gt;rx_to_clean-&gt;dma_addr
)paren
suffix:semicolon
id|nic-&gt;ru_running
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|macro|RFD_BUF_LEN
mdefine_line|#define RFD_BUF_LEN (sizeof(struct rfd) + VLAN_ETH_FRAME_LEN)
DECL|function|e100_rx_alloc_skb
r_static
r_inline
r_int
id|e100_rx_alloc_skb
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|rx
op_star
id|rx
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|rx-&gt;skb
op_assign
id|dev_alloc_skb
c_func
(paren
id|RFD_BUF_LEN
op_plus
id|NET_IP_ALIGN
)paren
)paren
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
multiline_comment|/* Align, init, and map the RFD. */
id|rx-&gt;skb-&gt;dev
op_assign
id|nic-&gt;netdev
suffix:semicolon
id|skb_reserve
c_func
(paren
id|rx-&gt;skb
comma
id|NET_IP_ALIGN
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|rx-&gt;skb-&gt;data
comma
op_amp
id|nic-&gt;blank_rfd
comma
r_sizeof
(paren
r_struct
id|rfd
)paren
)paren
suffix:semicolon
id|rx-&gt;dma_addr
op_assign
id|pci_map_single
c_func
(paren
id|nic-&gt;pdev
comma
id|rx-&gt;skb-&gt;data
comma
id|RFD_BUF_LEN
comma
id|PCI_DMA_BIDIRECTIONAL
)paren
suffix:semicolon
multiline_comment|/* Link the RFD to end of RFA by linking previous RFD to&n;&t; * this one, and clearing EL bit of previous.  */
r_if
c_cond
(paren
id|rx-&gt;prev-&gt;skb
)paren
(brace
r_struct
id|rfd
op_star
id|prev_rfd
op_assign
(paren
r_struct
id|rfd
op_star
)paren
id|rx-&gt;prev-&gt;skb-&gt;data
suffix:semicolon
id|put_unaligned
c_func
(paren
id|cpu_to_le32
c_func
(paren
id|rx-&gt;dma_addr
)paren
comma
(paren
id|u32
op_star
)paren
op_amp
id|prev_rfd-&gt;link
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|prev_rfd-&gt;command
op_and_assign
op_complement
id|cpu_to_le16
c_func
(paren
id|cb_el
)paren
suffix:semicolon
id|pci_dma_sync_single_for_device
c_func
(paren
id|nic-&gt;pdev
comma
id|rx-&gt;prev-&gt;dma_addr
comma
r_sizeof
(paren
r_struct
id|rfd
)paren
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_rx_indicate
r_static
r_inline
r_int
id|e100_rx_indicate
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_struct
id|rx
op_star
id|rx
comma
r_int
r_int
op_star
id|work_done
comma
r_int
r_int
id|work_to_do
)paren
(brace
r_struct
id|sk_buff
op_star
id|skb
op_assign
id|rx-&gt;skb
suffix:semicolon
r_struct
id|rfd
op_star
id|rfd
op_assign
(paren
r_struct
id|rfd
op_star
)paren
id|skb-&gt;data
suffix:semicolon
id|u16
id|rfd_status
comma
id|actual_size
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|work_done
op_logical_and
op_star
id|work_done
op_ge
id|work_to_do
)paren
)paren
(brace
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
multiline_comment|/* Need to sync before taking a peek at cb_complete bit */
id|pci_dma_sync_single_for_cpu
c_func
(paren
id|nic-&gt;pdev
comma
id|rx-&gt;dma_addr
comma
r_sizeof
(paren
r_struct
id|rfd
)paren
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|rfd_status
op_assign
id|le16_to_cpu
c_func
(paren
id|rfd-&gt;status
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|RX_STATUS
comma
id|DEBUG
comma
l_string|&quot;status=0x%04X&bslash;n&quot;
comma
id|rfd_status
)paren
suffix:semicolon
multiline_comment|/* If data isn&squot;t ready, nothing to indicate */
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
(paren
id|rfd_status
op_amp
id|cb_complete
)paren
)paren
)paren
(brace
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
multiline_comment|/* Get actual data size */
id|actual_size
op_assign
id|le16_to_cpu
c_func
(paren
id|rfd-&gt;actual_size
)paren
op_amp
l_int|0x3FFF
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|actual_size
OG
id|RFD_BUF_LEN
op_minus
r_sizeof
(paren
r_struct
id|rfd
)paren
)paren
)paren
(brace
id|actual_size
op_assign
id|RFD_BUF_LEN
op_minus
r_sizeof
(paren
r_struct
id|rfd
)paren
suffix:semicolon
)brace
multiline_comment|/* Get data */
id|pci_unmap_single
c_func
(paren
id|nic-&gt;pdev
comma
id|rx-&gt;dma_addr
comma
id|RFD_BUF_LEN
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
multiline_comment|/* Pull off the RFD and put the actual data (minus eth hdr) */
id|skb_reserve
c_func
(paren
id|skb
comma
r_sizeof
(paren
r_struct
id|rfd
)paren
)paren
suffix:semicolon
id|skb_put
c_func
(paren
id|skb
comma
id|actual_size
)paren
suffix:semicolon
id|skb-&gt;protocol
op_assign
id|eth_type_trans
c_func
(paren
id|skb
comma
id|nic-&gt;netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
(paren
id|rfd_status
op_amp
id|cb_ok
)paren
)paren
)paren
(brace
multiline_comment|/* Don&squot;t indicate if hardware indicates errors */
id|nic-&gt;net_stats.rx_dropped
op_increment
suffix:semicolon
id|dev_kfree_skb_any
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|actual_size
OG
id|nic-&gt;netdev-&gt;mtu
op_plus
id|VLAN_ETH_HLEN
)paren
(brace
multiline_comment|/* Don&squot;t indicate oversized frames */
id|nic-&gt;rx_over_length_errors
op_increment
suffix:semicolon
id|nic-&gt;net_stats.rx_dropped
op_increment
suffix:semicolon
id|dev_kfree_skb_any
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
r_else
(brace
id|nic-&gt;net_stats.rx_packets
op_increment
suffix:semicolon
id|nic-&gt;net_stats.rx_bytes
op_add_assign
id|actual_size
suffix:semicolon
id|nic-&gt;netdev-&gt;last_rx
op_assign
id|jiffies
suffix:semicolon
id|netif_receive_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work_done
)paren
(brace
(paren
op_star
id|work_done
)paren
op_increment
suffix:semicolon
)brace
)brace
id|rx-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_rx_clean
r_static
r_inline
r_void
id|e100_rx_clean
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_int
r_int
op_star
id|work_done
comma
r_int
r_int
id|work_to_do
)paren
(brace
r_struct
id|rx
op_star
id|rx
suffix:semicolon
multiline_comment|/* Indicate newly arrived packets */
r_for
c_loop
(paren
id|rx
op_assign
id|nic-&gt;rx_to_clean
suffix:semicolon
id|rx-&gt;skb
suffix:semicolon
id|rx
op_assign
id|nic-&gt;rx_to_clean
op_assign
id|rx-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|e100_rx_indicate
c_func
(paren
id|nic
comma
id|rx
comma
id|work_done
comma
id|work_to_do
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
multiline_comment|/* No more to clean */
)brace
multiline_comment|/* Alloc new skbs to refill list */
r_for
c_loop
(paren
id|rx
op_assign
id|nic-&gt;rx_to_use
suffix:semicolon
op_logical_neg
id|rx-&gt;skb
suffix:semicolon
id|rx
op_assign
id|nic-&gt;rx_to_use
op_assign
id|rx-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|e100_rx_alloc_skb
c_func
(paren
id|nic
comma
id|rx
)paren
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
multiline_comment|/* Better luck next time (see watchdog) */
)brace
id|e100_start_receiver
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
DECL|function|e100_rx_clean_list
r_static
r_void
id|e100_rx_clean_list
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|rx
op_star
id|rx
suffix:semicolon
r_int
r_int
id|i
comma
id|count
op_assign
id|nic-&gt;params.rfds.count
suffix:semicolon
r_if
c_cond
(paren
id|nic-&gt;rxs
)paren
(brace
r_for
c_loop
(paren
id|rx
op_assign
id|nic-&gt;rxs
comma
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|rx
op_increment
comma
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|rx-&gt;skb
)paren
(brace
id|pci_unmap_single
c_func
(paren
id|nic-&gt;pdev
comma
id|rx-&gt;dma_addr
comma
id|RFD_BUF_LEN
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|rx-&gt;skb
)paren
suffix:semicolon
)brace
)brace
id|kfree
c_func
(paren
id|nic-&gt;rxs
)paren
suffix:semicolon
id|nic-&gt;rxs
op_assign
l_int|NULL
suffix:semicolon
)brace
id|nic-&gt;rx_to_use
op_assign
id|nic-&gt;rx_to_clean
op_assign
l_int|NULL
suffix:semicolon
id|nic-&gt;ru_running
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|e100_rx_alloc_list
r_static
r_int
id|e100_rx_alloc_list
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_struct
id|rx
op_star
id|rx
suffix:semicolon
r_int
r_int
id|i
comma
id|count
op_assign
id|nic-&gt;params.rfds.count
suffix:semicolon
id|nic-&gt;rx_to_use
op_assign
id|nic-&gt;rx_to_clean
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|nic-&gt;rxs
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|rx
)paren
op_star
id|count
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|nic-&gt;rxs
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|rx
)paren
op_star
id|count
)paren
suffix:semicolon
r_for
c_loop
(paren
id|rx
op_assign
id|nic-&gt;rxs
comma
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|rx
op_increment
comma
id|i
op_increment
)paren
(brace
id|rx-&gt;next
op_assign
(paren
id|i
op_plus
l_int|1
OL
id|count
)paren
ques
c_cond
id|rx
op_plus
l_int|1
suffix:colon
id|nic-&gt;rxs
suffix:semicolon
id|rx-&gt;prev
op_assign
(paren
id|i
op_eq
l_int|0
)paren
ques
c_cond
id|nic-&gt;rxs
op_plus
id|count
op_minus
l_int|1
suffix:colon
id|rx
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|e100_rx_alloc_skb
c_func
(paren
id|nic
comma
id|rx
)paren
)paren
(brace
id|e100_rx_clean_list
c_func
(paren
id|nic
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
)brace
id|nic-&gt;rx_to_use
op_assign
id|nic-&gt;rx_to_clean
op_assign
id|nic-&gt;rxs
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_intr
r_static
id|irqreturn_t
id|e100_intr
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|dev_id
suffix:semicolon
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|u8
id|stat_ack
op_assign
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.stat_ack
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|INTR
comma
id|DEBUG
comma
l_string|&quot;stat_ack = 0x%02X&bslash;n&quot;
comma
id|stat_ack
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat_ack
op_eq
id|stat_ack_not_ours
op_logical_or
multiline_comment|/* Not our interrupt */
id|stat_ack
op_eq
id|stat_ack_not_present
)paren
(brace
multiline_comment|/* Hardware is ejected */
r_return
id|IRQ_NONE
suffix:semicolon
)brace
multiline_comment|/* Ack interrupt(s) */
id|writeb
c_func
(paren
id|stat_ack
comma
op_amp
id|nic-&gt;csr-&gt;scb.stat_ack
)paren
suffix:semicolon
multiline_comment|/* We hit Receive No Resource (RNR); restart RU after cleaning */
r_if
c_cond
(paren
id|stat_ack
op_amp
id|stat_ack_rnr
)paren
(brace
id|nic-&gt;ru_running
op_assign
l_int|0
suffix:semicolon
)brace
id|e100_disable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
id|netif_rx_schedule
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
DECL|function|e100_poll
r_static
r_int
id|e100_poll
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
op_star
id|budget
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
r_int
id|work_to_do
op_assign
id|min
c_func
(paren
id|netdev-&gt;quota
comma
op_star
id|budget
)paren
suffix:semicolon
r_int
r_int
id|work_done
op_assign
l_int|0
suffix:semicolon
r_int
id|tx_cleaned
suffix:semicolon
id|e100_rx_clean
c_func
(paren
id|nic
comma
op_amp
id|work_done
comma
id|work_to_do
)paren
suffix:semicolon
id|tx_cleaned
op_assign
id|e100_tx_clean
c_func
(paren
id|nic
)paren
suffix:semicolon
multiline_comment|/* If no Rx and Tx cleanup work was done, exit polling mode. */
r_if
c_cond
(paren
(paren
op_logical_neg
id|tx_cleaned
op_logical_and
(paren
id|work_done
op_eq
l_int|0
)paren
)paren
op_logical_or
op_logical_neg
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|netif_rx_complete
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e100_enable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
op_star
id|budget
op_sub_assign
id|work_done
suffix:semicolon
id|netdev-&gt;quota
op_sub_assign
id|work_done
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_NET_POLL_CONTROLLER
DECL|function|e100_netpoll
r_static
r_void
id|e100_netpoll
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e100_disable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
id|e100_intr
c_func
(paren
id|nic-&gt;pdev-&gt;irq
comma
id|netdev
comma
l_int|NULL
)paren
suffix:semicolon
id|e100_enable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|e100_get_stats
r_static
r_struct
id|net_device_stats
op_star
id|e100_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
op_amp
id|nic-&gt;net_stats
suffix:semicolon
)brace
DECL|function|e100_set_mac_address
r_static
r_int
id|e100_set_mac_address
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_void
op_star
id|p
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_struct
id|sockaddr
op_star
id|addr
op_assign
id|p
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|is_valid_ether_addr
c_func
(paren
id|addr-&gt;sa_data
)paren
)paren
r_return
op_minus
id|EADDRNOTAVAIL
suffix:semicolon
id|memcpy
c_func
(paren
id|netdev-&gt;dev_addr
comma
id|addr-&gt;sa_data
comma
id|netdev-&gt;addr_len
)paren
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_setup_iaaddr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_change_mtu
r_static
r_int
id|e100_change_mtu
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|new_mtu
)paren
(brace
r_if
c_cond
(paren
id|new_mtu
template_param
id|ETH_DATA_LEN
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|netdev-&gt;mtu
op_assign
id|new_mtu
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_asf
r_static
r_int
id|e100_asf
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
multiline_comment|/* ASF can be enabled from eeprom */
r_return
(paren
id|nic-&gt;pdev-&gt;device
op_ge
l_int|0x1050
)paren
op_logical_and
(paren
id|nic-&gt;pdev-&gt;device
op_le
l_int|0x1057
)paren
op_logical_and
(paren
id|nic-&gt;eeprom
(braket
id|eeprom_config_asf
)braket
op_amp
id|eeprom_asf
)paren
op_logical_and
op_logical_neg
(paren
id|nic-&gt;eeprom
(braket
id|eeprom_config_asf
)braket
op_amp
id|eeprom_gcl
)paren
op_logical_and
(paren
(paren
id|nic-&gt;eeprom
(braket
id|eeprom_smbus_addr
)braket
op_amp
l_int|0xFF
)paren
op_ne
l_int|0xFE
)paren
suffix:semicolon
)brace
DECL|function|e100_up
r_static
r_int
id|e100_up
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_rx_alloc_list
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_alloc_cbs
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_goto
id|err_rx_clean_list
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_hw_init
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_goto
id|err_clean_cbs
suffix:semicolon
)brace
id|e100_set_multicast_list
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
id|e100_start_receiver
c_func
(paren
id|nic
)paren
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|nic-&gt;watchdog
comma
id|jiffies
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|request_irq
c_func
(paren
id|nic-&gt;pdev-&gt;irq
comma
id|e100_intr
comma
id|SA_SHIRQ
comma
id|nic-&gt;netdev-&gt;name
comma
id|nic-&gt;netdev
)paren
)paren
)paren
(brace
r_goto
id|err_no_irq
suffix:semicolon
)brace
id|e100_enable_irq
c_func
(paren
id|nic
)paren
suffix:semicolon
id|netif_wake_queue
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_no_irq
suffix:colon
id|del_timer_sync
c_func
(paren
op_amp
id|nic-&gt;watchdog
)paren
suffix:semicolon
id|err_clean_cbs
suffix:colon
id|e100_clean_cbs
c_func
(paren
id|nic
)paren
suffix:semicolon
id|err_rx_clean_list
suffix:colon
id|e100_rx_clean_list
c_func
(paren
id|nic
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|e100_down
r_static
r_void
id|e100_down
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
id|e100_hw_reset
c_func
(paren
id|nic
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|nic-&gt;pdev-&gt;irq
comma
id|nic-&gt;netdev
)paren
suffix:semicolon
id|del_timer_sync
c_func
(paren
op_amp
id|nic-&gt;watchdog
)paren
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|nic-&gt;netdev
)paren
suffix:semicolon
id|e100_clean_cbs
c_func
(paren
id|nic
)paren
suffix:semicolon
id|e100_rx_clean_list
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
DECL|function|e100_tx_timeout
r_static
r_void
id|e100_tx_timeout
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|TX_ERR
comma
id|DEBUG
comma
l_string|&quot;scb.status=0x%02X&bslash;n&quot;
comma
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.status
)paren
)paren
suffix:semicolon
id|e100_down
c_func
(paren
id|netdev_priv
c_func
(paren
id|netdev
)paren
)paren
suffix:semicolon
id|e100_up
c_func
(paren
id|netdev_priv
c_func
(paren
id|netdev
)paren
)paren
suffix:semicolon
)brace
DECL|function|e100_loopback_test
r_static
r_int
id|e100_loopback_test
c_func
(paren
r_struct
id|nic
op_star
id|nic
comma
r_enum
id|loopback
id|loopback_mode
)paren
(brace
r_int
id|err
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
multiline_comment|/* Use driver resources to perform internal MAC or PHY&n;&t; * loopback test.  A single packet is prepared and transmitted&n;&t; * in loopback mode, and the test passes if the received&n;&t; * packet compares byte-for-byte to the transmitted packet. */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_rx_alloc_list
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_alloc_cbs
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_goto
id|err_clean_rx
suffix:semicolon
)brace
multiline_comment|/* ICH PHY loopback is broken so do MAC loopback instead */
r_if
c_cond
(paren
id|nic-&gt;flags
op_amp
id|ich
op_logical_and
id|loopback_mode
op_eq
id|lb_phy
)paren
(brace
id|loopback_mode
op_assign
id|lb_mac
suffix:semicolon
)brace
id|nic-&gt;loopback
op_assign
id|loopback_mode
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_hw_init
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_goto
id|err_loopback_none
suffix:semicolon
)brace
r_if
c_cond
(paren
id|loopback_mode
op_eq
id|lb_phy
)paren
(brace
id|mdio_write
c_func
(paren
id|nic-&gt;netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMCR
comma
id|BMCR_LOOPBACK
)paren
suffix:semicolon
)brace
id|e100_start_receiver
c_func
(paren
id|nic
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|skb
op_assign
id|dev_alloc_skb
c_func
(paren
id|ETH_DATA_LEN
)paren
)paren
)paren
(brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|err_loopback_none
suffix:semicolon
)brace
id|skb_put
c_func
(paren
id|skb
comma
id|ETH_DATA_LEN
)paren
suffix:semicolon
id|memset
c_func
(paren
id|skb-&gt;data
comma
l_int|0xFF
comma
id|ETH_DATA_LEN
)paren
suffix:semicolon
id|e100_xmit_frame
c_func
(paren
id|skb
comma
id|nic-&gt;netdev
)paren
suffix:semicolon
id|msleep
c_func
(paren
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|memcmp
c_func
(paren
id|nic-&gt;rx_to_clean-&gt;skb-&gt;data
op_plus
r_sizeof
(paren
r_struct
id|rfd
)paren
comma
id|skb-&gt;data
comma
id|ETH_DATA_LEN
)paren
)paren
(brace
id|err
op_assign
op_minus
id|EAGAIN
suffix:semicolon
)brace
id|err_loopback_none
suffix:colon
id|mdio_write
c_func
(paren
id|nic-&gt;netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMCR
comma
l_int|0
)paren
suffix:semicolon
id|nic-&gt;loopback
op_assign
id|lb_none
suffix:semicolon
id|e100_hw_init
c_func
(paren
id|nic
)paren
suffix:semicolon
id|e100_clean_cbs
c_func
(paren
id|nic
)paren
suffix:semicolon
id|err_clean_rx
suffix:colon
id|e100_rx_clean_list
c_func
(paren
id|nic
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|macro|MII_LED_CONTROL
mdefine_line|#define MII_LED_CONTROL&t;0x1B
DECL|function|e100_blink_led
r_static
r_void
id|e100_blink_led
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
(paren
r_struct
id|nic
op_star
)paren
id|data
suffix:semicolon
r_enum
id|led_state
(brace
id|led_on
op_assign
l_int|0x01
comma
id|led_off
op_assign
l_int|0x04
comma
id|led_on_559
op_assign
l_int|0x05
comma
id|led_on_557
op_assign
l_int|0x07
comma
)brace
suffix:semicolon
id|nic-&gt;leds
op_assign
(paren
id|nic-&gt;leds
op_amp
id|led_on
)paren
ques
c_cond
id|led_off
suffix:colon
(paren
id|nic-&gt;mac
OL
id|mac_82559_D101M
)paren
ques
c_cond
id|led_on_557
suffix:colon
id|led_on_559
suffix:semicolon
id|mdio_write
c_func
(paren
id|nic-&gt;netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_LED_CONTROL
comma
id|nic-&gt;leds
)paren
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|nic-&gt;blink_timer
comma
id|jiffies
op_plus
id|HZ
op_div
l_int|4
)paren
suffix:semicolon
)brace
DECL|function|e100_get_settings
r_static
r_int
id|e100_get_settings
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_cmd
op_star
id|cmd
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|mii_ethtool_gset
c_func
(paren
op_amp
id|nic-&gt;mii
comma
id|cmd
)paren
suffix:semicolon
)brace
DECL|function|e100_set_settings
r_static
r_int
id|e100_set_settings
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_cmd
op_star
id|cmd
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
id|err
suffix:semicolon
id|mdio_write
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_BMCR
comma
id|BMCR_RESET
)paren
suffix:semicolon
id|err
op_assign
id|mii_ethtool_sset
c_func
(paren
op_amp
id|nic-&gt;mii
comma
id|cmd
)paren
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_configure
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|e100_get_drvinfo
r_static
r_void
id|e100_get_drvinfo
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_drvinfo
op_star
id|info
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|info-&gt;driver
comma
id|DRV_NAME
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|info-&gt;version
comma
id|DRV_VERSION
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|info-&gt;fw_version
comma
l_string|&quot;N/A&quot;
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|info-&gt;bus_info
comma
id|pci_name
c_func
(paren
id|nic-&gt;pdev
)paren
)paren
suffix:semicolon
)brace
DECL|function|e100_get_regs_len
r_static
r_int
id|e100_get_regs_len
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
DECL|macro|E100_PHY_REGS
mdefine_line|#define E100_PHY_REGS&t;&t;0x1C
DECL|macro|E100_REGS_LEN
mdefine_line|#define E100_REGS_LEN&t;&t;1 + E100_PHY_REGS + &bslash;&n;&t;sizeof(nic-&gt;mem-&gt;dump_buf) / sizeof(u32)
r_return
id|E100_REGS_LEN
op_star
r_sizeof
(paren
id|u32
)paren
suffix:semicolon
)brace
DECL|function|e100_get_regs
r_static
r_void
id|e100_get_regs
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_regs
op_star
id|regs
comma
r_void
op_star
id|p
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|u32
op_star
id|buff
op_assign
id|p
suffix:semicolon
r_int
id|i
suffix:semicolon
id|regs-&gt;version
op_assign
(paren
l_int|1
op_lshift
l_int|24
)paren
op_or
id|nic-&gt;rev_id
suffix:semicolon
id|buff
(braket
l_int|0
)braket
op_assign
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.cmd_hi
)paren
op_lshift
l_int|24
op_or
id|readb
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.cmd_lo
)paren
op_lshift
l_int|16
op_or
id|readw
c_func
(paren
op_amp
id|nic-&gt;csr-&gt;scb.status
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|E100_PHY_REGS
suffix:semicolon
id|i
op_ge
l_int|0
suffix:semicolon
id|i
op_decrement
)paren
(brace
id|buff
(braket
l_int|1
op_plus
id|E100_PHY_REGS
op_minus
id|i
)braket
op_assign
id|mdio_read
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|i
)paren
suffix:semicolon
)brace
id|memset
c_func
(paren
id|nic-&gt;mem-&gt;dump_buf
comma
l_int|0
comma
r_sizeof
(paren
id|nic-&gt;mem-&gt;dump_buf
)paren
)paren
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_dump
)paren
suffix:semicolon
id|msleep
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|buff
(braket
l_int|2
op_plus
id|E100_PHY_REGS
)braket
comma
id|nic-&gt;mem-&gt;dump_buf
comma
r_sizeof
(paren
id|nic-&gt;mem-&gt;dump_buf
)paren
)paren
suffix:semicolon
)brace
DECL|function|e100_get_wol
r_static
r_void
id|e100_get_wol
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_wolinfo
op_star
id|wol
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|wol-&gt;supported
op_assign
(paren
id|nic-&gt;mac
op_ge
id|mac_82558_D101_A4
)paren
ques
c_cond
id|WAKE_MAGIC
suffix:colon
l_int|0
suffix:semicolon
id|wol-&gt;wolopts
op_assign
(paren
id|nic-&gt;flags
op_amp
id|wol_magic
)paren
ques
c_cond
id|WAKE_MAGIC
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|e100_set_wol
r_static
r_int
id|e100_set_wol
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_wolinfo
op_star
id|wol
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|wol-&gt;wolopts
op_ne
id|WAKE_MAGIC
op_logical_and
id|wol-&gt;wolopts
op_ne
l_int|0
)paren
(brace
r_return
op_minus
id|EOPNOTSUPP
suffix:semicolon
)brace
r_if
c_cond
(paren
id|wol-&gt;wolopts
)paren
(brace
id|nic-&gt;flags
op_or_assign
id|wol_magic
suffix:semicolon
)brace
r_else
id|nic-&gt;flags
op_and_assign
op_complement
id|wol_magic
suffix:semicolon
id|pci_enable_wake
c_func
(paren
id|nic-&gt;pdev
comma
l_int|0
comma
id|nic-&gt;flags
op_amp
(paren
id|wol_magic
op_or
id|e100_asf
c_func
(paren
id|nic
)paren
)paren
)paren
suffix:semicolon
id|e100_exec_cb
c_func
(paren
id|nic
comma
l_int|NULL
comma
id|e100_configure
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_get_msglevel
r_static
id|u32
id|e100_get_msglevel
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|nic-&gt;msg_enable
suffix:semicolon
)brace
DECL|function|e100_set_msglevel
r_static
r_void
id|e100_set_msglevel
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
id|u32
id|value
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|nic-&gt;msg_enable
op_assign
id|value
suffix:semicolon
)brace
DECL|function|e100_nway_reset
r_static
r_int
id|e100_nway_reset
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|mii_nway_restart
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
suffix:semicolon
)brace
DECL|function|e100_get_link
r_static
id|u32
id|e100_get_link
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|mii_link_ok
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
suffix:semicolon
)brace
DECL|function|e100_get_eeprom_len
r_static
r_int
id|e100_get_eeprom_len
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|nic-&gt;eeprom_wc
op_lshift
l_int|1
suffix:semicolon
)brace
DECL|macro|E100_EEPROM_MAGIC
mdefine_line|#define E100_EEPROM_MAGIC&t;0x1234
DECL|function|e100_get_eeprom
r_static
r_int
id|e100_get_eeprom
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_eeprom
op_star
id|eeprom
comma
id|u8
op_star
id|bytes
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|eeprom-&gt;magic
op_assign
id|E100_EEPROM_MAGIC
suffix:semicolon
id|memcpy
c_func
(paren
id|bytes
comma
op_amp
(paren
(paren
id|u8
op_star
)paren
id|nic-&gt;eeprom
)paren
(braket
id|eeprom-&gt;offset
)braket
comma
id|eeprom-&gt;len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_set_eeprom
r_static
r_int
id|e100_set_eeprom
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_eeprom
op_star
id|eeprom
comma
id|u8
op_star
id|bytes
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|eeprom-&gt;magic
op_ne
id|E100_EEPROM_MAGIC
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|memcpy
c_func
(paren
op_amp
(paren
(paren
id|u8
op_star
)paren
id|nic-&gt;eeprom
)paren
(braket
id|eeprom-&gt;offset
)braket
comma
id|bytes
comma
id|eeprom-&gt;len
)paren
suffix:semicolon
r_return
id|e100_eeprom_save
c_func
(paren
id|nic
comma
id|eeprom-&gt;offset
op_rshift
l_int|1
comma
(paren
id|eeprom-&gt;len
op_rshift
l_int|1
)paren
op_plus
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|e100_get_ringparam
r_static
r_void
id|e100_get_ringparam
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_ringparam
op_star
id|ring
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_struct
id|param_range
op_star
id|rfds
op_assign
op_amp
id|nic-&gt;params.rfds
suffix:semicolon
r_struct
id|param_range
op_star
id|cbs
op_assign
op_amp
id|nic-&gt;params.cbs
suffix:semicolon
id|ring-&gt;rx_max_pending
op_assign
id|rfds-&gt;max
suffix:semicolon
id|ring-&gt;tx_max_pending
op_assign
id|cbs-&gt;max
suffix:semicolon
id|ring-&gt;rx_mini_max_pending
op_assign
l_int|0
suffix:semicolon
id|ring-&gt;rx_jumbo_max_pending
op_assign
l_int|0
suffix:semicolon
id|ring-&gt;rx_pending
op_assign
id|rfds-&gt;count
suffix:semicolon
id|ring-&gt;tx_pending
op_assign
id|cbs-&gt;count
suffix:semicolon
id|ring-&gt;rx_mini_pending
op_assign
l_int|0
suffix:semicolon
id|ring-&gt;rx_jumbo_pending
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|e100_set_ringparam
r_static
r_int
id|e100_set_ringparam
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_ringparam
op_star
id|ring
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_struct
id|param_range
op_star
id|rfds
op_assign
op_amp
id|nic-&gt;params.rfds
suffix:semicolon
r_struct
id|param_range
op_star
id|cbs
op_assign
op_amp
id|nic-&gt;params.cbs
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ring-&gt;rx_mini_pending
)paren
op_logical_or
(paren
id|ring-&gt;rx_jumbo_pending
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_down
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
id|rfds-&gt;count
op_assign
id|max
c_func
(paren
id|ring-&gt;rx_pending
comma
id|rfds-&gt;min
)paren
suffix:semicolon
id|rfds-&gt;count
op_assign
id|min
c_func
(paren
id|rfds-&gt;count
comma
id|rfds-&gt;max
)paren
suffix:semicolon
id|cbs-&gt;count
op_assign
id|max
c_func
(paren
id|ring-&gt;tx_pending
comma
id|cbs-&gt;min
)paren
suffix:semicolon
id|cbs-&gt;count
op_assign
id|min
c_func
(paren
id|cbs-&gt;count
comma
id|cbs-&gt;max
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
id|DRV
comma
id|INFO
comma
l_string|&quot;Ring Param settings: rx: %d, tx %d&bslash;n&quot;
comma
id|rfds-&gt;count
comma
id|cbs-&gt;count
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_up
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|e100_gstrings_test
r_static
r_const
r_char
id|e100_gstrings_test
(braket
)braket
(braket
id|ETH_GSTRING_LEN
)braket
op_assign
(brace
l_string|&quot;Link test     (on/offline)&quot;
comma
l_string|&quot;Eeprom test   (on/offline)&quot;
comma
l_string|&quot;Self test        (offline)&quot;
comma
l_string|&quot;Mac loopback     (offline)&quot;
comma
l_string|&quot;Phy loopback     (offline)&quot;
comma
)brace
suffix:semicolon
DECL|macro|E100_TEST_LEN
mdefine_line|#define E100_TEST_LEN&t;sizeof(e100_gstrings_test) / ETH_GSTRING_LEN
DECL|function|e100_diag_test_count
r_static
r_int
id|e100_diag_test_count
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_return
id|E100_TEST_LEN
suffix:semicolon
)brace
DECL|function|e100_diag_test
r_static
r_void
id|e100_diag_test
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_test
op_star
id|test
comma
id|u64
op_star
id|data
)paren
(brace
r_struct
id|ethtool_cmd
id|cmd
suffix:semicolon
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
id|i
comma
id|err
suffix:semicolon
id|memset
c_func
(paren
id|data
comma
l_int|0
comma
id|E100_TEST_LEN
op_star
r_sizeof
(paren
id|u64
)paren
)paren
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
op_logical_neg
id|mii_link_ok
c_func
(paren
op_amp
id|nic-&gt;mii
)paren
suffix:semicolon
id|data
(braket
l_int|1
)braket
op_assign
id|e100_eeprom_load
c_func
(paren
id|nic
)paren
suffix:semicolon
r_if
c_cond
(paren
id|test-&gt;flags
op_amp
id|ETH_TEST_FL_OFFLINE
)paren
(brace
multiline_comment|/* save speed, duplex &amp; autoneg settings */
id|err
op_assign
id|mii_ethtool_gset
c_func
(paren
op_amp
id|nic-&gt;mii
comma
op_amp
id|cmd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_down
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
id|data
(braket
l_int|2
)braket
op_assign
id|e100_self_test
c_func
(paren
id|nic
)paren
suffix:semicolon
id|data
(braket
l_int|3
)braket
op_assign
id|e100_loopback_test
c_func
(paren
id|nic
comma
id|lb_mac
)paren
suffix:semicolon
id|data
(braket
l_int|4
)braket
op_assign
id|e100_loopback_test
c_func
(paren
id|nic
comma
id|lb_phy
)paren
suffix:semicolon
multiline_comment|/* restore speed, duplex &amp; autoneg settings */
id|err
op_assign
id|mii_ethtool_sset
c_func
(paren
op_amp
id|nic-&gt;mii
comma
op_amp
id|cmd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_up
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E100_TEST_LEN
suffix:semicolon
id|i
op_increment
)paren
(brace
id|test-&gt;flags
op_or_assign
id|data
(braket
id|i
)braket
ques
c_cond
id|ETH_TEST_FL_FAILED
suffix:colon
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|e100_phys_id
r_static
r_int
id|e100_phys_id
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
id|u32
id|data
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|data
op_logical_or
id|data
OG
(paren
id|u32
)paren
(paren
id|MAX_SCHEDULE_TIMEOUT
op_div
id|HZ
)paren
)paren
(brace
id|data
op_assign
(paren
id|u32
)paren
(paren
id|MAX_SCHEDULE_TIMEOUT
op_div
id|HZ
)paren
suffix:semicolon
)brace
id|mod_timer
c_func
(paren
op_amp
id|nic-&gt;blink_timer
comma
id|jiffies
)paren
suffix:semicolon
id|msleep_interruptible
c_func
(paren
id|data
op_star
l_int|1000
)paren
suffix:semicolon
id|del_timer_sync
c_func
(paren
op_amp
id|nic-&gt;blink_timer
)paren
suffix:semicolon
id|mdio_write
c_func
(paren
id|netdev
comma
id|nic-&gt;mii.phy_id
comma
id|MII_LED_CONTROL
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|e100_gstrings_stats
r_static
r_const
r_char
id|e100_gstrings_stats
(braket
)braket
(braket
id|ETH_GSTRING_LEN
)braket
op_assign
(brace
l_string|&quot;rx_packets&quot;
comma
l_string|&quot;tx_packets&quot;
comma
l_string|&quot;rx_bytes&quot;
comma
l_string|&quot;tx_bytes&quot;
comma
l_string|&quot;rx_errors&quot;
comma
l_string|&quot;tx_errors&quot;
comma
l_string|&quot;rx_dropped&quot;
comma
l_string|&quot;tx_dropped&quot;
comma
l_string|&quot;multicast&quot;
comma
l_string|&quot;collisions&quot;
comma
l_string|&quot;rx_length_errors&quot;
comma
l_string|&quot;rx_over_errors&quot;
comma
l_string|&quot;rx_crc_errors&quot;
comma
l_string|&quot;rx_frame_errors&quot;
comma
l_string|&quot;rx_fifo_errors&quot;
comma
l_string|&quot;rx_missed_errors&quot;
comma
l_string|&quot;tx_aborted_errors&quot;
comma
l_string|&quot;tx_carrier_errors&quot;
comma
l_string|&quot;tx_fifo_errors&quot;
comma
l_string|&quot;tx_heartbeat_errors&quot;
comma
l_string|&quot;tx_window_errors&quot;
comma
multiline_comment|/* device-specific stats */
l_string|&quot;tx_deferred&quot;
comma
l_string|&quot;tx_single_collisions&quot;
comma
l_string|&quot;tx_multi_collisions&quot;
comma
l_string|&quot;tx_flow_control_pause&quot;
comma
l_string|&quot;rx_flow_control_pause&quot;
comma
l_string|&quot;rx_flow_control_unsupported&quot;
comma
l_string|&quot;tx_tco_packets&quot;
comma
l_string|&quot;rx_tco_packets&quot;
comma
)brace
suffix:semicolon
DECL|macro|E100_NET_STATS_LEN
mdefine_line|#define E100_NET_STATS_LEN&t;21
DECL|macro|E100_STATS_LEN
mdefine_line|#define E100_STATS_LEN&t;sizeof(e100_gstrings_stats) / ETH_GSTRING_LEN
DECL|function|e100_get_stats_count
r_static
r_int
id|e100_get_stats_count
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_return
id|E100_STATS_LEN
suffix:semicolon
)brace
DECL|function|e100_get_ethtool_stats
r_static
r_void
id|e100_get_ethtool_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ethtool_stats
op_star
id|stats
comma
id|u64
op_star
id|data
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E100_NET_STATS_LEN
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
(braket
id|i
)braket
op_assign
(paren
(paren
r_int
r_int
op_star
)paren
op_amp
id|nic-&gt;net_stats
)paren
(braket
id|i
)braket
suffix:semicolon
)brace
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;tx_deferred
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;tx_single_collisions
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;tx_multiple_collisions
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;tx_fc_pause
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;rx_fc_pause
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;rx_fc_unsupported
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;tx_tco_frames
suffix:semicolon
id|data
(braket
id|i
op_increment
)braket
op_assign
id|nic-&gt;rx_tco_frames
suffix:semicolon
)brace
DECL|function|e100_get_strings
r_static
r_void
id|e100_get_strings
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
id|u32
id|stringset
comma
id|u8
op_star
id|data
)paren
(brace
r_switch
c_cond
(paren
id|stringset
)paren
(brace
r_case
id|ETH_SS_TEST
suffix:colon
id|memcpy
c_func
(paren
id|data
comma
op_star
id|e100_gstrings_test
comma
r_sizeof
(paren
id|e100_gstrings_test
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ETH_SS_STATS
suffix:colon
id|memcpy
c_func
(paren
id|data
comma
op_star
id|e100_gstrings_stats
comma
r_sizeof
(paren
id|e100_gstrings_stats
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|variable|e100_ethtool_ops
r_static
r_struct
id|ethtool_ops
id|e100_ethtool_ops
op_assign
(brace
dot
id|get_settings
op_assign
id|e100_get_settings
comma
dot
id|set_settings
op_assign
id|e100_set_settings
comma
dot
id|get_drvinfo
op_assign
id|e100_get_drvinfo
comma
dot
id|get_regs_len
op_assign
id|e100_get_regs_len
comma
dot
id|get_regs
op_assign
id|e100_get_regs
comma
dot
id|get_wol
op_assign
id|e100_get_wol
comma
dot
id|set_wol
op_assign
id|e100_set_wol
comma
dot
id|get_msglevel
op_assign
id|e100_get_msglevel
comma
dot
id|set_msglevel
op_assign
id|e100_set_msglevel
comma
dot
id|nway_reset
op_assign
id|e100_nway_reset
comma
dot
id|get_link
op_assign
id|e100_get_link
comma
dot
id|get_eeprom_len
op_assign
id|e100_get_eeprom_len
comma
dot
id|get_eeprom
op_assign
id|e100_get_eeprom
comma
dot
id|set_eeprom
op_assign
id|e100_set_eeprom
comma
dot
id|get_ringparam
op_assign
id|e100_get_ringparam
comma
dot
id|set_ringparam
op_assign
id|e100_set_ringparam
comma
dot
id|self_test_count
op_assign
id|e100_diag_test_count
comma
dot
id|self_test
op_assign
id|e100_diag_test
comma
dot
id|get_strings
op_assign
id|e100_get_strings
comma
dot
id|phys_id
op_assign
id|e100_phys_id
comma
dot
id|get_stats_count
op_assign
id|e100_get_stats_count
comma
dot
id|get_ethtool_stats
op_assign
id|e100_get_ethtool_stats
comma
)brace
suffix:semicolon
DECL|function|e100_do_ioctl
r_static
r_int
id|e100_do_ioctl
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ifreq
op_star
id|ifr
comma
r_int
id|cmd
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|generic_mii_ioctl
c_func
(paren
op_amp
id|nic-&gt;mii
comma
id|if_mii
c_func
(paren
id|ifr
)paren
comma
id|cmd
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|function|e100_alloc
r_static
r_int
id|e100_alloc
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
id|nic-&gt;mem
op_assign
id|pci_alloc_consistent
c_func
(paren
id|nic-&gt;pdev
comma
r_sizeof
(paren
r_struct
id|mem
)paren
comma
op_amp
id|nic-&gt;dma_addr
)paren
suffix:semicolon
r_return
id|nic-&gt;mem
ques
c_cond
l_int|0
suffix:colon
op_minus
id|ENOMEM
suffix:semicolon
)brace
DECL|function|e100_free
r_static
r_void
id|e100_free
c_func
(paren
r_struct
id|nic
op_star
id|nic
)paren
(brace
r_if
c_cond
(paren
id|nic-&gt;mem
)paren
(brace
id|pci_free_consistent
c_func
(paren
id|nic-&gt;pdev
comma
r_sizeof
(paren
r_struct
id|mem
)paren
comma
id|nic-&gt;mem
comma
id|nic-&gt;dma_addr
)paren
suffix:semicolon
id|nic-&gt;mem
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|e100_open
r_static
r_int
id|e100_open
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_int
id|err
op_assign
l_int|0
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_up
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|IFUP
comma
id|ERR
comma
l_string|&quot;Cannot open interface, aborting.&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_return
id|err
suffix:semicolon
)brace
DECL|function|e100_close
r_static
r_int
id|e100_close
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
id|e100_down
c_func
(paren
id|netdev_priv
c_func
(paren
id|netdev
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_probe
r_static
r_int
id|__devinit
id|e100_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|ent
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
suffix:semicolon
r_struct
id|nic
op_star
id|nic
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|netdev
op_assign
id|alloc_etherdev
c_func
(paren
r_sizeof
(paren
r_struct
id|nic
)paren
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
l_int|1
op_lshift
id|debug
)paren
op_minus
l_int|1
)paren
op_amp
id|NETIF_MSG_PROBE
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
id|PFX
l_string|&quot;Etherdev alloc failed, abort.&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|netdev-&gt;open
op_assign
id|e100_open
suffix:semicolon
id|netdev-&gt;stop
op_assign
id|e100_close
suffix:semicolon
id|netdev-&gt;hard_start_xmit
op_assign
id|e100_xmit_frame
suffix:semicolon
id|netdev-&gt;get_stats
op_assign
id|e100_get_stats
suffix:semicolon
id|netdev-&gt;set_multicast_list
op_assign
id|e100_set_multicast_list
suffix:semicolon
id|netdev-&gt;set_mac_address
op_assign
id|e100_set_mac_address
suffix:semicolon
id|netdev-&gt;change_mtu
op_assign
id|e100_change_mtu
suffix:semicolon
id|netdev-&gt;do_ioctl
op_assign
id|e100_do_ioctl
suffix:semicolon
id|SET_ETHTOOL_OPS
c_func
(paren
id|netdev
comma
op_amp
id|e100_ethtool_ops
)paren
suffix:semicolon
id|netdev-&gt;tx_timeout
op_assign
id|e100_tx_timeout
suffix:semicolon
id|netdev-&gt;watchdog_timeo
op_assign
id|E100_WATCHDOG_PERIOD
suffix:semicolon
id|netdev-&gt;poll
op_assign
id|e100_poll
suffix:semicolon
id|netdev-&gt;weight
op_assign
id|E100_NAPI_WEIGHT
suffix:semicolon
macro_line|#ifdef CONFIG_NET_POLL_CONTROLLER
id|netdev-&gt;poll_controller
op_assign
id|e100_netpoll
suffix:semicolon
macro_line|#endif
id|strcpy
c_func
(paren
id|netdev-&gt;name
comma
id|pci_name
c_func
(paren
id|pdev
)paren
)paren
suffix:semicolon
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|nic-&gt;netdev
op_assign
id|netdev
suffix:semicolon
id|nic-&gt;pdev
op_assign
id|pdev
suffix:semicolon
id|nic-&gt;msg_enable
op_assign
(paren
l_int|1
op_lshift
id|debug
)paren
op_minus
l_int|1
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pdev
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot enable PCI device, aborting.&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_out_free_dev
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|pci_resource_flags
c_func
(paren
id|pdev
comma
l_int|0
)paren
op_amp
id|IORESOURCE_MEM
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot find proper PCI device &quot;
l_string|&quot;base address, aborting.&bslash;n&quot;
)paren
suffix:semicolon
id|err
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_goto
id|err_out_disable_pdev
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_request_regions
c_func
(paren
id|pdev
comma
id|DRV_NAME
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot obtain PCI resources, aborting.&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_out_disable_pdev
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_set_dma_mask
c_func
(paren
id|pdev
comma
l_int|0xFFFFFFFFULL
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;No usable DMA configuration, aborting.&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_out_free_res
suffix:semicolon
)brace
id|SET_MODULE_OWNER
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|SET_NETDEV_DEV
c_func
(paren
id|netdev
comma
op_amp
id|pdev-&gt;dev
)paren
suffix:semicolon
id|nic-&gt;csr
op_assign
id|ioremap
c_func
(paren
id|pci_resource_start
c_func
(paren
id|pdev
comma
l_int|0
)paren
comma
r_sizeof
(paren
r_struct
id|csr
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|nic-&gt;csr
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot map device registers, aborting.&bslash;n&quot;
)paren
suffix:semicolon
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|err_out_free_res
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ent-&gt;driver_data
)paren
(brace
id|nic-&gt;flags
op_or_assign
id|ich
suffix:semicolon
)brace
r_else
id|nic-&gt;flags
op_and_assign
op_complement
id|ich
suffix:semicolon
id|e100_get_defaults
c_func
(paren
id|nic
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|nic-&gt;cb_lock
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|nic-&gt;cmd_lock
)paren
suffix:semicolon
multiline_comment|/* Reset the device before pci_set_master() in case device is in some&n;&t; * funky state and has an interrupt pending - hint: we don&squot;t have the&n;&t; * interrupt handler registered yet. */
id|e100_hw_reset
c_func
(paren
id|nic
)paren
suffix:semicolon
id|pci_set_master
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|nic-&gt;watchdog
)paren
suffix:semicolon
id|nic-&gt;watchdog.function
op_assign
id|e100_watchdog
suffix:semicolon
id|nic-&gt;watchdog.data
op_assign
(paren
r_int
r_int
)paren
id|nic
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|nic-&gt;blink_timer
)paren
suffix:semicolon
id|nic-&gt;blink_timer.function
op_assign
id|e100_blink_led
suffix:semicolon
id|nic-&gt;blink_timer.data
op_assign
(paren
r_int
r_int
)paren
id|nic
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_alloc
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot alloc driver memory, aborting.&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_out_iounmap
suffix:semicolon
)brace
id|e100_phy_init
c_func
(paren
id|nic
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|e100_eeprom_load
c_func
(paren
id|nic
)paren
)paren
)paren
(brace
r_goto
id|err_out_free
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|netdev-&gt;dev_addr
comma
id|nic-&gt;eeprom
comma
id|ETH_ALEN
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|is_valid_ether_addr
c_func
(paren
id|netdev-&gt;dev_addr
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Invalid MAC address from &quot;
l_string|&quot;EEPROM, aborting.&bslash;n&quot;
)paren
suffix:semicolon
id|err
op_assign
op_minus
id|EAGAIN
suffix:semicolon
r_goto
id|err_out_free
suffix:semicolon
)brace
multiline_comment|/* Wol magic packet can be enabled from eeprom */
r_if
c_cond
(paren
(paren
id|nic-&gt;mac
op_ge
id|mac_82558_D101_A4
)paren
op_logical_and
(paren
id|nic-&gt;eeprom
(braket
id|eeprom_id
)braket
op_amp
id|eeprom_id_wol
)paren
)paren
(brace
id|nic-&gt;flags
op_or_assign
id|wol_magic
suffix:semicolon
)brace
id|pci_enable_wake
c_func
(paren
id|pdev
comma
l_int|0
comma
id|nic-&gt;flags
op_amp
(paren
id|wol_magic
op_or
id|e100_asf
c_func
(paren
id|nic
)paren
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|netdev-&gt;name
comma
l_string|&quot;eth%d&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|register_netdev
c_func
(paren
id|netdev
)paren
)paren
)paren
(brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|ERR
comma
l_string|&quot;Cannot register net device, aborting.&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_out_free
suffix:semicolon
)brace
id|DPRINTK
c_func
(paren
id|PROBE
comma
id|INFO
comma
l_string|&quot;addr 0x%lx, irq %d, &quot;
l_string|&quot;MAC addr %02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|pci_resource_start
c_func
(paren
id|pdev
comma
l_int|0
)paren
comma
id|pdev-&gt;irq
comma
id|netdev-&gt;dev_addr
(braket
l_int|0
)braket
comma
id|netdev-&gt;dev_addr
(braket
l_int|1
)braket
comma
id|netdev-&gt;dev_addr
(braket
l_int|2
)braket
comma
id|netdev-&gt;dev_addr
(braket
l_int|3
)braket
comma
id|netdev-&gt;dev_addr
(braket
l_int|4
)braket
comma
id|netdev-&gt;dev_addr
(braket
l_int|5
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_out_free
suffix:colon
id|e100_free
c_func
(paren
id|nic
)paren
suffix:semicolon
id|err_out_iounmap
suffix:colon
id|iounmap
c_func
(paren
id|nic-&gt;csr
)paren
suffix:semicolon
id|err_out_free_res
suffix:colon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|err_out_disable_pdev
suffix:colon
id|pci_disable_device
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|err_out_free_dev
suffix:colon
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
l_int|NULL
)paren
suffix:semicolon
id|free_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|e100_remove
r_static
r_void
id|__devexit
id|e100_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netdev
)paren
(brace
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|unregister_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e100_free
c_func
(paren
id|nic
)paren
suffix:semicolon
id|iounmap
c_func
(paren
id|nic-&gt;csr
)paren
suffix:semicolon
id|free_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|pci_disable_device
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
l_int|NULL
)paren
suffix:semicolon
)brace
)brace
macro_line|#ifdef CONFIG_PM
DECL|function|e100_suspend
r_static
r_int
id|e100_suspend
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
id|u32
id|state
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_down
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
id|e100_hw_reset
c_func
(paren
id|nic
)paren
suffix:semicolon
id|netif_device_detach
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|pci_save_state
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|pci_enable_wake
c_func
(paren
id|pdev
comma
id|state
comma
id|nic-&gt;flags
op_amp
(paren
id|wol_magic
op_or
id|e100_asf
c_func
(paren
id|nic
)paren
)paren
)paren
suffix:semicolon
id|pci_disable_device
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|pci_set_power_state
c_func
(paren
id|pdev
comma
id|state
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|e100_resume
r_static
r_int
id|e100_resume
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_struct
id|nic
op_star
id|nic
op_assign
id|netdev_priv
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|pci_set_power_state
c_func
(paren
id|pdev
comma
l_int|0
)paren
suffix:semicolon
id|pci_restore_state
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|e100_hw_init
c_func
(paren
id|nic
)paren
suffix:semicolon
id|netif_device_attach
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e100_up
c_func
(paren
id|nic
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|variable|e100_driver
r_static
r_struct
id|pci_driver
id|e100_driver
op_assign
(brace
dot
id|name
op_assign
id|DRV_NAME
comma
dot
id|id_table
op_assign
id|e100_id_table
comma
dot
id|probe
op_assign
id|e100_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|e100_remove
)paren
comma
macro_line|#ifdef CONFIG_PM
dot
id|suspend
op_assign
id|e100_suspend
comma
dot
id|resume
op_assign
id|e100_resume
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|function|e100_init_module
r_static
r_int
id|__init
id|e100_init_module
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
l_int|1
op_lshift
id|debug
)paren
op_minus
l_int|1
)paren
op_amp
id|NETIF_MSG_DRV
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
id|PFX
l_string|&quot;%s, %s&bslash;n&quot;
comma
id|DRV_DESCRIPTION
comma
id|DRV_VERSION
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
id|PFX
l_string|&quot;%s&bslash;n&quot;
comma
id|DRV_COPYRIGHT
)paren
suffix:semicolon
)brace
r_return
id|pci_module_init
c_func
(paren
op_amp
id|e100_driver
)paren
suffix:semicolon
)brace
DECL|function|e100_cleanup_module
r_static
r_void
id|__exit
id|e100_cleanup_module
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|e100_driver
)paren
suffix:semicolon
)brace
DECL|variable|e100_init_module
id|module_init
c_func
(paren
id|e100_init_module
)paren
suffix:semicolon
DECL|variable|e100_cleanup_module
id|module_exit
c_func
(paren
id|e100_cleanup_module
)paren
suffix:semicolon
eof
