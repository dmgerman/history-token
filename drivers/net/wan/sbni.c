multiline_comment|/* sbni.c:  Granch SBNI12 leased line adapters driver for linux&n; *&n; *&t;Written 2001 by Denis I.Timofeev (timofeev@granch.ru)&n; *&n; *&t;Previous versions were written by Yaroslav Polyakov,&n; *&t;Alexey Zverev and Max Khon.&n; *&n; *&t;Driver supports SBNI12-02,-04,-05,-10,-11 cards, single and&n; *&t;double-channel, PCI and ISA modifications.&n; *&t;More info and useful utilities to work with SBNI12 cards you can find&n; *&t;at http://www.granch.com (English) or http://www.granch.ru (Russian)&n; *&n; *&t;This software may be used and distributed according to the terms&n; *&t;of the GNU General Public License.&n; *&n; *&n; *  5.0.1&t;Jun 22 2001&n; *&t;  - Fixed bug in probe&n; *  5.0.0&t;Jun 06 2001&n; *&t;  - Driver was completely redesigned by Denis I.Timofeev,&n; *&t;  - now PCI/Dual, ISA/Dual (with single interrupt line) models are&n; *&t;  - supported&n; *  3.3.0&t;Thu Feb 24 21:30:28 NOVT 2000 &n; *        - PCI cards support&n; *  3.2.0&t;Mon Dec 13 22:26:53 NOVT 1999&n; * &t;  - Completely rebuilt all the packet storage system&n; * &t;  -    to work in Ethernet-like style.&n; *  3.1.1&t;just fixed some bugs (5 aug 1999)&n; *  3.1.0&t;added balancing feature&t;(26 apr 1999)&n; *  3.0.1&t;just fixed some bugs (14 apr 1999).&n; *  3.0.0&t;Initial Revision, Yaroslav Polyakov (24 Feb 1999)&n; *        - added pre-calculation for CRC, fixed bug with &quot;len-2&quot; frames, &n; *        - removed outbound fragmentation (MTU=1000), written CRC-calculation &n; *        - on asm, added work with hard_headers and now we have our own cache &n; *        - for them, optionally supported word-interchange on some chipsets,&n; * &n; *&t;Known problem: this driver wasn&squot;t tested on multiprocessor machine.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;linux/fcntl.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &lt;linux/etherdevice.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/skbuff.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;net/arp.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/types.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &quot;sbni.h&quot;
multiline_comment|/* device private data */
DECL|struct|net_local
r_struct
id|net_local
(brace
DECL|member|stats
r_struct
id|net_device_stats
id|stats
suffix:semicolon
DECL|member|watchdog
r_struct
id|timer_list
id|watchdog
suffix:semicolon
DECL|member|lock
id|spinlock_t
id|lock
suffix:semicolon
DECL|member|rx_buf_p
r_struct
id|sk_buff
op_star
id|rx_buf_p
suffix:semicolon
multiline_comment|/* receive buffer ptr */
DECL|member|tx_buf_p
r_struct
id|sk_buff
op_star
id|tx_buf_p
suffix:semicolon
multiline_comment|/* transmit buffer ptr */
DECL|member|framelen
r_int
r_int
id|framelen
suffix:semicolon
multiline_comment|/* current frame length */
DECL|member|maxframe
r_int
r_int
id|maxframe
suffix:semicolon
multiline_comment|/* maximum valid frame length */
DECL|member|state
r_int
r_int
id|state
suffix:semicolon
DECL|member|inppos
DECL|member|outpos
r_int
r_int
id|inppos
comma
id|outpos
suffix:semicolon
multiline_comment|/* positions in rx/tx buffers */
multiline_comment|/* transmitting frame number - from frames qty to 1 */
DECL|member|tx_frameno
r_int
r_int
id|tx_frameno
suffix:semicolon
multiline_comment|/* expected number of next receiving frame */
DECL|member|wait_frameno
r_int
r_int
id|wait_frameno
suffix:semicolon
multiline_comment|/* count of failed attempts to frame send - 32 attempts do before&n;&t;   error - while receiver tunes on opposite side of wire */
DECL|member|trans_errors
r_int
r_int
id|trans_errors
suffix:semicolon
multiline_comment|/* idle time; send pong when limit exceeded */
DECL|member|timer_ticks
r_int
r_int
id|timer_ticks
suffix:semicolon
multiline_comment|/* fields used for receive level autoselection */
DECL|member|delta_rxl
r_int
id|delta_rxl
suffix:semicolon
DECL|member|cur_rxl_index
DECL|member|timeout_rxl
r_int
r_int
id|cur_rxl_index
comma
id|timeout_rxl
suffix:semicolon
DECL|member|cur_rxl_rcvd
DECL|member|prev_rxl_rcvd
r_int
r_int
id|cur_rxl_rcvd
comma
id|prev_rxl_rcvd
suffix:semicolon
DECL|member|csr1
r_struct
id|sbni_csr1
id|csr1
suffix:semicolon
multiline_comment|/* current value of CSR1 */
DECL|member|in_stats
r_struct
id|sbni_in_stats
id|in_stats
suffix:semicolon
multiline_comment|/* internal statistics */
DECL|member|second
r_struct
id|net_device
op_star
id|second
suffix:semicolon
multiline_comment|/* for ISA/dual cards */
macro_line|#ifdef CONFIG_SBNI_MULTILINE
DECL|member|master
r_struct
id|net_device
op_star
id|master
suffix:semicolon
DECL|member|link
r_struct
id|net_device
op_star
id|link
suffix:semicolon
macro_line|#endif
)brace
suffix:semicolon
r_static
r_int
id|sbni_card_probe
c_func
(paren
r_int
r_int
)paren
suffix:semicolon
r_static
r_int
id|sbni_pci_probe
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_struct
id|net_device
op_star
id|sbni_probe1
c_func
(paren
r_struct
id|net_device
op_star
comma
r_int
r_int
comma
r_int
)paren
suffix:semicolon
r_static
r_int
id|sbni_open
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|sbni_close
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|sbni_start_xmit
c_func
(paren
r_struct
id|sk_buff
op_star
comma
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|sbni_ioctl
c_func
(paren
r_struct
id|net_device
op_star
comma
r_struct
id|ifreq
op_star
comma
r_int
)paren
suffix:semicolon
r_static
r_struct
id|net_device_stats
op_star
id|sbni_get_stats
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|set_multicast_list
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
id|irqreturn_t
id|sbni_interrupt
c_func
(paren
r_int
comma
r_void
op_star
comma
r_struct
id|pt_regs
op_star
)paren
suffix:semicolon
r_static
r_void
id|handle_channel
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|recv_frame
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|send_frame
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|upload_data
c_func
(paren
r_struct
id|net_device
op_star
comma
r_int
comma
r_int
comma
r_int
comma
id|u32
)paren
suffix:semicolon
r_static
r_void
id|download_data
c_func
(paren
r_struct
id|net_device
op_star
comma
id|u32
op_star
)paren
suffix:semicolon
r_static
r_void
id|sbni_watchdog
c_func
(paren
r_int
r_int
)paren
suffix:semicolon
r_static
r_void
id|interpret_ack
c_func
(paren
r_struct
id|net_device
op_star
comma
r_int
)paren
suffix:semicolon
r_static
r_int
id|append_frame_to_pkt
c_func
(paren
r_struct
id|net_device
op_star
comma
r_int
comma
id|u32
)paren
suffix:semicolon
r_static
r_void
id|indicate_pkt
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|card_start
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|prepare_to_send
c_func
(paren
r_struct
id|sk_buff
op_star
comma
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|drop_xmit_queue
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|send_frame_header
c_func
(paren
r_struct
id|net_device
op_star
comma
id|u32
op_star
)paren
suffix:semicolon
r_static
r_int
id|skip_tail
c_func
(paren
r_int
r_int
comma
r_int
r_int
comma
id|u32
)paren
suffix:semicolon
r_static
r_int
id|check_fhdr
c_func
(paren
id|u32
comma
id|u32
op_star
comma
id|u32
op_star
comma
id|u32
op_star
comma
id|u32
op_star
comma
id|u32
op_star
)paren
suffix:semicolon
r_static
r_void
id|change_level
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|timeout_change_level
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
id|u32
id|calc_crc32
c_func
(paren
id|u32
comma
id|u8
op_star
comma
id|u32
)paren
suffix:semicolon
r_static
r_struct
id|sk_buff
op_star
id|get_rx_buf
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|sbni_init
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_static
r_int
id|enslave
c_func
(paren
r_struct
id|net_device
op_star
comma
r_struct
id|net_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|emancipate
c_func
(paren
r_struct
id|net_device
op_star
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef __i386__
DECL|macro|ASM_CRC
mdefine_line|#define ASM_CRC 1
macro_line|#endif
DECL|variable|version
r_static
r_const
r_char
id|version
(braket
)braket
op_assign
l_string|&quot;Granch SBNI12 driver ver 5.0.1  Jun 22 2001  Denis I.Timofeev.&bslash;n&quot;
suffix:semicolon
DECL|variable|__initdata
r_static
r_int
id|skip_pci_probe
id|__initdata
op_assign
l_int|0
suffix:semicolon
DECL|variable|__initdata
r_static
r_int
id|scandone
id|__initdata
op_assign
l_int|0
suffix:semicolon
DECL|variable|__initdata
r_static
r_int
id|num
id|__initdata
op_assign
l_int|0
suffix:semicolon
DECL|variable|rxl_tab
r_static
r_int
r_char
id|rxl_tab
(braket
)braket
suffix:semicolon
DECL|variable|crc32tab
r_static
id|u32
id|crc32tab
(braket
)braket
suffix:semicolon
multiline_comment|/* A list of all installed devices, for removing the driver module. */
DECL|variable|sbni_cards
r_static
r_struct
id|net_device
op_star
id|sbni_cards
(braket
id|SBNI_MAX_NUM_CARDS
)braket
suffix:semicolon
multiline_comment|/* Lists of device&squot;s parameters */
DECL|variable|__initdata
r_static
id|u32
id|io
(braket
id|SBNI_MAX_NUM_CARDS
)braket
id|__initdata
op_assign
(brace
(braket
l_int|0
dot
dot
dot
id|SBNI_MAX_NUM_CARDS
op_minus
l_int|1
)braket
op_assign
op_minus
l_int|1
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
id|u32
id|irq
(braket
id|SBNI_MAX_NUM_CARDS
)braket
id|__initdata
suffix:semicolon
DECL|variable|__initdata
r_static
id|u32
id|baud
(braket
id|SBNI_MAX_NUM_CARDS
)braket
id|__initdata
suffix:semicolon
DECL|variable|__initdata
r_static
id|u32
id|rxl
(braket
id|SBNI_MAX_NUM_CARDS
)braket
id|__initdata
op_assign
(brace
(braket
l_int|0
dot
dot
dot
id|SBNI_MAX_NUM_CARDS
op_minus
l_int|1
)braket
op_assign
op_minus
l_int|1
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
id|u32
id|mac
(braket
id|SBNI_MAX_NUM_CARDS
)braket
id|__initdata
suffix:semicolon
macro_line|#ifndef MODULE
DECL|typedef|iarr
r_typedef
id|u32
id|iarr
(braket
)braket
suffix:semicolon
DECL|variable|dest
r_static
id|iarr
op_star
id|dest
(braket
l_int|5
)braket
op_assign
(brace
op_amp
id|io
comma
op_amp
id|irq
comma
op_amp
id|baud
comma
op_amp
id|rxl
comma
op_amp
id|mac
)brace
suffix:semicolon
macro_line|#endif
multiline_comment|/* A zero-terminated list of I/O addresses to be probed on ISA bus */
DECL|variable|__initdata
r_static
r_int
r_int
id|netcard_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0x210
comma
l_int|0x214
comma
l_int|0x220
comma
l_int|0x224
comma
l_int|0x230
comma
l_int|0x234
comma
l_int|0x240
comma
l_int|0x244
comma
l_int|0x250
comma
l_int|0x254
comma
l_int|0x260
comma
l_int|0x264
comma
l_int|0x270
comma
l_int|0x274
comma
l_int|0x280
comma
l_int|0x284
comma
l_int|0x290
comma
l_int|0x294
comma
l_int|0x2a0
comma
l_int|0x2a4
comma
l_int|0x2b0
comma
l_int|0x2b4
comma
l_int|0x2c0
comma
l_int|0x2c4
comma
l_int|0x2d0
comma
l_int|0x2d4
comma
l_int|0x2e0
comma
l_int|0x2e4
comma
l_int|0x2f0
comma
l_int|0x2f4
comma
l_int|0
)brace
suffix:semicolon
multiline_comment|/*&n; * Look for SBNI card which addr stored in dev-&gt;base_addr, if nonzero.&n; * Otherwise, look through PCI bus. If none PCI-card was found, scan ISA.&n; */
r_static
r_inline
r_int
id|__init
DECL|function|sbni_isa_probe
id|sbni_isa_probe
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;base_addr
OG
l_int|0x1ff
op_logical_and
id|request_region
c_func
(paren
id|dev-&gt;base_addr
comma
id|SBNI_IO_EXTENT
comma
id|dev-&gt;name
)paren
op_logical_and
id|sbni_probe1
c_func
(paren
id|dev
comma
id|dev-&gt;base_addr
comma
id|dev-&gt;irq
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sbni: base address 0x%lx is busy, or adapter &quot;
l_string|&quot;is malfunctional!&bslash;n&quot;
comma
id|dev-&gt;base_addr
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
)brace
DECL|function|sbni_devsetup
r_static
r_void
id|__init
id|sbni_devsetup
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
id|ether_setup
c_func
(paren
id|dev
)paren
suffix:semicolon
id|dev-&gt;init
op_assign
op_amp
id|sbni_init
suffix:semicolon
id|dev-&gt;open
op_assign
op_amp
id|sbni_open
suffix:semicolon
id|dev-&gt;stop
op_assign
op_amp
id|sbni_close
suffix:semicolon
id|dev-&gt;hard_start_xmit
op_assign
op_amp
id|sbni_start_xmit
suffix:semicolon
id|dev-&gt;get_stats
op_assign
op_amp
id|sbni_get_stats
suffix:semicolon
id|dev-&gt;set_multicast_list
op_assign
op_amp
id|set_multicast_list
suffix:semicolon
id|dev-&gt;do_ioctl
op_assign
op_amp
id|sbni_ioctl
suffix:semicolon
id|SET_MODULE_OWNER
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
DECL|function|sbni_probe
r_int
id|__init
id|sbni_probe
c_func
(paren
r_void
)paren
(brace
r_struct
id|net_device
op_star
id|dev
suffix:semicolon
r_static
r_int
id|version_printed
id|__initdata
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|version_printed
op_increment
op_eq
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s&quot;
comma
id|version
)paren
suffix:semicolon
)brace
id|dev
op_assign
id|alloc_netdev
c_func
(paren
r_sizeof
(paren
r_struct
id|net_local
)paren
comma
l_string|&quot;sbni%d&quot;
comma
id|sbni_devsetup
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|netdev_boot_setup_check
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|register_netdev
c_func
(paren
id|dev
)paren
)paren
(brace
id|kfree
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|sbni_init
r_static
r_int
id|__init
id|sbni_init
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|dev-&gt;base_addr
)paren
(brace
r_return
id|sbni_isa_probe
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/* otherwise we have to perform search our adapter */
r_if
c_cond
(paren
id|io
(braket
id|num
)braket
op_ne
op_minus
l_int|1
)paren
(brace
id|dev-&gt;base_addr
op_assign
id|io
(braket
id|num
)braket
comma
id|dev-&gt;irq
op_assign
id|irq
(braket
id|num
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|scandone
op_logical_or
id|io
(braket
l_int|0
)braket
op_ne
op_minus
l_int|1
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
multiline_comment|/* if io[ num ] contains non-zero address, then that is on ISA bus */
r_if
c_cond
(paren
id|dev-&gt;base_addr
)paren
(brace
r_return
id|sbni_isa_probe
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/* ...otherwise - scan PCI first */
r_if
c_cond
(paren
op_logical_neg
id|skip_pci_probe
op_logical_and
op_logical_neg
id|sbni_pci_probe
c_func
(paren
id|dev
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|io
(braket
id|num
)braket
op_eq
op_minus
l_int|1
)paren
(brace
multiline_comment|/* Auto-scan will be stopped when first ISA card were found */
id|scandone
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|num
OG
l_int|0
)paren
(brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|netcard_portlist
(braket
id|i
)braket
suffix:semicolon
op_increment
id|i
)paren
(brace
r_int
id|ioaddr
op_assign
id|netcard_portlist
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|request_region
c_func
(paren
id|ioaddr
comma
id|SBNI_IO_EXTENT
comma
id|dev-&gt;name
)paren
op_logical_and
id|sbni_probe1
c_func
(paren
id|dev
comma
id|ioaddr
comma
l_int|0
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_int
id|__init
DECL|function|sbni_pci_probe
id|sbni_pci_probe
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
(paren
id|pdev
op_assign
id|pci_find_class
c_func
(paren
id|PCI_CLASS_NETWORK_OTHER
op_lshift
l_int|8
comma
id|pdev
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
r_int
id|pci_irq_line
suffix:semicolon
r_int
r_int
id|pci_ioaddr
suffix:semicolon
id|u16
id|subsys
suffix:semicolon
r_if
c_cond
(paren
id|pdev-&gt;vendor
op_ne
id|SBNI_PCI_VENDOR
op_logical_and
id|pdev-&gt;device
op_ne
id|SBNI_PCI_DEVICE
)paren
(brace
r_continue
suffix:semicolon
)brace
id|pci_ioaddr
op_assign
id|pci_resource_start
c_func
(paren
id|pdev
comma
l_int|0
)paren
suffix:semicolon
id|pci_irq_line
op_assign
id|pdev-&gt;irq
suffix:semicolon
multiline_comment|/* Avoid already found cards from previous calls */
r_if
c_cond
(paren
op_logical_neg
id|request_region
c_func
(paren
id|pci_ioaddr
comma
id|SBNI_IO_EXTENT
comma
id|dev-&gt;name
)paren
)paren
(brace
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_SUBSYSTEM_ID
comma
op_amp
id|subsys
)paren
suffix:semicolon
r_if
c_cond
(paren
id|subsys
op_ne
l_int|2
op_logical_or
multiline_comment|/* Dual adapter is present */
id|check_region
c_func
(paren
id|pci_ioaddr
op_add_assign
l_int|4
comma
id|SBNI_IO_EXTENT
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|pci_irq_line
op_le
l_int|0
op_logical_or
id|pci_irq_line
op_ge
id|NR_IRQS
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;  WARNING: The PCI BIOS assigned &quot;
l_string|&quot;this PCI card to IRQ %d, which is unlikely &quot;
l_string|&quot;to work!.&bslash;n&quot;
id|KERN_WARNING
l_string|&quot; You should use the PCI BIOS &quot;
l_string|&quot;setup to assign a valid IRQ line.&bslash;n&quot;
comma
id|pci_irq_line
)paren
suffix:semicolon
)brace
multiline_comment|/* avoiding re-enable dual adapters */
r_if
c_cond
(paren
(paren
id|pci_ioaddr
op_amp
l_int|7
)paren
op_eq
l_int|0
op_logical_and
id|pci_enable_device
c_func
(paren
id|pdev
)paren
)paren
(brace
r_return
op_minus
id|EIO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|sbni_probe1
c_func
(paren
id|dev
comma
id|pci_ioaddr
comma
id|pci_irq_line
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_static
r_struct
id|net_device
op_star
id|__init
DECL|function|sbni_probe1
id|sbni_probe1
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
r_int
id|ioaddr
comma
r_int
id|irq
)paren
(brace
r_struct
id|net_local
op_star
id|nl
suffix:semicolon
r_if
c_cond
(paren
id|sbni_card_probe
c_func
(paren
id|ioaddr
)paren
)paren
(brace
id|release_region
c_func
(paren
id|ioaddr
comma
id|SBNI_IO_EXTENT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|outb
c_func
(paren
l_int|0
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|irq
OL
l_int|2
)paren
(brace
r_int
r_int
id|irq_mask
comma
id|delay
suffix:semicolon
id|irq_mask
op_assign
id|probe_irq_on
c_func
(paren
)paren
suffix:semicolon
id|outb
c_func
(paren
id|EN_INT
op_or
id|TR_REQ
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
id|outb
c_func
(paren
id|PR_RES
comma
id|ioaddr
op_plus
id|CSR1
)paren
suffix:semicolon
id|delay
op_assign
id|jiffies
op_plus
id|HZ
op_div
l_int|20
suffix:semicolon
r_while
c_loop
(paren
id|time_before
c_func
(paren
id|jiffies
comma
id|delay
)paren
)paren
suffix:semicolon
id|irq
op_assign
id|probe_irq_off
c_func
(paren
id|irq_mask
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|irq
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: can&squot;t detect device irq!&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|ioaddr
comma
id|SBNI_IO_EXTENT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|irq
op_eq
l_int|2
)paren
(brace
id|irq
op_assign
l_int|9
suffix:semicolon
)brace
id|dev-&gt;irq
op_assign
id|irq
suffix:semicolon
id|dev-&gt;base_addr
op_assign
id|ioaddr
suffix:semicolon
multiline_comment|/* Allocate dev-&gt;priv and fill in sbni-specific dev fields. */
id|nl
op_assign
id|dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|nl
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: unable to get memory!&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|ioaddr
comma
id|SBNI_IO_EXTENT
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|dev-&gt;priv
op_assign
id|nl
suffix:semicolon
id|memset
c_func
(paren
id|nl
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|net_local
)paren
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
multiline_comment|/* store MAC address (generate if that isn&squot;t known) */
op_star
(paren
id|u16
op_star
)paren
id|dev-&gt;dev_addr
op_assign
id|htons
c_func
(paren
l_int|0x00ff
)paren
suffix:semicolon
op_star
(paren
id|u32
op_star
)paren
(paren
id|dev-&gt;dev_addr
op_plus
l_int|2
)paren
op_assign
id|htonl
c_func
(paren
l_int|0x01000000
op_or
(paren
(paren
id|mac
(braket
id|num
)braket
ques
c_cond
id|mac
(braket
id|num
)braket
suffix:colon
(paren
id|u32
)paren
(paren
(paren
r_int
)paren
id|dev-&gt;priv
)paren
)paren
op_amp
l_int|0x00ffffff
)paren
)paren
suffix:semicolon
multiline_comment|/* store link settings (speed, receive level ) */
id|nl-&gt;maxframe
op_assign
id|DEFAULT_FRAME_LEN
suffix:semicolon
id|nl-&gt;csr1.rate
op_assign
id|baud
(braket
id|num
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|nl-&gt;cur_rxl_index
op_assign
id|rxl
(braket
id|num
)braket
)paren
op_eq
op_minus
l_int|1
)paren
(brace
multiline_comment|/* autotune rxl */
id|nl-&gt;cur_rxl_index
op_assign
id|DEF_RXL
comma
id|nl-&gt;delta_rxl
op_assign
id|DEF_RXL_DELTA
suffix:semicolon
)brace
r_else
id|nl-&gt;delta_rxl
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;csr1.rxl
op_assign
id|rxl_tab
(braket
id|nl-&gt;cur_rxl_index
)braket
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
op_amp
l_int|0x01
)paren
(brace
id|nl-&gt;state
op_or_assign
id|FL_SLOW_MODE
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: ioaddr %#lx, irq %d, &quot;
l_string|&quot;MAC: 00:ff:01:%02x:%02x:%02x&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|dev-&gt;base_addr
comma
id|dev-&gt;irq
comma
(paren
(paren
id|u8
op_star
)paren
id|dev-&gt;dev_addr
)paren
(braket
l_int|3
)braket
comma
(paren
(paren
id|u8
op_star
)paren
id|dev-&gt;dev_addr
)paren
(braket
l_int|4
)braket
comma
(paren
(paren
id|u8
op_star
)paren
id|dev-&gt;dev_addr
)paren
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: speed %d, receive level &quot;
comma
id|dev-&gt;name
comma
(paren
(paren
id|nl-&gt;state
op_amp
id|FL_SLOW_MODE
)paren
ques
c_cond
l_int|500000
suffix:colon
l_int|2000000
)paren
op_div
(paren
l_int|1
op_lshift
id|nl-&gt;csr1.rate
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;delta_rxl
op_eq
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;0x%x (fixed)&bslash;n&quot;
comma
id|nl-&gt;cur_rxl_index
)paren
suffix:semicolon
)brace
r_else
id|printk
c_func
(paren
l_string|&quot;(auto)&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|nl-&gt;master
op_assign
id|dev
suffix:semicolon
id|nl-&gt;link
op_assign
l_int|NULL
suffix:semicolon
macro_line|#endif
id|sbni_cards
(braket
id|num
op_increment
)braket
op_assign
id|dev
suffix:semicolon
r_return
id|dev
suffix:semicolon
)brace
multiline_comment|/* -------------------------------------------------------------------------- */
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_static
r_int
DECL|function|sbni_start_xmit
id|sbni_start_xmit
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_device
op_star
id|p
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/* Looking for idle device in the list */
r_for
c_loop
(paren
id|p
op_assign
id|dev
suffix:semicolon
id|p
suffix:semicolon
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|p-&gt;priv
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;tx_buf_p
op_logical_or
(paren
id|nl-&gt;state
op_amp
id|FL_LINE_DOWN
)paren
)paren
(brace
id|p
op_assign
id|nl-&gt;link
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Idle dev is found */
id|prepare_to_send
c_func
(paren
id|skb
comma
id|p
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|netif_start_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#else&t;/* CONFIG_SBNI_MULTILINE */
r_static
r_int
DECL|function|sbni_start_xmit
id|sbni_start_xmit
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|prepare_to_send
c_func
(paren
id|skb
comma
id|dev
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif&t;/* CONFIG_SBNI_MULTILINE */
multiline_comment|/* -------------------------------------------------------------------------- */
multiline_comment|/* interrupt handler */
multiline_comment|/*&n; * &t;SBNI12D-10, -11/ISA boards within &quot;common interrupt&quot; mode could not&n; * be looked as two independent single-channel devices. Every channel seems&n; * as Ethernet interface but interrupt handler must be common. Really, first&n; * channel (&quot;master&quot;) driver only registers the handler. In its struct net_local&n; * it has got pointer to &quot;slave&quot; channel&squot;s struct net_local and handles that&squot;s&n; * interrupts too.&n; *&t;dev of successfully attached ISA SBNI boards is linked to list.&n; * While next board driver is initialized, it scans this list. If one&n; * has found dev with same irq and ioaddr different by 4 then it assumes&n; * this board to be &quot;master&quot;.&n; */
r_static
id|irqreturn_t
DECL|function|sbni_interrupt
id|sbni_interrupt
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|dev_id
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_struct
id|net_device
op_star
id|dev
op_assign
(paren
r_struct
id|net_device
op_star
)paren
id|dev_id
suffix:semicolon
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_int
id|repeat
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;second
)paren
(brace
id|spin_lock
c_func
(paren
op_amp
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;second-&gt;priv
)paren
op_member_access_from_pointer
id|lock
)paren
suffix:semicolon
)brace
r_do
(brace
id|repeat
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
op_amp
(paren
id|RC_RDY
op_or
id|TR_RDY
)paren
)paren
(brace
id|handle_channel
c_func
(paren
id|dev
)paren
comma
id|repeat
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nl-&gt;second
op_logical_and
multiline_comment|/* second channel present */
(paren
id|inb
c_func
(paren
id|nl-&gt;second-&gt;base_addr
op_plus
id|CSR0
)paren
op_amp
(paren
id|RC_RDY
op_or
id|TR_RDY
)paren
)paren
)paren
(brace
id|handle_channel
c_func
(paren
id|nl-&gt;second
)paren
comma
id|repeat
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|repeat
)paren
(brace
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nl-&gt;second
)paren
(brace
id|spin_unlock
c_func
(paren
op_amp
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;second-&gt;priv
)paren
op_member_access_from_pointer
id|lock
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
r_static
r_void
DECL|function|handle_channel
id|handle_channel
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_int
r_int
id|ioaddr
op_assign
id|dev-&gt;base_addr
suffix:semicolon
r_int
id|req_ans
suffix:semicolon
r_int
r_char
id|csr0
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
multiline_comment|/* Lock the master device because we going to change its local data */
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_SLAVE
)paren
(brace
id|spin_lock
c_func
(paren
op_amp
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|lock
)paren
suffix:semicolon
)brace
macro_line|#endif
id|outb
c_func
(paren
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
op_amp
op_complement
id|EN_INT
)paren
op_or
id|TR_REQ
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
id|nl-&gt;timer_ticks
op_assign
id|CHANGE_LEVEL_START_TICKS
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
id|csr0
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|csr0
op_amp
(paren
id|RC_RDY
op_or
id|TR_RDY
)paren
)paren
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
id|req_ans
op_assign
op_logical_neg
(paren
id|nl-&gt;state
op_amp
id|FL_PREV_OK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csr0
op_amp
id|RC_RDY
)paren
(brace
id|req_ans
op_assign
id|recv_frame
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t;&t; * TR_RDY always equals 1 here because we have owned the marker,&n;&t;&t; * and we set TR_REQ when disabled interrupts&n;&t;&t; */
id|csr0
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|csr0
op_amp
id|TR_RDY
)paren
op_logical_or
(paren
id|csr0
op_amp
id|RC_RDY
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: internal error!&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
)brace
multiline_comment|/* if state &amp; FL_NEED_RESEND != 0 then tx_frameno != 0 */
r_if
c_cond
(paren
id|req_ans
op_logical_or
id|nl-&gt;tx_frameno
op_ne
l_int|0
)paren
(brace
id|send_frame
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
r_else
multiline_comment|/* send marker without any data */
id|outb
c_func
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
op_amp
op_complement
id|TR_REQ
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
)brace
id|outb
c_func
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
op_or
id|EN_INT
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_SLAVE
)paren
(brace
id|spin_unlock
c_func
(paren
op_amp
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|lock
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
multiline_comment|/*&n; * Routine returns 1 if it need to acknoweledge received frame.&n; * Empty frame received without errors won&squot;t be acknoweledged.&n; */
r_static
r_int
DECL|function|recv_frame
id|recv_frame
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_int
r_int
id|ioaddr
op_assign
id|dev-&gt;base_addr
suffix:semicolon
id|u32
id|crc
op_assign
id|CRC32_INITIAL
suffix:semicolon
r_int
id|framelen
comma
id|frameno
comma
id|ack
suffix:semicolon
r_int
id|is_first
comma
id|frame_ok
suffix:semicolon
r_if
c_cond
(paren
id|check_fhdr
c_func
(paren
id|ioaddr
comma
op_amp
id|framelen
comma
op_amp
id|frameno
comma
op_amp
id|ack
comma
op_amp
id|is_first
comma
op_amp
id|crc
)paren
)paren
(brace
id|frame_ok
op_assign
id|framelen
OG
l_int|4
ques
c_cond
id|upload_data
c_func
(paren
id|dev
comma
id|framelen
comma
id|frameno
comma
id|is_first
comma
id|crc
)paren
suffix:colon
id|skip_tail
c_func
(paren
id|ioaddr
comma
id|framelen
comma
id|crc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|frame_ok
)paren
(brace
id|interpret_ack
c_func
(paren
id|dev
comma
id|ack
)paren
suffix:semicolon
)brace
)brace
r_else
id|frame_ok
op_assign
l_int|0
suffix:semicolon
id|outb
c_func
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
op_xor
id|CT_ZER
comma
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|frame_ok
)paren
(brace
id|nl-&gt;state
op_or_assign
id|FL_PREV_OK
suffix:semicolon
r_if
c_cond
(paren
id|framelen
OG
l_int|4
)paren
(brace
id|nl-&gt;in_stats.all_rx_number
op_increment
suffix:semicolon
)brace
)brace
r_else
id|nl-&gt;state
op_and_assign
op_complement
id|FL_PREV_OK
comma
id|change_level
c_func
(paren
id|dev
)paren
comma
id|nl-&gt;in_stats.all_rx_number
op_increment
comma
id|nl-&gt;in_stats.bad_rx_number
op_increment
suffix:semicolon
r_return
op_logical_neg
id|frame_ok
op_logical_or
id|framelen
OG
l_int|4
suffix:semicolon
)brace
r_static
r_void
DECL|function|send_frame
id|send_frame
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|u32
id|crc
op_assign
id|CRC32_INITIAL
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_NEED_RESEND
)paren
(brace
multiline_comment|/* if frame was sended but not ACK&squot;ed - resend it */
r_if
c_cond
(paren
id|nl-&gt;trans_errors
)paren
(brace
op_decrement
id|nl-&gt;trans_errors
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;framelen
op_ne
l_int|0
)paren
(brace
id|nl-&gt;in_stats.resend_tx_number
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
multiline_comment|/* cannot xmit with many attempts */
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_if
c_cond
(paren
(paren
id|nl-&gt;state
op_amp
id|FL_SLAVE
)paren
op_logical_or
id|nl-&gt;link
)paren
(brace
macro_line|#endif
id|nl-&gt;state
op_or_assign
id|FL_LINE_DOWN
suffix:semicolon
)brace
id|drop_xmit_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
r_goto
id|do_send
suffix:semicolon
)brace
)brace
r_else
id|nl-&gt;trans_errors
op_assign
id|TR_ERROR_COUNT
suffix:semicolon
id|send_frame_header
c_func
(paren
id|dev
comma
op_amp
id|crc
)paren
suffix:semicolon
id|nl-&gt;state
op_or_assign
id|FL_NEED_RESEND
suffix:semicolon
multiline_comment|/*&n;&t; * FL_NEED_RESEND will be cleared after ACK, but if empty&n;&t; * frame sended then in prepare_to_send next frame&n;&t; */
r_if
c_cond
(paren
id|nl-&gt;framelen
)paren
(brace
id|download_data
c_func
(paren
id|dev
comma
op_amp
id|crc
)paren
suffix:semicolon
id|nl-&gt;in_stats.all_tx_number
op_increment
suffix:semicolon
id|nl-&gt;state
op_or_assign
id|FL_WAIT_ACK
suffix:semicolon
)brace
id|outsb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|DAT
comma
(paren
id|u8
op_star
)paren
op_amp
id|crc
comma
r_sizeof
id|crc
)paren
suffix:semicolon
id|do_send
suffix:colon
id|outb
c_func
(paren
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
op_amp
op_complement
id|TR_REQ
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;tx_frameno
)paren
(brace
multiline_comment|/* next frame exists - we request card to send it */
id|outb
c_func
(paren
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
op_or
id|TR_REQ
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Write the frame data into adapter&squot;s buffer memory, and calculate CRC.&n; * Do padding if necessary.&n; */
r_static
r_void
DECL|function|download_data
id|download_data
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
id|u32
op_star
id|crc_p
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
op_assign
id|nl-&gt;tx_buf_p
suffix:semicolon
r_int
id|len
op_assign
id|min_t
c_func
(paren
r_int
r_int
comma
id|skb-&gt;len
op_minus
id|nl-&gt;outpos
comma
id|nl-&gt;framelen
)paren
suffix:semicolon
id|outsb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|DAT
comma
id|skb-&gt;data
op_plus
id|nl-&gt;outpos
comma
id|len
)paren
suffix:semicolon
op_star
id|crc_p
op_assign
id|calc_crc32
c_func
(paren
op_star
id|crc_p
comma
id|skb-&gt;data
op_plus
id|nl-&gt;outpos
comma
id|len
)paren
suffix:semicolon
multiline_comment|/* if packet too short we should write some more bytes to pad */
r_for
c_loop
(paren
id|len
op_assign
id|nl-&gt;framelen
op_minus
id|len
suffix:semicolon
id|len
op_decrement
suffix:semicolon
)paren
(brace
id|outb
c_func
(paren
l_int|0
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
comma
op_star
id|crc_p
op_assign
id|CRC32
c_func
(paren
l_int|0
comma
op_star
id|crc_p
)paren
suffix:semicolon
)brace
)brace
r_static
r_int
DECL|function|upload_data
id|upload_data
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
id|framelen
comma
r_int
id|frameno
comma
r_int
id|is_first
comma
id|u32
id|crc
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_int
id|frame_ok
suffix:semicolon
r_if
c_cond
(paren
id|is_first
)paren
(brace
id|nl-&gt;wait_frameno
op_assign
id|frameno
comma
id|nl-&gt;inppos
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nl-&gt;wait_frameno
op_eq
id|frameno
)paren
(brace
r_if
c_cond
(paren
id|nl-&gt;inppos
op_plus
id|framelen
op_le
id|ETHER_MAX_LEN
)paren
(brace
id|frame_ok
op_assign
id|append_frame_to_pkt
c_func
(paren
id|dev
comma
id|framelen
comma
id|crc
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t;&t; * if CRC is right but framelen incorrect then transmitter&n;&t;&t; * error was occurred... drop entire packet&n;&t;&t; */
r_else
r_if
c_cond
(paren
(paren
id|frame_ok
op_assign
id|skip_tail
c_func
(paren
id|dev-&gt;base_addr
comma
id|framelen
comma
id|crc
)paren
)paren
op_ne
l_int|0
)paren
(brace
id|nl-&gt;wait_frameno
op_assign
l_int|0
comma
id|nl-&gt;inppos
op_assign
l_int|0
comma
macro_line|#ifdef CONFIG_SBNI_MULTILINE
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_errors
op_increment
comma
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_missed_errors
op_increment
suffix:semicolon
)brace
macro_line|#else
id|nl-&gt;stats.rx_errors
op_increment
comma
id|nl-&gt;stats.rx_missed_errors
op_increment
suffix:semicolon
macro_line|#endif
multiline_comment|/* now skip all frames until is_first != 0 */
)brace
r_else
id|frame_ok
op_assign
id|skip_tail
c_func
(paren
id|dev-&gt;base_addr
comma
id|framelen
comma
id|crc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|is_first
op_logical_and
op_logical_neg
id|frame_ok
)paren
(brace
multiline_comment|/*&n;&t;&t; * Frame has been broken, but we had already stored&n;&t;&t; * is_first... Drop entire packet.&n;&t;&t; */
id|nl-&gt;wait_frameno
op_assign
l_int|0
comma
macro_line|#ifdef CONFIG_SBNI_MULTILINE
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_errors
op_increment
comma
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_crc_errors
op_increment
suffix:semicolon
)brace
macro_line|#else
id|nl-&gt;stats.rx_errors
op_increment
comma
id|nl-&gt;stats.rx_crc_errors
op_increment
suffix:semicolon
macro_line|#endif
r_return
id|frame_ok
suffix:semicolon
)brace
r_static
id|__inline
r_void
DECL|function|send_complete
id|send_complete
c_func
(paren
r_struct
id|net_local
op_star
id|nl
)paren
(brace
macro_line|#ifdef CONFIG_SBNI_MULTILINE
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.tx_packets
op_increment
suffix:semicolon
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.tx_bytes
op_add_assign
id|nl-&gt;tx_buf_p-&gt;len
suffix:semicolon
macro_line|#else
id|nl-&gt;stats.tx_packets
op_increment
suffix:semicolon
id|nl-&gt;stats.tx_bytes
op_add_assign
id|nl-&gt;tx_buf_p-&gt;len
suffix:semicolon
macro_line|#endif
id|dev_kfree_skb_irq
c_func
(paren
id|nl-&gt;tx_buf_p
)paren
suffix:semicolon
id|nl-&gt;tx_buf_p
op_assign
l_int|NULL
suffix:semicolon
id|nl-&gt;outpos
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;state
op_and_assign
op_complement
(paren
id|FL_WAIT_ACK
op_or
id|FL_NEED_RESEND
)paren
suffix:semicolon
id|nl-&gt;framelen
op_assign
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|interpret_ack
id|interpret_ack
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
id|ack
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|ack
op_eq
id|FRAME_SENT_OK
)paren
(brace
id|nl-&gt;state
op_and_assign
op_complement
id|FL_NEED_RESEND
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_WAIT_ACK
)paren
(brace
id|nl-&gt;outpos
op_add_assign
id|nl-&gt;framelen
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|nl-&gt;tx_frameno
)paren
(brace
id|nl-&gt;framelen
op_assign
id|min_t
c_func
(paren
r_int
r_int
comma
id|nl-&gt;maxframe
comma
id|nl-&gt;tx_buf_p-&gt;len
op_minus
id|nl-&gt;outpos
)paren
suffix:semicolon
)brace
r_else
id|send_complete
c_func
(paren
id|nl
)paren
comma
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|netif_wake_queue
c_func
(paren
id|nl-&gt;master
)paren
suffix:semicolon
macro_line|#else
id|netif_wake_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
id|nl-&gt;state
op_and_assign
op_complement
id|FL_WAIT_ACK
suffix:semicolon
)brace
multiline_comment|/*&n; * Glue received frame with previous fragments of packet.&n; * Indicate packet when last frame would be accepted.&n; */
r_static
r_int
DECL|function|append_frame_to_pkt
id|append_frame_to_pkt
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
id|framelen
comma
id|u32
id|crc
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|u8
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;inppos
op_plus
id|framelen
OG
id|ETHER_MAX_LEN
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|nl-&gt;rx_buf_p
op_logical_and
op_logical_neg
(paren
id|nl-&gt;rx_buf_p
op_assign
id|get_rx_buf
c_func
(paren
id|dev
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|p
op_assign
id|nl-&gt;rx_buf_p-&gt;data
op_plus
id|nl-&gt;inppos
suffix:semicolon
id|insb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|DAT
comma
id|p
comma
id|framelen
)paren
suffix:semicolon
r_if
c_cond
(paren
id|calc_crc32
c_func
(paren
id|crc
comma
id|p
comma
id|framelen
)paren
op_ne
id|CRC32_REMAINDER
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|nl-&gt;inppos
op_add_assign
id|framelen
op_minus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|nl-&gt;wait_frameno
op_eq
l_int|0
)paren
(brace
multiline_comment|/* last frame received */
id|indicate_pkt
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/*&n; * Prepare to start output on adapter.&n; * Transmitter will be actually activated when marker is accepted.&n; */
r_static
r_void
DECL|function|prepare_to_send
id|prepare_to_send
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_int
r_int
id|len
suffix:semicolon
multiline_comment|/* nl-&gt;tx_buf_p == NULL here! */
r_if
c_cond
(paren
id|nl-&gt;tx_buf_p
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: memory leak!&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
)brace
id|nl-&gt;outpos
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;state
op_and_assign
op_complement
(paren
id|FL_WAIT_ACK
op_or
id|FL_NEED_RESEND
)paren
suffix:semicolon
id|len
op_assign
id|skb-&gt;len
suffix:semicolon
r_if
c_cond
(paren
id|len
OL
id|SBNI_MIN_LEN
)paren
(brace
id|len
op_assign
id|SBNI_MIN_LEN
suffix:semicolon
)brace
id|nl-&gt;tx_buf_p
op_assign
id|skb
suffix:semicolon
id|nl-&gt;tx_frameno
op_assign
(paren
id|len
op_plus
id|nl-&gt;maxframe
op_minus
l_int|1
)paren
op_div
id|nl-&gt;maxframe
suffix:semicolon
id|nl-&gt;framelen
op_assign
id|len
OL
id|nl-&gt;maxframe
ques
c_cond
id|len
suffix:colon
id|nl-&gt;maxframe
suffix:semicolon
id|outb
c_func
(paren
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
op_or
id|TR_REQ
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|nl-&gt;master-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
macro_line|#else
id|dev-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
macro_line|#endif
)brace
r_static
r_void
DECL|function|drop_xmit_queue
id|drop_xmit_queue
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;tx_buf_p
)paren
(brace
id|dev_kfree_skb_any
c_func
(paren
id|nl-&gt;tx_buf_p
)paren
comma
id|nl-&gt;tx_buf_p
op_assign
l_int|NULL
comma
macro_line|#ifdef CONFIG_SBNI_MULTILINE
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.tx_errors
op_increment
comma
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.tx_carrier_errors
op_increment
suffix:semicolon
)brace
macro_line|#else
id|nl-&gt;stats.tx_errors
op_increment
comma
id|nl-&gt;stats.tx_carrier_errors
op_increment
suffix:semicolon
macro_line|#endif
id|nl-&gt;tx_frameno
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;framelen
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;outpos
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;state
op_and_assign
op_complement
(paren
id|FL_WAIT_ACK
op_or
id|FL_NEED_RESEND
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|netif_start_queue
c_func
(paren
id|nl-&gt;master
)paren
suffix:semicolon
id|nl-&gt;master-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
macro_line|#else
id|netif_start_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
id|dev-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
macro_line|#endif
)brace
r_static
r_void
DECL|function|send_frame_header
id|send_frame_header
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
id|u32
op_star
id|crc_p
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|u32
id|crc
op_assign
op_star
id|crc_p
suffix:semicolon
id|u32
id|len_field
op_assign
id|nl-&gt;framelen
op_plus
l_int|6
suffix:semicolon
multiline_comment|/* CRC + frameno + reserved */
id|u8
id|value
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_NEED_RESEND
)paren
(brace
id|len_field
op_or_assign
id|FRAME_RETRY
suffix:semicolon
)brace
multiline_comment|/* non-first attempt... */
r_if
c_cond
(paren
id|nl-&gt;outpos
op_eq
l_int|0
)paren
(brace
id|len_field
op_or_assign
id|FRAME_FIRST
suffix:semicolon
)brace
id|len_field
op_or_assign
(paren
id|nl-&gt;state
op_amp
id|FL_PREV_OK
)paren
ques
c_cond
id|FRAME_SENT_OK
suffix:colon
id|FRAME_SENT_BAD
suffix:semicolon
id|outb
c_func
(paren
id|SBNI_SIG
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
suffix:semicolon
id|value
op_assign
(paren
id|u8
)paren
id|len_field
suffix:semicolon
id|outb
c_func
(paren
id|value
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|value
comma
id|crc
)paren
suffix:semicolon
id|value
op_assign
(paren
id|u8
)paren
(paren
id|len_field
op_rshift
l_int|8
)paren
suffix:semicolon
id|outb
c_func
(paren
id|value
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|value
comma
id|crc
)paren
suffix:semicolon
id|outb
c_func
(paren
id|nl-&gt;tx_frameno
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|nl-&gt;tx_frameno
comma
id|crc
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|dev-&gt;base_addr
op_plus
id|DAT
)paren
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
l_int|0
comma
id|crc
)paren
suffix:semicolon
op_star
id|crc_p
op_assign
id|crc
suffix:semicolon
)brace
multiline_comment|/*&n; * if frame tail not needed (incorrect number or received twice),&n; * it won&squot;t store, but CRC will be calculated&n; */
r_static
r_int
DECL|function|skip_tail
id|skip_tail
c_func
(paren
r_int
r_int
id|ioaddr
comma
r_int
r_int
id|tail_len
comma
id|u32
id|crc
)paren
(brace
r_while
c_loop
(paren
id|tail_len
op_decrement
)paren
(brace
id|crc
op_assign
id|CRC32
c_func
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
comma
id|crc
)paren
suffix:semicolon
)brace
r_return
id|crc
op_eq
id|CRC32_REMAINDER
suffix:semicolon
)brace
multiline_comment|/*&n; * Preliminary checks if frame header is correct, calculates its CRC&n; * and split it to simple fields&n; */
r_static
r_int
DECL|function|check_fhdr
id|check_fhdr
c_func
(paren
id|u32
id|ioaddr
comma
id|u32
op_star
id|framelen
comma
id|u32
op_star
id|frameno
comma
id|u32
op_star
id|ack
comma
id|u32
op_star
id|is_first
comma
id|u32
op_star
id|crc_p
)paren
(brace
id|u32
id|crc
op_assign
op_star
id|crc_p
suffix:semicolon
id|u8
id|value
suffix:semicolon
r_if
c_cond
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
op_ne
id|SBNI_SIG
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|value
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
suffix:semicolon
op_star
id|framelen
op_assign
(paren
id|u32
)paren
id|value
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|value
comma
id|crc
)paren
suffix:semicolon
id|value
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
suffix:semicolon
op_star
id|framelen
op_or_assign
(paren
(paren
id|u32
)paren
id|value
)paren
op_lshift
l_int|8
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|value
comma
id|crc
)paren
suffix:semicolon
op_star
id|ack
op_assign
op_star
id|framelen
op_amp
id|FRAME_ACK_MASK
suffix:semicolon
op_star
id|is_first
op_assign
(paren
op_star
id|framelen
op_amp
id|FRAME_FIRST
)paren
op_ne
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
id|framelen
op_and_assign
id|FRAME_LEN_MASK
)paren
template_param
id|SBNI_MAX_FRAME
op_minus
l_int|3
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|value
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
suffix:semicolon
op_star
id|frameno
op_assign
(paren
id|u32
)paren
id|value
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|value
comma
id|crc
)paren
suffix:semicolon
id|crc
op_assign
id|CRC32
c_func
(paren
id|inb
c_func
(paren
id|ioaddr
op_plus
id|DAT
)paren
comma
id|crc
)paren
suffix:semicolon
multiline_comment|/* reserved byte */
op_star
id|framelen
op_sub_assign
l_int|2
suffix:semicolon
op_star
id|crc_p
op_assign
id|crc
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_static
r_struct
id|sk_buff
op_star
DECL|function|get_rx_buf
id|get_rx_buf
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
multiline_comment|/* +2 is to compensate for the alignment fixup below */
r_struct
id|sk_buff
op_star
id|skb
op_assign
id|dev_alloc_skb
c_func
(paren
id|ETHER_MAX_LEN
op_plus
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|skb
)paren
(brace
r_return
l_int|NULL
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|skb-&gt;dev
op_assign
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
)paren
op_member_access_from_pointer
id|master
suffix:semicolon
macro_line|#else
id|skb-&gt;dev
op_assign
id|dev
suffix:semicolon
macro_line|#endif
id|skb_reserve
c_func
(paren
id|skb
comma
l_int|2
)paren
suffix:semicolon
multiline_comment|/* Align IP on longword boundaries */
r_return
id|skb
suffix:semicolon
)brace
r_static
r_void
DECL|function|indicate_pkt
id|indicate_pkt
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
op_assign
id|nl-&gt;rx_buf_p
suffix:semicolon
id|skb_put
c_func
(paren
id|skb
comma
id|nl-&gt;inppos
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
id|skb-&gt;protocol
op_assign
id|eth_type_trans
c_func
(paren
id|skb
comma
id|nl-&gt;master
)paren
suffix:semicolon
id|netif_rx
c_func
(paren
id|skb
)paren
suffix:semicolon
id|dev-&gt;last_rx
op_assign
id|jiffies
suffix:semicolon
op_increment
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_packets
suffix:semicolon
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|nl-&gt;master-&gt;priv
)paren
op_member_access_from_pointer
id|stats.rx_bytes
op_add_assign
id|nl-&gt;inppos
suffix:semicolon
macro_line|#else
id|skb-&gt;protocol
op_assign
id|eth_type_trans
c_func
(paren
id|skb
comma
id|dev
)paren
suffix:semicolon
id|netif_rx
c_func
(paren
id|skb
)paren
suffix:semicolon
id|dev-&gt;last_rx
op_assign
id|jiffies
suffix:semicolon
op_increment
id|nl-&gt;stats.rx_packets
suffix:semicolon
id|nl-&gt;stats.rx_bytes
op_add_assign
id|nl-&gt;inppos
suffix:semicolon
macro_line|#endif
id|nl-&gt;rx_buf_p
op_assign
l_int|NULL
suffix:semicolon
multiline_comment|/* protocol driver will clear this sk_buff */
)brace
multiline_comment|/* -------------------------------------------------------------------------- */
multiline_comment|/*&n; * Routine checks periodically wire activity and regenerates marker if&n; * connect was inactive for a long time.&n; */
r_static
r_void
DECL|function|sbni_watchdog
id|sbni_watchdog
c_func
(paren
r_int
r_int
id|arg
)paren
(brace
r_struct
id|net_device
op_star
id|dev
op_assign
(paren
r_struct
id|net_device
op_star
)paren
id|arg
suffix:semicolon
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|timer_list
op_star
id|w
op_assign
op_amp
id|nl-&gt;watchdog
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
r_char
id|csr0
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|nl-&gt;lock
comma
id|flags
)paren
suffix:semicolon
id|csr0
op_assign
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csr0
op_amp
id|RC_CHK
)paren
(brace
r_if
c_cond
(paren
id|nl-&gt;timer_ticks
)paren
(brace
r_if
c_cond
(paren
id|csr0
op_amp
(paren
id|RC_RDY
op_or
id|BU_EMP
)paren
)paren
(brace
multiline_comment|/* receiving not active */
id|nl-&gt;timer_ticks
op_decrement
suffix:semicolon
)brace
)brace
r_else
(brace
id|nl-&gt;in_stats.timeout_number
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;delta_rxl
)paren
(brace
id|timeout_change_level
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
id|outb
c_func
(paren
op_star
(paren
id|u_char
op_star
)paren
op_amp
id|nl-&gt;csr1
op_or
id|PR_RES
comma
id|dev-&gt;base_addr
op_plus
id|CSR1
)paren
suffix:semicolon
id|csr0
op_assign
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
)brace
)brace
r_else
id|nl-&gt;state
op_and_assign
op_complement
id|FL_LINE_DOWN
suffix:semicolon
id|outb
c_func
(paren
id|csr0
op_or
id|RC_CHK
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
id|init_timer
c_func
(paren
id|w
)paren
suffix:semicolon
id|w-&gt;expires
op_assign
id|jiffies
op_plus
id|SBNI_TIMEOUT
suffix:semicolon
id|w-&gt;data
op_assign
id|arg
suffix:semicolon
id|w-&gt;function
op_assign
id|sbni_watchdog
suffix:semicolon
id|add_timer
c_func
(paren
id|w
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|nl-&gt;lock
comma
id|flags
)paren
suffix:semicolon
)brace
DECL|variable|rxl_tab
r_static
r_int
r_char
id|rxl_tab
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x03
comma
l_int|0x04
comma
l_int|0x05
comma
l_int|0x06
comma
l_int|0x08
comma
l_int|0x0a
comma
l_int|0x0c
comma
l_int|0x0f
comma
l_int|0x16
comma
l_int|0x18
comma
l_int|0x1a
comma
l_int|0x1c
comma
l_int|0x1f
)brace
suffix:semicolon
DECL|macro|SIZE_OF_TIMEOUT_RXL_TAB
mdefine_line|#define SIZE_OF_TIMEOUT_RXL_TAB 4
DECL|variable|timeout_rxl_tab
r_static
r_int
r_char
id|timeout_rxl_tab
(braket
)braket
op_assign
(brace
l_int|0x03
comma
l_int|0x05
comma
l_int|0x08
comma
l_int|0x0b
)brace
suffix:semicolon
multiline_comment|/* -------------------------------------------------------------------------- */
r_static
r_void
DECL|function|card_start
id|card_start
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|nl-&gt;timer_ticks
op_assign
id|CHANGE_LEVEL_START_TICKS
suffix:semicolon
id|nl-&gt;state
op_and_assign
op_complement
(paren
id|FL_WAIT_ACK
op_or
id|FL_NEED_RESEND
)paren
suffix:semicolon
id|nl-&gt;state
op_or_assign
id|FL_PREV_OK
suffix:semicolon
id|nl-&gt;inppos
op_assign
id|nl-&gt;outpos
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;wait_frameno
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;tx_frameno
op_assign
l_int|0
suffix:semicolon
id|nl-&gt;framelen
op_assign
l_int|0
suffix:semicolon
id|outb
c_func
(paren
op_star
(paren
id|u_char
op_star
)paren
op_amp
id|nl-&gt;csr1
op_or
id|PR_RES
comma
id|dev-&gt;base_addr
op_plus
id|CSR1
)paren
suffix:semicolon
id|outb
c_func
(paren
id|EN_INT
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
)brace
multiline_comment|/* -------------------------------------------------------------------------- */
multiline_comment|/* Receive level auto-selection */
r_static
r_void
DECL|function|change_level
id|change_level
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;delta_rxl
op_eq
l_int|0
)paren
(brace
multiline_comment|/* do not auto-negotiate RxL */
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|nl-&gt;cur_rxl_index
op_eq
l_int|0
)paren
(brace
id|nl-&gt;delta_rxl
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|nl-&gt;cur_rxl_index
op_eq
l_int|15
)paren
(brace
id|nl-&gt;delta_rxl
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|nl-&gt;cur_rxl_rcvd
OL
id|nl-&gt;prev_rxl_rcvd
)paren
(brace
id|nl-&gt;delta_rxl
op_assign
op_minus
id|nl-&gt;delta_rxl
suffix:semicolon
)brace
id|nl-&gt;csr1.rxl
op_assign
id|rxl_tab
(braket
id|nl-&gt;cur_rxl_index
op_add_assign
id|nl-&gt;delta_rxl
)braket
suffix:semicolon
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
multiline_comment|/* needs for PCI cards */
id|outb
c_func
(paren
op_star
(paren
id|u8
op_star
)paren
op_amp
id|nl-&gt;csr1
comma
id|dev-&gt;base_addr
op_plus
id|CSR1
)paren
suffix:semicolon
id|nl-&gt;prev_rxl_rcvd
op_assign
id|nl-&gt;cur_rxl_rcvd
suffix:semicolon
id|nl-&gt;cur_rxl_rcvd
op_assign
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|timeout_change_level
id|timeout_change_level
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
id|nl-&gt;cur_rxl_index
op_assign
id|timeout_rxl_tab
(braket
id|nl-&gt;timeout_rxl
)braket
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|nl-&gt;timeout_rxl
op_ge
l_int|4
)paren
(brace
id|nl-&gt;timeout_rxl
op_assign
l_int|0
suffix:semicolon
)brace
id|nl-&gt;csr1.rxl
op_assign
id|rxl_tab
(braket
id|nl-&gt;cur_rxl_index
)braket
suffix:semicolon
id|inb
c_func
(paren
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
id|outb
c_func
(paren
op_star
(paren
r_int
r_char
op_star
)paren
op_amp
id|nl-&gt;csr1
comma
id|dev-&gt;base_addr
op_plus
id|CSR1
)paren
suffix:semicolon
id|nl-&gt;prev_rxl_rcvd
op_assign
id|nl-&gt;cur_rxl_rcvd
suffix:semicolon
id|nl-&gt;cur_rxl_rcvd
op_assign
l_int|0
suffix:semicolon
)brace
multiline_comment|/* -------------------------------------------------------------------------- */
multiline_comment|/*&n; *&t;Open/initialize the board. &n; */
r_static
r_int
DECL|function|sbni_open
id|sbni_open
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|timer_list
op_star
id|w
op_assign
op_amp
id|nl-&gt;watchdog
suffix:semicolon
multiline_comment|/*&n;&t; * For double ISA adapters within &quot;common irq&quot; mode, we have to&n;&t; * determine whether primary or secondary channel is initialized,&n;&t; * and set the irq handler only in first case.&n;&t; */
r_if
c_cond
(paren
id|dev-&gt;base_addr
OL
l_int|0x400
)paren
(brace
multiline_comment|/* ISA only */
r_struct
id|net_device
op_star
op_star
id|p
op_assign
id|sbni_cards
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
op_star
id|p
op_logical_and
id|p
OL
id|sbni_cards
op_plus
id|SBNI_MAX_NUM_CARDS
suffix:semicolon
op_increment
id|p
)paren
r_if
c_cond
(paren
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|irq
op_eq
id|dev-&gt;irq
op_logical_and
(paren
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|base_addr
op_eq
id|dev-&gt;base_addr
op_plus
l_int|4
op_logical_or
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|base_addr
op_eq
id|dev-&gt;base_addr
op_minus
l_int|4
)paren
op_logical_and
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|flags
op_amp
id|IFF_UP
)paren
(brace
(paren
(paren
r_struct
id|net_local
op_star
)paren
(paren
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|priv
)paren
)paren
op_member_access_from_pointer
id|second
op_assign
id|dev
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: using shared irq &quot;
l_string|&quot;with %s&bslash;n&quot;
comma
id|dev-&gt;name
comma
(paren
op_star
id|p
)paren
op_member_access_from_pointer
id|name
)paren
suffix:semicolon
id|nl-&gt;state
op_or_assign
id|FL_SECONDARY
suffix:semicolon
r_goto
id|handler_attached
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|dev-&gt;irq
comma
id|sbni_interrupt
comma
id|SA_SHIRQ
comma
id|dev-&gt;name
comma
id|dev
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: unable to get IRQ %d.&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|dev-&gt;irq
)paren
suffix:semicolon
r_return
op_minus
id|EAGAIN
suffix:semicolon
)brace
id|handler_attached
suffix:colon
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|nl-&gt;stats
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|net_device_stats
)paren
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|nl-&gt;in_stats
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|sbni_in_stats
)paren
)paren
suffix:semicolon
id|card_start
c_func
(paren
id|dev
)paren
suffix:semicolon
id|netif_start_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/* set timer watchdog */
id|init_timer
c_func
(paren
id|w
)paren
suffix:semicolon
id|w-&gt;expires
op_assign
id|jiffies
op_plus
id|SBNI_TIMEOUT
suffix:semicolon
id|w-&gt;data
op_assign
(paren
r_int
r_int
)paren
id|dev
suffix:semicolon
id|w-&gt;function
op_assign
id|sbni_watchdog
suffix:semicolon
id|add_timer
c_func
(paren
id|w
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|sbni_close
id|sbni_close
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;second
op_logical_and
id|nl-&gt;second-&gt;flags
op_amp
id|IFF_UP
)paren
(brace
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;Secondary channel (%s) is active!&bslash;n&quot;
comma
id|nl-&gt;second-&gt;name
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_SLAVE
)paren
(brace
id|emancipate
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
r_else
r_while
c_loop
(paren
id|nl-&gt;link
)paren
(brace
multiline_comment|/* it&squot;s master device! */
id|emancipate
c_func
(paren
id|nl-&gt;link
)paren
suffix:semicolon
)brace
macro_line|#endif
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|nl-&gt;second
op_assign
l_int|NULL
suffix:semicolon
id|drop_xmit_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
id|del_timer
c_func
(paren
op_amp
id|nl-&gt;watchdog
)paren
suffix:semicolon
id|outb
c_func
(paren
l_int|0
comma
id|dev-&gt;base_addr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|nl-&gt;state
op_amp
id|FL_SECONDARY
)paren
)paren
(brace
id|free_irq
c_func
(paren
id|dev-&gt;irq
comma
id|dev
)paren
suffix:semicolon
)brace
id|nl-&gt;state
op_and_assign
id|FL_SECONDARY
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;&t;Valid combinations in CSR0 (for probing):&n;&n;&t;VALID_DECODER&t;0000,0011,1011,1010&n;&n;&t;&t;&t;&t;    &t;; 0   ; -&n;&t;&t;&t;&t;TR_REQ&t;; 1   ; +&n;&t;&t;&t;TR_RDY&t;    &t;; 2   ; -&n;&t;&t;&t;TR_RDY&t;TR_REQ&t;; 3   ; +&n;&t;&t;BU_EMP&t;&t;    &t;; 4   ; +&n;&t;&t;BU_EMP&t;     &t;TR_REQ&t;; 5   ; +&n;&t;&t;BU_EMP&t;TR_RDY&t;    &t;; 6   ; -&n;&t;&t;BU_EMP&t;TR_RDY&t;TR_REQ&t;; 7   ; +&n;&t;RC_RDY &t;&t;     &t;&t;; 8   ; +&n;&t;RC_RDY&t;&t;&t;TR_REQ&t;; 9   ; +&n;&t;RC_RDY&t;&t;TR_RDY&t;&t;; 10  ; -&n;&t;RC_RDY&t;&t;TR_RDY&t;TR_REQ&t;; 11  ; -&n;&t;RC_RDY&t;BU_EMP&t;&t;&t;; 12  ; -&n;&t;RC_RDY&t;BU_EMP&t;&t;TR_REQ&t;; 13  ; -&n;&t;RC_RDY&t;BU_EMP&t;TR_RDY&t;&t;; 14  ; -&n;&t;RC_RDY&t;BU_EMP&t;TR_RDY&t;TR_REQ&t;; 15  ; -&n;*/
DECL|macro|VALID_DECODER
mdefine_line|#define VALID_DECODER (2 + 8 + 0x10 + 0x20 + 0x80 + 0x100 + 0x200)
r_static
r_int
DECL|function|sbni_card_probe
id|sbni_card_probe
c_func
(paren
r_int
r_int
id|ioaddr
)paren
(brace
r_int
r_char
id|csr0
suffix:semicolon
id|csr0
op_assign
id|inb
c_func
(paren
id|ioaddr
op_plus
id|CSR0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csr0
op_ne
l_int|0xff
op_logical_and
id|csr0
op_ne
l_int|0x00
)paren
(brace
id|csr0
op_and_assign
op_complement
id|EN_INT
suffix:semicolon
r_if
c_cond
(paren
id|csr0
op_amp
id|BU_EMP
)paren
(brace
id|csr0
op_or_assign
id|EN_INT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VALID_DECODER
op_amp
(paren
l_int|1
op_lshift
(paren
id|csr0
op_rshift
l_int|4
)paren
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
multiline_comment|/* -------------------------------------------------------------------------- */
r_static
r_int
DECL|function|sbni_ioctl
id|sbni_ioctl
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_struct
id|ifreq
op_star
id|ifr
comma
r_int
id|cmd
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|sbni_flags
id|flags
suffix:semicolon
r_int
id|error
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_struct
id|net_device
op_star
id|slave_dev
suffix:semicolon
r_char
id|slave_name
(braket
l_int|8
)braket
suffix:semicolon
macro_line|#endif
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SIOCDEVGETINSTATS
suffix:colon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|ifr-&gt;ifr_data
comma
r_sizeof
(paren
r_struct
id|sbni_in_stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|ifr-&gt;ifr_data
comma
op_amp
id|nl-&gt;in_stats
comma
r_sizeof
(paren
r_struct
id|sbni_in_stats
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIOCDEVRESINSTATS
suffix:colon
r_if
c_cond
(paren
id|current-&gt;euid
op_ne
l_int|0
)paren
(brace
multiline_comment|/* root only */
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
id|memset
c_func
(paren
op_amp
id|nl-&gt;in_stats
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|sbni_in_stats
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIOCDEVGHWSTATE
suffix:colon
id|flags.mac_addr
op_assign
op_star
(paren
id|u32
op_star
)paren
(paren
id|dev-&gt;dev_addr
op_plus
l_int|3
)paren
suffix:semicolon
id|flags.rate
op_assign
id|nl-&gt;csr1.rate
suffix:semicolon
id|flags.slow_mode
op_assign
(paren
id|nl-&gt;state
op_amp
id|FL_SLOW_MODE
)paren
op_ne
l_int|0
suffix:semicolon
id|flags.rxl
op_assign
id|nl-&gt;cur_rxl_index
suffix:semicolon
id|flags.fixed_rxl
op_assign
id|nl-&gt;delta_rxl
op_eq
l_int|0
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|ifr-&gt;ifr_data
comma
r_sizeof
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|ifr-&gt;ifr_data
comma
op_amp
id|flags
comma
r_sizeof
id|flags
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SIOCDEVSHWSTATE
suffix:colon
r_if
c_cond
(paren
id|current-&gt;euid
op_ne
l_int|0
)paren
(brace
multiline_comment|/* root only */
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|flags
op_assign
op_star
(paren
r_struct
id|sbni_flags
op_star
)paren
op_amp
id|ifr-&gt;ifr_data
suffix:semicolon
r_if
c_cond
(paren
id|flags.fixed_rxl
)paren
(brace
id|nl-&gt;delta_rxl
op_assign
l_int|0
comma
id|nl-&gt;cur_rxl_index
op_assign
id|flags.rxl
suffix:semicolon
)brace
r_else
id|nl-&gt;delta_rxl
op_assign
id|DEF_RXL_DELTA
comma
id|nl-&gt;cur_rxl_index
op_assign
id|DEF_RXL
suffix:semicolon
id|nl-&gt;csr1.rxl
op_assign
id|rxl_tab
(braket
id|nl-&gt;cur_rxl_index
)braket
suffix:semicolon
id|nl-&gt;csr1.rate
op_assign
id|flags.rate
suffix:semicolon
id|outb
c_func
(paren
op_star
(paren
id|u8
op_star
)paren
op_amp
id|nl-&gt;csr1
op_or
id|PR_RES
comma
id|dev-&gt;base_addr
op_plus
id|CSR1
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_case
id|SIOCDEVENSLAVE
suffix:colon
r_if
c_cond
(paren
id|current-&gt;euid
op_ne
l_int|0
)paren
(brace
multiline_comment|/* root only */
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
id|ifr-&gt;ifr_data
comma
r_sizeof
id|slave_name
)paren
)paren
op_ne
l_int|0
)paren
(brace
r_return
id|error
suffix:semicolon
)brace
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|slave_name
comma
id|ifr-&gt;ifr_data
comma
r_sizeof
id|slave_name
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|slave_dev
op_assign
id|dev_get_by_name
c_func
(paren
id|slave_name
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|slave_dev
op_logical_or
op_logical_neg
(paren
id|slave_dev-&gt;flags
op_amp
id|IFF_UP
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;%s: trying to enslave non-active &quot;
l_string|&quot;device %s&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|slave_name
)paren
suffix:semicolon
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
r_return
id|enslave
c_func
(paren
id|dev
comma
id|slave_dev
)paren
suffix:semicolon
r_case
id|SIOCDEVEMANSIPATE
suffix:colon
r_if
c_cond
(paren
id|current-&gt;euid
op_ne
l_int|0
)paren
(brace
multiline_comment|/* root only */
r_return
op_minus
id|EPERM
suffix:semicolon
)brace
r_return
id|emancipate
c_func
(paren
id|dev
)paren
suffix:semicolon
macro_line|#endif&t;/* CONFIG_SBNI_MULTILINE */
r_default
suffix:colon
r_return
op_minus
id|EOPNOTSUPP
suffix:semicolon
)brace
r_return
id|error
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_SBNI_MULTILINE
r_static
r_int
DECL|function|enslave
id|enslave
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_struct
id|net_device
op_star
id|slave_dev
)paren
(brace
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|net_local
op_star
id|snl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|slave_dev-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|nl-&gt;state
op_amp
id|FL_SLAVE
)paren
(brace
multiline_comment|/* This isn&squot;t master or free device */
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
r_if
c_cond
(paren
id|snl-&gt;state
op_amp
id|FL_SLAVE
)paren
(brace
multiline_comment|/* That was already enslaved */
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|snl-&gt;lock
)paren
suffix:semicolon
multiline_comment|/* append to list */
id|snl-&gt;link
op_assign
id|nl-&gt;link
suffix:semicolon
id|nl-&gt;link
op_assign
id|slave_dev
suffix:semicolon
id|snl-&gt;master
op_assign
id|dev
suffix:semicolon
id|snl-&gt;state
op_or_assign
id|FL_SLAVE
suffix:semicolon
multiline_comment|/* Summary statistics of MultiLine operation will be stored&n;&t;   in master&squot;s counters */
id|memset
c_func
(paren
op_amp
id|snl-&gt;stats
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|net_device_stats
)paren
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|slave_dev
)paren
suffix:semicolon
id|netif_wake_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/* Now we are able to transmit */
id|spin_unlock
c_func
(paren
op_amp
id|snl-&gt;lock
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;%s: slave device (%s) attached.&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|slave_dev-&gt;name
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|emancipate
id|emancipate
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|net_local
op_star
id|snl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
suffix:semicolon
r_struct
id|net_device
op_star
id|p
op_assign
id|snl-&gt;master
suffix:semicolon
r_struct
id|net_local
op_star
id|nl
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|p-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|snl-&gt;state
op_amp
id|FL_SLAVE
)paren
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|spin_lock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|snl-&gt;lock
)paren
suffix:semicolon
id|drop_xmit_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/* exclude from list */
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
multiline_comment|/* must be in list */
r_struct
id|net_local
op_star
id|t
op_assign
(paren
r_struct
id|net_local
op_star
)paren
id|p-&gt;priv
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;link
op_eq
id|dev
)paren
(brace
id|t-&gt;link
op_assign
id|snl-&gt;link
suffix:semicolon
r_break
suffix:semicolon
)brace
id|p
op_assign
id|t-&gt;link
suffix:semicolon
)brace
id|snl-&gt;link
op_assign
l_int|NULL
suffix:semicolon
id|snl-&gt;master
op_assign
id|dev
suffix:semicolon
id|snl-&gt;state
op_and_assign
op_complement
id|FL_SLAVE
suffix:semicolon
id|netif_start_queue
c_func
(paren
id|dev
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|snl-&gt;lock
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|nl-&gt;lock
)paren
suffix:semicolon
id|dev_put
c_func
(paren
id|dev
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
r_static
r_struct
id|net_device_stats
op_star
DECL|function|sbni_get_stats
id|sbni_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_return
op_amp
(paren
(paren
r_struct
id|net_local
op_star
)paren
id|dev-&gt;priv
)paren
op_member_access_from_pointer
id|stats
suffix:semicolon
)brace
r_static
r_void
DECL|function|set_multicast_list
id|set_multicast_list
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_return
suffix:semicolon
multiline_comment|/* sbni always operate in promiscuos mode */
)brace
macro_line|#ifdef MODULE
id|MODULE_PARM
c_func
(paren
id|io
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SBNI_MAX_NUM_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|irq
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SBNI_MAX_NUM_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|baud
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SBNI_MAX_NUM_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|rxl
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SBNI_MAX_NUM_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|mac
comma
l_string|&quot;1-&quot;
id|__MODULE_STRING
c_func
(paren
id|SBNI_MAX_NUM_CARDS
)paren
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|skip_pci_probe
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
r_int
DECL|function|init_module
id|init_module
c_func
(paren
r_void
)paren
(brace
r_struct
id|net_device
op_star
id|dev
suffix:semicolon
r_while
c_loop
(paren
id|num
OL
id|SBNI_MAX_NUM_CARDS
)paren
(brace
id|dev
op_assign
id|alloc_netdev
c_func
(paren
r_sizeof
(paren
r_struct
id|net_local
)paren
comma
l_string|&quot;sbni%d&quot;
comma
id|sbni_devsetup
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sbni: unable to allocate device!&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|dev-&gt;name
comma
l_string|&quot;sbni%d&quot;
comma
id|num
)paren
suffix:semicolon
r_if
c_cond
(paren
id|register_netdev
c_func
(paren
id|dev
)paren
)paren
(brace
id|kfree
c_func
(paren
id|dev
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_return
op_star
id|sbni_cards
ques
c_cond
l_int|0
suffix:colon
op_minus
id|ENODEV
suffix:semicolon
)brace
r_void
DECL|function|cleanup_module
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
r_struct
id|net_device
op_star
id|dev
suffix:semicolon
r_int
id|num
suffix:semicolon
r_for
c_loop
(paren
id|num
op_assign
l_int|0
suffix:semicolon
id|num
OL
id|SBNI_MAX_NUM_CARDS
suffix:semicolon
op_increment
id|num
)paren
r_if
c_cond
(paren
(paren
id|dev
op_assign
id|sbni_cards
(braket
id|num
)braket
)paren
op_ne
l_int|NULL
)paren
(brace
id|unregister_netdev
c_func
(paren
id|dev
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|dev-&gt;base_addr
comma
id|SBNI_IO_EXTENT
)paren
suffix:semicolon
id|free_netdev
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
)brace
macro_line|#else&t;/* MODULE */
r_static
r_int
id|__init
DECL|function|sbni_setup
id|sbni_setup
c_func
(paren
r_char
op_star
id|p
)paren
(brace
r_int
id|n
comma
id|parm
suffix:semicolon
r_if
c_cond
(paren
op_star
id|p
op_increment
op_ne
l_char|&squot;(&squot;
)paren
(brace
r_goto
id|bad_param
suffix:semicolon
)brace
r_for
c_loop
(paren
id|n
op_assign
l_int|0
comma
id|parm
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_logical_and
id|n
OL
l_int|8
suffix:semicolon
)paren
(brace
(paren
op_star
id|dest
(braket
id|parm
)braket
)paren
(braket
id|n
)braket
op_assign
id|simple_strtol
c_func
(paren
id|p
comma
op_amp
id|p
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|p
op_logical_or
op_star
id|p
op_eq
l_char|&squot;)&squot;
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|p
op_eq
l_char|&squot;;&squot;
)paren
(brace
op_increment
id|p
comma
op_increment
id|n
comma
id|parm
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_star
id|p
op_increment
op_ne
l_char|&squot;,&squot;
)paren
(brace
r_break
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_increment
id|parm
op_ge
l_int|5
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|bad_param
suffix:colon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;Error in sbni kernel parameter!&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|__setup
c_func
(paren
l_string|&quot;sbni=&quot;
comma
id|sbni_setup
)paren
suffix:semicolon
macro_line|#endif&t;/* MODULE */
multiline_comment|/* -------------------------------------------------------------------------- */
macro_line|#ifdef ASM_CRC
r_static
id|u32
DECL|function|calc_crc32
id|calc_crc32
c_func
(paren
id|u32
id|crc
comma
id|u8
op_star
id|p
comma
id|u32
id|len
)paren
(brace
r_register
id|u32
id|_crc
id|__asm
(paren
l_string|&quot;ax&quot;
)paren
suffix:semicolon
id|_crc
op_assign
id|crc
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;xorl&t;%%ebx, %%ebx&bslash;n&quot;
l_string|&quot;movl&t;%1, %%esi&bslash;n&quot;
l_string|&quot;movl&t;%2, %%ecx&bslash;n&quot;
l_string|&quot;movl&t;$crc32tab, %%edi&bslash;n&quot;
l_string|&quot;shrl&t;$2, %%ecx&bslash;n&quot;
l_string|&quot;jz&t;1f&bslash;n&quot;
l_string|&quot;.align 4&bslash;n&quot;
l_string|&quot;0:&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;movl&t;(%%esi), %%edx&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;%%dl, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%edx&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;%%dl, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%edx&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;%%dl, %%bl&bslash;n&quot;
l_string|&quot;movb&t;%%dh, %%dl&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;%%dl, %%bl&bslash;n&quot;
l_string|&quot;addl&t;$4, %%esi&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;decl&t;%%ecx&bslash;n&quot;
l_string|&quot;jnz&t;0b&bslash;n&quot;
l_string|&quot;1:&bslash;n&quot;
l_string|&quot;movl&t;%2, %%ecx&bslash;n&quot;
l_string|&quot;andl&t;$3, %%ecx&bslash;n&quot;
l_string|&quot;jz&t;2f&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;(%%esi), %%bl&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;decl&t;%%ecx&bslash;n&quot;
l_string|&quot;jz&t;2f&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;1(%%esi), %%bl&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;decl&t;%%ecx&bslash;n&quot;
l_string|&quot;jz&t;2f&bslash;n&quot;
l_string|&quot;movb&t;%%al, %%bl&bslash;n&quot;
l_string|&quot;shrl&t;$8, %%eax&bslash;n&quot;
l_string|&quot;xorb&t;2(%%esi), %%bl&bslash;n&quot;
l_string|&quot;xorl&t;(%%edi,%%ebx,4), %%eax&bslash;n&quot;
l_string|&quot;2:&bslash;n&quot;
suffix:colon
suffix:colon
l_string|&quot;a&quot;
(paren
id|_crc
)paren
comma
l_string|&quot;g&quot;
(paren
id|p
)paren
comma
l_string|&quot;g&quot;
(paren
id|len
)paren
suffix:colon
l_string|&quot;ax&quot;
comma
l_string|&quot;bx&quot;
comma
l_string|&quot;cx&quot;
comma
l_string|&quot;dx&quot;
comma
l_string|&quot;si&quot;
comma
l_string|&quot;di&quot;
)paren
suffix:semicolon
r_return
id|_crc
suffix:semicolon
)brace
macro_line|#else&t;/* ASM_CRC */
r_static
id|u32
DECL|function|calc_crc32
id|calc_crc32
c_func
(paren
id|u32
id|crc
comma
id|u8
op_star
id|p
comma
id|u32
id|len
)paren
(brace
r_while
c_loop
(paren
id|len
op_decrement
)paren
(brace
id|crc
op_assign
id|CRC32
c_func
(paren
op_star
id|p
op_increment
comma
id|crc
)paren
suffix:semicolon
)brace
r_return
id|crc
suffix:semicolon
)brace
macro_line|#endif&t;/* ASM_CRC */
DECL|variable|crc32tab
r_static
id|u32
id|crc32tab
(braket
)braket
id|__attribute__
(paren
(paren
id|aligned
c_func
(paren
l_int|8
)paren
)paren
)paren
op_assign
(brace
l_int|0xD202EF8D
comma
l_int|0xA505DF1B
comma
l_int|0x3C0C8EA1
comma
l_int|0x4B0BBE37
comma
l_int|0xD56F2B94
comma
l_int|0xA2681B02
comma
l_int|0x3B614AB8
comma
l_int|0x4C667A2E
comma
l_int|0xDCD967BF
comma
l_int|0xABDE5729
comma
l_int|0x32D70693
comma
l_int|0x45D03605
comma
l_int|0xDBB4A3A6
comma
l_int|0xACB39330
comma
l_int|0x35BAC28A
comma
l_int|0x42BDF21C
comma
l_int|0xCFB5FFE9
comma
l_int|0xB8B2CF7F
comma
l_int|0x21BB9EC5
comma
l_int|0x56BCAE53
comma
l_int|0xC8D83BF0
comma
l_int|0xBFDF0B66
comma
l_int|0x26D65ADC
comma
l_int|0x51D16A4A
comma
l_int|0xC16E77DB
comma
l_int|0xB669474D
comma
l_int|0x2F6016F7
comma
l_int|0x58672661
comma
l_int|0xC603B3C2
comma
l_int|0xB1048354
comma
l_int|0x280DD2EE
comma
l_int|0x5F0AE278
comma
l_int|0xE96CCF45
comma
l_int|0x9E6BFFD3
comma
l_int|0x0762AE69
comma
l_int|0x70659EFF
comma
l_int|0xEE010B5C
comma
l_int|0x99063BCA
comma
l_int|0x000F6A70
comma
l_int|0x77085AE6
comma
l_int|0xE7B74777
comma
l_int|0x90B077E1
comma
l_int|0x09B9265B
comma
l_int|0x7EBE16CD
comma
l_int|0xE0DA836E
comma
l_int|0x97DDB3F8
comma
l_int|0x0ED4E242
comma
l_int|0x79D3D2D4
comma
l_int|0xF4DBDF21
comma
l_int|0x83DCEFB7
comma
l_int|0x1AD5BE0D
comma
l_int|0x6DD28E9B
comma
l_int|0xF3B61B38
comma
l_int|0x84B12BAE
comma
l_int|0x1DB87A14
comma
l_int|0x6ABF4A82
comma
l_int|0xFA005713
comma
l_int|0x8D076785
comma
l_int|0x140E363F
comma
l_int|0x630906A9
comma
l_int|0xFD6D930A
comma
l_int|0x8A6AA39C
comma
l_int|0x1363F226
comma
l_int|0x6464C2B0
comma
l_int|0xA4DEAE1D
comma
l_int|0xD3D99E8B
comma
l_int|0x4AD0CF31
comma
l_int|0x3DD7FFA7
comma
l_int|0xA3B36A04
comma
l_int|0xD4B45A92
comma
l_int|0x4DBD0B28
comma
l_int|0x3ABA3BBE
comma
l_int|0xAA05262F
comma
l_int|0xDD0216B9
comma
l_int|0x440B4703
comma
l_int|0x330C7795
comma
l_int|0xAD68E236
comma
l_int|0xDA6FD2A0
comma
l_int|0x4366831A
comma
l_int|0x3461B38C
comma
l_int|0xB969BE79
comma
l_int|0xCE6E8EEF
comma
l_int|0x5767DF55
comma
l_int|0x2060EFC3
comma
l_int|0xBE047A60
comma
l_int|0xC9034AF6
comma
l_int|0x500A1B4C
comma
l_int|0x270D2BDA
comma
l_int|0xB7B2364B
comma
l_int|0xC0B506DD
comma
l_int|0x59BC5767
comma
l_int|0x2EBB67F1
comma
l_int|0xB0DFF252
comma
l_int|0xC7D8C2C4
comma
l_int|0x5ED1937E
comma
l_int|0x29D6A3E8
comma
l_int|0x9FB08ED5
comma
l_int|0xE8B7BE43
comma
l_int|0x71BEEFF9
comma
l_int|0x06B9DF6F
comma
l_int|0x98DD4ACC
comma
l_int|0xEFDA7A5A
comma
l_int|0x76D32BE0
comma
l_int|0x01D41B76
comma
l_int|0x916B06E7
comma
l_int|0xE66C3671
comma
l_int|0x7F6567CB
comma
l_int|0x0862575D
comma
l_int|0x9606C2FE
comma
l_int|0xE101F268
comma
l_int|0x7808A3D2
comma
l_int|0x0F0F9344
comma
l_int|0x82079EB1
comma
l_int|0xF500AE27
comma
l_int|0x6C09FF9D
comma
l_int|0x1B0ECF0B
comma
l_int|0x856A5AA8
comma
l_int|0xF26D6A3E
comma
l_int|0x6B643B84
comma
l_int|0x1C630B12
comma
l_int|0x8CDC1683
comma
l_int|0xFBDB2615
comma
l_int|0x62D277AF
comma
l_int|0x15D54739
comma
l_int|0x8BB1D29A
comma
l_int|0xFCB6E20C
comma
l_int|0x65BFB3B6
comma
l_int|0x12B88320
comma
l_int|0x3FBA6CAD
comma
l_int|0x48BD5C3B
comma
l_int|0xD1B40D81
comma
l_int|0xA6B33D17
comma
l_int|0x38D7A8B4
comma
l_int|0x4FD09822
comma
l_int|0xD6D9C998
comma
l_int|0xA1DEF90E
comma
l_int|0x3161E49F
comma
l_int|0x4666D409
comma
l_int|0xDF6F85B3
comma
l_int|0xA868B525
comma
l_int|0x360C2086
comma
l_int|0x410B1010
comma
l_int|0xD80241AA
comma
l_int|0xAF05713C
comma
l_int|0x220D7CC9
comma
l_int|0x550A4C5F
comma
l_int|0xCC031DE5
comma
l_int|0xBB042D73
comma
l_int|0x2560B8D0
comma
l_int|0x52678846
comma
l_int|0xCB6ED9FC
comma
l_int|0xBC69E96A
comma
l_int|0x2CD6F4FB
comma
l_int|0x5BD1C46D
comma
l_int|0xC2D895D7
comma
l_int|0xB5DFA541
comma
l_int|0x2BBB30E2
comma
l_int|0x5CBC0074
comma
l_int|0xC5B551CE
comma
l_int|0xB2B26158
comma
l_int|0x04D44C65
comma
l_int|0x73D37CF3
comma
l_int|0xEADA2D49
comma
l_int|0x9DDD1DDF
comma
l_int|0x03B9887C
comma
l_int|0x74BEB8EA
comma
l_int|0xEDB7E950
comma
l_int|0x9AB0D9C6
comma
l_int|0x0A0FC457
comma
l_int|0x7D08F4C1
comma
l_int|0xE401A57B
comma
l_int|0x930695ED
comma
l_int|0x0D62004E
comma
l_int|0x7A6530D8
comma
l_int|0xE36C6162
comma
l_int|0x946B51F4
comma
l_int|0x19635C01
comma
l_int|0x6E646C97
comma
l_int|0xF76D3D2D
comma
l_int|0x806A0DBB
comma
l_int|0x1E0E9818
comma
l_int|0x6909A88E
comma
l_int|0xF000F934
comma
l_int|0x8707C9A2
comma
l_int|0x17B8D433
comma
l_int|0x60BFE4A5
comma
l_int|0xF9B6B51F
comma
l_int|0x8EB18589
comma
l_int|0x10D5102A
comma
l_int|0x67D220BC
comma
l_int|0xFEDB7106
comma
l_int|0x89DC4190
comma
l_int|0x49662D3D
comma
l_int|0x3E611DAB
comma
l_int|0xA7684C11
comma
l_int|0xD06F7C87
comma
l_int|0x4E0BE924
comma
l_int|0x390CD9B2
comma
l_int|0xA0058808
comma
l_int|0xD702B89E
comma
l_int|0x47BDA50F
comma
l_int|0x30BA9599
comma
l_int|0xA9B3C423
comma
l_int|0xDEB4F4B5
comma
l_int|0x40D06116
comma
l_int|0x37D75180
comma
l_int|0xAEDE003A
comma
l_int|0xD9D930AC
comma
l_int|0x54D13D59
comma
l_int|0x23D60DCF
comma
l_int|0xBADF5C75
comma
l_int|0xCDD86CE3
comma
l_int|0x53BCF940
comma
l_int|0x24BBC9D6
comma
l_int|0xBDB2986C
comma
l_int|0xCAB5A8FA
comma
l_int|0x5A0AB56B
comma
l_int|0x2D0D85FD
comma
l_int|0xB404D447
comma
l_int|0xC303E4D1
comma
l_int|0x5D677172
comma
l_int|0x2A6041E4
comma
l_int|0xB369105E
comma
l_int|0xC46E20C8
comma
l_int|0x72080DF5
comma
l_int|0x050F3D63
comma
l_int|0x9C066CD9
comma
l_int|0xEB015C4F
comma
l_int|0x7565C9EC
comma
l_int|0x0262F97A
comma
l_int|0x9B6BA8C0
comma
l_int|0xEC6C9856
comma
l_int|0x7CD385C7
comma
l_int|0x0BD4B551
comma
l_int|0x92DDE4EB
comma
l_int|0xE5DAD47D
comma
l_int|0x7BBE41DE
comma
l_int|0x0CB97148
comma
l_int|0x95B020F2
comma
l_int|0xE2B71064
comma
l_int|0x6FBF1D91
comma
l_int|0x18B82D07
comma
l_int|0x81B17CBD
comma
l_int|0xF6B64C2B
comma
l_int|0x68D2D988
comma
l_int|0x1FD5E91E
comma
l_int|0x86DCB8A4
comma
l_int|0xF1DB8832
comma
l_int|0x616495A3
comma
l_int|0x1663A535
comma
l_int|0x8F6AF48F
comma
l_int|0xF86DC419
comma
l_int|0x660951BA
comma
l_int|0x110E612C
comma
l_int|0x88073096
comma
l_int|0xFF000000
)brace
suffix:semicolon
eof
