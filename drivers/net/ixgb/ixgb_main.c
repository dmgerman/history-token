multiline_comment|/*******************************************************************************&n;&n;  &n;  Copyright(c) 1999 - 2004 Intel Corporation. All rights reserved.&n;  &n;  This program is free software; you can redistribute it and/or modify it &n;  under the terms of the GNU General Public License as published by the Free &n;  Software Foundation; either version 2 of the License, or (at your option) &n;  any later version.&n;  &n;  This program is distributed in the hope that it will be useful, but WITHOUT &n;  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or &n;  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for &n;  more details.&n;  &n;  You should have received a copy of the GNU General Public License along with&n;  this program; if not, write to the Free Software Foundation, Inc., 59 &n;  Temple Place - Suite 330, Boston, MA  02111-1307, USA.&n;  &n;  The full GNU General Public License is included in this distribution in the&n;  file called LICENSE.&n;  &n;  Contact Information:&n;  Linux NICS &lt;linux.nics@intel.com&gt;&n;  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497&n;&n;*******************************************************************************/
macro_line|#include &quot;ixgb.h&quot;
multiline_comment|/* Change Log&n; * 1.0.84 10/26/04&n; * - reset buffer_info-&gt;dma in Tx resource cleanup logic&n; * 1.0.83 10/12/04&n; * - sparse cleanup - shemminger@osdl.org&n; * - fix tx resource cleanup logic&n; */
DECL|variable|ixgb_driver_name
r_char
id|ixgb_driver_name
(braket
)braket
op_assign
l_string|&quot;ixgb&quot;
suffix:semicolon
DECL|variable|ixgb_driver_string
r_char
id|ixgb_driver_string
(braket
)braket
op_assign
l_string|&quot;Intel(R) PRO/10GbE Network Driver&quot;
suffix:semicolon
macro_line|#ifndef CONFIG_IXGB_NAPI
DECL|macro|DRIVERNAPI
mdefine_line|#define DRIVERNAPI
macro_line|#else
DECL|macro|DRIVERNAPI
mdefine_line|#define DRIVERNAPI &quot;-NAPI&quot;
macro_line|#endif
DECL|variable|ixgb_driver_version
r_char
id|ixgb_driver_version
(braket
)braket
op_assign
l_string|&quot;1.0.87-k2&quot;
id|DRIVERNAPI
suffix:semicolon
DECL|variable|ixgb_copyright
r_char
id|ixgb_copyright
(braket
)braket
op_assign
l_string|&quot;Copyright (c) 1999-2004 Intel Corporation.&quot;
suffix:semicolon
multiline_comment|/* ixgb_pci_tbl - PCI Device ID Table&n; *&n; * Wildcard entries (PCI_ANY_ID) should come last&n; * Last entry must be all 0s&n; *&n; * { Vendor ID, Device ID, SubVendor ID, SubDevice ID,&n; *   Class, Class Mask, private data (not used) }&n; */
DECL|variable|ixgb_pci_tbl
r_static
r_struct
id|pci_device_id
id|ixgb_pci_tbl
(braket
)braket
op_assign
(brace
(brace
id|INTEL_VENDOR_ID
comma
id|IXGB_DEVICE_ID_82597EX
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|INTEL_VENDOR_ID
comma
id|IXGB_DEVICE_ID_82597EX_SR
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|INTEL_VENDOR_ID
comma
id|IXGB_DEVICE_ID_82597EX_LR
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
multiline_comment|/* required last entry */
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|ixgb_pci_tbl
)paren
suffix:semicolon
multiline_comment|/* Local Function Prototypes */
r_int
id|ixgb_up
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|ixgb_down
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
id|boolean_t
id|kill_watchdog
)paren
suffix:semicolon
r_void
id|ixgb_reset
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_int
id|ixgb_setup_tx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_int
id|ixgb_setup_rx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|ixgb_free_tx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|ixgb_free_rx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|ixgb_update_stats
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|ixgb_init_module
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|ixgb_exit_module
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|ixgb_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|ent
)paren
suffix:semicolon
r_static
r_void
id|__devexit
id|ixgb_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
suffix:semicolon
r_static
r_int
id|ixgb_sw_init
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|ixgb_open
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_int
id|ixgb_close
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_void
id|ixgb_configure_tx
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|ixgb_configure_rx
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|ixgb_setup_rctl
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|ixgb_clean_tx_ring
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|ixgb_clean_rx_ring
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|ixgb_set_multi
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_void
id|ixgb_watchdog
c_func
(paren
r_int
r_int
id|data
)paren
suffix:semicolon
r_static
r_int
id|ixgb_xmit_frame
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_struct
id|net_device_stats
op_star
id|ixgb_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_int
id|ixgb_change_mtu
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|new_mtu
)paren
suffix:semicolon
r_static
r_int
id|ixgb_set_mac
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_void
op_star
id|p
)paren
suffix:semicolon
r_static
id|irqreturn_t
id|ixgb_intr
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|data
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
id|boolean_t
id|ixgb_clean_tx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_IXGB_NAPI
r_static
r_int
id|ixgb_clean
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
op_star
id|budget
)paren
suffix:semicolon
r_static
id|boolean_t
id|ixgb_clean_rx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_int
op_star
id|work_done
comma
r_int
id|work_to_do
)paren
suffix:semicolon
macro_line|#else
r_static
id|boolean_t
id|ixgb_clean_rx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
macro_line|#endif
r_static
r_void
id|ixgb_alloc_rx_buffers
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|ixgb_set_ethtool_ops
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_void
id|ixgb_tx_timeout
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
r_static
r_void
id|ixgb_tx_timeout_task
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
r_static
r_void
id|ixgb_vlan_rx_register
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|vlan_group
op_star
id|grp
)paren
suffix:semicolon
r_static
r_void
id|ixgb_vlan_rx_add_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
suffix:semicolon
r_static
r_void
id|ixgb_vlan_rx_kill_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
suffix:semicolon
r_static
r_void
id|ixgb_restore_vlan
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|ixgb_notify_reboot
c_func
(paren
r_struct
id|notifier_block
op_star
comma
r_int
r_int
id|event
comma
r_void
op_star
id|ptr
)paren
suffix:semicolon
r_static
r_int
id|ixgb_suspend
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_uint32
id|state
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_NET_POLL_CONTROLLER
multiline_comment|/* for netdump / net console */
r_static
r_void
id|ixgb_netpoll
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
macro_line|#endif
DECL|variable|ixgb_notifier_reboot
r_struct
id|notifier_block
id|ixgb_notifier_reboot
op_assign
(brace
dot
id|notifier_call
op_assign
id|ixgb_notify_reboot
comma
dot
id|next
op_assign
l_int|NULL
comma
dot
id|priority
op_assign
l_int|0
)brace
suffix:semicolon
multiline_comment|/* Exported from other modules */
r_extern
r_void
id|ixgb_check_options
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
suffix:semicolon
DECL|variable|ixgb_driver
r_static
r_struct
id|pci_driver
id|ixgb_driver
op_assign
(brace
dot
id|name
op_assign
id|ixgb_driver_name
comma
dot
id|id_table
op_assign
id|ixgb_pci_tbl
comma
dot
id|probe
op_assign
id|ixgb_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|ixgb_remove
)paren
comma
multiline_comment|/* Power Managment Hooks */
dot
id|suspend
op_assign
l_int|NULL
comma
dot
id|resume
op_assign
l_int|NULL
)brace
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Intel Corporation, &lt;linux.nics@intel.com&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Intel(R) PRO/10GbE Network Driver&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
multiline_comment|/* some defines for controlling descriptor fetches in h/w */
DECL|macro|RXDCTL_PTHRESH_DEFAULT
mdefine_line|#define RXDCTL_PTHRESH_DEFAULT 128&t;/* chip considers prefech below this */
DECL|macro|RXDCTL_HTHRESH_DEFAULT
mdefine_line|#define RXDCTL_HTHRESH_DEFAULT 16&t;/* chip will only prefetch if tail is &n;&t;&t;&t;&t;&t;   pushed this many descriptors from head */
DECL|macro|RXDCTL_WTHRESH_DEFAULT
mdefine_line|#define RXDCTL_WTHRESH_DEFAULT 16&t;/* chip writes back at this many or RXT0 */
multiline_comment|/**&n; * ixgb_init_module - Driver Registration Routine&n; *&n; * ixgb_init_module is the first routine called when the driver is&n; * loaded. All it does is register with the PCI subsystem.&n; **/
r_static
r_int
id|__init
DECL|function|ixgb_init_module
id|ixgb_init_module
c_func
(paren
r_void
)paren
(brace
r_int
id|ret
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s - version %s&bslash;n&quot;
comma
id|ixgb_driver_string
comma
id|ixgb_driver_version
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s&bslash;n&quot;
comma
id|ixgb_copyright
)paren
suffix:semicolon
id|ret
op_assign
id|pci_module_init
c_func
(paren
op_amp
id|ixgb_driver
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
op_ge
l_int|0
)paren
(brace
id|register_reboot_notifier
c_func
(paren
op_amp
id|ixgb_notifier_reboot
)paren
suffix:semicolon
)brace
r_return
id|ret
suffix:semicolon
)brace
DECL|variable|ixgb_init_module
id|module_init
c_func
(paren
id|ixgb_init_module
)paren
suffix:semicolon
multiline_comment|/**&n; * ixgb_exit_module - Driver Exit Cleanup Routine&n; *&n; * ixgb_exit_module is called just before the driver is removed&n; * from memory.&n; **/
r_static
r_void
id|__exit
DECL|function|ixgb_exit_module
id|ixgb_exit_module
c_func
(paren
r_void
)paren
(brace
id|unregister_reboot_notifier
c_func
(paren
op_amp
id|ixgb_notifier_reboot
)paren
suffix:semicolon
id|pci_unregister_driver
c_func
(paren
op_amp
id|ixgb_driver
)paren
suffix:semicolon
)brace
DECL|variable|ixgb_exit_module
id|module_exit
c_func
(paren
id|ixgb_exit_module
)paren
suffix:semicolon
multiline_comment|/**&n; * ixgb_irq_disable - Mask off interrupt generation on the NIC&n; * @adapter: board private structure&n; **/
r_static
r_inline
r_void
DECL|function|ixgb_irq_disable
id|ixgb_irq_disable
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
id|atomic_inc
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMC
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|IXGB_WRITE_FLUSH
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|synchronize_irq
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_irq_enable - Enable default interrupt generation settings&n; * @adapter: board private structure&n; **/
r_static
r_inline
r_void
DECL|function|ixgb_irq_enable
id|ixgb_irq_enable
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_if
c_cond
(paren
id|atomic_dec_and_test
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
)paren
)paren
(brace
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMS
comma
id|IXGB_INT_RXT0
op_or
id|IXGB_INT_RXDMT0
op_or
id|IXGB_INT_TXDW
op_or
id|IXGB_INT_RXO
op_or
id|IXGB_INT_LSC
)paren
suffix:semicolon
id|IXGB_WRITE_FLUSH
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
)brace
)brace
r_int
DECL|function|ixgb_up
id|ixgb_up
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_int
id|err
suffix:semicolon
r_int
id|max_frame
op_assign
id|netdev-&gt;mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ENET_FCS_LENGTH
suffix:semicolon
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
multiline_comment|/* hardware has been reset, we need to reload some things */
id|ixgb_set_multi
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|ixgb_restore_vlan
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_configure_tx
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_setup_rctl
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_configure_rx
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_alloc_rx_buffers
c_func
(paren
id|adapter
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PCI_MSI
(brace
id|boolean_t
id|pcix
op_assign
(paren
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|STATUS
)paren
op_amp
id|IXGB_STATUS_PCIX_MODE
)paren
ques
c_cond
id|TRUE
suffix:colon
id|FALSE
suffix:semicolon
id|adapter-&gt;have_msi
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pcix
)paren
id|adapter-&gt;have_msi
op_assign
id|FALSE
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_msi
c_func
(paren
id|adapter-&gt;pdev
)paren
)paren
)paren
(brace
id|printk
(paren
id|KERN_ERR
l_string|&quot;Unable to allocate MSI interrupt Error: %d&bslash;n&quot;
comma
id|err
)paren
suffix:semicolon
id|adapter-&gt;have_msi
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* proceed to try to request regular interrupt */
)brace
)brace
macro_line|#endif
r_if
c_cond
(paren
(paren
id|err
op_assign
id|request_irq
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
comma
op_amp
id|ixgb_intr
comma
id|SA_SHIRQ
op_or
id|SA_SAMPLE_RANDOM
comma
id|netdev-&gt;name
comma
id|netdev
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* disable interrupts and get the hardware into a known state */
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMC
comma
l_int|0xffffffff
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|hw-&gt;max_frame_size
op_ne
id|max_frame
)paren
op_logical_or
(paren
id|hw-&gt;max_frame_size
op_ne
(paren
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|MFS
)paren
op_rshift
id|IXGB_MFS_SHIFT
)paren
)paren
)paren
(brace
id|hw-&gt;max_frame_size
op_assign
id|max_frame
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|MFS
comma
id|hw-&gt;max_frame_size
op_lshift
id|IXGB_MFS_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hw-&gt;max_frame_size
OG
id|IXGB_MAX_ENET_FRAME_SIZE_WITHOUT_FCS
op_plus
id|ENET_FCS_LENGTH
)paren
(brace
r_uint32
id|ctrl0
op_assign
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|CTRL0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|ctrl0
op_amp
id|IXGB_CTRL0_JFE
)paren
)paren
(brace
id|ctrl0
op_or_assign
id|IXGB_CTRL0_JFE
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|CTRL0
comma
id|ctrl0
)paren
suffix:semicolon
)brace
)brace
)brace
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
)paren
suffix:semicolon
id|ixgb_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_IXGB_NAPI
id|netif_poll_enable
c_func
(paren
id|netdev
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|ixgb_down
id|ixgb_down
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
id|boolean_t
id|kill_watchdog
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
id|ixgb_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
comma
id|netdev
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PCI_MSI
r_if
c_cond
(paren
id|adapter-&gt;have_msi
op_eq
id|TRUE
)paren
(brace
id|pci_disable_msi
c_func
(paren
id|adapter-&gt;pdev
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|kill_watchdog
)paren
(brace
id|del_timer_sync
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_IXGB_NAPI
id|netif_poll_disable
c_func
(paren
id|netdev
)paren
suffix:semicolon
macro_line|#endif
id|adapter-&gt;link_speed
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
l_int|0
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|ixgb_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_clean_tx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_clean_rx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_void
DECL|function|ixgb_reset
id|ixgb_reset
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
id|ixgb_adapter_stop
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ixgb_init_hw
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
)paren
(brace
id|IXGB_DBG
c_func
(paren
l_string|&quot;ixgb_init_hw failed.&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * ixgb_probe - Device Initialization Routine&n; * @pdev: PCI device information struct&n; * @ent: entry in ixgb_pci_tbl&n; *&n; * Returns 0 on success, negative on failure&n; *&n; * ixgb_probe initializes an adapter identified by a pci_dev structure.&n; * The OS initialization, configuring of the adapter private structure,&n; * and a hardware reset occur.&n; **/
r_static
r_int
id|__devinit
DECL|function|ixgb_probe
id|ixgb_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|ent
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|ixgb_adapter
op_star
id|adapter
suffix:semicolon
r_static
r_int
id|cards_found
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|mmio_start
suffix:semicolon
r_int
id|mmio_len
suffix:semicolon
r_int
id|pci_using_dac
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_enable_device
c_func
(paren
id|pdev
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|err
op_assign
id|pci_set_dma_mask
c_func
(paren
id|pdev
comma
id|DMA_64BIT_MASK
)paren
)paren
)paren
(brace
id|pci_using_dac
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_set_dma_mask
c_func
(paren
id|pdev
comma
id|DMA_32BIT_MASK
)paren
)paren
)paren
(brace
id|IXGB_ERR
c_func
(paren
l_string|&quot;No usable DMA configuration, aborting&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|pci_using_dac
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|pci_request_regions
c_func
(paren
id|pdev
comma
id|ixgb_driver_name
)paren
)paren
)paren
(brace
r_return
id|err
suffix:semicolon
)brace
id|pci_set_master
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|netdev
op_assign
id|alloc_etherdev
c_func
(paren
r_sizeof
(paren
r_struct
id|ixgb_adapter
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|netdev
)paren
(brace
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|err_alloc_etherdev
suffix:semicolon
)brace
id|SET_MODULE_OWNER
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|SET_NETDEV_DEV
c_func
(paren
id|netdev
comma
op_amp
id|pdev-&gt;dev
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
id|netdev
)paren
suffix:semicolon
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|adapter-&gt;netdev
op_assign
id|netdev
suffix:semicolon
id|adapter-&gt;pdev
op_assign
id|pdev
suffix:semicolon
id|adapter-&gt;hw.back
op_assign
id|adapter
suffix:semicolon
id|mmio_start
op_assign
id|pci_resource_start
c_func
(paren
id|pdev
comma
id|BAR_0
)paren
suffix:semicolon
id|mmio_len
op_assign
id|pci_resource_len
c_func
(paren
id|pdev
comma
id|BAR_0
)paren
suffix:semicolon
id|adapter-&gt;hw.hw_addr
op_assign
id|ioremap
c_func
(paren
id|mmio_start
comma
id|mmio_len
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|adapter-&gt;hw.hw_addr
)paren
(brace
id|err
op_assign
op_minus
id|EIO
suffix:semicolon
r_goto
id|err_ioremap
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
id|BAR_1
suffix:semicolon
id|i
op_le
id|BAR_5
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|pci_resource_len
c_func
(paren
id|pdev
comma
id|i
)paren
op_eq
l_int|0
)paren
(brace
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pci_resource_flags
c_func
(paren
id|pdev
comma
id|i
)paren
op_amp
id|IORESOURCE_IO
)paren
(brace
id|adapter-&gt;hw.io_base
op_assign
id|pci_resource_start
c_func
(paren
id|pdev
comma
id|i
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|netdev-&gt;open
op_assign
op_amp
id|ixgb_open
suffix:semicolon
id|netdev-&gt;stop
op_assign
op_amp
id|ixgb_close
suffix:semicolon
id|netdev-&gt;hard_start_xmit
op_assign
op_amp
id|ixgb_xmit_frame
suffix:semicolon
id|netdev-&gt;get_stats
op_assign
op_amp
id|ixgb_get_stats
suffix:semicolon
id|netdev-&gt;set_multicast_list
op_assign
op_amp
id|ixgb_set_multi
suffix:semicolon
id|netdev-&gt;set_mac_address
op_assign
op_amp
id|ixgb_set_mac
suffix:semicolon
id|netdev-&gt;change_mtu
op_assign
op_amp
id|ixgb_change_mtu
suffix:semicolon
id|ixgb_set_ethtool_ops
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netdev-&gt;tx_timeout
op_assign
op_amp
id|ixgb_tx_timeout
suffix:semicolon
id|netdev-&gt;watchdog_timeo
op_assign
id|HZ
suffix:semicolon
macro_line|#ifdef CONFIG_IXGB_NAPI
id|netdev-&gt;poll
op_assign
op_amp
id|ixgb_clean
suffix:semicolon
id|netdev-&gt;weight
op_assign
l_int|64
suffix:semicolon
macro_line|#endif
id|netdev-&gt;vlan_rx_register
op_assign
id|ixgb_vlan_rx_register
suffix:semicolon
id|netdev-&gt;vlan_rx_add_vid
op_assign
id|ixgb_vlan_rx_add_vid
suffix:semicolon
id|netdev-&gt;vlan_rx_kill_vid
op_assign
id|ixgb_vlan_rx_kill_vid
suffix:semicolon
macro_line|#ifdef CONFIG_NET_POLL_CONTROLLER
id|netdev-&gt;poll_controller
op_assign
id|ixgb_netpoll
suffix:semicolon
macro_line|#endif
id|netdev-&gt;mem_start
op_assign
id|mmio_start
suffix:semicolon
id|netdev-&gt;mem_end
op_assign
id|mmio_start
op_plus
id|mmio_len
suffix:semicolon
id|netdev-&gt;base_addr
op_assign
id|adapter-&gt;hw.io_base
suffix:semicolon
id|adapter-&gt;bd_number
op_assign
id|cards_found
suffix:semicolon
id|adapter-&gt;link_speed
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* setup the private structure */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|ixgb_sw_init
c_func
(paren
id|adapter
)paren
)paren
)paren
(brace
r_goto
id|err_sw_init
suffix:semicolon
)brace
id|netdev-&gt;features
op_assign
id|NETIF_F_SG
op_or
id|NETIF_F_HW_CSUM
op_or
id|NETIF_F_HW_VLAN_TX
op_or
id|NETIF_F_HW_VLAN_RX
op_or
id|NETIF_F_HW_VLAN_FILTER
suffix:semicolon
macro_line|#ifdef NETIF_F_TSO
id|netdev-&gt;features
op_or_assign
id|NETIF_F_TSO
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|pci_using_dac
)paren
(brace
id|netdev-&gt;features
op_or_assign
id|NETIF_F_HIGHDMA
suffix:semicolon
)brace
multiline_comment|/* make sure the EEPROM is good */
r_if
c_cond
(paren
op_logical_neg
id|ixgb_validate_eeprom_checksum
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;The EEPROM Checksum Is Not Valid&bslash;n&quot;
)paren
suffix:semicolon
id|err
op_assign
op_minus
id|EIO
suffix:semicolon
r_goto
id|err_eeprom
suffix:semicolon
)brace
id|ixgb_get_ee_mac_addr
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|netdev-&gt;dev_addr
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|is_valid_ether_addr
c_func
(paren
id|netdev-&gt;dev_addr
)paren
)paren
(brace
id|err
op_assign
op_minus
id|EIO
suffix:semicolon
r_goto
id|err_eeprom
suffix:semicolon
)brace
id|adapter-&gt;part_num
op_assign
id|ixgb_get_ee_pba_number
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
)paren
suffix:semicolon
id|adapter-&gt;watchdog_timer.function
op_assign
op_amp
id|ixgb_watchdog
suffix:semicolon
id|adapter-&gt;watchdog_timer.data
op_assign
(paren
r_int
r_int
)paren
id|adapter
suffix:semicolon
id|INIT_WORK
c_func
(paren
op_amp
id|adapter-&gt;tx_timeout_task
comma
(paren
r_void
(paren
op_star
)paren
(paren
r_void
op_star
)paren
)paren
id|ixgb_tx_timeout_task
comma
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|register_netdev
c_func
(paren
id|netdev
)paren
)paren
)paren
(brace
r_goto
id|err_register
suffix:semicolon
)brace
multiline_comment|/* we&squot;re going to reset, so assume we have no link for now */
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: Intel(R) PRO/10GbE Network Connection&bslash;n&quot;
comma
id|netdev-&gt;name
)paren
suffix:semicolon
id|ixgb_check_options
c_func
(paren
id|adapter
)paren
suffix:semicolon
multiline_comment|/* reset the hardware with the new settings */
id|ixgb_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|cards_found
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_register
suffix:colon
id|err_sw_init
suffix:colon
id|err_eeprom
suffix:colon
id|iounmap
c_func
(paren
id|adapter-&gt;hw.hw_addr
)paren
suffix:semicolon
id|err_ioremap
suffix:colon
id|free_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|err_alloc_etherdev
suffix:colon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_remove - Device Removal Routine&n; * @pdev: PCI device information struct&n; *&n; * ixgb_remove is called by the PCI subsystem to alert the driver&n; * that it should release a PCI device.  The could be caused by a&n; * Hot-Plug event, or because the driver is going to be removed from&n; * memory.&n; **/
r_static
r_void
id|__devexit
DECL|function|ixgb_remove
id|ixgb_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|unregister_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|iounmap
c_func
(paren
id|adapter-&gt;hw.hw_addr
)paren
suffix:semicolon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|free_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_sw_init - Initialize general software structures (struct ixgb_adapter)&n; * @adapter: board private structure to initialize&n; *&n; * ixgb_sw_init initializes the Adapter private data structure.&n; * Fields are initialized based on PCI device information and&n; * OS network device settings (MTU size).&n; **/
r_static
r_int
id|__devinit
DECL|function|ixgb_sw_init
id|ixgb_sw_init
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
multiline_comment|/* PCI config space info */
id|hw-&gt;vendor_id
op_assign
id|pdev-&gt;vendor
suffix:semicolon
id|hw-&gt;device_id
op_assign
id|pdev-&gt;device
suffix:semicolon
id|hw-&gt;subsystem_vendor_id
op_assign
id|pdev-&gt;subsystem_vendor
suffix:semicolon
id|hw-&gt;subsystem_id
op_assign
id|pdev-&gt;subsystem_device
suffix:semicolon
id|adapter-&gt;rx_buffer_len
op_assign
id|IXGB_RXBUFFER_2048
suffix:semicolon
id|hw-&gt;max_frame_size
op_assign
id|netdev-&gt;mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ENET_FCS_LENGTH
suffix:semicolon
r_if
c_cond
(paren
(paren
id|hw-&gt;device_id
op_eq
id|IXGB_DEVICE_ID_82597EX
)paren
op_logical_or
(paren
id|hw-&gt;device_id
op_eq
id|IXGB_DEVICE_ID_82597EX_LR
)paren
op_logical_or
(paren
id|hw-&gt;device_id
op_eq
id|IXGB_DEVICE_ID_82597EX_SR
)paren
)paren
(brace
id|hw-&gt;mac_type
op_assign
id|ixgb_82597
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* should never have loaded on this device */
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;ixgb: unsupported device id&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* enable flow control to be programmed */
id|hw-&gt;fc.send_xon
op_assign
l_int|1
suffix:semicolon
id|atomic_set
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
comma
l_int|1
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_open - Called when a network interface is made active&n; * @netdev: network interface device structure&n; *&n; * Returns 0 on success, negative value on failure&n; *&n; * The open entry point is called when a network interface is made&n; * active by the system (IFF_UP).  At this point all resources needed&n; * for transmit and receive operations are allocated, the interrupt&n; * handler is registered with the OS, the watchdog timer is started,&n; * and the stack is notified that the interface is ready.&n; **/
r_static
r_int
DECL|function|ixgb_open
id|ixgb_open
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
id|err
suffix:semicolon
multiline_comment|/* allocate transmit descriptors */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|ixgb_setup_tx_resources
c_func
(paren
id|adapter
)paren
)paren
)paren
(brace
r_goto
id|err_setup_tx
suffix:semicolon
)brace
multiline_comment|/* allocate receive descriptors */
r_if
c_cond
(paren
(paren
id|err
op_assign
id|ixgb_setup_rx_resources
c_func
(paren
id|adapter
)paren
)paren
)paren
(brace
r_goto
id|err_setup_rx
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|ixgb_up
c_func
(paren
id|adapter
)paren
)paren
)paren
(brace
r_goto
id|err_up
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
id|err_up
suffix:colon
id|ixgb_free_rx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|err_setup_rx
suffix:colon
id|ixgb_free_tx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|err_setup_tx
suffix:colon
id|ixgb_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_close - Disables a network interface&n; * @netdev: network interface device structure&n; *&n; * Returns 0, this is not allowed to fail&n; *&n; * The close entry point is called when an interface is de-activated&n; * by the OS.  The hardware is still under the drivers control, but&n; * needs to be disabled.  A global MAC reset is issued to stop the&n; * hardware, and all transmit and receive resources are freed.&n; **/
r_static
r_int
DECL|function|ixgb_close
id|ixgb_close
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|ixgb_down
c_func
(paren
id|adapter
comma
id|TRUE
)paren
suffix:semicolon
id|ixgb_free_tx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_free_rx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_setup_tx_resources - allocate Tx resources (Descriptors)&n; * @adapter: board private structure&n; *&n; * Return 0 on success, negative on failure&n; **/
r_int
DECL|function|ixgb_setup_tx_resources
id|ixgb_setup_tx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|txdr
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
id|size
suffix:semicolon
id|size
op_assign
r_sizeof
(paren
r_struct
id|ixgb_buffer
)paren
op_star
id|txdr-&gt;count
suffix:semicolon
id|txdr-&gt;buffer_info
op_assign
id|vmalloc
c_func
(paren
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|txdr-&gt;buffer_info
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|txdr-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* round up to nearest 4K */
id|txdr-&gt;size
op_assign
id|txdr-&gt;count
op_star
r_sizeof
(paren
r_struct
id|ixgb_tx_desc
)paren
suffix:semicolon
id|IXGB_ROUNDUP
c_func
(paren
id|txdr-&gt;size
comma
l_int|4096
)paren
suffix:semicolon
id|txdr-&gt;desc
op_assign
id|pci_alloc_consistent
c_func
(paren
id|pdev
comma
id|txdr-&gt;size
comma
op_amp
id|txdr-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|txdr-&gt;desc
)paren
(brace
id|vfree
c_func
(paren
id|txdr-&gt;buffer_info
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|txdr-&gt;desc
comma
l_int|0
comma
id|txdr-&gt;size
)paren
suffix:semicolon
id|txdr-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
id|txdr-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_configure_tx - Configure 82597 Transmit Unit after Reset.&n; * @adapter: board private structure&n; *&n; * Configure the Tx unit of the MAC after a reset.&n; **/
r_static
r_void
DECL|function|ixgb_configure_tx
id|ixgb_configure_tx
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_uint64
id|tdba
op_assign
id|adapter-&gt;tx_ring.dma
suffix:semicolon
r_uint32
id|tdlen
op_assign
id|adapter-&gt;tx_ring.count
op_star
r_sizeof
(paren
r_struct
id|ixgb_tx_desc
)paren
suffix:semicolon
r_uint32
id|tctl
suffix:semicolon
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
multiline_comment|/* Setup the Base and Length of the Tx Descriptor Ring &n;&t; * tx_ring.dma can be either a 32 or 64 bit value &n;&t; */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TDBAL
comma
(paren
id|tdba
op_amp
l_int|0x00000000ffffffffULL
)paren
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TDBAH
comma
(paren
id|tdba
op_rshift
l_int|32
)paren
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TDLEN
comma
id|tdlen
)paren
suffix:semicolon
multiline_comment|/* Setup the HW Tx Head and Tail descriptor pointers */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TDH
comma
l_int|0
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TDT
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* don&squot;t set up txdctl, it induces performance problems if&n;&t; * configured incorrectly&n;&t; txdctl  = TXDCTL_PTHRESH_DEFAULT; // prefetch txds below this threshold&n;&t; txdctl |= (TXDCTL_HTHRESH_DEFAULT // only prefetch if there are this many ready&n;&t; &lt;&lt; IXGB_TXDCTL_HTHRESH_SHIFT);&n;&t; IXGB_WRITE_REG (hw, TXDCTL, txdctl);&n;&t; */
multiline_comment|/* Set the Tx Interrupt Delay register */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TIDV
comma
id|adapter-&gt;tx_int_delay
)paren
suffix:semicolon
multiline_comment|/* Program the Transmit Control Register */
id|tctl
op_assign
id|IXGB_TCTL_TCE
op_or
id|IXGB_TCTL_TXEN
op_or
id|IXGB_TCTL_TPDE
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|TCTL
comma
id|tctl
)paren
suffix:semicolon
multiline_comment|/* Setup Transmit Descriptor Settings for this adapter */
id|adapter-&gt;tx_cmd_type
op_assign
id|IXGB_TX_DESC_TYPE
op_or
(paren
id|adapter-&gt;tx_int_delay_enable
ques
c_cond
id|IXGB_TX_DESC_CMD_IDE
suffix:colon
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_setup_rx_resources - allocate Rx resources (Descriptors)&n; * @adapter: board private structure&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_int
DECL|function|ixgb_setup_rx_resources
id|ixgb_setup_rx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|rxdr
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
id|size
suffix:semicolon
id|size
op_assign
r_sizeof
(paren
r_struct
id|ixgb_buffer
)paren
op_star
id|rxdr-&gt;count
suffix:semicolon
id|rxdr-&gt;buffer_info
op_assign
id|vmalloc
c_func
(paren
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rxdr-&gt;buffer_info
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|rxdr-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Round up to nearest 4K */
id|rxdr-&gt;size
op_assign
id|rxdr-&gt;count
op_star
r_sizeof
(paren
r_struct
id|ixgb_rx_desc
)paren
suffix:semicolon
id|IXGB_ROUNDUP
c_func
(paren
id|rxdr-&gt;size
comma
l_int|4096
)paren
suffix:semicolon
id|rxdr-&gt;desc
op_assign
id|pci_alloc_consistent
c_func
(paren
id|pdev
comma
id|rxdr-&gt;size
comma
op_amp
id|rxdr-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rxdr-&gt;desc
)paren
(brace
id|vfree
c_func
(paren
id|rxdr-&gt;buffer_info
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|rxdr-&gt;desc
comma
l_int|0
comma
id|rxdr-&gt;size
)paren
suffix:semicolon
id|rxdr-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
id|rxdr-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_setup_rctl - configure the receive control register&n; * @adapter: Board private structure&n; **/
r_static
r_void
DECL|function|ixgb_setup_rctl
id|ixgb_setup_rctl
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_uint32
id|rctl
suffix:semicolon
id|rctl
op_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_and_assign
op_complement
(paren
l_int|3
op_lshift
id|IXGB_RCTL_MO_SHIFT
)paren
suffix:semicolon
id|rctl
op_or_assign
id|IXGB_RCTL_BAM
op_or
id|IXGB_RCTL_RDMTS_1_2
op_or
id|IXGB_RCTL_RXEN
op_or
id|IXGB_RCTL_CFF
op_or
(paren
id|adapter-&gt;hw.mc_filter_type
op_lshift
id|IXGB_RCTL_MO_SHIFT
)paren
suffix:semicolon
id|rctl
op_or_assign
id|IXGB_RCTL_SECRC
suffix:semicolon
r_switch
c_cond
(paren
id|adapter-&gt;rx_buffer_len
)paren
(brace
r_case
id|IXGB_RXBUFFER_2048
suffix:colon
r_default
suffix:colon
id|rctl
op_or_assign
id|IXGB_RCTL_BSIZE_2048
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IXGB_RXBUFFER_4096
suffix:colon
id|rctl
op_or_assign
id|IXGB_RCTL_BSIZE_4096
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IXGB_RXBUFFER_8192
suffix:colon
id|rctl
op_or_assign
id|IXGB_RCTL_BSIZE_8192
suffix:semicolon
r_break
suffix:semicolon
r_case
id|IXGB_RXBUFFER_16384
suffix:colon
id|rctl
op_or_assign
id|IXGB_RCTL_BSIZE_16384
suffix:semicolon
r_break
suffix:semicolon
)brace
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_configure_rx - Configure 82597 Receive Unit after Reset.&n; * @adapter: board private structure&n; *&n; * Configure the Rx unit of the MAC after a reset.&n; **/
r_static
r_void
DECL|function|ixgb_configure_rx
id|ixgb_configure_rx
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_uint64
id|rdba
op_assign
id|adapter-&gt;rx_ring.dma
suffix:semicolon
r_uint32
id|rdlen
op_assign
id|adapter-&gt;rx_ring.count
op_star
r_sizeof
(paren
r_struct
id|ixgb_rx_desc
)paren
suffix:semicolon
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
r_uint32
id|rxcsum
suffix:semicolon
r_uint32
id|rxdctl
suffix:semicolon
multiline_comment|/* make sure receives are disabled while setting up the descriptors */
id|rctl
op_assign
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|RCTL
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RCTL
comma
id|rctl
op_amp
op_complement
id|IXGB_RCTL_RXEN
)paren
suffix:semicolon
multiline_comment|/* set the Receive Delay Timer Register */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDTR
comma
id|adapter-&gt;rx_int_delay
)paren
suffix:semicolon
multiline_comment|/* Setup the Base and Length of the Rx Descriptor Ring */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDBAL
comma
(paren
id|rdba
op_amp
l_int|0x00000000ffffffffULL
)paren
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDBAH
comma
(paren
id|rdba
op_rshift
l_int|32
)paren
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDLEN
comma
id|rdlen
)paren
suffix:semicolon
multiline_comment|/* Setup the HW Rx Head and Tail Descriptor Pointers */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDH
comma
l_int|0
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RDT
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* burst 16 or burst when RXT0*/
id|rxdctl
op_assign
id|RXDCTL_WTHRESH_DEFAULT
op_lshift
id|IXGB_RXDCTL_WTHRESH_SHIFT
op_or
id|RXDCTL_HTHRESH_DEFAULT
op_lshift
id|IXGB_RXDCTL_HTHRESH_SHIFT
op_or
id|RXDCTL_PTHRESH_DEFAULT
op_lshift
id|IXGB_RXDCTL_PTHRESH_SHIFT
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RXDCTL
comma
id|rxdctl
)paren
suffix:semicolon
multiline_comment|/* Enable Receive Checksum Offload for TCP and UDP */
r_if
c_cond
(paren
id|adapter-&gt;rx_csum
op_eq
id|TRUE
)paren
(brace
id|rxcsum
op_assign
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|RXCSUM
)paren
suffix:semicolon
id|rxcsum
op_or_assign
id|IXGB_RXCSUM_TUOFL
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RXCSUM
comma
id|rxcsum
)paren
suffix:semicolon
)brace
multiline_comment|/* Enable Receives */
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_free_tx_resources - Free Tx Resources&n; * @adapter: board private structure&n; *&n; * Free all transmit software resources&n; **/
r_void
DECL|function|ixgb_free_tx_resources
id|ixgb_free_tx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
id|ixgb_clean_tx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|vfree
c_func
(paren
id|adapter-&gt;tx_ring.buffer_info
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.buffer_info
op_assign
l_int|NULL
suffix:semicolon
id|pci_free_consistent
c_func
(paren
id|pdev
comma
id|adapter-&gt;tx_ring.size
comma
id|adapter-&gt;tx_ring.desc
comma
id|adapter-&gt;tx_ring.dma
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.desc
op_assign
l_int|NULL
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|ixgb_unmap_and_free_tx_resource
id|ixgb_unmap_and_free_tx_resource
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_struct
id|ixgb_buffer
op_star
id|buffer_info
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_if
c_cond
(paren
id|buffer_info-&gt;dma
)paren
(brace
id|pci_unmap_page
c_func
(paren
id|pdev
comma
id|buffer_info-&gt;dma
comma
id|buffer_info-&gt;length
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|buffer_info-&gt;dma
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buffer_info-&gt;skb
)paren
(brace
id|dev_kfree_skb_any
c_func
(paren
id|buffer_info-&gt;skb
)paren
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * ixgb_clean_tx_ring - Free Tx Buffers&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|ixgb_clean_tx_ring
id|ixgb_clean_tx_ring
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_int
r_int
id|size
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
multiline_comment|/* Free all the Tx ring sk_buffs */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|tx_ring-&gt;count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buffer_info
op_assign
op_amp
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|ixgb_unmap_and_free_tx_resource
c_func
(paren
id|adapter
comma
id|buffer_info
)paren
suffix:semicolon
)brace
id|size
op_assign
r_sizeof
(paren
r_struct
id|ixgb_buffer
)paren
op_star
id|tx_ring-&gt;count
suffix:semicolon
id|memset
c_func
(paren
id|tx_ring-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Zero out the descriptor ring */
id|memset
c_func
(paren
id|tx_ring-&gt;desc
comma
l_int|0
comma
id|tx_ring-&gt;size
)paren
suffix:semicolon
id|tx_ring-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
id|tx_ring-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDH
comma
l_int|0
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDT
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_free_rx_resources - Free Rx Resources&n; * @adapter: board private structure&n; *&n; * Free all receive software resources&n; **/
r_void
DECL|function|ixgb_free_rx_resources
id|ixgb_free_rx_resources
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
id|ixgb_clean_rx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|vfree
c_func
(paren
id|rx_ring-&gt;buffer_info
)paren
suffix:semicolon
id|rx_ring-&gt;buffer_info
op_assign
l_int|NULL
suffix:semicolon
id|pci_free_consistent
c_func
(paren
id|pdev
comma
id|rx_ring-&gt;size
comma
id|rx_ring-&gt;desc
comma
id|rx_ring-&gt;dma
)paren
suffix:semicolon
id|rx_ring-&gt;desc
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_clean_rx_ring - Free Rx Buffers&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|ixgb_clean_rx_ring
id|ixgb_clean_rx_ring
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
r_int
id|size
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
multiline_comment|/* Free all the Rx ring sk_buffs */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|rx_ring-&gt;count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|buffer_info
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|buffer_info-&gt;skb
)paren
(brace
id|pci_unmap_single
c_func
(paren
id|pdev
comma
id|buffer_info-&gt;dma
comma
id|buffer_info-&gt;length
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|buffer_info-&gt;skb
)paren
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|size
op_assign
r_sizeof
(paren
r_struct
id|ixgb_buffer
)paren
op_star
id|rx_ring-&gt;count
suffix:semicolon
id|memset
c_func
(paren
id|rx_ring-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Zero out the descriptor ring */
id|memset
c_func
(paren
id|rx_ring-&gt;desc
comma
l_int|0
comma
id|rx_ring-&gt;size
)paren
suffix:semicolon
id|rx_ring-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
id|rx_ring-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDH
comma
l_int|0
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDT
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_set_mac - Change the Ethernet Address of the NIC&n; * @netdev: network interface device structure&n; * @p: pointer to an address structure&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|ixgb_set_mac
id|ixgb_set_mac
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_void
op_star
id|p
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_struct
id|sockaddr
op_star
id|addr
op_assign
id|p
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|is_valid_ether_addr
c_func
(paren
id|addr-&gt;sa_data
)paren
)paren
(brace
r_return
op_minus
id|EADDRNOTAVAIL
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|netdev-&gt;dev_addr
comma
id|addr-&gt;sa_data
comma
id|netdev-&gt;addr_len
)paren
suffix:semicolon
id|ixgb_rar_set
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|addr-&gt;sa_data
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_set_multi - Multicast and Promiscuous mode set&n; * @netdev: network interface device structure&n; *&n; * The set_multi entry point is called whenever the multicast address&n; * list or the network interface flags are updated.  This routine is&n; * responsible for configuring the hardware for proper multicast,&n; * promiscuous mode, and all-multi behavior.&n; **/
r_static
r_void
DECL|function|ixgb_set_multi
id|ixgb_set_multi
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_struct
id|dev_mc_list
op_star
id|mc_ptr
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Check for Promiscuous and All Multicast modes */
id|rctl
op_assign
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|RCTL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_PROMISC
)paren
(brace
id|rctl
op_or_assign
(paren
id|IXGB_RCTL_UPE
op_or
id|IXGB_RCTL_MPE
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_ALLMULTI
)paren
(brace
id|rctl
op_or_assign
id|IXGB_RCTL_MPE
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|IXGB_RCTL_UPE
suffix:semicolon
)brace
r_else
(brace
id|rctl
op_and_assign
op_complement
(paren
id|IXGB_RCTL_UPE
op_or
id|IXGB_RCTL_MPE
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|netdev-&gt;mc_count
OG
id|IXGB_MAX_NUM_MULTICAST_ADDRESSES
)paren
(brace
id|rctl
op_or_assign
id|IXGB_RCTL_MPE
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
r_else
(brace
r_uint8
id|mta
(braket
id|netdev-&gt;mc_count
op_star
id|IXGB_ETH_LENGTH_OF_ADDRESS
)braket
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
id|hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|mc_ptr
op_assign
id|netdev-&gt;mc_list
suffix:semicolon
id|mc_ptr
suffix:semicolon
id|i
op_increment
comma
id|mc_ptr
op_assign
id|mc_ptr-&gt;next
)paren
(brace
id|memcpy
c_func
(paren
op_amp
id|mta
(braket
id|i
op_star
id|IXGB_ETH_LENGTH_OF_ADDRESS
)braket
comma
id|mc_ptr-&gt;dmi_addr
comma
id|IXGB_ETH_LENGTH_OF_ADDRESS
)paren
suffix:semicolon
)brace
id|ixgb_mc_addr_list_update
c_func
(paren
id|hw
comma
id|mta
comma
id|netdev-&gt;mc_count
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * ixgb_watchdog - Timer Call-back&n; * @data: pointer to netdev cast into an unsigned long&n; **/
r_static
r_void
DECL|function|ixgb_watchdog
id|ixgb_watchdog
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
(paren
r_struct
id|ixgb_adapter
op_star
)paren
id|data
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|ixgb_desc_ring
op_star
id|txdr
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
id|ixgb_check_for_link
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ixgb_check_for_bad_link
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
)paren
(brace
multiline_comment|/* force the reset path */
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|adapter-&gt;hw.link_up
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;ixgb: %s NIC Link is Up %d Mbps %s&bslash;n&quot;
comma
id|netdev-&gt;name
comma
l_int|10000
comma
l_string|&quot;Full Duplex&quot;
)paren
suffix:semicolon
id|adapter-&gt;link_speed
op_assign
l_int|10000
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
id|FULL_DUPLEX
suffix:semicolon
id|netif_carrier_on
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_wake_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
(brace
id|adapter-&gt;link_speed
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
l_int|0
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;ixgb: %s NIC Link is Down&bslash;n&quot;
comma
id|netdev-&gt;name
)paren
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
)brace
id|ixgb_update_stats
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
(brace
r_if
c_cond
(paren
id|IXGB_DESC_UNUSED
c_func
(paren
id|txdr
)paren
op_plus
l_int|1
OL
id|txdr-&gt;count
)paren
(brace
multiline_comment|/* We&squot;ve lost link, so the controller stops DMA,&n;&t;&t;&t; * but we&squot;ve got queued Tx work that&squot;s never going&n;&t;&t;&t; * to get done, so reset controller to flush Tx.&n;&t;&t;&t; * (Do the reset outside of interrupt context). */
id|schedule_work
c_func
(paren
op_amp
id|adapter-&gt;tx_timeout_task
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* Force detection of hung controller every watchdog period */
id|adapter-&gt;detect_tx_hung
op_assign
id|TRUE
suffix:semicolon
multiline_comment|/* generate an interrupt to force clean up of any stragglers */
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ICS
comma
id|IXGB_INT_TXDW
)paren
suffix:semicolon
multiline_comment|/* Reset the timer */
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
op_plus
l_int|2
op_star
id|HZ
)paren
suffix:semicolon
)brace
DECL|macro|IXGB_TX_FLAGS_CSUM
mdefine_line|#define IXGB_TX_FLAGS_CSUM&t;&t;0x00000001
DECL|macro|IXGB_TX_FLAGS_VLAN
mdefine_line|#define IXGB_TX_FLAGS_VLAN&t;&t;0x00000002
DECL|macro|IXGB_TX_FLAGS_TSO
mdefine_line|#define IXGB_TX_FLAGS_TSO&t;&t;0x00000004
r_static
r_inline
id|boolean_t
DECL|function|ixgb_tso
id|ixgb_tso
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
macro_line|#ifdef NETIF_F_TSO
r_struct
id|ixgb_context_desc
op_star
id|context_desc
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_uint8
id|ipcss
comma
id|ipcso
comma
id|tucss
comma
id|tucso
comma
id|hdr_len
suffix:semicolon
r_uint16
id|ipcse
comma
id|tucse
comma
id|mss
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|tso_size
)paren
)paren
(brace
id|hdr_len
op_assign
(paren
(paren
id|skb-&gt;h.raw
op_minus
id|skb-&gt;data
)paren
op_plus
(paren
id|skb-&gt;h.th-&gt;doff
op_lshift
l_int|2
)paren
)paren
suffix:semicolon
id|mss
op_assign
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|tso_size
suffix:semicolon
id|skb-&gt;nh.iph-&gt;tot_len
op_assign
l_int|0
suffix:semicolon
id|skb-&gt;nh.iph-&gt;check
op_assign
l_int|0
suffix:semicolon
id|skb-&gt;h.th-&gt;check
op_assign
op_complement
id|csum_tcpudp_magic
c_func
(paren
id|skb-&gt;nh.iph-&gt;saddr
comma
id|skb-&gt;nh.iph-&gt;daddr
comma
l_int|0
comma
id|IPPROTO_TCP
comma
l_int|0
)paren
suffix:semicolon
id|ipcss
op_assign
id|skb-&gt;nh.raw
op_minus
id|skb-&gt;data
suffix:semicolon
id|ipcso
op_assign
(paren
r_void
op_star
)paren
op_amp
(paren
id|skb-&gt;nh.iph-&gt;check
)paren
op_minus
(paren
r_void
op_star
)paren
id|skb-&gt;data
suffix:semicolon
id|ipcse
op_assign
id|skb-&gt;h.raw
op_minus
id|skb-&gt;data
op_minus
l_int|1
suffix:semicolon
id|tucss
op_assign
id|skb-&gt;h.raw
op_minus
id|skb-&gt;data
suffix:semicolon
id|tucso
op_assign
(paren
r_void
op_star
)paren
op_amp
(paren
id|skb-&gt;h.th-&gt;check
)paren
op_minus
(paren
r_void
op_star
)paren
id|skb-&gt;data
suffix:semicolon
id|tucse
op_assign
l_int|0
suffix:semicolon
id|i
op_assign
id|adapter-&gt;tx_ring.next_to_use
suffix:semicolon
id|context_desc
op_assign
id|IXGB_CONTEXT_DESC
c_func
(paren
id|adapter-&gt;tx_ring
comma
id|i
)paren
suffix:semicolon
id|context_desc-&gt;ipcss
op_assign
id|ipcss
suffix:semicolon
id|context_desc-&gt;ipcso
op_assign
id|ipcso
suffix:semicolon
id|context_desc-&gt;ipcse
op_assign
id|cpu_to_le16
c_func
(paren
id|ipcse
)paren
suffix:semicolon
id|context_desc-&gt;tucss
op_assign
id|tucss
suffix:semicolon
id|context_desc-&gt;tucso
op_assign
id|tucso
suffix:semicolon
id|context_desc-&gt;tucse
op_assign
id|cpu_to_le16
c_func
(paren
id|tucse
)paren
suffix:semicolon
id|context_desc-&gt;mss
op_assign
id|cpu_to_le16
c_func
(paren
id|mss
)paren
suffix:semicolon
id|context_desc-&gt;hdr_len
op_assign
id|hdr_len
suffix:semicolon
id|context_desc-&gt;status
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;cmd_type_len
op_assign
id|cpu_to_le32
c_func
(paren
id|IXGB_CONTEXT_DESC_TYPE
op_or
id|IXGB_CONTEXT_DESC_CMD_TSE
op_or
id|IXGB_CONTEXT_DESC_CMD_IP
op_or
id|IXGB_CONTEXT_DESC_CMD_TCP
op_or
id|IXGB_CONTEXT_DESC_CMD_RS
op_or
id|IXGB_CONTEXT_DESC_CMD_IDE
op_or
(paren
id|skb-&gt;len
op_minus
(paren
id|hdr_len
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|adapter-&gt;tx_ring.count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
id|adapter-&gt;tx_ring.next_to_use
op_assign
id|i
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
macro_line|#endif
r_return
id|FALSE
suffix:semicolon
)brace
r_static
r_inline
id|boolean_t
DECL|function|ixgb_tx_csum
id|ixgb_tx_csum
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_struct
id|ixgb_context_desc
op_star
id|context_desc
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_uint8
id|css
comma
id|cso
suffix:semicolon
r_if
c_cond
(paren
id|likely
c_func
(paren
id|skb-&gt;ip_summed
op_eq
id|CHECKSUM_HW
)paren
)paren
(brace
id|css
op_assign
id|skb-&gt;h.raw
op_minus
id|skb-&gt;data
suffix:semicolon
id|cso
op_assign
(paren
id|skb-&gt;h.raw
op_plus
id|skb-&gt;csum
)paren
op_minus
id|skb-&gt;data
suffix:semicolon
id|i
op_assign
id|adapter-&gt;tx_ring.next_to_use
suffix:semicolon
id|context_desc
op_assign
id|IXGB_CONTEXT_DESC
c_func
(paren
id|adapter-&gt;tx_ring
comma
id|i
)paren
suffix:semicolon
id|context_desc-&gt;tucss
op_assign
id|css
suffix:semicolon
id|context_desc-&gt;tucso
op_assign
id|cso
suffix:semicolon
id|context_desc-&gt;tucse
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* zero out any previously existing data in one instruction */
op_star
(paren
r_uint32
op_star
)paren
op_amp
(paren
id|context_desc-&gt;ipcss
)paren
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;status
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;hdr_len
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;mss
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;cmd_type_len
op_assign
id|cpu_to_le32
c_func
(paren
id|IXGB_CONTEXT_DESC_TYPE
op_or
id|IXGB_TX_DESC_CMD_RS
op_or
id|IXGB_TX_DESC_CMD_IDE
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|adapter-&gt;tx_ring.count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
id|adapter-&gt;tx_ring.next_to_use
op_assign
id|i
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|macro|IXGB_MAX_TXD_PWR
mdefine_line|#define IXGB_MAX_TXD_PWR&t;14
DECL|macro|IXGB_MAX_DATA_PER_TXD
mdefine_line|#define IXGB_MAX_DATA_PER_TXD&t;(1&lt;&lt;IXGB_MAX_TXD_PWR)
r_static
r_inline
r_int
DECL|function|ixgb_tx_map
id|ixgb_tx_map
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_struct
id|sk_buff
op_star
id|skb
comma
r_int
r_int
id|first
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_int
id|len
op_assign
id|skb-&gt;len
suffix:semicolon
r_int
r_int
id|offset
op_assign
l_int|0
comma
id|size
comma
id|count
op_assign
l_int|0
comma
id|i
suffix:semicolon
r_int
r_int
id|nr_frags
op_assign
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|nr_frags
suffix:semicolon
r_int
r_int
id|f
suffix:semicolon
id|len
op_sub_assign
id|skb-&gt;data_len
suffix:semicolon
id|i
op_assign
id|tx_ring-&gt;next_to_use
suffix:semicolon
r_while
c_loop
(paren
id|len
)paren
(brace
id|buffer_info
op_assign
op_amp
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|size
op_assign
id|min
c_func
(paren
id|len
comma
id|IXGB_MAX_JUMBO_FRAME_SIZE
)paren
suffix:semicolon
id|buffer_info-&gt;length
op_assign
id|size
suffix:semicolon
id|buffer_info-&gt;dma
op_assign
id|pci_map_single
c_func
(paren
id|adapter-&gt;pdev
comma
id|skb-&gt;data
op_plus
id|offset
comma
id|size
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|buffer_info-&gt;time_stamp
op_assign
id|jiffies
suffix:semicolon
id|len
op_sub_assign
id|size
suffix:semicolon
id|offset
op_add_assign
id|size
suffix:semicolon
id|count
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|tx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|f
op_assign
l_int|0
suffix:semicolon
id|f
OL
id|nr_frags
suffix:semicolon
id|f
op_increment
)paren
(brace
r_struct
id|skb_frag_struct
op_star
id|frag
suffix:semicolon
id|frag
op_assign
op_amp
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|frags
(braket
id|f
)braket
suffix:semicolon
id|len
op_assign
id|frag-&gt;size
suffix:semicolon
id|offset
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|len
)paren
(brace
id|buffer_info
op_assign
op_amp
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|size
op_assign
id|min
c_func
(paren
id|len
comma
id|IXGB_MAX_JUMBO_FRAME_SIZE
)paren
suffix:semicolon
id|buffer_info-&gt;length
op_assign
id|size
suffix:semicolon
id|buffer_info-&gt;dma
op_assign
id|pci_map_page
c_func
(paren
id|adapter-&gt;pdev
comma
id|frag-&gt;page
comma
id|frag-&gt;page_offset
op_plus
id|offset
comma
id|size
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|buffer_info-&gt;time_stamp
op_assign
id|jiffies
suffix:semicolon
id|len
op_sub_assign
id|size
suffix:semicolon
id|offset
op_add_assign
id|size
suffix:semicolon
id|count
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|tx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
id|i
op_assign
(paren
id|i
op_eq
l_int|0
)paren
ques
c_cond
id|tx_ring-&gt;count
op_minus
l_int|1
suffix:colon
id|i
op_minus
l_int|1
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
id|skb
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|first
)braket
dot
id|next_to_watch
op_assign
id|i
suffix:semicolon
r_return
id|count
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|ixgb_tx_queue
id|ixgb_tx_queue
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_int
id|count
comma
r_int
id|vlan_id
comma
r_int
id|tx_flags
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|ixgb_tx_desc
op_star
id|tx_desc
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_uint32
id|cmd_type_len
op_assign
id|adapter-&gt;tx_cmd_type
suffix:semicolon
r_uint8
id|status
op_assign
l_int|0
suffix:semicolon
r_uint8
id|popts
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|tx_flags
op_amp
id|IXGB_TX_FLAGS_TSO
)paren
(brace
id|cmd_type_len
op_or_assign
id|IXGB_TX_DESC_CMD_TSE
suffix:semicolon
id|popts
op_or_assign
(paren
id|IXGB_TX_DESC_POPTS_IXSM
op_or
id|IXGB_TX_DESC_POPTS_TXSM
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tx_flags
op_amp
id|IXGB_TX_FLAGS_CSUM
)paren
(brace
id|popts
op_or_assign
id|IXGB_TX_DESC_POPTS_TXSM
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tx_flags
op_amp
id|IXGB_TX_FLAGS_VLAN
)paren
(brace
id|cmd_type_len
op_or_assign
id|IXGB_TX_DESC_CMD_VLE
suffix:semicolon
)brace
id|i
op_assign
id|tx_ring-&gt;next_to_use
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|buffer_info
op_assign
op_amp
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|tx_desc
op_assign
id|IXGB_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|i
)paren
suffix:semicolon
id|tx_desc-&gt;buff_addr
op_assign
id|cpu_to_le64
c_func
(paren
id|buffer_info-&gt;dma
)paren
suffix:semicolon
id|tx_desc-&gt;cmd_type_len
op_assign
id|cpu_to_le32
c_func
(paren
id|cmd_type_len
op_or
id|buffer_info-&gt;length
)paren
suffix:semicolon
id|tx_desc-&gt;status
op_assign
id|status
suffix:semicolon
id|tx_desc-&gt;popts
op_assign
id|popts
suffix:semicolon
id|tx_desc-&gt;vlan
op_assign
id|cpu_to_le16
c_func
(paren
id|vlan_id
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|tx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|tx_desc-&gt;cmd_type_len
op_or_assign
id|cpu_to_le32
c_func
(paren
id|IXGB_TX_DESC_CMD_EOP
op_or
id|IXGB_TX_DESC_CMD_RS
)paren
suffix:semicolon
multiline_comment|/* Force memory writes to complete before letting h/w&n;&t; * know there are new descriptors to fetch.  (Only&n;&t; * applicable for weak-ordered memory model archs,&n;&t; * such as IA-64). */
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|tx_ring-&gt;next_to_use
op_assign
id|i
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDT
comma
id|i
)paren
suffix:semicolon
)brace
multiline_comment|/* Tx Descriptors needed, worst case */
DECL|macro|TXD_USE_COUNT
mdefine_line|#define TXD_USE_COUNT(S) (((S) &gt;&gt; IXGB_MAX_TXD_PWR) + &bslash;&n;&t;&t;&t; (((S) &amp; (IXGB_MAX_DATA_PER_TXD - 1)) ? 1 : 0))
DECL|macro|DESC_NEEDED
mdefine_line|#define DESC_NEEDED TXD_USE_COUNT(IXGB_MAX_DATA_PER_TXD) + &bslash;&n;&t;MAX_SKB_FRAGS * TXD_USE_COUNT(PAGE_SIZE) + 1
r_static
r_int
DECL|function|ixgb_xmit_frame
id|ixgb_xmit_frame
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
r_int
id|first
suffix:semicolon
r_int
r_int
id|tx_flags
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|vlan_id
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|skb-&gt;len
op_le
l_int|0
)paren
(brace
id|dev_kfree_skb_any
c_func
(paren
id|skb
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|spin_lock_irqsave
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|IXGB_DESC_UNUSED
c_func
(paren
op_amp
id|adapter-&gt;tx_ring
)paren
OL
id|DESC_NEEDED
)paren
)paren
(brace
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
op_logical_and
id|vlan_tx_tag_present
c_func
(paren
id|skb
)paren
)paren
(brace
id|tx_flags
op_or_assign
id|IXGB_TX_FLAGS_VLAN
suffix:semicolon
id|vlan_id
op_assign
id|vlan_tx_tag_get
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
id|first
op_assign
id|adapter-&gt;tx_ring.next_to_use
suffix:semicolon
r_if
c_cond
(paren
id|ixgb_tso
c_func
(paren
id|adapter
comma
id|skb
)paren
)paren
(brace
id|tx_flags
op_or_assign
id|IXGB_TX_FLAGS_TSO
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ixgb_tx_csum
c_func
(paren
id|adapter
comma
id|skb
)paren
)paren
(brace
id|tx_flags
op_or_assign
id|IXGB_TX_FLAGS_CSUM
suffix:semicolon
)brace
id|ixgb_tx_queue
c_func
(paren
id|adapter
comma
id|ixgb_tx_map
c_func
(paren
id|adapter
comma
id|skb
comma
id|first
)paren
comma
id|vlan_id
comma
id|tx_flags
)paren
suffix:semicolon
id|netdev-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_tx_timeout - Respond to a Tx Hang&n; * @netdev: network interface device structure&n; **/
r_static
r_void
DECL|function|ixgb_tx_timeout
id|ixgb_tx_timeout
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
multiline_comment|/* Do the reset outside of interrupt context */
id|schedule_work
c_func
(paren
op_amp
id|adapter-&gt;tx_timeout_task
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|ixgb_tx_timeout_task
id|ixgb_tx_timeout_task
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|ixgb_down
c_func
(paren
id|adapter
comma
id|TRUE
)paren
suffix:semicolon
id|ixgb_up
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_get_stats - Get System Network Statistics&n; * @netdev: network interface device structure&n; *&n; * Returns the address of the device statistics structure.&n; * The statistics are actually updated from the timer callback.&n; **/
r_static
r_struct
id|net_device_stats
op_star
DECL|function|ixgb_get_stats
id|ixgb_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_return
op_amp
id|adapter-&gt;net_stats
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_change_mtu - Change the Maximum Transfer Unit&n; * @netdev: network interface device structure&n; * @new_mtu: new value for maximum frame size&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|ixgb_change_mtu
id|ixgb_change_mtu
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|new_mtu
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
id|max_frame
op_assign
id|new_mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ENET_FCS_LENGTH
suffix:semicolon
r_int
id|old_max_frame
op_assign
id|netdev-&gt;mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ENET_FCS_LENGTH
suffix:semicolon
r_if
c_cond
(paren
(paren
id|max_frame
OL
id|IXGB_MIN_ENET_FRAME_SIZE_WITHOUT_FCS
op_plus
id|ENET_FCS_LENGTH
)paren
op_logical_or
(paren
id|max_frame
OG
id|IXGB_MAX_JUMBO_FRAME_SIZE
op_plus
id|ENET_FCS_LENGTH
)paren
)paren
(brace
id|IXGB_ERR
c_func
(paren
l_string|&quot;Invalid MTU setting&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|max_frame
op_le
id|IXGB_MAX_ENET_FRAME_SIZE_WITHOUT_FCS
op_plus
id|ENET_FCS_LENGTH
)paren
op_logical_or
(paren
id|max_frame
op_le
id|IXGB_RXBUFFER_2048
)paren
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|IXGB_RXBUFFER_2048
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|max_frame
op_le
id|IXGB_RXBUFFER_4096
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|IXGB_RXBUFFER_4096
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|max_frame
op_le
id|IXGB_RXBUFFER_8192
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|IXGB_RXBUFFER_8192
suffix:semicolon
)brace
r_else
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|IXGB_RXBUFFER_16384
suffix:semicolon
)brace
id|netdev-&gt;mtu
op_assign
id|new_mtu
suffix:semicolon
r_if
c_cond
(paren
id|old_max_frame
op_ne
id|max_frame
op_logical_and
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|ixgb_down
c_func
(paren
id|adapter
comma
id|TRUE
)paren
suffix:semicolon
id|ixgb_up
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_update_stats - Update the board statistics counters.&n; * @adapter: board private structure&n; **/
r_void
DECL|function|ixgb_update_stats
id|ixgb_update_stats
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
id|adapter-&gt;stats.tprl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TPRL
)paren
suffix:semicolon
id|adapter-&gt;stats.tprh
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TPRH
)paren
suffix:semicolon
id|adapter-&gt;stats.gprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.bprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|BPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.bprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|BPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.mprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.mprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.uprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|UPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.uprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|UPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.vprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.vprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.jprcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|JPRCL
)paren
suffix:semicolon
id|adapter-&gt;stats.jprch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|JPRCH
)paren
suffix:semicolon
id|adapter-&gt;stats.gorcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GORCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gorch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GORCH
)paren
suffix:semicolon
id|adapter-&gt;stats.torl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TORL
)paren
suffix:semicolon
id|adapter-&gt;stats.torh
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TORH
)paren
suffix:semicolon
id|adapter-&gt;stats.rnbc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RNBC
)paren
suffix:semicolon
id|adapter-&gt;stats.ruc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RUC
)paren
suffix:semicolon
id|adapter-&gt;stats.roc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ROC
)paren
suffix:semicolon
id|adapter-&gt;stats.rlec
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RLEC
)paren
suffix:semicolon
id|adapter-&gt;stats.crcerrs
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CRCERRS
)paren
suffix:semicolon
id|adapter-&gt;stats.icbc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ICBC
)paren
suffix:semicolon
id|adapter-&gt;stats.ecbc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ECBC
)paren
suffix:semicolon
id|adapter-&gt;stats.mpc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MPC
)paren
suffix:semicolon
id|adapter-&gt;stats.tptl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TPTL
)paren
suffix:semicolon
id|adapter-&gt;stats.tpth
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TPTH
)paren
suffix:semicolon
id|adapter-&gt;stats.gptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.bptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|BPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.bptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|BPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.mptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.mptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.uptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|UPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.uptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|UPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.vptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.vptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.jptcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|JPTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.jptch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|JPTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.gotcl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GOTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gotch
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|GOTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.totl
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TOTL
)paren
suffix:semicolon
id|adapter-&gt;stats.toth
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TOTH
)paren
suffix:semicolon
id|adapter-&gt;stats.dc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|DC
)paren
suffix:semicolon
id|adapter-&gt;stats.plt64c
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|PLT64C
)paren
suffix:semicolon
id|adapter-&gt;stats.tsctc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TSCTC
)paren
suffix:semicolon
id|adapter-&gt;stats.tsctfc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TSCTFC
)paren
suffix:semicolon
id|adapter-&gt;stats.ibic
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IBIC
)paren
suffix:semicolon
id|adapter-&gt;stats.rfc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RFC
)paren
suffix:semicolon
id|adapter-&gt;stats.lfc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|LFC
)paren
suffix:semicolon
id|adapter-&gt;stats.pfrc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|PFRC
)paren
suffix:semicolon
id|adapter-&gt;stats.pftc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|PFTC
)paren
suffix:semicolon
id|adapter-&gt;stats.mcfrc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MCFRC
)paren
suffix:semicolon
id|adapter-&gt;stats.mcftc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|MCFTC
)paren
suffix:semicolon
id|adapter-&gt;stats.xonrxc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|XONRXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xontxc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|XONTXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xoffrxc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|XOFFRXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xofftxc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|XOFFTXC
)paren
suffix:semicolon
id|adapter-&gt;stats.rjc
op_add_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RJC
)paren
suffix:semicolon
multiline_comment|/* Fill out the OS statistics structure */
id|adapter-&gt;net_stats.rx_packets
op_assign
id|adapter-&gt;stats.gprcl
suffix:semicolon
id|adapter-&gt;net_stats.tx_packets
op_assign
id|adapter-&gt;stats.gptcl
suffix:semicolon
id|adapter-&gt;net_stats.rx_bytes
op_assign
id|adapter-&gt;stats.gorcl
suffix:semicolon
id|adapter-&gt;net_stats.tx_bytes
op_assign
id|adapter-&gt;stats.gotcl
suffix:semicolon
id|adapter-&gt;net_stats.multicast
op_assign
id|adapter-&gt;stats.mprcl
suffix:semicolon
id|adapter-&gt;net_stats.collisions
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ignore RLEC as it reports errors for padded (&lt;64bytes) frames&n;&t; * with a length in the type/len field */
id|adapter-&gt;net_stats.rx_errors
op_assign
multiline_comment|/* adapter-&gt;stats.rnbc + */
id|adapter-&gt;stats.crcerrs
op_plus
id|adapter-&gt;stats.ruc
op_plus
id|adapter-&gt;stats.roc
multiline_comment|/*+ adapter-&gt;stats.rlec */
op_plus
id|adapter-&gt;stats.icbc
op_plus
id|adapter-&gt;stats.ecbc
op_plus
id|adapter-&gt;stats.mpc
suffix:semicolon
id|adapter-&gt;net_stats.rx_dropped
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
multiline_comment|/* see above&n;&t; * adapter-&gt;net_stats.rx_length_errors = adapter-&gt;stats.rlec;&n;&t; */
id|adapter-&gt;net_stats.rx_crc_errors
op_assign
id|adapter-&gt;stats.crcerrs
suffix:semicolon
id|adapter-&gt;net_stats.rx_fifo_errors
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
id|adapter-&gt;net_stats.rx_missed_errors
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
id|adapter-&gt;net_stats.rx_over_errors
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
id|adapter-&gt;net_stats.tx_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.rx_frame_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.tx_aborted_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.tx_carrier_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.tx_fifo_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.tx_heartbeat_errors
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;net_stats.tx_window_errors
op_assign
l_int|0
suffix:semicolon
)brace
DECL|macro|IXGB_MAX_INTR
mdefine_line|#define IXGB_MAX_INTR 10
multiline_comment|/**&n; * ixgb_intr - Interrupt Handler&n; * @irq: interrupt number&n; * @data: pointer to a network interface device structure&n; * @pt_regs: CPU registers structure&n; **/
r_static
id|irqreturn_t
DECL|function|ixgb_intr
id|ixgb_intr
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|data
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|data
suffix:semicolon
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_struct
id|ixgb_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_uint32
id|icr
op_assign
id|IXGB_READ_REG
c_func
(paren
id|hw
comma
id|ICR
)paren
suffix:semicolon
macro_line|#ifndef CONFIG_IXGB_NAPI
r_int
r_int
id|i
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|icr
)paren
)paren
(brace
r_return
id|IRQ_NONE
suffix:semicolon
)brace
multiline_comment|/* Not our interrupt */
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|icr
op_amp
(paren
id|IXGB_INT_RXSEQ
op_or
id|IXGB_INT_LSC
)paren
)paren
)paren
(brace
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_IXGB_NAPI
r_if
c_cond
(paren
id|netif_rx_schedule_prep
c_func
(paren
id|netdev
)paren
)paren
(brace
multiline_comment|/* Disable interrupts and register for poll. The flush &n;&t;&t;  of the posted write is intentionally left out.&n;&t;&t;*/
id|atomic_inc
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMC
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|__netif_rx_schedule
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
macro_line|#else
multiline_comment|/* yes, that is actually a &amp; and it is meant to make sure that&n;&t; * every pass through this for loop checks both receive and&n;&t; * transmit queues for completed descriptors, intended to&n;&t; * avoid starvation issues and assist tx/rx fairness. */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|IXGB_MAX_INTR
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|ixgb_clean_rx_irq
c_func
(paren
id|adapter
)paren
op_amp
op_logical_neg
id|ixgb_clean_tx_irq
c_func
(paren
id|adapter
)paren
)paren
(brace
r_break
suffix:semicolon
)brace
macro_line|#endif 
r_return
id|IRQ_HANDLED
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_IXGB_NAPI
multiline_comment|/**&n; * ixgb_clean - NAPI Rx polling callback&n; * @adapter: board private structure&n; **/
r_static
r_int
DECL|function|ixgb_clean
id|ixgb_clean
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
op_star
id|budget
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
id|work_to_do
op_assign
id|min
c_func
(paren
op_star
id|budget
comma
id|netdev-&gt;quota
)paren
suffix:semicolon
r_int
id|tx_cleaned
suffix:semicolon
r_int
id|work_done
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
r_goto
id|quit_polling
suffix:semicolon
id|tx_cleaned
op_assign
id|ixgb_clean_tx_irq
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|ixgb_clean_rx_irq
c_func
(paren
id|adapter
comma
op_amp
id|work_done
comma
id|work_to_do
)paren
suffix:semicolon
op_star
id|budget
op_sub_assign
id|work_done
suffix:semicolon
id|netdev-&gt;quota
op_sub_assign
id|work_done
suffix:semicolon
multiline_comment|/* if no Tx cleanup and not enough Rx work done, exit the polling mode */
r_if
c_cond
(paren
(paren
op_logical_neg
id|tx_cleaned
op_logical_and
(paren
id|work_done
OL
id|work_to_do
)paren
)paren
op_logical_or
op_logical_neg
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|quit_polling
suffix:colon
id|netif_rx_complete
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|ixgb_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/**&n; * ixgb_clean_tx_irq - Reclaim resources after transmit completes&n; * @adapter: board private structure&n; **/
r_static
id|boolean_t
DECL|function|ixgb_clean_tx_irq
id|ixgb_clean_tx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|ixgb_tx_desc
op_star
id|tx_desc
comma
op_star
id|eop_desc
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_int
r_int
id|i
comma
id|eop
suffix:semicolon
id|boolean_t
id|cleaned
op_assign
id|FALSE
suffix:semicolon
id|i
op_assign
id|tx_ring-&gt;next_to_clean
suffix:semicolon
id|eop
op_assign
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|next_to_watch
suffix:semicolon
id|eop_desc
op_assign
id|IXGB_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|eop
)paren
suffix:semicolon
r_while
c_loop
(paren
id|eop_desc-&gt;status
op_amp
id|IXGB_TX_DESC_STATUS_DD
)paren
(brace
r_for
c_loop
(paren
id|cleaned
op_assign
id|FALSE
suffix:semicolon
op_logical_neg
id|cleaned
suffix:semicolon
)paren
(brace
id|tx_desc
op_assign
id|IXGB_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|i
)paren
suffix:semicolon
id|buffer_info
op_assign
op_amp
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|tx_desc-&gt;popts
op_amp
(paren
id|IXGB_TX_DESC_POPTS_TXSM
op_or
id|IXGB_TX_DESC_POPTS_IXSM
)paren
)paren
id|adapter-&gt;hw_csum_tx_good
op_increment
suffix:semicolon
id|ixgb_unmap_and_free_tx_resource
c_func
(paren
id|adapter
comma
id|buffer_info
)paren
suffix:semicolon
op_star
(paren
r_uint32
op_star
)paren
op_amp
(paren
id|tx_desc-&gt;status
)paren
op_assign
l_int|0
suffix:semicolon
id|cleaned
op_assign
(paren
id|i
op_eq
id|eop
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|tx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|eop
op_assign
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|next_to_watch
suffix:semicolon
id|eop_desc
op_assign
id|IXGB_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|eop
)paren
suffix:semicolon
)brace
id|tx_ring-&gt;next_to_clean
op_assign
id|i
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cleaned
op_logical_and
id|netif_queue_stopped
c_func
(paren
id|netdev
)paren
op_logical_and
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
op_logical_and
(paren
id|IXGB_DESC_UNUSED
c_func
(paren
id|tx_ring
)paren
OG
id|IXGB_TX_QUEUE_WAKE
)paren
)paren
(brace
id|netif_wake_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;detect_tx_hung
)paren
(brace
multiline_comment|/* detect a transmit hang in hardware, this serializes the&n;&t;&t; * check with the clearing of time_stamp and movement of i */
id|adapter-&gt;detect_tx_hung
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
op_logical_and
id|time_after
c_func
(paren
id|jiffies
comma
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|time_stamp
op_plus
id|HZ
)paren
op_logical_and
op_logical_neg
(paren
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|STATUS
)paren
op_amp
id|IXGB_STATUS_TXOFF
)paren
)paren
(brace
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
)brace
r_return
id|cleaned
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_rx_checksum - Receive Checksum Offload for 82597.&n; * @adapter: board private structure&n; * @rx_desc: receive descriptor&n; * @sk_buff: socket buffer with received data&n; **/
r_static
r_inline
r_void
DECL|function|ixgb_rx_checksum
id|ixgb_rx_checksum
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_struct
id|ixgb_rx_desc
op_star
id|rx_desc
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
multiline_comment|/* Ignore Checksum bit is set OR&n;&t; * TCP Checksum has not been calculated&n;&t; */
r_if
c_cond
(paren
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_IXSM
)paren
op_logical_or
(paren
op_logical_neg
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_TCPCS
)paren
)paren
)paren
(brace
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_NONE
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* At this point we know the hardware did the TCP checksum */
multiline_comment|/* now look at the TCP checksum error bit */
r_if
c_cond
(paren
id|rx_desc-&gt;errors
op_amp
id|IXGB_RX_DESC_ERRORS_TCPE
)paren
(brace
multiline_comment|/* let the stack verify checksum errors */
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_NONE
suffix:semicolon
id|adapter-&gt;hw_csum_rx_error
op_increment
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TCP checksum is good */
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_UNNECESSARY
suffix:semicolon
id|adapter-&gt;hw_csum_rx_good
op_increment
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * ixgb_clean_rx_irq - Send received data up the network stack,&n; * @adapter: board private structure&n; **/
r_static
id|boolean_t
macro_line|#ifdef CONFIG_IXGB_NAPI
DECL|function|ixgb_clean_rx_irq
id|ixgb_clean_rx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
comma
r_int
op_star
id|work_done
comma
r_int
id|work_to_do
)paren
macro_line|#else
id|ixgb_clean_rx_irq
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
macro_line|#endif
(brace
r_struct
id|ixgb_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|ixgb_rx_desc
op_star
id|rx_desc
comma
op_star
id|next_rxd
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
comma
op_star
id|next_buffer
comma
op_star
id|next2_buffer
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
comma
op_star
id|next_skb
suffix:semicolon
r_uint32
id|length
suffix:semicolon
r_int
r_int
id|i
comma
id|j
suffix:semicolon
id|boolean_t
id|cleaned
op_assign
id|FALSE
suffix:semicolon
id|i
op_assign
id|rx_ring-&gt;next_to_clean
suffix:semicolon
id|rx_desc
op_assign
id|IXGB_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
id|buffer_info
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
r_while
c_loop
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_DD
)paren
(brace
macro_line|#ifdef CONFIG_IXGB_NAPI
r_if
c_cond
(paren
op_star
id|work_done
op_ge
id|work_to_do
)paren
(brace
r_break
suffix:semicolon
)brace
(paren
op_star
id|work_done
)paren
op_increment
suffix:semicolon
macro_line|#endif
id|skb
op_assign
id|buffer_info-&gt;skb
suffix:semicolon
id|prefetch
c_func
(paren
id|skb-&gt;data
)paren
suffix:semicolon
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|rx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
id|next_rxd
op_assign
id|IXGB_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
id|prefetch
c_func
(paren
id|next_rxd
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|j
op_assign
id|i
op_plus
l_int|1
)paren
op_eq
id|rx_ring-&gt;count
)paren
(brace
id|j
op_assign
l_int|0
suffix:semicolon
)brace
id|next2_buffer
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|j
)braket
suffix:semicolon
id|prefetch
c_func
(paren
id|next2_buffer
)paren
suffix:semicolon
id|next_buffer
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|next_skb
op_assign
id|next_buffer-&gt;skb
suffix:semicolon
id|prefetch
c_func
(paren
id|next_skb
)paren
suffix:semicolon
id|cleaned
op_assign
id|TRUE
suffix:semicolon
id|pci_unmap_single
c_func
(paren
id|pdev
comma
id|buffer_info-&gt;dma
comma
id|buffer_info-&gt;length
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|length
op_assign
id|le16_to_cpu
c_func
(paren
id|rx_desc-&gt;length
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_EOP
)paren
)paren
)paren
(brace
multiline_comment|/* All receives must fit into a single buffer */
id|IXGB_DBG
c_func
(paren
l_string|&quot;Receive packet consumed multiple buffers &quot;
l_string|&quot;length&lt;%x&gt;&bslash;n&quot;
comma
id|length
)paren
suffix:semicolon
id|dev_kfree_skb_irq
c_func
(paren
id|skb
)paren
suffix:semicolon
id|rx_desc-&gt;status
op_assign
l_int|0
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
id|rx_desc
op_assign
id|next_rxd
suffix:semicolon
id|buffer_info
op_assign
id|next_buffer
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|unlikely
c_func
(paren
id|rx_desc-&gt;errors
op_amp
(paren
id|IXGB_RX_DESC_ERRORS_CE
op_or
id|IXGB_RX_DESC_ERRORS_SE
op_or
id|IXGB_RX_DESC_ERRORS_P
op_or
id|IXGB_RX_DESC_ERRORS_RXE
)paren
)paren
)paren
(brace
id|dev_kfree_skb_irq
c_func
(paren
id|skb
)paren
suffix:semicolon
id|rx_desc-&gt;status
op_assign
l_int|0
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
id|rx_desc
op_assign
id|next_rxd
suffix:semicolon
id|buffer_info
op_assign
id|next_buffer
suffix:semicolon
r_continue
suffix:semicolon
)brace
multiline_comment|/* Good Receive */
id|skb_put
c_func
(paren
id|skb
comma
id|length
)paren
suffix:semicolon
multiline_comment|/* Receive Checksum Offload */
id|ixgb_rx_checksum
c_func
(paren
id|adapter
comma
id|rx_desc
comma
id|skb
)paren
suffix:semicolon
id|skb-&gt;protocol
op_assign
id|eth_type_trans
c_func
(paren
id|skb
comma
id|netdev
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_IXGB_NAPI
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
op_logical_and
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_VP
)paren
)paren
(brace
id|vlan_hwaccel_receive_skb
c_func
(paren
id|skb
comma
id|adapter-&gt;vlgrp
comma
id|le16_to_cpu
c_func
(paren
id|rx_desc-&gt;special
)paren
op_amp
id|IXGB_RX_DESC_SPECIAL_VLAN_MASK
)paren
suffix:semicolon
)brace
r_else
(brace
id|netif_receive_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
macro_line|#else /* CONFIG_IXGB_NAPI */
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
op_logical_and
(paren
id|rx_desc-&gt;status
op_amp
id|IXGB_RX_DESC_STATUS_VP
)paren
)paren
(brace
id|vlan_hwaccel_rx
c_func
(paren
id|skb
comma
id|adapter-&gt;vlgrp
comma
id|le16_to_cpu
c_func
(paren
id|rx_desc-&gt;special
)paren
op_amp
id|IXGB_RX_DESC_SPECIAL_VLAN_MASK
)paren
suffix:semicolon
)brace
r_else
(brace
id|netif_rx
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_IXGB_NAPI */
id|netdev-&gt;last_rx
op_assign
id|jiffies
suffix:semicolon
id|rx_desc-&gt;status
op_assign
l_int|0
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
l_int|NULL
suffix:semicolon
id|rx_desc
op_assign
id|next_rxd
suffix:semicolon
id|buffer_info
op_assign
id|next_buffer
suffix:semicolon
)brace
id|rx_ring-&gt;next_to_clean
op_assign
id|i
suffix:semicolon
id|ixgb_alloc_rx_buffers
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
id|cleaned
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_alloc_rx_buffers - Replace used receive buffers&n; * @adapter: address of board private structure&n; **/
r_static
r_void
DECL|function|ixgb_alloc_rx_buffers
id|ixgb_alloc_rx_buffers
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|ixgb_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|ixgb_rx_desc
op_star
id|rx_desc
suffix:semicolon
r_struct
id|ixgb_buffer
op_star
id|buffer_info
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_int
id|num_group_tail_writes
suffix:semicolon
r_int
id|cleancount
suffix:semicolon
id|i
op_assign
id|rx_ring-&gt;next_to_use
suffix:semicolon
id|buffer_info
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
id|cleancount
op_assign
id|IXGB_DESC_UNUSED
c_func
(paren
id|rx_ring
)paren
suffix:semicolon
id|num_group_tail_writes
op_assign
id|IXGB_RX_BUFFER_WRITE
suffix:semicolon
multiline_comment|/* leave one descriptor unused */
r_while
c_loop
(paren
op_decrement
id|cleancount
OG
l_int|0
)paren
(brace
id|rx_desc
op_assign
id|IXGB_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
id|skb
op_assign
id|dev_alloc_skb
c_func
(paren
id|adapter-&gt;rx_buffer_len
op_plus
id|NET_IP_ALIGN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|unlikely
c_func
(paren
op_logical_neg
id|skb
)paren
)paren
(brace
multiline_comment|/* Better luck next round */
r_break
suffix:semicolon
)brace
multiline_comment|/* Make buffer alignment 2 beyond a 16 byte boundary&n;&t;&t; * this will result in a 16 byte aligned IP header after&n;&t;&t; * the 14 byte MAC header is removed&n;&t;&t; */
id|skb_reserve
c_func
(paren
id|skb
comma
id|NET_IP_ALIGN
)paren
suffix:semicolon
id|skb-&gt;dev
op_assign
id|netdev
suffix:semicolon
id|buffer_info-&gt;skb
op_assign
id|skb
suffix:semicolon
id|buffer_info-&gt;length
op_assign
id|adapter-&gt;rx_buffer_len
suffix:semicolon
id|buffer_info-&gt;dma
op_assign
id|pci_map_single
c_func
(paren
id|pdev
comma
id|skb-&gt;data
comma
id|adapter-&gt;rx_buffer_len
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|rx_desc-&gt;buff_addr
op_assign
id|cpu_to_le64
c_func
(paren
id|buffer_info-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_amp
op_complement
(paren
id|num_group_tail_writes
op_minus
l_int|1
)paren
)paren
op_eq
id|i
)paren
(brace
multiline_comment|/* Force memory writes to complete before letting h/w&n;&t;&t;&t; * know there are new descriptors to fetch.  (Only&n;&t;&t;&t; * applicable for weak-ordered memory model archs,&n;&t;&t;&t; * such as IA-64). */
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDT
comma
id|i
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_increment
id|i
op_eq
id|rx_ring-&gt;count
)paren
(brace
id|i
op_assign
l_int|0
suffix:semicolon
)brace
id|buffer_info
op_assign
op_amp
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
suffix:semicolon
)brace
id|rx_ring-&gt;next_to_use
op_assign
id|i
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_vlan_rx_register - enables or disables vlan tagging/stripping.&n; * &n; * @param netdev network interface device structure&n; * @param grp indicates to enable or disable tagging/stripping&n; **/
r_static
r_void
DECL|function|ixgb_vlan_rx_register
id|ixgb_vlan_rx_register
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|vlan_group
op_star
id|grp
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|ctrl
comma
id|rctl
suffix:semicolon
id|ixgb_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|adapter-&gt;vlgrp
op_assign
id|grp
suffix:semicolon
r_if
c_cond
(paren
id|grp
)paren
(brace
multiline_comment|/* enable VLAN tag insert/strip */
id|ctrl
op_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL0
)paren
suffix:semicolon
id|ctrl
op_or_assign
id|IXGB_CTRL0_VME
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL0
comma
id|ctrl
)paren
suffix:semicolon
multiline_comment|/* enable VLAN receive filtering */
id|rctl
op_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_or_assign
id|IXGB_RCTL_VFE
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|IXGB_RCTL_CFIEN
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* disable VLAN tag insert/strip */
id|ctrl
op_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL0
)paren
suffix:semicolon
id|ctrl
op_and_assign
op_complement
id|IXGB_CTRL0_VME
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL0
comma
id|ctrl
)paren
suffix:semicolon
multiline_comment|/* disable VLAN filtering */
id|rctl
op_assign
id|IXGB_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|IXGB_RCTL_VFE
suffix:semicolon
id|IXGB_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
id|ixgb_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|ixgb_vlan_rx_add_vid
id|ixgb_vlan_rx_add_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|vfta
comma
id|index
suffix:semicolon
multiline_comment|/* add VID to filter table */
id|index
op_assign
(paren
id|vid
op_rshift
l_int|5
)paren
op_amp
l_int|0x7F
suffix:semicolon
id|vfta
op_assign
id|IXGB_READ_REG_ARRAY
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VFTA
comma
id|index
)paren
suffix:semicolon
id|vfta
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|vid
op_amp
l_int|0x1F
)paren
)paren
suffix:semicolon
id|ixgb_write_vfta
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|index
comma
id|vfta
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|ixgb_vlan_rx_kill_vid
id|ixgb_vlan_rx_kill_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|vfta
comma
id|index
suffix:semicolon
id|ixgb_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
)paren
(brace
id|adapter-&gt;vlgrp-&gt;vlan_devices
(braket
id|vid
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
id|ixgb_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
multiline_comment|/* remove VID from filter table*/
id|index
op_assign
(paren
id|vid
op_rshift
l_int|5
)paren
op_amp
l_int|0x7F
suffix:semicolon
id|vfta
op_assign
id|IXGB_READ_REG_ARRAY
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VFTA
comma
id|index
)paren
suffix:semicolon
id|vfta
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
id|vid
op_amp
l_int|0x1F
)paren
)paren
suffix:semicolon
id|ixgb_write_vfta
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|index
comma
id|vfta
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|ixgb_restore_vlan
id|ixgb_restore_vlan
c_func
(paren
r_struct
id|ixgb_adapter
op_star
id|adapter
)paren
(brace
id|ixgb_vlan_rx_register
c_func
(paren
id|adapter-&gt;netdev
comma
id|adapter-&gt;vlgrp
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
)paren
(brace
r_uint16
id|vid
suffix:semicolon
r_for
c_loop
(paren
id|vid
op_assign
l_int|0
suffix:semicolon
id|vid
OL
id|VLAN_GROUP_ARRAY_LEN
suffix:semicolon
id|vid
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|adapter-&gt;vlgrp-&gt;vlan_devices
(braket
id|vid
)braket
)paren
(brace
r_continue
suffix:semicolon
)brace
id|ixgb_vlan_rx_add_vid
c_func
(paren
id|adapter-&gt;netdev
comma
id|vid
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/**&n; * ixgb_notify_reboot - handles OS notification of reboot event.&n; * @param nb notifier block, unused&n; * @param event Event being passed to driver to act upon&n; * @param p A pointer to our net device&n; **/
r_static
r_int
DECL|function|ixgb_notify_reboot
id|ixgb_notify_reboot
c_func
(paren
r_struct
id|notifier_block
op_star
id|nb
comma
r_int
r_int
id|event
comma
r_void
op_star
id|p
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
l_int|NULL
suffix:semicolon
r_switch
c_cond
(paren
id|event
)paren
(brace
r_case
id|SYS_DOWN
suffix:colon
r_case
id|SYS_HALT
suffix:colon
r_case
id|SYS_POWER_OFF
suffix:colon
r_while
c_loop
(paren
(paren
id|pdev
op_assign
id|pci_find_device
c_func
(paren
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
id|pdev
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|pci_dev_driver
c_func
(paren
id|pdev
)paren
op_eq
op_amp
id|ixgb_driver
)paren
id|ixgb_suspend
c_func
(paren
id|pdev
comma
l_int|3
)paren
suffix:semicolon
)brace
)brace
r_return
id|NOTIFY_DONE
suffix:semicolon
)brace
multiline_comment|/**&n; * ixgb_suspend - driver suspend function called from notify.&n; * @param pdev pci driver structure used for passing to&n; * @param state power state to enter &n; **/
r_static
r_int
DECL|function|ixgb_suspend
id|ixgb_suspend
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_uint32
id|state
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|netif_device_detach
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|ixgb_down
c_func
(paren
id|adapter
comma
id|TRUE
)paren
suffix:semicolon
)brace
id|pci_save_state
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|state
op_assign
(paren
id|state
OG
l_int|0
)paren
ques
c_cond
l_int|3
suffix:colon
l_int|0
suffix:semicolon
id|pci_set_power_state
c_func
(paren
id|pdev
comma
id|state
)paren
suffix:semicolon
id|msec_delay
c_func
(paren
l_int|200
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_NET_POLL_CONTROLLER
multiline_comment|/*&n; * Polling &squot;interrupt&squot; - used by things like netconsole to send skbs&n; * without having to re-enable interrupts. It&squot;s not called while&n; * the interrupt routine is executing.&n; */
DECL|function|ixgb_netpoll
r_static
r_void
id|ixgb_netpoll
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|ixgb_adapter
op_star
id|adapter
op_assign
id|dev-&gt;priv
suffix:semicolon
id|disable_irq
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
)paren
suffix:semicolon
id|ixgb_intr
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
comma
id|dev
comma
l_int|NULL
)paren
suffix:semicolon
id|enable_irq
c_func
(paren
id|adapter-&gt;pdev-&gt;irq
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ixgb_main.c */
eof
