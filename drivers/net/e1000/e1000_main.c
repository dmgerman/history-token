multiline_comment|/*******************************************************************************&n;&n;  This software program is available to you under a choice of one of two&n;  licenses. You may choose to be licensed under either the GNU General Public&n;  License 2.0, June 1991, available at http://www.fsf.org/copyleft/gpl.html,&n;  or the Intel BSD + Patent License, the text of which follows:&n;  &n;  Recipient has requested a license and Intel Corporation (&quot;Intel&quot;) is willing&n;  to grant a license for the software entitled Linux Base Driver for the&n;  Intel(R) PRO/1000 Family of Adapters (e1000) (the &quot;Software&quot;) being provided&n;  by Intel Corporation. The following definitions apply to this license:&n;  &n;  &quot;Licensed Patents&quot; means patent claims licensable by Intel Corporation which&n;  are necessarily infringed by the use of sale of the Software alone or when&n;  combined with the operating system referred to below.&n;  &n;  &quot;Recipient&quot; means the party to whom Intel delivers this Software.&n;  &n;  &quot;Licensee&quot; means Recipient and those third parties that receive a license to&n;  any operating system available under the GNU General Public License 2.0 or&n;  later.&n;  &n;  Copyright (c) 1999 - 2002 Intel Corporation.&n;  All rights reserved.&n;  &n;  The license is provided to Recipient and Recipient&squot;s Licensees under the&n;  following terms.&n;  &n;  Redistribution and use in source and binary forms of the Software, with or&n;  without modification, are permitted provided that the following conditions&n;  are met:&n;  &n;  Redistributions of source code of the Software may retain the above&n;  copyright notice, this list of conditions and the following disclaimer.&n;  &n;  Redistributions in binary form of the Software may reproduce the above&n;  copyright notice, this list of conditions and the following disclaimer in&n;  the documentation and/or materials provided with the distribution.&n;  &n;  Neither the name of Intel Corporation nor the names of its contributors&n;  shall be used to endorse or promote products derived from this Software&n;  without specific prior written permission.&n;  &n;  Intel hereby grants Recipient and Licensees a non-exclusive, worldwide,&n;  royalty-free patent license under Licensed Patents to make, use, sell, offer&n;  to sell, import and otherwise transfer the Software, if any, in source code&n;  and object code form. This license shall include changes to the Software&n;  that are error corrections or other minor changes to the Software that do&n;  not add functionality or features when the Software is incorporated in any&n;  version of an operating system that has been distributed under the GNU&n;  General Public License 2.0 or later. This patent license shall apply to the&n;  combination of the Software and any operating system licensed under the GNU&n;  General Public License 2.0 or later if, at the time Intel provides the&n;  Software to Recipient, such addition of the Software to the then publicly&n;  available versions of such operating systems available under the GNU General&n;  Public License 2.0 or later (whether in gold, beta or alpha form) causes&n;  such combination to be covered by the Licensed Patents. The patent license&n;  shall not apply to any other combinations which include the Software. NO&n;  hardware per se is licensed hereunder.&n;  &n;  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;&n;  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE&n;  IMPLIED WARRANTIES OF MECHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE&n;  ARE DISCLAIMED. IN NO EVENT SHALL INTEL OR IT CONTRIBUTORS BE LIABLE FOR ANY&n;  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES&n;  (INCLUDING, BUT NOT LIMITED, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;&n;  ANY LOSS OF USE; DATA, OR PROFITS; OR BUSINESS INTERUPTION) HOWEVER CAUSED&n;  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY OR&n;  TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE&n;  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&n;&n;*******************************************************************************/
DECL|macro|__E1000_MAIN__
mdefine_line|#define __E1000_MAIN__
macro_line|#include &quot;e1000.h&quot;
DECL|variable|e1000_driver_name
r_char
id|e1000_driver_name
(braket
)braket
op_assign
l_string|&quot;e1000&quot;
suffix:semicolon
DECL|variable|e1000_driver_string
r_char
id|e1000_driver_string
(braket
)braket
op_assign
l_string|&quot;Intel(R) PRO/1000 Network Driver&quot;
suffix:semicolon
DECL|variable|e1000_driver_version
r_char
id|e1000_driver_version
(braket
)braket
op_assign
l_string|&quot;4.2.8&quot;
suffix:semicolon
DECL|variable|e1000_copyright
r_char
id|e1000_copyright
(braket
)braket
op_assign
l_string|&quot;Copyright (c) 1999-2002 Intel Corporation.&quot;
suffix:semicolon
multiline_comment|/* e1000_pci_tbl - PCI Device ID Table&n; *&n; * Private driver_data field (last one) stores an index into e1000_strings&n; * Wildcard entries (PCI_ANY_ID) should come last&n; * Last entry must be all 0s&n; *&n; * { Vendor ID, Device ID, SubVendor ID, SubDevice ID,&n; *   Class, Class Mask, String Index }&n; */
DECL|variable|__devinitdata
r_static
r_struct
id|pci_device_id
id|e1000_pci_tbl
(braket
)braket
id|__devinitdata
op_assign
(brace
multiline_comment|/* Intel(R) PRO/1000 Network Connection */
(brace
l_int|0x8086
comma
l_int|0x1000
comma
l_int|0x8086
comma
l_int|0x1000
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1001
comma
l_int|0x8086
comma
l_int|0x1003
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1004
comma
l_int|0x8086
comma
l_int|0x1004
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1008
comma
l_int|0x8086
comma
l_int|0x1107
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1009
comma
l_int|0x8086
comma
l_int|0x1109
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x100C
comma
l_int|0x8086
comma
l_int|0x1112
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x100E
comma
l_int|0x8086
comma
l_int|0x001E
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
multiline_comment|/* Compaq Gigabit Ethernet Server Adapter */
(brace
l_int|0x8086
comma
l_int|0x1000
comma
l_int|0x0E11
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1001
comma
l_int|0x0E11
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1004
comma
l_int|0x0E11
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
comma
multiline_comment|/* IBM Mobile, Desktop &amp; Server Adapters */
(brace
l_int|0x8086
comma
l_int|0x1000
comma
l_int|0x1014
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|2
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1001
comma
l_int|0x1014
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|2
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1004
comma
l_int|0x1014
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|2
)brace
comma
multiline_comment|/* Generic */
(brace
l_int|0x8086
comma
l_int|0x1000
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1001
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1004
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1008
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x1009
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x100C
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x100D
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0x8086
comma
l_int|0x100E
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
multiline_comment|/* required last entry */
(brace
l_int|0
comma
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|e1000_pci_tbl
)paren
suffix:semicolon
DECL|variable|e1000_strings
r_static
r_char
op_star
id|e1000_strings
(braket
)braket
op_assign
(brace
l_string|&quot;Intel(R) PRO/1000 Network Connection&quot;
comma
l_string|&quot;Compaq Gigabit Ethernet Server Adapter&quot;
comma
l_string|&quot;IBM Mobile, Desktop &amp; Server Adapters&quot;
)brace
suffix:semicolon
multiline_comment|/* e1000_main.c Function Prototypes */
r_int
id|e1000_up
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|e1000_down
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_void
id|e1000_reset
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|e1000_init_module
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|e1000_exit_module
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|e1000_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|ent
)paren
suffix:semicolon
r_static
r_void
id|e1000_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
suffix:semicolon
r_static
r_void
id|e1000_sw_init
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|e1000_open
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_int
id|e1000_close
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_int
id|e1000_setup_tx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|e1000_setup_rx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_configure_tx
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_configure_rx
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_setup_rctl
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_clean_tx_ring
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_clean_rx_ring
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_free_tx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_free_rx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_set_multi
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_void
id|e1000_update_phy_info
c_func
(paren
r_int
r_int
id|data
)paren
suffix:semicolon
r_static
r_void
id|e1000_watchdog
c_func
(paren
r_int
r_int
id|data
)paren
suffix:semicolon
r_static
r_int
id|e1000_xmit_frame
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_void
id|e1000_tx_timeout
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
r_static
r_struct
id|net_device_stats
op_star
id|e1000_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
suffix:semicolon
r_static
r_int
id|e1000_change_mtu
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|new_mtu
)paren
suffix:semicolon
r_static
r_int
id|e1000_set_mac
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_void
op_star
id|p
)paren
suffix:semicolon
r_static
r_void
id|e1000_update_stats
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_inline
r_void
id|e1000_irq_disable
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_inline
r_void
id|e1000_irq_enable
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_intr
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|data
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_static
r_void
id|e1000_clean_tx_irq
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_clean_rx_irq
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_alloc_rx_buffers
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_int
id|e1000_ioctl
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ifreq
op_star
id|ifr
comma
r_int
id|cmd
)paren
suffix:semicolon
r_static
r_void
id|e1000_enter_82542_rst
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_void
id|e1000_leave_82542_rst
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_static
r_inline
r_void
id|e1000_rx_checksum
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
comma
r_struct
id|e1000_rx_desc
op_star
id|rx_desc
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|e1000_enable_WOL
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
macro_line|#ifdef NETIF_F_HW_VLAN_TX
r_static
r_void
id|e1000_vlan_rx_register
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|vlan_group
op_star
id|grp
)paren
suffix:semicolon
r_static
r_void
id|e1000_vlan_rx_add_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
suffix:semicolon
r_static
r_void
id|e1000_vlan_rx_kill_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Exported from other modules */
r_extern
r_void
id|e1000_check_options
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_extern
r_void
id|e1000_proc_dev_setup
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_extern
r_void
id|e1000_proc_dev_free
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
suffix:semicolon
r_extern
r_int
id|e1000_ethtool_ioctl
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ifreq
op_star
id|ifr
)paren
suffix:semicolon
DECL|variable|e1000_driver
r_static
r_struct
id|pci_driver
id|e1000_driver
op_assign
(brace
id|name
suffix:colon
id|e1000_driver_name
comma
id|id_table
suffix:colon
id|e1000_pci_tbl
comma
id|probe
suffix:colon
id|e1000_probe
comma
id|remove
suffix:colon
id|__devexit_p
c_func
(paren
id|e1000_remove
)paren
comma
multiline_comment|/* Power Managment Hooks */
id|suspend
suffix:colon
l_int|NULL
comma
id|resume
suffix:colon
l_int|NULL
)brace
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Intel Corporation, &lt;linux.nics@intel.com&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Intel(R) PRO/1000 Network Driver&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;Dual BSD/GPL&quot;
)paren
suffix:semicolon
id|EXPORT_NO_SYMBOLS
suffix:semicolon
multiline_comment|/**&n; * e1000_init_module - Driver Registration Routine&n; *&n; * e1000_init_module is the first routine called when the driver is&n; * loaded. All it does is register with the PCI subsystem.&n; **/
r_static
r_int
id|__init
DECL|function|e1000_init_module
id|e1000_init_module
c_func
(paren
r_void
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s - version %s&bslash;n&quot;
comma
id|e1000_driver_string
comma
id|e1000_driver_version
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s&bslash;n&quot;
comma
id|e1000_copyright
)paren
suffix:semicolon
r_return
id|pci_module_init
c_func
(paren
op_amp
id|e1000_driver
)paren
suffix:semicolon
)brace
DECL|variable|e1000_init_module
id|module_init
c_func
(paren
id|e1000_init_module
)paren
suffix:semicolon
multiline_comment|/**&n; * e1000_exit_module - Driver Exit Cleanup Routine&n; *&n; * e1000_exit_module is called just before the driver is removed&n; * from memory.&n; **/
r_static
r_void
id|__exit
DECL|function|e1000_exit_module
id|e1000_exit_module
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|e1000_driver
)paren
suffix:semicolon
)brace
DECL|variable|e1000_exit_module
id|module_exit
c_func
(paren
id|e1000_exit_module
)paren
suffix:semicolon
r_int
DECL|function|e1000_up
id|e1000_up
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|netdev-&gt;irq
comma
op_amp
id|e1000_intr
comma
id|SA_SHIRQ
comma
id|netdev-&gt;name
comma
id|netdev
)paren
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
multiline_comment|/* hardware has been reset, we need to reload some things */
id|e1000_set_multi
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e1000_configure_tx
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_setup_rctl
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_configure_rx
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_alloc_rx_buffers
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
)paren
suffix:semicolon
id|e1000_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|e1000_down
id|e1000_down
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
id|e1000_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|netdev-&gt;irq
comma
id|netdev
)paren
suffix:semicolon
id|del_timer_sync
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
)paren
suffix:semicolon
id|del_timer_sync
c_func
(paren
op_amp
id|adapter-&gt;phy_info_timer
)paren
suffix:semicolon
id|adapter-&gt;link_speed
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
l_int|0
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e1000_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_clean_tx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_clean_rx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_void
DECL|function|e1000_reset
id|e1000_reset
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
multiline_comment|/* Repartition Pba for greater than 9k mtu&n;&t; * To take effect CTRL.RST is required.&n;&t; */
r_if
c_cond
(paren
id|adapter-&gt;rx_buffer_len
OG
id|E1000_RXBUFFER_8192
)paren
(brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|PBA
comma
id|E1000_JUMBO_PBA
)paren
suffix:semicolon
)brace
r_else
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|PBA
comma
id|E1000_DEFAULT_PBA
)paren
suffix:semicolon
id|adapter-&gt;hw.fc
op_assign
id|adapter-&gt;hw.original_fc
suffix:semicolon
id|e1000_reset_hw
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|e1000_init_hw
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|e1000_reset_adaptive
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|e1000_phy_get_info
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
op_amp
id|adapter-&gt;phy_info
)paren
suffix:semicolon
id|e1000_enable_WOL
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_probe - Device Initialization Routine&n; * @pdev: PCI device information struct&n; * @ent: entry in e1000_pci_tbl&n; *&n; * Returns 0 on success, negative on failure&n; *&n; * e1000_probe initializes an adapter identified by a pci_dev structure.&n; * The OS initialization, configuring of the adapter private structure,&n; * and a hardware reset occur.&n; **/
r_static
r_int
id|__devinit
DECL|function|e1000_probe
id|e1000_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|ent
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
suffix:semicolon
r_struct
id|e1000_adapter
op_star
id|adapter
suffix:semicolon
r_static
r_int
id|cards_found
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|mmio_start
suffix:semicolon
r_int
id|mmio_len
suffix:semicolon
r_int
id|pci_using_dac
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_assign
id|pci_enable_device
c_func
(paren
id|pdev
)paren
)paren
)paren
(brace
r_return
id|i
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_assign
id|pci_set_dma_mask
c_func
(paren
id|pdev
comma
(paren
id|u64
)paren
l_int|0xffffffffffffffff
)paren
)paren
)paren
(brace
id|pci_using_dac
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|pci_set_dma_mask
c_func
(paren
id|pdev
comma
(paren
id|u64
)paren
l_int|0xffffffff
)paren
)paren
)paren
(brace
id|E1000_ERR
c_func
(paren
l_string|&quot;No usable DMA configuration, aborting&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|i
suffix:semicolon
)brace
id|pci_using_dac
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|i
op_assign
id|pci_request_regions
c_func
(paren
id|pdev
comma
id|e1000_driver_name
)paren
)paren
)paren
(brace
r_return
id|i
suffix:semicolon
)brace
id|pci_set_master
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|netdev
op_assign
id|alloc_etherdev
c_func
(paren
r_sizeof
(paren
r_struct
id|e1000_adapter
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|netdev
)paren
(brace
r_goto
id|err_alloc_etherdev
suffix:semicolon
)brace
id|SET_MODULE_OWNER
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pdev
comma
id|netdev
)paren
suffix:semicolon
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|adapter-&gt;netdev
op_assign
id|netdev
suffix:semicolon
id|adapter-&gt;pdev
op_assign
id|pdev
suffix:semicolon
id|adapter-&gt;hw.back
op_assign
id|adapter
suffix:semicolon
id|mmio_start
op_assign
id|pci_resource_start
c_func
(paren
id|pdev
comma
id|BAR_0
)paren
suffix:semicolon
id|mmio_len
op_assign
id|pci_resource_len
c_func
(paren
id|pdev
comma
id|BAR_0
)paren
suffix:semicolon
id|adapter-&gt;hw.hw_addr
op_assign
id|ioremap
c_func
(paren
id|mmio_start
comma
id|mmio_len
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|adapter-&gt;hw.hw_addr
)paren
(brace
r_goto
id|err_ioremap
suffix:semicolon
)brace
id|netdev-&gt;open
op_assign
op_amp
id|e1000_open
suffix:semicolon
id|netdev-&gt;stop
op_assign
op_amp
id|e1000_close
suffix:semicolon
id|netdev-&gt;hard_start_xmit
op_assign
op_amp
id|e1000_xmit_frame
suffix:semicolon
id|netdev-&gt;get_stats
op_assign
op_amp
id|e1000_get_stats
suffix:semicolon
id|netdev-&gt;set_multicast_list
op_assign
op_amp
id|e1000_set_multi
suffix:semicolon
id|netdev-&gt;set_mac_address
op_assign
op_amp
id|e1000_set_mac
suffix:semicolon
id|netdev-&gt;change_mtu
op_assign
op_amp
id|e1000_change_mtu
suffix:semicolon
id|netdev-&gt;do_ioctl
op_assign
op_amp
id|e1000_ioctl
suffix:semicolon
id|netdev-&gt;tx_timeout
op_assign
op_amp
id|e1000_tx_timeout
suffix:semicolon
id|netdev-&gt;watchdog_timeo
op_assign
id|HZ
suffix:semicolon
macro_line|#ifdef NETIF_F_HW_VLAN_TX
id|netdev-&gt;vlan_rx_register
op_assign
id|e1000_vlan_rx_register
suffix:semicolon
id|netdev-&gt;vlan_rx_add_vid
op_assign
id|e1000_vlan_rx_add_vid
suffix:semicolon
id|netdev-&gt;vlan_rx_kill_vid
op_assign
id|e1000_vlan_rx_kill_vid
suffix:semicolon
macro_line|#endif
id|netdev-&gt;irq
op_assign
id|pdev-&gt;irq
suffix:semicolon
id|netdev-&gt;base_addr
op_assign
id|mmio_start
suffix:semicolon
id|adapter-&gt;bd_number
op_assign
id|cards_found
suffix:semicolon
id|adapter-&gt;id_string
op_assign
id|e1000_strings
(braket
id|ent-&gt;driver_data
)braket
suffix:semicolon
multiline_comment|/* setup the private structure */
id|e1000_sw_init
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
op_ge
id|e1000_82543
)paren
(brace
macro_line|#ifdef NETIF_F_HW_VLAN_TX
id|netdev-&gt;features
op_assign
id|NETIF_F_SG
op_or
id|NETIF_F_HW_CSUM
op_or
id|NETIF_F_HW_VLAN_TX
op_or
id|NETIF_F_HW_VLAN_RX
op_or
id|NETIF_F_HW_VLAN_FILTER
suffix:semicolon
macro_line|#else
id|netdev-&gt;features
op_assign
id|NETIF_F_SG
op_or
id|NETIF_F_HW_CSUM
suffix:semicolon
macro_line|#endif
)brace
r_else
(brace
id|netdev-&gt;features
op_assign
id|NETIF_F_SG
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pci_using_dac
)paren
(brace
id|netdev-&gt;features
op_or_assign
id|NETIF_F_HIGHDMA
suffix:semicolon
)brace
multiline_comment|/* make sure the EEPROM is good */
r_if
c_cond
(paren
id|e1000_validate_eeprom_checksum
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
OL
l_int|0
)paren
(brace
r_goto
id|err_eeprom
suffix:semicolon
)brace
multiline_comment|/* copy the MAC address out of the EEPROM */
id|e1000_read_mac_addr
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|netdev-&gt;dev_addr
comma
id|adapter-&gt;hw.mac_addr
comma
id|netdev-&gt;addr_len
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|is_valid_ether_addr
c_func
(paren
id|netdev-&gt;dev_addr
)paren
)paren
(brace
r_goto
id|err_eeprom
suffix:semicolon
)brace
id|e1000_read_part_num
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
op_amp
(paren
id|adapter-&gt;part_num
)paren
)paren
suffix:semicolon
id|e1000_get_bus_info
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|adapter-&gt;hw.mac_type
op_eq
id|e1000_82544
)paren
op_logical_and
(paren
id|adapter-&gt;hw.bus_type
op_eq
id|e1000_bus_type_pcix
)paren
)paren
(brace
id|adapter-&gt;max_data_per_txd
op_assign
l_int|4096
suffix:semicolon
)brace
r_else
id|adapter-&gt;max_data_per_txd
op_assign
id|MAX_JUMBO_FRAME_SIZE
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
)paren
suffix:semicolon
id|adapter-&gt;watchdog_timer.function
op_assign
op_amp
id|e1000_watchdog
suffix:semicolon
id|adapter-&gt;watchdog_timer.data
op_assign
(paren
r_int
r_int
)paren
id|adapter
suffix:semicolon
id|init_timer
c_func
(paren
op_amp
id|adapter-&gt;phy_info_timer
)paren
suffix:semicolon
id|adapter-&gt;phy_info_timer.function
op_assign
op_amp
id|e1000_update_phy_info
suffix:semicolon
id|adapter-&gt;phy_info_timer.data
op_assign
(paren
r_int
r_int
)paren
id|adapter
suffix:semicolon
id|register_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
multiline_comment|/* we&squot;re going to reset, so assume we have no link for now */
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: %s&bslash;n&quot;
comma
id|netdev-&gt;name
comma
id|adapter-&gt;id_string
)paren
suffix:semicolon
id|e1000_check_options
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_proc_dev_setup
c_func
(paren
id|adapter
)paren
suffix:semicolon
multiline_comment|/* reset the hardware with the new settings */
id|e1000_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|cards_found
op_increment
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_eeprom
suffix:colon
id|iounmap
c_func
(paren
id|adapter-&gt;hw.hw_addr
)paren
suffix:semicolon
id|err_ioremap
suffix:colon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|err_alloc_etherdev
suffix:colon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_remove - Device Removal Routine&n; * @pdev: PCI device information struct&n; *&n; * e1000_remove is called by the PCI subsystem to alert the driver&n; * that it should release a PCI device.  The could be caused by a&n; * Hot-Plug event, or because the driver is going to be removed from&n; * memory.&n; **/
r_static
r_void
id|__devexit
DECL|function|e1000_remove
id|e1000_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pdev
)paren
suffix:semicolon
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|unregister_netdev
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|e1000_phy_hw_reset
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
id|e1000_proc_dev_free
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|iounmap
c_func
(paren
id|adapter-&gt;hw.hw_addr
)paren
suffix:semicolon
id|pci_release_regions
c_func
(paren
id|pdev
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_sw_init - Initialize general software structures (struct e1000_adapter)&n; * @adapter: board private structure to initialize&n; *&n; * e1000_sw_init initializes the Adapter private data structure.&n; * Fields are initialized based on PCI device information and&n; * OS network device settings (MTU size).&n; **/
r_static
r_void
id|__devinit
DECL|function|e1000_sw_init
id|e1000_sw_init
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
multiline_comment|/* PCI config space info */
r_uint16
op_star
id|vendor
op_assign
op_amp
id|hw-&gt;vendor_id
suffix:semicolon
r_uint16
op_star
id|device
op_assign
op_amp
id|hw-&gt;device_id
suffix:semicolon
r_uint16
op_star
id|subvendor
op_assign
op_amp
id|hw-&gt;subsystem_vendor_id
suffix:semicolon
r_uint16
op_star
id|subsystem
op_assign
op_amp
id|hw-&gt;subsystem_id
suffix:semicolon
r_uint8
op_star
id|revision
op_assign
op_amp
id|hw-&gt;revision_id
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_VENDOR_ID
comma
id|vendor
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_DEVICE_ID
comma
id|device
)paren
suffix:semicolon
id|pci_read_config_byte
c_func
(paren
id|pdev
comma
id|PCI_REVISION_ID
comma
id|revision
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_SUBSYSTEM_VENDOR_ID
comma
id|subvendor
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_SUBSYSTEM_ID
comma
id|subsystem
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pdev
comma
id|PCI_COMMAND
comma
op_amp
id|hw-&gt;pci_cmd_word
)paren
suffix:semicolon
id|adapter-&gt;rx_buffer_len
op_assign
id|E1000_RXBUFFER_2048
suffix:semicolon
id|hw-&gt;max_frame_size
op_assign
id|netdev-&gt;mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ETHERNET_FCS_SIZE
suffix:semicolon
id|hw-&gt;min_frame_size
op_assign
id|MINIMUM_ETHERNET_FRAME_SIZE
suffix:semicolon
multiline_comment|/* identify the MAC */
r_switch
c_cond
(paren
op_star
id|device
)paren
(brace
r_case
id|E1000_DEV_ID_82542
suffix:colon
r_switch
c_cond
(paren
op_star
id|revision
)paren
(brace
r_case
id|E1000_82542_2_0_REV_ID
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82542_rev2_0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_82542_2_1_REV_ID
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82542_rev2_1
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82542_rev2_0
suffix:semicolon
id|E1000_ERR
c_func
(paren
l_string|&quot;Could not identify 82542 revision&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|E1000_DEV_ID_82543GC_FIBER
suffix:colon
r_case
id|E1000_DEV_ID_82543GC_COPPER
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82543
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_DEV_ID_82544EI_COPPER
suffix:colon
r_case
id|E1000_DEV_ID_82544EI_FIBER
suffix:colon
r_case
id|E1000_DEV_ID_82544GC_COPPER
suffix:colon
r_case
id|E1000_DEV_ID_82544GC_LOM
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82544
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_DEV_ID_82540EM
suffix:colon
id|hw-&gt;mac_type
op_assign
id|e1000_82540
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* should never have loaded on this device */
id|BUG
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/* flow control settings */
id|hw-&gt;fc_high_water
op_assign
id|FC_DEFAULT_HI_THRESH
suffix:semicolon
id|hw-&gt;fc_low_water
op_assign
id|FC_DEFAULT_LO_THRESH
suffix:semicolon
id|hw-&gt;fc_pause_time
op_assign
id|FC_DEFAULT_TX_TIMER
suffix:semicolon
id|hw-&gt;fc_send_xon
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* Media type - copper or fiber */
r_if
c_cond
(paren
id|hw-&gt;mac_type
op_ge
id|e1000_82543
)paren
(brace
r_uint32
id|status
op_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|STATUS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
id|E1000_STATUS_TBIMODE
)paren
(brace
id|hw-&gt;media_type
op_assign
id|e1000_media_type_fiber
suffix:semicolon
)brace
r_else
id|hw-&gt;media_type
op_assign
id|e1000_media_type_copper
suffix:semicolon
)brace
r_else
(brace
id|hw-&gt;media_type
op_assign
id|e1000_media_type_fiber
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hw-&gt;mac_type
OL
id|e1000_82543
)paren
(brace
id|hw-&gt;report_tx_early
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|hw-&gt;report_tx_early
op_assign
l_int|1
suffix:semicolon
id|hw-&gt;wait_autoneg_complete
op_assign
id|FALSE
suffix:semicolon
id|hw-&gt;tbi_compatibility_en
op_assign
id|TRUE
suffix:semicolon
id|hw-&gt;adaptive_ifs
op_assign
id|TRUE
suffix:semicolon
id|atomic_set
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
comma
l_int|1
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
suffix:semicolon
id|spin_lock_init
c_func
(paren
op_amp
id|adapter-&gt;stats_lock
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_open - Called when a network interface is made active&n; * @netdev: network interface device structure&n; *&n; * Returns 0 on success, negative value on failure&n; *&n; * The open entry point is called when a network interface is made&n; * active by the system (IFF_UP).  At this point all resources needed&n; * for transmit and receive operations are allocated, the interrupt&n; * handler is registered with the OS, the watchdog timer is started,&n; * and the stack is notified that the interface is ready.&n; **/
r_static
r_int
DECL|function|e1000_open
id|e1000_open
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
multiline_comment|/* allocate transmit descriptors */
r_if
c_cond
(paren
id|e1000_setup_tx_resources
c_func
(paren
id|adapter
)paren
)paren
(brace
r_goto
id|err_setup_tx
suffix:semicolon
)brace
multiline_comment|/* allocate receive descriptors */
r_if
c_cond
(paren
id|e1000_setup_rx_resources
c_func
(paren
id|adapter
)paren
)paren
(brace
r_goto
id|err_setup_rx
suffix:semicolon
)brace
r_if
c_cond
(paren
id|e1000_up
c_func
(paren
id|adapter
)paren
)paren
(brace
r_goto
id|err_up
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
id|err_up
suffix:colon
id|e1000_free_rx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|err_setup_rx
suffix:colon
id|e1000_free_tx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|err_setup_tx
suffix:colon
id|e1000_reset
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_close - Disables a network interface&n; * @netdev: network interface device structure&n; *&n; * Returns 0, this is not allowed to fail&n; *&n; * The close entry point is called when an interface is de-activated&n; * by the OS.  The hardware is still under the drivers control, but&n; * needs to be disabled.  A global MAC reset is issued to stop the&n; * hardware, and all transmit and receive resources are freed.&n; **/
r_static
r_int
DECL|function|e1000_close
id|e1000_close
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|e1000_down
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_free_tx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_free_rx_resources
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_setup_tx_resources - allocate Tx resources (Descriptors)&n; * @adapter: board private structure&n; *&n; * Return 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|e1000_setup_tx_resources
id|e1000_setup_tx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|txdr
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
id|size
suffix:semicolon
id|size
op_assign
r_sizeof
(paren
r_struct
id|e1000_buffer
)paren
op_star
id|txdr-&gt;count
suffix:semicolon
id|txdr-&gt;buffer_info
op_assign
id|kmalloc
c_func
(paren
id|size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|txdr-&gt;buffer_info
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|txdr-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* round up to nearest 4K */
id|txdr-&gt;size
op_assign
id|txdr-&gt;count
op_star
r_sizeof
(paren
r_struct
id|e1000_tx_desc
)paren
suffix:semicolon
id|E1000_ROUNDUP
c_func
(paren
id|txdr-&gt;size
comma
l_int|4096
)paren
suffix:semicolon
id|txdr-&gt;desc
op_assign
id|pci_alloc_consistent
c_func
(paren
id|pdev
comma
id|txdr-&gt;size
comma
op_amp
id|txdr-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|txdr-&gt;desc
)paren
(brace
id|kfree
c_func
(paren
id|txdr-&gt;buffer_info
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|txdr-&gt;desc
comma
l_int|0
comma
id|txdr-&gt;size
)paren
suffix:semicolon
id|txdr-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
id|txdr-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_configure_tx - Configure 8254x Transmit Unit after Reset&n; * @adapter: board private structure&n; *&n; * Configure the Tx unit of the MAC after a reset.&n; **/
r_static
r_void
DECL|function|e1000_configure_tx
id|e1000_configure_tx
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_uint64
id|tdba
op_assign
id|adapter-&gt;tx_ring.dma
suffix:semicolon
r_uint32
id|tdlen
op_assign
id|adapter-&gt;tx_ring.count
op_star
r_sizeof
(paren
r_struct
id|e1000_tx_desc
)paren
suffix:semicolon
r_uint32
id|tctl
comma
id|tipg
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDBAL
comma
(paren
id|tdba
op_amp
l_int|0x00000000FFFFFFFF
)paren
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDBAH
comma
(paren
id|tdba
op_rshift
l_int|32
)paren
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDLEN
comma
id|tdlen
)paren
suffix:semicolon
multiline_comment|/* Setup the HW Tx Head and Tail descriptor pointers */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDH
comma
l_int|0
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDT
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Set the default values for the Tx Inter Packet Gap timer */
r_switch
c_cond
(paren
id|adapter-&gt;hw.mac_type
)paren
(brace
r_case
id|e1000_82542_rev2_0
suffix:colon
r_case
id|e1000_82542_rev2_1
suffix:colon
id|tipg
op_assign
id|DEFAULT_82542_TIPG_IPGT
suffix:semicolon
id|tipg
op_or_assign
id|DEFAULT_82542_TIPG_IPGR1
op_lshift
id|E1000_TIPG_IPGR1_SHIFT
suffix:semicolon
id|tipg
op_or_assign
id|DEFAULT_82542_TIPG_IPGR2
op_lshift
id|E1000_TIPG_IPGR2_SHIFT
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|adapter-&gt;hw.media_type
op_eq
id|e1000_media_type_fiber
)paren
(brace
id|tipg
op_assign
id|DEFAULT_82543_TIPG_IPGT_FIBER
suffix:semicolon
)brace
r_else
id|tipg
op_assign
id|DEFAULT_82543_TIPG_IPGT_COPPER
suffix:semicolon
id|tipg
op_or_assign
id|DEFAULT_82543_TIPG_IPGR1
op_lshift
id|E1000_TIPG_IPGR1_SHIFT
suffix:semicolon
id|tipg
op_or_assign
id|DEFAULT_82543_TIPG_IPGR2
op_lshift
id|E1000_TIPG_IPGR2_SHIFT
suffix:semicolon
)brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TIPG
comma
id|tipg
)paren
suffix:semicolon
multiline_comment|/* Set the Tx Interrupt Delay register */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TIDV
comma
l_int|64
)paren
suffix:semicolon
multiline_comment|/* Program the Transmit Control Register */
id|tctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TCTL
)paren
suffix:semicolon
id|tctl
op_and_assign
op_complement
id|E1000_TCTL_CT
suffix:semicolon
id|tctl
op_or_assign
id|E1000_TCTL_EN
op_or
id|E1000_TCTL_PSP
op_or
(paren
id|E1000_COLLISION_THRESHOLD
op_lshift
id|E1000_CT_SHIFT
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TCTL
comma
id|tctl
)paren
suffix:semicolon
id|e1000_config_collision_dist
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
multiline_comment|/* Setup Transmit Descriptor Settings for this adapter */
id|adapter-&gt;txd_cmd
op_assign
id|E1000_TXD_CMD_IFCS
op_or
id|E1000_TXD_CMD_IDE
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;hw.report_tx_early
op_eq
l_int|1
)paren
(brace
id|adapter-&gt;txd_cmd
op_or_assign
id|E1000_TXD_CMD_RS
suffix:semicolon
)brace
r_else
id|adapter-&gt;txd_cmd
op_or_assign
id|E1000_TXD_CMD_RPS
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_setup_rx_resources - allocate Rx resources (Descriptors)&n; * @adapter: board private structure&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|e1000_setup_rx_resources
id|e1000_setup_rx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|rxdr
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
id|size
suffix:semicolon
id|size
op_assign
r_sizeof
(paren
r_struct
id|e1000_buffer
)paren
op_star
id|rxdr-&gt;count
suffix:semicolon
id|rxdr-&gt;buffer_info
op_assign
id|kmalloc
c_func
(paren
id|size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rxdr-&gt;buffer_info
)paren
(brace
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|rxdr-&gt;buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Round up to nearest 4K */
id|rxdr-&gt;size
op_assign
id|rxdr-&gt;count
op_star
r_sizeof
(paren
r_struct
id|e1000_rx_desc
)paren
suffix:semicolon
id|E1000_ROUNDUP
c_func
(paren
id|rxdr-&gt;size
comma
l_int|4096
)paren
suffix:semicolon
id|rxdr-&gt;desc
op_assign
id|pci_alloc_consistent
c_func
(paren
id|pdev
comma
id|rxdr-&gt;size
comma
op_amp
id|rxdr-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rxdr-&gt;desc
)paren
(brace
id|kfree
c_func
(paren
id|rxdr-&gt;buffer_info
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|rxdr-&gt;desc
comma
l_int|0
comma
id|rxdr-&gt;size
)paren
suffix:semicolon
id|rxdr-&gt;next_to_clean
op_assign
l_int|0
suffix:semicolon
id|rxdr-&gt;next_to_use
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_setup_rctl - configure the receive control register&n; * @adapter: Board private structure&n; **/
r_static
r_void
DECL|function|e1000_setup_rctl
id|e1000_setup_rctl
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_uint32
id|rctl
suffix:semicolon
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_and_assign
op_complement
(paren
l_int|3
op_lshift
id|E1000_RCTL_MO_SHIFT
)paren
suffix:semicolon
id|rctl
op_or_assign
id|E1000_RCTL_EN
op_or
id|E1000_RCTL_BAM
op_or
id|E1000_RCTL_LBM_NO
op_or
id|E1000_RCTL_RDMTS_HALF
op_or
(paren
id|adapter-&gt;hw.mc_filter_type
op_lshift
id|E1000_RCTL_MO_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;hw.tbi_compatibility_on
op_eq
l_int|1
)paren
(brace
id|rctl
op_or_assign
id|E1000_RCTL_SBP
suffix:semicolon
)brace
r_else
id|rctl
op_and_assign
op_complement
id|E1000_RCTL_SBP
suffix:semicolon
id|rctl
op_and_assign
op_complement
(paren
id|E1000_RCTL_SZ_4096
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|adapter-&gt;rx_buffer_len
)paren
(brace
r_case
id|E1000_RXBUFFER_2048
suffix:colon
r_default
suffix:colon
id|rctl
op_or_assign
id|E1000_RCTL_SZ_2048
suffix:semicolon
id|rctl
op_and_assign
op_complement
(paren
id|E1000_RCTL_BSEX
op_or
id|E1000_RCTL_LPE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_RXBUFFER_4096
suffix:colon
id|rctl
op_or_assign
id|E1000_RCTL_SZ_4096
op_or
id|E1000_RCTL_BSEX
op_or
id|E1000_RCTL_LPE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_RXBUFFER_8192
suffix:colon
id|rctl
op_or_assign
id|E1000_RCTL_SZ_8192
op_or
id|E1000_RCTL_BSEX
op_or
id|E1000_RCTL_LPE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|E1000_RXBUFFER_16384
suffix:colon
id|rctl
op_or_assign
id|E1000_RCTL_SZ_16384
op_or
id|E1000_RCTL_BSEX
op_or
id|E1000_RCTL_LPE
suffix:semicolon
r_break
suffix:semicolon
)brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_configure_rx - Configure 8254x Receive Unit after Reset&n; * @adapter: board private structure&n; *&n; * Configure the Rx unit of the MAC after a reset.&n; **/
r_static
r_void
DECL|function|e1000_configure_rx
id|e1000_configure_rx
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_uint64
id|rdba
op_assign
id|adapter-&gt;rx_ring.dma
suffix:semicolon
r_uint32
id|rdlen
op_assign
id|adapter-&gt;rx_ring.count
op_star
r_sizeof
(paren
r_struct
id|e1000_rx_desc
)paren
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
r_uint32
id|rxcsum
suffix:semicolon
multiline_comment|/* make sure receives are disabled while setting up the descriptors */
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
op_amp
op_complement
id|E1000_RCTL_EN
)paren
suffix:semicolon
multiline_comment|/* set the Receive Delay Timer Register */
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
op_eq
id|e1000_82540
)paren
(brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RADV
comma
id|adapter-&gt;rx_int_delay
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDTR
comma
l_int|64
)paren
suffix:semicolon
multiline_comment|/* Set the interrupt throttling rate.  Value is calculated&n;&t;&t; * as DEFAULT_ITR = 1/(MAX_INTS_PER_SEC * 256ns) */
DECL|macro|MAX_INTS_PER_SEC
mdefine_line|#define MAX_INTS_PER_SEC        8000
DECL|macro|DEFAULT_ITR
mdefine_line|#define DEFAULT_ITR             1000000000/(MAX_INTS_PER_SEC * 256)
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ITR
comma
id|DEFAULT_ITR
)paren
suffix:semicolon
)brace
r_else
(brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDTR
comma
id|adapter-&gt;rx_int_delay
)paren
suffix:semicolon
)brace
multiline_comment|/* Setup the Base and Length of the Rx Descriptor Ring */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDBAL
comma
(paren
id|rdba
op_amp
l_int|0x00000000FFFFFFFF
)paren
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDBAH
comma
(paren
id|rdba
op_rshift
l_int|32
)paren
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDLEN
comma
id|rdlen
)paren
suffix:semicolon
multiline_comment|/* Setup the HW Rx Head and Tail Descriptor Pointers */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDH
comma
l_int|0
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDT
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Enable 82543 Receive Checksum Offload for TCP and UDP */
r_if
c_cond
(paren
(paren
id|adapter-&gt;hw.mac_type
op_ge
id|e1000_82543
)paren
op_logical_and
(paren
id|adapter-&gt;rx_csum
op_eq
id|TRUE
)paren
)paren
(brace
id|rxcsum
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RXCSUM
)paren
suffix:semicolon
id|rxcsum
op_or_assign
id|E1000_RXCSUM_TUOFL
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RXCSUM
comma
id|rxcsum
)paren
suffix:semicolon
)brace
multiline_comment|/* Enable Receives */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_free_tx_resources - Free Tx Resources&n; * @adapter: board private structure&n; *&n; * Free all transmit software resources&n; **/
r_static
r_void
DECL|function|e1000_free_tx_resources
id|e1000_free_tx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
id|e1000_clean_tx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|adapter-&gt;tx_ring.buffer_info
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.buffer_info
op_assign
l_int|NULL
suffix:semicolon
id|pci_free_consistent
c_func
(paren
id|pdev
comma
id|adapter-&gt;tx_ring.size
comma
id|adapter-&gt;tx_ring.desc
comma
id|adapter-&gt;tx_ring.dma
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.desc
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_clean_tx_ring - Free Tx Buffers&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|e1000_clean_tx_ring
id|e1000_clean_tx_ring
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
r_int
id|size
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Free all the Tx ring sk_buffs */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|adapter-&gt;tx_ring.count
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter-&gt;tx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
(brace
id|pci_unmap_page
c_func
(paren
id|pdev
comma
id|adapter-&gt;tx_ring.buffer_info
(braket
id|i
)braket
dot
id|dma
comma
id|adapter-&gt;tx_ring.buffer_info
(braket
id|i
)braket
dot
id|length
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|adapter-&gt;tx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|size
op_assign
r_sizeof
(paren
r_struct
id|e1000_buffer
)paren
op_star
id|adapter-&gt;tx_ring.count
suffix:semicolon
id|memset
c_func
(paren
id|adapter-&gt;tx_ring.buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Zero out the descriptor ring */
id|memset
c_func
(paren
id|adapter-&gt;tx_ring.desc
comma
l_int|0
comma
id|adapter-&gt;tx_ring.size
)paren
suffix:semicolon
id|adapter-&gt;tx_ring.next_to_use
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;tx_ring.next_to_clean
op_assign
l_int|0
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDH
comma
l_int|0
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDT
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_free_rx_resources - Free Rx Resources&n; * @adapter: board private structure&n; *&n; * Free all receive software resources&n; **/
r_static
r_void
DECL|function|e1000_free_rx_resources
id|e1000_free_rx_resources
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
id|e1000_clean_rx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|adapter-&gt;rx_ring.buffer_info
)paren
suffix:semicolon
id|adapter-&gt;rx_ring.buffer_info
op_assign
l_int|NULL
suffix:semicolon
id|pci_free_consistent
c_func
(paren
id|pdev
comma
id|adapter-&gt;rx_ring.size
comma
id|adapter-&gt;rx_ring.desc
comma
id|adapter-&gt;rx_ring.dma
)paren
suffix:semicolon
id|adapter-&gt;rx_ring.desc
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_clean_rx_ring - Free Rx Buffers&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|e1000_clean_rx_ring
id|e1000_clean_rx_ring
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_int
r_int
id|size
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Free all the Rx ring sk_buffs */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|adapter-&gt;rx_ring.count
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|adapter-&gt;rx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
(brace
id|pci_unmap_single
c_func
(paren
id|pdev
comma
id|adapter-&gt;rx_ring.buffer_info
(braket
id|i
)braket
dot
id|dma
comma
id|adapter-&gt;rx_ring.buffer_info
(braket
id|i
)braket
dot
id|length
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|dev_kfree_skb
c_func
(paren
id|adapter-&gt;rx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
suffix:semicolon
id|adapter-&gt;rx_ring.buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
id|size
op_assign
r_sizeof
(paren
r_struct
id|e1000_buffer
)paren
op_star
id|adapter-&gt;rx_ring.count
suffix:semicolon
id|memset
c_func
(paren
id|adapter-&gt;rx_ring.buffer_info
comma
l_int|0
comma
id|size
)paren
suffix:semicolon
multiline_comment|/* Zero out the descriptor ring */
id|memset
c_func
(paren
id|adapter-&gt;rx_ring.desc
comma
l_int|0
comma
id|adapter-&gt;rx_ring.size
)paren
suffix:semicolon
id|adapter-&gt;rx_ring.next_to_clean
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;rx_ring.next_to_use
op_assign
l_int|0
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDH
comma
l_int|0
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDT
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* The 82542 2.0 (revision 2) needs to have the receive unit in reset&n; * and memory write and invalidate disabled for certain operations&n; */
r_static
r_void
DECL|function|e1000_enter_82542_rst
id|e1000_enter_82542_rst
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_uint16
id|pci_command_word
op_assign
id|adapter-&gt;hw.pci_cmd_word
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
r_if
c_cond
(paren
id|pci_command_word
op_amp
id|PCI_COMMAND_INVALIDATE
)paren
(brace
id|pci_command_word
op_and_assign
op_complement
id|PCI_COMMAND_INVALIDATE
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|pdev
comma
id|PCI_COMMAND
comma
id|pci_command_word
)paren
suffix:semicolon
)brace
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_or_assign
id|E1000_RCTL_RST
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
id|msec_delay
c_func
(paren
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e1000_clean_rx_ring
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|e1000_leave_82542_rst
id|e1000_leave_82542_rst
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_uint16
id|pci_command_word
op_assign
id|adapter-&gt;hw.pci_cmd_word
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|E1000_RCTL_RST
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
id|msec_delay
c_func
(paren
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pci_command_word
op_amp
id|PCI_COMMAND_INVALIDATE
)paren
(brace
id|pci_write_config_word
c_func
(paren
id|pdev
comma
id|PCI_COMMAND
comma
id|pci_command_word
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e1000_configure_rx
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_alloc_rx_buffers
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_set_mac - Change the Ethernet Address of the NIC&n; * @netdev: network interface device structure&n; * @p: pointer to an address structure&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|e1000_set_mac
id|e1000_set_mac
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_void
op_star
id|p
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_struct
id|sockaddr
op_star
id|addr
op_assign
id|p
suffix:semicolon
multiline_comment|/* 82542 2.0 needs to be in reset to write receive address registers */
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
op_eq
id|e1000_82542_rev2_0
)paren
(brace
id|e1000_enter_82542_rst
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|netdev-&gt;dev_addr
comma
id|addr-&gt;sa_data
comma
id|netdev-&gt;addr_len
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|adapter-&gt;hw.mac_addr
comma
id|addr-&gt;sa_data
comma
id|netdev-&gt;addr_len
)paren
suffix:semicolon
id|e1000_rar_set
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|adapter-&gt;hw.mac_addr
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
op_eq
id|e1000_82542_rev2_0
)paren
(brace
id|e1000_leave_82542_rst
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_set_multi - Multicast and Promiscuous mode set&n; * @netdev: network interface device structure&n; *&n; * The set_multi entry point is called whenever the multicast address&n; * list or the network interface flags are updated.  This routine is&n; * resposible for configuring the hardware for proper multicast,&n; * promiscuous mode, and all-multi behavior.&n; **/
r_static
r_void
DECL|function|e1000_set_multi
id|e1000_set_multi
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_struct
id|e1000_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_struct
id|dev_mc_list
op_star
id|mc_ptr
suffix:semicolon
r_uint32
id|rctl
suffix:semicolon
r_uint32
id|hash_value
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Check for Promiscuous and All Multicast modes */
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RCTL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_PROMISC
)paren
(brace
id|rctl
op_or_assign
(paren
id|E1000_RCTL_UPE
op_or
id|E1000_RCTL_MPE
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|netdev-&gt;flags
op_amp
id|IFF_ALLMULTI
)paren
(brace
id|rctl
op_or_assign
id|E1000_RCTL_MPE
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|E1000_RCTL_UPE
suffix:semicolon
)brace
r_else
(brace
id|rctl
op_and_assign
op_complement
(paren
id|E1000_RCTL_UPE
op_or
id|E1000_RCTL_MPE
)paren
suffix:semicolon
)brace
id|E1000_WRITE_REG
c_func
(paren
id|hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
multiline_comment|/* 82542 2.0 needs to be in reset to write receive address registers */
r_if
c_cond
(paren
id|hw-&gt;mac_type
op_eq
id|e1000_82542_rev2_0
)paren
(brace
id|e1000_enter_82542_rst
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
multiline_comment|/* load the first 15 multicast address into the exact filters 1-15&n;&t; * RAR 0 is used for the station MAC adddress&n;&t; * if there are not 15 addresses, go ahead and clear the filters&n;&t; */
id|mc_ptr
op_assign
id|netdev-&gt;mc_list
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|E1000_RAR_ENTRIES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|mc_ptr
)paren
(brace
id|e1000_rar_set
c_func
(paren
id|hw
comma
id|mc_ptr-&gt;dmi_addr
comma
id|i
)paren
suffix:semicolon
id|mc_ptr
op_assign
id|mc_ptr-&gt;next
suffix:semicolon
)brace
r_else
(brace
id|E1000_WRITE_REG_ARRAY
c_func
(paren
id|hw
comma
id|RA
comma
id|i
op_lshift
l_int|1
comma
l_int|0
)paren
suffix:semicolon
id|E1000_WRITE_REG_ARRAY
c_func
(paren
id|hw
comma
id|RA
comma
(paren
id|i
op_lshift
l_int|1
)paren
op_plus
l_int|1
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* clear the old settings from the multicast hash table */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E1000_NUM_MTA_REGISTERS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|E1000_WRITE_REG_ARRAY
c_func
(paren
id|hw
comma
id|MTA
comma
id|i
comma
l_int|0
)paren
suffix:semicolon
)brace
multiline_comment|/* load any remaining addresses into the hash table */
r_for
c_loop
(paren
suffix:semicolon
id|mc_ptr
suffix:semicolon
id|mc_ptr
op_assign
id|mc_ptr-&gt;next
)paren
(brace
id|hash_value
op_assign
id|e1000_hash_mc_addr
c_func
(paren
id|hw
comma
id|mc_ptr-&gt;dmi_addr
)paren
suffix:semicolon
id|e1000_mta_set
c_func
(paren
id|hw
comma
id|hash_value
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hw-&gt;mac_type
op_eq
id|e1000_82542_rev2_0
)paren
(brace
id|e1000_leave_82542_rst
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* need to wait a few seconds after link up to get diagnostic information from the phy */
r_static
r_void
DECL|function|e1000_update_phy_info
id|e1000_update_phy_info
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
(paren
r_struct
id|e1000_adapter
op_star
)paren
id|data
suffix:semicolon
id|e1000_phy_get_info
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
op_amp
id|adapter-&gt;phy_info
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_watchdog - Timer Call-back&n; * @data: pointer to netdev cast into an unsigned long&n; **/
r_static
r_void
DECL|function|e1000_watchdog
id|e1000_watchdog
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
(paren
r_struct
id|e1000_adapter
op_star
)paren
id|data
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
id|e1000_check_for_link
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
r_if
c_cond
(paren
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|STATUS
)paren
op_amp
id|E1000_STATUS_LU
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e1000_get_speed_and_duplex
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
op_amp
id|adapter-&gt;link_speed
comma
op_amp
id|adapter-&gt;link_duplex
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;e1000: %s NIC Link is Up %d Mbps %s&bslash;n&quot;
comma
id|netdev-&gt;name
comma
id|adapter-&gt;link_speed
comma
id|adapter-&gt;link_duplex
op_eq
id|FULL_DUPLEX
ques
c_cond
l_string|&quot;Full Duplex&quot;
suffix:colon
l_string|&quot;Half Duplex&quot;
)paren
suffix:semicolon
id|netif_carrier_on
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|adapter-&gt;trans_finish
op_assign
id|jiffies
suffix:semicolon
id|netif_wake_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;phy_info_timer
comma
id|jiffies
op_plus
l_int|2
op_star
id|HZ
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
)paren
(brace
id|adapter-&gt;link_speed
op_assign
l_int|0
suffix:semicolon
id|adapter-&gt;link_duplex
op_assign
l_int|0
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;e1000: %s NIC Link is Down&bslash;n&quot;
comma
id|netdev-&gt;name
)paren
suffix:semicolon
id|netif_carrier_off
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;phy_info_timer
comma
id|jiffies
op_plus
l_int|2
op_star
id|HZ
)paren
suffix:semicolon
)brace
)brace
id|e1000_update_stats
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_update_adaptive
c_func
(paren
op_amp
id|adapter-&gt;hw
)paren
suffix:semicolon
multiline_comment|/* Reset the timer */
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
op_plus
l_int|2
op_star
id|HZ
)paren
suffix:semicolon
)brace
DECL|macro|E1000_TX_FLAGS_CSUM
mdefine_line|#define E1000_TX_FLAGS_CSUM&t;&t;0x00000001
DECL|macro|E1000_TX_FLAGS_VLAN
mdefine_line|#define E1000_TX_FLAGS_VLAN&t;&t;0x00000002
DECL|macro|E1000_TX_FLAGS_VLAN_MASK
mdefine_line|#define E1000_TX_FLAGS_VLAN_MASK&t;0xffff0000
DECL|macro|E1000_TX_FLAGS_VLAN_SHIFT
mdefine_line|#define E1000_TX_FLAGS_VLAN_SHIFT&t;16
r_static
r_inline
id|boolean_t
DECL|function|e1000_tx_csum
id|e1000_tx_csum
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_struct
id|e1000_context_desc
op_star
id|context_desc
suffix:semicolon
r_int
id|i
suffix:semicolon
r_uint8
id|css
comma
id|cso
suffix:semicolon
r_if
c_cond
(paren
id|skb-&gt;ip_summed
op_eq
id|CHECKSUM_HW
)paren
(brace
id|css
op_assign
id|skb-&gt;h.raw
op_minus
id|skb-&gt;data
suffix:semicolon
id|cso
op_assign
(paren
id|skb-&gt;h.raw
op_plus
id|skb-&gt;csum
)paren
op_minus
id|skb-&gt;data
suffix:semicolon
id|i
op_assign
id|adapter-&gt;tx_ring.next_to_use
suffix:semicolon
id|context_desc
op_assign
id|E1000_CONTEXT_DESC
c_func
(paren
id|adapter-&gt;tx_ring
comma
id|i
)paren
suffix:semicolon
id|context_desc-&gt;upper_setup.tcp_fields.tucss
op_assign
id|css
suffix:semicolon
id|context_desc-&gt;upper_setup.tcp_fields.tucso
op_assign
id|cso
suffix:semicolon
id|context_desc-&gt;upper_setup.tcp_fields.tucse
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;tcp_seg_setup.data
op_assign
l_int|0
suffix:semicolon
id|context_desc-&gt;cmd_and_length
op_assign
id|cpu_to_le32
c_func
(paren
id|adapter-&gt;txd_cmd
op_or
id|E1000_TXD_CMD_DEXT
)paren
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|adapter-&gt;tx_ring.count
suffix:semicolon
id|adapter-&gt;tx_ring.next_to_use
op_assign
id|i
suffix:semicolon
r_return
id|TRUE
suffix:semicolon
)brace
r_return
id|FALSE
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|e1000_tx_map
id|e1000_tx_map
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_int
id|len
comma
id|offset
comma
id|size
comma
id|count
comma
id|i
suffix:semicolon
r_int
id|f
suffix:semicolon
id|len
op_assign
id|skb-&gt;len
op_minus
id|skb-&gt;data_len
suffix:semicolon
id|i
op_assign
(paren
id|tx_ring-&gt;next_to_use
op_plus
id|tx_ring-&gt;count
op_minus
l_int|1
)paren
op_mod
id|tx_ring-&gt;count
suffix:semicolon
id|count
op_assign
l_int|0
suffix:semicolon
id|offset
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|len
)paren
(brace
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|tx_ring-&gt;count
suffix:semicolon
id|size
op_assign
id|min
c_func
(paren
id|len
comma
id|adapter-&gt;max_data_per_txd
)paren
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
op_assign
id|size
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
op_assign
id|pci_map_single
c_func
(paren
id|adapter-&gt;pdev
comma
id|skb-&gt;data
op_plus
id|offset
comma
id|size
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|len
op_sub_assign
id|size
suffix:semicolon
id|offset
op_add_assign
id|size
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|f
op_assign
l_int|0
suffix:semicolon
id|f
OL
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|nr_frags
suffix:semicolon
id|f
op_increment
)paren
(brace
r_struct
id|skb_frag_struct
op_star
id|frag
suffix:semicolon
id|frag
op_assign
op_amp
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|frags
(braket
id|f
)braket
suffix:semicolon
id|len
op_assign
id|frag-&gt;size
suffix:semicolon
id|offset
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|len
)paren
(brace
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|tx_ring-&gt;count
suffix:semicolon
id|size
op_assign
id|min
c_func
(paren
id|len
comma
id|adapter-&gt;max_data_per_txd
)paren
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
op_assign
id|size
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
op_assign
id|pci_map_page
c_func
(paren
id|adapter-&gt;pdev
comma
id|frag-&gt;page
comma
id|frag-&gt;page_offset
op_plus
id|offset
comma
id|size
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|len
op_sub_assign
id|size
suffix:semicolon
id|offset
op_add_assign
id|size
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
)brace
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
id|skb
suffix:semicolon
r_return
id|count
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|e1000_tx_queue
id|e1000_tx_queue
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
comma
r_int
id|count
comma
r_int
id|tx_flags
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|e1000_tx_desc
op_star
id|tx_desc
op_assign
l_int|NULL
suffix:semicolon
r_uint32
id|txd_upper
comma
id|txd_lower
suffix:semicolon
r_int
id|i
suffix:semicolon
id|txd_upper
op_assign
l_int|0
suffix:semicolon
id|txd_lower
op_assign
id|adapter-&gt;txd_cmd
suffix:semicolon
r_if
c_cond
(paren
id|tx_flags
op_amp
id|E1000_TX_FLAGS_CSUM
)paren
(brace
id|txd_lower
op_or_assign
id|E1000_TXD_CMD_DEXT
op_or
id|E1000_TXD_DTYP_D
suffix:semicolon
id|txd_upper
op_or_assign
id|E1000_TXD_POPTS_TXSM
op_lshift
l_int|8
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tx_flags
op_amp
id|E1000_TX_FLAGS_VLAN
)paren
(brace
id|txd_lower
op_or_assign
id|E1000_TXD_CMD_VLE
suffix:semicolon
id|txd_upper
op_or_assign
(paren
id|tx_flags
op_amp
id|E1000_TX_FLAGS_VLAN_MASK
)paren
suffix:semicolon
)brace
id|i
op_assign
id|tx_ring-&gt;next_to_use
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|tx_desc
op_assign
id|E1000_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|i
)paren
suffix:semicolon
id|tx_desc-&gt;buffer_addr
op_assign
id|cpu_to_le64
c_func
(paren
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
)paren
suffix:semicolon
id|tx_desc-&gt;lower.data
op_assign
id|cpu_to_le32
c_func
(paren
id|txd_lower
op_or
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
)paren
suffix:semicolon
id|tx_desc-&gt;upper.data
op_assign
id|cpu_to_le32
c_func
(paren
id|txd_upper
)paren
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|tx_ring-&gt;count
suffix:semicolon
)brace
id|tx_desc-&gt;lower.data
op_or_assign
id|cpu_to_le32
c_func
(paren
id|E1000_TXD_CMD_EOP
)paren
suffix:semicolon
id|tx_ring-&gt;next_to_use
op_assign
id|i
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|TDT
comma
id|i
)paren
suffix:semicolon
)brace
DECL|macro|TXD_USE_COUNT
mdefine_line|#define TXD_USE_COUNT(S, X) (((S) / (X)) + (((S) % (X)) ? 1 : 0))
r_static
r_int
DECL|function|e1000_xmit_frame
id|e1000_xmit_frame
c_func
(paren
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|tx_flags
op_assign
l_int|0
comma
id|count
suffix:semicolon
r_int
id|f
suffix:semicolon
r_if
c_cond
(paren
id|time_after
c_func
(paren
id|netdev-&gt;trans_start
comma
id|adapter-&gt;trans_finish
op_plus
id|HZ
)paren
op_logical_and
op_logical_neg
(paren
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|STATUS
)paren
op_amp
id|E1000_STATUS_TXOFF
)paren
)paren
(brace
id|adapter-&gt;trans_finish
op_assign
id|jiffies
suffix:semicolon
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|count
op_assign
id|TXD_USE_COUNT
c_func
(paren
id|skb-&gt;len
op_minus
id|skb-&gt;data_len
comma
id|adapter-&gt;max_data_per_txd
)paren
suffix:semicolon
r_for
c_loop
(paren
id|f
op_assign
l_int|0
suffix:semicolon
id|f
OL
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|nr_frags
suffix:semicolon
id|f
op_increment
)paren
(brace
id|count
op_add_assign
id|TXD_USE_COUNT
c_func
(paren
id|skb_shinfo
c_func
(paren
id|skb
)paren
op_member_access_from_pointer
id|frags
(braket
id|f
)braket
dot
id|size
comma
id|adapter-&gt;max_data_per_txd
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|skb-&gt;ip_summed
op_eq
id|CHECKSUM_HW
)paren
(brace
id|count
op_increment
suffix:semicolon
)brace
id|spin_lock_irqsave
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
id|e1000_clean_tx_irq
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|E1000_DESC_UNUSED
c_func
(paren
op_amp
id|adapter-&gt;tx_ring
)paren
OL
id|count
)paren
(brace
id|netif_stop_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|e1000_tx_csum
c_func
(paren
id|adapter
comma
id|skb
)paren
)paren
(brace
id|tx_flags
op_or_assign
id|E1000_TX_FLAGS_CSUM
suffix:semicolon
)brace
macro_line|#ifdef NETIF_F_HW_VLAN_TX
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
op_logical_and
id|vlan_tx_tag_present
c_func
(paren
id|skb
)paren
)paren
(brace
id|tx_flags
op_or_assign
id|E1000_TX_FLAGS_VLAN
suffix:semicolon
id|tx_flags
op_or_assign
(paren
id|vlan_tx_tag_get
c_func
(paren
id|skb
)paren
op_lshift
id|E1000_TX_FLAGS_VLAN_SHIFT
)paren
suffix:semicolon
)brace
macro_line|#endif
id|count
op_assign
id|e1000_tx_map
c_func
(paren
id|adapter
comma
id|skb
)paren
suffix:semicolon
id|e1000_tx_queue
c_func
(paren
id|adapter
comma
id|count
comma
id|tx_flags
)paren
suffix:semicolon
id|netdev-&gt;trans_start
op_assign
id|jiffies
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_tx_timeout - Respond to a Tx Hang&n; * @netdev: network interface device structure&n; **/
r_static
r_void
DECL|function|e1000_tx_timeout
id|e1000_tx_timeout
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
id|e1000_down
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_up
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_get_stats - Get System Network Statistics&n; * @netdev: network interface device structure&n; *&n; * Returns the address of the device statistics structure.&n; * The statistics are actually updated from the timer callback.&n; **/
r_static
r_struct
id|net_device_stats
op_star
DECL|function|e1000_get_stats
id|e1000_get_stats
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_return
op_amp
id|adapter-&gt;net_stats
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_change_mtu - Change the Maximum Transfer Unit&n; * @netdev: network interface device structure&n; * @new_mtu: new value for maximum frame size&n; *&n; * Returns 0 on success, negative on failure&n; **/
r_static
r_int
DECL|function|e1000_change_mtu
id|e1000_change_mtu
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_int
id|new_mtu
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_int
id|old_mtu
op_assign
id|adapter-&gt;rx_buffer_len
suffix:semicolon
r_int
id|max_frame
op_assign
id|new_mtu
op_plus
id|ENET_HEADER_SIZE
op_plus
id|ETHERNET_FCS_SIZE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|max_frame
OL
id|MINIMUM_ETHERNET_FRAME_SIZE
)paren
op_logical_or
(paren
id|max_frame
OG
id|MAX_JUMBO_FRAME_SIZE
)paren
)paren
(brace
id|E1000_ERR
c_func
(paren
l_string|&quot;Invalid MTU setting&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|max_frame
op_le
id|E1000_RXBUFFER_2048
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|E1000_RXBUFFER_2048
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
OL
id|e1000_82543
)paren
(brace
id|E1000_ERR
c_func
(paren
l_string|&quot;Jumbo Frames not supported on 82542&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|max_frame
op_le
id|E1000_RXBUFFER_4096
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|E1000_RXBUFFER_4096
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|max_frame
op_le
id|E1000_RXBUFFER_8192
)paren
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|E1000_RXBUFFER_8192
suffix:semicolon
)brace
r_else
(brace
id|adapter-&gt;rx_buffer_len
op_assign
id|E1000_RXBUFFER_16384
suffix:semicolon
)brace
r_if
c_cond
(paren
id|old_mtu
op_ne
id|adapter-&gt;rx_buffer_len
op_logical_and
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
id|e1000_down
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|e1000_up
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
id|netdev-&gt;mtu
op_assign
id|new_mtu
suffix:semicolon
id|adapter-&gt;hw.max_frame_size
op_assign
id|max_frame
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_update_stats - Update the board statistics counters&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|e1000_update_stats
id|e1000_update_stats
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_hw
op_star
id|hw
op_assign
op_amp
id|adapter-&gt;hw
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_uint16
id|phy_tmp
suffix:semicolon
DECL|macro|PHY_IDLE_ERROR_COUNT_MASK
mdefine_line|#define PHY_IDLE_ERROR_COUNT_MASK 0x00FF
id|spin_lock_irqsave
c_func
(paren
op_amp
id|adapter-&gt;stats_lock
comma
id|flags
)paren
suffix:semicolon
multiline_comment|/* these counters are modified from e1000_adjust_tbi_stats,&n;&t; * called from the interrupt context, so they must only&n;&t; * be written while holding adapter-&gt;stats_lock&n;&t; */
id|adapter-&gt;stats.crcerrs
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|CRCERRS
)paren
suffix:semicolon
id|adapter-&gt;stats.gprc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GPRC
)paren
suffix:semicolon
id|adapter-&gt;stats.gorcl
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GORCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gorch
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GORCH
)paren
suffix:semicolon
id|adapter-&gt;stats.bprc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|BPRC
)paren
suffix:semicolon
id|adapter-&gt;stats.mprc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|MPRC
)paren
suffix:semicolon
id|adapter-&gt;stats.roc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|ROC
)paren
suffix:semicolon
id|adapter-&gt;stats.prc64
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC64
)paren
suffix:semicolon
id|adapter-&gt;stats.prc127
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC127
)paren
suffix:semicolon
id|adapter-&gt;stats.prc255
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC255
)paren
suffix:semicolon
id|adapter-&gt;stats.prc511
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC511
)paren
suffix:semicolon
id|adapter-&gt;stats.prc1023
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC1023
)paren
suffix:semicolon
id|adapter-&gt;stats.prc1522
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PRC1522
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;stats_lock
comma
id|flags
)paren
suffix:semicolon
multiline_comment|/* the rest of the counters are only modified here */
id|adapter-&gt;stats.symerrs
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|SYMERRS
)paren
suffix:semicolon
id|adapter-&gt;stats.mpc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|MPC
)paren
suffix:semicolon
id|adapter-&gt;stats.scc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|SCC
)paren
suffix:semicolon
id|adapter-&gt;stats.ecol
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|ECOL
)paren
suffix:semicolon
id|adapter-&gt;stats.mcc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|MCC
)paren
suffix:semicolon
id|adapter-&gt;stats.latecol
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|LATECOL
)paren
suffix:semicolon
id|adapter-&gt;stats.dc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|DC
)paren
suffix:semicolon
id|adapter-&gt;stats.sec
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|SEC
)paren
suffix:semicolon
id|adapter-&gt;stats.rlec
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RLEC
)paren
suffix:semicolon
id|adapter-&gt;stats.xonrxc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|XONRXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xontxc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|XONTXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xoffrxc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|XOFFRXC
)paren
suffix:semicolon
id|adapter-&gt;stats.xofftxc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|XOFFTXC
)paren
suffix:semicolon
id|adapter-&gt;stats.fcruc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|FCRUC
)paren
suffix:semicolon
id|adapter-&gt;stats.gptc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GPTC
)paren
suffix:semicolon
id|adapter-&gt;stats.gotcl
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GOTCL
)paren
suffix:semicolon
id|adapter-&gt;stats.gotch
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|GOTCH
)paren
suffix:semicolon
id|adapter-&gt;stats.rnbc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RNBC
)paren
suffix:semicolon
id|adapter-&gt;stats.ruc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RUC
)paren
suffix:semicolon
id|adapter-&gt;stats.rfc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RFC
)paren
suffix:semicolon
id|adapter-&gt;stats.rjc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RJC
)paren
suffix:semicolon
id|adapter-&gt;stats.torl
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TORL
)paren
suffix:semicolon
id|adapter-&gt;stats.torh
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TORH
)paren
suffix:semicolon
id|adapter-&gt;stats.totl
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TOTL
)paren
suffix:semicolon
id|adapter-&gt;stats.toth
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TOTH
)paren
suffix:semicolon
id|adapter-&gt;stats.tpr
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TPR
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc64
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC64
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc127
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC127
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc255
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC255
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc511
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC511
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc1023
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC1023
)paren
suffix:semicolon
id|adapter-&gt;stats.ptc1522
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|PTC1522
)paren
suffix:semicolon
id|adapter-&gt;stats.mptc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|MPTC
)paren
suffix:semicolon
id|adapter-&gt;stats.bptc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|BPTC
)paren
suffix:semicolon
multiline_comment|/* used for adaptive IFS */
id|hw-&gt;tx_packet_delta
op_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TPT
)paren
suffix:semicolon
id|adapter-&gt;stats.tpt
op_add_assign
id|hw-&gt;tx_packet_delta
suffix:semicolon
id|hw-&gt;collision_delta
op_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|COLC
)paren
suffix:semicolon
id|adapter-&gt;stats.colc
op_add_assign
id|hw-&gt;collision_delta
suffix:semicolon
r_if
c_cond
(paren
id|hw-&gt;mac_type
op_ge
id|e1000_82543
)paren
(brace
id|adapter-&gt;stats.algnerrc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|ALGNERRC
)paren
suffix:semicolon
id|adapter-&gt;stats.rxerrc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|RXERRC
)paren
suffix:semicolon
id|adapter-&gt;stats.tncrs
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TNCRS
)paren
suffix:semicolon
id|adapter-&gt;stats.cexterr
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|CEXTERR
)paren
suffix:semicolon
id|adapter-&gt;stats.tsctc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TSCTC
)paren
suffix:semicolon
id|adapter-&gt;stats.tsctfc
op_add_assign
id|E1000_READ_REG
c_func
(paren
id|hw
comma
id|TSCTFC
)paren
suffix:semicolon
)brace
multiline_comment|/* Fill out the OS statistics structure */
id|adapter-&gt;net_stats.rx_packets
op_assign
id|adapter-&gt;stats.gprc
suffix:semicolon
id|adapter-&gt;net_stats.tx_packets
op_assign
id|adapter-&gt;stats.gptc
suffix:semicolon
id|adapter-&gt;net_stats.rx_bytes
op_assign
id|adapter-&gt;stats.gorcl
suffix:semicolon
id|adapter-&gt;net_stats.tx_bytes
op_assign
id|adapter-&gt;stats.gotcl
suffix:semicolon
id|adapter-&gt;net_stats.multicast
op_assign
id|adapter-&gt;stats.mprc
suffix:semicolon
id|adapter-&gt;net_stats.collisions
op_assign
id|adapter-&gt;stats.colc
suffix:semicolon
multiline_comment|/* Rx Errors */
id|adapter-&gt;net_stats.rx_errors
op_assign
id|adapter-&gt;stats.rxerrc
op_plus
id|adapter-&gt;stats.crcerrs
op_plus
id|adapter-&gt;stats.algnerrc
op_plus
id|adapter-&gt;stats.rlec
op_plus
id|adapter-&gt;stats.rnbc
op_plus
id|adapter-&gt;stats.mpc
op_plus
id|adapter-&gt;stats.cexterr
suffix:semicolon
id|adapter-&gt;net_stats.rx_dropped
op_assign
id|adapter-&gt;stats.rnbc
suffix:semicolon
id|adapter-&gt;net_stats.rx_length_errors
op_assign
id|adapter-&gt;stats.rlec
suffix:semicolon
id|adapter-&gt;net_stats.rx_crc_errors
op_assign
id|adapter-&gt;stats.crcerrs
suffix:semicolon
id|adapter-&gt;net_stats.rx_frame_errors
op_assign
id|adapter-&gt;stats.algnerrc
suffix:semicolon
id|adapter-&gt;net_stats.rx_fifo_errors
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
id|adapter-&gt;net_stats.rx_missed_errors
op_assign
id|adapter-&gt;stats.mpc
suffix:semicolon
multiline_comment|/* Tx Errors */
id|adapter-&gt;net_stats.tx_errors
op_assign
id|adapter-&gt;stats.ecol
op_plus
id|adapter-&gt;stats.latecol
suffix:semicolon
id|adapter-&gt;net_stats.tx_aborted_errors
op_assign
id|adapter-&gt;stats.ecol
suffix:semicolon
id|adapter-&gt;net_stats.tx_window_errors
op_assign
id|adapter-&gt;stats.latecol
suffix:semicolon
multiline_comment|/* Tx Dropped needs to be maintained elsewhere */
multiline_comment|/* Phy Stats */
r_if
c_cond
(paren
id|hw-&gt;media_type
op_eq
id|e1000_media_type_copper
)paren
(brace
r_if
c_cond
(paren
(paren
id|adapter-&gt;link_speed
op_eq
id|SPEED_1000
)paren
op_logical_and
(paren
op_logical_neg
id|e1000_read_phy_reg
c_func
(paren
id|hw
comma
id|PHY_1000T_STATUS
comma
op_amp
id|phy_tmp
)paren
)paren
)paren
(brace
id|phy_tmp
op_and_assign
id|PHY_IDLE_ERROR_COUNT_MASK
suffix:semicolon
id|adapter-&gt;phy_stats.idle_errors
op_add_assign
id|phy_tmp
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|e1000_read_phy_reg
c_func
(paren
id|hw
comma
id|M88E1000_RX_ERR_CNTR
comma
op_amp
id|phy_tmp
)paren
)paren
(brace
id|adapter-&gt;phy_stats.receive_errors
op_add_assign
id|phy_tmp
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/**&n; * e1000_irq_disable - Mask off interrupt generation on the NIC&n; * @adapter: board private structure&n; **/
r_static
r_inline
r_void
DECL|function|e1000_irq_disable
id|e1000_irq_disable
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
id|atomic_inc
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMC
comma
op_complement
l_int|0
)paren
suffix:semicolon
id|synchronize_irq
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_irq_enable - Enable default interrupt generation settings&n; * @adapter: board private structure&n; **/
r_static
r_inline
r_void
DECL|function|e1000_irq_enable
id|e1000_irq_enable
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_if
c_cond
(paren
id|atomic_dec_and_test
c_func
(paren
op_amp
id|adapter-&gt;irq_sem
)paren
)paren
(brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|IMS
comma
id|IMS_ENABLE_MASK
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_intr - Interrupt Handler&n; * @irq: interrupt number&n; * @data: pointer to a network interface device structure&n; * @pt_regs: CPU registers structure&n; **/
r_static
r_void
DECL|function|e1000_intr
id|e1000_intr
c_func
(paren
r_int
id|irq
comma
r_void
op_star
id|data
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_struct
id|net_device
op_star
id|netdev
op_assign
id|data
suffix:semicolon
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|icr
suffix:semicolon
r_int
id|i
op_assign
id|E1000_MAX_INTR
suffix:semicolon
r_while
c_loop
(paren
id|i
op_logical_and
(paren
id|icr
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|ICR
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|icr
op_amp
(paren
id|E1000_ICR_RXSEQ
op_or
id|E1000_ICR_LSC
)paren
)paren
(brace
id|adapter-&gt;hw.get_link_status
op_assign
l_int|1
suffix:semicolon
id|mod_timer
c_func
(paren
op_amp
id|adapter-&gt;watchdog_timer
comma
id|jiffies
)paren
suffix:semicolon
)brace
id|e1000_clean_rx_irq
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|icr
op_amp
id|E1000_ICR_TXDW
)paren
op_logical_and
id|spin_trylock
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
)paren
(brace
id|e1000_clean_tx_irq
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|adapter-&gt;tx_lock
)paren
suffix:semicolon
)brace
id|i
op_decrement
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_clean_tx_irq - Reclaim resources after transmit completes&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|e1000_clean_tx_irq
id|e1000_clean_tx_irq
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|tx_ring
op_assign
op_amp
id|adapter-&gt;tx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|e1000_tx_desc
op_star
id|tx_desc
suffix:semicolon
r_int
id|i
suffix:semicolon
id|i
op_assign
id|tx_ring-&gt;next_to_clean
suffix:semicolon
id|tx_desc
op_assign
id|E1000_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|i
)paren
suffix:semicolon
r_while
c_loop
(paren
id|tx_desc-&gt;upper.data
op_amp
id|cpu_to_le32
c_func
(paren
id|E1000_TXD_STAT_DD
)paren
)paren
(brace
r_if
c_cond
(paren
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
)paren
(brace
id|pci_unmap_page
c_func
(paren
id|pdev
comma
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
comma
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
comma
id|PCI_DMA_TODEVICE
)paren
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
(brace
id|dev_kfree_skb_any
c_func
(paren
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
suffix:semicolon
id|tx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
)brace
id|memset
c_func
(paren
id|tx_desc
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|e1000_tx_desc
)paren
)paren
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|tx_ring-&gt;count
suffix:semicolon
id|tx_desc
op_assign
id|E1000_TX_DESC
c_func
(paren
op_star
id|tx_ring
comma
id|i
)paren
suffix:semicolon
id|adapter-&gt;trans_finish
op_assign
id|jiffies
suffix:semicolon
)brace
id|tx_ring-&gt;next_to_clean
op_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
id|netif_queue_stopped
c_func
(paren
id|netdev
)paren
op_logical_and
id|netif_carrier_ok
c_func
(paren
id|netdev
)paren
op_logical_and
(paren
id|E1000_DESC_UNUSED
c_func
(paren
id|tx_ring
)paren
OG
id|E1000_TX_QUEUE_WAKE
)paren
)paren
(brace
id|netif_wake_queue
c_func
(paren
id|netdev
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_clean_rx_irq - Send received data up the network stack,&n; * @adapter: board private structure&n; **/
r_static
r_void
DECL|function|e1000_clean_rx_irq
id|e1000_clean_rx_irq
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|e1000_rx_desc
op_star
id|rx_desc
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_uint32
id|length
suffix:semicolon
r_uint8
id|last_byte
suffix:semicolon
r_int
id|i
suffix:semicolon
id|i
op_assign
id|rx_ring-&gt;next_to_clean
suffix:semicolon
id|rx_desc
op_assign
id|E1000_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
r_while
c_loop
(paren
id|rx_desc-&gt;status
op_amp
id|E1000_RXD_STAT_DD
)paren
(brace
id|pci_unmap_single
c_func
(paren
id|pdev
comma
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
comma
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|skb
op_assign
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
suffix:semicolon
id|length
op_assign
id|le16_to_cpu
c_func
(paren
id|rx_desc-&gt;length
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|rx_desc-&gt;status
op_amp
id|E1000_RXD_STAT_EOP
)paren
)paren
(brace
multiline_comment|/* All receives must fit into a single buffer */
id|E1000_DBG
c_func
(paren
l_string|&quot;Receive packet consumed multiple buffers&bslash;n&quot;
)paren
suffix:semicolon
id|dev_kfree_skb_irq
c_func
(paren
id|skb
)paren
suffix:semicolon
id|memset
c_func
(paren
id|rx_desc
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|e1000_rx_desc
)paren
)paren
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|rx_ring-&gt;count
suffix:semicolon
id|rx_desc
op_assign
id|E1000_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|rx_desc-&gt;errors
op_amp
id|E1000_RXD_ERR_FRAME_ERR_MASK
)paren
(brace
id|last_byte
op_assign
op_star
(paren
id|skb-&gt;data
op_plus
id|length
op_minus
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|TBI_ACCEPT
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|rx_desc-&gt;status
comma
id|rx_desc-&gt;errors
comma
id|length
comma
id|last_byte
)paren
)paren
(brace
id|spin_lock_irqsave
c_func
(paren
op_amp
id|adapter-&gt;stats_lock
comma
id|flags
)paren
suffix:semicolon
id|e1000_tbi_adjust_stats
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
op_amp
id|adapter-&gt;stats
comma
id|length
comma
id|skb-&gt;data
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|adapter-&gt;stats_lock
comma
id|flags
)paren
suffix:semicolon
id|length
op_decrement
suffix:semicolon
)brace
r_else
(brace
id|dev_kfree_skb_irq
c_func
(paren
id|skb
)paren
suffix:semicolon
id|memset
c_func
(paren
id|rx_desc
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|e1000_rx_desc
)paren
)paren
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|rx_ring-&gt;count
suffix:semicolon
id|rx_desc
op_assign
id|E1000_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
)brace
multiline_comment|/* Good Receive */
id|skb_put
c_func
(paren
id|skb
comma
id|length
op_minus
id|ETHERNET_FCS_SIZE
)paren
suffix:semicolon
multiline_comment|/* Receive Checksum Offload */
id|e1000_rx_checksum
c_func
(paren
id|adapter
comma
id|rx_desc
comma
id|skb
)paren
suffix:semicolon
id|skb-&gt;protocol
op_assign
id|eth_type_trans
c_func
(paren
id|skb
comma
id|netdev
)paren
suffix:semicolon
macro_line|#ifdef NETIF_F_HW_VLAN_TX
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
op_logical_and
(paren
id|rx_desc-&gt;status
op_amp
id|E1000_RXD_STAT_VP
)paren
)paren
(brace
id|vlan_hwaccel_rx
c_func
(paren
id|skb
comma
id|adapter-&gt;vlgrp
comma
(paren
id|rx_desc-&gt;special
op_amp
id|E1000_RXD_SPC_VLAN_MASK
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|netif_rx
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
macro_line|#else
id|netif_rx
c_func
(paren
id|skb
)paren
suffix:semicolon
macro_line|#endif
id|netdev-&gt;last_rx
op_assign
id|jiffies
suffix:semicolon
id|memset
c_func
(paren
id|rx_desc
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|e1000_rx_desc
)paren
)paren
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
l_int|NULL
suffix:semicolon
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|rx_ring-&gt;count
suffix:semicolon
id|rx_desc
op_assign
id|E1000_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
)brace
id|rx_ring-&gt;next_to_clean
op_assign
id|i
suffix:semicolon
id|e1000_alloc_rx_buffers
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_alloc_rx_buffers - Replace used receive buffers&n; * @data: address of board private structure&n; **/
r_static
r_void
DECL|function|e1000_alloc_rx_buffers
id|e1000_alloc_rx_buffers
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_struct
id|e1000_desc_ring
op_star
id|rx_ring
op_assign
op_amp
id|adapter-&gt;rx_ring
suffix:semicolon
r_struct
id|net_device
op_star
id|netdev
op_assign
id|adapter-&gt;netdev
suffix:semicolon
r_struct
id|pci_dev
op_star
id|pdev
op_assign
id|adapter-&gt;pdev
suffix:semicolon
r_struct
id|e1000_rx_desc
op_star
id|rx_desc
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_int
id|reserve_len
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|netif_running
c_func
(paren
id|netdev
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
id|reserve_len
op_assign
l_int|2
suffix:semicolon
id|i
op_assign
id|rx_ring-&gt;next_to_use
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
)paren
(brace
id|rx_desc
op_assign
id|E1000_RX_DESC
c_func
(paren
op_star
id|rx_ring
comma
id|i
)paren
suffix:semicolon
id|skb
op_assign
id|alloc_skb
c_func
(paren
id|adapter-&gt;rx_buffer_len
op_plus
id|reserve_len
comma
id|GFP_ATOMIC
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|skb
)paren
(brace
multiline_comment|/* Better luck next round */
r_break
suffix:semicolon
)brace
multiline_comment|/* Make buffer alignment 2 beyond a 16 byte boundary&n;&t;&t; * this will result in a 16 byte aligned IP header after&n;&t;&t; * the 14 byte MAC header is removed&n;&t;&t; */
id|skb_reserve
c_func
(paren
id|skb
comma
id|reserve_len
)paren
suffix:semicolon
id|skb-&gt;dev
op_assign
id|netdev
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|skb
op_assign
id|skb
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|length
op_assign
id|adapter-&gt;rx_buffer_len
suffix:semicolon
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
op_assign
id|pci_map_single
c_func
(paren
id|pdev
comma
id|skb-&gt;data
comma
id|adapter-&gt;rx_buffer_len
comma
id|PCI_DMA_FROMDEVICE
)paren
suffix:semicolon
id|rx_desc-&gt;buffer_addr
op_assign
id|cpu_to_le64
c_func
(paren
id|rx_ring-&gt;buffer_info
(braket
id|i
)braket
dot
id|dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|i
op_mod
id|E1000_RX_BUFFER_WRITE
)paren
)paren
(brace
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RDT
comma
id|i
)paren
suffix:semicolon
)brace
id|i
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|rx_ring-&gt;count
suffix:semicolon
)brace
id|rx_ring-&gt;next_to_use
op_assign
id|i
suffix:semicolon
)brace
multiline_comment|/**&n; * e1000_ioctl -&n; * @netdev:&n; * @ifreq:&n; * @cmd:&n; **/
r_static
r_int
DECL|function|e1000_ioctl
id|e1000_ioctl
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|ifreq
op_star
id|ifr
comma
r_int
id|cmd
)paren
(brace
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SIOCETHTOOL
suffix:colon
r_return
id|e1000_ethtool_ioctl
c_func
(paren
id|netdev
comma
id|ifr
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EOPNOTSUPP
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_rx_checksum - Receive Checksum Offload for 82543&n; * @adapter: board private structure&n; * @rx_desc: receive descriptor&n; * @sk_buff: socket buffer with received data&n; **/
r_static
r_inline
r_void
DECL|function|e1000_rx_checksum
id|e1000_rx_checksum
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
comma
r_struct
id|e1000_rx_desc
op_star
id|rx_desc
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
(brace
multiline_comment|/* 82543 or newer only */
r_if
c_cond
(paren
(paren
id|adapter-&gt;hw.mac_type
OL
id|e1000_82543
)paren
op_logical_or
multiline_comment|/* Ignore Checksum bit is set */
(paren
id|rx_desc-&gt;status
op_amp
id|E1000_RXD_STAT_IXSM
)paren
op_logical_or
multiline_comment|/* TCP Checksum has not been calculated */
(paren
op_logical_neg
(paren
id|rx_desc-&gt;status
op_amp
id|E1000_RXD_STAT_TCPCS
)paren
)paren
)paren
(brace
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_NONE
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* At this point we know the hardware did the TCP checksum */
multiline_comment|/* now look at the TCP checksum error bit */
r_if
c_cond
(paren
id|rx_desc-&gt;errors
op_amp
id|E1000_RXD_ERR_TCPE
)paren
(brace
multiline_comment|/* let the stack verify checksum errors */
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_NONE
suffix:semicolon
id|adapter-&gt;hw_csum_err
op_increment
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* TCP checksum is good */
id|skb-&gt;ip_summed
op_assign
id|CHECKSUM_UNNECESSARY
suffix:semicolon
id|adapter-&gt;hw_csum_good
op_increment
suffix:semicolon
)brace
)brace
multiline_comment|/**&n; * e1000_enable_WOL - Wake On Lan Support (Magic Pkt)&n; * @adapter: Adapter structure&n; **/
r_void
DECL|function|e1000_enable_WOL
id|e1000_enable_WOL
c_func
(paren
r_struct
id|e1000_adapter
op_star
id|adapter
)paren
(brace
r_uint32
id|wuc
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;hw.mac_type
OL
id|e1000_82544
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|adapter-&gt;wol
)paren
(brace
id|wuc
op_assign
id|E1000_WUC_APME
op_or
id|E1000_WUC_PME_EN
op_or
id|E1000_WUC_PME_STATUS
op_or
id|E1000_WUC_APMPME
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|WUC
comma
id|wuc
)paren
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|WUFC
comma
id|adapter-&gt;wol
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|e1000_write_pci_cfg
id|e1000_write_pci_cfg
c_func
(paren
r_struct
id|e1000_hw
op_star
id|hw
comma
r_uint32
id|reg
comma
r_uint16
op_star
id|value
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|hw-&gt;back
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|adapter-&gt;pdev
comma
id|reg
comma
op_star
id|value
)paren
suffix:semicolon
)brace
macro_line|#ifdef NETIF_F_HW_VLAN_TX
r_static
r_void
DECL|function|e1000_vlan_rx_register
id|e1000_vlan_rx_register
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_struct
id|vlan_group
op_star
id|grp
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|ctrl
comma
id|rctl
suffix:semicolon
id|e1000_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
id|adapter-&gt;vlgrp
op_assign
id|grp
suffix:semicolon
r_if
c_cond
(paren
id|grp
)paren
(brace
multiline_comment|/* enable VLAN tag insert/strip */
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VET
comma
id|ETHERNET_IEEE_VLAN_TYPE
)paren
suffix:semicolon
id|ctrl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL
)paren
suffix:semicolon
id|ctrl
op_or_assign
id|E1000_CTRL_VME
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL
comma
id|ctrl
)paren
suffix:semicolon
multiline_comment|/* enable VLAN receive filtering */
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_or_assign
id|E1000_RCTL_VFE
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|E1000_RCTL_CFIEN
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* disable VLAN tag insert/strip */
id|ctrl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL
)paren
suffix:semicolon
id|ctrl
op_and_assign
op_complement
id|E1000_CTRL_VME
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|CTRL
comma
id|ctrl
)paren
suffix:semicolon
multiline_comment|/* disable VLAN filtering */
id|rctl
op_assign
id|E1000_READ_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
)paren
suffix:semicolon
id|rctl
op_and_assign
op_complement
id|E1000_RCTL_VFE
suffix:semicolon
id|E1000_WRITE_REG
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|RCTL
comma
id|rctl
)paren
suffix:semicolon
)brace
id|e1000_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|e1000_vlan_rx_add_vid
id|e1000_vlan_rx_add_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|vfta
comma
id|index
suffix:semicolon
multiline_comment|/* add VID to filter table */
id|index
op_assign
(paren
id|vid
op_rshift
l_int|5
)paren
op_amp
l_int|0x7F
suffix:semicolon
id|vfta
op_assign
id|E1000_READ_REG_ARRAY
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VFTA
comma
id|index
)paren
suffix:semicolon
id|vfta
op_or_assign
(paren
l_int|1
op_lshift
(paren
id|vid
op_amp
l_int|0x1F
)paren
)paren
suffix:semicolon
id|e1000_write_vfta
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|index
comma
id|vfta
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|e1000_vlan_rx_kill_vid
id|e1000_vlan_rx_kill_vid
c_func
(paren
r_struct
id|net_device
op_star
id|netdev
comma
r_uint16
id|vid
)paren
(brace
r_struct
id|e1000_adapter
op_star
id|adapter
op_assign
id|netdev-&gt;priv
suffix:semicolon
r_uint32
id|vfta
comma
id|index
suffix:semicolon
id|e1000_irq_disable
c_func
(paren
id|adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adapter-&gt;vlgrp
)paren
(brace
id|adapter-&gt;vlgrp-&gt;vlan_devices
(braket
id|vid
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
id|e1000_irq_enable
c_func
(paren
id|adapter
)paren
suffix:semicolon
multiline_comment|/* remove VID from filter table*/
id|index
op_assign
(paren
id|vid
op_rshift
l_int|5
)paren
op_amp
l_int|0x7F
suffix:semicolon
id|vfta
op_assign
id|E1000_READ_REG_ARRAY
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|VFTA
comma
id|index
)paren
suffix:semicolon
id|vfta
op_and_assign
op_complement
(paren
l_int|1
op_lshift
(paren
id|vid
op_amp
l_int|0x1F
)paren
)paren
suffix:semicolon
id|e1000_write_vfta
c_func
(paren
op_amp
id|adapter-&gt;hw
comma
id|index
comma
id|vfta
)paren
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* e1000_main.c */
eof
