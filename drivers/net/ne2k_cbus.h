multiline_comment|/* ne2k_cbus.h: &n;   vender-specific information definition for NEC PC-9800&n;   C-bus Ethernet Cards&n;   Used in ne.c &n;&n;   (C)1998,1999 KITAGWA Takurou &amp; Linux/98 project&n;*/
macro_line|#include &lt;linux/config.h&gt;
DECL|macro|NE_RESET
macro_line|#undef NE_RESET
DECL|macro|NE_RESET
mdefine_line|#define NE_RESET EI_SHIFT(0x11) /* Issue a read to reset, a write to clear. */
macro_line|#ifdef CONFIG_NE2K_CBUS_CNET98EL
macro_line|#ifndef CONFIG_NE2K_CBUS_CNET98EL_IO_BASE
macro_line|#warning CONFIG_NE2K_CBUS_CNET98EL_IO_BASE is not defined(config error?)
macro_line|#warning use 0xaaed as default
DECL|macro|CONFIG_NE2K_CBUS_CNET98EL_IO_BASE
mdefine_line|#define CONFIG_NE2K_CBUS_CNET98EL_IO_BASE 0xaaed /* or 0x55ed */
macro_line|#endif
DECL|macro|CNET98EL_START_PG
mdefine_line|#define CNET98EL_START_PG 0x00
DECL|macro|CNET98EL_STOP_PG
mdefine_line|#define CNET98EL_STOP_PG 0x40
macro_line|#endif
multiline_comment|/* Hardware type definition (derived from *BSD) */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_MASK
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_MASK 0xff
multiline_comment|/* 0: reserved for auto-detect */
multiline_comment|/* 1: (not tested)&n;   Allied Telesis CentreCom LA-98-T */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_ATLA98
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_ATLA98 1
multiline_comment|/* 2: (not tested)&n;   ELECOM Laneed&n;   LD-BDN[123]A&n;   PLANET SMART COM 98 EN-2298-C&n;   MACNICA ME98 */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_BDN
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_BDN 2
multiline_comment|/* 3:&n;   Melco EGY-98&n;   Contec C-NET(98)E*A/L*A,C-NET(98)P */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_EGY98
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_EGY98 3
multiline_comment|/* 4:&n;   Melco LGY-98,IND-SP,IND-SS&n;   MACNICA NE2098 */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_LGY98
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_LGY98 4
multiline_comment|/* 5:&n;   ICM DT-ET-25,DT-ET-T5,IF-2766ET,IF-2771ET&n;   PLANET SMART COM 98 EN-2298-T,EN-2298P-T&n;   D-Link DE-298PT,DE-298PCAT&n;   ELECOM Laneed LD-98P */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_ICM
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_ICM 5
multiline_comment|/* 6: (reserved for SIC-98, which is not supported in this driver.) */
multiline_comment|/* 7: (unused in *BSD?)&n;   &lt;Original NE2000 compatible&gt;&n;   &lt;for PCI/PCMCIA cards&gt;&n;*/
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_NE2K
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_NE2K 7
multiline_comment|/* 8:&n;   NEC PC-9801-108 */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_NEC108
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_NEC108 8
multiline_comment|/* 9:&n;   I-O DATA LA-98,LA/T-98 */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_IOLA98
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_IOLA98 9
multiline_comment|/* 10: (reserved for C-NET(98), which is not supported in this driver.) */
multiline_comment|/* 11:&n;   Contec C-NET(98)E,L */
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_CNET98EL
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_CNET98EL 11
DECL|macro|NE2K_CBUS_HARDWARE_TYPE_MAX
mdefine_line|#define NE2K_CBUS_HARDWARE_TYPE_MAX 11
multiline_comment|/* HARDWARE TYPE ID 12-31: reserved */
DECL|struct|ne2k_cbus_offsetinfo
r_struct
id|ne2k_cbus_offsetinfo
(brace
DECL|member|skip
r_int
r_int
id|skip
suffix:semicolon
DECL|member|offset8
r_int
r_int
id|offset8
suffix:semicolon
multiline_comment|/* +0x8 - +0xf */
DECL|member|offset10
r_int
r_int
id|offset10
suffix:semicolon
multiline_comment|/* +0x10 */
DECL|member|offset1f
r_int
r_int
id|offset1f
suffix:semicolon
multiline_comment|/* +0x1f */
)brace
suffix:semicolon
DECL|struct|ne2k_cbus_region
r_struct
id|ne2k_cbus_region
(brace
DECL|member|start
r_int
r_int
id|start
suffix:semicolon
DECL|member|range
r_int
id|range
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ne2k_cbus_hwinfo
r_struct
id|ne2k_cbus_hwinfo
(brace
DECL|member|hwtype
r_const
r_int
r_int
id|hwtype
suffix:semicolon
DECL|member|hwident
r_const
r_int
r_char
op_star
id|hwident
suffix:semicolon
macro_line|#ifndef MODULE
DECL|member|portlist
r_const
r_int
r_int
op_star
id|portlist
suffix:semicolon
macro_line|#endif
DECL|member|offsetinfo
r_const
r_struct
id|ne2k_cbus_offsetinfo
op_star
id|offsetinfo
suffix:semicolon
DECL|member|regionlist
r_const
r_struct
id|ne2k_cbus_region
op_star
id|regionlist
suffix:semicolon
)brace
suffix:semicolon
macro_line|#ifdef CONFIG_NE2K_CBUS_ATLA98
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|atla98_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|macro|atla98_offsetinfo
mdefine_line|#define atla98_offsetinfo ne2k_offsetinfo
DECL|macro|atla98_regionlist
mdefine_line|#define atla98_regionlist ne2k_regionlist
macro_line|#endif /* CONFIG_NE2K_CBUS_ATLA98 */
macro_line|#ifdef CONFIG_NE2K_CBUS_BDN
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|bdn_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|bdn_offsetinfo
id|__initdata
op_assign
(brace
macro_line|#if 0
multiline_comment|/* comes from FreeBSD(98) ed98.h */
l_int|0x1000
comma
l_int|0x8000
comma
l_int|0x100
comma
l_int|0xc200
multiline_comment|/* ??? */
macro_line|#else
multiline_comment|/* comes from NetBSD/pc98 if_ne_isa.c */
l_int|0x1000
comma
l_int|0x8000
comma
l_int|0x100
comma
l_int|0x7f00
multiline_comment|/* ??? */
macro_line|#endif
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|bdn_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|1
)brace
comma
(brace
l_int|0x1000
comma
l_int|1
)brace
comma
(brace
l_int|0x2000
comma
l_int|1
)brace
comma
(brace
l_int|0x3000
comma
l_int|1
)brace
comma
(brace
l_int|0x4000
comma
l_int|1
)brace
comma
(brace
l_int|0x5000
comma
l_int|1
)brace
comma
(brace
l_int|0x6000
comma
l_int|1
)brace
comma
(brace
l_int|0x7000
comma
l_int|1
)brace
comma
(brace
l_int|0x8000
comma
l_int|1
)brace
comma
(brace
l_int|0x9000
comma
l_int|1
)brace
comma
(brace
l_int|0xa000
comma
l_int|1
)brace
comma
(brace
l_int|0xb000
comma
l_int|1
)brace
comma
(brace
l_int|0xc000
comma
l_int|1
)brace
comma
(brace
l_int|0xd000
comma
l_int|1
)brace
comma
(brace
l_int|0xe000
comma
l_int|1
)brace
comma
(brace
l_int|0xf000
comma
l_int|1
)brace
comma
(brace
l_int|0x100
comma
l_int|1
)brace
comma
(brace
l_int|0x7f00
comma
l_int|1
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif /* CONFIG_NE2K_CBUS_BDN */
macro_line|#ifdef CONFIG_NE2K_CBUS_EGY98
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|egy98_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|egy98_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x02
comma
l_int|0x100
comma
l_int|0x200
comma
l_int|0x300
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|egy98_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|1
)brace
comma
(brace
l_int|0x2
comma
l_int|1
)brace
comma
(brace
l_int|0x4
comma
l_int|1
)brace
comma
(brace
l_int|0x6
comma
l_int|1
)brace
comma
(brace
l_int|0x8
comma
l_int|1
)brace
comma
(brace
l_int|0xa
comma
l_int|1
)brace
comma
(brace
l_int|0xc
comma
l_int|1
)brace
comma
(brace
l_int|0xe
comma
l_int|1
)brace
comma
(brace
l_int|0x100
comma
l_int|1
)brace
comma
(brace
l_int|0x102
comma
l_int|1
)brace
comma
(brace
l_int|0x104
comma
l_int|1
)brace
comma
(brace
l_int|0x106
comma
l_int|1
)brace
comma
(brace
l_int|0x108
comma
l_int|1
)brace
comma
(brace
l_int|0x10a
comma
l_int|1
)brace
comma
(brace
l_int|0x10c
comma
l_int|1
)brace
comma
(brace
l_int|0x10e
comma
l_int|1
)brace
comma
(brace
l_int|0x200
comma
l_int|1
)brace
comma
(brace
l_int|0x300
comma
l_int|1
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif /* CONFIG_NE2K_CBUS_EGY98 */
macro_line|#ifdef CONFIG_NE2K_CBUS_LGY98
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|lgy98_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0x10d0
comma
l_int|0x20d0
comma
l_int|0x30d0
comma
l_int|0x40d0
comma
l_int|0x50d0
comma
l_int|0x60d0
comma
l_int|0x70d0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|lgy98_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x01
comma
l_int|0x08
comma
l_int|0x200
comma
l_int|0x300
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|lgy98_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|16
)brace
comma
(brace
l_int|0x200
comma
l_int|1
)brace
comma
(brace
l_int|0x300
comma
l_int|1
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif /* CONFIG_NE2K_CBUS_LGY98 */
macro_line|#ifdef CONFIG_NE2K_CBUS_ICM
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|icm_portlist
(braket
)braket
id|__initdata
op_assign
(brace
multiline_comment|/* ICM */
l_int|0x56d0
comma
multiline_comment|/* LD-98PT */
l_int|0x46d0
comma
l_int|0x66d0
comma
l_int|0x76d0
comma
l_int|0x86d0
comma
l_int|0x96d0
comma
l_int|0xa6d0
comma
l_int|0xb6d0
comma
l_int|0xc6d0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|icm_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x01
comma
l_int|0x08
comma
l_int|0x100
comma
l_int|0x10f
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|icm_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|16
)brace
comma
(brace
l_int|0x100
comma
l_int|16
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif /* CONFIG_NE2K_CBUS_ICM */
macro_line|#if defined(CONFIG_NE2K_CBUS_NE2K) &amp;&amp; !defined(MODULE)
DECL|variable|__initdata
r_static
r_int
r_int
id|ne2k_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0x300
comma
l_int|0x280
comma
l_int|0x320
comma
l_int|0x340
comma
l_int|0x360
comma
l_int|0x380
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_NE2K_CBUS_NE2K) || defined(CONFIG_NE2K_CBUS_ATLA98)
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|ne2k_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x01
comma
l_int|0x08
comma
l_int|0x10
comma
l_int|0x1f
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|ne2k_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|32
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_NEC108
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|nec108_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0x770
comma
l_int|0x2770
comma
l_int|0x4770
comma
l_int|0x6770
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|nec108_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x02
comma
l_int|0x1000
comma
l_int|0x888
comma
l_int|0x88a
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|nec108_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|1
)brace
comma
(brace
l_int|0x2
comma
l_int|1
)brace
comma
(brace
l_int|0x4
comma
l_int|1
)brace
comma
(brace
l_int|0x6
comma
l_int|1
)brace
comma
(brace
l_int|0x8
comma
l_int|1
)brace
comma
(brace
l_int|0xa
comma
l_int|1
)brace
comma
(brace
l_int|0xc
comma
l_int|1
)brace
comma
(brace
l_int|0xe
comma
l_int|1
)brace
comma
(brace
l_int|0x1000
comma
l_int|1
)brace
comma
(brace
l_int|0x1002
comma
l_int|1
)brace
comma
(brace
l_int|0x1004
comma
l_int|1
)brace
comma
(brace
l_int|0x1006
comma
l_int|1
)brace
comma
(brace
l_int|0x1008
comma
l_int|1
)brace
comma
(brace
l_int|0x100a
comma
l_int|1
)brace
comma
(brace
l_int|0x100c
comma
l_int|1
)brace
comma
(brace
l_int|0x100e
comma
l_int|1
)brace
comma
(brace
l_int|0x888
comma
l_int|1
)brace
comma
(brace
l_int|0x88a
comma
l_int|1
)brace
comma
(brace
l_int|0x88c
comma
l_int|1
)brace
comma
(brace
l_int|0x88e
comma
l_int|1
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_IOLA98
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|iola98_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0xd0
comma
l_int|0xd2
comma
l_int|0xd4
comma
l_int|0xd6
comma
l_int|0xd8
comma
l_int|0xda
comma
l_int|0xdc
comma
l_int|0xde
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|iola98_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x1000
comma
l_int|0x8000
comma
l_int|0x100
comma
l_int|0xf100
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|iola98_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|1
)brace
comma
(brace
l_int|0x1000
comma
l_int|1
)brace
comma
(brace
l_int|0x2000
comma
l_int|1
)brace
comma
(brace
l_int|0x3000
comma
l_int|1
)brace
comma
(brace
l_int|0x4000
comma
l_int|1
)brace
comma
(brace
l_int|0x5000
comma
l_int|1
)brace
comma
(brace
l_int|0x6000
comma
l_int|1
)brace
comma
(brace
l_int|0x7000
comma
l_int|1
)brace
comma
(brace
l_int|0x8000
comma
l_int|1
)brace
comma
(brace
l_int|0x9000
comma
l_int|1
)brace
comma
(brace
l_int|0xa000
comma
l_int|1
)brace
comma
(brace
l_int|0xb000
comma
l_int|1
)brace
comma
(brace
l_int|0xc000
comma
l_int|1
)brace
comma
(brace
l_int|0xd000
comma
l_int|1
)brace
comma
(brace
l_int|0xe000
comma
l_int|1
)brace
comma
(brace
l_int|0xf000
comma
l_int|1
)brace
comma
(brace
l_int|0x100
comma
l_int|1
)brace
comma
(brace
l_int|0xf100
comma
l_int|1
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif /* CONFIG_NE2K_CBUS_IOLA98 */
macro_line|#ifdef CONFIG_NE2K_CBUS_CNET98EL
macro_line|#ifndef MODULE
DECL|variable|__initdata
r_static
r_int
r_int
id|cnet98el_portlist
(braket
)braket
id|__initdata
op_assign
(brace
l_int|0x3d0
comma
l_int|0x13d0
comma
l_int|0x23d0
comma
l_int|0x33d0
comma
l_int|0x43d0
comma
l_int|0x53d0
comma
l_int|0x60d0
comma
l_int|0x70d0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_offsetinfo
id|cnet98el_offsetinfo
id|__initdata
op_assign
(brace
l_int|0x01
comma
l_int|0x08
comma
l_int|0x40e
comma
l_int|0x400
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_region
id|cnet98el_regionlist
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_int|0x0
comma
l_int|16
)brace
comma
(brace
l_int|0x400
comma
l_int|16
)brace
comma
(brace
l_int|0x0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#endif
multiline_comment|/* port information table (for ne.c initialize/probe process) */
DECL|variable|__initdata
r_static
r_struct
id|ne2k_cbus_hwinfo
id|ne2k_cbus_hwinfo_list
(braket
)braket
id|__initdata
op_assign
(brace
macro_line|#ifdef CONFIG_NE2K_CBUS_ATLA98
multiline_comment|/* NOT TESTED */
(brace
id|NE2K_CBUS_HARDWARE_TYPE_ATLA98
comma
l_string|&quot;LA-98-T&quot;
comma
macro_line|#ifndef MODULE
id|atla98_portlist
comma
macro_line|#endif
op_amp
id|atla98_offsetinfo
comma
id|atla98_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_BDN
multiline_comment|/* NOT TESTED */
(brace
id|NE2K_CBUS_HARDWARE_TYPE_BDN
comma
l_string|&quot;LD-BDN[123]A&quot;
comma
macro_line|#ifndef MODULE
id|bdn_portlist
comma
macro_line|#endif
op_amp
id|bdn_offsetinfo
comma
id|bdn_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_ICM
(brace
id|NE2K_CBUS_HARDWARE_TYPE_ICM
comma
l_string|&quot;IF-27xxET&quot;
comma
macro_line|#ifndef MODULE
id|icm_portlist
comma
macro_line|#endif
op_amp
id|icm_offsetinfo
comma
id|icm_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_NE2K
(brace
id|NE2K_CBUS_HARDWARE_TYPE_NE2K
comma
l_string|&quot;NE2000 compat.&quot;
comma
macro_line|#ifndef MODULE
id|ne2k_portlist
comma
macro_line|#endif
op_amp
id|ne2k_offsetinfo
comma
id|ne2k_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_NEC108
(brace
id|NE2K_CBUS_HARDWARE_TYPE_NEC108
comma
l_string|&quot;PC-9801-108&quot;
comma
macro_line|#ifndef MODULE
id|nec108_portlist
comma
macro_line|#endif
op_amp
id|nec108_offsetinfo
comma
id|nec108_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_IOLA98
(brace
id|NE2K_CBUS_HARDWARE_TYPE_IOLA98
comma
l_string|&quot;LA-98&quot;
comma
macro_line|#ifndef MODULE
id|iola98_portlist
comma
macro_line|#endif
op_amp
id|iola98_offsetinfo
comma
id|iola98_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_CNET98EL
(brace
id|NE2K_CBUS_HARDWARE_TYPE_CNET98EL
comma
l_string|&quot;C-NET(98)E/L&quot;
comma
macro_line|#ifndef MODULE
id|cnet98el_portlist
comma
macro_line|#endif
op_amp
id|cnet98el_offsetinfo
comma
id|cnet98el_regionlist
)brace
comma
macro_line|#endif
multiline_comment|/* NOTE: LGY98 must be probed before EGY98, or system stalled!? */
macro_line|#ifdef CONFIG_NE2K_CBUS_LGY98
(brace
id|NE2K_CBUS_HARDWARE_TYPE_LGY98
comma
l_string|&quot;LGY-98&quot;
comma
macro_line|#ifndef MODULE
id|lgy98_portlist
comma
macro_line|#endif
op_amp
id|lgy98_offsetinfo
comma
id|lgy98_regionlist
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_NE2K_CBUS_EGY98
(brace
id|NE2K_CBUS_HARDWARE_TYPE_EGY98
comma
l_string|&quot;EGY-98&quot;
comma
macro_line|#ifndef MODULE
id|egy98_portlist
comma
macro_line|#endif
op_amp
id|egy98_offsetinfo
comma
id|egy98_regionlist
)brace
comma
macro_line|#endif
(brace
l_int|0
comma
l_string|&quot;unsupported hardware&quot;
comma
macro_line|#ifndef MODULE
l_int|NULL
comma
macro_line|#endif
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|function|ne2k_cbus_init
r_static
r_int
id|__init
id|ne2k_cbus_init
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|ei_device
op_star
id|ei_local
suffix:semicolon
r_if
c_cond
(paren
id|dev-&gt;priv
op_eq
l_int|NULL
)paren
(brace
id|ei_local
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|ei_device
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ei_local
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|memset
c_func
(paren
id|ei_local
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|ei_device
)paren
)paren
suffix:semicolon
id|ei_local-&gt;reg_offset
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
id|typeof
c_func
(paren
op_star
id|ei_local-&gt;reg_offset
)paren
)paren
op_star
l_int|18
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ei_local-&gt;reg_offset
op_eq
l_int|NULL
)paren
(brace
id|kfree
c_func
(paren
id|ei_local
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|spin_lock_init
c_func
(paren
op_amp
id|ei_local-&gt;page_lock
)paren
suffix:semicolon
id|dev-&gt;priv
op_assign
id|ei_local
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ne2k_cbus_destroy
r_static
r_void
id|ne2k_cbus_destroy
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_struct
id|ei_device
op_star
id|ei_local
op_assign
(paren
r_struct
id|ei_device
op_star
)paren
(paren
id|dev-&gt;priv
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ei_local
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|ei_local-&gt;reg_offset
)paren
id|kfree
c_func
(paren
id|ei_local-&gt;reg_offset
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|dev-&gt;priv
)paren
suffix:semicolon
id|dev-&gt;priv
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|ne2k_cbus_get_hwinfo
r_static
r_const
r_struct
id|ne2k_cbus_hwinfo
op_star
id|__init
id|ne2k_cbus_get_hwinfo
c_func
(paren
r_int
id|hwtype
)paren
(brace
r_const
r_struct
id|ne2k_cbus_hwinfo
op_star
id|hw
suffix:semicolon
r_for
c_loop
(paren
id|hw
op_assign
op_amp
id|ne2k_cbus_hwinfo_list
(braket
l_int|0
)braket
suffix:semicolon
id|hw-&gt;hwtype
suffix:semicolon
id|hw
op_increment
)paren
(brace
r_if
c_cond
(paren
id|hw-&gt;hwtype
op_eq
id|hwtype
)paren
r_break
suffix:semicolon
)brace
r_return
id|hw
suffix:semicolon
)brace
DECL|function|ne2k_cbus_set_hwtype
r_static
r_void
id|__init
id|ne2k_cbus_set_hwtype
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_const
r_struct
id|ne2k_cbus_hwinfo
op_star
id|hw
comma
r_int
id|ioaddr
)paren
(brace
r_struct
id|ei_device
op_star
id|ei_local
op_assign
(paren
r_struct
id|ei_device
op_star
)paren
(paren
id|dev-&gt;priv
)paren
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|hwtype_old
op_assign
id|dev-&gt;mem_start
op_amp
id|NE2K_CBUS_HARDWARE_TYPE_MASK
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ei_local
)paren
id|panic
c_func
(paren
l_string|&quot;Gieee! ei_local == NULL!! (from %p)&quot;
comma
id|__builtin_return_address
c_func
(paren
l_int|0
)paren
)paren
suffix:semicolon
id|dev-&gt;mem_start
op_and_assign
op_complement
id|NE2K_CBUS_HARDWARE_TYPE_MASK
suffix:semicolon
id|dev-&gt;mem_start
op_or_assign
id|hw-&gt;hwtype
op_amp
id|NE2K_CBUS_HARDWARE_TYPE_MASK
suffix:semicolon
r_if
c_cond
(paren
id|ei_debug
OG
l_int|2
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;hwtype changed: %d -&gt; %d&bslash;n&quot;
comma
id|hwtype_old
comma
(paren
r_int
)paren
(paren
id|dev-&gt;mem_start
op_amp
id|NE2K_CBUS_HARDWARE_TYPE_MASK
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hw-&gt;offsetinfo
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ei_local-&gt;reg_offset
(braket
id|i
)braket
op_assign
id|hw-&gt;offsetinfo-&gt;skip
op_star
id|i
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|8
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ei_local-&gt;reg_offset
(braket
id|i
)braket
op_assign
id|hw-&gt;offsetinfo-&gt;skip
op_star
(paren
id|i
op_minus
l_int|8
)paren
op_plus
id|hw-&gt;offsetinfo-&gt;offset8
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_NE2K_CBUS_NEC108
r_if
c_cond
(paren
id|hw-&gt;hwtype
op_eq
id|NE2K_CBUS_HARDWARE_TYPE_NEC108
)paren
(brace
r_int
id|adj
op_assign
(paren
id|ioaddr
op_amp
l_int|0xf000
)paren
op_div
l_int|2
suffix:semicolon
id|ei_local-&gt;reg_offset
(braket
l_int|16
)braket
op_assign
(paren
id|hw-&gt;offsetinfo-&gt;offset10
op_or
id|adj
)paren
op_minus
id|ioaddr
suffix:semicolon
id|ei_local-&gt;reg_offset
(braket
l_int|17
)braket
op_assign
(paren
id|hw-&gt;offsetinfo-&gt;offset1f
op_or
id|adj
)paren
op_minus
id|ioaddr
suffix:semicolon
)brace
r_else
(brace
macro_line|#endif /* CONFIG_NE2K_CBUS_NEC108 */
id|ei_local-&gt;reg_offset
(braket
l_int|16
)braket
op_assign
id|hw-&gt;offsetinfo-&gt;offset10
suffix:semicolon
id|ei_local-&gt;reg_offset
(braket
l_int|17
)braket
op_assign
id|hw-&gt;offsetinfo-&gt;offset1f
suffix:semicolon
macro_line|#ifdef CONFIG_NE2K_CBUS_NEC108
)brace
macro_line|#endif
)brace
r_else
(brace
multiline_comment|/* make dummmy offset list */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ei_local-&gt;reg_offset
(braket
id|i
)braket
op_assign
id|i
suffix:semicolon
)brace
id|ei_local-&gt;reg_offset
(braket
l_int|16
)braket
op_assign
l_int|0x10
suffix:semicolon
id|ei_local-&gt;reg_offset
(braket
l_int|17
)braket
op_assign
l_int|0x1f
suffix:semicolon
)brace
)brace
macro_line|#if defined(CONFIG_NE2K_CBUS_ICM) || defined(CONFIG_NE2K_CBUS_CNET98EL)
DECL|function|ne2k_cbus_readmem
r_static
r_void
id|__init
id|ne2k_cbus_readmem
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
id|ioaddr
comma
r_int
r_int
id|memaddr
comma
r_char
op_star
id|buf
comma
r_int
r_int
id|len
)paren
(brace
r_struct
id|ei_device
op_star
id|ei_local
op_assign
(paren
r_struct
id|ei_device
op_star
)paren
(paren
id|dev-&gt;priv
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|E8390_NODMA
op_or
id|E8390_START
comma
id|ioaddr
op_plus
id|E8390_CMD
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|len
op_amp
l_int|0xff
comma
id|ioaddr
op_plus
id|EN0_RCNTLO
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|len
op_rshift
l_int|8
comma
id|ioaddr
op_plus
id|EN0_RCNTHI
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|memaddr
op_amp
l_int|0xff
comma
id|ioaddr
op_plus
id|EN0_RSARLO
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|memaddr
op_rshift
l_int|8
comma
id|ioaddr
op_plus
id|EN0_RSARHI
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|E8390_RREAD
op_or
id|E8390_START
comma
id|ioaddr
op_plus
id|E8390_CMD
)paren
suffix:semicolon
id|insw
c_func
(paren
id|ioaddr
op_plus
id|NE_DATAPORT
comma
id|buf
comma
id|len
op_rshift
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|ne2k_cbus_writemem
r_static
r_void
id|__init
id|ne2k_cbus_writemem
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_int
id|ioaddr
comma
r_int
r_int
id|memaddr
comma
r_const
r_char
op_star
id|buf
comma
r_int
r_int
id|len
)paren
(brace
r_struct
id|ei_device
op_star
id|ei_local
op_assign
(paren
r_struct
id|ei_device
op_star
)paren
(paren
id|dev-&gt;priv
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|E8390_NODMA
op_or
id|E8390_START
comma
id|ioaddr
op_plus
id|E8390_CMD
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|ENISR_RDC
comma
id|ioaddr
op_plus
id|EN0_ISR
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|len
op_amp
l_int|0xff
comma
id|ioaddr
op_plus
id|EN0_RCNTLO
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|len
op_rshift
l_int|8
comma
id|ioaddr
op_plus
id|EN0_RCNTHI
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|memaddr
op_amp
l_int|0xff
comma
id|ioaddr
op_plus
id|EN0_RSARLO
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|memaddr
op_rshift
l_int|8
comma
id|ioaddr
op_plus
id|EN0_RSARHI
)paren
suffix:semicolon
id|outb_p
c_func
(paren
id|E8390_RWRITE
op_or
id|E8390_START
comma
id|ioaddr
op_plus
id|E8390_CMD
)paren
suffix:semicolon
id|outsw
c_func
(paren
id|ioaddr
op_plus
id|NE_DATAPORT
comma
id|buf
comma
id|len
op_rshift
l_int|1
)paren
suffix:semicolon
)brace
macro_line|#endif
r_static
r_int
id|ne_probe_cbus
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_const
r_struct
id|ne2k_cbus_hwinfo
op_star
id|hw
comma
r_int
id|ioaddr
)paren
suffix:semicolon
multiline_comment|/* End of ne2k_cbus.h */
eof
