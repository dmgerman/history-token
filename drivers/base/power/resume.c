multiline_comment|/*&n; * resume.c - Functions for waking devices up.&n; *&n; * Copyright (c) 2003 Patrick Mochel&n; * Copyright (c) 2003 Open Source Development Labs&n; *&n; * This file is released under the GPLv2&n; *&n; */
macro_line|#include &lt;linux/device.h&gt;
DECL|macro|to_dev
mdefine_line|#define to_dev(node) container_of(node,struct device,kobj.entry)
r_extern
r_struct
id|subsystem
id|devices_subsys
suffix:semicolon
r_extern
r_int
id|sysdev_resume
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|sysdev_restore
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/**&n; * device_resume - resume all the devices in the system&n; * @level:&t;stage of resume process we&squot;re at &n; * &n; * Similar to device_suspend above, though we want to do a breadth-first&n; * walk of the tree to make sure we wake up parents before children.&n; * So, we iterate over the list backward. &n; */
DECL|function|device_resume
r_void
id|device_resume
c_func
(paren
id|u32
id|level
)paren
(brace
r_struct
id|device
op_star
id|dev
suffix:semicolon
r_switch
c_cond
(paren
id|level
)paren
(brace
r_case
id|RESUME_POWER_ON
suffix:colon
id|sysdev_resume
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|RESUME_RESTORE_STATE
suffix:colon
id|sysdev_restore
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|down_write
c_func
(paren
op_amp
id|devices_subsys.rwsem
)paren
suffix:semicolon
id|list_for_each_entry
c_func
(paren
id|dev
comma
op_amp
id|devices_subsys.kset.list
comma
id|kobj.entry
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;driver
op_logical_and
id|dev-&gt;driver-&gt;resume
)paren
(brace
id|pr_debug
c_func
(paren
l_string|&quot;resuming device %s&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|dev-&gt;driver
op_member_access_from_pointer
id|resume
c_func
(paren
id|dev
comma
id|level
)paren
suffix:semicolon
)brace
)brace
id|up_write
c_func
(paren
op_amp
id|devices_subsys.rwsem
)paren
suffix:semicolon
)brace
eof
