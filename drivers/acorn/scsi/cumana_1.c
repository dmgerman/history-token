multiline_comment|/*&n; * Generic Generic NCR5380 driver&n; *&n; * Copyright 1995-2002, Russell King&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/blk.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/ecard.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &quot;../../scsi/scsi.h&quot;
macro_line|#include &quot;../../scsi/hosts.h&quot;
macro_line|#include &lt;scsi/scsicam.h&gt;
DECL|macro|AUTOSENSE
mdefine_line|#define AUTOSENSE
DECL|macro|PSEUDO_DMA
mdefine_line|#define PSEUDO_DMA
DECL|macro|CUMANASCSI_PUBLIC_RELEASE
mdefine_line|#define CUMANASCSI_PUBLIC_RELEASE 1
DECL|macro|NCR5380_implementation_fields
mdefine_line|#define NCR5380_implementation_fields&t;int port, ctrl
DECL|macro|NCR5380_local_declare
mdefine_line|#define NCR5380_local_declare()&t;&t;struct Scsi_Host *_instance
DECL|macro|NCR5380_setup
mdefine_line|#define NCR5380_setup(instance)&t;&t;_instance = instance
DECL|macro|NCR5380_read
mdefine_line|#define NCR5380_read(reg)&t;&t;cumanascsi_read(_instance, reg)
DECL|macro|NCR5380_write
mdefine_line|#define NCR5380_write(reg, value)&t;cumanascsi_write(_instance, reg, value)
DECL|macro|NCR5380_intr
mdefine_line|#define NCR5380_intr&t;&t;&t;cumanascsi_intr
DECL|macro|NCR5380_queue_command
mdefine_line|#define NCR5380_queue_command&t;&t;cumanascsi_queue_command
DECL|macro|NCR5380_proc_info
mdefine_line|#define NCR5380_proc_info&t;&t;cumanascsi_proc_info
r_int
id|NCR5380_proc_info
c_func
(paren
r_char
op_star
id|buffer
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|length
comma
r_int
id|hostno
comma
r_int
id|inout
)paren
suffix:semicolon
DECL|macro|BOARD_NORMAL
mdefine_line|#define BOARD_NORMAL&t;0
DECL|macro|BOARD_NCR53C400
mdefine_line|#define BOARD_NCR53C400&t;1
macro_line|#include &quot;../../scsi/NCR5380.h&quot;
DECL|function|cumanascsi_setup
r_void
id|cumanascsi_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
)brace
DECL|function|cumanascsi_info
r_const
r_char
op_star
id|cumanascsi_info
c_func
(paren
r_struct
id|Scsi_Host
op_star
id|spnt
)paren
(brace
r_return
l_string|&quot;&quot;
suffix:semicolon
)brace
macro_line|#ifdef NOT_EFFICIENT
DECL|macro|CTRL
mdefine_line|#define CTRL(p,v)     outb(*ctrl = (v), (p) - 577)
DECL|macro|STAT
mdefine_line|#define STAT(p)       inb((p)+1)
DECL|macro|IN
mdefine_line|#define IN(p)         inb((p))
DECL|macro|OUT
mdefine_line|#define OUT(v,p)      outb((v), (p))
macro_line|#else
DECL|macro|CTRL
mdefine_line|#define CTRL(p,v)&t;(p[-2308] = (*ctrl = (v)))
DECL|macro|STAT
mdefine_line|#define STAT(p)&t;&t;(p[4])
DECL|macro|IN
mdefine_line|#define IN(p)&t;&t;(*(p))
DECL|macro|IN2
mdefine_line|#define IN2(p)&t;&t;((unsigned short)(*(volatile unsigned long *)(p)))
DECL|macro|OUT
mdefine_line|#define OUT(v,p)&t;(*(p) = (v))
DECL|macro|OUT2
mdefine_line|#define OUT2(v,p)&t;(*((volatile unsigned long *)(p)) = (v))
macro_line|#endif
DECL|macro|L
mdefine_line|#define L(v)&t;&t;(((v)&lt;&lt;16)|((v) &amp; 0x0000ffff))
DECL|macro|H
mdefine_line|#define H(v)&t;&t;(((v)&gt;&gt;16)|((v) &amp; 0xffff0000))
r_static
r_inline
r_int
DECL|function|NCR5380_pwrite
id|NCR5380_pwrite
c_func
(paren
r_struct
id|Scsi_Host
op_star
id|instance
comma
r_int
r_char
op_star
id|addr
comma
r_int
id|len
)paren
(brace
r_int
op_star
id|ctrl
op_assign
op_amp
(paren
(paren
r_struct
id|NCR5380_hostdata
op_star
)paren
id|instance-&gt;hostdata
)paren
op_member_access_from_pointer
id|ctrl
suffix:semicolon
r_int
id|oldctrl
op_assign
op_star
id|ctrl
suffix:semicolon
r_int
r_int
op_star
id|laddr
suffix:semicolon
macro_line|#ifdef NOT_EFFICIENT
r_int
id|iobase
op_assign
id|instance-&gt;io_port
suffix:semicolon
r_int
id|dma_io
op_assign
id|iobase
op_amp
op_complement
(paren
l_int|0x3C0000
op_rshift
l_int|2
)paren
suffix:semicolon
macro_line|#else
r_volatile
r_int
r_char
op_star
id|iobase
op_assign
(paren
r_int
r_char
op_star
)paren
id|ioaddr
c_func
(paren
id|instance-&gt;io_port
)paren
suffix:semicolon
r_volatile
r_int
r_char
op_star
id|dma_io
op_assign
(paren
r_int
r_char
op_star
)paren
(paren
(paren
r_int
)paren
id|iobase
op_amp
op_complement
l_int|0x3C0000
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|len
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x02
)paren
suffix:semicolon
id|laddr
op_assign
(paren
r_int
r_int
op_star
)paren
id|addr
suffix:semicolon
r_while
c_loop
(paren
id|len
op_ge
l_int|32
)paren
(brace
r_int
id|status
suffix:semicolon
r_int
r_int
id|v
suffix:semicolon
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|status
op_amp
l_int|0x40
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|v
op_assign
op_star
id|laddr
op_increment
suffix:semicolon
id|OUT2
c_func
(paren
id|L
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|OUT2
c_func
(paren
id|H
c_func
(paren
id|v
)paren
comma
id|dma_io
)paren
suffix:semicolon
id|len
op_sub_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|addr
op_assign
(paren
r_int
r_char
op_star
)paren
id|laddr
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x12
)paren
suffix:semicolon
r_while
c_loop
(paren
id|len
OG
l_int|0
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
l_int|0x40
)paren
(brace
id|OUT
c_func
(paren
op_star
id|addr
op_increment
comma
id|dma_io
)paren
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
l_int|0x40
)paren
(brace
id|OUT
c_func
(paren
op_star
id|addr
op_increment
comma
id|dma_io
)paren
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
)brace
id|end
suffix:colon
id|CTRL
c_func
(paren
id|iobase
comma
id|oldctrl
op_or
l_int|0x40
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_static
r_inline
r_int
DECL|function|NCR5380_pread
id|NCR5380_pread
c_func
(paren
r_struct
id|Scsi_Host
op_star
id|instance
comma
r_int
r_char
op_star
id|addr
comma
r_int
id|len
)paren
(brace
r_int
op_star
id|ctrl
op_assign
op_amp
(paren
(paren
r_struct
id|NCR5380_hostdata
op_star
)paren
id|instance-&gt;hostdata
)paren
op_member_access_from_pointer
id|ctrl
suffix:semicolon
r_int
id|oldctrl
op_assign
op_star
id|ctrl
suffix:semicolon
r_int
r_int
op_star
id|laddr
suffix:semicolon
macro_line|#ifdef NOT_EFFICIENT
r_int
id|iobase
op_assign
id|instance-&gt;io_port
suffix:semicolon
r_int
id|dma_io
op_assign
id|iobase
op_amp
op_complement
(paren
l_int|0x3C0000
op_rshift
l_int|2
)paren
suffix:semicolon
macro_line|#else
r_volatile
r_int
r_char
op_star
id|iobase
op_assign
(paren
r_int
r_char
op_star
)paren
id|ioaddr
c_func
(paren
id|instance-&gt;io_port
)paren
suffix:semicolon
r_volatile
r_int
r_char
op_star
id|dma_io
op_assign
(paren
r_int
r_char
op_star
)paren
(paren
(paren
r_int
)paren
id|iobase
op_amp
op_complement
l_int|0x3C0000
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|len
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x00
)paren
suffix:semicolon
id|laddr
op_assign
(paren
r_int
r_int
op_star
)paren
id|addr
suffix:semicolon
r_while
c_loop
(paren
id|len
op_ge
l_int|32
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|status
op_amp
l_int|0x40
)paren
)paren
(brace
r_continue
suffix:semicolon
)brace
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
op_star
id|laddr
op_increment
op_assign
id|IN2
c_func
(paren
id|dma_io
)paren
op_or
(paren
id|IN2
c_func
(paren
id|dma_io
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|len
op_sub_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|addr
op_assign
(paren
r_int
r_char
op_star
)paren
id|laddr
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x10
)paren
suffix:semicolon
r_while
c_loop
(paren
id|len
OG
l_int|0
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
l_int|0x40
)paren
(brace
op_star
id|addr
op_increment
op_assign
id|IN
c_func
(paren
id|dma_io
)paren
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
id|status
op_assign
id|STAT
c_func
(paren
id|iobase
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0x80
)paren
(brace
r_goto
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
l_int|0x40
)paren
(brace
op_star
id|addr
op_increment
op_assign
id|IN
c_func
(paren
id|dma_io
)paren
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|len
op_eq
l_int|0
)paren
(brace
r_break
suffix:semicolon
)brace
)brace
)brace
id|end
suffix:colon
id|CTRL
c_func
(paren
id|iobase
comma
id|oldctrl
op_or
l_int|0x40
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|macro|STAT
macro_line|#undef STAT
DECL|macro|CTRL
macro_line|#undef CTRL
DECL|macro|IN
macro_line|#undef IN
DECL|macro|OUT
macro_line|#undef OUT
DECL|macro|CTRL
mdefine_line|#define CTRL(p,v) outb(*ctrl = (v), (p) - 577)
DECL|function|cumanascsi_read
r_static
r_char
id|cumanascsi_read
c_func
(paren
r_struct
id|Scsi_Host
op_star
id|instance
comma
r_int
id|reg
)paren
(brace
r_int
r_int
id|iobase
op_assign
id|instance-&gt;io_port
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
op_star
id|ctrl
op_assign
op_amp
(paren
(paren
r_struct
id|NCR5380_hostdata
op_star
)paren
id|instance-&gt;hostdata
)paren
op_member_access_from_pointer
id|ctrl
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0
)paren
suffix:semicolon
id|i
op_assign
id|inb
c_func
(paren
id|iobase
op_plus
l_int|64
op_plus
id|reg
)paren
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x40
)paren
suffix:semicolon
r_return
id|i
suffix:semicolon
)brace
DECL|function|cumanascsi_write
r_static
r_void
id|cumanascsi_write
c_func
(paren
r_struct
id|Scsi_Host
op_star
id|instance
comma
r_int
id|reg
comma
r_int
id|value
)paren
(brace
r_int
id|iobase
op_assign
id|instance-&gt;io_port
suffix:semicolon
r_int
op_star
id|ctrl
op_assign
op_amp
(paren
(paren
r_struct
id|NCR5380_hostdata
op_star
)paren
id|instance-&gt;hostdata
)paren
op_member_access_from_pointer
id|ctrl
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0
)paren
suffix:semicolon
id|outb
c_func
(paren
id|value
comma
id|iobase
op_plus
l_int|64
op_plus
id|reg
)paren
suffix:semicolon
id|CTRL
c_func
(paren
id|iobase
comma
l_int|0x40
)paren
suffix:semicolon
)brace
DECL|macro|CTRL
macro_line|#undef CTRL
macro_line|#include &quot;../../scsi/NCR5380.c&quot;
DECL|variable|cumanascsi_template
r_static
id|Scsi_Host_Template
id|cumanascsi_template
op_assign
(brace
dot
id|module
op_assign
id|THIS_MODULE
comma
dot
id|name
op_assign
l_string|&quot;Cumana 16-bit SCSI&quot;
comma
dot
id|info
op_assign
id|cumanascsi_info
comma
dot
id|queuecommand
op_assign
id|cumanascsi_queue_command
comma
dot
id|eh_abort_handler
op_assign
id|NCR5380_abort
comma
dot
id|eh_device_reset_handler
op_assign
id|NCR5380_device_reset
comma
dot
id|eh_bus_reset_handler
op_assign
id|NCR5380_bus_reset
comma
dot
id|eh_host_reset_handler
op_assign
id|NCR5380_host_reset
comma
dot
id|can_queue
op_assign
l_int|16
comma
dot
id|this_id
op_assign
l_int|7
comma
dot
id|sg_tablesize
op_assign
id|SG_ALL
comma
dot
id|cmd_per_lun
op_assign
l_int|2
comma
dot
id|unchecked_isa_dma
op_assign
l_int|0
comma
dot
id|use_clustering
op_assign
id|DISABLE_CLUSTERING
comma
dot
id|proc_name
op_assign
l_string|&quot;CumanaSCSI-1&quot;
comma
)brace
suffix:semicolon
r_static
r_int
id|__devinit
DECL|function|cumanascsi1_probe
id|cumanascsi1_probe
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
comma
r_const
r_struct
id|ecard_id
op_star
id|id
)paren
(brace
r_struct
id|Scsi_Host
op_star
id|host
suffix:semicolon
r_int
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|host
op_assign
id|scsi_register
c_func
(paren
op_amp
id|cumanascsi_template
comma
r_sizeof
(paren
r_struct
id|NCR5380_hostdata
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|host
)paren
r_goto
id|out
suffix:semicolon
id|host-&gt;io_port
op_assign
id|ecard_address
c_func
(paren
id|ec
comma
id|ECARD_IOC
comma
id|ECARD_SLOW
)paren
op_plus
l_int|0x800
suffix:semicolon
id|host-&gt;irq
op_assign
id|ec-&gt;irq
suffix:semicolon
id|NCR5380_init
c_func
(paren
id|host
comma
l_int|0
)paren
suffix:semicolon
id|host-&gt;n_io_port
op_assign
l_int|255
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|request_region
c_func
(paren
id|host-&gt;io_port
comma
id|host-&gt;n_io_port
comma
l_string|&quot;CumanaSCSI-1&quot;
)paren
)paren
)paren
(brace
id|ret
op_assign
op_minus
id|EBUSY
suffix:semicolon
r_goto
id|out_free
suffix:semicolon
)brace
(paren
(paren
r_struct
id|NCR5380_hostdata
op_star
)paren
id|host-&gt;hostdata
)paren
op_member_access_from_pointer
id|ctrl
op_assign
l_int|0
suffix:semicolon
id|outb
c_func
(paren
l_int|0x00
comma
id|host-&gt;io_port
op_minus
l_int|577
)paren
suffix:semicolon
id|ret
op_assign
id|request_irq
c_func
(paren
id|host-&gt;irq
comma
id|cumanascsi_intr
comma
id|SA_INTERRUPT
comma
l_string|&quot;CumanaSCSI-1&quot;
comma
id|host
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;scsi%d: IRQ%d not free: %d&bslash;n&quot;
comma
id|host-&gt;host_no
comma
id|host-&gt;irq
comma
id|ret
)paren
suffix:semicolon
r_goto
id|out_release
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;scsi%d: at port 0x%08lx irq %d&quot;
comma
id|host-&gt;host_no
comma
id|host-&gt;io_port
comma
id|host-&gt;irq
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot; options CAN_QUEUE=%d CMD_PER_LUN=%d release=%d&quot;
comma
id|host-&gt;can_queue
comma
id|host-&gt;cmd_per_lun
comma
id|CUMANASCSI_PUBLIC_RELEASE
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;nscsi%d:&quot;
comma
id|host-&gt;host_no
)paren
suffix:semicolon
id|NCR5380_print_options
c_func
(paren
id|host
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|ret
op_assign
id|scsi_add_host
c_func
(paren
id|host
comma
op_amp
id|ec-&gt;dev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
op_eq
l_int|0
)paren
r_goto
id|out
suffix:semicolon
id|free_irq
c_func
(paren
id|host-&gt;irq
comma
id|host
)paren
suffix:semicolon
id|out_release
suffix:colon
id|release_region
c_func
(paren
id|host-&gt;io_port
comma
id|host-&gt;n_io_port
)paren
suffix:semicolon
id|out_free
suffix:colon
id|scsi_unregister
c_func
(paren
id|host
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|cumanascsi1_remove
r_static
r_void
id|__devexit
id|cumanascsi1_remove
c_func
(paren
r_struct
id|expansion_card
op_star
id|ec
)paren
(brace
r_struct
id|Scsi_Host
op_star
id|host
op_assign
id|ecard_get_drvdata
c_func
(paren
id|ec
)paren
suffix:semicolon
id|ecard_set_drvdata
c_func
(paren
id|ec
comma
l_int|NULL
)paren
suffix:semicolon
id|scsi_remove_host
c_func
(paren
id|host
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|host-&gt;irq
comma
id|host
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|host-&gt;io_port
comma
id|host-&gt;n_io_port
)paren
suffix:semicolon
id|scsi_unregister
c_func
(paren
id|host
)paren
suffix:semicolon
)brace
DECL|variable|cumanascsi1_cids
r_static
r_const
r_struct
id|ecard_id
id|cumanascsi1_cids
(braket
)braket
op_assign
(brace
(brace
id|MANU_CUMANA
comma
id|PROD_CUMANA_SCSI_1
)brace
comma
(brace
l_int|0xffff
comma
l_int|0xffff
)brace
)brace
suffix:semicolon
DECL|variable|cumanascsi1_driver
r_static
r_struct
id|ecard_driver
id|cumanascsi1_driver
op_assign
(brace
dot
id|probe
op_assign
id|cumanascsi1_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|cumanascsi1_remove
)paren
comma
dot
id|id_table
op_assign
id|cumanascsi1_cids
comma
dot
id|drv
op_assign
(brace
dot
id|devclass
op_assign
op_amp
id|shost_devclass
comma
dot
id|name
op_assign
l_string|&quot;cumanascsi1&quot;
comma
)brace
comma
)brace
suffix:semicolon
DECL|function|cumanascsi_init
r_static
r_int
id|__init
id|cumanascsi_init
c_func
(paren
r_void
)paren
(brace
r_return
id|ecard_register_driver
c_func
(paren
op_amp
id|cumanascsi1_driver
)paren
suffix:semicolon
)brace
DECL|function|cumanascsi_exit
r_static
r_void
id|__exit
id|cumanascsi_exit
c_func
(paren
r_void
)paren
(brace
id|ecard_remove_driver
c_func
(paren
op_amp
id|cumanascsi1_driver
)paren
suffix:semicolon
)brace
DECL|variable|cumanascsi_init
id|module_init
c_func
(paren
id|cumanascsi_init
)paren
suffix:semicolon
DECL|variable|cumanascsi_exit
id|module_exit
c_func
(paren
id|cumanascsi_exit
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Cumana SCSI-1 driver for Acorn machines&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
eof
