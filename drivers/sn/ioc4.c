multiline_comment|/*&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 2005 Silicon Graphics, Inc.  All Rights Reserved.&n; */
multiline_comment|/*&n; * This file contains a shim driver for the IOC4 IDE and serial drivers.&n; */
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/ioc4_common.h&gt;
macro_line|#include &lt;linux/ide.h&gt;
r_static
r_int
id|__devinit
DECL|function|ioc4_probe_one
id|ioc4_probe_one
c_func
(paren
r_struct
id|pci_dev
op_star
id|pdev
comma
r_const
r_struct
id|pci_device_id
op_star
id|pci_id
)paren
(brace
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ret
op_assign
id|pci_enable_device
c_func
(paren
id|pdev
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: Failed to enable device with &quot;
l_string|&quot;pci_dev 0x%p... returning&bslash;n&quot;
comma
id|__FUNCTION__
comma
(paren
r_void
op_star
)paren
id|pdev
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
id|pci_set_master
c_func
(paren
id|pdev
)paren
suffix:semicolon
multiline_comment|/* attach each sub-device */
id|ret
op_assign
id|ioc4_ide_attach_one
c_func
(paren
id|pdev
comma
id|pci_id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
r_return
id|ret
suffix:semicolon
r_return
id|ioc4_serial_attach_one
c_func
(paren
id|pdev
comma
id|pci_id
)paren
suffix:semicolon
)brace
multiline_comment|/* pci device struct */
DECL|variable|ioc4_s_id_table
r_static
r_struct
id|pci_device_id
id|ioc4_s_id_table
(braket
)braket
op_assign
(brace
(brace
id|PCI_VENDOR_ID_SGI
comma
id|PCI_DEVICE_ID_SGI_IOC4
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0x0b4000
comma
l_int|0xFFFFFF
)brace
comma
(brace
l_int|0
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|ioc4_s_id_table
)paren
suffix:semicolon
DECL|variable|ioc4_s_driver
r_static
r_struct
id|pci_driver
id|__devinitdata
id|ioc4_s_driver
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;IOC4&quot;
comma
dot
id|id_table
op_assign
id|ioc4_s_id_table
comma
dot
id|probe
op_assign
id|ioc4_probe_one
comma
)brace
suffix:semicolon
DECL|function|ioc4_detect
r_static
r_int
id|__devinit
id|ioc4_detect
c_func
(paren
r_void
)paren
(brace
id|ioc4_serial_init
c_func
(paren
)paren
suffix:semicolon
r_return
id|pci_register_driver
c_func
(paren
op_amp
id|ioc4_s_driver
)paren
suffix:semicolon
)brace
DECL|variable|ioc4_detect
id|module_init
c_func
(paren
id|ioc4_detect
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Pat Gefre - Silicon Graphics Inc. (SGI) &lt;pfg@sgi.com&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;PCI driver module for SGI IOC4 Base-IO Card&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
eof
