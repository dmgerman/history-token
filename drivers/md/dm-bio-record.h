multiline_comment|/*&n; * Copyright (C) 2004-2005 Red Hat, Inc. All rights reserved.&n; *&n; * This file is released under the GPL.&n; */
macro_line|#ifndef DM_BIO_RECORD_H
DECL|macro|DM_BIO_RECORD_H
mdefine_line|#define DM_BIO_RECORD_H
macro_line|#include &lt;linux/bio.h&gt;
multiline_comment|/*&n; * There are lots of mutable fields in the bio struct that get&n; * changed by the lower levels of the block layer.  Some targets,&n; * such as multipath, may wish to resubmit a bio on error.  The&n; * functions in this file help the target record and restore the&n; * original bio state.&n; */
DECL|struct|dm_bio_details
r_struct
id|dm_bio_details
(brace
DECL|member|bi_sector
id|sector_t
id|bi_sector
suffix:semicolon
DECL|member|bi_bdev
r_struct
id|block_device
op_star
id|bi_bdev
suffix:semicolon
DECL|member|bi_size
r_int
r_int
id|bi_size
suffix:semicolon
DECL|member|bi_idx
r_int
r_int
id|bi_idx
suffix:semicolon
DECL|member|bi_flags
r_int
r_int
id|bi_flags
suffix:semicolon
)brace
suffix:semicolon
DECL|function|dm_bio_record
r_static
r_inline
r_void
id|dm_bio_record
c_func
(paren
r_struct
id|dm_bio_details
op_star
id|bd
comma
r_struct
id|bio
op_star
id|bio
)paren
(brace
id|bd-&gt;bi_sector
op_assign
id|bio-&gt;bi_sector
suffix:semicolon
id|bd-&gt;bi_bdev
op_assign
id|bio-&gt;bi_bdev
suffix:semicolon
id|bd-&gt;bi_size
op_assign
id|bio-&gt;bi_size
suffix:semicolon
id|bd-&gt;bi_idx
op_assign
id|bio-&gt;bi_idx
suffix:semicolon
id|bd-&gt;bi_flags
op_assign
id|bio-&gt;bi_flags
suffix:semicolon
)brace
DECL|function|dm_bio_restore
r_static
r_inline
r_void
id|dm_bio_restore
c_func
(paren
r_struct
id|dm_bio_details
op_star
id|bd
comma
r_struct
id|bio
op_star
id|bio
)paren
(brace
id|bio-&gt;bi_sector
op_assign
id|bd-&gt;bi_sector
suffix:semicolon
id|bio-&gt;bi_bdev
op_assign
id|bd-&gt;bi_bdev
suffix:semicolon
id|bio-&gt;bi_size
op_assign
id|bd-&gt;bi_size
suffix:semicolon
id|bio-&gt;bi_idx
op_assign
id|bd-&gt;bi_idx
suffix:semicolon
id|bio-&gt;bi_flags
op_assign
id|bd-&gt;bi_flags
suffix:semicolon
)brace
macro_line|#endif
eof
