macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/module.h&gt;
multiline_comment|/**&n; * pci_find_slot - locate PCI device from a given PCI slot&n; * @bus: number of PCI bus on which desired PCI device resides&n; * @devfn: encodes number of PCI slot in which the desired PCI &n; * device resides and the logical device number within that slot &n; * in case of multi-function devices.&n; *&n; * Given a PCI bus and slot/function number, the desired PCI device &n; * is located in system global list of PCI devices.  If the device&n; * is found, a pointer to its data structure is returned.  If no &n; * device is found, %NULL is returned.&n; */
r_struct
id|pci_dev
op_star
DECL|function|pci_find_slot
id|pci_find_slot
c_func
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|devfn
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
suffix:semicolon
id|pci_for_each_dev
c_func
(paren
id|dev
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;bus-&gt;number
op_eq
id|bus
op_logical_and
id|dev-&gt;devfn
op_eq
id|devfn
)paren
r_return
id|dev
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; * pci_find_subsys - begin or continue searching for a PCI device by vendor/subvendor/device/subdevice id&n; * @vendor: PCI vendor id to match, or %PCI_ANY_ID to match all vendor ids&n; * @device: PCI device id to match, or %PCI_ANY_ID to match all device ids&n; * @ss_vendor: PCI subsystem vendor id to match, or %PCI_ANY_ID to match all vendor ids&n; * @ss_device: PCI subsystem device id to match, or %PCI_ANY_ID to match all device ids&n; * @from: Previous PCI device found in search, or %NULL for new search.&n; *&n; * Iterates through the list of known PCI devices.  If a PCI device is&n; * found with a matching @vendor, @device, @ss_vendor and @ss_device, a pointer to its&n; * device structure is returned.  Otherwise, %NULL is returned.&n; * A new search is initiated by passing %NULL to the @from argument.&n; * Otherwise if @from is not %NULL, searches continue from next device on the global list.&n; */
r_struct
id|pci_dev
op_star
DECL|function|pci_find_subsys
id|pci_find_subsys
c_func
(paren
r_int
r_int
id|vendor
comma
r_int
r_int
id|device
comma
r_int
r_int
id|ss_vendor
comma
r_int
r_int
id|ss_device
comma
r_const
r_struct
id|pci_dev
op_star
id|from
)paren
(brace
r_struct
id|list_head
op_star
id|n
op_assign
id|from
ques
c_cond
id|from-&gt;global_list.next
suffix:colon
id|pci_devices.next
suffix:semicolon
r_while
c_loop
(paren
id|n
op_ne
op_amp
id|pci_devices
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
op_assign
id|pci_dev_g
c_func
(paren
id|n
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|vendor
op_eq
id|PCI_ANY_ID
op_logical_or
id|dev-&gt;vendor
op_eq
id|vendor
)paren
op_logical_and
(paren
id|device
op_eq
id|PCI_ANY_ID
op_logical_or
id|dev-&gt;device
op_eq
id|device
)paren
op_logical_and
(paren
id|ss_vendor
op_eq
id|PCI_ANY_ID
op_logical_or
id|dev-&gt;subsystem_vendor
op_eq
id|ss_vendor
)paren
op_logical_and
(paren
id|ss_device
op_eq
id|PCI_ANY_ID
op_logical_or
id|dev-&gt;subsystem_device
op_eq
id|ss_device
)paren
)paren
r_return
id|dev
suffix:semicolon
id|n
op_assign
id|n-&gt;next
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/**&n; * pci_find_device - begin or continue searching for a PCI device by vendor/device id&n; * @vendor: PCI vendor id to match, or %PCI_ANY_ID to match all vendor ids&n; * @device: PCI device id to match, or %PCI_ANY_ID to match all device ids&n; * @from: Previous PCI device found in search, or %NULL for new search.&n; *&n; * Iterates through the list of known PCI devices.  If a PCI device is&n; * found with a matching @vendor and @device, a pointer to its device structure is&n; * returned.  Otherwise, %NULL is returned.&n; * A new search is initiated by passing %NULL to the @from argument.&n; * Otherwise if @from is not %NULL, searches continue from next device on the global list.&n; */
r_struct
id|pci_dev
op_star
DECL|function|pci_find_device
id|pci_find_device
c_func
(paren
r_int
r_int
id|vendor
comma
r_int
r_int
id|device
comma
r_const
r_struct
id|pci_dev
op_star
id|from
)paren
(brace
r_return
id|pci_find_subsys
c_func
(paren
id|vendor
comma
id|device
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
id|from
)paren
suffix:semicolon
)brace
multiline_comment|/**&n; * pci_find_class - begin or continue searching for a PCI device by class&n; * @class: search for a PCI device with this class designation&n; * @from: Previous PCI device found in search, or %NULL for new search.&n; *&n; * Iterates through the list of known PCI devices.  If a PCI device is&n; * found with a matching @class, a pointer to its device structure is&n; * returned.  Otherwise, %NULL is returned.&n; * A new search is initiated by passing %NULL to the @from argument.&n; * Otherwise if @from is not %NULL, searches continue from next device&n; * on the global list.&n; */
r_struct
id|pci_dev
op_star
DECL|function|pci_find_class
id|pci_find_class
c_func
(paren
r_int
r_int
r_class
comma
r_const
r_struct
id|pci_dev
op_star
id|from
)paren
(brace
r_struct
id|list_head
op_star
id|n
op_assign
id|from
ques
c_cond
id|from-&gt;global_list.next
suffix:colon
id|pci_devices.next
suffix:semicolon
r_while
c_loop
(paren
id|n
op_ne
op_amp
id|pci_devices
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
op_assign
id|pci_dev_g
c_func
(paren
id|n
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_member_access_from_pointer
r_class
op_eq
r_class
)paren
r_return
id|dev
suffix:semicolon
id|n
op_assign
id|n-&gt;next
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|variable|pci_find_class
id|EXPORT_SYMBOL
c_func
(paren
id|pci_find_class
)paren
suffix:semicolon
DECL|variable|pci_find_device
id|EXPORT_SYMBOL
c_func
(paren
id|pci_find_device
)paren
suffix:semicolon
DECL|variable|pci_find_slot
id|EXPORT_SYMBOL
c_func
(paren
id|pci_find_slot
)paren
suffix:semicolon
DECL|variable|pci_find_subsys
id|EXPORT_SYMBOL
c_func
(paren
id|pci_find_subsys
)paren
suffix:semicolon
eof
