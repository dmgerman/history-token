macro_line|#include &quot;dib3000-common.h&quot;
macro_line|#ifdef CONFIG_DVB_DIBCOM_DEBUG
DECL|variable|debug
r_static
r_int
id|debug
suffix:semicolon
id|module_param
c_func
(paren
id|debug
comma
r_int
comma
l_int|0644
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|debug
comma
l_string|&quot;set debugging level (1=info,2=i2c,4=srch (|-able)).&quot;
)paren
suffix:semicolon
macro_line|#endif
DECL|macro|deb_info
mdefine_line|#define deb_info(args...) dprintk(0x01,args)
DECL|macro|deb_i2c
mdefine_line|#define deb_i2c(args...) dprintk(0x02,args)
DECL|macro|deb_srch
mdefine_line|#define deb_srch(args...) dprintk(0x04,args)
DECL|function|dib3000_read_reg
r_int
id|dib3000_read_reg
c_func
(paren
r_struct
id|dib3000_state
op_star
id|state
comma
id|u16
id|reg
)paren
(brace
id|u8
id|wb
(braket
)braket
op_assign
(brace
(paren
(paren
id|reg
op_rshift
l_int|8
)paren
op_or
l_int|0x80
)paren
op_amp
l_int|0xff
comma
id|reg
op_amp
l_int|0xff
)brace
suffix:semicolon
id|u8
id|rb
(braket
l_int|2
)braket
suffix:semicolon
r_struct
id|i2c_msg
id|msg
(braket
)braket
op_assign
(brace
(brace
dot
id|addr
op_assign
id|state-&gt;config.demod_address
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|buf
op_assign
id|wb
comma
dot
id|len
op_assign
l_int|2
)brace
comma
(brace
dot
id|addr
op_assign
id|state-&gt;config.demod_address
comma
dot
id|flags
op_assign
id|I2C_M_RD
comma
dot
id|buf
op_assign
id|rb
comma
dot
id|len
op_assign
l_int|2
)brace
comma
)brace
suffix:semicolon
r_if
c_cond
(paren
id|i2c_transfer
c_func
(paren
id|state-&gt;i2c
comma
id|msg
comma
l_int|2
)paren
op_ne
l_int|2
)paren
id|deb_i2c
c_func
(paren
l_string|&quot;i2c read error&bslash;n&quot;
)paren
suffix:semicolon
id|deb_i2c
c_func
(paren
l_string|&quot;reading i2c bus (reg: %5d 0x%04x, val: %5d 0x%04x)&bslash;n&quot;
comma
id|reg
comma
id|reg
comma
(paren
id|rb
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|rb
(braket
l_int|1
)braket
comma
(paren
id|rb
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|rb
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_return
(paren
id|rb
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|rb
(braket
l_int|1
)braket
suffix:semicolon
)brace
DECL|function|dib3000_write_reg
r_int
id|dib3000_write_reg
c_func
(paren
r_struct
id|dib3000_state
op_star
id|state
comma
id|u16
id|reg
comma
id|u16
id|val
)paren
(brace
id|u8
id|b
(braket
)braket
op_assign
(brace
(paren
id|reg
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
comma
id|reg
op_amp
l_int|0xff
comma
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
comma
id|val
op_amp
l_int|0xff
comma
)brace
suffix:semicolon
r_struct
id|i2c_msg
id|msg
(braket
)braket
op_assign
(brace
(brace
dot
id|addr
op_assign
id|state-&gt;config.demod_address
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|buf
op_assign
id|b
comma
dot
id|len
op_assign
l_int|4
)brace
)brace
suffix:semicolon
id|deb_i2c
c_func
(paren
l_string|&quot;writing i2c bus (reg: %5d 0x%04x, val: %5d 0x%04x)&bslash;n&quot;
comma
id|reg
comma
id|reg
comma
id|val
comma
id|val
)paren
suffix:semicolon
r_return
id|i2c_transfer
c_func
(paren
id|state-&gt;i2c
comma
id|msg
comma
l_int|1
)paren
op_ne
l_int|1
ques
c_cond
op_minus
id|EREMOTEIO
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|dib3000_search_status
r_int
id|dib3000_search_status
c_func
(paren
id|u16
id|irq
comma
id|u16
id|lock
)paren
(brace
r_if
c_cond
(paren
id|irq
op_amp
l_int|0x02
)paren
(brace
r_if
c_cond
(paren
id|lock
op_amp
l_int|0x01
)paren
(brace
id|deb_srch
c_func
(paren
l_string|&quot;auto search succeeded&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
singleline_comment|// auto search succeeded
)brace
r_else
(brace
id|deb_srch
c_func
(paren
l_string|&quot;auto search not successful&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
singleline_comment|// auto search failed
)brace
)brace
r_else
r_if
c_cond
(paren
id|irq
op_amp
l_int|0x01
)paren
(brace
id|deb_srch
c_func
(paren
l_string|&quot;auto search failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
singleline_comment|// auto search failed
)brace
r_return
op_minus
l_int|1
suffix:semicolon
singleline_comment|// try again
)brace
multiline_comment|/* for auto search */
DECL|variable|dib3000_seq
id|u16
id|dib3000_seq
(braket
l_int|2
)braket
(braket
l_int|2
)braket
(braket
l_int|2
)braket
op_assign
multiline_comment|/* fft,gua,   inv   */
(brace
multiline_comment|/* fft */
(brace
multiline_comment|/* gua */
(brace
l_int|0
comma
l_int|1
)brace
comma
multiline_comment|/*  0   0   { 0,1 } */
(brace
l_int|3
comma
l_int|9
)brace
comma
multiline_comment|/*  0   1   { 0,1 } */
)brace
comma
(brace
(brace
l_int|2
comma
l_int|5
)brace
comma
multiline_comment|/*  1   0   { 0,1 } */
(brace
l_int|6
comma
l_int|11
)brace
comma
multiline_comment|/*  1   1   { 0,1 } */
)brace
)brace
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Patrick Boettcher &lt;patrick.boettcher@desy.de&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Common functions for the dib3000mb/dib3000mc dvb frontend drivers&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|dib3000_seq
id|EXPORT_SYMBOL
c_func
(paren
id|dib3000_seq
)paren
suffix:semicolon
DECL|variable|dib3000_read_reg
id|EXPORT_SYMBOL
c_func
(paren
id|dib3000_read_reg
)paren
suffix:semicolon
DECL|variable|dib3000_write_reg
id|EXPORT_SYMBOL
c_func
(paren
id|dib3000_write_reg
)paren
suffix:semicolon
DECL|variable|dib3000_search_status
id|EXPORT_SYMBOL
c_func
(paren
id|dib3000_search_status
)paren
suffix:semicolon
eof
