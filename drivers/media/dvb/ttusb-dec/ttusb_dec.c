multiline_comment|/*&n; * TTUSB DEC Driver&n; *&n; * Copyright (C) 2003 Alex Woods &lt;linux-dvb@giblets.org&gt;&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; *&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/usb.h&gt;
macro_line|#include &quot;ttusb_dec.h&quot;
macro_line|#include &quot;dvb_frontend.h&quot;
DECL|variable|debug
r_static
r_int
id|debug
op_assign
l_int|0
suffix:semicolon
DECL|macro|dprintk
mdefine_line|#define dprintk&t;if (debug) printk
DECL|function|ttusb_dec_send_command
r_static
r_int
id|ttusb_dec_send_command
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
comma
r_const
id|u8
id|command
comma
r_int
id|param_length
comma
r_const
id|u8
id|params
(braket
)braket
comma
r_int
op_star
id|result_length
comma
id|u8
id|cmd_result
(braket
)braket
)paren
(brace
r_int
id|result
comma
id|actual_len
comma
id|i
suffix:semicolon
id|u8
id|b
(braket
id|COMMAND_PACKET_SIZE
op_plus
l_int|4
)braket
suffix:semicolon
id|u8
id|c
(braket
id|COMMAND_PACKET_SIZE
op_plus
l_int|4
)braket
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|down_interruptible
c_func
(paren
op_amp
id|dec-&gt;usb_sem
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: Failed to down usb semaphore.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|b
(braket
l_int|0
)braket
op_assign
l_int|0xaa
suffix:semicolon
id|b
(braket
l_int|1
)braket
op_assign
op_increment
id|dec-&gt;trans_count
suffix:semicolon
id|b
(braket
l_int|2
)braket
op_assign
id|command
suffix:semicolon
id|b
(braket
l_int|3
)braket
op_assign
id|param_length
suffix:semicolon
r_if
c_cond
(paren
id|params
)paren
id|memcpy
c_func
(paren
op_amp
id|b
(braket
l_int|4
)braket
comma
id|params
comma
id|param_length
)paren
suffix:semicolon
r_if
c_cond
(paren
id|debug
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: command: &quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|param_length
op_plus
l_int|4
suffix:semicolon
id|i
op_increment
)paren
id|printk
c_func
(paren
l_string|&quot;0x%02X &quot;
comma
id|b
(braket
id|i
)braket
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|result
op_assign
id|usb_bulk_msg
c_func
(paren
id|dec-&gt;udev
comma
id|dec-&gt;command_pipe
comma
id|b
comma
r_sizeof
(paren
id|b
)paren
comma
op_amp
id|actual_len
comma
id|HZ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: command bulk message failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|dec-&gt;usb_sem
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|result
op_assign
id|usb_bulk_msg
c_func
(paren
id|dec-&gt;udev
comma
id|dec-&gt;result_pipe
comma
id|c
comma
r_sizeof
(paren
id|c
)paren
comma
op_amp
id|actual_len
comma
id|HZ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: result bulk message failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|dec-&gt;usb_sem
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|debug
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: result: &quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|actual_len
suffix:semicolon
id|i
op_increment
)paren
id|printk
c_func
(paren
l_string|&quot;0x%02X &quot;
comma
id|c
(braket
id|i
)braket
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result_length
)paren
op_star
id|result_length
op_assign
id|c
(braket
l_int|3
)braket
suffix:semicolon
r_if
c_cond
(paren
id|cmd_result
op_logical_and
id|c
(braket
l_int|3
)braket
OG
l_int|0
)paren
id|memcpy
c_func
(paren
id|cmd_result
comma
op_amp
id|c
(braket
l_int|4
)braket
comma
id|c
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|dec-&gt;usb_sem
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|ttusb_dec_av_pes2ts_cb
r_static
r_int
id|ttusb_dec_av_pes2ts_cb
c_func
(paren
r_void
op_star
id|priv
comma
r_int
r_char
op_star
id|data
)paren
(brace
r_struct
id|dvb_demux_feed
op_star
id|dvbdmxfeed
op_assign
(paren
r_struct
id|dvb_demux_feed
op_star
)paren
id|priv
suffix:semicolon
id|dvbdmxfeed-&gt;cb
dot
id|ts
c_func
(paren
id|data
comma
l_int|188
comma
l_int|0
comma
l_int|0
comma
op_amp
id|dvbdmxfeed-&gt;feed.ts
comma
id|DMX_OK
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_set_pids
r_static
r_void
id|ttusb_dec_set_pids
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|u8
id|b
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
comma
l_int|0xff
)brace
suffix:semicolon
id|u16
id|pcr
op_assign
id|htons
c_func
(paren
id|dec-&gt;pid
(braket
id|DMX_PES_PCR
)braket
)paren
suffix:semicolon
id|u16
id|audio
op_assign
id|htons
c_func
(paren
id|dec-&gt;pid
(braket
id|DMX_PES_AUDIO
)braket
)paren
suffix:semicolon
id|u16
id|video
op_assign
id|htons
c_func
(paren
id|dec-&gt;pid
(braket
id|DMX_PES_VIDEO
)braket
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|b
(braket
l_int|0
)braket
comma
op_amp
id|pcr
comma
l_int|2
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|b
(braket
l_int|2
)braket
comma
op_amp
id|audio
comma
l_int|2
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|b
(braket
l_int|4
)braket
comma
op_amp
id|video
comma
l_int|2
)paren
suffix:semicolon
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x50
comma
r_sizeof
(paren
id|b
)paren
comma
id|b
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
id|dvb_filter_pes2ts_init
c_func
(paren
op_amp
id|dec-&gt;a_pes2ts
comma
id|dec-&gt;pid
(braket
id|DMX_PES_AUDIO
)braket
comma
id|ttusb_dec_av_pes2ts_cb
comma
id|dec-&gt;demux.feed
)paren
suffix:semicolon
id|dvb_filter_pes2ts_init
c_func
(paren
op_amp
id|dec-&gt;v_pes2ts
comma
id|dec-&gt;pid
(braket
id|DMX_PES_VIDEO
)braket
comma
id|ttusb_dec_av_pes2ts_cb
comma
id|dec-&gt;demux.feed
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_i2c_master_xfer
r_static
r_int
id|ttusb_dec_i2c_master_xfer
c_func
(paren
r_struct
id|dvb_i2c_bus
op_star
id|i2c
comma
r_const
r_struct
id|i2c_msg
id|msgs
(braket
)braket
comma
r_int
id|num
)paren
(brace
r_int
id|result
comma
id|i
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|result
op_assign
id|ttusb_dec_send_command
c_func
(paren
id|i2c-&gt;data
comma
id|msgs
(braket
id|i
)braket
dot
id|addr
comma
id|msgs
(braket
id|i
)braket
dot
id|len
comma
id|msgs
(braket
id|i
)braket
dot
id|buf
comma
l_int|NULL
comma
l_int|NULL
)paren
)paren
)paren
r_return
id|result
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_process_av_pes
r_static
r_void
id|ttusb_dec_process_av_pes
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
comma
id|u8
op_star
id|av_pes
comma
r_int
id|length
)paren
(brace
r_int
id|i
suffix:semicolon
id|u16
id|csum
op_assign
l_int|0
suffix:semicolon
id|u8
id|c
suffix:semicolon
r_if
c_cond
(paren
id|length
OL
l_int|16
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: packet too short.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|length
suffix:semicolon
id|i
op_add_assign
l_int|2
)paren
(brace
id|csum
op_xor_assign
id|le16_to_cpup
c_func
(paren
(paren
id|u16
op_star
)paren
(paren
id|av_pes
op_plus
id|i
)paren
)paren
suffix:semicolon
id|c
op_assign
id|av_pes
(braket
id|i
)braket
suffix:semicolon
id|av_pes
(braket
id|i
)braket
op_assign
id|av_pes
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
id|av_pes
(braket
id|i
op_plus
l_int|1
)braket
op_assign
id|c
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csum
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: checksum failed.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|length
OG
l_int|8
op_plus
id|MAX_AV_PES_LENGTH
op_plus
l_int|4
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: packet too long.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|av_pes
(braket
l_int|0
)braket
op_eq
l_char|&squot;A&squot;
op_logical_and
id|av_pes
(braket
l_int|1
)braket
op_eq
l_char|&squot;V&squot;
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: invalid AV_PES packet.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|av_pes
(braket
l_int|2
)braket
)paren
(brace
r_case
l_int|0x01
suffix:colon
(brace
multiline_comment|/* VideoStream */
r_int
id|prebytes
op_assign
id|av_pes
(braket
l_int|5
)braket
op_amp
l_int|0x03
suffix:semicolon
r_int
id|postbytes
op_assign
(paren
id|av_pes
(braket
l_int|5
)braket
op_amp
l_int|0x0c
)paren
op_rshift
l_int|2
suffix:semicolon
id|u16
id|v_pes_payload_length
suffix:semicolon
r_if
c_cond
(paren
id|dec-&gt;v_pes_postbytes
OG
l_int|0
op_logical_and
id|dec-&gt;v_pes_postbytes
op_eq
id|prebytes
)paren
(brace
id|memcpy
c_func
(paren
op_amp
id|dec-&gt;v_pes
(braket
id|dec-&gt;v_pes_length
)braket
comma
op_amp
id|av_pes
(braket
l_int|12
)braket
comma
id|prebytes
)paren
suffix:semicolon
id|dvb_filter_pes2ts
c_func
(paren
op_amp
id|dec-&gt;v_pes2ts
comma
id|dec-&gt;v_pes
comma
id|dec-&gt;v_pes_length
op_plus
id|prebytes
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|av_pes
(braket
l_int|5
)braket
op_amp
l_int|0x10
)paren
(brace
id|dec-&gt;v_pes
(braket
l_int|7
)braket
op_assign
l_int|0x80
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|8
)braket
op_assign
l_int|0x05
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|9
)braket
op_assign
l_int|0x21
op_or
(paren
(paren
id|av_pes
(braket
l_int|8
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|5
)paren
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|10
)braket
op_assign
(paren
(paren
id|av_pes
(braket
l_int|8
)braket
op_amp
l_int|0x3f
)paren
op_lshift
l_int|2
)paren
op_or
(paren
(paren
id|av_pes
(braket
l_int|9
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|11
)braket
op_assign
l_int|0x01
op_or
(paren
(paren
id|av_pes
(braket
l_int|9
)braket
op_amp
l_int|0x3f
)paren
op_lshift
l_int|2
)paren
op_or
(paren
(paren
id|av_pes
(braket
l_int|10
)braket
op_amp
l_int|0x80
)paren
op_rshift
l_int|6
)paren
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|12
)braket
op_assign
(paren
(paren
id|av_pes
(braket
l_int|10
)braket
op_amp
l_int|0x7f
)paren
op_lshift
l_int|1
)paren
op_or
(paren
(paren
id|av_pes
(braket
l_int|11
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|7
)paren
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|13
)braket
op_assign
l_int|0x01
op_or
(paren
(paren
id|av_pes
(braket
l_int|11
)braket
op_amp
l_int|0x7f
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|dec-&gt;v_pes
(braket
l_int|14
)braket
comma
op_amp
id|av_pes
(braket
l_int|12
op_plus
id|prebytes
)braket
comma
id|length
op_minus
l_int|16
op_minus
id|prebytes
)paren
suffix:semicolon
id|dec-&gt;v_pes_length
op_assign
l_int|14
op_plus
id|length
op_minus
l_int|16
op_minus
id|prebytes
suffix:semicolon
)brace
r_else
(brace
id|dec-&gt;v_pes
(braket
l_int|7
)braket
op_assign
l_int|0x00
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|8
)braket
op_assign
l_int|0x00
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|dec-&gt;v_pes
(braket
l_int|9
)braket
comma
op_amp
id|av_pes
(braket
l_int|8
)braket
comma
id|length
op_minus
l_int|12
)paren
suffix:semicolon
id|dec-&gt;v_pes_length
op_assign
l_int|9
op_plus
id|length
op_minus
l_int|12
suffix:semicolon
)brace
id|dec-&gt;v_pes_postbytes
op_assign
id|postbytes
suffix:semicolon
r_if
c_cond
(paren
id|dec-&gt;v_pes
(braket
l_int|9
op_plus
id|dec-&gt;v_pes
(braket
l_int|8
)braket
)braket
op_eq
l_int|0x00
op_logical_and
id|dec-&gt;v_pes
(braket
l_int|10
op_plus
id|dec-&gt;v_pes
(braket
l_int|8
)braket
)braket
op_eq
l_int|0x00
op_logical_and
id|dec-&gt;v_pes
(braket
l_int|11
op_plus
id|dec-&gt;v_pes
(braket
l_int|8
)braket
)braket
op_eq
l_int|0x01
)paren
id|dec-&gt;v_pes
(braket
l_int|6
)braket
op_assign
l_int|0x84
suffix:semicolon
r_else
id|dec-&gt;v_pes
(braket
l_int|6
)braket
op_assign
l_int|0x80
suffix:semicolon
id|v_pes_payload_length
op_assign
id|htons
c_func
(paren
id|dec-&gt;v_pes_length
op_minus
l_int|6
op_plus
id|postbytes
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|dec-&gt;v_pes
(braket
l_int|4
)braket
comma
op_amp
id|v_pes_payload_length
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|postbytes
op_eq
l_int|0
)paren
id|dvb_filter_pes2ts
c_func
(paren
op_amp
id|dec-&gt;v_pes2ts
comma
id|dec-&gt;v_pes
comma
id|dec-&gt;v_pes_length
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
l_int|0x02
suffix:colon
multiline_comment|/* MainAudioStream */
id|dvb_filter_pes2ts
c_func
(paren
op_amp
id|dec-&gt;a_pes2ts
comma
op_amp
id|av_pes
(braket
l_int|8
)braket
comma
id|length
op_minus
l_int|12
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%s: unknown AV_PES type: %02x.&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|av_pes
(braket
l_int|2
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|ttusb_dec_process_urb_frame
r_static
r_void
id|ttusb_dec_process_urb_frame
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
comma
id|u8
op_star
id|b
comma
r_int
id|length
)paren
(brace
r_while
c_loop
(paren
id|length
)paren
(brace
r_switch
c_cond
(paren
id|dec-&gt;av_pes_state
)paren
(brace
r_case
l_int|0
suffix:colon
r_case
l_int|1
suffix:colon
r_case
l_int|3
suffix:colon
r_if
c_cond
(paren
op_star
id|b
op_increment
op_eq
l_int|0xaa
)paren
(brace
id|dec-&gt;av_pes_state
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|dec-&gt;av_pes_state
op_eq
l_int|4
)paren
id|dec-&gt;av_pes_length
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|dec-&gt;av_pes_state
op_assign
l_int|0
suffix:semicolon
)brace
id|length
op_decrement
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
op_star
id|b
op_increment
op_eq
l_int|0x00
)paren
(brace
id|dec-&gt;av_pes_state
op_increment
suffix:semicolon
)brace
r_else
(brace
id|dec-&gt;av_pes_state
op_assign
l_int|0
suffix:semicolon
)brace
id|length
op_decrement
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|dec-&gt;av_pes
(braket
id|dec-&gt;av_pes_length
op_increment
)braket
op_assign
op_star
id|b
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|dec-&gt;av_pes_length
op_eq
l_int|8
)paren
(brace
id|dec-&gt;av_pes_state
op_increment
suffix:semicolon
id|dec-&gt;av_pes_payload_length
op_assign
id|le16_to_cpup
c_func
(paren
(paren
id|u16
op_star
)paren
(paren
id|dec-&gt;av_pes
op_plus
l_int|6
)paren
)paren
suffix:semicolon
)brace
id|length
op_decrement
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
(brace
r_int
id|remainder
op_assign
id|dec-&gt;av_pes_payload_length
op_plus
l_int|8
op_minus
id|dec-&gt;av_pes_length
suffix:semicolon
r_if
c_cond
(paren
id|length
op_ge
id|remainder
)paren
(brace
id|memcpy
c_func
(paren
id|dec-&gt;av_pes
op_plus
id|dec-&gt;av_pes_length
comma
id|b
comma
id|remainder
)paren
suffix:semicolon
id|dec-&gt;av_pes_length
op_add_assign
id|remainder
suffix:semicolon
id|b
op_add_assign
id|remainder
suffix:semicolon
id|length
op_sub_assign
id|remainder
suffix:semicolon
id|dec-&gt;av_pes_state
op_increment
suffix:semicolon
)brace
r_else
(brace
id|memcpy
c_func
(paren
op_amp
id|dec-&gt;av_pes
(braket
id|dec-&gt;av_pes_length
)braket
comma
id|b
comma
id|length
)paren
suffix:semicolon
id|dec-&gt;av_pes_length
op_add_assign
id|length
suffix:semicolon
id|length
op_assign
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_case
l_int|6
suffix:colon
id|dec-&gt;av_pes
(braket
id|dec-&gt;av_pes_length
op_increment
)braket
op_assign
op_star
id|b
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|dec-&gt;av_pes_length
op_eq
l_int|8
op_plus
id|dec-&gt;av_pes_payload_length
op_plus
l_int|4
)paren
(brace
id|ttusb_dec_process_av_pes
c_func
(paren
id|dec
comma
id|dec-&gt;av_pes
comma
id|dec-&gt;av_pes_length
)paren
suffix:semicolon
id|dec-&gt;av_pes_state
op_assign
l_int|0
suffix:semicolon
)brace
id|length
op_decrement
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%s: illegal packet state encountered.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dec-&gt;av_pes_state
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
DECL|function|ttusb_dec_process_urb_frame_list
r_static
r_void
id|ttusb_dec_process_urb_frame_list
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
(paren
r_struct
id|ttusb_dec
op_star
)paren
id|data
suffix:semicolon
r_struct
id|list_head
op_star
id|item
suffix:semicolon
r_struct
id|urb_frame
op_star
id|frame
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|spin_lock_irqsave
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list_lock
comma
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|item
op_assign
id|dec-&gt;urb_frame_list.next
)paren
op_ne
op_amp
id|dec-&gt;urb_frame_list
)paren
(brace
id|frame
op_assign
id|list_entry
c_func
(paren
id|item
comma
r_struct
id|urb_frame
comma
id|urb_frame_list
)paren
suffix:semicolon
id|list_del
c_func
(paren
op_amp
id|frame-&gt;urb_frame_list
)paren
suffix:semicolon
)brace
r_else
(brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list_lock
comma
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list_lock
comma
id|flags
)paren
suffix:semicolon
id|ttusb_dec_process_urb_frame
c_func
(paren
id|dec
comma
id|frame-&gt;data
comma
id|frame-&gt;length
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|frame
)paren
suffix:semicolon
)brace
)brace
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,5,0)
DECL|function|ttusb_dec_process_urb
r_static
r_void
id|ttusb_dec_process_urb
c_func
(paren
r_struct
id|urb
op_star
id|urb
)paren
macro_line|#else
r_static
r_void
id|ttusb_dec_process_urb
c_func
(paren
r_struct
id|urb
op_star
id|urb
comma
r_struct
id|pt_regs
op_star
id|ptregs
)paren
macro_line|#endif
(brace
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
id|urb-&gt;context
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|urb-&gt;status
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|FRAMES_PER_ISO_BUF
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|usb_iso_packet_descriptor
op_star
id|d
suffix:semicolon
id|u8
op_star
id|b
suffix:semicolon
r_int
id|length
suffix:semicolon
r_struct
id|urb_frame
op_star
id|frame
suffix:semicolon
id|d
op_assign
op_amp
id|urb-&gt;iso_frame_desc
(braket
id|i
)braket
suffix:semicolon
id|b
op_assign
id|urb-&gt;transfer_buffer
op_plus
id|d-&gt;offset
suffix:semicolon
id|length
op_assign
id|d-&gt;actual_length
suffix:semicolon
r_if
c_cond
(paren
(paren
id|frame
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|urb_frame
)paren
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|memcpy
c_func
(paren
id|frame-&gt;data
comma
id|b
comma
id|length
)paren
suffix:semicolon
id|frame-&gt;length
op_assign
id|length
suffix:semicolon
id|spin_lock_irqsave
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list_lock
comma
id|flags
)paren
suffix:semicolon
id|list_add_tail
c_func
(paren
op_amp
id|frame-&gt;urb_frame_list
comma
op_amp
id|dec-&gt;urb_frame_list
)paren
suffix:semicolon
id|spin_unlock_irqrestore
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list_lock
comma
id|flags
)paren
suffix:semicolon
id|tasklet_schedule
c_func
(paren
op_amp
id|dec-&gt;urb_tasklet
)paren
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
multiline_comment|/* -ENOENT is expected when unlinking urbs */
r_if
c_cond
(paren
id|urb-&gt;status
op_ne
op_minus
id|ENOENT
)paren
id|dprintk
c_func
(paren
l_string|&quot;%s: urb error: %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|urb-&gt;status
)paren
suffix:semicolon
)brace
macro_line|#if LINUX_VERSION_CODE &gt;= KERNEL_VERSION(2,5,0)
r_if
c_cond
(paren
id|dec-&gt;iso_stream_count
)paren
id|usb_submit_urb
c_func
(paren
id|urb
comma
id|GFP_ATOMIC
)paren
suffix:semicolon
macro_line|#endif
)brace
DECL|function|ttusb_dec_setup_urbs
r_static
r_void
id|ttusb_dec_setup_urbs
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
comma
id|j
comma
id|buffer_offset
op_assign
l_int|0
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|frame_offset
op_assign
l_int|0
suffix:semicolon
r_struct
id|urb
op_star
id|urb
op_assign
id|dec-&gt;iso_urb
(braket
id|i
)braket
suffix:semicolon
id|urb-&gt;dev
op_assign
id|dec-&gt;udev
suffix:semicolon
id|urb-&gt;context
op_assign
id|dec
suffix:semicolon
id|urb-&gt;complete
op_assign
id|ttusb_dec_process_urb
suffix:semicolon
id|urb-&gt;pipe
op_assign
id|dec-&gt;stream_pipe
suffix:semicolon
id|urb-&gt;transfer_flags
op_assign
id|URB_ISO_ASAP
suffix:semicolon
macro_line|#if LINUX_VERSION_CODE &gt;= KERNEL_VERSION(2,5,0)
id|urb-&gt;interval
op_assign
l_int|1
suffix:semicolon
macro_line|#endif
id|urb-&gt;number_of_packets
op_assign
id|FRAMES_PER_ISO_BUF
suffix:semicolon
id|urb-&gt;transfer_buffer_length
op_assign
id|ISO_FRAME_SIZE
op_star
id|FRAMES_PER_ISO_BUF
suffix:semicolon
id|urb-&gt;transfer_buffer
op_assign
id|dec-&gt;iso_buffer
op_plus
id|buffer_offset
suffix:semicolon
id|buffer_offset
op_add_assign
id|ISO_FRAME_SIZE
op_star
id|FRAMES_PER_ISO_BUF
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|FRAMES_PER_ISO_BUF
suffix:semicolon
id|j
op_increment
)paren
(brace
id|urb-&gt;iso_frame_desc
(braket
id|j
)braket
dot
id|offset
op_assign
id|frame_offset
suffix:semicolon
id|urb-&gt;iso_frame_desc
(braket
id|j
)braket
dot
id|length
op_assign
id|ISO_FRAME_SIZE
suffix:semicolon
id|frame_offset
op_add_assign
id|ISO_FRAME_SIZE
suffix:semicolon
)brace
)brace
)brace
DECL|function|ttusb_dec_stop_iso_xfer
r_static
r_void
id|ttusb_dec_stop_iso_xfer
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
id|down_interruptible
c_func
(paren
op_amp
id|dec-&gt;iso_sem
)paren
)paren
r_return
suffix:semicolon
id|dec-&gt;iso_stream_count
op_decrement
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dec-&gt;iso_stream_count
)paren
(brace
id|u8
id|b0
(braket
)braket
op_assign
(brace
l_int|0x00
)brace
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
id|usb_unlink_urb
c_func
(paren
id|dec-&gt;iso_urb
(braket
id|i
)braket
)paren
suffix:semicolon
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x81
comma
r_sizeof
(paren
id|b0
)paren
comma
id|b0
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|dec-&gt;iso_sem
)paren
suffix:semicolon
)brace
multiline_comment|/* Setting the interface of the DEC tends to take down the USB communications&n; * for a short period, so it&squot;s important not to call this function just before&n; * trying to talk to it.&n; */
DECL|function|ttusb_dec_set_streaming_interface
r_static
r_void
id|ttusb_dec_set_streaming_interface
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|dec-&gt;interface
)paren
(brace
id|usb_set_interface
c_func
(paren
id|dec-&gt;udev
comma
l_int|0
comma
l_int|8
)paren
suffix:semicolon
id|dec-&gt;interface
op_assign
l_int|8
suffix:semicolon
)brace
)brace
DECL|function|ttusb_dec_start_iso_xfer
r_static
r_int
id|ttusb_dec_start_iso_xfer
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
comma
id|result
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
id|down_interruptible
c_func
(paren
op_amp
id|dec-&gt;iso_sem
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dec-&gt;iso_stream_count
)paren
(brace
id|u8
id|b0
(braket
)braket
op_assign
(brace
l_int|0x05
)brace
suffix:semicolon
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x80
comma
r_sizeof
(paren
id|b0
)paren
comma
id|b0
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
id|ttusb_dec_setup_urbs
c_func
(paren
id|dec
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|result
op_assign
id|usb_submit_urb
c_func
(paren
id|dec-&gt;iso_urb
(braket
id|i
)braket
comma
id|GFP_KERNEL
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: failed urb submission %d: &quot;
l_string|&quot;error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|i
comma
id|result
)paren
suffix:semicolon
r_while
c_loop
(paren
id|i
)paren
(brace
id|usb_unlink_urb
c_func
(paren
id|dec-&gt;iso_urb
(braket
id|i
op_minus
l_int|1
)braket
)paren
suffix:semicolon
id|i
op_decrement
suffix:semicolon
)brace
id|up
c_func
(paren
op_amp
id|dec-&gt;iso_sem
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
)brace
id|dec-&gt;av_pes_state
op_assign
l_int|0
suffix:semicolon
id|dec-&gt;v_pes_postbytes
op_assign
l_int|0
suffix:semicolon
)brace
id|dec-&gt;iso_stream_count
op_increment
suffix:semicolon
id|up
c_func
(paren
op_amp
id|dec-&gt;iso_sem
)paren
suffix:semicolon
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,5,0)
id|ttusb_dec_set_streaming_interface
c_func
(paren
id|dec
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_start_feed
r_static
r_int
id|ttusb_dec_start_feed
c_func
(paren
r_struct
id|dvb_demux_feed
op_star
id|dvbdmxfeed
)paren
(brace
r_struct
id|dvb_demux
op_star
id|dvbdmx
op_assign
id|dvbdmxfeed-&gt;demux
suffix:semicolon
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
id|dvbdmx-&gt;priv
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dvbdmx-&gt;dmx.frontend
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;  pid: 0x%04X&bslash;n&quot;
comma
id|dvbdmxfeed-&gt;pid
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dvbdmxfeed-&gt;type
)paren
(brace
r_case
id|DMX_TYPE_TS
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  type: DMX_TYPE_TS&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DMX_TYPE_SEC
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  type: DMX_TYPE_SEC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  type: unknown (%d)&bslash;n&quot;
comma
id|dvbdmxfeed-&gt;type
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;  ts_type:&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dvbdmxfeed-&gt;ts_type
op_amp
id|TS_DECODER
)paren
id|dprintk
c_func
(paren
l_string|&quot; TS_DECODER&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dvbdmxfeed-&gt;ts_type
op_amp
id|TS_PACKET
)paren
id|dprintk
c_func
(paren
l_string|&quot; TS_PACKET&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dvbdmxfeed-&gt;ts_type
op_amp
id|TS_PAYLOAD_ONLY
)paren
id|dprintk
c_func
(paren
l_string|&quot; TS_PAYLOAD_ONLY&quot;
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dvbdmxfeed-&gt;pes_type
)paren
(brace
r_case
id|DMX_TS_PES_VIDEO
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: DMX_TS_PES_VIDEO&bslash;n&quot;
)paren
suffix:semicolon
id|dec-&gt;pid
(braket
id|DMX_PES_PCR
)braket
op_assign
id|dvbdmxfeed-&gt;pid
suffix:semicolon
id|dec-&gt;pid
(braket
id|DMX_PES_VIDEO
)braket
op_assign
id|dvbdmxfeed-&gt;pid
suffix:semicolon
id|ttusb_dec_set_pids
c_func
(paren
id|dec
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DMX_TS_PES_AUDIO
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: DMX_TS_PES_AUDIO&bslash;n&quot;
)paren
suffix:semicolon
id|dec-&gt;pid
(braket
id|DMX_PES_AUDIO
)braket
op_assign
id|dvbdmxfeed-&gt;pid
suffix:semicolon
id|ttusb_dec_set_pids
c_func
(paren
id|dec
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DMX_TS_PES_TELETEXT
suffix:colon
id|dec-&gt;pid
(braket
id|DMX_PES_TELETEXT
)braket
op_assign
id|dvbdmxfeed-&gt;pid
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: DMX_TS_PES_TELETEXT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DMX_TS_PES_PCR
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: DMX_TS_PES_PCR&bslash;n&quot;
)paren
suffix:semicolon
id|dec-&gt;pid
(braket
id|DMX_PES_PCR
)braket
op_assign
id|dvbdmxfeed-&gt;pid
suffix:semicolon
id|ttusb_dec_set_pids
c_func
(paren
id|dec
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|DMX_TS_PES_OTHER
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: DMX_TS_PES_OTHER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;  pes_type: unknown (%d)&bslash;n&quot;
comma
id|dvbdmxfeed-&gt;pes_type
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|ttusb_dec_start_iso_xfer
c_func
(paren
id|dec
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_stop_feed
r_static
r_int
id|ttusb_dec_stop_feed
c_func
(paren
r_struct
id|dvb_demux_feed
op_star
id|dvbdmxfeed
)paren
(brace
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
id|dvbdmxfeed-&gt;demux-&gt;priv
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|ttusb_dec_stop_iso_xfer
c_func
(paren
id|dec
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_free_iso_urbs
r_static
r_void
id|ttusb_dec_free_iso_urbs
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|dec-&gt;iso_urb
(braket
id|i
)braket
)paren
id|usb_free_urb
c_func
(paren
id|dec-&gt;iso_urb
(braket
id|i
)braket
)paren
suffix:semicolon
id|pci_free_consistent
c_func
(paren
l_int|NULL
comma
id|ISO_FRAME_SIZE
op_star
(paren
id|FRAMES_PER_ISO_BUF
op_star
id|ISO_BUF_COUNT
)paren
comma
id|dec-&gt;iso_buffer
comma
id|dec-&gt;iso_dma_handle
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_alloc_iso_urbs
r_static
r_int
id|ttusb_dec_alloc_iso_urbs
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dec-&gt;iso_buffer
op_assign
id|pci_alloc_consistent
c_func
(paren
l_int|NULL
comma
id|ISO_FRAME_SIZE
op_star
(paren
id|FRAMES_PER_ISO_BUF
op_star
id|ISO_BUF_COUNT
)paren
comma
op_amp
id|dec-&gt;iso_dma_handle
)paren
suffix:semicolon
id|memset
c_func
(paren
id|dec-&gt;iso_buffer
comma
l_int|0
comma
r_sizeof
(paren
id|ISO_FRAME_SIZE
op_star
(paren
id|FRAMES_PER_ISO_BUF
op_star
id|ISO_BUF_COUNT
)paren
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|urb
op_star
id|urb
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|urb
op_assign
id|usb_alloc_urb
c_func
(paren
id|FRAMES_PER_ISO_BUF
comma
id|GFP_KERNEL
)paren
)paren
)paren
(brace
id|ttusb_dec_free_iso_urbs
c_func
(paren
id|dec
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|dec-&gt;iso_urb
(braket
id|i
)braket
op_assign
id|urb
suffix:semicolon
)brace
id|ttusb_dec_setup_urbs
c_func
(paren
id|dec
)paren
suffix:semicolon
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,5,0)
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|next
op_assign
(paren
id|i
op_plus
l_int|1
)paren
op_mod
id|ISO_BUF_COUNT
suffix:semicolon
id|dec-&gt;iso_urb
(braket
id|i
)braket
op_member_access_from_pointer
id|next
op_assign
id|dec-&gt;iso_urb
(braket
id|next
)braket
suffix:semicolon
)brace
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_init_tasklet
r_static
r_void
id|ttusb_dec_init_tasklet
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|dec-&gt;urb_frame_list_lock
op_assign
id|SPIN_LOCK_UNLOCKED
suffix:semicolon
id|INIT_LIST_HEAD
c_func
(paren
op_amp
id|dec-&gt;urb_frame_list
)paren
suffix:semicolon
id|tasklet_init
c_func
(paren
op_amp
id|dec-&gt;urb_tasklet
comma
id|ttusb_dec_process_urb_frame_list
comma
(paren
r_int
r_int
)paren
id|dec
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_init_v_pes
r_static
r_void
id|ttusb_dec_init_v_pes
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|0
)braket
op_assign
l_int|0x00
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|1
)braket
op_assign
l_int|0x00
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|2
)braket
op_assign
l_int|0x01
suffix:semicolon
id|dec-&gt;v_pes
(braket
l_int|3
)braket
op_assign
l_int|0xe0
suffix:semicolon
)brace
DECL|function|ttusb_dec_init_usb
r_static
r_void
id|ttusb_dec_init_usb
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|sema_init
c_func
(paren
op_amp
id|dec-&gt;usb_sem
comma
l_int|1
)paren
suffix:semicolon
id|sema_init
c_func
(paren
op_amp
id|dec-&gt;iso_sem
comma
l_int|1
)paren
suffix:semicolon
id|dec-&gt;command_pipe
op_assign
id|usb_sndbulkpipe
c_func
(paren
id|dec-&gt;udev
comma
id|COMMAND_PIPE
)paren
suffix:semicolon
id|dec-&gt;result_pipe
op_assign
id|usb_rcvbulkpipe
c_func
(paren
id|dec-&gt;udev
comma
id|RESULT_PIPE
)paren
suffix:semicolon
id|dec-&gt;stream_pipe
op_assign
id|usb_rcvisocpipe
c_func
(paren
id|dec-&gt;udev
comma
id|STREAM_PIPE
)paren
suffix:semicolon
id|ttusb_dec_alloc_iso_urbs
c_func
(paren
id|dec
)paren
suffix:semicolon
)brace
macro_line|#include &quot;dsp_dec2000.h&quot;
DECL|function|ttusb_dec_boot_dsp
r_static
r_int
id|ttusb_dec_boot_dsp
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
comma
id|j
comma
id|actual_len
comma
id|result
comma
id|size
comma
id|trans_count
suffix:semicolon
id|u8
id|b0
(braket
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x1b
comma
l_int|0xc8
comma
l_int|0x61
comma
l_int|0x00
)brace
suffix:semicolon
id|u8
id|b1
(braket
)braket
op_assign
(brace
l_int|0x61
)brace
suffix:semicolon
id|u8
id|b
(braket
id|ARM_PACKET_SIZE
)braket
suffix:semicolon
id|u32
id|dsp_length
op_assign
id|htonl
c_func
(paren
r_sizeof
(paren
id|dsp_dec2000
)paren
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|b0
comma
op_amp
id|dsp_length
comma
l_int|4
)paren
suffix:semicolon
id|result
op_assign
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x41
comma
r_sizeof
(paren
id|b0
)paren
comma
id|b0
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|result
)paren
r_return
id|result
suffix:semicolon
id|trans_count
op_assign
l_int|0
suffix:semicolon
id|j
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|dsp_dec2000
)paren
suffix:semicolon
id|i
op_add_assign
id|COMMAND_PACKET_SIZE
)paren
(brace
id|size
op_assign
r_sizeof
(paren
id|dsp_dec2000
)paren
op_minus
id|i
suffix:semicolon
r_if
c_cond
(paren
id|size
OG
id|COMMAND_PACKET_SIZE
)paren
id|size
op_assign
id|COMMAND_PACKET_SIZE
suffix:semicolon
id|b
(braket
id|j
op_plus
l_int|0
)braket
op_assign
l_int|0xaa
suffix:semicolon
id|b
(braket
id|j
op_plus
l_int|1
)braket
op_assign
id|trans_count
op_increment
suffix:semicolon
id|b
(braket
id|j
op_plus
l_int|2
)braket
op_assign
l_int|0xf0
suffix:semicolon
id|b
(braket
id|j
op_plus
l_int|3
)braket
op_assign
id|size
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|b
(braket
id|j
op_plus
l_int|4
)braket
comma
op_amp
id|dsp_dec2000
(braket
id|i
)braket
comma
id|size
)paren
suffix:semicolon
id|j
op_add_assign
id|COMMAND_PACKET_SIZE
op_plus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|j
op_ge
id|ARM_PACKET_SIZE
)paren
(brace
id|result
op_assign
id|usb_bulk_msg
c_func
(paren
id|dec-&gt;udev
comma
id|dec-&gt;command_pipe
comma
id|b
comma
id|ARM_PACKET_SIZE
comma
op_amp
id|actual_len
comma
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
id|j
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|size
OL
id|COMMAND_PACKET_SIZE
)paren
(brace
id|result
op_assign
id|usb_bulk_msg
c_func
(paren
id|dec-&gt;udev
comma
id|dec-&gt;command_pipe
comma
id|b
comma
id|j
op_minus
id|COMMAND_PACKET_SIZE
op_plus
id|size
comma
op_amp
id|actual_len
comma
id|HZ
op_div
l_int|10
)paren
suffix:semicolon
)brace
)brace
id|result
op_assign
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x43
comma
r_sizeof
(paren
id|b1
)paren
comma
id|b1
comma
l_int|NULL
comma
l_int|NULL
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|ttusb_dec_init_stb
r_static
r_void
id|ttusb_dec_init_stb
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|u8
id|c
(braket
id|COMMAND_PACKET_SIZE
)braket
suffix:semicolon
r_int
id|c_length
suffix:semicolon
r_int
id|result
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|result
op_assign
id|ttusb_dec_send_command
c_func
(paren
id|dec
comma
l_int|0x08
comma
l_int|0
comma
l_int|NULL
comma
op_amp
id|c_length
comma
id|c
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|result
)paren
r_if
c_cond
(paren
id|c_length
op_ne
l_int|0x0c
op_logical_or
(paren
id|c_length
op_eq
l_int|0x0c
op_logical_and
id|c
(braket
l_int|9
)braket
op_ne
l_int|0x63
)paren
)paren
id|ttusb_dec_boot_dsp
c_func
(paren
id|dec
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_init_dvb
r_static
r_int
id|ttusb_dec_init_dvb
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|result
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_register_adapter
c_func
(paren
op_amp
id|dec-&gt;adapter
comma
l_string|&quot;dec2000&quot;
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_register_adapter failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|dec-&gt;i2c_bus
op_assign
id|dvb_register_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_register_i2c_bus failed&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|dec-&gt;demux.dmx.capabilities
op_assign
id|DMX_TS_FILTERING
op_or
id|DMX_SECTION_FILTERING
suffix:semicolon
id|dec-&gt;demux.priv
op_assign
(paren
r_void
op_star
)paren
id|dec
suffix:semicolon
id|dec-&gt;demux.filternum
op_assign
l_int|31
suffix:semicolon
id|dec-&gt;demux.feednum
op_assign
l_int|31
suffix:semicolon
id|dec-&gt;demux.start_feed
op_assign
id|ttusb_dec_start_feed
suffix:semicolon
id|dec-&gt;demux.stop_feed
op_assign
id|ttusb_dec_stop_feed
suffix:semicolon
id|dec-&gt;demux.write_to_decoder
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_dmx_init
c_func
(paren
op_amp
id|dec-&gt;demux
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_dmx_init failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|dvb_unregister_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|dec-&gt;dmxdev.filternum
op_assign
l_int|32
suffix:semicolon
id|dec-&gt;dmxdev.demux
op_assign
op_amp
id|dec-&gt;demux.dmx
suffix:semicolon
id|dec-&gt;dmxdev.capabilities
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_dmxdev_init
c_func
(paren
op_amp
id|dec-&gt;dmxdev
comma
id|dec-&gt;adapter
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_dmxdev_init failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|dec-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|dec-&gt;frontend.source
op_assign
id|DMX_FRONTEND_0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dec-&gt;demux.dmx
dot
id|add_frontend
c_func
(paren
op_amp
id|dec-&gt;demux.dmx
comma
op_amp
id|dec-&gt;frontend
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_dmx_init failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|dec-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|dec-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dec-&gt;demux.dmx
dot
id|connect_frontend
c_func
(paren
op_amp
id|dec-&gt;demux.dmx
comma
op_amp
id|dec-&gt;frontend
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: dvb_dmx_init failed: error %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
id|dec-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|dec-&gt;demux.dmx
comma
op_amp
id|dec-&gt;frontend
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|dec-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|dec-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|dvb_net_init
c_func
(paren
id|dec-&gt;adapter
comma
op_amp
id|dec-&gt;dvb_net
comma
op_amp
id|dec-&gt;demux.dmx
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_exit_dvb
r_static
r_void
id|ttusb_dec_exit_dvb
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dvb_net_release
c_func
(paren
op_amp
id|dec-&gt;dvb_net
)paren
suffix:semicolon
id|dec-&gt;demux.dmx
dot
id|close
c_func
(paren
op_amp
id|dec-&gt;demux.dmx
)paren
suffix:semicolon
id|dec-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|dec-&gt;demux.dmx
comma
op_amp
id|dec-&gt;frontend
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|dec-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|dec-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_i2c_bus
c_func
(paren
id|ttusb_dec_i2c_master_xfer
comma
id|dec-&gt;adapter
comma
l_int|0
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|dec-&gt;adapter
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_exit_usb
r_static
r_void
id|ttusb_dec_exit_usb
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_int
id|i
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|dec-&gt;iso_stream_count
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ISO_BUF_COUNT
suffix:semicolon
id|i
op_increment
)paren
id|usb_unlink_urb
c_func
(paren
id|dec-&gt;iso_urb
(braket
id|i
)braket
)paren
suffix:semicolon
id|ttusb_dec_free_iso_urbs
c_func
(paren
id|dec
)paren
suffix:semicolon
)brace
DECL|function|ttusb_dec_exit_tasklet
r_static
r_void
id|ttusb_dec_exit_tasklet
c_func
(paren
r_struct
id|ttusb_dec
op_star
id|dec
)paren
(brace
r_struct
id|list_head
op_star
id|item
suffix:semicolon
r_struct
id|urb_frame
op_star
id|frame
suffix:semicolon
id|tasklet_kill
c_func
(paren
op_amp
id|dec-&gt;urb_tasklet
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|item
op_assign
id|dec-&gt;urb_frame_list.next
)paren
op_ne
op_amp
id|dec-&gt;urb_frame_list
)paren
(brace
id|frame
op_assign
id|list_entry
c_func
(paren
id|item
comma
r_struct
id|urb_frame
comma
id|urb_frame_list
)paren
suffix:semicolon
id|list_del
c_func
(paren
op_amp
id|frame-&gt;urb_frame_list
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|frame
)paren
suffix:semicolon
)brace
)brace
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,5,0)
DECL|function|ttusb_dec_probe
r_static
r_void
op_star
id|ttusb_dec_probe
c_func
(paren
r_struct
id|usb_device
op_star
id|udev
comma
r_int
r_int
id|ifnum
comma
r_const
r_struct
id|usb_device_id
op_star
id|id
)paren
(brace
r_struct
id|ttusb_dec
op_star
id|dec
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ifnum
op_ne
l_int|0
)paren
r_return
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|dec
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|ttusb_dec
)paren
comma
id|GFP_KERNEL
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: couldn&squot;t allocate memory.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
l_int|NULL
suffix:semicolon
)brace
id|memset
c_func
(paren
id|dec
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|ttusb_dec
)paren
)paren
suffix:semicolon
id|dec-&gt;udev
op_assign
id|udev
suffix:semicolon
id|ttusb_dec_init_usb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_stb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_dvb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_v_pes
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_tasklet
c_func
(paren
id|dec
)paren
suffix:semicolon
r_return
(paren
r_void
op_star
)paren
id|dec
suffix:semicolon
)brace
macro_line|#else
DECL|function|ttusb_dec_probe
r_static
r_int
id|ttusb_dec_probe
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
comma
r_const
r_struct
id|usb_device_id
op_star
id|id
)paren
(brace
r_struct
id|usb_device
op_star
id|udev
suffix:semicolon
r_struct
id|ttusb_dec
op_star
id|dec
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|udev
op_assign
id|interface_to_usbdev
c_func
(paren
id|intf
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|dec
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|ttusb_dec
)paren
comma
id|GFP_KERNEL
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: couldn&squot;t allocate memory.&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|dec
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|ttusb_dec
)paren
)paren
suffix:semicolon
id|dec-&gt;udev
op_assign
id|udev
suffix:semicolon
id|ttusb_dec_init_usb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_stb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_dvb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_v_pes
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_init_tasklet
c_func
(paren
id|dec
)paren
suffix:semicolon
id|usb_set_intfdata
c_func
(paren
id|intf
comma
(paren
r_void
op_star
)paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_set_streaming_interface
c_func
(paren
id|dec
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,5,0)
DECL|function|ttusb_dec_disconnect
r_static
r_void
id|ttusb_dec_disconnect
c_func
(paren
r_struct
id|usb_device
op_star
id|udev
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
id|data
suffix:semicolon
macro_line|#else
r_static
r_void
id|ttusb_dec_disconnect
c_func
(paren
r_struct
id|usb_interface
op_star
id|intf
)paren
(brace
r_struct
id|ttusb_dec
op_star
id|dec
op_assign
id|usb_get_intfdata
c_func
(paren
id|intf
)paren
suffix:semicolon
id|usb_set_intfdata
c_func
(paren
id|intf
comma
l_int|NULL
)paren
suffix:semicolon
macro_line|#endif
id|dprintk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|ttusb_dec_exit_tasklet
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_exit_usb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|ttusb_dec_exit_dvb
c_func
(paren
id|dec
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|dec
)paren
suffix:semicolon
)brace
DECL|variable|ttusb_dec_table
r_static
r_struct
id|usb_device_id
id|ttusb_dec_table
(braket
)braket
op_assign
(brace
(brace
id|USB_DEVICE
c_func
(paren
l_int|0x0b48
comma
l_int|0x1006
)paren
)brace
comma
multiline_comment|/* Unconfirmed */
(brace
id|USB_DEVICE
c_func
(paren
l_int|0x0b48
comma
l_int|0x1007
)paren
)brace
comma
multiline_comment|/* Unconfirmed */
(brace
id|USB_DEVICE
c_func
(paren
l_int|0x0b48
comma
l_int|0x1008
)paren
)brace
comma
multiline_comment|/* DEC 2000 t */
(brace
)brace
)brace
suffix:semicolon
DECL|variable|ttusb_dec_driver
r_static
r_struct
id|usb_driver
id|ttusb_dec_driver
op_assign
(brace
dot
id|name
op_assign
id|DRIVER_NAME
comma
dot
id|probe
op_assign
id|ttusb_dec_probe
comma
dot
id|disconnect
op_assign
id|ttusb_dec_disconnect
comma
dot
id|id_table
op_assign
id|ttusb_dec_table
comma
)brace
suffix:semicolon
DECL|function|ttusb_dec_init
r_static
r_int
id|__init
id|ttusb_dec_init
c_func
(paren
r_void
)paren
(brace
r_int
id|result
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|usb_register
c_func
(paren
op_amp
id|ttusb_dec_driver
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: initialisation failed: error %d.&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|result
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ttusb_dec_exit
r_static
r_void
id|__exit
id|ttusb_dec_exit
c_func
(paren
r_void
)paren
(brace
id|usb_deregister
c_func
(paren
op_amp
id|ttusb_dec_driver
)paren
suffix:semicolon
)brace
DECL|variable|ttusb_dec_init
id|module_init
c_func
(paren
id|ttusb_dec_init
)paren
suffix:semicolon
DECL|variable|ttusb_dec_exit
id|module_exit
c_func
(paren
id|ttusb_dec_exit
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Alex Woods &lt;linux-dvb@giblets.org&gt;&quot;
)paren
suffix:semicolon
DECL|variable|DRIVER_NAME
id|MODULE_DESCRIPTION
c_func
(paren
id|DRIVER_NAME
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|usb
comma
id|ttusb_dec_table
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|debug
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|debug
comma
l_string|&quot;Debug level&quot;
)paren
suffix:semicolon
eof
