macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/videodev.h&gt;
macro_line|#include &quot;dvb_filter.h&quot;
DECL|variable|bitrates
r_int
r_int
id|bitrates
(braket
l_int|3
)braket
(braket
l_int|16
)braket
op_assign
(brace
(brace
l_int|0
comma
l_int|32
comma
l_int|64
comma
l_int|96
comma
l_int|128
comma
l_int|160
comma
l_int|192
comma
l_int|224
comma
l_int|256
comma
l_int|288
comma
l_int|320
comma
l_int|352
comma
l_int|384
comma
l_int|416
comma
l_int|448
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|32
comma
l_int|48
comma
l_int|56
comma
l_int|64
comma
l_int|80
comma
l_int|96
comma
l_int|112
comma
l_int|128
comma
l_int|160
comma
l_int|192
comma
l_int|224
comma
l_int|256
comma
l_int|320
comma
l_int|384
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|32
comma
l_int|40
comma
l_int|48
comma
l_int|56
comma
l_int|64
comma
l_int|80
comma
l_int|96
comma
l_int|112
comma
l_int|128
comma
l_int|160
comma
l_int|192
comma
l_int|224
comma
l_int|256
comma
l_int|320
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|variable|freq
r_uint32
id|freq
(braket
l_int|4
)braket
op_assign
(brace
l_int|441
comma
l_int|480
comma
l_int|320
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|ac3_bitrates
r_int
r_int
id|ac3_bitrates
(braket
l_int|32
)braket
op_assign
(brace
l_int|32
comma
l_int|40
comma
l_int|48
comma
l_int|56
comma
l_int|64
comma
l_int|80
comma
l_int|96
comma
l_int|112
comma
l_int|128
comma
l_int|160
comma
l_int|192
comma
l_int|224
comma
l_int|256
comma
l_int|320
comma
l_int|384
comma
l_int|448
comma
l_int|512
comma
l_int|576
comma
l_int|640
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|ac3_freq
r_uint32
id|ac3_freq
(braket
l_int|4
)braket
op_assign
(brace
l_int|480
comma
l_int|441
comma
l_int|320
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|ac3_frames
r_uint32
id|ac3_frames
(braket
l_int|3
)braket
(braket
l_int|32
)braket
op_assign
(brace
(brace
l_int|64
comma
l_int|80
comma
l_int|96
comma
l_int|112
comma
l_int|128
comma
l_int|160
comma
l_int|192
comma
l_int|224
comma
l_int|256
comma
l_int|320
comma
l_int|384
comma
l_int|448
comma
l_int|512
comma
l_int|640
comma
l_int|768
comma
l_int|896
comma
l_int|1024
comma
l_int|1152
comma
l_int|1280
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|69
comma
l_int|87
comma
l_int|104
comma
l_int|121
comma
l_int|139
comma
l_int|174
comma
l_int|208
comma
l_int|243
comma
l_int|278
comma
l_int|348
comma
l_int|417
comma
l_int|487
comma
l_int|557
comma
l_int|696
comma
l_int|835
comma
l_int|975
comma
l_int|1114
comma
l_int|1253
comma
l_int|1393
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|96
comma
l_int|120
comma
l_int|144
comma
l_int|168
comma
l_int|192
comma
l_int|240
comma
l_int|288
comma
l_int|336
comma
l_int|384
comma
l_int|480
comma
l_int|576
comma
l_int|672
comma
l_int|768
comma
l_int|960
comma
l_int|1152
comma
l_int|1344
comma
l_int|1536
comma
l_int|1728
comma
l_int|1920
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|function|pes2ts_init
r_void
id|pes2ts_init
c_func
(paren
id|pes2ts_t
op_star
id|p2ts
comma
r_int
r_int
id|pid
comma
id|pes2ts_cb_t
op_star
id|cb
comma
r_void
op_star
id|priv
)paren
(brace
r_int
r_char
op_star
id|buf
op_assign
id|p2ts-&gt;buf
suffix:semicolon
id|buf
(braket
l_int|0
)braket
op_assign
l_int|0x47
suffix:semicolon
id|buf
(braket
l_int|1
)braket
op_assign
(paren
id|pid
op_rshift
l_int|8
)paren
suffix:semicolon
id|buf
(braket
l_int|2
)braket
op_assign
id|pid
op_amp
l_int|0xff
suffix:semicolon
id|p2ts-&gt;cc
op_assign
l_int|0
suffix:semicolon
id|p2ts-&gt;cb
op_assign
id|cb
suffix:semicolon
id|p2ts-&gt;priv
op_assign
id|priv
suffix:semicolon
)brace
DECL|function|pes2ts
r_int
id|pes2ts
c_func
(paren
id|pes2ts_t
op_star
id|p2ts
comma
r_int
r_char
op_star
id|pes
comma
r_int
id|len
)paren
(brace
r_int
r_char
op_star
id|buf
op_assign
id|p2ts-&gt;buf
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
comma
id|rest
suffix:semicolon
singleline_comment|//len=6+((pes[4]&lt;&lt;8)|pes[5]);
id|buf
(braket
l_int|1
)braket
op_or_assign
l_int|0x40
suffix:semicolon
r_while
c_loop
(paren
id|len
op_ge
l_int|184
)paren
(brace
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x10
op_or
(paren
(paren
id|p2ts-&gt;cc
op_increment
)paren
op_amp
l_int|0x0f
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|buf
op_plus
l_int|4
comma
id|pes
comma
l_int|184
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ret
op_assign
id|p2ts
op_member_access_from_pointer
id|cb
c_func
(paren
id|p2ts-&gt;priv
comma
id|buf
)paren
)paren
)paren
r_return
id|ret
suffix:semicolon
id|len
op_sub_assign
l_int|184
suffix:semicolon
id|pes
op_add_assign
l_int|184
suffix:semicolon
id|buf
(braket
l_int|1
)braket
op_and_assign
op_complement
l_int|0x40
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|len
)paren
r_return
l_int|0
suffix:semicolon
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x30
op_or
(paren
(paren
id|p2ts-&gt;cc
op_increment
)paren
op_amp
l_int|0x0f
)paren
suffix:semicolon
id|rest
op_assign
l_int|183
op_minus
id|len
suffix:semicolon
r_if
c_cond
(paren
id|rest
)paren
(brace
id|buf
(braket
l_int|5
)braket
op_assign
l_int|0x00
suffix:semicolon
r_if
c_cond
(paren
id|rest
op_minus
l_int|1
)paren
id|memset
c_func
(paren
id|buf
op_plus
l_int|6
comma
l_int|0xff
comma
id|rest
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|buf
(braket
l_int|4
)braket
op_assign
id|rest
suffix:semicolon
id|memcpy
c_func
(paren
id|buf
op_plus
l_int|5
op_plus
id|rest
comma
id|pes
comma
id|len
)paren
suffix:semicolon
r_return
id|p2ts
op_member_access_from_pointer
id|cb
c_func
(paren
id|p2ts-&gt;priv
comma
id|buf
)paren
suffix:semicolon
)brace
DECL|function|reset_ipack
r_void
id|reset_ipack
c_func
(paren
id|ipack
op_star
id|p
)paren
(brace
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|p-&gt;cid
op_assign
l_int|0
suffix:semicolon
id|p-&gt;plength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;flag1
op_assign
l_int|0
suffix:semicolon
id|p-&gt;flag2
op_assign
l_int|0
suffix:semicolon
id|p-&gt;hlength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;mpeg
op_assign
l_int|0
suffix:semicolon
id|p-&gt;check
op_assign
l_int|0
suffix:semicolon
id|p-&gt;which
op_assign
l_int|0
suffix:semicolon
id|p-&gt;done
op_assign
l_int|0
suffix:semicolon
id|p-&gt;count
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|init_ipack
r_void
id|init_ipack
c_func
(paren
id|ipack
op_star
id|p
comma
r_int
id|size
comma
r_void
(paren
op_star
id|func
)paren
(paren
id|u8
op_star
id|buf
comma
r_int
id|size
comma
r_void
op_star
id|priv
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|p-&gt;buf
op_assign
id|vmalloc
c_func
(paren
id|size
op_star
r_sizeof
(paren
id|u8
)paren
)paren
)paren
)paren
(brace
id|printk
(paren
l_string|&quot;Couldn&squot;t allocate memory for ipack&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|p-&gt;size
op_assign
id|size
suffix:semicolon
id|p-&gt;func
op_assign
id|func
suffix:semicolon
id|p-&gt;repack_subids
op_assign
l_int|0
suffix:semicolon
id|reset_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
DECL|function|free_ipack
r_void
id|free_ipack
c_func
(paren
id|ipack
op_star
id|p
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;buf
)paren
id|vfree
c_func
(paren
id|p-&gt;buf
)paren
suffix:semicolon
)brace
DECL|function|send_ipack
r_void
id|send_ipack
c_func
(paren
id|ipack
op_star
id|p
)paren
(brace
r_int
id|off
suffix:semicolon
id|AudioInfo
id|ai
suffix:semicolon
r_int
id|ac3_off
op_assign
l_int|0
suffix:semicolon
r_int
id|streamid
op_assign
l_int|0
suffix:semicolon
r_int
id|nframes
op_assign
l_int|0
suffix:semicolon
r_int
id|f
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|p-&gt;mpeg
)paren
(brace
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|10
)paren
r_return
suffix:semicolon
id|p-&gt;buf
(braket
l_int|3
)braket
op_assign
id|p-&gt;cid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|4
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|5
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0x00FF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;repack_subids
op_logical_and
id|p-&gt;cid
op_eq
id|PRIVATE_STREAM1
)paren
(brace
id|off
op_assign
l_int|9
op_plus
id|p-&gt;buf
(braket
l_int|8
)braket
suffix:semicolon
id|streamid
op_assign
id|p-&gt;buf
(braket
id|off
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|streamid
op_amp
l_int|0xF8
)paren
op_eq
l_int|0x80
)paren
(brace
id|ai.off
op_assign
l_int|0
suffix:semicolon
id|ac3_off
op_assign
(paren
(paren
id|p-&gt;buf
(braket
id|off
op_plus
l_int|2
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;buf
(braket
id|off
op_plus
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac3_off
OL
id|p-&gt;count
)paren
id|f
op_assign
id|get_ac3info
c_func
(paren
id|p-&gt;buf
op_plus
id|off
op_plus
l_int|3
op_plus
id|ac3_off
comma
id|p-&gt;count
op_minus
id|ac3_off
comma
op_amp
id|ai
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|f
)paren
(brace
id|nframes
op_assign
(paren
id|p-&gt;count
op_minus
id|off
op_minus
l_int|3
op_minus
id|ac3_off
)paren
op_div
id|ai.framesize
op_plus
l_int|1
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|2
)braket
op_assign
(paren
id|ac3_off
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|3
)braket
op_assign
(paren
id|ac3_off
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|1
)braket
op_assign
id|nframes
suffix:semicolon
id|ac3_off
op_add_assign
id|nframes
op_star
id|ai.framesize
op_minus
id|p-&gt;count
suffix:semicolon
)brace
)brace
)brace
id|p
op_member_access_from_pointer
id|func
c_func
(paren
id|p-&gt;buf
comma
id|p-&gt;count
comma
id|p-&gt;data
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|6
)braket
op_assign
l_int|0x80
suffix:semicolon
id|p-&gt;buf
(braket
l_int|7
)braket
op_assign
l_int|0x00
suffix:semicolon
id|p-&gt;buf
(braket
l_int|8
)braket
op_assign
l_int|0x00
suffix:semicolon
id|p-&gt;count
op_assign
l_int|9
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;repack_subids
op_logical_and
id|p-&gt;cid
op_eq
id|PRIVATE_STREAM1
op_logical_and
(paren
id|streamid
op_amp
l_int|0xF8
)paren
op_eq
l_int|0x80
)paren
(brace
id|p-&gt;count
op_add_assign
l_int|4
suffix:semicolon
id|p-&gt;buf
(braket
l_int|9
)braket
op_assign
id|streamid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|10
)braket
op_assign
(paren
id|ac3_off
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
l_int|11
)braket
op_assign
(paren
id|ac3_off
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
l_int|12
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|8
)paren
r_return
suffix:semicolon
id|p-&gt;buf
(braket
l_int|3
)braket
op_assign
id|p-&gt;cid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|4
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|5
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|p
op_member_access_from_pointer
id|func
c_func
(paren
id|p-&gt;buf
comma
id|p-&gt;count
comma
id|p-&gt;data
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|6
)braket
op_assign
l_int|0x0F
suffix:semicolon
id|p-&gt;count
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|send_ipack_rest
r_void
id|send_ipack_rest
c_func
(paren
id|ipack
op_star
id|p
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;plength
op_ne
id|MMAX_PLENGTH
op_minus
l_int|6
op_logical_or
id|p-&gt;found
op_le
l_int|6
)paren
r_return
suffix:semicolon
id|p-&gt;plength
op_assign
id|p-&gt;found
op_minus
l_int|6
suffix:semicolon
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
id|reset_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
DECL|function|write_ipack
r_static
r_void
id|write_ipack
c_func
(paren
id|ipack
op_star
id|p
comma
id|u8
op_star
id|data
comma
r_int
id|count
)paren
(brace
id|u8
id|headr
(braket
l_int|3
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
)brace
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|6
)paren
(brace
id|memcpy
c_func
(paren
id|p-&gt;buf
comma
id|headr
comma
l_int|3
)paren
suffix:semicolon
id|p-&gt;count
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;count
op_plus
id|count
OL
id|p-&gt;size
)paren
(brace
id|memcpy
c_func
(paren
id|p-&gt;buf
op_plus
id|p-&gt;count
comma
id|data
comma
id|count
)paren
suffix:semicolon
id|p-&gt;count
op_add_assign
id|count
suffix:semicolon
)brace
r_else
(brace
r_int
id|rest
op_assign
id|p-&gt;size
op_minus
id|p-&gt;count
suffix:semicolon
id|memcpy
c_func
(paren
id|p-&gt;buf
op_plus
id|p-&gt;count
comma
id|data
comma
id|rest
)paren
suffix:semicolon
id|p-&gt;count
op_add_assign
id|rest
suffix:semicolon
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_minus
id|rest
OG
l_int|0
)paren
id|write_ipack
c_func
(paren
id|p
comma
id|data
op_plus
id|rest
comma
id|count
op_minus
id|rest
)paren
suffix:semicolon
)brace
)brace
DECL|function|instant_repack
r_int
id|instant_repack
c_func
(paren
id|u8
op_star
id|buf
comma
r_int
id|count
comma
id|ipack
op_star
id|p
)paren
(brace
r_int
id|l
suffix:semicolon
r_int
id|c
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
(paren
id|p-&gt;mpeg
op_eq
l_int|0
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
OL
l_int|7
)paren
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
OL
l_int|9
)paren
)paren
op_logical_and
(paren
id|p-&gt;found
OL
l_int|5
op_logical_or
op_logical_neg
id|p-&gt;done
)paren
)paren
(brace
r_switch
c_cond
(paren
id|p-&gt;found
)paren
(brace
r_case
l_int|0
suffix:colon
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0x00
)paren
id|p-&gt;found
op_increment
suffix:semicolon
r_else
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0x01
)paren
id|p-&gt;found
op_increment
suffix:semicolon
r_else
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0
)paren
(brace
id|p-&gt;found
op_assign
l_int|2
suffix:semicolon
)brace
r_else
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|p-&gt;cid
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|buf
(braket
id|c
)braket
)paren
(brace
r_case
id|PROG_STREAM_MAP
suffix:colon
r_case
id|PRIVATE_STREAM2
suffix:colon
r_case
id|PROG_STREAM_DIR
suffix:colon
r_case
id|ECM_STREAM
suffix:colon
r_case
id|EMM_STREAM
suffix:colon
r_case
id|PADDING_STREAM
suffix:colon
r_case
id|DSM_CC_STREAM
suffix:colon
r_case
id|ISO13522_STREAM
suffix:colon
id|p-&gt;done
op_assign
l_int|1
suffix:semicolon
r_case
id|PRIVATE_STREAM1
suffix:colon
r_case
id|VIDEO_STREAM_S
dot
dot
dot
id|VIDEO_STREAM_E
suffix:colon
r_case
id|AUDIO_STREAM_S
dot
dot
dot
id|AUDIO_STREAM_E
suffix:colon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;cid
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
id|count
op_minus
id|c
OG
l_int|1
)paren
(brace
id|p-&gt;plen
(braket
l_int|0
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;plen
(braket
l_int|1
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_add_assign
l_int|2
suffix:semicolon
id|p-&gt;plength
op_assign
(paren
id|p-&gt;plen
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;plen
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_else
(brace
id|p-&gt;plen
(braket
l_int|0
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
r_return
id|count
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|p-&gt;plen
(braket
l_int|1
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;plength
op_assign
(paren
id|p-&gt;plen
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;plen
(braket
l_int|1
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
)paren
(brace
id|p-&gt;flag1
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p-&gt;flag1
op_amp
l_int|0xC0
)paren
op_eq
l_int|0x80
)paren
id|p-&gt;mpeg
op_assign
l_int|2
suffix:semicolon
r_else
(brace
id|p-&gt;hlength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;which
op_assign
l_int|0
suffix:semicolon
id|p-&gt;mpeg
op_assign
l_int|1
suffix:semicolon
id|p-&gt;flag2
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
op_logical_and
id|p-&gt;mpeg
op_eq
l_int|2
)paren
(brace
id|p-&gt;flag2
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
op_logical_and
id|p-&gt;mpeg
op_eq
l_int|2
)paren
(brace
id|p-&gt;hlength
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;plength
)paren
id|p-&gt;plength
op_assign
id|MMAX_PLENGTH
op_minus
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;done
op_logical_or
(paren
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
op_ge
l_int|9
)paren
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
op_ge
l_int|7
)paren
)paren
)paren
(brace
r_switch
c_cond
(paren
id|p-&gt;cid
)paren
(brace
r_case
id|AUDIO_STREAM_S
dot
dot
dot
id|AUDIO_STREAM_E
suffix:colon
r_case
id|VIDEO_STREAM_S
dot
dot
dot
id|VIDEO_STREAM_E
suffix:colon
r_case
id|PRIVATE_STREAM1
suffix:colon
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
op_eq
l_int|9
)paren
(brace
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag1
comma
l_int|1
)paren
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag2
comma
l_int|1
)paren
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;hlength
comma
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
op_eq
l_int|7
)paren
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag1
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
(paren
id|p-&gt;flag2
op_amp
id|PTS_ONLY
)paren
op_logical_and
id|p-&gt;found
OL
l_int|14
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;found
OL
l_int|14
)paren
(brace
id|p-&gt;pts
(braket
id|p-&gt;found
op_minus
l_int|9
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;which
OL
l_int|2000
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;found
op_eq
l_int|7
)paren
(brace
id|p-&gt;check
op_assign
id|p-&gt;flag1
suffix:semicolon
id|p-&gt;hlength
op_assign
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
id|p-&gt;which
op_logical_and
id|c
OL
id|count
op_logical_and
id|p-&gt;check
op_eq
l_int|0xFF
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p-&gt;check
op_amp
l_int|0xC0
)paren
op_eq
l_int|0x40
op_logical_and
op_logical_neg
id|p-&gt;which
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;which
op_eq
l_int|1
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|p-&gt;check
op_amp
l_int|0x30
)paren
op_logical_and
id|p-&gt;check
op_ne
l_int|0xFF
)paren
(brace
id|p-&gt;flag2
op_assign
(paren
id|p-&gt;check
op_amp
l_int|0xF0
)paren
op_lshift
l_int|2
suffix:semicolon
id|p-&gt;pts
(braket
l_int|0
)braket
op_assign
id|p-&gt;check
suffix:semicolon
id|p-&gt;which
op_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;which
OG
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|p-&gt;flag2
op_amp
id|PTS_DTS_FLAGS
)paren
op_eq
id|PTS_ONLY
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;which
OL
l_int|7
)paren
(brace
id|p-&gt;pts
(braket
id|p-&gt;which
op_minus
l_int|2
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;which
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|p-&gt;flag2
op_amp
id|PTS_DTS_FLAGS
)paren
op_eq
id|PTS_DTS
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;which
OL
l_int|12
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;which
OL
l_int|7
)paren
id|p-&gt;pts
(braket
id|p-&gt;which
op_minus
l_int|2
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;which
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
id|p-&gt;which
op_assign
l_int|2000
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;found
OL
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|l
op_assign
id|count
op_minus
id|c
suffix:semicolon
r_if
c_cond
(paren
id|l
op_plus
id|p-&gt;found
OG
id|p-&gt;plength
op_plus
l_int|6
)paren
id|l
op_assign
id|p-&gt;plength
op_plus
l_int|6
op_minus
id|p-&gt;found
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
id|l
)paren
suffix:semicolon
id|p-&gt;found
op_add_assign
id|l
suffix:semicolon
id|c
op_add_assign
id|l
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;done
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;found
op_plus
id|count
op_minus
id|c
OL
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|p-&gt;found
op_add_assign
id|count
op_minus
id|c
suffix:semicolon
id|c
op_assign
id|count
suffix:semicolon
)brace
r_else
(brace
id|c
op_add_assign
id|p-&gt;plength
op_plus
l_int|6
op_minus
id|p-&gt;found
suffix:semicolon
id|p-&gt;found
op_assign
id|p-&gt;plength
op_plus
l_int|6
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|p-&gt;plength
op_logical_and
id|p-&gt;found
op_eq
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
id|reset_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c
OL
id|count
)paren
id|instant_repack
c_func
(paren
id|buf
op_plus
id|c
comma
id|count
op_minus
id|c
comma
id|p
)paren
suffix:semicolon
)brace
)brace
r_return
id|count
suffix:semicolon
)brace
DECL|function|setup_ts2pes
r_void
id|setup_ts2pes
c_func
(paren
id|ipack
op_star
id|pa
comma
id|ipack
op_star
id|pv
comma
id|u16
op_star
id|pida
comma
id|u16
op_star
id|pidv
comma
r_void
(paren
op_star
id|pes_write
)paren
(paren
id|u8
op_star
id|buf
comma
r_int
id|count
comma
r_void
op_star
id|data
)paren
comma
r_void
op_star
id|priv
)paren
(brace
id|init_ipack
c_func
(paren
id|pa
comma
id|IPACKS
comma
id|pes_write
)paren
suffix:semicolon
id|init_ipack
c_func
(paren
id|pv
comma
id|IPACKS
comma
id|pes_write
)paren
suffix:semicolon
id|pa-&gt;pid
op_assign
id|pida
suffix:semicolon
id|pv-&gt;pid
op_assign
id|pidv
suffix:semicolon
id|pa-&gt;data
op_assign
id|priv
suffix:semicolon
id|pv-&gt;data
op_assign
id|priv
suffix:semicolon
)brace
DECL|function|ts_to_pes
r_void
id|ts_to_pes
c_func
(paren
id|ipack
op_star
id|p
comma
id|u8
op_star
id|buf
)paren
singleline_comment|// don&squot;t need count (=188)
(brace
id|u8
id|off
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|buf
op_logical_or
op_logical_neg
id|p
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;NULL POINTER IDIOT&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|buf
(braket
l_int|1
)braket
op_amp
id|PAY_START
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;plength
op_eq
id|MMAX_PLENGTH
op_minus
l_int|6
op_logical_and
id|p-&gt;found
OG
l_int|6
)paren
(brace
id|p-&gt;plength
op_assign
id|p-&gt;found
op_minus
l_int|6
suffix:semicolon
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
id|reset_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|buf
(braket
l_int|3
)braket
op_amp
id|ADAPT_FIELD
)paren
(brace
singleline_comment|// adaptation field?
id|off
op_assign
id|buf
(braket
l_int|4
)braket
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|off
op_plus
l_int|4
OG
l_int|187
)paren
r_return
suffix:semicolon
)brace
id|instant_repack
c_func
(paren
id|buf
op_plus
l_int|4
op_plus
id|off
comma
id|TS_SIZE
op_minus
l_int|4
op_minus
id|off
comma
id|p
)paren
suffix:semicolon
)brace
multiline_comment|/* needs 5 byte input, returns picture coding type*/
DECL|function|read_picture_header
r_int
id|read_picture_header
c_func
(paren
r_uint8
op_star
id|headr
comma
id|mpg_picture
op_star
id|pic
comma
r_int
id|field
comma
r_int
id|pr
)paren
(brace
r_uint8
id|pct
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Pic header: &quot;
)paren
suffix:semicolon
id|pic-&gt;temporal_reference
(braket
id|field
)braket
op_assign
(paren
(paren
id|headr
(braket
l_int|0
)braket
op_lshift
l_int|2
)paren
op_or
(paren
id|headr
(braket
l_int|1
)braket
op_amp
l_int|0x03
)paren
)paren
op_amp
l_int|0x03ff
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot; temp ref: 0x%04x&quot;
comma
id|pic-&gt;temporal_reference
(braket
id|field
)braket
)paren
suffix:semicolon
id|pct
op_assign
(paren
id|headr
(braket
l_int|1
)braket
op_rshift
l_int|2
)paren
op_amp
l_int|0x07
suffix:semicolon
id|pic-&gt;picture_coding_type
(braket
id|field
)braket
op_assign
id|pct
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
(brace
r_switch
c_cond
(paren
id|pct
)paren
(brace
r_case
id|I_FRAME
suffix:colon
id|printk
c_func
(paren
l_string|&quot;  I-FRAME&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|B_FRAME
suffix:colon
id|printk
c_func
(paren
l_string|&quot;  B-FRAME&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|P_FRAME
suffix:colon
id|printk
c_func
(paren
l_string|&quot;  P-FRAME&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|pic-&gt;vinfo.vbv_delay
op_assign
(paren
(paren
id|headr
(braket
l_int|1
)braket
op_rshift
l_int|5
)paren
op_or
(paren
id|headr
(braket
l_int|2
)braket
op_lshift
l_int|3
)paren
op_or
(paren
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0x1F
)paren
op_lshift
l_int|11
)paren
)paren
op_amp
l_int|0xffff
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot; vbv delay: 0x%04x&quot;
comma
id|pic-&gt;vinfo.vbv_delay
)paren
suffix:semicolon
id|pic-&gt;picture_header_parameter
op_assign
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0xe0
)paren
op_or
(paren
(paren
id|headr
(braket
l_int|4
)braket
op_amp
l_int|0x80
)paren
op_rshift
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pct
op_eq
id|B_FRAME
)paren
(brace
id|pic-&gt;picture_header_parameter
op_or_assign
(paren
id|headr
(braket
l_int|4
)braket
op_rshift
l_int|3
)paren
op_amp
l_int|0x0f
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot; pic head param: 0x%x&quot;
comma
id|pic-&gt;picture_header_parameter
)paren
suffix:semicolon
r_return
id|pct
suffix:semicolon
)brace
multiline_comment|/* needs 4 byte input */
DECL|function|read_gop_header
r_int
id|read_gop_header
c_func
(paren
r_uint8
op_star
id|headr
comma
id|mpg_picture
op_star
id|pic
comma
r_int
id|pr
)paren
(brace
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;GOP header: &quot;
)paren
suffix:semicolon
id|pic-&gt;time_code
op_assign
(paren
(paren
id|headr
(braket
l_int|0
)braket
op_lshift
l_int|17
)paren
op_or
(paren
id|headr
(braket
l_int|1
)braket
op_lshift
l_int|9
)paren
op_or
(paren
id|headr
(braket
l_int|2
)braket
op_lshift
l_int|1
)paren
op_or
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0x01
)paren
)paren
op_amp
l_int|0x1ffffff
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot; time: %d:%d.%d &quot;
comma
(paren
id|headr
(braket
l_int|0
)braket
op_rshift
l_int|2
)paren
op_amp
l_int|0x1F
comma
(paren
(paren
id|headr
(braket
l_int|0
)braket
op_lshift
l_int|4
)paren
op_amp
l_int|0x30
)paren
op_or
(paren
(paren
id|headr
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|0x0F
)paren
comma
(paren
(paren
id|headr
(braket
l_int|1
)braket
op_lshift
l_int|3
)paren
op_amp
l_int|0x38
)paren
op_or
(paren
(paren
id|headr
(braket
l_int|2
)braket
op_rshift
l_int|5
)paren
op_amp
l_int|0x0F
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0x40
)paren
op_ne
l_int|0
)paren
(brace
id|pic-&gt;closed_gop
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|pic-&gt;closed_gop
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;closed: %d&quot;
comma
id|pic-&gt;closed_gop
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0x20
)paren
op_ne
l_int|0
)paren
(brace
id|pic-&gt;broken_link
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|pic-&gt;broken_link
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot; broken: %d&bslash;n&quot;
comma
id|pic-&gt;broken_link
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* needs 8 byte input */
DECL|function|read_sequence_header
r_int
id|read_sequence_header
c_func
(paren
r_uint8
op_star
id|headr
comma
id|VideoInfo
op_star
id|vi
comma
r_int
id|pr
)paren
(brace
r_int
id|sw
suffix:semicolon
r_int
id|form
op_assign
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Reading sequence header&bslash;n&quot;
)paren
suffix:semicolon
id|vi-&gt;horizontal_size
op_assign
(paren
(paren
id|headr
(braket
l_int|1
)braket
op_amp
l_int|0xF0
)paren
op_rshift
l_int|4
)paren
op_or
(paren
id|headr
(braket
l_int|0
)braket
op_lshift
l_int|4
)paren
suffix:semicolon
id|vi-&gt;vertical_size
op_assign
(paren
(paren
id|headr
(braket
l_int|1
)braket
op_amp
l_int|0x0F
)paren
op_lshift
l_int|8
)paren
op_or
(paren
id|headr
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|sw
op_assign
(paren
r_int
)paren
(paren
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0xF0
)paren
op_rshift
l_int|4
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sw
)paren
(brace
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Videostream: ASPECT: 1:1&quot;
)paren
suffix:semicolon
id|vi-&gt;aspect_ratio
op_assign
l_int|100
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Videostream: ASPECT: 4:3&quot;
)paren
suffix:semicolon
id|vi-&gt;aspect_ratio
op_assign
l_int|133
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Videostream: ASPECT: 16:9&quot;
)paren
suffix:semicolon
id|vi-&gt;aspect_ratio
op_assign
l_int|177
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Videostream: ASPECT: 2.21:1&quot;
)paren
suffix:semicolon
id|vi-&gt;aspect_ratio
op_assign
l_int|221
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
dot
dot
dot
l_int|15
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Videostream: ASPECT: reserved&quot;
)paren
suffix:semicolon
id|vi-&gt;aspect_ratio
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|vi-&gt;aspect_ratio
op_assign
l_int|0
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  Size = %dx%d&quot;
comma
id|vi-&gt;horizontal_size
comma
id|vi-&gt;vertical_size
)paren
suffix:semicolon
id|sw
op_assign
(paren
r_int
)paren
(paren
id|headr
(braket
l_int|3
)braket
op_amp
l_int|0x0F
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|sw
)paren
(brace
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 23.976 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|23976
suffix:semicolon
id|form
op_assign
op_minus
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 24 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|24000
suffix:semicolon
id|form
op_assign
op_minus
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 25 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|25000
suffix:semicolon
id|form
op_assign
id|VIDEO_MODE_PAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 29.97 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|29970
suffix:semicolon
id|form
op_assign
id|VIDEO_MODE_NTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 30 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|30000
suffix:semicolon
id|form
op_assign
id|VIDEO_MODE_NTSC
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 50 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|50000
suffix:semicolon
id|form
op_assign
id|VIDEO_MODE_PAL
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  FRate: 60 fps&quot;
)paren
suffix:semicolon
id|vi-&gt;framerate
op_assign
l_int|60000
suffix:semicolon
id|form
op_assign
id|VIDEO_MODE_NTSC
suffix:semicolon
r_break
suffix:semicolon
)brace
id|vi-&gt;bit_rate
op_assign
(paren
id|headr
(braket
l_int|4
)braket
op_lshift
l_int|10
)paren
op_or
(paren
id|headr
(braket
l_int|5
)braket
op_lshift
l_int|2
)paren
op_or
(paren
id|headr
(braket
l_int|6
)braket
op_amp
l_int|0x03
)paren
suffix:semicolon
id|vi-&gt;vbv_buffer_size
op_assign
(paren
(paren
id|headr
(braket
l_int|6
)braket
op_amp
l_int|0xF8
)paren
op_rshift
l_int|3
)paren
op_or
(paren
(paren
id|headr
(braket
l_int|7
)braket
op_amp
l_int|0x1F
)paren
op_lshift
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;  BRate: %d Mbit/s&quot;
comma
l_int|4
op_star
(paren
id|vi-&gt;bit_rate
)paren
op_div
l_int|10000
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;  vbvbuffer %d&quot;
comma
l_int|16
op_star
l_int|1024
op_star
(paren
id|vi-&gt;vbv_buffer_size
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|vi-&gt;video_format
op_assign
id|form
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|get_vinfo
r_int
id|get_vinfo
c_func
(paren
r_uint8
op_star
id|mbuf
comma
r_int
id|count
comma
id|VideoInfo
op_star
id|vi
comma
r_int
id|pr
)paren
(brace
r_uint8
op_star
id|headr
suffix:semicolon
r_int
id|found
op_assign
l_int|0
suffix:semicolon
r_int
id|c
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|found
OL
l_int|4
op_logical_and
id|c
op_plus
l_int|4
OL
id|count
)paren
(brace
r_uint8
op_star
id|b
suffix:semicolon
id|b
op_assign
id|mbuf
op_plus
id|c
suffix:semicolon
r_if
c_cond
(paren
id|b
(braket
l_int|0
)braket
op_eq
l_int|0x00
op_logical_and
id|b
(braket
l_int|1
)braket
op_eq
l_int|0x00
op_logical_and
id|b
(braket
l_int|2
)braket
op_eq
l_int|0x01
op_logical_and
id|b
(braket
l_int|3
)braket
op_eq
l_int|0xb3
)paren
id|found
op_assign
l_int|4
suffix:semicolon
r_else
(brace
id|c
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|found
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|c
op_add_assign
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|c
op_plus
l_int|12
op_ge
id|count
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|headr
op_assign
id|mbuf
op_plus
id|c
suffix:semicolon
r_if
c_cond
(paren
id|read_sequence_header
c_func
(paren
id|headr
comma
id|vi
comma
id|pr
)paren
OL
l_int|0
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|vi-&gt;off
op_assign
id|c
op_minus
l_int|4
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|get_ainfo
r_int
id|get_ainfo
c_func
(paren
r_uint8
op_star
id|mbuf
comma
r_int
id|count
comma
id|AudioInfo
op_star
id|ai
comma
r_int
id|pr
)paren
(brace
r_uint8
op_star
id|headr
suffix:semicolon
r_int
id|found
op_assign
l_int|0
suffix:semicolon
r_int
id|c
op_assign
l_int|0
suffix:semicolon
r_int
id|fr
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|found
OL
l_int|2
op_logical_and
id|c
OL
id|count
)paren
(brace
r_uint8
id|b
(braket
l_int|2
)braket
suffix:semicolon
id|memcpy
c_func
(paren
id|b
comma
id|mbuf
op_plus
id|c
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b
(braket
l_int|0
)braket
op_eq
l_int|0xff
op_logical_and
(paren
id|b
(braket
l_int|1
)braket
op_amp
l_int|0xf8
)paren
op_eq
l_int|0xf8
)paren
id|found
op_assign
l_int|2
suffix:semicolon
r_else
(brace
id|c
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|found
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|c
op_plus
l_int|3
op_ge
id|count
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|headr
op_assign
id|mbuf
op_plus
id|c
suffix:semicolon
id|ai-&gt;layer
op_assign
(paren
id|headr
(braket
l_int|1
)braket
op_amp
l_int|0x06
)paren
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Audiostream: Layer: %d&quot;
comma
l_int|4
op_minus
id|ai-&gt;layer
)paren
suffix:semicolon
id|ai-&gt;bit_rate
op_assign
id|bitrates
(braket
(paren
l_int|3
op_minus
id|ai-&gt;layer
)paren
)braket
(braket
(paren
id|headr
(braket
l_int|2
)braket
op_rshift
l_int|4
)paren
)braket
op_star
l_int|1000
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
(brace
r_if
c_cond
(paren
id|ai-&gt;bit_rate
op_eq
l_int|0
)paren
id|printk
c_func
(paren
l_string|&quot;  Bit rate: free&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ai-&gt;bit_rate
op_eq
l_int|0xf
)paren
id|printk
c_func
(paren
l_string|&quot;  BRate: reserved&quot;
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
l_string|&quot;  BRate: %d kb/s&quot;
comma
id|ai-&gt;bit_rate
op_div
l_int|1000
)paren
suffix:semicolon
)brace
id|fr
op_assign
(paren
id|headr
(braket
l_int|2
)braket
op_amp
l_int|0x0c
)paren
op_rshift
l_int|2
suffix:semicolon
id|ai-&gt;frequency
op_assign
id|freq
(braket
id|fr
)braket
op_star
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
(brace
r_if
c_cond
(paren
id|ai-&gt;frequency
op_eq
l_int|3
)paren
id|printk
c_func
(paren
l_string|&quot;  Freq: reserved&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
l_string|&quot;  Freq: %d kHz&bslash;n&quot;
comma
id|ai-&gt;frequency
)paren
suffix:semicolon
)brace
id|ai-&gt;off
op_assign
id|c
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|get_ac3info
r_int
id|get_ac3info
c_func
(paren
r_uint8
op_star
id|mbuf
comma
r_int
id|count
comma
id|AudioInfo
op_star
id|ai
comma
r_int
id|pr
)paren
(brace
r_uint8
op_star
id|headr
suffix:semicolon
r_int
id|found
op_assign
l_int|0
suffix:semicolon
r_int
id|c
op_assign
l_int|0
suffix:semicolon
r_uint8
id|frame
op_assign
l_int|0
suffix:semicolon
r_int
id|fr
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
id|found
op_logical_and
id|c
OL
id|count
)paren
(brace
r_uint8
op_star
id|b
op_assign
id|mbuf
op_plus
id|c
suffix:semicolon
r_if
c_cond
(paren
id|b
(braket
l_int|0
)braket
op_eq
l_int|0x0b
op_logical_and
id|b
(braket
l_int|1
)braket
op_eq
l_int|0x77
)paren
id|found
op_assign
l_int|1
suffix:semicolon
r_else
(brace
id|c
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|found
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;Audiostream: AC3&quot;
)paren
suffix:semicolon
id|ai-&gt;off
op_assign
id|c
suffix:semicolon
r_if
c_cond
(paren
id|c
op_plus
l_int|5
op_ge
id|count
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|ai-&gt;layer
op_assign
l_int|0
suffix:semicolon
singleline_comment|// 0 for AC3
id|headr
op_assign
id|mbuf
op_plus
id|c
op_plus
l_int|2
suffix:semicolon
id|frame
op_assign
(paren
id|headr
(braket
l_int|2
)braket
op_amp
l_int|0x3f
)paren
suffix:semicolon
id|ai-&gt;bit_rate
op_assign
id|ac3_bitrates
(braket
id|frame
op_rshift
l_int|1
)braket
op_star
l_int|1000
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
c_func
(paren
l_string|&quot;  BRate: %d kb/s&quot;
comma
id|ai-&gt;bit_rate
op_div
l_int|1000
)paren
suffix:semicolon
id|ai-&gt;frequency
op_assign
(paren
id|headr
(braket
l_int|2
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
suffix:semicolon
id|fr
op_assign
(paren
id|headr
(braket
l_int|2
)braket
op_amp
l_int|0xc0
)paren
op_rshift
l_int|6
suffix:semicolon
id|ai-&gt;frequency
op_assign
id|freq
(braket
id|fr
)braket
op_star
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
(paren
l_string|&quot;  Freq: %d Hz&bslash;n&quot;
comma
id|ai-&gt;frequency
)paren
suffix:semicolon
id|ai-&gt;framesize
op_assign
id|ac3_frames
(braket
id|fr
)braket
(braket
id|frame
op_rshift
l_int|1
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|frame
op_amp
l_int|1
)paren
op_logical_and
(paren
id|fr
op_eq
l_int|1
)paren
)paren
id|ai-&gt;framesize
op_increment
suffix:semicolon
id|ai-&gt;framesize
op_assign
id|ai-&gt;framesize
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|pr
)paren
id|printk
(paren
l_string|&quot;  Framesize %d&bslash;n&quot;
comma
id|ai-&gt;framesize
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|skip_pes_header
r_uint8
op_star
id|skip_pes_header
c_func
(paren
r_uint8
op_star
op_star
id|bufp
)paren
(brace
r_uint8
op_star
id|inbuf
op_assign
op_star
id|bufp
suffix:semicolon
r_uint8
op_star
id|buf
op_assign
id|inbuf
suffix:semicolon
r_uint8
op_star
id|pts
op_assign
l_int|NULL
suffix:semicolon
r_int
id|skip
op_assign
l_int|0
suffix:semicolon
r_int
id|mpeg1_skip_table
(braket
l_int|16
)braket
op_assign
(brace
l_int|1
comma
l_int|0xffff
comma
l_int|5
comma
l_int|10
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
comma
l_int|0xffff
)brace
suffix:semicolon
r_if
c_cond
(paren
(paren
id|inbuf
(braket
l_int|6
)braket
op_amp
l_int|0xc0
)paren
op_eq
l_int|0x80
)paren
(brace
multiline_comment|/* mpeg2 */
r_if
c_cond
(paren
id|buf
(braket
l_int|7
)braket
op_amp
id|PTS_ONLY
)paren
id|pts
op_assign
id|buf
op_plus
l_int|9
suffix:semicolon
r_else
id|pts
op_assign
l_int|NULL
suffix:semicolon
id|buf
op_assign
id|inbuf
op_plus
l_int|9
op_plus
id|inbuf
(braket
l_int|8
)braket
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* mpeg1 */
r_for
c_loop
(paren
id|buf
op_assign
id|inbuf
op_plus
l_int|6
suffix:semicolon
op_star
id|buf
op_eq
l_int|0xff
suffix:semicolon
id|buf
op_increment
)paren
r_if
c_cond
(paren
id|buf
op_eq
id|inbuf
op_plus
l_int|6
op_plus
l_int|16
)paren
(brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
op_star
id|buf
op_amp
l_int|0xc0
)paren
op_eq
l_int|0x40
)paren
id|buf
op_add_assign
l_int|2
suffix:semicolon
id|skip
op_assign
id|mpeg1_skip_table
(braket
op_star
id|buf
op_rshift
l_int|4
)braket
suffix:semicolon
r_if
c_cond
(paren
id|skip
op_eq
l_int|5
op_logical_or
id|skip
op_eq
l_int|10
)paren
id|pts
op_assign
id|buf
suffix:semicolon
r_else
id|pts
op_assign
l_int|NULL
suffix:semicolon
id|buf
op_add_assign
id|mpeg1_skip_table
(braket
op_star
id|buf
op_rshift
l_int|4
)braket
suffix:semicolon
)brace
op_star
id|bufp
op_assign
id|buf
suffix:semicolon
r_return
id|pts
suffix:semicolon
)brace
DECL|function|initialize_quant_matrix
r_void
id|initialize_quant_matrix
c_func
(paren
r_uint32
op_star
id|matrix
)paren
(brace
r_int
id|i
suffix:semicolon
id|matrix
(braket
l_int|0
)braket
op_assign
l_int|0x08101013
suffix:semicolon
id|matrix
(braket
l_int|1
)braket
op_assign
l_int|0x10131616
suffix:semicolon
id|matrix
(braket
l_int|2
)braket
op_assign
l_int|0x16161616
suffix:semicolon
id|matrix
(braket
l_int|3
)braket
op_assign
l_int|0x1a181a1b
suffix:semicolon
id|matrix
(braket
l_int|4
)braket
op_assign
l_int|0x1b1b1a1a
suffix:semicolon
id|matrix
(braket
l_int|5
)braket
op_assign
l_int|0x1a1a1b1b
suffix:semicolon
id|matrix
(braket
l_int|6
)braket
op_assign
l_int|0x1b1d1d1d
suffix:semicolon
id|matrix
(braket
l_int|7
)braket
op_assign
l_int|0x2222221d
suffix:semicolon
id|matrix
(braket
l_int|8
)braket
op_assign
l_int|0x1d1d1b1b
suffix:semicolon
id|matrix
(braket
l_int|9
)braket
op_assign
l_int|0x1d1d2020
suffix:semicolon
id|matrix
(braket
l_int|10
)braket
op_assign
l_int|0x22222526
suffix:semicolon
id|matrix
(braket
l_int|11
)braket
op_assign
l_int|0x25232322
suffix:semicolon
id|matrix
(braket
l_int|12
)braket
op_assign
l_int|0x23262628
suffix:semicolon
id|matrix
(braket
l_int|13
)braket
op_assign
l_int|0x28283030
suffix:semicolon
id|matrix
(braket
l_int|14
)braket
op_assign
l_int|0x2e2e3838
suffix:semicolon
id|matrix
(braket
l_int|15
)braket
op_assign
l_int|0x3a454553
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
id|matrix
(braket
id|i
)braket
op_assign
l_int|0x10101010
suffix:semicolon
)brace
DECL|function|initialize_mpg_picture
r_void
id|initialize_mpg_picture
c_func
(paren
id|mpg_picture
op_star
id|pic
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* set MPEG1 */
id|pic-&gt;mpeg1_flag
op_assign
l_int|1
suffix:semicolon
id|pic-&gt;profile_and_level
op_assign
l_int|0x4A
suffix:semicolon
multiline_comment|/* MP@LL */
id|pic-&gt;progressive_sequence
op_assign
l_int|1
suffix:semicolon
id|pic-&gt;low_delay
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_display_extension_flag
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pic-&gt;frame_centre_horizontal_offset
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;frame_centre_vertical_offset
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|pic-&gt;last_frame_centre_horizontal_offset
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;last_frame_centre_vertical_offset
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;picture_display_extension_flag
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;picture_display_extension_flag
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_header_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;gop_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_end_flag
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|mpg_set_picture_parameter
r_void
id|mpg_set_picture_parameter
c_func
(paren
r_int32
id|field_type
comma
id|mpg_picture
op_star
id|pic
)paren
(brace
r_int16
id|last_h_offset
suffix:semicolon
r_int16
id|last_v_offset
suffix:semicolon
r_int16
op_star
id|p_h_offset
suffix:semicolon
r_int16
op_star
id|p_v_offset
suffix:semicolon
r_if
c_cond
(paren
id|pic-&gt;mpeg1_flag
)paren
(brace
id|pic-&gt;picture_structure
(braket
id|field_type
)braket
op_assign
id|VIDEO_FRAME_PICTURE
suffix:semicolon
id|pic-&gt;top_field_first
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;repeat_first_field
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;progressive_frame
op_assign
l_int|1
suffix:semicolon
id|pic-&gt;picture_coding_parameter
op_assign
l_int|0x000010
suffix:semicolon
)brace
multiline_comment|/* Reset flag */
id|pic-&gt;picture_display_extension_flag
(braket
id|field_type
)braket
op_assign
l_int|0
suffix:semicolon
id|last_h_offset
op_assign
id|pic-&gt;last_frame_centre_horizontal_offset
suffix:semicolon
id|last_v_offset
op_assign
id|pic-&gt;last_frame_centre_vertical_offset
suffix:semicolon
r_if
c_cond
(paren
id|field_type
op_eq
id|FIRST_FIELD
)paren
(brace
id|p_h_offset
op_assign
id|pic-&gt;frame_centre_horizontal_offset
suffix:semicolon
id|p_v_offset
op_assign
id|pic-&gt;frame_centre_vertical_offset
suffix:semicolon
op_star
id|p_h_offset
op_assign
id|last_h_offset
suffix:semicolon
op_star
(paren
id|p_h_offset
op_plus
l_int|1
)paren
op_assign
id|last_h_offset
suffix:semicolon
op_star
(paren
id|p_h_offset
op_plus
l_int|2
)paren
op_assign
id|last_h_offset
suffix:semicolon
op_star
id|p_v_offset
op_assign
id|last_v_offset
suffix:semicolon
op_star
(paren
id|p_v_offset
op_plus
l_int|1
)paren
op_assign
id|last_v_offset
suffix:semicolon
op_star
(paren
id|p_v_offset
op_plus
l_int|2
)paren
op_assign
id|last_v_offset
suffix:semicolon
)brace
r_else
(brace
id|pic-&gt;frame_centre_horizontal_offset
(braket
l_int|3
)braket
op_assign
id|last_h_offset
suffix:semicolon
id|pic-&gt;frame_centre_vertical_offset
(braket
l_int|3
)braket
op_assign
id|last_v_offset
suffix:semicolon
)brace
)brace
DECL|function|init_mpg_picture
r_void
id|init_mpg_picture
c_func
(paren
id|mpg_picture
op_star
id|pic
comma
r_int
id|chan
comma
r_int32
id|field_type
)paren
(brace
id|pic-&gt;picture_header
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_header_data
op_assign
(paren
id|INIT_HORIZONTAL_SIZE
op_lshift
l_int|20
)paren
op_or
(paren
id|INIT_VERTICAL_SIZE
op_lshift
l_int|8
)paren
op_or
(paren
id|INIT_ASPECT_RATIO
op_lshift
l_int|4
)paren
op_or
(paren
id|INIT_FRAME_RATE
)paren
suffix:semicolon
id|pic-&gt;mpeg1_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;vinfo.horizontal_size
op_assign
id|INIT_DISP_HORIZONTAL_SIZE
suffix:semicolon
id|pic-&gt;vinfo.vertical_size
op_assign
id|INIT_DISP_VERTICAL_SIZE
suffix:semicolon
id|pic-&gt;picture_display_extension_flag
(braket
id|field_type
)braket
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;pts_flag
(braket
id|field_type
)braket
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_gop_header
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;picture_header
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_header_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;gop_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_end_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;sequence_display_extension_flag
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;last_frame_centre_horizontal_offset
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;last_frame_centre_vertical_offset
op_assign
l_int|0
suffix:semicolon
id|pic-&gt;channel
op_assign
id|chan
suffix:semicolon
)brace
eof
