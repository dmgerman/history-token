multiline_comment|/*&n; * Bt8xx based DVB adapter driver &n; *&n; * Copyright (C) 2002,2003 Florian Schirmer &lt;jolt@tuxbox.org&gt;&n; *&n; * This program is free software; you can redistribute it and/or modify&n; * it under the terms of the GNU General Public License as published by&n; * the Free Software Foundation; either version 2 of the License, or&n; * (at your option) any later version.&n; *&n; * This program is distributed in the hope that it will be useful,&n; * but WITHOUT ANY WARRANTY; without even the implied warranty of&n; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; * GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with this program; if not, write to the Free Software&n; * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; *&n; */
macro_line|#include &lt;linux/bitops.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/moduleparam.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/i2c.h&gt;
macro_line|#include &quot;dmxdev.h&quot;
macro_line|#include &quot;dvbdev.h&quot;
macro_line|#include &quot;dvb_demux.h&quot;
macro_line|#include &quot;dvb_frontend.h&quot;
macro_line|#include &quot;dvb-bt8xx.h&quot;
macro_line|#include &quot;bt878.h&quot;
DECL|variable|debug
r_static
r_int
id|debug
suffix:semicolon
id|module_param
c_func
(paren
id|debug
comma
r_int
comma
l_int|0644
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|debug
comma
l_string|&quot;Turn on/off debugging (default:off).&quot;
)paren
suffix:semicolon
DECL|macro|dprintk
mdefine_line|#define dprintk( args... ) &bslash;&n;&t;do { &bslash;&n;&t;&t;if (debug) printk(KERN_DEBUG args); &bslash;&n;&t;} while (0)
DECL|function|dvb_bt8xx_task
r_static
r_void
id|dvb_bt8xx_task
c_func
(paren
r_int
r_int
id|data
)paren
(brace
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
(paren
r_struct
id|dvb_bt8xx_card
op_star
)paren
id|data
suffix:semicolon
singleline_comment|//printk(&quot;%d &quot;, card-&gt;bt-&gt;finished_block);
r_while
c_loop
(paren
id|card-&gt;bt-&gt;last_block
op_ne
id|card-&gt;bt-&gt;finished_block
)paren
(brace
(paren
id|card-&gt;bt-&gt;TS_Size
ques
c_cond
id|dvb_dmx_swfilter_204
suffix:colon
id|dvb_dmx_swfilter
)paren
(paren
op_amp
id|card-&gt;demux
comma
op_amp
id|card-&gt;bt-&gt;buf_cpu
(braket
id|card-&gt;bt-&gt;last_block
op_star
id|card-&gt;bt-&gt;block_bytes
)braket
comma
id|card-&gt;bt-&gt;block_bytes
)paren
suffix:semicolon
id|card-&gt;bt-&gt;last_block
op_assign
(paren
id|card-&gt;bt-&gt;last_block
op_plus
l_int|1
)paren
op_mod
id|card-&gt;bt-&gt;block_count
suffix:semicolon
)brace
)brace
DECL|function|dvb_bt8xx_start_feed
r_static
r_int
id|dvb_bt8xx_start_feed
c_func
(paren
r_struct
id|dvb_demux_feed
op_star
id|dvbdmxfeed
)paren
(brace
r_struct
id|dvb_demux
op_star
id|dvbdmx
op_assign
id|dvbdmxfeed-&gt;demux
suffix:semicolon
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
id|dvbdmx-&gt;priv
suffix:semicolon
r_int
id|rc
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;dvb_bt8xx: start_feed&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dvbdmx-&gt;dmx.frontend
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|down
c_func
(paren
op_amp
id|card-&gt;lock
)paren
suffix:semicolon
id|card-&gt;nfeeds
op_increment
suffix:semicolon
id|rc
op_assign
id|card-&gt;nfeeds
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;nfeeds
op_eq
l_int|1
)paren
id|bt878_start
c_func
(paren
id|card-&gt;bt
comma
id|card-&gt;gpio_mode
comma
id|card-&gt;op_sync_orin
comma
id|card-&gt;irq_err_ignore
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|card-&gt;lock
)paren
suffix:semicolon
r_return
id|rc
suffix:semicolon
)brace
DECL|function|dvb_bt8xx_stop_feed
r_static
r_int
id|dvb_bt8xx_stop_feed
c_func
(paren
r_struct
id|dvb_demux_feed
op_star
id|dvbdmxfeed
)paren
(brace
r_struct
id|dvb_demux
op_star
id|dvbdmx
op_assign
id|dvbdmxfeed-&gt;demux
suffix:semicolon
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
id|dvbdmx-&gt;priv
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;dvb_bt8xx: stop_feed&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dvbdmx-&gt;dmx.frontend
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|down
c_func
(paren
op_amp
id|card-&gt;lock
)paren
suffix:semicolon
id|card-&gt;nfeeds
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;nfeeds
op_eq
l_int|0
)paren
id|bt878_stop
c_func
(paren
id|card-&gt;bt
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|card-&gt;lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|is_pci_slot_eq
r_static
r_int
id|is_pci_slot_eq
c_func
(paren
r_struct
id|pci_dev
op_star
id|adev
comma
r_struct
id|pci_dev
op_star
id|bdev
)paren
(brace
r_if
c_cond
(paren
(paren
id|adev-&gt;subsystem_vendor
op_eq
id|bdev-&gt;subsystem_vendor
)paren
op_logical_and
(paren
id|adev-&gt;subsystem_device
op_eq
id|bdev-&gt;subsystem_device
)paren
op_logical_and
(paren
id|adev-&gt;bus-&gt;number
op_eq
id|bdev-&gt;bus-&gt;number
)paren
op_logical_and
(paren
id|PCI_SLOT
c_func
(paren
id|adev-&gt;devfn
)paren
op_eq
id|PCI_SLOT
c_func
(paren
id|bdev-&gt;devfn
)paren
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|dvb_bt8xx_878_match
r_static
r_struct
id|bt878
id|__init
op_star
id|dvb_bt8xx_878_match
c_func
(paren
r_int
r_int
id|bttv_nr
comma
r_struct
id|pci_dev
op_star
id|bttv_pci_dev
)paren
(brace
r_int
r_int
id|card_nr
suffix:semicolon
multiline_comment|/* Hmm, n squared. Hope n is small */
r_for
c_loop
(paren
id|card_nr
op_assign
l_int|0
suffix:semicolon
id|card_nr
OL
id|bt878_num
suffix:semicolon
id|card_nr
op_increment
)paren
(brace
r_if
c_cond
(paren
id|is_pci_slot_eq
c_func
(paren
id|bt878
(braket
id|card_nr
)braket
dot
id|dev
comma
id|bttv_pci_dev
)paren
)paren
r_return
op_amp
id|bt878
(braket
id|card_nr
)braket
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|thomson_dtt7579_demod_init
r_static
r_int
id|thomson_dtt7579_demod_init
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
)paren
(brace
r_static
id|u8
id|mt352_clock_config
(braket
)braket
op_assign
(brace
l_int|0x89
comma
l_int|0x38
comma
l_int|0x38
)brace
suffix:semicolon
r_static
id|u8
id|mt352_reset
(braket
)braket
op_assign
(brace
l_int|0x50
comma
l_int|0x80
)brace
suffix:semicolon
r_static
id|u8
id|mt352_adc_ctl_1_cfg
(braket
)braket
op_assign
(brace
l_int|0x8E
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|mt352_agc_cfg
(braket
)braket
op_assign
(brace
l_int|0x67
comma
l_int|0x28
comma
l_int|0x20
)brace
suffix:semicolon
r_static
id|u8
id|mt352_gpp_ctl_cfg
(braket
)braket
op_assign
(brace
l_int|0x75
comma
l_int|0x33
)brace
suffix:semicolon
r_static
id|u8
id|mt352_capt_range_cfg
(braket
)braket
op_assign
(brace
l_int|0x75
comma
l_int|0x32
)brace
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_clock_config
comma
r_sizeof
(paren
id|mt352_clock_config
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2000
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_reset
comma
r_sizeof
(paren
id|mt352_reset
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_adc_ctl_1_cfg
comma
r_sizeof
(paren
id|mt352_adc_ctl_1_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_agc_cfg
comma
r_sizeof
(paren
id|mt352_agc_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_gpp_ctl_cfg
comma
r_sizeof
(paren
id|mt352_gpp_ctl_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_capt_range_cfg
comma
r_sizeof
(paren
id|mt352_capt_range_cfg
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|thomson_dtt7579_pll_set
r_static
r_int
id|thomson_dtt7579_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
comma
id|u8
op_star
id|pllbuf
)paren
(brace
id|u32
id|div
suffix:semicolon
r_int
r_char
id|bs
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|cp
op_assign
l_int|0
suffix:semicolon
DECL|macro|IF_FREQUENCYx6
mdefine_line|#define IF_FREQUENCYx6 217    /* 6 * 36.16666666667MHz */
id|div
op_assign
(paren
(paren
(paren
id|params-&gt;frequency
op_plus
l_int|83333
)paren
op_star
l_int|3
)paren
op_div
l_int|500000
)paren
op_plus
id|IF_FREQUENCYx6
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|542000000
)paren
id|cp
op_assign
l_int|0xb4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|771000000
)paren
id|cp
op_assign
l_int|0xbc
suffix:semicolon
r_else
id|cp
op_assign
l_int|0xf4
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
op_eq
l_int|0
)paren
id|bs
op_assign
l_int|0x03
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|443250000
)paren
id|bs
op_assign
l_int|0x02
suffix:semicolon
r_else
id|bs
op_assign
l_int|0x08
suffix:semicolon
id|pllbuf
(braket
l_int|0
)braket
op_assign
l_int|0xc0
suffix:semicolon
singleline_comment|// Note: non-linux standard PLL i2c address
id|pllbuf
(braket
l_int|1
)braket
op_assign
id|div
op_rshift
l_int|8
suffix:semicolon
id|pllbuf
(braket
l_int|2
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|pllbuf
(braket
l_int|3
)braket
op_assign
id|cp
suffix:semicolon
id|pllbuf
(braket
l_int|4
)braket
op_assign
id|bs
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|thomson_dtt7579_config
r_static
r_struct
id|mt352_config
id|thomson_dtt7579_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x0f
comma
dot
id|demod_init
op_assign
id|thomson_dtt7579_demod_init
comma
dot
id|pll_set
op_assign
id|thomson_dtt7579_pll_set
comma
)brace
suffix:semicolon
DECL|function|cx24108_pll_set
r_static
r_int
id|cx24108_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
)paren
(brace
id|u32
id|freq
op_assign
id|params-&gt;frequency
suffix:semicolon
r_int
id|i
comma
id|a
comma
id|n
comma
id|pump
suffix:semicolon
id|u32
id|band
comma
id|pll
suffix:semicolon
id|u32
id|osci
(braket
)braket
op_assign
initialization_block
suffix:semicolon
id|u32
id|bandsel
(braket
)braket
op_assign
initialization_block
suffix:semicolon
DECL|macro|XTAL
mdefine_line|#define XTAL 1011100 /* Hz, really 1.0111 MHz and a /10 prescaler */
id|printk
c_func
(paren
l_string|&quot;cx24108 debug: entering SetTunerFreq, freq=%d&bslash;n&quot;
comma
id|freq
)paren
suffix:semicolon
multiline_comment|/* This is really the bit driving the tuner chip cx24108 */
r_if
c_cond
(paren
id|freq
OL
l_int|950000
)paren
(brace
id|freq
op_assign
l_int|950000
suffix:semicolon
)brace
multiline_comment|/* kHz */
r_if
c_cond
(paren
id|freq
OG
l_int|2150000
)paren
(brace
id|freq
op_assign
l_int|2150000
suffix:semicolon
)brace
multiline_comment|/* satellite IF is 950..2150MHz */
multiline_comment|/* decide which VCO to use for the input frequency */
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
(paren
id|i
OL
r_sizeof
(paren
id|osci
)paren
op_div
r_sizeof
(paren
id|osci
(braket
l_int|0
)braket
)paren
)paren
op_logical_and
(paren
id|osci
(braket
id|i
)braket
OL
id|freq
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;cx24108 debug: select vco #%d (f=%d)&bslash;n&quot;
comma
id|i
comma
id|freq
)paren
suffix:semicolon
id|band
op_assign
id|bandsel
(braket
id|i
)braket
suffix:semicolon
multiline_comment|/* the gain values must be set by SetSymbolrate */
multiline_comment|/* compute the pll divider needed, from Conexant data sheet,&n;           resolved for (n*32+a), remember f(vco) is f(receive) *2 or *4,&n;           depending on the divider bit. It is set to /4 on the 2 lowest &n;           bands  */
id|n
op_assign
(paren
(paren
id|i
op_le
l_int|2
ques
c_cond
l_int|2
suffix:colon
l_int|1
)paren
op_star
id|freq
op_star
l_int|10L
)paren
op_div
(paren
id|XTAL
op_div
l_int|100
)paren
suffix:semicolon
id|a
op_assign
id|n
op_mod
l_int|32
suffix:semicolon
id|n
op_div_assign
l_int|32
suffix:semicolon
r_if
c_cond
(paren
id|a
op_eq
l_int|0
)paren
(brace
id|n
op_decrement
suffix:semicolon
)brace
id|pump
op_assign
(paren
id|freq
OL
(paren
id|osci
(braket
id|i
op_minus
l_int|1
)braket
op_plus
id|osci
(braket
id|i
)braket
)paren
op_div
l_int|2
)paren
suffix:semicolon
id|pll
op_assign
l_int|0xf8000000
op_or
(paren
(paren
id|pump
ques
c_cond
l_int|1
suffix:colon
l_int|2
)paren
op_lshift
(paren
l_int|14
op_plus
l_int|11
)paren
)paren
op_or
(paren
(paren
id|n
op_amp
l_int|0x1ff
)paren
op_lshift
(paren
l_int|5
op_plus
l_int|11
)paren
)paren
op_or
(paren
(paren
id|a
op_amp
l_int|0x1f
)paren
op_lshift
l_int|11
)paren
suffix:semicolon
multiline_comment|/* everything is shifted left 11 bits to left-align the bits in the&n;           32bit word. Output to the tuner goes MSB-aligned, after all */
id|printk
c_func
(paren
l_string|&quot;cx24108 debug: pump=%d, n=%d, a=%d&bslash;n&quot;
comma
id|pump
comma
id|n
comma
id|a
)paren
suffix:semicolon
id|cx24110_pll_write
c_func
(paren
id|fe
comma
id|band
)paren
suffix:semicolon
multiline_comment|/* set vga and vca to their widest-band settings, as a precaution.&n;           SetSymbolrate might not be called to set this up */
id|cx24110_pll_write
c_func
(paren
id|fe
comma
l_int|0x500c0000
)paren
suffix:semicolon
id|cx24110_pll_write
c_func
(paren
id|fe
comma
l_int|0x83f1f800
)paren
suffix:semicolon
id|cx24110_pll_write
c_func
(paren
id|fe
comma
id|pll
)paren
suffix:semicolon
multiline_comment|/*        writereg(client,0x56,0x7f);*/
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|pinnsat_pll_init
r_static
r_int
id|pinnsat_pll_init
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|pctvsat_config
r_static
r_struct
id|cx24110_config
id|pctvsat_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x55
comma
dot
id|pll_init
op_assign
id|pinnsat_pll_init
comma
dot
id|pll_set
op_assign
id|cx24108_pll_set
comma
)brace
suffix:semicolon
DECL|function|microtune_mt7202dtf_pll_set
r_static
r_int
id|microtune_mt7202dtf_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
)paren
(brace
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
(paren
r_struct
id|dvb_bt8xx_card
op_star
)paren
id|fe-&gt;dvb-&gt;priv
suffix:semicolon
id|u8
id|cfg
comma
id|cpump
comma
id|band_select
suffix:semicolon
id|u8
id|data
(braket
l_int|4
)braket
suffix:semicolon
id|u32
id|div
suffix:semicolon
r_struct
id|i2c_msg
id|msg
op_assign
(brace
dot
id|addr
op_assign
l_int|0x60
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|buf
op_assign
id|data
comma
dot
id|len
op_assign
r_sizeof
(paren
id|data
)paren
)brace
suffix:semicolon
id|div
op_assign
(paren
l_int|36000000
op_plus
id|params-&gt;frequency
op_plus
l_int|83333
)paren
op_div
l_int|166666
suffix:semicolon
id|cfg
op_assign
l_int|0x88
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|175000000
)paren
id|cpump
op_assign
l_int|2
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|390000000
)paren
id|cpump
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|470000000
)paren
id|cpump
op_assign
l_int|2
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|750000000
)paren
id|cpump
op_assign
l_int|2
suffix:semicolon
r_else
id|cpump
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|175000000
)paren
id|band_select
op_assign
l_int|0x0e
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|470000000
)paren
id|band_select
op_assign
l_int|0x05
suffix:semicolon
r_else
id|band_select
op_assign
l_int|0x03
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|data
(braket
l_int|1
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|data
(braket
l_int|2
)braket
op_assign
(paren
(paren
id|div
op_rshift
l_int|10
)paren
op_amp
l_int|0x60
)paren
op_or
id|cfg
suffix:semicolon
id|data
(braket
l_int|3
)braket
op_assign
id|cpump
op_or
id|band_select
suffix:semicolon
id|i2c_transfer
c_func
(paren
id|card-&gt;i2c_adapter
comma
op_amp
id|msg
comma
l_int|1
)paren
suffix:semicolon
r_return
(paren
id|div
op_star
l_int|166666
op_minus
l_int|36000000
)paren
suffix:semicolon
)brace
DECL|function|microtune_mt7202dtf_request_firmware
r_static
r_int
id|microtune_mt7202dtf_request_firmware
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_const
r_struct
id|firmware
op_star
op_star
id|fw
comma
r_char
op_star
id|name
)paren
(brace
r_struct
id|dvb_bt8xx_card
op_star
id|bt
op_assign
(paren
r_struct
id|dvb_bt8xx_card
op_star
)paren
id|fe-&gt;dvb-&gt;priv
suffix:semicolon
r_return
id|request_firmware
c_func
(paren
id|fw
comma
id|name
comma
op_amp
id|bt-&gt;bt-&gt;dev-&gt;dev
)paren
suffix:semicolon
)brace
DECL|variable|microtune_mt7202dtf_config
r_static
r_struct
id|sp887x_config
id|microtune_mt7202dtf_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x70
comma
dot
id|pll_set
op_assign
id|microtune_mt7202dtf_pll_set
comma
dot
id|request_firmware
op_assign
id|microtune_mt7202dtf_request_firmware
comma
)brace
suffix:semicolon
DECL|function|advbt771_samsung_tdtc9251dh0_demod_init
r_static
r_int
id|advbt771_samsung_tdtc9251dh0_demod_init
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
)paren
(brace
r_static
id|u8
id|mt352_clock_config
(braket
)braket
op_assign
(brace
l_int|0x89
comma
l_int|0x38
comma
l_int|0x2d
)brace
suffix:semicolon
r_static
id|u8
id|mt352_reset
(braket
)braket
op_assign
(brace
l_int|0x50
comma
l_int|0x80
)brace
suffix:semicolon
r_static
id|u8
id|mt352_adc_ctl_1_cfg
(braket
)braket
op_assign
(brace
l_int|0x8E
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|mt352_agc_cfg
(braket
)braket
op_assign
(brace
l_int|0x67
comma
l_int|0x10
comma
l_int|0x23
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|mt352_av771_extra
(braket
)braket
op_assign
(brace
l_int|0xB5
comma
l_int|0x7A
)brace
suffix:semicolon
r_static
id|u8
id|mt352_capt_range_cfg
(braket
)braket
op_assign
(brace
l_int|0x75
comma
l_int|0x32
)brace
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_clock_config
comma
r_sizeof
(paren
id|mt352_clock_config
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2000
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_reset
comma
r_sizeof
(paren
id|mt352_reset
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_adc_ctl_1_cfg
comma
r_sizeof
(paren
id|mt352_adc_ctl_1_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_agc_cfg
comma
r_sizeof
(paren
id|mt352_agc_cfg
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2000
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_av771_extra
comma
r_sizeof
(paren
id|mt352_av771_extra
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|mt352_capt_range_cfg
comma
r_sizeof
(paren
id|mt352_capt_range_cfg
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|advbt771_samsung_tdtc9251dh0_pll_set
r_static
r_int
id|advbt771_samsung_tdtc9251dh0_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
comma
id|u8
op_star
id|pllbuf
)paren
(brace
id|u32
id|div
suffix:semicolon
r_int
r_char
id|bs
op_assign
l_int|0
suffix:semicolon
r_int
r_char
id|cp
op_assign
l_int|0
suffix:semicolon
DECL|macro|IF_FREQUENCYx6
mdefine_line|#define IF_FREQUENCYx6 217    /* 6 * 36.16666666667MHz */
id|div
op_assign
(paren
(paren
(paren
id|params-&gt;frequency
op_plus
l_int|83333
)paren
op_star
l_int|3
)paren
op_div
l_int|500000
)paren
op_plus
id|IF_FREQUENCYx6
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|150000000
)paren
id|cp
op_assign
l_int|0xB4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|173000000
)paren
id|cp
op_assign
l_int|0xBC
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|250000000
)paren
id|cp
op_assign
l_int|0xB4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|400000000
)paren
id|cp
op_assign
l_int|0xBC
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|420000000
)paren
id|cp
op_assign
l_int|0xF4
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|470000000
)paren
id|cp
op_assign
l_int|0xFC
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|600000000
)paren
id|cp
op_assign
l_int|0xBC
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|730000000
)paren
id|cp
op_assign
l_int|0xF4
suffix:semicolon
r_else
id|cp
op_assign
l_int|0xFC
suffix:semicolon
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|150000000
)paren
id|bs
op_assign
l_int|0x01
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|173000000
)paren
id|bs
op_assign
l_int|0x01
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|250000000
)paren
id|bs
op_assign
l_int|0x02
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|400000000
)paren
id|bs
op_assign
l_int|0x02
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|420000000
)paren
id|bs
op_assign
l_int|0x02
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|470000000
)paren
id|bs
op_assign
l_int|0x02
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|600000000
)paren
id|bs
op_assign
l_int|0x08
suffix:semicolon
r_else
r_if
c_cond
(paren
id|params-&gt;frequency
OL
l_int|730000000
)paren
id|bs
op_assign
l_int|0x08
suffix:semicolon
r_else
id|bs
op_assign
l_int|0x08
suffix:semicolon
id|pllbuf
(braket
l_int|0
)braket
op_assign
l_int|0xc2
suffix:semicolon
singleline_comment|// Note: non-linux standard PLL i2c address
id|pllbuf
(braket
l_int|1
)braket
op_assign
id|div
op_rshift
l_int|8
suffix:semicolon
id|pllbuf
(braket
l_int|2
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|pllbuf
(braket
l_int|3
)braket
op_assign
id|cp
suffix:semicolon
id|pllbuf
(braket
l_int|4
)braket
op_assign
id|bs
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|advbt771_samsung_tdtc9251dh0_config
r_static
r_struct
id|mt352_config
id|advbt771_samsung_tdtc9251dh0_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x0f
comma
dot
id|demod_init
op_assign
id|advbt771_samsung_tdtc9251dh0_demod_init
comma
dot
id|pll_set
op_assign
id|advbt771_samsung_tdtc9251dh0_pll_set
comma
)brace
suffix:semicolon
DECL|variable|dst_config
r_static
r_struct
id|dst_config
id|dst_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x55
comma
)brace
suffix:semicolon
DECL|function|vp3021_alps_tded4_pll_set
r_static
r_int
id|vp3021_alps_tded4_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
)paren
(brace
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
(paren
r_struct
id|dvb_bt8xx_card
op_star
)paren
id|fe-&gt;dvb-&gt;priv
suffix:semicolon
id|u8
id|buf
(braket
l_int|4
)braket
suffix:semicolon
id|u32
id|div
suffix:semicolon
r_struct
id|i2c_msg
id|msg
op_assign
(brace
dot
id|addr
op_assign
l_int|0x60
comma
dot
id|flags
op_assign
l_int|0
comma
dot
id|buf
op_assign
id|buf
comma
dot
id|len
op_assign
r_sizeof
(paren
id|buf
)paren
)brace
suffix:semicolon
id|div
op_assign
(paren
id|params-&gt;frequency
op_plus
l_int|36166667
)paren
op_div
l_int|166667
suffix:semicolon
id|buf
(braket
l_int|0
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7F
suffix:semicolon
id|buf
(braket
l_int|1
)braket
op_assign
id|div
op_amp
l_int|0xFF
suffix:semicolon
id|buf
(braket
l_int|2
)braket
op_assign
l_int|0x85
suffix:semicolon
r_if
c_cond
(paren
(paren
id|params-&gt;frequency
op_ge
l_int|47000000
)paren
op_logical_and
(paren
id|params-&gt;frequency
OL
l_int|153000000
)paren
)paren
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x01
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|params-&gt;frequency
op_ge
l_int|153000000
)paren
op_logical_and
(paren
id|params-&gt;frequency
OL
l_int|430000000
)paren
)paren
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x02
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|params-&gt;frequency
op_ge
l_int|430000000
)paren
op_logical_and
(paren
id|params-&gt;frequency
OL
l_int|824000000
)paren
)paren
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x0C
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|params-&gt;frequency
op_ge
l_int|824000000
)paren
op_logical_and
(paren
id|params-&gt;frequency
OL
l_int|863000000
)paren
)paren
id|buf
(braket
l_int|3
)braket
op_assign
l_int|0x8C
suffix:semicolon
r_else
r_return
op_minus
id|EINVAL
suffix:semicolon
id|i2c_transfer
c_func
(paren
id|card-&gt;i2c_adapter
comma
op_amp
id|msg
comma
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|vp3021_alps_tded4_config
r_static
r_struct
id|nxt6000_config
id|vp3021_alps_tded4_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x0a
comma
dot
id|clock_inversion
op_assign
l_int|1
comma
dot
id|pll_set
op_assign
id|vp3021_alps_tded4_pll_set
comma
)brace
suffix:semicolon
DECL|function|frontend_init
r_static
r_void
id|frontend_init
c_func
(paren
r_struct
id|dvb_bt8xx_card
op_star
id|card
comma
id|u32
id|type
)paren
(brace
r_switch
c_cond
(paren
id|type
)paren
(brace
macro_line|#ifdef BTTV_DVICO_DVBT_LITE
r_case
id|BTTV_DVICO_DVBT_LITE
suffix:colon
id|card-&gt;fe
op_assign
id|mt352_attach
c_func
(paren
op_amp
id|thomson_dtt7579_config
comma
id|card-&gt;i2c_adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
id|card-&gt;fe-&gt;ops-&gt;info.frequency_min
op_assign
l_int|174000000
suffix:semicolon
id|card-&gt;fe-&gt;ops-&gt;info.frequency_max
op_assign
l_int|862000000
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
macro_line|#endif
macro_line|#ifdef BTTV_TWINHAN_VP3021
r_case
id|BTTV_TWINHAN_VP3021
suffix:colon
macro_line|#else
r_case
id|BTTV_NEBULA_DIGITV
suffix:colon
macro_line|#endif
id|card-&gt;fe
op_assign
id|nxt6000_attach
c_func
(paren
op_amp
id|vp3021_alps_tded4_config
comma
id|card-&gt;i2c_adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|BTTV_AVDVBT_761
suffix:colon
id|card-&gt;fe
op_assign
id|sp887x_attach
c_func
(paren
op_amp
id|microtune_mt7202dtf_config
comma
id|card-&gt;i2c_adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|BTTV_AVDVBT_771
suffix:colon
id|card-&gt;fe
op_assign
id|mt352_attach
c_func
(paren
op_amp
id|advbt771_samsung_tdtc9251dh0_config
comma
id|card-&gt;i2c_adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
id|card-&gt;fe-&gt;ops-&gt;info.frequency_min
op_assign
l_int|174000000
suffix:semicolon
id|card-&gt;fe-&gt;ops-&gt;info.frequency_max
op_assign
l_int|862000000
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|BTTV_TWINHAN_DST
suffix:colon
id|card-&gt;fe
op_assign
id|dst_attach
c_func
(paren
op_amp
id|dst_config
comma
id|card-&gt;i2c_adapter
comma
id|card-&gt;bt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|BTTV_PINNACLESAT
suffix:colon
id|card-&gt;fe
op_assign
id|cx24110_attach
c_func
(paren
op_amp
id|pctvsat_config
comma
id|card-&gt;i2c_adapter
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
op_ne
l_int|NULL
)paren
(brace
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|card-&gt;fe
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb-bt8xx: A frontend driver was not found for device %04x/%04x subsystem %04x/%04x&bslash;n&quot;
comma
id|card-&gt;bt-&gt;dev-&gt;vendor
comma
id|card-&gt;bt-&gt;dev-&gt;device
comma
id|card-&gt;bt-&gt;dev-&gt;subsystem_vendor
comma
id|card-&gt;bt-&gt;dev-&gt;subsystem_device
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|dvb_register_frontend
c_func
(paren
id|card-&gt;dvb_adapter
comma
id|card-&gt;fe
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb-bt8xx: Frontend registration failed!&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe-&gt;ops-&gt;release
)paren
id|card-&gt;fe-&gt;ops
op_member_access_from_pointer
id|release
c_func
(paren
id|card-&gt;fe
)paren
suffix:semicolon
id|card-&gt;fe
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
)brace
DECL|function|dvb_bt8xx_load_card
r_static
r_int
id|__init
id|dvb_bt8xx_load_card
c_func
(paren
r_struct
id|dvb_bt8xx_card
op_star
id|card
comma
id|u32
id|type
)paren
(brace
r_int
id|result
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_register_adapter
c_func
(paren
op_amp
id|card-&gt;dvb_adapter
comma
id|card-&gt;card_name
comma
id|THIS_MODULE
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_register_adapter failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|card-&gt;dvb_adapter-&gt;priv
op_assign
id|card
suffix:semicolon
id|card-&gt;bt-&gt;adapter
op_assign
id|card-&gt;i2c_adapter
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|card-&gt;demux
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|dvb_demux
)paren
)paren
suffix:semicolon
id|card-&gt;demux.dmx.capabilities
op_assign
id|DMX_TS_FILTERING
op_or
id|DMX_SECTION_FILTERING
op_or
id|DMX_MEMORY_BASED_FILTERING
suffix:semicolon
id|card-&gt;demux.priv
op_assign
id|card
suffix:semicolon
id|card-&gt;demux.filternum
op_assign
l_int|256
suffix:semicolon
id|card-&gt;demux.feednum
op_assign
l_int|256
suffix:semicolon
id|card-&gt;demux.start_feed
op_assign
id|dvb_bt8xx_start_feed
suffix:semicolon
id|card-&gt;demux.stop_feed
op_assign
id|dvb_bt8xx_stop_feed
suffix:semicolon
id|card-&gt;demux.write_to_decoder
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_dmx_init
c_func
(paren
op_amp
id|card-&gt;demux
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_dmx_init failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|card-&gt;dmxdev.filternum
op_assign
l_int|256
suffix:semicolon
id|card-&gt;dmxdev.demux
op_assign
op_amp
id|card-&gt;demux.dmx
suffix:semicolon
id|card-&gt;dmxdev.capabilities
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|dvb_dmxdev_init
c_func
(paren
op_amp
id|card-&gt;dmxdev
comma
id|card-&gt;dvb_adapter
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_dmxdev_init failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|card-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|card-&gt;fe_hw.source
op_assign
id|DMX_FRONTEND_0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|card-&gt;demux.dmx
dot
id|add_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_hw
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_dmx_init failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|card-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|card-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|card-&gt;fe_mem.source
op_assign
id|DMX_MEMORY_FE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|result
op_assign
id|card-&gt;demux.dmx
dot
id|add_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_mem
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_dmx_init failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
id|card-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_hw
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|card-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|card-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|result
op_assign
id|card-&gt;demux.dmx
dot
id|connect_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_hw
)paren
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: dvb_dmx_init failed (errno = %d)&bslash;n&quot;
comma
id|result
)paren
suffix:semicolon
id|card-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_mem
)paren
suffix:semicolon
id|card-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_hw
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|card-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|card-&gt;demux
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
id|dvb_net_init
c_func
(paren
id|card-&gt;dvb_adapter
comma
op_amp
id|card-&gt;dvbnet
comma
op_amp
id|card-&gt;demux.dmx
)paren
suffix:semicolon
id|tasklet_init
c_func
(paren
op_amp
id|card-&gt;bt-&gt;tasklet
comma
id|dvb_bt8xx_task
comma
(paren
r_int
r_int
)paren
id|card
)paren
suffix:semicolon
id|frontend_init
c_func
(paren
id|card
comma
id|type
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|dvb_bt8xx_probe
r_static
r_int
id|dvb_bt8xx_probe
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_struct
id|bttv_sub_device
op_star
id|sub
op_assign
id|to_bttv_sub_dev
c_func
(paren
id|dev
)paren
suffix:semicolon
r_struct
id|dvb_bt8xx_card
op_star
id|card
suffix:semicolon
r_struct
id|pci_dev
op_star
id|bttv_pci_dev
suffix:semicolon
r_int
id|ret
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|card
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|dvb_bt8xx_card
)paren
comma
id|GFP_KERNEL
)paren
)paren
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|memset
c_func
(paren
id|card
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|card
)paren
)paren
suffix:semicolon
id|init_MUTEX
c_func
(paren
op_amp
id|card-&gt;lock
)paren
suffix:semicolon
id|card-&gt;bttv_nr
op_assign
id|sub-&gt;core-&gt;nr
suffix:semicolon
id|strncpy
c_func
(paren
id|card-&gt;card_name
comma
id|sub-&gt;core-&gt;name
comma
r_sizeof
(paren
id|sub-&gt;core-&gt;name
)paren
)paren
suffix:semicolon
id|card-&gt;i2c_adapter
op_assign
op_amp
id|sub-&gt;core-&gt;i2c_adap
suffix:semicolon
r_switch
c_cond
(paren
id|sub-&gt;core-&gt;type
)paren
(brace
r_case
id|BTTV_PINNACLESAT
suffix:colon
id|card-&gt;gpio_mode
op_assign
l_int|0x0400c060
suffix:semicolon
multiline_comment|/* should be: BT878_A_GAIN=0,BT878_A_PWRDN,BT878_DA_DPM,BT878_DA_SBR,&n;&t;&t;              BT878_DA_IOM=1,BT878_DA_APP to enable serial highspeed mode. */
id|card-&gt;op_sync_orin
op_assign
l_int|0
suffix:semicolon
id|card-&gt;irq_err_ignore
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef BTTV_DVICO_DVBT_LITE
r_case
id|BTTV_DVICO_DVBT_LITE
suffix:colon
macro_line|#endif
id|card-&gt;gpio_mode
op_assign
l_int|0x0400C060
suffix:semicolon
id|card-&gt;op_sync_orin
op_assign
l_int|0
suffix:semicolon
id|card-&gt;irq_err_ignore
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* 26, 15, 14, 6, 5 &n;&t;&t; * A_PWRDN  DA_DPM DA_SBR DA_IOM_DA&n;&t;&t;&t;&t; * DA_APP(parallel) */
r_break
suffix:semicolon
macro_line|#ifdef BTTV_TWINHAN_VP3021
r_case
id|BTTV_TWINHAN_VP3021
suffix:colon
macro_line|#else
r_case
id|BTTV_NEBULA_DIGITV
suffix:colon
macro_line|#endif
r_case
id|BTTV_AVDVBT_761
suffix:colon
id|card-&gt;gpio_mode
op_assign
(paren
l_int|1
op_lshift
l_int|26
)paren
op_or
(paren
l_int|1
op_lshift
l_int|14
)paren
op_or
(paren
l_int|1
op_lshift
l_int|5
)paren
suffix:semicolon
id|card-&gt;op_sync_orin
op_assign
l_int|0
suffix:semicolon
id|card-&gt;irq_err_ignore
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* A_PWRDN DA_SBR DA_APP (high speed serial) */
r_break
suffix:semicolon
r_case
id|BTTV_AVDVBT_771
suffix:colon
singleline_comment|//case 0x07711461:
id|card-&gt;gpio_mode
op_assign
l_int|0x0400402B
suffix:semicolon
id|card-&gt;op_sync_orin
op_assign
id|BT878_RISC_SYNC_MASK
suffix:semicolon
id|card-&gt;irq_err_ignore
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* A_PWRDN DA_SBR  DA_APP[0] PKTP=10 RISC_ENABLE FIFO_ENABLE*/
r_break
suffix:semicolon
r_case
id|BTTV_TWINHAN_DST
suffix:colon
id|card-&gt;gpio_mode
op_assign
l_int|0x2204f2c
suffix:semicolon
id|card-&gt;op_sync_orin
op_assign
id|BT878_RISC_SYNC_MASK
suffix:semicolon
id|card-&gt;irq_err_ignore
op_assign
id|BT878_APABORT
op_or
id|BT878_ARIPERR
op_or
id|BT878_APPERR
op_or
id|BT878_AFBUS
suffix:semicolon
multiline_comment|/* 25,21,14,11,10,9,8,3,2 then&n;&t;&t;&t;&t; * 0x33 = 5,4,1,0&n;&t;&t;&t;&t; * A_SEL=SML, DA_MLB, DA_SBR, &n;&t;&t;&t;&t; * DA_SDR=f, fifo trigger = 32 DWORDS&n;&t;&t;&t;&t; * IOM = 0 == audio A/D&n;&t;&t;&t;&t; * DPM = 0 == digital audio mode&n;&t;&t;&t;&t; * == async data parallel port&n;&t;&t;&t;&t; * then 0x33 (13 is set by start_capture)&n;&t;&t;&t;&t; * DA_APP = async data parallel port, &n;&t;&t;&t;&t; * ACAP_EN = 1,&n;&t;&t;&t;&t; * RISC+FIFO ENABLE */
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;dvb_bt8xx: Unknown bttv card type: %d.&bslash;n&quot;
comma
id|sub-&gt;core-&gt;type
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;dvb_bt8xx: identified card%d as %s&bslash;n&quot;
comma
id|card-&gt;bttv_nr
comma
id|card-&gt;card_name
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|bttv_pci_dev
op_assign
id|bttv_get_pcidev
c_func
(paren
id|card-&gt;bttv_nr
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: no pci device for card %d&bslash;n&quot;
comma
id|card-&gt;bttv_nr
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|card-&gt;bt
op_assign
id|dvb_bt8xx_878_match
c_func
(paren
id|card-&gt;bttv_nr
comma
id|bttv_pci_dev
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: unable to determine DMA core of card %d,&bslash;n&quot;
comma
id|card-&gt;bttv_nr
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;dvb_bt8xx: if you have the ALSA bt87x audio driver &quot;
l_string|&quot;installed, try removing it.&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|init_MUTEX
c_func
(paren
op_amp
id|card-&gt;bt-&gt;gpio_lock
)paren
suffix:semicolon
id|card-&gt;bt-&gt;bttv_nr
op_assign
id|sub-&gt;core-&gt;nr
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ret
op_assign
id|dvb_bt8xx_load_card
c_func
(paren
id|card
comma
id|sub-&gt;core-&gt;type
)paren
)paren
)paren
(brace
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
id|dev_set_drvdata
c_func
(paren
id|dev
comma
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|dvb_bt8xx_remove
r_static
r_int
id|dvb_bt8xx_remove
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_struct
id|dvb_bt8xx_card
op_star
id|card
op_assign
id|dev_get_drvdata
c_func
(paren
id|dev
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;dvb_bt8xx: unloading card%d&bslash;n&quot;
comma
id|card-&gt;bttv_nr
)paren
suffix:semicolon
id|bt878_stop
c_func
(paren
id|card-&gt;bt
)paren
suffix:semicolon
id|tasklet_kill
c_func
(paren
op_amp
id|card-&gt;bt-&gt;tasklet
)paren
suffix:semicolon
id|dvb_net_release
c_func
(paren
op_amp
id|card-&gt;dvbnet
)paren
suffix:semicolon
id|card-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_mem
)paren
suffix:semicolon
id|card-&gt;demux.dmx
dot
id|remove_frontend
c_func
(paren
op_amp
id|card-&gt;demux.dmx
comma
op_amp
id|card-&gt;fe_hw
)paren
suffix:semicolon
id|dvb_dmxdev_release
c_func
(paren
op_amp
id|card-&gt;dmxdev
)paren
suffix:semicolon
id|dvb_dmx_release
c_func
(paren
op_amp
id|card-&gt;demux
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;fe
)paren
id|dvb_unregister_frontend
c_func
(paren
id|card-&gt;fe
)paren
suffix:semicolon
id|dvb_unregister_adapter
c_func
(paren
id|card-&gt;dvb_adapter
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|driver
r_static
r_struct
id|bttv_sub_driver
id|driver
op_assign
(brace
dot
id|drv
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;dvb-bt8xx&quot;
comma
dot
id|probe
op_assign
id|dvb_bt8xx_probe
comma
dot
id|remove
op_assign
id|dvb_bt8xx_remove
comma
multiline_comment|/* FIXME:&n;&t;&t; * .shutdown&t;= dvb_bt8xx_shutdown,&n;&t;&t; * .suspend&t;= dvb_bt8xx_suspend,&n;&t;&t; * .resume&t;= dvb_bt8xx_resume,&n;&t;&t; */
)brace
comma
)brace
suffix:semicolon
DECL|function|dvb_bt8xx_init
r_static
r_int
id|__init
id|dvb_bt8xx_init
c_func
(paren
r_void
)paren
(brace
r_return
id|bttv_sub_register
c_func
(paren
op_amp
id|driver
comma
l_string|&quot;dvb&quot;
)paren
suffix:semicolon
)brace
DECL|function|dvb_bt8xx_exit
r_static
r_void
id|__exit
id|dvb_bt8xx_exit
c_func
(paren
r_void
)paren
(brace
id|bttv_sub_unregister
c_func
(paren
op_amp
id|driver
)paren
suffix:semicolon
)brace
DECL|variable|dvb_bt8xx_init
id|module_init
c_func
(paren
id|dvb_bt8xx_init
)paren
suffix:semicolon
DECL|variable|dvb_bt8xx_exit
id|module_exit
c_func
(paren
id|dvb_bt8xx_exit
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;Bt8xx based DVB adapter driver&quot;
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Florian Schirmer &lt;jolt@tuxbox.org&gt;&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
eof
