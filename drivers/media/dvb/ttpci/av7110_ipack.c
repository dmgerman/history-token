macro_line|#include &quot;dvb_filter.h&quot;
macro_line|#include &quot;av7110_ipack.h&quot;
macro_line|#include &lt;linux/string.h&gt;&t;/* for memcpy() */
macro_line|#include &lt;linux/vmalloc.h&gt;
DECL|function|av7110_ipack_reset
r_void
id|av7110_ipack_reset
c_func
(paren
r_struct
id|ipack
op_star
id|p
)paren
(brace
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|p-&gt;cid
op_assign
l_int|0
suffix:semicolon
id|p-&gt;plength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;flag1
op_assign
l_int|0
suffix:semicolon
id|p-&gt;flag2
op_assign
l_int|0
suffix:semicolon
id|p-&gt;hlength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;mpeg
op_assign
l_int|0
suffix:semicolon
id|p-&gt;check
op_assign
l_int|0
suffix:semicolon
id|p-&gt;which
op_assign
l_int|0
suffix:semicolon
id|p-&gt;done
op_assign
l_int|0
suffix:semicolon
id|p-&gt;count
op_assign
l_int|0
suffix:semicolon
)brace
DECL|function|av7110_ipack_init
r_void
id|av7110_ipack_init
c_func
(paren
r_struct
id|ipack
op_star
id|p
comma
r_int
id|size
comma
r_void
(paren
op_star
id|func
)paren
(paren
id|u8
op_star
id|buf
comma
r_int
id|size
comma
r_void
op_star
id|priv
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|p-&gt;buf
op_assign
id|vmalloc
c_func
(paren
id|size
op_star
r_sizeof
(paren
id|u8
)paren
)paren
)paren
)paren
(brace
id|printk
(paren
l_string|&quot;Couldn&squot;t allocate memory for ipack&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|p-&gt;size
op_assign
id|size
suffix:semicolon
id|p-&gt;func
op_assign
id|func
suffix:semicolon
id|p-&gt;repack_subids
op_assign
l_int|0
suffix:semicolon
id|av7110_ipack_reset
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
DECL|function|av7110_ipack_free
r_void
id|av7110_ipack_free
c_func
(paren
r_struct
id|ipack
op_star
id|p
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;buf
)paren
id|vfree
c_func
(paren
id|p-&gt;buf
)paren
suffix:semicolon
)brace
DECL|function|send_ipack
r_static
r_void
id|send_ipack
c_func
(paren
r_struct
id|ipack
op_star
id|p
)paren
(brace
r_int
id|off
suffix:semicolon
r_struct
id|dvb_audio_info
id|ai
suffix:semicolon
r_int
id|ac3_off
op_assign
l_int|0
suffix:semicolon
r_int
id|streamid
op_assign
l_int|0
suffix:semicolon
r_int
id|nframes
op_assign
l_int|0
suffix:semicolon
r_int
id|f
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|p-&gt;mpeg
)paren
(brace
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|10
)paren
r_return
suffix:semicolon
id|p-&gt;buf
(braket
l_int|3
)braket
op_assign
id|p-&gt;cid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|4
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|5
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0x00FF
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;repack_subids
op_logical_and
id|p-&gt;cid
op_eq
id|PRIVATE_STREAM1
)paren
(brace
id|off
op_assign
l_int|9
op_plus
id|p-&gt;buf
(braket
l_int|8
)braket
suffix:semicolon
id|streamid
op_assign
id|p-&gt;buf
(braket
id|off
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|streamid
op_amp
l_int|0xF8
)paren
op_eq
l_int|0x80
)paren
(brace
id|ai.off
op_assign
l_int|0
suffix:semicolon
id|ac3_off
op_assign
(paren
(paren
id|p-&gt;buf
(braket
id|off
op_plus
l_int|2
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;buf
(braket
id|off
op_plus
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ac3_off
OL
id|p-&gt;count
)paren
id|f
op_assign
id|dvb_filter_get_ac3info
c_func
(paren
id|p-&gt;buf
op_plus
id|off
op_plus
l_int|3
op_plus
id|ac3_off
comma
id|p-&gt;count
op_minus
id|ac3_off
comma
op_amp
id|ai
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|f
)paren
(brace
id|nframes
op_assign
(paren
id|p-&gt;count
op_minus
id|off
op_minus
l_int|3
op_minus
id|ac3_off
)paren
op_div
id|ai.framesize
op_plus
l_int|1
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|2
)braket
op_assign
(paren
id|ac3_off
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|3
)braket
op_assign
(paren
id|ac3_off
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
id|off
op_plus
l_int|1
)braket
op_assign
id|nframes
suffix:semicolon
id|ac3_off
op_add_assign
id|nframes
op_star
id|ai.framesize
op_minus
id|p-&gt;count
suffix:semicolon
)brace
)brace
)brace
id|p
op_member_access_from_pointer
id|func
c_func
(paren
id|p-&gt;buf
comma
id|p-&gt;count
comma
id|p-&gt;data
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|6
)braket
op_assign
l_int|0x80
suffix:semicolon
id|p-&gt;buf
(braket
l_int|7
)braket
op_assign
l_int|0x00
suffix:semicolon
id|p-&gt;buf
(braket
l_int|8
)braket
op_assign
l_int|0x00
suffix:semicolon
id|p-&gt;count
op_assign
l_int|9
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;repack_subids
op_logical_and
id|p-&gt;cid
op_eq
id|PRIVATE_STREAM1
op_logical_and
(paren
id|streamid
op_amp
l_int|0xF8
)paren
op_eq
l_int|0x80
)paren
(brace
id|p-&gt;count
op_add_assign
l_int|4
suffix:semicolon
id|p-&gt;buf
(braket
l_int|9
)braket
op_assign
id|streamid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|10
)braket
op_assign
(paren
id|ac3_off
op_rshift
l_int|8
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
l_int|11
)braket
op_assign
(paren
id|ac3_off
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|p-&gt;buf
(braket
l_int|12
)braket
op_assign
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|8
)paren
r_return
suffix:semicolon
id|p-&gt;buf
(braket
l_int|3
)braket
op_assign
id|p-&gt;cid
suffix:semicolon
id|p-&gt;buf
(braket
l_int|4
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|5
)braket
op_assign
(paren
id|u8
)paren
(paren
(paren
id|p-&gt;count
op_minus
l_int|6
)paren
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|p
op_member_access_from_pointer
id|func
c_func
(paren
id|p-&gt;buf
comma
id|p-&gt;count
comma
id|p-&gt;data
)paren
suffix:semicolon
id|p-&gt;buf
(braket
l_int|6
)braket
op_assign
l_int|0x0F
suffix:semicolon
id|p-&gt;count
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|av7110_ipack_flush
r_void
id|av7110_ipack_flush
c_func
(paren
r_struct
id|ipack
op_star
id|p
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;plength
op_ne
id|MMAX_PLENGTH
op_minus
l_int|6
op_logical_or
id|p-&gt;found
op_le
l_int|6
)paren
r_return
suffix:semicolon
id|p-&gt;plength
op_assign
id|p-&gt;found
op_minus
l_int|6
suffix:semicolon
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
id|av7110_ipack_reset
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
DECL|function|write_ipack
r_static
r_void
id|write_ipack
c_func
(paren
r_struct
id|ipack
op_star
id|p
comma
r_const
id|u8
op_star
id|data
comma
r_int
id|count
)paren
(brace
id|u8
id|headr
(braket
l_int|3
)braket
op_assign
(brace
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
)brace
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;count
OL
l_int|6
)paren
(brace
id|memcpy
c_func
(paren
id|p-&gt;buf
comma
id|headr
comma
l_int|3
)paren
suffix:semicolon
id|p-&gt;count
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;count
op_plus
id|count
OL
id|p-&gt;size
)paren
(brace
id|memcpy
c_func
(paren
id|p-&gt;buf
op_plus
id|p-&gt;count
comma
id|data
comma
id|count
)paren
suffix:semicolon
id|p-&gt;count
op_add_assign
id|count
suffix:semicolon
)brace
r_else
(brace
r_int
id|rest
op_assign
id|p-&gt;size
op_minus
id|p-&gt;count
suffix:semicolon
id|memcpy
c_func
(paren
id|p-&gt;buf
op_plus
id|p-&gt;count
comma
id|data
comma
id|rest
)paren
suffix:semicolon
id|p-&gt;count
op_add_assign
id|rest
suffix:semicolon
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_minus
id|rest
OG
l_int|0
)paren
id|write_ipack
c_func
(paren
id|p
comma
id|data
op_plus
id|rest
comma
id|count
op_minus
id|rest
)paren
suffix:semicolon
)brace
)brace
DECL|function|av7110_ipack_instant_repack
r_int
id|av7110_ipack_instant_repack
(paren
r_const
id|u8
op_star
id|buf
comma
r_int
id|count
comma
r_struct
id|ipack
op_star
id|p
)paren
(brace
r_int
id|l
suffix:semicolon
r_int
id|c
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
(paren
id|p-&gt;mpeg
op_eq
l_int|0
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
OL
l_int|7
)paren
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
OL
l_int|9
)paren
)paren
op_logical_and
(paren
id|p-&gt;found
OL
l_int|5
op_logical_or
op_logical_neg
id|p-&gt;done
)paren
)paren
(brace
r_switch
c_cond
(paren
id|p-&gt;found
)paren
(brace
r_case
l_int|0
suffix:colon
r_case
l_int|1
suffix:colon
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0x00
)paren
id|p-&gt;found
op_increment
suffix:semicolon
r_else
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0x01
)paren
id|p-&gt;found
op_increment
suffix:semicolon
r_else
r_if
c_cond
(paren
id|buf
(braket
id|c
)braket
op_eq
l_int|0
)paren
(brace
id|p-&gt;found
op_assign
l_int|2
suffix:semicolon
)brace
r_else
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|p-&gt;cid
op_assign
l_int|0
suffix:semicolon
r_switch
c_cond
(paren
id|buf
(braket
id|c
)braket
)paren
(brace
r_case
id|PROG_STREAM_MAP
suffix:colon
r_case
id|PRIVATE_STREAM2
suffix:colon
r_case
id|PROG_STREAM_DIR
suffix:colon
r_case
id|ECM_STREAM
suffix:colon
r_case
id|EMM_STREAM
suffix:colon
r_case
id|PADDING_STREAM
suffix:colon
r_case
id|DSM_CC_STREAM
suffix:colon
r_case
id|ISO13522_STREAM
suffix:colon
id|p-&gt;done
op_assign
l_int|1
suffix:semicolon
r_case
id|PRIVATE_STREAM1
suffix:colon
r_case
id|VIDEO_STREAM_S
dot
dot
dot
id|VIDEO_STREAM_E
suffix:colon
r_case
id|AUDIO_STREAM_S
dot
dot
dot
id|AUDIO_STREAM_E
suffix:colon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;cid
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|p-&gt;found
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
r_if
c_cond
(paren
id|count
op_minus
id|c
OG
l_int|1
)paren
(brace
id|p-&gt;plen
(braket
l_int|0
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;plen
(braket
l_int|1
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_add_assign
l_int|2
suffix:semicolon
id|p-&gt;plength
op_assign
(paren
id|p-&gt;plen
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;plen
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_else
(brace
id|p-&gt;plen
(braket
l_int|0
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
r_return
id|count
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|p-&gt;plen
(braket
l_int|1
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;plength
op_assign
(paren
id|p-&gt;plen
(braket
l_int|0
)braket
op_lshift
l_int|8
)paren
op_or
id|p-&gt;plen
(braket
l_int|1
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
)paren
(brace
id|p-&gt;flag1
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p-&gt;flag1
op_amp
l_int|0xC0
)paren
op_eq
l_int|0x80
)paren
id|p-&gt;mpeg
op_assign
l_int|2
suffix:semicolon
r_else
(brace
id|p-&gt;hlength
op_assign
l_int|0
suffix:semicolon
id|p-&gt;which
op_assign
l_int|0
suffix:semicolon
id|p-&gt;mpeg
op_assign
l_int|1
suffix:semicolon
id|p-&gt;flag2
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
op_logical_and
id|p-&gt;mpeg
op_eq
l_int|2
)paren
(brace
id|p-&gt;flag2
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;done
op_logical_and
id|p-&gt;mpeg
op_eq
l_int|2
)paren
(brace
id|p-&gt;hlength
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p-&gt;plength
)paren
id|p-&gt;plength
op_assign
id|MMAX_PLENGTH
op_minus
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;done
op_logical_or
(paren
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
op_ge
l_int|9
)paren
op_logical_or
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
op_ge
l_int|7
)paren
)paren
)paren
(brace
r_switch
c_cond
(paren
id|p-&gt;cid
)paren
(brace
r_case
id|AUDIO_STREAM_S
dot
dot
dot
id|AUDIO_STREAM_E
suffix:colon
r_case
id|VIDEO_STREAM_S
dot
dot
dot
id|VIDEO_STREAM_E
suffix:colon
r_case
id|PRIVATE_STREAM1
suffix:colon
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
id|p-&gt;found
op_eq
l_int|9
)paren
(brace
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag1
comma
l_int|1
)paren
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag2
comma
l_int|1
)paren
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;hlength
comma
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;found
op_eq
l_int|7
)paren
id|write_ipack
c_func
(paren
id|p
comma
op_amp
id|p-&gt;flag1
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|2
op_logical_and
(paren
id|p-&gt;flag2
op_amp
id|PTS_ONLY
)paren
op_logical_and
id|p-&gt;found
OL
l_int|14
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;found
OL
l_int|14
)paren
(brace
id|p-&gt;pts
(braket
id|p-&gt;found
op_minus
l_int|9
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;mpeg
op_eq
l_int|1
op_logical_and
id|p-&gt;which
OL
l_int|2000
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;found
op_eq
l_int|7
)paren
(brace
id|p-&gt;check
op_assign
id|p-&gt;flag1
suffix:semicolon
id|p-&gt;hlength
op_assign
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
op_logical_neg
id|p-&gt;which
op_logical_and
id|c
OL
id|count
op_logical_and
id|p-&gt;check
op_eq
l_int|0xFF
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p-&gt;check
op_amp
l_int|0xC0
)paren
op_eq
l_int|0x40
op_logical_and
op_logical_neg
id|p-&gt;which
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;which
op_eq
l_int|1
)paren
(brace
id|p-&gt;check
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
id|p-&gt;which
op_assign
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|p-&gt;check
op_amp
l_int|0x30
)paren
op_logical_and
id|p-&gt;check
op_ne
l_int|0xFF
)paren
(brace
id|p-&gt;flag2
op_assign
(paren
id|p-&gt;check
op_amp
l_int|0xF0
)paren
op_lshift
l_int|2
suffix:semicolon
id|p-&gt;pts
(braket
l_int|0
)braket
op_assign
id|p-&gt;check
suffix:semicolon
id|p-&gt;which
op_assign
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;which
OG
l_int|2
)paren
(brace
r_if
c_cond
(paren
(paren
id|p-&gt;flag2
op_amp
id|PTS_DTS_FLAGS
)paren
op_eq
id|PTS_ONLY
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;which
OL
l_int|7
)paren
(brace
id|p-&gt;pts
(braket
id|p-&gt;which
op_minus
l_int|2
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;which
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|p-&gt;flag2
op_amp
id|PTS_DTS_FLAGS
)paren
op_eq
id|PTS_DTS
)paren
(brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;which
OL
l_int|12
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;which
OL
l_int|7
)paren
id|p-&gt;pts
(braket
id|p-&gt;which
op_minus
l_int|2
)braket
op_assign
id|buf
(braket
id|c
)braket
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
l_int|1
)paren
suffix:semicolon
id|c
op_increment
suffix:semicolon
id|p-&gt;found
op_increment
suffix:semicolon
id|p-&gt;which
op_increment
suffix:semicolon
id|p-&gt;hlength
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|c
op_eq
id|count
)paren
r_return
id|count
suffix:semicolon
)brace
id|p-&gt;which
op_assign
l_int|2000
suffix:semicolon
)brace
)brace
r_while
c_loop
(paren
id|c
OL
id|count
op_logical_and
id|p-&gt;found
OL
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|l
op_assign
id|count
op_minus
id|c
suffix:semicolon
r_if
c_cond
(paren
id|l
op_plus
id|p-&gt;found
OG
id|p-&gt;plength
op_plus
l_int|6
)paren
id|l
op_assign
id|p-&gt;plength
op_plus
l_int|6
op_minus
id|p-&gt;found
suffix:semicolon
id|write_ipack
c_func
(paren
id|p
comma
id|buf
op_plus
id|c
comma
id|l
)paren
suffix:semicolon
id|p-&gt;found
op_add_assign
id|l
suffix:semicolon
id|c
op_add_assign
id|l
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;done
)paren
(brace
r_if
c_cond
(paren
id|p-&gt;found
op_plus
id|count
op_minus
id|c
OL
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|p-&gt;found
op_add_assign
id|count
op_minus
id|c
suffix:semicolon
id|c
op_assign
id|count
suffix:semicolon
)brace
r_else
(brace
id|c
op_add_assign
id|p-&gt;plength
op_plus
l_int|6
op_minus
id|p-&gt;found
suffix:semicolon
id|p-&gt;found
op_assign
id|p-&gt;plength
op_plus
l_int|6
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|p-&gt;plength
op_logical_and
id|p-&gt;found
op_eq
id|p-&gt;plength
op_plus
l_int|6
)paren
(brace
id|send_ipack
c_func
(paren
id|p
)paren
suffix:semicolon
id|av7110_ipack_reset
c_func
(paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|c
OL
id|count
)paren
id|av7110_ipack_instant_repack
c_func
(paren
id|buf
op_plus
id|c
comma
id|count
op_minus
id|c
comma
id|p
)paren
suffix:semicolon
)brace
)brace
r_return
id|count
suffix:semicolon
)brace
eof
