multiline_comment|/*&n; ***************************************************************************&n; *     &n; *     radio-gemtek-pci.c - Gemtek PCI Radio driver&n; *     (C) 2001 Vladimir Shebordaev &lt;vshebordaev@mail.ru&gt;&n; *&n; ***************************************************************************&n; *&n; *     This program is free software; you can redistribute it and/or&n; *     modify it under the terms of the GNU General Public License as&n; *     published by the Free Software Foundation; either version 2 of&n; *     the License, or (at your option) any later version.&n; *&n; *     This program is distributed in the hope that it will be useful,&n; *     but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *     GNU General Public License for more details.&n; *&n; *     You should have received a copy of the GNU General Public&n; *     License along with this program; if not, write to the Free&n; *     Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,&n; *     USA.&n; *&n; ***************************************************************************&n; *&n; *     Gemtek Corp still silently refuses to release any specifications&n; *     of their multimedia devices, so the protocol still has to be&n; *     reverse engineered.&n; *&n; *     The v4l code was inspired by Jonas Munsin&squot;s  Gemtek serial line&n; *     radio device driver.&n; *&n; *     Please, let me know if this piece of code was useful :)&n; * &n; *     TODO: multiple device support and portability were not tested&n; *&n; ***************************************************************************&n; */
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/list.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/videodev.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#ifndef PCI_VENDOR_ID_GEMTEK
DECL|macro|PCI_VENDOR_ID_GEMTEK
mdefine_line|#define PCI_VENDOR_ID_GEMTEK 0x5046
macro_line|#endif
macro_line|#ifndef PCI_DEVICE_ID_GEMTEK_PR103
DECL|macro|PCI_DEVICE_ID_GEMTEK_PR103
mdefine_line|#define PCI_DEVICE_ID_GEMTEK_PR103 0x1001
macro_line|#endif
macro_line|#ifndef GEMTEK_PCI_RANGE_LOW
DECL|macro|GEMTEK_PCI_RANGE_LOW
mdefine_line|#define GEMTEK_PCI_RANGE_LOW (87*16000)
macro_line|#endif
macro_line|#ifndef GEMTEK_PCI_RANGE_HIGH
DECL|macro|GEMTEK_PCI_RANGE_HIGH
mdefine_line|#define GEMTEK_PCI_RANGE_HIGH (108*16000)
macro_line|#endif
macro_line|#ifndef TRUE
DECL|macro|TRUE
mdefine_line|#define TRUE (1)
macro_line|#endif
macro_line|#ifndef FALSE 
DECL|macro|FALSE
mdefine_line|#define FALSE (0)
macro_line|#endif
DECL|struct|gemtek_pci_card
r_struct
id|gemtek_pci_card
(brace
DECL|member|videodev
r_struct
id|video_device
op_star
id|videodev
suffix:semicolon
DECL|member|iobase
id|u32
id|iobase
suffix:semicolon
DECL|member|length
id|u32
id|length
suffix:semicolon
DECL|member|chiprev
id|u8
id|chiprev
suffix:semicolon
DECL|member|model
id|u16
id|model
suffix:semicolon
DECL|member|current_frequency
id|u32
id|current_frequency
suffix:semicolon
DECL|member|mute
id|u8
id|mute
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|rcsid
r_static
r_const
r_char
id|rcsid
(braket
)braket
op_assign
l_string|&quot;$Id: radio-gemtek-pci.c,v 1.1 2001/07/23 08:08:16 ted Exp ted $&quot;
suffix:semicolon
DECL|variable|nr_radio
r_static
r_int
id|nr_radio
op_assign
op_minus
l_int|1
suffix:semicolon
DECL|function|gemtek_pci_open
r_static
r_int
id|gemtek_pci_open
c_func
(paren
r_struct
id|video_device
op_star
id|dev
comma
r_int
id|flags
)paren
(brace
r_struct
id|gemtek_pci_card
op_star
id|card
op_assign
id|dev-&gt;priv
suffix:semicolon
multiline_comment|/* Paranoid check */
r_if
c_cond
(paren
op_logical_neg
id|card
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|gemtek_pci_close
r_static
r_void
id|gemtek_pci_close
c_func
(paren
r_struct
id|video_device
op_star
id|dev
)paren
(brace
multiline_comment|/*&n; *  The module usage is managed by &squot;videodev&squot;&n; */
)brace
DECL|function|gemtek_pci_out
r_static
r_inline
id|u8
id|gemtek_pci_out
c_func
(paren
id|u16
id|value
comma
id|u32
id|port
)paren
(brace
id|outw
c_func
(paren
id|value
comma
id|port
)paren
suffix:semicolon
r_return
(paren
id|u8
)paren
id|value
suffix:semicolon
)brace
DECL|macro|_b0
mdefine_line|#define _b0( v ) *((u8 *)&amp;v)  
DECL|function|__gemtek_pci_cmd
r_static
r_void
id|__gemtek_pci_cmd
c_func
(paren
id|u16
id|value
comma
id|u32
id|port
comma
id|u8
op_star
id|last_byte
comma
r_int
id|keep
)paren
(brace
r_register
id|u8
id|byte
op_assign
op_star
id|last_byte
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|keep
)paren
id|value
op_assign
(paren
id|u16
)paren
id|port
suffix:semicolon
id|byte
op_and_assign
l_int|0xfd
suffix:semicolon
)brace
r_else
id|byte
op_or_assign
l_int|2
suffix:semicolon
id|_b0
c_func
(paren
id|value
)paren
op_assign
id|byte
suffix:semicolon
id|outw
c_func
(paren
id|value
comma
id|port
)paren
suffix:semicolon
id|byte
op_or_assign
l_int|1
suffix:semicolon
id|_b0
c_func
(paren
id|value
)paren
op_assign
id|byte
suffix:semicolon
id|outw
c_func
(paren
id|value
comma
id|port
)paren
suffix:semicolon
id|byte
op_and_assign
l_int|0xfe
suffix:semicolon
id|_b0
c_func
(paren
id|value
)paren
op_assign
id|byte
suffix:semicolon
id|outw
c_func
(paren
id|value
comma
id|port
)paren
suffix:semicolon
op_star
id|last_byte
op_assign
id|byte
suffix:semicolon
)brace
DECL|function|gemtek_pci_nil
r_static
r_inline
r_void
id|gemtek_pci_nil
c_func
(paren
id|u32
id|port
comma
id|u8
op_star
id|last_byte
)paren
(brace
id|__gemtek_pci_cmd
c_func
(paren
l_int|0x00
comma
id|port
comma
id|last_byte
comma
id|FALSE
)paren
suffix:semicolon
)brace
DECL|function|gemtek_pci_cmd
r_static
r_inline
r_void
id|gemtek_pci_cmd
c_func
(paren
id|u16
id|cmd
comma
id|u32
id|port
comma
id|u8
op_star
id|last_byte
)paren
(brace
id|__gemtek_pci_cmd
c_func
(paren
id|cmd
comma
id|port
comma
id|last_byte
comma
id|TRUE
)paren
suffix:semicolon
)brace
DECL|function|gemtek_pci_setfrequency
r_static
r_void
id|gemtek_pci_setfrequency
c_func
(paren
r_struct
id|gemtek_pci_card
op_star
id|card
comma
r_int
r_int
id|frequency
)paren
(brace
r_register
r_int
id|i
suffix:semicolon
r_register
id|u32
id|value
op_assign
id|frequency
op_div
l_int|200
op_plus
l_int|856
suffix:semicolon
r_register
id|u16
id|mask
op_assign
l_int|0x8000
suffix:semicolon
id|u8
id|last_byte
suffix:semicolon
id|u32
id|port
op_assign
id|card-&gt;iobase
suffix:semicolon
id|last_byte
op_assign
id|gemtek_pci_out
c_func
(paren
l_int|0x06
comma
id|port
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|gemtek_pci_nil
c_func
(paren
id|port
comma
op_amp
id|last_byte
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|i
OL
l_int|9
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|gemtek_pci_cmd
c_func
(paren
id|value
op_amp
id|mask
comma
id|port
comma
op_amp
id|last_byte
)paren
suffix:semicolon
id|mask
op_rshift_assign
l_int|1
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|i
OL
l_int|16
)paren
suffix:semicolon
id|outw
c_func
(paren
l_int|0x10
comma
id|port
)paren
suffix:semicolon
)brace
DECL|function|gemtek_pci_mute
r_static
r_inline
r_void
id|gemtek_pci_mute
c_func
(paren
r_struct
id|gemtek_pci_card
op_star
id|card
)paren
(brace
id|outb
c_func
(paren
l_int|0x1f
comma
id|card-&gt;iobase
)paren
suffix:semicolon
id|card-&gt;mute
op_assign
id|TRUE
suffix:semicolon
)brace
DECL|function|gemtek_pci_unmute
r_static
r_inline
r_void
id|gemtek_pci_unmute
c_func
(paren
r_struct
id|gemtek_pci_card
op_star
id|card
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;mute
)paren
(brace
id|gemtek_pci_setfrequency
c_func
(paren
id|card
comma
id|card-&gt;current_frequency
)paren
suffix:semicolon
id|card-&gt;mute
op_assign
id|FALSE
suffix:semicolon
)brace
)brace
DECL|function|gemtek_pci_getsignal
r_static
r_inline
r_int
r_int
id|gemtek_pci_getsignal
c_func
(paren
r_struct
id|gemtek_pci_card
op_star
id|card
)paren
(brace
r_return
(paren
id|inb
c_func
(paren
id|card-&gt;iobase
)paren
op_amp
l_int|0x08
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
)brace
DECL|function|gemtek_pci_ioctl
r_static
r_int
id|gemtek_pci_ioctl
c_func
(paren
r_struct
id|video_device
op_star
id|dev
comma
r_int
r_int
id|cmd
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|gemtek_pci_card
op_star
id|card
op_assign
id|dev-&gt;priv
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|VIDIOCGCAP
suffix:colon
(brace
r_struct
id|video_capability
id|c
suffix:semicolon
id|c.type
op_assign
id|VID_TYPE_TUNER
suffix:semicolon
id|c.channels
op_assign
l_int|1
suffix:semicolon
id|c.audios
op_assign
l_int|1
suffix:semicolon
id|c.maxwidth
op_assign
l_int|0
suffix:semicolon
id|c.maxheight
op_assign
l_int|0
suffix:semicolon
id|c.minwidth
op_assign
l_int|0
suffix:semicolon
id|c.minheight
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|c.name
comma
l_string|&quot;Gemtek PCI Radio&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|arg
comma
op_amp
id|c
comma
r_sizeof
(paren
id|c
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|VIDIOCGTUNER
suffix:colon
(brace
r_struct
id|video_tuner
id|t
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|t
comma
id|arg
comma
r_sizeof
(paren
r_struct
id|video_tuner
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|t.tuner
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|t.rangelow
op_assign
id|GEMTEK_PCI_RANGE_LOW
suffix:semicolon
id|t.rangehigh
op_assign
id|GEMTEK_PCI_RANGE_HIGH
suffix:semicolon
id|t.flags
op_assign
id|VIDEO_TUNER_LOW
suffix:semicolon
id|t.mode
op_assign
id|VIDEO_MODE_AUTO
suffix:semicolon
id|t.signal
op_assign
l_int|0xFFFF
op_star
id|gemtek_pci_getsignal
c_func
(paren
id|card
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|t.name
comma
l_string|&quot;FM&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|arg
comma
op_amp
id|t
comma
r_sizeof
(paren
r_struct
id|video_tuner
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|VIDIOCSTUNER
suffix:colon
(brace
r_struct
id|video_tuner
id|t
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|t
comma
id|arg
comma
r_sizeof
(paren
r_struct
id|video_tuner
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|t.tuner
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|VIDIOCGFREQ
suffix:colon
r_return
id|put_user
c_func
(paren
id|card-&gt;current_frequency
comma
(paren
id|u32
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|VIDIOCSFREQ
suffix:colon
(brace
id|u32
id|frequency
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|frequency
comma
(paren
id|u32
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
(paren
id|frequency
OL
id|GEMTEK_PCI_RANGE_LOW
)paren
op_logical_or
(paren
id|frequency
OG
id|GEMTEK_PCI_RANGE_HIGH
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|gemtek_pci_setfrequency
c_func
(paren
id|card
comma
id|frequency
)paren
suffix:semicolon
id|card-&gt;current_frequency
op_assign
id|frequency
suffix:semicolon
id|card-&gt;mute
op_assign
id|FALSE
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|VIDIOCGAUDIO
suffix:colon
(brace
r_struct
id|video_audio
id|a
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|a
comma
l_int|0
comma
r_sizeof
(paren
id|a
)paren
)paren
suffix:semicolon
id|a.flags
op_or_assign
id|VIDEO_AUDIO_MUTABLE
suffix:semicolon
id|a.volume
op_assign
l_int|1
suffix:semicolon
id|a.step
op_assign
l_int|65535
suffix:semicolon
id|strcpy
c_func
(paren
id|a.name
comma
l_string|&quot;Radio&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|arg
comma
op_amp
id|a
comma
r_sizeof
(paren
r_struct
id|video_audio
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
id|VIDIOCSAUDIO
suffix:colon
(brace
r_struct
id|video_audio
id|a
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|a
comma
id|arg
comma
r_sizeof
(paren
r_struct
id|video_audio
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|a.audio
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|a.flags
op_amp
id|VIDEO_AUDIO_MUTE
)paren
id|gemtek_pci_mute
c_func
(paren
id|card
)paren
suffix:semicolon
r_else
id|gemtek_pci_unmute
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_default
suffix:colon
r_return
op_minus
id|ENOIOCTLCMD
suffix:semicolon
)brace
)brace
r_enum
(brace
DECL|enumerator|GEMTEK_PR103
id|GEMTEK_PR103
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_char
op_star
id|card_names
(braket
)braket
id|__devinitdata
op_assign
(brace
l_string|&quot;GEMTEK_PR103&quot;
)brace
suffix:semicolon
DECL|variable|gemtek_pci_id
r_static
r_struct
id|pci_device_id
id|gemtek_pci_id
(braket
)braket
op_assign
(brace
(brace
id|PCI_VENDOR_ID_GEMTEK
comma
id|PCI_DEVICE_ID_GEMTEK_PR103
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
comma
l_int|0
comma
l_int|0
comma
id|GEMTEK_PR103
)brace
comma
(brace
l_int|0
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|gemtek_pci_id
)paren
suffix:semicolon
DECL|variable|mx
r_static
id|u8
id|mx
op_assign
l_int|1
suffix:semicolon
DECL|variable|gemtek_pci_videodev_name
r_static
r_char
id|gemtek_pci_videodev_name
(braket
)braket
op_assign
l_string|&quot;Gemtek PCI Radio&quot;
suffix:semicolon
DECL|function|gemtek_pci_init_struct
r_static
r_inline
r_void
id|gemtek_pci_init_struct
c_func
(paren
r_struct
id|video_device
op_star
id|dev
)paren
(brace
id|memset
c_func
(paren
id|dev
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|video_device
)paren
)paren
suffix:semicolon
id|dev-&gt;owner
op_assign
id|THIS_MODULE
suffix:semicolon
id|strcpy
c_func
(paren
id|dev-&gt;name
comma
id|gemtek_pci_videodev_name
)paren
suffix:semicolon
id|dev-&gt;type
op_assign
id|VID_TYPE_TUNER
suffix:semicolon
id|dev-&gt;hardware
op_assign
id|VID_HARDWARE_GEMTEK
suffix:semicolon
id|dev-&gt;open
op_assign
id|gemtek_pci_open
suffix:semicolon
id|dev-&gt;close
op_assign
id|gemtek_pci_close
suffix:semicolon
id|dev-&gt;ioctl
op_assign
id|gemtek_pci_ioctl
suffix:semicolon
)brace
DECL|function|gemtek_pci_probe
r_static
r_int
id|__devinit
id|gemtek_pci_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci_dev
comma
r_const
r_struct
id|pci_device_id
op_star
id|pci_id
)paren
(brace
r_struct
id|gemtek_pci_card
op_star
id|card
suffix:semicolon
r_struct
id|video_device
op_star
id|devradio
suffix:semicolon
r_if
c_cond
(paren
(paren
id|card
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|gemtek_pci_card
)paren
comma
id|GFP_KERNEL
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;gemtek_pci: out of memory&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|card
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|gemtek_pci_card
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pci_enable_device
c_func
(paren
id|pci_dev
)paren
)paren
r_goto
id|err_pci
suffix:semicolon
id|card-&gt;iobase
op_assign
id|pci_resource_start
c_func
(paren
id|pci_dev
comma
l_int|0
)paren
suffix:semicolon
id|card-&gt;length
op_assign
id|pci_resource_len
c_func
(paren
id|pci_dev
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|request_region
c_func
(paren
id|card-&gt;iobase
comma
id|card-&gt;length
comma
id|card_names
(braket
id|pci_id-&gt;driver_data
)braket
)paren
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;gemtek_pci: i/o port already in use&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_pci
suffix:semicolon
)brace
id|pci_read_config_byte
c_func
(paren
id|pci_dev
comma
id|PCI_REVISION_ID
comma
op_amp
id|card-&gt;chiprev
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|pci_dev
comma
id|PCI_SUBSYSTEM_ID
comma
op_amp
id|card-&gt;model
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci_dev
comma
id|card
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|devradio
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|video_device
)paren
comma
id|GFP_KERNEL
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;gemtek_pci: out of memory&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|err_video
suffix:semicolon
)brace
id|gemtek_pci_init_struct
c_func
(paren
id|devradio
)paren
suffix:semicolon
r_if
c_cond
(paren
id|video_register_device
c_func
(paren
id|devradio
comma
id|VFL_TYPE_RADIO
comma
id|nr_radio
)paren
op_eq
op_minus
l_int|1
)paren
(brace
id|kfree
c_func
(paren
id|devradio
)paren
suffix:semicolon
r_goto
id|err_video
suffix:semicolon
)brace
id|card-&gt;videodev
op_assign
id|devradio
suffix:semicolon
id|devradio-&gt;priv
op_assign
id|card
suffix:semicolon
id|gemtek_pci_mute
c_func
(paren
id|card
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Gemtek PCI Radio (rev. %d) found at 0x%04x-0x%04x.&bslash;n&quot;
comma
id|card-&gt;chiprev
comma
id|card-&gt;iobase
comma
id|card-&gt;iobase
op_plus
id|card-&gt;length
op_minus
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|err_video
suffix:colon
id|release_region
c_func
(paren
id|card-&gt;iobase
comma
id|card-&gt;length
)paren
suffix:semicolon
id|err_pci
suffix:colon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
DECL|function|gemtek_pci_remove
r_static
r_void
id|__devexit
id|gemtek_pci_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci_dev
)paren
(brace
r_struct
id|gemtek_pci_card
op_star
id|card
op_assign
id|pci_get_drvdata
c_func
(paren
id|pci_dev
)paren
suffix:semicolon
id|video_unregister_device
c_func
(paren
id|card-&gt;videodev
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card-&gt;videodev
)paren
suffix:semicolon
id|release_region
c_func
(paren
id|card-&gt;iobase
comma
id|card-&gt;length
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mx
)paren
id|gemtek_pci_mute
c_func
(paren
id|card
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|card
)paren
suffix:semicolon
id|pci_set_drvdata
c_func
(paren
id|pci_dev
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|gemtek_pci_driver
r_static
r_struct
id|pci_driver
id|gemtek_pci_driver
op_assign
(brace
id|name
suffix:colon
l_string|&quot;gemtek_pci&quot;
comma
id|id_table
suffix:colon
id|gemtek_pci_id
comma
id|probe
suffix:colon
id|gemtek_pci_probe
comma
id|remove
suffix:colon
id|gemtek_pci_remove
)brace
suffix:semicolon
DECL|function|gemtek_pci_init_module
r_static
r_int
id|__init
id|gemtek_pci_init_module
c_func
(paren
r_void
)paren
(brace
r_return
id|pci_module_init
c_func
(paren
op_amp
id|gemtek_pci_driver
)paren
suffix:semicolon
)brace
DECL|function|gemtek_pci_cleanup_module
r_static
r_void
id|__exit
id|gemtek_pci_cleanup_module
c_func
(paren
r_void
)paren
(brace
r_return
id|pci_unregister_driver
c_func
(paren
op_amp
id|gemtek_pci_driver
)paren
suffix:semicolon
)brace
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Vladimir Shebordaev &lt;vshebordaev@mail.ru&gt;&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;The video4linux driver for the Gemtek PCI Radio Card&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|mx
comma
l_string|&quot;b&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|mx
comma
l_string|&quot;single digit: 1 - turn off the turner upon module exit (default), 0 - do not&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|nr_radio
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|nr_radio
comma
l_string|&quot;video4linux device number to use&quot;
)paren
suffix:semicolon
id|EXPORT_NO_SYMBOLS
suffix:semicolon
DECL|variable|gemtek_pci_init_module
id|module_init
c_func
(paren
id|gemtek_pci_init_module
)paren
suffix:semicolon
DECL|variable|gemtek_pci_cleanup_module
id|module_exit
c_func
(paren
id|gemtek_pci_cleanup_module
)paren
suffix:semicolon
eof
