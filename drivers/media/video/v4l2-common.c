multiline_comment|/*&n; *&t;Video for Linux Two&n; *&n; *&t;A generic video device interface for the LINUX operating system&n; *&t;using a set of device structures/vectors for low level operations.&n; *&n; *&t;This file replaces the videodev.c file that comes with the&n; *&t;regular kernel distribution.&n; *&n; *&t;This program is free software; you can redistribute it and/or&n; *&t;modify it under the terms of the GNU General Public License&n; *&t;as published by the Free Software Foundation; either version&n; *&t;2 of the License, or (at your option) any later version.&n; *&n; * Author:&t;Bill Dirks &lt;bdirks@pacbell.net&gt;&n; *&t;&t;based on code by Alan Cox, &lt;alan@cymru.net&gt;&n; *&n; */
multiline_comment|/*&n; * Video capture interface for Linux&n; *&n; *&t;A generic video device interface for the LINUX operating system&n; *&t;using a set of device structures/vectors for low level operations.&n; *&n; *&t;&t;This program is free software; you can redistribute it and/or&n; *&t;&t;modify it under the terms of the GNU General Public License&n; *&t;&t;as published by the Free Software Foundation; either version&n; *&t;&t;2 of the License, or (at your option) any later version.&n; *&n; * Author:&t;Alan Cox, &lt;alan@redhat.com&gt;&n; *&n; * Fixes:&n; */
multiline_comment|/*&n; * Video4linux 1/2 integration by Justin Schoeman&n; * &lt;justin@suntiger.ee.up.ac.za&gt;&n; * 2.4 PROCFS support ported from 2.4 kernels by &n; *  I&#xfffd;aki Garc&#xfffd;a Etxebarria &lt;garetxe@euskalnet.net&gt;&n; * Makefile fix by &quot;W. Michael Petullo&quot; &lt;mike@flyn.org&gt;&n; * 2.4 devfs support ported from 2.4 kernels by&n; *  Dan Merillat &lt;dan@merillat.org&gt;&n; * Added Gerd Knorrs v4l1 enhancements (Justin Schoeman)&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/div64.h&gt;
macro_line|#ifdef CONFIG_KMOD
macro_line|#include &lt;linux/kmod.h&gt;
macro_line|#endif
macro_line|#if defined(CONFIG_UST) || defined(CONFIG_UST_MODULE)
macro_line|#include &lt;linux/ust.h&gt;
macro_line|#endif
macro_line|#include &lt;linux/videodev.h&gt;
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Bill Dirks, Justin Schoeman, Gerd Knorr&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;misc helper functions for v4l2 device drivers&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
multiline_comment|/*&n; *&n; *&t;V 4 L 2   D R I V E R   H E L P E R   A P I&n; *&n; */
multiline_comment|/*&n; *  Video Standard Operations (contributed by Michael Schimek)&n; */
multiline_comment|/* This is the recommended method to deal with the framerate fields. More &n;   sophisticated drivers will access the fields directly. */
r_int
r_int
DECL|function|v4l2_video_std_fps
id|v4l2_video_std_fps
c_func
(paren
r_struct
id|v4l2_standard
op_star
id|vs
)paren
(brace
r_if
c_cond
(paren
id|vs-&gt;frameperiod.numerator
OG
l_int|0
)paren
r_return
(paren
(paren
(paren
id|vs-&gt;frameperiod.denominator
op_lshift
l_int|8
)paren
op_div
id|vs-&gt;frameperiod.numerator
)paren
op_plus
(paren
l_int|1
op_lshift
l_int|7
)paren
)paren
op_div
(paren
l_int|1
op_lshift
l_int|8
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Fill in the fields of a v4l2_standard structure according to the&n;   &squot;id&squot; and &squot;transmission&squot; parameters.  Returns negative on error.  */
DECL|function|v4l2_video_std_construct
r_int
id|v4l2_video_std_construct
c_func
(paren
r_struct
id|v4l2_standard
op_star
id|vs
comma
r_int
id|id
comma
r_char
op_star
id|name
)paren
(brace
id|memset
c_func
(paren
id|vs
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|v4l2_standard
)paren
)paren
suffix:semicolon
id|vs-&gt;id
op_assign
id|id
suffix:semicolon
r_if
c_cond
(paren
id|id
op_amp
(paren
id|V4L2_STD_NTSC
op_or
id|V4L2_STD_PAL_M
)paren
)paren
(brace
id|vs-&gt;frameperiod.numerator
op_assign
l_int|1001
suffix:semicolon
id|vs-&gt;frameperiod.denominator
op_assign
l_int|30000
suffix:semicolon
id|vs-&gt;framelines
op_assign
l_int|525
suffix:semicolon
)brace
r_else
(brace
id|vs-&gt;frameperiod.numerator
op_assign
l_int|1
suffix:semicolon
id|vs-&gt;frameperiod.denominator
op_assign
l_int|25
suffix:semicolon
id|vs-&gt;framelines
op_assign
l_int|625
suffix:semicolon
)brace
id|strlcpy
c_func
(paren
id|vs-&gt;name
comma
id|name
comma
r_sizeof
(paren
id|vs-&gt;name
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------------- */
DECL|variable|v4l2_field_names
r_char
op_star
id|v4l2_field_names
(braket
)braket
op_assign
(brace
(braket
id|V4L2_FIELD_ANY
)braket
op_assign
l_string|&quot;any&quot;
comma
(braket
id|V4L2_FIELD_NONE
)braket
op_assign
l_string|&quot;none&quot;
comma
(braket
id|V4L2_FIELD_TOP
)braket
op_assign
l_string|&quot;top&quot;
comma
(braket
id|V4L2_FIELD_BOTTOM
)braket
op_assign
l_string|&quot;bottom&quot;
comma
(braket
id|V4L2_FIELD_INTERLACED
)braket
op_assign
l_string|&quot;interlaced&quot;
comma
(braket
id|V4L2_FIELD_SEQ_TB
)braket
op_assign
l_string|&quot;seq-tb&quot;
comma
(braket
id|V4L2_FIELD_SEQ_BT
)braket
op_assign
l_string|&quot;seq-bt&quot;
comma
(braket
id|V4L2_FIELD_ALTERNATE
)braket
op_assign
l_string|&quot;alternate&quot;
comma
)brace
suffix:semicolon
DECL|variable|v4l2_type_names
r_char
op_star
id|v4l2_type_names
(braket
)braket
op_assign
(brace
(braket
id|V4L2_BUF_TYPE_VIDEO_CAPTURE
)braket
op_assign
l_string|&quot;video-cap&quot;
comma
(braket
id|V4L2_BUF_TYPE_VIDEO_OVERLAY
)braket
op_assign
l_string|&quot;video-over&quot;
comma
(braket
id|V4L2_BUF_TYPE_VIDEO_OUTPUT
)braket
op_assign
l_string|&quot;video-out&quot;
comma
(braket
id|V4L2_BUF_TYPE_VBI_CAPTURE
)braket
op_assign
l_string|&quot;vbi-cap&quot;
comma
(braket
id|V4L2_BUF_TYPE_VBI_OUTPUT
)braket
op_assign
l_string|&quot;vbi-out&quot;
comma
)brace
suffix:semicolon
DECL|variable|v4l2_ioctl_names
r_char
op_star
id|v4l2_ioctl_names
(braket
l_int|256
)braket
op_assign
(brace
macro_line|#if __GNUC__ &gt;= 3
(braket
l_int|0
dot
dot
dot
l_int|255
)braket
op_assign
l_string|&quot;UNKNOWN&quot;
comma
macro_line|#endif
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QUERYCAP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QUERYCAP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_RESERVED
)paren
)braket
op_assign
l_string|&quot;VIDIOC_RESERVED&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_ENUM_FMT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_ENUM_FMT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_FMT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_FMT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_FMT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_FMT&quot;
comma
macro_line|#if 0
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_COMP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_COMP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_COMP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_COMP&quot;
comma
macro_line|#endif
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_REQBUFS
)paren
)braket
op_assign
l_string|&quot;VIDIOC_REQBUFS&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QUERYBUF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QUERYBUF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_FBUF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_FBUF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_FBUF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_FBUF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_OVERLAY
)paren
)braket
op_assign
l_string|&quot;VIDIOC_OVERLAY&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QBUF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QBUF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_DQBUF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_DQBUF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_STREAMON
)paren
)braket
op_assign
l_string|&quot;VIDIOC_STREAMON&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_STREAMOFF
)paren
)braket
op_assign
l_string|&quot;VIDIOC_STREAMOFF&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_PARM
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_PARM&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_PARM
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_PARM&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_STD
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_STD&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_STD
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_STD&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_ENUMSTD
)paren
)braket
op_assign
l_string|&quot;VIDIOC_ENUMSTD&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_ENUMINPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_ENUMINPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_CTRL
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_CTRL&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_CTRL
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_CTRL&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_TUNER
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_TUNER&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_TUNER
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_TUNER&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_AUDIO
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_AUDIO&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_AUDIO
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_AUDIO&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QUERYCTRL
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QUERYCTRL&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QUERYMENU
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QUERYMENU&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_INPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_INPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_INPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_INPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_OUTPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_OUTPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_OUTPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_OUTPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_ENUMOUTPUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_ENUMOUTPUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_AUDOUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_AUDOUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_AUDOUT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_AUDOUT&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_MODULATOR
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_MODULATOR&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_MODULATOR
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_MODULATOR&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_FREQUENCY
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_FREQUENCY&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_FREQUENCY
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_FREQUENCY&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_CROPCAP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_CROPCAP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_CROP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_CROP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_CROP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_CROP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_G_JPEGCOMP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_G_JPEGCOMP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_S_JPEGCOMP
)paren
)braket
op_assign
l_string|&quot;VIDIOC_S_JPEGCOMP&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_QUERYSTD
)paren
)braket
op_assign
l_string|&quot;VIDIOC_QUERYSTD&quot;
comma
(braket
id|_IOC_NR
c_func
(paren
id|VIDIOC_TRY_FMT
)paren
)braket
op_assign
l_string|&quot;VIDIOC_TRY_FMT&quot;
comma
)brace
suffix:semicolon
multiline_comment|/* ----------------------------------------------------------------- */
DECL|variable|v4l2_video_std_fps
id|EXPORT_SYMBOL
c_func
(paren
id|v4l2_video_std_fps
)paren
suffix:semicolon
DECL|variable|v4l2_video_std_construct
id|EXPORT_SYMBOL
c_func
(paren
id|v4l2_video_std_construct
)paren
suffix:semicolon
DECL|variable|v4l2_field_names
id|EXPORT_SYMBOL
c_func
(paren
id|v4l2_field_names
)paren
suffix:semicolon
DECL|variable|v4l2_type_names
id|EXPORT_SYMBOL
c_func
(paren
id|v4l2_type_names
)paren
suffix:semicolon
DECL|variable|v4l2_ioctl_names
id|EXPORT_SYMBOL
c_func
(paren
id|v4l2_ioctl_names
)paren
suffix:semicolon
multiline_comment|/*&n; * Local variables:&n; * c-basic-offset: 8&n; * End:&n; */
eof
