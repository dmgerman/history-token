multiline_comment|/*&n; * $Id: cx88-dvb.c,v 1.31 2005/03/07 15:58:05 kraxel Exp $&n; *&n; * device driver for Conexant 2388x based TV cards&n; * MPEG Transport Stream (DVB) routines&n; *&n; * (c) 2004 Chris Pascoe &lt;c.pascoe@itee.uq.edu.au&gt;&n; * (c) 2004 Gerd Knorr &lt;kraxel@bytesex.org&gt; [SuSE Labs]&n; *&n; *  This program is free software; you can redistribute it and/or modify&n; *  it under the terms of the GNU General Public License as published by&n; *  the Free Software Foundation; either version 2 of the License, or&n; *  (at your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful,&n; *  but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *  GNU General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License&n; *  along with this program; if not, write to the Free Software&n; *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/device.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/kthread.h&gt;
macro_line|#include &lt;linux/file.h&gt;
macro_line|#include &lt;linux/suspend.h&gt;
multiline_comment|/* those two frontends need merging via linuxtv cvs ... */
DECL|macro|HAVE_CX22702
mdefine_line|#define HAVE_CX22702 0
DECL|macro|HAVE_OR51132
mdefine_line|#define HAVE_OR51132 0
macro_line|#include &quot;cx88.h&quot;
macro_line|#include &quot;dvb-pll.h&quot;
macro_line|#include &quot;mt352.h&quot;
macro_line|#include &quot;mt352_priv.h&quot;
macro_line|#if HAVE_CX22702
macro_line|# include &quot;cx22702.h&quot;
macro_line|#endif
macro_line|#if HAVE_OR51132
macro_line|# include &quot;or51132.h&quot;
macro_line|#endif
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;driver for cx2388x based DVB cards&quot;
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Chris Pascoe &lt;c.pascoe@itee.uq.edu.au&gt;&quot;
)paren
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Gerd Knorr &lt;kraxel@bytesex.org&gt; [SuSE Labs]&quot;
)paren
suffix:semicolon
id|MODULE_LICENSE
c_func
(paren
l_string|&quot;GPL&quot;
)paren
suffix:semicolon
DECL|variable|debug
r_static
r_int
r_int
id|debug
op_assign
l_int|0
suffix:semicolon
id|module_param
c_func
(paren
id|debug
comma
r_int
comma
l_int|0644
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|debug
comma
l_string|&quot;enable debug messages [dvb]&quot;
)paren
suffix:semicolon
DECL|macro|dprintk
mdefine_line|#define dprintk(level,fmt, arg...)&t;if (debug &gt;= level) &bslash;&n;&t;printk(KERN_DEBUG &quot;%s/2-dvb: &quot; fmt, dev-&gt;core-&gt;name , ## arg)
multiline_comment|/* ------------------------------------------------------------------ */
DECL|function|dvb_buf_setup
r_static
r_int
id|dvb_buf_setup
c_func
(paren
r_struct
id|videobuf_queue
op_star
id|q
comma
r_int
r_int
op_star
id|count
comma
r_int
r_int
op_star
id|size
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|q-&gt;priv_data
suffix:semicolon
id|dev-&gt;ts_packet_size
op_assign
l_int|188
op_star
l_int|4
suffix:semicolon
id|dev-&gt;ts_packet_count
op_assign
l_int|32
suffix:semicolon
op_star
id|size
op_assign
id|dev-&gt;ts_packet_size
op_star
id|dev-&gt;ts_packet_count
suffix:semicolon
op_star
id|count
op_assign
l_int|32
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|dvb_buf_prepare
r_static
r_int
id|dvb_buf_prepare
c_func
(paren
r_struct
id|videobuf_queue
op_star
id|q
comma
r_struct
id|videobuf_buffer
op_star
id|vb
comma
r_enum
id|v4l2_field
id|field
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|q-&gt;priv_data
suffix:semicolon
r_return
id|cx8802_buf_prepare
c_func
(paren
id|dev
comma
(paren
r_struct
id|cx88_buffer
op_star
)paren
id|vb
)paren
suffix:semicolon
)brace
DECL|function|dvb_buf_queue
r_static
r_void
id|dvb_buf_queue
c_func
(paren
r_struct
id|videobuf_queue
op_star
id|q
comma
r_struct
id|videobuf_buffer
op_star
id|vb
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|q-&gt;priv_data
suffix:semicolon
id|cx8802_buf_queue
c_func
(paren
id|dev
comma
(paren
r_struct
id|cx88_buffer
op_star
)paren
id|vb
)paren
suffix:semicolon
)brace
DECL|function|dvb_buf_release
r_static
r_void
id|dvb_buf_release
c_func
(paren
r_struct
id|videobuf_queue
op_star
id|q
comma
r_struct
id|videobuf_buffer
op_star
id|vb
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|q-&gt;priv_data
suffix:semicolon
id|cx88_free_buffer
c_func
(paren
id|dev-&gt;pci
comma
(paren
r_struct
id|cx88_buffer
op_star
)paren
id|vb
)paren
suffix:semicolon
)brace
DECL|variable|dvb_qops
r_struct
id|videobuf_queue_ops
id|dvb_qops
op_assign
(brace
dot
id|buf_setup
op_assign
id|dvb_buf_setup
comma
dot
id|buf_prepare
op_assign
id|dvb_buf_prepare
comma
dot
id|buf_queue
op_assign
id|dvb_buf_queue
comma
dot
id|buf_release
op_assign
id|dvb_buf_release
comma
)brace
suffix:semicolon
multiline_comment|/* ------------------------------------------------------------------ */
DECL|function|dvico_fusionhdtv_demod_init
r_static
r_int
id|dvico_fusionhdtv_demod_init
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
)paren
(brace
r_static
id|u8
id|clock_config
(braket
)braket
op_assign
(brace
id|CLOCK_CTL
comma
l_int|0x38
comma
l_int|0x39
)brace
suffix:semicolon
r_static
id|u8
id|reset
(braket
)braket
op_assign
(brace
id|RESET
comma
l_int|0x80
)brace
suffix:semicolon
r_static
id|u8
id|adc_ctl_1_cfg
(braket
)braket
op_assign
(brace
id|ADC_CTL_1
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|agc_cfg
(braket
)braket
op_assign
(brace
id|AGC_TARGET
comma
l_int|0x24
comma
l_int|0x20
)brace
suffix:semicolon
r_static
id|u8
id|gpp_ctl_cfg
(braket
)braket
op_assign
(brace
id|GPP_CTL
comma
l_int|0x33
)brace
suffix:semicolon
r_static
id|u8
id|capt_range_cfg
(braket
)braket
op_assign
(brace
id|CAPT_RANGE
comma
l_int|0x32
)brace
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|clock_config
comma
r_sizeof
(paren
id|clock_config
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|200
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|reset
comma
r_sizeof
(paren
id|reset
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|adc_ctl_1_cfg
comma
r_sizeof
(paren
id|adc_ctl_1_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|agc_cfg
comma
r_sizeof
(paren
id|agc_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|gpp_ctl_cfg
comma
r_sizeof
(paren
id|gpp_ctl_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|capt_range_cfg
comma
r_sizeof
(paren
id|capt_range_cfg
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|dntv_live_dvbt_demod_init
r_static
r_int
id|dntv_live_dvbt_demod_init
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
)paren
(brace
r_static
id|u8
id|clock_config
(braket
)braket
op_assign
(brace
l_int|0x89
comma
l_int|0x38
comma
l_int|0x39
)brace
suffix:semicolon
r_static
id|u8
id|reset
(braket
)braket
op_assign
(brace
l_int|0x50
comma
l_int|0x80
)brace
suffix:semicolon
r_static
id|u8
id|adc_ctl_1_cfg
(braket
)braket
op_assign
(brace
l_int|0x8E
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|agc_cfg
(braket
)braket
op_assign
(brace
l_int|0x67
comma
l_int|0x10
comma
l_int|0x23
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0x00
comma
l_int|0xFF
comma
l_int|0x00
comma
l_int|0x40
comma
l_int|0x40
)brace
suffix:semicolon
r_static
id|u8
id|dntv_extra
(braket
)braket
op_assign
(brace
l_int|0xB5
comma
l_int|0x7A
)brace
suffix:semicolon
r_static
id|u8
id|capt_range_cfg
(braket
)braket
op_assign
(brace
l_int|0x75
comma
l_int|0x32
)brace
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|clock_config
comma
r_sizeof
(paren
id|clock_config
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2000
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|reset
comma
r_sizeof
(paren
id|reset
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|adc_ctl_1_cfg
comma
r_sizeof
(paren
id|adc_ctl_1_cfg
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|agc_cfg
comma
r_sizeof
(paren
id|agc_cfg
)paren
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2000
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|dntv_extra
comma
r_sizeof
(paren
id|dntv_extra
)paren
)paren
suffix:semicolon
id|mt352_write
c_func
(paren
id|fe
comma
id|capt_range_cfg
comma
r_sizeof
(paren
id|capt_range_cfg
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|mt352_pll_set
r_static
r_int
id|mt352_pll_set
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_struct
id|dvb_frontend_parameters
op_star
id|params
comma
id|u8
op_star
id|pllbuf
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|fe-&gt;dvb-&gt;priv
suffix:semicolon
id|pllbuf
(braket
l_int|0
)braket
op_assign
id|dev-&gt;core-&gt;pll_addr
op_lshift
l_int|1
suffix:semicolon
id|dvb_pll_configure
c_func
(paren
id|dev-&gt;core-&gt;pll_desc
comma
id|pllbuf
op_plus
l_int|1
comma
id|params-&gt;frequency
comma
id|params-&gt;u.ofdm.bandwidth
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|dvico_fusionhdtv
r_static
r_struct
id|mt352_config
id|dvico_fusionhdtv
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x0F
comma
dot
id|demod_init
op_assign
id|dvico_fusionhdtv_demod_init
comma
dot
id|pll_set
op_assign
id|mt352_pll_set
comma
)brace
suffix:semicolon
DECL|variable|dntv_live_dvbt_config
r_static
r_struct
id|mt352_config
id|dntv_live_dvbt_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x0f
comma
dot
id|demod_init
op_assign
id|dntv_live_dvbt_demod_init
comma
dot
id|pll_set
op_assign
id|mt352_pll_set
comma
)brace
suffix:semicolon
macro_line|#if HAVE_CX22702
DECL|variable|connexant_refboard_config
r_static
r_struct
id|cx22702_config
id|connexant_refboard_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x43
comma
dot
id|pll_address
op_assign
l_int|0x60
comma
dot
id|pll_desc
op_assign
op_amp
id|dvb_pll_thomson_dtt7579
comma
)brace
suffix:semicolon
DECL|variable|hauppauge_novat_config
r_static
r_struct
id|cx22702_config
id|hauppauge_novat_config
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x43
comma
dot
id|pll_address
op_assign
l_int|0x61
comma
dot
id|pll_desc
op_assign
op_amp
id|dvb_pll_thomson_dtt759x
comma
)brace
suffix:semicolon
macro_line|#endif
macro_line|#if HAVE_OR51132
DECL|function|or51132_set_ts_param
r_static
r_int
id|or51132_set_ts_param
c_func
(paren
r_struct
id|dvb_frontend
op_star
id|fe
comma
r_int
id|is_punctured
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|fe-&gt;dvb-&gt;priv
suffix:semicolon
id|dev-&gt;ts_gen_cntrl
op_assign
id|is_punctured
ques
c_cond
l_int|0x04
suffix:colon
l_int|0x00
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|pchdtv_hd3000
r_struct
id|or51132_config
id|pchdtv_hd3000
op_assign
(brace
dot
id|demod_address
op_assign
l_int|0x15
comma
dot
id|pll_address
op_assign
l_int|0x61
comma
dot
id|pll_desc
op_assign
op_amp
id|dvb_pll_thomson_dtt7610
comma
dot
id|set_ts_params
op_assign
id|or51132_set_ts_param
comma
)brace
suffix:semicolon
macro_line|#endif
DECL|function|dvb_register
r_static
r_int
id|dvb_register
c_func
(paren
r_struct
id|cx8802_dev
op_star
id|dev
)paren
(brace
multiline_comment|/* init struct videobuf_dvb */
id|dev-&gt;dvb.name
op_assign
id|dev-&gt;core-&gt;name
suffix:semicolon
id|dev-&gt;ts_gen_cntrl
op_assign
l_int|0x0c
suffix:semicolon
multiline_comment|/* init frontend */
r_switch
c_cond
(paren
id|dev-&gt;core-&gt;board
)paren
(brace
macro_line|#if HAVE_CX22702
r_case
id|CX88_BOARD_HAUPPAUGE_DVB_T1
suffix:colon
id|dev-&gt;dvb.frontend
op_assign
id|cx22702_attach
c_func
(paren
op_amp
id|hauppauge_novat_config
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CX88_BOARD_CONEXANT_DVB_T1
suffix:colon
id|dev-&gt;dvb.frontend
op_assign
id|cx22702_attach
c_func
(paren
op_amp
id|connexant_refboard_config
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_case
id|CX88_BOARD_DVICO_FUSIONHDTV_DVB_T1
suffix:colon
id|dev-&gt;core-&gt;pll_addr
op_assign
l_int|0x61
suffix:semicolon
id|dev-&gt;core-&gt;pll_desc
op_assign
op_amp
id|dvb_pll_lg_z201
suffix:semicolon
id|dev-&gt;dvb.frontend
op_assign
id|mt352_attach
c_func
(paren
op_amp
id|dvico_fusionhdtv
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CX88_BOARD_DVICO_FUSIONHDTV_DVB_T_PLUS
suffix:colon
id|dev-&gt;core-&gt;pll_addr
op_assign
l_int|0x60
suffix:semicolon
id|dev-&gt;core-&gt;pll_desc
op_assign
op_amp
id|dvb_pll_thomson_dtt7579
suffix:semicolon
id|dev-&gt;dvb.frontend
op_assign
id|mt352_attach
c_func
(paren
op_amp
id|dvico_fusionhdtv
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CX88_BOARD_KWORLD_DVB_T
suffix:colon
r_case
id|CX88_BOARD_DNTV_LIVE_DVB_T
suffix:colon
id|dev-&gt;core-&gt;pll_addr
op_assign
l_int|0x61
suffix:semicolon
id|dev-&gt;core-&gt;pll_desc
op_assign
op_amp
id|dvb_pll_unknown_1
suffix:semicolon
id|dev-&gt;dvb.frontend
op_assign
id|mt352_attach
c_func
(paren
op_amp
id|dntv_live_dvbt_config
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#if HAVE_OR51132
r_case
id|CX88_BOARD_PCHDTV_HD3000
suffix:colon
id|dev-&gt;dvb.frontend
op_assign
id|or51132_attach
c_func
(paren
op_amp
id|pchdtv_hd3000
comma
op_amp
id|dev-&gt;core-&gt;i2c_adap
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%s: The frontend of your DVB/ATSC card isn&squot;t supported yet&bslash;n&quot;
l_string|&quot;%s: you might want to look out for patches here:&bslash;n&quot;
l_string|&quot;%s:     http://dl.bytesex.org/patches/&bslash;n&quot;
comma
id|dev-&gt;core-&gt;name
comma
id|dev-&gt;core-&gt;name
comma
id|dev-&gt;core-&gt;name
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
l_int|NULL
op_eq
id|dev-&gt;dvb.frontend
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: frontend initialization failed&bslash;n&quot;
comma
id|dev-&gt;core-&gt;name
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|dev-&gt;core-&gt;pll_desc
)paren
(brace
id|dev-&gt;dvb.frontend-&gt;ops-&gt;info.frequency_min
op_assign
id|dev-&gt;core-&gt;pll_desc-&gt;min
suffix:semicolon
id|dev-&gt;dvb.frontend-&gt;ops-&gt;info.frequency_max
op_assign
id|dev-&gt;core-&gt;pll_desc-&gt;max
suffix:semicolon
)brace
multiline_comment|/* Copy the board name into the DVB structure */
id|strlcpy
c_func
(paren
id|dev-&gt;dvb.frontend-&gt;ops-&gt;info.name
comma
id|cx88_boards
(braket
id|dev-&gt;core-&gt;board
)braket
dot
id|name
comma
r_sizeof
(paren
id|dev-&gt;dvb.frontend-&gt;ops-&gt;info.name
)paren
)paren
suffix:semicolon
multiline_comment|/* register everything */
r_return
id|videobuf_dvb_register
c_func
(paren
op_amp
id|dev-&gt;dvb
comma
id|THIS_MODULE
comma
id|dev
)paren
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------- */
DECL|function|dvb_probe
r_static
r_int
id|__devinit
id|dvb_probe
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci_dev
comma
r_const
r_struct
id|pci_device_id
op_star
id|pci_id
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
suffix:semicolon
r_struct
id|cx88_core
op_star
id|core
suffix:semicolon
r_int
id|err
suffix:semicolon
multiline_comment|/* general setup */
id|core
op_assign
id|cx88_core_get
c_func
(paren
id|pci_dev
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|NULL
op_eq
id|core
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|err
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cx88_boards
(braket
id|core-&gt;board
)braket
dot
id|dvb
)paren
r_goto
id|fail_core
suffix:semicolon
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|dev
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|dev
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|NULL
op_eq
id|dev
)paren
r_goto
id|fail_core
suffix:semicolon
id|memset
c_func
(paren
id|dev
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|dev
)paren
)paren
suffix:semicolon
id|dev-&gt;pci
op_assign
id|pci_dev
suffix:semicolon
id|dev-&gt;core
op_assign
id|core
suffix:semicolon
id|err
op_assign
id|cx8802_init_common
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|0
op_ne
id|err
)paren
r_goto
id|fail_free
suffix:semicolon
multiline_comment|/* dvb stuff */
id|printk
c_func
(paren
l_string|&quot;%s/2: cx2388x based dvb card&bslash;n&quot;
comma
id|core-&gt;name
)paren
suffix:semicolon
id|videobuf_queue_init
c_func
(paren
op_amp
id|dev-&gt;dvb.dvbq
comma
op_amp
id|dvb_qops
comma
id|dev-&gt;pci
comma
op_amp
id|dev-&gt;slock
comma
id|V4L2_BUF_TYPE_VIDEO_CAPTURE
comma
id|V4L2_FIELD_TOP
comma
r_sizeof
(paren
r_struct
id|cx88_buffer
)paren
comma
id|dev
)paren
suffix:semicolon
id|err
op_assign
id|dvb_register
c_func
(paren
id|dev
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|0
op_ne
id|err
)paren
r_goto
id|fail_free
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|fail_free
suffix:colon
id|kfree
c_func
(paren
id|dev
)paren
suffix:semicolon
id|fail_core
suffix:colon
id|cx88_core_put
c_func
(paren
id|core
comma
id|pci_dev
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|dvb_remove
r_static
r_void
id|__devexit
id|dvb_remove
c_func
(paren
r_struct
id|pci_dev
op_star
id|pci_dev
)paren
(brace
r_struct
id|cx8802_dev
op_star
id|dev
op_assign
id|pci_get_drvdata
c_func
(paren
id|pci_dev
)paren
suffix:semicolon
multiline_comment|/* dvb */
id|videobuf_dvb_unregister
c_func
(paren
op_amp
id|dev-&gt;dvb
)paren
suffix:semicolon
multiline_comment|/* common */
id|cx8802_fini_common
c_func
(paren
id|dev
)paren
suffix:semicolon
id|cx88_core_put
c_func
(paren
id|dev-&gt;core
comma
id|dev-&gt;pci
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
DECL|variable|cx8802_pci_tbl
r_static
r_struct
id|pci_device_id
id|cx8802_pci_tbl
(braket
)braket
op_assign
(brace
(brace
dot
id|vendor
op_assign
l_int|0x14f1
comma
dot
id|device
op_assign
l_int|0x8802
comma
dot
id|subvendor
op_assign
id|PCI_ANY_ID
comma
dot
id|subdevice
op_assign
id|PCI_ANY_ID
comma
)brace
comma
(brace
multiline_comment|/* --- end of list --- */
)brace
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|cx8802_pci_tbl
)paren
suffix:semicolon
DECL|variable|dvb_pci_driver
r_static
r_struct
id|pci_driver
id|dvb_pci_driver
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;cx88-dvb&quot;
comma
dot
id|id_table
op_assign
id|cx8802_pci_tbl
comma
dot
id|probe
op_assign
id|dvb_probe
comma
dot
id|remove
op_assign
id|__devexit_p
c_func
(paren
id|dvb_remove
)paren
comma
dot
id|suspend
op_assign
id|cx8802_suspend_common
comma
dot
id|resume
op_assign
id|cx8802_resume_common
comma
)brace
suffix:semicolon
DECL|function|dvb_init
r_static
r_int
id|dvb_init
c_func
(paren
r_void
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;cx2388x dvb driver version %d.%d.%d loaded&bslash;n&quot;
comma
(paren
id|CX88_VERSION_CODE
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
comma
(paren
id|CX88_VERSION_CODE
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
comma
id|CX88_VERSION_CODE
op_amp
l_int|0xff
)paren
suffix:semicolon
macro_line|#ifdef SNAPSHOT
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;cx2388x: snapshot date %04d-%02d-%02d&bslash;n&quot;
comma
id|SNAPSHOT
op_div
l_int|10000
comma
(paren
id|SNAPSHOT
op_div
l_int|100
)paren
op_mod
l_int|100
comma
id|SNAPSHOT
op_mod
l_int|100
)paren
suffix:semicolon
macro_line|#endif
r_return
id|pci_module_init
c_func
(paren
op_amp
id|dvb_pci_driver
)paren
suffix:semicolon
)brace
DECL|function|dvb_fini
r_static
r_void
id|dvb_fini
c_func
(paren
r_void
)paren
(brace
id|pci_unregister_driver
c_func
(paren
op_amp
id|dvb_pci_driver
)paren
suffix:semicolon
)brace
DECL|variable|dvb_init
id|module_init
c_func
(paren
id|dvb_init
)paren
suffix:semicolon
DECL|variable|dvb_fini
id|module_exit
c_func
(paren
id|dvb_fini
)paren
suffix:semicolon
multiline_comment|/*&n; * Local variables:&n; * c-basic-offset: 8&n; * compile-command: &quot;make DVB=1&quot;&n; * End:&n; */
eof
