multiline_comment|/*&n;    $Id: cx88-tvaudio.c,v 1.24 2004/10/25 11:51:00 kraxel Exp $&n;&n;    cx88x-audio.c - Conexant CX23880/23881 audio downstream driver driver&n;&n;     (c) 2001 Michael Eskin, Tom Zakrajsek [Windows version]&n;     (c) 2002 Yurij Sysoev &lt;yurij@naturesoft.net&gt;&n;     (c) 2003 Gerd Knorr &lt;kraxel@bytesex.org&gt;&n;&n;    -----------------------------------------------------------------------&n;&n;    Lot of voodoo here.  Even the data sheet doesn&squot;t help to&n;    understand what is going on here, the documentation for the audio&n;    part of the cx2388x chip is *very* bad.&n;&n;    Some of this comes from party done linux driver sources I got from&n;    [undocumented].&n;&n;    Some comes from the dscaler sources, one of the dscaler driver guy works&n;    for Conexant ...&n;&n;    -----------------------------------------------------------------------&n;&n;    This program is free software; you can redistribute it and/or modify&n;    it under the terms of the GNU General Public License as published by&n;    the Free Software Foundation; either version 2 of the License, or&n;    (at your option) any later version.&n;&n;    This program is distributed in the hope that it will be useful,&n;    but WITHOUT ANY WARRANTY; without even the implied warranty of&n;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n;    GNU General Public License for more details.&n;&n;    You should have received a copy of the GNU General Public License&n;    along with this program; if not, write to the Free Software&n;    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n;*/
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/poll.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/vmalloc.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/kthread.h&gt;
macro_line|#include &quot;cx88.h&quot;
DECL|variable|audio_debug
r_static
r_int
r_int
id|audio_debug
op_assign
l_int|1
suffix:semicolon
id|module_param
c_func
(paren
id|audio_debug
comma
r_int
comma
l_int|0644
)paren
suffix:semicolon
id|MODULE_PARM_DESC
c_func
(paren
id|audio_debug
comma
l_string|&quot;enable debug messages [audio]&quot;
)paren
suffix:semicolon
DECL|macro|dprintk
mdefine_line|#define dprintk(fmt, arg...)&t;if (audio_debug) &bslash;&n;&t;printk(KERN_DEBUG &quot;%s/0: &quot; fmt, core-&gt;name , ## arg)
multiline_comment|/* ----------------------------------------------------------- */
DECL|variable|aud_ctl_names
r_static
r_char
op_star
id|aud_ctl_names
(braket
l_int|64
)braket
op_assign
(brace
(braket
id|EN_BTSC_FORCE_MONO
)braket
op_assign
l_string|&quot;BTSC_FORCE_MONO&quot;
comma
(braket
id|EN_BTSC_FORCE_STEREO
)braket
op_assign
l_string|&quot;BTSC_FORCE_STEREO&quot;
comma
(braket
id|EN_BTSC_FORCE_SAP
)braket
op_assign
l_string|&quot;BTSC_FORCE_SAP&quot;
comma
(braket
id|EN_BTSC_AUTO_STEREO
)braket
op_assign
l_string|&quot;BTSC_AUTO_STEREO&quot;
comma
(braket
id|EN_BTSC_AUTO_SAP
)braket
op_assign
l_string|&quot;BTSC_AUTO_SAP&quot;
comma
(braket
id|EN_A2_FORCE_MONO1
)braket
op_assign
l_string|&quot;A2_FORCE_MONO1&quot;
comma
(braket
id|EN_A2_FORCE_MONO2
)braket
op_assign
l_string|&quot;A2_FORCE_MONO2&quot;
comma
(braket
id|EN_A2_FORCE_STEREO
)braket
op_assign
l_string|&quot;A2_FORCE_STEREO&quot;
comma
(braket
id|EN_A2_AUTO_MONO2
)braket
op_assign
l_string|&quot;A2_AUTO_MONO2&quot;
comma
(braket
id|EN_A2_AUTO_STEREO
)braket
op_assign
l_string|&quot;A2_AUTO_STEREO&quot;
comma
(braket
id|EN_EIAJ_FORCE_MONO1
)braket
op_assign
l_string|&quot;EIAJ_FORCE_MONO1&quot;
comma
(braket
id|EN_EIAJ_FORCE_MONO2
)braket
op_assign
l_string|&quot;EIAJ_FORCE_MONO2&quot;
comma
(braket
id|EN_EIAJ_FORCE_STEREO
)braket
op_assign
l_string|&quot;EIAJ_FORCE_STEREO&quot;
comma
(braket
id|EN_EIAJ_AUTO_MONO2
)braket
op_assign
l_string|&quot;EIAJ_AUTO_MONO2&quot;
comma
(braket
id|EN_EIAJ_AUTO_STEREO
)braket
op_assign
l_string|&quot;EIAJ_AUTO_STEREO&quot;
comma
(braket
id|EN_NICAM_FORCE_MONO1
)braket
op_assign
l_string|&quot;NICAM_FORCE_MONO1&quot;
comma
(braket
id|EN_NICAM_FORCE_MONO2
)braket
op_assign
l_string|&quot;NICAM_FORCE_MONO2&quot;
comma
(braket
id|EN_NICAM_FORCE_STEREO
)braket
op_assign
l_string|&quot;NICAM_FORCE_STEREO&quot;
comma
(braket
id|EN_NICAM_AUTO_MONO2
)braket
op_assign
l_string|&quot;NICAM_AUTO_MONO2&quot;
comma
(braket
id|EN_NICAM_AUTO_STEREO
)braket
op_assign
l_string|&quot;NICAM_AUTO_STEREO&quot;
comma
(braket
id|EN_FMRADIO_FORCE_MONO
)braket
op_assign
l_string|&quot;FMRADIO_FORCE_MONO&quot;
comma
(braket
id|EN_FMRADIO_FORCE_STEREO
)braket
op_assign
l_string|&quot;FMRADIO_FORCE_STEREO&quot;
comma
(braket
id|EN_FMRADIO_AUTO_STEREO
)braket
op_assign
l_string|&quot;FMRADIO_AUTO_STEREO&quot;
comma
)brace
suffix:semicolon
DECL|struct|rlist
r_struct
id|rlist
(brace
DECL|member|reg
id|u32
id|reg
suffix:semicolon
DECL|member|val
id|u32
id|val
suffix:semicolon
)brace
suffix:semicolon
DECL|function|set_audio_registers
r_static
r_void
id|set_audio_registers
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
comma
r_const
r_struct
id|rlist
op_star
id|l
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|l
(braket
id|i
)braket
dot
id|reg
suffix:semicolon
id|i
op_increment
)paren
(brace
r_switch
c_cond
(paren
id|l
(braket
id|i
)braket
dot
id|reg
)paren
(brace
r_case
id|AUD_PDF_DDS_CNST_BYTE2
suffix:colon
r_case
id|AUD_PDF_DDS_CNST_BYTE1
suffix:colon
r_case
id|AUD_PDF_DDS_CNST_BYTE0
suffix:colon
r_case
id|AUD_QAM_MODE
suffix:colon
r_case
id|AUD_PHACC_FREQ_8MSB
suffix:colon
r_case
id|AUD_PHACC_FREQ_8LSB
suffix:colon
id|cx_writeb
c_func
(paren
id|l
(braket
id|i
)braket
dot
id|reg
comma
id|l
(braket
id|i
)braket
dot
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|cx_write
c_func
(paren
id|l
(braket
id|i
)braket
dot
id|reg
comma
id|l
(braket
id|i
)braket
dot
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
DECL|function|set_audio_start
r_static
r_void
id|set_audio_start
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
comma
id|u32
id|mode
comma
id|u32
id|ctl
)paren
(brace
singleline_comment|// mute
id|cx_write
c_func
(paren
id|AUD_VOL_CTL
comma
(paren
l_int|1
op_lshift
l_int|6
)paren
)paren
suffix:semicolon
singleline_comment|//  increase level of input by 12dB
id|cx_write
c_func
(paren
id|AUD_AFE_12DB_EN
comma
l_int|0x0001
)paren
suffix:semicolon
singleline_comment|// start programming
id|cx_write
c_func
(paren
id|AUD_CTL
comma
l_int|0x0000
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_INIT
comma
id|mode
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_INIT_LD
comma
l_int|0x0001
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_SOFT_RESET
comma
l_int|0x0001
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_CTL
comma
id|ctl
)paren
suffix:semicolon
)brace
DECL|function|set_audio_finish
r_static
r_void
id|set_audio_finish
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
id|u32
id|volume
suffix:semicolon
singleline_comment|// finish programming
id|cx_write
c_func
(paren
id|AUD_SOFT_RESET
comma
l_int|0x0000
)paren
suffix:semicolon
singleline_comment|// start audio processing
id|cx_set
c_func
(paren
id|AUD_CTL
comma
id|EN_DAC_ENABLE
)paren
suffix:semicolon
singleline_comment|// unmute
id|volume
op_assign
id|cx_sread
c_func
(paren
id|SHADOW_AUD_VOL_CTL
)paren
suffix:semicolon
id|cx_swrite
c_func
(paren
id|SHADOW_AUD_VOL_CTL
comma
id|AUD_VOL_CTL
comma
id|volume
)paren
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------- */
DECL|function|set_audio_standard_BTSC
r_static
r_void
id|set_audio_standard_BTSC
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
comma
r_int
r_int
id|sap
)paren
(brace
r_static
r_const
r_struct
id|rlist
id|btsc
(braket
)braket
op_assign
(brace
multiline_comment|/* from dscaler */
(brace
id|AUD_OUT1_SEL
comma
l_int|0x00000013
)brace
comma
(brace
id|AUD_OUT1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_POLY0_DDS_CONSTANT
comma
l_int|0x0012010c
)brace
comma
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x00c3e7aa
)brace
comma
(brace
id|AUD_DBX_IN_GAIN
comma
l_int|0x00004734
)brace
comma
(brace
id|AUD_DBX_WBE_GAIN
comma
l_int|0x00004640
)brace
comma
(brace
id|AUD_DBX_SE_GAIN
comma
l_int|0x00008d31
)brace
comma
(brace
id|AUD_DCOC_0_SRC
comma
l_int|0x0000001a
)brace
comma
(brace
id|AUD_IIR1_4_SEL
comma
l_int|0x00000021
)brace
comma
(brace
id|AUD_DCOC_PASS_IN
comma
l_int|0x00000003
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DN0_FREQ
comma
l_int|0x0000283b
)brace
comma
(brace
id|AUD_DN2_SRC_SEL
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DN2_FREQ
comma
l_int|0x00003000
)brace
comma
(brace
id|AUD_DN2_AFC
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_DN2_SHFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR2_2_SEL
comma
l_int|0x00000020
)brace
comma
(brace
id|AUD_IIR2_2_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR2_3_SEL
comma
l_int|0x0000001f
)brace
comma
(brace
id|AUD_IIR2_3_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_CRDC1_SRC_SEL
comma
l_int|0x000003ce
)brace
comma
(brace
id|AUD_CRDC1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_CORDIC_SHIFT_1
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_DCOC_1_SRC
comma
l_int|0x0000001b
)brace
comma
(brace
id|AUD_DCOC1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_RDSI_SEL
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_RDSQ_SEL
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_RDSI_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_RDSQ_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_POLYPH80SCALEFAC
comma
l_int|0x00000003
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|btsc_sap
(braket
)braket
op_assign
(brace
(brace
id|AUD_DBX_IN_GAIN
comma
l_int|0x00007200
)brace
comma
(brace
id|AUD_DBX_WBE_GAIN
comma
l_int|0x00006200
)brace
comma
(brace
id|AUD_DBX_SE_GAIN
comma
l_int|0x00006200
)brace
comma
(brace
id|AUD_IIR1_1_SEL
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR1_3_SEL
comma
l_int|0x00000001
)brace
comma
(brace
id|AUD_DN1_SRC_SEL
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR1_4_SHIFT
comma
l_int|0x00000006
)brace
comma
(brace
id|AUD_IIR2_1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR2_2_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR3_0_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR3_1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR3_0_SEL
comma
l_int|0x0000000d
)brace
comma
(brace
id|AUD_IIR3_1_SEL
comma
l_int|0x0000000e
)brace
comma
(brace
id|AUD_DEEMPH1_SRC_SEL
comma
l_int|0x00000014
)brace
comma
(brace
id|AUD_DEEMPH1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_G0
comma
l_int|0x00004000
)brace
comma
(brace
id|AUD_DEEMPH1_A0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_B0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_A1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_B1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_OUT0_SEL
comma
l_int|0x0000003f
)brace
comma
(brace
id|AUD_OUT1_SEL
comma
l_int|0x0000003f
)brace
comma
(brace
id|AUD_DN1_AFC
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_IIR1_0_SEL
comma
l_int|0x0000001d
)brace
comma
(brace
id|AUD_IIR1_2_SEL
comma
l_int|0x0000001e
)brace
comma
(brace
id|AUD_IIR2_1_SEL
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_IIR2_2_SEL
comma
l_int|0x00000004
)brace
comma
(brace
id|AUD_IIR3_2_SEL
comma
l_int|0x0000000f
)brace
comma
(brace
id|AUD_DCOC2_SHIFT
comma
l_int|0x00000001
)brace
comma
(brace
id|AUD_IIR3_2_SHIFT
comma
l_int|0x00000001
)brace
comma
(brace
id|AUD_DEEMPH0_SRC_SEL
comma
l_int|0x00000014
)brace
comma
(brace
id|AUD_CORDIC_SHIFT_1
comma
l_int|0x00000006
)brace
comma
(brace
id|AUD_POLY0_DDS_CONSTANT
comma
l_int|0x000e4db2
)brace
comma
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x00f696e6
)brace
comma
(brace
id|AUD_IIR2_3_SEL
comma
l_int|0x00000025
)brace
comma
(brace
id|AUD_IIR1_4_SEL
comma
l_int|0x00000021
)brace
comma
(brace
id|AUD_DN1_FREQ
comma
l_int|0x0000c965
)brace
comma
(brace
id|AUD_DCOC_PASS_IN
comma
l_int|0x00000003
)brace
comma
(brace
id|AUD_DCOC_0_SRC
comma
l_int|0x0000001a
)brace
comma
(brace
id|AUD_DCOC_1_SRC
comma
l_int|0x0000001b
)brace
comma
(brace
id|AUD_DCOC1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_RDSI_SEL
comma
l_int|0x00000009
)brace
comma
(brace
id|AUD_RDSQ_SEL
comma
l_int|0x00000009
)brace
comma
(brace
id|AUD_RDSI_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_RDSQ_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_POLYPH80SCALEFAC
comma
l_int|0x00000003
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
singleline_comment|// dscaler: exactly taken from driver,
singleline_comment|// dscaler: don&squot;t know why to set EN_FMRADIO_EN_RDS
r_if
c_cond
(paren
id|sap
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s SAP (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0001
comma
id|EN_FMRADIO_EN_RDS
op_or
id|EN_BTSC_FORCE_SAP
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|btsc_sap
)paren
suffix:semicolon
)brace
r_else
(brace
id|dprintk
c_func
(paren
l_string|&quot;%s (status: known-good)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0001
comma
id|EN_FMRADIO_EN_RDS
op_or
id|EN_BTSC_AUTO_STEREO
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|btsc
)paren
suffix:semicolon
)brace
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
DECL|function|set_audio_standard_NICAM
r_static
r_void
id|set_audio_standard_NICAM
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
r_static
r_const
r_struct
id|rlist
id|nicam_common
(braket
)braket
op_assign
(brace
multiline_comment|/* from dscaler */
(brace
id|AUD_RATE_ADJ1
comma
l_int|0x00000010
)brace
comma
(brace
id|AUD_RATE_ADJ2
comma
l_int|0x00000040
)brace
comma
(brace
id|AUD_RATE_ADJ3
comma
l_int|0x00000100
)brace
comma
(brace
id|AUD_RATE_ADJ4
comma
l_int|0x00000400
)brace
comma
(brace
id|AUD_RATE_ADJ5
comma
l_int|0x00001000
)brace
comma
singleline_comment|//&t;&t;{ AUD_DMD_RA_DDS,          0x00c0d5ce },
singleline_comment|// Deemphasis 1:
(brace
id|AUD_DEEMPHGAIN_R
comma
l_int|0x000023c2
)brace
comma
(brace
id|AUD_DEEMPHNUMER1_R
comma
l_int|0x0002a7bc
)brace
comma
(brace
id|AUD_DEEMPHNUMER2_R
comma
l_int|0x0003023e
)brace
comma
(brace
id|AUD_DEEMPHDENOM1_R
comma
l_int|0x0000f3d0
)brace
comma
(brace
id|AUD_DEEMPHDENOM2_R
comma
l_int|0x00000000
)brace
comma
macro_line|#if 0
singleline_comment|// Deemphasis 2: (other tv norm?)
(brace
id|AUD_DEEMPHGAIN_R
comma
l_int|0x0000c600
)brace
comma
(brace
id|AUD_DEEMPHNUMER1_R
comma
l_int|0x00066738
)brace
comma
(brace
id|AUD_DEEMPHNUMER2_R
comma
l_int|0x00066739
)brace
comma
(brace
id|AUD_DEEMPHDENOM1_R
comma
l_int|0x0001e88c
)brace
comma
(brace
id|AUD_DEEMPHDENOM2_R
comma
l_int|0x0001e88c
)brace
comma
macro_line|#endif
(brace
id|AUD_DEEMPHDENOM2_R
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_ERRLOGPERIOD_R
comma
l_int|0x00000fff
)brace
comma
(brace
id|AUD_ERRINTRPTTHSHLD1_R
comma
l_int|0x000003ff
)brace
comma
(brace
id|AUD_ERRINTRPTTHSHLD2_R
comma
l_int|0x000000ff
)brace
comma
(brace
id|AUD_ERRINTRPTTHSHLD3_R
comma
l_int|0x0000003f
)brace
comma
(brace
id|AUD_POLYPH80SCALEFAC
comma
l_int|0x00000003
)brace
comma
singleline_comment|// setup QAM registers
(brace
id|AUD_PDF_DDS_CNST_BYTE2
comma
l_int|0x06
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE1
comma
l_int|0x82
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE0
comma
l_int|0x16
)brace
comma
(brace
id|AUD_QAM_MODE
comma
l_int|0x05
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|nicam_pal_i
(braket
)braket
op_assign
(brace
(brace
id|AUD_PDF_DDS_CNST_BYTE0
comma
l_int|0x12
)brace
comma
(brace
id|AUD_PHACC_FREQ_8MSB
comma
l_int|0x3a
)brace
comma
(brace
id|AUD_PHACC_FREQ_8LSB
comma
l_int|0x93
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|nicam_default
(braket
)braket
op_assign
(brace
(brace
id|AUD_PDF_DDS_CNST_BYTE0
comma
l_int|0x16
)brace
comma
(brace
id|AUD_PHACC_FREQ_8MSB
comma
l_int|0x34
)brace
comma
(brace
id|AUD_PHACC_FREQ_8LSB
comma
l_int|0x4c
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0010
comma
id|EN_DMTRX_LR
op_or
id|EN_DMTRX_BYPASS
op_or
id|EN_NICAM_AUTO_STEREO
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|nicam_common
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|core-&gt;tvaudio
)paren
(brace
r_case
id|WW_NICAM_I
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;%s PAL-I NICAM (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|nicam_pal_i
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_NICAM_BGDKL
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;%s PAL-BGDK NICAM (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|nicam_default
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
DECL|function|set_audio_standard_NICAM_L
r_static
r_void
id|set_audio_standard_NICAM_L
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
multiline_comment|/* This is officially weird.. register dumps indicate windows&n;&t; * uses audio mode 4.. A2. Let&squot;s operate and find out. */
r_static
r_const
r_struct
id|rlist
id|nicam_l
(braket
)braket
op_assign
(brace
singleline_comment|// setup QAM registers
(brace
id|AUD_PDF_DDS_CNST_BYTE2
comma
l_int|0x48
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE1
comma
l_int|0x3d
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE0
comma
l_int|0xf5
)brace
comma
(brace
id|AUD_QAM_MODE
comma
l_int|0x00
)brace
comma
(brace
id|AUD_PHACC_FREQ_8MSB
comma
l_int|0x3a
)brace
comma
(brace
id|AUD_PHACC_FREQ_8LSB
comma
l_int|0x4a
)brace
comma
(brace
id|AUD_POLY0_DDS_CONSTANT
comma
l_int|0x000e4db2
)brace
comma
(brace
id|AUD_IIR1_0_SEL
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR1_1_SEL
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_IIR1_2_SEL
comma
l_int|0x00000023
)brace
comma
(brace
id|AUD_IIR1_3_SEL
comma
l_int|0x00000004
)brace
comma
(brace
id|AUD_IIR1_4_SEL
comma
l_int|0x00000005
)brace
comma
(brace
id|AUD_IIR1_5_SEL
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR1_0_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR1_1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR1_2_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR1_3_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR1_4_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR1_5_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR2_0_SEL
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_IIR2_1_SEL
comma
l_int|0x00000003
)brace
comma
(brace
id|AUD_IIR2_2_SEL
comma
l_int|0x00000004
)brace
comma
(brace
id|AUD_IIR2_3_SEL
comma
l_int|0x00000005
)brace
comma
(brace
id|AUD_IIR3_0_SEL
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR3_1_SEL
comma
l_int|0x00000023
)brace
comma
(brace
id|AUD_IIR3_2_SEL
comma
l_int|0x00000016
)brace
comma
(brace
id|AUD_IIR4_0_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR4_1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR3_2_SHIFT
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_IIR4_0_SEL
comma
l_int|0x0000001d
)brace
comma
(brace
id|AUD_IIR4_1_SEL
comma
l_int|0x00000019
)brace
comma
(brace
id|AUD_IIR4_2_SEL
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_IIR4_0_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_IIR4_1_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR4_2_SHIFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_IIR4_0_CA0
comma
l_int|0x0003e57e
)brace
comma
(brace
id|AUD_IIR4_0_CA1
comma
l_int|0x00005e11
)brace
comma
(brace
id|AUD_IIR4_0_CA2
comma
l_int|0x0003a7cf
)brace
comma
(brace
id|AUD_IIR4_0_CB0
comma
l_int|0x00002368
)brace
comma
(brace
id|AUD_IIR4_0_CB1
comma
l_int|0x0003bf1b
)brace
comma
(brace
id|AUD_IIR4_1_CA0
comma
l_int|0x00006349
)brace
comma
(brace
id|AUD_IIR4_1_CA1
comma
l_int|0x00006f27
)brace
comma
(brace
id|AUD_IIR4_1_CA2
comma
l_int|0x0000e7a3
)brace
comma
(brace
id|AUD_IIR4_1_CB0
comma
l_int|0x00005653
)brace
comma
(brace
id|AUD_IIR4_1_CB1
comma
l_int|0x0000cf97
)brace
comma
(brace
id|AUD_IIR4_2_CA0
comma
l_int|0x00006349
)brace
comma
(brace
id|AUD_IIR4_2_CA1
comma
l_int|0x00006f27
)brace
comma
(brace
id|AUD_IIR4_2_CA2
comma
l_int|0x0000e7a3
)brace
comma
(brace
id|AUD_IIR4_2_CB0
comma
l_int|0x00005653
)brace
comma
(brace
id|AUD_IIR4_2_CB1
comma
l_int|0x0000cf97
)brace
comma
(brace
id|AUD_HP_MD_IIR4_1
comma
l_int|0x00000001
)brace
comma
(brace
id|AUD_HP_PROG_IIR4_1
comma
l_int|0x0000001a
)brace
comma
(brace
id|AUD_DN0_FREQ
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DN1_FREQ
comma
l_int|0x00003318
)brace
comma
(brace
id|AUD_DN1_SRC_SEL
comma
l_int|0x00000017
)brace
comma
(brace
id|AUD_DN1_SHFT
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_DN1_AFC
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DN1_FREQ_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DN2_FREQ
comma
l_int|0x00003551
)brace
comma
(brace
id|AUD_DN2_SRC_SEL
comma
l_int|0x00000001
)brace
comma
(brace
id|AUD_DN2_SHFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DN2_AFC
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_DN2_FREQ_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_PDET_SRC
comma
l_int|0x00000014
)brace
comma
(brace
id|AUD_PDET_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH0_SRC_SEL
comma
l_int|0x00000011
)brace
comma
(brace
id|AUD_DEEMPH1_SRC_SEL
comma
l_int|0x00000011
)brace
comma
(brace
id|AUD_DEEMPH0_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH0_G0
comma
l_int|0x00007000
)brace
comma
(brace
id|AUD_DEEMPH0_A0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH0_B0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH0_A1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH0_B1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_G0
comma
l_int|0x00007000
)brace
comma
(brace
id|AUD_DEEMPH1_A0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_B0
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_A1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DEEMPH1_B1
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x00f5c285
)brace
comma
(brace
id|AUD_RATE_ADJ1
comma
l_int|0x00000100
)brace
comma
(brace
id|AUD_RATE_ADJ2
comma
l_int|0x00000200
)brace
comma
(brace
id|AUD_RATE_ADJ3
comma
l_int|0x00000300
)brace
comma
(brace
id|AUD_RATE_ADJ4
comma
l_int|0x00000400
)brace
comma
(brace
id|AUD_RATE_ADJ5
comma
l_int|0x00000500
)brace
comma
(brace
id|AUD_C2_UP_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_C2_LO_THR
comma
l_int|0x00003000
)brace
comma
(brace
id|AUD_C1_UP_THR
comma
l_int|0x00007000
)brace
comma
(brace
id|AUD_C2_LO_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_CTL
comma
l_int|0x0000100c
)brace
comma
(brace
id|AUD_DCOC_0_SRC
comma
l_int|0x00000021
)brace
comma
(brace
id|AUD_DCOC_1_SRC
comma
l_int|0x00000003
)brace
comma
(brace
id|AUD_DCOC1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DCOC_PASS_IN
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DCOC_2_SRC
comma
l_int|0x0000001b
)brace
comma
(brace
id|AUD_IIR4_0_SEL
comma
l_int|0x0000001d
)brace
comma
(brace
id|AUD_POLY0_DDS_CONSTANT
comma
l_int|0x000e4db2
)brace
comma
(brace
id|AUD_PHASE_FIX_CTL
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_CORDIC_SHIFT_1
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_PLL_EN
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_PLL_PRESCALE
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_PLL_INT
comma
l_int|0x0000001e
)brace
comma
(brace
id|AUD_OUT1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0004
comma
l_int|0
multiline_comment|/* FIXME */
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|nicam_l
)paren
suffix:semicolon
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
DECL|function|set_audio_standard_A2
r_static
r_void
id|set_audio_standard_A2
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
multiline_comment|/* from dscaler cvs */
r_static
r_const
r_struct
id|rlist
id|a2_common
(braket
)braket
op_assign
(brace
(brace
id|AUD_PDF_DDS_CNST_BYTE2
comma
l_int|0x06
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE1
comma
l_int|0x82
)brace
comma
(brace
id|AUD_PDF_DDS_CNST_BYTE0
comma
l_int|0x12
)brace
comma
(brace
id|AUD_QAM_MODE
comma
l_int|0x05
)brace
comma
(brace
id|AUD_PHACC_FREQ_8MSB
comma
l_int|0x34
)brace
comma
(brace
id|AUD_PHACC_FREQ_8LSB
comma
l_int|0x4c
)brace
comma
(brace
id|AUD_RATE_ADJ1
comma
l_int|0x00001000
)brace
comma
(brace
id|AUD_RATE_ADJ2
comma
l_int|0x00002000
)brace
comma
(brace
id|AUD_RATE_ADJ3
comma
l_int|0x00003000
)brace
comma
(brace
id|AUD_RATE_ADJ4
comma
l_int|0x00004000
)brace
comma
(brace
id|AUD_RATE_ADJ5
comma
l_int|0x00005000
)brace
comma
(brace
id|AUD_THR_FR
comma
l_int|0x00000000
)brace
comma
(brace
id|AAGC_HYST
comma
l_int|0x0000001a
)brace
comma
(brace
id|AUD_PILOT_BQD_1_K0
comma
l_int|0x0000755b
)brace
comma
(brace
id|AUD_PILOT_BQD_1_K1
comma
l_int|0x00551340
)brace
comma
(brace
id|AUD_PILOT_BQD_1_K2
comma
l_int|0x006d30be
)brace
comma
(brace
id|AUD_PILOT_BQD_1_K3
comma
l_int|0xffd394af
)brace
comma
(brace
id|AUD_PILOT_BQD_1_K4
comma
l_int|0x00400000
)brace
comma
(brace
id|AUD_PILOT_BQD_2_K0
comma
l_int|0x00040000
)brace
comma
(brace
id|AUD_PILOT_BQD_2_K1
comma
l_int|0x002a4841
)brace
comma
(brace
id|AUD_PILOT_BQD_2_K2
comma
l_int|0x00400000
)brace
comma
(brace
id|AUD_PILOT_BQD_2_K3
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_PILOT_BQD_2_K4
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_MODE_CHG_TIMER
comma
l_int|0x00000040
)brace
comma
(brace
id|AUD_START_TIMER
comma
l_int|0x00000200
)brace
comma
(brace
id|AUD_AFE_12DB_EN
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_CORDIC_SHIFT_0
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_CORDIC_SHIFT_1
comma
l_int|0x00000007
)brace
comma
(brace
id|AUD_DEEMPH0_G0
comma
l_int|0x00000380
)brace
comma
(brace
id|AUD_DEEMPH1_G0
comma
l_int|0x00000380
)brace
comma
(brace
id|AUD_DCOC_0_SRC
comma
l_int|0x0000001a
)brace
comma
(brace
id|AUD_DCOC0_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_0_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_DCOC_PASS_IN
comma
l_int|0x00000003
)brace
comma
(brace
id|AUD_IIR3_0_SEL
comma
l_int|0x00000021
)brace
comma
(brace
id|AUD_DN2_AFC
comma
l_int|0x00000002
)brace
comma
(brace
id|AUD_DCOC_1_SRC
comma
l_int|0x0000001b
)brace
comma
(brace
id|AUD_DCOC1_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN0
comma
l_int|0x0000000a
)brace
comma
(brace
id|AUD_DCOC_1_SHIFT_IN1
comma
l_int|0x00000008
)brace
comma
(brace
id|AUD_IIR3_1_SEL
comma
l_int|0x00000023
)brace
comma
(brace
id|AUD_RDSI_SEL
comma
l_int|0x00000017
)brace
comma
(brace
id|AUD_RDSI_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_RDSQ_SEL
comma
l_int|0x00000017
)brace
comma
(brace
id|AUD_RDSQ_SHIFT
comma
l_int|0x00000000
)brace
comma
(brace
id|AUD_POLYPH80SCALEFAC
comma
l_int|0x00000001
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|a2_table1
(braket
)braket
op_assign
(brace
singleline_comment|// PAL-BG
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x002a73bd
)brace
comma
(brace
id|AUD_C1_UP_THR
comma
l_int|0x00007000
)brace
comma
(brace
id|AUD_C1_LO_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_C2_UP_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_C2_LO_THR
comma
l_int|0x00003000
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|a2_table2
(braket
)braket
op_assign
(brace
singleline_comment|// PAL-DK
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x002a73bd
)brace
comma
(brace
id|AUD_C1_UP_THR
comma
l_int|0x00007000
)brace
comma
(brace
id|AUD_C1_LO_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_C2_UP_THR
comma
l_int|0x00005400
)brace
comma
(brace
id|AUD_C2_LO_THR
comma
l_int|0x00003000
)brace
comma
(brace
id|AUD_DN0_FREQ
comma
l_int|0x00003a1c
)brace
comma
(brace
id|AUD_DN2_FREQ
comma
l_int|0x0000d2e0
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
r_static
r_const
r_struct
id|rlist
id|a2_table3
(braket
)braket
op_assign
(brace
singleline_comment|// unknown, probably NTSC-M
(brace
id|AUD_DMD_RA_DDS
comma
l_int|0x002a2873
)brace
comma
(brace
id|AUD_C1_UP_THR
comma
l_int|0x00003c00
)brace
comma
(brace
id|AUD_C1_LO_THR
comma
l_int|0x00003000
)brace
comma
(brace
id|AUD_C2_UP_THR
comma
l_int|0x00006000
)brace
comma
(brace
id|AUD_C2_LO_THR
comma
l_int|0x00003c00
)brace
comma
(brace
id|AUD_DN0_FREQ
comma
l_int|0x00002836
)brace
comma
(brace
id|AUD_DN1_FREQ
comma
l_int|0x00003418
)brace
comma
(brace
id|AUD_DN2_FREQ
comma
l_int|0x000029c7
)brace
comma
(brace
id|AUD_POLY0_DDS_CONSTANT
comma
l_int|0x000a7540
)brace
comma
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0004
comma
id|EN_DMTRX_SUMDIFF
op_or
id|EN_A2_AUTO_STEREO
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|a2_common
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|core-&gt;tvaudio
)paren
(brace
r_case
id|WW_NICAM_I
suffix:colon
multiline_comment|/* gives at least mono according to the dscaler guys */
multiline_comment|/* so use use that while nicam is broken ...         */
id|dprintk
c_func
(paren
l_string|&quot;%s PAL-I mono (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|a2_table1
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_CTL
comma
id|EN_A2_FORCE_MONO1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_A2_BG
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;%s PAL-BG A2 (status: known-good)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|a2_table1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_A2_DK
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;%s PAL-DK A2 (status: known-good)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|a2_table2
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_A2_M
suffix:colon
id|dprintk
c_func
(paren
l_string|&quot;%s NTSC-M A2 (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|a2_table3
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
DECL|function|set_audio_standard_EIAJ
r_static
r_void
id|set_audio_standard_EIAJ
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
r_static
r_const
r_struct
id|rlist
id|eiaj
(braket
)braket
op_assign
(brace
multiline_comment|/* TODO: eiaj register settings are not there yet ... */
(brace
multiline_comment|/* end of list */
)brace
comma
)brace
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;%s (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0002
comma
id|EN_EIAJ_AUTO_STEREO
)paren
suffix:semicolon
id|set_audio_registers
c_func
(paren
id|core
comma
id|eiaj
)paren
suffix:semicolon
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
DECL|function|set_audio_standard_FM
r_static
r_void
id|set_audio_standard_FM
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
macro_line|#if 0 /* FIXME */
r_switch
c_cond
(paren
id|dev-&gt;audio_properties.FM_deemphasis
)paren
(brace
r_case
id|WW_FM_DEEMPH_50
suffix:colon
singleline_comment|//Set De-emphasis filter coefficients for 50 usec
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_G0
comma
l_int|0x0C45
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_A0
comma
l_int|0x6262
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_B0
comma
l_int|0x1C29
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_A1
comma
l_int|0x3FC66
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_B1
comma
l_int|0x399A
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_G0
comma
l_int|0x0D80
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_A0
comma
l_int|0x6262
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_B0
comma
l_int|0x1C29
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_A1
comma
l_int|0x3FC66
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_B1
comma
l_int|0x399A
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_FM_DEEMPH_75
suffix:colon
singleline_comment|//Set De-emphasis filter coefficients for 75 usec
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_G0
comma
l_int|0x91B
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_A0
comma
l_int|0x6B68
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_B0
comma
l_int|0x11EC
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_A1
comma
l_int|0x3FC66
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH0_B1
comma
l_int|0x399A
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_G0
comma
l_int|0xAA0
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_A0
comma
l_int|0x6B68
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_B0
comma
l_int|0x11EC
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_A1
comma
l_int|0x3FC66
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_DEEMPH1_B1
comma
l_int|0x399A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#endif
id|dprintk
c_func
(paren
l_string|&quot;%s (status: unknown)&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
id|set_audio_start
c_func
(paren
id|core
comma
l_int|0x0020
comma
id|EN_FMRADIO_AUTO_STEREO
)paren
suffix:semicolon
singleline_comment|// AB: 10/2/01: this register is not being reset appropriately on occasion.
id|cx_write
c_func
(paren
id|AUD_POLYPH80SCALEFAC
comma
l_int|3
)paren
suffix:semicolon
id|set_audio_finish
c_func
(paren
id|core
)paren
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------- */
DECL|function|cx88_set_tvaudio
r_void
id|cx88_set_tvaudio
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
)paren
(brace
r_switch
c_cond
(paren
id|core-&gt;tvaudio
)paren
(brace
r_case
id|WW_BTSC
suffix:colon
id|set_audio_standard_BTSC
c_func
(paren
id|core
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
singleline_comment|// case WW_NICAM_I:
r_case
id|WW_NICAM_BGDKL
suffix:colon
id|set_audio_standard_NICAM
c_func
(paren
id|core
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_NICAM_I
suffix:colon
r_case
id|WW_A2_BG
suffix:colon
r_case
id|WW_A2_DK
suffix:colon
r_case
id|WW_A2_M
suffix:colon
id|set_audio_standard_A2
c_func
(paren
id|core
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_EIAJ
suffix:colon
id|set_audio_standard_EIAJ
c_func
(paren
id|core
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_FM
suffix:colon
id|set_audio_standard_FM
c_func
(paren
id|core
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_SYSTEM_L_AM
suffix:colon
id|set_audio_standard_NICAM_L
c_func
(paren
id|core
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WW_NONE
suffix:colon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;%s/0: unknown tv audio mode [%d]&bslash;n&quot;
comma
id|core-&gt;name
comma
id|core-&gt;tvaudio
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
DECL|function|cx88_get_stereo
r_void
id|cx88_get_stereo
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
comma
r_struct
id|v4l2_tuner
op_star
id|t
)paren
(brace
r_static
r_char
op_star
id|m
(braket
)braket
op_assign
(brace
l_string|&quot;stereo&quot;
comma
l_string|&quot;dual mono&quot;
comma
l_string|&quot;mono&quot;
comma
l_string|&quot;sap&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|p
(braket
)braket
op_assign
(brace
l_string|&quot;no pilot&quot;
comma
l_string|&quot;pilot c1&quot;
comma
l_string|&quot;pilot c2&quot;
comma
l_string|&quot;?&quot;
)brace
suffix:semicolon
id|u32
id|reg
comma
id|mode
comma
id|pilot
suffix:semicolon
id|reg
op_assign
id|cx_read
c_func
(paren
id|AUD_STATUS
)paren
suffix:semicolon
id|mode
op_assign
id|reg
op_amp
l_int|0x03
suffix:semicolon
id|pilot
op_assign
(paren
id|reg
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
id|core-&gt;astat
op_ne
id|reg
)paren
id|dprintk
c_func
(paren
l_string|&quot;AUD_STATUS: 0x%x [%s/%s] ctl=%s&bslash;n&quot;
comma
id|reg
comma
id|m
(braket
id|mode
)braket
comma
id|p
(braket
id|pilot
)braket
comma
id|aud_ctl_names
(braket
id|cx_read
c_func
(paren
id|AUD_CTL
)paren
op_amp
l_int|63
)braket
)paren
suffix:semicolon
id|core-&gt;astat
op_assign
id|reg
suffix:semicolon
id|t-&gt;capability
op_assign
id|V4L2_TUNER_CAP_STEREO
op_or
id|V4L2_TUNER_CAP_SAP
op_or
id|V4L2_TUNER_CAP_LANG1
op_or
id|V4L2_TUNER_CAP_LANG2
suffix:semicolon
id|t-&gt;rxsubchans
op_assign
id|V4L2_TUNER_SUB_MONO
suffix:semicolon
id|t-&gt;audmode
op_assign
id|V4L2_TUNER_MODE_MONO
suffix:semicolon
r_switch
c_cond
(paren
id|core-&gt;tvaudio
)paren
(brace
r_case
id|WW_BTSC
suffix:colon
id|t-&gt;capability
op_assign
id|V4L2_TUNER_CAP_STEREO
op_or
id|V4L2_TUNER_CAP_SAP
suffix:semicolon
id|t-&gt;rxsubchans
op_assign
id|V4L2_TUNER_SUB_STEREO
suffix:semicolon
r_if
c_cond
(paren
l_int|1
op_eq
id|pilot
)paren
(brace
multiline_comment|/* SAP */
id|t-&gt;rxsubchans
op_or_assign
id|V4L2_TUNER_SUB_SAP
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|WW_A2_BG
suffix:colon
r_case
id|WW_A2_DK
suffix:colon
r_case
id|WW_A2_M
suffix:colon
r_if
c_cond
(paren
l_int|1
op_eq
id|pilot
)paren
(brace
multiline_comment|/* stereo */
id|t-&gt;rxsubchans
op_assign
id|V4L2_TUNER_SUB_MONO
op_or
id|V4L2_TUNER_SUB_STEREO
suffix:semicolon
r_if
c_cond
(paren
l_int|0
op_eq
id|mode
)paren
id|t-&gt;audmode
op_assign
id|V4L2_TUNER_MODE_STEREO
suffix:semicolon
)brace
r_if
c_cond
(paren
l_int|2
op_eq
id|pilot
)paren
(brace
multiline_comment|/* dual language -- FIXME */
id|t-&gt;rxsubchans
op_assign
id|V4L2_TUNER_SUB_LANG1
op_or
id|V4L2_TUNER_SUB_LANG2
suffix:semicolon
id|t-&gt;audmode
op_assign
id|V4L2_TUNER_MODE_LANG1
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|WW_NICAM_BGDKL
suffix:colon
r_if
c_cond
(paren
l_int|0
op_eq
id|mode
)paren
id|t-&gt;audmode
op_assign
id|V4L2_TUNER_MODE_STEREO
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|t-&gt;rxsubchans
op_assign
id|V4L2_TUNER_SUB_MONO
suffix:semicolon
id|t-&gt;audmode
op_assign
id|V4L2_TUNER_MODE_MONO
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
DECL|function|cx88_set_stereo
r_void
id|cx88_set_stereo
c_func
(paren
r_struct
id|cx88_core
op_star
id|core
comma
id|u32
id|mode
)paren
(brace
id|u32
id|ctl
op_assign
id|UNSET
suffix:semicolon
id|u32
id|mask
op_assign
id|UNSET
suffix:semicolon
r_switch
c_cond
(paren
id|core-&gt;tvaudio
)paren
(brace
r_case
id|WW_BTSC
suffix:colon
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|V4L2_TUNER_MODE_MONO
suffix:colon
id|ctl
op_assign
id|EN_BTSC_FORCE_MONO
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_SAP
suffix:colon
id|ctl
op_assign
id|EN_BTSC_FORCE_SAP
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_STEREO
suffix:colon
id|ctl
op_assign
id|EN_BTSC_AUTO_STEREO
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|WW_A2_BG
suffix:colon
r_case
id|WW_A2_DK
suffix:colon
r_case
id|WW_A2_M
suffix:colon
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|V4L2_TUNER_MODE_MONO
suffix:colon
r_case
id|V4L2_TUNER_MODE_LANG1
suffix:colon
id|ctl
op_assign
id|EN_A2_FORCE_MONO1
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_LANG2
suffix:colon
id|ctl
op_assign
id|EN_A2_AUTO_MONO2
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_STEREO
suffix:colon
id|ctl
op_assign
id|EN_A2_AUTO_STEREO
op_or
id|EN_DMTRX_SUMR
suffix:semicolon
id|mask
op_assign
l_int|0x8bf
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|WW_NICAM_BGDKL
suffix:colon
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|V4L2_TUNER_MODE_MONO
suffix:colon
id|ctl
op_assign
id|EN_NICAM_FORCE_MONO1
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_LANG1
suffix:colon
id|ctl
op_assign
id|EN_NICAM_AUTO_MONO2
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_STEREO
suffix:colon
id|ctl
op_assign
id|EN_NICAM_FORCE_STEREO
op_or
id|EN_DMTRX_LR
suffix:semicolon
id|mask
op_assign
l_int|0x93f
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|WW_FM
suffix:colon
r_switch
c_cond
(paren
id|mode
)paren
(brace
r_case
id|V4L2_TUNER_MODE_MONO
suffix:colon
id|ctl
op_assign
id|EN_FMRADIO_FORCE_MONO
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
r_case
id|V4L2_TUNER_MODE_STEREO
suffix:colon
id|ctl
op_assign
id|EN_FMRADIO_AUTO_STEREO
suffix:semicolon
id|mask
op_assign
l_int|0x3f
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|UNSET
op_ne
id|ctl
)paren
(brace
id|cx_write
c_func
(paren
id|AUD_SOFT_RESET
comma
l_int|0x0001
)paren
suffix:semicolon
id|cx_andor
c_func
(paren
id|AUD_CTL
comma
id|mask
comma
id|ctl
)paren
suffix:semicolon
id|cx_write
c_func
(paren
id|AUD_SOFT_RESET
comma
l_int|0x0000
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;cx88_set_stereo: mask 0x%x, ctl 0x%x &quot;
l_string|&quot;[status=0x%x,ctl=0x%x,vol=0x%x]&bslash;n&quot;
comma
id|mask
comma
id|ctl
comma
id|cx_read
c_func
(paren
id|AUD_STATUS
)paren
comma
id|cx_read
c_func
(paren
id|AUD_CTL
)paren
comma
id|cx_sread
c_func
(paren
id|SHADOW_AUD_VOL_CTL
)paren
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
DECL|function|cx88_audio_thread
r_int
id|cx88_audio_thread
c_func
(paren
r_void
op_star
id|data
)paren
(brace
r_struct
id|cx88_core
op_star
id|core
op_assign
id|data
suffix:semicolon
r_struct
id|v4l2_tuner
id|t
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;cx88: tvaudio thread started&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
r_if
c_cond
(paren
id|kthread_should_stop
c_func
(paren
)paren
)paren
r_break
suffix:semicolon
multiline_comment|/* just monitor the audio status for now ... */
id|memset
c_func
(paren
op_amp
id|t
comma
l_int|0
comma
r_sizeof
(paren
id|t
)paren
)paren
suffix:semicolon
id|cx88_get_stereo
c_func
(paren
id|core
comma
op_amp
id|t
)paren
suffix:semicolon
id|msleep_interruptible
c_func
(paren
l_int|1000
)paren
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;cx88: tvaudio thread exiting&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------- */
DECL|variable|cx88_set_tvaudio
id|EXPORT_SYMBOL
c_func
(paren
id|cx88_set_tvaudio
)paren
suffix:semicolon
DECL|variable|cx88_set_stereo
id|EXPORT_SYMBOL
c_func
(paren
id|cx88_set_stereo
)paren
suffix:semicolon
DECL|variable|cx88_get_stereo
id|EXPORT_SYMBOL
c_func
(paren
id|cx88_get_stereo
)paren
suffix:semicolon
DECL|variable|cx88_audio_thread
id|EXPORT_SYMBOL
c_func
(paren
id|cx88_audio_thread
)paren
suffix:semicolon
multiline_comment|/*&n; * Local variables:&n; * c-basic-offset: 8&n; * End:&n; */
eof
