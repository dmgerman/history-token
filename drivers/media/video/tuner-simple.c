multiline_comment|/*&n; * $Id: tuner-simple.c,v 1.4 2005/02/15 15:59:35 kraxel Exp $&n; *&n; * i2c tv tuner chip device driver&n; * controls all those simple 4-control-bytes style tuners.&n; */
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/i2c.h&gt;
macro_line|#include &lt;linux/videodev.h&gt;
macro_line|#include &lt;media/tuner.h&gt;
multiline_comment|/* ---------------------------------------------------------------------- */
multiline_comment|/* tv standard selection for Temic 4046 FM5&n;   this value takes the low bits of control byte 2&n;   from datasheet Rev.01, Feb.00&n;     standard     BG      I       L       L2      D&n;     picture IF   38.9    38.9    38.9    33.95   38.9&n;     sound 1      33.4    32.9    32.4    40.45   32.4&n;     sound 2      33.16&n;     NICAM        33.05   32.348  33.05           33.05&n; */
DECL|macro|TEMIC_SET_PAL_I
mdefine_line|#define TEMIC_SET_PAL_I         0x05
DECL|macro|TEMIC_SET_PAL_DK
mdefine_line|#define TEMIC_SET_PAL_DK        0x09
DECL|macro|TEMIC_SET_PAL_L
mdefine_line|#define TEMIC_SET_PAL_L         0x0a 
singleline_comment|// SECAM ?
DECL|macro|TEMIC_SET_PAL_L2
mdefine_line|#define TEMIC_SET_PAL_L2        0x0b 
singleline_comment|// change IF !
DECL|macro|TEMIC_SET_PAL_BG
mdefine_line|#define TEMIC_SET_PAL_BG        0x0c
multiline_comment|/* tv tuner system standard selection for Philips FQ1216ME&n;   this value takes the low bits of control byte 2&n;   from datasheet &quot;1999 Nov 16&quot; (supersedes &quot;1999 Mar 23&quot;)&n;     standard &t;&t;BG&t;DK&t;I&t;L&t;L`&n;     picture carrier&t;38.90&t;38.90&t;38.90&t;38.90&t;33.95&n;     colour&t;&t;34.47&t;34.47&t;34.47&t;34.47&t;38.38&n;     sound 1&t;&t;33.40&t;32.40&t;32.90&t;32.40&t;40.45&n;     sound 2&t;&t;33.16&t;-&t;-&t;-&t;-&n;     NICAM&t;&t;33.05&t;33.05&t;32.35&t;33.05&t;39.80&n; */
DECL|macro|PHILIPS_SET_PAL_I
mdefine_line|#define PHILIPS_SET_PAL_I&t;0x01 /* Bit 2 always zero !*/
DECL|macro|PHILIPS_SET_PAL_BGDK
mdefine_line|#define PHILIPS_SET_PAL_BGDK&t;0x09
DECL|macro|PHILIPS_SET_PAL_L2
mdefine_line|#define PHILIPS_SET_PAL_L2&t;0x0a
DECL|macro|PHILIPS_SET_PAL_L
mdefine_line|#define PHILIPS_SET_PAL_L&t;0x0b
multiline_comment|/* system switching for Philips FI1216MF MK2&n;   from datasheet &quot;1996 Jul 09&quot;,&n;    standard         BG     L      L&squot;&n;    picture carrier  38.90  38.90  33.95&n;    colour&t;     34.47  34.37  38.38&n;    sound 1          33.40  32.40  40.45&n;    sound 2          33.16  -      -&n;    NICAM            33.05  33.05  39.80&n; */
DECL|macro|PHILIPS_MF_SET_BG
mdefine_line|#define PHILIPS_MF_SET_BG&t;0x01 /* Bit 2 must be zero, Bit 3 is system output */
DECL|macro|PHILIPS_MF_SET_PAL_L
mdefine_line|#define PHILIPS_MF_SET_PAL_L&t;0x03 
singleline_comment|// France
DECL|macro|PHILIPS_MF_SET_PAL_L2
mdefine_line|#define PHILIPS_MF_SET_PAL_L2&t;0x02 
singleline_comment|// L&squot;
multiline_comment|/* ---------------------------------------------------------------------- */
DECL|struct|tunertype
r_struct
id|tunertype
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|Vendor
r_int
r_char
id|Vendor
suffix:semicolon
DECL|member|Type
r_int
r_char
id|Type
suffix:semicolon
DECL|member|thresh1
r_int
r_int
id|thresh1
suffix:semicolon
multiline_comment|/*  band switch VHF_LO &lt;=&gt; VHF_HI  */
DECL|member|thresh2
r_int
r_int
id|thresh2
suffix:semicolon
multiline_comment|/*  band switch VHF_HI &lt;=&gt; UHF     */
DECL|member|VHF_L
r_int
r_char
id|VHF_L
suffix:semicolon
DECL|member|VHF_H
r_int
r_char
id|VHF_H
suffix:semicolon
DECL|member|UHF
r_int
r_char
id|UHF
suffix:semicolon
DECL|member|config
r_int
r_char
id|config
suffix:semicolon
DECL|member|IFPCoff
r_int
r_int
id|IFPCoff
suffix:semicolon
multiline_comment|/* 622.4=16*38.90 MHz PAL,&n;&t;&t;&t;&t;   732  =16*45.75 NTSCi,&n;&t;&t;&t;&t;   940  =16*58.75 NTSC-Japan&n;&t;&t;&t;&t;   704  =16*44    ATSC */
)brace
suffix:semicolon
multiline_comment|/*&n; *&t;The floats in the tuner struct are computed at compile time&n; *&t;by gcc and cast back to integers. Thus we don&squot;t violate the&n; *&t;&quot;no float in kernel&quot; rule.&n; */
DECL|variable|tuners
r_static
r_struct
id|tunertype
id|tuners
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;Temic PAL (4002 FH5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|140.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips PAL_I (FI1246 and compatibles)&quot;
comma
id|Philips
comma
id|PAL_I
comma
l_int|16
op_star
l_float|140.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips NTSC (FI1236,FM1236 and compatibles)&quot;
comma
id|Philips
comma
id|NTSC
comma
l_int|16
op_star
l_float|157.25
comma
l_int|16
op_star
l_float|451.25
comma
l_int|0xA0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Philips (SECAM+PAL_BG) (FI1216MF, FM1216MF, FR1216MF)&quot;
comma
id|Philips
comma
id|SECAM
comma
l_int|16
op_star
l_float|168.25
comma
l_int|16
op_star
l_float|447.25
comma
l_int|0xA7
comma
l_int|0x97
comma
l_int|0x37
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;NoTuner&quot;
comma
id|NoTuner
comma
id|NOTUNER
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
comma
(brace
l_string|&quot;Philips PAL_BG (FI1216 and compatibles)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|168.25
comma
l_int|16
op_star
l_float|447.25
comma
l_int|0xA0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic NTSC (4032 FY5)&quot;
comma
id|TEMIC
comma
id|NTSC
comma
l_int|16
op_star
l_float|157.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Temic PAL_I (4062 FY5)&quot;
comma
id|TEMIC
comma
id|PAL_I
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic NTSC (4036 FY5)&quot;
comma
id|TEMIC
comma
id|NTSC
comma
l_int|16
op_star
l_float|157.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Alps HSBH1&quot;
comma
id|TEMIC
comma
id|NTSC
comma
l_int|16
op_star
l_float|137.25
comma
l_int|16
op_star
l_float|385.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Alps TSBE1&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|137.25
comma
l_int|16
op_star
l_float|385.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Alps TSBB5&quot;
comma
id|Alps
comma
id|PAL_I
comma
multiline_comment|/* tested (UK UHF) with Modulartech MM205 */
l_int|16
op_star
l_float|133.25
comma
l_int|16
op_star
l_float|351.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|632
)brace
comma
(brace
l_string|&quot;Alps TSBE5&quot;
comma
id|Alps
comma
id|PAL
comma
multiline_comment|/* untested - data sheet guess. Only IF differs. */
l_int|16
op_star
l_float|133.25
comma
l_int|16
op_star
l_float|351.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|622
)brace
comma
(brace
l_string|&quot;Alps TSBC5&quot;
comma
id|Alps
comma
id|PAL
comma
multiline_comment|/* untested - data sheet guess. Only IF differs. */
l_int|16
op_star
l_float|133.25
comma
l_int|16
op_star
l_float|351.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|608
)brace
comma
(brace
l_string|&quot;Temic PAL_BG (4006FH5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Alps TSCH6&quot;
comma
id|Alps
comma
id|NTSC
comma
l_int|16
op_star
l_float|137.25
comma
l_int|16
op_star
l_float|385.25
comma
l_int|0x14
comma
l_int|0x12
comma
l_int|0x11
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Temic PAL_DK (4016 FY5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|168.25
comma
l_int|16
op_star
l_float|456.25
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips NTSC_M (MK2)&quot;
comma
id|Philips
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Temic PAL_I (4066 FY5)&quot;
comma
id|TEMIC
comma
id|PAL_I
comma
l_int|16
op_star
l_float|169.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic PAL* auto (4006 FN5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|169.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic PAL_BG (4009 FR5) or PAL_I (4069 FR5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|141.00
comma
l_int|16
op_star
l_float|464.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic NTSC (4039 FR5)&quot;
comma
id|TEMIC
comma
id|NTSC
comma
l_int|16
op_star
l_float|158.00
comma
l_int|16
op_star
l_float|453.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Temic PAL/SECAM multi (4046 FM5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|169.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips PAL_DK (FI1256 and compatibles)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips PAL/SECAM multi (FQ1216ME)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;LG PAL_I+FM (TAPC-I001D)&quot;
comma
id|LGINNOTEK
comma
id|PAL_I
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;LG PAL_I (TAPC-I701D)&quot;
comma
id|LGINNOTEK
comma
id|PAL_I
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;LG NTSC+FM (TPI8NSR01F)&quot;
comma
id|LGINNOTEK
comma
id|NTSC
comma
l_int|16
op_star
l_float|210.00
comma
l_int|16
op_star
l_float|497.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;LG PAL_BG+FM (TPI8PSB01D)&quot;
comma
id|LGINNOTEK
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;LG PAL_BG (TPI8PSB11D)&quot;
comma
id|LGINNOTEK
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic PAL* auto + FM (4009 FN5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|141.00
comma
l_int|16
op_star
l_float|464.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;SHARP NTSC_JP (2U5JF5540)&quot;
comma
id|SHARP
comma
id|NTSC
comma
multiline_comment|/* 940=16*58.75 NTSC@Japan */
l_int|16
op_star
l_float|137.25
comma
l_int|16
op_star
l_float|317.25
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|940
)brace
comma
(brace
l_string|&quot;Samsung PAL TCPM9091PD27&quot;
comma
id|Samsung
comma
id|PAL
comma
multiline_comment|/* from sourceforge v3tv */
l_int|16
op_star
l_int|169
comma
l_int|16
op_star
l_int|464
comma
l_int|0xA0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;MT20xx universal&quot;
comma
id|Microtune
comma
id|PAL
op_or
id|NTSC
comma
multiline_comment|/* see mt20xx.c for details */
)brace
comma
(brace
l_string|&quot;Temic PAL_BG (4106 FH5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|141.00
comma
l_int|16
op_star
l_float|464.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic PAL_DK/SECAM_L (4012 FY5)&quot;
comma
id|TEMIC
comma
id|PAL
comma
l_int|16
op_star
l_float|140.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x01
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Temic NTSC (4136 FY5)&quot;
comma
id|TEMIC
comma
id|NTSC
comma
l_int|16
op_star
l_float|158.00
comma
l_int|16
op_star
l_float|453.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;LG PAL (newer TAPC series)&quot;
comma
id|LGINNOTEK
comma
id|PAL
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips PAL/SECAM multi (FM1216ME MK3)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|442.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;LG NTSC (newer TAPC series)&quot;
comma
id|LGINNOTEK
comma
id|NTSC
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;HITACHI V7-J180AT&quot;
comma
id|HITACHI
comma
id|NTSC
comma
l_int|16
op_star
l_float|170.00
comma
l_int|16
op_star
l_float|450.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|940
)brace
comma
(brace
l_string|&quot;Philips PAL_MK (FI1216 MK)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|140.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0x01
comma
l_int|0xc2
comma
l_int|0xcf
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Philips 1236D ATSC/NTSC daul in&quot;
comma
id|Philips
comma
id|ATSC
comma
l_int|16
op_star
l_float|157.25
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Philips NTSC MK3 (FM1236MK3 or FM1236/F)&quot;
comma
id|Philips
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|442.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Philips 4 in 1 (ATI TV Wonder Pro/Conexant)&quot;
comma
id|Philips
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|442.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Microtune 4049 FM5&quot;
comma
id|Microtune
comma
id|PAL
comma
l_int|16
op_star
l_float|141.00
comma
l_int|16
op_star
l_float|464.00
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Panasonic VP27s/ENGE4324D&quot;
comma
id|Panasonic
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0xce
comma
l_int|940
)brace
comma
(brace
l_string|&quot;LG NTSC (TAPE series)&quot;
comma
id|LGINNOTEK
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|442.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Tenna TNF 8831 BGFF)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|161.25
comma
l_int|16
op_star
l_float|463.25
comma
l_int|0xa0
comma
l_int|0x90
comma
l_int|0x30
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Microtune 4042 FI5 ATSC/NTSC dual in&quot;
comma
id|Microtune
comma
id|NTSC
comma
l_int|16
op_star
l_float|162.00
comma
l_int|16
op_star
l_float|457.00
comma
l_int|0xa2
comma
l_int|0x94
comma
l_int|0x31
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;TCL 2002N&quot;
comma
id|TCL
comma
id|NTSC
comma
l_int|16
op_star
l_float|172.00
comma
l_int|16
op_star
l_float|448.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x08
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Philips PAL/SECAM_D (FM 1256 I-H3)&quot;
comma
id|Philips
comma
id|PAL
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|442.00
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|623
)brace
comma
(brace
l_string|&quot;Thomson DDT 7610 (ATSC/NTSC)&quot;
comma
id|THOMSON
comma
id|ATSC
comma
l_int|16
op_star
l_float|157.25
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0x39
comma
l_int|0x3a
comma
l_int|0x3c
comma
l_int|0x8e
comma
l_int|732
)brace
comma
(brace
l_string|&quot;Philips FQ1286&quot;
comma
id|Philips
comma
id|NTSC
comma
l_int|16
op_star
l_float|160.00
comma
l_int|16
op_star
l_float|454.00
comma
l_int|0x41
comma
l_int|0x42
comma
l_int|0x04
comma
l_int|0x8e
comma
l_int|940
)brace
comma
singleline_comment|// UHF band untested
(brace
l_string|&quot;tda8290+75&quot;
comma
id|Philips
comma
id|PAL
op_or
id|NTSC
comma
multiline_comment|/* see tda8290.c for details */
)brace
comma
)brace
suffix:semicolon
DECL|variable|tuner_count
r_int
r_const
r_int
id|tuner_count
op_assign
id|ARRAY_SIZE
c_func
(paren
id|tuners
)paren
suffix:semicolon
multiline_comment|/* ---------------------------------------------------------------------- */
DECL|function|tuner_getstatus
r_static
r_int
id|tuner_getstatus
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_int
r_char
id|byte
suffix:semicolon
r_if
c_cond
(paren
l_int|1
op_ne
id|i2c_master_recv
c_func
(paren
id|c
comma
op_amp
id|byte
comma
l_int|1
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
id|byte
suffix:semicolon
)brace
DECL|macro|TUNER_POR
mdefine_line|#define TUNER_POR       0x80
DECL|macro|TUNER_FL
mdefine_line|#define TUNER_FL        0x40
DECL|macro|TUNER_MODE
mdefine_line|#define TUNER_MODE      0x38
DECL|macro|TUNER_AFC
mdefine_line|#define TUNER_AFC       0x07
DECL|macro|TUNER_STEREO
mdefine_line|#define TUNER_STEREO    0x10 /* radio mode */
DECL|macro|TUNER_SIGNAL
mdefine_line|#define TUNER_SIGNAL    0x07 /* radio mode */
DECL|function|tuner_signal
r_static
r_int
id|tuner_signal
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_return
(paren
id|tuner_getstatus
c_func
(paren
id|c
)paren
op_amp
id|TUNER_SIGNAL
)paren
op_lshift
l_int|13
suffix:semicolon
)brace
DECL|function|tuner_stereo
r_static
r_int
id|tuner_stereo
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_return
(paren
id|tuner_getstatus
(paren
id|c
)paren
op_amp
id|TUNER_STEREO
)paren
suffix:semicolon
)brace
macro_line|#if 0 /* unused */
r_static
r_int
id|tuner_islocked
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_return
(paren
id|tuner_getstatus
(paren
id|c
)paren
op_amp
id|TUNER_FL
)paren
suffix:semicolon
)brace
r_static
r_int
id|tuner_afcstatus
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_return
(paren
id|tuner_getstatus
(paren
id|c
)paren
op_amp
id|TUNER_AFC
)paren
op_minus
l_int|2
suffix:semicolon
)brace
r_static
r_int
id|tuner_mode
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_return
(paren
id|tuner_getstatus
(paren
id|c
)paren
op_amp
id|TUNER_MODE
)paren
op_rshift
l_int|3
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* ---------------------------------------------------------------------- */
DECL|function|default_set_tv_freq
r_static
r_void
id|default_set_tv_freq
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
comma
r_int
r_int
id|freq
)paren
(brace
r_struct
id|tuner
op_star
id|t
op_assign
id|i2c_get_clientdata
c_func
(paren
id|c
)paren
suffix:semicolon
id|u8
id|config
suffix:semicolon
id|u16
id|div
suffix:semicolon
r_struct
id|tunertype
op_star
id|tun
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|4
)braket
suffix:semicolon
r_int
id|rc
suffix:semicolon
id|tun
op_assign
op_amp
id|tuners
(braket
id|t-&gt;type
)braket
suffix:semicolon
r_if
c_cond
(paren
id|freq
OL
id|tun-&gt;thresh1
)paren
(brace
id|config
op_assign
id|tun-&gt;VHF_L
suffix:semicolon
id|tuner_dbg
c_func
(paren
l_string|&quot;tv: VHF lowrange&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|freq
OL
id|tun-&gt;thresh2
)paren
(brace
id|config
op_assign
id|tun-&gt;VHF_H
suffix:semicolon
id|tuner_dbg
c_func
(paren
l_string|&quot;tv: VHF high range&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|config
op_assign
id|tun-&gt;UHF
suffix:semicolon
id|tuner_dbg
c_func
(paren
l_string|&quot;tv: UHF range&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* tv norm specific stuff for multi-norm tuners */
r_switch
c_cond
(paren
id|t-&gt;type
)paren
(brace
r_case
id|TUNER_PHILIPS_SECAM
suffix:colon
singleline_comment|// FI1216MF
multiline_comment|/* 0x01 -&gt; ??? no change ??? */
multiline_comment|/* 0x02 -&gt; PAL BDGHI / SECAM L */
multiline_comment|/* 0x04 -&gt; ??? PAL others / SECAM others ??? */
id|config
op_and_assign
op_complement
l_int|0x02
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_SECAM
)paren
id|config
op_or_assign
l_int|0x02
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TUNER_TEMIC_4046FM5
suffix:colon
id|config
op_and_assign
op_complement
l_int|0x0f
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_PAL_BG
)paren
(brace
id|config
op_or_assign
id|TEMIC_SET_PAL_BG
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_PAL_I
)paren
(brace
id|config
op_or_assign
id|TEMIC_SET_PAL_I
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_PAL_DK
)paren
(brace
id|config
op_or_assign
id|TEMIC_SET_PAL_DK
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_SECAM_L
)paren
(brace
id|config
op_or_assign
id|TEMIC_SET_PAL_L
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|TUNER_PHILIPS_FQ1216ME
suffix:colon
id|config
op_and_assign
op_complement
l_int|0x0f
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;std
op_amp
(paren
id|V4L2_STD_PAL_BG
op_or
id|V4L2_STD_PAL_DK
)paren
)paren
(brace
id|config
op_or_assign
id|PHILIPS_SET_PAL_BGDK
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_PAL_I
)paren
(brace
id|config
op_or_assign
id|PHILIPS_SET_PAL_I
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_SECAM_L
)paren
(brace
id|config
op_or_assign
id|PHILIPS_SET_PAL_L
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|TUNER_PHILIPS_ATSC
suffix:colon
multiline_comment|/* 0x00 -&gt; ATSC antenna input 1 */
multiline_comment|/* 0x01 -&gt; ATSC antenna input 2 */
multiline_comment|/* 0x02 -&gt; NTSC antenna input 1 */
multiline_comment|/* 0x03 -&gt; NTSC antenna input 2 */
id|config
op_and_assign
op_complement
l_int|0x03
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|t-&gt;std
op_amp
id|V4L2_STD_ATSC
)paren
)paren
id|config
op_or_assign
l_int|2
suffix:semicolon
multiline_comment|/* FIXME: input */
r_break
suffix:semicolon
r_case
id|TUNER_MICROTUNE_4042FI5
suffix:colon
multiline_comment|/* Set the charge pump for fast tuning */
id|tun-&gt;config
op_or_assign
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Philips FI1216MK2 remark from specification :&n;&t; * for channel selection involving band switching, and to ensure&n;&t; * smooth tuning to the desired channel without causing&n;&t; * unnecessary charge pump action, it is recommended to consider&n;&t; * the difference between wanted channel frequency and the&n;&t; * current channel frequency.  Unnecessary charge pump action&n;&t; * will result in very low tuning voltage which may drive the&n;&t; * oscillator to extreme conditions.&n;&t; *&n;&t; * Progfou: specification says to send config data before&n;&t; * frequency in case (wanted frequency &lt; current frequency).&n;&t; */
id|div
op_assign
id|freq
op_plus
id|tun-&gt;IFPCoff
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;type
op_eq
id|TUNER_PHILIPS_SECAM
op_logical_and
id|freq
OL
id|t-&gt;freq
)paren
(brace
id|buffer
(braket
l_int|0
)braket
op_assign
id|tun-&gt;config
suffix:semicolon
id|buffer
(braket
l_int|1
)braket
op_assign
id|config
suffix:semicolon
id|buffer
(braket
l_int|2
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|buffer
(braket
l_int|3
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
)brace
r_else
(brace
id|buffer
(braket
l_int|0
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|buffer
(braket
l_int|1
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|buffer
(braket
l_int|2
)braket
op_assign
id|tun-&gt;config
suffix:semicolon
id|buffer
(braket
l_int|3
)braket
op_assign
id|config
suffix:semicolon
)brace
id|tuner_dbg
c_func
(paren
l_string|&quot;tv 0x%02x 0x%02x 0x%02x 0x%02x&bslash;n&quot;
comma
id|buffer
(braket
l_int|0
)braket
comma
id|buffer
(braket
l_int|1
)braket
comma
id|buffer
(braket
l_int|2
)braket
comma
id|buffer
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|4
op_ne
(paren
id|rc
op_assign
id|i2c_master_send
c_func
(paren
id|c
comma
id|buffer
comma
l_int|4
)paren
)paren
)paren
id|tuner_warn
c_func
(paren
l_string|&quot;i2c i/o error: rc == %d (should be 4)&bslash;n&quot;
comma
id|rc
)paren
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;type
op_eq
id|TUNER_MICROTUNE_4042FI5
)paren
(brace
singleline_comment|// FIXME - this may also work for other tuners
r_int
r_int
id|timeout
op_assign
id|jiffies
op_plus
id|msecs_to_jiffies
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|u8
id|status_byte
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Wait until the PLL locks */
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
r_if
c_cond
(paren
id|time_after
c_func
(paren
id|jiffies
comma
id|timeout
)paren
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
l_int|1
op_ne
(paren
id|rc
op_assign
id|i2c_master_recv
c_func
(paren
id|c
comma
op_amp
id|status_byte
comma
l_int|1
)paren
)paren
)paren
(brace
id|tuner_warn
c_func
(paren
l_string|&quot;i2c i/o read error: rc == %d (should be 1)&bslash;n&quot;
comma
id|rc
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* bit 6 is PLL locked indicator */
r_if
c_cond
(paren
id|status_byte
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the charge pump for optimized phase noise figure */
id|tun-&gt;config
op_and_assign
op_complement
l_int|0x40
suffix:semicolon
id|buffer
(braket
l_int|0
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|buffer
(braket
l_int|1
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|buffer
(braket
l_int|2
)braket
op_assign
id|tun-&gt;config
suffix:semicolon
id|buffer
(braket
l_int|3
)braket
op_assign
id|config
suffix:semicolon
id|tuner_dbg
c_func
(paren
l_string|&quot;tv 0x%02x 0x%02x 0x%02x 0x%02x&bslash;n&quot;
comma
id|buffer
(braket
l_int|0
)braket
comma
id|buffer
(braket
l_int|1
)braket
comma
id|buffer
(braket
l_int|2
)braket
comma
id|buffer
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|4
op_ne
(paren
id|rc
op_assign
id|i2c_master_send
c_func
(paren
id|c
comma
id|buffer
comma
l_int|4
)paren
)paren
)paren
id|tuner_warn
c_func
(paren
l_string|&quot;i2c i/o error: rc == %d (should be 4)&bslash;n&quot;
comma
id|rc
)paren
suffix:semicolon
)brace
)brace
DECL|function|default_set_radio_freq
r_static
r_void
id|default_set_radio_freq
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
comma
r_int
r_int
id|freq
)paren
(brace
r_struct
id|tunertype
op_star
id|tun
suffix:semicolon
r_struct
id|tuner
op_star
id|t
op_assign
id|i2c_get_clientdata
c_func
(paren
id|c
)paren
suffix:semicolon
r_int
r_char
id|buffer
(braket
l_int|4
)braket
suffix:semicolon
r_int
id|div
suffix:semicolon
r_int
id|rc
suffix:semicolon
id|tun
op_assign
op_amp
id|tuners
(braket
id|t-&gt;type
)braket
suffix:semicolon
id|div
op_assign
id|freq
op_plus
(paren
r_int
)paren
(paren
l_int|16
op_star
l_float|10.7
)paren
suffix:semicolon
id|buffer
(braket
l_int|2
)braket
op_assign
id|tun-&gt;config
suffix:semicolon
r_switch
c_cond
(paren
id|t-&gt;type
)paren
(brace
r_case
id|TUNER_PHILIPS_FM1216ME_MK3
suffix:colon
r_case
id|TUNER_PHILIPS_FM1236_MK3
suffix:colon
id|buffer
(braket
l_int|3
)braket
op_assign
l_int|0x19
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TUNER_PHILIPS_FM1256_IH3
suffix:colon
id|div
op_assign
(paren
l_int|20
op_star
id|freq
)paren
op_div
l_int|16
op_plus
l_int|333
op_star
l_int|2
suffix:semicolon
id|buffer
(braket
l_int|2
)braket
op_assign
l_int|0x80
suffix:semicolon
id|buffer
(braket
l_int|3
)braket
op_assign
l_int|0x19
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TUNER_LG_PAL_FM
suffix:colon
id|buffer
(braket
l_int|3
)braket
op_assign
l_int|0xa5
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|buffer
(braket
l_int|3
)braket
op_assign
l_int|0xa4
suffix:semicolon
r_break
suffix:semicolon
)brace
id|buffer
(braket
l_int|0
)braket
op_assign
(paren
id|div
op_rshift
l_int|8
)paren
op_amp
l_int|0x7f
suffix:semicolon
id|buffer
(braket
l_int|1
)braket
op_assign
id|div
op_amp
l_int|0xff
suffix:semicolon
id|tuner_dbg
c_func
(paren
l_string|&quot;radio 0x%02x 0x%02x 0x%02x 0x%02x&bslash;n&quot;
comma
id|buffer
(braket
l_int|0
)braket
comma
id|buffer
(braket
l_int|1
)braket
comma
id|buffer
(braket
l_int|2
)braket
comma
id|buffer
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|4
op_ne
(paren
id|rc
op_assign
id|i2c_master_send
c_func
(paren
id|c
comma
id|buffer
comma
l_int|4
)paren
)paren
)paren
id|tuner_warn
c_func
(paren
l_string|&quot;i2c i/o error: rc == %d (should be 4)&bslash;n&quot;
comma
id|rc
)paren
suffix:semicolon
)brace
DECL|function|default_tuner_init
r_int
id|default_tuner_init
c_func
(paren
r_struct
id|i2c_client
op_star
id|c
)paren
(brace
r_struct
id|tuner
op_star
id|t
op_assign
id|i2c_get_clientdata
c_func
(paren
id|c
)paren
suffix:semicolon
id|tuner_info
c_func
(paren
l_string|&quot;type set to %d (%s)&bslash;n&quot;
comma
id|t-&gt;type
comma
id|tuners
(braket
id|t-&gt;type
)braket
dot
id|name
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|c-&gt;name
comma
id|tuners
(braket
id|t-&gt;type
)braket
dot
id|name
comma
r_sizeof
(paren
id|c-&gt;name
)paren
)paren
suffix:semicolon
id|t-&gt;tv_freq
op_assign
id|default_set_tv_freq
suffix:semicolon
id|t-&gt;radio_freq
op_assign
id|default_set_radio_freq
suffix:semicolon
id|t-&gt;has_signal
op_assign
id|tuner_signal
suffix:semicolon
id|t-&gt;is_stereo
op_assign
id|tuner_stereo
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Overrides for Emacs so that we follow Linus&squot;s tabbing style.&n; * ---------------------------------------------------------------------------&n; * Local variables:&n; * c-basic-offset: 8&n; * End:&n; */
eof
