multiline_comment|/*********************************************************************&n; *                &n; * Filename:      irproc.c&n; * Version:       1.0&n; * Description:   Various entries in the /proc file system&n; * Status:        Experimental.&n; * Author:        Thomas Davis, &lt;ratbert@radiks.net&gt;&n; * Created at:    Sat Feb 21 21:33:24 1998&n; * Modified at:   Sun Nov 14 08:54:54 1999&n; * Modified by:   Dag Brattli &lt;dagb@cs.uit.no&gt;&n; *&n; *     Copyright (c) 1998-1999, Dag Brattli &lt;dagb@cs.uit.no&gt;&n; *     Copyright (c) 1998, Thomas Davis, &lt;ratbert@radiks.net&gt;, &n; *     All Rights Reserved.&n; *      &n; *     This program is free software; you can redistribute it and/or &n; *     modify it under the terms of the GNU General Public License as &n; *     published by the Free Software Foundation; either version 2 of &n; *     the License, or (at your option) any later version.&n; *  &n; *     I, Thomas Davis, provide no warranty for any of this software. &n; *     This material is provided &quot;AS-IS&quot; and at no charge. &n; *     &n; ********************************************************************/
macro_line|#include &lt;linux/miscdevice.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/seq_file.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;net/irda/irda.h&gt;
macro_line|#include &lt;net/irda/irlap.h&gt;
macro_line|#include &lt;net/irda/irlmp.h&gt;
r_extern
r_struct
id|file_operations
id|discovery_seq_fops
suffix:semicolon
r_extern
r_struct
id|file_operations
id|irlap_seq_fops
suffix:semicolon
r_extern
r_struct
id|file_operations
id|irlmp_seq_fops
suffix:semicolon
r_extern
r_struct
id|file_operations
id|irttp_seq_fops
suffix:semicolon
r_extern
r_struct
id|file_operations
id|irias_seq_fops
suffix:semicolon
DECL|struct|irda_entry
r_struct
id|irda_entry
(brace
DECL|member|name
r_const
r_char
op_star
id|name
suffix:semicolon
DECL|member|fops
r_struct
id|file_operations
op_star
id|fops
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|proc_irda
r_struct
id|proc_dir_entry
op_star
id|proc_irda
suffix:semicolon
DECL|variable|irda_dirs
r_static
r_struct
id|irda_entry
id|irda_dirs
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;discovery&quot;
comma
op_amp
id|discovery_seq_fops
)brace
comma
(brace
l_string|&quot;irttp&quot;
comma
op_amp
id|irttp_seq_fops
)brace
comma
(brace
l_string|&quot;irlmp&quot;
comma
op_amp
id|irlmp_seq_fops
)brace
comma
(brace
l_string|&quot;irlap&quot;
comma
op_amp
id|irlap_seq_fops
)brace
comma
(brace
l_string|&quot;irias&quot;
comma
op_amp
id|irias_seq_fops
)brace
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Function irda_proc_register (void)&n; *&n; *    Register irda entry in /proc file system&n; *&n; */
DECL|function|irda_proc_register
r_void
id|__init
id|irda_proc_register
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_struct
id|proc_dir_entry
op_star
id|d
suffix:semicolon
id|proc_irda
op_assign
id|proc_mkdir
c_func
(paren
l_string|&quot;irda&quot;
comma
id|proc_net
)paren
suffix:semicolon
r_if
c_cond
(paren
id|proc_irda
op_eq
l_int|NULL
)paren
r_return
suffix:semicolon
id|proc_irda-&gt;owner
op_assign
id|THIS_MODULE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|irda_dirs
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|d
op_assign
id|create_proc_entry
c_func
(paren
id|irda_dirs
(braket
id|i
)braket
dot
id|name
comma
l_int|0
comma
id|proc_irda
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d
)paren
id|d-&gt;proc_fops
op_assign
id|irda_dirs
(braket
id|i
)braket
dot
id|fops
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Function irda_proc_unregister (void)&n; *&n; *    Unregister irda entry in /proc file system&n; *&n; */
DECL|function|irda_proc_unregister
r_void
id|__exit
id|irda_proc_unregister
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|proc_irda
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|irda_dirs
)paren
suffix:semicolon
id|i
op_increment
)paren
id|remove_proc_entry
c_func
(paren
id|irda_dirs
(braket
id|i
)braket
dot
id|name
comma
id|proc_irda
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
l_string|&quot;irda&quot;
comma
id|proc_net
)paren
suffix:semicolon
id|proc_irda
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
eof
