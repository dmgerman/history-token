multiline_comment|/* Bluetooth HCI driver model support. */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;net/bluetooth/bluetooth.h&gt;
macro_line|#include &lt;net/bluetooth/hci_core.h&gt;
macro_line|#ifndef CONFIG_BT_HCI_CORE_DEBUG
DECL|macro|BT_DBG
macro_line|#undef  BT_DBG
DECL|macro|BT_DBG
mdefine_line|#define BT_DBG(D...)
macro_line|#endif
DECL|function|show_name
r_static
id|ssize_t
id|show_name
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
id|buf
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|hdev-&gt;name
)paren
suffix:semicolon
)brace
DECL|function|show_type
r_static
id|ssize_t
id|show_type
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
id|buf
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%d&bslash;n&quot;
comma
id|hdev-&gt;type
)paren
suffix:semicolon
)brace
DECL|function|show_address
r_static
id|ssize_t
id|show_address
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
id|buf
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
id|bdaddr_t
id|bdaddr
suffix:semicolon
id|baswap
c_func
(paren
op_amp
id|bdaddr
comma
op_amp
id|hdev-&gt;bdaddr
)paren
suffix:semicolon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|batostr
c_func
(paren
op_amp
id|bdaddr
)paren
)paren
suffix:semicolon
)brace
DECL|function|show_flags
r_static
id|ssize_t
id|show_flags
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
id|buf
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;0x%lx&bslash;n&quot;
comma
id|hdev-&gt;flags
)paren
suffix:semicolon
)brace
DECL|function|show_inquiry_cache
r_static
id|ssize_t
id|show_inquiry_cache
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
id|buf
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_struct
id|inquiry_cache
op_star
id|cache
op_assign
op_amp
id|hdev-&gt;inq_cache
suffix:semicolon
r_struct
id|inquiry_entry
op_star
id|e
suffix:semicolon
r_int
id|n
op_assign
l_int|0
suffix:semicolon
id|hci_dev_lock_bh
c_func
(paren
id|hdev
)paren
suffix:semicolon
r_for
c_loop
(paren
id|e
op_assign
id|cache-&gt;list
suffix:semicolon
id|e
suffix:semicolon
id|e
op_assign
id|e-&gt;next
)paren
(brace
r_struct
id|inquiry_info
op_star
id|info
op_assign
op_amp
id|e-&gt;info
suffix:semicolon
id|bdaddr_t
id|bdaddr
suffix:semicolon
id|baswap
c_func
(paren
op_amp
id|bdaddr
comma
op_amp
id|info-&gt;bdaddr
)paren
suffix:semicolon
id|n
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|n
comma
l_string|&quot;%s %d %d %d 0x%.2x%.2x%.2x 0x%.4x 0x%.2x %u&bslash;n&quot;
comma
id|batostr
c_func
(paren
op_amp
id|bdaddr
)paren
comma
id|info-&gt;pscan_rep_mode
comma
id|info-&gt;pscan_period_mode
comma
id|info-&gt;pscan_mode
comma
id|info-&gt;dev_class
(braket
l_int|2
)braket
comma
id|info-&gt;dev_class
(braket
l_int|1
)braket
comma
id|info-&gt;dev_class
(braket
l_int|0
)braket
comma
id|info-&gt;clock_offset
comma
l_int|0
comma
id|e-&gt;timestamp
)paren
suffix:semicolon
)brace
id|hci_dev_unlock_bh
c_func
(paren
id|hdev
)paren
suffix:semicolon
r_return
id|n
suffix:semicolon
)brace
r_static
id|CLASS_DEVICE_ATTR
c_func
(paren
id|name
comma
id|S_IRUGO
comma
id|show_name
comma
l_int|NULL
)paren
suffix:semicolon
r_static
id|CLASS_DEVICE_ATTR
c_func
(paren
id|type
comma
id|S_IRUGO
comma
id|show_type
comma
l_int|NULL
)paren
suffix:semicolon
r_static
id|CLASS_DEVICE_ATTR
c_func
(paren
id|address
comma
id|S_IRUGO
comma
id|show_address
comma
l_int|NULL
)paren
suffix:semicolon
r_static
id|CLASS_DEVICE_ATTR
c_func
(paren
id|flags
comma
id|S_IRUGO
comma
id|show_flags
comma
l_int|NULL
)paren
suffix:semicolon
r_static
id|CLASS_DEVICE_ATTR
c_func
(paren
id|inquiry_cache
comma
id|S_IRUGO
comma
id|show_inquiry_cache
comma
l_int|NULL
)paren
suffix:semicolon
DECL|variable|bt_attrs
r_static
r_struct
id|class_device_attribute
op_star
id|bt_attrs
(braket
)braket
op_assign
(brace
op_amp
id|class_device_attr_name
comma
op_amp
id|class_device_attr_type
comma
op_amp
id|class_device_attr_address
comma
op_amp
id|class_device_attr_flags
comma
op_amp
id|class_device_attr_inquiry_cache
comma
l_int|NULL
)brace
suffix:semicolon
macro_line|#ifdef CONFIG_HOTPLUG
DECL|function|bt_hotplug
r_static
r_int
id|bt_hotplug
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
comma
r_char
op_star
op_star
id|envp
comma
r_int
id|num_envp
comma
r_char
op_star
id|buf
comma
r_int
id|size
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_int
id|n
comma
id|i
op_assign
l_int|0
suffix:semicolon
id|envp
(braket
id|i
op_increment
)braket
op_assign
id|buf
suffix:semicolon
id|n
op_assign
id|snprintf
c_func
(paren
id|buf
comma
id|size
comma
l_string|&quot;INTERFACE=%s&quot;
comma
id|hdev-&gt;name
)paren
op_plus
l_int|1
suffix:semicolon
id|buf
op_add_assign
id|n
suffix:semicolon
id|size
op_sub_assign
id|n
suffix:semicolon
r_if
c_cond
(paren
(paren
id|size
op_le
l_int|0
)paren
op_logical_or
(paren
id|i
op_ge
id|num_envp
)paren
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|envp
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|function|bt_release
r_static
r_void
id|bt_release
c_func
(paren
r_struct
id|class_device
op_star
id|cdev
)paren
(brace
r_struct
id|hci_dev
op_star
id|hdev
op_assign
id|class_get_devdata
c_func
(paren
id|cdev
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|hdev
)paren
suffix:semicolon
)brace
DECL|variable|bt_class
r_static
r_struct
r_class
id|bt_class
op_assign
(brace
dot
id|name
op_assign
l_string|&quot;bluetooth&quot;
comma
dot
id|release
op_assign
id|bt_release
comma
macro_line|#ifdef CONFIG_HOTPLUG
dot
id|hotplug
op_assign
id|bt_hotplug
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|function|hci_register_sysfs
r_int
id|hci_register_sysfs
c_func
(paren
r_struct
id|hci_dev
op_star
id|hdev
)paren
(brace
r_struct
id|class_device
op_star
id|cdev
op_assign
op_amp
id|hdev-&gt;class_dev
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_int
id|err
suffix:semicolon
id|BT_DBG
c_func
(paren
l_string|&quot;%p name %s type %d&quot;
comma
id|hdev
comma
id|hdev-&gt;name
comma
id|hdev-&gt;type
)paren
suffix:semicolon
id|cdev
op_member_access_from_pointer
r_class
op_assign
op_amp
id|bt_class
suffix:semicolon
id|class_set_devdata
c_func
(paren
id|cdev
comma
id|hdev
)paren
suffix:semicolon
id|strlcpy
c_func
(paren
id|cdev-&gt;class_id
comma
id|hdev-&gt;name
comma
id|BUS_ID_SIZE
)paren
suffix:semicolon
id|err
op_assign
id|class_device_register
c_func
(paren
id|cdev
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|bt_attrs
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
id|class_device_create_file
c_func
(paren
id|cdev
comma
id|bt_attrs
(braket
id|i
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|hci_unregister_sysfs
r_void
id|hci_unregister_sysfs
c_func
(paren
r_struct
id|hci_dev
op_star
id|hdev
)paren
(brace
r_struct
id|class_device
op_star
id|cdev
op_assign
op_amp
id|hdev-&gt;class_dev
suffix:semicolon
id|BT_DBG
c_func
(paren
l_string|&quot;%p name %s type %d&quot;
comma
id|hdev
comma
id|hdev-&gt;name
comma
id|hdev-&gt;type
)paren
suffix:semicolon
id|class_device_del
c_func
(paren
id|cdev
)paren
suffix:semicolon
)brace
DECL|function|bt_sysfs_init
r_int
id|__init
id|bt_sysfs_init
c_func
(paren
r_void
)paren
(brace
r_return
id|class_register
c_func
(paren
op_amp
id|bt_class
)paren
suffix:semicolon
)brace
DECL|function|bt_sysfs_cleanup
r_void
id|__exit
id|bt_sysfs_cleanup
c_func
(paren
r_void
)paren
(brace
id|class_unregister
c_func
(paren
op_amp
id|bt_class
)paren
suffix:semicolon
)brace
eof
