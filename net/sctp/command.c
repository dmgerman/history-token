multiline_comment|/* SCTP kernel reference Implementation Copyright (C) 1999-2001&n; * Cisco, Motorola, and IBM&n; * Copyright 2001 La Monte H.P. Yarroll&n; *&n; * This file is part of the SCTP kernel reference Implementation&n; *&n; * These functions manipulate sctp command sequences.&n; *&n; * The SCTP reference implementation is free software;&n; * you can redistribute it and/or modify it under the terms of&n; * the GNU General Public License as published by&n; * the Free Software Foundation; either version 2, or (at your option)&n; * any later version.&n; *&n; * The SCTP reference implementation is distributed in the hope that it&n; * will be useful, but WITHOUT ANY WARRANTY; without even the implied&n; *                 ************************&n; * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&n; * See the GNU General Public License for more details.&n; *&n; * You should have received a copy of the GNU General Public License&n; * along with GNU CC; see the file COPYING.  If not, write to&n; * the Free Software Foundation, 59 Temple Place - Suite 330,&n; * Boston, MA 02111-1307, USA.&n; *&n; * Please send any bug reports or fixes you make to the&n; * email address(es):&n; *    lksctp developers &lt;lksctp-developers@lists.sourceforge.net&gt;&n; *&n; * Or submit a bug report through the following website:&n; *    http://www.sf.net/projects/lksctp&n; *&n; * Written or modified by:&n; *    La Monte H.P. Yarroll &lt;piggy@acm.org&gt;&n; *    Karl Knutson &lt;karl@athena.chicago.il.us&gt;&n; *&n; * Any bugs reported given to us we will try to fix... any fixes shared will&n; * be incorporated into the next SCTP release.&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;net/sctp/sctp.h&gt;
macro_line|#include &lt;net/sctp/sm.h&gt;
multiline_comment|/* Initialize a block of memory as a command sequence. */
DECL|function|sctp_init_cmd_seq
r_int
id|sctp_init_cmd_seq
c_func
(paren
id|sctp_cmd_seq_t
op_star
id|seq
)paren
(brace
id|memset
c_func
(paren
id|seq
comma
l_int|0
comma
r_sizeof
(paren
id|sctp_cmd_seq_t
)paren
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
multiline_comment|/* We always succeed.  */
)brace
multiline_comment|/* Add a command to a sctp_cmd_seq_t.&n; * Return 0 if the command sequence is full.&n; */
DECL|function|sctp_add_cmd
r_int
id|sctp_add_cmd
c_func
(paren
id|sctp_cmd_seq_t
op_star
id|seq
comma
id|sctp_verb_t
id|verb
comma
id|sctp_arg_t
id|obj
)paren
(brace
r_if
c_cond
(paren
id|seq-&gt;next_free_slot
op_ge
id|SCTP_MAX_NUM_COMMANDS
)paren
r_goto
id|fail
suffix:semicolon
id|seq-&gt;cmds
(braket
id|seq-&gt;next_free_slot
)braket
dot
id|verb
op_assign
id|verb
suffix:semicolon
id|seq-&gt;cmds
(braket
id|seq-&gt;next_free_slot
op_increment
)braket
dot
id|obj
op_assign
id|obj
suffix:semicolon
r_return
l_int|1
suffix:semicolon
id|fail
suffix:colon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Return the next command structure in a sctp_cmd_seq.&n; * Returns NULL at the end of the sequence.&n; */
DECL|function|sctp_next_cmd
id|sctp_cmd_t
op_star
id|sctp_next_cmd
c_func
(paren
id|sctp_cmd_seq_t
op_star
id|seq
)paren
(brace
id|sctp_cmd_t
op_star
id|retval
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|seq-&gt;next_cmd
OL
id|seq-&gt;next_free_slot
)paren
id|retval
op_assign
op_amp
id|seq-&gt;cmds
(braket
id|seq-&gt;next_cmd
op_increment
)braket
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
eof
